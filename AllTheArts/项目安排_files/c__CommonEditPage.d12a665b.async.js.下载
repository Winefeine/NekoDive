/*! For license information please see c__CommonEditPage.d12a665b.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1332,11,12,13,15,16,19,22,23,30,112,209,227,267,287,346,369,372,380,381,394,421,501,588,610,708,798,847,927,1005,1008,1038,1043,1123,1299,1404,1405,1407,1408,1411,1701],{1008:function(e,t,n){var r=n(568),o=n(213),a=n(263),i=n(72),c=n(189),l=n(262),u=n(265),s=n(368),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||s(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},1009:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(1347),o=function(e){return e.Self="_self",e.Blank="_blank",e}(o||{});function a(e){try{new URL(e);return e}catch(t){return window.location.origin+(e.startsWith("/")?e:"/".concat(e))}}var i=function(e,t,n){try{null==e||e.preventDefault(),null==e||e.stopPropagation();var i=t,c=n;if(null!=e&&e.currentTarget){var l=e.currentTarget,u=l.getAttribute("href"),s="_blank"===l.getAttribute("target")?o.Blank:o.Self;!i&&u&&(i=u),!c&&s&&(c=s)}i&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Self;if(e){var n=window.appData||{},i=n.isAntDingTalkDesktopApp,c=n.isAntDingTalkMobileApp;window.__yq_antding_debug_openlink__?console.log("[YUQUE][DEBUG] universalOpenLink called.",{link:e,mode:t,isAntDingTalkDesktopApp:i,isAntDingTalkMobileApp:c}):t===o.Blank?c?r.ready((function(){r.biz.util.openLink({url:a(e)})})):window.open(e,o.Blank):window.location.href=e}}(i,c)}catch(e){console.error("Error in universalOpenLinkHandler",{link:t,mode:n,error:e})}};function c(e,t,n){return function(r){i(r,t,n),null==e||e(r)}}},1011:function(e,t,n){"use strict";var r=n(1221);n.d(t,"a",(function(){return r.a}))},1012:function(e,t,n){"use strict";var r=n(1237),o=n(593);n.d(t,"b",(function(){return o.a}));n(1228),n(1227);var a=n(592);n.d(t,"a",(function(){return a.a})),t.c=r.b},1016:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(1434),l={link:"Link",text:"Text"},u=function(e){var t,n=e.user,r=void 0===n?{}:n,a=e.type,i=void 0===a?l.text:a,u=e.withCard,s=e.children,d=e.style,f=void 0===d?{}:d,p=e.className,m=void 0===p?"":p,h=e.target,v=r.name,y=r.login;switch(i){case l.link:t=o.a.createElement("a",{href:"/".concat(y),"data-testid":"login-a-tag","data-desktoptarget":"_browser",target:h,style:f,className:m},s||v);break;case l.text:default:t=s||v}return u?o.a.createElement(c.a,{user:r,style:f,className:m},t):t};u.propTypes={user:i.a.object.isRequired,withCard:i.a.bool,style:i.a.object,className:i.a.string,type:i.a.oneOf([l.link,l.text,l.card]),children:i.a.any,target:i.a.object},t.b=u},1017:function(e,t,n){"use strict";var r=n(1223);t.a=r.a},110:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(1363),n(217)),i=n(1485),c=n.n(i),l=n(57),u=n.n(l),s=n(94),d=n.n(s),f=n(0),p=n.n(f),m=n(95),h=n.n(m),v=(n(588),["onKeyDown"]);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=[37,38,39,40],g=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_=function(e){var t,n=e.onKeyDown,r=d()(e,v),o=Object(f.useCallback)((t=n,function(e){return!(!g.includes(e.key)&&!b.includes(e.keyCode))||t(e)}),[n]);return p.a.createElement("ul",u()({},r,{onKeyDown:o}))},E=p.a.forwardRef((function(e){var t=Object.assign({},(c()(e),e));return p.a.createElement(a.a,u()({component:_},t))}));E.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.a.MenuProps),h()(E,a.a),t.a=E},114:function(e,t,n){"use strict";var r=n(8);t.a=r.a},115:function(e,t,n){"use strict";n(3155);var r=n(1259);n(310);t.a=r.a},1221:function(e,t,n){"use strict";var r=n(252);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,o=t.height,a=t.fill,i=t.format,c=t.quality,l=t.blur;if(e){if(e.startsWith("/r/avatar_buc/"))return e;if(e.startsWith("/__workers/r/avatar_buc/"))return e;if(e.includes(".svg"))return e;if(!e.includes(window.location.host)&&r.a.every((function(t){return!e.includes(t)})))return e;try{var u=new URL(e),s=u.searchParams,d=u.pathname,f=function(e,t){s.get("x-oss-process")?s.set("x-oss-process","".concat(s.get("x-oss-process"),"/").concat(e,",").concat(t)):s.append("x-oss-process","image/".concat(e,",").concat(t))};if(d.endsWith(".gif")&&(n||o)&&!i&&(i="jpeg",c="Q_85"),n||o){var p=[];a&&p.push("m_fill"),n&&p.push("w_".concat(n)),o&&p.push("h_".concat(o)),f("resize",p.join(","))}return i&&f("format",i),c&&f("quality",c),l&&f("blur",l),u.toString()}catch(t){return e}}}},1222:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(53),n(12)),a=n(0),i=n.n(a),c=n(6),l=n.n(c),u=n(63),s=n(5),d=n.n(s),f=n(47),p="index-module_mainInput_x4D9t",m="index-module_verifyResult_pdxsH",h="index-module_success_NhSta",v="index-module_inputVerify_kl-bC",y="index-module_editIcon_eXpln",b="index-module_promoCodeDefault_6iUh6";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function _(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=_.prototype=y.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==g(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function w(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.value,n=e.orderType,c=e.packageType,l=e.promoUsage,s=e.onChange,g=e.onVerifySuccess,w=e.verifyStyle,S=k(Object(a.useState)(!1),2),N=S[0],x=S[1],A=k(Object(a.useState)({}),2),P=A[0],C=A[1],j=k(Object(a.useState)(!1),2),T=j[0],I=j[1],M=function(){var e=O(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.promo.verify({code:t,promoUsage:l,order_type:n,package_type:c},{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=O(E().mark((function e(){var t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.isSpace?f.a.pay.close:f.a.memberPay.close,e.abrupt("return",t({order_id:P.order_id},{ignoreGlobalMessage:!0}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){M().then((function(e){I(!1),C(e),e.success&&g(e.promo)})).catch((function(){I(!1),C({success:!1,message:__("优惠码无效")})}))},D=function(e){P.success&&C({success:!1,message:__("优惠码已修改，请重新验证")}),s&&s(e)},U=function(){var e=O(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,e.next=4,L();case 4:return e.next=6,R();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),I(!1),C({success:!1,message:__("解绑失败")});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),B=d()(m,_({},h,P.success));return N?i.a.createElement("span",null,i.a.createElement(o.a,{"data-testid":"verifier-input",type:"text",value:t,onChange:function(e){return D(e.target.value&&e.target.value.trim())},suffix:i.a.createElement("a",{className:d()(w,v),onClick:R,disabled:T,"data-testid":"verifier-a"},__("验证")),className:p,placeholder:__("在此输入")}),i.a.createElement("div",{className:B,"data-testid":"verifier-message"},i.a.createElement("span",null,P.message),P.isLocked?i.a.createElement(r.a,{type:"link",disabled:T,onClick:U},T?__("解绑中"):__("解绑")):null)):i.a.createElement("span",{className:b,onClick:function(){return x(!0)}},__("填写优惠码"),i.a.createElement(u.b,{name:"edit-border",className:y,width:14,height:14}))};N.propTypes={value:l.a.string,promoUsage:l.a.string,orderType:l.a.number,packageType:l.a.number,onChange:l.a.func,onVerifySuccess:l.a.func};t.a=N},1224:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=721)}({199:function(e,t,n){"use strict";var r=n(201);e.exports=r},201:function(e,t,n){"use strict";var r=n(203),o=n(204),a=n(202),i=n(205),c=new a,l=!1,u="",s=null,d={},f=/{.*}/;try{var p=window.name.match(f);p&&p[0]&&(d=JSON.parse(p[0]))}catch(e){d={}}d.hostOrigin&&".dingtalk.com"===d.hostOrigin.split(":")[1].slice(-13)&&d.containerId&&(l=!0,u=d.hostOrigin,s=d.containerId);var m={},h=new Promise((function(e,t){m._resolve=e,m._reject=t})),v={},y=null;window.top!==window?(y=window.top,m._resolve()):"object"==typeof dingtalk&&"object"==typeof dingtalk.platform&&"function"==typeof dingtalk.platform.invokeAPI&&(y=window,m._resolve()),v[i.SYS_INIT]=function(e){y=e.frameWindow,m._resolve(),e.respond({})},window.addEventListener("message",(function(e){var t=e.data,n=e.origin;if(n===u)if("response"===t.type&&t.msgId){var r=t.msgId;(a=c.getMsyById(r))&&a.methodName!==i.SYS_EVENT&&a.receiveResponse(t.body,!t.success)}else if("event"===t.type&&t.msgId)r=t.msgId,(a=c.getMsyById(r))&&a.receiveEvent(t.eventName,t.body);else if("request"===t.type&&t.msgId){var a=new o(e.source,n,t);v[a.methodName]&&v[a.methodName](a)}})),t.invokeAPI=function(e,t){var n=new r(s,e,t);return l&&h.then((function(){y&&y.postMessage(n.getPayload(),u),c.addPending(n)})),n};var b=null;t.addEventListener=function(e,n){b||(b=t.invokeAPI(i.SYS_EVENT,{})),b.addEventListener(e,n)},t.removeEventListener=function(e,t){b&&b.removeEventListener(e,t)}},202:function(e,t,n){"use strict";var r=function(){this.pendingMsgs={}};r.prototype.addPending=function(e){this.pendingMsgs[e.id]=e;var t=function(){delete this.pendingMsgs[e.id],e.removeEventListener("_finish",t)}.bind(this);e.addEventListener("_finish",t)},r.prototype.getMsyById=function(e){return this.pendingMsgs[e]},e.exports=r},203:function(e,t,n){"use strict";var r=n(716),o=n(715),a=0,i=Math.floor(1e3*Math.random()),c=function(){return 1e3*(1e3*i+Math.floor(1e3*Math.random()))+ ++a%1e3},l={code:408,reason:"timeout"},u={TIMEOUT:"_timeout",FINISH:"_finish"},s={timeout:-1},d=function(e,t,n,r){this.id=c(),this.methodName=t,this.containerId=e,this.option=o({},s,r),n=n||{},this._p={},this.result=new Promise(function(e,t){this._p._resolve=e,this._p._reject=t}.bind(this)),this.callbacks={},this.plainMsg=this._handleMsg(n),this._eventsHandle={},this._timeoutTimer=null,this._initTimeout(),this.isFinish=!1};d.prototype._initTimeout=function(){this._clearTimeout(),this.option.timeout>0&&(this._timeoutTimer=setTimeout(function(){this.receiveEvent(u.TIMEOUT),this.receiveResponse(l,!0)}.bind(this),this.option.timeout))},d.prototype._clearTimeout=function(){clearTimeout(this._timeoutTimer)},d.prototype._handleMsg=function(e){var t={};return Object.keys(e).forEach(function(n){var o=e[n];"function"==typeof o&&"on"===n.slice(0,2)?this.callbacks[n]=o:t[n]=r(o)}.bind(this)),t},d.prototype.getPayload=function(){return{msgId:this.id,containerId:this.containerId,methodName:this.methodName,body:this.plainMsg,type:"request"}},d.prototype.receiveEvent=function(e,t){if(this.isFinish&&e!==u.FINISH)return!1;e!==u.FINISH&&e!==u.TIMEOUT&&this._initTimeout(),Array.isArray(this._eventsHandle[e])&&this._eventsHandle[e].forEach((function(e){try{e(t)}catch(e){console.error(t)}}));var n="on"+e.charAt(0).toUpperCase()+e.slice(1);return this.callbacks[n]&&this.callbacks[n](t),!0},d.prototype.addEventListener=function(e,t){if(!e||"function"!=typeof t)throw"eventName is null or handle is not a function, addEventListener fail";Array.isArray(this._eventsHandle[e])||(this._eventsHandle[e]=[]),this._eventsHandle[e].push(t)},d.prototype.removeEventListener=function(e,t){if(!e||!t)throw"eventName is null or handle is null, invoke removeEventListener fail";if(Array.isArray(this._eventsHandle[e])){var n=this._eventsHandle[e].indexOf(t);-1!==n&&this._eventsHandle[e].splice(n,1)}},d.prototype.receiveResponse=function(e,t){return!0!==this.isFinish&&(this._clearTimeout(),(t=!!t)?this._p._reject(e):this._p._resolve(e),setTimeout(function(){this.receiveEvent(u.FINISH)}.bind(this),0),this.isFinish=!0,!0)},e.exports=d},204:function(e,t,n){"use strict";var r=function(e,t,n){if(this._msgId=n.msgId,this.frameWindow=e,this.methodName=n.methodName,this.clientOrigin=t,this.containerId=n.containerId,this.params=n.body,!this._msgId)throw"msgId not exist";if(!this.frameWindow)throw"frameWindow not exist";if(!this.methodName)throw"methodName not exits";if(!this.clientOrigin)throw"clientOrigin not exist";this.hasResponded=!1};r.prototype.respond=function(e,t){if(t=!!t,!0!==this.hasResponded){var n={type:"response",success:!t,body:e,msgId:this._msgId};this.frameWindow.postMessage(n,this.clientOrigin),this.hasResponded=!0}},r.prototype.emit=function(e,t){var n={type:"event",eventName:e,body:t,msgId:this._msgId};this.frameWindow.postMessage(n,this.clientOrigin)},e.exports=r},205:function(e,t,n){"use strict";e.exports={SYS_EVENT:"SYS_openAPIContainerInitEvent",SYS_INIT:"SYS_openAPIContainerInit"}},4:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},714:function(e,t,n){(function(e,n){function r(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function a(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function c(e,t,n,r){var o=-1,a=e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}function l(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function u(e){return e&&e.Object===Object?e:null}function s(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function d(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function f(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function p(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function m(){this.__data__=It?It(null):{}}function h(e){return this.has(e)&&delete this.__data__[e]}function v(e){var t=this.__data__;if(It){var n=t[e];return n===Ae?void 0:n}return vt.call(t,e)?t[e]:void 0}function y(e){var t=this.__data__;return It?void 0!==t[e]:vt.call(t,e)}function b(e,t){return this.__data__[e]=It&&void 0===t?Ae:t,this}function g(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(){this.__data__=[]}function E(e){var t=this.__data__,n=U(t,e);return!(n<0||(n==t.length-1?t.pop():St.call(t,n,1),0))}function w(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]}function O(e){return U(this.__data__,e)>-1}function k(e,t){var n=this.__data__,r=U(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(){this.__data__={hash:new p,map:new(Pt||g),string:new p}}function x(e){return re(this,e).delete(e)}function A(e){return re(this,e).get(e)}function P(e){return re(this,e).has(e)}function C(e,t){return re(this,e).set(e,t),this}function j(e){this.__data__=new g(e)}function T(){this.__data__=new g}function I(e){return this.__data__.delete(e)}function M(e){return this.__data__.get(e)}function L(e){return this.__data__.has(e)}function R(e,t){var n=this.__data__;return n instanceof g&&n.__data__.length==xe&&(n=this.__data__=new S(n.__data__)),n.set(e,t),this}function D(e,t,n){var r=e[t];vt.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function U(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function B(e,t){return e&&ee(t,Ne(t),e)}function z(e,t,n,r,o,i,c){var l;if(r&&(l=i?r(e,o,i,c):r(e)),void 0!==l)return l;if(!we(e))return e;var u=Vt(e);if(u){if(l=le(e),!t)return J(e,l)}else{var d=ce(e),f=d==Ie||d==Me;if(Gt(e))return $(e,t);if(d==De||d==Ce||f&&!i){if(s(e))return i?e:{};if(l=ue(f?{}:e),!t)return te(e,B(l,e))}else{if(!rt[d])return i?e:{};l=se(e,d,z,t)}}c||(c=new j);var p=c.get(e);if(p)return p;if(c.set(e,l),!u)var m=n?ne(e):Ne(e);return a(m||e,(function(o,a){m&&(o=e[a=o]),D(l,a,z(o,t,n,r,a,e,c))})),l}function F(e){return we(e)?Ot(e):{}}function V(e,t,n){var r=t(e);return Vt(e)?r:i(r,n(e))}function G(e,t){return vt.call(e,t)||"object"==typeof e&&t in e&&null===ae(e)}function Y(e){return xt(Object(e))}function $(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function q(e){var t=new e.constructor(e.byteLength);return new Et(t).set(new Et(e)),t}function W(e,t){var n=t?q(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function H(e,t,n){return c(t?n(d(e),!0):d(e),r,new e.constructor)}function K(e){var t=new e.constructor(e.source,et.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){return c(t?n(f(e),!0):f(e),o,new e.constructor)}function Q(e){return zt?Object(zt.call(e)):{}}function X(e,t){var n=t?q(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function J(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function ee(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var i=t[o];D(n,i,r?r(n[i],e[i],i,n,e):e[i])}return n}function te(e,t){return ee(e,ie(e),t)}function ne(e){return V(e,Ne,ie)}function re(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map}function oe(e,t){var n=e[t];return ke(n)?n:void 0}function ae(e){return Nt(Object(e))}function ie(e){return wt(Object(e))}function ce(e){return yt.call(e)}function le(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&vt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ue(e){return"function"!=typeof e.constructor||me(e)?{}:F(ae(e))}function se(e,t,n,r){var o=e.constructor;switch(t){case Ve:return q(e);case je:case Te:return new o(+e);case Ge:return W(e,r);case Ye:case $e:case qe:case We:case He:case Ke:case Ze:case Qe:case Xe:return X(e,r);case Le:return H(e,r,n);case Re:case ze:return new o(e);case Ue:return K(e);case Be:return Z(e,r,n);case Fe:return Q(e)}}function de(e){var t=e?e.length:void 0;return Ee(t)&&(Vt(e)||Se(e)||ye(e))?l(t,String):null}function fe(e,t){return!!(t=null==t?Pe:t)&&("number"==typeof e||nt.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function me(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||mt)}function he(e){if(null!=e){try{return ht.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ve(e,t){return e===t||e!=e&&t!=t}function ye(e){return ge(e)&&vt.call(e,"callee")&&(!kt.call(e,"callee")||yt.call(e)==Ce)}function be(e){return null!=e&&Ee(Ft(e))&&!_e(e)}function ge(e){return Oe(e)&&be(e)}function _e(e){var t=we(e)?yt.call(e):"";return t==Ie||t==Me}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Pe}function we(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oe(e){return!!e&&"object"==typeof e}function ke(e){return!!we(e)&&(_e(e)||s(e)?bt:tt).test(he(e))}function Se(e){return"string"==typeof e||!Vt(e)&&Oe(e)&&yt.call(e)==ze}function Ne(e){var t=me(e);if(!t&&!be(e))return Y(e);var n=de(e),r=!!n,o=n||[],a=o.length;for(var i in e)!G(e,i)||r&&("length"==i||fe(i,a))||t&&"constructor"==i||o.push(i);return o}var xe=200,Ae="__lodash_hash_undefined__",Pe=9007199254740991,Ce="[object Arguments]",je="[object Boolean]",Te="[object Date]",Ie="[object Function]",Me="[object GeneratorFunction]",Le="[object Map]",Re="[object Number]",De="[object Object]",Ue="[object RegExp]",Be="[object Set]",ze="[object String]",Fe="[object Symbol]",Ve="[object ArrayBuffer]",Ge="[object DataView]",Ye="[object Float32Array]",$e="[object Float64Array]",qe="[object Int8Array]",We="[object Int16Array]",He="[object Int32Array]",Ke="[object Uint8Array]",Ze="[object Uint8ClampedArray]",Qe="[object Uint16Array]",Xe="[object Uint32Array]",Je=/[\\^$.*+?()[\]{}|]/g,et=/\w*$/,tt=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,rt={};rt[Ce]=rt["[object Array]"]=rt[Ve]=rt[Ge]=rt[je]=rt[Te]=rt[Ye]=rt[$e]=rt[qe]=rt[We]=rt[He]=rt[Le]=rt[Re]=rt[De]=rt[Ue]=rt[Be]=rt[ze]=rt[Fe]=rt[Ke]=rt[Ze]=rt[Qe]=rt[Xe]=!0,rt["[object Error]"]=rt[Ie]=rt["[object WeakMap]"]=!1;var ot={function:!0,object:!0},at=ot[typeof t]&&t&&!t.nodeType?t:void 0,it=ot[typeof e]&&e&&!e.nodeType?e:void 0,ct=it&&it.exports===at?at:void 0,lt=u(at&&it&&"object"==typeof n&&n),ut=u(ot[typeof self]&&self),st=u(ot[typeof window]&&window),dt=u(ot[typeof this]&&this),ft=lt||st!==(dt&&dt.window)&&st||ut||dt||Function("return this")(),pt=Array.prototype,mt=Object.prototype,ht=Function.prototype.toString,vt=mt.hasOwnProperty,yt=mt.toString,bt=RegExp("^"+ht.call(vt).replace(Je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=ct?ft.Buffer:void 0,_t=ft.Symbol,Et=ft.Uint8Array,wt=Object.getOwnPropertySymbols,Ot=Object.create,kt=mt.propertyIsEnumerable,St=pt.splice,Nt=Object.getPrototypeOf,xt=Object.keys,At=oe(ft,"DataView"),Pt=oe(ft,"Map"),Ct=oe(ft,"Promise"),jt=oe(ft,"Set"),Tt=oe(ft,"WeakMap"),It=oe(Object,"create"),Mt=he(At),Lt=he(Pt),Rt=he(Ct),Dt=he(jt),Ut=he(Tt),Bt=_t?_t.prototype:void 0,zt=Bt?Bt.valueOf:void 0;p.prototype.clear=m,p.prototype.delete=h,p.prototype.get=v,p.prototype.has=y,p.prototype.set=b,g.prototype.clear=_,g.prototype.delete=E,g.prototype.get=w,g.prototype.has=O,g.prototype.set=k,S.prototype.clear=N,S.prototype.delete=x,S.prototype.get=A,S.prototype.has=P,S.prototype.set=C,j.prototype.clear=T,j.prototype.delete=I,j.prototype.get=M,j.prototype.has=L,j.prototype.set=R;var Ft=function(e){return null==e?void 0:e.length};wt||(ie=function(){return[]}),(At&&ce(new At(new ArrayBuffer(1)))!=Ge||Pt&&ce(new Pt)!=Le||Ct&&"[object Promise]"!=ce(Ct.resolve())||jt&&ce(new jt)!=Be||Tt&&"[object WeakMap]"!=ce(new Tt))&&(ce=function(e){var t=yt.call(e),n=t==De?e.constructor:void 0,r=n?he(n):void 0;if(r)switch(r){case Mt:return Ge;case Lt:return Le;case Rt:return"[object Promise]";case Dt:return Be;case Ut:return"[object WeakMap]"}return t});var Vt=Array.isArray,Gt=gt?function(e){return e instanceof gt}:function(){return!1};e.exports=z}).call(t,n(719)(e),n(4))},715:function(e,t,n){function r(e,t,n){var r=e[t];_.call(e,t)&&l(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function o(e,t,n,o){n||(n={});for(var a=-1,i=t.length;++a<i;){var c=t[a];r(n,c,o?o(n[c],e[c],c,n,e):e[c])}return n}function a(e,t){return!!(t=null==t?h:t)&&("number"==typeof e||b.test(e))&&e>-1&&e%1==0&&e<t}function i(e,t,n){if(!f(n))return!1;var r=typeof t;return!!("number"==r?u(n)&&a(t,n.length):"string"==r&&t in n)&&l(n[t],e)}function c(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||g)}function l(e,t){return e===t||e!=e&&t!=t}function u(e){return null!=e&&d(O(e))&&!s(e)}function s(e){var t=f(e)?E.call(e):"";return t==v||t==y}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var p=n(717),m=n(718),h=9007199254740991,v="[object Function]",y="[object GeneratorFunction]",b=/^(?:0|[1-9]\d*)$/,g=Object.prototype,_=g.hasOwnProperty,E=g.toString,w=!g.propertyIsEnumerable.call({valueOf:1},"valueOf"),O=function(e){return null==e?void 0:e.length},k=function(e){return m((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,c=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,c&&i(n[0],n[1],c)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l)}return t}))}((function(e,t){if(w||c(t)||u(t))o(t,p(t),e);else for(var n in t)_.call(t,n)&&r(e,n,t[n])}));e.exports=k},716:function(e,t,n){function r(e){return o(e,!0,!0)}var o=n(714);e.exports=r},717:function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function r(e,t){var r=S(e)||c(e)?n(e.length,String):[],o=r.length,i=!!o;for(var l in e)!t&&!E.call(e,l)||i&&("length"==l||a(l,o))||r.push(l);return r}function o(e){if(!i(e))return k(e);var t=[];for(var n in Object(e))E.call(e,n)&&"constructor"!=n&&t.push(n);return t}function a(e,t){return!!(t=null==t?h:t)&&("number"==typeof e||g.test(e))&&e>-1&&e%1==0&&e<t}function i(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function c(e){return u(e)&&E.call(e,"callee")&&(!O.call(e,"callee")||w.call(e)==v)}function l(e){return null!=e&&d(e.length)&&!s(e)}function u(e){return p(e)&&l(e)}function s(e){var t=f(e)?w.call(e):"";return t==y||t==b}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){return!!e&&"object"==typeof e}function m(e){return l(e)?r(e):o(e)}var h=9007199254740991,v="[object Arguments]",y="[object Function]",b="[object GeneratorFunction]",g=/^(?:0|[1-9]\d*)$/,_=Object.prototype,E=_.hasOwnProperty,w=_.toString,O=_.propertyIsEnumerable,k=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),S=Array.isArray;e.exports=m},718:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){return t=w(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=w(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=r[o];return c[t]=i,n(e,this,c)}}function o(e,t){if("function"!=typeof e)throw new TypeError(d);return r(e,t=void 0===t?t:u(t))}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function c(e){return"symbol"==typeof e||i(e)&&E.call(e)==h}function l(e){return e?(e=s(e))===f||e===-f?(e<0?-1:1)*p:e==e?e:0:0===e?e:0}function u(e){var t=l(e),n=t%1;return t==t?n?t-n:t:0}function s(e){if("number"==typeof e)return e;if(c(e))return m;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(v,"");var n=b.test(e);return n||g.test(e)?_(e.slice(2),n?2:8):y.test(e)?m:+e}var d="Expected a function",f=1/0,p=17976931348623157e292,m=NaN,h="[object Symbol]",v=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,b=/^0b[01]+$/i,g=/^0o[0-7]+$/i,_=parseInt,E=Object.prototype.toString,w=Math.max;e.exports=o},719:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},721:function(e,t,n){e.exports=n(199)}})},1227:function(e,t,n){"use strict";t.a=function(e){return null}},1228:function(e,t,n){"use strict";t.a=function(e){return null}},1231:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){var r=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var n;1===t.length&&t[0].length>0&&(t=t[0]),n=(t=t.filter((function(e){return e})))[0];for(var r=1;r<t.length;r+=1)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n};n.max=function(){var e=[].slice.call(arguments,0);return r("isAfter",e)},n.min=function(){var e=[].slice.call(arguments,0);return r("isBefore",e)}}}()},1235:function(e,t,n){"use strict";var r=n(211),o=n.n(r),a=n(64),i=n.n(a),c=n(149),l=n(429),u=n(114),s={getExportFormats:function(){return i.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:c.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,n){var r=e.abilities;if(!r)return[];var o=[];"Design"===e.type&&o.push({action:u.a.BOOK.manage_assets,can:r.create_doc}),o.push({action:u.a.BOOK.collaborators,can:r.create_doc}),s.isMixingType(e)&&o.push({action:u.a.BOOK.statistics,can:r.manage}),"Design"!==e.type&&o.push({action:u.a.BOOK.recycles,can:r.create_doc});var a=[];return a.push({action:u.a.BOOK.rename_book,can:r.modify_setting||r.manage}),a.push({action:u.a.BOOK.delete_book,can:r.destroy}),a.push({action:u.a.BOOK.settings,can:r.create_doc}),o.find((function(e){return e.can}))&&a.find((function(e){return e.can}))&&o.push({action:{cmd:"divider"}}),o.push.apply(o,a),o},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var n=e.user;return n?t={type:n.login,text:n.name}:t},getBelongs:function(e){var t=this,n=e.map((function(e){return t.getBelong(e)}));return(n=o()(n,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),n},filterByBelong:function(e,t){var n=this;return t?e.filter((function(e){return n.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&c.MIXING_BOOK_TYPES.includes(e.type)},shouldShowTempStoreBox:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.create_doc},MEMBER_LIST_CONSTANT:{MAX_SIZE:2e3,PAGE_SIZE:500},getMemberCount:function(e,t){return e>s.MEMBER_LIST_CONSTANT.MAX_SIZE?"".concat(s.MEMBER_LIST_CONSTANT.MAX_SIZE,"+"):e<s.MEMBER_LIST_CONSTANT.PAGE_SIZE?(null==t?void 0:t.length)||0:e},getDefaultBookCover:function(){return l.defaultBookCovers}};t.a=s},1236:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),o=n(16),a=n(3),i=n(29),c=n(0),l=(n(42),n(106)),u=n(592),s=["children"],d=["fixed"];function f(e){return Object(l.a)(e).filter((function(e){return c.isValidElement(e)})).map((function(e){var t=e.key,n=e.props,r=n.children,o=Object(i.a)(n,s),c=Object(a.a)({key:t},o);return r&&(c.children=f(r)),c}))}function p(e){return e.reduce((function(e,t){var n=t.fixed,r=!0===n?"left":n,i=t.children;return i&&i.length>0?[].concat(Object(o.a)(e),Object(o.a)(p(i).map((function(e){return Object(a.a)({fixed:r},e)})))):[].concat(Object(o.a)(e),[Object(a.a)(Object(a.a)({},t),{},{fixed:r})])}),[])}t.b=function(e,t){var n=e.prefixCls,o=e.columns,l=e.children,s=e.expandable,m=e.expandedKeys,h=e.getRowKey,v=e.onTriggerExpand,y=e.expandIcon,b=e.rowExpandable,g=e.expandIconColumnIndex,_=e.direction,E=e.expandRowByClick,w=e.columnWidth,O=e.fixed,k=c.useMemo((function(){return o||f(l)}),[o,l]),S=c.useMemo((function(){if(s){var e,t,o=g||0,a=k[o];t="left"!==O&&!O||g?"right"!==O&&!O||g!==k.length?a?a.fixed:null:"right":"left";var i=(e={},Object(r.a)(e,u.a,{className:"".concat(n,"-expand-icon-col")}),Object(r.a)(e,"title",""),Object(r.a)(e,"fixed",t),Object(r.a)(e,"className","".concat(n,"-row-expand-icon-cell")),Object(r.a)(e,"width",w),Object(r.a)(e,"render",(function(e,t,r){var o=h(t,r),a=m.has(o),i=!b||b(t),l=y({prefixCls:n,expanded:a,expandable:i,record:t,onExpand:v});return E?c.createElement("span",{onClick:function(e){return e.stopPropagation()}},l):l})),e),l=k.slice();return o>=0&&l.splice(o,0,i),l}return k}),[s,k,h,m,y,_]),N=c.useMemo((function(){var e=S;return t&&(e=t(e)),e.length||(e=[{render:function(){return null}}]),e}),[t,S,_]),x=c.useMemo((function(){return"rtl"===_?function(e){return e.map((function(e){var t=e.fixed,n=Object(i.a)(e,d),r=t;return"left"===t?r="right":"right"===t&&(r="left"),Object(a.a)({fixed:r},n)}))}(p(N)):p(N)}),[N,_]);return[N,x]}},1237:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var r=n(2),o=n(4),a=n(3),i=n(16),c=n(7),l=n(26),u=n(0),s=n(351),d=n(5),f=n.n(d),p=n(279),m=n.n(p),h=n(42),v=n(166),y=n(365),b=n(1227),g=n(1228),_=n(703),E=n(256),w=n(966),O=n(384);function k(e){var t,n=e.cells,r=e.stickyOffsets,a=e.flattenColumns,i=e.rowComponent,c=e.cellComponent,l=e.onHeaderRow,s=e.index,d=u.useContext(E.a),f=d.prefixCls,p=d.direction;l&&(t=l(n.map((function(e){return e.column})),s));var m=Object(O.a)(n.map((function(e){return e.column})));return u.createElement(i,t,n.map((function(e,t){var n,i=e.column,l=Object(w.a)(e.colStart,e.colEnd,a,r,p);return i&&i.onHeaderCell&&(n=e.column.onHeaderCell(i)),u.createElement(_.a,Object(o.a)({},e,{ellipsis:i.ellipsis,align:i.align,component:c,prefixCls:f,key:m[t]},l,{additionalProps:n,rowType:"header"}))})))}k.displayName="HeaderRow";var S=k;var N=function(e){var t=e.stickyOffsets,n=e.columns,r=e.flattenColumns,o=e.onHeaderRow,a=u.useContext(E.a),i=a.prefixCls,c=a.getComponent,l=u.useMemo((function(){return function(e){var t=[];!function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t[o]=t[o]||[];var a=r;return n.filter(Boolean).map((function(n){var r={key:n.key,className:n.className||"",children:n.title,column:n,colStart:a},i=1,c=n.children;return c&&c.length>0&&(i=e(c,a,o+1).reduce((function(e,t){return e+t}),0),r.hasSubColumns=!0),"colSpan"in n&&(i=n.colSpan),"rowSpan"in n&&(r.rowSpan=n.rowSpan),r.colSpan=i,r.colEnd=r.colStart+i-1,t[o].push(r),a+=i,i}))}(e,0);for(var n=t.length,r=function(e){t[e].forEach((function(t){"rowSpan"in t||t.hasSubColumns||(t.rowSpan=n-e)}))},o=0;o<n;o+=1)r(o);return t}(n)}),[n]),s=c(["header","wrapper"],"thead"),d=c(["header","row"],"tr"),f=c(["header","cell"],"th");return u.createElement(s,{className:"".concat(i,"-thead")},l.map((function(e,n){return u.createElement(S,{key:n,flattenColumns:r,cells:e,stickyOffsets:t,rowComponent:d,cellComponent:f,onHeaderRow:o,index:n})})))},x=u.createContext(null);var A=function(e){var t=e.prefixCls,n=e.children,r=e.component,o=e.cellComponent,a=e.fixHeader,i=e.fixColumn,c=e.horizonScroll,l=e.className,s=e.expanded,d=e.componentWidth,f=e.colSpan,p=u.useContext(E.a).scrollbarSize;return u.useMemo((function(){var e=n;return i&&(e=u.createElement("div",{style:{width:d-(a?p:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(t,"-expanded-row-fixed")},e)),u.createElement(r,{className:l,style:{display:s?null:"none"}},u.createElement(_.a,{component:o,prefixCls:t,colSpan:f},e))}),[n,r,a,c,l,s,d,f,p])};function P(e){var t=e.className,n=e.style,r=e.record,i=e.index,l=e.rowKey,s=e.getRowKey,d=e.rowExpandable,p=e.expandedKeys,m=e.onRow,h=e.indent,v=void 0===h?0:h,y=e.rowComponent,b=e.cellComponent,g=e.childrenColumnName,w=u.useContext(E.a),k=w.prefixCls,S=w.fixedInfoList,N=u.useContext(x),C=N.fixHeader,j=N.fixColumn,T=N.horizonScroll,I=N.componentWidth,M=N.flattenColumns,L=N.expandableType,R=N.expandRowByClick,D=N.onTriggerExpand,U=N.rowClassName,B=N.expandedRowClassName,z=N.indentSize,F=N.expandIcon,V=N.expandedRowRender,G=N.expandIconColumnIndex,Y=u.useState(!1),$=Object(c.a)(Y,2),q=$[0],W=$[1],H=p&&p.has(e.recordKey);u.useEffect((function(){H&&W(!0)}),[H]);var K,Z="row"===L&&(!d||d(r)),Q="nest"===L,X=g&&r&&r[g],J=Z||Q;m&&(K=m(r,i));var ee;"string"==typeof U?ee=U:"function"==typeof U&&(ee=U(r,i,v));var te,ne,re=Object(O.a)(M),oe=u.createElement(y,Object(o.a)({},K,{"data-row-key":l,className:f()(t,"".concat(k,"-row"),"".concat(k,"-row-level-").concat(v),ee,K&&K.className),style:Object(a.a)(Object(a.a)({},n),K?K.style:null),onClick:function(e){if(R&&J&&D(r,e),K&&K.onClick){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=K).onClick.apply(t,[e].concat(o))}}}),M.map((function(e,t){var n,a,c=e.render,l=e.dataIndex,s=e.className,d=re[t],f=S[t];return t===(G||0)&&Q&&(n=u.createElement(u.Fragment,null,u.createElement("span",{style:{paddingLeft:"".concat(z*v,"px")},className:"".concat(k,"-row-indent indent-level-").concat(v)}),F({prefixCls:k,expanded:H,expandable:X,record:r,onExpand:D}))),e.onCell&&(a=e.onCell(r,i)),u.createElement(_.a,Object(o.a)({className:s,ellipsis:e.ellipsis,align:e.align,component:b,prefixCls:k,key:d,record:r,index:i,dataIndex:l,render:c,shouldCellUpdate:e.shouldCellUpdate},f,{appendNode:n,additionalProps:a}))})));if(Z&&(q||H)){var ae=V(r,i,v+1,H),ie=B&&B(r,i,v);te=u.createElement(A,{expanded:H,className:f()("".concat(k,"-expanded-row"),"".concat(k,"-expanded-row-level-").concat(v+1),ie),prefixCls:k,fixHeader:C,fixColumn:j,horizonScroll:T,component:y,componentWidth:I,cellComponent:b,colSpan:M.length},ae)}return X&&H&&(ne=(r[g]||[]).map((function(t,n){var r=s(t,n);return u.createElement(P,Object(o.a)({},e,{key:r,rowKey:r,record:t,recordKey:r,index:n,indent:v+1}))}))),u.createElement(u.Fragment,null,oe,te,ne)}P.displayName="BodyRow";var C=P,j=u.createContext(null);function T(e){var t=e.columnKey,n=e.onColumnResize,r=u.useRef();return u.useEffect((function(){r.current&&n(t,r.current.offsetWidth)}),[]),u.createElement(v.a,{onResize:function(e){var r=e.offsetWidth;n(t,r)}},u.createElement("td",{ref:r,style:{padding:0,border:0,height:0}},u.createElement("div",{style:{height:0,overflow:"hidden"}}," ")))}function I(e){var t=e.data,n=e.getRowKey,r=e.measureColumnWidth,o=e.expandedKeys,a=e.onRow,i=e.rowExpandable,c=e.emptyNode,l=e.childrenColumnName,s=u.useContext(j).onColumnResize,d=u.useContext(E.a),f=d.prefixCls,p=d.getComponent,m=u.useContext(x),h=m.fixHeader,v=m.horizonScroll,y=m.flattenColumns,b=m.componentWidth;return u.useMemo((function(){var e,d=p(["body","wrapper"],"tbody"),m=p(["body","row"],"tr"),g=p(["body","cell"],"td");e=t.length?t.map((function(e,t){var r=n(e,t);return u.createElement(C,{key:r,rowKey:r,record:e,recordKey:r,index:t,rowComponent:m,cellComponent:g,expandedKeys:o,onRow:a,getRowKey:n,rowExpandable:i,childrenColumnName:l})})):u.createElement(A,{expanded:!0,className:"".concat(f,"-placeholder"),prefixCls:f,fixHeader:h,fixColumn:v,horizonScroll:v,component:m,componentWidth:b,cellComponent:g,colSpan:y.length},c);var _=Object(O.a)(y);return u.createElement(d,{className:"".concat(f,"-tbody")},r&&u.createElement("tr",{"aria-hidden":"true",className:"".concat(f,"-measure-row"),style:{height:0,fontSize:0}},_.map((function(e){return u.createElement(T,{key:e,columnKey:e,onColumnResize:s})}))),e)}),[t,f,a,r,o,n,p,b,c,y])}var M=u.memo(I);M.displayName="Body";var L=M,R=n(1236);function D(e){var t=Object(u.useRef)(e),n=Object(u.useState)({}),r=Object(c.a)(n,2)[1],o=Object(u.useRef)(null),a=Object(u.useRef)([]);return Object(u.useEffect)((function(){return function(){o.current=null}}),[]),[t.current,function(e){a.current.push(e);var n=Promise.resolve();o.current=n,n.then((function(){if(o.current===n){var e=a.current,i=t.current;a.current=[],e.forEach((function(e){t.current=e(t.current)})),o.current=null,i!==t.current&&r({})}}))}]}var U=function(e,t,n){return Object(u.useMemo)((function(){for(var r=[],o=[],a=0,i=0,c=0;c<t;c+=1)if("rtl"===n){o[c]=i,i+=e[c]||0;var l=t-c-1;r[l]=a,a+=e[l]||0}else{r[c]=a,a+=e[c]||0;var u=t-c-1;o[u]=i,i+=e[u]||0}return{left:r,right:o}}),[e,t,n])},B=n(592);var z=function(e){for(var t=e.colWidths,n=e.columns,r=[],a=!1,i=(e.columCount||n.length)-1;i>=0;i-=1){var c=t[i],l=n&&n[i],s=l&&l[B.a];(c||s||a)&&(r.unshift(u.createElement("col",Object(o.a)({key:i,style:{width:c}},s))),a=!0)}return u.createElement("colgroup",null,r)};var F=function(e){var t=e.className,n=e.children;return u.createElement("div",{className:t},n)},V=n(593);function G(e){var t,n=e.prefixCls,o=e.record,a=e.onExpand,i=e.expanded,c=e.expandable,l="".concat(n,"-row-expand-icon");if(!c)return u.createElement("span",{className:f()(l,"".concat(n,"-row-spaced"))});return u.createElement("span",{className:f()(l,(t={},Object(r.a)(t,"".concat(n,"-row-expanded"),i),Object(r.a)(t,"".concat(n,"-row-collapsed"),!i),t)),onClick:function(e){a(o,e),e.stopPropagation()}})}var Y=n(172),$=n(816),q=function(e,t){var n,o,i=e.scrollBodyRef,l=e.onScroll,s=e.offsetScroll,d=e.container,p=u.useContext(E.a).prefixCls,m=(null===(n=i.current)||void 0===n?void 0:n.scrollWidth)||0,h=(null===(o=i.current)||void 0===o?void 0:o.clientWidth)||0,v=m&&h*(h/m),b=u.useRef(),g=D({scrollLeft:0,isHiddenScrollBar:!1}),_=Object(c.a)(g,2),w=_[0],O=_[1],k=u.useRef({delta:0,x:0}),S=u.useState(!1),N=Object(c.a)(S,2),x=N[0],A=N[1],P=function(){A(!1)},C=function(e){var t,n=(e||(null===(t=window)||void 0===t?void 0:t.event)).buttons;if(x&&0!==n){var r=k.current.x+e.pageX-k.current.x-k.current.delta;r<=0&&(r=0),r+v>=h&&(r=h-v),l({scrollLeft:r/h*(m+2)}),k.current.x=e.pageX}else x&&A(!1)},j=function(){var e=Object($.b)(i.current).top,t=e+i.current.offsetHeight,n=d===window?document.documentElement.scrollTop+window.innerHeight:Object($.b)(d).top+d.clientHeight;t-Object(y.a)()<=n||e>=n-s?O((function(e){return Object(a.a)(Object(a.a)({},e),{},{isHiddenScrollBar:!0})})):O((function(e){return Object(a.a)(Object(a.a)({},e),{},{isHiddenScrollBar:!1})}))},T=function(e){O((function(t){return Object(a.a)(Object(a.a)({},t),{},{scrollLeft:e/m*h||0})}))};return u.useImperativeHandle(t,(function(){return{setScrollLeft:T}})),u.useEffect((function(){var e=Object(Y.a)(document.body,"mouseup",P,!1),t=Object(Y.a)(document.body,"mousemove",C,!1);return j(),function(){e.remove(),t.remove()}}),[v,x]),u.useEffect((function(){var e=Object(Y.a)(d,"scroll",j,!1),t=Object(Y.a)(window,"resize",j,!1);return function(){e.remove(),t.remove()}}),[d]),u.useEffect((function(){w.isHiddenScrollBar||O((function(e){var t=i.current;return t?Object(a.a)(Object(a.a)({},e),{},{scrollLeft:t.scrollLeft/t.scrollWidth*t.clientWidth}):e}))}),[w.isHiddenScrollBar]),m<=h||!v||w.isHiddenScrollBar?null:u.createElement("div",{style:{height:Object(y.a)(),width:h,bottom:s},className:"".concat(p,"-sticky-scroll")},u.createElement("div",{onMouseDown:function(e){e.persist(),k.current.delta=e.pageX-w.scrollLeft,k.current.x=0,A(!0),e.preventDefault()},ref:b,className:f()("".concat(p,"-sticky-scroll-bar"),Object(r.a)({},"".concat(p,"-sticky-scroll-bar-active"),x)),style:{width:"".concat(v,"px"),transform:"translate3d(".concat(w.scrollLeft,"px, 0, 0)")}}))},W=u.forwardRef(q),H=n(209),K=Object(H.a)()?window:null;var Z=n(29),Q=n(75),X=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];var J=u.forwardRef((function(e,t){var n=e.className,o=e.noData,c=e.columns,l=e.flattenColumns,s=e.colWidths,d=e.columCount,p=e.stickyOffsets,m=e.direction,h=e.fixHeader,v=e.stickyTopOffset,y=e.stickyBottomOffset,b=e.stickyClassName,g=e.onScroll,_=e.maxContentScroll,w=e.children,O=Object(Z.a)(e,X),k=u.useContext(E.a),S=k.prefixCls,N=k.scrollbarSize,x=k.isSticky,A=x&&!h?0:N,P=u.useRef(null),C=u.useCallback((function(e){Object(Q.b)(t,e),Object(Q.b)(P,e)}),[]);u.useEffect((function(){var e;function t(e){var t=e.currentTarget,n=e.deltaX;n&&(g({currentTarget:t,scrollLeft:t.scrollLeft+n}),e.preventDefault())}return null===(e=P.current)||void 0===e||e.addEventListener("wheel",t),function(){var e;null===(e=P.current)||void 0===e||e.removeEventListener("wheel",t)}}),[]);var j=u.useMemo((function(){return l.every((function(e){return e.width>=0}))}),[l]),T=l[l.length-1],I={fixed:T?T.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(S,"-cell-scrollbar")}}},M=Object(u.useMemo)((function(){return A?[].concat(Object(i.a)(c),[I]):c}),[A,c]),L=Object(u.useMemo)((function(){return A?[].concat(Object(i.a)(l),[I]):l}),[A,l]),R=Object(u.useMemo)((function(){var e=p.right,t=p.left;return Object(a.a)(Object(a.a)({},p),{},{left:"rtl"===m?[].concat(Object(i.a)(t.map((function(e){return e+A}))),[0]):t,right:"rtl"===m?e:[].concat(Object(i.a)(e.map((function(e){return e+A}))),[0]),isSticky:x})}),[A,p,x]),D=function(e,t){return Object(u.useMemo)((function(){for(var n=[],r=0;r<t;r+=1){var o=e[r];if(void 0===o)return null;n[r]=o}return n}),[e.join("_"),t])}(s,d);return u.createElement("div",{style:Object(a.a)({overflow:"hidden"},x?{top:v,bottom:y}:{}),ref:C,className:f()(n,Object(r.a)({},b,!!b))},u.createElement("table",{style:{tableLayout:"fixed",visibility:o||D?null:"hidden"}},(!o||!_||j)&&u.createElement(z,{colWidths:D?[].concat(Object(i.a)(D),[A]):[],columCount:d+1,columns:L}),w(Object(a.a)(Object(a.a)({},O),{},{stickyOffsets:R,columns:M,flattenColumns:L}))))}));J.displayName="FixedHolder";var ee=J,te=n(1238),ne=[],re={},oe="rc-table-internal-hook",ae=u.memo((function(e){return e.children}),(function(e,t){return!!m()(e.props,t.props)&&(e.pingLeft!==t.pingLeft||e.pingRight!==t.pingRight)}));function ie(e){var t,n=e.prefixCls,d=e.className,p=e.rowClassName,m=e.style,b=e.data,g=e.rowKey,_=e.scroll,k=e.tableLayout,S=e.direction,A=e.title,P=e.footer,C=e.summary,T=e.id,I=e.showHeader,M=e.components,Y=e.emptyText,$=e.onRow,q=e.onHeaderRow,H=e.internalHooks,Z=e.transformColumns,Q=e.internalRefs,X=e.sticky,J=b||ne,ie=!!J.length;var ce,le,ue,se=u.useMemo((function(){return Object(O.c)(M,{})}),[M]),de=u.useCallback((function(e,t){return Object(O.b)(se,e)||t}),[se]),fe=u.useMemo((function(){return"function"==typeof g?g:function(e){return e&&e[g]}}),[g]),pe=Object(B.c)(e),me=pe.expandIcon,he=pe.expandedRowKeys,ve=pe.defaultExpandedRowKeys,ye=pe.defaultExpandAllRows,be=pe.expandedRowRender,ge=pe.onExpand,_e=pe.onExpandedRowsChange,Ee=pe.expandRowByClick,we=pe.rowExpandable,Oe=pe.expandIconColumnIndex,ke=pe.expandedRowClassName,Se=pe.childrenColumnName,Ne=pe.indentSize,xe=me||G,Ae=Se||"children",Pe=u.useMemo((function(){return be?"row":!!(e.expandable&&H===oe&&e.expandable.__PARENT_RENDER_ICON__||J.some((function(e){return e&&"object"===Object(l.a)(e)&&e[Ae]})))&&"nest"}),[!!be,J]),Ce=u.useState((function(){return ve||(ye?function(e,t,n){var r=[];return function e(o){(o||[]).forEach((function(o,a){r.push(t(o,a)),e(o[n])}))}(e),r}(J,fe,Ae):[])})),je=Object(c.a)(Ce,2),Te=je[0],Ie=je[1],Me=u.useMemo((function(){return new Set(he||Te||[])}),[he,Te]),Le=u.useCallback((function(e){var t,n=fe(e,J.indexOf(e)),r=Me.has(n);r?(Me.delete(n),t=Object(i.a)(Me)):t=[].concat(Object(i.a)(Me),[n]),Ie(t),ge&&ge(!r,e),_e&&_e(t)}),[fe,Me,J,ge,_e]),Re=u.useState(0),De=Object(c.a)(Re,2),Ue=De[0],Be=De[1],ze=Object(R.b)(Object(a.a)(Object(a.a)(Object(a.a)({},e),pe),{},{expandable:!!be,expandedKeys:Me,getRowKey:fe,onTriggerExpand:Le,expandIcon:xe,expandIconColumnIndex:Oe,direction:S}),H===oe?Z:null),Fe=Object(c.a)(ze,2),Ve=Fe[0],Ge=Fe[1],Ye=u.useMemo((function(){return{columns:Ve,flattenColumns:Ge}}),[Ve,Ge]),$e=u.useRef(),qe=u.useRef(),We=u.useRef(),He=u.useRef(),Ke=u.useState(!1),Ze=Object(c.a)(Ke,2),Qe=Ze[0],Xe=Ze[1],Je=u.useState(!1),et=Object(c.a)(Je,2),tt=et[0],nt=et[1],rt=D(new Map),ot=Object(c.a)(rt,2),at=ot[0],it=ot[1],ct=Object(O.a)(Ge).map((function(e){return at.get(e)})),lt=u.useMemo((function(){return ct}),[ct.join("_")]),ut=U(lt,Ge.length,S),st=_&&Object(O.d)(_.y),dt=_&&Object(O.d)(_.x)||Boolean(pe.fixed),ft=dt&&Ge.some((function(e){return e.fixed})),pt=u.useRef(),mt=function(e,t){var n="object"===Object(l.a)(e)?e:{},r=n.offsetHeader,o=void 0===r?0:r,a=n.offsetSummary,i=void 0===a?0:a,c=n.offsetScroll,s=void 0===c?0:c,d=n.getContainer,f=(void 0===d?function(){return K}:d)()||K;return u.useMemo((function(){var n=!!e;return{isSticky:n,stickyClassName:n?"".concat(t,"-sticky-holder"):"",offsetHeader:o,offsetSummary:i,offsetScroll:s,container:f}}),[s,o,i,t,f])}(X,n),ht=mt.isSticky,vt=mt.offsetHeader,yt=mt.offsetSummary,bt=mt.offsetScroll,gt=mt.stickyClassName,_t=mt.container,Et=null==C?void 0:C(J),wt=(st||ht)&&u.isValidElement(Et)&&Et.type===te.a&&Et.props.fixed;st&&(le={overflowY:"scroll",maxHeight:_.y}),dt&&(ce={overflowX:"auto"},st||(le={overflowY:"hidden"}),ue={width:!0===_.x?"auto":_.x,minWidth:"100%"});var Ot=u.useCallback((function(e,t){Object(s.a)($e.current)&&it((function(n){if(n.get(e)!==t){var r=new Map(n);return r.set(e,t),r}return n}))}),[]),kt=function(e){var t=Object(u.useRef)(e||null),n=Object(u.useRef)();function r(){window.clearTimeout(n.current)}return Object(u.useEffect)((function(){return r}),[]),[function(e){t.current=e,r(),n.current=window.setTimeout((function(){t.current=null,n.current=void 0}),100)},function(){return t.current}]}(null),St=Object(c.a)(kt,2),Nt=St[0],xt=St[1];function At(e,t){t&&("function"==typeof t?t(e):t.scrollLeft!==e&&(t.scrollLeft=e))}var Pt=function(e){var t,n=e.currentTarget,r=e.scrollLeft,o="rtl"===S,a="number"==typeof r?r:n.scrollLeft,i=n||re;xt()&&xt()!==i||(Nt(i),At(a,qe.current),At(a,We.current),At(a,He.current),At(a,null===(t=pt.current)||void 0===t?void 0:t.setScrollLeft));if(n){var c=n.scrollWidth,l=n.clientWidth;o?(Xe(-a<c-l),nt(-a>0)):(Xe(a>0),nt(a<c-l))}},Ct=function(){We.current&&Pt({currentTarget:We.current})};u.useEffect((function(){return Ct}),[]),u.useEffect((function(){dt&&Ct()}),[dt]);var jt=u.useState(0),Tt=Object(c.a)(jt,2),It=Tt[0],Mt=Tt[1];u.useEffect((function(){Mt(Object(y.b)(We.current).width)}),[]),u.useEffect((function(){H===oe&&Q&&(Q.body.current=We.current)}));var Lt,Rt=de(["table"],"table"),Dt=u.useMemo((function(){return k||(ft?"max-content"===_.x?"auto":"fixed":st||ht||Ge.some((function(e){return e.ellipsis}))?"fixed":"auto")}),[st,ft,Ge,k,ht]),Ut={colWidths:lt,columCount:Ge.length,stickyOffsets:ut,onHeaderRow:q,fixHeader:st,scroll:_},Bt=u.useMemo((function(){return ie?null:"function"==typeof Y?Y():Y}),[ie,Y]),zt=u.createElement(L,{data:J,measureColumnWidth:st||dt||ht,expandedKeys:Me,rowExpandable:we,getRowKey:fe,onRow:$,emptyNode:Bt,childrenColumnName:Ae}),Ft=u.createElement(z,{colWidths:Ge.map((function(e){return e.width})),columns:Ge}),Vt=de(["body"]);if(st||ht){var Gt;"function"==typeof Vt?(Gt=Vt(J,{scrollbarSize:It,ref:We,onScroll:Pt}),Ut.colWidths=Ge.map((function(e,t){var n=e.width,r=t===Ve.length-1?n-It:n;return"number"!=typeof r||Number.isNaN(r)?(Object(h.a)(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0):r}))):Gt=u.createElement("div",{style:Object(a.a)(Object(a.a)({},ce),le),onScroll:Pt,ref:We,className:f()("".concat(n,"-body"))},u.createElement(Rt,{style:Object(a.a)(Object(a.a)({},ue),{},{tableLayout:Dt})},Ft,zt,!wt&&Et&&u.createElement(V.c,{stickyOffsets:ut,flattenColumns:Ge},Et)));var Yt=Object(a.a)(Object(a.a)(Object(a.a)({noData:!J.length,maxContentScroll:dt&&"max-content"===_.x},Ut),Ye),{},{direction:S,stickyClassName:gt,onScroll:Pt});Lt=u.createElement(u.Fragment,null,!1!==I&&u.createElement(ee,Object(o.a)({},Yt,{stickyTopOffset:vt,className:"".concat(n,"-header"),ref:qe}),(function(e){return u.createElement(N,e)})),Gt,wt&&u.createElement(ee,Object(o.a)({},Yt,{stickyBottomOffset:yt,className:"".concat(n,"-summary"),ref:He}),(function(e){return u.createElement(V.c,e,Et)})),ht&&u.createElement(W,{ref:pt,offsetScroll:bt,scrollBodyRef:We,onScroll:Pt,container:_t}))}else Lt=u.createElement("div",{style:Object(a.a)(Object(a.a)({},ce),le),className:f()("".concat(n,"-content")),onScroll:Pt,ref:We},u.createElement(Rt,{style:Object(a.a)(Object(a.a)({},ue),{},{tableLayout:Dt})},Ft,!1!==I&&u.createElement(N,Object(o.a)({},Ut,Ye)),zt,Et&&u.createElement(V.c,{stickyOffsets:ut,flattenColumns:Ge},Et)));var $t=Object(B.b)(e),qt=u.createElement("div",Object(o.a)({className:f()(n,d,(t={},Object(r.a)(t,"".concat(n,"-rtl"),"rtl"===S),Object(r.a)(t,"".concat(n,"-ping-left"),Qe),Object(r.a)(t,"".concat(n,"-ping-right"),tt),Object(r.a)(t,"".concat(n,"-layout-fixed"),"fixed"===k),Object(r.a)(t,"".concat(n,"-fixed-header"),st),Object(r.a)(t,"".concat(n,"-fixed-column"),ft),Object(r.a)(t,"".concat(n,"-scroll-horizontal"),dt),Object(r.a)(t,"".concat(n,"-has-fix-left"),Ge[0]&&Ge[0].fixed),Object(r.a)(t,"".concat(n,"-has-fix-right"),Ge[Ge.length-1]&&"right"===Ge[Ge.length-1].fixed),t)),style:m,id:T,ref:$e},$t),u.createElement(ae,{pingLeft:Qe,pingRight:tt,props:Object(a.a)(Object(a.a)({},e),{},{stickyOffsets:ut,mergedExpandedKeys:Me})},A&&u.createElement(F,{className:"".concat(n,"-title")},A(J)),u.createElement("div",{className:"".concat(n,"-container")},Lt),P&&u.createElement(F,{className:"".concat(n,"-footer")},P(J))));dt&&(qt=u.createElement(v.a,{onResize:function(e){var t=e.width;t!==Ue&&(Ct(),Be($e.current?$e.current.offsetWidth:t))}},qt));var Wt=u.useMemo((function(){return{prefixCls:n,getComponent:de,scrollbarSize:It,direction:S,fixedInfoList:Ge.map((function(e,t){return Object(w.a)(t,t,Ge,ut,S)})),isSticky:ht}}),[n,de,It,S,Ge,ut,S,ht]),Ht=u.useMemo((function(){return Object(a.a)(Object(a.a)({},Ye),{},{tableLayout:Dt,rowClassName:p,expandedRowClassName:ke,componentWidth:Ue,fixHeader:st,fixColumn:ft,horizonScroll:dt,expandIcon:xe,expandableType:Pe,expandRowByClick:Ee,expandedRowRender:be,onTriggerExpand:Le,expandIconColumnIndex:Oe,indentSize:Ne})}),[Ye,Dt,p,ke,Ue,st,ft,dt,xe,Pe,Ee,be,Le,Oe,Ne]),Kt=u.useMemo((function(){return{onColumnResize:Ot}}),[Ot]);return u.createElement(E.a.Provider,{value:Wt},u.createElement(x.Provider,{value:Ht},u.createElement(j.Provider,{value:Kt},qt)))}ie.Column=g.a,ie.ColumnGroup=b.a,ie.Summary=V.a,ie.defaultProps={rowKey:"key",prefixCls:"rc-table",emptyText:function(){return"No Data"}};t.b=ie},1238:function(e,t,n){"use strict";var r=n(4),o=n(0),a=n(593),i=n(703),c=n(256),l=n(966);var u=n(29),s=["children"];function d(e){return e.children}d.Row=function(e){var t=e.children,n=Object(u.a)(e,s);return o.createElement("tr",n,t)},d.Cell=function(e){var t=e.className,n=e.index,u=e.children,s=e.colSpan,d=void 0===s?1:s,f=e.rowSpan,p=e.align,m=o.useContext(c.a),h=m.prefixCls,v=m.direction,y=o.useContext(a.b),b=y.scrollColumnIndex,g=y.stickyOffsets,_=y.flattenColumns,E=n+d-1+1===b?d+1:d,w=Object(l.a)(n,n+E-1,_,g,v);return o.createElement(i.a,Object(r.a)({className:t,index:n,component:"td",prefixCls:h,record:null,dataIndex:null,align:p,render:function(){return{children:u,props:{colSpan:E,rowSpan:f}}}},w))};t.a=d},1239:function(e,t,n){"use strict";var r=n(178),o=n.n(r),a=n(964),i=n.n(a),c=n(0),l=n(1223);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h="undefined"!=typeof window?c.useLayoutEffect:c.useEffect,v={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0,offsetHeight:0,scrollHeight:0,offsetWidth:0,scrollWidth:0};t.a=function(){var e=p(Object(c.useState)(null),2),t=e[0],n=e[1],r=p(Object(c.useState)(v),2),a=r[0],u=r[1],s=Object(l.a)(t),f=Object(c.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect;i()(e[0].contentRect,a)||u(d(d({},o()(t,["x","y","width","height","top","left","bottom","right"])),o()(s.current,["offsetHeight","scrollHeight","offsetWidth","scrollWidth"])))}}))}),[]);return h((function(){if(t&&Object.prototype.toString.call(t).slice(8,-1).includes("HTML"))return f.observe(t),function(){f.disconnect()}}),[t]),[n,a]}},1240:function(e,t,n){"use strict";n.d(t,"d",(function(){return p.b})),n.d(t,"a",(function(){return p.a})),n.d(t,"e",(function(){return X})),n.d(t,"g",(function(){return ee})),n.d(t,"b",(function(){return te})),n.d(t,"f",(function(){return ne})),n.d(t,"c",(function(){return re}));n(800);var r=n(381),o=(n(40),n(9),n(588),n(110)),a=n(0),i=n.n(a),c=n(5),l=n.n(c),u=(n(35),n(6)),s=n.n(u),d=n(1463),f=n(1339),p=n(965),m=n(63),h=n(216),v="index-module_label_qcR+D",y=function(e){return e.visible?i.a.createElement("span",{className:v},__("空间")):null},b=n(473),g=n(60),_=n.n(g),E=n(1476),w=n(114),O=n(1235),k=(n(713),n(367)),S=(n(48),n(11)),N=n(1473),x=n(47);function A(e){var t=e.book,n=e.closeModal;return i.a.createElement(N.a,{visible:!0,title:__("删除知识库"),content:i.a.createElement(k.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:i.a.createElement("span",{className:"highlight_name"},t.name)}),type:"warning"}),buttonText:__("确定删除 {name}",{name:t.name}),slug:t.slug,onOk:function(){x.a.books.destroy({id:t.id}).then((function(e){S.a.success(__("操作成功"),3),n(),setTimeout((function(){window.location.href="/dashboard"}),300)}))},onCancel:n})}A.propTypes={book:s.a.object,group:s.a.object,closeModal:s.a.func};var P=Object(b.d)((function(e){return{book:e.book,group:e.group}}))(A),C="BookAction-module_wrap_AiMmc";function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function I(e,t,n){return t=L(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,n||[],L(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function D(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var B=_()("book:action"),z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(n=I(this,t,[e]),"doAction",(function(e){e&&n.setState({cmd:e,exportModal:e===w.a.BOOK.export_book.cmd,deleteModal:e===w.a.BOOK.delete_book.cmd})})),D(n,"handleCloseDeleteModal",(function(){n.setState({deleteModal:!1})})),n.state={exportModal:!1,deleteModal:!1,cmd:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.className,o=n.book;switch(this.state.cmd){case w.a.BOOK.manage.cmd:window.open("/r/".concat(o.namespace,"/docs"),"_self");break;case w.a.BOOK.catalog_manage.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;case w.a.BOOK.manage_assets.cmd:window.open("/".concat(o.namespace,"/assets"),"_self");break;case w.a.BOOK.collaborators.cmd:window.open("/r/".concat(o.namespace,"/collaborators"),"_self");break;case w.a.BOOK.recycles.cmd:window.open("/r/".concat(o.namespace,"/trash"),"_self");break;case w.a.BOOK.statistics.cmd:window.open("/r/".concat(o.namespace,"/statistics"),"_self");break;case w.a.BOOK.settings.cmd:case w.a.BOOK.rename_book.cmd:window.open("/".concat(o.namespace,"/settings/basic"),"_self");break;case w.a.DOC.modify_toc.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;default:B("no processor, do nothing, just trigger onSelect and set state")}var a=null==o||null===(e=o.abilities)||void 0===e?void 0:e.destroy;return i.a.createElement("div",{className:"".concat(C," ").concat(r)},void 0,i.a.createElement(E.a,{visible:this.state.exportModal,book:o,formats:O.a.getExportFormats(),onCancel:function(){return t.setState({exportModal:!1,cmd:null})}}),this.state.deleteModal&&a&&i.a.createElement(P,{closeModal:this.handleCloseDeleteModal}))}}])&&T(n.prototype,r),o&&T(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.a.Component);z.defaultProps={className:""},z.propTypes={className:s.a.string,book:s.a.object.isRequired};var F=Object(b.d)((function(e){return{book:e.book,group:e.group}}),null,null,{forwardRef:!0})(z),V=n(1475),G=n(1430),Y=n(1009),$=n(967),q={bookTitle:"index-module_bookTitle_lUUrB",name:"index-module_name_OMCDB",group:"index-module_group_xaGsx",text:"index-module_text_UrMgl",checked:"index-module_checked_3fCif",moreActions:"index-module_moreActions_YYACs"},W=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","href","target","iconSize","className","draggable","onItemClick","isMobile"];function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(null,arguments)}function Q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}__("文档"),__("表格"),__("图集"),__("专栏"),__("资源");var X=function(e){var t=e.group,n=e.book,r=e.showBookIcon,o=void 0===r||r,a=e.showPrivateIcon,c=void 0===a||a,u=e.showOrgLabel,s=void 0!==u&&u,d=e.href,f=e.target,p=e.iconSize,m=e.className,h=e.draggable,v=e.onItemClick,y=e.isMobile,b=Q(e,W),g=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp,_=Object($.a)(g?"_blank":"_self"),E=d||"/".concat(t.login,"/").concat(n.slug);return i.a.createElement("a",Z({href:E,className:l()("book-link",m),target:f||_,desktopDisableHref:!0,draggable:h,onClick:function(t){v?(t.preventDefault(),v(e,E)):Object(Y.a)(t)}},Object(G.b)({type:n.type,user:t,book:n,targetUrl:E})),i.a.createElement(ee,Z({},b,{group:t,book:n,showBookIcon:o,showPrivateIcon:c,showOrgLabel:s,iconSize:p,isMobile:y})))};X.propTypes={book:s.a.object,group:s.a.object,showBookIcon:s.a.bool,showOrgLabel:s.a.bool,className:s.a.string,target:s.a.string,showShareBadge:s.a.bool,iconSize:s.a.number};s.a.object,s.a.object,s.a.bool,s.a.bool,s.a.bool,s.a.string,s.a.string,s.a.func,s.a.bool;var J=function(e){var t=e.book,n=e.org,r=e.group,o=e.getPopupContainer,a=Object(V.c)({type:"book",target:t,org:n,group:r});return i.a.createElement("span",{className:"book-name-scope"},i.a.createElement(p.a,{public:a,book:t,group:r,getPopupContainer:o}))},ee=function(e){var t=e.group,n=e.book,r=e.showGroupName,o=void 0!==r&&r,a=e.showBookIcon,c=void 0===a||a,u=e.showPrivateIcon,s=void 0===u||u,d=e.showOrgLabel,v=void 0!==d&&d,b=e.isMobile,g=void 0!==b&&b,_=e.checked,E=void 0!==_&&_,w=e.href,O=e.getPopupContainer,k=e.className,S=e.iconSize||(g?28:24),N=t&&(t.organization||{id:t.organization_id}),x=window.appData.me;return g?i.a.createElement("span",{className:l()(q.bookTitle,k)},i.a.createElement("div",{className:l()(q.icon,"book-icon-wrapper")},i.a.createElement(p.b,{group:t,book:n,width:S})),i.a.createElement("div",{className:l()(q.name,"book-title-name")},i.a.createElement("div",{className:l()(q.text,"book-title-text"),title:n.name},n.name),t.name&&i.a.createElement("div",{className:l()(q.group,"book-title-desc")},t.name)),i.a.createElement("div",{className:q.checked},E&&i.a.createElement(f.default,null))):i.a.createElement("span",{className:l()("lark-book-title",k)},c&&i.a.createElement(p.b,{group:t,book:n,width:S}),i.a.createElement("span",{className:"book-name"},o&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,t.name),i.a.createElement("span",{className:"book-name-split"},"/")),w&&i.a.createElement("a",{className:"book-name-text-wrapper",href:w},i.a.createElement("span",{className:"book-name-text",title:n.name},n.name)),!w&&i.a.createElement("span",{className:"book-name-text",title:n.name},n.name),(null==x?void 0:x.isAdmin)&&-1===n.status&&i.a.createElement("span",{className:"book-name-scope"},i.a.createElement(m.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}})),s&&i.a.createElement(h.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement("span",{"data-test-id":"book-access-scope"})}},i.a.createElement(J,{book:n,org:N,group:t,getPopupContainer:O})),v&&i.a.createElement("span",{className:"book-name-orglabel"},i.a.createElement(y,{visible:t&&t.organization_id>0}))))};ee.propTypes={group:s.a.object,book:s.a.object,iconSize:s.a.number,showBookIcon:s.a.bool,showPrivateIcon:s.a.bool,showOrgLabel:s.a.bool,showGroupName:s.a.bool,isMobile:s.a.bool,checked:s.a.bool,href:s.a.string,getPopupContainer:s.a.func,showShareBadge:s.a.bool};var te=function(e){var t=e.book,n=e.clickable;return t.user?n?i.a.createElement("a",{href:"/".concat(t.user.login),title:t.user.name,className:"book-belong"},t.user.name):i.a.createElement("span",{className:"book-belong",title:t.user.name},t.user.name):null};te.defaultProps={clickable:!0},te.propTypes={book:s.a.object,clickable:s.a.bool};s.a.string;var ne=function(e){var t=Object(a.useRef)(null),n=H(Object(a.useState)(!1),2),r=n[0],c=n[1],l=e.book,u=e.group,s=e.me,f=O.a.actionsForNavMore(l,u,s).filter((function(e){return e.can||"divider"===e.action.cmd}));return f.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{className:q.moreActions,visible:r,onVisibleChange:function(e){return c(e)},direction:"circle",iconWidth:20,content:i.a.createElement(o.a,{selectable:!1},f.map((function(e){return"divider"===e.action.cmd?i.a.createElement(o.a.Divider,null):i.a.createElement(o.a.Item,{disabled:!1===e.can,key:e.action.cmd,onClick:function(){t.current.doAction(e.action.cmd),c(!1)}},e.action.title)})))}),i.a.createElement(F,{ref:t})):null};ne.propTypes={book:s.a.object.isRequired,styles:s.a.object.isRequired,group:s.a.object.isRequired,me:s.a.object};s.a.object,s.a.object;__("导出 PDF"),__("设置"),__("删除"),__("转移"),__("分享");var re=function(e,t){switch(e){case"Design":return"name"===t?__("如：语雀视觉设计"):__("如：视觉设计与规范");case"Sheet":return"name"===t?__("如：研发计划"):__("如：第一季度研发计划");case"Column":return"name"===t?__("如：团队专栏"):__("如：团队设计分享");case"Resource":return"name"===t?__("资源知识库"):__("上传资源文件、本地文档等内容");default:return"name"===t?__("如：产品文档"):__("如：产品设计与研发")}};(function(e){var t=e.belongs,n=e.onChange,a=__("归属");if(!t||t.length<=1)return i.a.createElement("span",null,a);return i.a.createElement(r.a,{trigger:["click"],overlay:i.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return i.a.createElement(o.a.Item,{key:e.type},i.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){n(e.type)}(e)}},e.text))})))},i.a.createElement("span",null,a,i.a.createElement(m.b,{name:"arrow-down",width:16})))}).propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired}},1244:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-home",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M12.734 14.844H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm0-2.813H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm5.698-4.433-8.02-5.616A.698.698 0 0 0 10 1.855a.698.698 0 0 0-.412.127l-8.02 5.616a.702.702 0 1 0 .807 1.15l.125-.086v8.799a.703.703 0 1 0 1.406 0V7.678L10 3.41l6.094 4.268v9.783a.703.703 0 1 0 1.406 0V8.662l.125.088a.704.704 0 0 0 .807-1.152Zm-5.698 1.62H7.266a.703.703 0 1 0 0 1.407h5.468a.703.703 0 1 0 0-1.406Z",fill:"currentColor",fillRule:"nonzero"}))},1245:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-user",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M16.004 15.508a6.5 6.5 0 0 0-1.397-2.07 6.5 6.5 0 0 0-2.878-1.678 5.362 5.362 0 0 0 2.076-1.293 5.346 5.346 0 0 0 1.576-3.803 5.337 5.337 0 0 0-1.576-3.803 5.346 5.346 0 0 0-3.803-1.576 5.337 5.337 0 0 0-3.803 1.576 5.346 5.346 0 0 0-1.576 3.803c0 1.436.559 2.787 1.576 3.803a5.362 5.362 0 0 0 2.076 1.293 6.5 6.5 0 0 0-2.879 1.678 6.5 6.5 0 0 0-1.908 4.607.703.703 0 1 0 1.407 0c0-1.365.53-2.649 1.496-3.613a5.076 5.076 0 0 1 3.613-1.496c1.365 0 2.648.53 3.613 1.496a5.076 5.076 0 0 1 1.496 3.613.703.703 0 1 0 1.407 0 6.552 6.552 0 0 0-.516-2.537ZM10 10.637a3.977 3.977 0 0 1-3.973-3.973A3.977 3.977 0 0 1 10 2.691a3.977 3.977 0 0 1 3.973 3.973A3.976 3.976 0 0 1 10 10.637Z",fill:"currentColor",fillRule:"nonzero"}))},1249:function(e,t,n){e.exports=n(1225)},1250:function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"k",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return x})),n.d(t,"j",(function(){return A})),n.d(t,"d",(function(){return C})),n.d(t,"i",(function(){return I})),n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return R})),n.d(t,"l",(function(){return D})),n.d(t,"g",(function(){return U}));var r=n(1008),o=n.n(r),a=n(150),i=n(149),c=n(47),l=n(157),u=n(1518);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=p;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function h(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))}}function y(e,t){return b.apply(this,arguments)}function b(){return b=v(m().mark((function e(t,n){var r,o,a=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{useOriginResp:!1},e.next=3,c.a.templates.v2.useTemplate({template_id:n.id,book_id:t.id,doc_id:r.docId},{useOriginResp:r.useOriginResp});case 3:return o=e.sent,Object(l.spmClick)(u.a.TEMPLATE_USAGE,{id:n.id,type:n.type,format:n.format,name:n.name,platform:r.isDesktop?"desktop":"pc"}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return(_=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.destroy({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return w.apply(this,arguments)}function w(){return(w=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.findOne({id:t,usage:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return k.apply(this,arguments)}function k(){return(k=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.templates.v2.update({id:t,name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,r,o){return N.apply(this,arguments)}function N(){return N=v(m().mark((function e(t,n,r,o,i){var l,u,s,d=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.length>5&&void 0!==d[5]?d[5]:null,u=d.length>6&&void 0!==d[6]&&d[6],s={target_id:t,target_type:n,template_type:r,format:a.TYPE_FORMAT_MAP[o],type:o,name:i,in_edit:u},null!==l&&(s.doc_id=l),e.next=6,c.a.templates.v2.create(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function x(e){var t={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",laketable:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*W_NeRqkOsJsAAAAAAAAAAAAAARQnAQ",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeboard:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return e.cover?e.cover:t[e.format]||t.lake}function A(e,t){return P.apply(this,arguments)}function P(){return(P=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.docs.findOne({book_id:n,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n){return j.apply(this,arguments)}function j(){return(j=v(m().mark((function e(t,n,r){var o,a,i,l,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n);case 2:if(o=e.sent,a="/go/doc/".concat(o.id,"/edit"),"doc_toc"!==(null==r?void 0:r.create_from)){e.next=12;break}return i=o.id,e.next=8,c.a.docs.addToCatalog({ids:[i],book_id:t.id,target_node_uuid:r.toc_node_uuid,action:"prependChild"});case 8:return(l=new URLSearchParams).set("toc_node_uuid",r.toc_node_uuid),window.location.href="".concat(a,"?").concat(l.toString()),e.abrupt("return");case 12:return u=o.id,e.next=15,c.a.docs.addToCatalog({ids:[u],book_id:t.id,target_node_uuid:null,action:"prependChild"});case 15:window.location.href=a;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.book_id,n=e.group_id,r=e.include_personal,o=e.official_channel,i=[],c={limit:e.limit,format:e.format,include_types:""};return t&&(i.push(a.TEMPLATE_TYPE_MAP.BOOK),c.book_id=t),n&&(i.push(a.TEMPLATE_TYPE_MAP.GROUP),c.group_id=n),o&&(i.push(a.TEMPLATE_TYPE_MAP.OFFICIAL),c.official_channel=o),r&&i.push(a.TEMPLATE_TYPE_MAP.PERSONAL),i.length&&(c.include_types=i.join(",")),c}function I(){return M.apply(this,arguments)}function M(){return M=v(m().mark((function e(){var t,n,r,o,i,l=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,c.a.templates.v2.find(T(t));case 4:return r=e.sent,o=new URLSearchParams(window.location.search),i=o.has("isSupportTable"),n.isDesktop&&!i&&(r.data=r.data.filter((function(e){return e.format!==a.TYPE_FORMAT_MAP.Table}))),Array.isArray(r.meta.official)&&(r.meta.official=r.meta.official.map((function(e){return f(f({},e),{},{name:"en-us"!==n.locale?e.name_zh:e.name_en})}))),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function L(e){var t;return!(null==e||null===(t=e.abilities)||void 0===t||!t.create_doc)}function R(e){var t;return Boolean("Group"===(null==e?void 0:e.type)&&(null==e||null===(t=e.abilities)||void 0===t?void 0:t.read_private))}function D(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{book_id:L(e)?e.id:void 0,group_id:R(t)?t.id:void 0,include_personal:n}}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter((function(e){return!!i.MIXING_BOOK_TYPES.includes(e.type)}));return o()(t)?n:n.filter((function(e){return e.user_id===t.id}))}},1251:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1267:function(e,t,n){"use strict";function r(e,t){if(!e)return null;try{return JSON.parse(e)}catch(e){return null==t||t(e),null}}n.d(t,"a",(function(){return r}))},1273:function(e,t,n){"use strict";n(800);var r=n(381),o=(n(53),n(12)),a=(n(588),n(110)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(1244),d=n(1346),f=n(1245),p=n(1339),m=n(1232),h=n(242);n(1370);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e){var t,n,l=e.isOfficial,u=e.isDesktop,y=e.newTemplateName,b=e.onSetNewTemplateName,g=e.onSetSelectedScope,_=e.group,E=e.organization,w=u?_&&Object(h.f)(_):_&&Object(h.f)(_)&&(null===(t=_.abilities)||void 0===t?void 0:t.read_private),O=!!E,k=v(Object(i.useState)(w||O||l?0:1),2),S=k[0],N=k[1];n=w?[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement(f.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement(f.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var x=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];l&&(n=x);var A=n[S];Object(i.useEffect)((function(){return g(n[S].type)}),[]);var P=c.a.createElement(a.a,null,n.map((function(e,t){var r=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},e.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,e.header),c.a.createElement("p",null,e.desc)),t===S&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(p.default,{width:20})));return c.a.createElement(a.a.Item,{key:e.header,onClick:function(){N(t),g(n[t].type)}},r)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(o.a,{value:y||"",onChange:function(e){return b(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(r.a,{trigger:["click"],overlay:P},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},A.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,A.header),c.a.createElement("p",null,A.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(m.default,null)))))}b.defaultProps={isOfficial:!1},b.propTypes={newTemplateName:u.a.string,onSetNewTemplateName:u.a.func,onSetSelectedScope:u.a.func,isOfficial:u.a.bool,isDesktop:u.a.bool,group:u.a.object,organization:u.a.object},t.a=b},1337:function(e,t,n){"use strict";n.d(t,"h",(function(){return I.d})),n.d(t,"g",(function(){return I.c})),n.d(t,"f",(function(){return I.b})),n.d(t,"c",(function(){return I.a})),n.d(t,"m",(function(){return I.e})),n.d(t,"i",(function(){return L})),n.d(t,"j",(function(){return R})),n.d(t,"a",(function(){return S})),n.d(t,"n",(function(){return j})),n.d(t,"k",(function(){return ie})),n.d(t,"b",(function(){return z})),n.d(t,"e",(function(){return re})),n.d(t,"d",(function(){return ce})),n.d(t,"l",(function(){return le}));n(40);var r=n(9),o=(n(48),n(11)),a=n(0),i=n.n(a),c=n(6),l=n.n(c),u=n(14),s=n.n(u),d=n(5),f=n.n(d),p=n(157),m=n(87),h=n(74),v=n(382),y=n(50),b=n(84),g=n(20),_=n(963),E="index-module_buyButton_pN7y0";function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(e){var t=e.organization,n=e.targetLevel,o=e.type,c=e.text,l=e.className,u=e.paySource,s=void 0===u?h.LIMIT_SCENE.org_other_buy:u,d=m.a.isFree(t),p=d?g.PAY_MODAL_ACTION.buy:g.PAY_MODAL_ACTION.renew,v=w(Object(a.useState)(!1),2),y=v[0],b=v[1],O=c||(d?__("升级"):__("续费")),k=window.location,S="/r/organizations/dashboard/cashier"===(null==k?void 0:k.pathname),N=null==k?void 0:k.pathname.startsWith("/r/organizations/dashboard");if(!S){var x=m.a.buildOrgPayLink({action:d?"buy":"renew",targetLevel:n,paySource:s});return i.a.createElement(r.a,{className:f()(E,l),href:x,target:N?"_self":"_blank",type:o},O)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{type:o,className:f()(E,l),onClick:function(){return b(!0)}},O),y&&i.a.createElement(_.a,{visible:y,organization:t,onClose:function(){return b(!1)},type:"buyModal",actionType:p,targetLevel:n,paySource:s}))}k.propTypes={organization:l.a.object.isRequired,type:l.a.string,text:l.a.string,className:l.a.string,targetLevel:l.a.oneOf([g.PAYMENT_TYPE.pro,g.PAYMENT_TYPE.enterprise]),paySource:l.a.string},k.defaultProps={type:"link",targetLevel:g.PAYMENT_TYPE.pro};var S=k,N=n(1416),x="index-module_upgradeButton_nJqrZ";function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e){var t,n=e.organization,o=e.type,c=e.text,l=e.className,u=e.paySource,s=void 0===u?h.LIMIT_SCENE.org_other_buy:u,d=A(Object(a.useState)(!1),2),p=d[0],v=d[1],y=c||__("升级"),b=Object(N.getInterest)(),E=window.location,w="/r/organizations/dashboard/cashier"===(null==E?void 0:E.pathname),O=null==E||null===(t=E.pathname)||void 0===t?void 0:t.startsWith("/r/organizations/dashboard");if(m.a.isTopLevel(b))return null;if(!O||!w){var k=m.a.buildOrgPayLink({action:"upgrade",paySource:s});return i.a.createElement(r.a,{className:f()(x,l),href:k,target:"_blank",type:o},y)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{type:o,className:f()(x,l),onClick:function(){return v(!0)}},y),p&&i.a.createElement(_.a,{visible:p,organization:n,onClose:function(){return v(!1)},type:"buyModal",actionType:g.PAY_MODAL_ACTION.upgrade,targetLevel:g.PAYMENT_TYPE.enterprise,paySource:s}))}C.propTypes={organization:l.a.object.isRequired,type:l.a.string,text:l.a.string,className:l.a.string,paySource:l.a.string},C.defaultProps={type:"link"};var j=C,T={orgVersionLabel:"index-module_orgVersionLabel_egPu3",tip:"index-module_tip_rQx-e",payment:"index-module_payment_pQExj",paymentLink:"index-module_paymentLink_GbvgZ",paymentGuideWrapper:"index-module_paymentGuideWrapper_2jg39",thumb:"index-module_thumb_Lw5zW",title:"index-module_title_EykNL",body:"index-module_body_+1-cr",link:"index-module_link_zDdoa",actions:"index-module_actions_LRgdL",horizontal:"index-module_horizontal_rYkfB",btnTryout:"index-module_btnTryout_5GVmK",vertical:"index-module_vertical_K+cm2",btn:"index-module_btn_vRXZD",premiumFeaturesLabel:"index-module_premiumFeaturesLabel_q+uFd",alignCenter:"index-module_alignCenter_h648T",orgExpiredTip:"index-module_orgExpiredTip_k7iLg",orgExpiredTipOpt:"index-module_orgExpiredTipOpt_QDhkZ",orgExpiredTipText:"index-module_orgExpiredTipText_gQuZw",payflowTitle:"index-module_payflowTitle_LM3aR",freeWrapper:"index-module_freeWrapper_BlI2K",payflowLink:"index-module_payflowLink_Wt3fM",isExpired:"index-module_isExpired_UgOgs",freeTips:"index-module_freeTips_ybaQ-"},I=n(587),M=n(63);n(591);function L(){return i.a.createElement("span",null,__("标准版，2999 元/空间/年"))}function R(e){var t=e.organization,n=e.size,r=e.className;return i.a.createElement(M.b,{size:n,name:m.a.getIconName(t),className:r})}l.a.object.isRequired,l.a.node,l.a.string,l.a.object.isRequired,l.a.string,l.a.string,l.a.string,l.a.oneOfType([l.a.string,l.a.number]),l.a.oneOfType([l.a.string,l.a.node]),l.a.string,l.a.object,R.propTypes={organization:l.a.object,size:l.a.number,className:l.a.string};var D="index-module_upgrade_qL2nR";function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){var t=e.organization,n=e.className,o=e.code,c=void 0===o?h.LIMIT_SCENE.org_other_buy:o,l=U(Object(a.useState)(!1),2),u=l[0],s=l[1];if(!("/r/organizations/dashboard/cashier"===window.location.pathname)){var d=m.a.buildOrgPayLink({action:"member",paySource:c});return i.a.createElement("a",{className:n,href:d,target:"_blank"},__("扩容"))}return i.a.createElement("div",{className:f()(D,n)},i.a.createElement(r.a,{type:"link",onClick:function(){return s(!0)}},__("扩容")),u&&i.a.createElement(_.a,{visible:u,organization:t,onClose:function(){return s(!1)},type:"buyModal",actionType:g.ORDER_TYPE.buyMember,paySource:c}))},F=(n(67),n(31));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){var t=e.organization,n=e.code,a=e.type,c=e.className,l=e.text,u=m.a.getFeatureBelongsPayment(n);return m.a.isPremium(t)?u===(null==t?void 0:t.payment_type)?i.a.createElement(r.a,{type:a,className:c,onClick:function(){var e;o.a.warning(__("当前版本已是{payment}",{payment:null===(e=m.a.PAYMENT_MAP)||void 0===e?void 0:e[u]}))}},l):i.a.createElement(j,{organization:t,type:a,text:l,className:c,paySource:n}):i.a.createElement(S,{organization:t,type:a,text:l,targetLevel:u,className:c,paySource:n})};q.propTypes={organization:l.a.object.isRequired,className:l.a.string,code:l.a.oneOf(Object.values(Y(Y({},y.INTEREST_CODE),h.LIMIT_RULE_CODE))),type:l.a.string,text:l.a.string},q.defaultProps={type:"link"};var W="index-module_wrapper_ulVDd",H="index-module_content_SO1HL",K="index-module_title_SVPzd",Z="index-module_desc_MlCQ9",Q="index-module_img_SBaEY",X="index-module_trialButton_tH3iD",J="index-module_footer_cL9eu",ee="index-module_btn_XNqZC";function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re={showInterestIntro:function(e){var t=window.appData.organization,n=m.a.isOwner(t),o=ne(ne(ne(ne({},y.INTEREST_CODE.thirdpart_address,{title:m.a.getPaymentFeatureDesc(y.INTEREST_CODE.thirdpart_address),desc:m.a.getFeatureIntro(y.INTEREST_CODE.thirdpart_address)}),y.INTEREST_CODE.group_department,{title:m.a.getPaymentFeatureDesc(y.INTEREST_CODE.group_department),desc:m.a.getFeatureIntro(y.INTEREST_CODE.group_department)}),y.INTEREST_CODE.group_handover,{title:m.a.getPaymentFeatureDesc(y.INTEREST_CODE.group_handover),desc:m.a.getFeatureIntro(y.INTEREST_CODE.group_handover)}),y.INTEREST_CODE.public_page,{title:m.a.getPaymentFeatureDesc(y.INTEREST_CODE.public_page),desc:m.a.getFeatureIntro(y.INTEREST_CODE.public_page),link:i.a.createElement("a",{href:"https://www.yuque.com/yuque/organizations/xoios9x575i28vi9",target:"_blank"},__("查看详细介绍"))})[e];if(o){Object(p.spmClick)(h.ORG_LIMIT_SPM.pay_limit,{pay_source:e,organization_id:(null==t?void 0:t.id)||0});var a=m.a.buildOrgPayLink({action:"trial",paySource:e}),c=F.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:W,content:i.a.createElement("div",null,i.a.createElement("img",{className:Q,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Lt7IR4oBkwIAAAAAAAAAAAAADvuFAQ/original"}),i.a.createElement("div",{className:H},i.a.createElement("p",{className:K},null==o?void 0:o.title),i.a.createElement("p",{className:Z},!n&&__("联系管理员升级空间版本，立享空间功能。"),null==o?void 0:o.desc,null==o?void 0:o.link),i.a.createElement("div",{className:J},n?i.a.createElement(i.a.Fragment,null,(null==t?void 0:t.canTrial)&&i.a.createElement(r.a,{className:f()(X,ee),href:a},__("领取 {days} 天试用",{days:15})),i.a.createElement(q,{className:ee,type:"primary",organization:t,code:e})):i.a.createElement(r.a,{className:f()(ee),type:"primary",onClick:function(){return c.destroy()}},__("知道了"))))),okText:null})}}};function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){var t=e.organization,n=e.code,a=e.type,c=e.className,l=e.text,u=m.a.getFeatureBelongsPayment(n);return m.a.isPremium(t)?u===(null==t?void 0:t.payment_type)?i.a.createElement(r.a,{type:a,className:c,onClick:function(){var e;o.a.warning(__("当前版本已是{payment}",{payment:null===(e=m.a.PAYMENT_MAP)||void 0===e?void 0:e[u]}))}},l):i.a.createElement(j,{organization:t,type:a,text:l,className:c,paySource:n}):i.a.createElement(S,{organization:t,type:a,text:l,targetLevel:u,className:c,paySource:n})};function ce(e){var t,n=e.organization,r=e.className,o=n.expired_at,a=n.payment_type,c=m.a.isOwner(n),l=(null===(t=b.ORG_AMOUNT_MAP[null==n?void 0:n.payment_type])||void 0===t?void 0:t.name)||b.ORG_AMOUNT_MAP[g.PAYMENT_TYPE.enterprise].name,u=m.a.buildOrgPayLink({action:"renew",paySource:h.LIMIT_SCENE.org_dashboard_user_menu_buy});if(a===g.PAYMENT_TYPE.free&&!c)return null;if(m.a.isFree(n)&&c)return u=m.a.buildOrgPayLink({action:"buy",paySource:h.LIMIT_SCENE.org_dashboard_user_menu_buy}),i.a.createElement("div",{className:f()(T.tip,T.freeWarpper),"data-testid":"org-preview-tip"},i.a.createElement("div",{className:T.payflowTitle},b.ORG_AMOUNT_MAP[g.PAYMENT_TYPE.free].name),i.a.createElement("a",{href:u,className:T.payment,target:"_blank"},__("升级")));var d,p=s()(o).diff(s()(),"day"),v=!1;return s()(o).isBefore(s()())?(d=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:T.orgExpiredTip},__("{paymentType}已过期",{paymentType:l}))),v=!0):0===p?(d=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:T.orgExpiredTip},__("空间将于今日到期"))),v=!0):p<15&&p>0?(d=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:T.orgExpiredTip},__("{paymentType} {days} 天后到期",{paymentType:l,days:p}))),v=!0):d=i.a.createElement("p",{className:T.orgExpiredTipText},__("有效期至{expiredAt}",{expiredAt:i.a.createElement("span",{title:s()(o).format("YYYY-MM-DD")},s()(o).format("YYYY-MM-DD"))})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:f()(T.tip,r,ae({},T.isExpired,v)),"data-testid":"org-preview-tip"},i.a.createElement("span",null,d),c&&i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:u,target:"_blank",className:T.payment},__("续费")))))}function le(e){var t=e.organization,n=e.showThumb,o=void 0===n||n,c=(e.children,e.titleClassName),l=e.thumbClassName,u=e.actionsLayout,s=void 0===u?"horizontal":u,d=e.code,y=e.className,b=m.a.getPaymentFeatureDesc(d)||__("付费版空间专属功能"),g=m.a.getFeatureIntro(d);return Object(a.useEffect)((function(){Object(p.spmClick)(h.ORG_LIMIT_SPM.pay_limit,{pay_source:d,organization_id:(null==t?void 0:t.id)||0})}),[]),i.a.createElement("div",{className:f()(T.paymentGuideWrapper,y)},o&&i.a.createElement(v.a,{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*oKPaTZWb5BwAAAAAAAAAAAAADvuFAQ/original",darkAlpha:.9,className:f()(T.thumb,l)}),i.a.createElement("h6",{className:f()(T.title,c)},b),i.a.createElement("div",{className:T.body},g),i.a.createElement("div",{className:f()(T.actions,"horizontal"===s?T.horizontal:T.vertical)},"vertical"===s?i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{organization:t,type:"primary",code:d,className:T.btn}),i.a.createElement(r.a,{style:{marginTop:"12px"},"data-desktoptarget":"_browser",type:"link",href:"/about/price#team",target:"_blank"},__("了解不同版本权益"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{href:"/about/price#team",target:"_blank",className:T.link},__("了解不同版本权益")),i.a.createElement(ie,{organization:t,code:d}))))}ie.propTypes={organization:l.a.object.isRequired,className:l.a.string,code:l.a.oneOf(Object.values(y.INTEREST_CODE,h.LIMIT_RULE_CODE)),type:l.a.string,text:l.a.string},ie.defaultProps={type:"link"},ce.propTypes={organization:l.a.object.isRequired,className:l.a.string},le.propTypes={organization:l.a.object.isRequired,showThumb:l.a.bool,children:l.a.node,titleClassName:l.a.string,thumbClassName:l.a.string,actionsLayout:l.a.string,code:l.a.string,className:l.a.string},l.a.object.isRequired},1338:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}},1340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return new Promise((function(n,r){dd.dtBridge({m:e,args:t,onSuccess:function(e){"function"==typeof t.onSuccess&&t.onSuccess(e),n(e)},onFail:function(e){"function"==typeof t.onFail&&t.onFail(e),r(e)}})}))}},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.androidWeexBridge=t.iosWeexBridge=t.requireModule=void 0;t.requireModule=function(e){return"undefined"!=typeof __weex_require__?__weex_require__("@weex-module/".concat(e)):"undefined"!=typeof weex?weex.requireModule(e):void 0};t.iosWeexBridge=function(){return Promise.resolve((function(e,n){return new Promise((function(r,o){var a=(0,t.requireModule)("nuvajs-exec"),i=e.split("."),c=i.pop(),l=i.join(".");a.exec({plugin:l,action:c,args:n},(function(e){e&&"0"===e.errorCode?("function"==typeof n.onSuccess&&n.onSuccess(e.result),r(e.result)):("function"==typeof n.onFail&&n.onFail(e.result),o(e.result))}))}))}))};t.androidWeexBridge=function(){return Promise.resolve((function(e,n){return new Promise((function(r,o){var a=(0,t.requireModule)("nuvajs-exec"),i=e.split("."),c=i.pop(),l=i.join(".");a.exec({plugin:l,action:c,args:n},(function(e){var t={};try{if(e&&e.__message__)if("object"==typeof e.__message__)t=e.__message__;else try{t=JSON.parse(e.__message__)}catch(n){"string"==typeof e.__message__&&(t=e.__message__)}}catch(e){}e&&1===parseInt(e.__status__+"",10)?("function"==typeof n.onSuccess&&n.onSuccess(t),r(t)):("function"==typeof n.onFail&&n.onFail(t),o(t))}))}))}))}},1342:function(e,t,n){e.exports=n(64)},1346:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-team",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M17.057 12.45c.086-.446.13-.905.13-1.376A7.19 7.19 0 0 0 13 4.541a3.008 3.008 0 0 0-6 0 7.19 7.19 0 0 0-4.057 7.908 3.011 3.011 0 0 0-1.693 2.707 3.007 3.007 0 0 0 5.13 2.13 7.147 7.147 0 0 0 3.62.976c1.32 0 2.555-.356 3.62-.977a3.007 3.007 0 0 0 5.13-2.129c0-1.19-.691-2.218-1.693-2.707ZM10 3.163a1.601 1.601 0 1 1 0 3.203 1.601 1.601 0 0 1 0-3.203ZM4.258 16.758a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Zm8.476-1.602a3 3 0 0 0 .147.932 5.755 5.755 0 0 1-2.881.767 5.755 5.755 0 0 1-2.88-.767 3.01 3.01 0 0 0-2.8-3.94A5.784 5.784 0 0 1 7.25 5.986a3.01 3.01 0 0 0 5.498 0 5.784 5.784 0 0 1 2.932 6.162 3.01 3.01 0 0 0-2.948 3.008Zm3.008 1.602a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Z",fill:"currentColor",fillRule:"nonzero"}))},1347:function(e,t,n){"use strict";var r=n(798),o=n(2922),a=n(3141),i=Object.assign(r,o.apiObj,{plugin:a});e.exports=i},1361:function(e,t,n){"use strict";var r=n(94),o=n.n(r),a=n(80),i=n.n(a),c=n(498),l=n.n(c),u=n(567),s=n.n(u),d=n(597),f=n.n(d),p=n(979),m=n.n(p),h=n(571),v=n.n(h),y=n(0),b=n.n(y),g=n(6),_=n.n(g),E=n(1496),w=n.n(E),O=(n(1491),["width","height"]);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m()(this,n)}}var N=["aspectRatio","preview","viewMode","dragMode","guides","autoCropArea","checkCrossOrigin"],x=function(e){f()(n,e);var t=S(n);function n(){return l()(this,n),t.apply(this,arguments)}return s()(n,[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter((function(e){return N.indexOf(e)>=0})).reduce((function(t,n){return Object.assign({},t,i()({},n,e.props[n]))}),{});this.cropper=new w.a(this.img,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src)}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"getCroppedCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.containerWidth,r=t.cropWidth,a=t.aspectRatio,c=e.width||r||n,l=e.height||c/a,u=e.width,s=void 0===u?c:u,d=e.height,f=void 0===d?l:d,p=o()(e,O);return this.cropper.getCroppedCanvas(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:s,height:f},p))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.containerWidth,o=t.containerHeight,a=t.aspectRatio,i=t.src,c=t.alt,l=t.crossOrigin,u=o||r/a;return b.a.createElement("div",{style:{width:r,height:u},className:n},b.a.createElement("img",{ref:function(t){e.img=t},src:i,crossOrigin:l,alt:void 0===c?"picture":c,style:{opacity:0}}))}}]),n}(y.Component);x.propTypes={containerWidth:_.a.number.isRequired,containerHeight:_.a.number,src:_.a.string.isRequired,cropWidth:_.a.number,className:_.a.string,alt:_.a.string,crossOrigin:_.a.oneOf(["anonymous","use-credentials"]),aspectRatio:_.a.number,dragMode:_.a.oneOf(["crop","move","none"]),viewMode:_.a.oneOf([0,1,2,3]),preview:_.a.string,guides:_.a.bool,autoCropArea:_.a.number,checkCrossOrigin:_.a.bool},x.defaultProps={aspectRatio:4/3,dragMode:"move",viewMode:1,guides:!1,autoCropArea:1},t.a=x},1367:function(e,t,n){"use strict";n(3250);var r=n(1272);n(1528);t.a=r.a},1370:function(e,t,n){},139:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"b",(function(){return p}));var i={URL_TYPE_LIST:["book-type-default","book-type-sheet","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-thread","group-type-interest","book-type-travel","group-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque","book-icon-alibaba","book-icon-taobao","book-icon-alipay"],LEGACY_URL_TYPE_LIST:["books-url-wendangzhishiku","books-url-biaogezhishiku","books-url-boke","books-url-bokebeifen","books-url-bumen","books-url-chanpinshouce","books-url-huabanzhishiku","books-url-huati","books-url-lanqiubeifen","books-url-lvhanggonglve","books-url-morentuandui","books-url-tuanduizhoubao","books-url-wenjianjiabeifen","books-url-xiangmu","books-url-xiangmufangan","books-url-xuexibiji","books-url-ziyuanzhishiku","books-url-ali","books-url-taobao","books-url-zhifubao","books-url-yuque"],ICON_TYPE_LIST:["books-icon-default","books-icon-aixin","books-icon-baozhi","books-icon-biaoge","books-icon-biaoqian","books-icon-bikan","books-icon-boke","books-icon-chanpinwendang","books-icon-chucun","books-icon-dabiaowenjian","books-icon-dengpao","books-icon-duihua","books-icon-gerendangan","books-icon-huabao","books-icon-huati","books-icon-huati2","books-icon-hudun","books-icon-huojian","books-icon-huowu","books-icon-jiami","books-icon-jiangbei","books-icon-jihua","books-icon-lanqiu","books-icon-lingdang","books-icon-liucheng","books-icon-mubiao","books-icon-penzai","books-icon-qiqiu","books-icon-qunzu","books-icon-renwuliebiao","books-icon-rili","books-icon-suozhu","books-icon-tongxunlu","books-icon-tuandui","books-icon-wengao","books-icon-wenjiandai","books-icon-wenjiandai-2","books-icon-wenjianjia","books-icon-xiezuo","books-icon-xinfeng","books-icon-xingquxiaozu","books-icon-xuexibiji","books-icon-yingyuxuexi","books-icon-zhiding"],LEGACY_ICON_TYPE_LIST:["books-icon-wendang"],EMOJI_TYPE_LIST:[],BOOK_ICON_TYPE_MAP:{"books-icon-aixin":"group-type-interest","books-icon-baozhi":"book-type-blog","books-icon-biaoge":"book-type-sheet","books-icon-alibaba":"book-icon-alibaba","books-icon-bianzu":"book-icon-taobao","books-icon-bianzu-15":"book-icon-alipay","books-icon-biaoqian":"book-type-manual","books-icon-bikan":"group-type-project","books-icon-boke":"book-type-notes","books-icon-chanpinwendang":"book-type-project","books-icon-chucun":"book-type-resource","books-icon-dabiaowenjian":"book-type-travel","books-icon-default":"book-type-default","books-icon-dengpao":"group-type-project","books-icon-duihua":"book-icon-topic","books-icon-gerendangan":"book-type-manual","books-icon-huabao":"book-type-design","books-icon-huati":"group-type-department","books-icon-huati2":"book-type-thread","books-icon-hudun":"group-type-project","books-icon-huojian":"book-type-sheet","books-icon-huowu":"book-type-notes","books-icon-jiami":"book-type-import","books-icon-jiangbei":"group-type-project","books-icon-jihua":"book-type-reports","books-icon-lanqiu":"book-type-default","books-icon-lingdang":"group-type-department","books-icon-liucheng":"book-type-sheet","books-icon-mubiao":"group-type-project","books-icon-penzai":"book-type-default","books-icon-qiqiu":"book-type-default","books-icon-qunzu":"group-type-default","books-icon-renwuliebiao":"book-type-manual","books-icon-rili":"book-type-manual","books-icon-suozhu":"book-type-default","books-icon-tongxunlu":"group-type-interest","books-icon-tuandui":"group-type-default","books-icon-wendang":"book-type-default","books-icon-wengao":"book-type-blog","books-icon-wenjiandai":"book-type-project","books-icon-wenjiandai-2":"book-type-resource","books-icon-wenjianjia":"book-type-blog","books-icon-xiezuo":"book-type-blog","books-icon-xinfeng":"book-type-manual","books-icon-xingquxiaozu":"group-type-interest","books-icon-xuexibiji":"book-type-notes","books-icon-yingyuxuexi":"book-type-default","books-icon-yuque-logo":"book-icon-yuque","books-icon-zhiding":"book-type-default"}},c=["group-type-default","book-type-thread","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-sheet","group-type-interest","book-type-travel","book-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque"],l=["group-earth","book-type-thread","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-sheet","group-type-interest","book-type-travel","book-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque"],u={default:"book-type-default",book:"book-type-default",sheet:"book-type-sheet",design:"book-type-design",thread:"book-type-thread",resource:"book-type-resource",column:"book-type-blog",notes:"book-type-notes",blog:"book-type-blog",travel:"book-type-travel",project:"book-type-project",manual:"book-type-manual",reports:"book-type-reports",team_blog:"book-type-blog"},s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({default:"group-type-default",project:"group-type-project",department:"group-type-department",interest:"group-type-interest",commerce:"group-type-default",official_doc:"group-type-department"},Object.fromEntries(c.map((function(e){return[e,e]})))),d={doc:"doc-type-default",sheet:"doc-type-sheet",table:"doc-type-table",mind:"doc-type-mind",board:"doc-type-board",show:"file-ppt",thread:"book-type-thread",artboardgroup:"book-type-design",artboard:"book-type-design",note:"doc-type-note",actiontag:"book-type-resource",issue:"doc-type-task"},f={default:"book-type-thread",daily:"book-type-thread",weekly:"book-type-thread"},p={markdown:"doc-type-default",asl:"doc-type-default",lake:"doc-type-default",spreadjs:"doc-type-sheet",lakesheet:"doc-type-sheet",lakemind:"doc-type-mind",lakeboard:"doc-type-board",lakeshow:"file-ppt"}},1415:function(e,t,n){var r=n(424),o=n(98);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},1416:function(e,t,n){"use strict";function r(){return window.appData.isDesktopApp&&!window.appData.interest?{interests:{open_ocr:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?null===(o=window.appData.currentOrganization)||void 0===o?void 0:o.isPremium:"Group"===(null===(n=window.appData.group)||void 0===n?void 0:n.type)||(null===(r=window.appData.me)||void 0===r?void 0:r.isPaid)),create_public_resource:!window.appData.isYuque||(window.appData.currentOrganization&&0!==window.appData.currentOrganization.id?(null===(t=window.appData.currentOrganization)||void 0===t?void 0:t.isPremium)&&window.appData.currentOrganization.share_to_outside_enable:null===(e=window.appData.me)||void 0===e?void 0:e.isPaid)}}:window.appData.interest||{interests:{}};var e,t,n,r,o}n.r(t),n.d(t,"getInterest",(function(){return r}))},1418:function(e,t,n){const r=n(1338),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}}},1419:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1420:function(e,t){const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(o,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+r+"$"),i=new RegExp("^"+n+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return c.test(e)}},1421:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const o=n.modules.size,a=n.modules.data,i=t.getScale(o,r),c=Math.floor((o+2*r.margin)*i),l=r.margin*i,u=[r.color.light,r.color.dark];for(let t=0;t<c;t++)for(let n=0;n<c;n++){let s=4*(t*c+n),d=r.color.light;if(t>=l&&n>=l&&t<c-l&&n<c-l){d=u[a[Math.floor((t-l)/i)*o+Math.floor((n-l)/i)]?1:0]}e[s++]=d.r,e[s++]=d.g,e[s++]=d.b,e[s]=d.a}}},1422:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f}));var r=n(14),o=n.n(r),a=n(464),i=n(184),c=n(10);function l(e,t,n,r){var o=window.location.origin,i="";switch(t){case a.b.BOOK:i="".concat(o,"/").concat(n.login,"/").concat(e.slug);break;case a.b.DOC:i="".concat(o,"/").concat(n.login,"/").concat(r.slug,"/").concat(e.slug);break;case a.b.NOTE:i="".concat(o,"/r/note/").concat(e.slug)}var c="",l="";if(t!==a.b.NOTE){"Sheet"===e.type&&(c=window.location.hash.slice(1));var u=e.title||e.name;u&&(l+="《".concat(u,"》"));var s=d(e,t,n,r).currentPassword;s&&(l+=" ".concat(__("密码：")).concat(s))}return{url:i,urlWithDesc:i+(c||l?"?".concat(t===a.b.DOC?"singleDoc":"","#").concat(c||""," ").concat(l||""):"")}}var u=function(e,t,n,r){var o=null==e?void 0:e.public;switch(t){case a.b.BOOK:o=Object(i.c)({type:"book",target:e,group:n});break;case a.b.DOC:o=Object(i.c)({type:"doc",target:e,group:n,book:r})}return{privacy:o,isShareActive:o!==c.PRIVACY.private}},s=function(e,t,n,r){var o=e.indexed_level,l=!1;t===a.b.DOC&&(Object(i.c)({type:"book",target:r,group:n})!==c.PRIVACY.private&&1===(null==r?void 0:r.indexed_level)&&(o=null==r?void 0:r.indexed_level,l=!0));return{currentIndexedLevel:o,isInheritBookIndex:l}},d=function(e,t,n,r){var o=e.password,l=!1;t===a.b.DOC&&(Object(i.c)({type:"book",target:r,group:n})!==c.PRIVACY.private&&null!=r&&r.password&&(o=null==r?void 0:r.password,l=!0));return{currentPassword:o,isInheritBookPassword:l}},f=function(e,t,n){if(!n&&e.public!==c.PRIVACY.private&&(t===a.b.DOC||t===a.b.NOTE)&&e.share_expired_time){var r=e.share_expired_time,i=new Date(e.share_expired_time),l=new Date(i.setMonth(i.getMonth()-6));return{startTime:o()(l).format("YYYY.MM.DD"),expiredTime:o()(r).format("YYYY.MM.DD")}}return null}},1423:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(5),l=n.n(c),u=n(74),s=n(63),d=n(958),f="badgelite-module_memberBadgeLiteTextAlibaba_eY+40",p="badgelite-module_memberBadgeLiteContainer_1caED",m="badgelite-module_memberBadgeLiteText_2xxqK",h="badgelite-module_memberBadgeLiteNomeContainer_9AJD2",v="badgelite-module_memberBadgeLiteGroupContainer_6-b6V",y="badgelite-module_memberBadgeLiteH5Container_ituBE";function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function E(e,t,n){return t=O(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,t,[e])).state={user:n.props.user},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.useMobile,r=void 0!==n&&n,a=e.className,i=void 0===a?"":a,c=window.appData,b=c.isYuque,g=c.organization,_=this.state.user,E=_.memberLevelName,w=_.member_level;if(!b)return r?null:o.a.createElement("a",{href:u.LINKS.INTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement("p",{className:h,"data-testid":"badge-lite"},o.a.createElement(s.b,{name:"member-big-level1-alibaba",width:24,height:28}),o.a.createElement("span",{className:f},__("语雀会员"))));if(!_.isPaid||g)return null;var O=d.a.isGroupOrPublication(_);if(t||r){var k=l()(y,i),S="icon-member-level-".concat(w);return o.a.createElement("span",{className:k,"data-testid":"badge-lite"},o.a.createElement("a",{href:O?u.LINKS.EXTERNAL_GROUP_INTRO_LINK:u.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:O?"member-level1":S,height:22,width:23})))}if(O){var N=l()(v,i);return o.a.createElement("span",{className:N,"data-testid":"badge-lite"},o.a.createElement("a",{href:u.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:"member-big-level1",width:24,height:28}),o.a.createElement("span",{className:m},__("高级版团队"))))}var x=l()(p,i),A="icon-member-level-".concat(w);return o.a.createElement("div",{className:x,"data-testid":"badge-lite"},o.a.createElement("a",{href:u.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:"_blank"},o.a.createElement(s.b,{name:A,width:24,height:28}),o.a.createElement("span",{className:m},E)))}}])&&g(n.prototype,r),a&&g(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.Component);S.propTypes={user:i.a.object,isMobile:i.a.bool,useMobile:i.a.bool,className:i.a.string};t.a=S},1424:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(227);var r=n(101),o=n(0),a=n.n(o),i=n(5),c=n.n(i),l=n(1220),u=n(34),s="index-module_offlineButton_XZkWh",d="index-module_disabledStyle_MeBOz",f=function(e){var t=e.children,n=e.buttonClassName,o=e.tooltipPlacement,i=void 0===o?"bottom":o,f=Object(l.b)();return t?!f&&u.c?a.a.createElement(r.a,{title:__("离线状态该功能不可用"),placement:i,autoAdjustOverflow:!0},a.a.createElement("div",{className:c()(n,s)},a.a.createElement("div",{className:d},t))):a.a.createElement("div",{className:n},t):null}},1426:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(1514),n(717)),i=n(57),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=(n(1429),["className","title"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=d.a.forwardRef((function(e,t){var n=e.className,r=e.title,o=u()(e,b),i={},l=h()("larkui-skeleton",n);return r?(r.size&&(l=h()(l,{"larkui-skeleton-title-sm":"sm"===r.size})),r.width&&(i.title={width:r.width})):i.title=r,d.a.createElement(a.a,c()({className:l,ref:t},i,o))}));E.propTypes=_(_({},a.a.SkeletonProps),{},{className:p.a.string}),y()(E,a.a),t.a=E},1427:function(e,t,n){const r=n(1665),o=n(1666),a=n(1683),i=n(1684);function c(e,t,n,a,i){const c=[].slice.call(arguments,1),l=c.length,u="function"==typeof c[l-1];if(!u&&!r())throw new Error("Callback required as last argument");if(!u){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=a=void 0):2!==l||t.getContext||(a=n,n=t,t=void 0),new Promise((function(r,i){try{const i=o.create(n,a);r(e(i,t,a))}catch(e){i(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(i=n,n=t,t=a=void 0):3===l&&(t.getContext&&void 0===i?(i=a,a=void 0):(i=a,a=n,n=t,t=void 0));try{const r=o.create(n,a);i(null,e(r,t,a))}catch(e){i(e)}}t.create=o.create,t.toCanvas=c.bind(null,a.render),t.toDataURL=c.bind(null,a.renderToDataURL),t.toString=c.bind(null,(function(e,t,n){return i.render(e,n)}))},1428:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-loading-desk",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("pattern",{id:"3718679761c",width:"100%",height:"100%",patternUnits:"objectBoundingBox"},r.createElement("use",{xlinkHref:"#3718679761a"})),r.createElement("image",{id:"3718679761a",width:22,height:22,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAAcITNaAAAEB0lEQVQ4EU2V3W4bNxCFZ0juSpaFukF9Y8Mx0su+QoG8aF+iQZ+i6Su0Nw1SBIhbVbb1uz9kv7OUahOguMsdnjlzZobynz/8UnIuVkq2nOscR62jvax6HmXTmdmDmf/tzjRfWfB/vZR1jPHRgj2zvwkWt8E9WAiYsNbpp3ftOTgvo+CftxHgnsfO3A7BbOcx7tjfgbQVaIy2TSEEmOhwZgqovodQYF0m8FcOBD3g74jbPcY7Tu2S+UZMIbZJqXkOIe9eAWN2GkXUiiKRJHCanE4fM757MYXEjnA3NXwDLDwhxxPrpm0vXjMW2xq6IqizgovxibXCks47ApWeTx58HTyuYbpOF83TPMZt2zZnxgKETMXlWePMuuag7k367gF7Lh7WHuIqeljNZumfpkmPl4vF83w+397e3h4S9JXtiVEpldk4nplLZ31TYvXNetZnL2GVYngg7K9xlr42i8XqzXL5eHd3R+Ji6LquOWmsQ5Whu4BGgUxDeqvUTlIoaasY/UsI8a/Z5fzzd1dXD9fX1+umaQK2LTPMZrNwYqyyqFWgKlHCtIqphurZXdLahtL8FGP6Y7n85vf7+5svgJa+79uUiIHR99RT6Stw1ZNCo8RqRchJtBgzs4Ifj0cbhv5z07S/vX17+/Hm5qaDWTsMg8jJSIyJ8xhSam1iLCoaAj2PFwette2sbpfy0/v3P/7KC8mPi773gEohZ3cqwWDuJBFSyaTxcAZjPSNrVWlpjvPZ7LC8XH76/t27b/dd/iEaHRdspIEyCmT4FJhjasiipbOkXxIzERRn3icwYhrpu45VHfZIif05juXejnsbInXrYW8xdSCNkBsBwEEd6F0SoJ1eBQgITaxatYGVQOmwbDv6Zk32DpjNSfqVEz+XRdPYcCjuPcyHjCoIDamUyUVJkBT5WmNWqOAwADC4LpkMsNtWrIlpLNQY1C6iBep5xDstUkpHrXN/JF4L7GUXc6rhKoypq/RxAKy3Qn0F21N4ByTsYJZJO/egtUDOQ4kU5UCYFKBY+0irhYHLdQzjkBOGXCoO06LrcKBPlAV12JFU6mrssVGHkCoVeCJ3pcmeW0jlqHvcowIImZb0kscBWWCssKuu0naatRt6safTtCfdkX3KMihUU/FE1TaqCOdPwSyiFjS4+TFwkuuEzcFJCoAlA85AAdBZiQS2zp1BBxmn9bcQsRO4EJHRUYrHoGCyD1BOCh1H7E4AyILGgGI6MYWCKgUTYKbOgjUZJumR0AHn0p7KVMKIH/HgX1L8z7ZKAiDsOTySFWqZ2sBIQWpwDBkLzW8R0Ig3NAAZx5zhA6b8SVBukp2wBYYTztWV62IChQ6YOjqFCj3U05aLKsE7rSdP5E4+kYx+sf8AV5aZ7yAju6MAAAAASUVORK5CYII="}),r.createElement("path",{id:"3718679761b",d:"M0 0h24v24H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"3718679761d",fill:"#fff"},r.createElement("use",{xlinkHref:"#3718679761b"})),r.createElement("path",{d:"M12 1.114a1.286 1.286 0 1 1 0 2.572A8.314 8.314 0 1 0 20.314 12c0-.805-.114-1.593-.336-2.349a1.286 1.286 0 0 1 2.467-.724c.291.99.44 2.022.44 3.073 0 6.012-4.873 10.886-10.885 10.886S1.114 18.012 1.114 12 5.988 1.114 12 1.114Z",fill:"url(#3718679761c)",fillRule:"nonzero",mask:"url(#3718679761d)"})))},1430:function(e,t,n){"use strict";n.d(t,"c",(function(){return R})),n.d(t,"b",(function(){return z})),n.d(t,"a",(function(){return F}));n(48);var r=n(11),o=(n(277),n(147)),a=n(0),i=n.n(a),c=n(152),l=n.n(c),u=n(35),s=n(64),d=n(163),f=n(1),p=n(312),m=n(71),h=n(34),v=n(195),y=n(244),b=n(967),g=function(e){return e?"/".concat(e.login):""},_=function(e,t){if(!t)return"";var n=g(e);return n?"".concat(n,"/").concat(t.slug):""},E=function(e,t,n){if(!n)return"";var r=_(e,t);return r?"".concat(r,"/").concat(n.slug):""},w=n(1009),O={spinArea:"index-module_spinArea_HqKpu"};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var S=["to","children"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(null,arguments)}function x(){x=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(N.prototype),u(N.prototype,c,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new N(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t){return I.apply(this,arguments)}function I(){return(I=j(x().mark((function e(t,n){var r,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.c){e.next=13;break}return e.prev=1,e.next=4,Object(v.c)();case 4:return r=e.sent,o=new URL(t,window.location.origin).href,e.next=8,r.put(o,n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("put appdata cache failed",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function M(e,t){return L.apply(this,arguments)}function L(){return(L=j(x().mark((function e(t,n){var r,o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)();case 2:return o=e.sent,a=new URL(t,window.location.origin).href,e.next=6,o.get(a,{matchCondition:n,me:{id:null===(r=window.appData)||void 0===r||null===(r=r.me)||void 0===r?void 0:r.id}});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return D.apply(this,arguments)}function D(){return(D=j(x().mark((function e(t,n,o){var a,i,c,l,u,s,v,g,_;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(y.a)("start","dashboard"),a="string"==typeof t?t:p.a.createHref(t),i=new URL(a,window.location.origin).href,c=n||"string"!=typeof t&&t.state||{},!Object(b.b)()){e.next=8;break}return Object(w.a)(void 0,i,Object(b.a)()),null==o||o(),e.abrupt("return");case 8:if(!d.b.onLine){e.next=37;break}if(null!==(l=window.appData)&&void 0!==l&&null!==(l=l.settings)&&void 0!==l&&l.enable_app_data_fetch){e.next=12;break}return window.location.href=a,e.abrupt("return");case 12:return u=!1,s=!1,h.d&&M(i,c).then((function(e){s||e&&(window.appData=e,m.i.emit(m.c,window.appData.matchCondition),u||(p.a.push(t),u=!0,null==o||o()),console.log("appData restore from cache"))})).catch((function(e){console.log("appData restore from cache failed from %s",e.message)})),e.prev=15,e.next=18,Object(f.get)(a,{"x-app-data":"true"},{ignoreGlobalMessage:!0});case 18:if(v=e.sent,s=!0,null==o||o(),null==v||!v.data){e.next=28;break}return window.appData=v.data,m.i.emit(m.c,window.appData.matchCondition),u||(p.a.push(t),u=!0),T(a,v.data),h.c&&null!==h.a&&void 0!==h.a&&null!==(g=h.a.UPDATOR)&&void 0!==g&&g.WEB_SYSTEM_UPDAPR_CHECK&&window.YuqueDesktopAppJSBridge.ipcInvoke(h.a.UPDATOR.WEB_SYSTEM_UPDAPR_CHECK),e.abrupt("return");case 28:throw new Error("fetch empty app data");case 31:e.prev=31,e.t0=e.catch(15),console.log(e.t0),window.location.href=a;case 35:e.next=54;break;case 37:return e.prev=37,e.next=40,M(i,c);case 40:if(_=e.sent,null==o||o(),!_){e.next=47;break}return window.appData=_,m.i.emit(m.c,window.appData.matchCondition),p.a.push(t),e.abrupt("return");case 47:r.a.error(__("当前处于离线状态，无法查看当前内容")),e.next=54;break;case 50:e.prev=50,e.t1=e.catch(37),console.log("appData fetch failed from %s",e.t1.message),r.a.error(__("当前处于离线状态，无法查看当前内容"));case 54:case"end":return e.stop()}}),e,null,[[15,31],[37,50]])})))).apply(this,arguments)}function U(e){return Object.values(s.TYPE).includes(e)}var B=function(e){var t,n,r=new URLSearchParams(null!==(t=null===(n=window.location)||void 0===n?void 0:n.search)&&void 0!==t?t:"");return r.get("q")?"".concat(e,"?searchKeyword=").concat(r.get("q")):e},z=function(e){var t,n=e.type,r=e.book,o=e.doc,a=e.user,i=e.target,c=e.targetUrl;if(Object(b.b)())return{onClick:Object(w.b)()};if(null===(t=window.appData)||void 0===t||null===(t=t.settings)||void 0===t||!t.enable_app_data_fetch)return{};if(!h.c)return{};if(i&&("Book"===n?(a=i.user,r=i,n=i.type):"User"===n?a=i:U(n)&&(a=i.book.user,r=i.book,o=i)),"User"===n)return{"data-desktoptarget":"_browser"};if("Group"===n){var l=g(a);return{onClick:function(){R(l,{page:"dashboard"})},href:null}}var u=!U(n)&&"Book"!==n,s=U(n)&&"Book"!==r.type;if(u||s){var d=c||_(a,r);return{onClick:function(){window.YuqueDesktopAppJSBridge.openExternalLink(d)},"data-openexternallink":!0,"data-desktophref":d,href:null}}if("Book"===n){var f=_(a,r);return{onClick:function(){R(B(f),{page:"bookOverview"})},"data-desktophref":f,href:null}}if(U(n)){var p=E(a,r,o);return{onClick:function(){R(B(p),{page:"bookOverview"})},"data-desktophref":p,href:null}}};function F(e){var t=e.to,n=e.children,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,S),a=A(i.a.useState(!1),2),c=a[0],s=a[1],d=Object(u.useLocation)(),f=i.a.useMemo((function(){return"function"==typeof t?t(d):t}),[t]),m=i.a.useRef(),v=i.a.useCallback(function(){var e=j(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.a.windows?null==t?void 0:t.ctrlKey:null==t?void 0:t.metaKey)||h.c){e.next=3;break}return e.abrupt("return");case 3:if(!h.c||"_browser"!==r["data-desktoptarget"]){e.next=5;break}return e.abrupt("return");case 5:if(!t.isDefaultPrevented()){e.next=7;break}return e.abrupt("return");case 7:return t.preventDefault(),m.current&&clearTimeout(m.current),m.current=setTimeout((function(){s(!0)}),1500),e.prev=10,e.next=13,R(f,void 0,(function(){return s(!1)}));case 13:return e.prev=13,clearTimeout(m.current),s(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[10,,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[f]),y="string"==typeof f?f:p.a.createHref(f);return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",N({href:y,onClick:v},r),n),c&&i.a.createElement("div",{className:O.spinArea},i.a.createElement(o.a,{size:"large"})))}},1431:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-avatar-upload",e.className].filter(Boolean).join(" ")}),r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),r.createElement("path",{d:"M177.268 80.262c4.525 3.166 10.76 2.064 13.926-2.461 3.11-4.445 2.102-10.538-2.222-13.754l-.24-.173-43.535-30.457a30 30 0 0 0-34.01-.264l-.384.264-43.535 30.457c-4.526 3.166-5.628 9.401-2.462 13.927 3.11 4.444 9.18 5.587 13.682 2.627l.244-.166 43.536-30.457a10 10 0 0 1 11.197-.18l.267.18 43.536 30.457Z",fillRule:"nonzero"}),r.createElement("rect",{x:118,y:39,width:20,height:150,rx:10})))},1432:function(e,t,n){"use strict";var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.initValue,a=e.totalAmount,i=e.setPromoCode,c=e.afterVerifySuccess,l=o(Object(r.useState)(n),2),u=l[0],s=l[1];u&&(t=(t=a-u>1?a-u:1).toFixed(2));return{totalAmountWithPromo:t,onVerifySuccess:function(e){s(e&&e.amount),c&&c()},handlePromoChange:function(e){i(e),u&&s(0)}}}},1433:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-download",e.className].filter(Boolean).join(" ")}),r.createElement("g",{fill:"currentColor",fillRule:"evenodd"},r.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),r.createElement("path",{d:"M177.268 137.806c4.525-3.166 10.76-2.064 13.926 2.462 3.11 4.444 2.102 10.538-2.222 13.753l-.24.173-43.535 30.457a30 30 0 0 1-34.01.264l-.384-.264-43.535-30.457c-4.526-3.166-5.628-9.401-2.462-13.926 3.11-4.445 9.18-5.587 13.682-2.627l.244.165 43.536 30.457a10 10 0 0 0 11.197.18l.267-.18 43.536-30.457Z",fillRule:"nonzero"}),r.createElement("rect",{x:118,y:28,width:20,height:150,rx:10})))},1434:function(e,t,n){"use strict";n(1219);var r=n(959),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(47),u=n(366),s=n(1220),d=(n(1429),n(1426)),f=n(425),p=n(63),m=n(1423),h=n(1470),v=n(1424),y=n(1471),b=n(591),g={userCard:"index-module_userCard_NOTbr",body:"index-module_body_20bgh",avatar:"index-module_avatar_OBHFJ",userInfos:"index-module_userInfos_B16Pa",nameContainer:"index-module_nameContainer_elI96",name:"index-module_name_QeZm4",dingtalk:"index-module_dingtalk_kYXBj",badge:"index-module_badge_lsJBP",dingding:"index-module_dingding_l7pi0",infoWithBg:"index-module_infoWithBg_JGcdP",signature:"index-module_signature_aQ+Wz",infoList:"index-module_infoList_Y58li",infoItem:"index-module_infoItem_same7",icon:"index-module_icon_MGwU8",footer:"index-module_footer_FNHCP",follow:"index-module_follow_1HgLb",footerItem:"index-module_footerItem_H0y7j",number:"index-module_number_NahUE",userLink:"index-module_userLink_i0XYI",skeleton:"index-module_skeleton_Z4M4v",infoDetail:"index-module_infoDetail_dKXCO"};function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w={mobile:"user-mobile",email:"user-email",departments:"user-department-opa",job_title:"user-job",location:"user-location"},O=function(e){var t=e.style,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,c=e.user,u=void 0===c?{}:c,s=e.profile,E=void 0===s?{}:s,O=e.loading,k=e.isInGroup,S=e.userAvatar,N=u.avatar_url,x=u.avatar,A=u.description,P=u.followers_count,C=u.following_count,j=u.name,T=u.id,I=window.appData,M=I.isYuque,L=I.isPublicCloud,R=I.organization,D=_(Object(o.useState)(),2),U=D[0],B=D[1],z=_(Object(o.useState)(null),2),F=z[0],V=z[1],G=_(Object(o.useState)(null),2),Y=G[0],$=G[1],q=E.dingtalk_id,W=E.orgName,H=E.role,K=E.status,Z=E.isPublicUser,Q=K===f.organizationUser.STATUS.terminated,X=H===f.organizationUser.ROLE.outsourcer,J=R&&Z,ee=R&&(null==R?void 0:R.id);Object(o.useEffect)((function(){V("following_count"in E?E.following_count||0:C||0),$("followers_count"in E?E.followers_count||0:P||0)}),[E]);var te=function(){U||l.a.users.mobile({id:T}).then(B)},ne=function(e){return e.map((function(e){return{key:e,icon:w[e],value:E[e]}})).filter((function(e){return!!e.value}))},re=[];re=ne(M?R?["mobile","email","departments","job_title"]:["location","job_title"]:["departments","job_title"]);var oe=null;J?oe=a.a.createElement("div",{className:g.infoWithBg},__("非本空间成员")):Q?oe=a.a.createElement("div",{className:g.infoWithBg},L?__("已离职"):__("已退隐江湖")):X&&(oe=a.a.createElement("div",{className:g.infoWithBg},__("外部联系人")));var ae,ie=!R&&(!Q&&!X&&!J&&E.enable_home);if(ee){var ce={avatar:(ae=E).avatar||N,name:ae.orgName,description:ae.description,departments:null==ae?void 0:ae.departments,job_title:ae.job_title,location:ae.location,role:null==ae?void 0:ae.role,status:null==ae?void 0:ae.status};return a.a.createElement(y.b,{orgUser:ce,user:u,organization:R})}return a.a.createElement("div",{className:"".concat(i," ").concat(g.userCard),style:n,"data-aspm":"c39373"},a.a.createElement("div",{className:g.body},ee?a.a.createElement(b.a,{src:S||N||x,size:48,className:g.avatar,bordered:!0}):a.a.createElement("a",{href:"/".concat(u.login),target:"_blank","data-desktoptarget":"_browser"},a.a.createElement(b.a,{src:S||N||x,size:48,className:g.avatar,bordered:!0})),a.a.createElement("div",{className:g.userInfos},a.a.createElement("div",{className:g.nameContainer},ee?a.a.createElement("span",{className:g.name},W||j):a.a.createElement("a",{href:"/".concat(u.login),target:"_blank","data-desktoptarget":"_browser",className:g.name},W||j),q&&a.a.createElement("a",{href:"dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=".concat(q),className:g.dingtalk,"data-testid":"dingtalk","data-aspm-click":"d001","data-desktoptarget":"_browser"},a.a.createElement(p.b,{name:"dingding-filled",className:g.dingding})),a.a.createElement(m.a,{user:u,useMobile:!0,className:g.badge}),oe),a.a.createElement("div",{className:g.signature},A||""),O&&a.a.createElement("div",{className:g.skeleton},a.a.createElement(d.a,{active:!0,title:!1})),re&&re.length>0?a.a.createElement("div",{className:g.infoList,style:{marginTop:k?0:10}},re.map((function(e){return function(e){return"departments"===e.key?e.value.map((function(t,n){return a.a.createElement("div",{className:g.infoItem,key:e.key+n,"data-testid":"UserCard:departments:".concat(e.key)},a.a.createElement(p.b,{name:e.icon,width:16,className:g.icon}),a.a.createElement("span",{className:g.infoDetail},t))})):a.a.createElement("div",{className:g.infoItem,key:e.key,"data-testid":"UserCard:default:".concat(e.key)},a.a.createElement(p.b,{name:e.icon,width:16,className:g.icon}),"mobile"===e.key?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:g.infoDetail},U||e.value),!U&&a.a.createElement("a",{onClick:te},__("查看"))):a.a.createElement("span",{className:g.infoDetail},e.value))}(e)}))):null)),!!ie&&a.a.createElement("div",{className:g.footer},a.a.createElement("div",{className:g.follow},a.a.createElement("div",{className:g.footerItem},__("粉丝"),a.a.createElement("span",{className:g.number},Y)),a.a.createElement("div",{className:g.footerItem},__("关注"),a.a.createElement("span",{className:g.number},F))),a.a.createElement(v.a,null,a.a.createElement(h.a,{user:u,className:g.followBtn}))))};O.propTypes={user:c.a.object.isRequired,profile:c.a.object,style:c.a.object,className:c.a.string,loading:c.a.bool,isInGroup:c.a.bool};var k=O,S=n(958),N="index-module_popover_Xyidp",x="index-module_overlay_A0ouW";function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var C=function(e){var t=e.user,n=void 0===t?{}:t,i=e.children,c=e.style,d=void 0===c?{}:c,f=e.className,p=void 0===f?"":f,m=e.isInGroup,h=e.userAvatar,v=void 0===h?"":h,y=n&&n.id,b=A(Object(o.useState)("topLeft"),2),g=b[0],_=b[1],E=Object(o.useRef)(null),w=Object(s.b)(),O=Object(u.a)(l.a.users.profile),P=O.data,C=O.loading,j=O.request;if(null==y||S.a.isGroupOrPublication(n))return i;return window.h5?i:a.a.createElement(r.a,{placement:g,content:a.a.createElement(k,{isInGroup:m,user:n,profile:P||{},loading:C,userAvatar:v}),style:d,className:"".concat(p," ").concat(N),overlayClassName:x,mouseEnterDelay:.3},a.a.createElement("span",{onMouseOver:function(){var e=E&&E.current.getBoundingClientRect().top;_(e<240?"bottomLeft":"topLeft"),P||C||!w||j({id:y})},ref:E,"data-testid":"content",style:{cursor:"pointer"}},i))};C.propTypes={user:c.a.object.isRequired,style:c.a.object,className:c.a.string,children:c.a.any,isInGroup:c.a.bool};t.a=C},1435:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(1636))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},1436:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(1637))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},1437:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-comment-hide",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"2573787990a",d:"M0 0h256v256H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm55.143 52.902c3.795 3.873 3.801 10.047.067 13.928l-.212.213-63.285 62a10 10 0 0 1-13.776.209l-.219-.208-32.715-32.041c-3.946-3.865-4.012-10.196-.147-14.142 3.794-3.873 9.966-4.007 13.924-.354l.217.207 25.717 25.187 56.288-55.144c3.945-3.865 10.276-3.8 14.141.145Z",fill:"currentColor",fillRule:"nonzero"})))},1438:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close-outlined",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},1439:function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"i",(function(){return V})),n.d(t,"e",(function(){return G})),n.d(t,"o",(function(){return $})),n.d(t,"c",(function(){return q})),n.d(t,"n",(function(){return W})),n.d(t,"l",(function(){return H})),n.d(t,"h",(function(){return Z})),n.d(t,"j",(function(){return Q})),n.d(t,"b",(function(){return J})),n.d(t,"m",(function(){return ee})),n.d(t,"k",(function(){return ne})),n.d(t,"f",(function(){return re})),n.d(t,"g",(function(){return oe})),n.d(t,"d",(function(){return ae})),n.d(t,"p",(function(){return ie}));n(800);var r=n(381),o=(n(588),n(110)),a=(n(1472),n(1465)),i=(n(1219),n(959)),c=(n(278),n(86)),l=(n(227),n(101)),u=n(0),s=n.n(u),d=n(6),f=n.n(d),p=n(5),m=n.n(p),h=n(1339),v=n(76),y=n(10),b=n(565),g=n(1016),_=n(63),E=n(1221),w={wrap:"index-module_wrap_iKZPE",close:"index-module_close_mZbMN",icon:"index-module_icon_gxtpV",closeIcon:"index-module_closeIcon_kM1zW"};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.icon,n=e.content,r=e.style,o=e.showClose,a=O(Object(u.useState)(!0),2),i=a[0],c=a[1];return i?s.a.createElement("div",{className:w.wrap,style:r},t&&s.a.createElement("div",{className:w.icon},t),s.a.createElement("div",{className:w.content},n),o&&s.a.createElement("div",{className:w.close,onClick:function(){c(!1)}},s.a.createElement("span",{className:m()("lake-icon","lake-icon-close",w.closeIcon)}))):null};S.propTypes={icon:f.a.node,content:f.a.node.isRequired,style:f.a.object,showClose:f.a.bool};var N=S,x=n(184),A=n(216),P=n(1422),C=(n(1645),n(326)),j=n(563),T={articleTitle:"index-module_articleTitle_VJTLJ",popover:"index-module_popover_nfMC3",belongMenu:"index-module_belongMenu_2QmLB",belongText:"index-module_belongText_TkCAl",belongMenuOverlay:"index-module_belongMenuOverlay_ua9Uh",belongMenuLabel:"index-module_belongMenuLabel_Eor0q",privacy:"index-module_privacy_QkaFB"};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function M(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F={},V=function(e){var t=e.className,n=e.type,r=void 0===n?"doc":n,o=e.width,a=void 0===o?20:o;return s.a.createElement(_.b,{className:"doc-icon ".concat(t),name:j.b.getName("Doc",{type:r}),width:a})};F.getTypeText=function(e){var t=e;return"Doc"===e?t=__("文档#lower_case"):"Sheet"===e?t=__("表格#lower_case"):"Table"===e?t=__("数据表#lower_case"):"Board"===e&&(t=__("画板#lower_case")),t},F.getTypeTextOfBook=function(e){var t=e;return"Book"===e?t=__("文档"):"Sheet"===e&&(t=__("表格")),t},F.getFormalTitle=function(e){return e.title},F.getDefaultTitle=C.a.getDefaultTitle;var G=function(e){var t=e.doc,n=e.showType,r=e.showAuthor,o=void 0===r||r,a=C.a.getDocShowAuthorOption(t);return o&&a!==v.SHOW_AUTHOR_OPTION.hide?"sheet"===n?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-sheet"},s.a.createElement("span",{className:"larkicon larkicon-user"}),s.a.createElement("span",{className:T.label},__("参与编辑：")," "),s.a.createElement(Y,{doc:t,showAuthor:!0})):"doc"===n?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-doc",className:"meta-item"},s.a.createElement(l.a,{title:__("参与编辑")},s.a.createElement("span",{className:"author larkicon larkicon-user"})),s.a.createElement(Y,{doc:t,showAuthor:o})):s.a.createElement(Y,{doc:t,showAuthor:o}):null};G.propTypes={doc:f.a.object.isRequired,showAuthor:f.a.bool.isRequired,showType:f.a.oneOf(["sheet","doc"])};var Y=function(e){var t=e.doc,n=C.a.getDocShowAuthorOption(t);if(n===v.SHOW_AUTHOR_OPTION.hide)return null;if(n===v.SHOW_AUTHOR_OPTION.custom_text){var r=C.a.getDocShowAuthorCustomText(t);return r?s.a.createElement("span",{"data-testid":"doc-contributors-custom-text"},r):null}var o=C.a.getDocContributors(t);if(!o||0===o.length)return null;var a=o.slice(0,3);return s.a.createElement("span",{"data-testid":"doc-contributors",className:"doc-contributors"},a.map((function(e,t){return e&&s.a.createElement("span",{key:e.id},s.a.createElement(g.b,{user:e,type:g.a.link,withCard:!0,className:T.popover}),t!==a.length-1&&__("、"))})),o.length>3&&s.a.createElement("span",null,__("等")))};Y.propTypes={doc:f.a.object.isRequired};var $=function(e){var t=e.doc,n=e.hasDraftSign,r=F.getFormalTitle(t);return n&&0===t.status?s.a.createElement("span",{className:"doc-title",title:r},s.a.createElement("span",{className:"doc-title-draft"},"[",__("草稿"),"]"),r):s.a.createElement("span",{className:"doc-title",title:r},r)};$.propTypes={hasDraftSign:f.a.bool,doc:f.a.object};var q=function(e){var t=e.title;return s.a.createElement("h1",{id:"article-title",className:m()(T.articleTitle,"doc-article-title")},t)},W=function(e){var t=e.doc;return t.content_updated_at&&t.content_updated_at!==t.created_at?s.a.createElement("span",{className:"doc-time"},__("更改于"),s.a.createElement(b.a,{time:new Date(t.content_updated_at)})):s.a.createElement("span",{className:"doc-time"},__("创建于"),s.a.createElement(b.a,{time:new Date(t.created_at)}))},H=function(e){var t=e.doc,n=t[e.showBy]||t.content_updated_at;return s.a.createElement("span",{className:"doc-time"},s.a.createElement(b.a,{time:new Date(n)}))},K=function(){return s.a.createElement("div",{className:"doc-draft-tip-content"},s.a.createElement("p",null,__("当前内容与编辑态不一致，请去编辑态进一步操作")))},Z=function(e){var t=e.doc,n=e.className;return t.content_modified?"Sheet"===t.type||"Table"===t.type?s.a.createElement("div",{className:n,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},s.a.createElement(_.b,{name:"doc-has-new-content",height:18,width:18}),s.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新"))):s.a.createElement(N,{style:{marginBottom:"Doc"===t.type?24:0},icon:s.a.createElement(_.b,{name:"edit-border",height:18,width:18}),content:s.a.createElement(K,{doc:t}),showClose:"Doc"===t.type}):null};Z.propTypes={doc:f.a.object.isRequired,className:f.a.string};f.a.object.isRequired;var Q=function(e){var t=e.doc,n=e.url,r=e.target,o=e.desktopTarget,a=void 0===o?"_blank":o,i=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return s.a.createElement("a",{href:n,target:r||i,className:"doc-link","data-desktoptarget":a},s.a.createElement($,{doc:t}))};Q.propTypes={doc:f.a.object,url:f.a.string,target:f.a.string,desktopTarget:f.a.string};var X=function(e){var t=e.organization,n=e.doc,r=e.book,o=e.group,a=e.getPopupContainer,i=e.placement,c=void 0===i?"bottom":i,u=e.onlyIcon;if(window.appData.sharePage)return null;if(null==n||!n.id)return null;if(r){var d=Object(x.c)({type:"doc",target:n,group:o,book:r}),f=function(){return d!==y.PRIVACY.private?"icon-public":(null==r||r.extend_private,y.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private")};return u?s.a.createElement(l.a,{title:Object(x.d)({privacy:d,type:"doc",organization:t,group:o,book:r}),getPopupContainer:a,placement:c},s.a.createElement(_.b,{name:f(),width:14,height:14})):s.a.createElement(l.a,{title:Object(x.d)({privacy:d,type:"doc",organization:t,group:o,book:r}),getPopupContainer:a,placement:c},s.a.createElement("span",{className:"doc-access-scope"},s.a.createElement(_.b,{name:f(),width:14,height:14})))}return null},J=function(e){return s.a.createElement(A.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-access-scope"})}},s.a.createElement(X,e))};J.propTypes={group:f.a.object.isRequired,book:f.a.object.isRequired,doc:f.a.object.isRequired,organization:f.a.object,getPopupContainer:f.a.func,placement:f.a.string,onlyIcon:f.a.bool};var ee=function(e){var t=e.doc,n=e.withTip,r=void 0===n||n;if(0!==t.status)return null;var o=s.a.createElement("div",{className:"doc-draft-tip",style:{width:"360px"}},s.a.createElement(K,{doc:t})),a=s.a.createElement(c.a,{className:"doc-draft-tag","data-testid":"doc-draft-tag",onClick:function(e){e.stopPropagation(),e.preventDefault()}},t.published_at?__("未更新"):__("未发布"));return r?s.a.createElement(i.a,{placement:"bottomLeft",content:o},a):a};ee.displayName="LarkDocStatus";var te=function(e){var t=e.doc,n=e.group,r=e.book;if(t.public!==y.PRIVACY.private){var o=Object(P.a)(t,"DOC",n,r);return s.a.createElement(c.a,{className:"doc-share-tag"},s.a.createElement("a",{href:o.url,target:"_blank"},__("分享中")))}return null},ne=function(e){return s.a.createElement(A.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-ShareLink-tag"})}},s.a.createElement(te,e))};ne.propTypes={group:f.a.object.isRequired,book:f.a.object.isRequired,doc:f.a.object.isRequired},ne.displayName="LarkShareLink";var re=function(e){var t=e.doc,n=e.size,r=void 0===n?{}:n,o=e.placeholder,a=t.cover||o;return a?s.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:'url("'.concat(Object(E.a)(a,B({},r)),'")')}}):s.a.createElement(_.b,{name:t.type.toLowerCase(),width:48})},oe=function(e){var t=e.doc,n=e.highlightUsers;if(C.a.getDocShowAuthorOption(t)===v.SHOW_AUTHOR_OPTION.hide)return s.a.createElement("span",{className:"info-not-show-creator"},__("不显示作者"));var r=C.a.getDocContributors(t);return r?(Array.isArray(r)||(r=[r]),s.a.createElement(l.a,{title:function(){return r.map((function(e){return e.name})).join("、")}},s.a.createElement("span",null,r.reduce((function(e,t,r){return null!=n&&n.includes(String(t.id))?(e.unshift.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},s.a.createElement("b",null,t.name)),"、"]),e):(e.push.apply(e,[s.a.createElement("a",{"data-desktoptarget":"_browser",href:"/".concat(t.login)},t.name),"、"]),e)}),[]).slice(0,-1)))):null},ae=function(e){var t=e.belongs,n=e.onChange,r=e.overlayClassName,o=e.overlayPlacement;function i(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.text||(r.text=r.label,r.label=s.a.createElement("span",{className:T.belongMenuLabel},s.a.createElement(h.default,null),s.a.createElement("span",null,r.label)),r.children&&r.children.length&&i(r.children))}}catch(e){n.e(e)}finally{n.f()}return e}var c=L(s.a.useState(""),2),l=c[0],u=c[1],d=L(s.a.useState(M(t)),2),f=d[0],p=d[1];s.a.useEffect((function(){p(i(M(t)))}),[t]);return!f||f.length<=1?s.a.createElement("span",{className:T.belongText},l||__("归属")):s.a.createElement(a.a,{defaultValue:[null],popupClassName:m()(T.belongMenuOverlay,r),popupPlacement:o||"bottomLeft",options:f,onChange:function(e,t){n(e),e&&e[0]?u(t.map((function(e){return e.text})).join(" / ")):u("")},changeOnSelect:!0},s.a.createElement("span",{className:T.belongMenu},s.a.createElement("span",{className:T.belongText},l||__("归属")),s.a.createElement(_.b,{name:"arrow-down",width:16})))};ae.propTypes={belongs:f.a.array.isRequired,onChange:f.a.func.isRequired,overlayClassName:f.a.string,overlayPlacement:f.a.string};var ie=function(e){var t=e.current,n=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,c=[{name:__("所有"),value:""},{name:__("文档"),value:"Doc"},{name:__("表格"),value:"Sheet"},{name:__("画板"),value:"Board"},{name:__("数据表"),value:"Table"}];t||(t="");var l=c.find((function(e){return e.value===t}));return s.a.createElement(r.a,{trigger:"click",placement:i||"bottomLeft",overlay:s.a.createElement(o.a,null,c.map((function(e){return s.a.createElement(o.a.Item,{key:e.value,onClick:function(){n(e.value)}},t===e.value&&s.a.createElement(h.default,null),e.name)}))),overlayClassName:a},s.a.createElement("span",null,l.value?l.name:__("类型")," ",s.a.createElement(_.b,{name:"arrow-down",width:16})))};ie.propTypes={current:f.a.string.isRequired,onChange:f.a.func.isRequired,overlayClassName:f.a.string,overlayPlacement:f.a.string}},1440:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),o=n.n(r),a=n(5),i=n.n(a),c=n(347),l=["#3988E4","#B97940","#2F9547","#235B9D","#59AF9A"];function u(e){if(!e)return l[0];var t=e.charCodeAt(0)%l.length;return l[t]||l[0]}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=e.text,n=void 0===t?"U":t,r=e.size,a=void 0===r?32:r,l=e.style,s=e.className,d=i()("placeholder-avatar",s);if(!n)return null;var p=Object(c.getAvatarText)(n);return o.a.createElement("span",{"data-testid":"letter-avatar",className:d,title:p,style:f(f({},l),{},{width:"".concat(a,"px"),heigth:"".concat(a,"px"),lineHeight:"".concat(a,"px"),fontSize:"".concat(1*a/2,"px"),backgroundColor:"".concat(u(n))})},p.toUpperCase())}},1441:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-delete-solid",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm46.1 67.1c-4.028-4.028-10.512-4.1-14.628-.216l-.222.216-30.651 30.65-30.65-30.65c-4.027-4.028-10.512-4.1-14.627-.216l-.222.216c-4.028 4.027-4.1 10.512-.216 14.627l.216.222 30.65 30.65L83.1 159.25c-4.028 4.028-4.1 10.512-.216 14.628l.216.222c4.027 4.027 10.512 4.099 14.627.215l.222-.215 30.65-30.652L159.25 174.1c4.028 4.027 10.512 4.099 14.628.215l.222-.215c4.027-4.028 4.099-10.512.215-14.628l-.215-.222-30.652-30.651 30.652-30.65c4.027-4.027 4.099-10.512.215-14.627l-.215-.222Z",fill:"currentColor",fillRule:"evenodd"}))},1442:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({viewBox:"64 64 896 896",fill:"currentColor",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-antd-undo",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}))},1443:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-closecircleoutlined",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm44.071 47.929c3.834 3.834 3.904 10.007.21 13.927l-.21.215-29.725 29.725 29.773 30.181.208.217c3.668 3.944 3.556 10.117-.304 13.925-3.932 3.879-10.263 3.836-14.142-.096l-29.678-30.084-30.132 30.132c-3.905 3.905-10.237 3.905-14.142 0-3.834-3.834-3.904-10.007-.21-13.927l.21-.215 30.227-30.229-29.275-29.677-.208-.217c-3.668-3.944-3.556-10.117.304-13.925 3.932-3.879 10.263-3.836 14.142.096l29.18 29.58 29.63-29.628c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1444:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(5),i=n.n(a),c=n(960),l=n(587),u=n(563),s=n(242),d=n(139);t.a=function(e){var t=window.appData.isPublicCloud,n=e.group,r=e.size,a=e.showOrgLabel,f=void 0!==a&&a,p=e.iconSize,m=e.radius,h=e.className,v=null==n?void 0:n.organization,y=(null==n?void 0:n.iconMap)||d.d;s.c.isPublicPage(n)&&(y[0]=d.f[0]);var b=u.b.getName("User",n)||y[0];return o.a.createElement("div",{className:i()("group-avatar",h),style:{width:"".concat(r,"px"),height:"".concat(r,"px")}},t&&f&&v&&o.a.createElement("span",{className:"lock"},o.a.createElement(l.c,{src:v.logo,size:r>32?20:13,radius:100})),n?o.a.createElement(c.a,{src:n.avatar||n.avatar_url||n.avatarUrl,size:r,className:i()({"group-type-default":b}),name:n.name,icon:b,iconSize:p||Math.floor(.9*r),radius:m}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},1445:function(e,t,n){"use strict";t.a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"}},1446:function(e,t,n){"use strict";var r=n(25),o=n(2915),a=Object.assign({},o,r.ddSdk.getExportSdk());e.exports=a},1447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAMEWORK=t.PLATFORM=t.RUNTIME=void 0,t.RUNTIME={WEB:"Web",WEEX:"Weex",UNKNOWN:"Unknown"},t.PLATFORM={MAC:"Mac",WINDOWS:"Windows",IOS:"iOS",ANDROID:"Android",IPAD:"iPad",BROWSER:"Browser",UNKNOWN:"Unknown"},t.FRAMEWORK={VUE:"Vue",RAX:"Rax",UNKNOWN:"Unknown"}},1448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n(799),a=n(961),i=n(1340),c=n(1449),l=n(2920),u=n(1341),s=n(1450),d=n(1451);r.ddSdk.setPlatform({platform:o.ENV_ENUM.android,bridgeInit:function(){var e=(0,o.getENV)();return e.appType===a.APP_TYPE.MINI_APP?Promise.resolve(i.default):e.appType===a.APP_TYPE.WEBVIEW_IN_MINIAPP?Promise.resolve(c.default):e.appType===a.APP_TYPE.WEEX?(0,u.androidWeexBridge)():(0,l.h5AndroidbridgeInit)().then((function(){return l.default}))},authMethod:"runtime.permission.requestJsApis",event:{on:function(e,t){var n=(0,o.getENV)();switch(n.appType){case a.APP_TYPE.WEB:case a.APP_TYPE.WEBVIEW_IN_MINIAPP:(0,s.on)(e,t);break;case a.APP_TYPE.WEEX:(0,d.on)(e,t);break;default:throw new Error("Not support global event in the platfrom: ".concat(n.appType))}},off:function(e,t){var n=(0,o.getENV)();switch(n.appType){case a.APP_TYPE.WEB:case a.APP_TYPE.WEBVIEW_IN_MINIAPP:(0,s.off)(e,t);break;case a.APP_TYPE.WEEX:(0,d.off)(e,t);break;default:throw new Error("Not support global event in the platfrom: ".concat(n.appType))}}}})},1449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.default=function(e,t){return new Promise((function(n,o){var a=t.onSuccess||r,i=t.onFail||r;if(delete t.onSuccess,delete t.onFail,AlipayJSBridge){var c=e.split("."),l=c.pop()||"",u=c.join(".");AlipayJSBridge.call.apply(null,["webDdExec",{serviceName:u,actionName:l,args:t},function(e){var t={},r=e.content;if(r)try{t=JSON.parse(r)}catch(e){console.error("parse dt api result error",r,e)}e.success?(a.apply(null,[t]),n(t)):(i.apply(null,[t]),o(t))}])}else{var s=new Error("Fatal error, cannot find bridge ,current env is WebView in MiniApp");i(s),o(s)}}))}},1450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.off=t.on=void 0;var r=["resume","pause","online","offline","backbutton","goBack","pullToRefresh","message","recycle","restore","drawer","tab","navHelpIcon","navRightButton","navMenu","navTitle","appLinkResponse","internalPageLinkResponse","networkEvent","hostTaskEvent","deviceOrientationChanged","autoCheckIn","deviceFound","hostCheckIn","screenshot","becomeActive","keepAlive","navTitleClick","sharePage","wxNotify","editNoteCommand","updateStyle","qrscanCommonNotify","__message__","dtChannelEvent","livePlayerEventPlay","livePlayerEventPause","livePlayerEventEnded","livePlayerEventError","navActions","attendEvents"],o="dtBizBridgeEvent",a="__eventTypeList__",i="undefined"==typeof WeakMap?void 0:new WeakMap;t.on=function(e,t){if(-1!==r.indexOf(e))document.addEventListener(e,t);else{var n=function(e,t){if(i){var n=i.get(t);return void 0===n?(n=function(e){var r=e.detail;if(r.namespace&&r.eventName){var o="".concat(r.namespace,".").concat(r.eventName);n&&-1!==n[a].indexOf(o)&&t(r.data)}},n[a]=[e],i.set(t,n)):-1===n[a].indexOf(e)&&n[a].push(e),n}}(e,t);n?document.addEventListener(o,n):console.log("bind event : ".concat(e," need WeakMap support , current environment doesnot"))}};t.off=function(e,t){if(-1!==r.indexOf(e))document.removeEventListener(e,t);else{var n=function(e,t){if(i){var n=i.get(t);return n&&-1!==n[a].indexOf(e)&&n[a].splice(n[a].indexOf(e),1),n&&n[a].length<=1?n:void 0}}(e,t);n&&document.removeEventListener(o,n)}}},1451:function(e,t,n){"use strict";var r=this;Object.defineProperty(t,"__esModule",{value:!0}),t.off=t.on=void 0;var o=n(1341);t.on=function(e,t){(0,o.requireModule)("globalEvent").addEventListener(e,(function(e){var n={preventDefault:function(){throw new Error("does not support preventDefault")},detail:e};t.call(r,n)}))};t.off=function(e,t){(0,o.requireModule)("globalEvent").removeEventListener(e,t)}},1452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n(799),a=n(961),i=n(1340),c=n(1449),l=n(2921),u=n(1341),s=n(1450),d=n(1451);r.ddSdk.setPlatform({platform:o.ENV_ENUM.ios,bridgeInit:function(){var e=(0,o.getENV)();return e.appType===a.APP_TYPE.MINI_APP?Promise.resolve(i.default):e.appType===a.APP_TYPE.WEBVIEW_IN_MINIAPP?Promise.resolve(c.default):e.appType===a.APP_TYPE.WEEX?(0,u.iosWeexBridge)():(0,l.h5IosBridgeInit)().then((function(){return l.default}))},authMethod:"runtime.permission.requestJsApis",event:{on:function(e,t){var n=(0,o.getENV)();switch(n.appType){case a.APP_TYPE.WEB:case a.APP_TYPE.WEBVIEW_IN_MINIAPP:(0,s.on)(e,t);break;case a.APP_TYPE.WEEX:(0,d.on)(e,t);break;default:throw new Error("Not support global event in the platfrom: ".concat(n.appType))}},off:function(e,t){var n=(0,o.getENV)();switch(n.appType){case a.APP_TYPE.WEB:case a.APP_TYPE.WEBVIEW_IN_MINIAPP:(0,s.off)(e,t);break;case a.APP_TYPE.WEEX:(0,d.off)(e,t);break;default:throw new Error("Not support global event in the platfrom: ".concat(n.appType))}}}})},1453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=void 0;var r=n(799),o=(0,r.getENV)();t.isMobile=o.platform===r.ENV_ENUM.ios||o.platform===r.ENV_ENUM.android},1456:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=n(14),i=n(20),c=i.ORDER_TYPE,l=i.PRICE_STAGES,u=i.PAYMENT_TYPE,s=n(74).MEMBER_RULE,d=n(84);function f(e){var t=d.TRANSITION_DEADLINE,n=d.OLD_ORGANIZATION_DEADLINE,r=a().isBefore(t),o=a(e).isBefore(n);return r&&o}e.exports=function(e){var t=e.order_type,n=e.member_size,r=void 0===n?e.max_member:n,o=e.duration,i=e.upload_size,u=e.expired_at,s=e.created_at,p=e.max_member,m=e.enableDiscount,h=void 0===m||m,v=d.ORG_UPLOAD_SIZE_MAP,y=d.OLD_ORGANIZATION_DEADLINE;if(t===c.data){var b=Object.values(v).find((function(e){return e.value===i}));if(b)return b.price}var g,_=a(s).isBefore(y),E=a(s).endOf("day").add(_?90:30,"day"),w=a().isAfter(E)?a():E;u?(g=a(u).diff(w,"day"))<0&&(g=0):g=0;var O=0,k=0;if(h&&f(s))O=12*r,k=12*p;else{var S=l.find((function(e){return e.member===r}));if(!S)return null;O=S.price;var N=l.find((function(e){return e.member===p}));if(!N)return null;k=N.price}var x=(O-k)*g/365;switch(x<0&&(x=0),t){case c.upgrade:case c.buy:return(O*o).toFixed(2);case c.renew:return(O*o+x).toFixed(2);case c.buyMember:return Math.max(x,.01).toFixed(2);default:return}},e.exports.hasDiscount=f,e.exports.getCostDetail=function(e,t,n,r,o,i){var c,u,s,f,p,m=d.OLD_ORGANIZATION_DEADLINE,h=a(e).isBefore(m),v=a(e).endOf("day").add(h?90:30,"day"),y=a().isAfter(v)?a():v;t?(c=a(t).diff(y,"day"))<0&&(c=0):c=0;var b=(l.find((function(e){return e.member===n}))||{}).price,g=(l.find((function(e){return e.member===r}))||{}).price;return b&&g?(i?(u=12*n*o,s=(12*(n-r)*c/365).toFixed(2),f=b*o,p=((b-g)*c/365).toFixed(2)):(u=b*o,s=((b-g)*c/365).toFixed(2)),{renewAmount:u,upgradeAmount:s,rawRenewAmount:f,rawUpgradeAmount:p}):{}},e.exports.getOrganizationMemberStage=function(e){var t={};if(e=e||0){var n,o=r(l);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(t=a,e<=a.member)break}}catch(e){o.e(e)}finally{o.f()}}return t.member||s.Organization[u.free].max_member},e.exports.mergeGroupExpiredAtToOrganization=function(e,t){if(e){var n=a(e);return t&&a(t).isAfter(a())&&(n=a(t).add(a(e).diff(a()),"milliseconds")),n}}},1459:function(e,t,n){"use strict";var r=n(1444);n.d(t,"a",(function(){return r.a}))},1461:function(e,t,n){var r=n(210),o=n(243),a=n(810),i=n(72);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},1463:function(e,t,n){"use strict";n(1219);var r=n(959),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(63),u="index-module_more_sDgGm",s=["iconClassName","data-testid","visible","onVisibleChange","getPopupContainer","isHover","iconName","placement","isMenuType"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}var f=function(e){return e.parentNode};function p(e){var t=e.iconClassName,n=e["data-testid"],o=void 0===n?"more-actions":n,i=e.visible,c=e.onVisibleChange,p=e.getPopupContainer,m=void 0===p?f:p,h=e.isHover,v=e.iconName,y=e.placement,b=e.isMenuType,g=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),_={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},E={};void 0!==i&&(E.visible=e.visible),void 0!==c&&(E.onVisibleChange=e.onVisibleChange);var w=e.iconWidth||16,O={lineHeight:"".concat(w,"px"),padding:(24-w)/2},k=["click"];return h&&(k[0]="hover"),a.a.createElement(r.a,d({className:e.className,overlayClassName:e.overlayClassName,type:b?"menu":void 0,getPopupContainer:m,placement:y||"bottomRight",destroyTooltipOnHide:e.destroyTooltipOnHide,autoAdjustOverflow:!0,trigger:k,content:e.content,hideWhenInactive:!0},E,g),e.children||a.a.createElement("span",{className:u,style:O,"data-testid":"more-actions:Popover:".concat(o)},a.a.createElement(l.b,{name:v||_[e.direction]||_.horizontal,width:w,className:t})))}p.defaultProps={direction:"horizontal",isMenuType:!0},p.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func,iconName:c.a.string,destroyTooltipOnHide:c.a.bool,placement:c.a.string,isMenuType:c.a.bool,iconClassName:c.a.string,children:c.a.node,isHover:c.a.bool};t.a=p},1465:function(e,t,n){"use strict";n(3162);var r=n(1265);n(1472);t.a=r.a},1467:function(e,t,n){"use strict";n(130);var r=n(41),o=(n(138),n(30)),a=(n(227),n(101)),i=(n(385),n(185)),c=(n(48),n(11)),l=n(0),u=n.n(l),s=n(6),d=n.n(s),f=n(5),p=n.n(f),m=n(190),h={fileTypeSelector:"index-module_fileTypeSelector_73BHW",item:"index-module_item_H3xgY",fileType:"index-module_fileType_l65Jm",fileTypeIcon:"index-module_fileTypeIcon_eSmiM",fileTypeMeta:"index-module_fileTypeMeta_4eYr8",fileTypeName:"index-module_fileTypeName_9B0Rn",fileTypeExt:"index-module_fileTypeExt_wTTFB",fileTypeReady:"index-module_fileTypeReady_TAUvL"},v=(n(40),n(9)),y=n(60),b=n.n(y),g=n(63),_="EvernoteDirUpload-module_dragZone_qrdZx",E="EvernoteDirUpload-module_tip_FtuKl",w="EvernoteDirUpload-module_icon_ZYE-k",O="EvernoteDirUpload-module_dragOver_0DaAV";function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function N(){N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function x(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}var M=b()("evernotedirupload"),L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=null,o=[{key:"genZipFileFromDrop",value:(c=j(N().mark((function t(n){var r,o,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==(r=n.files).length||!r[0].name.endsWith(".zip")){t.next=4;break}return M("zip文件，直接返回"),t.abrupt("return",r[0]);case 4:return o=x(n.items).map((function(e){return e.webkitGetAsEntry?e.webkitGetAsEntry():null})).filter(Boolean),M({entries:o}),t.prev=6,t.next=9,e.getFileList(o);case 9:return a=t.sent,t.next=12,e.evernoteDirToZip(a);case 12:return i=t.sent,t.abrupt("return",i);case 16:return t.prev=16,t.t0=t.catch(6),t.abrupt("return",Promise.reject(t.t0));case 19:case"end":return t.stop()}}),t,null,[[6,16]])}))),function(e){return c.apply(this,arguments)})},{key:"evernoteDirToZip",value:(i=j(N().mark((function e(t){var r,o,a,i,c,l,u,s,d,f,p,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1303).then(n.t.bind(null,8632,7));case 2:r=e.sent.default,M(r),o=new r,a="evernote_zip_".concat((new Date).toISOString(),".zip"),M(t),i=0,1===t.length&&(a="".concat(t[0][0].fullPath.split("/")[0],".zip")),c=S(t);try{for(c.s();!(l=c.n()).done;){u=l.value,s=S(u);try{for(s.s();!(d=s.n()).done;)f=d.value,p=f.fullPath,i++,M("zipped",p),o.file(p,f.file)}catch(e){s.e(e)}finally{s.f()}}}catch(e){c.e(e)}finally{c.f()}if(i){e.next=13;break}throw new Error("none of the given files is zipped");case 13:return e.next=15,o.generateAsync({type:"blob"});case 15:return m=e.sent,e.abrupt("return",new File([m],a));case 17:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getFileList",value:(a=j(N().mark((function t(n){var r,o,a,i,c,l,u;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=function(){return u=j(N().mark((function t(n){var r,o,a,i=arguments;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:[],n){t.next=3;break}return t.abrupt("return",r);case 3:if(!n.isDirectory){t.next=9;break}return o=n.createReader(),t.next=7,new Promise((function(e){o.readEntries(function(){var t=j(N().mark((function t(n){var o,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=S(n),t.prev=1,o.s();case 3:if((a=o.n()).done){t.next=9;break}return i=a.value,t.next=7,l(i,r);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),o.e(t.t0);case 14:return t.prev=14,o.f(),t.finish(14);case 17:e(null);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e){return t.apply(this,arguments)}}())}));case 7:t.next=14;break;case 9:if(!n.isFile){t.next=14;break}return t.next=12,e.getFileOfEntry(n);case 12:a=t.sent,r.push({file:a,fullPath:n.fullPath.slice(1)});case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)},l=function(e){return u.apply(this,arguments)},r=[],o=S(n),t.prev=4,o.s();case 6:if((a=o.n()).done){t.next=14;break}return i=a.value,t.next=10,l(i);case 10:c=t.sent,r.push(c);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:return M("解析出的文件",r),t.abrupt("return",r);case 24:case"end":return t.stop()}}),t,null,[[4,16,19,22]])}))),function(e){return a.apply(this,arguments)})},{key:"getFileOfEntry",value:function(e){return new Promise((function(t,n){e.file((function(e){t(e)}),(function(e){n(e)}))}))}}],r&&T(t.prototype,r),o&&T(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o,a,i,c}(),R=["onBeforeUpload","onUploadChange","setImportModalHide","buttonNode","data"];function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(null,arguments)}var U=b()("evernotedirupload"),B=function(e){e.onBeforeUpload,e.onUploadChange,e.setImportModalHide,e.buttonNode;var t=e.data,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,R);Object(l.useEffect)((function(){n.e(1303).then(n.t.bind(null,8632,7))}),[]);var o=function(t,n,r){if("function"==typeof e.onChange&&t){U(r,n);var o={uid:Math.random().toString(32),name:t.name,status:n,percent:100,response:r};e.onChange({file:o,fileList:[o]})}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,D({},r,{data:t,onChange:function(e){var t;null===(t=r.onChange)||void 0===t||t.call(r,e)}}),u.a.createElement("div",{className:_,onDragOver:function(e){e.preventDefault(),e.currentTarget.classList.add(O)},onDragLeave:function(e){e.preventDefault(),e.target===e.currentTarget&&e.currentTarget.classList.remove(O)},onDrop:function(e){e.preventDefault(),e.stopPropagation(),c.a.loading({content:__("文件正在解析中..."),duration:0,key:"generating_zip"}),L.genZipFileFromDrop(e.dataTransfer).then((function(e){if(!r.customRequest)throw new Error("lack of customRequest");r.customRequest&&r.customRequest({file:e,data:t(),action:r.action,method:r.method,onError:function(){o(e,"error")},onProgress:function(){o(e,"uploading")},onSuccess:function(t){U("上传接口调用成功",t),o(e,"done",t)}})})).catch((function(e){U(e),c.a.error(__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"))})).finally((function(){c.a.destroy("generating_zip")}))}},u.a.createElement(g.b,{name:"DoubleArrowDown",className:w}),u.a.createElement("div",{className:E},u.a.createElement("span",null,__("可直接拖入一个文件夹或.zip压缩包"))),u.a.createElement(v.a,null,__("上传文件")))))},z=n(323);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function G(e,t,n){return t=$(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,n||[],$(e).constructor):t.apply(e,n))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function W(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(null,arguments)}function Z(){Z=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==F(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(F(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Q(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function X(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ne={lake:__("语雀文档"),lakeboard:__("语雀画板"),lakesheet:__("语雀表格"),laketable:__("语雀数据表"),lakebook:__("语雀知识库"),dingdocs:__("钉钉知识库")},re=function(e){var t,n=e.fileOption,r=e.getParamsOption,o=e.book,a=e.importType,s=e.onBeforeUpload,d=e.onUploadChange,f=e.customRequest,p=e.maxCount,h=e.setModalHide,v=J(Object(l.useState)([]),2),y=v[0],b=v[1],g=function(e){var t=X(e.fileList);b(t),d(e)},_=function(){var e,n=(e=Z().mark((function e(n,r){var o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&r.length>p)){e.next=4;break}throw o="一次最多上传 ".concat(p," 个文件。"),t||(c.a.warn(__(o)),t=!0),new Error(o);case 4:if(!s){e.next=7;break}return e.next=7,s();case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Q(a,r,o,i,c,"next",e)}function c(e){Q(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),E=function(){var e=n.extensions.join(", "),t="/api/import?ctoken=".concat(Object(m.a)(window)),i={book_id:o.id,type:n.key,import_type:a},c={name:"file",action:t,data:function(){if(r){var e=r();e&&(i.options=JSON.stringify(e))}return i},showUploadList:!1,dataType:"json",multiple:!0,supportServerRender:!1,accept:e,withCredentials:!0,beforeUpload:_,onChange:g};return"function"==typeof f&&(c.customRequest=f),c};return"evernote"===n.key?u.a.createElement(u.a.Fragment,null,u.a.createElement(z.a,{mt:-40}),u.a.createElement(B,K({},E(),{onBeforeUpload:s,onUploadChange:d,setImportModalHide:h,buttonNode:e.children}))):u.a.createElement(i.a,K({},E(),{fileList:y,key:n.key}),e.children)};re.defaultProps={maxCount:10};var oe=function(e){function t(e){var n,r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(n=G(this,t,[e]),"handleSelect",(function(e){n.setState({selected:e}),n.props.onSelect(e)})),W(n,"getDescription",(function(e){return(e.fakeExtensions||e.extensions).join(" ")})),n.state={selected:null},"export"===e.mode)&&(null===(r=e.types)||void 0===r||r.forEach((function(e){e.extensions.length=1})));return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),n=t,(i=[{key:"renderItem",value:function(e){var t=this,n="ready"===e.status,r=this.props.mode,o=u.a.createElement("div",{className:p()(W(W(W({},h.fileType,!0),h.fileTypeReady,n),h.fileTypeSelected,this.state.selected===e.key)),onClick:function(){t.handleSelect(e.key)},"data-aspm-click":"c34618.d69452","data-aspm-param":"file_type=".concat(e.key,"^action_mode=").concat(r),"data-testid":"fileTypeSelectorItem-".concat(e.key)},u.a.createElement("div",{className:h.fileTypeIcon},u.a.createElement("img",{src:e.icon,className:""})),u.a.createElement("div",{className:h.fileTypeMeta},u.a.createElement("div",{className:h.fileTypeName},ne[e.key]||e.name),u.a.createElement("div",{className:h.fileTypeExt},this.getDescription(e))));return n?u.a.createElement(a.a,{title:__("即将支持，敬请期待。")},o):"confluence"===e.key?u.a.createElement(a.a,{title:__("将 cf 导出的文件加上 .zip 后缀再导入")},o):"zip"===e.key?u.a.createElement(a.a,{title:__("将文件使用 zip 压缩后再导入")},o):o}},{key:"render",value:function(){var e=this,t=this.props.types;return u.a.createElement("div",{className:h.fileTypeSelector},u.a.createElement(r.a,{gutter:6},null==t?void 0:t.map((function(t){return u.a.createElement(o.a,{key:t.key,className:h.item},"import"!==e.props.mode||t.status||e.props.disableUpload(t)?e.renderItem(t):u.a.createElement(re,K({},e.props,{fileOption:t}),e.renderItem(t)))}))))}}])&&V(n.prototype,i),c&&V(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,c}(l.PureComponent);oe.defaultProps={onSelect:function(){},onBeforeUpload:function(){},onUploadChange:function(){},disableUpload:function(){return!1}},oe.propTypes={types:d.a.array.isRequired,mode:d.a.oneOf(["import","export"]),importType:d.a.string,maxCount:d.a.number,getParamsOption:d.a.func,book:d.a.object,disableUpload:d.a.func,onSelect:d.a.func,onBeforeUpload:d.a.func,customRequest:d.a.func,onUploadChange:d.a.func},oe.FileUpload=re;t.a=oe},1468:function(e,t,n){"use strict";var r={number:function(e){return"number"!=typeof(e=Number(e))||e<1e3?e:"".concat((e/1e3).toFixed(1),"K")},maxNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;return"number"!=typeof e||e<=t?e:"".concat(t,"+")}};t.a=r},1469:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close-outline",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M35.41 34.499c4.296-4.296 11.261-4.296 15.557 0l78.489 78.488L207.945 34.5c4.295-4.296 11.26-4.296 15.556 0 4.296 4.296 4.296 11.26 0 15.556l-78.488 78.49 78.488 78.488c4.22 4.22 4.294 11.017.222 15.328l-.222.228c-4.296 4.296-11.26 4.296-15.556 0l-78.49-78.488-78.488 78.488c-4.296 4.296-11.26 4.296-15.556 0-4.296-4.295-4.296-11.26 0-15.556l78.488-78.489L35.41 50.055c-4.22-4.22-4.295-11.017-.222-15.328Z",fill:"currentColor",fillRule:"evenodd"}))},1470:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(48),n(11)),a=n(0),i=n.n(a),c=n(6),l=n.n(c),u=n(47),s=n(499),d=n(1468),f="index-module_count_pDHQn";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==p(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function h(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=v(Object(a.useState)(!1),2),n=t[0],c=t[1],l=v(Object(a.useState)(!1),2),p=l[0],y=l[1],b=e.me,g=e.user,_=e.onStatusChange,E=e.isPrimary,w=e.size,O=e.showCount,k=g.meta&&g.meta.is_followed,S=v(Object(a.useState)(null==g?void 0:g.followers_count),1)[0],N=function(){var e,t=(e=m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,u.a.actions.findOne({target_type:"User",target_id:t,action_type:"follow"},{ignoreGlobalMessage:!0});case 3:return n=e.sent,y(!1),e.abrupt("return",Boolean(n.actioned));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0===e.isFollowing?N(g.id).then(c):c(e.isFollowing)}),[e.isFollowing,g.id]),b.id===g.id)return null;var x=__("关注");return n&&(x=k?__("互相关注"):__("已关注")),i.a.createElement(r.a,{className:"btn-follow",type:!n&&E?"primary":"",disabled:p,onClick:function(){var e=n?"destroy":"create";y(!0),Object(s.a)("c62147",{action:e}),u.a.actions[e]({target_type:"User",target_id:g.id,action_type:"follow"}).then((function(){y(!1),o.a.success(n?__("已取消关注"):__("关注成功")),c(!n),_&&_(g.id,!n)})).catch((function(e){y(!1)}))},size:window.h5||"small"===w?"small":"default",style:e.style},i.a.createElement("span",null,x),O&&S>0&&i.a.createElement("span",{className:f},d.a.number(S)))};b.defaultProps={me:window.appData.me,showCount:!1},b.propTypes={me:l.a.object,size:l.a.string,user:l.a.object,onStatusChange:l.a.func,isFollowing:l.a.bool,showCount:l.a.bool};t.a=b},1471:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var r=n(0),o=n.n(r),a=n(5),i=n.n(a),c=n(60),l=n.n(c),u=n(35),s=n(1337),d=n(97),f=n(591),p=n(63),m={departmentInfo:"OrgUserInfo-module_departmentInfo_3udmp",cardHeader:"OrgUserInfo-module_cardHeader_502Md",details:"OrgUserInfo-module_details_hR4Nc",job:"OrgUserInfo-module_job_erqLq",location:"OrgUserInfo-module_location_9-cQz",icon:"OrgUserInfo-module_icon_okrek",fullWidth:"OrgUserInfo-module_fullWidth_zv0Qo",department:"OrgUserInfo-module_department_MJvg6",departmentName:"OrgUserInfo-module_departmentName_fuR97",h5:"OrgUserInfo-module_h5_M+nrk",divider:"OrgUserInfo-module_divider_igZMz",orgUserInfoCard:"OrgUserInfo-module_orgUserInfoCard_7n-Or",headerInfo:"OrgUserInfo-module_headerInfo_5B731",avatar:"OrgUserInfo-module_avatar_iMqQ+",wrapper:"OrgUserInfo-module_wrapper_cpsZr",nameWrapper:"OrgUserInfo-module_nameWrapper_u01vS",name:"OrgUserInfo-module_name_9rYrf",tag:"OrgUserInfo-module_tag_dWOJO",description:"OrgUserInfo-module_description_4Q94H"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=l()("OrgUserInfo"),b=function(e){var t,n=e.organization,r=e.orgUser,a=e.className,c=window.h5,l=null==r?void 0:r.job_title,u=null==r?void 0:r.location;return o.a.createElement("div",{className:i()(m.departmentInfo,a)},null==r||null===(t=r.departments)||void 0===t?void 0:t.map((function(e,t){return o.a.createElement("div",{className:m.department,key:t},o.a.createElement(s.g,{className:m.orgAvatar,organization:n,size:20}),o.a.createElement(s.c,{organization:n,department:e,className:i()(m.departmentName,v({},m.h5,c))}))})),o.a.createElement("div",{className:m.divider}),o.a.createElement("div",{className:m.details},o.a.createElement("div",{className:i()(m.job,v({},m.fullWidth,!c))},o.a.createElement(p.b,{name:"user-job",className:m.icon,size:16}),o.a.createElement("span",null,l||__("暂无职位信息"))),o.a.createElement("div",{className:i()(m.location,v({},m.fullWidth,!c))},o.a.createElement(p.b,{name:"user-location",className:m.icon,size:16}),o.a.createElement("span",null,u||__("暂无地址信息")))))},g=function(e){var t=e.orgUser,n=e.user,r=e.className,a=null==t?void 0:t.departments,c=null==t?void 0:t.job_title,l=null==t?void 0:t.location,s=(null==a?void 0:a.length)||c||l,h=t.status===d.STATUS.terminated,v=t.role===d.ROLE.outsourcer,b=h?__("已离职"):v?__("外部联系人"):"";return y("orgUser %o",t),y("tag %s",b),o.a.createElement("div",{className:i()(m.orgUserInfoCard,r)},o.a.createElement("div",{className:m.headerInfo},o.a.createElement(u.Link,{to:"/".concat(null==n?void 0:n.login),target:"_blank"},o.a.createElement(f.a,{size:44,src:null==t?void 0:t.avatar,className:m.avatar})),o.a.createElement("div",{className:m.wrapper},o.a.createElement(u.Link,{to:"/".concat(null==n?void 0:n.login),target:"_blank"},o.a.createElement("div",{className:m.nameWrapper},o.a.createElement("span",{className:m.name},null==t?void 0:t.name),b&&o.a.createElement("span",{className:m.tag},b))),(null==t?void 0:t.description)&&o.a.createElement("div",{className:m.description},null==t?void 0:t.description))),s&&o.a.createElement("div",{className:m.details},o.a.createElement("div",{className:m.divider}),(null==a?void 0:a.length)&&(null==a?void 0:a.map((function(e,t){return o.a.createElement("div",{className:m.department,key:t},o.a.createElement(p.b,{name:"line-framework",className:m.icon,size:16}),o.a.createElement("span",{title:e,className:r},e))}))),c&&o.a.createElement("div",{className:m.job},o.a.createElement(p.b,{name:"user-job",className:m.icon,size:16}),o.a.createElement("span",null,c)),l&&o.a.createElement("div",{className:m.location},o.a.createElement(p.b,{name:"user-location",className:m.icon,size:16}),o.a.createElement("span",null,l))))}},1473:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(40),n(9)),a=(n(207),n(49)),i=(n(53),n(12)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d={content:"index-module_content_v7lvp",form:"index-module_form_5k71F",tip:"index-module_tip_yNrai"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var _=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return b(e=m(this,t,[].concat(r)),"handleOnOk",(function(t){t.preventDefault();var n=e.props,r=n.form,o=n.slug,a=r.validateFields,i=r.setFields,c=r.resetFields;a((function(t,n){t||(n.slug===o?(c(),e.props.onOk(n)):i({slug:{value:n.slug,errors:[__("输入的路径名称错误, 请重新输入")]}}))}))})),b(e,"handleOnCancel",(function(){var t=e.props.form.resetFields;e.props.onCancel(),t()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(c=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.title,c=e.content,u=e.buttonText,s=e.slug,f=this.props.form,p=f.getFieldDecorator,m=f.getFieldError;return l.a.createElement(r.a,{title:n,footer:null,visible:t,onCancel:this.handleOnCancel,destroyOnClose:!0},c&&l.a.createElement("div",{className:d.content},c),l.a.createElement(a.a,{onSubmit:this.handleOnOk,className:d.form},l.a.createElement("div",{className:d.tip},__('请在下方输入框中输入 "{login}" 以确认操作',{login:l.a.createElement("span",{className:d.slug},s)})),l.a.createElement(a.a.Item,{hasFeedback:!0,validateStatus:m("slug")?"error":null,help:m("slug")?(m("slug")||[]).join(", "):""},p("slug",{initialValue:"",rules:[{type:"string",required:!0,message:__("请按提示输入")}]})(l.a.createElement(i.a,{type:"text",autoComplete:"off",maxLength:200,placeholder:s}))),l.a.createElement(a.a.Item,null,l.a.createElement(o.a,{"data-testid":"btn-submit",type:"danger",style:{width:"100%"},htmlType:"submit"},l.a.createElement("span",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u||__("确定"))))))}}])&&p(n.prototype,c),u&&p(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,u}(c.PureComponent);_.propTypes={visible:s.a.bool.isRequired,title:s.a.node.isRequired,content:s.a.node,buttonText:s.a.node,slug:s.a.string.isRequired,onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};t.a=a.a.create()(_)},1475:function(e,t,n){"use strict";var r=n(184);n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return r.c})),n.d(t,"b",(function(){return r.b}))},1476:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(40),n(9)),a=n(0),i=n.n(a),c=n(6),l=n.n(c),u=n(1442),s=n(282),d=n(1342),f=n.n(d),p=n(975),m=n(1467),h=n(216),v=n(47),y=n(208),b="BookExport-module_docExport_44PUl",g="BookExport-module_title_Hezdm",_="BookExport-module_tips_VJJKo",E="BookExport-module_setting_PXAtw",w="BookExport-module_settingTitle_pEiZb",O="BookExport-module_settingUpload_sNiNV";function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(){x=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(N.prototype),u(N.prototype,c,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new N(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function A(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){A(a,r,o,i,c,"next",e)}function c(e){A(a,r,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function j(e,t,n){return t=I(t),function(e,t){if(t&&("object"==k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function L(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}var D=p.a.STATUS,U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(n=j(this,t,[e]),"handleExport",(function(e){n.setState({exportType:e,typeObj:f.a.THIRD_PARTY_FORMAT[e.toUpperCase()]}),n.settings[e]?n.setState({status:D.SETTING}):n.doExport(e)})),L(n,"doExport",function(){var e=P(x().mark((function e(t,r){var o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({status:D.PROCESSING}),o=n.props.book,a={data:{id:o.id,type:t,title:r}},n["exportTo".concat(t)](a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L(n,"_requestExports",(function(e){return v.a.books.exports(N(N({},n._exportParams),e.data))})),L(n,"exportTolakebook",(function(e){n.formRef&&(e.data.options=JSON.stringify(n.formRef.getValue())),n._requestExports(e).then((function(e){"success"===e.state&&(n.setState({exportResultUrl:e.url,status:D.SUCCESS}),Object(y.b)(e.url))})).catch((function(e){var t="";404===(null==e?void 0:e.status)&&(t=__("导出失败，知识库禁止导出，请检查权限")),n.setState({errorMessage:t,status:D.ERROR})}))})),L(n,"exportTopdf",function(){var e=P(x().mark((function e(t){var r,o,a,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.formRef&&(t.data.options=JSON.stringify(n.formRef.getValue())),r=1e4,o=66,a=0;case 4:if(!(a<o)){e.next=24;break}return e.prev=5,e.next=8,n._requestExports(t);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),n.setState({errorMessage:e.t0.message,status:D.ERROR}),e.abrupt("return");case 15:if("success"!==i.state){e.next=19;break}return n.setState({exportResultUrl:i.url,status:D.SUCCESS}),Object(y.b)(i.url),e.abrupt("return");case 19:return e.next=21,Object(s.a)(r);case 21:a++,e.next=4;break;case 24:n.setState({errorMessage:__("处理超时..."),status:D.ERROR});case 25:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),L(n,"renderEntry",(function(){var e=window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/import-lake-to-lark#ebsrF":"https://yuque.antfin.com/lark/bsgp0v/import-lake-to-lark#ebsrF";return i.a.createElement("div",{className:"entry"},i.a.createElement("div",{className:g},__("导出知识库")),i.a.createElement("div",{className:_},__("知识库文档过多时，可能导致导出变慢或失败，可拆分知识库后重试。"),i.a.createElement("a",{href:e,target:"_blanck","data-desktoptarget":"_browser"},__("查看帮助文档")),__("。")),i.a.createElement(m.a,{mode:"export",types:n._formats,onSelect:n.handleExport}))})),n._exportParams=e.exportParams||{},n._formats=n.props.formats||f.a.BOOK_EXPORT_FORMATS,n.state={exportType:null,typeObj:null,status:D.INIT,errorMessage:"",exportResultUrl:""},n.settings={pdf:[{label:__("导出文档大纲到 PDF 中"),default:!0,name:"enableToc",value:1}]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e),n=t,a=[{key:"renderProcessing",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:w},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(p.a.Processing,{tip:__("正在导出中...")})):null}},{key:"renderSuccess",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:w},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(p.a.Success,{tip:__("文件生成成功"),action:i.a.createElement("a",{href:this.state.exportResultUrl,desktopDisableHref:!0,onClick:function(){Object(y.b)(e.state.exportResultUrl)},target:"_blank"},__("点击下载"))})):null}},{key:"renderSetting",value:function(){var e=this,t=this.state,n=t.typeObj,r=t.status;if(!n)return null;var a,c=this.settings[n.key];return c?(this._exportParams.toc_node_title&&(a="".concat(this.props.book.name," - ").concat(this._exportParams.toc_node_title)),i.a.createElement("div",{className:E,style:{display:r===D.SETTING?"block":"none"}},i.a.createElement("h1",{className:w},__("导出知识库为 {type}",{type:n.name})),i.a.createElement(p.a.AdvanceSetting,{wrappedComponentRef:function(t){e.formRef=t},title:a,target:this.props.book,type:n,settings:c,actions:i.a.createElement(o.a,{type:"primary","data-testid":"btn-export",className:O,onClick:function(){return e.doExport(e.state.exportType,a)}},__("导出"))}))):null}},{key:"renderError",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:E},i.a.createElement("h1",{className:w},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(p.a.Error,{tip:__("文件生成失败"),error:this.state.errorMessage,action:i.a.createElement(o.a,{icon:i.a.createElement(u.default,null),size:"small","data-testid":"btn-reload",onClick:function(){e.doExport(e.state.exportType)}},__("重新生成"))})):null}},{key:"render",value:function(){var e=this.state.status,t=this.props.wrapModal,n=void 0===t||t,o=null;return e===D.PROCESSING?o=this.renderProcessing():e===D.SUCCESS?o=this.renderSuccess():e===D.ERROR?o=this.renderError():e===D.INIT&&(o=this.renderEntry()),o=i.a.createElement("div",{"data-testid":"book-export",className:b,onClick:function(e){e.stopPropagation()}},o,this.renderSetting()),n?i.a.createElement(r.a,{visible:this.props.visible,title:null,footer:null,width:360,onCancel:this.props.onCancel,maskClosable:!1},o):o}}],a&&C(n.prototype,a),c&&C(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(i.a.Component);U.propTypes={book:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,formats:l.a.array,exportParams:l.a.object,wrapModal:l.a.bool};t.a=Object(h.b)(U,!0)},1477:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1478:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1479:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1481:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1482:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1483:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1484:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1493:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}e.exports=function(e){for(var t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),n=t,r&&o(n.prototype,r),a&&o(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(e){!function(e,t){Object.getOwnPropertyNames(t).forEach((function(n){if("constructor"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}}))}(t.prototype,e.prototype)})),t}},1496:function(e,t,n){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function r(e){var t=n(e,"string");return"symbol"==typeof t?t:t+""}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return s(e)||d(e)||f(e)||m()}function s(e){if(Array.isArray(e))return p(e)}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h="undefined"!=typeof window&&void 0!==window.document,v=h?window:{},y=!(!h||!v.document.documentElement)&&"ontouchstart"in v.document.documentElement,b=!!h&&"PointerEvent"in v,g="cropper",_="all",E="crop",w="move",O="zoom",k="e",S="w",N="s",x="n",A="ne",P="nw",C="se",j="sw",T="".concat(g,"-crop"),I="".concat(g,"-disabled"),M="".concat(g,"-hidden"),L="".concat(g,"-hide"),R="".concat(g,"-invisible"),D="".concat(g,"-modal"),U="".concat(g,"-move"),B="".concat(g,"Action"),z="".concat(g,"Preview"),F="crop",V="move",G="none",Y="crop",$="cropend",q="cropmove",W="cropstart",H="dblclick",K=y?"touchstart":"mousedown",Z=y?"touchmove":"mousemove",Q=y?"touchend touchcancel":"mouseup",X=b?"pointerdown":K,J=b?"pointermove":Z,ee=b?"pointerup pointercancel":Q,te="ready",ne="resize",re="wheel",oe="zoom",ae="image/jpeg",ie=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ce=/^data:/,le=/^data:image\/jpeg;base64,/,ue=/^img|canvas$/i,se=200,de=100,fe={viewMode:0,dragMode:F,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:se,minContainerHeight:de,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},pe='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',me=Number.isNaN||v.isNaN;function he(e){return"number"==typeof e&&!me(e)}var ve=function(e){return e>0&&e<1/0};function ye(e){return void 0===e}function be(e){return"object"===o(e)&&null!==e}var ge=Object.prototype.hasOwnProperty;function _e(e){if(!be(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ge.call(n,"isPrototypeOf")}catch(e){return!1}}function Ee(e){return"function"==typeof e}var we=Array.prototype.slice;function Oe(e){return Array.from?Array.from(e):we.call(e)}function ke(e,t){return e&&Ee(t)&&(Array.isArray(e)||he(e.length)?Oe(e).forEach((function(n,r){t.call(e,n,r,e)})):be(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var Se=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return be(e)&&n.length>0&&n.forEach((function(t){be(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},Ne=/\.\d*(?:0|9){12}\d*$/;function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Ne.test(e)?Math.round(e*t)/t:e}var Ae=/^width|height|left|top|marginLeft|marginTop$/;function Pe(e,t){var n=e.style;ke(t,(function(e,t){Ae.test(t)&&he(e)&&(e="".concat(e,"px")),n[t]=e}))}function Ce(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function je(e,t){if(t)if(he(e.length))ke(e,(function(e){je(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function Te(e,t){t&&(he(e.length)?ke(e,(function(e){Te(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Ie(e,t,n){t&&(he(e.length)?ke(e,(function(e){Ie(e,t,n)})):n?je(e,t):Te(e,t))}var Me=/([a-z\d])([A-Z])/g;function Le(e){return e.replace(Me,"$1-$2").toLowerCase()}function Re(e,t){return be(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Le(t)))}function De(e,t,n){be(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(Le(t)),n)}function Ue(e,t){if(be(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Le(t)))}var Be=/\s\s*/,ze=function(){var e=!1;if(h){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});v.addEventListener("test",n,r),v.removeEventListener("test",n,r)}return e}();function Fe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Be).forEach((function(t){if(!ze){var a=e.listeners;a&&a[t]&&a[t][n]&&(o=a[t][n],delete a[t][n],0===Object.keys(a[t]).length&&delete a[t],0===Object.keys(a).length&&delete e.listeners)}e.removeEventListener(t,o,r)}))}function Ve(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;t.trim().split(Be).forEach((function(t){if(r.once&&!ze){var a=e.listeners,i=void 0===a?{}:a;o=function(){delete i[t][n],e.removeEventListener(t,o,r);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];n.apply(e,c)},i[t]||(i[t]={}),i[t][n]&&e.removeEventListener(t,i[t][n],r),i[t][n]=o,e.listeners=i}e.addEventListener(t,o,r)}))}function Ge(e,t,n){var r;return Ee(Event)&&Ee(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}function Ye(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var $e=v.location,qe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function We(e){var t=e.match(qe);return null!==t&&(t[1]!==$e.protocol||t[2]!==$e.hostname||t[3]!==$e.port)}function He(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ke(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,o=e.translateX,a=e.translateY,i=[];he(o)&&0!==o&&i.push("translateX(".concat(o,"px)")),he(a)&&0!==a&&i.push("translateY(".concat(a,"px)")),he(t)&&0!==t&&i.push("rotate(".concat(t,"deg)")),he(n)&&1!==n&&i.push("scaleX(".concat(n,")")),he(r)&&1!==r&&i.push("scaleY(".concat(r,")"));var c=i.length?i.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function Ze(e){var n=t({},e),r=0;return ke(e,(function(e,t){delete n[t],ke(n,(function(t){var n=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),a=Math.abs(e.endX-t.endX),i=Math.abs(e.endY-t.endY),c=Math.sqrt(n*n+o*o),l=(Math.sqrt(a*a+i*i)-c)/c;Math.abs(l)>Math.abs(r)&&(r=l)}))})),r}function Qe(e,n){var r=e.pageX,o=e.pageY,a={endX:r,endY:o};return n?a:t({startX:r,startY:o},a)}function Xe(e){var t=0,n=0,r=0;return ke(e,(function(e){var o=e.startX,a=e.startY;t+=o,n+=a,r+=1})),{pageX:t/=r,pageY:n/=r}}function Je(e){var t=e.aspectRatio,n=e.height,r=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=ve(r),i=ve(n);if(a&&i){var c=n*t;"contain"===o&&c>r||"cover"===o&&c<r?n=r/t:r=n*t}else a?n=r/t:i&&(r=n*t);return{width:r,height:n}}function et(e){var t=e.width,n=e.height,r=e.degree;if(90==(r=Math.abs(r)%180))return{width:n,height:t};var o=r%90*Math.PI/180,a=Math.sin(o),i=Math.cos(o),c=t*i+n*a,l=t*a+n*i;return r>90?{width:l,height:c}:{width:c,height:l}}function tt(e,t,n,r){var o=t.aspectRatio,a=t.naturalWidth,i=t.naturalHeight,c=t.rotate,l=void 0===c?0:c,s=t.scaleX,d=void 0===s?1:s,f=t.scaleY,p=void 0===f?1:f,m=n.aspectRatio,h=n.naturalWidth,v=n.naturalHeight,y=r.fillColor,b=void 0===y?"transparent":y,g=r.imageSmoothingEnabled,_=void 0===g||g,E=r.imageSmoothingQuality,w=void 0===E?"low":E,O=r.maxWidth,k=void 0===O?1/0:O,S=r.maxHeight,N=void 0===S?1/0:S,x=r.minWidth,A=void 0===x?0:x,P=r.minHeight,C=void 0===P?0:P,j=document.createElement("canvas"),T=j.getContext("2d"),I=Je({aspectRatio:m,width:k,height:N}),M=Je({aspectRatio:m,width:A,height:C},"cover"),L=Math.min(I.width,Math.max(M.width,h)),R=Math.min(I.height,Math.max(M.height,v)),D=Je({aspectRatio:o,width:k,height:N}),U=Je({aspectRatio:o,width:A,height:C},"cover"),B=Math.min(D.width,Math.max(U.width,a)),z=Math.min(D.height,Math.max(U.height,i)),F=[-B/2,-z/2,B,z];return j.width=xe(L),j.height=xe(R),T.fillStyle=b,T.fillRect(0,0,L,R),T.save(),T.translate(L/2,R/2),T.rotate(l*Math.PI/180),T.scale(d,p),T.imageSmoothingEnabled=_,T.imageSmoothingQuality=w,T.drawImage.apply(T,[e].concat(u(F.map((function(e){return Math.floor(xe(e))}))))),T.restore(),j}var nt=String.fromCharCode;function rt(e,t,n){var r="";n+=t;for(var o=t;o<n;o+=1)r+=nt(e.getUint8(o));return r}var ot=/^data:.*,/;function at(e){var t=e.replace(ot,""),n=atob(t),r=new ArrayBuffer(n.length),o=new Uint8Array(r);return ke(o,(function(e,t){o[t]=n.charCodeAt(t)})),r}function it(e,t){for(var n=[],r=8192,o=new Uint8Array(e);o.length>0;)n.push(nt.apply(null,Oe(o.subarray(0,r)))),o=o.subarray(r);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function ct(e){var t,n=new DataView(e);try{var r,o,a;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var i=n.byteLength,c=2;c+1<i;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){o=c;break}c+=1}if(o){var l=o+10;if("Exif"===rt(n,o+4,4)){var u=n.getUint16(l);if(((r=18761===u)||19789===u)&&42===n.getUint16(l+2,r)){var s=n.getUint32(l+4,r);s>=8&&(a=l+s)}}}if(a){var d,f,p=n.getUint16(a,r);for(f=0;f<p;f+=1)if(d=a+12*f+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(e){t=1}return t}function lt(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var ut={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,o=Number(t.minContainerWidth),a=Number(t.minContainerHeight);je(r,M),Te(e,M);var i={width:Math.max(n.offsetWidth,o>=0?o:se),height:Math.max(n.offsetHeight,a>=0?a:de)};this.containerData=i,Pe(r,{width:i.width,height:i.height}),je(e,M),Te(r,M)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180==90,o=r?t.naturalHeight:t.naturalWidth,a=r?t.naturalWidth:t.naturalHeight,i=o/a,c=e.width,l=e.height;e.height*i>e.width?3===n?c=e.height*i:l=e.width/i:3===n?l=e.width/i:c=e.height*i;var u={aspectRatio:i,naturalWidth:o,naturalHeight:a,width:c,height:l};this.canvasData=u,this.limited=1===n||2===n,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Se({},u)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,a=this.cropBoxData,i=n.viewMode,c=o.aspectRatio,l=this.cropped&&a;if(e){var u=Number(n.minCanvasWidth)||0,s=Number(n.minCanvasHeight)||0;i>1?(u=Math.max(u,r.width),s=Math.max(s,r.height),3===i&&(s*c>u?u=s*c:s=u/c)):i>0&&(u?u=Math.max(u,l?a.width:0):s?s=Math.max(s,l?a.height:0):l&&(u=a.width,(s=a.height)*c>u?u=s*c:s=u/c));var d=Je({aspectRatio:c,width:u,height:s});u=d.width,s=d.height,o.minWidth=u,o.minHeight=s,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(i>(l?0:1)){var f=r.width-o.width,p=r.height-o.height;o.minLeft=Math.min(0,f),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,f),o.maxTop=Math.max(0,p),l&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,2===i&&(o.width>=r.width&&(o.minLeft=Math.min(0,f),o.maxLeft=Math.max(0,f)),o.height>=r.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var o=et({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),a=o.width,i=o.height,c=n.width*(a/n.naturalWidth),l=n.height*(i/n.naturalHeight);n.left-=(c-n.width)/2,n.top-=(l-n.height)/2,n.width=c,n.height=l,n.aspectRatio=a/i,n.naturalWidth=a,n.naturalHeight=i,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Pe(this.canvas,Se({width:n.width,height:n.height},Ke({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),o=n.naturalHeight*(t.height/t.naturalHeight);Se(n,{width:r,height:o,left:(t.width-r)/2,top:(t.height-o)/2}),Pe(this.image,Se({width:n.width,height:n.height},Ke(Se({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};n&&(t.height*n>t.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Se({},o)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,o=this.canvasData,a=this.cropBoxData,i=this.limited,c=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,u=Number(n.minCropBoxHeight)||0,s=i?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,d=i?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;l=Math.min(l,r.width),u=Math.min(u,r.height),c&&(l&&u?u*c>l?u=l/c:l=u*c:l?u=l/c:u&&(l=u*c),d*c>s?d=s/c:s=d*c),a.minWidth=Math.min(l,s),a.minHeight=Math.min(u,d),a.maxWidth=s,a.maxHeight=d}t&&(i?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(r.width,o.left+o.width)-a.width,a.maxTop=Math.min(r.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=r.width-a.width,a.maxTop=r.height-a.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&De(this.face,B,n.width>=t.width&&n.height>=t.height?w:_),Pe(this.cropBox,Se({width:n.width,height:n.height},Ke({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ge(this.element,Y,this.getData())}},st={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=r,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,n){var i=n;"string"==typeof n?i=e.ownerDocument.querySelectorAll(n):n.querySelector&&(i=[n]),this.previews=i,ke(i,(function(e){var n=document.createElement("img");De(e,z,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){ke(this.previews,(function(e){var t=Re(e,z);Pe(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Ue(e,z)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,o=n.height,a=e.width,i=e.height,c=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(Pe(this.viewBoxImage,Se({width:a,height:i},Ke(Se({translateX:-c,translateY:-l},e)))),ke(this.previews,(function(t){var n=Re(t,z),u=n.width,s=n.height,d=u,f=s,p=1;r&&(f=o*(p=u/r)),o&&f>s&&(d=r*(p=s/o),f=s),Pe(t,{width:d,height:f}),Pe(t.getElementsByTagName("img")[0],Se({width:a*p,height:i*p},Ke(Se({translateX:-c*p,translateY:-l*p},e))))})))}},dt={bind:function(){var e=this.element,t=this.options,n=this.cropper;Ee(t.cropstart)&&Ve(e,W,t.cropstart),Ee(t.cropmove)&&Ve(e,q,t.cropmove),Ee(t.cropend)&&Ve(e,$,t.cropend),Ee(t.crop)&&Ve(e,Y,t.crop),Ee(t.zoom)&&Ve(e,oe,t.zoom),Ve(n,X,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&Ve(n,re,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Ve(n,H,this.onDblclick=this.dblclick.bind(this)),Ve(e.ownerDocument,J,this.onCropMove=this.cropMove.bind(this)),Ve(e.ownerDocument,ee,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&Ve(window,ne,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;Ee(t.cropstart)&&Fe(e,W,t.cropstart),Ee(t.cropmove)&&Fe(e,q,t.cropmove),Ee(t.cropend)&&Fe(e,$,t.cropend),Ee(t.crop)&&Fe(e,Y,t.crop),Ee(t.zoom)&&Fe(e,oe,t.zoom),Fe(n,X,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Fe(n,re,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Fe(n,H,this.onDblclick),Fe(e.ownerDocument,J,this.onCropMove),Fe(e.ownerDocument,ee,this.onCropEnd),t.responsive&&Fe(window,ne,this.onResize)}},ft={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,o=this.containerData,a=r.offsetWidth/o.width,i=r.offsetHeight/o.height,c=Math.abs(a-1)>Math.abs(i-1)?a:i;1!==c&&(n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(ke(e,(function(t,n){e[n]=t*c}))),this.setCropBoxData(ke(t,(function(e,n){t[n]=e*c})))))}},dblclick:function(){this.disabled||this.options.dragMode===G||this.setDragMode(Ce(this.dragBox,T)?V:F)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(he(t)&&1!==t||he(n)&&0!==n||e.ctrlKey))){var r,o=this.options,a=this.pointers;e.changedTouches?ke(e.changedTouches,(function(e){a[e.identifier]=Qe(e)})):a[e.pointerId||0]=Qe(e),r=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?O:Re(e.target,B),ie.test(r)&&!1!==Ge(this.element,W,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===E&&(this.cropping=!0,je(this.dragBox,D)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ge(this.element,q,{originalEvent:e,action:t})&&(e.changedTouches?ke(e.changedTouches,(function(e){Se(n[e.identifier]||{},Qe(e,!0))})):Se(n[e.pointerId||0]||{},Qe(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?ke(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ie(this.dragBox,D,this.cropped&&this.options.modal)),Ge(this.element,$,{originalEvent:e,action:t}))}}},pt={change:function(e){var t,n=this.options,r=this.canvasData,o=this.containerData,a=this.cropBoxData,i=this.pointers,c=this.action,l=n.aspectRatio,u=a.left,s=a.top,d=a.width,f=a.height,p=u+d,m=s+f,h=0,v=0,y=o.width,b=o.height,g=!0;!l&&e.shiftKey&&(l=d&&f?d/f:1),this.limited&&(h=a.minLeft,v=a.minTop,y=h+Math.min(o.width,r.width,r.left+r.width),b=v+Math.min(o.height,r.height,r.top+r.height));var T=i[Object.keys(i)[0]],I={x:T.endX-T.startX,y:T.endY-T.startY},L=function(e){switch(e){case k:p+I.x>y&&(I.x=y-p);break;case S:u+I.x<h&&(I.x=h-u);break;case x:s+I.y<v&&(I.y=v-s);break;case N:m+I.y>b&&(I.y=b-m)}};switch(c){case _:u+=I.x,s+=I.y;break;case k:if(I.x>=0&&(p>=y||l&&(s<=v||m>=b))){g=!1;break}L(k),(d+=I.x)<0&&(c=S,u-=d=-d),l&&(f=d/l,s+=(a.height-f)/2);break;case x:if(I.y<=0&&(s<=v||l&&(u<=h||p>=y))){g=!1;break}L(x),f-=I.y,s+=I.y,f<0&&(c=N,s-=f=-f),l&&(d=f*l,u+=(a.width-d)/2);break;case S:if(I.x<=0&&(u<=h||l&&(s<=v||m>=b))){g=!1;break}L(S),d-=I.x,u+=I.x,d<0&&(c=k,u-=d=-d),l&&(f=d/l,s+=(a.height-f)/2);break;case N:if(I.y>=0&&(m>=b||l&&(u<=h||p>=y))){g=!1;break}L(N),(f+=I.y)<0&&(c=x,s-=f=-f),l&&(d=f*l,u+=(a.width-d)/2);break;case A:if(l){if(I.y<=0&&(s<=v||p>=y)){g=!1;break}L(x),f-=I.y,s+=I.y,d=f*l}else L(x),L(k),I.x>=0?p<y?d+=I.x:I.y<=0&&s<=v&&(g=!1):d+=I.x,I.y<=0?s>v&&(f-=I.y,s+=I.y):(f-=I.y,s+=I.y);d<0&&f<0?(c=j,s-=f=-f,u-=d=-d):d<0?(c=P,u-=d=-d):f<0&&(c=C,s-=f=-f);break;case P:if(l){if(I.y<=0&&(s<=v||u<=h)){g=!1;break}L(x),f-=I.y,s+=I.y,d=f*l,u+=a.width-d}else L(x),L(S),I.x<=0?u>h?(d-=I.x,u+=I.x):I.y<=0&&s<=v&&(g=!1):(d-=I.x,u+=I.x),I.y<=0?s>v&&(f-=I.y,s+=I.y):(f-=I.y,s+=I.y);d<0&&f<0?(c=C,s-=f=-f,u-=d=-d):d<0?(c=A,u-=d=-d):f<0&&(c=j,s-=f=-f);break;case j:if(l){if(I.x<=0&&(u<=h||m>=b)){g=!1;break}L(S),d-=I.x,u+=I.x,f=d/l}else L(N),L(S),I.x<=0?u>h?(d-=I.x,u+=I.x):I.y>=0&&m>=b&&(g=!1):(d-=I.x,u+=I.x),I.y>=0?m<b&&(f+=I.y):f+=I.y;d<0&&f<0?(c=A,s-=f=-f,u-=d=-d):d<0?(c=C,u-=d=-d):f<0&&(c=P,s-=f=-f);break;case C:if(l){if(I.x>=0&&(p>=y||m>=b)){g=!1;break}L(k),f=(d+=I.x)/l}else L(N),L(k),I.x>=0?p<y?d+=I.x:I.y>=0&&m>=b&&(g=!1):d+=I.x,I.y>=0?m<b&&(f+=I.y):f+=I.y;d<0&&f<0?(c=P,s-=f=-f,u-=d=-d):d<0?(c=j,u-=d=-d):f<0&&(c=A,s-=f=-f);break;case w:this.move(I.x,I.y),g=!1;break;case O:this.zoom(Ze(i),e),g=!1;break;case E:if(!I.x||!I.y){g=!1;break}t=Ye(this.cropper),u=T.startX-t.left,s=T.startY-t.top,d=a.minWidth,f=a.minHeight,I.x>0?c=I.y>0?C:A:I.x<0&&(u-=d,c=I.y>0?j:P),I.y<0&&(s-=f),this.cropped||(Te(this.cropBox,M),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}g&&(a.width=d,a.height=f,a.left=u,a.top=s,this.action=c,this.renderCropBox()),ke(i,(function(e){e.startX=e.endX,e.startY=e.endY}))}},mt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&je(this.dragBox,D),Te(this.cropBox,M),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Se({},this.initialImageData),this.canvasData=Se({},this.initialCanvasData),this.cropBoxData=Se({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Se(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Te(this.dragBox,D),je(this.cropBox,M)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,ke(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Te(this.cropper,I)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,je(this.cropper,I)),this},destroy:function(){var e=this.element;return e[g]?(e[g]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,o=n.top;return this.moveTo(ye(e)?e:r+Number(e),ye(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(he(e)&&(n.left=e,r=!0),he(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,o=this.canvasData,a=o.width,i=o.height,c=o.naturalWidth,l=o.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&r.zoomable){var u=c*e,s=l*e;if(!1===Ge(this.element,oe,{ratio:e,oldRatio:a/c,originalEvent:n}))return this;if(n){var d=this.pointers,f=Ye(this.cropper),p=d&&Object.keys(d).length?Xe(d):{pageX:n.pageX,pageY:n.pageY};o.left-=(u-a)*((p.pageX-f.left-o.left)/a),o.top-=(s-i)*((p.pageY-f.top-o.top)/i)}else _e(t)&&he(t.x)&&he(t.y)?(o.left-=(u-a)*((t.x-o.left)/a),o.top-=(s-i)*((t.y-o.top)/i)):(o.left-=(u-a)/2,o.top-=(s-i)/2);o.width=u,o.height=s,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return he(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,he(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(he(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(he(e)&&(n.scaleX=e,r=!0),he(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){e={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height};var i=r.width/r.naturalWidth;if(ke(e,(function(t,n){e[n]=t/i})),t){var c=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=c-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&_e(e)){var a=!1;t.rotatable&&he(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,a=!0),t.scalable&&(he(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,a=!0),he(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var i=n.width/n.naturalWidth;he(e.x)&&(o.left=e.x*i+r.left),he(e.y)&&(o.top=e.y*i+r.top),he(e.width)&&(o.width=e.width*i),he(e.height)&&(o.height=e.height*i),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Se({},this.containerData):{}},getImageData:function(){return this.sized?Se({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&ke(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&_e(e)&&(he(e.left)&&(t.left=e.left),he(e.top)&&(t.top=e.top),he(e.width)?(t.width=e.width,t.height=e.width/n):he(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&_e(e)&&(he(e.left)&&(r.left=e.left),he(e.top)&&(r.top=e.top),he(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),he(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),o&&(t?r.height=r.width/o:n&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=tt(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(e.rounded),o=r.x,a=r.y,i=r.width,c=r.height,l=n.width/Math.floor(t.naturalWidth);1!==l&&(o*=l,a*=l,i*=l,c*=l);var s=i/c,d=Je({aspectRatio:s,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),f=Je({aspectRatio:s,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=Je({aspectRatio:s,width:e.width||(1!==l?n.width:i),height:e.height||(1!==l?n.height:c)}),m=p.width,h=p.height;m=Math.min(d.width,Math.max(f.width,m)),h=Math.min(d.height,Math.max(f.height,h));var v=document.createElement("canvas"),y=v.getContext("2d");v.width=xe(m),v.height=xe(h),y.fillStyle=e.fillColor||"transparent",y.fillRect(0,0,m,h);var b=e.imageSmoothingEnabled,g=void 0===b||b,_=e.imageSmoothingQuality;y.imageSmoothingEnabled=g,_&&(y.imageSmoothingQuality=_);var E,w,O,k,S,N,x=n.width,A=n.height,P=o,C=a;P<=-i||P>x?(P=0,E=0,O=0,S=0):P<=0?(O=-P,P=0,S=E=Math.min(x,i+P)):P<=x&&(O=0,S=E=Math.min(i,x-P)),E<=0||C<=-c||C>A?(C=0,w=0,k=0,N=0):C<=0?(k=-C,C=0,N=w=Math.min(A,c+C)):C<=A&&(k=0,N=w=Math.min(c,A-C));var j=[P,C,E,w];if(S>0&&N>0){var T=m/i;j.push(O*T,k*T,S*T,N*T)}return y.drawImage.apply(y,[n].concat(u(j.map((function(e){return Math.floor(xe(e))}))))),v},setAspectRatio:function(e){var t=this.options;return this.disabled||ye(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=e===F,a=t.movable&&e===V;e=o||a?e:G,t.dragMode=e,De(n,B,e),Ie(n,T,o),Ie(n,U,a),t.cropBoxMovable||(De(r,B,e),Ie(r,T,o),Ie(r,U,a))}return this}},ht=v.Cropper,vt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,e),!t||!ue.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=Se({},fe,_e(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return c(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[g]){if(t[g]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(ce.test(e))le.test(e)?this.read(at(e)):this.clone();else{var o=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=a,o.onerror=a,o.ontimeout=a,o.onprogress=function(){o.getResponseHeader("content-type")!==ae&&o.abort()},o.onload=function(){t.read(o.response)},o.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&We(e)&&n.crossOrigin&&(e=He(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===n.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=ct(e),o=0,a=1,i=1;if(r>1){this.url=it(e,ae);var c=lt(r);o=c.rotate,a=c.scaleX,i=c.scaleY}t.rotatable&&(n.rotate=o),t.scalable&&(n.scaleX=a,n.scaleY=i),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&We(t)&&(n||(n="anonymous"),r=He(t)),this.crossOrigin=n,this.crossOriginUrl=r;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=r||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),je(o,L),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent),r=function(t,n){Se(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=Se({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),n||a.removeChild(o)},o.src=t.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,o=document.createElement("div");o.innerHTML=pe;var a=o.querySelector(".".concat(g,"-container")),i=a.querySelector(".".concat(g,"-canvas")),c=a.querySelector(".".concat(g,"-drag-box")),l=a.querySelector(".".concat(g,"-crop-box")),u=l.querySelector(".".concat(g,"-face"));this.container=r,this.cropper=a,this.canvas=i,this.dragBox=c,this.cropBox=l,this.viewBox=a.querySelector(".".concat(g,"-view-box")),this.face=u,i.appendChild(n),je(e,M),r.insertBefore(a,e.nextSibling),Te(n,L),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,je(l,M),t.guides||je(l.getElementsByClassName("".concat(g,"-dashed")),M),t.center||je(l.getElementsByClassName("".concat(g,"-center")),M),t.background&&je(a,"".concat(g,"-bg")),t.highlight||je(u,R),t.cropBoxMovable&&(je(u,U),De(u,B,_)),t.cropBoxResizable||(je(l.getElementsByClassName("".concat(g,"-line")),M),je(l.getElementsByClassName("".concat(g,"-point")),M)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),Ee(t.ready)&&Ve(e,te,t.ready,{once:!0}),Ge(e,te)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Te(this.element,M)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ht,e}},{key:"setDefaults",value:function(e){Se(fe,_e(e)&&e)}}])}();return Se(vt.prototype,ut,st,dt,ft,pt,mt),vt}()},1497:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},150:function(e,t,n){e.exports=n(253)},1506:function(e,t,n){"use strict";var r=n(3),o=n(0),a=n(1445),i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a.a}))},l=o.forwardRef(c);t.a=l},1515:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1516:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1517:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1518:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={TEMPLATE_USAGE:"c100045.d210978"}},1522:function(e,t,n){"use strict";var r=n(328),o=n(374),a=n(77),i=n(149),c=n(330),l=n(34),u=n(1532),s=n(148),d=n(114);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){p=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==f(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=m;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,c,"next",e)}function c(e){y(a,r,o,i,c,"throw",e)}i(void 0)}))}}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,n=[],o=g(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.item.toc_yml;if(i)try{var c=Object(r.ymlToToc)(i),l=c[0];l&&l.published&&(a.meta=c[0],a.toc=c.slice(1),a.catalog_tree=Object(r.generateTreeFromYml)(i),n.push(a))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return n},parseVersion:function(e){if(e){try{var t,n=null===(t=e.item)||void 0===t?void 0:t.toc_yml;if(!n)return;var o,a=Object(r.ymlToToc)(n),i=g(a);try{for(i.s();!(o=i.n()).done;){var c=o.value;c.key=c.uuid}}catch(e){i.e(e)}finally{i.f()}var l=a[0];l?(e.meta=l,e.toc=a.slice(1)):e.toc=a,e.catalog_tree=Object(r.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,n=this;return b(p().mark((function o(){var i,c,l;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,s.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(r.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,s.webProxy.catalogNodes.update(h({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:l=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",n._returnWithCatalogTree(h(h({},l.meta),{},{toc:l.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).catalog_tree&&e.toc&&(e.catalog_tree=Object(r.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return b(p().mark((function n(){var o,a;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,s.webProxy.catalogNodes.find(h({book_id:e},o),{useOriginResp:!0});case 5:return a=n.sent,n.abrupt("return",h({catalog_tree:Object(r.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 7:case"end":return n.stop()}}),n)})))()},actionsInReaderPage:function(e,t){var n=[];return e.type!==a.TYPES.link?n.push(d.a.CATALOG.rename):n.push(d.a.CATALOG.edit_link),t.create_doc&&(e.type!==a.TYPES.doc||l.c||n.push(d.a.DOC.edit)),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&n.push(d.a.DOC.copyLink),e.type!==a.TYPES.doc||l.c||n.push(d.a.DOC.open_in_new_tab),e.type===a.TYPES.doc&&t.create_doc&&l.c&&n.push(d.a.DOC.open_in_new_window),t.create_doc&&(n.push(d.a.DOC.divide),n.push(d.a.CATALOG.remove),n.push(d.a.DOC.divide),n.push(d.a.CATALOG.copy),n.push(d.a.CATALOG.move)),t.export_doc&&e.type===a.TYPES.doc&&n.push(d.a.CATALOG.export),t.create_doc&&(n.push(d.a.DOC.divide),n.push(d.a.CATALOG.destroy)),n},actionsForEdit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];return"desktop"===t?(r.push(d.a.CATALOG.move),r):(e.type===a.TYPES.link?r.push(d.a.CATALOG.edit_link):r.push(d.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,n):("full"===t&&(e.type===a.TYPES.doc&&(r.push(d.a.CATALOG.view_doc),r.push(d.a.CATALOG.remove),r.push(d.a.DOC.edit)),r.push(d.a.CATALOG.copy),r.push(d.a.CATALOG.move),n.export_doc&&e.type===a.TYPES.doc&&r.push(d.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(r.push(d.a.DOC.divide),r.push(d.a.DOC.unshare)),r.push(d.a.DOC.divide),r.push(d.a.CATALOG.destroy)),r))},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},r=E.formatNode(t),o=t.target_uuid,a=t.action,i=e.findIndex((function(e){return e.uuid===o}));if(i>=0){var c=e[i];r.level="insertSibling"===a?c.level:c.level+1,e.splice(i+1,0,r)}else e.unshift(r);return this._returnWithCatalogTree({toc:e,node_uuid:r.uuid},n)},getRedirectURL:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.group,o=n.book,a=n.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!a)return i&&i[0]?"/".concat(r.login,"/").concat(o.slug,"/").concat(i[0].url):"";var c,s=i.findIndex((function(e){return e.url&&e.url===a.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),s<0?c=i[0]:(c=i[s]||null)||(c=i[s-1]||null),c?"/".concat(r.login,"/").concat(o.slug,"/").concat(c.url):(l.c&&Object(u.a)("remove","".concat(r.login,"/").concat(o.slug)),"")}};t.a=E},1523:function(e,t,n){"use strict";var r=n(3),o=n(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},i=n(22),c=function(e,t){return o.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1532:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(133);function o(e,t,n){if("get"===e)try{return r.a.get("bookLastDoc-".concat(t))}catch(e){return console.error(e),null}if("save"===e)try{r.a.set("bookLastDoc-".concat(t),n),r.a.set("bookLast",t)}catch(e){console.error(e)}if("remove"===e)try{r.a.get("bookLastDoc-".concat(t))&&r.a.remove("bookLastDoc-".concat(t))}catch(e){console.error(e)}}},1533:function(e,t,n){var r,o,a;o=[],r=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,c={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:c.WORKER_ID,finished:r});else if(E(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!E(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){E(this._config.error)?this._config.error(e):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=c.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function s(e){(e=e||{}).chunkSize||(e.chunkSize=c.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,o)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function f(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=_((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=_((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=_((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,n,r,o,a=Math.pow(2,53),i=-a,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,s=this,d=0,f=0,p=!1,v=!1,y=[],b={data:[],errors:[],meta:{}};function _(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){if(b&&r&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(b.data=b.data.filter((function(e){return!_(e)}))),O()){if(b)if(Array.isArray(b.data[0])){for(var t=0;O()&&t<b.data.length;t++)b.data[t].forEach(n);b.data.splice(0,1)}else b.data.forEach(n);function n(t,n){E(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function o(t,n){for(var r=e.header?{}:[],o=0;o<t.length;o++){var c=o,s=t[o];s=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),i<e&&e<a))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(c=e.header?o>=y.length?"__parsed_extra":y[o]:c,s=e.transform?e.transform(s,c):s),"__parsed_extra"===c?(r[c]=r[c]||[],r[c].push(s)):r[c]=s}return e.header&&(o>y.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+o,f+n):o<y.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+o,f+n)),r}var s;b&&(e.header||e.dynamicTyping||e.transform)&&(s=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(o),s=b.data.length):b.data=o(b.data,0),e.header&&b.meta&&(b.meta.fields=y),f+=s)}function O(){return e.header&&0===y.length}function k(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),b.errors.push(e)}E(e.step)&&(o=e.step,e.step=function(t){b=t,O()?w():(w(),0!==b.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(b.data=b.data[0],o(b,s))))}),this.parse=function(o,a,i){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(o,l)),r=!1,e.delimiter?E(e.delimiter)&&(e.delimiter=e.delimiter(o),b.meta.delimiter=e.delimiter):((l=((t,n,r,o,a)=>{var i,l,u,s;a=a||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var d=0;d<a.length;d++){for(var f,p=a[d],m=0,v=0,y=0,b=(u=void 0,new h({comments:o,delimiter:p,newline:n,preview:10}).parse(t)),g=0;g<b.data.length;g++)r&&_(b.data[g])?y++:(v+=f=b.data[g].length,void 0===u?u=f:0<f&&(m+=Math.abs(f-u),u=f));0<b.data.length&&(v/=b.data.length-y),(void 0===l||m<=l)&&(void 0===s||s<v)&&1.99<v&&(l=m,i=p,s=v)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=c.DefaultDelimiter),b.meta.delimiter=e.delimiter),l=g(e),e.preview&&e.header&&l.preview++,t=o,n=new h(l),b=n.parse(t,a,i),w(),p?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=E(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){s.streamer._halted?(p=!1,s.streamer.parseChunk(t,!0)):setTimeout(s.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,n.abort(),b.meta.aborted=!0,E(e.complete)&&e.complete(b),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(m(t)+"([^]*?)"+m(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,o=e.step,a=e.preview,i=e.fastMode,l=null,u=null==e.quoteChar?'"':e.quoteChar,s=u;if(void 0!==e.escapeChar&&(s=e.escapeChar),("string"!=typeof t||-1<c.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<c.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,f=!1;this.parse=function(c,p,h){if("string"!=typeof c)throw new Error("Input must be a string");var v=c.length,y=t.length,b=n.length,g=r.length,_=E(o),w=[],O=[],k=[],S=d=0;if(!c)return D();if(i||!1!==i&&-1===c.indexOf(u)){for(var N=c.split(n),x=0;x<N.length;x++){if(k=N[x],d+=k.length,x!==N.length-1)d+=n.length;else if(h)return D();if(!r||k.substring(0,g)!==r){if(_){if(w=[],I(k.split(t)),U(),f)return D()}else I(k.split(t));if(a&&a<=x)return w=w.slice(0,a),D(!0)}}return D()}for(var A=c.indexOf(t,d),P=c.indexOf(n,d),C=new RegExp(m(s)+m(u),"g"),j=c.indexOf(u,d);;)if(c[d]===u)for(j=d,d++;;){if(-1===(j=c.indexOf(u,j+1)))return h||O.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:d}),L();if(j===v-1)return L(c.substring(d,j).replace(C,u));if(u===s&&c[j+1]===s)j++;else if(u===s||0===j||c[j-1]!==s){-1!==A&&A<j+1&&(A=c.indexOf(t,j+1));var T=M(-1===(P=-1!==P&&P<j+1?c.indexOf(n,j+1):P)?A:Math.min(A,P));if(c.substr(j+1+T,y)===t){k.push(c.substring(d,j).replace(C,u)),c[d=j+1+T+y]!==u&&(j=c.indexOf(u,d)),A=c.indexOf(t,d),P=c.indexOf(n,d);break}if(T=M(P),c.substring(j+1+T,j+1+T+b)===n){if(k.push(c.substring(d,j).replace(C,u)),R(j+1+T+b),A=c.indexOf(t,d),j=c.indexOf(u,d),_&&(U(),f))return D();if(a&&w.length>=a)return D(!0);break}O.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:d}),j++}}else if(r&&0===k.length&&c.substring(d,d+g)===r){if(-1===P)return D();d=P+b,P=c.indexOf(n,d),A=c.indexOf(t,d)}else if(-1!==A&&(A<P||-1===P))k.push(c.substring(d,A)),d=A+y,A=c.indexOf(t,d);else{if(-1===P)break;if(k.push(c.substring(d,P)),R(P+b),_&&(U(),f))return D();if(a&&w.length>=a)return D(!0)}return L();function I(e){w.push(e),S=d}function M(e){var t=0;return-1!==e&&(e=c.substring(j+1,e))&&""===e.trim()?e.length:t}function L(e){return h||(void 0===e&&(e=c.substring(d)),k.push(e),d=v,I(k),_&&U()),D()}function R(e){d=e,I(k),k=[],P=c.indexOf(n,d)}function D(r){if(e.header&&!p&&w.length){var o=w[0],a={},i=new Set(o);let t=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=E(e.transformHeader)?e.transformHeader(r,n):r]){let e,c=a[r];for(;e=r+"_"+c,c++,i.has(e););i.add(e),o[n]=e,a[r]++,t=!0,(l=null===l?{}:l)[e]=r}else a[r]=1,o[n]=r;i.add(r)}t&&console.warn("Duplicate headers found and renamed.")}return{data:w,errors:O,meta:{delimiter:t,linebreak:n,aborted:f,truncated:!!r,cursor:S+(p||0),renamedHeaders:l}}}function U(){o(D()),w=[],O=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return d}}function v(e){var t=e.data,n=a[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(E(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},o),!r);i++);delete t.results}else E(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=a[e];E(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function b(){throw new Error("Not implemented.")}function g(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=g(e[t]);return n}function _(e,t){return function(){e.apply(t,arguments)}}function E(e){return"function"==typeof e}return c.parse=function(t,r){var o=(r=r||{}).dynamicTyping||!1;if(E(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!E(r.transform)&&r.transform,!r.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),o=new(r.download?u:d)(r)):!0===t.readable&&E(t.read)&&E(t.on)?o=new f(r):(n.File&&t instanceof File||t instanceof Object)&&(o=new s(r)),o.stream(t);(o=(()=>{var t;return!!c.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return c.BLOB_URL||(c.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=v,t.id=i++,a[t.id]=t)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=E(r.step),r.chunk=E(r.chunk),r.complete=E(r.complete),r.error=E(r.error),delete r.worker,o.postMessage({input:t,config:r,workerId:o.id})},c.unparse=function(e,t){var n=!1,r=!0,o=",",a="\r\n",i='"',l=i+i,u=!1,s=null,d=!1,f=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||c.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+i),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(m(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(s||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var i="",c=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(c&&r){for(var u=0;u<e.length;u++)0<u&&(i+=o),i+=h(e[u],u);0<t.length&&(i+=a)}for(var s=0;s<t.length;s++){var d=(c?e:t[s]).length,f=!1,p=c?0===Object.keys(t[s]).length:0===t[s].length;if(n&&!c&&(f="greedy"===n?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===n&&c){for(var m=[],v=0;v<d;v++){var y=l?e[v]:v;m.push(t[s][y])}f=""===m.join("").trim()}if(!f){for(var b=0;b<d;b++){0<b&&!p&&(i+=o);var g=c&&l?e[b]:b;i+=h(t[s][g],b)}s<t.length-1&&(!n||0<d&&!p)&&(i+=a)}}return i}function h(e,t){var r,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,a=!0),r=e.toString().replace(f,l),(a=a||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,c.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=h,c.ParserHandle=p,c.NetworkStreamer=u,c.FileStreamer=s,c.StringStreamer=d,c.ReadableStreamStreamer=f,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},o=[];return this.each((function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},r)})})),a(),this;function a(){if(0===o.length)E(e.complete)&&e.complete();else{var n,r,a,l,u=o[0];if(E(e.before)){var s=e.before(u.file,u.inputElem);if("object"==typeof s){if("abort"===s.action)return n="AbortError",r=u.file,a=u.inputElem,l=s.reason,void(E(e.error)&&e.error({name:n},r,a,l));if("skip"===s.action)return void i();"object"==typeof s.config&&(u.instanceConfig=t.extend(u.instanceConfig,s.config))}else if("skip"===s)return void i()}var d=u.instanceConfig.complete;u.instanceConfig.complete=function(e){E(d)&&d(e,u.file,u.inputElem),i()},c.parse(u.file,u.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(e){e=e.data,void 0===c.WORKER_ID&&e&&(c.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:c.WORKER_ID,results:c.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=c.parse(e.input,e.config))&&n.postMessage({workerId:c.WORKER_ID,results:e,finished:!0})}),(u.prototype=Object.create(l.prototype)).constructor=u,(s.prototype=Object.create(l.prototype)).constructor=s,(d.prototype=Object.create(d.prototype)).constructor=d,(f.prototype=Object.create(l.prototype)).constructor=f,c},void 0===(a="function"==typeof r?r.apply(t,o):r)||(e.exports=a)},1536:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(385),n(185)),a=(n(1491),n(1361)),i=(n(48),n(11)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(1431),f=n(193),p=n(5),m=n.n(p),h=n(63),v="index-module_coverUploaderWrapper_JM8NQ",y="index-module_miniCoverUploaderWrapper_VBkGu",b="index-module_cropper_FJZMe",g="index-module_miniCropperWrapper_kKArf",_="index-module_miniCropper_x-fcL",E="index-module_placeholderWrapper_I8JnT",w="index-module_miniPlaceholderWrapper_CXNui",O="index-module_placeholder_fRP2-",k="index-module_placeholderImg_RI3Xy",S="index-module_preview_0S38r",N="index-module_uploadWrapper_Lddj1",x="index-module_miniUploadWrapper_kA5F2",A="index-module_uploadAction_IvY3J",P="index-module_miniUploadAction_zkhyc",C="index-module_uploadBtn_3NoLt",j="index-module_clearBtn_Jvd1P",T="index-module_btnRemove_ewCeL",I="index-module_btnRemoveIcon_Kaa0G";function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}function R(){R=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==M(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(M(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function D(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,c,"next",e)}function c(e){D(a,r,o,i,c,"throw",e)}i(void 0)}))}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function z(e,t,n){return t=V(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function Y(e,t,n){return(t=$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}var q=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(n=z(this,t,[e]),"onSubmit",U(R().mark((function e(){var t,r,o,a,c,l,u,s,d;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.cropper){e.next=14;break}return e.prev=1,e.next=4,n.handleUpload();case 4:return t=e.sent,e.abrupt("return",null==t?void 0:t.url);case 8:e.prev=8,e.t0=e.catch(1),null!==(r=e.t0.xhr)&&void 0!==r&&r.response&&(a=JSON.parse(e.t0.xhr.response),c=window.__member_message_ref&&(null===(o=window.__member_message_ref.current)||void 0===o?void 0:o.getMessage(a.code,{isOwner:!0},a))||{},l=c.msg,u=c.alwaysOpen,s=c.level,d=c.callback,l?d(i.a[s||"info"](l,u?0:void 0)):i.a.error(__("封面上传失败，请重试"))),console.error(e.t0);case 12:e.next=15;break;case 14:return e.abrupt("return",n.state.cover);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})))),Y(n,"getUploadProps",(function(){return{beforeUpload:function(e){var t=n.props.fileSizeLimit;if(e.size/1024/1024>t)return i.a.error(__("图片大小不能超过 {size}M",{size:t})),!1;var r=new FileReader;return r.addEventListener("load",(function(){n.setState({cover:r.result}),n.coverRef.current.focus(),"function"==typeof n.props.beforeUpload&&n.props.beforeUpload(r.result)}),!1),e&&r.readAsDataURL(e),!1},showUploadList:!1,accept:"image/*"}})),Y(n,"handleUpload",(function(){if(n.cropper){var e=n.cropper.getCroppedCanvas({imageSmoothingQuality:"high"});if(!e)throw new Error("can not get cropper");return new Promise((function(t,r){e.toBlob((function(e){var o=new FormData;n.props.attachable_type&&o.append("attachable_type",n.props.attachable_type),n.props.attachable_id&&o.append("attachable_id",n.props.attachable_id),o.append("file",e,"image.png"),o.append("ocr","off"),Object(f.ajax)({url:"/api/upload/attach",method:"POST",data:o,dataType:"json",processData:!1,success:function(e){t(e.data)},error:function(e){r(e)}})}),"image/png",1)}))}})),Y(n,"handleRemoveImg",(function(){n.setState({cover:""});var e=n.props.onRemove;e&&"function"==typeof e&&e()})),Y(n,"renderCropper",(function(){var e=n.props,r=e.miniMode,i=e.cropperStyle,c=e.aspectRatio,u=e.previewKey,s=e.placeholder,d=e.cropperClassName,f=e.getCropper,p=e.cropperCheckCrossOrigin,h=e.cropperCrossOrigin,v=n.state.cover,y=i.containerWidth,E=i.containerHeight,w=i.cropWidth;return r?l.a.createElement("div",{className:g},l.a.createElement("div",{className:m()(_,d)},l.a.createElement(o.a.Dragger,L({},n.getUploadProps(),{openFileDialogOnClick:!v}),v?l.a.createElement(a.a,{ref:function(e){n.cropper=e,f(n.cropper)},checkCrossOrigin:p,crossOrigin:h,src:v,containerWidth:263,containerHeight:E,aspectRatio:c,preview:u?".".concat(u):".image-preview",cropWidth:w}):l.a.createElement(t.MiniPlaceholder,{placeholder:s})))):l.a.createElement("div",{className:m()(b,d),"data-testid":"cover-uploader-cropper"},l.a.createElement(o.a.Dragger,L({},n.getUploadProps(),{openFileDialogOnClick:!v}),v?l.a.createElement(a.a,{ref:function(e){n.cropper=e,f(n.cropper)},checkCrossOrigin:p,crossOrigin:h,src:v,containerWidth:y,containerHeight:E,aspectRatio:c,preview:u?".".concat(u):".image-preview",cropWidth:w}):l.a.createElement(t.Placeholder,{placeholder:s})))})),Y(n,"renderUploader",(function(){var e=n.props,t=e.miniMode,a=e.previewClassName,i=e.previewKey,c=e.buttonSize,u=e.uploadWrapperClassName,s=n.state.cover;return t?l.a.createElement("div",{className:x},l.a.createElement("div",{className:P},l.a.createElement(o.a,n.getUploadProps(),s?l.a.createElement(r.a,{className:C},__("重新上传")):l.a.createElement(r.a,null,l.a.createElement(d.default,null),l.a.createElement("span",{className:"text"},__("上传图片")))),s&&l.a.createElement(r.a,{className:j,onClick:n.handleRemoveImg},__("清除")))):l.a.createElement("div",{className:m()(N,[u])},s&&l.a.createElement("div",{className:m()("image-preview",S,a,i),"data-testid":"cover-uploader-previewKey"}),l.a.createElement("div",{className:A},l.a.createElement(o.a,n.getUploadProps(),s?l.a.createElement(r.a,{size:c},__("重新上传")):l.a.createElement(r.a,{size:c},l.a.createElement(d.default,null),l.a.createElement("span",{className:"text"},__("上传图片")))),s&&l.a.createElement("span",{className:T,onClick:n.handleRemoveImg},l.a.createElement("span",{className:I},l.a.createElement(h.b,{name:"icon-delete",width:16})),l.a.createElement("span",null,__("清除")))))}));var u=e.defaultPreviewImage,s=e.cover;return n.state={cover:s||u},n.coverRef=Object(c.createRef)(),n.cropper=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(t,e),n=t,(u=[{key:"componentDidUpdate",value:function(e){e.cover!==this.props.cover&&this.setState({cover:this.props.cover})}},{key:"componentWillUnmount",value:function(){this.coverRef=null,this.cropper=null}},{key:"render",value:function(){var e=this.props.miniMode;return l.a.createElement("div",{className:m()(e?y:v,this.props.className),ref:this.coverRef,tabIndex:"-1"},this.renderCropper(),this.renderUploader())}}])&&B(n.prototype,u),s&&B(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,u,s}(c.Component);q.Placeholder=function(e){var t=e.placeholder;return l.a.createElement("div",{className:E},l.a.createElement("div",{className:m()(O,"cover-uploader-placeholder")},l.a.createElement("div",{className:k}),l.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},q.MiniPlaceholder=function(e){var t=e.placeholder;return l.a.createElement("div",{className:w},l.a.createElement("div",{className:m()(O,"cover-uploader-placeholder")},l.a.createElement("div",{className:k}),l.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},q.Placeholder.propTypes={placeholder:s.a.string},q.propTypes={cover:s.a.string,beforeUpload:s.a.func,aspectRatio:s.a.number,cropperStyle:s.a.shape({containerWidth:s.a.number,containerHeight:s.a.number,cropWidth:s.a.number}),defaultPreviewImage:s.a.string,fileSizeLimit:s.a.number,cropperClassName:s.a.string,previewClassName:s.a.string,uploadWrapperClassName:s.a.string,previewKey:s.a.string,onRemove:s.a.func,placeholder:s.a.string,attachable_type:s.a.string,attachable_id:s.a.number,miniMode:s.a.bool,getCropper:s.a.func,cropperCheckCrossOrigin:s.a.bool,cropperCrossOrigin:s.a.oneOf(["anonymous","use-credentials"]),buttonSize:s.a.oneOf(["large","middle","small"])},q.defaultProps={cropperStyle:{containerWidth:240,containerHeight:150,cropWidth:400},aspectRatio:1.6,fileSizeLimit:20,getCropper:function(){},cropperCheckCrossOrigin:!0,buttonSize:"middle"};t.a=q},1542:function(e,t,n){"use strict";n.d(t,"b",(function(){return q}));n(67);var r=n(31),o=n(0),a=n.n(o),i=n(1267),c=n(62),l=n(5),u=n.n(l),s=n(1469),d=(n(40),n(9)),f=n(382),p="Activity-module_contentHtml_YXsAJ",m="Activity-module_title_qmKTC",h="Activity-module_bg_nXCHP",v="Activity-module_normalContainer_HmMNc",y="Activity-module_content_fRHS0",b="Activity-module_normalFooter_d7pbA",g="Activity-module_footerRight_4r2hD",_="Activity-module_buttonItem_ivUR7",E="Activity-module_otherLink_ImlX+",w="Activity-module_qrCodeContainer_I0s58",O="Activity-module_qrContent_88ama",k="Activity-module_qrContentHtml_qC4nd",S="Activity-module_qrFooter_sNSWT",N="Activity-module_qrImageContainer_KFTaP",x="Activity-module_qrImage_6pU6j",A="Activity-module_qrInfo_s5zGr";var P=function(e){var t=e.content,n=e.openUrl,r=e.onContainerClick,o=t.image,i=t.title,l=t.desc,s=t.otherButton,P=t.mainButton,C=t.viceButton,j=t.type,T=t.qrCodeImage;return j===c.b.qrCode?a.a.createElement("div",{className:w},a.a.createElement(f.a,{className:h,darkAlpha:.7,src:o,blurLoading:!0}),a.a.createElement("div",{className:u()(y,O),onClick:r},a.a.createElement("p",{className:m},t.title),a.a.createElement("div",{className:u()(p,k),dangerouslySetInnerHTML:{__html:l}})),a.a.createElement("div",{className:S},a.a.createElement("div",{className:N},a.a.createElement("img",{src:T,className:x})),a.a.createElement("p",{className:A},__("手机扫描二维码立刻查看")))):a.a.createElement("div",{className:v},a.a.createElement(f.a,{className:h,darkAlpha:.7,src:o,blurLoading:!0}),a.a.createElement("div",{className:y,onClick:r},a.a.createElement("p",{className:m},i),a.a.createElement("div",{className:p,dangerouslySetInnerHTML:{__html:l}})),a.a.createElement("div",{className:b},a.a.createElement("div",{className:g},a.a.createElement(d.a,{className:_,type:"primary",onClick:function(){n(P)}},null==P?void 0:P.title),C.title&&a.a.createElement(d.a,{className:_,onClick:function(){n(C)}},C.title)),s.title&&a.a.createElement("div",{className:E,onClick:function(){n(s)}},s.title)))},C={contentHtml:"Announcement-module_contentHtml_-L1wW",title:"Announcement-module_title_wB2-b",bg:"Announcement-module_bg_cRpBE",announcementContainer:"Announcement-module_announcementContainer_Ezu+h",bgImage:"Announcement-module_bgImage_QnLn6",iconImage:"Announcement-module_iconImage_9oXmv",announcementBodyContainer:"Announcement-module_announcementBodyContainer_xU05v",noIconTitle:"Announcement-module_noIconTitle_AwV3Z",announcementContentHtml:"Announcement-module_announcementContentHtml_sqbVd",announcementFooterContainer:"Announcement-module_announcementFooterContainer_cc+8b",buttonItem:"Announcement-module_buttonItem_4fd5R"};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){var t=e.content,n=e.openUrl,r=e.onContainerClick,o=t.imageType,i=t.image,l=t.title,s=t.mainButton,p=t.viceButton,m=t.desc;return a.a.createElement("div",{className:C.announcementContainer},o!==c.c.none&&i&&a.a.createElement(f.a,{className:u()(T(T({},C.iconImage,o===c.c.icon),C.bgImage,o===c.c.bg)),blurLoading:o===c.c.bg,darkAlpha:.7,src:i}),a.a.createElement("div",{className:C.announcementBodyContainer},a.a.createElement("p",{className:u()(C.title,T({},C.noIconTitle,o===c.c.none))},l),a.a.createElement("div",{className:C.content,onClick:r},a.a.createElement("div",{className:"".concat(C.contentHtml," ").concat(C.announcementContentHtml),dangerouslySetInnerHTML:{__html:m}}))),a.a.createElement("div",{className:C.announcementFooterContainer},a.a.createElement(d.a,{className:C.buttonItem,type:"primary",onClick:function(){n(s)}},null==s?void 0:s.title),p.title&&a.a.createElement(d.a,{className:C.buttonItem,onClick:function(){n(p)}},p.title)))},M={closeContainer:"ActivityContent-module_closeContainer_4EyYi",close:"ActivityContent-module_close_qIdFs",lightCloseIcon:"ActivityContent-module_lightCloseIcon_w+ar9"};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){var t=e.tip,n=e.read,r=e.onCancel,o=t.content,i=o.popupType===c.f.announcement&&o.imageType!==c.c.bg,l=function(e){"close"===e.target.getAttribute("data-action")&&(null==n||n())},d=function(e){var t,n,o=e.url,a=e.openType,i=void 0===a?c.e.href:a;(null==r||r(),o&&i!==c.e.close)&&(window.appData.isDesktopApp?null===(t=(n=window).openExternalLink)||void 0===t||t.call(n,o,!0):i!==c.e.open?window.location.href=o:window.open(o))};return a.a.createElement("div",{className:M.container,"data-testid":"tip-modal"},o.popupType===c.f.activity?a.a.createElement(P,{content:o,openUrl:d,onContainerClick:l}):a.a.createElement(I,{content:o,openUrl:d,onContainerClick:l}),a.a.createElement("div",{className:M.closeContainer,"data-testid":"tip-modal-close",onClick:function(){return null==n?void 0:n()}},a.a.createElement("span",{className:u()(M.close,R({},M.lightCloseIcon,i)),"data-aspm-click":"d188273"},a.a.createElement(s.default,{width:12,height:12}))))},U="index-module_modal_BOc7H";function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=/Macaca UI Robot/,Y=function(e){return G.test(window.navigator.userAgent)||!e?null:Object(i.a)(e)},$=function(e){return e.popupType===c.f.announcement?452:424};var q=function(e){var t=e.tip,n=Y(null==t?void 0:t.content);if(!n)return null;r.a.destroyAll();var o=$(n),i=function(){var t;c.destroy(),null===(t=e.read)||void 0===t||t.call(e)},c=r.a.info({className:U,width:o,title:null,icon:null,centered:!0,maskClosable:!0,onCancel:function(){var t;null===(t=e.read)||void 0===t||t.call(e)}});c.update({content:a.a.createElement(D,{tip:F(F({},t),{},{content:n}),read:i,onCancel:i})})};t.a=function(e){var t=e.visible,n=e.tip,o=Y(null==n?void 0:n.content);if(!o)return null;var i=$(o),c=function(){var t,n;null===(t=e.read)||void 0===t||t.call(e),null===(n=e.onCancel)||void 0===n||n.call(e)};return a.a.createElement(r.a,{zIndex:1509,width:i,visible:t,footer:null,closable:!1,centered:!0,maskClosable:!0,className:U,onCancel:c},a.a.createElement(D,{tip:F(F({},n),{},{content:o}),onCancel:c,read:c}))}},1634:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-check",e.className].filter(Boolean).join(" ")}),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M210.827 55.428c3.906-3.905 10.237-3.905 14.143 0 3.834 3.834 3.904 10.007.209 13.927l-.21.215-124 124c-3.834 3.834-10.007 3.904-13.926.21l-.216-.21-55.708-55.708c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.835 10.008-3.904 13.927-.21l.215.21 48.637 48.636 116.93-116.928Z",fill:"currentColor",fillRule:"nonzero"}),r.createElement("path",{d:"M0 0h256v256H0z"})))},1635:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-add",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 28c5.523 0 10 4.477 10 10v80h80c5.523 0 10 4.477 10 10s-4.477 10-10 10h-80v80c0 5.523-4.477 10-10 10s-10-4.477-10-10v-80H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h80V38c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"evenodd"}))},1636:function(e,t,n){"use strict";var r=n(102),o=n(121);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(700)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(0)),c=r(n(1638)),l=r(n(1218));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))},d=i.forwardRef(s);t.default=d},1637:function(e,t,n){"use strict";var r=n(102),o=n(121);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(700)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(0)),c=r(n(1639)),l=r(n(1218));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))},d=i.forwardRef(s);t.default=d},1638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},1639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},1643:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-right-arrow",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"m169.564 58.012.215.209 48.99 48.99c11.599 11.598 11.715 30.331.348 42.072l-.348.354-48.99 48.99c-3.905 3.905-10.237 3.905-14.142 0-3.834-3.834-3.904-10.008-.21-13.927l.21-.215L202.121 138H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h163.274l-45.637-45.637c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.834 10.008-3.904 13.927-.21Z",fill:"currentColor",fillRule:"nonzero"}))},1644:function(e,t,n){"use strict";var r=n(74).SIZE;e.exports={getSizeValue:function(e){return e>=r.TB?{value:e/r.TB,unit:"TB"}:e>=r.GB?{value:e/r.GB,unit:"GB"}:e>=r.MB?{value:e/r.MB,unit:"MB"}:{value:e/r.KB,unit:"KB"}}}},1645:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(55);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.startsWith("http")){var o,a,i=(window.appConfig||{}).host;null!==(o=window.appData)&&void 0!==o&&null!==(a=o.currentOrganization)&&void 0!==a&&a.host&&(i=window.appData.currentOrganization.host),i||(i=window.location.origin),e="".concat(i).concat(e)}if(null!==(t=window.YuqueDesktopJSBridge)&&void 0!==t&&t.postMessage)window.YuqueDesktopJSBridge.postMessage(r.DesktopBridgeEvents.openExternalLink,{targetUrl:e,isNewWindow:n});else if(window._electron_bridge){var c,l=null===(c=window._electron_bridge)||void 0===c?void 0:c.shell;null==l||l.openExternal(e)}}},1646:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},1647:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=n(1649),i=/[\u0100-\uffff]+/g,c=/--+/g,l=/\s+/;e.exports=function(e){if(!e)return 0;var t=0;return(e=(e=(e=" ".concat(a(String(e))," ")).replace(i,(function(e){return e.codePointAt(0)>127?(t+=r(e).length," "):e})).replace(c,(function(e,n,r){return l.test(r[n-1])&&t++," "}))).trim())&&(t+=e.split(l).length),t}},1648:function(e,t,n){e.exports=function(){"use strict";var e,t,n=1e3,r=6e4,o=36e5,a=864e5,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,l=2628e6,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,s={years:c,months:l,days:a,hours:o,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},d=function(e){return e instanceof b},f=function(e,t,n){return new b(e,n,t.$l)},p=function(e){return t.p(e)+"s"},m=function(e){return e<0},h=function(e){return m(e)?Math.ceil(e):Math.floor(e)},v=function(e){return Math.abs(e)},y=function(e,t){return e?m(e)?{negative:!0,format:""+v(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},b=function(){function m(e,t,n){var r=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return f(e*s[p(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach((function(t){r.$d[p(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var o=e.match(u);if(o){var a=o.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=a[0],this.$d.months=a[1],this.$d.weeks=a[2],this.$d.days=a[3],this.$d.hours=a[4],this.$d.minutes=a[5],this.$d.seconds=a[6],this.calMilliseconds(),this}}return this}var v=m.prototype;return v.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*s[n]}),0)},v.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=h(e/c),e%=c,this.$d.months=h(e/l),e%=l,this.$d.days=h(e/a),e%=a,this.$d.hours=h(e/o),e%=o,this.$d.minutes=h(e/r),e%=r,this.$d.seconds=h(e/n),e%=n,this.$d.milliseconds=e},v.toISOString=function(){var e=y(this.$d.years,"Y"),t=y(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=y(n,"D"),o=y(this.$d.hours,"H"),a=y(this.$d.minutes,"M"),i=this.$d.seconds||0;this.$d.milliseconds&&(i+=this.$d.milliseconds/1e3,i=Math.round(1e3*i)/1e3);var c=y(i,"S"),l=e.negative||t.negative||r.negative||o.negative||a.negative||c.negative,u=o.format||a.format||c.format?"T":"",s=(l?"-":"")+"P"+e.format+t.format+r.format+u+o.format+a.format+c.format;return"P"===s||"-P"===s?"P0D":s},v.toJSON=function(){return this.toISOString()},v.format=function(e){var n=e||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return n.replace(i,(function(e,t){return t||String(r[e])}))},v.as=function(e){return this.$ms/s[p(e)]},v.get=function(e){var t=this.$ms,n=p(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?h(t/s[n]):this.$d[n],t||0},v.add=function(e,t,n){var r;return r=t?e*s[p(t)]:d(e)?e.$ms:f(e,this).$ms,f(this.$ms+r*(n?-1:1),this)},v.subtract=function(e,t){return this.add(e,t,!0)},v.locale=function(e){var t=this.clone();return t.$l=e,t},v.clone=function(){return f(this.$ms,this)},v.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},v.valueOf=function(){return this.asMilliseconds()},v.milliseconds=function(){return this.get("milliseconds")},v.asMilliseconds=function(){return this.as("milliseconds")},v.seconds=function(){return this.get("seconds")},v.asSeconds=function(){return this.as("seconds")},v.minutes=function(){return this.get("minutes")},v.asMinutes=function(){return this.as("minutes")},v.hours=function(){return this.get("hours")},v.asHours=function(){return this.as("hours")},v.days=function(){return this.get("days")},v.asDays=function(){return this.as("days")},v.weeks=function(){return this.get("weeks")},v.asWeeks=function(){return this.as("weeks")},v.months=function(){return this.get("months")},v.asMonths=function(){return this.as("months")},v.years=function(){return this.get("years")},v.asYears=function(){return this.as("years")},m}(),g=function(e,t,n){return e.add(t.years()*n,"y").add(t.months()*n,"M").add(t.days()*n,"d").add(t.hours()*n,"h").add(t.minutes()*n,"m").add(t.seconds()*n,"s").add(t.milliseconds()*n,"ms")};return function(n,r,o){e=o,t=o().$utils(),o.duration=function(e,t){var n=o.locale();return f(e,{$l:n},t)},o.isDuration=d;var a=r.prototype.add,i=r.prototype.subtract;r.prototype.add=function(e,t){return d(e)?g(this,e,1):a.bind(this)(e,t)},r.prototype.subtract=function(e,t){return d(e)?g(this,e,-1):i.bind(this)(e,t)}}}()},1649:function(e,t,n){"use strict";var r=/<[^>]+>/g;e.exports=function(e){return e.replace(r," ").trim()}},1651:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-questioncirclefilled",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm-1 156c-6.627 0-12 5.372-12 12 0 6.627 5.373 12 12 12s12-5.373 12-12c0-6.628-5.373-12-12-12Zm1.863-109.002c-13.226-.063-23.752 5.503-30.913 14.964-5.32 7.029-8.435 15.92-8.93 23.434a9 9 0 0 0 17.94 1.448l.053-.681c.37-4.07 2.275-9.356 5.29-13.338 3.843-5.078 9.107-7.861 16.471-7.825 7.7.038 13.474 3.037 17.087 8.1 3.222 4.515 4.337 10.296 3.094 14.928l-.036.13-.076.258c-.762 2.484-2.476 4.971-7.337 10.406l-1.555 1.722-1.338 1.461-4.166 4.498c-4.197 4.559-6.91 7.783-9.328 11.28l-.515.754c-3.968 5.9-6.33 11.683-6.782 17.801a9 9 0 0 0 17.928 1.587l.043-.495c.467-5.01 4.14-10.414 13.227-20.172l4.35-4.68c.597-.646 1.104-1.197 1.546-1.683l.72-.796.84-.95.547-.639.706-.85 1.192-1.487c3.732-4.697 6.204-8.954 7.418-13.478 2.659-9.905.477-21.218-5.826-30.051-6.968-9.766-18.158-15.577-31.65-15.646Z",fill:"currentColor",fillRule:"nonzero"}))},1652:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-exclamationcircle",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm0 132c7.732 0 14 6.268 14 14s-6.268 14-14 14-14-6.268-14-14 6.268-14 14-14Zm0-98c5.523 0 10 4.477 10 10v64c0 5.523-4.477 10-10 10s-10-4.477-10-10V80c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"nonzero"}))},1653:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-change",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"m66.77 130.998 25.42 6.812c5.334 1.429 8.5 6.912 7.07 12.247-1.429 5.335-6.912 8.5-12.247 7.071l-21.17-5.672C75.695 180.568 103.246 201 135 201c25.226 0 48.234-12.886 61.569-33.76 2.973-4.654 9.157-6.017 13.81-3.043 4.655 2.973 6.017 9.156 3.044 13.81C196.451 204.574 167.123 221 135 221c-39.108 0-73.2-24.314-86.77-59.453l-6.13 22.887c-1.43 5.335-6.914 8.5-12.248 7.071-5.335-1.43-8.5-6.913-7.071-12.247l7.247-27.046c4.288-16.004 20.738-25.502 36.742-21.214ZM122 35c38.662 0 72.359 23.75 86.25 58.135l5.501-20.538c1.43-5.335 6.913-8.5 12.248-7.071 5.334 1.43 8.5 6.913 7.07 12.247l-6.729 25.114c-4.288 16.004-20.738 25.502-36.742 21.213l-23.555-6.311c-5.335-1.43-8.5-6.913-7.071-12.248 1.429-5.334 6.912-8.5 12.247-7.07l19.66 5.266C180.809 75.094 153.499 55 122 55c-26.405 0-50.336 14.129-63.29 36.594-2.759 4.784-8.874 6.426-13.658 3.668-4.785-2.76-6.427-8.874-3.668-13.659C57.874 53.006 88.373 35 122 35Z",fill:"currentColor",fillRule:"nonzero"}))},1658:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-dataflow",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"3571855244a",d:"M0 0h16v16H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"3571855244b",fill:"#fff"},r.createElement("use",{xlinkHref:"#3571855244a"})),r.createElement("path",{d:"M11.5 2A2.5 2.5 0 0 1 14 4.5v7a2.5 2.5 0 0 1-2.5 2.5h-7A2.5 2.5 0 0 1 2 11.5v-7A2.5 2.5 0 0 1 4.5 2h7ZM7.417 4l-.053.007s-.302.005-.445.005c-.143 0-.187.138-.187.138L5.838 8.69l-.318-.962c-.03-.109-.136-.123-.26-.119l-2.052.007A.205.205 0 0 0 3 7.817v.405c0 .111.093.202.208.202h1.65l.61 1.85c.031.108.148.172.262.143l.324-.004c.11.028.236-.06.265-.164l.916-4.181 1.208 5.787c.029.104.14.166.247.138 0 0 .22-.003.35-.003.13 0 .15-.234.15-.234l.974-4.438.311.96c.03.108.144.172.255.143l2.062.003c.115 0 .208-.09.208-.202v-.405a.205.205 0 0 0-.208-.202h-1.66l-.607-1.877a.209.209 0 0 0-.255-.143l-.356.004c-.108-.028-.192.06-.221.164l-.885 4.125L7.61 4.145a.202.202 0 0 0-.247-.138Z",fill:"#81B3F8",mask:"url(#3571855244b)"})))},1659:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-member",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"1312601950a",d:"M0 0h16v16H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"1312601950b",fill:"#fff"},r.createElement("use",{xlinkHref:"#1312601950a"})),r.createElement("g",{mask:"url(#1312601950b)",fill:"#3BCBE8",fillRule:"nonzero"},r.createElement("path",{d:"M2.398 5.25c0-1.519 1.274-2.75 2.847-2.75 1.572 0 2.846 1.231 2.846 2.75S6.817 8 5.245 8 2.398 6.769 2.398 5.25Zm3.913 7.584v-.19c0-1.402.741-2.634 1.859-3.36a3.765 3.765 0 0 0-1.62-.367H4.177C2.147 8.917.5 10.507.5 12.468v.23c0 .802 1.646.802 3.677.802h2.269a1.598 1.598 0 0 1-.135-.666Zm5.053-8.465c-1.304 0-2.362 1.021-2.362 2.282 0 1.261 1.058 2.283 2.362 2.283 1.305 0 2.363-1.022 2.363-2.283 0-1.26-1.057-2.282-2.363-2.282Zm0 0c-1.304 0-2.362 1.021-2.362 2.282 0 1.261 1.058 2.283 2.362 2.283 1.305 0 2.363-1.022 2.363-2.283 0-1.26-1.057-2.282-2.363-2.282Zm-.884 5.327c-1.686 0-3.053 1.32-3.053 2.948v.19c0 .665 1.367.665 3.053.665h1.969c1.685 0 3.051-.024 3.051-.665v-.19c0-1.629-1.366-2.948-3.051-2.948h-1.97Z"}))))},1665:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1666:function(e,t,n){const r=n(795),o=n(1338),a=n(1667),i=n(1668),c=n(1669),l=n(1670),u=n(1671),s=n(1418),d=n(1672),f=n(1675),p=n(1676),m=n(796),h=n(1677);function v(e,t,n){const r=e.size,o=p.getEncodedBits(t,n);let a,i;for(a=0;a<15;a++)i=1==(o>>a&1),a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(r-15+a,8,i,!0),a<8?e.set(8,r-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(r-8,8,1,!0)}function y(e,t,n){const o=new a;n.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(o)}));const i=8*(r.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=i&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const c=(i-o.getLengthInBits())/8;for(let e=0;e<c;e++)o.put(e%2?17:236,8);return function(e,t,n){const o=r.getSymbolTotalCodewords(t),a=s.getTotalCodewordsCount(t,n),i=o-a,c=s.getBlocksCount(t,n),l=o%c,u=c-l,f=Math.floor(o/c),p=Math.floor(i/c),m=p+1,h=f-p,v=new d(h);let y=0;const b=new Array(c),g=new Array(c);let _=0;const E=new Uint8Array(e.buffer);for(let e=0;e<c;e++){const t=e<u?p:m;b[e]=E.slice(y,y+t),g[e]=v.encode(b[e]),y+=t,_=Math.max(_,t)}const w=new Uint8Array(o);let O,k,S=0;for(O=0;O<_;O++)for(k=0;k<c;k++)O<b[k].length&&(w[S++]=b[k][O]);for(O=0;O<h;O++)for(k=0;k<c;k++)w[S++]=g[k][O];return w}(o,e,t)}function b(e,t,n,o){let a;if(Array.isArray(e))a=h.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=h.rawSplit(e);r=f.getBestVersionForData(t,n)}a=h.fromString(e,r||40)}}const s=f.getBestVersionForData(a,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else t=s;const d=y(t,n,a),p=r.getSymbolSize(t),m=new i(p);return function(e,t){const n=e.size,r=l.getPositions(t);for(let t=0;t<r.length;t++){const o=r[t][0],a=r[t][1];for(let t=-1;t<=7;t++)if(!(o+t<=-1||n<=o+t))for(let r=-1;r<=7;r++)a+r<=-1||n<=a+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(o+t,a+r,!0,!0):e.set(o+t,a+r,!1,!0))}}(m,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(m),function(e,t){const n=c.getPositions(t);for(let t=0;t<n.length;t++){const r=n[t][0],o=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(r+t,o+n,!0,!0):e.set(r+t,o+n,!1,!0)}}(m,t),v(m,n,0),t>=7&&function(e,t){const n=e.size,r=f.getEncodedBits(t);let o,a,i;for(let t=0;t<18;t++)o=Math.floor(t/3),a=t%3+n-8-3,i=1==(r>>t&1),e.set(o,a,i,!0),e.set(a,o,i,!0)}(m,t),function(e,t){const n=e.size;let r=-1,o=n-1,a=7,i=0;for(let c=n-1;c>0;c-=2)for(6===c&&c--;;){for(let n=0;n<2;n++)if(!e.isReserved(o,c-n)){let r=!1;i<t.length&&(r=1==(t[i]>>>a&1)),e.set(o,c-n,r),a--,-1===a&&(i++,a=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}(m,d),isNaN(o)&&(o=u.getBestMask(m,v.bind(null,m,n))),u.applyMask(o,m),v(m,n,o),{modules:m,version:t,errorCorrectionLevel:n,maskPattern:o,segments:a}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,a,i=o.M;return void 0!==t&&(i=o.from(t.errorCorrectionLevel,o.M),n=f.from(t.version),a=u.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),b(e,n,i,a)}},1667:function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},1668:function(e,t){function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}n.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},1669:function(e,t,n){const r=n(795).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),o=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-o;return a.push(6),a.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),o=r.length;for(let e=0;e<o;e++)for(let t=0;t<o;t++)0===e&&0===t||0===e&&t===o-1||e===o-1&&0===t||n.push([r[e],r[t]]);return n}},1670:function(e,t,n){const r=n(795).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},1671:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,o=40,a=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,o=0,a=0,i=null,c=null;for(let l=0;l<t;l++){o=a=0,i=c=null;for(let u=0;u<t;u++){let t=e.get(l,u);t===i?o++:(o>=5&&(r+=n+(o-5)),i=t,o=1),t=e.get(u,l),t===c?a++:(a>=5&&(r+=n+(a-5)),c=t,a=1)}o>=5&&(r+=n+(o-5)),a>=5&&(r+=n+(a-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){const t=e.get(r,o)+e.get(r,o+1)+e.get(r+1,o)+e.get(r+1,o+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,a=0;for(let o=0;o<t;o++){r=a=0;for(let i=0;i<t;i++)r=r<<1&2047|e.get(o,i),i>=10&&(1488===r||93===r)&&n++,a=a<<1&2047|e.get(i,o),i>=10&&(1488===a||93===a)&&n++}return n*o},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*a},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,i(e,o,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let o=0,a=1/0;for(let i=0;i<r;i++){n(i),t.applyMask(i,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),r<a&&(a=r,o=i)}return o}},1672:function(e,t,n){const r=n(1673);function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),o=this.degree-n.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(n,o),e}return n},e.exports=o},1673:function(e,t,n){const r=n(1674);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let o=0;o<e.length;o++)for(let a=0;a<t.length;a++)n[o+a]^=r.mul(e[o],t[a]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let o=0;o<t.length;o++)n[o]^=r.mul(t[o],e);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let o=0;o<e;o++)n=t.mul(n,new Uint8Array([1,r.exp(o)]));return n}},1674:function(e,t){const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},1675:function(e,t,n){const r=n(795),o=n(1418),a=n(1338),i=n(796),c=n(1419),l=r.getBCHDigit(7973);function u(e,t){return i.getCharCountIndicator(e,t)+4}function s(e,t){let n=0;return e.forEach((function(e){const r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return c.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!c.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=i.BYTE);const a=8*(r.getSymbolTotalCodewords(e)-o.getTotalCodewordsCount(e,t));if(n===i.MIXED)return a;const l=a-u(n,e);switch(n){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const o=a.from(n,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(s(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,o);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let o=1;o<=40;o++)if(n<=t.getCapacity(o,r,e))return o}(r.mode,r.getLength(),o)},t.getEncodedBits=function(e){if(!c.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},1676:function(e,t,n){const r=n(795),o=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let a=n<<10;for(;r.getBCHDigit(a)-o>=0;)a^=1335<<r.getBCHDigit(a)-o;return 21522^(n<<10|a)}},1677:function(e,t,n){const r=n(796),o=n(1678),a=n(1679),i=n(1680),c=n(1681),l=n(1420),u=n(795),s=n(1682);function d(e){return unescape(encodeURIComponent(e)).length}function f(e,t,n){const r=[];let o;for(;null!==(o=e.exec(n));)r.push({data:o[0],index:o.index,mode:t,length:o[0].length});return r}function p(e){const t=f(l.NUMERIC,r.NUMERIC,e),n=f(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let o,a;u.isKanjiModeEnabled()?(o=f(l.BYTE,r.BYTE,e),a=f(l.KANJI,r.KANJI,e)):(o=f(l.BYTE_KANJI,r.BYTE,e),a=[]);return t.concat(n,o,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function m(e,t){switch(t){case r.NUMERIC:return o.getBitsLength(e);case r.ALPHANUMERIC:return a.getBitsLength(e);case r.KANJI:return c.getBitsLength(e);case r.BYTE:return i.getBitsLength(e)}}function h(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||u.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new o(e);case r.ALPHANUMERIC:return new a(e);case r.KANJI:return new c(e);case r.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(h(t,null)):t.data&&e.push(h(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const o=function(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];switch(o.mode){case r.NUMERIC:t.push([o,{data:o.data,mode:r.ALPHANUMERIC,length:o.length},{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.ALPHANUMERIC:t.push([o,{data:o.data,mode:r.BYTE,length:o.length}]);break;case r.KANJI:t.push([o,{data:o.data,mode:r.BYTE,length:d(o.data)}]);break;case r.BYTE:t.push([{data:o.data,mode:r.BYTE,length:d(o.data)}])}}return t}(p(e,u.isKanjiModeEnabled())),a=function(e,t){const n={},o={start:{}};let a=["start"];for(let i=0;i<e.length;i++){const c=e[i],l=[];for(let e=0;e<c.length;e++){const u=c[e],s=""+i+e;l.push(s),n[s]={node:u,lastCount:0},o[s]={};for(let e=0;e<a.length;e++){const i=a[e];n[i]&&n[i].node.mode===u.mode?(o[i][s]=m(n[i].lastCount+u.length,u.mode)-m(n[i].lastCount,u.mode),n[i].lastCount+=u.length):(n[i]&&(n[i].lastCount=u.length),o[i][s]=m(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,t))}}a=l}for(let e=0;e<a.length;e++)o[a[e]].end=0;return{map:o,table:n}}(o,n),i=s.find_path(a.map,"start","end"),c=[];for(let e=1;e<i.length-1;e++)c.push(a.table[i[e]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(c))},t.rawSplit=function(e){return t.fromArray(p(e,u.isKanjiModeEnabled()))}},1678:function(e,t,n){const r=n(796);function o(e){this.mode=r.NUMERIC,this.data=e.toString()}o.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*o+1))},e.exports=o},1679:function(e,t,n){const r=n(796),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=r.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*o.indexOf(this.data[t]);n+=o.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(o.indexOf(this.data[t]),6)},e.exports=a},1680:function(e,t,n){const r=n(796);function o(e){this.mode=r.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},1681:function(e,t,n){const r=n(796),o=n(795);function a(e){this.mode=r.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=o.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=a},1682:function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var o={},a={};a[t]=0;var i,c,l,u,s,d,f,p=r.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(l in c=(i=p.pop()).value,u=i.cost,s=e[c]||{})s.hasOwnProperty(l)&&(d=u+s[l],f=a[l],(void 0===a[l]||f>d)&&(a[l]=d,p.push(l,d),o[l]=c));if(void 0!==n&&void 0===a[n]){var m=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(m)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var o=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,o={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o.queue=[],o.sorter=e.sorter||n.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},1683:function(e,t,n){const r=n(1421);t.render=function(e,t,n){let o=n,a=t;void 0!==o||t&&t.getContext||(o=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),o=r.getOptions(o);const i=r.getImageWidth(e.modules.size,o),c=a.getContext("2d"),l=c.createImageData(i,i);return r.qrToImageData(l.data,e,o),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(c,a,i),c.putImageData(l,0,0),a},t.renderToDataURL=function(e,n,r){let o=r;void 0!==o||n&&n.getContext||(o=n,n=void 0),o||(o={});const a=t.render(e,n,o),i=o.type||"image/png",c=o.rendererOpts||{};return a.toDataURL(i,c.quality)}},1684:function(e,t,n){const r=n(1421);function o(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){const i=r.getOptions(t),c=e.modules.size,l=e.modules.data,u=c+2*i.margin,s=i.color.light.a?"<path "+o(i.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",d="<path "+o(i.color.dark,"stroke")+' d="'+function(e,t,n){let r="",o=0,i=!1,c=0;for(let l=0;l<e.length;l++){const u=Math.floor(l%t),s=Math.floor(l/t);u||i||(i=!0),e[l]?(c++,l>0&&u>0&&e[l-1]||(r+=i?a("M",u+n,.5+s+n):a("m",o,0),o=0,i=!1),u+1<t&&e[l+1]||(r+=a("h",c),c=0)):o++}return r}(l,c,i.margin)+'"/>',f='viewBox="0 0 '+u+" "+u+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+f+' shape-rendering="crispEdges">'+s+d+"</svg>\n";return"function"==typeof n&&n(null,p),p}},1816:function(e,t,n){var r=n(210),o=n(243),a=n(570),i=n(387);e.exports=function(e,t){if(null==e)return{};var n=r(i(e),(function(e){return[e]}));return t=o(t),a(e,n,(function(e,n){return t(e,n[0])}))}},183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genBizStoreParamsDealFn=t.genBoolResultDealFn=t.forceChangeParamsDealFn=t.genDefaultParamsDealFn=t.addDefaultCorpIdParamsDeal=t.addWatchParamsDeal=void 0;t.addWatchParamsDeal=function(e){var t=Object.assign({},e);return t.watch=!0,t};t.addDefaultCorpIdParamsDeal=function(e){var t=Object.assign({},e);return t.corpId="corpId",t};t.genDefaultParamsDealFn=function(e){var t=Object.assign({},e);return function(e){return Object.assign({},t,e)}};t.forceChangeParamsDealFn=function(e){var t=Object.assign({},e);return function(e){return Object.assign(e,t)}};t.genBoolResultDealFn=function(e){return function(t){var n=Object.assign({},t);return e.forEach((function(e){void 0!==n[e]&&(n[e]=!!n[e])})),n}};t.genBizStoreParamsDealFn=function(e){var t=Object.assign({},e);return"string"!=typeof t.params?(t.params=JSON.stringify(t),t):t}},1849:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-success",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm55.143 72.902c-3.865-3.945-10.196-4.01-14.141-.145L112.714 143.9l-25.717-25.187-.217-.207c-3.958-3.653-10.13-3.52-13.924.354-3.865 3.946-3.799 10.277.147 14.142l32.715 32.041.219.208a10 10 0 0 0 13.776-.209l63.285-62 .212-.213c3.734-3.881 3.728-10.055-.067-13.928Z",fill:"currentColor",fillRule:"nonzero"}))},185:function(e,t,n){"use strict";n(3158);var r=n(1260);n(385);t.a=r.a},1851:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-information",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M128.5 15.5c62.408 0 113 50.592 113 113s-50.592 113-113 113-113-50.592-113-113 50.592-113 113-113Zm0 20c-51.362 0-93 41.638-93 93s41.638 93 93 93 93-41.638 93-93-41.638-93-93-93ZM131 113c5.523 0 10 4.477 10 10v62c0 5.523-4.477 10-10 10s-10-4.477-10-10v-52h-6c-5.523 0-10-4.477-10-10s4.477-10 10-10h16Zm-3-44c7.732 0 14 6.268 14 14s-6.268 14-14 14-14-6.268-14-14 6.268-14 14-14Z",fill:"currentColor",fillRule:"nonzero"}))},1853:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({viewBox:"64 64 896 896",fill:"currentColor",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-antd-warning",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}))},1856:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-public",e.className].filter(Boolean).join(" ")}),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M0 0h16v16H0z"}),r.createElement("path",{d:"M8 1.487a6.513 6.513 0 1 1 0 13.026A6.513 6.513 0 0 1 8 1.487Zm5.005 8.765-.029.003c-.223.042-.491.213-.875.54l-.53.465-.196.166-.082.066-.144.107c-.044.03-.086.056-.126.078l-.12.06-.13.049a1.162 1.162 0 0 1-.447.08c-.578-.011-.863-.24-1.08-.693l-.073-.163c-.075-.18-.091-.199-.169-.22-.359-.094-1.08.61-1.212 1.37-.054.315-.008.488.204.797l.155.216c.083.112.151.21.21.302a5.489 5.489 0 0 0 4.644-3.223ZM8.46 2.532l.022.046c.108.26.139.533.055.775-.062.181-.15.31-.293.462l-.266.261c-.068.07-.08.097-.08.122.002.058.09.132.35.234l.2.072.255.08.317.09c1.615.442 1.65 2.616-.231 3.395-1.288.534-2.074.239-2.707-.647L5.92 7.18l-.145-.221c-.222-.315-.835-.451-1.057-.3l-.005.009-.045.114-.051.152-.068.216-.1.348-.099.308c-.226.66-.454.9-1.005.865-.335-.022-.581-.148-.823-.39a5.486 5.486 0 0 0 4.543 5.126c-.289-.46-.382-.85-.283-1.422.221-1.283 1.432-2.465 2.484-2.187.408.108.617.316.79.672l.127.293c.032.069.05.075.117.076l.064-.001.062-.02.071-.03.079-.048.096-.07.124-.1.256-.22.231-.204c.819-.725 1.394-1.052 2.065-.914a5.488 5.488 0 0 0-4.889-6.701Zm-1.323.047c-2.224.355-4 2.04-4.49 4.211a.497.497 0 0 1 .025.028l.099.125.222.303c.132.181.229.291.304.349l.022.015.017-.033.051-.127.057-.172.132-.452.092-.296c.131-.391.242-.56.475-.719.7-.475 1.937-.2 2.471.558l.235.358c.402.61.705.744 1.547.395 1.007-.417.993-1.283.354-1.457l-.204-.057-.367-.113c-.913-.302-1.29-.622-1.306-1.27-.01-.377.11-.6.394-.889l.204-.199.07-.075a.157.157 0 0 0 .026-.042c.018-.053-.26-.413-.43-.441Z",fill:"currentColor",fillRule:"nonzero"})))},1857:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-lock",e.className].filter(Boolean).join(" ")}),r.createElement("defs",null,r.createElement("path",{id:"2932495269a",d:"M0 0h20v20H0z"})),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("mask",{id:"2932495269b",fill:"#fff"},r.createElement("use",{xlinkHref:"#2932495269a"})),r.createElement("g",{mask:"url(#2932495269b)",fill:"#FFF",fillRule:"nonzero"},r.createElement("path",{d:"M10 1.172a4.219 4.219 0 0 1 4.219 4.219l-.001 1.874h1.407c1.036 0 1.875.84 1.875 1.876v7.812c0 1.036-.84 1.875-1.875 1.875H4.375A1.875 1.875 0 0 1 2.5 16.953V9.141c0-1.036.84-1.875 1.875-1.875l1.406-.001V5.39A4.219 4.219 0 0 1 10 1.17Zm5.64 7.657H4.376a.313.313 0 0 0-.312.296v7.828c0 .167.131.304.296.312h11.266a.313.313 0 0 0 .312-.296V9.14a.313.313 0 0 0-.296-.312ZM10 10.78a1.406 1.406 0 0 1 .782 2.575v1.175a.781.781 0 1 1-1.563 0l-.001-1.175A1.405 1.405 0 0 1 10 10.781Zm.044-8.046H10a2.656 2.656 0 0 0-2.656 2.612v1.919h5.312V5.39a2.656 2.656 0 0 0-2.612-2.656Z"}))))},1858:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-qrcode2",e.className].filter(Boolean).join(" ")}),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M0 0h256v256H0z"}),r.createElement("path",{d:"M122.353 133.647v73.412c0 9.353-7.588 16.941-16.941 16.941h-56.47C39.587 224 32 216.412 32 207.059v-56.47c0-9.354 7.588-16.942 16.941-16.942h73.412Zm45.176-.224L167.52 160l22.56-.001v-26.576H224v33.92l-29.185-.016v20.672L224 188v33.92h-33.92v-29.921h-22.513v29.921h-33.92V188l29.168-.001.001-20.703-29.169.01v-33.883h33.882Zm-62.794 17.842H49.618v55.117h55.117v-55.117ZM105.412 32c9.353 0 16.94 7.588 16.94 16.941v73.412h-73.41c-9.354 0-16.942-7.588-16.942-16.941v-56.47C32 39.587 39.588 32 48.941 32h56.47Zm101.647 0C216.412 32 224 39.588 224 48.941v56.47c0 9.354-7.588 16.942-16.941 16.942h-73.412V48.94c0-9.353 7.588-16.941 16.941-16.941h56.47ZM104.735 49.618H49.618v55.117h55.117V49.618Zm101.647 0h-55.117v55.117h55.117V49.618Z",fill:"currentColor",fillRule:"nonzero"})))},1861:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=e=>r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-warning",e.className].filter(Boolean).join(" ")}),r.createElement("path",{d:"M7 0a7 7 0 0 1 7 7 7 7 0 0 1-7 7 7 7 0 0 1-7-7 7 7 0 0 1 7-7Zm.438 10.938a.437.437 0 1 0-.875-.001.437.437 0 0 0 .875 0Zm0-1.75V3.061a.437.437 0 1 0-.875 0v6.126a.437.437 0 1 0 .875 0Z",fill:"#FAAD14",fillRule:"evenodd"}))},206:function(e,t,n){"use strict";n(1344);var r=n(426);n(589);t.a=r.a},21:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(3156),n(809)),i=n(57),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=(n(134),["className"]),g=["className"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=d.a.forwardRef((function(e,t){var n=e.className,r=u()(e,b),o=h()("larkui-form",n);return d.a.createElement(a.a,c()({className:o,ref:t},r))}));w.propTypes=E(E({},a.a.CardProps),{},{className:p.a.string}),y()(w,a.a),w.Item=d.a.forwardRef((function(e,t){var n=e.className,r=u()(e,g),o=h()("larkui-form-item",n);return d.a.createElement(a.a.Item,c()({className:o,ref:t},r,{colon:!1}))})),t.a=w},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(424),o=n.n(r),a=n(0),i=n(1017);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(i.a)({fn:e,ms:t});return Object(a.useMemo)((function(){return o()((function(){var e;return(e=r.current).fn.apply(e,arguments)}),r.current.ms)}),n)}},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ddSdk=t.ENV_ENUM_SUB=t.ENV_ENUM=void 0;var r=n(799),o=n(2909),a=n(799);Object.defineProperty(t,"ENV_ENUM",{enumerable:!0,get:function(){return a.ENV_ENUM}}),Object.defineProperty(t,"ENV_ENUM_SUB",{enumerable:!0,get:function(){return a.ENV_ENUM_SUB}});var i=n(961);n(2910),t.ddSdk=new i.Sdk((0,r.getENV)(),o.log)},256:function(e,t,n){"use strict";var r=n(0),o=r.createContext(null);t.a=o},2900:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(2901),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(92))},2901:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,a,i,c,l=1,u={},s=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){m(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){m(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(m,0,e)}:(i="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&m(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),r=function(t){e.postMessage(i+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[l]=o,r(l),l++},f.clearImmediate=p}function p(e){delete u[e]}function m(e){if(s)setTimeout(m,0,e);else{var t=u[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(92),n(158))},2905:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=t.APP_TYPE=t.ENV_ENUM_SUB=t.ENV_ENUM=t.ERROR_CODE=t.compareVersion=t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e},t.compareVersion=function(e,t){function n(e){return parseInt(e,10)||0}for(var r=e.split(".").map(n),o=t.split(".").map(n),a=0;a<r.length;a++){if(void 0===o[a])return!1;if(r[a]<o[a])return!1;if(r[a]>o[a])return!0}return!0},(r=t.ERROR_CODE||(t.ERROR_CODE={})).cancel="-1",r.not_exist="1",r.no_permission="7",r.jsapi_internal_error="22",function(e){e.pc="pc",e.android="android",e.ios="ios",e.notInDingTalk="notInDingTalk"}(t.ENV_ENUM||(t.ENV_ENUM={})),function(e){e.mac="mac",e.win="win",e.noSub="noSub"}(t.ENV_ENUM_SUB||(t.ENV_ENUM_SUB={})),function(e){e.WEB="WEB",e.MINI_APP="MINI_APP",e.WEEX="WEEX",e.WEBVIEW_IN_MINIAPP="WEBVIEW_IN_MINIAPP",e.WEEX_WIDGET="WEEX_WIDGET"}(t.APP_TYPE||(t.APP_TYPE={})),function(e){e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(t.LogLevel||(t.LogLevel={}))},2906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2907),o=n(2908),a=n(1447),i=(0,r.default)().split("."),c=i[0],l=i[1],u=function(){var e={};switch(l){case a.FRAMEWORK.VUE:var t=weex.config.env;e.platform=t.platform,a.RUNTIME.WEEX===c&&(e.appVersion=t.appVersion,e.appName=t.appName);break;case a.FRAMEWORK.RAX:a.RUNTIME.WEEX===c&&(e.platform=navigator.platform,e.appName=navigator.appName,e.appVersion=navigator.appVersion);break;case a.FRAMEWORK.UNKNOWN:a.RUNTIME.WEB===c&&(e.platform=a.RUNTIME.WEB),a.RUNTIME.UNKNOWN===c&&(e.platform=a.RUNTIME.UNKNOWN)}return e}(),s=(0,o.default)(c,l,u);t.default=s},2907:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=0,o=!0;r<n;r++)try{if(!(e[r]in t)){o=!1;break}}catch(e){o=!1;break}return o}Object.defineProperty(t,"__esModule",{value:!0});var o="undefined"!=typeof window,a="undefined"!=typeof weex,i="undefined"!=typeof callNative,c=["__weex_config__","__weex_options__","__weex_require__"],l=["localStorage","location","navigator","XMLHttpRequest"],u=["config","requireModule","document"];t.default=function(){return o&&a?r(u,weex)?"Web.Vue":"Web.Unknown":!o&&a?r(u,weex)?"Weex.Vue":"Weex.Unknown":o&&i&&!a?r(c,window)?"Weex.Rax":"Weex.Unknown":o&&r(l,window)?"Web.Unknown":"Unknown.Unknown"}},2908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1447);t.default=function(e,t,n){var o="Web"===n.platform,a="iOS"===n.platform,i="android"===n.platform,c=i||a,l=o?window.navigator.userAgent.toLowerCase():"",u=function(){var e={};if(o){var t=window.name;try{var n=JSON.parse(t);e.containerId=n.containerId,e.version=n.hostVersion,e.language=n.language||"*"}catch(e){}}return e}(),s=c?"DingTalk"===n.appName||"com.alibaba.android.rimet"===n.appName:l.indexOf("dingtalk")>-1||!!u.containerId,d=function(){if(o){if(u.version)return u.version;var e=l.match(/aliapp\(\w+\/([a-zA-Z0-9.-]+)\)/);return null===e&&(e=l.match(/dingtalk\/([a-zA-Z0-9.-]+)/)),e&&e[1]||"Unknown"}return n.appVersion}(),f=!!u.containerId,p=/iphone|ipod|ios/.test(l),m=/ipad/.test(l),h=l.indexOf("android")>-1,v=l.indexOf("mac")>-1&&f,y=l.indexOf("win")>-1&&f,b=!v&&!y&&f;return{isDingTalk:s,isWebiOS:p,isWebAndroid:h,isWeexiOS:a,isWeexAndroid:i,isDingTalkPCMac:v,isDingTalkPCWeb:b,isDingTalkPCWindows:y,isDingTalkPC:f,runtime:e,framework:t,platform:s?p||a?r.PLATFORM.IOS:h||i?r.PLATFORM.ANDROID:m?r.PLATFORM.IPAD:v?r.PLATFORM.MAC:y?r.PLATFORM.WINDOWS:b?r.PLATFORM.BROWSER:r.PLATFORM.UNKNOWN:r.PLATFORM.UNKNOWN,version:d,isWeex:c}}},2909:function(e,t,n){"use strict";function r(e){return(e="00"+e).substring(e.length-2,e.length)}var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;t.log=function(e){console.log.apply(console,o(["".concat(r(e.time.getHours()),":").concat(r(e.time.getMinutes()),":").concat(r(e.time.getSeconds()))],e.text,!1))}},2910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2911),n(2913),n(2914)},2911:function(e,t,n){"function"!=typeof Promise&&n(2912)},2912:function(e,t,n){(function(e,t){var n;n=function(){"use strict";var n=setTimeout;function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}i(t.promise,r)}else(1===e._state?i:c)(t.promise,e._value)}))):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void s((r=n,a=t,function(){r.apply(a,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}var r,a}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function s(e,t){var n=!1;try{e((function(e){n||(n=!0,i(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new u(e,t,n)),n},o.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},o.all=function(e){return new o((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var c=i.then;if("function"==typeof c)return void c.call(i,(function(t){a(e,t)}),n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])}))},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();d.Promise||(d.Promise=o)},n()}).call(this,n(2900).setImmediate,n(92))},2913:function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0})},2914:function(e,t){Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n})},2915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.language=t.compareVersion=t.other=t.pc=t.android=t.ios=void 0;var r=n(799),o=(0,r.getENV)();t.ios=o.platform===r.ENV_ENUM.ios,t.android=o.platform===r.ENV_ENUM.android,t.pc=o.platform===r.ENV_ENUM.pc,t.other=o.platform===r.ENV_ENUM.notInDingTalk;t.compareVersion=function(e,t,n){function r(e){return parseInt(e,10)||0}if("string"!=typeof e||"string"!=typeof t)return!1;for(var o,a,i=e.split("-")[0].split(".").map(r),c=t.split("-")[0].split(".").map(r);o===a&&c.length>0;)o=i.shift(),a=c.shift();return n?(a||0)>=(o||0):(a||0)>(o||0)},t.language=o.language,t.version=o.version},2916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2917),n(1448),n(1452)},2917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n(799),a=n(2918),i=n(1340),c=n(961),l=n(2919);r.ddSdk.setPlatform({platform:o.ENV_ENUM.pc,bridgeInit:function(){return(0,o.getENV)().appType===c.APP_TYPE.MINI_APP?Promise.resolve(i.default):(0,a.h5PcBridgeInit)().then((function(){return a.default}))},authMethod:"config",authParamsDeal:function(e){var t=Object.assign({},e);return t.url=window.location.href.split("#")[0],t},event:{on:function(e,t){if((0,o.getENV)().appType===c.APP_TYPE.WEB)return(0,l.on)(e,t)},off:function(e,t){if((0,o.getENV)().appType===c.APP_TYPE.WEB)return(0,l.off)(e,t)}}})},2918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h5PcBridgeInit=void 0;t.h5PcBridgeInit=function(){return Promise.resolve(n(1224))};t.default=function(e,t){return new Promise((function(r,o){return n(1224).invokeAPI(e,t).result.then((function(e){return"function"==typeof t.onSuccess&&t.onSuccess.call(null,e),r(e)}),(function(e){return"function"==typeof t.onFail&&t.onFail.call(null,e),o(e)}))}))}},2919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.off=t.on=void 0;t.on=function(e,t){n(1224).addEventListener(e,t)};t.off=function(e,t){n(1224).removeEventListener(e,t)}},2920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h5AndroidbridgeInit=void 0;var r;t.h5AndroidbridgeInit=function(){return r||(r=new Promise((function(e,t){var n=function(){try{window.WebViewJavascriptBridgeAndroid=window.nuva&&window.nuva.require(),e({})}catch(e){t(e)}};window.nuva&&(void 0===window.nuva.isReady||window.nuva.isReady)?n():(document.addEventListener("runtimeready",(function(){n()}),!1),document.addEventListener("runtimefailed",(function(e){var n=e&&e.detail||{errorCode:"2",errorMessage:"unknown nuvajs bootstrap error"};t(n)}),!1))}))),r};t.default=function(e,n){return r||(r=(0,t.h5AndroidbridgeInit)()),r.then((function(){return new Promise((function(t,r){var o=e.split("."),a=o.pop()||"",i=o.join(".");"function"==typeof window.WebViewJavascriptBridgeAndroid&&window.WebViewJavascriptBridgeAndroid((function(e){"function"==typeof n.onSuccess&&n.onSuccess(e),t(e)}),(function(e){"function"==typeof n.onFail&&n.onFail(e),r(e)}),i,a,n)}))}))}},2921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h5IosBridgeInit=void 0;var r;t.h5IosBridgeInit=function(){return r||(r=new Promise((function(e,t){if("undefined"!=typeof WebViewJavascriptBridge){try{WebViewJavascriptBridge.init((function(e,t){}))}catch(e){return t()}return e({})}document.addEventListener("WebViewJavascriptBridgeReady",(function(){if("undefined"==typeof WebViewJavascriptBridge)return t();try{WebViewJavascriptBridge.init((function(e,t){}))}catch(e){return t()}return e({})}),!1)}))),r};t.default=function(e,n){return r||(r=(0,t.h5IosBridgeInit)()),r.then((function(){var t=Object.assign({},n);return new Promise((function(n,r){if(!0===t.watch){var o=t.onSuccess;delete t.onSuccess,"undefined"!=typeof WebViewJavascriptBridge&&WebViewJavascriptBridge.registerHandler(e,(function(e,t){"function"==typeof o&&o.call(null,e),t&&t({errorCode:"0",errorMessage:"success"})}))}void 0!==window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler(e,Object.assign({},t),(function(e){var o=e||{};"0"===o.errorCode?("function"==typeof t.onSuccess&&t.onSuccess.call(null,o.result),n(o.result)):("-1"===o.errorCode&&"function"==typeof t.onCancel?t.onCancel.call(null,o,o.errorCode):"function"==typeof t.onFail&&t.onFail.call(null,o,o.errorCode),r(o))}))}))}))}},2922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiObj=void 0;var r=n(2923),o=n(2924),a=n(2925),i=n(2926),c=n(2927),l=n(2928),u=n(2929),s=n(2930),d=n(2931),f=n(2932),p=n(2933),m=n(2934),h=n(2935),v=n(2936),y=n(2937),b=n(2938),g=n(2939),_=n(2940),E=n(2941),w=n(2942),O=n(2943),k=n(2944),S=n(2945),N=n(2946),x=n(2947),A=n(2948),P=n(2949),C=n(2950),j=n(2951),T=n(2952),I=n(2953),M=n(2954),L=n(2955),R=n(2956),D=n(2957),U=n(2958),B=n(2959),z=n(2960),F=n(2961),V=n(2962),G=n(2963),Y=n(2964),$=n(2965),q=n(2966),W=n(2967),H=n(2968),K=n(2969),Z=n(2970),Q=n(2971),X=n(2972),J=n(2973),ee=n(2974),te=n(2975),ne=n(2976),re=n(2977),oe=n(2978),ae=n(2979),ie=n(2980),ce=n(2981),le=n(2982),ue=n(2983),se=n(2984),de=n(2985),fe=n(2986),pe=n(2987),me=n(2988),he=n(2989),ve=n(2990),ye=n(2991),be=n(2992),ge=n(2993),_e=n(2994),Ee=n(2995),we=n(2996),Oe=n(2997),ke=n(2998),Se=n(2999),Ne=n(3e3),xe=n(3001),Ae=n(3002),Pe=n(3003),Ce=n(3004),je=n(3005),Te=n(3006),Ie=n(3007),Me=n(3008),Le=n(3009),Re=n(3010),De=n(3011),Ue=n(3012),Be=n(3013),ze=n(3014),Fe=n(3015),Ve=n(3016),Ge=n(3017),Ye=n(3018),$e=n(3019),qe=n(3020),We=n(3021),He=n(3022),Ke=n(3023),Ze=n(3024),Qe=n(3025),Xe=n(3026),Je=n(3027),et=n(3028),tt=n(3029),nt=n(3030),rt=n(3031),ot=n(3032),at=n(3033),it=n(3034),ct=n(3035),lt=n(3036),ut=n(3037),st=n(3038),dt=n(3039),ft=n(3040),pt=n(3041),mt=n(3042),ht=n(3043),vt=n(3044),yt=n(3045),bt=n(3046),gt=n(3047),_t=n(3048),Et=n(3049),wt=n(3050),Ot=n(3051),kt=n(3052),St=n(3053),Nt=n(3054),xt=n(3055),At=n(3056),Pt=n(3057),Ct=n(3058),jt=n(3059),Tt=n(3060),It=n(3061),Mt=n(3062),Lt=n(3063),Rt=n(3064),Dt=n(3065),Ut=n(3066),Bt=n(3067),zt=n(3068),Ft=n(3069),Vt=n(3070),Gt=n(3071),Yt=n(3072),$t=n(3073),qt=n(3074),Wt=n(3075),Ht=n(3076),Kt=n(3077),Zt=n(3078),Qt=n(3079),Xt=n(3080),Jt=n(3081),en=n(3082),tn=n(3083),nn=n(3084),rn=n(3085),on=n(3086),an=n(3087),cn=n(3088),ln=n(3089),un=n(3090),sn=n(3091),dn=n(3092),fn=n(3093),pn=n(3094),mn=n(3095),hn=n(3096),vn=n(3097),yn=n(3098),bn=n(3099),gn=n(3100),_n=n(3101),En=n(3102),wn=n(3103),On=n(3104),kn=n(3105),Sn=n(3106),Nn=n(3107),xn=n(3108),An=n(3109),Pn=n(3110),Cn=n(3111),jn=n(3112),Tn=n(3113),In=n(3114),Mn=n(3115),Ln=n(3116),Rn=n(3117),Dn=n(3118),Un=n(3119),Bn=n(3120),zn=n(3121),Fn=n(3122),Vn=n(3123),Gn=n(3124),Yn=n(3125),$n=n(3126),qn=n(3127),Wn=n(3128),Hn=n(3129),Kn=n(3130),Zn=n(3131),Qn=n(3132),Xn=n(3133),Jn=n(3134),er=n(3135),tr=n(3136),nr=n(3137),rr=n(3138),or=n(3139),ar=n(3140);t.apiObj={biz:{ATMBle:{beaconPicker:r.beaconPicker$,detectFace:o.detectFace$,detectFaceFullScreen:a.detectFaceFullScreen$,faceManager:i.faceManager$,punchModePicker:c.punchModePicker$},alipay:{bindAlipay:l.bindAlipay$,openAuth:u.openAuth$,pay:s.pay$},auth:{openAccountPwdLoginPage:d.openAccountPwdLoginPage$,requestAuthInfo:f.requestAuthInfo$},calendar:{chooseDateTime:p.chooseDateTime$,chooseHalfDay:m.chooseHalfDay$,chooseInterval:h.chooseInterval$,chooseOneDay:v.chooseOneDay$},chat:{chooseConversationByCorpId:y.chooseConversationByCorpId$,collectSticker:b.collectSticker$,createSceneGroup:g.createSceneGroup$,getRealmCid:_.getRealmCid$,locationChatMessage:E.locationChatMessage$,openSingleChat:w.openSingleChat$,pickConversation:O.pickConversation$,sendEmotion:k.sendEmotion$,toConversation:S.toConversation$,toConversationByOpenConversationId:N.toConversationByOpenConversationId$},clipboardData:{setData:x.setData$},conference:{createCloudCall:A.createCloudCall$,getCloudCallInfo:P.getCloudCallInfo$,getCloudCallList:C.getCloudCallList$,videoConfCall:j.videoConfCall$},contact:{choose:T.choose$,chooseMobileContacts:I.chooseMobileContacts$,complexPicker:M.complexPicker$,createGroup:L.createGroup$,departmentsPicker:R.departmentsPicker$,externalComplexPicker:D.externalComplexPicker$,externalEditForm:U.externalEditForm$,rolesPicker:B.rolesPicker$,setRule:z.setRule$},cspace:{chooseSpaceDir:F.chooseSpaceDir$,delete:V.delete$,preview:G.preview$,saveFile:Y.saveFile$},customContact:{choose:$.choose$,multipleChoose:q.multipleChoose$},ding:{create:W.create$,post:H.post$},edu:{finishMiniCourseByRecordId:K.finishMiniCourseByRecordId$,getMiniCourseDraftList:Z.getMiniCourseDraftList$,joinClassroom:Q.joinClassroom$,makeMiniCourse:X.makeMiniCourse$,newMsgNotificationStatus:J.newMsgNotificationStatus$,startAuth:ee.startAuth$,tokenFaceImg:te.tokenFaceImg$},event:{notifyWeex:ne.notifyWeex$},intent:{fetchData:re.fetchData$},iot:{bind:oe.bind$,bindMeetingRoom:ae.bindMeetingRoom$,getDeviceProperties:ie.getDeviceProperties$,invokeThingService:ce.invokeThingService$,queryMeetingRoomList:le.queryMeetingRoomList$,setDeviceProperties:ue.setDeviceProperties$,unbind:se.unbind$},live:{startClassRoom:de.startClassRoom$,startUnifiedLive:fe.startUnifiedLive$},map:{locate:pe.locate$,search:me.search$,view:he.view$},media:{compressVideo:ve.compressVideo$},microApp:{openApp:ye.openApp$},navigation:{close:be.close$,goBack:ge.goBack$,hideBar:_e.hideBar$,navigateToMiniProgram:Ee.navigateToMiniProgram$,quit:we.quit$,replace:Oe.replace$,setIcon:ke.setIcon$,setLeft:Se.setLeft$,setMenu:Ne.setMenu$,setRight:xe.setRight$,setTitle:Ae.setTitle$},pbp:{componentPunchFromPartner:Pe.componentPunchFromPartner$,startMatchRuleFromPartner:Ce.startMatchRuleFromPartner$,stopMatchRuleFromPartner:je.stopMatchRuleFromPartner$},realm:{getRealtimeTracingStatus:Te.getRealtimeTracingStatus$,getUserExclusiveInfo:Ie.getUserExclusiveInfo$,startRealtimeTracing:Me.startRealtimeTracing$,stopRealtimeTracing:Le.stopRealtimeTracing$,subscribe:Re.subscribe$,unsubscribe:De.unsubscribe$},resource:{getInfo:Ue.getInfo$,reportDebugMessage:Be.reportDebugMessage$},shortCut:{addShortCut:ze.addShortCut$},store:{closeUnpayOrder:Fe.closeUnpayOrder$,createOrder:Ve.createOrder$,getPayUrl:Ge.getPayUrl$,inquiry:Ye.inquiry$},tabwindow:{isTab:$e.isTab$},telephone:{call:qe.call$,checkBizCall:We.checkBizCall$,quickCallList:He.quickCallList$,showCallMenu:Ke.showCallMenu$},user:{checkPassword:Ze.checkPassword$,get:Qe.get$},util:{callComponent:Xe.callComponent$,chooseImage:Je.chooseImage$,chosen:et.chosen$,clearWebStoreCache:tt.clearWebStoreCache$,closePreviewImage:nt.closePreviewImage$,compressImage:rt.compressImage$,datepicker:ot.datepicker$,datetimepicker:at.datetimepicker$,decrypt:it.decrypt$,downloadFile:ct.downloadFile$,encrypt:lt.encrypt$,getPerfInfo:ut.getPerfInfo$,invokeWorkbench:st.invokeWorkbench$,isEnableGPUAcceleration:dt.isEnableGPUAcceleration$,isLocalFileExist:ft.isLocalFileExist$,multiSelect:pt.multiSelect$,open:mt.open$,openLink:ht.openLink$,openLocalFile:vt.openLocalFile$,openModal:yt.openModal$,openSlidePanel:bt.openSlidePanel$,presentWindow:gt.presentWindow$,previewImage:_t.previewImage$,previewVideo:Et.previewVideo$,saveImage:wt.saveImage$,scan:Ot.scan$,scanCard:kt.scanCard$,setGPUAcceleration:St.setGPUAcceleration$,setScreenBrightnessAndKeepOn:Nt.setScreenBrightnessAndKeepOn$,setScreenKeepOn:xt.setScreenKeepOn$,share:At.share$,shareImage:Pt.shareImage$,startDocSign:Ct.startDocSign$,systemShare:jt.systemShare$,timepicker:Tt.timepicker$,uploadAttachment:It.uploadAttachment$,uploadFile:Mt.uploadFile$,uploadImage:Lt.uploadImage$,uploadImageFromCamera:Rt.uploadImageFromCamera$,ut:Dt.ut$},verify:{openBindIDCard:Ut.openBindIDCard$,startAuth:Bt.startAuth$},watermarkCamera:{getWatermarkInfo:zt.getWatermarkInfo$,setWatermarkInfo:Ft.setWatermarkInfo$}},channel:{permission:{requestAuthCode:Vt.requestAuthCode$}},device:{accelerometer:{clearShake:Gt.clearShake$,watchShake:Yt.watchShake$},audio:{download:$t.download$,onPlayEnd:qt.onPlayEnd$,onRecordEnd:Wt.onRecordEnd$,pause:Ht.pause$,play:Kt.play$,resume:Zt.resume$,startRecord:Qt.startRecord$,stop:Xt.stop$,stopRecord:Jt.stopRecord$,translateVoice:en.translateVoice$},base:{getInterface:tn.getInterface$,getPhoneInfo:nn.getPhoneInfo$,getUUID:rn.getUUID$,getWifiStatus:on.getWifiStatus$,openSystemSetting:an.openSystemSetting$},connection:{getNetworkType:cn.getNetworkType$},geolocation:{checkPermission:ln.checkPermission$,get:un.get$,start:sn.start$,status:dn.status$,stop:fn.stop$},launcher:{checkInstalledApps:pn.checkInstalledApps$,launchApp:mn.launchApp$},nfc:{nfcRead:hn.nfcRead$,nfcStop:vn.nfcStop$,nfcWrite:yn.nfcWrite$},notification:{actionSheet:bn.actionSheet$,alert:gn.alert$,confirm:_n.confirm$,extendModal:En.extendModal$,hidePreloader:wn.hidePreloader$,modal:On.modal$,prompt:kn.prompt$,showPreloader:Sn.showPreloader$,toast:Nn.toast$,vibrate:xn.vibrate$},screen:{insetAdjust:An.insetAdjust$,resetView:Pn.resetView$,rotateView:Cn.rotateView$}},media:{voiceRecorder:{keepAlive:jn.keepAlive$,pause:Tn.pause$,resume:In.resume$,start:Mn.start$,stop:Ln.stop$}},net:{bjGovApn:{loginGovNet:Rn.loginGovNet$}},runtime:{message:{fetch:Dn.fetch$,post:Un.post$},monitor:{getLoadTime:Bn.getLoadTime$},permission:{requestAuthCode:zn.requestAuthCode$,requestOperateAuthCode:Fn.requestOperateAuthCode$}},ui:{input:{plain:Vn.plain$},multitask:{addToFloat:Gn.addToFloat$,removeFromFloat:Yn.removeFromFloat$},nav:{close:$n.close$,getCurrentId:qn.getCurrentId$,go:Wn.go$,preload:Hn.preload$,recycle:Kn.recycle$},progressBar:{setColors:Zn.setColors$},pullToRefresh:{disable:Qn.disable$,enable:Xn.enable$,stop:Jn.stop$},webViewBounce:{disable:er.disable$,enable:tr.enable$}},util:{domainStorage:{getItem:nr.getItem$,removeItem:rr.removeItem$,setItem:or.setItem$},openTemporary:{getData:ar.getData$}}}},2923:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.beaconPicker$=void 0;var a=n(25),i="biz.ATMBle.beaconPicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.0.7"},o[a.ENV_ENUM.android]={vs:"5.0.7"},o)),t.beaconPicker$=r,t.default=r},2924:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.detectFace$=void 0;var a=n(25),i="biz.ATMBle.detectFace";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.18"},o[a.ENV_ENUM.android]={vs:"5.1.18"},o)),t.detectFace$=r,t.default=r},2925:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.detectFaceFullScreen$=void 0;var a=n(25),i="biz.ATMBle.detectFaceFullScreen";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.18"},o[a.ENV_ENUM.android]={vs:"5.1.18"},o)),t.detectFaceFullScreen$=r,t.default=r},2926:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.faceManager$=void 0;var a=n(25),i="biz.ATMBle.faceManager";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.0.7"},o[a.ENV_ENUM.android]={vs:"5.0.7"},o)),t.faceManager$=r,t.default=r},2927:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.punchModePicker$=void 0;var a=n(25),i="biz.ATMBle.punchModePicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.0.7"},o[a.ENV_ENUM.android]={vs:"5.0.7"},o)),t.punchModePicker$=r,t.default=r},2928:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.bindAlipay$=void 0;var a=n(25),i="biz.alipay.bindAlipay";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.15"},o[a.ENV_ENUM.android]={vs:"6.3.15"},o)),t.bindAlipay$=r,t.default=r},2929:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openAuth$=void 0;var a=n(25),i="biz.alipay.openAuth";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.8"},o[a.ENV_ENUM.android]={vs:"5.1.8"},o)),t.openAuth$=r,t.default=r},2930:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.pay$=void 0;var a=n(25),i="biz.alipay.pay";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.pay$=r,t.default=r},2931:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openAccountPwdLoginPage$=void 0;var a=n(25),i="biz.auth.openAccountPwdLoginPage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.0"},o[a.ENV_ENUM.android]={vs:"6.3.0"},o)),t.openAccountPwdLoginPage$=r,t.default=r},2932:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAuthInfo$=void 0;var a=n(25),i="biz.auth.requestAuthInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.19"},o[a.ENV_ENUM.android]={vs:"5.1.19"},o)),t.requestAuthInfo$=r,t.default=r},2933:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseDateTime$=void 0;var a=n(25),i=n(183),c="biz.calendar.chooseDateTime";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o[a.ENV_ENUM.android]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o)),t.chooseDateTime$=r,t.default=r},2934:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseHalfDay$=void 0;var a=n(25),i=n(183),c="biz.calendar.chooseHalfDay";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o[a.ENV_ENUM.android]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o)),t.chooseHalfDay$=r,t.default=r},2935:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseInterval$=void 0;var a=n(25),i=n(183),c="biz.calendar.chooseInterval";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o[a.ENV_ENUM.android]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o)),t.chooseInterval$=r,t.default=r},2936:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseOneDay$=void 0;var a=n(25),i=n(183),c="biz.calendar.chooseOneDay";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o[a.ENV_ENUM.android]={vs:"3.5.0",paramsDeal:i.addDefaultCorpIdParamsDeal},o)),t.chooseOneDay$=r,t.default=r},2937:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseConversationByCorpId$=void 0;var a=n(25),i=n(183),c="biz.chat.chooseConversationByCorpId",l=(0,i.genDefaultParamsDealFn)({max:50});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.6.0",paramsDeal:l},o[a.ENV_ENUM.pc]={vs:"4.7.11",paramsDeal:l},o)),t.chooseConversationByCorpId$=r,t.default=r},2938:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.collectSticker$=void 0;var a=n(25),i="biz.chat.collectSticker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.25"},o[a.ENV_ENUM.android]={vs:"4.6.25"},o)),t.collectSticker$=r,t.default=r},2939:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.createSceneGroup$=void 0;var a=n(25),i="biz.chat.createSceneGroup";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.7.17"},o[a.ENV_ENUM.android]={vs:"4.7.17"},o[a.ENV_ENUM.pc]={vs:"4.7.17"},o)),t.createSceneGroup$=r,t.default=r},2940:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getRealmCid$=void 0;var a=n(25),i="biz.chat.getRealmCid";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.7.12"},o[a.ENV_ENUM.android]={vs:"4.7.12"},o[a.ENV_ENUM.pc]={vs:"4.7.12"},o)),t.getRealmCid$=r,t.default=r},2941:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.locationChatMessage$=void 0;var a=n(25),i="biz.chat.locationChatMessage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.7.6"},o[a.ENV_ENUM.android]={vs:"2.7.6"},o)),t.locationChatMessage$=r,t.default=r},2942:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openSingleChat$=void 0;var a=n(25),i="biz.chat.openSingleChat";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.4.10"},o[a.ENV_ENUM.android]={vs:"3.4.10"},o)),t.openSingleChat$=r,t.default=r},2943:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.pickConversation$=void 0;var a=n(25),i="biz.chat.pickConversation";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.2"},o[a.ENV_ENUM.android]={vs:"2.4.2"},o[a.ENV_ENUM.pc]={vs:"4.7.9"},o)),t.pickConversation$=r,t.default=r},2944:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.sendEmotion$=void 0;var a=n(25),i="biz.chat.sendEmotion";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.12"},o[a.ENV_ENUM.android]={vs:"4.6.12"},o)),t.sendEmotion$=r,t.default=r},2945:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.toConversation$=void 0;var a=n(25),i="biz.chat.toConversation";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.toConversation$=r,t.default=r},2946:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.toConversationByOpenConversationId$=void 0;var a=n(25),i="biz.chat.toConversationByOpenConversationId";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.30"},o[a.ENV_ENUM.android]={vs:"5.1.30"},o[a.ENV_ENUM.pc]={vs:"5.1.33"},o)),t.toConversationByOpenConversationId$=r,t.default=r},2947:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setData$=void 0;var a=n(25),i="biz.clipboardData.setData";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.7.0"},o[a.ENV_ENUM.android]={vs:"2.7.0"},o[a.ENV_ENUM.pc]={vs:"4.6.1"},o)),t.setData$=r,t.default=r},2948:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.createCloudCall$=void 0;var a=n(25),i="biz.conference.createCloudCall";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.0"},o[a.ENV_ENUM.android]={vs:"6.0.0"},o[a.ENV_ENUM.pc]={vs:"6.0.9"},o)),t.createCloudCall$=r,t.default=r},2949:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudCallInfo$=void 0;var a=n(25),i="biz.conference.getCloudCallInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.0"},o[a.ENV_ENUM.android]={vs:"6.0.0"},o[a.ENV_ENUM.pc]={vs:"6.0.9"},o)),t.getCloudCallInfo$=r,t.default=r},2950:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudCallList$=void 0;var a=n(25),i="biz.conference.getCloudCallList";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.0"},o[a.ENV_ENUM.android]={vs:"6.0.0"},o[a.ENV_ENUM.pc]={vs:"6.0.9"},o)),t.getCloudCallList$=r,t.default=r},2951:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.videoConfCall$=void 0;var a=n(25),i="biz.conference.videoConfCall";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.0.8"},o[a.ENV_ENUM.android]={vs:"5.0.8"},o[a.ENV_ENUM.pc]={vs:"5.1.28"},o)),t.videoConfCall$=r,t.default=r},2952:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.choose$=void 0;var a=n(25),i=n(183),c="biz.contact.choose",l=(0,i.genDefaultParamsDealFn)({multiple:!0,startWithDepartmentId:0,users:[]});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.choose$=r,t.default=r},2953:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseMobileContacts$=void 0;var a=n(25),i="biz.contact.chooseMobileContacts";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.1"},o[a.ENV_ENUM.android]={vs:"3.1"},o)),t.chooseMobileContacts$=r,t.default=r},2954:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.complexPicker$=void 0;var a=n(25),i="biz.contact.complexPicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.9.0"},o[a.ENV_ENUM.android]={vs:"2.9.0"},o[a.ENV_ENUM.pc]={vs:"4.3.5"},o)),t.complexPicker$=r,t.default=r},2955:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup$=void 0;var a=n(25),i="biz.contact.createGroup";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o[a.ENV_ENUM.pc]={vs:"4.6.1"},o)),t.createGroup$=r,t.default=r},2956:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.departmentsPicker$=void 0;var a=n(25),i="biz.contact.departmentsPicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"4.2.5"},o[a.ENV_ENUM.ios]={vs:"3.0"},o[a.ENV_ENUM.android]={vs:"3.0"},o)),t.departmentsPicker$=r,t.default=r},2957:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.externalComplexPicker$=void 0;var a=n(25),i="biz.contact.externalComplexPicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"3.0"},o[a.ENV_ENUM.android]={vs:"3.0"},o)),t.externalComplexPicker$=r,t.default=r},2958:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.externalEditForm$=void 0;var a=n(25),i="biz.contact.externalEditForm";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.0"},o[a.ENV_ENUM.android]={vs:"3.0"},o)),t.externalEditForm$=r,t.default=r},2959:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.rolesPicker$=void 0;var a=n(25),i="biz.contact.rolesPicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.16"},o[a.ENV_ENUM.android]={vs:"6.3.16"},o)),t.rolesPicker$=r,t.default=r},2960:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setRule$=void 0;var a=n(25),i="biz.contact.setRule";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.15"},o[a.ENV_ENUM.android]={vs:"2.15"},o)),t.setRule$=r,t.default=r},2961:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseSpaceDir$=void 0;var a=n(25),i="biz.cspace.chooseSpaceDir";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.5.6"},o[a.ENV_ENUM.android]={vs:"3.5.6"},o[a.ENV_ENUM.pc]={vs:"5.1.27"},o)),t.chooseSpaceDir$=r,t.default=r},2962:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.delete$=void 0;var a=n(25),i="biz.cspace.delete";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.21"},o[a.ENV_ENUM.android]={vs:"4.5.21"},o[a.ENV_ENUM.pc]={vs:"4.5.21"},o)),t.delete$=r,t.default=r},2963:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.preview$=void 0;var a=n(25),i="biz.cspace.preview";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.7.0"},o[a.ENV_ENUM.android]={vs:"2.7.0"},o)),t.preview$=r,t.default=r},2964:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.saveFile$=void 0;var a=n(25),i="biz.cspace.saveFile";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.7.6"},o[a.ENV_ENUM.android]={vs:"2.7.6"},o)),t.saveFile$=r,t.default=r},2965:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.choose$=void 0;var a=n(25),i=n(183),c="biz.customContact.choose",l=(0,i.genDefaultParamsDealFn)({isShowCompanyName:!1,max:50});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.5.2",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.5.2",paramsDeal:l},o)),t.choose$=r,t.default=r},2966:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.multipleChoose$=void 0;var a=n(25),i=n(183),c="biz.customContact.multipleChoose",l=(0,i.genDefaultParamsDealFn)({isShowCompanyName:!1,max:50});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.multipleChoose$=r,t.default=r},2967:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.create$=void 0;var a=n(25),i="biz.ding.create";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.5.1",resultDeal:function(e){return""===e?e={dingCreateResult:!1}:"object"==typeof e&&(e.dingCreateResult=!!e.dingCreateResult),e}},o[a.ENV_ENUM.android]={vs:"3.5.1"},o[a.ENV_ENUM.pc]={vs:"4.5.9"},o)),t.create$=r,t.default=r},2968:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.post$=void 0;var a=n(25),i="biz.ding.post";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.post$=r,t.default=r},2969:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.finishMiniCourseByRecordId$=void 0;var a=n(25),i="biz.edu.finishMiniCourseByRecordId";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.15"},o[a.ENV_ENUM.android]={vs:"6.0.15"},o)),t.finishMiniCourseByRecordId$=r,t.default=r},2970:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getMiniCourseDraftList$=void 0;var a=n(25),i="biz.edu.getMiniCourseDraftList";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.15"},o[a.ENV_ENUM.android]={vs:"6.0.15"},o)),t.getMiniCourseDraftList$=r,t.default=r},2971:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.joinClassroom$=void 0;var a=n(25),i="biz.edu.joinClassroom";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.15"},o[a.ENV_ENUM.android]={vs:"6.0.15"},o[a.ENV_ENUM.pc]={vs:"6.0.15"},o)),t.joinClassroom$=r,t.default=r},2972:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.makeMiniCourse$=void 0;var a=n(25),i="biz.edu.makeMiniCourse";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.15"},o[a.ENV_ENUM.android]={vs:"6.0.15"},o)),t.makeMiniCourse$=r,t.default=r},2973:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.newMsgNotificationStatus$=void 0;var a=n(25),i="biz.edu.newMsgNotificationStatus";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.20"},o[a.ENV_ENUM.android]={vs:"6.3.20"},o)),t.newMsgNotificationStatus$=r,t.default=r},2974:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startAuth$=void 0;var a=n(25),i="biz.edu.startAuth";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.20"},o[a.ENV_ENUM.android]={vs:"6.3.20"},o)),t.startAuth$=r,t.default=r},2975:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.tokenFaceImg$=void 0;var a=n(25),i="biz.edu.tokenFaceImg";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.20"},o[a.ENV_ENUM.android]={vs:"6.3.20"},o)),t.tokenFaceImg$=r,t.default=r},2976:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.notifyWeex$=void 0;var a=n(25),i="biz.event.notifyWeex";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.0"},o)),t.notifyWeex$=r,t.default=r},2977:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.fetchData$=void 0;var a=n(25),i="biz.intent.fetchData";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.7.6"},o[a.ENV_ENUM.android]={vs:"2.7.6"},o)),t.fetchData$=r,t.default=r},2978:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.bind$=void 0;var a=n(25),i="biz.iot.bind";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.34"},o[a.ENV_ENUM.android]={vs:"4.6.34"},o)),t.bind$=r,t.default=r},2979:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.bindMeetingRoom$=void 0;var a=n(25),i="biz.iot.bindMeetingRoom";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.34"},o[a.ENV_ENUM.android]={vs:"4.6.34"},o)),t.bindMeetingRoom$=r,t.default=r},2980:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceProperties$=void 0;var a=n(25),i="biz.iot.getDeviceProperties";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.42"},o[a.ENV_ENUM.android]={vs:"4.6.42"},o)),t.getDeviceProperties$=r,t.default=r},2981:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.invokeThingService$=void 0;var a=n(25),i="biz.iot.invokeThingService";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.42"},o[a.ENV_ENUM.android]={vs:"4.6.42"},o)),t.invokeThingService$=r,t.default=r},2982:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.queryMeetingRoomList$=void 0;var a=n(25),i="biz.iot.queryMeetingRoomList";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.34"},o[a.ENV_ENUM.android]={vs:"4.6.34"},o)),t.queryMeetingRoomList$=r,t.default=r},2983:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setDeviceProperties$=void 0;var a=n(25),i="biz.iot.setDeviceProperties";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.42"},o[a.ENV_ENUM.android]={vs:"4.6.42"},o)),t.setDeviceProperties$=r,t.default=r},2984:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.unbind$=void 0;var a=n(25),i="biz.iot.unbind";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.34"},o[a.ENV_ENUM.android]={vs:"4.6.34"},o)),t.unbind$=r,t.default=r},2985:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startClassRoom$=void 0;var a=n(25),i="biz.live.startClassRoom";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"5.1.19"},o)),t.startClassRoom$=r,t.default=r},2986:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startUnifiedLive$=void 0;var a=n(25),i="biz.live.startUnifiedLive";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"5.1.18"},o)),t.startUnifiedLive$=r,t.default=r},2987:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.locate$=void 0;var a=n(25),i="biz.map.locate";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.locate$=r,t.default=r},2988:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.search$=void 0;var a=n(25),i=n(183),c="biz.map.search",l=(0,i.genDefaultParamsDealFn)({scope:500});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.search$=r,t.default=r},2989:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.view$=void 0;var a=n(25),i="biz.map.view";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.view$=r,t.default=r},2990:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.compressVideo$=void 0;var a=n(25),i="biz.media.compressVideo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.37"},o[a.ENV_ENUM.android]={vs:"4.6.37"},o)),t.compressVideo$=r,t.default=r},2991:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openApp$=void 0;var a=n(25),i="biz.microApp.openApp";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.6"},o[a.ENV_ENUM.android]={vs:"4.5.6"},o)),t.openApp$=r,t.default=r},2992:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.close$=void 0;var a=n(25),i="biz.navigation.close";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o[a.ENV_ENUM.pc]={vs:"4.3.5"},o)),t.close$=r,t.default=r},2993:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.goBack$=void 0;var a=n(25),i="biz.navigation.goBack";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.goBack$=r,t.default=r},2994:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.hideBar$=void 0;var a=n(25),i="biz.navigation.hideBar";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.5.6"},o[a.ENV_ENUM.android]={vs:"3.5.6"},o)),t.hideBar$=r,t.default=r},2995:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.navigateToMiniProgram$=void 0;var a=n(25),i="biz.navigation.navigateToMiniProgram";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.31"},o[a.ENV_ENUM.android]={vs:"5.1.31"},o)),t.navigateToMiniProgram$=r,t.default=r},2996:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.quit$=void 0;var a=n(25),i="biz.navigation.quit";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.quit$=r,t.default=r},2997:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.replace$=void 0;var a=n(25),i="biz.navigation.replace";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.4.6"},o[a.ENV_ENUM.android]={vs:"3.4.6"},o)),t.replace$=r,t.default=r},2998:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setIcon$=void 0;var a=n(25),i=n(183),c="biz.navigation.setIcon",l=(0,i.genDefaultParamsDealFn)({watch:!0,showIcon:!0,iconIndex:1});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.setIcon$=r,t.default=r},2999:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setLeft$=void 0;var a=n(25),i=n(183),c="biz.navigation.setLeft",l=(0,i.genDefaultParamsDealFn)({watch:!0,show:!0,control:!1,showIcon:!0,text:""});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.setLeft$=r,t.default=r},30:function(e,t,n){"use strict";n(1495);var r=n(372);n(138);t.a=r.a},3e3:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setMenu$=void 0;var a=n(25),i=n(183),c="biz.navigation.setMenu";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0",paramsDeal:i.addWatchParamsDeal},o[a.ENV_ENUM.android]={vs:"2.6.0",paramsDeal:i.addWatchParamsDeal},o)),t.setMenu$=r,t.default=r},3001:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setRight$=void 0;var a=n(25),i=n(183),c="biz.navigation.setRight",l=(0,i.genDefaultParamsDealFn)({watch:!0,show:!0,control:!1,showIcon:!0,text:""});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.setRight$=r,t.default=r},3002:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setTitle$=void 0;var a=n(25),i="biz.navigation.setTitle";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.setTitle$=r,t.default=r},3003:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.componentPunchFromPartner$=void 0;var a=n(25),i="biz.pbp.componentPunchFromPartner";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.10"},o[a.ENV_ENUM.android]={vs:"5.1.10"},o)),t.componentPunchFromPartner$=r,t.default=r},3004:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startMatchRuleFromPartner$=void 0;var a=n(25),i="biz.pbp.startMatchRuleFromPartner";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.10"},o[a.ENV_ENUM.android]={vs:"5.1.10"},o)),t.startMatchRuleFromPartner$=r,t.default=r},3005:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stopMatchRuleFromPartner$=void 0;var a=n(25),i="biz.pbp.stopMatchRuleFromPartner";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.10"},o[a.ENV_ENUM.android]={vs:"5.1.10"},o)),t.stopMatchRuleFromPartner$=r,t.default=r},3006:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getRealtimeTracingStatus$=void 0;var a=n(25),i="biz.realm.getRealtimeTracingStatus";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"6.0.13"},o)),t.getRealtimeTracingStatus$=r,t.default=r},3007:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getUserExclusiveInfo$=void 0;var a=n(25),i="biz.realm.getUserExclusiveInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.14"},o[a.ENV_ENUM.android]={vs:"6.0.14"},o[a.ENV_ENUM.pc]={vs:"6.0.17"},o)),t.getUserExclusiveInfo$=r,t.default=r},3008:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startRealtimeTracing$=void 0;var a=n(25),i="biz.realm.startRealtimeTracing";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"6.0.13"},o)),t.startRealtimeTracing$=r,t.default=r},3009:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stopRealtimeTracing$=void 0;var a=n(25),i="biz.realm.stopRealtimeTracing";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"6.0.13"},o)),t.stopRealtimeTracing$=r,t.default=r},3010:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe$=void 0;var a=n(25),i="biz.realm.subscribe";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.7.18"},o[a.ENV_ENUM.android]={vs:"4.7.18"},o)),t.subscribe$=r,t.default=r},3011:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribe$=void 0;var a=n(25),i="biz.realm.unsubscribe";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.7.18"},o[a.ENV_ENUM.android]={vs:"4.7.18"},o)),t.unsubscribe$=r,t.default=r},3012:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo$=void 0;var a=n(25),i="biz.resource.getInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.10"},o[a.ENV_ENUM.android]={vs:"6.5.10"},o)),t.getInfo$=r,t.default=r},3013:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.reportDebugMessage$=void 0;var a=n(25),i="biz.resource.reportDebugMessage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.20"},o[a.ENV_ENUM.android]={vs:"6.5.20"},o)),t.reportDebugMessage$=r,t.default=r},3014:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.addShortCut$=void 0;var a=n(25),i="biz.shortCut.addShortCut";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.7.32"},o)),t.addShortCut$=r,t.default=r},3015:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.closeUnpayOrder$=void 0;var a=n(25),i=n(183),c="biz.store.closeUnpayOrder";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.android]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.pc]={vs:"4.5.3",paramsDeal:i.genBizStoreParamsDealFn},o)),t.closeUnpayOrder$=r,t.default=r},3016:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.createOrder$=void 0;var a=n(25),i=n(183),c="biz.store.createOrder";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.android]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.pc]={vs:"4.5.3",paramsDeal:i.genBizStoreParamsDealFn},o)),t.createOrder$=r,t.default=r},3017:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getPayUrl$=void 0;var a=n(25),i=n(183),c="biz.store.getPayUrl";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.android]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.pc]={vs:"4.5.3",paramsDeal:i.genBizStoreParamsDealFn},o)),t.getPayUrl$=r,t.default=r},3018:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.inquiry$=void 0;var a=n(25),i=n(183),c="biz.store.inquiry";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.android]={vs:"4.3.7",paramsDeal:i.genBizStoreParamsDealFn},o[a.ENV_ENUM.pc]={vs:"4.5.3",paramsDeal:i.genBizStoreParamsDealFn},o)),t.inquiry$=r,t.default=r},3019:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.isTab$=void 0;var a=n(25),i="biz.tabwindow.isTab";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"6.5.10"},o)),t.isTab$=r,t.default=r},3020:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.call$=void 0;var a=n(25),i="biz.telephone.call";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.call$=r,t.default=r},3021:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.checkBizCall$=void 0;var a=n(25),i="biz.telephone.checkBizCall";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"4.0.0"},o[a.ENV_ENUM.ios]={vs:"3.5.6"},o[a.ENV_ENUM.android]={vs:"3.5.6"},o)),t.checkBizCall$=r,t.default=r},3022:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.quickCallList$=void 0;var a=n(25),i="biz.telephone.quickCallList";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.5.6"},o[a.ENV_ENUM.ios]={vs:"3.5.6"},o[a.ENV_ENUM.android]={vs:"3.5.6"},o)),t.quickCallList$=r,t.default=r},3023:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.showCallMenu$=void 0;var a=n(25),i="biz.telephone.showCallMenu";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.showCallMenu$=r,t.default=r},3024:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.checkPassword$=void 0;var a=n(25),i="biz.user.checkPassword";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.8"},o[a.ENV_ENUM.android]={vs:"4.5.8"},o)),t.checkPassword$=r,t.default=r},3025:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.get$=void 0;var a=n(25),i="biz.user.get";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.get$=r,t.default=r},3026:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.callComponent$=void 0;var a=n(25),i="biz.util.callComponent";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.35"},o[a.ENV_ENUM.android]={vs:"6.3.35"},o[a.ENV_ENUM.pc]={vs:"6.3.35"},o)),t.callComponent$=r,t.default=r},3027:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chooseImage$=void 0;var a=n(25),i="biz.util.chooseImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.1"},o[a.ENV_ENUM.android]={vs:"5.1.1"},o)),t.chooseImage$=r,t.default=r},3028:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.chosen$=void 0;var a=n(25),i="biz.util.chosen";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.chosen$=r,t.default=r},3029:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.clearWebStoreCache$=void 0;var a=n(25),i="biz.util.clearWebStoreCache";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"6.0.22"},o)),t.clearWebStoreCache$=r,t.default=r},3030:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.closePreviewImage$=void 0;var a=n(25),i="biz.util.closePreviewImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.19"},o[a.ENV_ENUM.android]={vs:"6.0.17"},o)),t.closePreviewImage$=r,t.default=r},3031:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.compressImage$=void 0;var a=n(25),i="biz.util.compressImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.1"},o[a.ENV_ENUM.android]={vs:"5.1.1"},o)),t.compressImage$=r,t.default=r},3032:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.datepicker$=void 0;var a=n(25),i="biz.util.datepicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.datepicker$=r,t.default=r},3033:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.datetimepicker$=void 0;var a=n(25),i="biz.util.datetimepicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.datetimepicker$=r,t.default=r},3034:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt$=void 0;var a=n(25),i="biz.util.decrypt";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.9.1"},o[a.ENV_ENUM.android]={vs:"2.9.1"},o)),t.decrypt$=r,t.default=r},3035:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFile$=void 0;var a=n(25),i="biz.util.downloadFile";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.downloadFile$=r,t.default=r},3036:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.encrypt$=void 0;var a=n(25),i="biz.util.encrypt";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.9.1"},o[a.ENV_ENUM.android]={vs:"2.9.1"},o)),t.encrypt$=r,t.default=r},3037:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getPerfInfo$=void 0;var a=n(25),i="biz.util.getPerfInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.14"},o[a.ENV_ENUM.android]={vs:"5.1.14"},o)),t.getPerfInfo$=r,t.default=r},3038:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.invokeWorkbench$=void 0;var a=n(25),i="biz.util.invokeWorkbench";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"6.0.8"},o)),t.invokeWorkbench$=r,t.default=r},3039:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.isEnableGPUAcceleration$=void 0;var a=n(25),i="biz.util.isEnableGPUAcceleration";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"6.0.22"},o)),t.isEnableGPUAcceleration$=r,t.default=r},3040:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalFileExist$=void 0;var a=n(25),i="biz.util.isLocalFileExist";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.isLocalFileExist$=r,t.default=r},3041:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.multiSelect$=void 0;var a=n(25),i="biz.util.multiSelect";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.0.0"},o[a.ENV_ENUM.android]={vs:"3.0.0"},o)),t.multiSelect$=r,t.default=r},3042:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.open$=void 0;var a=n(25),i="biz.util.open";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.7.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.open$=r,t.default=r},3043:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openLink$=void 0;var a=n(25),i=n(183),c="biz.util.openLink",l=(0,i.genDefaultParamsDealFn)({credible:!0,showMenuBar:!0});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.7.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.openLink$=r,t.default=r},3044:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openLocalFile$=void 0;var a=n(25),i="biz.util.openLocalFile";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.openLocalFile$=r,t.default=r},3045:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openModal$=void 0;var a=n(25),i="biz.util.openModal";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.openModal$=r,t.default=r},3046:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openSlidePanel$=void 0;var a=n(25),i="biz.util.openSlidePanel";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o)),t.openSlidePanel$=r,t.default=r},3047:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.presentWindow$=void 0;var a=n(25),i="biz.util.presentWindow";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.presentWindow$=r,t.default=r},3048:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.previewImage$=void 0;var a=n(25),i="biz.util.previewImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"2.7.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.previewImage$=r,t.default=r},3049:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.previewVideo$=void 0;var a=n(25),i="biz.util.previewVideo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.3.7"},o[a.ENV_ENUM.android]={vs:"4.3.7"},o[a.ENV_ENUM.pc]={vs:"4.6.33"},o)),t.previewVideo$=r,t.default=r},3050:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.saveImage$=void 0;var a=n(25),i="biz.util.saveImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.1"},o[a.ENV_ENUM.android]={vs:"4.1"},o)),t.saveImage$=r,t.default=r},3051:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.scan$=void 0;var a=n(25),i=n(183),c="biz.util.scan",l=(0,i.genDefaultParamsDealFn)({type:"qrCode"});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.scan$=r,t.default=r},3052:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.scanCard$=void 0;var a=n(25),i="biz.util.scanCard";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.scanCard$=r,t.default=r},3053:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setGPUAcceleration$=void 0;var a=n(25),i="biz.util.setGPUAcceleration";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"6.0.22"},o)),t.setGPUAcceleration$=r,t.default=r},3054:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setScreenBrightnessAndKeepOn$=void 0;var a=n(25),i="biz.util.setScreenBrightnessAndKeepOn";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.37"},o[a.ENV_ENUM.android]={vs:"4.3.3"},o)),t.setScreenBrightnessAndKeepOn$=r,t.default=r},3055:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setScreenKeepOn$=void 0;var a=n(25),i="biz.util.setScreenKeepOn";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.26"},o[a.ENV_ENUM.android]={vs:"5.1.26"},o)),t.setScreenKeepOn$=r,t.default=r},3056:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.share$=void 0;var a=n(25),i=n(183),c="biz.util.share",l=(0,i.genDefaultParamsDealFn)({title:"",buttonName:"确定"});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.pc]={vs:"4.6.37",paramsDeal:l},o)),t.share$=r,t.default=r},3057:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.shareImage$=void 0;var a=n(25),i="biz.util.shareImage";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.1"},o[a.ENV_ENUM.android]={vs:"4.1"},o)),t.shareImage$=r,t.default=r},3058:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startDocSign$=void 0;var a=n(25),i="biz.util.startDocSign";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.6.33"},o)),t.startDocSign$=r,t.default=r},3059:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.systemShare$=void 0;var a=n(25),i="biz.util.systemShare";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.11"},o[a.ENV_ENUM.android]={vs:"4.5.11"},o)),t.systemShare$=r,t.default=r},3060:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.timepicker$=void 0;var a=n(25),i="biz.util.timepicker";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.timepicker$=r,t.default=r},3061:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadAttachment$=void 0;var a=n(25),i="biz.util.uploadAttachment";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.7.0"},o[a.ENV_ENUM.android]={vs:"2.7.0"},o)),t.uploadAttachment$=r,t.default=r},3062:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadFile$=void 0;var a=n(25),i="biz.util.uploadFile";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.28"},o[a.ENV_ENUM.android]={vs:"6.5.27"},o)),t.uploadFile$=r,t.default=r},3063:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImage$=void 0;var a=n(25),i=n(183),c="biz.util.uploadImage",l=(0,i.genDefaultParamsDealFn)({multiple:!1});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.uploadImage$=r,t.default=r},3064:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImageFromCamera$=void 0;var a=n(25),i="biz.util.uploadImageFromCamera";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.uploadImageFromCamera$=r,t.default=r},3065:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ut$=void 0;var a=n(25),i="biz.util.ut",c=function(e){var t=Object.assign({},e),n=t.value,r=[];if(n&&"object"==typeof n){for(var o in n)void 0!==n[o]&&r.push(o+"="+n[o]);n=r.join(",")}return t.value=n||"",t};a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.5.0",paramsDeal:c},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:function(e){var t=Object.assign({},e),n=t.value;return n&&"object"==typeof n&&(n=JSON.stringify(n)),t.value=n,t}},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:c},o)),t.ut$=r,t.default=r},3066:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openBindIDCard$=void 0;var a=n(25),i="biz.verify.openBindIDCard";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.21"},o[a.ENV_ENUM.android]={vs:"4.5.21"},o)),t.openBindIDCard$=r,t.default=r},3067:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startAuth$=void 0;var a=n(25),i="biz.verify.startAuth";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.5.21"},o[a.ENV_ENUM.android]={vs:"4.5.21"},o)),t.startAuth$=r,t.default=r},3068:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getWatermarkInfo$=void 0;var a=n(25),i="biz.watermarkCamera.getWatermarkInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.25"},o[a.ENV_ENUM.android]={vs:"6.5.25"},o)),t.getWatermarkInfo$=r,t.default=r},3069:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setWatermarkInfo$=void 0;var a=n(25),i="biz.watermarkCamera.setWatermarkInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.25"},o[a.ENV_ENUM.android]={vs:"6.5.25"},o)),t.setWatermarkInfo$=r,t.default=r},3070:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAuthCode$=void 0;var a=n(25),i="channel.permission.requestAuthCode";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.0.0"},o[a.ENV_ENUM.android]={vs:"3.0.0"},o)),t.requestAuthCode$=r,t.default=r},3071:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.clearShake$=void 0;var a=n(25),i="device.accelerometer.clearShake";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.clearShake$=r,t.default=r},3072:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.watchShake$=void 0;var a=n(25),i=n(183),c="device.accelerometer.watchShake";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:function(e){return(0,i.forceChangeParamsDealFn)({sensitivity:3.2})((0,i.addWatchParamsDeal)(e))}},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:i.addWatchParamsDeal},o)),t.watchShake$=r,t.default=r},3073:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.download$=void 0;var a=n(25),i="device.audio.download";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.download$=r,t.default=r},3074:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.onPlayEnd$=void 0;var a=n(25),i="device.audio.onPlayEnd";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.onPlayEnd$=r,t.default=r},3075:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.onRecordEnd$=void 0;var a=n(25),i="device.audio.onRecordEnd";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.onRecordEnd$=r,t.default=r},3076:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.pause$=void 0;var a=n(25),i="device.audio.pause";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.pause$=r,t.default=r},3077:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.play$=void 0;var a=n(25),i="device.audio.play";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.play$=r,t.default=r},3078:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.resume$=void 0;var a=n(25),i="device.audio.resume";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.resume$=r,t.default=r},3079:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.startRecord$=void 0;var a=n(25),i="device.audio.startRecord";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.startRecord$=r,t.default=r},3080:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stop$=void 0;var a=n(25),i="device.audio.stop";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.stop$=r,t.default=r},3081:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stopRecord$=void 0;var a=n(25),i="device.audio.stopRecord";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.stopRecord$=r,t.default=r},3082:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.translateVoice$=void 0;var a=n(25),i="device.audio.translateVoice";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.8.0"},o[a.ENV_ENUM.android]={vs:"2.8.0"},o)),t.translateVoice$=r,t.default=r},3083:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getInterface$=void 0;var a=n(25),i="device.base.getInterface";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.getInterface$=r,t.default=r},3084:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getPhoneInfo$=void 0;var a=n(25),i="device.base.getPhoneInfo";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.5.0"},o[a.ENV_ENUM.android]={vs:"3.5.0"},o)),t.getPhoneInfo$=r,t.default=r},3085:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID$=void 0;var a=n(25),i="device.base.getUUID";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o[a.ENV_ENUM.pc]={vs:"4.7.6"},o)),t.getUUID$=r,t.default=r},3086:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getWifiStatus$=void 0;var a=n(25),i="device.base.getWifiStatus";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.11.0"},o[a.ENV_ENUM.android]={vs:"2.11.0"},o)),t.getWifiStatus$=r,t.default=r},3087:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.openSystemSetting$=void 0;var a=n(25),i="device.base.openSystemSetting";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"6.0.27"},o[a.ENV_ENUM.ios]={vs:"6.3.15"},o)),t.openSystemSetting$=r,t.default=r},3088:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getNetworkType$=void 0;var a=n(25),i="device.connection.getNetworkType";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.getNetworkType$=r,t.default=r},3089:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.checkPermission$=void 0;var a=n(25),i="device.geolocation.checkPermission";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.5.0"},o)),t.checkPermission$=r,t.default=r},309:function(e,t,n){"use strict";n(3152);var r=n(1254);n(701);t.a=r.a},3090:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.get$=void 0;var a=n(25),i="device.geolocation.get";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.get$=r,t.default=r},3091:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.start$=void 0;var a=n(25),i="device.geolocation.start";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.4.7"},o[a.ENV_ENUM.android]={vs:"3.4.7"},o)),t.start$=r,t.default=r},3092:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.status$=void 0;var a=n(25),i="device.geolocation.status";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.4.8"},o[a.ENV_ENUM.android]={vs:"3.4.8"},o)),t.status$=r,t.default=r},3093:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stop$=void 0;var a=n(25),i="device.geolocation.stop";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"3.4.7"},o[a.ENV_ENUM.android]={vs:"3.4.7"},o)),t.stop$=r,t.default=r},3094:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.checkInstalledApps$=void 0;var a=n(25),i="device.launcher.checkInstalledApps";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.checkInstalledApps$=r,t.default=r},3095:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.launchApp$=void 0;var a=n(25),i="device.launcher.launchApp";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.launchApp$=r,t.default=r},3096:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.nfcRead$=void 0;var a=n(25),i="device.nfc.nfcRead";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.11.0"},o[a.ENV_ENUM.android]={vs:"2.11.0"},o)),t.nfcRead$=r,t.default=r},3097:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.nfcStop$=void 0;var a=n(25),i="device.nfc.nfcStop";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.3.9"},o[a.ENV_ENUM.android]={vs:"4.3.9"},o)),t.nfcStop$=r,t.default=r},3098:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.nfcWrite$=void 0;var a=n(25),i="device.nfc.nfcWrite";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.11.0"},o[a.ENV_ENUM.android]={vs:"2.11.0"},o)),t.nfcWrite$=r,t.default=r},3099:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.actionSheet$=void 0;var a=n(25),i="device.notification.actionSheet";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.actionSheet$=r,t.default=r},3100:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.alert$=void 0;var a=n(25),i=n(183),c="device.notification.alert",l=(0,i.genDefaultParamsDealFn)({title:"",buttonName:"确定"});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.alert$=r,t.default=r},3101:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.confirm$=void 0;var a=n(25),i=n(183),c="device.notification.confirm",l=(0,i.genDefaultParamsDealFn)({title:"",buttonLabels:["确定","取消"]});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.confirm$=r,t.default=r},3102:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.extendModal$=void 0;var a=n(25),i="device.notification.extendModal";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.5.0"},o[a.ENV_ENUM.android]={vs:"2.5.0"},o)),t.extendModal$=r,t.default=r},3103:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.hidePreloader$=void 0;var a=n(25),i="device.notification.hidePreloader";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.hidePreloader$=r,t.default=r},3104:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.modal$=void 0;var a=n(25),i="device.notification.modal";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"4.2.5"},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.modal$=r,t.default=r},3105:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.prompt$=void 0;var a=n(25),i=n(183),c="device.notification.prompt",l=(0,i.genDefaultParamsDealFn)({title:"",buttonLabels:["确定","取消"]});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.7.0"},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.prompt$=r,t.default=r},3106:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.showPreloader$=void 0;var a=n(25),i=n(183),c="device.notification.showPreloader",l=(0,i.genDefaultParamsDealFn)({text:"加载中...",showIcon:!0});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.showPreloader$=r,t.default=r},3107:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.toast$=void 0;var a=n(25),i=n(183),c="device.notification.toast",l=(0,i.genDefaultParamsDealFn)({text:"toast",duration:3,delay:0});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.pc]={vs:"2.5.0",paramsDeal:function(e){return e.icon&&!e.type&&("success"===e.icon?e.type="success":"error"===e.icon&&(e.type="error")),e}},o[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.toast$=r,t.default=r},3108:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.vibrate$=void 0;var a=n(25),i=n(183),c="device.notification.vibrate",l=(0,i.genDefaultParamsDealFn)({duration:300});a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:l},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:l},o)),t.vibrate$=r,t.default=r},3109:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.insetAdjust$=void 0;var a=n(25),i="device.screen.insetAdjust";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"4.6.18"},o)),t.insetAdjust$=r,t.default=r},3110:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.resetView$=void 0;var a=n(25),i="device.screen.resetView";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.0.0"},o[a.ENV_ENUM.ios]={vs:"4.0.0"},o)),t.resetView$=r,t.default=r},3111:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.rotateView$=void 0;var a=n(25),i="device.screen.rotateView";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.0.0"},o[a.ENV_ENUM.ios]={vs:"4.0.0"},o)),t.rotateView$=r,t.default=r},3112:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.keepAlive$=void 0;var a=n(25),i="media.voiceRecorder.keepAlive";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.12"},o[a.ENV_ENUM.android]={vs:"5.1.12"},o[a.ENV_ENUM.pc]={vs:"5.1.12"},o)),t.keepAlive$=r,t.default=r},3113:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.pause$=void 0;var a=n(25),i="media.voiceRecorder.pause";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.12"},o[a.ENV_ENUM.android]={vs:"5.1.12"},o[a.ENV_ENUM.pc]={vs:"5.1.12"},o)),t.pause$=r,t.default=r},3114:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.resume$=void 0;var a=n(25),i="media.voiceRecorder.resume";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.12"},o[a.ENV_ENUM.android]={vs:"5.1.12"},o[a.ENV_ENUM.pc]={vs:"5.1.12"},o)),t.resume$=r,t.default=r},3115:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.start$=void 0;var a=n(25),i="media.voiceRecorder.start";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.12"},o[a.ENV_ENUM.android]={vs:"5.1.12"},o[a.ENV_ENUM.pc]={vs:"5.1.12"},o)),t.start$=r,t.default=r},3116:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stop$=void 0;var a=n(25),i="media.voiceRecorder.stop";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"5.1.12"},o[a.ENV_ENUM.android]={vs:"5.1.12"},o[a.ENV_ENUM.pc]={vs:"5.1.12"},o)),t.stop$=r,t.default=r},3117:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.loginGovNet$=void 0;var a=n(25),i="net.bjGovApn.loginGovNet";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.android]={vs:"4.5.16"},o)),t.loginGovNet$=r,t.default=r},3118:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.fetch$=void 0;var a=n(25),i="runtime.message.fetch";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.fetch$=r,t.default=r},3119:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.post$=void 0;var a=n(25),i="runtime.message.post";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.post$=r,t.default=r},3120:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getLoadTime$=void 0;var a=n(25),i="runtime.monitor.getLoadTime";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.0.10"},o[a.ENV_ENUM.android]={vs:"6.0.10"},o)),t.getLoadTime$=r,t.default=r},3121:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAuthCode$=void 0;var a=n(25),i="runtime.permission.requestAuthCode";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.0.0",paramsDeal:function(e){return Object.assign(e,{url:location.href.split("#")[0]})}},o[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.requestAuthCode$=r,t.default=r},3122:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.requestOperateAuthCode$=void 0;var a=n(25),i="runtime.permission.requestOperateAuthCode";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.pc]={vs:"3.3.0",paramsDeal:function(e){return Object.assign(e,{url:location.href.split("#")[0]})}},o[a.ENV_ENUM.ios]={vs:"3.3.0"},o[a.ENV_ENUM.android]={vs:"3.3.0"},o)),t.requestOperateAuthCode$=r,t.default=r},3123:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.plain$=void 0;var a=n(25),i="ui.input.plain";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.plain$=r,t.default=r},3124:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.addToFloat$=void 0;var a=n(25),i="ui.multitask.addToFloat";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.0"},o[a.ENV_ENUM.android]={vs:"6.5.0"},o)),t.addToFloat$=r,t.default=r},3125:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromFloat$=void 0;var a=n(25),i="ui.multitask.removeFromFloat";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.5.0"},o[a.ENV_ENUM.android]={vs:"6.5.0"},o)),t.removeFromFloat$=r,t.default=r},3126:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.close$=void 0;var a=n(25),i="ui.nav.close";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.close$=r,t.default=r},3127:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentId$=void 0;var a=n(25),i="ui.nav.getCurrentId";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.getCurrentId$=r,t.default=r},3128:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.go$=void 0;var a=n(25),i="ui.nav.go";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.go$=r,t.default=r},3129:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.preload$=void 0;var a=n(25),i="ui.nav.preload";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.preload$=r,t.default=r},3130:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.recycle$=void 0;var a=n(25),i="ui.nav.recycle";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.6.0"},o[a.ENV_ENUM.android]={vs:"2.6.0"},o)),t.recycle$=r,t.default=r},3131:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setColors$=void 0;var a=n(25),i="ui.progressBar.setColors";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.setColors$=r,t.default=r},3132:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.disable$=void 0;var a=n(25),i="ui.pullToRefresh.disable";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.disable$=r,t.default=r},3133:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(c,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.enable$=void 0;var a=n(25),i=n(183),c="ui.pullToRefresh.enable";a.ddSdk.setAPI(c,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0",paramsDeal:i.addWatchParamsDeal},o[a.ENV_ENUM.android]={vs:"2.4.0",paramsDeal:i.addWatchParamsDeal},o)),t.enable$=r,t.default=r},3134:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.stop$=void 0;var a=n(25),i="ui.pullToRefresh.stop";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.stop$=r,t.default=r},3135:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.disable$=void 0;var a=n(25),i="ui.webViewBounce.disable";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.disable$=r,t.default=r},3136:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.enable$=void 0;var a=n(25),i="ui.webViewBounce.enable";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.4.0"},o[a.ENV_ENUM.android]={vs:"2.4.0"},o)),t.enable$=r,t.default=r},3137:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getItem$=void 0;var a=n(25),i="util.domainStorage.getItem";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.9.0"},o[a.ENV_ENUM.android]={vs:"2.9.0"},o[a.ENV_ENUM.pc]={vs:"4.6.29"},o)),t.getItem$=r,t.default=r},3138:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.removeItem$=void 0;var a=n(25),i="util.domainStorage.removeItem";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.9.0"},o[a.ENV_ENUM.android]={vs:"2.9.0"},o[a.ENV_ENUM.pc]={vs:"4.6.29"},o)),t.removeItem$=r,t.default=r},3139:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.setItem$=void 0;var a=n(25),i="util.domainStorage.setItem";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"2.9.0"},o[a.ENV_ENUM.android]={vs:"2.9.0"},o[a.ENV_ENUM.pc]={vs:"4.6.9"},o)),t.setItem$=r,t.default=r},3140:function(e,t,n){"use strict";function r(e){return a.ddSdk.invokeAPI(i,e)}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.getData$=void 0;var a=n(25),i="util.openTemporary.getData";a.ddSdk.setAPI(i,((o={})[a.ENV_ENUM.ios]={vs:"6.3.15"},o[a.ENV_ENUM.android]={vs:"6.3.15"},o)),t.getData$=r,t.default=r},3141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coolAppSdk=void 0;var r=n(3142);t.coolAppSdk=r},3142:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3143),t),o(n(3144),t),o(n(3145),t),o(n(3146),t),o(n(3147),t),o(n(3148),t)},3143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installCoolAppToGroup=void 0,n(798);var r=n(962),o=n(1453);t.installCoolAppToGroup=function(e){return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/resource-picker/".concat(o.isMobile?"mob":"index",".html?scene=addCoolAppToGroup&params=").concat(encodeURIComponent(JSON.stringify(e))),target:o.isMobile?"":"float",title:"选择群添加应用",wnId:"addCoolAppToGroup",panelHeight:"percent90"}})}},3144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMessageToGroup=void 0,n(798);var r=n(962);t.sendMessageToGroup=function(e){var t,n=JSON.stringify(e).length;return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/im/cool-app-component.html?corpId=".concat(encodeURIComponent(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t.corpId),"#/send-message?params=").concat(encodeURIComponent(JSON.stringify({body:e,bodyLengthList:[n]}))),target:"float",title:"提示",wnId:"sendMessageToGroup",panelHeight:"percent83"}})}},3145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0,n(798);var r=n(962);t.createGroup=function(e){var t;return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/im/cool-app-component.html?corpId=".concat(encodeURIComponent(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t.corpId),"#/create-group?params=").concat(encodeURIComponent(JSON.stringify(e))),target:"float",title:"提示",wnId:"createGroup",panelHeight:"percent83"}})}},3146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMembers=void 0,n(798);var r=n(962);t.addMembers=function(e){var t;return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/im/cool-app-component.html?corpId=".concat(encodeURIComponent(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t.corpId),"#/add-members?params=").concat(encodeURIComponent(JSON.stringify(e))),target:"float",title:"提示",wnId:"addMembers",panelHeight:"percent83"}})}},3147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMessageToSingleChat=void 0,n(798);var r=n(962);t.sendMessageToSingleChat=function(e){var t,n=JSON.stringify(e).length;return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/im/cool-app-component.html?corpId=".concat(encodeURIComponent(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t.corpId),"#/send-message-to-single-chat?params=").concat(encodeURIComponent(JSON.stringify({body:e,bodyLengthList:[n]}))),target:"float",title:"提示",wnId:"sendMessageToSingleChat",panelHeight:"percent83"}})}},3148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchInstallCoolApp=void 0,n(798);var r=n(962),o=n(1453);t.batchInstallCoolApp=function(e){var t=Object.assign({},e,{isBatchApi:!0});return(0,r._invoke)("biz.util.callComponent",{componentType:"h5",params:{url:"/resource-picker/".concat(o.isMobile?"mob":"index",".html?scene=addCoolAppToGroup&params=").concat(encodeURIComponent(JSON.stringify(t))),target:o.isMobile?"":"float",title:"选择会话添加应用",wnId:"addCoolAppToGroup",panelHeight:"percent90"}})}},32:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(1252),n(371)),i=n(57),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=n(1232),g=(n(188),["className","dropdownClassName"]);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=d.a.forwardRef((function(e,t){var n=e.className,r=e.dropdownClassName,o=u()(e,g);return d.a.createElement(a.a,c()({className:h()("larkui-select",n),dropdownClassName:h()("larkui-select-dropdown",r),ref:t,suffixIcon:d.a.createElement(b.default,null)},o))}));w.propTypes=E(E({},a.a.SelectProps),{},{className:p.a.string,dropdownClassName:p.a.string}),y()(w,a.a),t.a=w},323:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(5),c=n.n(i),l=n(1239),u=n(6),s=n.n(u),d={noWrap:"index-module_noWrap_glNxF",center:"index-module_center_zSt9A",inherit:"index-module_inherit_TQ-oW",justify:"index-module_justify_BBNTE",left:"index-module_left_melIP",right:"index-module_right_BcDRZ","common-link":"index-module_common-link_LkRIl","common-tab":"index-module_common-tab_EdL1P",active:"index-module_active_cmLTu","common-menu":"index-module_common-menu_OiYt2","common-icon":"index-module_common-icon_60unB","common-flex":"index-module_common-flex_YpvU1","common-iconButton":"index-module_common-iconButton_9fUSh","common-menu-item":"index-module_common-menu-item_wENsl",headline1:"index-module_headline1_gNn3d","headline1-link":"index-module_headline1-link_hpiWt","headline1-tab":"index-module_headline1-tab_2tnKG","headline1-menu":"index-module_headline1-menu_kn1nZ","headline1-icon":"index-module_headline1-icon_Ugsfz","headline1-flex":"index-module_headline1-flex_XKxAU","headline1-iconButton":"index-module_headline1-iconButton_JxTPN","headline1-menu-item":"index-module_headline1-menu-item_6KtqL","headline1-secondary":"index-module_headline1-secondary_oSaxw",headline2:"index-module_headline2_xyzBy","headline2-link":"index-module_headline2-link_bkLCB","headline2-tab":"index-module_headline2-tab_n1Akb","headline2-menu":"index-module_headline2-menu_QL2po","headline2-icon":"index-module_headline2-icon_Ge-vk","headline2-flex":"index-module_headline2-flex_KZxEZ","headline2-iconButton":"index-module_headline2-iconButton_uBIj0","headline2-menu-item":"index-module_headline2-menu-item_1iIzo","headline2-secondary":"index-module_headline2-secondary_t1vqD",headline3:"index-module_headline3_6OwWy","headline3-link":"index-module_headline3-link_wcUG4","headline3-tab":"index-module_headline3-tab_GRz8p","headline3-menu":"index-module_headline3-menu_pdEQ6","headline3-icon":"index-module_headline3-icon_maylx","headline3-flex":"index-module_headline3-flex_EdA3C","headline3-iconButton":"index-module_headline3-iconButton_ljBJY","headline3-menu-item":"index-module_headline3-menu-item_FneW1","headline3-secondary":"index-module_headline3-secondary_gdmSF",headline4:"index-module_headline4_cCWAs","headline4-link":"index-module_headline4-link_pksrg","headline4-tab":"index-module_headline4-tab_AZhw7","headline4-menu":"index-module_headline4-menu_Zh+Gf","headline4-icon":"index-module_headline4-icon_I8A2c","headline4-flex":"index-module_headline4-flex_-WCmH","headline4-iconButton":"index-module_headline4-iconButton_unM1q","headline4-menu-item":"index-module_headline4-menu-item_HZvZs","headline4-secondary":"index-module_headline4-secondary_mwc2q",title:"index-module_title_AMQeB","title-link":"index-module_title-link_LhWVV","title-tab":"index-module_title-tab_PEcOM","title-menu":"index-module_title-menu_yRd7C","title-icon":"index-module_title-icon_jD1r3","title-flex":"index-module_title-flex_6ud+f","title-iconButton":"index-module_title-iconButton_eKfGH","title-menu-item":"index-module_title-menu-item_+2INX","title-secondary":"index-module_title-secondary_+7kF8","title-strong":"index-module_title-strong_rB2kd",body:"index-module_body_0t8B1","body-link":"index-module_body-link_1Ezeh","body-tab":"index-module_body-tab_ZArAR","body-menu":"index-module_body-menu_rkEZj","body-icon":"index-module_body-icon_dtRXT","body-flex":"index-module_body-flex_xUh97","body-iconButton":"index-module_body-iconButton_zEAAb","body-menu-item":"index-module_body-menu-item_530BT","body-secondary":"index-module_body-secondary_jzKzN","body-strong":"index-module_body-strong_B8Xyf","body-small":"index-module_body-small_M0nB9","body-small-link":"index-module_body-small-link_dpTlG","body-small-tab":"index-module_body-small-tab_HAI-k","body-small-menu":"index-module_body-small-menu_+sZ91","body-small-icon":"index-module_body-small-icon_9yvQH","body-small-flex":"index-module_body-small-flex_TzPYW","body-small-iconButton":"index-module_body-small-iconButton_Ry5bn","body-small-menu-item":"index-module_body-small-menu-item_5h34h","body-small-secondary":"index-module_body-small-secondary_dJo56",disable:"index-module_disable_bsdL7","disable-link":"index-module_disable-link_fsP5Q","disable-tab":"index-module_disable-tab_1L8n1","disable-menu":"index-module_disable-menu_h0UA9","disable-icon":"index-module_disable-icon_szLm2","disable-flex":"index-module_disable-flex_EDI9g","disable-iconButton":"index-module_disable-iconButton_41jru","disable-menu-item":"index-module_disable-menu-item_tolga",caption:"index-module_caption_bWso-","caption-link":"index-module_caption-link_iUcKX","caption-tab":"index-module_caption-tab_Pahmo","caption-menu":"index-module_caption-menu_FYIeq","caption-icon":"index-module_caption-icon_Y3NyS","caption-flex":"index-module_caption-flex_FI2Np","caption-iconButton":"index-module_caption-iconButton_hWPqs","caption-menu-item":"index-module_caption-menu-item_1kLnU","caption-secondary":"index-module_caption-secondary_SFdcH","caption-small":"index-module_caption-small_B13mr","caption-small-link":"index-module_caption-small-link_8T++a","caption-small-tab":"index-module_caption-small-tab_ibUZP","caption-small-menu":"index-module_caption-small-menu_G8H-J","caption-small-icon":"index-module_caption-small-icon_PtjdH","caption-small-flex":"index-module_caption-small-flex_+EFJk","caption-small-iconButton":"index-module_caption-small-iconButton_33CTf","caption-small-menu-item":"index-module_caption-small-menu-item_cqmp0","caption-small-secondary":"index-module_caption-small-secondary_H2H1r","primary-button-default":"index-module_primary-button-default_Vw1-y","primary-button-default-link":"index-module_primary-button-default-link_oQhLa","primary-button-default-tab":"index-module_primary-button-default-tab_rf8zH","primary-button-default-menu":"index-module_primary-button-default-menu_JESyh","primary-button-default-icon":"index-module_primary-button-default-icon_E0TCd","primary-button-default-flex":"index-module_primary-button-default-flex_pNGzV","primary-button-default-iconButton":"index-module_primary-button-default-iconButton_bguHS","primary-button-default-menu-item":"index-module_primary-button-default-menu-item_EY5rA","primary-button-default-secondary":"index-module_primary-button-default-secondary_R+QUT","primary-button-default-strong":"index-module_primary-button-default-strong_Htk5A","primary-button-strong":"index-module_primary-button-strong_tCPsX","primary-button-strong-link":"index-module_primary-button-strong-link_FFk3N","primary-button-strong-tab":"index-module_primary-button-strong-tab_iu42A","primary-button-strong-menu":"index-module_primary-button-strong-menu_MUMyr","primary-button-strong-icon":"index-module_primary-button-strong-icon_-xloa","primary-button-strong-flex":"index-module_primary-button-strong-flex_uWzkw","primary-button-strong-iconButton":"index-module_primary-button-strong-iconButton_f6r63","primary-button-strong-menu-item":"index-module_primary-button-strong-menu-item_RzDwe","primary-button-strong-secondary":"index-module_primary-button-strong-secondary_rR6X1","primary-button-strong-strong":"index-module_primary-button-strong-strong_KuhtF","primary-button-strong-ghost":"index-module_primary-button-strong-ghost_LfbnS","secondary-button-default":"index-module_secondary-button-default_nN4ts","secondary-button-default-link":"index-module_secondary-button-default-link_P4JJV","secondary-button-default-tab":"index-module_secondary-button-default-tab_sTKaj","secondary-button-default-menu":"index-module_secondary-button-default-menu_CnLQt","secondary-button-default-icon":"index-module_secondary-button-default-icon_EBrIo","secondary-button-default-flex":"index-module_secondary-button-default-flex_myAK8","secondary-button-default-iconButton":"index-module_secondary-button-default-iconButton_3l8nj","secondary-button-default-menu-item":"index-module_secondary-button-default-menu-item_OZFHO","secondary-button-default-secondary":"index-module_secondary-button-default-secondary_iH73C","secondary-button-default-strong":"index-module_secondary-button-default-strong_U1PcZ","disable-button-default":"index-module_disable-button-default_do2Ky","disable-button-default-link":"index-module_disable-button-default-link_Cc4nX","disable-button-default-tab":"index-module_disable-button-default-tab_uzzYS","disable-button-default-menu":"index-module_disable-button-default-menu_ki5Hs","disable-button-default-icon":"index-module_disable-button-default-icon_+eAaQ","disable-button-default-flex":"index-module_disable-button-default-flex_pSS0P","disable-button-default-iconButton":"index-module_disable-button-default-iconButton_Ns-ZT","disable-button-default-menu-item":"index-module_disable-button-default-menu-item_H7X58","disable-button-default-secondary":"index-module_disable-button-default-secondary_sJwUn","disable-button-default-strong":"index-module_disable-button-default-strong_ApPSw",link:"index-module_link_4lMzA","link-link":"index-module_link-link_MSu6v","link-tab":"index-module_link-tab_UaSsE","link-menu":"index-module_link-menu_X9-jl","link-icon":"index-module_link-icon_GlYMK","link-flex":"index-module_link-flex_y87zq","link-iconButton":"index-module_link-iconButton_hFUyW","link-menu-item":"index-module_link-menu-item_QrtKv","link-secondary":"index-module_link-secondary_cYp8F","link-strong":"index-module_link-strong_6cupy",linkBtn:"index-module_linkBtn_viBrQ","linkBtn-link":"index-module_linkBtn-link_fRNiK","linkBtn-tab":"index-module_linkBtn-tab_xLPRH","linkBtn-menu":"index-module_linkBtn-menu_K8vUm","linkBtn-icon":"index-module_linkBtn-icon_bNwRp","linkBtn-flex":"index-module_linkBtn-flex_Xds+s","linkBtn-iconButton":"index-module_linkBtn-iconButton_nWnGl","linkBtn-menu-item":"index-module_linkBtn-menu-item_rDBK+","linkBtn-secondary":"index-module_linkBtn-secondary_pxTMi","linkBtn-strong":"index-module_linkBtn-strong_5PlMk","yuque-green-1":"index-module_yuque-green-1_t+Yes","yuque-green-2":"index-module_yuque-green-2_PSwCn","yuque-green-3":"index-module_yuque-green-3_990Pj","yuque-green-4":"index-module_yuque-green-4_LGQYT","yuque-green-5":"index-module_yuque-green-5_Wdkpl","yuque-green-6":"index-module_yuque-green-6_sp+C1","yuque-green-7":"index-module_yuque-green-7_Yz0nb","yuque-green-8":"index-module_yuque-green-8_TdQoj","yuque-green-9":"index-module_yuque-green-9_78uX8","yuque-grey-1":"index-module_yuque-grey-1_MFlzw","yuque-grey-2":"index-module_yuque-grey-2_1MPla","yuque-grey-3":"index-module_yuque-grey-3_Xwd3D","yuque-grey-4":"index-module_yuque-grey-4_Iaalm","yuque-grey-5":"index-module_yuque-grey-5_dTMGn","yuque-grey-6":"index-module_yuque-grey-6_9P9mX","yuque-grey-7":"index-module_yuque-grey-7_fo9a2","yuque-grey-8":"index-module_yuque-grey-8_5ZItk","yuque-grey-9":"index-module_yuque-grey-9_2KrCK","blue-1":"index-module_blue-1_9NXmy","blue-2":"index-module_blue-2_71Xfa","blue-3":"index-module_blue-3_QzBMA","blue-4":"index-module_blue-4_eIuv6","blue-5":"index-module_blue-5_--rJ2","blue-6":"index-module_blue-6_EM+ye","blue-7":"index-module_blue-7_dcd5v","blue-8":"index-module_blue-8_i6IXc","blue-9":"index-module_blue-9_8WLz4","organge-1":"index-module_organge-1_QF-zP","organge-2":"index-module_organge-2_zYIHH","organge-3":"index-module_organge-3_EaUTx","organge-4":"index-module_organge-4_KEzWt","organge-5":"index-module_organge-5_uWCqi","organge-6":"index-module_organge-6_SWaCL","organge-7":"index-module_organge-7_UCnnq","organge-8":"index-module_organge-8_yxbUr","organge-9":"index-module_organge-9_Wqbx6","yellow-1":"index-module_yellow-1_9BdDH","yellow-2":"index-module_yellow-2_mmpuD","yellow-3":"index-module_yellow-3_1MgEh","yellow-4":"index-module_yellow-4_twlST","yellow-5":"index-module_yellow-5_Z7Kqp","yellow-6":"index-module_yellow-6_EZhZz","yellow-7":"index-module_yellow-7_lCkCE","yellow-8":"index-module_yellow-8_ZQ7hX","yellow-9":"index-module_yellow-9_NAs4Y","red-1":"index-module_red-1_Z-G+I","red-2":"index-module_red-2_ec26p","red-3":"index-module_red-3_CitaX","red-4":"index-module_red-4_Rf4VB","red-5":"index-module_red-5_8DEQO","red-6":"index-module_red-6_e40Pl","red-7":"index-module_red-7_ND3LM","red-8":"index-module_red-8_S4EAE","red-9":"index-module_red-9_s0fc1","magenta-1":"index-module_magenta-1_BVOfc","magenta-2":"index-module_magenta-2_LeAiv","magenta-3":"index-module_magenta-3_anmFf","magenta-4":"index-module_magenta-4_iyuji","magenta-5":"index-module_magenta-5_XFO8v","magenta-6":"index-module_magenta-6_83nvI","magenta-7":"index-module_magenta-7_EylhI","magenta-8":"index-module_magenta-8_H7UoN","magenta-9":"index-module_magenta-9_BZu8L","purple-1":"index-module_purple-1_4Mt5K","purple-2":"index-module_purple-2_ZU8FB","purple-3":"index-module_purple-3_XZk6m","purple-4":"index-module_purple-4_RkQAl","purple-5":"index-module_purple-5_UwSof","purple-6":"index-module_purple-6_VE5X4","purple-7":"index-module_purple-7_4qxQ3","purple-8":"index-module_purple-8_34VRx","purple-9":"index-module_purple-9_S5yo0","cyan-1":"index-module_cyan-1_XcHSS","cyan-2":"index-module_cyan-2_8Z0Qc","cyan-3":"index-module_cyan-3_8EpV-","cyan-4":"index-module_cyan-4_BTV0V","cyan-5":"index-module_cyan-5_OOfUa","cyan-6":"index-module_cyan-6_8F8Ne","cyan-7":"index-module_cyan-7_tQGo7","cyan-8":"index-module_cyan-8_nBcrC","cyan-9":"index-module_cyan-9_pp0HZ","pea-green-1":"index-module_pea-green-1_YZ7VF","pea-green-2":"index-module_pea-green-2_cB-wj","pea-green-3":"index-module_pea-green-3_0aW+j","pea-green-4":"index-module_pea-green-4_V3TMD","pea-green-5":"index-module_pea-green-5_UQ6+a","pea-green-6":"index-module_pea-green-6_VBEAH","pea-green-7":"index-module_pea-green-7_fz-pg","pea-green-8":"index-module_pea-green-8_vhbae","pea-green-9":"index-module_pea-green-9_iLSdb",white:"index-module_white_-Ikm2","yuque-color-text-disable":"index-module_yuque-color-text-disable_H8og1",flexFix:"index-module_flexFix_gj50B"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["component","variant","variantMapping","paragraph","className","style","noWrap","align","mb","ml","mr","mt","type","color","fontSize","h5FontSize","componentProps","title","maxWidth","flexFix"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return 1===r.length?r[0]:function(e){r.forEach((function(t){!function(e,t){"function"==typeof e?e(t):"Object"===Object.prototype.toString.call(e).slice(8,-1)&&(e.current=t)}(t,e)}))}}var E,w={headline1:"headline1",headline2:"headline2",headline3:"headline3",headline4:"headline4",title:"title",body:"body",bodySmall:"body-small",caption:"caption",captionSmall:"caption-small",primaryButtonDefault:"primary-button-default",primaryButtonStrong:"primary-button-strong",secondaryButtonDefault:"secondary-button-default",disableButtonDefault:"disable-button-default",disable:"disable",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",linkBtn:"linkBtn",link:"link"},O={center:"center",inherit:"inherit",justify:"justify",left:"left",right:"right"},k={variantMapping:{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",headline1:"h1",headline2:"h2",headline3:"h3",headline4:"h4",title:"h5",body:"h6","body-small":"p",caption:"p","caption-small":"p"},mb:0,ml:0,mr:0,mt:0,align:O.inherit,variant:w.body,componentProps:{}},S={className:s.a.string,component:s.a.elementType,variant:s.a.oneOf(Object.values(w)),paragraph:s.a.bool,variantMapping:s.a.object,noWrap:s.a.bool,flexFix:s.a.bool,style:s.a.object,align:s.a.oneOf(Object.values(O)),children:s.a.node,mb:s.a.oneOfType([s.a.number,s.a.string]),ml:s.a.oneOfType([s.a.number,s.a.string]),mr:s.a.oneOfType([s.a.number,s.a.string]),mt:s.a.oneOfType([s.a.number,s.a.string]),type:s.a.oneOf([].concat((E=Object.values({secondary:"secondary",strong:"strong",link:"link",icon:"icon",menu:"menu",flex:"flex",iconButton:"iconButton"}),function(e){if(Array.isArray(e))return g(e)}(E)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(E)||b(E)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[""])),onClick:s.a.func,fontSize:s.a.number,h5FontSize:s.a.number,color:s.a.string,componentProps:s.a.object,title:s.a.string,maxWidth:s.a.number,exact:s.a.bool},N=Object(o.forwardRef)((function(e,t){var n=e.component,i=e.variant,u=e.variantMapping,s=e.paragraph,f=e.className,m=e.style,b=e.noWrap,g=e.align,E=e.mb,w=e.ml,O=e.mr,k=e.mt,S=e.type,N=e.color,x=e.fontSize,A=e.h5FontSize,P=e.componentProps,C=e.title,j=e.maxWidth,T=e.flexFix,I=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,p),M=n||(s?"p":i&&(null==u?void 0:u[i]))||"span",L=g&&d[g],R=d["".concat(i,"-").concat(S)]||"",D=y(Object(l.a)(),2),U=D[0],B=D[1],z=y(Object(o.useState)(!1),2),F=z[0],V=z[1];Object(o.useEffect)((function(){var e=C&&B.offsetWidth<B.scrollWidth;e!==F&&V(Boolean(e))}),[B]);var G=Object(o.createElement)(M,h(h(h({className:c()(i&&d[i],R,L,f,v(v(v({},d.noWrap,b),d.flexFix,T),d[N],N)),style:h({marginBottom:E,marginLeft:w,marginRight:O,marginTop:k,fontSize:window.h5&&A||x,maxWidth:j},m)},P),I),{},{ref:_(U,t)}));return F?a.a.createElement(r.a,{title:C},G):G}));N.propTypes=S,N.defaultProps=k;t.a=N},33:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(3157),n(980)),i=n(57),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=(n(73),["children","className","transparentHead","contentType"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=d.a.forwardRef((function(e,t){var n=e.children,r=e.className,o=e.transparentHead,i=e.contentType,l=u()(e,b),s=h()("larkui-card",r,{"larkui-card-transparent-head":o,"larkui-card-with-list":"list"===i});return d.a.createElement(a.a,c()({className:s,ref:t},l),n)}));E.propTypes=_(_({},a.a.CardProps),{},{className:p.a.string,children:p.a.node,transparentHead:p.a.bool,contentType:p.a.oneOf(["list"])}),y()(E,a.a),t.a=E},347:function(e,t,n){"use strict";var r=n(14),o=n(1648),a=n(105),i=n(122),c=n(112),l=n(111),u=n(801).isPreviewableZipFiles,s=n(1644).getSizeValue,d=n(1647);r.extend(o);var f=n(74).NUMBER_SIZE;e.exports={wordCount:d,getSizeValue:s,sortByTime:function(e,t){var n=e.filter((function(e){return e[t]}));return 0===n.length?e:(n.sort((function(e,n){return new Date(n[t])-new Date(e[t])})),n.length===e.length?n:n.concat(e.filter((function(e){return!e[t]}))))},countdown:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=function(e){return e};"undefined"!=typeof window&&"function"==typeof window.__?o=window.__:this.ctx&&(o=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.ctx.__).call.apply(e,[t.ctx].concat(r))});var a=(e=r(e).unix())-r().unix();if(!(a<0)){var i,c=r.duration(1e3*a,"milliseconds"),l=c.years(),u=c.months(),s=c.days(),d=c.hours(),f=c.minutes(),p=c.seconds();return l>0?i="".concat(l," ").concat(o("年")):u>0?i="".concat(u," ").concat(o("个月")):s>0?i="".concat(s," ").concat(o("天")):d>0?i="".concat(d," ").concat(o("小时")):f>0?i="".concat(f," ").concat(o("分")):p>0&&(i="".concat(p," ").concat(o("秒"))),n?i:{text:i,years:l,months:u,days:s,hours:d,minutes:f,seconds:p}}},getAvatarText:function(e){var t=e.codePointAt(0);if(t=String.fromCodePoint(t),!/[0-9a-zA-Z\u4e00-\u9fa5]/.test(t)){var n=e.match(/[\u4e00-\u9fa5]/);n||(n=e.match(/[0-9a-zA-Z]/)),n&&(t=n[0])}return t},isPreviewableZipFiles:u,getExtFromFileName:function(e){var t,n;if(e)return e.endsWith(".mindnode.zip")?"mindnode.zip":e.endsWith(".xmind.zip")?"xmind.zip":e.endsWith(".mpp.zip")?"mpp.zip":e.endsWith(".mmap.zip")?"mmap.zip":(/^\.[^.]+$/.test(e)?e:(n=(t=e).lastIndexOf("."))>0?t.substring(n):"").substring(1).toLowerCase()},isImage:function(e){var t=this.getExtFromFileName(e);return a.includes(".".concat(t))},isCompressedFile:function(e){var t=this.getExtFromFileName(e);return i.includes(".".concat(t))},isAudio:function(e){var t=this.getExtFromFileName(e);return c.includes(".".concat(t))},isVideo:function(e){var t=this.getExtFromFileName(e);return l.includes(".".concat(t))},isAxure:function(e){return e.endsWith(".rp")||e.endsWith(".rplib")},numberFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh-cn";return"number"!=typeof e?"0":"zh-cn"===t?e<f.W?"".concat(e):"".concat(parseFloat((e/f.W).toFixed(1)),"W"):"en-us"===t?e>f.M?"".concat(parseFloat((e/f.M).toFixed(1)),"M"):e>f.K?"".concat(parseFloat((e/f.K).toFixed(1)),"K"):"".concat(e):void 0},trimAllSpace:function(e){return null==e?void 0:e.replace(/ /g,"")}}},349:function(e,t,n){"use strict";var r=n(565);n.d(t,"a",(function(){return r.a}))},36:function(e,t,n){"use strict";n(89),n(467),n(811),n(1462),n(1344),n(1007),n(814),n(1264),n(475);var r=n(977),o=n(57),a=n.n(o),i=n(80),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=(n(70),["className","pagination"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=d.a.forwardRef((function(e,t){var n=e.className,o=e.pagination,i=u()(e,b),c=o;return c&&(c=_({showSizeChanger:!1},c)),d.a.createElement(r.a,a()({},i,{className:h()("larkui-table",n),pagination:c,ref:t}))}));E.propTypes=_(_({},r.a.TableProps),{},{className:p.a.string,pagination:p.a.object}),y()(E,r.a);t.a=E},3639:function(e,t,n){"use strict";function r(...e){const t={};return e.forEach((e=>{e&&Object.keys(e).forEach((n=>{void 0!==e[n]&&(t[n]=e[n])}))})),t}function o(e,...t){for(let e=t.length-1;e>=0;e-=1)if(void 0!==t[e])return t[e];return e}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},3641:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),o=n.n(r),a=n(5),i=n.n(a);function c(e,t){const n=Object.assign({},t.props);e.className&&(n.className=i()(t.props.className,e.className)),e.style&&(n.style=Object.assign(Object.assign({},n.style),e.style)),void 0!==e.tabIndex&&(n.tabIndex=e.tabIndex);for(const t in e)e.hasOwnProperty(t)&&(t.startsWith("data-")||t.startsWith("aria-"))&&(n[t]=e[t]);return o.a.cloneElement(t,n)}},3642:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return $})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return Q})),n.d(t,"k",(function(){return K})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return Z})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return W})),n.d(t,"p",(function(){return X})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return J}));var r=n(3658);function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function u(e){return e?e[0].toUpperCase()+e.slice(1):""}const s=["enter","leave"];function d(e,t="",n=!1){const r=l[e],o=r&&r[t]||t;return"on"+u(e)+u(o)+(function(e=!1,t){return e&&!s.includes(t)}(n,o)?"Capture":"")}const f=["gotpointercapture","lostpointercapture"];function p(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=f.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:n}}function m(e,t=""){const n=l[e];return e+(n&&n[t]||t)}function h(e){return"touches"in e}function v(e){return h(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function y(e){return h(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function b(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,o=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,i=Math.hypot(n,r),c=-180*Math.atan2(n,r)/Math.PI;return{angle:c,distance:i,origin:[o,a]}}catch(e){}return null}function g(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function _(e,t){const[n,r]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return b(n,r)}function E(e){const t=y(e);return h(e)?t.identifier:t.pointerId}function w(e){const t=y(e);return[t.clientX,t.clientY]}function O(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function k(e,...t){return"function"==typeof e?e(...t):e}function S(){}function N(...e){return 0===e.length?S:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function x(e,t){return Object.assign({},t,e||{})}class A{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?k(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:o}=this;t.args=this.args;let a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:a})}return t}(e)),o.down=o.pressed=o.buttons%2==1||o.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);r.a.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[i,c]=t._movement,[l,u]=n.threshold,{_step:s,values:d}=t;if(n.hasCustomTransform?(!1===s[0]&&(s[0]=Math.abs(i)>=l&&d[0]),!1===s[1]&&(s[1]=Math.abs(c)>=u&&d[1])):(!1===s[0]&&(s[0]=Math.abs(i)>=l&&Math.sign(i)*l),!1===s[1]&&(s[1]=Math.abs(c)>=u&&Math.sign(c)*u)),t.intentional=!1!==s[0]||!1!==s[1],!t.intentional)return;const f=[0,0];if(n.hasCustomTransform){const[e,t]=d;f[0]=!1!==s[0]?e-s[0]:0,f[1]=!1!==s[1]?t-s[1]:0}else f[0]=!1!==s[0]?i-s[0]:0,f[1]=!1!==s[1]?c-s[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const p=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=o[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=k(n.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[h,v]=t.offset,[[y,b],[g,_]]=t._bounds;t.overflow=[h<y?-1:h>b?1:0,v<g?-1:v>_?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const E=t._active&&n.rubberband||[0,0];if(t.offset=Object(r.b)(t._bounds,t.offset,E),t.delta=r.a.sub(t.offset,p),this.computeMovement(),m&&(!t.last||a>32)){t.delta=r.a.sub(t.offset,p);const e=t.delta.map(Math.abs);r.a.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[e[0]/a,e[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(c(c(c({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class P extends A{constructor(...e){super(...e),a(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=r.a.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=r.a.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"==typeof n.axisThreshold?n.axisThreshold[v(e)]:n.axisThreshold;t.axis=function([e,t],n){const r=Math.abs(e),o=Math.abs(t);return r>o&&r>n?"x":o>r&&o>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const C=e=>e,j={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>c(c({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return r.a.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?r.a.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||C},threshold:e=>r.a.toVector(e,0)};const T=c(c({},j),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>T.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=e;return[[t,n],[r,o]]}}),I={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};const M="undefined"!=typeof window&&window.document&&window.document.createElement;function L(){return M&&"ontouchstart"in window}const R={isBrowser:M,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:L(),touchscreen:L()||M&&window.navigator.maxTouchPoints>1,pointer:M&&"onpointerdown"in window,pointerLock:M&&"exitPointerLock"in window.document},D={mouse:0,touch:0,pen:8},U=c(c({},T),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&R.pointerLock,R.touch&&n?"touch":this.pointerLock?"mouse":R.pointer&&!o?"pointer":R.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,R.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:o=3,axis:a}){const i=r.a.toVector(e,n?o:a?1:0);return this.filterTaps=n,this.tapsThreshold=o,i},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(r.a.toVector(e)),distance:this.transform(r.a.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?c(c({},D),e):D,keyboardDisplacement:(e=10)=>e});function B(e){const[t,n]=e.overflow,[r,o]=e._delta,[a,i]=e._direction;(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&o>0&&i<0||n>0&&o<0&&i>0)&&(e._movement[1]=e._movementBound[1])}const z=c(c({},j),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!R.touch&&R.gesture)return"gesture";if(R.touch&&r)return"touch";if(R.touchscreen){if(R.pointer)return"pointer";if(R.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const o=e=>{const t=x(k(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{const t=x(k(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[o(),a()]:e=>[o(e),a(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return r.a.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});const F=c(c({},T),{},{mouseOnly:(e=!0)=>e});const V=T;const G=T;const Y=c(c({},T),{},{mouseOnly:(e=!0)=>e}),$=new Map,q=new Map;function W(e){$.set(e.key,e.engine),q.set(e.key,e.resolver)}const H={key:"drag",engine:class extends P{constructor(...e){super(...e),a(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=T.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=E(e),n._pointerActive=!0,this.computeValues(w(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==v(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const o=E(e);if(void 0!==t._pointerId&&o!==t._pointerId)return;const a=w(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=r.a.sub(a,t._values),this.computeValues(a)),r.a.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){0}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=E(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,a]=t._distance;if(t.tap=o<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t._delta,[o,a]=t._movement,[i,c]=n.swipe.velocity,[l,u]=n.swipe.distance,s=n.swipe.duration;if(t.elapsedTime<s){const n=Math.abs(e/t.timeDelta),s=Math.abs(r/t.timeDelta);n>i&&Math.abs(o)>l&&(t.swipe[0]=Math.sign(e)),s>c&&Math.abs(a)>u&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=I[e.key];if(t){const n=this.state,o=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,o),n._keyboardActive=!0,r.a.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in I&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:U},K={key:"hover",engine:class extends P{constructor(...e){super(...e),a(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(w(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const n=w(e);t._movement=t._delta=r.a.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:Y},Z={key:"move",engine:class extends P{constructor(...e){super(...e),a(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(w(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=w(e),n=this.state;n._delta=r.a.sub(t,n._values),r.a.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:F},Q={key:"pinch",engine:class extends A{constructor(...e){super(...e),a(this,"ingKey","pinching"),a(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?r.a.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const r=30*Math.abs(t)-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>n.has(e))))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const r=_(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every((e=>r.has(e))))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const o=b(...Array.from(n.values()));o&&this.pinchStart(e,o)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=_(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=b(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,r=n._values[1],o=t.angle-r;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([t.distance,t.angle-360*a]),n.origin=t.origin,n.turns=a,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(e){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=r.a.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((t=>e[t])):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-O(e)[1]/100*t.offset[0],0],r.a.addTo(t._movement,t._delta),B(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:z},X={key:"scroll",engine:class extends P{constructor(...e){super(...e),a(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=function(e){var t,n;const{scrollX:r,scrollY:o,scrollLeft:a,scrollTop:i}=e.currentTarget;return[null!==(t=null!=r?r:a)&&void 0!==t?t:0,null!==(n=null!=o?o:i)&&void 0!==n?n:0]}(e);t._delta=r.a.sub(n,t._values),r.a.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:V},J={key:"wheel",engine:class extends P{constructor(...e){super(...e),a(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=O(e),r.a.addTo(t._movement,t._delta),B(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:G}},3645:function(e,t,n){"use strict";n.d(t,"z",(function(){return o})),n.d(t,"a",(function(){return Ae})),n.d(t,"b",(function(){return U})),n.d(t,"c",(function(){return Ce})),n.d(t,"d",(function(){return xe})),n.d(t,"e",(function(){return H})),n.d(t,"f",(function(){return pe})),n.d(t,"g",(function(){return Ve})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return He})),n.d(t,"j",(function(){return qe})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return _e})),n.d(t,"n",(function(){return P})),n.d(t,"o",(function(){return C})),n.d(t,"p",(function(){return G})),n.d(t,"q",(function(){return Ne})),n.d(t,"r",(function(){return Se})),n.d(t,"s",(function(){return ke})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return Ke})),n.d(t,"v",(function(){return S})),n.d(t,"w",(function(){return w})),n.d(t,"x",(function(){return nt})),n.d(t,"y",(function(){return ut})),n.d(t,"A",(function(){return je})),n.d(t,"B",(function(){return A})),n.d(t,"C",(function(){return st})),n.d(t,"D",(function(){return pt})),n.d(t,"E",(function(){return dt})),n.d(t,"F",(function(){return mt})),n.d(t,"G",(function(){return ht})),n.d(t,"H",(function(){return yt}));let r=g();const o=e=>h(e,r);let a=g();o.write=e=>h(e,a);let i=g();o.onStart=e=>h(e,i);let c=g();o.onFrame=e=>h(e,c);let l=g();o.onFinish=e=>h(e,l);let u=[];o.setTimeout=(e,t)=>{let n=o.now()+t,r=()=>{let e=u.findIndex((e=>e.cancel==r));~e&&u.splice(e,1),p-=~e?1:0},a={time:n,handler:e,cancel:r};return u.splice(s(n),0,a),p+=1,v(),a};let s=e=>~(~u.findIndex((t=>t.time>e))||~u.length);o.cancel=e=>{i.delete(e),c.delete(e),l.delete(e),r.delete(e),a.delete(e)},o.sync=e=>{m=!0,o.batchedUpdates(e),m=!1},o.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,o.onStart(n)}return r.handler=e,r.cancel=()=>{i.delete(n),t=null},r};let d="undefined"!=typeof window?window.requestAnimationFrame:()=>{};o.use=e=>d=e,o.now="undefined"!=typeof performance?()=>performance.now():Date.now,o.batchedUpdates=e=>e(),o.catch=console.error,o.frameLoop="always",o.advance=()=>{"demand"!==o.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):b()};let f=-1,p=0,m=!1;function h(e,t){m?(t.delete(e),e(0)):(t.add(e),v())}function v(){f<0&&(f=0,"demand"!==o.frameLoop&&d(y))}function y(){~f&&(d(y),o.batchedUpdates(b))}function b(){let e=f;f=o.now();let t=s(f);t&&(_(u.splice(0,t),(e=>e.handler())),p-=t),p?(i.flush(),r.flush(e?Math.min(64,f-e):16.667),c.flush(),a.flush(),l.flush()):f=-1}function g(){let e=new Set,t=e;return{add(n){p+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(p-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,p-=t.size,_(t,(t=>t(n)&&e.add(t))),p+=e.size,t=e)}}}function _(e,t){e.forEach((e=>{try{t(e)}catch(e){o.catch(e)}}))}var E=n(0);function w(){}const O=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),k={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function S(e,t){if(k.arr(e)){if(!k.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}const N=(e,t)=>e.forEach(t);function x(e,t,n){if(k.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const A=e=>k.und(e)?[]:k.arr(e)?e:[e];function P(e,t){if(e.size){const n=Array.from(e);e.clear(),N(n,t)}}const C=(e,...t)=>P(e,(e=>e(...t))),j=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let T,I,M=null,L=!1,R=w;const D=e=>{e.to&&(I=e.to),e.now&&(o.now=e.now),void 0!==e.colors&&(M=e.colors),null!=e.skipAnimation&&(L=e.skipAnimation),e.createStringInterpolator&&(T=e.createStringInterpolator),e.requestAnimationFrame&&o.use(e.requestAnimationFrame),e.batchedUpdates&&(o.batchedUpdates=e.batchedUpdates),e.willAdvance&&(R=e.willAdvance),e.frameLoop&&(o.frameLoop=e.frameLoop)};var U=Object.freeze({__proto__:null,get createStringInterpolator(){return T},get to(){return I},get colors(){return M},get skipAnimation(){return L},get willAdvance(){return R},assign:D});const B=new Set;let z=[],F=[],V=0;const G={get idle(){return!B.size&&!z.length},start(e){V>e.priority?(B.add(e),o.onStart(Y)):($(e),o(W))},advance:W,sort(e){if(V)o.onFrame((()=>G.sort(e)));else{const t=z.indexOf(e);~t&&(z.splice(t,1),q(e))}},clear(){z=[],B.clear()}};function Y(){B.forEach($),B.clear(),o(W)}function $(e){z.includes(e)||q(e)}function q(e){z.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(z,(t=>t.priority>e.priority)),0,e)}function W(e){const t=F;for(let n=0;n<z.length;n++){const r=z[n];V=r.priority,r.idle||(R(r),r.advance(e),r.idle||t.push(r))}return V=0,F=z,F.length=0,z=t,z.length>0}const H={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},K="[-+]?\\d*\\.?\\d+",Z=K+"%";function Q(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const X=new RegExp("rgb"+Q(K,K,K)),J=new RegExp("rgba"+Q(K,K,K,K)),ee=new RegExp("hsl"+Q(K,Z,Z)),te=new RegExp("hsla"+Q(K,Z,Z,K)),ne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oe=/^#([0-9a-fA-F]{6})$/,ae=/^#([0-9a-fA-F]{8})$/;function ie(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ce(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,a=ie(o,r,e+1/3),i=ie(o,r,e),c=ie(o,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*i)<<16|Math.round(255*c)<<8}function le(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function ue(e){return(parseFloat(e)%360+360)%360/360}function se(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function de(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function fe(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=oe.exec(e))?parseInt(t[1]+"ff",16)>>>0:M&&void 0!==M[e]?M[e]:(t=X.exec(e))?(le(t[1])<<24|le(t[2])<<16|le(t[3])<<8|255)>>>0:(t=J.exec(e))?(le(t[1])<<24|le(t[2])<<16|le(t[3])<<8|se(t[4]))>>>0:(t=ne.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ae.exec(e))?parseInt(t[1],16)>>>0:(t=re.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ee.exec(e))?(255|ce(ue(t[1]),de(t[2]),de(t[3])))>>>0:(t=te.exec(e))?(ce(ue(t[1]),de(t[2]),de(t[3]))|se(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const pe=(e,t,n)=>{if(k.fun(e))return e;if(k.arr(e))return pe({range:e,output:t,extrapolate:n});if(k.str(e.output[0]))return T(e);const r=e,o=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",c=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,o,a,i,c,l){let u=l?l(e):e;if(u<t){if("identity"===i)return u;"clamp"===i&&(u=t)}if(u>n){if("identity"===c)return u;"clamp"===c&&(u=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=a(u),r===-1/0?u=-u:o===1/0?u+=r:u=u*(o-r)+r;return u}(e,a[t],a[t+1],o[t],o[t+1],l,i,c,r.map)}};const me=1.70158,he=1.525*me,ve=me+1,ye=2*Math.PI/3,be=2*Math.PI/4.5,ge=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},_e={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ve*e*e*e-me*e*e,easeOutBack:e=>1+ve*Math.pow(e-1,3)+me*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-he)/2:(Math.pow(2*e-2,2)*((he+1)*(2*e-2)+he)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*ye),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*ye)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*be)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*be)/2+1,easeInBounce:e=>1-ge(1-e),easeOutBounce:ge,easeInOutBounce:e=>e<.5?(1-ge(1-2*e))/2:(1+ge(2*e-1))/2,steps:(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,o="end"===t?Math.floor(r):Math.ceil(r);return a=0,i=1,c=o/e,Math.min(Math.max(c,a),i);var a,i,c}};function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}const we=Symbol.for("FluidValue.get"),Oe=Symbol.for("FluidValue.observers"),ke=e=>Boolean(e&&e[we]),Se=e=>e&&e[we]?e[we]():e,Ne=e=>e[Oe]||null;function xe(e,t){let n=e[Oe];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}class Ae{constructor(e){if(this[we]=void 0,this[Oe]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Pe(this,e)}}const Pe=(e,t)=>Te(e,we,t);function Ce(e,t){if(e[we]){let n=e[Oe];n||Te(e,Oe,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function je(e,t){let n=e[Oe];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Oe]=null,e.observerRemoved&&e.observerRemoved(r,t)}}const Te=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Ie=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Me=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Le=new RegExp(`(${Ie.source})(%|[a-z]+)`,"i"),Re=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,De=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ue=e=>{const[t,n]=Be(e);if(!t||j())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&De.test(n)?Ue(n):n||e},Be=e=>{const t=De.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let ze;const Fe=(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,Ve=e=>{ze||(ze=M?new RegExp(`(${Object.keys(M).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Se(e).replace(De,Ue).replace(Me,fe).replace(ze,fe))),n=t.map((e=>e.match(Ie).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>pe(Ee({},e,{output:t}))));return e=>{var n;const o=!Le.test(t[0])&&(null==(n=t.find((e=>Le.test(e))))?void 0:n.replace(Ie,""));let a=0;return t[0].replace(Ie,(()=>`${r[a++](e)}${o||""}`)).replace(Re,Fe)}},Ge="react-spring: ",Ye=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${Ge}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},$e=Ye(console.warn);function qe(){$e(`${Ge}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const We=Ye(console.warn);function He(){We(`${Ge}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Ke(e){return k.str(e)&&("#"==e[0]||/\d/.test(e)||!j()&&De.test(e)||e in(M||{}))}let Ze;const Qe=new WeakMap,Xe=e=>e.forEach((({target:e,contentRect:t})=>{var n;return null==(n=Qe.get(e))?void 0:n.forEach((e=>e(t)))}));const Je=new Set;let et;const tt=e=>(Je.add(e),et||(et=(()=>{const e=()=>{Je.forEach((e=>e({width:window.innerWidth,height:window.innerHeight})))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})()),()=>{Je.delete(e),!Je.size&&et&&(et(),et=void 0)}),nt=(e,{container:t=document.documentElement}={})=>t===document.documentElement?tt(e):function(e,t){Ze||"undefined"!=typeof ResizeObserver&&(Ze=new ResizeObserver(Xe));let n=Qe.get(t);return n||(n=new Set,Qe.set(t,n)),n.add(e),Ze&&Ze.observe(t),()=>{const n=Qe.get(t);n&&(n.delete(e),!n.size&&Ze&&Ze.unobserve(t))}}(e,t),rt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class ot{constructor(e,t){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{const t=this.info[e],{length:n,position:r}=rt[e];var o,a,i;t.current=this.container[`scroll${r}`],t.scrollLength=this.container["scroll"+n]-this.container["client"+n],t.progress=(o=0,a=t.scrollLength,i=t.current,a-o==0?1:(i-o)/(a-o))},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const at=new WeakMap,it=new WeakMap,ct=new WeakMap,lt=e=>e===document.documentElement?window:e,ut=(e,{container:t=document.documentElement}={})=>{let n=ct.get(t);n||(n=new Set,ct.set(t,n));const r=new ot(e,t);if(n.add(r),!at.has(t)){const e=()=>{var e;return null==(e=n)||e.forEach((e=>e.advance())),!0};at.set(t,e);const r=lt(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&it.set(t,nt(e,{container:t})),r.addEventListener("scroll",e,{passive:!0})}const a=at.get(t);return o(a),()=>{o.cancel(a);const e=ct.get(t);if(!e)return;if(e.delete(r),e.size)return;const n=at.get(t);var i;(at.delete(t),n)&&(lt(t).removeEventListener("scroll",n),window.removeEventListener("resize",n),null==(i=it.get(t))||i())}};function st(e){const t=Object(E.useRef)(null);return null===t.current&&(t.current=e()),t.current}const dt=j()?E.useEffect:E.useLayoutEffect,ft=()=>{const e=Object(E.useRef)(!1);return dt((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function pt(){const e=Object(E.useState)()[1],t=ft();return()=>{t.current&&e(Math.random())}}function mt(e,t){const[n]=Object(E.useState)((()=>({inputs:t,result:e()}))),r=Object(E.useRef)(),o=r.current;let a=o;if(a){Boolean(t&&a.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.inputs))||(a={inputs:t,result:e()})}else a=n;return Object(E.useEffect)((()=>{r.current=a,o==n&&(n.inputs=n.result=void 0)}),[a]),a.result}const ht=e=>Object(E.useEffect)(e,vt),vt=[];function yt(e){const t=Object(E.useRef)();return Object(E.useEffect)((()=>{t.current=e})),t.current}},3653:function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)o(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){var t,n,r,o,a,i;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(i=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)a=e[t],i.set(a,o),o+=a.length;return i}},i={arraySet:function(e,t,n,r,o){for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},3655:function(e,t,n){"use strict";n.d(t,"animated",(function(){return O}));var r=n(3688);n.o(r,"Globals")&&n.d(t,"Globals",(function(){return r.Globals})),n.o(r,"useSpring")&&n.d(t,"useSpring",(function(){return r.useSpring})),n.o(r,"useTransition")&&n.d(t,"useTransition",(function(){return r.useTransition}));var o=n(78),a=n(3645),i=n(3733);function c(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const l=["style","children","scrollTop","scrollLeft","viewBox"],u=/^--/;function s(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||u.test(e)||f.hasOwnProperty(e)&&f[e]?(""+t).trim():t+"px"}const d={};let f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const p=["Webkit","Ms","Moz","O"];f=Object.keys(f).reduce(((e,t)=>(p.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),f);const m=["x","y","z"],h=/^(matrix|translate|scale|rotate|skew)/,v=/^(translate)/,y=/^(rotate|skew)/,b=(e,t)=>a.t.num(e)&&0!==e?e+t:e,g=(e,t)=>a.t.arr(e)?e.every((e=>g(e,t))):a.t.num(e)?e===t:parseFloat(e)===t;class _ extends i.a{constructor(e){let{x:t,y:n,z:r}=e,o=c(e,m);const i=[],l=[];(t||n||r)&&(i.push([t||0,n||0,r||0]),l.push((e=>[`translate3d(${e.map((e=>b(e,"px"))).join(",")})`,g(e,0)]))),Object(a.l)(o,((e,t)=>{if("transform"===t)i.push([e||""]),l.push((e=>[e,""===e]));else if(h.test(t)){if(delete o[t],a.t.und(e))return;const n=v.test(t)?"px":y.test(t)?"deg":"";i.push(Object(a.B)(e)),l.push("rotate3d"===t?([e,t,r,o])=>[`rotate3d(${e},${t},${r},${b(o,n)})`,g(o,0)]:e=>[`${t}(${e.map((e=>b(e,n))).join(",")})`,g(e,t.startsWith("scale")?1:0)])}})),i.length&&(o.transform=new E(i,l)),super(o)}}class E extends a.a{constructor(e,t){super(),this._value=null,this.inputs=e,this.transforms=t}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Object(a.k)(this.inputs,((n,r)=>{const o=Object(a.r)(n[0]),[i,c]=this.transforms[r](a.t.arr(o)?o:n.map(a.r));e+=" "+i,t=t&&c})),t?"none":e}observerAdded(e){1==e&&Object(a.k)(this.inputs,(e=>Object(a.k)(e,(e=>Object(a.s)(e)&&Object(a.c)(e,this)))))}observerRemoved(e){0==e&&Object(a.k)(this.inputs,(e=>Object(a.k)(e,(e=>Object(a.s)(e)&&Object(a.A)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),Object(a.d)(this,e)}}const w=["scrollTop","scrollLeft"];r.Globals.assign({batchedUpdates:o.unstable_batchedUpdates,createStringInterpolator:a.g,colors:a.e});const O=Object(i.d)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t,{style:o,children:a,scrollTop:i,scrollLeft:f,viewBox:p}=r,m=c(r,l),h=Object.values(m),v=Object.keys(m).map((t=>n||e.hasAttribute(t)?t:d[t]||(d[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==a&&(e.textContent=a);for(let t in o)if(o.hasOwnProperty(t)){const n=s(t,o[t]);u.test(t)?e.style.setProperty(t,n):e.style[t]=n}v.forEach(((t,n)=>{e.setAttribute(t,h[n])})),void 0!==i&&(e.scrollTop=i),void 0!==f&&(e.scrollLeft=f),void 0!==p&&e.setAttribute("viewBox",p)},createAnimatedStyle:e=>new _(e),getComponentProps:e=>c(e,w)}).animated},3657:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=!("undefined"==typeof window||"undefined"==typeof document||!window.document||!window.document.createElement)},3658:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function o(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function a(e,t,n,r=.15){return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-o(t-e,n-t,r)+t:e>n?+o(e-n,n-t,r)+n:e}function i(e,[t,n],[r,o]){const[[i,c],[l,u]]=e;return[a(t,i,c,r),a(n,l,u,o)]}},366:function(e,t,n){"use strict";var r=n(495);n.d(t,"a",(function(){return r.a}))},3661:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3641);const i="adm-auto-center";t.a=e=>Object(a.a)(e,o.a.createElement("div",{className:i},o.a.createElement("div",{className:`${i}-content`},e.children)))},3662:function(e,t,n){"use strict";var r=n(3641),o=n(0),a=n.n(o),i=n(4170),c=n(3693),l=n(3655),u=n(3698),s=n(3639),d=n(4185),f=n(3697),p=n(3689);const m="adm-mask",h={default:.55,thin:.35,thick:.75},v={black:"0, 0, 0",white:"255, 255, 255"},y={visible:!0,destroyOnClose:!1,forceRender:!1,color:"black",opacity:"default",disableBodyScroll:!0,getContainer:null,stopPropagation:["click"]};t.a=e=>{const t=Object(s.b)(y,e),{locale:n}=Object(d.b)(),b=Object(o.useRef)(null);Object(c.a)(b,t.visible&&t.disableBodyScroll);const g=Object(o.useMemo)((()=>{var e;const n=null!==(e=h[t.opacity])&&void 0!==e?e:t.opacity,r=v[t.color];return r?`rgba(${r}, ${n})`:t.color}),[t.color,t.opacity]),[_,E]=Object(o.useState)(t.visible),w=Object(i.a)(),{opacity:O}=Object(l.useSpring)({opacity:t.visible?1:0,config:{precision:.01,mass:1,tension:250,friction:30,clamp:!0},onStart:()=>{E(!0)},onRest:()=>{var e,n;w.current||(E(t.visible),t.visible?null===(e=t.afterShow)||void 0===e||e.call(t):null===(n=t.afterClose)||void 0===n||n.call(t))}}),k=Object(p.a)(t.stopPropagation,Object(r.a)(t,a.a.createElement(l.animated.div,{className:m,ref:b,"aria-hidden":!0,style:Object.assign(Object.assign({},t.style),{background:g,opacity:O,display:_?void 0:"none"}),onClick:e=>{var n;e.target===e.currentTarget&&(null===(n=t.onMaskClick)||void 0===n||n.call(t,e))}},t.onMaskClick&&a.a.createElement("div",{className:`${m}-aria-button`,role:"button","aria-label":n.Mask.name,onClick:t.onMaskClick}),a.a.createElement("div",{className:`${m}-content`},t.children))));return a.a.createElement(f.a,{active:_,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},Object(u.a)(t.getContainer,k))}},3668:function(e,t,n){"use strict";n(48);var r=n(11),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(1427),u=n.n(l),s=n(157),d=n(84),f=n(54),p=n(74),m=n(3975),h=n(47),v=n(958),y=(n(67),n(31)),b=(n(40),n(9)),g=n(1020),_=n(3759);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){var t,n,r=e.me,i=e.visible,c=e.handleClose,l=e.onConfirm,u=e.targetUserId,d=e.h5Confirm,m=window.appData.isYuqueMobileApp,h=p.MEMBER_RULE.User[null!==(t=null==r?void 0:r.member_level)&&void 0!==t?t:f.MEMBER_LEVEL.free][p.LIMIT_RULE_CODE.max_book_number],v=!u||u===r.id,E=null!=r&&r.hasMemberLevel?__("续费"):__("开通");return n=v?__("你的知识库数量已达到免费上限 {limit} 个，无法继续新建，{buyText}会员可享无限量知识库创建，以及多种格式文件预览、视频上传等功能",{limit:h,buyText:E}):__("知识库所有者知识库数量已达到免费上限 {limit} 个，无法继续新建，联系 Ta 开通语雀会员，享受无限知识库数。",{limit:h}),Object(o.useEffect)((function(){if(i&&Object(s.spmClick)("c126274.d262021",{pay_source:p.LIMIT_SCENE.max_book_number,organization_id:0}),i&&m&&d){var e=p.LIMIT_SCENE.max_book_number,t={onConfirm:function(){window.location.href="/r/mobile_app/package?paySource=".concat(e)},confirmText:__("购买会员"),cancelText:__("以后再说")};g.a.isIOS()&&(t={onConfirm:function(){window.location.href="https://www.yuque.com/yuque/ng1qth/member-privilege"},confirmText:__("了解会员"),cancelText:__("以后再说")}),d.show(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:__("知识库超免费上限，无法新建"),contentRender:{render:function(){return a.a.createElement("div",{className:_.a.mobile},a.a.createElement("div",{className:_.a.limitFigure},a.a.createElement("div",{className:_.a.leftTopPos},"0"),a.a.createElement("div",{className:_.a.midTopPos},h,__("个")),a.a.createElement("div",{className:_.a.rightTopPos},__("{buyText}会员可享无限量",{buyText:E})),a.a.createElement("div",{className:_.a.midBottomPos},__("免费上限"))),a.a.createElement("p",{className:_.a.desc},__("知识库数量已达到免费上限 {limit} 个，购买会员可畅享无限量知识库，以及多种格式文件预览、视频上传等功能。",{limit:h})))}}},t))}}),[i]),a.a.createElement(y.a,{className:_.a.modal,visible:i&&!m,onCancel:c,header:null,footer:null,width:480,maskClosable:!1,centered:!0},a.a.createElement("div",{className:_.a.content,"data-testid":"doc-note-limit-content"},a.a.createElement("h1",null,__("知识库数量已达上限，无法继续新建，"),v&&__("{buyText}会员享无限知识库数",{buyText:E})),a.a.createElement("p",null,n),a.a.createElement("div",{className:_.a.limitFigure},a.a.createElement("div",{className:_.a.leftTopPos},"0"),a.a.createElement("div",{className:_.a.midTopPos},h,__("个")),a.a.createElement("div",{className:_.a.rightTopPos},__("{buyText}会员可享无限知识库创建",{buyText:E})),a.a.createElement("div",{className:_.a.midBottomPos},__("已达免费上限"))),a.a.createElement("div",{className:_.a.footer},a.a.createElement("div",{className:_.a.footerAction},v?a.a.createElement(a.a.Fragment,null,a.a.createElement(b.a,{className:_.a.actionBtn,onClick:c},__("取消")),a.a.createElement(b.a,{"data-testid":"buy-button",className:_.a.actionBtn,type:"primary",onClick:function(){c(),l()}},null!=r&&r.hasMemberLevel?__("立即续费"):__("购买会员"))):a.a.createElement(a.a.Fragment,null,a.a.createElement(b.a,{className:_.a.actionBtn,type:"primary",onClick:c},__("我知道了")))))))};k.propTypes={me:c.a.object.isRequired,handleClose:c.a.func.isRequired,onConfirm:c.a.func};var S=k,N=n(34),x=(n(277),n(147)),A=n(5),P=n.n(A),C="paymodal-module_payModalContainer_-7P4F",j="paymodal-module_pricingContainer_IE8kt",T="paymodal-module_qrcodeContainer_aNOA5",I="paymodal-module_qrcodeImage_PfP82",M="paymodal-module_desc1_v1ln1",L="paymodal-module_qrcodeImageCon_wmICV",R="paymodal-module_alipayIconInQrCode_aiQkc",D="paymodal-module_qrcodeCon_b5rk3",U="paymodal-module_qrcodeTitleCon_UKj+0",B="paymodal-module_qrcodeTitleDesc_cUN4K",z="paymodal-module_qrcodeTitleValue_4k4b0";function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}function Y(e,t,n){return t=q(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}var H=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,t,[e])).state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onClose,r=e.onCancel,o=e.qrCodeUrl,i=e.totalAmount;return a.a.createElement(y.a,{className:C,title:__("扫码支付"),visible:t,maskClosable:!1,onCancel:r,afterClose:n,footer:null,width:500,centered:!0,zIndex:9999},a.a.createElement("div",{className:j},a.a.createElement("div",{className:T},a.a.createElement("div",{className:U},a.a.createElement("p",{className:B},__("扫一扫付款 (元)")),a.a.createElement("p",{className:z},i)),a.a.createElement("div",{className:L},o?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:P()(R,"alipay-payment-icon")},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),a.a.createElement("div",{className:D},a.a.createElement("img",{className:I,src:o}))):a.a.createElement(x.a,{size:"small"})),a.a.createElement("div",{className:M},__("打开手机支付宝，扫一扫付款")))))}}])&&V(n.prototype,r),o&&V(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(o.PureComponent);H.propTypes={visible:c.a.bool,onClose:c.a.func,onCancel:c.a.func,qrCodeUrl:c.a.string,totalAmount:c.a.string};var K=H,Z=(n(227),n(101)),Q=(n(589),n(206)),X=(n(188),n(32)),J=n(14),ee=n.n(J),te=n(369),ne=n.n(te),re=n(63),oe=n(1222),ae=n(1432),ie=n(229),ce={memberBuyModalContainer:"membermodal-module_memberBuyModalContainer_XeZ7t",docCountFigure:"membermodal-module_docCountFigure_32PxF",rightArea:"membermodal-module_rightArea_AY+Cs",memberBuyUploadModalContainer:"membermodal-module_memberBuyUploadModalContainer_-bTXH",desc:"membermodal-module_desc_JofNr",link:"membermodal-module_link_GhyiF",inputNumber:"membermodal-module_inputNumber_iepWR",select:"membermodal-module_select_u4Ura",tips:"membermodal-module_tips_hkMrX",titleTips:"membermodal-module_titleTips_oWQ8t",payWith:"membermodal-module_payWith_tqEUb",payWithAlipayIcon:"membermodal-module_payWithAlipayIcon_o9Nmb",payWithAlipayText:"membermodal-module_payWithAlipayText_PWm4b",dashline:"membermodal-module_dashline_jMarO",priceTag:"membermodal-module_priceTag_q1DEj",hasDiscount:"membermodal-module_hasDiscount_08fuh",discountPrice:"membermodal-module_discountPrice_NqF1r",discountPriceValue:"membermodal-module_discountPriceValue_a83du",memberModalButtonCon:"membermodal-module_memberModalButtonCon_6vKEz",memberModalAgreeButton:"membermodal-module_memberModalAgreeButton_NdbXC",memberModalTermsButton:"membermodal-module_memberModalTermsButton_jCPs1",uploadPackages:"membermodal-module_uploadPackages_GOTDj",uploadPackageCard:"membermodal-module_uploadPackageCard_1RD0r",selectedUploadCard:"membermodal-module_selectedUploadCard_VMSYV",uploadSize:"membermodal-module_uploadSize_t-9U2",uploadPackagePrice:"membermodal-module_uploadPackagePrice_YwF2+",memberUpgradeModalContainer:"membermodal-module_memberUpgradeModalContainer_pOAjj",leftArea:"membermodal-module_leftArea_7ORzO",viewMore:"membermodal-module_viewMore_WkMOe",total:"membermodal-module_total_+M0ck",text:"membermodal-module_text_orjhF",descList:"membermodal-module_descList_LiQqP",rightsList:"membermodal-module_rightsList_ljdl2",rightItem:"membermodal-module_rightItem_dOcB7",rightItemIconWrapper:"membermodal-module_rightItemIconWrapper_tZMu0",rightItemIcon:"membermodal-module_rightItemIcon_4gCmi",rightItemText:"membermodal-module_rightItemText_Y4zbF",rightItemTitle:"membermodal-module_rightItemTitle_oryDc",rightItemCont:"membermodal-module_rightItemCont_nP1+J",row:"membermodal-module_row_5uTr+",rowLabel:"membermodal-module_rowLabel_0Ae0H",payDetail:"membermodal-module_payDetail_jiCmc",rowCon:"membermodal-module_rowCon_rkuw0",rightAreaInfo:"membermodal-module_rightAreaInfo_FLyOt",title:"membermodal-module_title_y0sTR",package:"membermodal-module_package_H834F",packageDesc:"membermodal-module_packageDesc_bvGFI",packageList:"membermodal-module_packageList_NMR0b",packageItem:"membermodal-module_packageItem_OyxZC",selected:"membermodal-module_selected_TQf6j",disabled:"membermodal-module_disabled_WEWJJ",canNotSelect:"membermodal-module_canNotSelect_JGR1f",body:"membermodal-module_body_hZbtu",header:"membermodal-module_header_Uw4oS",withDiscount:"membermodal-module_withDiscount_TPrbn",showDetailRight:"membermodal-module_showDetailRight_0rol4",right:"membermodal-module_right_pFVL7",detailRights:"membermodal-module_detailRights_Al4vh",discountBadge:"membermodal-module_discountBadge_KJ2Kc",headerIcon:"membermodal-module_headerIcon_ylijA",priceArea:"membermodal-module_priceArea_w0YHS",price:"membermodal-module_price_6JXHp",originalPrice:"membermodal-module_originalPrice_qBFT8",showMore:"membermodal-module_showMore_4dDVE",detailRight:"membermodal-module_detailRight_L0lYH",rightChecked:"membermodal-module_rightChecked_7I7eX",verifyBtn:"membermodal-module_verifyBtn_Jb2go",line:"membermodal-module_line_-4HSJ",totalInfo:"membermodal-module_totalInfo_lKVo+",agreeButton:"membermodal-module_agreeButton_vl5tY",confirmPayBtn:"membermodal-module_confirmPayBtn_rnhOw",memberBuyModalH5Container:"membermodal-module_memberBuyModalH5Container_9ZOm4",selectTip:"membermodal-module_selectTip_4qIX9"};function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fe=X.a.Option,pe=function(e){var t,n,i=e.visible,c=e.onClose,l=e.startToPay,u=e.code,s=e.isRenew,m=e.isUpgrade,g=e.upgradePackageType,_=e.isBuyUpload,E=e.packageType,w=e.handlePackageTypeChange,O=e.duration,k=e.handleDurationChange,S=e.uploadSize,N=e.onSelectUploadSize,A=e.buyLoading,C=e.promoCode,j=e.setPromoCode,T=e.setPromoCodeInvalid,I=e.title,M=e.desc,L=se(Object(o.useState)(e.user),2),R=L[0],D=L[1],U=se(Object(o.useState)(!1),2),B=U[0],z=U[1],F=se(Object(o.useState)(),2),V=F[0],G=F[1],Y=se(Object(o.useState)(),2),$=Y[0],q=Y[1],W=se(Object(o.useState)([]),2),H=W[0],K=W[1],J=se(Object(o.useState)(null),2),te=J[0],le=J[1],de=se(Object(o.useState)(ee()().format("YYYY-MM-DD")),2),pe=de[0],me=de[1],he=se(Object(o.useState)(!0),2),ve=he[0],ye=he[1],be=se(Object(o.useState)(0),2),ge=be[0],_e=be[1],Ee=se(Object(o.useState)(0),2),we=Ee[0],Oe=Ee[1],ke=se(Object(o.useState)(!1),2),Se=ke[0],Ne=ke[1],xe=se(Object(o.useState)(d.PERSORNAL_MEMBER_DSICOUNT_START_TIME),2),Ae=xe[0],Pe=xe[1],Ce=se(Object(o.useState)(d.PERSORNAL_MEMBER_DSICOUNT_END_TIME),2),je=Ce[0],Te=Ce[1],Ie=se(Object(o.useState)(d.PERSORNAL_MEMBER_DSICOUNT_TEXT),2),Me=Ie[0],Le=Ie[1],Re=se(Object(o.useState)(d.PERSORNAL_MEMBER_DSICOUNT_TEXT),2),De=Re[0],Ue=Re[1],Be=se(Object(o.useState)(),2),ze=Be[0],Fe=Be[1],Ve=se(Object(o.useState)(),2),Ge=Ve[0],Ye=Ve[1],$e=se(Object(o.useState)(!1),2),qe=$e[0],We=$e[1],He=R.expired_at,Ke=R.hasMemberLevel,Ze=!!He&&ee()().isAfter(ee()(He)),Qe=Ze||!He?ee()().endOf("day"):ee()(He),Xe=ee()().isAfter(ee()(Ae))&&ee()().isBefore(ee()(je)),Je=v.a.isGroupOrPublication(R),et=function(){qe?l():y.a.confirm({title:__("语雀付费服务协议"),zIndex:1011,content:__("为了更好保障你的合法权益，请阅读并同意{agreements}",{agreements:a.a.createElement("a",{target:"_blank",href:"/payment-terms"},__("《语雀付费服务协议》"))}),okText:__("同意"),cancelText:__("不同意"),onOk:function(){We(!0),l()}})},tt=function(e){var t=e.target.checked;We(t)},nt=function(){return m?f.ORDER_TYPE.upgrade:s&&!Ze?f.ORDER_TYPE.renew:f.ORDER_TYPE.buy},rt=function(){z(!0),G(null);var e=nt();h.a.memberPay.amount({order_type:e,duration:O,package_type:E,promo_code:C},{useOriginResp:!0}).then((function(e){var t=e.data,n=e.meta;R.expired_at=n.user.expired_at,D(R),z(!1),G(t.totalAmount),K(t.details),q(t.discountAmount),T(0==+t.couponAmount)})).catch((function(){r.a.warn(__("加载失败"))}))},ot=Object(ie.a)(rt,500);if(Object(o.useEffect)((function(){_||(h.a.memberPay.discount({user_id:R.id}).then((function(e){Ne(e.hasDiscount),Ye(e.activityAmount),Fe(e.professionalActivityAmount),Pe(e.activityStartTime),Te(e.activityEndTime),Le(e.activityText),Ue(e.professionalActivityText)})),h.a.memberPay.honor({start_date:ee()().subtract(1,"year").valueOf(),end_date:ee()().valueOf()},{useOriginResp:!0}).then((function(e){if(null!=e&&e.data){var t=e.data,n=t.day,r=t.count,o=t.totalCount;ye(!1),me(n),_e(r),Oe(o)}})),null!=R&&R.isPaid||!s||g||(w(f.MEMBER_LEVEL.member_level_1),j(null)))}),[]),Object(o.useEffect)((function(){_||Je||ot()}),[O,E,C,R]),_)t=1024===S?1e4:10*S;else if(Je){var at=d.MEMBER_GROUP_FULL_AMOUNT;if(t=at*O,Se){var it=d.MEMBER_GROUP_BASE_AMOUNT;n=t+it-at}}var ct,lt=Object(ae.a)({totalAmount:Se?n:t,setPromoCode:j,afterVerifySuccess:rt}),ut=lt.totalAmountWithPromo,st=lt.onVerifySuccess,dt=lt.handlePromoChange,ft=function(){if(Je)return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,__("总计")),a.a.createElement("div",{className:ce.totalInfo},a.a.createElement("span",{className:P()(ce.priceTag,ue({},ce.hasDiscount,Se||ut))},t," 元"),(Se||ut)&&a.a.createElement("span",{className:ce.discountPrice,"data-testid":"discount-price"},Se&&Xe&&!Je?__(Me):__("优惠价")," ",a.a.createElement("span",{className:ce.discountPriceValue},ut||n)," 元")));var e=$!==V;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ce.rowLabel},a.a.createElement("h3",null,__("总计"))),a.a.createElement("div",{className:ce.rowCon},a.a.createElement("div",{className:ce.totalInfo},a.a.createElement("span",{className:ce.priceTag},"¥",e?$:V))))};if(m&&!g)throw Error("upgradePackageType should be set when isUpgrade is true");return a.a.createElement(y.a,{className:"member-modal",title:I||ne()(_?__("购买上传流量"):Je?s?__("高级版团队续费"):__("升级高级版团队"):null),visible:i,maskClosable:!1,closable:!0,onCancel:c,footer:null,centered:!0,width:_||Je?500:m?420:860,zIndex:1010},a.a.createElement(x.a,{spinning:B,delay:200},_&&a.a.createElement("div",{"data-testid":"member-modal",className:ce.memberBuyUploadModalContainer},a.a.createElement("div",{className:ce.desc},function(){if(M)return M;if(_)return Je?__("流量购买后对{name}知识小组账户长期有效",{name:R.name}):__("流量购买后对{name}个人账户长期有效",{name:R.name});if(Je){var e=R.members_count;return s&&He&&ee()()<ee()(He)?__("当前团队 {members_count} 人，剩余有效期 {remain} 天",{members_count:e,remain:ee()(He).diff(ee()(),"day")||1}):a.a.createElement(a.a.Fragment,null,__("支持更多成员、无限量知识库、大文件上传等专享权益"),a.a.createElement("a",{className:ce.link,target:"_blank",href:p.LINKS.EXTERNAL_GROUP_INTRO_LINK},__("了解更多")))}return null}()),a.a.createElement("h3",null,__("流量包")),a.a.createElement("div",{className:ce.uploadPackages},d.MEMBER_UPLOAD_SIZE_ARR.map((function(e){return a.a.createElement("div",{key:e,className:P()(ce.uploadPackageCard,ue({},ce.selectedUploadCard,S===e)),onClick:function(){return N(e)}},a.a.createElement("div",{className:ce.uploadSize},e,"GB"),a.a.createElement("div",{className:ce.uploadPackagePrice},1024===e?1e4:10*e," ",__("元")))}))),a.a.createElement("h3",null,__("支付方式")),a.a.createElement("div",{className:ce.payWith},a.a.createElement("img",{className:ce.payWithAlipayIcon,src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*5UvZRblzue4AAAAAAAAAAAAAARQnAQ"}),a.a.createElement("span",{className:ce.payWithAlipayText},__("支付宝"))),a.a.createElement("h3",null,__("优惠码")),a.a.createElement("div",{className:ce.inputNumber},a.a.createElement(oe.a,{value:C,promoUsage:"member",onChange:dt,onVerifySuccess:st})),a.a.createElement("p",{className:ce.dashline}),ft(),a.a.createElement("div",{className:ce.memberModalButtonCon},a.a.createElement(b.a,{"data-aspm-click":"click-pay","data-aspm-param":u?"code=".concat(u):"code=member-modal",type:"primary",onClick:et,loading:A},__("立即支付")),a.a.createElement("span",{className:"member-modal-h5-agree"},a.a.createElement("div",{className:ce.memberModalAgreeButton},a.a.createElement(Q.a,{onChange:tt})," ",a.a.createElement("span",null,__("同意"))),a.a.createElement("a",{className:ce.memberModalTermsButton,target:"_blank",href:"/payment-terms"},"《",__("语雀付费服务协议"),"》")))),!_&&(ct=Ke?__("确认续费"):__("确认购买"),ct=m?__("确认升级"):ct,a.a.createElement("div",{"data-testid":"member-modal",className:P()(ue(ue(ue(ue({},ce.memberBuyModalContainer,!m),ce.memberBuyModalH5Container,!m&&window.h5),ce.memberBuyModalIsRenew,Ke),ce.memberUpgradeModalContainer,m))},!m&&!window.h5&&a.a.createElement("div",{className:ce.leftArea},function(){var e;if(ve)return null;if(Ke)return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,a.a.createElement("p",null,__("你已经在语雀耕耘知识 {days} 天，",{days:ee()().diff(ee()(R.created_at),"d")+1})),a.a.createElement("p",null,__("积累了 {docAndNotesCount} 篇文稿",{docAndNotesCount:we}))),a.a.createElement("div",{className:ce.descList},ge?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,__("你最高产的一天是在 {day}，更新了 {count} 篇文稿",{day:pe,count:ge})),a.a.createElement("p",null,__("此刻的你是否还记得当时的文思泉涌？"))):a.a.createElement(a.a.Fragment,null),a.a.createElement("p",null,__("知识是宝贵的财富，愿语雀一直陪你积累知识财富"))),a.a.createElement("div",{className:ce.docCountFigure},a.a.createElement("span",{className:ce.total},__("{total} 篇文稿",{total:we})),a.a.createElement("span",{className:ce.text},__("我的知识财富"))));var t=null===(e=window.appData)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.member_buy_ad;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,__("开通语雀会员，解锁超值权益")),a.a.createElement("a",{className:ce.viewMore,href:"https://www.yuque.com/about/price",target:"_blank"},a.a.createElement("span",null,__("查看完整权益介绍")),a.a.createElement(re.b,{name:"arrow-right",size:10})),a.a.createElement("div",{className:ce.rightsList},a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-document-card",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("无限文稿数量")),a.a.createElement("div",{className:ce.rightItemCont},__("普通用户仅享受100篇/月的文稿数，会员享无限文稿数")))),a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-knowledgebase-card",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("无限知识库数量")),a.a.createElement("div",{className:ce.rightItemCont},__("普通用户仅可拥有 100 个知识库，会员享无限知识库数量")))),a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-annex-card",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("更多格式、更大附件")),a.a.createElement("div",{className:ce.rightItemCont},__("更多格式、更大附件，支持嵌入预览")))),a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-internetpublic",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("不限期公开分享")),a.a.createElement("div",{className:ce.rightItemCont},__("不限期公开分享，分享时支持更多附件格式")))),a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-safe-card",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("安全等知识库高级功能")),a.a.createElement("div",{className:ce.rightItemCont},__("防复制、加水印、知识库统计等")))),a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:"icon-garden1",size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},__("公开我的花园")),a.a.createElement("div",{className:ce.rightItemCont},__("公开我的花园，用分享促进成长")))),(null==t?void 0:t.enable)&&a.a.createElement("div",{className:ce.rightItem},a.a.createElement("div",{className:ce.rightItemIconWrapper},a.a.createElement("div",{className:ce.rightItemIcon},a.a.createElement(re.b,{name:t.icon,size:24}))),a.a.createElement("div",{className:ce.rightItemText},a.a.createElement("div",{className:ce.rightItemTitle},t.title),a.a.createElement("div",{className:ce.rightItemCont},t.desc)))))}()),a.a.createElement("div",{className:ce.rightArea},a.a.createElement("div",{className:ce.rightAreaInfo},m&&a.a.createElement("h4",{className:ce.title},__("会员升级")),a.a.createElement("div",{className:ce.package},a.a.createElement("p",{className:ce.packageDesc},R.isPaid?__("当前为{memberLevelName}，有效期至 {expiredAt}",{memberLevelName:R.memberLevelName,expiredAt:ee()(R.expired_at).format("YYYY-MM-DD")}):__("选择最适合你的会员类型")),a.a.createElement("div",{className:ce.packageList},d.MEMBER_USER_PACKAGE_LIST.map((function(e){var t,n=d.MEMBER_USER_AMOUNT_MAP[e],r=!1,o=R.isPaid&&n.value<R.member_level&&!R.isWillExpire,i=n.value===f.MEMBER_LEVEL.member_level_2?Ge:ze;return m?t=n.value!==g:(void 0!==g&&(t=n.value<g),r=Se&&i&&i!==n.price),a.a.createElement(Z.a,{placement:"topLeft",title:o?a.a.createElement("div",{className:ce.selectTip},a.a.createElement("span",{className:ce.text},__("超级会员到期 30 天内将开放选择")),a.a.createElement("a",{href:"https://www.yuque.com/yuque/ng1qth/member-privilege#p5KMh"},__("查看帮助"))):null},a.a.createElement("div",{className:P()(ce.packageItem,ue(ue(ue(ue(ue({},ce.selected,E===n.value),ce.disabled,t),ce.showDetailRight,te),ce.withDiscount,r),ce.canNotSelect,o)),onClick:function(){t||o||(w(n.value),n.value!==f.MEMBER_LEVEL.member_level_2&&j(null))}},a.a.createElement("div",{className:ce.header},a.a.createElement("h4",null,a.a.createElement(re.b,{name:n.icon,size:18,className:ce.headerIcon}),__(n.name)),a.a.createElement("span",{className:ce.priceArea},Se&&!m&&i&&n.price!==i?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:ce.originalPrice},"¥",n.price," ",__("/年")),a.a.createElement("span",{className:ce.price},"¥",n.value===f.MEMBER_LEVEL.member_level_2?Ge:ze," ",__("/年"))):a.a.createElement("span",{className:ce.price},"¥",n.price," ",__("/年")))),!m&&r&&a.a.createElement("div",{className:ce.discountBadge},e===f.MEMBER_LEVEL.member_level_1?De:Me),a.a.createElement("div",{className:ce.body},a.a.createElement("div",{className:ce.right},a.a.createElement("span",null,__(n.right)),a.a.createElement("span",{className:ce.showMore,onClick:function(){return le(!te)}},te?__("收起"):__("会员详情"),a.a.createElement(re.b,{name:te?"arrow-up":"arrow-down",width:16,className:ce.icon}))),a.a.createElement("div",{className:ce.detailRights},n.detailRights&&n.detailRights.map((function(e){return a.a.createElement("span",{className:ce.detailRight},a.a.createElement(re.b,{className:ce.rightChecked,name:"icon-done",size:12}),__(e))}))))))})))),!m&&a.a.createElement("div",{className:ce.row},a.a.createElement("div",{className:ce.rowLabel},a.a.createElement("h3",null,s?__("续费时长"):__("购买时长")),a.a.createElement("div",{className:ce.tips},__("可使用至")," ",Qe&&Qe.add(O,"year").format("YYYY-MM-DD"))),a.a.createElement("div",{className:ce.rowCon},a.a.createElement("div",{className:ce.inputNumber},a.a.createElement(X.a,{className:ce.select,defaultValue:1,value:O,onChange:k},[1,2,3].map((function(e){return a.a.createElement(fe,{value:e,key:e},e," ",__("年"))})))))),a.a.createElement("div",{className:P()(ce.row,ce.payWith)},a.a.createElement("div",{className:ce.rowLabel},a.a.createElement("h3",null,__("支付方式"))),a.a.createElement("div",{className:ce.rowCon},a.a.createElement("img",{className:ce.payWithAlipayIcon,src:"//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*5UvZRblzue4AAAAAAAAAAAAAARQnAQ"}),a.a.createElement("span",{className:ce.payWithAlipayText},__("支付宝")))),E===f.MEMBER_LEVEL.member_level_2&&!m&&a.a.createElement("div",{className:P()(ce.row,ce.payWith)},a.a.createElement("div",{className:ce.rowLabel},a.a.createElement("h3",null,__("优惠码"))),a.a.createElement("div",{className:ce.rowCon},a.a.createElement(oe.a,{value:C,orderType:nt(),packageType:E,promoUsage:"member",onChange:dt,onVerifySuccess:st,verifyStyle:ce.verifyBtn}))),a.a.createElement("div",{className:ce.row},a.a.createElement("div",{className:ce.rowLabel},a.a.createElement("h3",null,__("费用明细")))),a.a.createElement("div",{className:ce.payDetail},H.map((function(e){return a.a.createElement("div",{className:ce.row},a.a.createElement("div",{className:ce.rowLabel},__(e.label)),a.a.createElement("div",{className:ce.rowCon},e.price))})))),a.a.createElement("p",{className:ce.line}),a.a.createElement("div",{className:ce.row},ft()),a.a.createElement("div",{className:ce.memberModalButtonCon},a.a.createElement(b.a,{"data-aspm-click":"c126274.d262023","data-aspm-param":"pay_source=".concat(u),type:"primary",block:!0,onClick:et,loading:A,className:ce.confirmPayBtn},ct),a.a.createElement("span",{className:"member-modal-h5-agree"},a.a.createElement("div",{className:ce.agreeButton},a.a.createElement(Q.a,{onChange:tt},a.a.createElement("span",{className:ce.text},__("同意")))),a.a.createElement("a",{className:ce.termsButton,target:"_blank","data-desktoptarget":"_browser",href:"/payment-terms"},"《",__("语雀付费服务协议"),"》"))))))))};pe.propTypes={visible:c.a.bool,user:c.a.object,onClose:c.a.func,startToPay:c.a.func,isRenew:c.a.bool,isUpgrade:c.a.bool,upgradePackageType:c.a.number,isBuyUpload:c.a.bool,code:c.a.string,packageType:c.a.number,handlePackageTypeChange:c.a.func,duration:c.a.number,handleDurationChange:c.a.func,uploadSize:c.a.number,onSelectUploadSize:c.a.func,buyLoading:c.a.bool,promoCode:c.a.string,setPromoCode:c.a.func,setPromoCodeInvalid:c.a.func,title:c.a.string,desc:c.a.oneOfType([c.a.string,c.a.element])};var me=pe,he=n(382),ve="successmodal-module_successModalContainer_ENOHy",ye="successmodal-module_successModalInfoCon_EYL4y",be="successmodal-module_successModalInfoTitle_yXIec",ge="successmodal-module_successModalButtonCon_uM8cu",_e="successmodal-module_successModalSubTitle_hVcSK",Ee="successmodal-module_successModalItem_zxqQ2",we="successmodal-module_successModalBlank_tgeED",Oe="successmodal-module_successModalWechatQRCon_+CtHf",ke="successmodal-module_rightChecked_8E2DG";function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}function xe(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function Ae(e,t,n){return t=Ce(t),function(e,t){if(t&&("object"==Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pe()?Reflect.construct(t,n||[],Ce(e).constructor):t.apply(e,n))}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}var Te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ae(this,t,[e])).state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.visible,r=t.onClose,o=t.successData,i=t.isRenew,c=t.isH5,l=o||{},u=l.expired_at,s=l.package_type,p=d.MEMBER_USER_AMOUNT_MAP[s],m=(null==p?void 0:p.name)||__("语雀会员"),h=s===f.MEMBER_LEVEL.member_level_2,v="en-us"===window.appData.locale?" ":"",g=null===(e=window.appData)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.success_buy_ad;return a.a.createElement(y.a,{className:"paid-success-modal",title:null,visible:n,maskClosable:!1,footer:null,centered:!0,width:480,zIndex:9999,onCancel:r},a.a.createElement("div",{className:ve,"data-testid":"success-modal"},null!=g&&g.enable?a.a.createElement("a",{href:g.href,target:"_blank"},a.a.createElement(he.a,{src:g.src,darkSrc:g.darkSrc})):a.a.createElement(he.a,{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",darkSrc:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*VEcnT7lrtDAAAAAAAAAAAAAAARQnAQ"}),a.a.createElement("div",{className:ye},a.a.createElement("h1",{className:be},__("恭喜你"),__("，"),i?__("成功续费"):__("升级为"),v,m),a.a.createElement("p",{className:we}),a.a.createElement("p",{className:_e},__("会员有效期至")," ",ee()(u).format("YYYY-MM-DD")),a.a.createElement("p",{className:Ee},__("核心权益"),__("：")),(null==p?void 0:p.detailRights)&&(null==p?void 0:p.detailRights.map((function(e){return a.a.createElement("p",{className:Ee},a.a.createElement(re.b,{className:ke,name:"icon-done",size:12}),__(e))}))),a.a.createElement("p",{className:Ee},a.a.createElement("a",{href:"https://www.yuque.com/yuque/ng1qth/member-privilege",target:"_blank"},__("查看完整权益"))),!c&&h&&a.a.createElement("div",{className:Oe},a.a.createElement("img",{width:"120",height:"120",src:d.YUQUE_WECHAT_QR_CODE}),a.a.createElement("p",null,__("使用微信扫一扫，加入金牌客户群"))),a.a.createElement("div",{className:ge},a.a.createElement(b.a,{type:"primary",onClick:r},__("立即使用"))))))}}])&&Ne(n.prototype,r),o&&Ne(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(o.PureComponent);Te.propTypes={visible:c.a.bool,onClose:c.a.func,successData:c.a.object,isRenew:c.a.bool,isBuyUpload:c.a.bool,isH5:c.a.bool};var Ie=Te,Me="processmodal-module_processModalContainer_jrXul",Le="processmodal-module_processModalImg_kmc6C",Re="processmodal-module_processModalInfo_fOy8-",De="processmodal-module_processModalOrderId_tDK+c";function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function ze(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}function Fe(e,t,n){return t=Ge(t),function(e,t){if(t&&("object"==Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(t,n||[],Ge(e).constructor):t.apply(e,n))}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ye(e,t)}var $e=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fe(this,t,[e])).state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.currentOrderId,r=void 0===n?"":n;return a.a.createElement(y.a,{title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:480,zIndex:9999},a.a.createElement("div",{className:Me,"data-testid":"process-modal"},a.a.createElement("img",{className:Le,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7q7fR4_EUQQAAAAAAAAAAABjARQnAQ"}),a.a.createElement("p",{className:Re},__("付费更新中，请稍后...")),a.a.createElement("p",{className:De},r)))}}])&&Be(n.prototype,r),o&&Be(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(o.PureComponent);$e.propTypes={visible:c.a.bool,currentOrderId:c.a.string};var qe=$e,We=n(3706),He=n(3707);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function Xe(e,t,n){return t=et(t),function(e,t){if(t&&("object"==Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Je()?Reflect.construct(t,n||[],et(e).constructor):t.apply(e,n))}function Je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Je=function(){return!!e})()}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e,t,n){return(t=rt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){var t=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ke(t)?t:t+""}var ot=new URLSearchParams(decodeURIComponent(window.location.search)),at=ot.get("premium"),it=ot.get("pay_referer"),ct=ot.get("pay_source"),lt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(n=Xe(this,t,[e]),"handlePackageTypeChange",(function(e){n.setState({packageType:e})})),nt(n,"handleDurationChange",(function(e){n.setState({duration:e})})),nt(n,"onSelectUploadSize",(function(e){n.setState({uploadSize:e})})),nt(n,"setPromoCode",(function(e){n.setState({promoCode:e})})),nt(n,"setPromoCodeInvalid",(function(e){n.setState({promoCodeInvalid:e})}));var r=e.user,o=r.member_level||d.MEMBER_USER_DEFAULT_MEMBER_LEVEL;return n.state={memberModalVisible:!1,payModalVisible:!1,successModalVisible:!1,processModalVisible:!1,receiptModalVisible:!1,payModalQRCodeUrl:null,successData:null,receiptSubmited:!1,currentCode:ct||null,currentOrderId:null,isRenew:!1,isUpgrade:!1,upgradePackageType:null,isBuyUpload:!1,user:r,pay_referer:it||null,packageType:o,duration:1,uploadSize:10,totalAmount:null,buyLoading:!1,promoCode:void 0,promoCodeInvalid:!1,title:"",desc:"",referer:"",showBookLimitModal:!1,targetUserId:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(t,e),n=t,o=[{key:"queryOrderStatusWithRetry",value:function(e){var t=this,n=this.state,r=n.processModalVisible,o=n.payModalVisible,a=this.props.onPaySuccess;(r||o)&&(this.setState({currentOrderId:e}),h.a.memberPay.query({order_id:e}).then((function(n){if(n.isFinished)return t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!1,successModalVisible:!(a&&"function"==typeof a),successData:n}),void(a&&"function"==typeof a&&a());n.isClosed?t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!1,successModalVisible:!1}):(n.isPaid&&t.setState({payModalVisible:!1,payModalQRCodeUrl:null,processModalVisible:!0}),(n.isPaid||n.needQuery)&&setTimeout((function(){return t.queryOrderStatusWithRetry(e)}),3e3))})))}},{key:"handleSubmitModalClose",value:function(){this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onSuccessModalClose",value:function(){this.setState({successModalVisible:!1}),this.updatePageStatus()}},{key:"updatePageStatus",value:function(){var e=new URLSearchParams(window.location.search);at?(e.delete("premium"),window.location.search=e.toString()):["#renew"].includes(window.location.hash)?(window.location.hash="",window.location.reload()):"showpay"===(null==e?void 0:e.get("mode"))?(e.delete("mode"),window.location.search=e.toString()):window.location.reload()}},{key:"onMemberModalClose",value:function(){this.setState({memberModalVisible:!1})}},{key:"onPayModalClose",value:function(){this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onPayModalCancel",value:function(){at&&(r.a.info(__("支付流程未完成，已为你创建一个基础版团队")),setTimeout((function(){var e=new URLSearchParams(window.location.search);e.delete("premium"),window.location.search=e.toString()}),1e3)),this.setState({payModalVisible:!1,payModalQRCodeUrl:null})}},{key:"onReceiptModalClose",value:function(){this.setState({receiptModalVisible:!1})}},{key:"showBookLimitModal",value:function(e){this.setState({showBookLimitModal:!0,targetUserId:e})}},{key:"startToPay",value:function(){var e=this,t=this.state,n=t.isRenew,r=t.isUpgrade,o=t.isBuyUpload,a=t.duration,i=t.packageType,c=t.uploadSize,l=t.promoCode,s=t.promoCodeInvalid,d=t.referer,f=t.pay_referer;this.setState({memberModalVisible:!1,payModalVisible:!0,buyLoading:!0});var p=h.a.memberPay.create,m={referer:d};o?(p=h.a.memberPay.buyData,m.upload_size=c):r?(p=h.a.memberPay.upgrade,m.package_type=i):n?(p=h.a.memberPay.renew,m.duration=a,m.package_type=i):(m.duration=a,m.package_type=i),l&&!s&&(m.promo_code=l),f&&(m.referer=f),p(m).then((function(t){var n=t.existed_order_id,r=t.out_trade_no,o=t.qr_code,a=t.totalAmount;if(e.setState({buyLoading:!1}),n)return e.setState({payModalVisible:!1,payModalQRCodeUrl:null,totalAmount:a}),void setTimeout((function(){e.setState({processModalVisible:!0}),e.queryOrderStatusWithRetry(n)}),100);u.a.toDataURL(o,(function(t,n){e.setState({payModalQRCodeUrl:n,totalAmount:a})})),e.queryOrderStatusWithRetry(r)})).catch((function(){e.setState({buyLoading:!1})}))}},{key:"showMemberIntro",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.currentUser||this.props.user;if(!v.a.isGroupOrPublication(n)||t.isBuyUpload){var r=n.isPaid?n.member_level:f.MEMBER_LEVEL.free;t.upgradePackageType?this.setState({packageType:t.upgradePackageType}):t.packageType&&t.packageType>=r&&this.setState({packageType:t.packageType});var o={memberModalVisible:!0,isRenew:t.isRenew,isUpgrade:t.isUpgrade,upgradePackageType:t.upgradePackageType,isBuyUpload:t.isBuyUpload,user:n,title:t.title,desc:t.desc,referer:t.referer};t.code&&(o.currentCode=t.code),t.pay_referer&&(o.pay_referer=t.pay_referer),!t.pay_referer&&N.c&&(o.pay_referer="desktop_app"),this.setState(o,(function(){Object(s.spmClick)("c126274.d262022",{pay_source:e.state.currentCode,member_level:n.member_level})}))}else window.location.href="/404"}},{key:"onClickReceipt",value:function(){this.setState({successModalVisible:!1,receiptModalVisible:!0})}},{key:"onReceiptModalConfirm",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";(0,e.form.validateFields)((function(e,o){if(!e){var a=d.RECEIPT_TYPES[n];h.a.memberPay.applyReceipt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:a},o)).then((function(){t.setState({receiptSubmited:!0}),t.props.onReceiptSuccess(),t.onReceiptModalClose(),r.a.success(__("已成功提交发票申请"))}))}}))}},{key:"onClickRenew",value:function(){this.showMemberIntro({isRenew:!0})}},{key:"render",value:function(){var e=this,t=window.appData,n=t.groupMemberInfo,r=t.userMemberInfo,o=this.state,i=o.user,c=o.packageType,l=o.duration,u=o.uploadSize,s=o.buyLoading,d=o.promoCode,f=((v.a.isGroupOrPublication(i)?n:r)||{}).receipt;return a.a.createElement("div",{"data-testid":"pay-flow"},i&&i.id&&this.state.memberModalVisible&&a.a.createElement(me,{key:this.state.memberModalVisible,isBuyUpload:this.state.isBuyUpload,isRenew:this.state.isRenew,isUpgrade:this.state.isUpgrade,upgradePackageType:this.state.upgradePackageType,visible:this.state.memberModalVisible,startToPay:function(){return e.startToPay()},onClose:function(){return e.onMemberModalClose()},user:i,code:this.state.currentCode,packageType:c,handlePackageTypeChange:this.handlePackageTypeChange,duration:l,handleDurationChange:this.handleDurationChange,uploadSize:u,onSelectUploadSize:this.onSelectUploadSize,buyLoading:s,promoCode:d,setPromoCode:this.setPromoCode,setPromoCodeInvalid:this.setPromoCodeInvalid,title:this.state.title,desc:this.state.desc}),this.state.payModalVisible&&a.a.createElement(K,{isRenew:this.state.isRenew,totalAmount:this.state.totalAmount,visible:this.state.payModalVisible,onClose:function(){return e.onPayModalClose()},onCancel:function(){return e.onPayModalCancel()},qrCodeUrl:this.state.payModalQRCodeUrl,user:i}),this.state.processModalVisible&&a.a.createElement(qe,{visible:this.state.processModalVisible,currentOrderId:this.state.currentOrderId}),this.state.successModalVisible&&a.a.createElement(Ie,{isRenew:this.state.isRenew,visible:this.state.successModalVisible,onClose:function(){return e.onSuccessModalClose()},onClickReceipt:function(){return e.onClickReceipt()},successData:this.state.successData,user:i,isBuyUpload:this.state.isBuyUpload}),this.state.receiptModalVisible&&a.a.createElement(We.a,{visible:this.state.receiptModalVisible,onClose:function(){return e.onReceiptModalClose()},onConfirm:function(t,n){return e.onReceiptModalConfirm(t,n)},receipt:f,submited:!!f||this.state.receiptSubmited,user:i}),a.a.createElement(He.a,{user:i,onConfirm:function(){e.showMemberIntro({isRenew:!0,code:p.LIMIT_SCENE.max_doc_note_number})}}),a.a.createElement(S,{handleClose:function(){return e.setState({showBookLimitModal:!1,targetUserId:null})},visible:this.state.showBookLimitModal,me:this.props.me,onConfirm:function(){e.showMemberIntro({isRenew:!0,code:p.LIMIT_SCENE.max_book_number})},targetUserId:this.state.targetUserId,h5Confirm:m.a}))}}],o&&Qe(n.prototype,o),i&&Qe(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(o.PureComponent);lt.propTypes={user:c.a.object,onReceiptSuccess:c.a.func,onPaySuccess:c.a.func};t.a=lt},367:function(e,t,n){"use strict";n(3160);var r=n(1263);n(713);t.a=r.a},3671:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){return"function"==typeof e},o=function(e){return"number"==typeof e}},3674:function(e,t,n){"use strict";var r=n(17),o=n(0),a=n.n(o),i=n(5),c=n.n(i),l=n(3694),u=n(3639),s=n(3641),d=n(3871);const f="adm-button",p={color:"default",fill:"solid",block:!1,loading:!1,loadingIcon:a.a.createElement(l.a,{color:"currentColor"}),type:"button",shape:"default",size:"middle"},m=Object(o.forwardRef)(((e,t)=>{const n=Object(u.b)(p,e),[i,l]=Object(o.useState)(!1),m=Object(o.useRef)(null),h="auto"===n.loading?i:n.loading,v=n.disabled||h;Object(o.useImperativeHandle)(t,(()=>({get nativeElement(){return m.current}})));return Object(s.a)(n,a.a.createElement("button",{ref:m,type:n.type,onClick:e=>Object(r.__awaiter)(void 0,void 0,void 0,(function*(){if(!n.onClick)return;const t=n.onClick(e);if(Object(d.b)(t))try{l(!0),yield t,l(!1)}catch(e){throw l(!1),e}})),className:c()(f,{[`${f}-${n.color}`]:n.color,[`${f}-block`]:n.block,[`${f}-disabled`]:v,[`${f}-fill-outline`]:"outline"===n.fill,[`${f}-fill-none`]:"none"===n.fill,[`${f}-mini`]:"mini"===n.size,[`${f}-small`]:"small"===n.size,[`${f}-large`]:"large"===n.size,[`${f}-loading`]:h},`${f}-shape-${n.shape}`),disabled:v,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onTouchStart:n.onTouchStart,onTouchEnd:n.onTouchEnd},h?a.a.createElement("div",{className:`${f}-loading-wrapper`},n.loadingIcon,n.loadingText):a.a.createElement("span",null,n.children)))}));t.a=m},3675:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(3655);var r=n(3951);let o=!1;const a=new Set;function i(){return o}function c(e){return a.add(e),()=>{a.delete(e)}}function l(){return Object(r.useSyncExternalStore)(c,i,i)}},3676:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"p",(function(){return v})),n.d(t,"t",(function(){return y})),n.d(t,"n",(function(){return b})),n.d(t,"d",(function(){return E})),n.d(t,"w",(function(){return w})),n.d(t,"v",(function(){return O})),n.d(t,"u",(function(){return k})),n.d(t,"k",(function(){return S})),n.d(t,"q",(function(){return N})),n.d(t,"o",(function(){return x})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return P})),n.d(t,"e",(function(){return C})),n.d(t,"j",(function(){return j})),n.d(t,"l",(function(){return T})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return M})),n.d(t,"m",(function(){return L})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return U})),n.d(t,"i",(function(){return B}));var r=n(0),o=n(10),a=n(464),i=n(1422),c=n(87),l=n(1651),u=n(492),s=n(82),d=n(74),f=n(208);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){return e[e.sharePanel=1]="sharePanel",e[e.inviteSelectorChannel=2]="inviteSelectorChannel",e[e.shareChannels=3]="shareChannels",e[e.collaboratorChannel=4]="collaboratorChannel",e[e.shareQrCodeChannel=5]="shareQrCodeChannel",e}({}),v=m(m(m({},a.a.PERSON,__("公开给互联网所有人")),a.a.ORG,__("公开给空间所有成员")),a.a.INTERNAL,__("公开给集团所有正式员工")),y=m(m(m({},a.a.PERSON,{private:__("互联网公开"),public:__("已开启互联网公开")}),a.a.ORG,{private:__("公开分享"),public:__("已开启公开分享")}),a.a.INTERNAL,{private:__("公开分享"),public:__("已开启公开分享")}),b={private:__("当前小记为私密，仅自己可访问"),public:__("当前小记为公开")},g=m(m(m({},a.a.PERSON,{private:__("当前知识库为私密，仅自己和协作者可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),a.a.ORG,{private:__("当前知识库为私密，仅自己和协作者可访问"),intranet:__("当前知识库为公开，空间所有成员可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),a.a.INTERNAL,{private:__("当前知识库为私密，仅自己和协作者可访问"),extend_private:__("当前知识库为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前知识库为公开，集团所有正式员工可访问"),public:__("当前知识库为公开，集团所有人可访问")}),_=m(m(m({},a.a.PERSON,{private:__("当前文档为私密，仅自己和协作者可访问"),public:__("当前文档为公开，互联网所有人可访问")}),a.a.ORG,{private:__("当前文档为私密，仅自己和协作者可访问"),intranet:__("当前文档为公开，空间所有成员可访问"),public:__("当前文档为公开，互联网所有人可访问")}),a.a.INTERNAL,{private:__("当前文档为私密，仅自己和协作者可访问"),extend_private:__("当前文档为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前文档为公开，集团所有正式员工可访问"),public:__("当前文档为公开，集团所有人可访问")}),E=m(m({},a.b.BOOK,g),a.b.DOC,_),w=m(m({},a.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),a.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),public:__("拿到链接的集团正式员工可访问")}),O=m(m(m({},a.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),a.a.ORG,{private:__("开启后，空间内所有成员可访问"),intranet:__("空间内所有成员可公开访问内容"),public:__("互联网所有人可公开访问内容")}),a.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),intranet:__("拿到链接的集团正式员工可访问"),public:__("拿到链接的集团所有人可访问")}),k=m(m(m({},o.PRIVACY.private,"private"),o.PRIVACY.public,"public"),o.PRIVACY.intranet,"intranet"),S=function(e,t,n,r){var o=Object(i.d)(e,t,n,r).privacy;return k[o]},N=m(m({},a.a.ORG,{desc:__("默认分享范围是空间所有成员。可以选择分享给互联网所有人，内容需符合相关法律法规及语雀 {terms} 约定。",{terms:r.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6","data-desktoptarget":"_browser",target:"_blank"},__("服务协议"))}),actions:[{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public,tip:function(e){var t,n=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return c.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?n?r.createElement(r.Fragment,null,__("空间管理设置已关闭对外分享权限，请先前往开启。"),r.createElement("a",{href:"/r/organizations/dashboard/security/sharing-control",target:"_blank",style:{marginLeft:"5px"}},__("前往开启"))):__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):c.a.isFree(e)?n?r.createElement(r.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),r.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy&paySource=".concat(d.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):c.a.isExpired(e)?r.createElement(r.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),n&&r.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew&paySource=".concat(d.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),a.a.INTERNAL,{desc:__("默认分享范围是集团正式员工。分享给集团所有人（含外包、未签订三方协议的实习生）需审批申请，请注意信息安全。"),actions:[{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]}),x=m(m({},a.b.BOOK,__("开启后，本知识库下的所有公开内容，都需要密码访问。")),a.b.DOC,__("所属知识库已开启密码，本内容已默认继承该密码。")),A=m(m({},a.b.BOOK,m(m(m({},a.a.PERSON,{desc:__("开启后，互联网所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索")}),a.a.ORG,{desc:__("开启后，空间成员可在空间里搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:"允许空间内搜索"}),a.a.INTERNAL,{desc:__("开启后，集团所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索")})),a.b.DOC,m(m(m({},a.a.PERSON,{desc:__("开启后，互联网所有人可在语雀内搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索"),tip:__("所属知识库已允许语雀内公开搜索，文档无法独立设置。{terms}",{terms:r.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),a.a.ORG,{desc:__("开启后，空间成员可在空间里搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许空间内搜索"),tip:__("所属知识库已允许空间内搜索，文档无法独立设置。{terms}",{terms:r.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),a.a.INTERNAL,{desc:__("开启后，集团内所有人都可在语雀里搜到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索"),tip:__("所属知识库已允许内网公开搜索，文档无法独立设置。{terms}",{terms:r.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wpclft",target:"_blank"},__("查看帮助"))})})),P=m(m({},a.a.PERSON,{desc:__("单次分享有效期默认半年，到期后可再次开启")}),a.a.INTERNAL,{desc:__("公开分享有效期为三个月，期间有用户访问文档时，会基于访问时间重新计算有效期，详见：{help}",{help:r.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wdgcqkvg8r6o69bz",target:"_blank"},__("公开分享文档安全策略说明"))})}),C=m(m(m({},a.b.BOOK,__("可编辑，将拥有知识库的编辑权限。可阅读，仅拥有阅读和评论权限。")),a.b.DOC,__("可编辑，将拥有文档的编辑权限。可阅读，仅拥有阅读和评论权限。")),"actions",[{label:__("可阅读"),desc:__("仅拥有只读和评论权限"),value:u.ROLE.readonly,key:"readonly"},{label:__("可编辑"),desc:__("拥有文档的编辑权限"),value:u.ROLE.edit,key:"edit"}]),j={descBookDoc:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入空间。"),descGroup:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入团队。"),action:__("邀请空间外成员"),tip:function(e){return c.a.isOwner(e)?__("空间管理设置已关闭空间外人员添加权限，请先前往开启。{terms}",{terms:r.createElement("a",{href:"/r/organizations/dashboard/contacts/permission-settings",target:"_blank",rel:"noopener noreferrer"},__("立即前往"))}):__("管理员已关闭空间外人员添加权限，请联系管理员开启。{terms}",{terms:r.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},__("查看帮助"))})}},T={descBookDoc:__("开启后，需经过手动审批确认，获得链接的人才能成为协作者。"),descGroup:__("开启后，需经过手动审批确认，获得链接的人才能加入团队。"),action:__("提交申请后需审批确认")},I={desc:__("成员，将拥有团队知识库的编辑权限。只读成员，仅拥有只读权限。"),actions:[{label:__("成员"),value:s.ROLE.member,key:"member"},{label:__("只读成员"),value:s.ROLE.readonly,key:"readonly"}]},M=m(m(m({},a.a.PERSON,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.ORG,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public,tip:function(e){var t,n=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return c.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?n?r.createElement(r.Fragment,null,__("空间管理设置已关闭对外分享权限，请先前往开启。"),r.createElement("a",{href:"/r/organizations/dashboard/security/sharing-control",target:"_blank",style:{marginLeft:"5px"}},__("前往开启"))):__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):c.a.isFree(e)?n?r.createElement(r.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),r.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy&paySource=".concat(d.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):c.a.isExpired(e)?r.createElement(r.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),n&&r.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew&paySource=".concat(d.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),a.a.INTERNAL,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]}),L=m(m(m(m(m({},a.a.PERSON,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.ORG,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet}]}),a.a.PUBLIC_PAGE,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.INTERNAL,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet}]}),a.a.INTERNAL_THREAD,{actions:[{label:__("仅协作者可参与"),value:o.PRIVACY.private},{label:__("集团内所有正式员工可参与"),value:o.PRIVACY.intranet},{label:__("集团内所有人可参与"),value:o.PRIVACY.public}]}),R=function(e,t){var n=__("开启后，互联网所有获得链接的人皆可访问知识库下的全部内容。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:r.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank","data-desktoptarget":"_browser"},__("服务协议"))}),o=__("开启后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:r.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank","data-desktoptarget":"_browser"},__("服务协议"))}),i=e===a.b.BOOK?n:o;return Object(f.a)()?new Promise((function(e){t.confirm({icon:r.createElement(l.default,null),width:505,title:__("确认公开给互联网所有人"),content:r.createElement("span",null,i),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})})):e===a.b.NOTE?Promise.resolve(!0):new Promise((function(e){t.confirm({icon:r.createElement(l.default,null),width:505,title:__("申请开启集团所有人可访问"),content:__("设置 集团所有人可访问 需进行审批申请，主管通过后可对所有外包、未签订三方协议的实习生可见，请注意信息安全。"),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})}))},D=function(e){return new Promise((function(t){e.confirm({width:505,title:__("切换其他选项后再次选择「集团所有人可访问」，需要重新审批，确认切换吗？"),okText:__("确认"),cancelText:__("取消"),onOk:function(){t(!0)},onCancel:function(){t(!1)}})}))},U=[{label:__("仅团队成员可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet}],B=[{label:__("仅团队成员可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]},3677:function(e,t,n){var r=n(189),o=n(103);e.exports=function(e){return o(e)&&r(e)}},3688:function(e,t,n){"use strict";n.d(t,"useSpring",(function(){return ye})),n.d(t,"useTransition",(function(){return ge}));var r=n(3645);n.d(t,"Globals",(function(){return r.b}));var o=n(0),a=n(3733);n(3734),n(3735);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function c(e,...t){return r.t.fun(e)?e(...t):e}const l=(e,t)=>!0===e||!!(t&&e&&(r.t.fun(e)?e(t):Object(r.B)(e).includes(t))),u=(e,t)=>r.t.obj(e)?t&&e[t]:e,s=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,d=e=>e,f=(e,t=d)=>{let n=p;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const o={};for(const a of n){const n=t(e[a],a);r.t.und(n)||(o[a]=n)}return o},p=["config","onProps","onStart","onChange","onPause","onResume","onRest"],m={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function h(e){const t=function(e){const t={};let n=0;if(Object(r.l)(e,((e,r)=>{m[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return Object(r.l)(e,((e,r)=>r in t||(n[r]=e))),n}return i({},e)}function v(e){return e=Object(r.r)(e),r.t.arr(e)?e.map(v):Object(r.u)(e)?r.b.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function y(e){for(const t in e)return!0;return!1}function b(e){return r.t.fun(e)||r.t.arr(e)&&r.t.obj(e[0])}function g(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function _(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}const E=i({},{tension:170,friction:26},{mass:1,damping:1,easing:r.m.linear,clamp:!1});class w{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,E)}}function O(e,t){if(r.t.und(t.decay)){const n=!r.t.und(t.tension)||!r.t.und(t.friction);!n&&r.t.und(t.frequency)&&r.t.und(t.damping)&&r.t.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}const k=[];class S{constructor(){this.changed=!1,this.values=k,this.toValues=null,this.fromValues=k,this.to=void 0,this.from=void 0,this.config=new w,this.immediate=!1}}function N(e,{key:t,props:n,defaultProps:o,state:a,actions:u}){return new Promise(((s,d)=>{var f;let p,m,h=l(null!=(f=n.cancel)?f:null==o?void 0:o.cancel,t);if(h)b();else{r.t.und(n.pause)||(a.paused=l(n.pause,t));let e=null==o?void 0:o.pause;!0!==e&&(e=a.paused||l(e,t)),p=c(n.delay||0,t),e?(a.resumeQueue.add(y),u.pause()):(u.resume(),y())}function v(){a.resumeQueue.add(y),a.timeouts.delete(m),m.cancel(),p=m.time-r.z.now()}function y(){p>0&&!r.b.skipAnimation?(a.delayed=!0,m=r.z.setTimeout(b,p),a.pauseQueue.add(v),a.timeouts.add(m)):b()}function b(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(v),a.timeouts.delete(m),e<=(a.cancelId||0)&&(h=!0);try{u.start(i({},n,{callId:e,cancel:h}),s)}catch(e){d(e)}}}))}const x=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?C(e.get()):t.every((e=>e.noop))?A(e.get()):P(e.get(),t.every((e=>e.finished))),A=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),P=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),C=e=>({value:e,cancelled:!0,finished:!1});function j(e,t,n,o){const{callId:a,parentId:c,onRest:l}=t,{asyncTo:u,promise:s}=n;return c||e!==u||t.reset?n.promise=(async()=>{n.asyncId=a,n.asyncTo=e;const d=f(t,((e,t)=>"onRest"===t?void 0:e));let p,m;const h=new Promise(((e,t)=>(p=e,m=t))),v=e=>{const t=a<=(n.cancelId||0)&&C(o)||a!==n.asyncId&&P(o,!1);if(t)throw e.result=t,m(e),e},y=(e,t)=>{const c=new I,l=new M;return(async()=>{if(r.b.skipAnimation)throw T(n),l.result=P(o,!1),m(l),l;v(c);const u=r.t.obj(e)?i({},e):i({},t,{to:e});u.parentId=a,Object(r.l)(d,((e,t)=>{r.t.und(u[t])&&(u[t]=e)}));const s=await o.start(u);return v(c),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),s})()};let b;if(r.b.skipAnimation)return T(n),P(o,!1);try{let t;t=r.t.arr(e)?(async e=>{for(const t of e)await y(t)})(e):Promise.resolve(e(y,o.stop.bind(o))),await Promise.all([t.then(p),h]),b=P(o.get(),!0,!1)}catch(e){if(e instanceof I)b=e.result;else{if(!(e instanceof M))throw e;b=e.result}}finally{a==n.asyncId&&(n.asyncId=c,n.asyncTo=c?u:void 0,n.promise=c?s:void 0)}return r.t.fun(l)&&r.z.batchedUpdates((()=>{l(b,o,o.item)})),b})():s}function T(e,t){Object(r.n)(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}class I extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class M extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const L=e=>e instanceof D;let R=1;class D extends r.a{constructor(...e){super(...e),this.id=R++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Object(a.e)(this);return e&&e.getValue()}to(...e){return r.b.to(this,e)}interpolate(...e){return Object(r.j)(),r.b.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Object(r.d)(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||r.p.sort(this),Object(r.d)(this,{type:"priority",parent:this,priority:e})}}const U=Symbol.for("SpringPhase"),B=e=>(1&e[U])>0,z=e=>(2&e[U])>0,F=e=>(4&e[U])>0,V=(e,t)=>t?e[U]|=3:e[U]&=-3,G=(e,t)=>t?e[U]|=4:e[U]&=-5;class Y extends D{constructor(e,t){if(super(),this.key=void 0,this.animation=new S,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!r.t.und(e)||!r.t.und(t)){const n=r.t.obj(e)?i({},e):i({},t,{from:e});r.t.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(z(this)||this._state.asyncTo)||F(this)}get goal(){return Object(r.r)(this.animation.to)}get velocity(){const e=Object(a.e)(this);return e instanceof a.c?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return B(this)}get isAnimating(){return z(this)}get isPaused(){return F(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const o=this.animation;let{config:i,toValues:c}=o;const l=Object(a.g)(o.to);!l&&Object(r.s)(o.to)&&(c=Object(r.B)(Object(r.r)(o.to))),o.values.forEach(((u,s)=>{if(u.done)return;const d=u.constructor==a.b?1:l?l[s].lastPosition:c[s];let f=o.immediate,p=d;if(!f){if(p=u.lastPosition,i.tension<=0)return void(u.done=!0);let t=u.elapsedTime+=e;const n=o.fromValues[s],a=null!=u.v0?u.v0:u.v0=r.t.arr(i.velocity)?i.velocity[s]:i.velocity;let c;const l=i.precision||(n==d?.005:Math.min(1,.001*Math.abs(d-n)));if(r.t.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);p=n+a/(1-e)*(1-r),f=Math.abs(u.lastPosition-p)<=l,c=a*r}else{c=null==u.lastVelocity?a:u.lastVelocity;const t=i.restVelocity||l/10,o=i.clamp?0:i.bounce,s=!r.t.und(o),m=n==d?u.v0>0:n<d;let h,v=!1;const y=1,b=Math.ceil(e/y);for(let e=0;e<b&&(h=Math.abs(c)>t,h||(f=Math.abs(d-p)<=l,!f));++e){s&&(v=p==d||p>d==m,v&&(c=-c*o,p=d));c+=(1e-6*-i.tension*(p-d)+.001*-i.friction*c)/i.mass*y,p+=c*y}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,t=u.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,u.durationProgress=r),p=n+i.easing(r)*(d-n),c=(p-u.lastPosition)/e,f=1==r}u.lastVelocity=c,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}l&&!l[s].done&&(f=!1),f?u.done=!0:t=!1,u.setValue(p,i.round)&&(n=!0)}));const u=Object(a.e)(this),s=u.getValue();if(t){const e=Object(r.r)(o.to);s===e&&!n||i.decay?n&&i.decay&&this._onChange(s):(u.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(s)}set(e){return r.z.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(z(this)){const{to:e,config:t}=this.animation;r.z.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return r.t.und(e)?(n=this.queue||[],this.queue=[]):n=[r.t.obj(e)?e:i({},t,{to:e})],Promise.all(n.map((e=>this._update(e)))).then((e=>x(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),T(this._state,e&&this._lastCallId),r.z.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:o}=e;n=r.t.obj(n)?n[t]:n,(null==n||b(n))&&(n=void 0),o=r.t.obj(o)?o[t]:o,null==o&&(o=void 0);const i={to:n,from:o};return B(this)||(e.reverse&&([n,o]=[o,n]),o=Object(r.r)(o),r.t.und(o)?Object(a.e)(this)||this._set(n):this._set(o)),i}_update(e,t){let n=i({},e);const{key:o,defaultProps:a}=this;n.default&&Object.assign(a,f(n,((e,t)=>/^on/.test(t)?u(e,o):e))),Q(this,n,"onProps"),X(this,"onProps",n,this);const c=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const l=this._state;return N(++this._lastCallId,{key:o,props:n,defaultProps:a,state:l,actions:{pause:()=>{F(this)||(G(this,!0),Object(r.o)(l.pauseQueue),X(this,"onPause",P(this,$(this,this.animation.to)),this))},resume:()=>{F(this)&&(G(this,!1),z(this)&&this._resume(),Object(r.o)(l.resumeQueue),X(this,"onResume",P(this,$(this,this.animation.to)),this))},start:this._merge.bind(this,c)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=q(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(C(this));const o=!r.t.und(e.to),u=!r.t.und(e.from);if(o||u){if(!(t.callId>this._lastToId))return n(C(this));this._lastToId=t.callId}const{key:s,defaultProps:d,animation:f}=this,{to:p,from:m}=f;let{to:h=p,from:y=m}=e;!u||o||t.default&&!r.t.und(h)||(h=y),t.reverse&&([h,y]=[y,h]);const g=!Object(r.v)(y,m);g&&(f.from=y),y=Object(r.r)(y);const _=!Object(r.v)(h,p);_&&this._focus(h);const w=b(t.to),{config:k}=f,{decay:S,velocity:N}=k;(o||u)&&(k.velocity=0),t.config&&!w&&function(e,t,n){n&&(O(n=i({},n),t),t=i({},n,t)),O(e,t),Object.assign(e,t);for(const t in E)null==e[t]&&(e[t]=E[t]);let{mass:o,frequency:a,damping:c}=e;r.t.und(a)||(a<.01&&(a=.01),c<0&&(c=0),e.tension=Math.pow(2*Math.PI/a,2)*o,e.friction=4*Math.PI*c*o/a)}(k,c(t.config,s),t.config!==d.config?c(d.config,s):void 0);let x=Object(a.e)(this);if(!x||r.t.und(h))return n(P(this,!0));const T=r.t.und(t.reset)?u&&!t.default:!r.t.und(y)&&l(t.reset,s),I=T?y:this.get(),M=v(h),L=r.t.num(M)||r.t.arr(M)||Object(r.u)(M),R=!w&&(!L||l(d.immediate||t.immediate,s));if(_){const e=Object(a.f)(h);if(e!==x.constructor){if(!R)throw Error(`Cannot animate between ${x.constructor.name} and ${e.name}, as the "to" prop suggests`);x=this._set(M)}}const D=x.constructor;let U=Object(r.s)(h),F=!1;if(!U){const e=T||!B(this)&&g;(_||e)&&(F=Object(r.v)(v(I),M),U=!F),(Object(r.v)(f.immediate,R)||R)&&Object(r.v)(k.decay,S)&&Object(r.v)(k.velocity,N)||(U=!0)}if(F&&z(this)&&(f.changed&&!T?U=!0:U||this._stop(p)),!w&&((U||Object(r.s)(p))&&(f.values=x.getPayload(),f.toValues=Object(r.s)(h)?null:D==a.b?[1]:Object(r.B)(M)),f.immediate!=R&&(f.immediate=R,R||T||this._set(p)),U)){const{onRest:e}=f;Object(r.k)(Z,(e=>Q(this,t,e)));const o=P(this,$(this,p));Object(r.o)(this._pendingCalls,o),this._pendingCalls.add(n),f.changed&&r.z.batchedUpdates((()=>{f.changed=!T,null==e||e(o,this),T?c(d.onRest,o):null==f.onStart||f.onStart(o,this)}))}T&&this._set(I),w?n(j(t.to,t,this._state,this)):U?this._start():z(this)&&!_?this._pendingCalls.add(n):n(A(I))}_focus(e){const t=this.animation;e!==t.to&&(Object(r.q)(this)&&this._detach(),t.to=e,Object(r.q)(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Object(r.s)(t)&&(Object(r.c)(t,this),L(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Object(r.s)(e)&&Object(r.A)(e,this)}_set(e,t=!0){const n=Object(r.r)(e);if(!r.t.und(n)){const e=Object(a.e)(this);if(!e||!Object(r.v)(n,e.getValue())){const o=Object(a.f)(n);e&&e.constructor==o?e.setValue(n):Object(a.h)(this,o.create(n)),e&&r.z.batchedUpdates((()=>{this._onChange(n,t)}))}}return Object(a.e)(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,X(this,"onStart",P(this,$(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),c(this.animation.onChange,e,this)),c(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Object(a.e)(this).reset(Object(r.r)(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),z(this)||(V(this,!0),F(this)||this._resume())}_resume(){r.b.skipAnimation?this.finish():r.p.start(this)}_stop(e,t){if(z(this)){V(this,!1);const n=this.animation;Object(r.k)(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Object(r.d)(this,{type:"idle",parent:this});const o=t?C(this.get()):P(this.get(),$(this,null!=e?e:n.to));Object(r.o)(this._pendingCalls,o),n.changed&&(n.changed=!1,X(this,"onRest",o,this))}}}function $(e,t){const n=v(t),o=v(e.get());return Object(r.v)(o,n)}function q(e,t=e.loop,n=e.to){let r=c(t);if(r){const o=!0!==r&&h(r),a=(o||e).reverse,c=!o||o.reset;return W(i({},e,{loop:t,default:!1,pause:void 0,to:!a||b(n)?n:void 0,from:c?e.from:void 0,reset:c},o))}}function W(e){const{to:t,from:n}=e=h(e),o=new Set;return r.t.obj(t)&&K(t,o),r.t.obj(n)&&K(n,o),e.keys=o.size?Array.from(o):null,e}function H(e){const t=W(e);return r.t.und(t.default)&&(t.default=f(t)),t}function K(e,t){Object(r.l)(e,((e,n)=>null!=e&&t.add(n)))}const Z=["onStart","onRest","onChange","onPause","onResume"];function Q(e,t,n){e.animation[n]=t[n]!==s(t,n)?u(t[n],e.key):void 0}function X(e,t,...n){var r,o,a,i;null==(r=(o=e.animation)[t])||r.call(o,...n),null==(a=(i=e.defaultProps)[t])||a.call(i,...n)}const J=["onStart","onChange","onRest"];let ee=1;class te{constructor(e,t){this.id=ee++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(i({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];r.t.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(W(e)),this}start(e){let{queue:t}=this;return e?t=Object(r.B)(e).map(W):this.queue=[],this._flush?this._flush(this,t):(le(this,t),ne(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Object(r.k)(Object(r.B)(t),(t=>n[t].stop(!!e)))}else T(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(r.t.und(e))this.start({pause:!0});else{const t=this.springs;Object(r.k)(Object(r.B)(e),(e=>t[e].pause()))}return this}resume(e){if(r.t.und(e))this.start({pause:!1});else{const t=this.springs;Object(r.k)(Object(r.B)(e),(e=>t[e].resume()))}return this}each(e){Object(r.l)(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,o=this._active.size>0,a=this._changed.size>0;(o&&!this._started||a&&!this._started)&&(this._started=!0,Object(r.n)(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));const i=!o&&this._started,c=a||i&&n.size?this.get():null;a&&t.size&&Object(r.n)(t,(([e,t])=>{t.value=c,e(t,this,this._item)})),i&&(this._started=!1,Object(r.n)(n,(([e,t])=>{t.value=c,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}r.z.onFrame(this._onFrame)}}function ne(e,t){return Promise.all(t.map((t=>re(e,t)))).then((t=>x(e,t)))}async function re(e,t,n){const{keys:o,to:a,from:i,loop:c,onRest:l,onResolve:u}=t,d=r.t.obj(t.default)&&t.default;c&&(t.loop=!1),!1===a&&(t.to=null),!1===i&&(t.from=null);const f=r.t.arr(a)||r.t.fun(a)?a:void 0;f?(t.to=void 0,t.onRest=void 0,d&&(d.onRest=void 0)):Object(r.k)(J,(n=>{const o=t[n];if(r.t.fun(o)){const r=e._events[n];t[n]=({finished:e,cancelled:t})=>{const n=r.get(o);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):r.set(o,{value:null,finished:e||!1,cancelled:t||!1})},d&&(d[n]=t[n])}}));const p=e._state;t.pause===!p.paused?(p.paused=t.pause,Object(r.o)(t.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(t.pause=!0);const m=(o||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),h=!0===t.cancel||!0===s(t,"cancel");(f||h&&p.asyncId)&&m.push(N(++e._lastAsyncId,{props:t,state:p,actions:{pause:r.w,resume:r.w,start(t,n){h?(T(p,e._lastAsyncId),n(C(e))):(t.onRest=l,n(j(f,t,p,e)))}}})),p.paused&&await new Promise((e=>{p.resumeQueue.add(e)}));const v=x(e,await Promise.all(m));if(c&&v.finished&&(!n||!v.noop)){const n=q(t,c,a);if(n)return le(e,[n]),re(e,n,!0)}return u&&r.z.batchedUpdates((()=>u(v,e,e.item))),v}function oe(e,t){const n=i({},e.springs);return t&&Object(r.k)(Object(r.B)(t),(e=>{r.t.und(e.keys)&&(e=W(e)),r.t.obj(e.to)||(e=i({},e,{to:void 0})),ce(n,e,(e=>ie(e)))})),ae(e,n),n}function ae(e,t){Object(r.l)(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,Object(r.c)(t,e))}))}function ie(e,t){const n=new Y;return n.key=e,t&&Object(r.c)(n,t),n}function ce(e,t,n){t.keys&&Object(r.k)(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function le(e,t){Object(r.k)(t,(t=>{ce(e.springs,t,(t=>ie(t,e)))}))}function ue(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const se=["children"],de=e=>{let{children:t}=e,n=ue(e,se);const a=Object(o.useContext)(fe),i=n.pause||!!a.pause,c=n.immediate||!!a.immediate;n=Object(r.F)((()=>({pause:i,immediate:c})),[i,c]);const{Provider:l}=fe;return o.createElement(l,{value:n},t)},fe=(pe=de,me={},Object.assign(pe,o.createContext(me)),pe.Provider._context=pe,pe.Consumer._context=pe,pe);var pe,me;de.Provider=fe.Provider,de.Consumer=fe.Consumer;const he=()=>{const e=[],t=function(t){Object(r.i)();const o=[];return Object(r.k)(e,((e,a)=>{if(r.t.und(t))o.push(e.start());else{const r=n(t,e,a);r&&o.push(e.start(r))}})),o};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return Object(r.k)(e,(e=>e.pause(...arguments))),this},t.resume=function(){return Object(r.k)(e,(e=>e.resume(...arguments))),this},t.set=function(t){Object(r.k)(e,(e=>e.set(t)))},t.start=function(t){const n=[];return Object(r.k)(e,((e,o)=>{if(r.t.und(t))n.push(e.start());else{const r=this._getProps(t,e,o);r&&n.push(e.start(r))}})),n},t.stop=function(){return Object(r.k)(e,(e=>e.stop(...arguments))),this},t.update=function(t){return Object(r.k)(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return r.t.fun(e)?e(n,t):e};return t._getProps=n,t};function ve(e,t,n){const a=r.t.fun(t)&&t;a&&!n&&(n=[]);const c=Object(o.useMemo)((()=>a||3==arguments.length?he():void 0),[]),l=Object(o.useRef)(0),u=Object(r.D)(),s=Object(o.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=oe(e,t);return l.current>0&&!s.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?ne(e,t):new Promise((r=>{ae(e,n),s.queue.push((()=>{r(ne(e,t))})),u()}))}})),[]),d=Object(o.useRef)([...s.ctrls]),f=[],p=Object(r.H)(e)||0;function m(e,n){for(let r=e;r<n;r++){const e=d.current[r]||(d.current[r]=new te(null,s.flush)),n=a?a(r,e):t[r];n&&(f[r]=H(n))}}Object(o.useMemo)((()=>{Object(r.k)(d.current.slice(e,p),(e=>{g(e,c),e.stop(!0)})),d.current.length=e,m(p,e)}),[e]),Object(o.useMemo)((()=>{m(0,Math.min(p,e))}),n);const h=d.current.map(((e,t)=>oe(e,f[t]))),v=Object(o.useContext)(de),b=Object(r.H)(v),E=v!==b&&y(v);Object(r.E)((()=>{l.current++,s.ctrls=d.current;const{queue:e}=s;e.length&&(s.queue=[],Object(r.k)(e,(e=>e()))),Object(r.k)(d.current,((e,t)=>{null==c||c.add(e),E&&e.start({default:v});const n=f[t];n&&(_(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Object(r.G)((()=>()=>{Object(r.k)(s.ctrls,(e=>e.stop(!0)))}));const w=h.map((e=>i({},e)));return c?[w,c]:w}function ye(e,t){const n=r.t.fun(e),[[o],a]=ve(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[o,a]:o}let be;function ge(e,t,n){const a=r.t.fun(t)&&t,{reset:l,sort:u,trail:s=0,expires:d=!0,exitBeforeEnter:p=!1,onDestroyed:m,ref:v,config:b}=a?a():t,E=Object(o.useMemo)((()=>a||3==arguments.length?he():void 0),[]),w=Object(r.B)(e),O=[],k=Object(o.useRef)(null),S=l?null:k.current;Object(r.E)((()=>{k.current=O})),Object(r.G)((()=>(Object(r.k)(O,(e=>{null==E||E.add(e.ctrl),e.ctrl.ref=E})),()=>{Object(r.k)(k.current,(e=>{e.expired&&clearTimeout(e.expirationId),g(e.ctrl,E),e.ctrl.stop(!0)}))})));const N=function(e,{key:t,keys:n=t},o){if(null===n){const t=new Set;return e.map((e=>{const n=o&&o.find((n=>n.item===e&&n.phase!==be.LEAVE&&!t.has(n)));return n?(t.add(n),n.key):_e++}))}return r.t.und(n)?e:r.t.fun(n)?e.map(n):Object(r.B)(n)}(w,a?a():t,S),x=l&&k.current||[];Object(r.E)((()=>Object(r.k)(x,(({ctrl:e,item:t,key:n})=>{g(e,E),c(m,t,n)}))));const A=[];if(S&&Object(r.k)(S,((e,t)=>{e.expired?(clearTimeout(e.expirationId),x.push(e)):~(t=A[t]=N.indexOf(e.key))&&(O[t]=e)})),Object(r.k)(w,((e,t)=>{O[t]||(O[t]={key:N[t],item:e,phase:be.MOUNT,ctrl:new te},O[t].ctrl.item=e)})),A.length){let e=-1;const{leave:n}=a?a():t;Object(r.k)(A,((t,r)=>{const o=S[r];~t?(e=O.indexOf(o),O[e]=i({},o,{item:w[t]})):n&&O.splice(++e,0,o)}))}r.t.fun(u)&&O.sort(((e,t)=>u(e.item,t.item)));let P=-s;const C=Object(r.D)(),j=f(t),T=new Map,I=Object(o.useRef)(new Map),M=Object(o.useRef)(!1);Object(r.k)(O,((e,n)=>{const o=e.key,l=e.phase,u=a?a():t;let f,m,y=c(u.delay||0,o);if(l==be.MOUNT)f=u.enter,m=be.ENTER;else{const e=N.indexOf(o)<0;if(l!=be.LEAVE)if(e)f=u.leave,m=be.LEAVE;else{if(!(f=u.update))return;m=be.UPDATE}else{if(e)return;f=u.enter,m=be.ENTER}}if(f=c(f,e.item,n),f=r.t.obj(f)?h(f):{to:f},!f.config){const t=b||j.config;f.config=c(t,e.item,n,m)}P+=s;const g=i({},j,{delay:y+P,ref:v,immediate:u.immediate,reset:!1},f);if(m==be.ENTER&&r.t.und(g.from)){const o=a?a():t,i=r.t.und(o.initial)||S?o.from:o.initial;g.from=c(i,e.item,n)}const{onResolve:_}=g;g.onResolve=e=>{c(_,e);const t=k.current,n=t.find((e=>e.key===o));if(n&&(!e.cancelled||n.phase==be.UPDATE)&&n.ctrl.idle){const e=t.every((e=>e.ctrl.idle));if(n.phase==be.LEAVE){const t=c(d,n.item);if(!1!==t){const r=!0===t?0:t;if(n.expired=!0,!e&&r>0)return void(r<=2147483647&&(n.expirationId=setTimeout(C,r)))}}e&&t.some((e=>e.expired))&&(I.current.delete(n),p&&(M.current=!0),C())}};const E=oe(e.ctrl,g);m===be.LEAVE&&p?I.current.set(e,{phase:m,springs:E,payload:g}):T.set(e,{phase:m,springs:E,payload:g})}));const L=Object(o.useContext)(de),R=Object(r.H)(L),D=L!==R&&y(L);Object(r.E)((()=>{D&&Object(r.k)(O,(e=>{e.ctrl.start({default:L})}))}),[L]),Object(r.k)(T,((e,t)=>{if(I.current.size){const e=O.findIndex((e=>e.key===t.key));O.splice(e,1)}})),Object(r.E)((()=>{Object(r.k)(I.current.size?I.current:T,(({phase:e,payload:t},n)=>{const{ctrl:r}=n;n.phase=e,null==E||E.add(r),D&&e==be.ENTER&&r.start({default:L}),t&&(_(r,t.ref),!r.ref&&!E||M.current?(r.start(t),M.current&&(M.current=!1)):r.update(t))}))}),l?void 0:n);const U=e=>o.createElement(o.Fragment,null,O.map(((t,n)=>{const{springs:a}=T.get(t)||t.ctrl,c=e(i({},a),t.item,t,n);return c&&c.type?o.createElement(c.type,i({},c.props,{key:r.t.str(t.key)||r.t.num(t.key)?t.key:t.ctrl.id,ref:c.ref})):c})));return E?[U,E]:U}!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(be||(be={}));let _e=1;class Ee extends D{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Object(r.f)(...t);const n=this._get(),o=Object(a.f)(n);Object(a.h)(this,o.create(n))}advance(e){const t=this._get(),n=this.get();Object(r.v)(t,n)||(Object(a.e)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Oe(this._active)&&ke(this)}_get(){const e=r.t.arr(this.source)?this.source.map(r.r):Object(r.B)(Object(r.r)(this.source));return this.calc(...e)}_start(){this.idle&&!Oe(this._active)&&(this.idle=!1,Object(r.k)(Object(a.g)(this),(e=>{e.done=!1})),r.b.skipAnimation?(r.z.batchedUpdates((()=>this.advance())),ke(this)):r.p.start(this))}_attach(){let e=1;Object(r.k)(Object(r.B)(this.source),(t=>{Object(r.s)(t)&&Object(r.c)(t,this),L(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){Object(r.k)(Object(r.B)(this.source),(e=>{Object(r.s)(e)&&Object(r.A)(e,this)})),this._active.clear(),ke(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Object(r.B)(this.source).reduce(((e,t)=>Math.max(e,(L(t)?t.priority:0)+1)),0))}}function we(e){return!1!==e.idle}function Oe(e){return!e.size||Array.from(e).every(we)}function ke(e){e.idle||(e.idle=!0,Object(r.k)(Object(a.g)(e),(e=>{e.done=!0})),Object(r.d)(e,{type:"idle",parent:e}))}r.b.assign({createStringInterpolator:r.g,to:(e,t)=>new Ee(e,t)});r.p.advance},3689:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),o=n.n(r);const a={click:"onClick",touchstart:"onTouchStart"};function i(e,t){const n=Object.assign({},t.props);for(const r of e){const e=a[r];n[e]=function(n){var r,o;n.stopPropagation(),null===(o=(r=t.props)[e])||void 0===o||o.call(r,n)}}return o.a.cloneElement(t,n)}},3692:function(e,t,n){"use strict";var r=n(3642);n.d(t,"a",(function(){return r.i})),n.d(t,"b",(function(){return r.k})),n.d(t,"c",(function(){return r.m})),n.d(t,"d",(function(){return r.j})),n.d(t,"e",(function(){return r.o})),n.d(t,"f",(function(){return r.p})),n.d(t,"g",(function(){return r.r}))},3693:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0);const o=10;function a(){const e=Object(r.useRef)(0),t=Object(r.useRef)(0),n=Object(r.useRef)(0),a=Object(r.useRef)(0),i=Object(r.useRef)(0),c=Object(r.useRef)(0),l=Object(r.useRef)(""),u=()=>{n.current=0,a.current=0,i.current=0,c.current=0,l.current=""};return{move:r=>{const u=r.touches[0];var s,d;n.current=u.clientX<0?0:u.clientX-e.current,a.current=u.clientY-t.current,i.current=Math.abs(n.current),c.current=Math.abs(a.current),l.current||(l.current=(s=i.current,d=c.current,s>d&&s>o?"horizontal":d>s&&d>o?"vertical":""))},start:n=>{u(),e.current=n.touches[0].clientX,t.current=n.touches[0].clientY},reset:u,startX:e,startY:t,deltaX:n,deltaY:a,offsetX:i,offsetY:c,direction:l,isVertical:()=>"vertical"===l.current,isHorizontal:()=>"horizontal"===l.current}}var i=n(3657);const c=i.a?window:void 0,l=["scroll","auto","overlay"];function u(e){return 1===e.nodeType}let s=!1;if(i.a)try{const e={};Object.defineProperty(e,"passive",{get(){s=!0}}),window.addEventListener("test-passive",null,e)}catch(e){}let d=0;const f="adm-overflow-hidden";function p(e,t){const n=a(),o=r=>{n.move(r);const o=n.deltaY.current>0?"10":"01",a=function(e,t=c){let n=e;for(;n&&n!==t&&u(n);){if(n===document.body)return t;const{overflowY:e}=window.getComputedStyle(n);if(l.includes(e)&&n.scrollHeight>n.clientHeight)return n;n=n.parentNode}return t}(r.target,e.current);if(!a)return;if("strict"===t){const e=function(e){let t=null==e?void 0:e.parentElement;for(;t;){if(t.clientHeight<t.scrollHeight)return t;t=t.parentElement}return null}(r.target);if(e===document.body||e===document.documentElement)return void r.preventDefault()}const{scrollHeight:i,offsetHeight:d,scrollTop:f}=a,{height:p}=a.getBoundingClientRect();let m="11";0===f?m=d>=i?"00":"01":i<=Math.round(p+f)&&(m="10"),"11"===m||!n.isVertical()||parseInt(m,2)&parseInt(o,2)||r.cancelable&&s&&r.preventDefault()};Object(r.useEffect)((()=>{if(t)return document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",o,!!s&&{passive:!1}),d||document.body.classList.add(f),d++,()=>{d&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",o),d--,d||document.body.classList.remove(f))}}),[t])}},3694:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3639),i=n(3641),c=n(5),l=n.n(c);const u={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},s={color:"default"},d=Object(r.memo)((e=>{var t;const n=Object(a.b)(s,e);return Object(i.a)(n,o.a.createElement("div",{style:{color:null!==(t=u[n.color])&&void 0!==t?t:n.color},className:l()("adm-loading","adm-dot-loading")},o.a.createElement("svg",{height:"1em",viewBox:"0 0 100 40",style:{verticalAlign:"-0.125em"}},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-100.000000, -71.000000)"},o.a.createElement("g",{transform:"translate(95.000000, 71.000000)"},o.a.createElement("g",{transform:"translate(5.000000, 0.000000)"},[0,1,2].map((e=>o.a.createElement("rect",{key:e,fill:"currentColor",x:20+26*e,y:"16",width:"8",height:"8",rx:"2"},o.a.createElement("animate",{attributeName:"y",from:"16",to:"16",dur:"2s",begin:.2*e+"s",repeatCount:"indefinite",values:"16; 6; 26; 16; 16",keyTimes:"0; 0.1; 0.3; 0.4; 1"})))))))))))}));t.a=d},3695:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3641),i=n(3639),c=n(3655),l=n(3675);const u="adm-spin-loading",s={default:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",white:"var(--adm-color-white)"},d={color:"default"},f=Object(r.memo)((e=>{var t;const n=Object(i.b)(d,e),r=Object(l.a)(),{percent:f}=Object(c.useSpring)({cancel:r,loop:{reverse:!0},from:{percent:80},to:{percent:30},config:{duration:1200}});return Object(a.a)(n,o.a.createElement(c.animated.div,{className:u,style:{"--color":null!==(t=s[n.color])&&void 0!==t?t:n.color,"--percent":f}},o.a.createElement("svg",{className:`${u}-svg`,viewBox:"0 0 32 32"},o.a.createElement(c.animated.circle,{className:`${u}-fill`,fill:"transparent",strokeWidth:"2",strokeDasharray:94.2477796076937,strokeDashoffset:f,strokeLinecap:"square",r:15,cx:16,cy:16}))))}));t.a=f},3696:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(17),o=n(0),a=n.n(o),i=n(78);const c=Object.assign({},i),{version:l,render:u,unmountComponentAtNode:s}=c;let d;try{Number((l||"").split(".")[0])>=18&&c.createRoot&&(d=c.createRoot)}catch(e){}function f(e){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:t}=c;t&&"object"==typeof t&&(t.usingClientEntryPoint=e)}const p="__antd_mobile_root__";function m(e,t){d?function(e,t){f(!0);const n=t[p]||d(t);f(!1),n.render(e),t[p]=n}(e,t):function(e,t){u(e,t)}(e,t)}function h(e){return d?function(e){return Object(r.__awaiter)(this,void 0,void 0,(function*(){return Promise.resolve().then((()=>{var t;null===(t=e[p])||void 0===t||t.unmount(),delete e[p]}))}))}(e):function(e){return s(e)}(e)}function v(e){const t=a.a.forwardRef(((t,n)=>{const[r,c]=Object(o.useState)(!1),l=Object(o.useRef)(!1),[u,s]=Object(o.useState)(e),d=Object(o.useRef)(0);function f(){var e,t;l.current=!0,c(!1),null===(t=(e=u.props).onClose)||void 0===t||t.call(e)}function p(){var e,t;i(),null===(t=(e=u.props).afterClose)||void 0===t||t.call(e)}return Object(o.useEffect)((()=>{l.current?p():c(!0)}),[]),Object(o.useImperativeHandle)(n,(()=>({close:f,replace:e=>{var t,n;d.current++,null===(n=(t=u.props).afterClose)||void 0===n||n.call(t),s(e)}}))),a.a.cloneElement(u,Object.assign(Object.assign({},u.props),{key:d.current,visible:r,onClose:f,afterClose:p}))})),n=a.a.createRef(),i=function(e){const t=document.createElement("div");return document.body.appendChild(t),m(e,t),function(){h(t)&&t.parentNode&&t.parentNode.removeChild(t)}}(a.a.createElement(t,{ref:n}));return{close:()=>Object(r.__awaiter)(this,void 0,void 0,(function*(){var t,r,o;n.current?null===(o=n.current)||void 0===o||o.close():(i(),null===(r=(t=e.props).afterClose)||void 0===r||r.call(t))})),replace:e=>{var t;null===(t=n.current)||void 0===t||t.replace(e)},isRendered:()=>!!n.current}}},3697:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0);const o=e=>function(e,t,n){const o=function(e){const t=Object(r.useRef)(e);return e&&(t.current=!0),!!t.current}(e);return!!t||(!!e||!!o&&!n)}(e.active,e.forceRender,e.destroyOnClose)?e.children:null},3698:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(78);var o=n(3657);function a(e,t){if(o.a&&e){const n=function(e){return("function"==typeof e?e():e)||document.body}(e);return Object(r.createPortal)(t,n)}return t}},3706:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(175),n(44)),a=(n(207),n(49)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(712),d=n(711),f="receiptmodal-module_receiptContainer_E57+C",p="receiptmodal-module_contactTips_rQ4lg",m="receiptmodal-module_receiptTypeTitle_u72yN",h="receiptmodal-module_receiptDesc_87YQ3";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function g(e,t,n){return t=E(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var O=a.a.create()(s.a),k=a.a.create()(d.a),S=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=g(this,t,[e])).props.receipt;return n.state={radioValue:r&&void 0!==r.type?r.type:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(a=[{key:"onRadioChange",value:function(){0===this.state.radioValue?this.setState({radioValue:1}):this.setState({radioValue:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onClose,i=t.onChange,l=void 0===i?function(){}:i,u=t.onConfirm,s=t.submited,d=t.receipt,v=t.isOrganization,y=this.state.radioValue;return c.a.createElement(r.a,{className:"receipt-success-modal",title:c.a.createElement(c.a.Fragment,null,s?__("已提交申请"):__("申请发票"),c.a.createElement("p",{className:h},__("发票将在申请后的 7 个工作日内开具，目前处于升级数电发票的过渡期，详情请查看"),c.a.createElement("a",{href:"https://www.yuque.com/yuque/qa/ul74ukuugy5wvuqd",target:"_blank"},__("关于开具数电发票的通知")))),visible:n,maskClosable:!1,closable:!0,onCancel:a,footer:null,centered:!0,width:480,zIndex:9999},c.a.createElement("div",{className:f,"data-testid":"receipt-modal"},s?c.a.createElement("p",{className:p},__("如需帮助请联系"),"：support@yuque.com"):c.a.createElement("div",{className:m},c.a.createElement(o.a.Group,{disabled:s,onChange:function(){return e.onRadioChange()},value:y},c.a.createElement(o.a,{value:1,"data-testid":"special"},__("专用发票")),c.a.createElement(o.a,{value:0},__("普通电子发票")))),0===y?c.a.createElement(O,{handleClickReceiptConfirm:u,handleApplyReceiptCancel:a,handleReceiptChange:l,data:d,isFinished:s,isOrganization:v}):c.a.createElement(k,{handleClickReceiptConfirm:u,handleApplyReceiptCancel:a,handleReceiptChange:l,data:d,isFinished:s})))}}])&&y(n.prototype,a),i&&y(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(i.PureComponent);S.propTypes={visible:u.a.bool,submited:u.a.bool,onClose:u.a.func,onChange:u.a.func,onConfirm:u.a.func,receipt:u.a.object,isOrganization:u.a.bool};t.a=S},3707:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=(n(67),n(31)),i=(n(40),n(9)),c=n(6),l=n.n(c),u=n(157),s=n(87),d=n(74),f=n(54),p="DocNoteLimitModal-module_modal_9Rtx7",m="DocNoteLimitModal-module_content_SXXvX",h="DocNoteLimitModal-module_limitFigure_7z-6U",v="DocNoteLimitModal-module_leftTopPos_9X2He",y="DocNoteLimitModal-module_midTopPos_b35jM",b="DocNoteLimitModal-module_rightTopPos_CQ7st",g="DocNoteLimitModal-module_midBottomPos_VQGhz",_="DocNoteLimitModal-module_footer_2ctWH",E="DocNoteLimitModal-module_footerAction_IlCRq",w="DocNoteLimitModal-module_actionBtn_j4wTK",O="DocNoteLimitModal-module_footerOrgOwnerAction_3oyZh",k="DocNoteLimitModal-module_footerOrgMemberAction_5PEmm",S=function(e){var t,n=e.me,c=e.error,l=e.handleClose,S=e.onConfirm,N=e.organization,x=N.abilities,A=N.name,P=c.memberDocNoteLimitModalVisible,C=c.memberDocNoteLimitModalUserId,j=n.id===C,T=s.a.isFree(N),I=s.a.isExpired(N),M=d.MEMBER_RULE.User[f.MEMBER_LEVEL.free][d.LIMIT_RULE_CODE.max_doc_note_number];if(Object(r.useEffect)((function(){if(P){var e=null!=N&&N.id?d.LIMIT_RULE_CODE.max_doc_number:d.LIMIT_SCENE.max_doc_note_number,t=null!=N&&N.id?d.ORG_LIMIT_SPM.pay_limit:d.LIMIT_SPM.pay_limit;Object(u.spmClick)(t,{pay_source:e,organization_id:(null==N?void 0:N.id)||0})}}),[P]),null!=N&&N.id){return o.a.createElement(a.a,{className:p,visible:P,onCancel:l,header:null,footer:null,width:480,maskClosable:!1,centered:!0},o.a.createElement("div",{className:m,"data-testid":"doc-note-limit-content"},o.a.createElement("h1",null,__("本月新建文档数已达到免费上限")),o.a.createElement("p",null,I?__("你的空间“{orgName}”付费权益已过期，本月新建文档数已达到免费上限，",{orgName:A}):__("你的空间“{orgName}”文稿数量已达到免费试用上限，",{orgName:A}),null!=x&&x.destroy?I?__("请及时续费。"):__("请及时升级付费版。"):I?__("请联系管理员及时进行套餐续费。"):__("请联系管理员及时进行套餐版本升级。")),o.a.createElement("div",{className:h},o.a.createElement("div",{className:v},"0"),o.a.createElement("div",{className:y},__("100篇")),o.a.createElement("div",{className:b},I?__("续费可享受无限文档创建"):__("升级付费可享受无限文档创建")),o.a.createElement("div",{className:g},__("已达免费上限"))),o.a.createElement("div",{className:_},null!=x&&x.destroy?o.a.createElement("div",{className:O},o.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/wvcdiy",target:"_blank","data-desktoptarget":"_browser"},__("查看帮助文档")),o.a.createElement("div",{onClick:l},o.a.createElement(i.a,{href:"/r/organizations/dashboard/cashier?action=".concat(T?"upgrade":"renew","&paySource=").concat(d.LIMIT_RULE_CODE.max_doc_number),type:"primary"},I?__("立即续费"):__("立即升级")))):o.a.createElement(i.a,{className:k,type:"primary",onClick:l},__("我知道了")))))}return t=j?__("你的会员已过期，每月只能享受 {limit} 篇文稿新建数。续费语雀会员享受无限文稿数，以及其他超值权益。",{limit:M}):__("知识库所有者本月的文稿新建数已经达到 {limit} 篇上限，联系 Ta 开通语雀会员，享受无限文稿数，以及其他超值权益。",{limit:M}),o.a.createElement("div",{className:m,"data-testid":"doc-note-limit-content"},o.a.createElement("h1",null,__("本月文稿数已达上限，"),j?__("续费会员享无限文稿数"):__("无法继续新建或同步文稿")),o.a.createElement("p",null,t),o.a.createElement("div",{className:h},o.a.createElement("div",{className:v},"0"),o.a.createElement("div",{className:y},M,__("篇")),o.a.createElement("div",{className:b},__("会员可享无限文稿数")),o.a.createElement("div",{className:g},__("已达免费上限"))),o.a.createElement("div",{className:_},o.a.createElement("div",{className:E},j?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{className:w,onClick:l},__("取消")),o.a.createElement(i.a,{"data-testid":"buy-button",className:w,type:"primary",onClick:function(){l(!0),S()}},n.hasMemberLevel?__("立即续费"):__("购买会员"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{className:w,type:"primary",onClick:l},__("我知道了"))))))};S.propTypes={me:l.a.object.isRequired,error:l.a.object.isRequired,handleClose:l.a.func.isRequired,onConfirm:l.a.func};var N=S,x=n(55),A="index-module_modal_ciiIL",P="index-module_modalDesktop_CvNi7";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function T(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}function D(e,t,n){return t=F(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function B(e,t,n,r){var o=z(F(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},z.apply(null,arguments)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var G=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,(r=[{key:"onConfirm",value:function(e){B(t,"onConfirm",this,3)([d.LIMIT_SCENE.max_doc_note_number])}},{key:"show",value:function(e){var n=this,r={content:o.a.createElement(N,{className:A,onConfirm:function(){null==e||e.onConfirm(),n.onConfirm()},organization:e.organization||{},me:e.me,error:{memberDocNoteLimitModalVisible:!0,memberDocNoteLimitModalUserId:(null==e?void 0:e.owner_id)&&Number(null==e?void 0:e.owner_id)},handleClose:function(r){var o;null==e||null===(o=e.onClose)||void 0===o||o.call(e),B(t,"close",n,3)([r])}}),icon:null,footer:null,className:A,header:null,width:480,maskClosable:!1,centered:!0};B(t,"show",this,3)([r,{payload:e}])}}])&&L(n.prototype,r),a&&L(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(function(){return e=function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"isDesktopApp",void 0),T(this,"modal",void 0),this.isDesktopApp=null===(t=window.appData)||void 0===t?void 0:t.isDesktopApp},(t=[{key:"onConfirm",value:function(e){var t;null===(t=window.__member_message_ref)||void 0===t||t.current.showMemberIntro(e)}},{key:"close",value:function(){var e,t;null!==(e=window.appData)&&void 0!==e&&e.isDesktopApp&&(null===(t=window.YuqueDesktopJSBridge)||void 0===t||t.postMessage(x.DesktopBridgeEvents.subappClose)),this.modal.destroy()}},{key:"show",value:function(e){var t;null!==(t=window.appData)&&void 0!==t&&t.isDesktopApp&&(e.transitionName="",e.maskTransitionName="",e.style={margin:0,padding:0,shadow:"none"},e.mask=!1,e.keyboard=!1,e.className=P),this.modal=a.a.info(e)}}])&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())),Y=n(3759),$=function(e){var t=e.me,n=e.error,c=e.handleClose,l=e.onConfirm,f=e.organization,p=f.abilities,m=f.name,h=n.memberDocNoteLimitModalVisible,v=s.a.isFree(f),y=s.a.isExpired(f),b=function(){c(),l()};if(Object(r.useEffect)((function(){if(h){var e=null!=f&&f.id?d.LIMIT_RULE_CODE.max_doc_number:d.LIMIT_SCENE.max_doc_note_number,t=null!=f&&f.id?d.ORG_LIMIT_SPM.pay_limit:d.LIMIT_SPM.pay_limit;Object(u.spmClick)(t,{pay_source:e,organization_id:(null==f?void 0:f.id)||0})}}),[h]),null!=f&&f.id){return o.a.createElement(a.a,{className:Y.a.modal,visible:h,onCancel:c,header:null,footer:null,width:480,maskClosable:!1,centered:!0},o.a.createElement("div",{className:Y.a.content,"data-testid":"doc-note-limit-content"},o.a.createElement("h1",null,__("本月新建文档数已达到免费上限")),o.a.createElement("p",null,y?__("你的空间“{orgName}”付费权益已过期，本月新建文档数已达到免费上限，",{orgName:m}):__("你的空间“{orgName}”文稿数量已达到免费试用上限，",{orgName:m}),null!=p&&p.destroy?y?__("请及时续费。"):__("请及时升级付费版。"):y?__("请联系管理员及时进行套餐续费。"):__("请联系管理员及时进行套餐版本升级。")),o.a.createElement("div",{className:Y.a.limitFigure},o.a.createElement("div",{className:Y.a.leftTopPos},"0"),o.a.createElement("div",{className:Y.a.midTopPos},__("100篇")),o.a.createElement("div",{className:Y.a.rightTopPos},y?__("续费可享受无限文档创建"):__("升级付费可享受无限文档创建")),o.a.createElement("div",{className:Y.a.midBottomPos},__("已达免费上限"))),o.a.createElement("div",{className:Y.a.footer},null!=p&&p.destroy?o.a.createElement("div",{className:Y.a.footerOrgOwnerAction},o.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/wvcdiy",target:"_blank"},__("查看帮助文档")),o.a.createElement("div",{onClick:c},o.a.createElement(i.a,{href:"/r/organizations/dashboard/cashier?action=".concat(v?"upgrade":"renew","&paySource=").concat(d.LIMIT_RULE_CODE.max_doc_number),type:"primary"},y?__("立即续费"):__("立即升级")))):o.a.createElement(i.a,{className:Y.a.footerOrgMemberAction,type:"primary",onClick:c},__("我知道了")))))}return o.a.createElement("div",null,!!h&&void G.show({me:t,owner_id:n.memberDocNoteLimitModalUserId,onConfirm:b,onClose:c}))};$.propTypes={me:l.a.object.isRequired,error:l.a.object.isRequired,handleClose:l.a.func.isRequired,onConfirm:l.a.func};var q=$,W=n(473),H=n(308);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(null,arguments)}var Z=function(e){var t=e.dispatch;return o.a.createElement(q,K({},e,{handleClose:function(){t({type:"error/toggleMemberDocNoteLimitModal",payload:{visible:!1}})}}))};Z.propTypes={me:l.a.object.isRequired,error:l.a.object.isRequired,dispatch:l.a.func.isRequired,onConfirm:l.a.func};t.a=Object(H.b)(Object(W.d)((function(e){return{me:e.me,error:e.error,organization:e.organization}}))(Z))},3711:function(e,t,n){"use strict";t.a=!1},3712:function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.a=r},3730:function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3733:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return c}));var r=n(3645),o=n(0);const a=Symbol.for("Animated:node"),i=e=>e&&e[a],c=(e,t)=>Object(r.h)(e,a,t),l=e=>e&&e[a]&&e[a].getPayload();class u{constructor(){this.payload=void 0,c(this,this)}getPayload(){return this.payload||[]}}class s extends u{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,r.t.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new s(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return r.t.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,r.t.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class d extends s{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Object(r.f)({output:[e,e]})}static create(e){return new d(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(r.t.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Object(r.f)({output:[this.getValue(),e]})),this._value=0,super.reset()}}const f={dependencies:null};class p extends u{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Object(r.l)(this.source,((n,o)=>{var i;(i=n)&&i[a]===i?t[o]=n.getValue(e):Object(r.s)(n)?t[o]=Object(r.r)(n):e||(t[o]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Object(r.k)(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return Object(r.l)(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){f.dependencies&&Object(r.s)(e)&&f.dependencies.add(e);const t=l(e);t&&Object(r.k)(t,(e=>this.add(e)))}}class m extends p{constructor(e){super(e)}static create(e){return new m(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(h)),!0)}}function h(e){return(Object(r.u)(e)?d:s).create(e)}function v(e){const t=i(e);return t?t.constructor:r.t.arr(e)?m:Object(r.u)(e)?d:s}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const b=(e,t)=>{const n=!r.t.fun(e)||e.prototype&&e.prototype.isReactComponent;return Object(o.forwardRef)(((a,i)=>{const c=Object(o.useRef)(null),l=n&&Object(o.useCallback)((e=>{c.current=function(e,t){e&&(r.t.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[u,s]=function(e,t){const n=new Set;f.dependencies=n,e.style&&(e=y({},e,{style:t.createAnimatedStyle(e.style)}));return e=new p(e),f.dependencies=null,[e,n]}(a,t),d=Object(r.D)(),m=()=>{const e=c.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,u.getValue(!0)))&&d()},h=new g(m,s),v=Object(o.useRef)();Object(r.E)((()=>(v.current=h,Object(r.k)(s,(e=>Object(r.c)(e,h))),()=>{v.current&&(Object(r.k)(v.current.deps,(e=>Object(r.A)(e,v.current))),r.z.cancel(v.current.update))}))),Object(o.useEffect)(m,[]),Object(r.G)((()=>()=>{const e=v.current;Object(r.k)(e.deps,(t=>Object(r.A)(t,e)))}));const b=t.getComponentProps(u.getValue());return o.createElement(e,y({},b,{ref:l}))}))};class g{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&r.z.write(this.update)}}const _=Symbol.for("AnimatedComponent"),E=(e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new p(e)),getComponentProps:o=(e=>e)}={})=>{const a={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:o},i=e=>{const t=w(e)||"Anonymous";return(e=r.t.str(e)?i[e]||(i[e]=b(e,a)):e[_]||(e[_]=b(e,a))).displayName=`Animated(${t})`,e};return Object(r.l)(e,((t,n)=>{r.t.arr(e)&&(n=w(t)),i[n]=i(t)})),{animated:i}},w=e=>r.t.str(e)?e:e&&r.t.str(e.displayName)?e.displayName:r.t.fun(e)&&e.name||null},3734:function(e,t){},3735:function(e,t){},3736:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3696),i=n(3639);var c=function(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),r.createElement("g",{id:"CheckOutline-CheckOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"CheckOutline-编组"},r.createElement("rect",{id:"CheckOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),r.createElement("path",{d:"M44.309608,12.6841286 L21.2180499,35.5661955 L21.2180499,35.5661955 C20.6343343,36.1446015 19.6879443,36.1446015 19.1042286,35.5661955 C19.0538201,35.5162456 19.0077648,35.4636155 18.9660627,35.4087682 C18.9113105,35.368106 18.8584669,35.3226694 18.808302,35.2729607 L3.6903839,20.2920499 C3.53346476,20.1365529 3.53231192,19.8832895 3.68780898,19.7263704 C3.7629255,19.6505669 3.86521855,19.6079227 3.97193622,19.6079227 L7.06238923,19.6079227 C7.16784214,19.6079227 7.26902895,19.6495648 7.34393561,19.7237896 L20.160443,32.4236157 L20.160443,32.4236157 L40.656066,12.115858 C40.7309719,12.0416387 40.8321549,12 40.9376034,12 L44.0280571,12 C44.248971,12 44.4280571,12.1790861 44.4280571,12.4 C44.4280571,12.5067183 44.3854124,12.609012 44.309608,12.6841286 Z",id:"CheckOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))},l=n(4169),u=n(5),s=n.n(u),d=n(3661),f=n(3662),p=n(3695);const m="adm-toast",h={maskClickable:!0,stopPropagation:["click"]},v=e=>{const t=Object(i.b)(h,e),{maskClickable:n,content:a,icon:u,position:v}=t,y=Object(r.useMemo)((()=>{if(null==u)return null;switch(u){case"success":return o.a.createElement(c,{className:`${m}-icon-success`});case"fail":return o.a.createElement(l.a,{className:`${m}-icon-fail`});case"loading":return o.a.createElement(p.a,{color:"white",className:`${m}-loading`});default:return u}}),[u]),b=Object(r.useMemo)((()=>{switch(v){case"top":return"20%";case"bottom":return"80%";default:return"50%"}}),[v]);return o.a.createElement(f.a,{visible:t.visible,destroyOnClose:!0,opacity:0,disableBodyScroll:!n,getContainer:t.getContainer,afterClose:t.afterClose,style:Object.assign({pointerEvents:n?"none":"auto"},t.maskStyle),className:s()(`${m}-mask`,t.maskClassName),stopPropagation:t.stopPropagation},o.a.createElement("div",{className:s()(`${m}-wrap`)},o.a.createElement("div",{style:{top:b},className:s()(`${m}-main`,u?`${m}-main-icon`:`${m}-main-text`)},y&&o.a.createElement("div",{className:`${m}-icon`},y),o.a.createElement(d.a,null,a))))};let y=null,b=null;const g={duration:2e3,position:"center",maskClickable:!0},_=e=>o.a.createElement(v,Object.assign({},e));function E(){null==y||y.close(),y=null}const w={show:function(e){var t;const n=Object(i.b)(g,"string"==typeof e?{content:e}:e),r=o.a.createElement(_,Object.assign({},n,{onClose:()=>{y=null}}));return y?(null===(t=y.isRendered)||void 0===t?void 0:t.call(y))?y.replace(r):(y.close(),y=Object(a.a)(r)):y=Object(a.a)(r),b&&window.clearTimeout(b),0!==n.duration&&(b=window.setTimeout((()=>{E()}),n.duration)),y},clear:E,config:function(e){void 0!==e.duration&&(g.duration=e.duration),void 0!==e.position&&(g.position=e.position),void 0!==e.maskClickable&&(g.maskClickable=e.maskClickable)}};t.a=w},3737:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3671),o=n(3712);function a(e,t){if(o.a)return e?Object(r.a)(e)?e():"current"in e?e.current:e:t}},3739:function(e,t,n){},3740:function(e,t){},3752:function(e,t,n){"use strict";n.d(t,"a",(function(){return W})),n.d(t,"b",(function(){return H.a})),n.d(t,"c",(function(){return ae})),n.d(t,"d",(function(){return pe})),n.d(t,"e",(function(){return ye})),n.d(t,"f",(function(){return be.a})),n(3657).a&&document.addEventListener("touchstart",(()=>{}),!0);var r=n(0),o=n.n(r),a=n(17),i=n(3639),c=n(5),l=n.n(c),u=n(3674),s=n(3641);const d=e=>{const{action:t}=e;return Object(s.a)(e.action,o.a.createElement(u.a,{key:t.key,onClick:e.onAction,className:l()("adm-dialog-button",{"adm-dialog-button-bold":t.bold}),fill:"none",shape:"rectangular",block:!0,color:t.danger?"danger":"primary",loading:"auto",disabled:t.disabled},t.text))};var f=n(3948);function p(e){return"number"==typeof e?`${e}px`:e}n(3949);var m=n(3737),h=n(3879);var v=function(e,t){var n=t||{},o=n.callback,i=Object(a.__rest)(n,["callback"]),c=Object(a.__read)(Object(r.useState)(),2),l=c[0],u=c[1],s=Object(a.__read)(Object(r.useState)(),2),d=s[0],f=s[1];return Object(h.a)((function(){var n=(Array.isArray(e)?e:[e]).map((function(e){return Object(m.a)(e)})).filter(Boolean);if(n.length){var r=new IntersectionObserver((function(e){var t,n;try{for(var r=Object(a.__values)(e),i=r.next();!i.done;i=r.next()){var c=i.value;f(c.intersectionRatio),u(c.isIntersecting),null==o||o(c)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}),Object(a.__assign)(Object(a.__assign)({},i),{root:Object(m.a)(null==t?void 0:t.root)}));return n.forEach((function(e){return r.observe(e)})),function(){r.disconnect()}}}),[null==t?void 0:t.rootMargin,null==t?void 0:t.threshold,o],e),[l,d]};const y=e=>{const t=Object(r.useRef)(null),[n]=v(t);return Object(r.useEffect)((()=>{n&&e.onActive()}),[n]),o.a.createElement("div",{ref:t})};var b=n(4161),g=n(4168);const _=Object(b.a)(g.a),E="adm-image",w={fit:"fill",placeholder:o.a.createElement("div",{className:`${E}-tip`},o.a.createElement((()=>o.a.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M41.396 6.234c1.923 0 3.487 1.574 3.487 3.505v29.14c0 1.937-1.568 3.51-3.491 3.51H6.604c-1.923 0-3.487-1.573-3.487-3.51V9.745c0-1.936 1.564-3.51 3.487-3.51Zm0 2.847H6.604c-.355 0-.654.3-.654.658V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.405 2.405 0 0 1 1.933.752l4.182 4.525 7.58-11.005a2.374 2.374 0 0 1 1.96-1.01c.79 0 1.532.38 1.966 1.01L42.05 34.89V9.74a.664.664 0 0 0-.654-.658Zm-28.305 2.763a3.119 3.119 0 0 1 3.117 3.117 3.119 3.119 0 0 1-3.117 3.117 3.122 3.122 0 0 1-3.117-3.117 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"}))),null)),fallback:o.a.createElement("div",{className:`${E}-tip`},o.a.createElement((()=>o.a.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M19.233 6.233 17.42 9.08l-10.817.001a.665.665 0 0 0-.647.562l-.007.096V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.415 2.415 0 0 1 1.807.625l.126.127 4.182 4.525 2.267-3.292 5.461 7.841-4.065 7.375H6.604c-1.86 0-3.382-1.47-3.482-3.317l-.005-.192V9.744c0-1.872 1.461-3.405 3.296-3.505l.19-.005h12.63Zm22.163 0c1.86 0 3.382 1.472 3.482 3.314l.005.192v29.14a3.507 3.507 0 0 1-3.3 3.505l-.191.006H27.789l3.63-6.587.06-.119a1.87 1.87 0 0 0-.163-1.853l-6.928-9.949 3.047-4.422a2.374 2.374 0 0 1 1.96-1.01 2.4 2.4 0 0 1 1.86.87l.106.14L42.05 34.89V9.74a.664.664 0 0 0-.654-.658H21.855l1.812-2.848h17.73Zm-28.305 5.611c.794 0 1.52.298 2.07.788l-.843 1.325-.067.114a1.87 1.87 0 0 0 .11 1.959l.848 1.217c-.556.515-1.3.83-2.118.83a3.122 3.122 0 0 1-3.117-3.116 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"}))),null)),lazy:!1,draggable:!1};var O=Object(f.staged)((e=>{const t=Object(i.b)(w,e),[n,a]=Object(r.useState)(!1),[c,l]=Object(r.useState)(!1),u=Object(r.useRef)(null),d=Object(r.useRef)(null);let f=t.src,m=t.srcSet;const[h,v]=Object(r.useState)(!t.lazy);f=h?t.src:void 0,m=h?t.srcSet:void 0,_((()=>{a(!1),l(!1)}),[f]),Object(r.useEffect)((()=>{var e;(null===(e=d.current)||void 0===e?void 0:e.complete)&&a(!0)}),[]);const b={};return t.width&&(b["--width"]=p(t.width),b.width=p(t.width)),t.height&&(b["--height"]=p(t.height),b.height=p(t.height)),Object(s.a)(t,o.a.createElement("div",{ref:u,className:E,style:b,onClick:t.onContainerClick},t.lazy&&!h&&o.a.createElement(y,{onActive:()=>{v(!0)}}),function(){if(c)return o.a.createElement(o.a.Fragment,null,t.fallback);const e=o.a.createElement("img",{ref:d,id:t.id,className:`${E}-img`,src:f,alt:t.alt,onClick:t.onClick,onLoad:e=>{var n;a(!0),null===(n=t.onLoad)||void 0===n||n.call(t,e)},onError:e=>{var n;l(!0),null===(n=t.onError)||void 0===n||n.call(t,e)},style:{objectFit:t.fit,display:n?"block":"none"},crossOrigin:t.crossOrigin,decoding:t.decoding,loading:t.loading,referrerPolicy:t.referrerPolicy,sizes:t.sizes,srcSet:m,useMap:t.useMap,draggable:t.draggable});return o.a.createElement(o.a.Fragment,null,!n&&t.placeholder,e)}()))})),k=n(3661),S=n(3655),N=n(4170),x=n(3698),A=n(3697);function P(e){const[t,n]=Object(r.useState)(e);return Object(g.a)((()=>{n(e)}),[e]),t}var C=n(3693),j=n(3689),T=n(4185),I=n(3662),M=n(4169);const L={closeOnMaskClick:!1,closeIcon:o.a.createElement(M.a,null),destroyOnClose:!1,disableBodyScroll:!0,forceRender:!1,getContainer:()=>document.body,mask:!0,showCloseButton:!1,stopPropagation:["click"],visible:!1},R="adm-center-popup",D=Object.assign(Object.assign({},L),{getContainer:null});var U=e=>{const{popup:t={}}=Object(T.b)(),n=Object(i.b)(D,t,e),a=Object(N.a)(),c=Object(S.useSpring)({scale:n.visible?1:.8,opacity:n.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onRest:()=>{var e,t;a.current||(d(n.visible),n.visible?null===(e=n.afterShow)||void 0===e||e.call(n):null===(t=n.afterClose)||void 0===t||t.call(n))}}),[u,d]=Object(r.useState)(n.visible);Object(g.a)((()=>{n.visible&&d(!0)}),[n.visible]);const f=Object(r.useRef)(null);Object(C.a)(f,n.disableBodyScroll&&u);const p=P(u&&n.visible),m=o.a.createElement("div",{className:l()(`${R}-body`,n.bodyClassName),style:n.bodyStyle},n.children),h=Object(j.a)(n.stopPropagation,Object(s.a)(n,o.a.createElement("div",{className:R,style:{display:u?void 0:"none",pointerEvents:u?void 0:"none"}},n.mask&&o.a.createElement(I.a,{visible:p,forceRender:n.forceRender,destroyOnClose:n.destroyOnClose,onMaskClick:e=>{var t,r;null===(t=n.onMaskClick)||void 0===t||t.call(n,e),n.closeOnMaskClick&&(null===(r=n.onClose)||void 0===r||r.call(n))},style:n.maskStyle,className:l()(`${R}-mask`,n.maskClassName),disableBodyScroll:!1,stopPropagation:n.stopPropagation}),o.a.createElement("div",{className:`${R}-wrap`,role:n.role,"aria-label":n["aria-label"]},o.a.createElement(S.animated.div,{style:Object.assign(Object.assign({},c),{pointerEvents:c.opacity.to((e=>1===e?"unset":"none"))}),ref:f},n.showCloseButton&&o.a.createElement("a",{className:l()(`${R}-close`,"adm-plain-anchor"),onClick:()=>{var e;null===(e=n.onClose)||void 0===e||e.call(n)}},n.closeIcon),m)))));return o.a.createElement(A.a,{active:u,forceRender:n.forceRender,destroyOnClose:n.destroyOnClose},Object(x.a)(n.getContainer,h))};const B={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},z=e=>{const t=Object(i.b)(B,e),n=o.a.createElement(o.a.Fragment,null,!!t.image&&o.a.createElement("div",{className:F("image-container")},o.a.createElement(O,{src:t.image,alt:"dialog header image",width:"100%"})),!!t.header&&o.a.createElement("div",{className:F("header")},o.a.createElement(k.a,null,t.header)),!!t.title&&o.a.createElement("div",{className:F("title")},t.title),o.a.createElement("div",{className:l()(F("content"),!t.content&&F("content-empty"))},"string"==typeof t.content?o.a.createElement(k.a,null,t.content):t.content),o.a.createElement("div",{className:F("footer")},t.actions.map(((e,n)=>{const r=Array.isArray(e)?e:[e];return o.a.createElement("div",{className:F("action-row"),key:n},r.map(((e,n)=>o.a.createElement(d,{key:e.key,action:e,onAction:()=>Object(a.__awaiter)(void 0,void 0,void 0,(function*(){var r,o,a;yield Promise.all([null===(r=e.onClick)||void 0===r?void 0:r.call(e),null===(o=t.onAction)||void 0===o?void 0:o.call(t,e,n)]),t.closeOnAction&&(null===(a=t.onClose)||void 0===a||a.call(t))}))}))))}))));return o.a.createElement(U,{className:l()(F(),t.className),style:t.style,afterClose:t.afterClose,afterShow:t.afterShow,onMaskClick:t.closeOnMaskClick?()=>{var e;null===(e=t.onClose)||void 0===e||e.call(t)}:void 0,visible:t.visible,getContainer:t.getContainer,bodyStyle:t.bodyStyle,bodyClassName:l()(F("body"),t.image&&F("with-image"),t.bodyClassName),maskStyle:t.maskStyle,maskClassName:t.maskClassName,stopPropagation:t.stopPropagation,disableBodyScroll:t.disableBodyScroll,destroyOnClose:t.destroyOnClose,forceRender:t.forceRender,role:"dialog","aria-label":t["aria-label"]},n)};function F(e=""){return"adm-dialog"+(e&&"-")+e}var V=n(3696);const G=new Set;function Y(e){const t=Object(V.a)(o.a.createElement(z,Object.assign({},e,{afterClose:()=>{var n;G.delete(t.close),null===(n=e.afterClose)||void 0===n||n.call(e)}})));return G.add(t.close),t}const $={confirmText:"确认",cancelText:"取消"};function q(e,t){const n=e;for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}var W=q(z,{show:Y,alert:function(e){const t={confirmText:Object(T.a)().locale.Dialog.ok},n=Object(i.b)(t,e);return new Promise((e=>{Y(Object.assign(Object.assign({},n),{closeOnAction:!0,actions:[{key:"confirm",text:n.confirmText}],onAction:n.onConfirm,onClose:()=>{var t;null===(t=n.onClose)||void 0===t||t.call(n),e()}}))}))},confirm:function(e){const{locale:t}=Object(T.a)(),n=Object(i.b)($,{confirmText:t.common.confirm,cancelText:t.common.cancel},e);return new Promise((e=>{Y(Object.assign(Object.assign({},n),{closeOnAction:!0,onClose:()=>{var t;null===(t=n.onClose)||void 0===t||t.call(n),e(!1)},actions:[[{key:"cancel",text:n.cancelText,onClick:()=>Object(a.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onCancel)||void 0===t?void 0:t.call(n),e(!1)}))},{key:"confirm",text:n.confirmText,bold:!0,onClick:()=>Object(a.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onConfirm)||void 0===t?void 0:t.call(n),e(!0)}))}]]}))}))},clear:function(){G.forEach((e=>{e()}))}}),H=n(3694);const K=e=>{const{action:t}=e;return Object(s.a)(e.action,o.a.createElement(u.a,{key:t.key,onClick:e.onAction,className:l()("adm-modal-button",{"adm-modal-button-primary":e.action.primary}),fill:e.action.primary?"solid":"none",size:e.action.primary?"large":"middle",block:!0,color:t.danger?"danger":"primary",loading:"auto",disabled:t.disabled},t.text))},Z="adm-space",Q={direction:"horizontal"};var X=e=>{const t=Object(i.b)(Q,e),{direction:n,onClick:r}=t;return Object(s.a)(t,o.a.createElement("div",{className:l()(Z,{[`${Z}-wrap`]:t.wrap,[`${Z}-block`]:t.block,[`${Z}-${n}`]:!0,[`${Z}-align-${t.align}`]:!!t.align,[`${Z}-justify-${t.justify}`]:!!t.justify}),onClick:r},o.a.Children.map(t.children,(e=>null!=e&&o.a.createElement("div",{className:`${Z}-item`},e)))))};const J={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},ee=e=>{const t=Object(i.b)(J,e),n=o.a.createElement(o.a.Fragment,null,!!t.image&&o.a.createElement("div",{className:te("image-container")},o.a.createElement(O,{src:t.image,alt:"modal header image",width:"100%"})),!!t.header&&o.a.createElement("div",{className:te("header")},o.a.createElement(k.a,null,t.header)),!!t.title&&o.a.createElement("div",{className:te("title")},t.title),o.a.createElement("div",{className:te("content")},"string"==typeof t.content?o.a.createElement(k.a,null,t.content):t.content),o.a.createElement(X,{direction:"vertical",block:!0,className:l()(te("footer"),0===t.actions.length&&te("footer-empty"))},t.actions.map(((e,n)=>o.a.createElement(K,{key:e.key,action:e,onAction:()=>Object(a.__awaiter)(void 0,void 0,void 0,(function*(){var r,o,a;yield Promise.all([null===(r=e.onClick)||void 0===r?void 0:r.call(e),null===(o=t.onAction)||void 0===o?void 0:o.call(t,e,n)]),t.closeOnAction&&(null===(a=t.onClose)||void 0===a||a.call(t))}))})))));return o.a.createElement(U,{className:l()(te(),t.className),style:t.style,afterClose:t.afterClose,afterShow:t.afterShow,showCloseButton:t.showCloseButton,closeOnMaskClick:t.closeOnMaskClick,onClose:t.onClose,visible:t.visible,getContainer:t.getContainer,bodyStyle:t.bodyStyle,bodyClassName:l()(te("body"),t.image&&te("with-image"),t.bodyClassName),maskStyle:t.maskStyle,maskClassName:t.maskClassName,stopPropagation:t.stopPropagation,disableBodyScroll:t.disableBodyScroll,destroyOnClose:t.destroyOnClose,forceRender:t.forceRender},n)};function te(e=""){return"adm-modal"+(e&&"-")+e}const ne=new Set;function re(e){const t=Object(V.a)(o.a.createElement(ee,Object.assign({},e,{afterClose:()=>{var n;ne.delete(t.close),null===(n=e.afterClose)||void 0===n||n.call(e)}})));return ne.add(t.close),t}const oe={confirmText:"确认",cancelText:"取消"};var ae=q(ee,{show:re,alert:function(e){const t={confirmText:Object(T.a)().locale.Modal.ok},n=Object(i.b)(t,e);return new Promise((e=>{re(Object.assign(Object.assign({},n),{closeOnAction:!0,actions:[{key:"confirm",text:n.confirmText,primary:!0}],onAction:n.onConfirm,onClose:()=>{var t;null===(t=n.onClose)||void 0===t||t.call(n),e()}}))}))},confirm:function(e){const{locale:t}=Object(T.a)(),n=Object(i.b)(oe,{confirmText:t.common.confirm,cancelText:t.common.cancel},e);return new Promise((e=>{re(Object.assign(Object.assign({},n),{closeOnAction:!0,onClose:()=>{var t;null===(t=n.onClose)||void 0===t||t.call(n),e(!1)},actions:[{key:"confirm",text:n.confirmText,primary:!0,onClick:()=>Object(a.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onConfirm)||void 0===t?void 0:t.call(n),e(!0)}))},{key:"cancel",text:n.cancelText,onClick:()=>Object(a.__awaiter)(this,void 0,void 0,(function*(){var t;yield null===(t=n.onCancel)||void 0===t?void 0:t.call(n),e(!1)}))}]}))}))},clear:function(){ne.forEach((e=>{e()}))}}),ie=n(3876),ce=n(3671),le=function(e,t){var n=Object(ie.a)(e),o=Object(r.useRef)(null),a=Object(r.useCallback)((function(){o.current&&clearTimeout(o.current)}),[]);return Object(r.useEffect)((function(){if(Object(ce.b)(t)&&!(t<0))return o.current=setTimeout(n,t),a}),[t]),a};var ue=function(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),r.createElement("g",{id:"SoundOutline-SoundOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"SoundOutline-编组"},r.createElement("rect",{id:"SoundOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),r.createElement("path",{d:"M28.267333,7.42364522 C28.6217345,7.94869119 28.8108515,8.56559899 28.8108515,9.19662571 L28.8108515,38.803714 C28.8108515,40.568974 27.3619563,42 25.5746535,42 C24.9357472,42 24.311136,41.8132153 23.7795338,41.4631847 L13.5176584,34.7058449 L8.3149307,34.706256 C5.93186028,34.706256 4,32.7982213 4,30.4445413 L4,17.6593971 C4,15.3057171 5.93186028,13.3976824 8.3149307,13.3976824 L13.3601634,13.3972713 L23.7795338,6.53715498 C25.2666597,5.55796489 27.2759158,5.95486009 28.267333,7.42364522 Z M40.4649231,8.99868666 C40.5511218,9.17742383 40.619996,9.32223121 40.6715457,9.43310881 C42.8085201,14.0295034 44,19.1437027 44,24.532755 C44,29.7837404 42.8687892,34.7737758 40.8339269,39.2781083 C40.7469512,39.4706362 40.6237802,39.7330988 40.4644141,40.0654961 C40.3689469,40.2647533 40.1300031,40.3488277 39.9307715,40.2533072 C39.9306414,40.2532448 39.9305113,40.2531824 39.9303812,40.2531198 C39.6706542,40.1282492 39.4751102,40.0342363 39.3437492,39.9710811 C38.9410401,39.777468 38.6130663,39.619786 38.3598279,39.498035 C38.2070716,39.4245934 38.0007263,39.3253875 37.740792,39.2004172 C37.5419104,39.104853 37.4580092,38.8662856 37.5532468,38.6672473 C37.7034937,38.3532445 37.8197479,38.104744 37.9020095,37.9217457 C39.7416376,33.8293278 40.763802,29.2989389 40.763802,24.532755 C40.763802,19.6931433 39.7099001,15.0966478 37.8164042,10.9549334 C37.7526807,10.8155487 37.6652043,10.6300308 37.5539748,10.3983796 C37.4585265,10.1993116 37.5423279,9.96050973 37.7412949,9.8648511 C37.9298799,9.7741839 38.0818373,9.70112639 38.1971671,9.64567856 C38.5403397,9.48068928 39.0100918,9.2548436 39.6064234,8.9681415 C39.6867211,8.9295363 39.7949893,8.87748349 39.9312282,8.81198307 C40.1301627,8.71623553 40.3690201,8.79982709 40.4649231,8.99868666 Z M24.954689,9.60481048 L14.4401642,16.5275765 C14.3748695,16.5705665 14.2984086,16.5934809 14.2202323,16.5934873 L8.3149307,16.5939685 L8.3149307,16.5939685 C7.76171792,16.5939685 7.30576856,17.0052668 7.24345545,17.5351457 L7.23619803,17.6593971 L7.23619803,30.4445413 C7.23619803,30.9909313 7.65263219,31.4412574 8.18892037,31.502802 L8.31467178,31.50997 L14.3775506,31.5094909 C14.4557573,31.5094847 14.5322502,31.5324045 14.5975676,31.5754153 L24.9546682,38.39546 C25.139173,38.5169545 25.3872345,38.4658746 25.508729,38.2813698 C25.5517339,38.2160614 25.5746535,38.1395804 25.5746535,38.0613845 L25.5746535,9.93889975 C25.5746535,9.71798585 25.3955674,9.53889975 25.1746535,9.53889975 C25.0964661,9.53889975 25.019993,9.56181436 24.954689,9.60481048 Z M34.6436115,11.798648 C34.7547335,12.030794 34.8419854,12.2167889 34.9053671,12.3566328 C36.590502,16.0746763 37.5276039,20.1956294 37.5276039,24.532755 C37.5276039,28.7641394 36.635639,32.7897635 35.0272837,36.4362183 C34.9380427,36.6385449 34.8101552,36.9146706 34.6436211,37.2645952 C34.5486602,37.4640326 34.3100191,37.5487723 34.1105639,37.4538487 C34.1101091,37.4536323 34.1096547,37.453415 34.1092007,37.4531968 C33.9190573,37.3618222 33.7721424,37.2912213 33.6684561,37.2413942 C33.186467,37.0097713 32.80073,36.824403 32.5112451,36.6852892 C32.3647538,36.6148919 32.1675294,36.5201144 31.9195719,36.4009569 C31.7210538,36.3055358 31.6370188,36.067582 31.7316042,35.8686644 C31.8690322,35.5796464 31.9753727,35.3500122 32.0506255,35.1797617 C33.4919206,31.9190071 34.2914059,28.3180945 34.2914059,24.532755 C34.2914059,20.6930477 33.46879,17.0431031 31.9881259,13.7454591 C31.9261905,13.6075203 31.840749,13.424362 31.7318014,13.1959842 C31.636885,12.9969991 31.7208632,12.7587263 31.919573,12.6632348 C32.0929373,12.5799233 32.2332164,12.5125112 32.3404102,12.4609985 C32.6888449,12.2935556 33.1655706,12.0644616 33.7705875,11.7737163 C33.8540198,11.7336223 33.9670458,11.6793068 34.1096655,11.6107699 C34.3087736,11.5152168 34.5476881,11.5990382 34.6433466,11.7980956 C34.643435,11.7982797 34.6435233,11.7984638 34.6436115,11.798648 Z",id:"SoundOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))};function se(e,t,n){const o=Object(ie.a)(e);Object(r.useEffect)((()=>{const e=function(e,t,n){if(e&&"undefined"!=typeof MutationObserver){let r=new MutationObserver((()=>{n()}));return r.observe(e,t),()=>{r&&(r.disconnect(),r=null)}}return()=>{}}(t.current,n,o);return e}),[t])}const de="adm-notice-bar",fe={color:"default",delay:2e3,speed:50,icon:o.a.createElement(ue,null),wrap:!1,shape:"rectangular",bordered:"block"};var pe=Object(r.memo)((e=>{const{noticeBar:t={}}=Object(T.b)(),n=Object(i.b)(fe,t,e),a=Object(i.a)(o.a.createElement(M.a,{className:`${de}-close-icon`}),t.closeIcon,e.closeIcon),c=Object(r.useRef)(null),u=Object(r.useRef)(null),[d,f]=Object(r.useState)(!0),p=n.speed,m=Object(r.useRef)(!0),h=Object(r.useRef)(!1);function v(){if(m.current||n.wrap)return;const e=c.current,t=u.current;if(!e||!t)return;if(e.offsetWidth>=t.offsetWidth)return h.current=!1,t.style.removeProperty("transition-duration"),void t.style.removeProperty("transform");if(h.current)return;const r=!t.style.transform;t.style.transitionDuration="0s",t.style.transform=r?"translateX(0)":`translateX(${e.offsetWidth}px)`;const o=r?t.offsetWidth:e.offsetWidth+t.offsetWidth;h.current=!0,t.style.transitionDuration=`${Math.round(o/p)}s`,t.style.transform=`translateX(-${t.offsetWidth}px)`}return le((()=>{m.current=!1,v()}),n.delay),function(e,t){const n=Object(ie.a)(e);Object(g.a)((()=>{const e=t.current;if(e){if(window.ResizeObserver){let t;const r=new ResizeObserver((()=>{t=window.requestAnimationFrame((()=>n(e)))}));return r.observe(e),()=>{window.cancelAnimationFrame(t),r.disconnect()}}n(e)}}),[t])}((()=>{v()}),c),se((()=>{v()}),u,{subtree:!0,childList:!0,characterData:!0}),d?Object(s.a)(n,o.a.createElement("div",{className:l()(de,`${de}-${n.color}`,`${de}-${n.shape}`,{[`${de}-wrap`]:n.wrap,[`${de}-bordered`]:!0===n.bordered,[`${de}-without-border`]:!1===n.bordered}),onClick:n.onClick},n.icon&&o.a.createElement("span",{className:`${de}-left`},n.icon),o.a.createElement("span",{ref:c,className:`${de}-content`},o.a.createElement("span",{onTransitionEnd:()=>{h.current=!1,v()},ref:u,className:`${de}-content-inner`},n.content)),(n.closeable||n.extra)&&o.a.createElement("span",{className:`${de}-right`},n.extra,n.closeable&&o.a.createElement("div",{className:`${de}-close`,onClick:()=>{var e;f(!1),null===(e=n.onClose)||void 0===e||e.call(n)}},a)))):null})),me=n(3872);const he="adm-popup",ve=Object.assign(Object.assign({},L),{closeOnSwipe:!1,position:"bottom"});var ye=e=>{const{locale:t,popup:n={}}=Object(T.b)(),a=Object(i.b)(ve,n,e),c=l()(`${he}-body`,a.bodyClassName,`${he}-body-position-${a.position}`),[u,d]=Object(r.useState)(a.visible),f=Object(r.useRef)(null);Object(C.a)(f,!(!a.disableBodyScroll||!u)&&"strict"),Object(g.a)((()=>{a.visible&&d(!0)}),[a.visible]);const p=Object(N.a)(),{percent:m}=Object(S.useSpring)({percent:a.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var e,t;p.current||(d(a.visible),a.visible?null===(e=a.afterShow)||void 0===e||e.call(a):null===(t=a.afterClose)||void 0===t||t.call(a))}}),h=Object(me.useDrag)((({swipe:[,e]})=>{var t;a.closeOnSwipe&&(1===e&&"bottom"===a.position||-1===e&&"top"===a.position)&&(null===(t=a.onClose)||void 0===t||t.call(a))}),{axis:"y",enabled:["top","bottom"].includes(a.position)}),v=P(u&&a.visible),y=Object(j.a)(a.stopPropagation,Object(s.a)(a,o.a.createElement("div",Object.assign({className:he,onClick:a.onClick,style:{display:u?void 0:"none",touchAction:["top","bottom"].includes(a.position)?"none":"auto"}},h()),a.mask&&o.a.createElement(I.a,{visible:v,forceRender:a.forceRender,destroyOnClose:a.destroyOnClose,onMaskClick:e=>{var t,n;null===(t=a.onMaskClick)||void 0===t||t.call(a,e),a.closeOnMaskClick&&(null===(n=a.onClose)||void 0===n||n.call(a))},className:a.maskClassName,style:a.maskStyle,disableBodyScroll:!1,stopPropagation:a.stopPropagation}),o.a.createElement(S.animated.div,{className:c,style:Object.assign(Object.assign({},a.bodyStyle),{pointerEvents:m.to((e=>0===e?"unset":"none")),transform:m.to((e=>"bottom"===a.position?`translate(0, ${e}%)`:"top"===a.position?`translate(0, -${e}%)`:"left"===a.position?`translate(-${e}%, 0)`:"right"===a.position?`translate(${e}%, 0)`:"none"))}),ref:f},a.showCloseButton&&o.a.createElement("a",{className:l()(`${he}-close-icon`,"adm-plain-anchor"),onClick:()=>{var e;null===(e=a.onClose)||void 0===e||e.call(a)},role:"button","aria-label":t.common.close},a.closeIcon),a.children))));return o.a.createElement(A.a,{active:u,forceRender:a.forceRender,destroyOnClose:a.destroyOnClose},Object(x.a)(a.getContainer,y))},be=n(3736)},3756:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(324),u=n.n(l),s=n(5),d=n.n(s),f=n(3668),p=n(74),m=n(63),h=n(242),v=n(1645),y=n(34),b={memberBadgeContainer:"badge-module_memberBadgeContainer_truSH",memberBadgeName:"badge-module_memberBadgeName_Rb9bH",safeIcon:"badge-module_safeIcon_LvS1y",unsafeIcon:"badge-module_unsafeIcon_fj7tW",memberBadgeNameCon:"badge-module_memberBadgeNameCon_UOZEP",memberBadgeIcon:"badge-module_memberBadgeIcon_cNWkO",memberBadgeDesc:"badge-module_memberBadgeDesc_nc5JL",memberBadgeEnDesc:"badge-module_memberBadgeEnDesc_xoJbF",memberBadgeUpgradeDisabled:"badge-module_memberBadgeUpgradeDisabled_YFT6S",memberBadgeUpgradeAction:"badge-module_memberBadgeUpgradeAction_Rs3Pr",memberDesc:"badge-module_memberDesc_iad4N",memberBadgeTooltip:"badge-module_memberBadgeTooltip_JvMu7"};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(){_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=y.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==g(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:b,configurable:!0}),b.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function E(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,c,"next",e)}function c(e){E(a,r,o,i,c,"throw",e)}i(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function S(e,t,n){return t=x(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var P=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=S(this,t,[e])).payFlowRef=a.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,o=[{key:"jumpToSetting",value:function(e){y.c?Object(v.a)("/settings/account"):window.open("/settings/account")}},{key:"showMemberRenewIntro",value:(l=w(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=this.props.hideMenuPopover)||n(),r={isRenew:!0,code:this.props.code},y.c&&(r.pay_referer="desktop_app"),this.payFlowRef.current.showMemberIntro(r),null===(t=this.props)||void 0===t||t.onChangeStatus(!1);case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"showMemberIntro",value:(c=w(_().mark((function e(){var t,n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=this.props.hideMenuPopover)||n(),r={code:this.props.code},y.c&&(r.pay_referer="desktop_app"),this.payFlowRef.current.showMemberIntro(r),null===(t=this.props)||void 0===t||t.onChangeStatus(!1);case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,n=t.user,o=t.organization,i=t.forceBadge,c=t.showSafe,l=n.name,s=n.origin_name,v=n.member_level,y=n.isPaid,g=n.email,_=n.hasPassword,E=window.appData.groupMemberInfo,w=this.props.userMemberInfo||window.appData.userMemberInfo,O=Object(h.f)(n),k=O?E:w,S="en-us"===window.appData.locale,N=!(!o||!o.id),x=""!==g&&!0===_,A=c&&x,P=c&&!x,C=function(){return N?a.a.createElement("div",null,o.name):v?y?a.a.createElement("div",{className:b.memberBadgeTip},a.a.createElement("p",null,a.a.createElement("span",{className:b.memberDesc},n.memberLevelName,__("，"),__("{time}到期",{time:u()(null==k?void 0:k.expired_at).format("YYYY-MM-DD")})),a.a.createElement("a",{className:d()(b.memberBadgeUpgradeAction,"member-badge-upgrade-action"),onClick:function(){return e.showMemberRenewIntro()}},__("购买")))):a.a.createElement("div",null,a.a.createElement("span",{className:b.memberDesc},n.memberLevelName,__("，"),__("已于{time}过期",{time:u()(k.expired_at).format("YYYY-MM-DD")})),a.a.createElement("a",{className:d()(b.memberBadgeUpgradeAction,"member-badge-upgrade-action"),onClick:function(){return e.showMemberRenewIntro()}},__("购买"))):a.a.createElement("div",{className:b.memberBadgeTip},a.a.createElement("p",null,a.a.createElement("span",{className:b.memberDesc},__("普通用户，购买可享更多权益")),a.a.createElement("a",{"data-aspm-click":"click-pay","data-aspm-param":"scene=show-upgrade-introduction",className:d()(b.memberBadgeUpgradeAction,"member-badge-upgrade-action"),onClick:function(){return e.showMemberIntro()}},__("购买"))))};return a.a.createElement("div",{className:d()(b.memberBadgeContainer,"member-badge-container"),"data-testid":"badge"},a.a.createElement("div",{className:d()(b.memberBadgeName,"member-badge-name")},a.a.createElement("span",{className:b.memberBadgeNameCon},s||l),a.a.createElement(r.a,{overlayClassName:b.memberBadgeTooltip,title:C()},function(){if(!N&&(i||v)){var e=y?"icon-member-level-".concat(v):"icon-member-level-expired";return a.a.createElement("span",{className:d()(b.memberBadgeIcon,"member-badge-icon")},a.a.createElement("a",{href:O?p.LINKS.EXTERNAL_GROUP_INTRO_LINK:"/settings/member",target:"_blank"},a.a.createElement(m.b,{name:e,size:16})))}}()),a.a.createElement(r.a,{overlayClassName:d()(b.memberBadgeTooltip,"member-badge-tooltip"),title:a.a.createElement("div",null,a.a.createElement("span",{className:b.memberDesc},x?__("账户安全系数高"):__("账户安全系数低，建议绑定邮箱")),a.a.createElement("a",{className:d()(b.memberBadgeUpgradeAction,"member-badge-sec"),href:"/settings/account",target:"_blank"},x?__("点击查看"):__("升级保障")))},a.a.createElement("div",null,A&&a.a.createElement(m.b,{onClick:e.jumpToSetting,className:d()(b.safeIcon,"safe-icon"),name:"safe",height:24,width:24}),P&&a.a.createElement(m.b,{onClick:e.jumpToSetting,className:d()(b.unsafeIcon,"un-safe-icon"),name:"unsafe",height:24,width:24})))),a.a.createElement("div",{className:d()(S?b.memberBadgeEnDesc:b.memberBadgeDesc,"member-badge-desc")},C()),!N&&a.a.createElement(f.a,{user:n,ref:this.payFlowRef}))}}],o&&O(n.prototype,o),i&&O(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i,c,l}(o.PureComponent);P.defaultProps={showSafe:!1,showMember:!1},P.propTypes={user:c.a.object,organization:c.a.object,forceBadge:c.a.bool,showSafe:c.a.bool,showMember:c.a.bool,hideMenuPopover:c.a.func,onChangeStatus:c.a.bool,code:c.a.string,userMemberInfo:c.a.object};t.a=P},3759:function(e,t,n){"use strict";t.a={modal:"DocNoteLimitModal-module_modal_xdBMN",content:"DocNoteLimitModal-module_content_qoTbx",limitFigure:"DocNoteLimitModal-module_limitFigure_+Vg0M",leftTopPos:"DocNoteLimitModal-module_leftTopPos_G-UCA",midTopPos:"DocNoteLimitModal-module_midTopPos_puaum",rightTopPos:"DocNoteLimitModal-module_rightTopPos_-olEi",midBottomPos:"DocNoteLimitModal-module_midBottomPos_C1MRC",footer:"DocNoteLimitModal-module_footer_2tELh",footerAction:"DocNoteLimitModal-module_footerAction_384SJ",actionBtn:"DocNoteLimitModal-module_actionBtn_CUQkm",footerOrgOwnerAction:"DocNoteLimitModal-module_footerOrgOwnerAction_H0Qas",footerOrgMemberAction:"DocNoteLimitModal-module_footerOrgMemberAction_mnoFp",mobile:"DocNoteLimitModal-module_mobile_Kb9cX",desc:"DocNoteLimitModal-module_desc_YO-N4"}},3760:function(e,t,n){"use strict";t.a={memberMessageContainer:"message-module_memberMessageContainer_7bp54",memberMessageAction:"message-module_memberMessageAction_9Iy5y",memberMessageClose:"message-module_memberMessageClose_QyNkz",showMemberIntro:"message-module_showMemberIntro_spXu1",orgPayBtn:"message-module_orgPayBtn_DLLTR"}},3761:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(5),u=n.n(l),s=n(74),d=n(63),f="badgeIcon-module_container_xawzG",p="badgeIcon-module_icon_qa6QH",m=function(e){var t=e.isYuque,n=e.organization,o=e.user,i=e.className,c=e.size;if(t&&!o.isPaid||n)return null;var l=o.memberLevelName,m=o.member_level,h="icon-member-level-".concat(m);return a.a.createElement("div",{className:u()(f,i),"data-testid":"badge-lite"},a.a.createElement(r.a,{title:l},a.a.createElement("a",{className:p,href:t?s.LINKS.EXTERNAL_MEMBER_INTRO_LINK:s.LINKS.INTERNAL_MEMBER_INTRO_LINK,target:"_blank"},!window.h5&&a.a.createElement(d.b,{name:h,width:c,height:c}))))};m.defaultProps={isYuque:window.appData.isYuque,organization:window.appData.organization,size:32},m.propTypes={isYuque:c.a.bool,organization:c.a.object,user:c.a.object.isRequired,className:c.a.string,size:c.a.number};t.a=m},3785:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return v}));var r=n(14),o=n.n(r),a=n(54),i=n(1249),c=n.n(i),l=n(149),u=n(803);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={daily:"daily",weekly:"weekly",vote:"vote",default:"default",punchIn:"punchIn"},h=p(p(p(p({},m.default,{typeName:__("基础模板"),description:__("适用于自定义内容的话题"),title:"",content:"<!doctype lake><p></p>",type:m.default}),m.daily,{typeName:__("日报模板"),description:__("适用于团队日报的收集"),title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>',type:m.daily}),m.weekly,{typeName:__("周报模板"),description:__("适用于团队周报的收集"),title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>',type:m.weekly}),m.vote,{typeName:__("投票模板"),description:__("适用于需要投票的内容"),title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>',type:m.vote}),v=20,y={},b={archive:{startday:[{value:"0",title:__("当天")},{value:"1",title:__("一天后")},{value:"2",title:__("两天后")},{value:"7",title:__("一周后")},{value:"14",title:__("两周后")},{value:"31",title:__("一个月后")}]},create:{cycle:[{value:"daily",title:__("每天")},{value:"weekly",title:__("每周")},{value:"fortnightly",title:__("每双周")},{value:"monthly",title:__("每月")}],day:["",__("星期一"),__("星期二"),__("星期三"),__("星期四"),__("星期五"),__("星期六"),__("星期日")]}};y.archiveScheduleToText=function(e){if(!e)return"";var t=b.archive.startday.find((function(t){return t.value==="".concat(e.startday)}));return e.next_task_execute_time?__("{next_time} 自动归档",{next_time:c.a.format(e.next_task_execute_time)}):__("{day} {time} 自动归档",{day:t.title,time:e.time})},y.createScheduleToText=function(e){if(!e)return"";var t=b.create.cycle.find((function(t){return t.value==="".concat(e.cycle)})).title,n=null;if("daily"===e.cycle)5===e.weekdays.length?(t=__("每周一到周五"),n=""):(t=__("每天"),n="");else if("monthly"===e.cycle)n=e.monthdays.map((function(e){return 32===e?__("最后一天"):"".concat(e,"号")})).join(", ");else{n=e.weekdays.map((function(e){return b.create.day[e]})).join(", ")}return e.next_task_execute_time?__("{cycle} {day} {time} 自动发起，下一次执行时间：{next_time}",{cycle:t,day:n,time:e.time,next_time:c.a.format(e.next_task_execute_time)}):__("{cycle} {day} {time} 自动发起",{cycle:t,day:n,time:e.time})},y.isScheduleOrigin=function(e,t){return 0!==t.length&&t[0].object_id===e.id},y.adaptScheduleConfigs=function(e){var t={};return e&&e.forEach((function(e){t[e.type]=e.config})),t},y.normalizeSelectedUsers=function(e,t){var n={};(t=t||[]).forEach((function(e){n[e.id]=e}));var r=[],o=e;return Array.isArray(e)||(o=[e]),o.forEach((function(e){e.user&&(e.id=e.user.id),n[e.id]||r.push(e)})),r},y.mergeUsersToCollaborators=function(e,t){var n=d(e);return t.forEach((function(t){t.user&&(t.id=t.user.id),e.find((function(e){return e.user&&(e.id=e.user.id),t.id?t.id===e.id:t.user_id?t.user_id===e.user_id:t.provider_userid?t.provider_userid===e.provider_userid:!!t.workid&&t.workid===e.workid}))||n.push(t)})),n},y.isDepartment=function(e){return e.department||"Department"===e.type},y.adaptDepartment=function(e){return(Array.isArray(e)?e:[e]).forEach((function(e){y.isDepartment(e)&&(e.department=e.department||e)})),e},y.mergeDeptToCollaborators=function(e,t){if(u.a.isYuqueAddressBook())return e.push(t),e;var n=e.filter((function(e){return!y.isDepartment(e)}));return n.push(t),n},y.mergeDepartmentUsersToParticipants=function(e,t){var n=e.filter((function(e){return!e.department}));return y.mergeUsersToCollaborators(n,t)},y.adaptCollaboratorsToCreateRequest=function(e){var t=[],n=[],r=null,o=u.a.isYuqueAddressBook();e.forEach((function(e){y.isDepartment(e)?o?t.push(e.department.id):r=e.department:(e.user&&(e.user_id=e.user.id),n.push(e))}));var a={};return r&&(a.department_id=r.id),n.length>0&&(a.users=n),t.length&&(a.department_ids=t),a},y.adaptRequestForQueryUserPosts=function(e){var t=e.participants,n=e.period,r=[],o=null;t.forEach((function(e){y.isDepartment(e)?o=e.department:e.user_id?r.push(e.user_id):e.user?r.push(e.user.id):e.id&&r.push(e.id)}));var a=y.adaptPeriod(n,"YYYY-MM-DD");return{department_id:o?o.id:null,user_ids:r.length>0?r:null,start_time:a.start_time,end_time:a.end_time}},y.getParticipants=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||0===e.length)return[t];var r=d(e);return n&&(r=r.reverse()),window.appData.isYuque&&(r=r&&r.filter((function(e){return e.status!==a.STATUS.terminated}))),e.find((function(e){return e.id===t.id}))||r.push(t),r},y.getAbsentUsers=function(e,t){var n=[];return e.forEach((function(e){t.find((function(t){return e.id===t.id||e.name===t.name}))||n.push(e)})),n},y.adaptPeriod=function(e,t){var n={day:o()().startOf("day"),yesterday:o()().startOf("day").subtract(1,"day"),week:o()().startOf("isoWeek"),last_week:o()().startOf("isoWeek").subtract(7,"day"),month:o()().startOf("month")},r=null,a=null;switch(e){case"today":r=n.day,a=null;break;case"yesterday":r=n.yesterday,a=n.day;break;case"week":r=n.week,a=null;break;case"last_week":r=n.last_week,a=n.week;break;case"month":r=n.month,a=null}return t&&(r=r?r.format(t):null,a=a?a.format(t):null),{start_time:r,end_time:a}},y.isThreadRepo=function(e){return"Thread"===(null==e?void 0:e.type)},y.isCycleThreadRepo=function(e){return(null==e?void 0:e.scene)===l.ThreadScene.cycle||(null==e?void 0:e.scene)===l.ThreadScene.punchIn},y.isPunchInThreadRepo=function(e){return(null==e?void 0:e.scene)===l.ThreadScene.punchIn},y.generatePunchInDataTemplate=function(e,t){var n=o()(e),r=o()(t),a=r.diff(n,"day"),i=Array.from({length:a},(function(e,t){return{date:n.add(t,"day").startOf("D").toDate()}}));return i.push({date:r.startOf("D").toDate()}),i},y.fillPunchInDataToTemplate=function(e,t){return t?e?(t.forEach((function(t){var n=e.find((function(e){return o()(e.date).isSame(o()(t.created_at),"day")}));n&&(n.mood=t.mood,n.checked=!0,n.slug=t.slug)})),e):[]:e},t.d=y},3786:function(e,t,n){"use strict";var r=String.prototype.replace,o=/%20/g,a="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return String(e)}},RFC1738:a,RFC3986:i}},3789:function(e,t,n){"use strict";n.d(t,"c",(function(){return ue})),n.d(t,"e",(function(){return Ae})),n.d(t,"h",(function(){return Ke})),n.d(t,"b",(function(){return lt.a})),n.d(t,"a",(function(){return ut.a})),n.d(t,"j",(function(){return xt})),n.d(t,"g",(function(){return Yt})),n.d(t,"l",(function(){return On})),n.d(t,"i",(function(){return yr})),n.d(t,"k",(function(){return Or})),n.d(t,"f",(function(){return Yr})),n.d(t,"d",(function(){return qr}));n(3756),n(40);var r=n(9),o=(n(130),n(41)),a=(n(138),n(30)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(14),d=n.n(s),f=n(74),p=n(54),m=n(84),h=n(20),v=n(63),y=n(87),b=n(958),g=n(3995),_=n(1337),E=n(3668),w=(n(67),n(31)),O=(n(134),n(21)),k=(n(53),n(12)),S=(n(48),n(11)),N=n(47),x=n(3978),A=n.n(x),P={title:"index-module_title_INHx3",help:"index-module_help_AVFYJ",tip:"index-module_tip_T1jyO",errMessage:"index-module_errMessage_nSIYH",form:"index-module_form_W9V8N",footer:"index-module_footer_G0PQG",submitBtn:"index-module_submitBtn_+TZ+Q"};function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(){j=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==C(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(C(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function T(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){var t=e.usage,n=e.appData,r=I(Object(i.useState)(!1),2),o=r[0],a=r[1],c=I(Object(i.useState)(""),2),l=c[0],u=c[1],s=I(Object(i.useState)(""),2),d=s[0],f=s[1],p="",m=function(){var e,r=(e=j().mark((function e(){var r,o,i,c;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={code:A()(d)},e.t0=t,e.next="member"===e.t0?4:"group"===e.t0?7:"organization"===e.t0?10:13;break;case 4:return r.user_id=n.me.id,p=__("语雀会员"),e.abrupt("break",14);case 7:return r.user_id=n.group.id,p=__("高级版"),e.abrupt("break",14);case 10:return r.organization_id=n.organization.id,p=__("语雀空间"),e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:return e.prev=14,e.next=17,N.a.promo.consume(r,{ignoreGlobalMessage:!0});case 17:if((o=e.sent).success){e.next=20;break}return e.abrupt("return",u(o.message));case 20:i=o.promo.amount,c=i,o.success&&(a(!1),S.a.success(__("兑换成功，您已获得{messageText}{duration}天",{messageText:p,duration:c}),1500),setTimeout((function(){window.location.reload()}),1500)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(14),u(__("优惠码无效"));case 28:case"end":return e.stop()}}),e,null,[[14,25]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){T(a,r,o,i,c,"next",e)}function c(e){T(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{visible:o,errMessage:l,value:d},handleVerify:m,setVisible:a,onChange:function(e){f(e),u("")}}},R=function(e){var t=e.usage,n=window.appData,o=L({usage:t,appData:n}),a=o.state,i=a.visible,l=a.errMessage,u=a.value,s=o.handleVerify,d=o.setVisible,f=o.onChange,p=c.a.createElement("div",null,c.a.createElement("span",{className:P.title},__("兑换码")),c.a.createElement("a",{className:P.help,href:"https://www.yuque.com/yuque/cdgcvd/kpdrnf",target:"_blank"},__("关于兑换码"))),m=function(){d(!1),f("")};return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.a,{"data-aspm-click":"click-promo","data-aspm-param":"scene=show-promo-modal",onClick:function(){return d(!0)},className:P.memberPromoButton,"data-testid":"promo-verify-btn"},__("使用兑换码")),c.a.createElement(w.a,{title:p,visible:i,onCancel:function(){d(!1),f("")},footer:null,onClose:m},c.a.createElement(O.a,{layout:"vertical",className:P.form,"data-testid":"promo-verify-form"},c.a.createElement(O.a.Item,{label:__("输入兑换码"),validateStatus:l?"error":"",help:l},c.a.createElement(k.a,{placeholder:__("输入兑换码"),onChange:function(e){return f(e.target.value)},value:u}))),c.a.createElement("div",{className:P.footer},c.a.createElement(r.a,{type:"primary","data-testid":"submit-btn",onClick:s,className:P.submitBtn},__("确定")),c.a.createElement(r.a,{onClick:m},__("取消")))))};R.propTypes={usage:u.a.string};var D=R,U=n(5),B=n.n(U),z="MemberLevelIcon-module_memberLevelIcon_5CHat",F="MemberLevelIcon-module_icon_ivQ-f",V="MemberLevelIcon-module_levelName_yHocY",G="MemberLevelIcon-module_memberLevelIcon1_HGaOq",Y="MemberLevelIcon-module_memberLevelIcon2_STP5o",$="MemberLevelIcon-module_memberLevelIconExpired_5bwcs";function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=window.appData.isDesktopApp,K=function(e){var t=e.user,n=t.member_level,r=t.memberLevelName,o=t.isPaid;if(!n)return null;var a=o?"icon-member-level-".concat(n):"icon-member-level-expired";return c.a.createElement("span",{className:B()(z,W(W(W({},G,o&&n===p.MEMBER_LEVEL.member_level_1),Y,o&&n===p.MEMBER_LEVEL.member_level_2),$,!o))},c.a.createElement("a",{href:f.LINKS.EXTERNAL_MEMBER_INTRO_LINK,target:H?"_self":"_blank","data-openexternal":!0},c.a.createElement(v.b,{name:a,height:22,width:23,className:F}),c.a.createElement("span",{className:V},r)))};K.propTypes={user:u.a.object};var Z=K,Q={memberBoardContainer:"board-module_memberBoardContainer_gN7pi",memberBoardRight:"board-module_memberBoardRight_6DlQt",memberBoardName:"board-module_memberBoardName_YNQRQ",orgIcon:"board-module_orgIcon_r70ZR",orgNameWrapper:"board-module_orgNameWrapper_OCGfs",orgName:"board-module_orgName_BE6gK",expiredDesc:"board-module_expiredDesc_AbfLB",certification:"board-module_certification_b5+ky",memberBoardNameCon:"board-module_memberBoardNameCon_i3Jda",memberBoardMainName:"board-module_memberBoardMainName_UiUuz",memberBoardGroupIcon:"board-module_memberBoardGroupIcon_rIq+p",memberBoardRenewButton:"board-module_memberBoardRenewButton_Gg-zI",memberBoardCountdown:"board-module_memberBoardCountdown_RqOSU",memberBoardDesc:"board-module_memberBoardDesc_AnX25",memberBoardLink:"board-module_memberBoardLink_uaK6n",memberBoardOrgDesc:"board-module_memberBoardOrgDesc_yTvNM"};function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(){J=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==X(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(X(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ee(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ee(a,r,o,i,c,"next",e)}function c(e){ee(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function re(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}function oe(e,t,n){return t=ie(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,n||[],ie(e).constructor):t.apply(e,n))}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}var le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oe(this,t,[e])).payFlowRef=c.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e),n=t,i=[{key:"showMemberIntro",value:(s=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.LIMIT_SCENE.member_setting_renew,this.payFlowRef.current.showMemberIntro({code:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"showMemberRenewIntro",value:function(){var e=f.LIMIT_SCENE.member_setting_renew;this.payFlowRef.current.showMemberIntro({code:e,isRenew:!0})}},{key:"showMemberUpgrade",value:function(){this.payFlowRef.current.showMemberIntro({code:f.LIMIT_SCENE.member_setting_renew,isUpgrade:!0,upgradePackageType:p.MEMBER_LEVEL.member_level_2})}},{key:"startToPay",value:(u=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.payFlowRef.current.startToPay();case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=this.props.user;"#renew"===window.location.hash&&(this.payFlowRef.current.showMemberIntro({isRenew:!0}),window.location.hash=""),window.location.hash.startsWith("#upgrade")&&(this.payFlowRef.current.showMemberIntro({isUpgrade:e.isPaid,upgradePackageType:p.MEMBER_LEVEL.member_level_2}),window.location.hash="")}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,i=t.dispatch,l=t.organization,u=t.canUpgrade;if(null!=l&&l.id){var s,w=l.expired_at,O=d()().isAfter(w),k=y.a.isFree(l),S=y.a.isTrial(l),N=(null===(s=m.ORG_AMOUNT_MAP[l.payment_type])||void 0===s?void 0:s.name)||m.ORG_AMOUNT_MAP[h.PAYMENT_TYPE.free].name;return c.a.createElement("div",{className:Q.memberBoardContainer,"data-testid":"board"},c.a.createElement(o.a,{className:Q.memberBoardNameCon,align:"center"},c.a.createElement(a.a,{span:12},c.a.createElement("div",{className:Q.memberBoardName},!k&&c.a.createElement(_.j,{className:Q.orgIcon,size:48,organization:l}),c.a.createElement("div",{className:Q.orgNameWrapper},c.a.createElement("div",{className:Q.orgName},c.a.createElement("span",{style:{marginRight:"6px"}},S?__("{paymentTypeName}试用中",{paymentTypeName:N}):N),c.a.createElement(g.a,{className:Q.certification})),!k&&c.a.createElement("div",{className:Q.expiredDesc,style:{marginRight:"12px"}},O?__("{paymentTypeName}已于 {date} 过期",{paymentTypeName:N,date:d()(w).format("YYYY-MM-DD")}):__("有效期至 {date}",{date:d()(w).format("YYYY-MM-DD")}))))),c.a.createElement(a.a,{span:12,className:Q.memberBoardRight},!k&&c.a.createElement(D,{usage:"organization"}),y.a.isPro(l)&&!y.a.isTrial(l)&&c.a.createElement("span",{className:Q.memberBoardRenewButton},c.a.createElement(_.n,{type:"",organization:l,paySource:f.LIMIT_SCENE.org_dashboard_cashier_buy})),c.a.createElement("span",{className:Q.memberBoardRenewButton},c.a.createElement(_.a,{type:"primary",organization:l,paySource:f.LIMIT_SCENE.org_dashboard_cashier_buy})))),c.a.createElement(o.a,{className:Q.memberBoardDesc}))}var x=n.name,A=n.member_level,P=n.isPaid,C=window.appData,j=C.userMemberInfo,T=C.groupMemberInfo,I=C.organization,M=b.a.isGroupOrPublication(n),L=M?T:j,R=(L||{}).countDownDays,U=b.a.isPublication(n),B=!(!I||!I.id);return c.a.createElement("div",{className:Q.memberBoardContainer,"data-testid":"board"},c.a.createElement(o.a,null,c.a.createElement(a.a,{span:12},c.a.createElement("div",{className:Q.memberBoardName},x,function(){if(!(!A||U||B&&M)){if(M){var e="member".concat(P?"":"-expired","-level").concat(A);return c.a.createElement("span",{className:Q.memberBoardGroupIcon},c.a.createElement("a",{href:f.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},c.a.createElement(v.b,{name:e,height:22,width:23})))}return c.a.createElement(Z,{user:n})}}()),c.a.createElement("div",{className:Q.memberBoardDesc},U||B&&M?null:A?P?c.a.createElement("div",null,M&&c.a.createElement("span",{className:Q.memberBoardMainName},__("高级版团队")),c.a.createElement("span",null,0===R?c.a.createElement(c.a.Fragment,null,__("有效期至")," ",d()(L.expired_at).format("YYYY-MM-DD HH:mm:ss")):c.a.createElement(c.a.Fragment,null,__("有效期至")," ",d()(L.expired_at).format("YYYY-MM-DD")))):M?c.a.createElement("div",null,__("高级版团队已到期")):c.a.createElement("div",null,__("会员已于 {expiredAt} 过期，当前只能享受普通用户权益",{expiredAt:d()(n.expired_at).format("YYYY-MM-DD")})):M?null:c.a.createElement("div",null,c.a.createElement("span",{className:Q.memberBoardSubDesc},__("普通用户，购买可享更多权益"))))),!M&&c.a.createElement(a.a,{span:12,className:Q.memberBoardRight},c.a.createElement(D,{usage:M?"group":"member"}),A>0?c.a.createElement(c.a.Fragment,null,u&&A===p.MEMBER_LEVEL.member_level_1&&P&&c.a.createElement("span",{className:Q.memberBoardRenewButton},c.a.createElement(r.a,{onClick:function(){return e.showMemberUpgrade()}},__("升级"))),c.a.createElement("span",{className:Q.memberBoardRenewButton},c.a.createElement(r.a,{type:"primary",onClick:function(){return e.showMemberRenewIntro()}},__("购买")))):c.a.createElement("span",{className:Q.memberBoardRenewButton},c.a.createElement(r.a,{"data-aspm-click":"click-pay","data-aspm-param":"scene=show-upgrade-introduction",type:"primary",onClick:function(){return e.showMemberIntro()}},__("购买会员"))))),c.a.createElement(E.a,{dispatch:i,user:n,ref:this.payFlowRef,onReceiptSuccess:function(){return e.onReceiptSuccess()}}))}}],i&&ne(n.prototype,i),l&&ne(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,l,u,s}(i.PureComponent);le.propTypes={user:u.a.object,organization:u.a.object,dispatch:u.a.func};var ue=le,se=(n(175),n(44)),de=n(369),fe=n.n(de),pe="selector-module_memberSelectorContainer_SzVML",me="selector-module_memberSelectorTips_vqgUs";function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function ye(e,t,n){return t=ge(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,be()?Reflect.construct(t,n||[],ge(e).constructor):t.apply(e,n))}function be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(be=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Ee(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==he(t)?t:t+""}var we=function(e){function t(e){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ye(this,t,[e]),r=n,a=function(e){var t=e.target.value;n.setState({value:t}),n.props.onChange(t)},(o=Ee(o="onChangeLevel"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={value:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return c.a.createElement("div",{className:pe,"data-testid":"selector"},c.a.createElement(se.a.Group,{onChange:this.onChangeLevel,defaultValue:0},c.a.createElement(se.a.Button,{value:0},__("基础版"),c.a.createElement("br",null),__("免费")),c.a.createElement(se.a.Button,{value:1,"data-testid":"premium"},__("高级版"),c.a.createElement("br",null),m.MEMBER_GROUP_FULL_AMOUNT," ",__("元"),"/",fe()(__("年")),"/",fe()(__("团队")))),1===this.state.value&&c.a.createElement("div",{className:me},__("立即升级，可享受首年 {value} 元优惠价",{value:m.MEMBER_GROUP_BASE_AMOUNT})))}}])&&ve(n.prototype,r),o&&ve(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.PureComponent);we.propTypes={onChange:u.a.func};var Oe=n(1226),ke="DocCollaboratorTip-module_contentText_3pLj-";function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){var t=e.collaboratorCount,n=e.user,r=window.appData,o=r.organization,a=r.me,l=!(null==o||!o.id),u=Se(Object(i.useState)(t),2),s=u[0],d=u[1];Object(i.useEffect)((function(){d(t)}),[t]);var m=Oe.a.getDocCollaboratorLimit(n),h=function(e){var t;if(!l)return null===(t=window.__member_message_ref)||void 0===t||null===(t=t.current)||void 0===t||t.showMemberIntro(f.LIMIT_RULE_CODE.max_doc_collaborator_number),e.preventDefault(),!1},v=function(e){var t;if(!l)return null===(t=window.__member_message_ref)||void 0===t||null===(t=t.current)||void 0===t||t.showMemberIntro(f.LIMIT_RULE_CODE.max_doc_collaborator_number,{isUpgrade:!0,upgradePackageType:p.MEMBER_LEVEL.member_level_2}),e.preventDefault(),!1};return c.a.createElement(c.a.Fragment,null,function(){var e=null;if(s<m)return e;if(l?o.isPremium:n.isPaid){if(e=__("协作者人数已达最大上限"),!b.a.isGroupOrPublication(n)&&!l&&!n.isTopLevel){var t,r=null===(t=f.MEMBER_RULE.User[p.MEMBER_LEVEL.member_level_2])||void 0===t?void 0:t[f.LIMIT_RULE_CODE.max_doc_collaborator_number];e=a.id!==n.id?__("协作者人数已达上限，联系知识库所有者升级超级会员可提升至{count}人",{count:r}):__("协作者人数已达上限，{upgrade} 可邀请{count}人协作",{upgrade:c.a.createElement("a",{onClick:v},__("升级超级会员")),count:r})}}else{var i,u="https://www.yuque.com/about/price#".concat(l?"organization":"personal"),d=l?__("升级空间"):__("购买会员");e=__("协作人数已达上限，{upgrade} 邀请更多人加入协作",{upgrade:c.a.createElement("a",{href:u,target:"_blank",onClick:h},d)}),b.a.isGroupOrPublication(n)?e=__("协作者人数已达上限"):a.id!==n.id&&(e=__("协作者人数已达上限，请联系知识库所有者升级会员提升上限")),!l||null!==(i=o.abilities)&&void 0!==i&&i.destroy||(e=__("协作者人数已达上限，请联系管理员升级空间"))}return c.a.createElement("div",{className:ke},e)}())};xe.propTypes={collaboratorCount:u.a.number,user:u.a.object};var Ae=xe,Pe=n(1438),Ce=n(157),je=n(347),Te=n.n(je),Ie=n(259),Me=n(963),Le=n(34),Re=n(3816),De=n(3760);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function Ve(e,t,n){return t=Ye(t),function(e,t){if(t&&("object"==Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ge()?Reflect.construct(t,n||[],Ye(e).constructor):t.apply(e,n))}function Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ge=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}function qe(e,t,n){return(t=We(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}var He=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(n=Ve(this,t,[e]),"showMemberIntro",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.a.destroy();var r=t.user||n.user,o=!1,a="";if(r.hasMemberLevel&&(o=!0),t.pay_referer&&(a=t.pay_referer),!t.pay_referer&&Le.c&&(a="desktop_app"),window.h5){var i="".concat(window.location.origin,"/r/mobile_app/package");return t.isUpgrade&&(i+="?upgradePackageType=".concat(p.MEMBER_LEVEL.member_level_2)),window.appData.isYuqueMobileApp?void Ie.a.pushWebWindow({url:i}):void(window.location.href=i)}n.payFlowRef.current.showMemberIntro({title:t.title,desc:t.desc,referer:t.referer,pay_referer:a,code:e,currentUser:r,isRenew:o,isBuyUpload:t.isBuyUpload,isUpgrade:t.isUpgrade,packageType:t.packageType,upgradePackageType:t.upgradePackageType})})),qe(n,"handleOrgMaxMemberLimit",(function(){S.a.destroy(),window.location.href="/r/organizations/dashboard/cashier?action=renew"})),qe(n,"handleCloseOrgPayFlow",(function(){n.setState({orgPayflowVisible:!1})})),n.state={orgPayflowVisible:!1,orderType:h.ORDER_TYPE.buy},n.payFlowRef=c.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(t,e),n=t,r=[{key:"showBookLimitModal",value:function(){this.payFlowRef.current.showBookLimitModal()}},{key:"startToPay",value:function(){this.payFlowRef.current.startToPay()}},{key:"spmPayLimitLog",value:function(e){var t=e.code,n=e.owner,r=window.appData,o=r.me,a=r.organization;if(r.isYuque){var i={pay_source:t,organization_id:(null==a?void 0:a.id)||0,member_level:o.member_level};n&&(i.owner_id=n.id,i.member_level=n.member_level,i.pay_scene="collab"),Object(Ce.spmClick)("c126274.d262021",i)}}},{key:"spmOrgPayLimitLog",value:function(e){var t=e.code,n=window.appData,r=n.organization;if(n.isYuque){var o={pay_source:t,organization_id:(null==r?void 0:r.id)||0};Object(Ce.spmClick)(f.ORG_LIMIT_SPM.pay_limit,o)}}},{key:"getMaxResourceMsg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.user||this.user,r=(t||{}).limit,o=window.appData,a=(void 0===o?{}:o).isPublicCloud,i=this._hasOwnerAbility(e),l=this._hasGroupMemberAbility(e),u=(n.owners||[]).slice(0,3);return c.a.createElement("span",{"data-testid":"group-max_resource_total_size"},__("上传流量超过 {value}{unit} 限制",{value:Te.a.getSizeValue(r).value,unit:Te.a.getSizeValue(r).unit}),e.isImport&&__("，部分文件导入成功"),!window.h5&&a&&(i||l)&&c.a.createElement(c.a.Fragment,null,i?c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{href:"/".concat(n.login,"/settings/member"),target:"_blank"},__("获取更多流量"))):c.a.createElement(c.a.Fragment,null,__("，请联系管理员 {admins}",{admins:c.a.createElement(c.a.Fragment,null,u.map((function(e,t){return c.a.createElement("span",null,e.name,t<u.length-1&&", ")})))}))))}},{key:"getMaxMonthResourceMsg",value:function(e){var t,n,r=this.me,o=this.interest,a=(null===(t=window.appData)||void 0===t?void 0:t.organization)||(null===(n=window.appData)||void 0===n||null===(n=n.organizationUser)||void 0===n?void 0:n.organization),i=(e||{}).limit;return null!=a&&a.id?Object(Re.i)():Object(Re.k)({me:r,owner:o.owner,limit:i,showMemberIntro:this.showMemberIntro})}},{key:"getDescMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.user||this.user,o=(n||{}).limit,a=window.appData,i=void 0===a?{}:a,l=i.isPublicCloud,u=i.organizationUser,s=void 0===u?{}:u,d=i.organization||s.organization,m=d&&d.abilities||{},h=b.a.isPublication(r,d),v=d||!l||r.isPaid||h,g=this._hasOwnerAbility(t),_=this._hasGroupMemberAbility(t),E=f.MEMBER_RULE[r.type];if(t.isImport){if("max_single_file_size"===e){var w="User"===r.type?__("语雀会员"):__("高级版团队"),O=E[v?"member":"normal"][e];h&&!r.isPaid&&(O=E.normal[e]);var k=this._getPaidMemberLimit(r,e,d),S=Te.a.getSizeValue(O),N=Te.a.getSizeValue(k);return c.a.createElement("span",null,__("导入文件中有附件超过 {value}{unit} 限制，部分文件导入成功",{value:S.value,unit:S.unit}),!v&&(g||_)&&c.a.createElement(c.a.Fragment,null,__("，"),__("升级{userLevel}享受 {value}{unit} 大{type}上传",{value:N.value,unit:N.unit,userLevel:w,type:__("文件")}),!v&&!g&&_&&c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{href:"/".concat(r.login,"/members"),target:"_blank"},__("联系管理员升级")))))}if("max_resource_total_size"===e)return this.getMaxResourceMsg(t,n);if("max_resource_month_size"===e)return this.getMaxMonthResourceMsg(n)}if("max_group_number"===e)return Object(Re.d)();if("max_group_member_number"===e)return h?c.a.createElement("span",null,__("当前知识小组仅能添加 {value} 人，开通语雀空间可添加更多协作人员",{value:o||(r.isPaid?E.member[e]:E.normal[e])}),c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{target:"_blank",href:f.LINKS.EXTERNAL_ORGANIZATION_INTRO_LINK},__("了解更多")))):r.isPaid?c.a.createElement("span",null,__("高级版团队仅能添加 {value} 人，开通语雀空间可添加更多协作人员",{value:o||E.member[e]}),c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{target:"_blank",href:f.LINKS.EXTERNAL_ORGANIZATION_INTRO_LINK},__("了解更多")))):c.a.createElement("span",null,__("基础版团队成员仅能添加 {value1} 人",{value1:o||E.normal[e]}),!v&&(g||_)&&c.a.createElement(c.a.Fragment,null,__("，"),__("{where}升级至高级版可添加 {value2} 人",{where:window.h5?"在 PC 端":"",value2:E.member[e]}),!v&&!g&&_&&c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{href:"/".concat(r.login,"/members"),target:"_blank"},__("联系管理员升级")))));if("max_book_number"===e){var x;if("User"===r.type)return null===(x=this.payFlowRef.current)||void 0===x?void 0:x.showBookLimitModal();var A="User"===r.type?__("普通用户"):__("基础版团队");h&&(A=__("知识小组"));var P="User"===r.type?__("语雀会员"):__("高级版团队");return c.a.createElement("span",null,__("{text}仅能创建 {value} 个知识库",{value:E.normal[e],text:A}),!v&&(g||_)&&c.a.createElement(c.a.Fragment,null,__("，"),__("{where}升级至{userLevel}享受无限量知识库",{where:window.h5?"在 PC 端":"",userLevel:P}),!v&&!g&&_&&c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{href:"/".concat(r.login,"/members"),target:"_blank"},__("联系管理员升级")))))}if("max_book_collaborator_number"===e){if(null!=d&&d.id)return Object(Re.f)();var C="User"===r.type?__("用户"):__("团队"),j="User"===r.type?__("语雀会员"):__("高级版团队");return h&&(C=__("知识小组"),j=__("知识小组")),"User"===r.type&&r.isPaid?r.member_level===p.MEMBER_LEVEL.member_level_1?c.a.createElement("span",null,__("知识库协作人数达到50人上限，升级会员可邀请500人协作")):c.a.createElement("span",null,__("知识库协作人数达到最大上限")):"User"!==r.type||r.isPaid?r.isPaid?c.a.createElement("span",null,j,__("知识库成员数量超过限制")):c.a.createElement("span",{"data-testid":"test-max_book_collaborator_number"},C,__("知识库成员数量超过限制")):c.a.createElement("span",{"data-testid":"test-max_book_collaborator_number"},__("知识库协作人数达到5人上限，购买会员邀请更多人协作"))}if(e===f.LIMIT_RULE_CODE.max_doc_collaborator_number&&null!=d&&d.id)return Object(Re.g)();if("max_resource_total_size"===e)return this.getMaxResourceMsg(t,n);if("max_resource_month_size"===e)return this.getMaxMonthResourceMsg(n);if(e===f.LIMIT_RULE_CODE.max_member)return Object(Re.e)();if(E&&E.normal&&E.normal[e]){var T=Re.a[e],I=Re.b[e];if(!T)return;null!=d&&d.id&&(v=y.a.isPremium(d));var M=E[v?"member":"normal"][e];h&&!r.isPaid&&(M=E.normal[e]);var L=this._getPaidMemberLimit(r,e,d),R=Te.a.getSizeValue(M),D=Te.a.getSizeValue(L);return null!=d&&d.id?Object(Re.h)({isOwner:m.destroy,typeDesc:I,currentSizeObj:R,isPremium:y.a.isPremium(d),code:e}):c.a.createElement("span",{"data-testid":"test-max_single_file_size"},__("{desc}超过 {value}{unit} 限制",{value:R.value,unit:R.unit,desc:T}),!v&&(g||_)&&c.a.createElement(c.a.Fragment,null,__("，"),!v&&!g&&_&&c.a.createElement("span",{className:De.a.memberMessageAction},c.a.createElement("a",{href:"/".concat(r.login,"/members"),target:"_blank"},__("联系管理员"))),__("购买会员，上传{typeDesc}，可提升至{value}{unit}",{value:D.value,unit:D.unit,type:I})))}}},{key:"getMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=n.user||this.user;if(o){var a=this.getDescMessage(e,n,r);if(a){var i,l=window.appData,u=l.organization,s=l.isPublicCloud,d=u||!s||("User"===o.type?o.isPaid&&o.member_level===p.MEMBER_LEVEL.member_level_2:o.isPaid),m=["max_group_number","max_resource_total_size",f.LIMIT_RULE_CODE.max_resource_month_size].includes(e),h=this._hasOwnerAbility(n),v=("max_group_member_number"===e||o.isPaid)&&!(null!=u&&u.id),y=u&&["max_resource_total_size",f.LIMIT_RULE_CODE.max_member].includes(e),g=b.a.isPublication(o,u),_=!window.h5&&!d&&!m&&h&&!g;null!=u&&u.id?this.spmOrgPayLimitLog({code:e}):this.spmPayLimitLog({code:e});var E=o.member_level===p.MEMBER_LEVEL.member_level_1,w=E?p.MEMBER_LEVEL.member_level_2:null;return{msg:c.a.createElement("span",{className:De.a.memberMessageContainer},a,_&&c.a.createElement("span",{"data-testid":"test-buy-button","data-aspm-click":"click-pay","data-aspm-param":e?"code=".concat(e):"code=default-scene1",onClick:function(){return t.showMemberIntro(e,{user:n.user,isUpgrade:E,upgradePackageType:w})},className:De.a.memberMessageAction},"User"!==o.type?__("立即升级"):o.isPaid?o.member_level===p.MEMBER_LEVEL.member_level_1?__("升级"):__("立即升级"):__("开通")),(_||v)&&c.a.createElement("span",{className:De.a.memberMessageClose,onClick:function(){i&&i(),S.a.destroy()}},c.a.createElement(Pe.default,null))),alwaysOpen:_||v||y,level:"warning",callback:function(e){i=e}}}}}},{key:"getMessageWithFile",value:function(e,t){var n=Re.a[t],r=Re.b[t];if(n){var o=window.appData,a=o.organization,i=o.isPublicCloud,l=o.me,u=o.isYuque,s=e.filesize,d=this.interest,p=d.limit,m=d.owner,h=d.usage,v=!i||"User"===m.type&&m.isTopLevel||"Group"===m.type||"Organization"===m.type&&m.isPaid,y=p[t],b=this._hasOwnerAbility();if(s>=y){var g,_=this._getPaidMemberLimit(m,t,a),E=Te.a.getSizeValue(y),w=Te.a.getSizeValue(_),O=this._hasGroupMemberAbility(),k=!v&&!b&&O,N=!window.h5&&!v&&b,x={alwaysOpen:N||k,level:"warning",callback:function(e){g=e}};if("Organization"===m.type){this.spmOrgPayLimitLog({code:t});var A=a&&a.abilities||{};return ze({msg:Object(Re.h)({isOwner:A.destroy,typeDesc:r,currentSizeObj:E,isPremium:m.isPaid,code:t,canClose:N||k,callback:g})},x)}return"User"===(null==m?void 0:m.type)?(this.spmPayLimitLog({code:t}),ze({msg:Object(Re.j)({desc:n,currentSizeObj:E,memberSizeObj:w,me:l,owner:m,callback:g,showMemberIntro:this.showMemberIntro,code:t})},x)):ze({msg:Object(Re.c)({currentSizeObj:E,code:t,callback:g,canClose:N||k})},x)}if(u&&("User"!==(null==m?void 0:m.type)||(null==l?void 0:l.id)===(null==m?void 0:m.id)))if(["User","Organization"].includes(m.type)){var P=h.attachment_size_month+h.video_size_month+h.image_size_month,C=p.max_resource_month_size;if(P+s>C){this.spmPayLimitLog({code:f.LIMIT_RULE_CODE.max_resource_month_size});var j,T=!window.h5&&b,I=this.getMaxMonthResourceMsg({limit:C});if(I)return{msg:c.a.createElement("span",{className:De.a.memberMessageContainer},I,T&&c.a.createElement("span",{className:De.a.memberMessageClose,onClick:function(){j&&j(),S.a.destroy()}},c.a.createElement(Pe.default,null))),alwaysOpen:T,level:"warning",callback:function(e){j=e}}}}else{var M=h.attachment_size,L=h.video_size,R=h.image_size,D=h.max_upload_size;if(M+L+R+s>D){var U,B=!window.h5&&this._hasOwnerAbility(),z=this.getMaxResourceMsg({user:this.user},{limit:D});if(z)return{msg:c.a.createElement("span",{className:De.a.memberMessageContainer,"data-testid":"test-max_resource_total_size"},z,B&&c.a.createElement("span",{className:De.a.memberMessageClose,onClick:function(){U&&U(),S.a.destroy()}},c.a.createElement(Pe.default,null))),alwaysOpen:B,level:"warning",callback:function(e){U=e}}}}}}},{key:"_hasOwnerAbility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.appData.group;if(void 0!==e.isOwner)return e.isOwner;if("/dashboard/notes"===window.location.pathname)return!0;var n=window.appData.doc;if(n&&n.abilities){if(!n.abilities.destroy)return;if(t&&t.abilities)return t.abilities.destroy}return t&&t.abilities?t.abilities.destroy:void 0}},{key:"_hasGroupMemberAbility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.appData.group;return void 0!==e.isOwner?!1===e.isOwner:t&&t.abilities?"Group"===t.type&&(t.abilities.create_book||t.abilities.read_private):void 0}},{key:"_getPaidMemberLimit",value:function(e,t,n){if(null!=n&&n.id)return f.MEMBER_RULE.Organization[h.PAYMENT_TYPE.enterprise][t];var r=f.MEMBER_RULE[e.type];return"Group"===e.type?r.member[t]:e.member_level===p.MEMBER_LEVEL.member_level_2?null:r[e.member_level+1][t]}},{key:"render",value:function(){var e=this.state,t=e.orgPayflowVisible,n=e.orderType,r=this.props.user,o=window.appData,a=void 0===o?{}:o,i=a.me,l=a.group,u=a.organizationUser,s=void 0===u?{}:u,d=a.isYuque,f=a.interest,p=a.organization||s.organization;return l&&l.id?this.user=l:this.user=r||i,this.interest=f,this.me=i,this.user?(d&&b.a.isGroupOrPublication(this.user)&&!this._hasGroupMemberAbility()?this.user=l:b.a.isGroupOrPublication(this.user)&&!this._hasGroupMemberAbility()&&(this.user=r||i),c.a.createElement("div",{"data-testid":"member-message"},c.a.createElement(E.a,{onPaySuccess:this.props.onPaySuccess,user:this.user,ref:this.payFlowRef,me:this.me}),p&&t&&c.a.createElement(Me.a,{key:t,organization:p,onClose:this.handleCloseOrgPayFlow,visible:t,type:"buyModal",actionType:n}))):null}}],r&&Fe(n.prototype,r),o&&Fe(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.PureComponent);He.getMessage=function(e,t,n){if(window.__member_message_ref&&window.__member_message_ref.current)return window.__member_message_ref.current.getMessage(e,t,n)},He.getMessageWithFile=function(e,t){if(window.__member_message_ref&&window.__member_message_ref.current)return window.__member_message_ref.current.getMessageWithFile(e,t)},He.startToPay=function(){window.__member_message_ref&&window.__member_message_ref.current&&window.__member_message_ref.current.startToPay()},He.showMemberIntro=function(e,t){window.__member_message_ref&&window.__member_message_ref.current&&window.__member_message_ref.current.showMemberIntro(e,t)},He.propTypes={user:u.a.object,onPaySuccess:u.a.func};var Ke=He,Ze=n(1643),Qe="groupintro-module_groupIntroContainer_XUWAC",Xe="groupintro-module_groupIntroMainImage_wg4Nf",Je="groupintro-module_groupIntroMore_4N4Va";function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function nt(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}function rt(e,t,n){return t=at(t),function(e,t){if(t&&("object"==et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ot()?Reflect.construct(t,n||[],at(e).constructor):t.apply(e,n))}function ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ot=function(){return!!e})()}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}var ct=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rt(this,t,[e])).state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="en-us"===window.appData.locale;return c.a.createElement("div",{className:Qe,"data-testid":"groupintro"},c.a.createElement(o.a,null,c.a.createElement(a.a,{span:24},c.a.createElement("div",{className:Xe},e?c.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/basement_prod/0ba80d6a-abd1-41da-82ca-1aa40928c650.svg"}):c.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/basement_prod/9191d568-5928-41b5-a195-da00b1c07d1b.svg"})),c.a.createElement("div",{className:Je},c.a.createElement("a",{href:f.LINKS.EXTERNAL_GROUP_INTRO_LINK,target:"_blank"},__("了解更多")," ",c.a.createElement(Ze.default,null))))))}}])&&tt(n.prototype,r),i&&tt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(i.PureComponent);ct.propTypes={};var lt=n(1423),ut=n(3761),st=(n(227),n(101)),dt=n(3997),ft=n.n(dt),pt=n(148),mt={orgUsageBoard:"organizationUsage-module_orgUsageBoard_R68jU",usageBoard:"organizationUsage-module_usageBoard_+jcHn",homepageMode:"organizationUsage-module_homepageMode_8ax+5",header:"organizationUsage-module_header_QARUu",informationIcon:"organizationUsage-module_informationIcon_Rp7jc",icon:"organizationUsage-module_icon_Ce2AF",content:"organizationUsage-module_content_NywO7",title:"organizationUsage-module_title_z39UP",iconInfo:"organizationUsage-module_iconInfo_cGcpv",buyBtn:"organizationUsage-module_buyBtn_wyCzR",percent:"organizationUsage-module_percent_0izvV",tip:"organizationUsage-module_tip_trHRY",reachedText:"organizationUsage-module_reachedText_DPIJ7",usageBar:"organizationUsage-module_usageBar_1vk-H",innerBar:"organizationUsage-module_innerBar_jiX-J",vernier:"organizationUsage-module_vernier_WO3Ko",full:"organizationUsage-module_full_hWfHT"};function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function vt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ht(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(){yt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ht(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ht(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function bt(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Et="doc",wt="member",Ot="group",kt="upload",St=function(e){var t,n,r,o,a,l=f.SIZE.GB,u=y.a.isPremium(e),s=gt(Object(i.useState)({}),2),p=s[0],m=s[1],h=window.appData.interest;u&&d()().toDate()<d()(null==e?void 0:e.expired_at).subtract(1,"month").toDate()&&(a=c.a.createElement(_.b,{organization:e,className:mt.buyMember,code:f.LIMIT_SCENE.org_usage_buy}));var b=[{key:Et,icon:function(e){return c.a.createElement(v.b,{name:"icon-document1",size:e})},title:__("月新建文档数"),count:null==p?void 0:p.docs_count,max:null==p?void 0:p.max_docs_count,tip:__("文档数量包括：文档、表格、画板、数据表"),unit:__("篇"),percent:Math.min(parseInt((null==p?void 0:p.docs_count)/(null==p?void 0:p.max_docs_count)*100,10)||0,100)},{key:wt,icon:function(e){return c.a.createElement(v.b,{name:"icon-member2",size:e})},title:__("成员容量"),count:null==p?void 0:p.members_count,max:null==p?void 0:p.max_members_count,unit:__("人#lower"),extra:a,percent:Math.min(parseInt((null==p?void 0:p.members_count)/(null==p?void 0:p.max_members_count)*100,10)||0,100)},{key:Ot,icon:function(e){return c.a.createElement(v.b,{name:"icon-team",size:e})},title:__("团队数量"),count:null==h||null===(t=h.usage)||void 0===t?void 0:t.group_count,max:null==h||null===(n=h.limit)||void 0===n?void 0:n.max_group_number,tip:__("可创建无限量的团队用作协同"),unit:__("个"),percent:Math.min(parseInt((null==h||null===(r=h.usage)||void 0===r?void 0:r.group_count)/(null==h||null===(o=h.limit)||void 0===o?void 0:o.max_group_number)*100,10)||0,100)},{key:kt,icon:function(e){return c.a.createElement(v.b,{name:"icon-dataflow",size:e})},title:__("月上传流量#title"),count:ft()((null==p?void 0:p.upload_size)/l,2),max:ft()((null==p?void 0:p.max_upload_size)/l,2),unit:"GB",percent:Math.min(parseInt((null==p?void 0:p.upload_size)/(null==p?void 0:p.max_upload_size)*100,10)||0,100)}],g=function(){var t,n=(t=yt().mark((function t(){var n;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt.webProxy.organizations.usage({id:e.id});case 2:(n=t.sent)&&(m(n),e.usage=n);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){bt(a,r,o,i,c,"next",e)}function c(e){bt(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[]),{usageList:b}},Nt=function(e){var t,n=e.homepageMode,r=e.organization,a=e.className,i=St(r).usageList,l=gt(i,4),u=l[0],s=l[1],d=l[2],p=l[3],m=y.a.isPremium(r),h=function(e){return c.a.createElement("div",{className:mt.usageBar},c.a.createElement("div",{className:B()(mt.innerBar,vt({},mt.full,e.percent>=80)),style:{width:"".concat(e.percent,"%")}},c.a.createElement("span",{className:mt.vernier},e.percent,"%")))},b=function(e){return n?c.a.createElement("div",{className:mt.content},c.a.createElement("span",{className:mt.title},e.title,e.key===Et&&c.a.createElement(st.a,{title:c.a.createElement("span",null,__("文档数量包括：文档、表格、画板、数据表"))},c.a.createElement(v.b,{className:mt.iconInfo,size:14,name:"information"})),e.key===wt&&(null==e?void 0:e.extra)&&c.a.createElement(_.b,{className:mt.buyBtn,organization:r,code:f.LIMIT_SCENE.org_usage_buy})),c.a.createElement("span",null,c.a.createElement("b",null,(null==e?void 0:e.count)||0),c.a.createElement("span",{className:mt.percent}," / ",null!=e&&e.max?(null==e?void 0:e.max)+(null==e?void 0:e.unit):__("无限{unit}",{unit:null==e?void 0:e.unit})))):c.a.createElement("div",null,c.a.createElement("span",{style:{fontSize:"14px"}},e.title,"："),c.a.createElement("span",null,c.a.createElement("b",null,(null==e?void 0:e.count)||0)," / ",c.a.createElement("span",{style:{fontSize:"14px"}},null!=e&&e.max?(null==e?void 0:e.max)+(null==e?void 0:e.unit):__("无限{unit}",{unit:null==e?void 0:e.unit}))))};return t=y.a.isPremium(r)?c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null,c.a.createElement("div",{className:B()(mt.usageBoard)},c.a.createElement("div",{className:mt.header},!n&&c.a.createElement("div",{className:mt.icon},u.icon(14)),b(u)),u.tip&&!n&&c.a.createElement("div",{className:mt.tip},u.tip),n&&c.a.createElement("div",{className:mt.tip},__("可创建无限量的文稿用作项目、需求文档")))),[s,d,p].map((function(e){var t=e.key===wt;return c.a.createElement("div",{className:B()(mt.usageBoard,vt({},mt.homepageMode,n)),key:e.title},c.a.createElement("div",{className:mt.header},!n&&c.a.createElement("div",{className:mt.icon},e.icon(14)),b(e),!n&&t&&(null==e?void 0:e.extra)&&c.a.createElement("div",{style:{marginLeft:"6px"}},c.a.createElement(_.b,{organization:r,code:f.LIMIT_SCENE.org_usage_buy}))),e.key===Ot||n&&e.key===Et?c.a.createElement("div",{className:mt.tip},e.tip):h(e))}))):c.a.createElement(c.a.Fragment,null,i.map((function(e){var t=e.percent>=100,o=e.key===Ot;return c.a.createElement("div",{className:B()(mt.usageBoard,vt({},mt.homepageMode,n)),key:e.title},c.a.createElement("div",{className:mt.header},!n&&c.a.createElement("div",{className:mt.icon},e.icon(14)),b(e)),!(n&&e.key===Et)&&e.tip&&!t&&!o&&c.a.createElement("div",{className:mt.tip},e.tip),y.a.isPremium(r)&&t&&function(e){switch(e.key){case Et:return c.a.createElement("div",{className:mt.reachedText},__("文档创建数已达上限，{payActionLink}可享无限创建（文档数量包括：文档、表格、画板、数据表）",{payActionLink:c.a.createElement(_.a,{organization:r,text:y.a.getPaymentAction(null==r?void 0:r.payment_type)})}));case wt:return m?c.a.createElement("div",{className:mt.reachedText},__("成员数量已达上限，{payActionLink}可增加成员容量",{payActionLink:c.a.createElement(_.b,{organization:r,text:y.a.getPaymentAction(null==r?void 0:r.payment_type),code:f.LIMIT_SCENE.org_usage_buy})})):null;default:return null}}(e),h(e))}))),c.a.createElement("div",{className:B()(mt.orgUsageBoard,a)},!n&&c.a.createElement(o.a,{justify:"space-between",align:"middle"},c.a.createElement("h3",{style:{marginBottom:0}},__("空间权益")),c.a.createElement("a",{href:"/about/price#team",target:"_blank",style:{display:"flex",alignItems:"center"}},__("查看付费版权益"),c.a.createElement(v.b,{name:"arrow-right",size:16,style:{marginLeft:"4px"}}))),t)};Nt.propTypes={organization:u.a.object,homepageMode:u.a.bool,className:u.a.string},Nt.defaultProps={organization:{},homepageMode:!1};var xt=Nt,At=n(1658),Pt=n(1659),Ct="UsagePercentShow-module_usageContainer_jKUGw",jt="UsagePercentShow-module_usageBox_AA0WY",Tt="UsagePercentShow-module_usageDesc_p4Fzl",It="UsagePercentShow-module_titleIconWrapper_-+Wzw",Mt="UsagePercentShow-module_content_b+Gk-",Lt="UsagePercentShow-module_title_qgGNo",Rt="UsagePercentShow-module_count_HLwuB",Dt="UsagePercentShow-module_limit_RdfnJ",Ut="UsagePercentShow-module_usageDetail_6nf3s",Bt="UsagePercentShow-module_usageBarItem_MxMUl",zt="UsagePercentShow-module_usageBarCon_ny839",Ft="UsagePercentShow-module_usageBarPercent_2o48U",Vt=function(e){var t=e.icon,n=e.title,r=e.unit,o=e.totalUsed,a=e.totalLimit,i=e.totalPercent;return c.a.createElement("div",{className:Ct},c.a.createElement("div",{className:jt},c.a.createElement("div",{className:Tt,"data-testid":"test-usage-detail"},c.a.createElement("div",{className:It},t),c.a.createElement("div",{className:Mt},c.a.createElement("span",{className:Lt},n,__("：")),c.a.createElement("span",{className:Rt},"".concat(o),c.a.createElement("span",{className:Dt}," ","/ ".concat(a," ").concat(r))))),c.a.createElement("div",{className:Ut},c.a.createElement("div",{className:B()(zt)},c.a.createElement("div",{className:Bt,style:{left:0,width:"".concat(i,"%"),background:Number(i)>=80?"linear-gradient(90deg, #47A8F7, #EA7583)":"#47A8F7"}}),c.a.createElement("div",{className:Ft,style:{left:"".concat(i,"%")}},i,"%")))))},Gt=function(e){var t=e.group,n=t.max_member,r=t.members_count,o=t.groupMemberInfo.usage,a=b.a.isPublication(t)?__("知识小组"):__("团队"),i=o||{},l=i.attachment_size,u=void 0===l?0:l,s=i.video_size,d=void 0===s?0:s,p=i.image_size,m=void 0===p?0:p,h=i.max_upload_size,v=void 0===h?0:h,y=f.SIZE.GB,g=[{text:__("附件"),value:u/y,tips:__("包括所有上传到{where}的文件（除本地视频、图片）",{where:a.toLowerCase()})},{text:__("本地视频"),value:d/y},{text:__("图片"),value:m/y}],_=v/y,E=0;g.forEach((function(e){E+=e.value}));var w=E.toFixed(2),O=_.toFixed(2),k=w/O*100;k=Math.min(k,100).toFixed(2);var S=t.isPaid?f.MEMBER_RULE.Group.member.max_group_member_number:f.MEMBER_RULE.Group.normal.max_group_member_number,N=n||S,x=r/N*100;return x=Math.min(x,100).toFixed(2),c.a.createElement(c.a.Fragment,null,c.a.createElement(Vt,{icon:c.a.createElement(At.default,{width:16,height:16}),title:__("上传流量"),unit:__("GB"),totalUsed:w,totalLimit:O,totalPercent:k}),c.a.createElement(Vt,{icon:c.a.createElement(Pt.default,{width:16,height:16}),title:__("人数规模"),unit:__("人"),totalUsed:r,totalLimit:N,totalPercent:x}))};Gt.propTypes={group:u.a.object};var Yt=Gt,$t=(n(1219),n(959)),qt=n(3991),Wt=n.n(qt),Ht="userUsage-module_userUsageContainer_Vg08f",Kt="userUsage-module_title_tEvgb",Zt="userUsage-module_rightsLink_NVrG8",Qt="userUsage-module_userUsageRow_5Ni-3",Xt="userUsage-module_userUsageBox_0afdo",Jt="userUsage-module_usageDesc_jR+jq",en="userUsage-module_titleIconWrapper_Kt+AY",tn="userUsage-module_content_I7Z11",nn="userUsage-module_count_Nurz0",rn="userUsage-module_limit_rEjzt",on="userUsage-module_exceedTip_91hDB",an="userUsage-module_usageDetail_Y019y",cn="userUsage-module_usageBarItem_GU6oR",ln="userUsage-module_usageBarCon_29GIy",un="userUsage-module_usageBarPercent_mDaqi",sn="userUsage-module_docAndNoteUsage_fPljT",dn="userUsage-module_dataFlowUsage_6tbSW",fn="userUsage-module_wechatGroup_9xMsW",pn="userUsage-module_qrcode_pIXqT",mn="userUsage-module_qrcodeDesc_8fKRX",hn="userUsage-module_titleIcon_WBzIt",vn="userUsage-module_qrcodeIcon_8TtwM",yn="userUsage-module_qrcodeWrapper_yTpsS",bn="userUsage-module_qrcodeContent_gIsg6",gn="userUsage-module_desc_jviUQ",_n="linear-gradient(90deg, #47A8F7, #EA7583)",En="#47A8F7",wn=function(e){var t=e.user,n=window.appData.userMemberInfo,r=f.SIZE.GB,o=n.usage,a=n.totalDocAndNoteUsageMonth,i=void 0===a?0:a,l=f.MEMBER_RULE.User[t.isPaid?t.member_level:p.MEMBER_LEVEL.free],u=f.MEMBER_RULE.User[p.MEMBER_LEVEL.free],s=function(e){var t;null===(t=window.__member_message_ref)||void 0===t||null===(t=t.current)||void 0===t||t.showMemberIntro(f.LIMIT_SCENE.user_usage,e)},d=u[f.LIMIT_RULE_CODE.max_doc_note_number],m=t.isPaid?__("无限"):d,h=i>d?"100%":"".concat((i/d*100).toFixed(0),"%"),y=function(){var e=o||{},t=e.attachment_size_month,n=void 0===t?0:t,a=e.image_size_month,i=void 0===a?0:a,c=e.video_size_month,u=void 0===c?0:c,s=l[f.LIMIT_RULE_CODE.max_resource_month_size],d=Wt()([n,i,u]),p=d/s*100;return p=Math.min(p,100).toFixed(2),{monthSizeUsage:d="".concat((d/r).toFixed(2)),monthSizeLimit:"".concat(s/r),monthSizePercent:p}}(),b=y.monthSizeUsage,g=y.monthSizeLimit,_=y.monthSizePercent,E=t.member_level===p.MEMBER_LEVEL.member_level_2&&t.isPaid;return c.a.createElement("div",{className:Ht},c.a.createElement("div",{className:Kt},c.a.createElement("span",null,__("我的权益")),c.a.createElement("a",{href:"https://www.yuque.com/yuque/ng1qth/member-privilege",target:"_blank",className:Zt},c.a.createElement("span",null,__("查看完整权益介绍")),c.a.createElement(v.b,{name:"arrow-right",size:16}))),c.a.createElement("div",{className:Qt},c.a.createElement("div",{className:B()(Xt,sn)},c.a.createElement("div",{className:Jt,"data-testid":"test-usage-detail"},c.a.createElement("div",{className:en},c.a.createElement(v.b,{name:"icon-document1",size:16,className:hn})),c.a.createElement("div",{className:tn},c.a.createElement("span",{className:Kt},__("本月新建文稿数"),__("：")),c.a.createElement("span",{className:nn},"".concat(i),c.a.createElement("span",{className:rn}," ","/ ".concat(m).concat(m===__("无限")?"":" "),__("篇"))))),!t.isPaid&&i>=d&&c.a.createElement("div",{className:on},__("本月新建文稿数已达上限，{btn}可享无限创建",{btn:c.a.createElement("a",{onClick:function(){return s(t.hasMemberLevel?{isRenew:t.hasMemberLevel}:{isUpgrade:!0,upgradePackageType:p.MEMBER_LEVEL.member_level_2})}},t.hasMemberLevel?__("续费会员"):__("升级会员"))})),c.a.createElement("div",{className:an},!t.isPaid&&c.a.createElement("div",{className:B()(ln)},c.a.createElement("div",{className:cn,style:{left:0,width:"".concat(h),background:i>=80?_n:En}}),c.a.createElement("div",{className:un,style:{left:"".concat(h)}},h)))),c.a.createElement("div",{className:B()(Xt,dn)},c.a.createElement("div",{className:Jt,"data-testid":"test-usage-detail"},c.a.createElement("div",{className:en},c.a.createElement(v.b,{name:"icon-dataflow",size:16,className:hn})),c.a.createElement("div",{className:tn},c.a.createElement("span",{className:Kt},__("本月上传流量"),__("：")),c.a.createElement("span",{className:nn},"".concat(b),c.a.createElement("span",{className:rn}," ","/ ".concat(g," GB"))))),_>=100?c.a.createElement(c.a.Fragment,null,t.member_level<p.MEMBER_LEVEL.member_level_2&&c.a.createElement("div",{className:on},__("本月上传流量已达限制，{btn}可享更多流量",{btn:c.a.createElement("a",{onClick:function(){return s(t.hasMemberLevel?{isUpgrade:!0,upgradePackageType:p.MEMBER_LEVEL.member_level_2}:{})}},t.hasMemberLevel?__("升级会员"):__("购买会员"))})),t.member_level===p.MEMBER_LEVEL.member_level_2&&c.a.createElement("div",{className:on},__("本月上传流量已达最大限制")),c.a.createElement("div",{className:an},c.a.createElement("div",{className:B()(ln)},c.a.createElement("div",{className:cn,style:{left:0,width:"100%",background:"linear-gradient(90deg, #47A8F7, #EA7583)"}}),c.a.createElement("div",{className:un,style:{left:"100%"}},"100%")))):c.a.createElement("div",{className:an},c.a.createElement("div",{className:B()(ln)},c.a.createElement("div",{className:cn,style:{left:0,width:"".concat(_,"%"),background:_>=80?_n:En}}),c.a.createElement("div",{className:un,style:{left:"".concat(_,"%")}},_,"%")))),E&&c.a.createElement("div",{className:B()(Xt,fn)},c.a.createElement($t.a,{trigger:"hover",noArrow:!0,placement:"bottomRight",content:c.a.createElement("div",{className:yn},c.a.createElement("div",{className:bn},c.a.createElement("img",{className:pn,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*R2whRoBFfwcAAAAAAAAAAAAADvuFAQ/original"})),c.a.createElement("p",{className:gn},__("微信扫一扫，加入超级会员交流群")))},c.a.createElement("div",{className:Jt},c.a.createElement("div",{className:en},c.a.createElement(v.b,{name:"nav-team2",size:16,className:hn})),c.a.createElement("p",null,__("超级会员交流群")),c.a.createElement("div",{className:pn},c.a.createElement("p",{className:mn},__("查看二维码")),c.a.createElement(v.b,{name:"icon-qrcode2",size:16,className:vn})))))))};wn.propTypes={user:u.a.object};var On=wn,kn=(n(73),n(33)),Sn=n(1652),Nn=n(133),xn="uploadExhaustReminder-module_UploadExhaustReminderCard_cBlO2",An="uploadExhaustReminder-module_UploadExhaustReminderEnContainer_WNK2j",Pn="uploadExhaustReminder-module_UploadExhaustReminderContainer_XX4Gr",Cn="uploadExhaustReminder-module_UploadExhaustReminderSubTitle_hv3if",jn="uploadExhaustReminder-module_UploadExhaustReminderIcon_Y2-xC",Tn="uploadExhaustReminder-module_UploadExhaustReminderButtonCon_mHoxS",In="uploadExhaustReminder-module_UploadExhaustReminderImage_zteOX",Mn="uploadExhaustReminder-module_UploadExhaustReminderSmallImage_3HP6j",Ln="uploadExhaustReminder-module_UploadExhaustReminderOwners_N0DgD";function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Dn(e,t,n){return(t=Bn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bn(r.key),r)}}function Bn(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rn(t)?t:t+""}function zn(e,t,n){return t=Vn(t),function(e,t){if(t&&("object"==Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fn()?Reflect.construct(t,n||[],Vn(e).constructor):t.apply(e,n))}function Fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fn=function(){return!!e})()}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}function Gn(e,t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gn(e,t)}var Yn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zn(this,t,[e])).state={visible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gn(e,t)}(t,e),n=t,(a=[{key:"hasGroupOwnerAbility",value:function(){var e=window.appData.group;return e&&e.abilities&&e.abilities.destroy}},{key:"hasOwnerAbility",value:function(){var e=this.props.user;return!b.a.isGroupOrPublication(e)||this.hasGroupOwnerAbility()}},{key:"getStorageKey",value:function(){var e=this.props.user;return"upload-exhaust-reminder/".concat(e.id)}},{key:"getRemainUpload",value:function(e){var t=e.attachment_size,n=e.image_size,r=e.video_size;return e.max_upload_size-t-n-r}},{key:"showUploadExhaust",value:function(){var e=window.appData,t=e.groupMemberInfo,n=void 0===t?{}:t,r=e.userMemberInfo,o=void 0===r?{}:r,a=this.props.user,i=b.a.isGroupOrPublication(a)?n.usage:o.usage;if(i){var c=this.getRemainUpload(i),l=this.getStorageKey(),u=+(Nn.a.get(l)||0);c>1*Math.pow(1024,3)?Nn.a.remove(l):c>0&&u||u>=2||this.setState({visible:!0})}}},{key:"componentDidMount",value:function(){this.showUploadExhaust()}},{key:"onClose",value:function(){var e=this.getStorageKey(),t=+(Nn.a.get(e)||0);Nn.a.set(e,t+1),this.setState({visible:!1})}},{key:"buyUpload",value:function(){Ke.showMemberIntro(null,{isBuyUpload:!0})}},{key:"getOwners",value:function(){var e=window.appData.groupMemberInfo;return e&&e.groupOwners?c.a.createElement("span",{className:Ln},e.groupOwners.map((function(t,n){return c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:t.login,target:"_blank"},t.name),n!==e.groupOwners.length-1&&c.a.createElement(c.a.Fragment,null,__("、")))}))):""}},{key:"getTitles",value:function(e,t,n){var r,o,a=this.getRemainUpload(t);return b.a.isGroupOrPublication(e)?a>0?(r=__("你的团队剩余上传流量不足 1GB"),o=n?__("你的团队“{name}”剩余上传流量不足 1GB。为了不影响功能使用，请及时购买流量。",{name:e.name}):__("为了不影响功能使用，请联系管理员{owners}及时购买流量。",{owners:this.getOwners()})):(r=__("你的团队上传流量已用完"),o=n?__("你的团队“{name}”上传流量已用完。为了不影响功能使用，请及时购买流量。",{name:e.name}):__("为了不影响功能使用，请联系管理员{owners}及时购买流量。",{owners:this.getOwners()})):a>0?(r=__("你的剩余上传流量不足 1GB"),o=__("你的剩余上传流量不足 1GB。为了不影响功能使用，请及时购买流量。",{name:e.name})):(r=__("你的上传流量已用完"),o=__("你的上传流量已用完。为了不影响功能使用，请及时购买流量。",{name:e.name})),{title:r,subTitle:o}}},{key:"render",value:function(){var e=this;if(window.h5||!this.state.visible)return null;var t=window.appData,n=t.locale,a=t.organization,i=t.isPublicCloud,l=t.groupMemberInfo,u=void 0===l?{}:l,s=t.userMemberInfo,d=void 0===s?{}:s;if(!i||a)return null;var f=this.props.user,p=b.a.isGroupOrPublication(f),m=p?u.usage:d.usage;if(!m)return null;var h=this.hasOwnerAbility(),v="en-us"===n,y=this.getTitles(f,m,h),g=y.title,_=y.subTitle;return c.a.createElement("div",{className:p?"layout-container":null,"data-testid":"upload-exhaust-reminder"},c.a.createElement(kn.a,{"data-testid":"expire-reminder",className:xn,extra:c.a.createElement("span",{className:"larkicon larkicon-close",onClick:function(){return e.onClose()}})},c.a.createElement("div",{className:B()(Dn(Dn({},Pn,!0),An,v))},c.a.createElement(Sn.default,{className:jn}),c.a.createElement("h2",null,g),c.a.createElement("p",{className:Cn},_),h&&c.a.createElement(o.a,{className:Tn},c.a.createElement(r.a,{type:"primary",onClick:function(){return e.buyUpload()}},__("购买流量"))),c.a.createElement("div",{className:h?In:Mn},c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ojF7RpGFUJUAAAAAAAAAAABkARQnAQ"})))))}}])&&Un(n.prototype,a),i&&Un(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(i.PureComponent);Yn.propTypes={user:u.a.object};n(70);var $n=n(36),qn=n(349),Wn=n(3706),Hn="index-module_successModalContainer_-aK4t",Kn="index-module_successModalInfoCon_7ecQr",Zn="index-module_successModalInfoTitle_ByhnY",Qn="index-module_successModalSubTitle_kd51r",Xn="index-module_successModalItem_+QbaR",Jn="index-module_successModalBlank_KXceZ",er=function(e){var t=e.user,n=e.order,r=e.visible,o=e.onClose,a=n.order_id,i=n.order_type,l=n.amount,u=n.upload_size,s=n.package_type,f=n.updated_at,h=n.buyer,v=i===p.ORDER_TYPE.data,y=i===p.ORDER_TYPE.renew,g=b.a.isGroupOrPublication(t),_="en-us"===window.appData.locale?" ":"";return c.a.createElement(w.a,{className:"order-detail-modal",title:"订单详情",visible:r,onCancel:o,closable:!0,maskClosable:!1,footer:null,centered:!0,width:656},c.a.createElement("div",{className:Hn,"data-testid":"success-modal"},c.a.createElement("div",{className:Kn},v?c.a.createElement("h1",{className:Zn},__("购买语雀上传流量")):c.a.createElement("h1",{className:Zn},g&&__("团队"),_,y?__("续费"):__("升级"),_,function(){var e=__("会员");if(g)e=__("高级版");else if(s){var t;e=(null===(t=m.MEMBER_USER_AMOUNT_MAP[s])||void 0===t?void 0:t.name)||__("会员")}return e}()),c.a.createElement("p",{className:Jn}),c.a.createElement("p",{className:Qn},__("订单信息")),c.a.createElement("p",{className:Xn},fe()(g?__("团队"):__("账号")),"：",t.name),c.a.createElement("p",{className:Xn},__("订单号"),"：",a),v&&c.a.createElement("p",{className:Xn,"data-testid":"order-desc"},__("上传流量"),"：",Object(je.getSizeValue)(u).value,Object(je.getSizeValue)(u).unit),c.a.createElement("p",{className:Xn},__("付款金额"),"：",l," ",__("元")),c.a.createElement("p",{className:Xn,"data-testid":"buyer"},__("付款人"),"：",h&&h.name),c.a.createElement("p",{className:Xn},__("付款时间"),"：",f&&d()(f).format("YYYY-MM-DD HH:mm:ss")))))};er.propTypes={user:u.a.object.isRequired,order:u.a.object.isRequired,visible:u.a.bool.isRequired,onClose:u.a.func.isRequired};var tr=er,nr="orderReceipt-module_table_ulliM",rr="orderReceipt-module_border_eZgzZ",or="orderReceipt-module_tableHeader_FQ+zb",ar="orderReceipt-module_content_wbMym",ir="orderReceipt-module_amount_tDmhL",cr="orderReceipt-module_user_TgHTF",lr="orderReceipt-module_timer_WuSe8",ur="orderReceipt-module_actions_tViEs";function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=sr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vr(e){var t=e.user,n=e.showTitle,o=mr(Object(i.useState)([]),2),a=o[0],l=o[1],u=mr(Object(i.useState)(0),2),s=u[0],d=u[1],f=mr(Object(i.useState)(1),2),h=f[0],v=f[1],y=mr(Object(i.useState)(null),2),g=y[0],_=y[1],E=mr(Object(i.useState)(null),2),w=E[0],O=E[1];if(Object(i.useEffect)((function(){N.a.userOrders.find({id:t.id,offset:50*(h-1),limit:50},{useOriginResp:!0}).then((function(e){l(e.data),d(e.meta.total)}))}),[h,t.id]),b.a.isGroupOrPublication(t)&&!a.length)return null;var k=[{title:__("订单号"),dataIndex:"id",width:200,render:function(e,t){var n;return null===(n=t.order)||void 0===n?void 0:n.order_id}},{title:__("内容"),dataIndex:"type",width:150,className:ar,render:function(e,n){return c.a.createElement("a",{onClick:function(){return O(n.order)},"data-testid":"order-content"},function(e){var n=e.order,r=n.order_type,o=n.upload_size,a=n.package_type,i=__("会员");if(b.a.isGroupOrPublication(t))i=__("高级版");else if(a){var c;i=(null===(c=m.MEMBER_USER_AMOUNT_MAP[a])||void 0===c?void 0:c.name)||__("会员")}switch(r){case p.ORDER_TYPE.buy:return __("升级{subject}",{subject:i});case p.ORDER_TYPE.renew:return __("续费{subject}",{subject:i});case p.ORDER_TYPE.data:return __("购买上传流量，{upload_size}{unit}",{upload_size:Object(je.getSizeValue)(o).value,unit:Object(je.getSizeValue)(o).unit});default:return __("升级{subject}",{subject:i})}}(n))}},{title:__("支付时间"),dataIndex:"updated_at",width:150,className:lr,render:function(e,t){var n;return c.a.createElement(qn.a,{time:null===(n=t.order)||void 0===n?void 0:n.updated_at})}},{title:__("支付金额"),dataIndex:"amount",width:120,className:ir,render:function(e,t){var n;return __("{amount} 元",{amount:parseFloat(null===(n=t.order)||void 0===n?void 0:n.amount)})}},{title:__("操作"),width:120,key:"actions",className:ur,render:function(e,t){var n,o,a="USER_MEMBER_IAP_PAY"===t.type;return 4===(null===(n=t.order)||void 0===n?void 0:n.status)?__("已退款"):a?c.a.createElement(st.a,{placement:"top",title:__("苹果支付渠道暂时不支持申请发票")},__("申请发票")):null!==(o=t.order)&&void 0!==o&&o.receipt?__("已申请发票"):c.a.createElement(r.a,{type:"link",onClick:function(){return e=t.order,void _(e);var e}},__("申请发票"))}}],x=a.length<s&&{pageSize:50,current:h,total:s,onChange:function(e){v(e)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement($n.a,{rowKey:"id",className:B()(nr,pr({},rr,0===a.length)),columns:k,dataSource:a,pagination:x,title:n?function(){return c.a.createElement("span",{className:or},__("支付历史"))}:null}),g&&c.a.createElement(Wn.a,{visible:!0,onClose:function(){return _(null)},onConfirm:function(e,n){(0,e.form.validateFields)((function(e,r){e||N.a.userReceipts.create(fr(fr({},r),{},{type:m.RECEIPT_TYPES[n||"normal"],order_id:null==g?void 0:g.order_id,id:t.id})).then((function(e){l(a.map((function(t){return t.order.order_id===e.order_id&&(t.order.receipt=e),t}))),_(null),S.a.success(__("已成功提交发票申请"))}))}))},receipt:g.receipt,submited:!!g.receipt}),w&&c.a.createElement(tr,{visible:!0,user:t,order:w,onClose:function(){return O(null)}}))}vr.propTypes={user:u.a.object,showTitle:u.a.bool},vr.defaultProps={showTitle:!0};var yr=vr;function br(e){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function gr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=br(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==br(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Er(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wr(e){var t=e.user,n=e.showTitle,o=_r(Object(i.useState)([]),2),a=o[0],l=o[1],u=_r(Object(i.useState)(0),2),s=u[0],d=u[1],f=_r(Object(i.useState)(1),2),p=f[0],h=f[1],v=_r(Object(i.useState)(null),2),y=v[0],g=v[1];if(Object(i.useEffect)((function(){N.a.userReceipts.find({id:t.id,offset:50*(p-1),limit:50},{useOriginResp:!0}).then((function(e){l(e.data),d(e.meta.total)}))}),[p,t.id]),b.a.isGroupOrPublication(t)&&!a.length)return null;var _=[{title:__("发票类型"),dataIndex:"type",render:function(e,t,n){return e===m.RECEIPT_TYPES.normal?__("普通电子发票"):__("专用发票")}},{title:__("申请人"),dataIndex:"contact_name",className:cr},{title:__("申请时间"),dataIndex:"created_at",className:lr,render:function(e){return c.a.createElement(qn.a,{time:e})}},{title:__("操作"),key:"actions",className:ur,render:function(e,t){return c.a.createElement(r.a,{type:"link",onClick:function(){return g(t)}},__("查看发票信息"))}}],E=a.length<s&&{paegSize:50,current:p,total:s,onChange:function(e){h(e)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement($n.a,{rowKey:"id",className:B()(nr,gr({},rr,0===a.length)),columns:_,dataSource:a,pagination:E,title:n?function(){return c.a.createElement("span",{className:or},__("发票管理"))}:null}),y&&c.a.createElement(Wn.a,{visible:!0,onClose:function(){return g(null)},receipt:y,submited:y}))}wr.propTypes={user:u.a.object,showTitle:u.a.bool},wr.defaultProps={showTitle:!0};var Or=wr,kr=(n(3707),n(324)),Sr=n.n(kr),Nr=n(817),xr=n(1220),Ar=n(3993),Pr="DocNoteLimitIncentiveModal-module_modal_aJrQn",Cr="DocNoteLimitIncentiveModal-module_content_oO6Wv",jr="DocNoteLimitIncentiveModal-module_memberCard_yo4QJ",Tr="DocNoteLimitIncentiveModal-module_memberCardName_NaU7l",Ir="DocNoteLimitIncentiveModal-module_memberCardCoreRight_xCY6c",Mr="DocNoteLimitIncentiveModal-module_memberCardRight_ILEan",Lr="DocNoteLimitIncentiveModal-module_footer_r2nm-",Rr="DocNoteLimitIncentiveModal-module_footerAction_6SUEP",Dr="DocNoteLimitIncentiveModal-module_actionBtn_3odCr";function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Br(){Br=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ur(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ur(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function zr(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Gr=function(e,t){var n=e.onConfirm,o=e.user,a=e.onShow,l=Fr(Object(i.useState)(!1),2),u=l[0],s=l[1],d=Fr(Object(i.useState)(!1),2),h=d[0],v=d[1],y=Fr(Object(i.useState)({}),2),b=y[0],g=y[1],_=Nr.USER_SETTINGS_KEYS.INCENTIVE_FIRST_DOC_NOTE_COUNT_VISIBILITY,E=Nr.USER_SETTINGS_KEYS.USER_REGISTER_TRIAL,O=f.MEMBER_RULE.User[p.MEMBER_LEVEL.free][f.LIMIT_RULE_CODE.max_doc_note_number],k=function(){pt.webProxy.mine.updateUserSettings({key:_,value:Nr.INCENTIVE_FIRST_DOC_NOTE_COUNT_VISIBILITY_VALUES.HIDE})},S=function(){s(!1),k()},N=function(){var e,t=(e=Br().mark((function e(){var t,n,r,i,c,l,u,d,f,p,m,h;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=o&&o.id){e.next=2;break}return e.abrupt("return");case 2:if(n=window.location.pathname,r=window.appData,i=r.isDesktopApp,c=r.doc,l=r.organization,u=r.isYuque,!l&&u){e.next=6;break}return e.abrupt("return");case 6:if(i){e.next=11;break}if(d=(null==c?void 0:c.slug)&&!window.location.pathname.endsWith("/edit"),["/dashboard","/dashboard/recent","/dashboard/notes","/settings/member"].includes(n)||d){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,pt.webProxy.mine.findOne();case 13:if(!(f=e.sent).old_user_gift){e.next=18;break}return g({title:"🎉 恭喜你获得 30 天会员奖励！",description:"为了回馈你的辛勤创作，雀雀送你 30 天会员，继续创作可以解锁更多奖励哦！",show:!0}),s(!0),e.abrupt("return");case 18:if(!(p=null===(t=f.profile)||void 0===t?void 0:t.user_settings)[E]||p[E]===Nr.USER_REGISTER_TRIAL_VALUES.HIDE||!Sr()().isBefore(p[E])||i||!o.isTrial&&!Sr()().isAfter(f.expired_at)){e.next=24;break}if(!(Sr()().diff(Sr()(o.expired_at),"hours")>-24)){e.next=24;break}return v(!0),pt.webProxy.mine.updateUserSettings({key:E,value:Nr.USER_REGISTER_TRIAL_VALUES.HIDE}),e.abrupt("return");case 24:if(m=f.incentive_first_at){e.next=27;break}return e.abrupt("return");case 27:if(!(Sr()().diff(Sr()(m),"days")>=15)){e.next=30;break}return e.abrupt("return");case 30:return g(f.incentive_tip),e.next=33,pt.webProxy.mine.userSettings();case 33:(null==(h=e.sent)?void 0:h[_])===Nr.INCENTIVE_FIRST_DOC_NOTE_COUNT_VISIBILITY_VALUES.SHOW&&(s(!0),null==a||a());case 35:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zr(a,r,o,i,c,"next",e)}function c(e){zr(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useImperativeHandle)(t,(function(){return{show:N}})),Object(xr.a)((function(){N()}),[]),h?c.a.createElement(Ar.a,{visible:h,onClose:function(){v(!1)},showTrialExpire:!0,expiredAt:o.expired_at}):c.a.createElement(w.a,{className:Pr,visible:u,onCancel:S,header:null,footer:null,width:480,maskClosable:!1,closable:!0,centered:!0},c.a.createElement("div",{className:Cr,"data-testid":"doc-note-limit-content"},c.a.createElement("h1",null,(null==b?void 0:b.title)||__("恭喜你获得 30 天会员奖励")),c.a.createElement("p",null,(null==b?void 0:b.description)||__("{limit} 篇文稿数成就达成，奖励你 30 天的语雀会员。会员享有以下权益，快去体验吧！",{limit:O})),c.a.createElement("div",{className:jr},c.a.createElement("div",{className:Tr},c.a.createElement("span",null,__("语雀会员卡")),c.a.createElement(Z,{user:{member_level:p.MEMBER_LEVEL.member_level_1,memberLevelName:m.MEMBER_USER_AMOUNT_MAP[p.MEMBER_LEVEL.member_level_1].name,isPaid:!0}})),c.a.createElement("p",null,__("有效期至："),(null==b?void 0:b.expired_at)||Sr()(o.expired_at||Sr()().add(1,"month").endOf("day")).format("YYYY-MM-DD")),c.a.createElement("div",{className:Ir},__("核心权益")),c.a.createElement("p",{className:Mr},__("无限文稿数")),c.a.createElement("p",{className:Mr},__("无限知识库数")),c.a.createElement("p",{className:Mr},__("更多格式、更大附件")),c.a.createElement("p",{className:Mr},__("安全等知识库高级功能")),c.a.createElement("p",{className:Mr},__("不限期公开分享")),c.a.createElement("p",{className:Mr},__("公开我的花园"))),c.a.createElement("div",{className:Lr},c.a.createElement("div",{className:Rr},c.a.createElement(r.a,{"data-testid":"buy-button",className:Dr,onClick:function(){s(!1),k(),n()}},__("立即延长会员")),c.a.createElement(r.a,{className:Dr,onClick:S,type:"primary"},__("知道了"))))))};Gr.propTypes={user:u.a.object.isRequired,onConfirm:u.a.func,onShow:u.a.func};var Yr=Object(i.forwardRef)(Gr),$r=function(e){var t=e.user,n=e.text,o=e.className,a=e.upgradePackageType,i=e.onClick,l=e.code,u=t.hasMemberLevel?__("立即续费"):__("购买会员"),s=function(e){var n,r;null===(n=window.__member_message_ref)||void 0===n||null===(r=n.current)||void 0===r||r.showMemberIntro(l,{isUpgrade:e,upgradePackageType:a,user:t})};return t.isPaid?c.a.createElement(c.a.Fragment,null,c.a.createElement(r.a,{type:"primary",className:B()(o),onClick:function(){s(!0),null==i||i(!1)}},n||__("立即升级"))):c.a.createElement(c.a.Fragment,null,c.a.createElement(r.a,{type:"primary",className:B()(o),onClick:function(){s(!1),null==i||i(!1)}},n||u))};$r.propTypes={user:u.a.object.isRequired,text:u.a.string,className:u.a.string,upgradePackageType:u.a.number,onClick:u.a.func};var qr=$r},3799:function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var o=65535&e|0,a=e>>>16&65535|0,i=0;0!==n;){n-=i=n>2e3?2e3:n;do{a=a+(o=o+t[r++]|0)|0}while(--i);o%=65521,a%=65521}return o|a<<16|0}},3800:function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,o){var a=r,i=o+n;e^=-1;for(var c=o;c<i;c++)e=e>>>8^a[255&(e^t[c])];return-1^e}},3801:function(e,t,n){"use strict";var r=n(3653),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var i=new r.Buf8(256),c=0;c<256;c++)i[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}i[254]=i[254]=1,t.string2buf=function(e){var t,n,o,a,i,c=e.length,l=0;for(a=0;a<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<c&&56320==(64512&(o=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(o-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),i=0,a=0;i<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<c&&56320==(64512&(o=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(o-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,o,a,c=t||e.length,u=new Array(2*c);for(r=0,n=0;n<c;)if((o=e[n++])<128)u[r++]=o;else if((a=i[o])>4)u[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<c;)o=o<<6|63&e[n++],a--;a>1?u[r++]=65533:o<65536?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return l(u,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+i[e[n]]>t?n:t}},3802:function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},3803:function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3805:function(e,t,n){"use strict";var r=n(0),o=n(3806),a=n(3671),i=n(3711);t.a=function(e){i.a&&(Object(a.a)(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=Object(o.a)(e);Object(r.useEffect)((function(){return function(){t.current()}}),[])}},3806:function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=Object(r.useRef)(e);return t.current=e,t}},381:function(e,t,n){"use strict";var r=n(80),o=n.n(r),a=(n(1007),n(348)),i=n(57),c=n.n(i),l=n(94),u=n.n(l),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(5),h=n.n(m),v=n(95),y=n.n(v),b=(n(3149),["className","overlayClassName"]);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=d.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,o=u()(e,b);return d.a.createElement(a.a,c()({className:h()(n,"larkui-dropdown-trigger"),overlayClassName:h()(r,"larkui-dropdown"),ref:t},o))}));E.propTypes=_(_({},a.a.DropDownProps),{},{className:p.a.string,overlayClassName:p.a.string}),y()(E,a.a);var w=E,O=["className","overlayClassName","overlay","children"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=d.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,o=e.overlay,i=e.children,l=u()(e,O),s=o?o.props:{};return d.a.createElement(a.a.Button,c()({className:h()(n,"larkui-dropdown-trigger"),overlay:d.a.cloneElement(o,{className:h()(s.className,r,"larkui-dropdown-menu")}),ref:t},l),i)}));N.propTypes=S(S({},a.a.DropdownButtonProps),{},{className:p.a.string,overlayClassName:p.a.string,overlay:p.a.node,children:p.a.any}),y()(N,a.a.Button);var x=N,A=n(1436),P=n.n(A),C=n(1435),j=n.n(C),T=n(707),I=n(110),M=n(101),L=(n(3150),function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,o=e.menus,a=e.disableMenus,i=void 0===a?[]:a,l=e.disableTip,u=e.handleChange,s=e.triggerPrefix,f=o.find((function(e){return e.value===r}));return d.a.createElement(w,c()({},e,{trigger:["click"],className:h()("larkui-dropdown-selector",t),overlayClassName:h()("larkui-dropdown-selector-menu",n),overlay:d.a.createElement(I.a,{selectedKeys:[r]},o.map((function(e){var t=i.some((function(t){return t.value===e.value})),n=d.a.createElement("span",{className:"larkui-dropdown-selector-option"},d.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===r&&d.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},d.a.createElement(j.a,null)));return d.a.createElement(I.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?d.a.createElement(M.a,{title:l,placement:"right"},n):n)})),e.externalActions&&d.a.createElement(I.a.Divider,null),e.externalActions&&e.externalActions())}),d.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},d.a.createElement("span",null,s),d.a.createElement("span",null,f?f.name:Object(T.a)("请选择")),d.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},d.a.createElement(P.a,null))))});L.propTypes={className:p.a.string,overlayClassName:p.a.string,currentValue:p.a.string.isRequired,menus:p.a.arrayOf(p.a.shape({name:p.a.string.isRequired,value:p.a.string.isRequired})).isRequired,disableMenus:p.a.array,disableTip:p.a.node,handleChange:p.a.func.isRequired,externalActions:p.a.func,triggerPrefix:p.a.node};var R=L;w.Selector=R,w.Button=x;t.a=w},3811:function(e,t){e.exports=function(e,t,n,r){var o=e.transformX=function(e,a){n(e),n(a);for(var i,c,l,u=[],s=0;s<a.length;s++){for(var d=a[s],f=[],p=0;p<e.length;){var m=[];if(i=e[p],l=m,t(f,i,c=d,"left"),t(l,c,i,"right"),p++,1!==m.length){if(0===m.length){for(var h=p;h<e.length;h++)r(f,e[h]);d=null;break}for(var v=o(e.slice(p),m),y=0;y<v[0].length;y++)r(f,v[0][y]);for(var b=0;b<v[1].length;b++)r(u,v[1][b]);d=null;break}d=m[0]}null!=d&&r(u,d),e=f}return[e,u]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?o(e,n)[0]:o(n,e)[1]}}},3812:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),o=n(486),a=n(216),i=function(e){var t=e.loader,n=r.useRef(null);return function(){return n.current?Promise.resolve(n.current):t().then((function(e){return n.current=e,n.current})).catch((function(e){return console.error(e.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};d(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==l(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=m;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(l(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=d(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),d(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(f(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),d(S,s,"Generator"),d(S,i,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=e.loader,n=e.name,l=m(o.a.useModal(),2),s=l[0],f=l[1],h=i({loader:t}),v=function(){var e,t=(e=u().mark((function e(t,o){var i,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:if(i=e.sent){e.next=6;break}return console.error("SelectorComponent for ".concat(n," load failed")),e.abrupt("return");case 6:return l=new Promise((function(e){var n=s.info({}),l=function(){var e,r;n.destroy(),null==t||null===(e=t.onClose)||void 0===e||e.call(t),null==o||null===(r=o.afterClose)||void 0===r||r.call(o)},u=d(d({},t),{},{onSelect:function(t){e(t),l()},onClose:function(){e(void 0),l()}});n.update(d(d({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:r.createElement(a.a,null,r.createElement(i,u))}))})),e.next=9,l;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return{loadSelector:function(){return h()},showSelector:v,contextHolder:f}}},3814:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=["textRef","visible","onVisibleChange"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.textRef,n=(e.visible,e.onVisibleChange),u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i),s=l(Object(o.useState)(!1),2),d=s[0],f=s[1];return a.a.createElement(r.a,c({},u,{visible:d,onVisibleChange:function(e){var r=e;null!=t&&t.current&&r&&(r=void 0!==t.current.offsetWidth&&void 0!==t.current.scrollWidth&&t.current.offsetWidth<t.current.scrollWidth),f(r),n&&n(r)}}))}},3816:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return _})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return N}));n(48);var r=n(11),o=n(0),a=n.n(o),i=n(1438),c=n(347),l=n.n(c),u=n(54),s=n(74),d=n(1416),f=n(87),p=n(1337),m=n(3760),h={max_single_image_size:__("图片大小"),max_single_file_size:__("附件大小"),max_single_video_size:__("视频大小")},v={max_single_image_size:__("图片"),max_single_video_size:__("视频"),max_single_file_size:__("附件")};function y(e){var t,n,o,c,u,s,p=e.isOwner,h=e.isPremium,y=e.code,b=e.canClose,g=e.callback,_=f.a.buildOrgPayLink({action:"renew",paySource:y});return a.a.createElement("span",{className:m.a.memberMessageContainer,"data-testid":"test-max-file-size"},a.a.createElement("span",{"data-testid":"org-max_file_size"},(n=window.appData.organization,o=Object(d.getInterest)(),c=l.a.getSizeValue(null==o||null===(t=o.limit)||void 0===t?void 0:t[y]),u=c.value,s=c.unit,__("当前版本不支持上传超过 {value}{unit} 的{desc}，{action}",{value:u,unit:s,desc:v[y],action:f.a.getInterestActionText(y,n,o)}))),!h&&!window.h5&&p&&a.a.createElement("a",{href:_,target:"_blank","data-testid":"org-buy","data-aspm-click":"click-pay","data-aspm-param":y?"code=".concat(y):"code=default-scene1",className:m.a.memberMessageAction},__("立即升级")),b&&a.a.createElement("span",{className:m.a.memberMessageClose,onClick:function(){null==g||g(),r.a.destroy()}},a.a.createElement(i.default,null)))}function b(){return O(s.LIMIT_RULE_CODE.max_resource_month_size)}function g(e){var t=e.currentSizeObj,n=e.memberSizeObj,o=e.me,c=e.owner,l=e.code,s=e.callback,d=e.showMemberIntro,f=c.id===o.id,p=h[l],y=v[l],b=c.isTopLevel;return a.a.createElement("span",{className:m.a.memberMessageContainer,"data-testid":"test-max-file-size"},a.a.createElement("span",null,__("{desc}超出 {value}{unit}",{desc:p,value:t.value,unit:t.unit}),b&&a.a.createElement(a.a.Fragment,null,__("，"),__("请压缩后重试")),!b&&a.a.createElement(a.a.Fragment,null,f&&a.a.createElement(a.a.Fragment,null,o.isPaid?a.a.createElement(a.a.Fragment,null,__("，"),__("超级会员可享 {value}{unit} {type}上传",{type:y,value:n.value,unit:n.unit})):a.a.createElement(a.a.Fragment,null,__("，"),__("会员可享更大{type}上传",{type:y}))))),f&&!b&&a.a.createElement(a.a.Fragment,null,o.isPaid?a.a.createElement("a",{"data-aspm-click":"click-pay","data-aspm-param":l?"code=".concat(l):"code=default-scene2",onClick:function(){return null==d?void 0:d(l,{isUpgrade:!0,upgradePackageType:u.MEMBER_LEVEL.member_level_2})},className:m.a.showMemberIntro,"data-testid":"test-upgrade"},__("升级")):a.a.createElement("a",{"data-aspm-click":"click-pay","data-aspm-param":l?"code=".concat(l):"code=default-scene2",onClick:function(){return null==d?void 0:d(l)},className:m.a.showMemberIntro,"data-testid":"test-buy"},__("开通"))),(!b||f)&&a.a.createElement("span",{className:m.a.memberMessageClose,onClick:function(){null==s||s(),r.a.destroy()}},a.a.createElement(i.default,null)))}function _(e){var t=e.me,n=e.owner,r=e.limit,o=e.showMemberIntro,i=t.id===n.id,c=s.MEMBER_RULE.User[u.MEMBER_LEVEL.member_level_2][s.LIMIT_RULE_CODE.max_resource_month_size]/s.SIZE.GB;return i?t.isPaid?t.member_level===u.MEMBER_LEVEL.member_level_1?a.a.createElement("span",{"data-testid":"test-max_resource_month_size"},__("本月流量超出 {value}{unit}，升级会员可享 {member2Limit}GB/月流量 {btn}",{value:l.a.getSizeValue(r).value,unit:l.a.getSizeValue(r).unit,member2Limit:c,btn:a.a.createElement("a",{onClick:function(){return o(s.LIMIT_RULE_CODE.max_resource_month_size,{isUpgrade:!0,upgradePackageType:u.MEMBER_LEVEL.member_level_2})}},__("升级"))})):t.member_level===u.MEMBER_LEVEL.member_level_2?a.a.createElement("span",{"data-testid":"test-max_resource_month_size"},__("本月流量已达最大上限，无法继续上传")):void 0:a.a.createElement("span",{"data-testid":"test-max_resource_month_size"},__("本月流量超出 {value}{unit}，会员可享更大月流量  {btn}",{value:l.a.getSizeValue(r).value,unit:l.a.getSizeValue(r).unit,btn:a.a.createElement("a",{onClick:function(){return o()}},__("开通"))})):a.a.createElement("span",{"data-testid":"test-max_resource_month_size"},__("你正在协作的知识库本月流量已超出 {value}{unit}",{value:l.a.getSizeValue(r).value,unit:l.a.getSizeValue(r).unit}))}function E(e){var t=e.currentSizeObj,n=e.code,o=e.callback,c=e.canClose,l=h[n];return a.a.createElement("span",{className:m.a.memberMessageContainer,"data-testid":"test-max-file-size"},a.a.createElement("span",null,__("{desc}超过 {value}{unit} 限制",{desc:l,value:t.value,unit:t.unit})),c&&a.a.createElement("span",{className:m.a.memberMessageClose,onClick:function(){null==o||o(),r.a.destroy()}},a.a.createElement(i.default,null)))}function w(){var e=Object(d.getInterest)(),t=null==e?void 0:e.limit,n=null==e?void 0:e.owner,r=s.LIMIT_RULE_CODE.max_group_number;return"Organization"===(null==n?void 0:n.type)?O(r):a.a.createElement("span",null,__("知识小组数量超限，最多创建 {value} 个",{value:t[s.LIMIT_RULE_CODE.max_group_number]}))}function O(e){var t,n,r=null===(t=window)||void 0===t||null===(t=t.appData)||void 0===t?void 0:t.organization,o=Object(d.getInterest)(),i=null==r||null===(n=r.abilities)||void 0===n?void 0:n.destroy,c=e===s.LIMIT_RULE_CODE.max_member?a.a.createElement(p.b,{className:m.a.orgPayBtn,organization:r,code:e}):a.a.createElement(p.k,{className:m.a.orgPayBtn,organization:r,code:e});return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,f.a.getInterestLimitMsg(e,r,o)),i&&c)}function k(){var e=s.LIMIT_RULE_CODE.max_member,t=window.appData.organization;return null!=t&&t.abilities?O(e):__("无法加入空间，空间成员数已达上限")}function S(){return O(s.LIMIT_RULE_CODE.max_book_collaborator_number)}function N(){return O(s.LIMIT_RULE_CODE.max_doc_collaborator_number)}},382:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(5),i=n.n(a),c=n(216),l=n(462),u="index-module_placeholder_3rydn",s="index-module_loaded_kAsRx",d="index-module_placeholderLoaded_0zPqS";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["src","darkSrc","alt","width","height","theme","style","darkAlpha","className","children","blurLoading"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(null,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.src,n=e.darkSrc,a=e.alt,c=e.width,f=e.height,b=(e.theme,e.style),g=e.darkAlpha,_=e.className,E=e.children,w=e.blurLoading,O=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,p);c=c||(null==b?void 0:b.width),f=f||(null==b?void 0:b.height);var k=Object(l.a)().isDarkMode,S=y(Object(r.useState)(!0),2),N=S[0],x=S[1];var A=k&&!n&&g?t:k?n:t;if(!A)return null;var P=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:c,height:f},b);return P.backgroundImage="url(".concat(A,")"),k&&g&&(P.opacity=g),E?o.a.createElement("div",m({className:i()("theme-image",_),style:P},O),E):(delete P.backgroundImage,w?o.a.createElement("div",{className:i()(u,v({},d,!N))},o.a.createElement("img",m({src:A,alt:a,className:i()("theme-image",_,v({},s,!N)),style:P,onLoad:function(){x(!1)}},O))):o.a.createElement("img",m({src:A,alt:a,className:i()("theme-image",_),style:P},O)))};g.displayName="ThemeImage";t.a=Object(c.b)(g)},384:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var r=n(26),o="RC_TABLE_KEY";function a(e){return null==e?[]:Array.isArray(e)?e:[e]}function i(e,t){if(!t&&"number"!=typeof t)return e;for(var n=a(t),r=e,o=0;o<n.length;o+=1){if(!r)return null;r=r[n[o]]}return r}function c(e){var t=[],n={};return e.forEach((function(e){for(var r=e||{},i=r.key,c=r.dataIndex,l=i||a(c).join("-")||o;n[l];)l="".concat(l,"_next");n[l]=!0,t.push(l)})),t}function l(){var e={};function t(e,n){n&&Object.keys(n).forEach((function(o){var a=n[o];a&&"object"===Object(r.a)(a)?(e[o]=e[o]||{},t(e[o],a)):e[o]=a}))}for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.forEach((function(n){t(e,n)})),e}function u(e){return null!=e}},3871:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(3657);function o(e){return!!e&&"object"==typeof e&&"function"==typeof e.then}function a(){return!!r.a&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}},3872:function(e,t,n){"use strict";n.d(t,"useDrag",(function(){return l}));var r=n(3692),o=n(0),a=n.n(o),i=n(3950);n(3739),n(3740);function c(e,t={},n,r){const o=a.a.useMemo((()=>new i.a(e)),[]);if(o.applyHandlers(e,r),o.applyConfig(t,n),a.a.useEffect(o.effect.bind(o)),a.a.useEffect((()=>o.clean.bind(o)),[]),void 0===t.target)return o.bind.bind(o)}function l(e,t){return Object(r.e)(r.a),c({drag:e},t||{},"drag")}},3875:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}n.d(t,"a",(function(){return r}))},3876:function(e,t,n){"use strict";var r=n(0),o=n(3671),a=n(3711);t.a=function(e){a.a&&(Object(o.a)(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var t=Object(r.useRef)(e);t.current=Object(r.useMemo)((function(){return e}),[e]);var n=Object(r.useRef)();return n.current||(n.current=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(this,e)}),n.current}},3879:function(e,t,n){"use strict";var r=n(0),o=n(3880),a=Object(o.a)(r.useEffect);t.a=a},3880:function(e,t,n){"use strict";var r=n(0),o=n(3805),a=n(3875),i=n(3737);t.a=function(e){return function(t,n,c){var l=Object(r.useRef)(!1),u=Object(r.useRef)([]),s=Object(r.useRef)([]),d=Object(r.useRef)();e((function(){var e,r=(Array.isArray(c)?c:[c]).map((function(e){return Object(i.a)(e)}));if(!l.current)return l.current=!0,u.current=r,s.current=n,void(d.current=t());r.length===u.current.length&&Object(a.a)(u.current,r)&&Object(a.a)(s.current,n)||(null===(e=d.current)||void 0===e||e.call(d),u.current=r,s.current=n,d.current=t())})),Object(o.a)((function(){var e;null===(e=d.current)||void 0===e||e.call(d),l.current=!1}))}}},3948:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.staged=void 0;const o=r(n(0));function a(e){return"function"==typeof e?o.default.createElement(i,{stage:e}):e}function i(e){return a(e.stage())}t.staged=function(e){return function(t,n){return a(e(t,n))}}},3949:function(e,t){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,r=null;i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?f(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},i._resetCrossOriginUpdater=function(){n=null,r=null},i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,a=null,i=null;this.POLL_INTERVAL?a=n.setInterval(r,this.POLL_INTERVAL):(c(n,"resize",r,!0),c(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(i=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(a&&e.clearInterval(a),l(e,"resize",r,!0)),l(t,"scroll",r,!0),i&&i.disconnect()}));var u=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=u){var s=o(t);s&&this._monitorIntersections(s.ownerDocument)}}},i.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,a=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var a=o(n);if((n=a&&a.ownerDocument)==t)return!0}return!1}));if(!a){var i=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),i(),t!=r){var c=o(t);c&&this._unmonitorIntersections(c.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},i.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,i=s(o),c=this._rootContainsTarget(o),l=r.entry,u=e&&c&&this._computeTargetAndRootIntersection(o,i,t),d=null;this._rootContainsTarget(o)?n&&!this.root||(d=t):d={top:0,bottom:0,left:0,right:0,width:0,height:0};var f=r.entry=new a({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:i,rootBounds:d,intersectionRect:u});l?e&&c?this._hasCrossedThreshold(l,f)&&this._queuedEntries.push(f):l&&l.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(t,o,a){if("none"!=window.getComputedStyle(t).display){for(var i=o,c=m(t),l=!1;!l&&c;){var d=null,p=1==c.nodeType?window.getComputedStyle(c):{};if("none"==p.display)return null;if(c==this.root||9==c.nodeType)if(l=!0,c==this.root||c==e)n&&!this.root?!r||0==r.width&&0==r.height?(c=null,d=null,i=null):d=r:d=a;else{var h=m(c),v=h&&s(h),y=h&&this._computeTargetAndRootIntersection(h,v,a);v&&y?(c=h,d=f(v,y)):(c=null,i=null)}else{var b=c.ownerDocument;c!=b.body&&c!=b.documentElement&&"visible"!=p.overflow&&(d=s(c))}if(d&&(i=u(d,i)),!i)break;c=c&&m(c)}return i}},i.prototype._getRootRect=function(){var t;if(this.root&&!h(this.root))t=s(this.root);else{var n=h(this.root)?this.root:e,r=n.documentElement,o=n.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var a=this.thresholds[o];if(a==n||a==r||a<n!=a<r)return!0}},i.prototype._rootIsInDom=function(){return!this.root||p(e,this.root)},i.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return p(n,t)&&(!this.root||n==t.ownerDocument)},i.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},i.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=a}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=d(e.rootBounds),this.boundingClientRect=d(e.boundingClientRect),this.intersectionRect=d(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n,r,o,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType&&9!=a.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function c(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function l(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),a=Math.min(e.right,t.right),i=a-o,c=r-n;return i>=0&&c>=0&&{top:n,bottom:r,left:o,right:a,width:i,height:c}||null}function s(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function f(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function p(e,t){for(var n=t;n;){if(n==e)return!0;n=m(n)}return!1}function m(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function h(e){return e&&9===e.nodeType}}()},3950:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return h}));var r=n(3642);function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const a={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(r.c.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},i=["target","eventOptions","window","enabled","transform"];function c(e={},t){const n={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":n[r]=o.call(n,e[r],r,e);break;case"object":n[r]=c(e[r],o);break;case"boolean":o&&(n[r]=e[r])}return n}class l{constructor(e,t){Object(r.e)(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,o,a){const i=this._listeners,c=Object(r.q)(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Object(r.d)(Object(r.d)({},l),a);e.addEventListener(c,o,u);const s=()=>{e.removeEventListener(c,o,u),i.delete(s)};return i.add(s),s}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class u{constructor(){Object(r.e)(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class s{constructor(e){Object(r.e)(this,"gestures",new Set),Object(r.e)(this,"_targetEventStore",new l(this)),Object(r.e)(this,"gestureEventStores",{}),Object(r.e)(this,"gestureTimeoutStores",{}),Object(r.e)(this,"handlers",{}),Object(r.e)(this,"config",{}),Object(r.e)(this,"pointerIds",new Set),Object(r.e)(this,"touchIds",new Set),Object(r.e)(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&d(e,"drag");t.wheel&&d(e,"wheel");t.scroll&&d(e,"scroll");t.move&&d(e,"move");t.pinch&&d(e,"pinch");t.hover&&d(e,"hover")}(this,e)}setEventIds(e){return Object(r.l)(e)?(this.touchIds=new Set(Object(r.f)(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,n={}){const l=e,{target:u,eventOptions:s,window:d,enabled:f,transform:p}=l,m=o(l,i);if(n.shared=c({target:u,eventOptions:s,window:d,enabled:f,transform:p},a),t){const e=r.a.get(t);n[t]=c(Object(r.d)({shared:n.shared},m),e)}else for(const e in m){const t=r.a.get(e);t&&(n[e]=c(Object(r.d)({shared:n.shared},m[e]),t))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let o;if(!t.target||(o=t.target(),o)){if(t.enabled){for(const t of this.gestures){const a=this.config[t],i=f(n,a.eventOptions,!!o);if(a.enabled){new(r.b.get(t))(this,e,t).bind(i)}}const a=f(n,t.eventOptions,!!o);for(const t in this.nativeHandlers)a(t,"",(n=>this.nativeHandlers[t](Object(r.d)(Object(r.d)({},this.state.shared),{},{event:n,args:e}))),void 0,!0)}for(const e in n)n[e]=Object(r.g)(...n[e]);if(!o)return n;for(const e in n){const{device:t,capture:a,passive:i}=Object(r.n)(e);this._targetEventStore.add(o,t,"",n[e],{capture:a,passive:i})}}}}function d(e,t){e.gestures.add(t),e.gestureEventStores[t]=new l(e,t),e.gestureTimeoutStores[t]=new u}const f=(e,t,n)=>(o,a,i,c={},l=!1)=>{var u,s;const d=null!==(u=c.capture)&&void 0!==u?u:t.capture,f=null!==(s=c.passive)&&void 0!==s?s:t.passive;let p=l?o:Object(r.h)(o,a,d);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)},p=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function m(e,t,n,o,a,i){if(!e.has(n))return;if(!r.b.has(o))return void 0;const c=n+"Start",l=n+"End";a[o]=e=>{let r;return e.first&&c in t&&t[c](e),n in t&&(r=t[n](e)),e.last&&l in t&&t[l](e),r},i[o]=i[o]||{}}function h(e,t){const[n,r,o]=function(e){const t={},n={},r=new Set;for(let o in e)p.test(o)?(r.add(RegExp.lastMatch),n[o]=e[o]):t[o]=e[o];return[n,t,r]}(e),a={};return m(o,n,"onDrag","drag",a,t),m(o,n,"onWheel","wheel",a,t),m(o,n,"onScroll","scroll",a,t),m(o,n,"onPinch","pinch",a,t),m(o,n,"onMove","move",a,t),m(o,n,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:r}}},3951:function(e,t,n){"use strict";e.exports=n(3952)},3952:function(e,t,n){"use strict";var r=n(0);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,c=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var s="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return c((function(){o.value=n,o.getSnapshot=t,u(o)&&s({inst:o})}),[e,n,t]),i((function(){return u(o)&&s({inst:o}),e((function(){u(o)&&s({inst:o})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:s},3971:function(e,t,n){"use strict";var r=n(1416);t.a=function(){return Object(r.getInterest)()}},3975:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3752),i=n(5),c=n.n(i),l="index-module_larkConfirm_Hedya",u="index-module_dark_Bco8K",s="index-module_title_XgoMG",d="index-module_content_3IPt2",f="index-module_button_DDdVF",p="index-module_cancelBtn_InN4Q",m="index-module_confirmBtn_O-BLZ",h="index-module_mobileModalContainer_XqHUd";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={show:function(e){var t,n="dark"===(null===(t=window.yuqueThemeManager)||void 0===t?void 0:t.current),r=e.title,i=e.message,v=e.confirmText,b=e.cancelText,g=e.contentRender,_=e.noCancel,E=void 0!==_&&_,w=e.closeOnMaskClick,O=void 0===w||w,k=e.closeOnConfirm,S=void 0===k||k,N=e.onConfirm,x=e.onCancel,A=e.onClose;return a.c.show({bodyStyle:{borderRadius:"12px",padding:0},bodyClassName:c()(h,y({},u,n)),content:o.a.createElement("div",{className:c()(l,y({},u,n))},o.a.createElement("p",{className:s},r),g?g.render():o.a.createElement("p",{className:d},i),o.a.createElement("div",{className:f},!E&&o.a.createElement("div",{className:p,onClick:function(){a.c.clear(),null==x||x()}},b),o.a.createElement("div",{className:m,onClick:function(){null==N||N(),S&&a.c.clear()}},v))),closeOnMaskClick:O,onClose:A})},clear:function(){return a.c.clear()}};t.a=b},3976:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(133),o="new_session",a="register",i="register/source",c=["attachments","dashboard","feedbacks","assets","office","video","oauth2","notifications"];function l(){var e=new URLSearchParams(window.location.search),t=e.get("source");if(t)return t;var n=e.get("goto");if(null!=n&&n.length){var o=null==n?void 0:n.match(/(^|&|\?)source=([^&]*)(&|$)/);if(null!=o&&o[2])return null==o?void 0:o[2]}var a=r.a.get(i);if(a)return a;var c,l=(window.Tracert||{})._refSpm,u=(c=l)&&c.split(".")[1];return u||null}function u(e){var t,n=e||(null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content"));n&&([o,a].includes(n)||r.a.set(i,n))}function s(e){"complete"===document.readyState?u(e):window.addEventListener("load",(function(){u(e)}))}function d(){var e,t=l();if(t)return s(t);if(null===(e=window.appData)||void 0===e||null===(e=e.organization)||void 0===e?void 0:e.id)return s("org");var n=new URLSearchParams(window.location.search).get("goto");if(n){n.startsWith("/")&&(n=window.location.origin+n);var r=new URL(n).pathname;if(r){var o=r.split("/");if(o.length>1&&""===o[0]&&o.shift(),null==o||!o.length)return;if(["g","r"].includes(o[0]))return;if(c.includes(o[0]))return s(o[0]);if(2===o.length||3===o.length)return s("doc_read")}}}},3978:function(e,t,n){var r=n(389),o=n(819),a=n(390),i=n(3989),c=n(3990),l=n(388),u=n(141);e.exports=function(e,t,n){if((e=u(e))&&(n||void 0===t))return o(e);if(!e||!(t=r(t)))return e;var s=l(e),d=l(t),f=c(s,d),p=i(s,d)+1;return a(s,f,p).join("")}},3979:function(e,t,n){"use strict";var r=n(3786),o=Object.prototype.hasOwnProperty,a=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),c=function(e,t){for(var n=t&&t.plainObjects?{__proto__:null}:{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},l=1024;e.exports={arrayToObject:c,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],c=Object.keys(i),l=0;l<c.length;++l){var u=c[l],s=i[u];"object"==typeof s&&null!==s&&-1===n.indexOf(s)&&(t.push({obj:i,prop:u}),n.push(s))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(a(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,o,a){if(0===e.length)return e;var c=e;if("symbol"==typeof e?c=Symbol.prototype.toString.call(e):"string"!=typeof e&&(c=String(e)),"iso-8859-1"===n)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",s=0;s<c.length;s+=l){for(var d=c.length>=l?c.slice(s,s+l):c,f=[],p=0;p<d.length;++p){var m=d.charCodeAt(p);45===m||46===m||95===m||126===m||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||a===r.RFC1738&&(40===m||41===m)?f[f.length]=d.charAt(p):m<128?f[f.length]=i[m]:m<2048?f[f.length]=i[192|m>>6]+i[128|63&m]:m<55296||m>=57344?f[f.length]=i[224|m>>12]+i[128|m>>6&63]+i[128|63&m]:(p+=1,m=65536+((1023&m)<<10|1023&d.charCodeAt(p)),f[f.length]=i[240|m>>18]+i[128|m>>12&63]+i[128|m>>6&63]+i[128|63&m])}u+=f.join("")}return u},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n&&"function"!=typeof n){if(a(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return a(t)&&!a(n)&&(i=c(t,r)),a(t)&&a(n)?(n.forEach((function(n,a){if(o.call(t,a)){var i=t[a];i&&"object"==typeof i&&n&&"object"==typeof n?t[a]=e(i,n,r):t.push(n)}else t[a]=n})),t):Object.keys(n).reduce((function(t,a){var i=n[a];return o.call(t,a)?t[a]=e(t[a],i,r):t[a]=i,t}),i)}}},3980:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var i=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__=t},(t=[{key:"_stringify",value:function(e){return null==e||"number"==typeof e&&isNaN(e)?e="":"string"!=typeof e&&(e=String(e)),e}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();t.BaseValidatorClass=i},3982:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"bookPrivilegeEditable",(function(){return m})),n.d(t,"getPermissionName",(function(){return h})),n.d(t,"getOwnerTypeName",(function(){return v})),n.d(t,"permissionCompare",(function(){return p})),n.d(t,"MemberGroup",(function(){return b})),n.d(t,"getOwnerModel",(function(){return y}));var r=n(492),o=n(82),a=n(97),i=n(149);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function u(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function d(e){return r.ALL_PERMISSIONS.includes(e)}function f(e){return e===r.ROLE.noPermission?0-e:e}var p={gte:function(e,t){return!(!d(e)||!d(t))&&f(e)>=f(t)},gt:function(e,t){return!(!d(e)||!d(t))&&f(e)>f(t)},lt:function(e,t){return!(!d(e)||!d(t))&&f(e)<f(t)},lte:function(e,t){return!(!d(e)||!d(t))&&f(e)<=f(t)},eq:function(e,t){return!(!d(e)||!d(t))&&f(e)===f(t)},max:function(e,t){var n=[d(e),d(t)];if(n.every((function(e){return!!e})))return f(e)>f(t)?e:t;var r=n.indexOf(!0);return r<0?null:r>0?t:e}};function m(e,t,n){if(!e||!t)return null;var o=r.ALL_PERMISSIONS;if(null!=n&&(o=o.filter((function(e){return p.lte(e,n)}))),e.owner_type===r.OWNER_TYPE.User)return o=o.filter((function(e){return e!==r.ROLE.noPermission})),e.owner_id===t.user_id?{edit:!1,delete:!1}:{edit:!0,delete:!0,permissions:o};var a=i.PUBLIC_PRIVACY.includes(t.public),c=t.public===i.PUBLIC.public;return e.owner_type===r.OWNER_TYPE.GroupManager||e.owner_type===r.OWNER_TYPE.OrganizationOwner?{edit:!1,delete:!1}:e.owner_type===r.OWNER_TYPE.GroupMember?{edit:!0,delete:!1,permissions:o.filter((function(e){return a?e!==r.ROLE.noPermission:void 0!==e})),availableTargetPermission:a&&e.role===r.ROLE.noPermission?r.ROLE.readonly:e.role}:e.owner_type===r.OWNER_TYPE.OrganizationMember?{edit:a,delete:!1,permissions:o.filter((function(e){return a?e!==r.ROLE.noPermission:void 0!==e})),availableTargetPermission:a&&e.role===r.ROLE.noPermission?r.ROLE.readonly:a?e.role:r.ROLE.noPermission}:e.owner_type===r.OWNER_TYPE.GroupReadonlyMember?{edit:!a,delete:!1,permissions:a?[r.ROLE.readonly]:[r.ROLE.readonly,r.ROLE.noPermission],availableTargetPermission:a&&e.role===r.ROLE.noPermission?r.ROLE.readonly:e.role}:e.owner_type===r.OWNER_TYPE.OrganizationOutsourcer?{edit:!c&&a,delete:!1,permissions:c?[r.ROLE.readonly]:[r.ROLE.readonly,r.ROLE.noPermission].filter((function(e){return a?void 0!==e:e!==r.ROLE.readonly})),availableTargetPermission:c?r.ROLE.readonly:r.ROLE.noPermission}:{edit:!0,delete:!0,permissions:o}}function h(t,n){var o=function(e){return e};return void 0!==e.window&&"function"==typeof e.window.__&&(o=e.window.__),n&&(o=function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.__).call.apply(e,[n].concat(r))}),u(u(u(u({},r.ROLE.readonly,o("可阅读")),r.ROLE.edit,o("可编辑")),r.ROLE.manage,o("可管理")),r.ROLE.noPermission,o("无权限"))[t]}function v(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.inOrganization,a=n.ctx,i=n.isYuque,c=void 0===i||i,l=function(e,t){return e};void 0!==e.window&&"function"==typeof e.window.__&&(l=e.window.__),a&&(l=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.__).call.apply(e,[a].concat(n))});var s=l(!c||o?"团队":"知识小组");return u(u(u(u(u(u(u(u({},r.OWNER_TYPE.User,l("用户")),r.OWNER_TYPE.GroupManager,l("{groupTypeName}管理员",{groupTypeName:s})),r.OWNER_TYPE.GroupMember,l("{groupTypeName}成员",{groupTypeName:s})),r.OWNER_TYPE.GroupReadonlyMember,l("{groupTypeName}只读成员",{groupTypeName:s})),r.OWNER_TYPE.OrganizationOwner,l("空间管理员")),r.OWNER_TYPE.OrganizationMember,l("空间成员")),r.OWNER_TYPE.OrganizationOutsourcer,l("空间外部联系人")),r.OWNER_TYPE.AntDingTalkGroup,l("钉钉群"))[t]}function y(e){switch(e){case r.OWNER_TYPE.User:case r.OWNER_TYPE.GroupManager:case r.OWNER_TYPE.GroupMember:case r.OWNER_TYPE.GroupReadonlyMember:return"User";case r.OWNER_TYPE.OrganizationOwner:case r.OWNER_TYPE.OrganizationMember:case r.OWNER_TYPE.OrganizationOutsourcer:return"Organization";default:throw new Error("invalid owner_type")}}var b=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"collaboration",void 0),!t)throw new Error("target collaboration not exist");this.collaboration=t},(t=[{key:"model",get:function(){return Object.values(r.GROUP_ROLE_OWNER_TYPE_MAP).includes(this.collaboration.owner_type)?"GroupUser":"OrganizationUser"}},{key:"query",get:function(){return"GroupUser"===this.model?{group_id:this.collaboration.owner_id,status:o.STATUS.joined,role:r.LEGACY_ROLE_MAP[this.collaboration.owner_type]}:{organization_id:this.collaboration.owner_id,status:a.STATUS.joined,role:r.LEGACY_ROLE_MAP[this.collaboration.owner_type]}}},{key:"owner_type",get:function(){return this.collaboration.owner_type}},{key:"owner_id",get:function(){return this.collaboration.owner_id}},{key:"permission",get:function(){return this.collaboration.role}},{key:"target_type",get:function(){return this.collaboration.target_type}},{key:"target_id",get:function(){return this.collaboration.target_id}},{key:"legacyRole",get:function(){return r.LEGACY_ROLE_MAP[this.collaboration.owner_type]}}])&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()}.call(this,n(92))},3989:function(e,t,n){var r=n(806);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},3990:function(e,t,n){var r=n(806);e.exports=function(e,t){for(var n=-1,o=e.length;++n<o&&r(t,e[n],0)>-1;);return n}},3991:function(e,t,n){var r=n(3992),o=n(261);e.exports=function(e){return e&&e.length?r(e,o):0}},3992:function(e,t){e.exports=function(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}},3993:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(40),n(9)),a=n(0),i=n.n(a),c=n(5),l=n.n(c),u=n(324),s=n.n(u),d=n(1438),f=n(157),p=n(382),m=n(74),h=n(47),v="RegisterTrialModal-module_modal_hmMaz",y="RegisterTrialModal-module_close_7FK9d",b="RegisterTrialModal-module_wrapper_v2OGS",g="RegisterTrialModal-module_trialSuccess_lO7Q5",_="RegisterTrialModal-module_mainContent_e8QXE",E="RegisterTrialModal-module_leftSide_dT5e9",w="RegisterTrialModal-module_rightSide_jXUrT",O="RegisterTrialModal-module_subTitle_O7pYK",k="RegisterTrialModal-module_list_LQq-K",S="RegisterTrialModal-module_item_vbrwX",N="RegisterTrialModal-module_icon_RVUe4",x="RegisterTrialModal-module_arrowImg_C5i8j",A="RegisterTrialModal-module_showTrialExpire_ZqY1v",P="RegisterTrialModal-module_button_UWEco",C="RegisterTrialModal-module_tip_+NtIs",j="RegisterTrialModal-module_ready_jlXB3",T="RegisterTrialModal-module_img_bAwkI",I="RegisterTrialModal-module_title_CFs+R",M="RegisterTrialModal-module_highLight_AL6MB",L="RegisterTrialModal-module_hour_2neFb",R="RegisterTrialModal-module_successTitle_nMTcC",D="RegisterTrialModal-module_yuan_4C+Ad",U="RegisterTrialModal-module_price_f4gnN",B="RegisterTrialModal-module_time_QNDxs",z="RegisterTrialModal-module_bold_rwjpD",F="RegisterTrialModal-module_bg_xLr+V";function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.visible,n=e.onClose,c=e.onSuccess,u=e.showTrialExpire,V=e.expiredAt,$=Object(a.useRef)(),q=Y(Object(a.useState)(!1),2),W=q[0],H=q[1],K=Y(Object(a.useState)(!1),2),Z=K[0],Q=K[1],X=Y(Object(a.useState)(!1),2),J=X[0],ee=X[1];Object(a.useEffect)((function(){return s()().isAfter(V)&&($.current=setTimeout((function(){ee(!0)}),650)),function(){clearTimeout(null==$?void 0:$.current)}}),[V]),Object(a.useEffect)((function(){u&&t&&Object(f.spmClick)("c126274.d262021",{pay_source:m.LIMIT_SCENE.register_trial_expired_modal})}),[u,t]);var te=s()().isAfter(V),ne=__("一键领取 7 天试用"),re=__("专业会员#trial");u?te?ne=__("立刻升级"):(ne=__("立刻升级"),re=__("试用专业会员权益")):W&&(Z?(ne=__("权益获取中..."),re=__("专业会员领取中")):(ne=__("开启知识管理之旅"),re=__("试用专业会员权益")));var oe=W&&!Z,ae=!(W&&!Z||u&&!te);return i.a.createElement(r.a,{className:v,maskClosable:!1,visible:t,width:480,footer:null,onCancel:n,closable:!1},i.a.createElement("div",{className:l()(b,G(G(G({},g,W),A,u),j,J))},i.a.createElement("a",{className:y,onClick:n},i.a.createElement(d.default,null)),i.a.createElement(p.a,{className:T,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*2wZjTKpA734AAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*a_77Q5IGMCoAAAAAAAAAAAAADvuFAQ/original"}),function(){if(u){if(te)return i.a.createElement("h1",{className:I},__("你的试用已经到期，升级后继续享受权益"));var e=s()(V).diff(s()(),"hours")||1;return i.a.createElement("h1",{className:I},__("专业会员试用将在{hour}小时后到期",{hour:i.a.createElement("span",{className:L},e)}))}return oe?i.a.createElement("h1",{className:R},i.a.createElement("img",{className:T,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*sEkgQb2wqa8AAAAAAAAAAAAADvuFAQ/original"}),__("恭喜，你已经领取成功！")):i.a.createElement("h1",{className:I},__("领取 {day} 专业会员，深度体验语雀特色功能",{day:i.a.createElement("span",{className:M},__("7 天"))}))}(),i.a.createElement("div",{className:_},i.a.createElement("div",{className:E},i.a.createElement("p",{className:O},__("普通用户")),i.a.createElement("ul",{className:k},i.a.createElement("li",{className:S},__("10 个知识库")),i.a.createElement("li",{className:S},__("邀请 5 个协作者")),i.a.createElement("li",{className:S},__("5 MB附件上传"))),J&&i.a.createElement(o.a,{className:P,onClick:n},__("放弃升级")),u&&i.a.createElement("div",{className:C},__("当前"))),i.a.createElement("div",{className:w},i.a.createElement("p",{className:O},i.a.createElement("span",null,re),!!ae&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:D},"¥"),i.a.createElement("span",{className:U},"99"),i.a.createElement("span",{className:B},"/年"))),i.a.createElement("ul",{className:k},i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),i.a.createElement("span",{className:z},__("无限")),__("文稿和知识库#trial")),i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),__("邀请")," ",i.a.createElement("span",{className:z}," ",__("50 个")),__("好友协作")),i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),i.a.createElement("span",{className:z},"500MB "),__("附件上传#trial")),i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),__("插入并播放#trial"),i.a.createElement("span",{className:z},__("视频"))),i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),__("文档对#trial"),i.a.createElement("span",{className:z},__("不限期公开分享"))),i.a.createElement("li",{className:S},i.a.createElement("span",{className:N}),i.a.createElement("span",{className:z},__("公开")),__("我的花园"))),ne&&i.a.createElement(o.a,{className:P,type:"primary",onClick:function(){if(u){var e,t;null===(e=window.__member_message_ref)||void 0===e||null===(t=e.current)||void 0===t||t.showMemberIntro(m.LIMIT_SCENE.register_trial_expired_modal)}else{if(!W)return H(!0),Q(!0),void($.current=setTimeout((function(){Q(!1),h.a.interest.trial().then((function(e){null==c||c(e)}))}),2900));oe&&n()}}},ne),i.a.createElement(p.a,{className:F,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*2RlmSawSoHwAAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*1jffRYP2mh8AAAAAAAAAAAAADvuFAQ/original"})),!u&&i.a.createElement(p.a,{className:x,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*8UShSa6gXEMAAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*wFoDRqpsXBAAAAAAAAAAAAAADvuFAQ/original"}))))}},3995:function(e,t,n){"use strict";n(1219);var r=n(959),o=(n(40),n(9)),a=n(0),i=n.n(a),c=n(6),l=n.n(c),u=n(14),s=n.n(u),d=n(473),f=n(5),p=n.n(f),m=n(231),h=n(20),v=n(87),y=n(63),b=n(148),g=n(308),_="OrgCertification-module_wrap_mcHiA",E="OrgCertification-module_btn_veUok",w="OrgCertification-module_icon_mgkVd",O="OrgCertification-module_text_JDkK6",k="OrgCertification-module_main_umJwo",S="OrgCertification-module_disabled_DMrOf";function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e){var t,n,c,l=e.showTip,u=e.className,d=e.organization,f=new URLSearchParams(window.location.search).get("showTip"),g=v.a.CERTIFICATION_TYPE_MAP,x=v.a.isExpired(d),A=N(Object(a.useState)(!1),2),P=A[0],C=A[1],j=N(Object(a.useState)(null),2),T=j[0],I=j[1],M=null==T?void 0:T.status;Object(a.useEffect)((function(){return f&&(clearTimeout(c),c=setTimeout((function(){C(!0),c=setTimeout((function(){return C(!1)}),5e3)}),1e3)),b.webProxy.organizations.certification({id:null==d?void 0:d.id}).then((function(e){return I(e)})),function(){return clearTimeout(c)}}),[]),Object(a.useEffect)((function(){l&&(C(!0),clearTimeout(c),c=setTimeout((function(){return C(!1)}),5e3))}),[l]);var L=function(){clearTimeout(c),c=C(!0)},R=function(){clearTimeout(c),c=setTimeout((function(){return C(!1)}),200)};switch(M){case m.STATUS.init:case m.STATUS.rejected:n=i.a.createElement("div",{className:k},i.a.createElement("div",{onMouseEnter:L,onMouseLeave:R},i.a.createElement(r.a,{placement:"topLeft",overlayInnerStyle:{maxWidth:"275px"},visible:P,arrowPointAtCenter:!0,content:i.a.createElement(i.a.Fragment,null,__("请上传公益材料（含营业执照、申请表）。"),i.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/gf443f",target:"_blank"},__("查看帮助")))},i.a.createElement(y.b,{name:"welfare-normal",width:16,height:16,className:p()(w,S)}),i.a.createElement(o.a,{className:E,type:"link",href:"/r/organizations/".concat(null==d?void 0:d.login,"/certification?goto=").concat(encodeURIComponent("".concat(window.location.origin).concat(window.location.pathname)))},__("上传公益资料")))));break;case m.STATUS.applying:n=i.a.createElement("div",{className:k,onMouseEnter:L,onMouseLeave:R},i.a.createElement(r.a,{placement:"topLeft",arrowPointAtCenter:!0,visible:P,content:i.a.createElement(i.a.Fragment,null,__("审核结果将在 7 个工作日内通过邮件和站内信通知。"),i.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/gf443f",target:"_blank"},__("查看帮助")))},i.a.createElement(y.b,{name:"welfare-normal",width:16,height:16,className:p()(w,S)}),i.a.createElement("span",{className:O},__("公益资料待审核"))));break;case m.STATUS.accepted:n=x?null:i.a.createElement(r.a,{placement:"topLeft",overlayClassName:u,arrowPointAtCenter:!0,content:i.a.createElement(i.a.Fragment,null,__("您已开通公益计划-{name}，有效期至 {date}。",{name:null===(t=g[null==d?void 0:d.certification_type])||void 0===t?void 0:t.name,date:s()(null==d?void 0:d.expired_at).format("YYYY-MM-DD")}),i.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/gf443f",target:"_blank"},__("查看帮助")))},i.a.createElement(y.b,{name:"welfare-normal",className:w,width:16,height:16}))}return d.certification_type===h.CERTIFICATION_TYPE.vip?i.a.createElement(y.b,{name:"welfare-normal",className:w,style:{marginLeft:"6px"},width:16,height:16}):(null==T?void 0:T.status)===m.STATUS.rejected?null:i.a.createElement("div",{className:p()(_,u)},n)}A.propTypes={showTip:l.a.bool,className:l.a.string,organization:l.a.any};t.a=Object(g.b)(Object(d.d)((function(e){return{organization:e.organization}}))(A))},3997:function(e,t,n){var r=n(3998)("floor");e.exports=r},3998:function(e,t,n){var r=n(83),o=n(596),a=n(504),i=n(141),c=r.isFinite,l=Math.min;e.exports=function(e){var t=Math[e];return function(e,n){if(e=a(e),(n=null==n?0:l(o(n),292))&&c(e)){var r=(i(e)+"e").split("e"),u=t(r[0]+"e"+(+r[1]+n));return+((r=(i(u)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}},4003:function(e,t,n){"use strict";n(3515);var r=n(1521);n(3513);t.a=r.a},4004:function(e,t,n){var r=n(243),o=n(189),a=n(164);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var l=r(n,3);t=a(t),n=function(e){return l(c[e],e,c)}}var u=e(t,n,i);return u>-1?c[l?t[u]:u]:void 0}}},4006:function(e,t,n){"use strict";var r=n(64),o=n.n(r),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,n){return t=t||"",n=n||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=a},4007:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m}));var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(382),l=n(821);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function s(e){var t=window.appData.zone,n=window.__CUSTOM_LOGO__||(e?l.DASHBOARD_LOGOS:l.LOGOS),r=n.public;return window.appData.isYuque||(r=n.internal[0],t&&(r=n.internal[t.id]||r)),r}var d=function(e){var t=e.height,n=void 0===t?32:t,r=e.className,a=void 0===r?"":r,i=e.useNewLogo,l=s(void 0!==i&&i);return o.a.createElement(c.a,{src:l.full,darkSrc:l.darkFull,style:{height:n},alt:l.alt,className:a})};d.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool};var f=function(e){var t=e.height,n=void 0===t?32:t,r=e.className,a=void 0===r?"":r,i=e.useNewLogo,c=s(void 0!==i&&i);return o.a.createElement("img",{src:c.icon,alt:c.alt,width:n,height:n,className:a})};f.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool};var p=function(e){var t=e.height,n=void 0===t?32:t,r=e.className,a=void 0===r?"":r,i=e.useNewLogo,c=void 0!==i&&i,l=e.organization,u=void 0===l?window.appData.organization:l,d=u?u.logo:s(c).icon,f=u?"语雀空间":s(c).alt;return o.a.createElement("img",{src:d,alt:f,width:n,height:n,className:a})};p.propTypes={height:i.a.number,className:i.a.string,useNewLogo:i.a.bool,organization:i.a.object};var m=function(e){var t=s(e);return o.a.createElement(c.a,u({},e,{src:t.text,darkSrc:t.darkText,style:{marginLeft:"2px",height:32},alt:t.alt}))}},4010:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=".ne-editor-wrap",o=".lake-editor-scroll-container",a=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",i=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",c={storePosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem(n,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var n=this._getStorageKey(e);sessionStorage.setItem("".concat(n,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(n,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),n=sessionStorage.getItem(t);return n?parseInt(n,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),n=sessionStorage.getItem("".concat(t,"-x")),r=sessionStorage.getItem("".concat(t,"-y"));return n&&r?{x:parseFloat(n),y:parseFloat(r)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},clearHistoryStorage:function(){sessionStorage&&Object.keys(sessionStorage).forEach((function(e){e.startsWith("content-position-offset-")&&sessionStorage.removeItem(e)}))},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},l={saveReadPosition:function(e){var t,n=(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)||document.body.scrollTop;n&&n>=32?c.storePosition(e,n):c.clearStorage(e)},letReaderFocusToMemorizedPosition:function(e){var t=c.getStoredPosition(e);t<=0||window.scrollTo(0,t)},letEditorFocusToReadPosition:function(e){var t=c.getStoredPosition(e);if(!(t<=0)){var n=this.getScrollContainer();n&&(n.scrollTop=t)}},getScrollContainer:function(){return document.querySelector(r)||document.querySelector(o)},saveEditPosition:function(e){if("lakesheet"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake")){var t=this.getScrollContainer();if(t){var n=t.scrollTop;n>=32&&c.storePosition(e,n)}}else l.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(a),n=document.querySelector(i);if(t&&n){var r={x:t.getAttribute("data-scroll"),y:n.getAttribute("data-scroll")};c.storeSheetPosition(e,r)}},getSheetStoredPosition:function(e){var t=c.getSheetStoredPosition(e);return t?(c.clearSheetStorage(e),t):null},clearPosition:function(e){e?c.clearStorage(e):c.clearHistoryStorage()}};t.c=l},4016:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var i=n(1030),c=n(425),l=n(1493),u=n(3980).BaseValidatorClass,s=n(4050).MobileValidatorClass,d=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,f=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"httpURL",value:function(e){e=this._stringify(e);try{var t=new URL(e);if("https:"!==t.protocol&&"http:"!==t.protocol)throw new Error("protocol error")}catch(e){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(e){if(!(e=this._stringify(e))||!i.isAlphanumeric(e))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("必须都是数字字符")}},{key:"decimal",value:function(e){if(!(e=this._stringify(e))||!i.isDecimal(e))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(e,t){if("string"!=typeof e)return this.__("必须是字符串");if(!i.isNumeric(e))return this.__("必须都是数字字符");var n=t&&t.min||4;return e.length<n?this.__("至少 {s} 个数字",{s:n}):void 0}},{key:"IP",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("public 参数只允许是 0、1 或者 2");e=parseInt(e)}var t=c.book.PUBLIC;if(e!==t.public&&e!==t.private&&e!==t.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(e){if(e){var t=["Book","Design"];return t.includes(e)?void 0:this.__("type 参数只允许为 {s}",{s:t.join(", ")})}}},{key:"searchPage250",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("只允许是正整数并且要小于等于 250");e=parseInt(e)}if(e<1||e>250||isNaN(e))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(e){return e=this._stringify(e),i.isEmail(e)}},{key:"isUser",value:function(e){return e=this._stringify(e),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(e)}},{key:"isoDate",value:function(e){if(!e||!d.test(e))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(e){e=this._stringify(e);var t=this.__("请输入正确的 URL 地址");if(!e)return t;if(!/^\//.test(e)){if(/^\s*javascript:\/\//i.test(e))return t;try{new URL(e)}catch(e){return t}}}},{key:"stringArr",value:function(e,t){if(e&&t.values&&(e=e.split(",").map((function(e){return e.trim()})),e.some((function(e){return!t.values.includes(e)}))))return this.__("必须是 {type} 其中的值",{type:t.values.join("、")})}}],t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),p=l.apply(void 0,[u].concat([s,f]));t.Validator=p,"undefined"!=typeof window&&"function"==typeof window.__&&(t.validator=new p(window.__))},4026:function(e,t,n){"use strict";var r=n(4027),o=n(3653),a=n(3801),i=n(3730),c=n(3802),l=Object.prototype.toString,u=0,s=-1,d=0,f=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:s,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(i[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var m;if(m="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,m))!==u)throw new Error(i[n]);this._dict_set=!0}}function m(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||i[n.err];return n.result}p.prototype.push=function(e,t){var n,i,c=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?c.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new o.Buf8(s),c.next_out=0,c.avail_out=s),1!==(n=r.deflate(c,i))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(a.buf2binstring(o.shrinkBuf(c.output,c.next_out))):this.onData(o.shrinkBuf(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&1!==n);return 4===i?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==i||(this.onEnd(u),c.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=m,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,m(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,m(e,t)}},4027:function(e,t,n){"use strict";var r,o=n(3653),a=n(4028),i=n(3799),c=n(3800),l=n(3730),u=0,s=4,d=0,f=-2,p=-1,m=4,h=2,v=8,y=9,b=286,g=30,_=19,E=2*b+1,w=15,O=3,k=258,S=k+O+1,N=42,x=103,A=113,P=666,C=1,j=2,T=3,I=4;function M(e,t){return e.msg=l[t],t}function L(e){return(e<<1)-(e>4?9:0)}function R(e){for(var t=e.length;--t>=0;)e[t]=0}function D(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function U(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function B(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var n,r,o=e.max_chain_length,a=e.strstart,i=e.prev_length,c=e.nice_match,l=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,u=e.window,s=e.w_mask,d=e.prev,f=e.strstart+k,p=u[a+i-1],m=u[a+i];e.prev_length>=e.good_match&&(o>>=2),c>e.lookahead&&(c=e.lookahead);do{if(u[(n=t)+i]===m&&u[n+i-1]===p&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<f);if(r=k-(f-a),a=f-k,r>i){if(e.match_start=t,i=r,r>=c)break;p=u[a+i-1],m=u[a+i]}}}while((t=d[t&s])>l&&0!=--o);return i<=e.lookahead?i:e.lookahead}function V(e){var t,n,r,a,l,u,s,d,f,p,m=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-S)){o.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--n);t=n=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--n);a+=m}if(0===e.strm.avail_in)break;if(u=e.strm,s=e.window,d=e.strstart+e.lookahead,f=a,p=void 0,(p=u.avail_in)>f&&(p=f),n=0===p?0:(u.avail_in-=p,o.arraySet(s,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=i(u.adler,s,p,d):2===u.state.wrap&&(u.adler=c(u.adler,s,p,d)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=O)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+O-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<O)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function G(e,t){for(var n,r;;){if(e.lookahead<S){if(V(e),e.lookahead<S&&t===u)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=O&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-S&&(e.match_length=F(e,n)),e.match_length>=O)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-O),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=O){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(U(e,!1),0===e.strm.avail_out))return C}return e.insert=e.strstart<O-1?e.strstart:O-1,t===s?(U(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?C:j}function Y(e,t){for(var n,r,o;;){if(e.lookahead<S){if(V(e),e.lookahead<S&&t===u)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=O&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=O-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-S&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===O&&e.strstart-e.match_start>4096)&&(e.match_length=O-1)),e.prev_length>=O&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-O,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-O),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=O-1,e.strstart++,r&&(U(e,!1),0===e.strm.avail_out))return C}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return C}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<O-1?e.strstart:O-1,t===s?(U(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?C:j}function $(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*E),this.dyn_dtree=new o.Buf16(2*(2*g+1)),this.bl_tree=new o.Buf16(2*(2*_+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(w+1),this.heap=new o.Buf16(2*b+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=h,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:A,e.adler=2===t.wrap?0:1,t.last_flush=u,a._tr_init(t),d):M(e,f)}function H(e){var t,n=W(e);return n===d&&((t=e.state).window_size=2*t.w_size,R(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=O-1,t.match_available=0,t.ins_h=0),n}function K(e,t,n,r,a,i){if(!e)return f;var c=1;if(t===p&&(t=6),r<0?(c=0,r=-r):r>15&&(c=2,r-=16),a<1||a>y||n!==v||r<8||r>15||t<0||t>9||i<0||i>m)return M(e,f);8===r&&(r=9);var l=new q;return e.state=l,l.strm=e,l.wrap=c,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+O-1)/O),l.window=new o.Buf8(2*l.w_size),l.head=new o.Buf16(l.hash_size),l.prev=new o.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new o.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=i,l.method=n,H(e)}r=[new $(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(V(e),0===e.lookahead&&t===u)return C;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,U(e,!1),0===e.strm.avail_out))return C;if(e.strstart-e.block_start>=e.w_size-S&&(U(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===s?(U(e,!0),0===e.strm.avail_out?T:I):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),C)})),new $(4,4,8,4,G),new $(4,5,16,8,G),new $(4,6,32,32,G),new $(4,4,16,16,Y),new $(8,16,32,32,Y),new $(8,16,128,128,Y),new $(8,32,128,256,Y),new $(32,128,258,1024,Y),new $(32,258,258,4096,Y)],t.deflateInit=function(e,t){return K(e,t,v,15,8,0)},t.deflateInit2=K,t.deflateReset=H,t.deflateResetKeep=W,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,d):f},t.deflate=function(e,t){var n,o,i,l;if(!e||!e.state||t>5||t<0)return e?M(e,f):f;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===P&&t!==s)return M(e,0===e.avail_out?-5:f);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===N)if(2===o.wrap)e.adler=0,B(o,31),B(o,139),B(o,8),o.gzhead?(B(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),B(o,255&o.gzhead.time),B(o,o.gzhead.time>>8&255),B(o,o.gzhead.time>>16&255),B(o,o.gzhead.time>>24&255),B(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),B(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(B(o,255&o.gzhead.extra.length),B(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=c(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(B(o,0),B(o,0),B(o,0),B(o,0),B(o,0),B(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),B(o,3),o.status=A);else{var p=v+(o.w_bits-8<<4)<<8;p|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(p|=32),p+=31-p%31,o.status=A,z(o,p),0!==o.strstart&&(z(o,e.adler>>>16),z(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(i=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),D(e),i=o.pending,o.pending!==o.pending_buf_size));)B(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),D(e),i=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,B(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),0===l&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),D(e),i=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,B(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>i&&(e.adler=c(e.adler,o.pending_buf,o.pending-i,i)),0===l&&(o.status=x)}else o.status=x;if(o.status===x&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&D(e),o.pending+2<=o.pending_buf_size&&(B(o,255&e.adler),B(o,e.adler>>8&255),e.adler=0,o.status=A)):o.status=A),0!==o.pending){if(D(e),0===e.avail_out)return o.last_flush=-1,d}else if(0===e.avail_in&&L(t)<=L(n)&&t!==s)return M(e,-5);if(o.status===P&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==u&&o.status!==P){var m=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(V(e),0===e.lookahead)){if(t===u)return C;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(U(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===s?(U(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?C:j}(o,t):3===o.strategy?function(e,t){for(var n,r,o,i,c=e.window;;){if(e.lookahead<=k){if(V(e),e.lookahead<=k&&t===u)return C;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=O&&e.strstart>0&&(r=c[o=e.strstart-1])===c[++o]&&r===c[++o]&&r===c[++o]){i=e.strstart+k;do{}while(r===c[++o]&&r===c[++o]&&r===c[++o]&&r===c[++o]&&r===c[++o]&&r===c[++o]&&r===c[++o]&&r===c[++o]&&o<i);e.match_length=k-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=O?(n=a._tr_tally(e,1,e.match_length-O),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(U(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===s?(U(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?C:j}(o,t):r[o.level].func(o,t);if(m!==T&&m!==I||(o.status=P),m===C||m===T)return 0===e.avail_out&&(o.last_flush=-1),d;if(m===j&&(1===t?a._tr_align(o):5!==t&&(a._tr_stored_block(o,0,0,!1),3===t&&(R(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),D(e),0===e.avail_out))return o.last_flush=-1,d}return t!==s?d:o.wrap<=0?1:(2===o.wrap?(B(o,255&e.adler),B(o,e.adler>>8&255),B(o,e.adler>>16&255),B(o,e.adler>>24&255),B(o,255&e.total_in),B(o,e.total_in>>8&255),B(o,e.total_in>>16&255),B(o,e.total_in>>24&255)):(z(o,e.adler>>>16),z(o,65535&e.adler)),D(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?d:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&69!==t&&73!==t&&91!==t&&t!==x&&t!==A&&t!==P?M(e,f):(e.state=null,t===A?M(e,-3):d):f},t.deflateSetDictionary=function(e,t){var n,r,a,c,l,u,s,p,m=t.length;if(!e||!e.state)return f;if(2===(c=(n=e.state).wrap)||1===c&&n.status!==N||n.lookahead)return f;for(1===c&&(e.adler=i(e.adler,t,m,0)),n.wrap=0,m>=n.w_size&&(0===c&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new o.Buf8(n.w_size),o.arraySet(p,t,m-n.w_size,n.w_size,0),t=p,m=n.w_size),l=e.avail_in,u=e.next_in,s=e.input,e.avail_in=m,e.next_in=0,e.input=t,V(n);n.lookahead>=O;){r=n.strstart,a=n.lookahead-(O-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+O-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=O-1,V(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=O-1,n.match_available=0,e.next_in=u,e.input=s,e.avail_in=l,n.wrap=c,d},t.deflateInfo="pako deflate (from Nodeca project)"},4028:function(e,t,n){"use strict";var r=n(3653),o=0,a=1;function i(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,l=29,u=256,s=u+1+l,d=30,f=19,p=2*s+1,m=15,h=16,v=7,y=256,b=16,g=17,_=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(s+2));i(S);var N=new Array(2*d);i(N);var x=new Array(512);i(x);var A=new Array(256);i(A);var P=new Array(l);i(P);var C,j,T,I=new Array(d);function M(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function R(e){return e<256?x[e]:x[256+(e>>>7)]}function D(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>h-n?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>h-e.bi_valid,e.bi_valid+=n-h):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function B(e,t,n){U(e,n[2*t],n[2*t+1])}function z(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function F(e,t,n){var r,o,a=new Array(m+1),i=0;for(r=1;r<=m;r++)a[r]=i=i+n[r-1]<<1;for(o=0;o<=t;o++){var c=e[2*o+1];0!==c&&(e[2*o]=z(a[c]++,c))}}function V(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){e.bi_valid>8?D(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,n,r){var o=2*t,a=2*n;return e[o]<e[a]||e[o]===e[a]&&r[t]<=r[n]}function $(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&Y(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Y(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function q(e,t,n){var r,o,a,i,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===r?B(e,o,t):(B(e,(a=A[o])+u+1,t),0!==(i=E[a])&&U(e,o-=P[a],i),B(e,a=R(--r),n),0!==(i=w[a])&&U(e,r-=I[a],i))}while(c<e.last_lit);B(e,y,t)}function W(e,t){var n,r,o,a=t.dyn_tree,i=t.stat_desc.static_tree,c=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,c&&(e.static_len-=i[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)$(e,a,n);o=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*o]=a[2*n]+a[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=o,e.heap[1]=o++,$(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,a,i,c,l=t.dyn_tree,u=t.max_code,s=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,v=t.stat_desc.max_length,y=0;for(a=0;a<=m;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)>v&&(a=v,y++),l[2*r+1]=a,r>u||(e.bl_count[a]++,i=0,r>=h&&(i=f[r-h]),c=l[2*r],e.opt_len+=c*(a+i),d&&(e.static_len+=c*(s[2*r+1]+i)));if(0!==y){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,y-=2}while(y>0);for(a=v;0!==a;a--)for(r=e.bl_count[a];0!==r;)(o=e.heap[--n])>u||(l[2*o+1]!==a&&(e.opt_len+=(a-l[2*o+1])*l[2*o],l[2*o+1]=a),r--)}}(e,t),F(a,u,e.bl_count)}function H(e,t,n){var r,o,a=-1,i=t[1],c=0,l=7,u=4;for(0===i&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=i,i=t[2*(r+1)+1],++c<l&&o===i||(c<u?e.bl_tree[2*o]+=c:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[2*b]++):c<=10?e.bl_tree[2*g]++:e.bl_tree[2*_]++,c=0,a=o,0===i?(l=138,u=3):o===i?(l=6,u=3):(l=7,u=4))}function K(e,t,n){var r,o,a=-1,i=t[1],c=0,l=7,u=4;for(0===i&&(l=138,u=3),r=0;r<=n;r++)if(o=i,i=t[2*(r+1)+1],!(++c<l&&o===i)){if(c<u)do{B(e,o,e.bl_tree)}while(0!=--c);else 0!==o?(o!==a&&(B(e,o,e.bl_tree),c--),B(e,b,e.bl_tree),U(e,c-3,2)):c<=10?(B(e,g,e.bl_tree),U(e,c-3,3)):(B(e,_,e.bl_tree),U(e,c-11,7));c=0,a=o,0===i?(l=138,u=3):o===i?(l=6,u=3):(l=7,u=4)}}i(I);var Z=!1;function Q(e,t,n,o){U(e,(c<<1)+(o?1:0),3),function(e,t,n,o){G(e),o&&(D(e,n),D(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){Z||(!function(){var e,t,n,r,o,a=new Array(m+1);for(n=0,r=0;r<l-1;r++)for(P[r]=n,e=0;e<1<<E[r];e++)A[n++]=r;for(A[n-1]=r,o=0,r=0;r<16;r++)for(I[r]=o,e=0;e<1<<w[r];e++)x[o++]=r;for(o>>=7;r<d;r++)for(I[r]=o<<7,e=0;e<1<<w[r]-7;e++)x[256+o++]=r;for(t=0;t<=m;t++)a[t]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,a[8]++;for(;e<=255;)S[2*e+1]=9,e++,a[9]++;for(;e<=279;)S[2*e+1]=7,e++,a[7]++;for(;e<=287;)S[2*e+1]=8,e++,a[8]++;for(F(S,s+1,a),e=0;e<d;e++)N[2*e+1]=5,N[2*e]=z(e,5);C=new M(S,E,u+1,s,m),j=new M(N,w,0,d,m),T=new M(new Array(0),O,0,f,v)}(),Z=!0),e.l_desc=new L(e.dyn_ltree,C),e.d_desc=new L(e.dyn_dtree,j),e.bl_desc=new L(e.bl_tree,T),e.bi_buf=0,e.bi_valid=0,V(e)},t._tr_stored_block=Q,t._tr_flush_block=function(e,t,n,r){var i,c,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return a;return o}(e)),W(e,e.l_desc),W(e,e.d_desc),l=function(e){var t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=f-1;t>=3&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=i&&(i=c)):i=c=n+5,n+4<=i&&-1!==t?Q(e,t,n,r):4===e.strategy||c===i?(U(e,2+(r?1:0),3),q(e,S,N)):(U(e,4+(r?1:0),3),function(e,t,n,r){var o;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),o=0;o<r;o++)U(e,e.bl_tree[2*k[o]+1],3);K(e,e.dyn_ltree,t-1),K(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),q(e,e.dyn_ltree,e.dyn_dtree)),V(e),r&&G(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+u+1)]++,e.dyn_dtree[2*R(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){U(e,2,3),B(e,y,S),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},4029:function(e,t,n){"use strict";var r=n(4030),o=n(3653),a=n(3801),i=n(3803),c=n(3730),l=n(3802),u=n(4033),s=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==i.Z_OK)throw new Error(c[n]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===s.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==i.Z_OK))throw new Error(c[n])}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}d.prototype.push=function(e,t){var n,c,l,u,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,h=!1;if(this.ended)return!1;c=t===~~t?t:!0===t?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===s.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&m&&(n=r.inflateSetDictionary(this.strm,m)),n===i.Z_BUF_ERROR&&!0===h&&(n=i.Z_OK,h=!1),n!==i.Z_STREAM_END&&n!==i.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==i.Z_STREAM_END&&(0!==f.avail_in||c!==i.Z_FINISH&&c!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),u=f.next_out-l,d=a.buf2string(f.output,l),f.next_out=u,f.avail_out=p-u,u&&o.arraySet(f.output,f.output,l,u,0),this.onData(d)):this.onData(o.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(h=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==i.Z_STREAM_END);return n===i.Z_STREAM_END&&(c=i.Z_FINISH),c===i.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===i.Z_OK):c!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.ungzip=f},4030:function(e,t,n){"use strict";var r=n(3653),o=n(3799),a=n(3800),i=n(4031),c=n(4032),l=1,u=2,s=0,d=-2,f=1,p=12,m=30,h=852,v=592;function y(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(v),t.sane=1,t.back=-1,s):d}function _(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):d}function E(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,_(e))):d}function w(e,t){var n,r;return e?(r=new b,e.state=r,r.window=null,(n=E(e,t))!==s&&(e.state=null),n):d}var O,k,S=!0;function N(e){if(S){var t;for(O=new r.Buf32(512),k=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(l,e.lens,0,288,O,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(u,e.lens,0,32,k,0,e.work,{bits:5}),S=!1}e.lencode=O,e.lenbits=9,e.distcode=k,e.distbits=5}function x(e,t,n,o){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new r.Buf8(i.wsize)),o>=i.wsize?(r.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>o&&(a=o),r.arraySet(i.window,t,n-o,a,i.wnext),(o-=a)?(r.arraySet(i.window,t,n-o,o,0),i.wnext=o,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}t.inflateReset=_,t.inflateReset2=E,t.inflateResetKeep=g,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,t){var n,h,v,b,g,_,E,w,O,k,S,A,P,C,j,T,I,M,L,R,D,U,B,z,F=0,V=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;(n=e.state).mode===p&&(n.mode=13),g=e.next_out,v=e.output,E=e.avail_out,b=e.next_in,h=e.input,_=e.avail_in,w=n.hold,O=n.bits,k=_,S=E,U=s;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;O<16;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(2&n.wrap&&35615===w){n.check=0,V[0]=255&w,V[1]=w>>>8&255,n.check=a(n.check,V,2,0),w=0,O=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",n.mode=m;break}if(8!=(15&w)){e.msg="unknown compression method",n.mode=m;break}if(O-=4,D=8+(15&(w>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=m;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&w?10:p,w=0,O=0;break;case 2:for(;O<16;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(n.flags=w,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=m;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=m;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(V[0]=255&w,V[1]=w>>>8&255,n.check=a(n.check,V,2,0)),w=0,O=0,n.mode=3;case 3:for(;O<32;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.head&&(n.head.time=w),512&n.flags&&(V[0]=255&w,V[1]=w>>>8&255,V[2]=w>>>16&255,V[3]=w>>>24&255,n.check=a(n.check,V,4,0)),w=0,O=0,n.mode=4;case 4:for(;O<16;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(V[0]=255&w,V[1]=w>>>8&255,n.check=a(n.check,V,2,0)),w=0,O=0,n.mode=5;case 5:if(1024&n.flags){for(;O<16;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(V[0]=255&w,V[1]=w>>>8&255,n.check=a(n.check,V,2,0)),w=0,O=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((A=n.length)>_&&(A=_),A&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,b,A,D)),512&n.flags&&(n.check=a(n.check,h,A,b)),_-=A,b+=A,n.length-=A),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break e;A=0;do{D=h[b+A++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&A<_);if(512&n.flags&&(n.check=a(n.check,h,A,b)),_-=A,b+=A,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break e;A=0;do{D=h[b+A++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&A<_);if(512&n.flags&&(n.check=a(n.check,h,A,b)),_-=A,b+=A,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;O<16;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(w!==(65535&n.check)){e.msg="header crc mismatch",n.mode=m;break}w=0,O=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=p;break;case 10:for(;O<32;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}e.adler=n.check=y(w),w=0,O=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=g,e.avail_out=E,e.next_in=b,e.avail_in=_,n.hold=w,n.bits=O,2;e.adler=n.check=1,n.mode=p;case p:if(5===t||6===t)break e;case 13:if(n.last){w>>>=7&O,O-=7&O,n.mode=27;break}for(;O<3;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}switch(n.last=1&w,O-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(N(n),n.mode=20,6===t){w>>>=2,O-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=m}w>>>=2,O-=2;break;case 14:for(w>>>=7&O,O-=7&O;O<32;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",n.mode=m;break}if(n.length=65535&w,w=0,O=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(A=n.length){if(A>_&&(A=_),A>E&&(A=E),0===A)break e;r.arraySet(v,h,b,A,g),_-=A,b+=A,E-=A,g+=A,n.length-=A;break}n.mode=p;break;case 17:for(;O<14;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(n.nlen=257+(31&w),w>>>=5,O-=5,n.ndist=1+(31&w),w>>>=5,O-=5,n.ncode=4+(15&w),w>>>=4,O-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=m;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;O<3;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.lens[G[n.have++]]=7&w,w>>>=3,O-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},U=c(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,U){e.msg="invalid code lengths set",n.mode=m;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(F=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,I=65535&F,!((j=F>>>24)<=O);){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(I<16)w>>>=j,O-=j,n.lens[n.have++]=I;else{if(16===I){for(z=j+2;O<z;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(w>>>=j,O-=j,0===n.have){e.msg="invalid bit length repeat",n.mode=m;break}D=n.lens[n.have-1],A=3+(3&w),w>>>=2,O-=2}else if(17===I){for(z=j+3;O<z;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}O-=j,D=0,A=3+(7&(w>>>=j)),w>>>=3,O-=3}else{for(z=j+7;O<z;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}O-=j,D=0,A=11+(127&(w>>>=j)),w>>>=7,O-=7}if(n.have+A>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=m;break}for(;A--;)n.lens[n.have++]=D}}if(n.mode===m)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=m;break}if(n.lenbits=9,B={bits:n.lenbits},U=c(l,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,U){e.msg="invalid literal/lengths set",n.mode=m;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},U=c(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,U){e.msg="invalid distances set",n.mode=m;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(_>=6&&E>=258){e.next_out=g,e.avail_out=E,e.next_in=b,e.avail_in=_,n.hold=w,n.bits=O,i(e,S),g=e.next_out,v=e.output,E=e.avail_out,b=e.next_in,h=e.input,_=e.avail_in,w=n.hold,O=n.bits,n.mode===p&&(n.back=-1);break}for(n.back=0;T=(F=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,I=65535&F,!((j=F>>>24)<=O);){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(T&&0==(240&T)){for(M=j,L=T,R=I;T=(F=n.lencode[R+((w&(1<<M+L)-1)>>M)])>>>16&255,I=65535&F,!(M+(j=F>>>24)<=O);){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}w>>>=M,O-=M,n.back+=M}if(w>>>=j,O-=j,n.back+=j,n.length=I,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=p;break}if(64&T){e.msg="invalid literal/length code",n.mode=m;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(z=n.extra;O<z;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,O-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(F=n.distcode[w&(1<<n.distbits)-1])>>>16&255,I=65535&F,!((j=F>>>24)<=O);){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(0==(240&T)){for(M=j,L=T,R=I;T=(F=n.distcode[R+((w&(1<<M+L)-1)>>M)])>>>16&255,I=65535&F,!(M+(j=F>>>24)<=O);){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}w>>>=M,O-=M,n.back+=M}if(w>>>=j,O-=j,n.back+=j,64&T){e.msg="invalid distance code",n.mode=m;break}n.offset=I,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(z=n.extra;O<z;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,O-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=m;break}n.mode=25;case 25:if(0===E)break e;if(A=S-E,n.offset>A){if((A=n.offset-A)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=m;break}A>n.wnext?(A-=n.wnext,P=n.wsize-A):P=n.wnext-A,A>n.length&&(A=n.length),C=n.window}else C=v,P=g-n.offset,A=n.length;A>E&&(A=E),E-=A,n.length-=A;do{v[g++]=C[P++]}while(--A);0===n.length&&(n.mode=21);break;case 26:if(0===E)break e;v[g++]=n.length,E--,n.mode=21;break;case 27:if(n.wrap){for(;O<32;){if(0===_)break e;_--,w|=h[b++]<<O,O+=8}if(S-=E,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?a(n.check,v,S,g-S):o(n.check,v,S,g-S)),S=E,(n.flags?w:y(w))!==n.check){e.msg="incorrect data check",n.mode=m;break}w=0,O=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;O<32;){if(0===_)break e;_--,w+=h[b++]<<O,O+=8}if(w!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=m;break}w=0,O=0}n.mode=29;case 29:U=1;break e;case m:U=-3;break e;case 31:return-4;default:return d}return e.next_out=g,e.avail_out=E,e.next_in=b,e.avail_in=_,n.hold=w,n.bits=O,(n.wsize||S!==e.avail_out&&n.mode<m&&(n.mode<27||4!==t))&&x(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(k-=e.avail_in,S-=e.avail_out,e.total_in+=k,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?a(n.check,v,S,e.next_out-S):o(n.check,v,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(n.mode===p?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===S||4===t)&&U===s&&(U=-5),U)},t.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,s},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:(n.head=t,t.done=!1,s):d},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&o(1,t,r,0)!==n.check?-3:x(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,s):d},t.inflateInfo="pako inflate (from Nodeca project)"},4031:function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,a,i,c,l,u,s,d,f,p,m,h,v,y,b,g,_,E,w,O,k,S,N;n=e.state,r=e.next_in,S=e.input,o=r+(e.avail_in-5),a=e.next_out,N=e.output,i=a-(t-e.avail_out),c=a+(e.avail_out-257),l=n.dmax,u=n.wsize,s=n.whave,d=n.wnext,f=n.window,p=n.hold,m=n.bits,h=n.lencode,v=n.distcode,y=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{m<15&&(p+=S[r++]<<m,m+=8,p+=S[r++]<<m,m+=8),g=h[p&y];t:for(;;){if(p>>>=_=g>>>24,m-=_,0===(_=g>>>16&255))N[a++]=65535&g;else{if(!(16&_)){if(0==(64&_)){g=h[(65535&g)+(p&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}E=65535&g,(_&=15)&&(m<_&&(p+=S[r++]<<m,m+=8),E+=p&(1<<_)-1,p>>>=_,m-=_),m<15&&(p+=S[r++]<<m,m+=8,p+=S[r++]<<m,m+=8),g=v[p&b];n:for(;;){if(p>>>=_=g>>>24,m-=_,!(16&(_=g>>>16&255))){if(0==(64&_)){g=v[(65535&g)+(p&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&g,m<(_&=15)&&(p+=S[r++]<<m,(m+=8)<_&&(p+=S[r++]<<m,m+=8)),(w+=p&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=_,m-=_,w>(_=a-i)){if((_=w-_)>s&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(O=0,k=f,0===d){if(O+=u-_,_<E){E-=_;do{N[a++]=f[O++]}while(--_);O=a-w,k=N}}else if(d<_){if(O+=u+d-_,(_-=d)<E){E-=_;do{N[a++]=f[O++]}while(--_);if(O=0,d<E){E-=_=d;do{N[a++]=f[O++]}while(--_);O=a-w,k=N}}}else if(O+=d-_,_<E){E-=_;do{N[a++]=f[O++]}while(--_);O=a-w,k=N}for(;E>2;)N[a++]=k[O++],N[a++]=k[O++],N[a++]=k[O++],E-=3;E&&(N[a++]=k[O++],E>1&&(N[a++]=k[O++]))}else{O=a-w;do{N[a++]=N[O++],N[a++]=N[O++],N[a++]=N[O++],E-=3}while(E>2);E&&(N[a++]=N[O++],E>1&&(N[a++]=N[O++]))}break}}break}}while(r<o&&a<c);r-=E=m>>3,p&=(1<<(m-=E<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=a<c?c-a+257:257-(a-c),n.hold=p,n.bits=m}},4032:function(e,t,n){"use strict";var r=n(3653),o=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,s,d,f,p){var m,h,v,y,b,g,_,E,w,O=p.bits,k=0,S=0,N=0,x=0,A=0,P=0,C=0,j=0,T=0,I=0,M=null,L=0,R=new r.Buf16(16),D=new r.Buf16(16),U=null,B=0;for(k=0;k<=o;k++)R[k]=0;for(S=0;S<u;S++)R[t[n+S]]++;for(A=O,x=o;x>=1&&0===R[x];x--);if(A>x&&(A=x),0===x)return s[d++]=20971520,s[d++]=20971520,p.bits=1,0;for(N=1;N<x&&0===R[N];N++);for(A<N&&(A=N),j=1,k=1;k<=o;k++)if(j<<=1,(j-=R[k])<0)return-1;if(j>0&&(0===e||1!==x))return-1;for(D[1]=0,k=1;k<o;k++)D[k+1]=D[k]+R[k];for(S=0;S<u;S++)0!==t[n+S]&&(f[D[t[n+S]]++]=S);if(0===e?(M=U=f,g=19):1===e?(M=a,L-=257,U=i,B-=257,g=256):(M=c,U=l,g=-1),I=0,S=0,k=N,b=d,P=A,C=0,v=-1,y=(T=1<<A)-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){_=k-C,f[S]<g?(E=0,w=f[S]):f[S]>g?(E=U[B+f[S]],w=M[L+f[S]]):(E=96,w=0),m=1<<k-C,N=h=1<<P;do{s[b+(I>>C)+(h-=m)]=_<<24|E<<16|w|0}while(0!==h);for(m=1<<k-1;I&m;)m>>=1;if(0!==m?(I&=m-1,I+=m):I=0,S++,0==--R[k]){if(k===x)break;k=t[n+f[S]]}if(k>A&&(I&y)!==v){for(0===C&&(C=A),b+=N,j=1<<(P=k-C);P+C<x&&!((j-=R[P+C])<=0);)P++,j<<=1;if(T+=1<<P,1===e&&T>852||2===e&&T>592)return 1;s[v=I&y]=A<<24|P<<16|b-d|0}}return 0!==I&&(s[b+I]=k-C<<24|64<<16|0),p.bits=A,0}},4033:function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4040:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(5),u=n.n(l),s=n(208),d=n(63),f=n(1416),p=n(87),m=n(4194),h=n(54),v=n(50),y="MemberAbleIcon-module_lightIcon_wz4WU";function b(e){var t=e.className,n=e.width,o=e.height,i=e.organization,c=e.group,l=e.isYuque,b=e.code,g=e.memberLevel,_=void 0===g?h.MEMBER_LEVEL.member_level_1:g,E=e.light,w=e.noTooltip,O=e.isNavIcon;if(!l)return null;var k="en-us"===Object(s.d)();if(!i&&c&&"Group"===c.type)return null;var S,N,x,A=null==i?void 0:i.id,P=A?(S=b,(N=p.a.getFeatureBelongsPayment(S))===m.PAYMENT_TYPE.pro?__("专业版、旗舰版空间权益"):N===m.PAYMENT_TYPE.enterprise?__("旗舰版空间权益"):null):__("专业会员功能"),C=A?"/about/price#team":"/about/price",j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(f.getInterest)().interests[b]?null:v.ORG_PRO_FEATURE[b]?O?"nav-spacepayment-pro":e?"icon-spacepayment-en":"spacepayment-pro":v.ORG_ENTERPRISE_FEATURE[b]?O?"nav-spacepayment-business":e?"en-spacepayment-business":"spacepayment-business":null};if(x=k?A?j(!0):"icon-memberen":A?j():"icon-membernew",E&&!A){var T=_===h.MEMBER_LEVEL.member_level_1?__("会员"):__("超级会员");return a.a.createElement("div",{className:u()(y,t)},T)}return x?w?a.a.createElement(d.b,{className:t,name:x,width:n||48,height:o||16}):a.a.createElement(r.a,{title:a.a.createElement("div",null,P,a.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:C,target:"_blank","data-desktoptarget":"_browser"},__("了解更多")))},a.a.createElement(d.b,{className:t,name:x,width:n||48,height:o||16})):null}b.propTypes={className:c.a.string,width:c.a.number,height:c.a.number,organization:c.a.object,group:c.a.object,isYuque:c.a.bool,code:c.a.string,memberLevel:c.a.number,light:c.a.bool,noTooltip:c.a.bool,isNavIcon:c.a.bool};t.a=b},4041:function(e,t,n){"use strict";n.d(t,"e",(function(){return i}));var r=n(152),o=n.n(r),a=n(493);n.d(t,"i",(function(){return a.WORKFLOW_EVENT})),n.d(t,"h",(function(){return a.SAVE_TYPE})),n.d(t,"d",(function(){return a.ERROR_CODE})),n.d(t,"f",(function(){return a.MESSAGE})),n.d(t,"a",(function(){return a.DOC_STATUS})),n.d(t,"g",(function(){return a.NET_STATUS})),n.d(t,"b",(function(){return a.EDIT_MODE})),n.d(t,"c",(function(){return a.EDIT_SCENE}));var i={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:o.a.mac?"⌘+Enter":"Ctrl+Enter"}};a.WORKFLOW_EVENT,a.ACTION,a.SAVE_TYPE,a.ERROR_CODE,a.MESSAGE,a.DOC_STATUS,a.NET_STATUS,a.EDIT_MODE},4046:function(e,t,n){var r=function(e){return"[object Array]"==Object.prototype.toString.call(e)},o=function(e){return JSON.parse(JSON.stringify(e))},a={name:"json0",uri:"http://sharejs.org/types/JSONv0"},i={};function c(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function l(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}a.registerSubtype=function(e){i[e.name]=e},a.create=function(e){return void 0===e?null:o(e)},a.invertComponent=function(e){var t={p:e.p};return e.t&&i[e.t]&&(t.t=e.t,t.o=i[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},a.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(a.invertComponent(t[r]));return n},a.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!r(e[t].p))throw new Error("Missing path")},a.checkList=function(e){if(!r(e))throw new Error("Referenced element not a list")},a.checkObj=function(e){if(!(t=e)||t.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")");var t},a.apply=function(e,t){a.checkValidOp(t),t=o(t);for(var n={data:e},r=0;r<t.length;r++){var l=t[r];null==l.si&&null==l.sd||c(l);for(var u=null,s=n,d="data",f=0;f<l.p.length;f++){var p=l.p[f];if(u=s,d,s=s[d],d=p,null==u)throw new Error("Path invalid")}if(l.t&&void 0!==l.o&&i[l.t])s[d]=i[l.t].apply(s[d],l.o);else if(void 0!==l.na){if("number"!=typeof s[d])throw new Error("Referenced element not a number");s[d]+=l.na}else if(void 0!==l.li&&void 0!==l.ld)a.checkList(s),s[d]=l.li;else if(void 0!==l.li)a.checkList(s),s.splice(d,0,l.li);else if(void 0!==l.ld)a.checkList(s),s.splice(d,1);else if(void 0!==l.lm){if(a.checkList(s),l.lm!=d){var m=s[d];s.splice(d,1),s.splice(l.lm,0,m)}}else if(void 0!==l.oi)a.checkObj(s),s[d]=l.oi;else{if(void 0===l.od)throw new Error("invalid / missing instruction in op");a.checkObj(s),delete s[d]}}return n.data},a.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},a.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var o=[t[r]];n(o,e=a.apply(e,o))}return e};var u=a.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};a.append=function(e,t){if(t=o(t),0!==e.length){var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(n)),u(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&i[t.t]){if(n.o=i[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var r=t.p,a=0;a<n.o.length-1;a++)t.o=[n.o.pop()],t.p=r.slice(),l(t),e.push(t);l(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(l(t),l(n)),e.push(t)}else e.push(t)},a.compose=function(e,t){a.checkValidOp(e),a.checkValidOp(t);for(var n=o(e),r=0;r<t.length;r++)a.append(n,t[r]);return n},a.normalize=function(e){var t=[];e=r(e)?e:[e];for(var n=0;n<e.length;n++){var o=e[n];null==o.p&&(o.p=[]),a.append(t,o)}return t},a.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var o=0;o<n;o++){var a=e.p[o];if(o>=r||a!==t.p[o])return null}return n},a.canOpAffectPath=function(e,t){return null!=a.commonLengthForOps({p:t},e)},a.transformComponent=function(e,t,n,u){t=o(t);var s=a.commonLengthForOps(n,t),d=a.commonLengthForOps(t,n),f=t.p.length,p=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&p++,null!=d&&p>f&&t.p[d]==n.p[d])if(void 0!==t.ld)(h=o(n)).p=h.p.slice(f),t.ld=a.apply(o(t.ld),[h]);else if(void 0!==t.od){(h=o(n)).p=h.p.slice(f),t.od=a.apply(o(t.od),[h])}if(null!=s){var m=f==p,h=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(c(t),c(h=o(n))),h.t&&i[h.t]){if(t.t&&t.t===h.t){var v=i[t.t].transform(t.o,h.o,u);if(null!=t.si||null!=t.sd)for(var y=t.p,b=0;b<v.length;b++)t.o=[v[b]],t.p=y.slice(),l(t),a.append(e,t);else(!r(v)||v.length>0)&&(t.o=v,a.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[s]===t.p[s]){if(!m)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==u)return e;t.ld=o(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&m&&t.p[s]===n.p[s]?"right"===u&&t.p[s]++:n.p[s]<=t.p[s]&&t.p[s]++,void 0!==t.lm&&m&&n.p[s]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&m){if(n.p[s]===t.p[s])return e;y=n.p[s];var g=t.p[s];(y<(_=t.lm)||y===_&&g<_)&&t.lm--}if(n.p[s]<t.p[s])t.p[s]--;else if(n.p[s]===t.p[s]){if(p<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===p){g=t.p[s];var _=t.lm,E=n.p[s],w=n.lm;if(E!==w)if(g===E){if("left"!==u)return e;t.p[s]=w,g===_&&(t.lm=w)}else g>E&&t.p[s]--,g>w?t.p[s]++:g===w&&E>w&&(t.p[s]++,g===_&&t.lm++),(_>E||_===E&&_>g)&&t.lm--,_>w?t.lm++:_===w&&(w>E&&_>g||w<E&&_<g?"right"===u&&t.lm++:_>g?t.lm++:_===E&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&m){g=n.p[s],_=n.lm;(y=t.p[s])>g&&t.p[s]--,y>_&&t.p[s]++}else{g=n.p[s],_=n.lm;(y=t.p[s])===g?t.p[s]=_:(y>g&&t.p[s]--,(y>_||y===_&&g>_)&&t.p[s]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[s]===n.p[s]){if(void 0===t.oi||!m)return e;if("right"===u)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[s]===n.p[s]){if("left"!==u)return e;a.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[s]==n.p[s]){if(!m)return e;if(void 0===t.oi)return e;delete t.od}}return a.append(e,t),e},n(3811)(a,a.transformComponent,a.checkValidOp,a.append);var s=n(4047);a.registerSubtype(s),e.exports=a},4047:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},o=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},a=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},i=function(e){for(var t=0;t<e.length;t++)a(e[t])};r.apply=function(e,t){var n;i(t);for(var r=0;r<t.length;r++){var a=t[r];if(null!=a.i)e=o(e,a.p,a.i);else{if(n=e.slice(a.p,a.p+a.d.length),a.d!==n)throw new Error("Delete component '"+a.d+"' does not match deleted text '"+n+"'");e=e.slice(0,a.p)+e.slice(a.p+a.d.length)}}return e};var c=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:o(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:o(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){i(e),i(t);for(var n=e.slice(),r=0;r<t.length;r++)c(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),c(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,o=0;o<t.length;o++)e=l(e,t[o],r);return e};var u=r._tc=function(e,t,n,r){if(a(t),a(n),null!=t.i)c(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var o=t.d;t.p<n.p&&(c(e,{d:o.slice(0,n.p-t.p),p:t.p}),o=o.slice(n.p-t.p)),""!==o&&c(e,{d:o,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)c(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)c(e,t);else{var i={d:"",p:t.p};t.p<n.p&&(i.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(i.d+=t.d.slice(n.p+n.d.length-t.p));var u=Math.max(t.p,n.p),s=Math.min(t.p+t.d.length,n.p+n.d.length);if(t.d.slice(u-t.p,s-t.p)!==n.d.slice(u-n.p,s-n.p))throw new Error("Delete ops delete different text in the same region of the document");""!==i.d&&(i.p=l(i.p,n),c(e,i))}return e};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=null!=(n=e[t]).i?{d:n.i,p:n.p}:{i:n.d,p:n.p};var n;return e},n(3811)(r,u,i,c)},4050:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var i=n(1493),c=n(3980).BaseValidatorClass,l=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,u=/^\+[1-9]\d{0,2}? \d{1,20}$/,s=/^\+86 /,d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"chinaMobilePhone",value:function(e){if(!(e=this._stringify(e))||!l.test(e))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(e){return(e=this._stringify(e))&&u.test(e)?s.test(e)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(e){if(this.globalMobilePhone(e))return s.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)}},{key:"mobilePhoneForNonChinese",value:function(e){if(this.globalMobilePhone(e))return s.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)?this.__("必须是合法的手机号码"):void 0}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();t.MobileValidatorClass=d,t.chinaMobilePhoneRE=l,t.globalMobilePhoneRE=u,t.MobileValidator=i.apply(void 0,[c].concat([d]))},4072:function(e,t,n){"use strict";n.r(t);n(800);var r=n(381),o=(n(588),n(110)),a=(n(227),n(101)),i=(n(40),n(9)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(5),f=n.n(d),p=n(63),m=n(87),h=n(20),v=n(54),y=n(3976),b=n(34),g="index-module_belongs_A3uam",_="index-module_meta_Jn6WP",E="index-module_truncation_g-6vp";function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N={};N.Login=function(e){var t,n=e.goto,r=e.registerWithScene,o=n?"/login?goto=".concat(encodeURIComponent(n)):"/login",a=null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content"),u=m.a.genCreateFromKey(h.CREATE_FROM.official_website_top_button);return r&&(o="/"===window.location.pathname||"/about"===window.location.pathname?"/login?register_with_scene=true&defaultType=org&register_from=".concat(u):"/login?register_with_scene=true&register_from=".concat(u)),Object(c.useEffect)((function(){Object(y.b)()}),[]),l.a.createElement(l.a.Fragment,null,"doc_read"===a?l.a.createElement(i.a,{onClick:function(e){b.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("免费使用")):l.a.createElement(i.a,{onClick:function(e){b.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("登录 / 注册")))},N.Login.propTypes={size:s.a.oneOf(["small","large"]),goto:s.a.string},N.Job=function(e){var t=e.user,n=e.truncation;if(t)return l.a.createElement("span",{className:f()(_,S({},E,n))},l.a.createElement(p.b,{name:"user-job",width:16,height:16}),l.a.createElement("span",null,t.job_title||__("未填写")))},N.Job.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},N.Location=function(e){var t=e.user,n=e.truncation,r=e.size,o=void 0===r?16:r;return t=t||{},l.a.createElement("span",{className:f()(_,S({},E,n))},l.a.createElement(p.b,{name:"user-location",width:o,height:o}),l.a.createElement("span",null,t.location||__("未填写")))},N.Location.propTypes={size:s.a.object.number,user:s.a.object.isRequired,truncation:s.a.bool},N.Department=function(e){var t,n=e.user,r=e.truncation;if(n)return l.a.createElement("div",null,null!==(t=n.departments)&&void 0!==t&&t.length?n.departments.map((function(e){return l.a.createElement("span",{className:f()(_,S({},E,r))},l.a.createElement(p.b,{name:"department",width:16,height:16}),l.a.createElement("span",null,e))})):l.a.createElement("span",{className:f()(_,S({},E,r))},l.a.createElement(p.b,{name:"department",width:16,height:16}),l.a.createElement("span",null,n.department||__("未填写"))))},N.Department.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},N.Link=function(e){var t=e.user,n=e.className;return l.a.createElement("a",{href:"/".concat(t.login),title:t.name,className:n},t.name)},N.Link.propTypes={user:s.a.object.isRequired,className:s.a.string},N.Name=function(e){var t=e.user,n=e.className;return l.a.createElement("span",{title:t.name,className:n},t.name)},N.Name.propTypes={user:s.a.object.isRequired,className:s.a.string},N.ContentRiskStatus=function(e){var t=e.user,n=e.me;if(n&&(n.isAdmin||n.isSecurityOperator)&&[v.STATUS.banned,v.STATUS.blocked].includes(t.status)){var r={};r[v.STATUS.banned]="已封禁",r[v.STATUS.blocked]="已屏蔽";var o=r[t.status];return l.a.createElement(a.a,{title:o},l.a.createElement(p.b,{title:!0,name:"doc-has-content-risk",width:20,style:{marginLeft:8,marginBottom:2}}))}return null},N.Name.propTypes={user:s.a.object.isRequired,me:s.a.object};var x=function(e){var t=e.belongs,n=e.onChange,a=O(Object(c.useState)(__("管理员")),2),i=a[0],u=a[1];return l.a.createElement(r.a,{trigger:["click"],overlay:l.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return l.a.createElement(o.a.Item,{key:e.type},l.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){n(e.type),u(e.text)}(e)}},e.text))})))},l.a.createElement("span",null,i,l.a.createElement("span",{className:f()("larkicon","larkicon-arrow-down",g)})))};x.propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired},N.BelongMenu=x;t.default=N},4075:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3812),o=function(){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(1471)]).then(n.bind(null,4407)).then((function(e){return e.default}))};function a(){var e=Object(r.a)({loader:o,name:"TemplateSelector"}),t=e.loadSelector,n=e.showSelector;return{loadTemplateSelector:t,showTemplateSelector:function(e){return n(e,{width:e.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},4076:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return _}));var r=n(1);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),c=new T(r||[]);return i(a,"_invoke",{value:A(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};d(w,l,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,l)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,i,c,l){var u=p(e[a],e,i);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==o(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,c,l)}),(function(e){n("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,l)}))}l(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=m;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return _.prototype=E,i(S,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=d(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),d(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(f(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),d(S,s,"Generator"),d(S,l,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function i(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,l,"next",e)}function l(e){i(a,r,o,c,l,"throw",e)}c(void 0)}))}}function l(e){return u.apply(this,arguments)}function u(){return u=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",e.abrupt("return",r.put("/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",t,n));case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function s(e){return d.apply(this,arguments)}function d(){return d=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",e.abrupt("return",r.post("/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",t,n));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return p=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",e.abrupt("return",r.post("/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",t,n));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",e.abrupt("return",r.post("/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",t,n));case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return y=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",e.abrupt("return",r.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",t,n));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return g=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",e.abrupt("return",r.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",t,n));case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e){return E.apply(this,arguments)}function E(){return E=c(a().mark((function e(t){var n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",e.abrupt("return",r.delete("/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",t,n));case 3:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}},4096:function(e,t,n){"use strict";var r=n(4108),o=n(4109),a=n(3786);e.exports={formats:a,parse:o,stringify:r}},41:function(e,t,n){"use strict";n(1494);var r=n(569);n(130);t.a=r.a},4108:function(e,t,n){"use strict";var r=n(726),o=n(3979),a=n(3786),i=Object.prototype.hasOwnProperty,c={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,s=function(e,t){u.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,f=a.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,filter:void 0,format:f,formatter:a.formatters[f],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},m={},h=function e(t,n,a,i,c,u,d,f,h,v,y,b,g,_,E,w,O,k){for(var S,N=t,x=k,A=0,P=!1;void 0!==(x=x.get(m))&&!P;){var C=x.get(t);if(A+=1,void 0!==C){if(C===A)throw new RangeError("Cyclic object value");P=!0}void 0===x.get(m)&&(A=0)}if("function"==typeof v?N=v(n,N):N instanceof Date?N=g(N):"comma"===a&&l(N)&&(N=o.maybeMap(N,(function(e){return e instanceof Date?g(e):e}))),null===N){if(u)return h&&!w?h(n,p.encoder,O,"key",_):n;N=""}if("string"==typeof(S=N)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||o.isBuffer(N))return h?[E(w?n:h(n,p.encoder,O,"key",_))+"="+E(h(N,p.encoder,O,"value",_))]:[E(n)+"="+E(String(N))];var j,T=[];if(void 0===N)return T;if("comma"===a&&l(N))w&&h&&(N=o.maybeMap(N,h)),j=[{value:N.length>0?N.join(",")||null:void 0}];else if(l(v))j=v;else{var I=Object.keys(N);j=y?I.sort(y):I}var M=f?String(n).replace(/\./g,"%2E"):String(n),L=i&&l(N)&&1===N.length?M+"[]":M;if(c&&l(N)&&0===N.length)return L+"[]";for(var R=0;R<j.length;++R){var D=j[R],U="object"==typeof D&&D&&void 0!==D.value?D.value:N[D];if(!d||null!==U){var B=b&&f?String(D).replace(/\./g,"%2E"):String(D),z=l(N)?"function"==typeof a?a(L,B):L:L+(b?"."+B:"["+B+"]");k.set(t,A);var F=r();F.set(m,k),s(T,e(U,z,a,i,c,u,d,f,"comma"===a&&w&&l(N)?null:h,v,y,b,g,_,E,w,O,F))}}return T};e.exports=function(e,t){var n,o=e,u=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=a.default;if(void 0!==e.format){if(!i.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r,o=a.formatters[n],u=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(u=e.filter),r=e.arrayFormat in c?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:r,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:u,format:n,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):l(u.filter)&&(n=u.filter);var d=[];if("object"!=typeof o||null===o)return"";var f=c[u.arrayFormat],m="comma"===f&&u.commaRoundTrip;n||(n=Object.keys(o)),u.sort&&n.sort(u.sort);for(var v=r(),y=0;y<n.length;++y){var b=n[y],g=o[b];u.skipNulls&&null===g||s(d,h(g,b,f,m,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,v))}var _=d.join(u.delimiter),E=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),_.length>0?E+_:""}},4109:function(e,t,n){"use strict";var r=n(3979),o=Object.prototype.hasOwnProperty,a=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},c=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t,n){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&n>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},u=function(e,t,n,a){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,c=/(\[[^[\]]*])/g,u=n.depth>0&&/(\[[^[\]]*])/.exec(i),s=u?i.slice(0,u.index):i,d=[];if(s){if(!n.plainObjects&&o.call(Object.prototype,s)&&!n.allowPrototypes)return;d.push(s)}for(var f=0;n.depth>0&&null!==(u=c.exec(i))&&f<n.depth;){if(f+=1,!n.plainObjects&&o.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(u[1])}if(u){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");d.push("["+i.slice(u.index)+"]")}return function(e,t,n,o){var a=0;if(e.length>0&&"[]"===e[e.length-1]){var i=e.slice(0,-1).join("");a=Array.isArray(t)&&t[i]?t[i].length:0}for(var c=o?t:l(t,n,a),u=e.length-1;u>=0;--u){var s,d=e[u];if("[]"===d&&n.parseArrays)s=n.allowEmptyArrays&&(""===c||n.strictNullHandling&&null===c)?[]:r.combine([],c);else{s=n.plainObjects?{__proto__:null}:{};var f="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,p=n.decodeDotInKeys?f.replace(/%2E/g,"."):f,m=parseInt(p,10);n.parseArrays||""!==p?!isNaN(m)&&d!==p&&String(m)===p&&m>=0&&n.parseArrays&&m<=n.arrayLimit?(s=[])[m]=c:"__proto__"!==p&&(s[p]=c):s={0:c}}c=s}return c}(d,t,n,a)}};e.exports=function(e,t){var n=function(e){if(!e)return i;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=void 0===e.charset?i.charset:e.charset,n=void 0===e.duplicates?i.duplicates:e.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||i.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:i.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,duplicates:n,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:i.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}}(t);if(""===e||null==e)return n.plainObjects?{__proto__:null}:{};for(var s="string"==typeof e?function(e,t){var n={__proto__:null},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;u=u.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,d=u.split(t.delimiter,t.throwOnLimitExceeded?s+1:s);if(t.throwOnLimitExceeded&&d.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(1===s?"":"s")+" allowed.");var f,p=-1,m=t.charset;if(t.charsetSentinel)for(f=0;f<d.length;++f)0===d[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[f]?m="utf-8":"utf8=%26%2310003%3B"===d[f]&&(m="iso-8859-1"),p=f,f=d.length);for(f=0;f<d.length;++f)if(f!==p){var h,v,y=d[f],b=y.indexOf("]="),g=-1===b?y.indexOf("="):b+1;-1===g?(h=t.decoder(y,i.decoder,m,"key"),v=t.strictNullHandling?null:""):(h=t.decoder(y.slice(0,g),i.decoder,m,"key"),v=r.maybeMap(l(y.slice(g+1),t,a(n[h])?n[h].length:0),(function(e){return t.decoder(e,i.decoder,m,"value")}))),v&&t.interpretNumericEntities&&"iso-8859-1"===m&&(v=c(String(v))),y.indexOf("[]=")>-1&&(v=a(v)?[v]:v);var _=o.call(n,h);_&&"combine"===t.duplicates?n[h]=r.combine(n[h],v):_&&"last"!==t.duplicates||(n[h]=v)}return n}(e,n):e,d=n.plainObjects?{__proto__:null}:{},f=Object.keys(s),p=0;p<f.length;++p){var m=f[p],h=u(m,s[m],n,"string"==typeof e);d=r.merge(d,h,n)}return!0===n.allowSparse?d:r.compact(d)}},4119:function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){if(!t){var n=window.appData.siteName||__("语雀");document.title="".concat(e," · ").concat(n)}}),[e])}},4122:function(e,t,n){var r=n(500);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},4123:function(e,t,n){"use strict";t.a={revertLink:"index-module_revertLink_csROb"}},4130:function(e,t,n){"use strict";var r=n(4215),o=n.n(r);t.a=o.a},4131:function(e,t,n){"use strict";var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}var i=function(e,t){this.target=t,this.type=e},c=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return o(t,e),t}(i),l=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var o=e.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=n,o}return o(t,e),t}(i),u=function(){if("undefined"!=typeof WebSocket)return WebSocket},s={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},d=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?s.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?s.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),a=o.next();!a.done;a=o.next()){var i=a.value;this._callEventListener(e,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?s.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=void 0===r?s.minReconnectionDelay:r,a=e.maxReconnectionDelay,i=void 0===a?s.maxReconnectionDelay:a,c=0;return this._retryCount>0&&(c=o*Math.pow(n,this._retryCount-1))>i&&(c=i),this._debug("next delay",c),c},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?s.maxRetries:n,o=t.connectionTimeout,a=void 0===o?s.connectionTimeout:o,i=t.WebSocket,c=void 0===i?u():i;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(l=c)||!l||2!==l.CLOSING)throw Error("No valid WebSocket class provided");var l;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new c(t,e._protocols):new c(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),a))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new c(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new l(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();t.a=d},4140:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3812),o=function(){return Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1306)]).then(n.bind(null,4444)).then((function(e){return e.AIDocModal}))},a=function(){var e=Object(r.a)({loader:o,name:"AIDocModal"}),t=e.loadSelector,n=e.showSelector;return{loadCreateAIDocModal:t,showCreateAIDocModal:function(e){return n(e,{width:"76vw",maskClosable:!1,centered:!0})},contextHolder:e.contextHolder}}},4143:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(473),l=n(35),u=n(251),s=Object(u.b)((function(){return Promise.all([n.e(0),n.e(1),n.e(15),n.e(14),n.e(1444)]).then(n.bind(null,4463))}),{suspense:!0}),d=function(e){return o.a.createElement(s,e)};d.propTypes={onHistroyChange:i.a.func,onCancel:i.a.func,theme:i.a.string,embed:i.a.bool,isMiniType:i.a.bool,onSearch:i.a.func,location:i.a.object,onClose:i.a.func,isMobile:i.a.bool,sence:i.a.string,subSence:i.a.string,forceDisplay:i.a.bool,history:i.a.object,organization:i.a.object,group:i.a.object,book:i.a.object,doc:i.a.object,me:i.a.object,jumpToNewPage:i.a.bool},t.a=Object(c.d)((function(e){return{search:e.search,group:e.group,book:e.book,doc:e.doc,me:e.me,organization:e.organization}}))(Object(l.withRouter)(d))},4145:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r=function(e){return e.INIT="init",e.SRE="SRE",e.PRD="PRD",e.SAD="SAD",e.TEST="TEST",e}({}),o=function(e){return e[e.DRAFT=0]="DRAFT",e[e.PUBLISH=1]="PUBLISH",e}({}),a=function(e){return e.ASSOCIATED_PRD="ASSOCIATED_PRD",e.CORE_FUNCTION_SPLITTING="CORE_FUNCTION_SPLITTING",e.SUB_FUNCTION_DESCRIPTION="SUB_FUNCTION_DESCRIPTION",e.CREATIVE_REATIVE_AND_PAIN_POINT_TIPS="CREATIVE_REATIVE_AND_PAIN_POINT_TIPS",e.LOGIC_QA="LOGIC_QA",e.LOGIC_QA_ALL="LOGIC_QA_ALL",e.BUSINESS_CHALLENGE="BUSINESS_CHALLENGE",e.BUSINESS_KEYWORD_EXTRACT="BUSINESS_KEYWORD_EXTRACT",e.CUSTOM_BLOCK="CUSTOM_BLOCK",e.BACKGROUND_BLOCK="BACKGROUND_BLOCK",e.CORE_FUNCTION_BLOCK="CORE_FUNCTION_BLOCK",e.INTERPRETATION_ALL="INTERPRETATION_ALL",e}({}),i=function(e){return e.REQUIREMENT_UNDERSTANDING="REQUIREMENT_UNDERSTANDING",e.DOMAIN_MODEL_OUTLINE_GENERATION="DOMAIN_MODEL_OUTLINE_GENERATION",e.DOMAIN_MODEL_TABLE_GENERATION="DOMAIN_MODEL_TABLE_GENERATION",e.DOMAIN_MODEL_REFERENCES="DOMAIN_MODEL_REFERENCES",e.PRESELECTED_DATA_TABLE_EXTRACTION="PRESELECTED_DATA_TABLE_EXTRACTION",e.DATABASE_DESIGN_OUTLINE_GENERATION="DATABASE_DESIGN_OUTLINE_GENERATION",e.DATABASE_TABLE_GENERATION="DATABASE_TABLE_GENERATION",e.DATABASE_TABLE_CHANGE_DDL_GENERATION="DATABASE_TABLE_CHANGE_DDL_GENERATION",e.API_OUTLINE_GENERATION="API_OUTLINE_GENERATION",e.API_DOCUMENTATION_GENERATION="API_DOCUMENTATION_GENERATION",e.SEQUENCE_DIAGRAM_DRAWING="SEQUENCE_DIAGRAM_DRAWING",e.PROGRAM_ANALYSIS_CONVERSATION="PROGRAM_ANALYSIS_CONVERSATION",e}({})},4147:function(e,t,n){"use strict";var r={};(0,n(3653).assign)(r,n(4026),n(4029),n(3803)),e.exports=r},4161:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),o=function(e){return function(t,n){var o=Object(r.useRef)(!1);e((function(){return function(){o.current=!1}}),[]),e((function(){if(o.current)return t();o.current=!0}),n)}}},4168:function(e,t,n){"use strict";var r=n(0),o=n(3712).a?r.useLayoutEffect:r.useEffect;t.a=o},4169:function(e,t,n){"use strict";var r=n(0);t.a=function(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),r.createElement("g",{id:"CloseOutline-CloseOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"CloseOutline-编组"},r.createElement("rect",{id:"CloseOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),r.createElement("path",{d:"M10.6085104,8.11754663 L24.1768397,21.8195031 L24.1768397,21.8195031 L37.7443031,8.1175556 C37.8194278,8.04168616 37.9217669,7.999 38.0285372,7.999 L41.1040268,7.999 C41.3249407,7.999 41.5040268,8.1780861 41.5040268,8.399 C41.5040268,8.50440471 41.4624226,8.60554929 41.3882578,8.68044752 L26.2773302,23.9408235 L26.2773302,23.9408235 L41.5021975,39.3175645 C41.65763,39.4745475 41.6563731,39.7278104 41.4993901,39.8832429 C41.4244929,39.9574004 41.3233534,39.999 41.2179546,39.999 L38.1434012,39.999 C38.0366291,39.999 37.9342885,39.9563124 37.8591634,39.8804408 L24.1768397,26.0621438 L24.1768397,26.0621438 L10.4936501,39.8804497 C10.4185257,39.9563159 10.3161889,39.999 10.2094212,39.999 L7.13584526,39.999 C6.91493136,39.999 6.73584526,39.8199139 6.73584526,39.599 C6.73584526,39.4936017 6.77744443,39.3924627 6.85160121,39.3175656 L22.0763492,23.9408235 L22.0763492,23.9408235 L6.96554081,8.68044639 C6.81010226,8.52346929 6.81134951,8.27020637 6.9683266,8.11476782 C7.04322474,8.04060377 7.14436883,7.999 7.24977299,7.999 L10.3242852,7.999 C10.4310511,7.999 10.5333863,8.04168267 10.6085104,8.11754663 Z",id:"CloseOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))}},4170:function(e,t,n){"use strict";var r=n(0);t.a=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!1,function(){e.current=!0}}),[]),e}},4185:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));n(17);var r=n(0),o=n.n(r);const a="${label}不是一个有效的${type}";const i={current:{locale:{locale:"zh-CH",common:{confirm:"确定",cancel:"取消",loading:"加载中",close:"关闭"},Calendar:{title:"日期选择",confirm:"确认",start:"开始",end:"结束",today:"今日",markItems:["一","二","三","四","五","六","日"],yearAndMonth:"${year}年${month}月"},Cascader:{placeholder:"请选择"},Dialog:{ok:"我知道了"},DatePicker:{tillNow:"至今"},ErrorBlock:{default:{title:"页面遇到一些小问题",description:"待会来试试"},busy:{title:"前方拥堵",description:"刷新试试"},disconnected:{title:"网络有点忙",description:"动动手指帮忙修复"},empty:{title:"没有找到你需要的东西",description:"找找其他的吧"}},Form:{required:"必填",optional:"选填",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},ImageUploader:{uploading:"上传中...",upload:"上传"},InfiniteScroll:{noMore:"没有更多了",failedToLoad:"加载失败",retry:"重新加载"},Input:{clear:"清除"},Mask:{name:"背景蒙层"},Modal:{ok:"我知道了"},PasscodeInput:{name:"密码输入框"},PullToRefresh:{pulling:"下拉刷新",canRelease:"释放立即刷新",complete:"刷新成功"},SearchBar:{name:"搜索框"},Slider:{name:"滑动输入条"},Stepper:{decrease:"减少",increase:"增加"},Switch:{name:"开关"},Selector:{name:"选择组"}}}};function c(){return i.current}const l=o.a.createContext(null);function u(){var e;return null!==(e=Object(r.useContext)(l))&&void 0!==e?e:c()}},4193:function(e,t,n){e.exports={type:n(4046)}},4194:function(e,t,n){e.exports=n(20)},4212:function(e,t,n){var r=n(1027).EventEmitter;t.EventEmitter=r,t.mixin=function(e){for(var t in r.prototype)e.prototype[t]=r.prototype[t]}},4213:function(e,t){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=9007199254740991},4214:function(e,t,n){"use strict";t.a={description:"index-module_description_3zdQm",title:"index-module_title_wvDlw",modalStyle:"index-module_modalStyle_mcrRn",qrCode:"index-module_qrCode_tO6RV",resultBox:"index-module_resultBox_kmldH",resultContentBox:"index-module_resultContentBox_DyUmc",checkIcon:"index-module_checkIcon_R-xBl",closeIcon:"index-module_closeIcon_3nBx0",img:"index-module_img_CCkgm"}},4215:function(e,t,n){!function(t){var n,r={},o={16:!1,18:!1,17:!1,91:!1},a="all",i={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return c[e]||e.toUpperCase().charCodeAt(0)},u=[],s="single",d="all",f="single";for(n=1;n<20;n++)c["f"+n]=111+n;function p(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function m(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function v(e){for(n in o)o[n]=e[h[n]]}function y(e,t,n){var o,a;o=_(e),void 0===n&&(n=t,t="all");for(var i=0;i<o.length;i++)a=[],(e=o[i].split("+")).length>1&&(a=E(e),e=[e[e.length-1]]),e=e[0],(e=l(e))in r||(r[e]=[]),r[e].push({shortcut:o[i],scope:t,method:n,key:o[i],mods:a});return function(){b(e,t)}}function b(e){var t,n,o,a,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",u=[];for(t=_(e),a=0;a<t.length;a++){if((n=t[a].split("+")).length>1&&(u=E(n)),e=n[n.length-1],e=l(e),void 0===c&&(c=g()),!r[e])return;for(o=0;o<r[e].length;o++)(i=r[e][o]).scope===c&&m(i.mods,u)&&(r[e][o]={})}}for(n in i)y[n]=!1;function g(){return a||"all"}function _(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function E(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=i[t[n]];return t}function w(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}w(document,"keydown",(function(e){!function(e){var t,n,a,c,l,d;if(t=e.keyCode,-1==p(u,t)&&u.push(t),93!=t&&224!=t||(t=91),t in o)for(a in o[t]=!0,i)i[a]==t&&(y[a]=!0);else if(v(e),y.filter.call(this,e)&&t in r){d=g();var f=r[t].some((function(e){return e.scope==d})),m="multi"===s&&!f;for(c=0;c<r[t].length;c++)if((n=r[t][c])&&(n.scope==d||"all"==n.scope||m)){if(!Array.isArray(n.mods))continue;for(a in l=n.mods.length>0,o)(!o[a]&&p(n.mods,+a)>-1||o[a]&&-1==p(n.mods,+a))&&(l=!1);(0!=n.mods.length||o[16]||o[18]||o[17]||o[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}(e)})),w(document,"keyup",(function(e){var t,n=e.keyCode,r=p(u,n);if(r>=0&&u.splice(r,1),93!=n&&224!=n||(n=91),n in o)for(t in o[n]=!1,i)i[t]==n&&(y[t]=!1)})),w(window,"focus",(function(){for(n in o)o[n]=!1;for(n in i)y[n]=!1}));var O=t.key;t.key=y,t.key.setScope=function(e,t){f=s||"single",d=g(),a=e||"all",s=t||"single"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,o;for(t in r)for(n=r[t],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++;s=f||"single",a=d||"all"},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=p(u,e)},t.key.getPressedKeyCodes=function(){return u.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=O,e},t.key.unbind=b,e.exports=y}(this)},4218:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var i="x-yuque-pt-signature",c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=new URLSearchParams(window.location.search),this.isServify=!!this.get(i),this.viewport=this.get("viewport"),this.sidebar="0"===this.get("toc_sidebar")?"none":"toc",this.cards=this.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),this.thirdpartyCards=this.get("thirdparty_cards")?this.get("thirdparty_cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[],this.showTitle="0"!==this.get("title"),this.showHeader="0"!==this.get("header"),this.isEmbedMode=this.get("mode").startsWith("embed"),this.autoHeight=this.getAutoHeight(),this.editorType=this.get("editor_type"),this.editorMode=this.get("editor_mode"),this.language=this.get("language")||"zh-cn",this.pageMinWidth=this.get("page_min_width"),this.onchange="1"===this.get("onchange"),this.allowMention="0"!==this.get("mention"),this.allowResource="1"===this.get("resource"),this.watermark=this.get("watermark"),this.backgroundColor=this.get("background_color"),this.bodyBackgroundColor=this.get("body_background_color"),this.toolbarBackgroundColor=this.get("toolbar_background_color"),this.autoSaveInterval=this.getAutoSaveInterval(),this.saveToServer="0"!==this.get("save_to_server"),this.customUploadUrl=this.get("upload_url"),this.customUploadTypes=this.get("upload_types"),this.customMentionUrl=this.getMentionUrl(),this.customMentionOrigin=this.get("search_user_origin"),this.imageUploadUrl=this.getImageUploadUrl(),this.fileUploadUrl=this.getFileUploadUrl(),this.videoUploadUrl=this.getVideoUploadUrl(),this.videoUploadStatusUrl=this.getVideoUploadStatusUrl(),this.fullHTML="1"===this.query.get("full_html"),this.allowResizeVideo=!0,this.extraConfig=JSON.parse(this.query.get("extra_config")||"{}")},(t=[{key:"get",value:function(e){return this.query.get(e)||""}},{key:"getAutoHeight",value:function(){return!window.h5&&"0"!==this.get("auto_height")}},{key:"getAutoSaveInterval",value:function(){var e=this.get("auto_save_interval");return e&&!Number.isNaN(Number(e))?((e=Number(e))<60&&(e=60),1e3*e):null}},{key:"getMentionUrl",value:function(){var e=this.get("search_user_url");return this._joinCsrf(e)}},{key:"getImageUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("image")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=image"):null}},{key:"getFileUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("attachment")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=attachment"):null}},{key:"getVideoUploadUrl",value:function(){var e=this.get("upload_video_url");return e?this._joinCsrf(e):null}},{key:"getVideoUploadStatusUrl",value:function(){var e=this.get("upload_video_status_url");return e?this._joinCsrf(e):null}},{key:"_joinCsrf",value:function(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}},{key:"_getCustomCsrf",value:function(){var e=this.get("upload_csrf_token_field"),t=this.get("upload_csrf_token_value");return e?"".concat(e,"=").concat(encodeURIComponent(t)):""}},{key:"isExtremeMode",value:function(){return"extreme"===this.editorMode}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();c.isServify=function(){var e=new URLSearchParams(window.location.search).get("from");if(!e)return!1;try{if(new URL(e).searchParams.get(i))return!0}catch(e){}return!1},c.SERVIFY_TAG_SRT=i,t.a=c},4220:function(e,t,n){"use strict";var r=n(63),o="KnowledgePieGuide-module_wrapper_McOcd",a="KnowledgePieGuide-module_close_Hta-f",i="KnowledgePieGuide-module_breathBorder_JnuNa",c=(n(227),n(101)),l=(n(40),n(9)),u=n(0),s=n(323),d=n(1646),f="index-module_container_YifTz",p="index-module_titleContainer_E19Ts",m="index-module_content_u6ksX",h="index-module_close_xIF4s",v=function(e){var t=e.onReadGuide,n=e.sign,r=e.visible,o=e.arrowPointAtCenter,a=e.placement;return u.createElement(c.a,{overlayClassName:f,arrowPointAtCenter:o,destroyTooltipOnHide:!0,autoAdjustOverflow:!0,getPopupContainer:function(){return document.querySelector("#dragBarContainer")},title:u.createElement("div",{className:p},u.createElement("div",{className:m},u.createElement(s.a,{variant:"caption",mt:4,mb:4},__("知识库全新升级，来看看吧"))),u.createElement(l.a,{onClick:t,icon:u.createElement(d.default,{width:14,height:14}),type:"text",className:h})),placement:a,visible:r,align:{targetOffset:[0,4]}},n)},y={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"},{area:"DASHBOARD_BOOK_MENU",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip",customRender:v,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.transform="translateY(-21px)",e.style.left="50px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}},{area:"DASHBOARD_BOOK_MENU_COLLAPSED",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip_isCollapsed",customRender:v,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip_isCollapsed"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.left="17px",e.style.top="-30px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}},{area:"DASHBOARD_QUICKSTART",enable:!0,type:"custom",tip_id:"knowledge_pie_ai_doc_create",customRender:function(){return React.createElement(React.Fragment,null,React.createElement("div",{className:o},__("新增「 AI 帮你写 」功能帮助你提供高效的AI创作体验"),React.createElement(r.b,{name:"delete",size:16,className:a})),React.createElement("div",{className:i}))},placement:"bottom",containerSelector:'[data-feature-guide-container="knowledge_pie_ai_doc_create"]',readTrigger:["click"],createdAt:"2024-08-24",styleFix:function(e){e.style.position="absolute",e.style.left="-225px",e.style.top="20px",e.style.zIndex=4}},{area:"ADD_BUTTON_MENU",enable:!0,type:"mini",tip_id:"knowledge_pie_ai_doc_create_menu_item",tip:__("新增「 AI 帮你写 」功能帮助你提供高效的AI创作体验"),placement:"bottom",createdAt:"2024-08-24"}]},b=n(47),g=n(190),_=y.FEATURES,E={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(g.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else b.a.mine.readGuide({type:e.tip_id});var n=e.containerSelector&&document.querySelector(e.containerSelector);if(n){var r=n.querySelector(".larkui-feature-guide");if(!r)return;r.style.display="none"}},readMiniFeatureGuide:function(e,t){var n=e.tip_id;b.a.mine.readGuide({type:n}),t({type:"guide/readFeatureGuide",payload:{tip_id:n}})},findFeatureGuide:function(e){var t=e.tip_id,n=e.type;return _.find((function(e){return e.tip_id===t&&e.type===n}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};E.FEATURES=_;t.a=E},4226:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return E}));var r=n(424),o=n.n(r),a=n(4044),i=n.n(a),c=n(81),l=n(34);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var m="Reader.localReadMode";var h=new(function(){return e=function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=void 0,(r=p(r="lruCache"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.lruCache=new i.a(t)},(t=[{key:"initFromLocalStorage",value:function(){var e,t,n=this,r=(e=m,((t=c.a.get(e))?JSON.parse(t):null)||{});Object.keys(r).forEach((function(e){n.lruCache.set(e,r[e])}))}},{key:"set",value:function(e,t){this.lruCache.set(e,t)}},{key:"get",value:function(e){return this.lruCache.get(e)}},{key:"keys",value:function(){return this.lruCache.keys()}},{key:"delete",value:function(e){var t,n;this.lruCache.get(e)&&(null===(t=this.lruCache.cache)||void 0===t||t.delete(e),null===(n=this.lruCache._cache)||void 0===n||n.delete(e))}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())(500);function v(){var e,t={},n=s(h.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,o=h.get(r);t[r]=o}}catch(e){n.e(e)}finally{n.f()}!function(e,t){c.a.set(e,JSON.stringify(t))}(m,t)}h.initFromLocalStorage();var y=o()(v,500);function b(e){return"doc-".concat(e)}function g(e){var t=b(e);try{return!!h.get(t)}catch(e){return console.error(e),!1}}function _(e,t){var n=b(e);try{h.set(n,t),y()}catch(e){console.error(e)}}function E(e){var t=b(e);try{h.delete(t),y()}catch(e){console.error(e)}}l.c&&window.addEventListener("beforeunload",v)},4248:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(40),n(9)),a=(n(277),n(147)),i=(n(48),n(11)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(78),f=n.n(d),p=n(1442),m=n(282),h=n(47),v=n(208),y=n(1342),b=n.n(y),g=n(216),_=n(251),E=n(34),w=n(1467),O=n(975),k="DocExport-module_docExport_zwx9b",S="DocExport-module_title_eGdGG",N="DocExport-module_entry_qjwYu",x="DocExport-module_setting_yai1Y",A="DocExport-module_settingTitle_IjcSw",P="DocExport-module_settingUpload_3ymtX";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(){M=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new j(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(T([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==C(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(C(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function L(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,c,"next",e)}function c(e){L(a,r,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=Object(_.b)((function(){return Promise.all([n.e(14),n.e(1285)]).then(n.bind(null,8382))}),{suspense:!0}),z=O.a.STATUS,F=function(e){var t=e.bookId,n=e.exportParams,u=e.onCancel,s=e.wrapModal,d=void 0===s||s,y=function(e){var t=e.doc,n=e.bookId,r=e.exportParams,o=D(Object(c.useState)(t||null),2),a=o[0],i=o[1],u=D(Object(c.useState)(!1),2),s=u[0],d=u[1],p=D(Object(c.useState)(t?b.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),m=p[0],v=p[1],y=Object(c.useRef)();return Object(c.useEffect)((function(){var e=a&&("Mind"===a.type||"Board"===a.type),t=null,o=function(){var e=R(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.doc_id){e.next=11;break}return d(!0),e.next=5,h.a.docs.findOne({id:r.toc_node_url,book_id:n});case 5:t=e.sent,i(t),d(!1),v(b.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:v([b.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(a){if(!e)return;t=document.createElement("div"),document.body.appendChild(t),f.a.render(l.a.createElement(B,{height:"100%",width:"100%",onLoad:function(e){y.current=e},content:a.content}),t)}else o();return function(){t&&(document.body.removeChild(t),t=null)}}),[a]),{state:{currentDoc:a,loading:s,formats:m},lakeBoardEngineRef:y}}(e),g=y.state,_=g.currentDoc,C=g.loading,j=g.formats,I=y.lakeBoardEngineRef,L=D(Object(c.useState)(),2),U=L[0],F=L[1],V=D(Object(c.useState)(),2),G=V[0],Y=V[1],$=D(Object(c.useState)(),2),q=$[0],W=$[1],H=D(Object(c.useState)(z.INIT),2),K=H[0],Z=H[1],Q=D(Object(c.useState)(""),2),X=Q[0],J=Q[1],ee=Object(c.useRef)(),te={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},ne=function(){var e=R(M().mark((function e(r){var o,a,i,c,l,u;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:r,force:0},ee.current&&(a=ee.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),l=0;case 5:if(!(l<c)){e.next=33;break}if(e.prev=6,"lakebook"!==r){e.next=13;break}return e.next=10,h.a.books.exports(T(T({},o),{},{id:t,title:n.toc_node_title,toc_node_uuid:n.toc_node_uuid,toc_node_url:n.toc_node_url,with_children:!0}));case 10:u=e.sent,e.next=17;break;case 13:if(!_){e.next=17;break}return e.next=16,h.a.docs.exports(T(T({},o),{},{id:_.id}));case 16:u=e.sent;case 17:if("success"!==u.state){e.next=19;break}return e.abrupt("return",u);case 19:if("error"!==u.state){e.next=23;break}if(!u.error){e.next=22;break}return e.abrupt("return",u.error);case 22:return e.abrupt("return",{error:u.message});case 23:return e.next=25,Object(m.a)(i);case 25:l++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=R(M().mark((function e(t){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_||b.a.SUPPORTED_EXPORT_FORMATS[_.type]){e.next=2;break}return e.abrupt("return");case 2:return F(t),Z(z.PROCESSING),W(null),e.prev=5,e.next=8,ne(t);case 8:if(!(n=e.sent).error){e.next=13;break}return Z(z.ERROR),J(n.error),e.abrupt("return");case 13:F(t),Z(z.SUCCESS),W(n.url),Object(v.b)(n.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),Z(z.ERROR),J(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=R(M().mark((function e(t,n){var r;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.current&&(null===(r=I.current)||void 0===r||r.export(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e){var t=_&&("Mind"===_.type||"Board"===_.type);!t||_.content?(Y(b.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!t||e!==b.a.THIRD_PARTY_FORMAT.JPG.key&&e!==b.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==_?void 0:_.type)||"pdf"!==e)&&te[e]?(F(e),Z(z.SETTING)):re(e):oe(e,{filename:_.title})):i.a.warn(__("画板为空，请编辑发布后导出"))},ie=null;return K===z.PROCESSING?ie=G?l.a.createElement("div",{className:x},l.a.createElement("h1",{className:A},__("导出 {type}",{type:G.name})),l.a.createElement(O.a.Processing,{tip:__("正在导出中...")})):null:K===z.SUCCESS?ie=G?l.a.createElement("div",{className:x},l.a.createElement("h1",{className:A},__("导出 {type}",{type:G.name})),l.a.createElement(O.a.Success,{tip:__("文件生成成功"),action:l.a.createElement("a",{href:E.c?null:q,desktopDisableHref:!0,target:"_blank",onClick:function(){Object(v.b)(q)}},__("点击下载"))})):null:K===z.ERROR?ie=l.a.createElement(O.a.Error,{tip:__("文件生成失败"),error:X,action:l.a.createElement(o.a,{icon:l.a.createElement(p.default,null),size:"small",onClick:function(){re(U)}},__("重新生成"))}):K===z.INIT&&(ie=l.a.createElement("div",{className:N},l.a.createElement("div",{className:S},__("导出文档")),l.a.createElement(a.a,{spinning:C},l.a.createElement(w.a,{mode:"export",types:j,onSelect:ae})))),ie=l.a.createElement("div",{className:k},ie,function(){if(!G||!_)return null;var e=te[G.key];return e?l.a.createElement("div",{className:x,style:{display:K===z.SETTING?"block":"none"}},l.a.createElement("h1",{className:A},__("{type} 导出配置",{type:G.name})),l.a.createElement(O.a.AdvanceSetting,{wrappedComponentRef:ee,target:_,type:G,settings:e,actions:l.a.createElement(o.a,{type:"primary",className:P,onClick:function(){return re(U)}},__("导出"))})):null}()),l.a.createElement("div",null,d?l.a.createElement(r.a,{title:null,onCancel:u,visible:!0,footer:null,width:640,maskClosable:!1},ie):ie)};F.defaultProps={exportParams:{}},F.propTypes={doc:s.a.object,exportParams:s.a.object,bookId:s.a.number.isRequired,onCancel:s.a.func.isRequired,wrapModal:s.a.bool};t.a=Object(g.b)(F,!0)},4281:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(40);var r=n(9),o=(n(67),n(31)),a=(n(53),n(12)),i=(n(134),n(21)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(308),f=n(1220),p={nameVersion:"SaveAsVersion-module_nameVersion_VphI2"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==m(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function v(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.version,n=y(i.a.useForm(),1)[0],r=function(){var r,o=(r=h().mark((function r(){var o,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.validateFields();case 3:return o=r.sent,r.next=6,e.docVersionProxy.name({id:t.id,name:o.name});case 6:a=r.sent,e.onCreated(a),e.onCancel(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return l.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:r,title:__("保存为版本"),getContainer:function(){var t;return(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body},visible:!0},l.a.createElement(i.a,{"data-testid":"history-name-form",className:p.nameVersion,form:n,layout:"vertical"},l.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},l.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function _(e){var t=e.version,n=y(Object(c.useState)(!1),2),o=n[0],a=n[1],i=t.local&&t.draft;return!Object(f.b)()||i?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{"data-testid":"save-as-version",onClick:function(){a(!0)}},__("保存为版本")),o&&l.a.createElement(g,{getContainer:e.getContainer,version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){a(!1)}}))}g.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},_.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};t.b=Object(d.b)(g,!1)},4282:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return A}));var r,o=n(0),a=n.n(o),i=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,s=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(c)for(var n of c(t))u.call(t,n)&&s(e,n,t[n]);return e},f=(e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&c)for(var r of c(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class{constructor(e,n,r,o){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let e=0;e<this.size;e++)i.push(!1);for(let e=0;e<this.size;e++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const c=this.addEccAndInterleave(r);if(this.drawCodewords(c),-1==o){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(o=t,e=n),this.applyMask(t)}}a(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(n,r){const o=e.QrSegment.makeSegments(n);return t.encodeSegments(o,r)}static encodeBinary(n,r){const o=e.QrSegment.makeBytes(n);return t.encodeSegments([o],r)}static encodeSegments(e,n,o=1,i=40,l=-1,u=!0){if(!(t.MIN_VERSION<=o&&o<=i&&i<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let s,d;for(s=o;;s++){const r=8*t.getNumDataCodewords(s,n),o=c.getTotalBits(e,s);if(o<=r){d=o;break}if(s>=i)throw new RangeError("Data too long")}for(const e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&d<=8*t.getNumDataCodewords(s,e)&&(n=e);let f=[];for(const t of e){r(t.mode.modeBits,4,f),r(t.numChars,t.mode.numCharCountBits(s),f);for(const e of t.getData())f.push(e)}a(f.length==d);const p=8*t.getNumDataCodewords(s,n);a(f.length<=p),r(0,Math.min(4,p-f.length),f),r(0,(8-f.length%8)%8,f),a(f.length%8==0);for(let e=236;f.length<p;e^=253)r(e,8,f);let m=[];for(;8*m.length<f.length;)m.push(0);return f.forEach(((e,t)=>m[t>>>3]|=e<<7-(7&t))),new t(s,n,m,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let e=0;e<10;e++)n=n<<1^1335*(n>>>9);const r=21522^(t<<10|n);a(r>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,o(r,e));this.setFunctionModule(8,7,o(r,6)),this.setFunctionModule(8,8,o(r,7)),this.setFunctionModule(7,8,o(r,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,o(r,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,o(r,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,o(r,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;a(t>>>18==0);for(let e=0;e<18;e++){const n=o(t,e),r=this.size-11+e%3,a=Math.floor(e/3);this.setFunctionModule(r,a,n),this.setFunctionModule(a,r,n)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const o=Math.max(Math.abs(r),Math.abs(n)),a=e+r,i=t+n;0<=a&&a<this.size&&0<=i&&i<this.size&&this.setFunctionModule(a,i,2!=o&&4!=o)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const o=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],i=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],c=Math.floor(t.getNumRawDataModules(n)/8),l=o-c%o,u=Math.floor(c/o);let s=[];const d=t.reedSolomonComputeDivisor(i);for(let n=0,r=0;n<o;n++){let o=e.slice(r,r+u-i+(n<l?0:1));r+=o.length;const a=t.reedSolomonComputeRemainder(o,d);n<l&&o.push(0),s.push(o.concat(a))}let f=[];for(let e=0;e<s[0].length;e++)s.forEach(((t,n)=>{(e!=u-i||n>=l)&&f.push(t[e])}));return a(f.length==c),f}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const i=t-a,c=0==(t+1&2)?this.size-1-r:r;!this.isFunction[c][i]&&n<8*e.length&&(this.modules[c][i]=o(e[n>>>3],7-(7&n)),n++)}}a(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let r=!1,o=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[n][i]==r?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,a),r||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),r=this.modules[n][i],o=1);e+=this.finderPenaltyTerminateAndCount(r,o,a)*t.PENALTY_N3}for(let n=0;n<this.size;n++){let r=!1,o=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][n]==r?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,a),r||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),r=this.modules[i][n],o=1);e+=this.finderPenaltyTerminateAndCount(r,o,a)*t.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let r=0;r<this.size-1;r++){const o=this.modules[n][r];o==this.modules[n][r+1]&&o==this.modules[n+1][r]&&o==this.modules[n+1][r+1]&&(e+=t.PENALTY_N2)}let n=0;for(const e of this.modules)n=e.reduce(((e,t)=>e+(t?1:0)),n);const r=this.size*this.size,o=Math.ceil(Math.abs(20*n-10*r)/r)-1;return a(0<=o&&o<=9),e+=o*t.PENALTY_N4,a(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return a(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let o=0;o<e;o++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map((e=>0));for(const o of e){const e=o^r.shift();r.push(0),n.forEach(((n,o)=>r[o]^=t.reedSolomonMultiply(n,e)))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return a(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];a(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};let n=t;function r(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function o(e,t){return 0!=(e>>>t&1)}function a(e){if(!e)throw new Error("Assertion error")}n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;const i=class{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(e){let t=[];for(const n of e)r(n,8,t);return new i(i.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!i.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let n=0;n<e.length;){const o=Math.min(e.length-n,3);r(parseInt(e.substr(n,o),10),3*o+1,t),n+=o}return new i(i.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!i.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t,n=[];for(t=0;t+2<=e.length;t+=2){let o=45*i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));o+=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),r(o,11,n)}return t<e.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,n),new i(i.Mode.ALPHANUMERIC,e.length,n)}static makeSegments(e){return""==e?[]:i.isNumeric(e)?[i.makeNumeric(e)]:i.isAlphanumeric(e)?[i.makeAlphanumeric(e)]:[i.makeBytes(i.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)r(e,8,t);else if(e<16384)r(2,2,t),r(e,14,t);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,t),r(e,21,t)}return new i(i.Mode.ECI,0,t)}static isNumeric(e){return i.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return i.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}};let c=i;c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=c})(r||(r={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};let n=t;n.LOW=new t(0,1),n.MEDIUM=new t(1,0),n.QUARTILE=new t(2,3),n.HIGH=new t(3,2),e.Ecc=n})(t=e.QrCode||(e.QrCode={}))})(r||(r={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};let n=t;n.NUMERIC=new t(1,[10,12,14]),n.ALPHANUMERIC=new t(2,[9,11,13]),n.BYTE=new t(4,[8,16,16]),n.KANJI=new t(8,[8,10,12]),n.ECI=new t(7,[0,0,0]),e.Mode=n})(t=e.QrSegment||(e.QrSegment={}))})(r||(r={}));var p=r,m={L:p.QrCode.Ecc.LOW,M:p.QrCode.Ecc.MEDIUM,Q:p.QrCode.Ecc.QUARTILE,H:p.QrCode.Ecc.HIGH},h=128,v="L",y="#FFFFFF",b="#000000",g=!1,_=4,E=.1;function w(e,t=0){const n=[];return e.forEach((function(e,r){let o=null;e.forEach((function(a,i){if(!a&&null!==o)return n.push(`M${o+t} ${r+t}h${i-o}v1H${o+t}z`),void(o=null);if(i!==e.length-1)a&&null===o&&(o=i);else{if(!a)return;null===o?n.push(`M${i+t},${r+t} h1v1H${i+t}z`):n.push(`M${o+t},${r+t} h${i+1-o}v1H${o+t}z`)}}))})),n.join("")}function O(e,t){return e.slice().map(((e,n)=>n<t.y||n>=t.y+t.h?e:e.map(((e,n)=>(n<t.x||n>=t.x+t.w)&&e))))}function k(e,t,n,r){if(null==r)return null;const o=n?_:0,a=e.length+2*o,i=Math.floor(t*E),c=a/t,l=(r.width||i)*c,u=(r.height||i)*c,s=null==r.x?e.length/2-l/2:r.x*c,d=null==r.y?e.length/2-u/2:r.y*c;let f=null;if(r.excavate){let e=Math.floor(s),t=Math.floor(d);f={x:e,y:t,w:Math.ceil(l+s-e),h:Math.ceil(u+d-t)}}return{x:s,y:d,h:u,w:l,excavation:f}}var S=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function N(e){const t=e,{value:n,size:r=h,level:o=v,bgColor:i=y,fgColor:c=b,includeMargin:l=g,style:u,imageSettings:s}=t,E=f(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),N=null==s?void 0:s.src,x=a.a.useRef(null),A=a.a.useRef(null),[P,C]=a.a.useState(!1);a.a.useEffect((()=>{if(null!=x.current){const e=x.current,t=e.getContext("2d");if(!t)return;let a=p.QrCode.encodeText(n,m[o]).getModules();const u=l?_:0,d=a.length+2*u,f=k(a,r,l,s),h=A.current,v=null!=f&&null!==h&&h.complete&&0!==h.naturalHeight&&0!==h.naturalWidth;v&&null!=f.excavation&&(a=O(a,f.excavation));const y=window.devicePixelRatio||1;e.height=e.width=r*y;const b=r/d*y;t.scale(b,b),t.fillStyle=i,t.fillRect(0,0,d,d),t.fillStyle=c,S?t.fill(new Path2D(w(a,u))):a.forEach((function(e,n){e.forEach((function(e,r){e&&t.fillRect(r+u,n+u,1,1)}))})),v&&t.drawImage(h,f.x+u,f.y+u,f.w,f.h)}})),a.a.useEffect((()=>{C(!1)}),[N]);const j=d({height:r,width:r},u);let T=null;return null!=N&&(T=a.a.createElement("img",{src:N,key:N,style:{display:"none"},onLoad:()=>{C(!0)},ref:A})),a.a.createElement(a.a.Fragment,null,a.a.createElement("canvas",d({style:j,height:r,width:r,ref:x},E)),T)}function x(e){const t=e,{value:n,size:r=h,level:o=v,bgColor:i=y,fgColor:c=b,includeMargin:l=g,imageSettings:u}=t,s=f(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let E=p.QrCode.encodeText(n,m[o]).getModules();const S=l?_:0,N=E.length+2*S,x=k(E,r,l,u);let A=null;null!=u&&null!=x&&(null!=x.excavation&&(E=O(E,x.excavation)),A=a.a.createElement("image",{xlinkHref:u.src,height:x.h,width:x.w,x:x.x+S,y:x.y+S,preserveAspectRatio:"none"}));const P=w(E,S);return a.a.createElement("svg",d({height:r,width:r,viewBox:`0 0 ${N} ${N}`},s),a.a.createElement("path",{fill:i,d:`M0,0 h${N}v${N}H0z`,shapeRendering:"crispEdges"}),a.a.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),A)}var A=e=>{const t=e,{renderAs:n}=t,r=f(t,["renderAs"]);return"svg"===n?a.a.createElement(x,d({},r)):a.a.createElement(N,d({},r))}},4283:function(e,t,n){"use strict";var r=n(4131),o=n(258),a=n.n(o),i=n(212),c=n(60);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function f(e,t,n){return t=m(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var b=new(n.n(c).a)("connect_base"),g={connectionTimeout:2e4,maxRetries:0,heartBeatInterval:1e4,congestionTimeout:8e3},_="connecting",E="offline",w="connected",O=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(n=f(this,t),"onOpen",(function(){b("connected"),n.status=w,n.stopCongestionMonitor(),n.emit("ready",n.socket),n._heartBeat=null})),v(n,"onClose",(function(e){b("close",{retryCount:n.socket.retryCount,readyState:n.socket.readyState}),n.disconnect(),n.emit("close",e)})),v(n,"onMessage",(function(e){try{var t=JSON.parse(e.data);n.pong(t),b("message",t)}catch(t){b("invalid message",e.data)}})),v(n,"onError",(function(e){b("error",{message:e.message,retryCount:n.socket.retryCount,readyStatus:n.socket.readyState,error:e}),"TIMEOUT"===e.message&&(n.status=E),n.emit("error",e)})),n.url=e,n.socket=null,n.status=null,n._heartBeat=null,n.heartBeatInterval=r.heartBeatInterval||g.heartBeatInterval,n.option=s(s({},g),r),n.connect(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(o=[{key:"connect",value:function(){this.status=_;var e=new r.a(this.url,[],this.option);this.socket=e,e.addEventListener("open",this.onOpen),e.addEventListener("close",this.onClose),e.addEventListener("message",this.onMessage),e.addEventListener("error",this.onError),this.startCongestionMonitor()}},{key:"startCongestionMonitor",value:function(){var e=this;this.stopCongestionMonitor(),this.congestTimer=setTimeout((function(){e.emit("congestion")}),this.option.congestionTimeout)}},{key:"stopCongestionMonitor",value:function(){this.congestTimer&&clearTimeout(this.congestTimer)}},{key:"disconnect",value:function(){this.stopHeartBeat(),this.stopCongestionMonitor(),this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket.close(),this.socket=null),this.status=E}},{key:"ping",value:function(){var e=this;if(this.socket){var t={action:"heartbeat",pingId:Object(i.default)(10),pingAt:+new Date};this._heartBeat&&this.transmitNetStatus("congestion"),this._heartBeat=t,this.socket.send(JSON.stringify(t)),b("ping",t),this.status!==E&&(this.pingTimer=setTimeout((function(){e.ping()}),this.heartBeatInterval))}}},{key:"pong",value:function(e){e&&"heartbeat"===e.action&&this._heartBeat&&this._heartBeat.pingId===e.pingId&&(new Date-this._heartBeat.pingAt>this.option.congestionTimeout?(this.transmitNetStatus("congestion"),b("pong congestion")):(this.transmitNetStatus("congestionEnd"),b("pong congestionEnd")),this._heartBeat=null)}},{key:"transmitNetStatus",value:function(e){this.netStatus!==e&&(this.emit(e),this.netStatus=e)}},{key:"stopHeartBeat",value:function(){b("stopHeartBeat"),this.pingTimer&&clearTimeout(this.pingTimer)}},{key:"startHeartBeat",value:function(){var e=this;b("startHeartBeat"),this.pingTimer=setTimeout((function(){e.ping()}),1e3)}},{key:"broadcast",value:function(e,t){if(this.socket){var n={action:"broadcast",data:{type:e,body:t,sender:t.user}};b("broadcast",n),this.socket.send(JSON.stringify(n))}}}])&&d(n.prototype,o),a&&d(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(a.a);t.a=O},4284:function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,a={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)a[n[0][r]]=e[r];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var n=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](r?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=a[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=a[e];r&&t.removeEventListener(r,n,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports=!1:window.screenfull=!1}()},4288:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(78),u=n.n(l),s=n(1646);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function b(e){var t=e.type,n=void 0===t?"lite":t,i=e.tip,c=e.enableMultiLines,l=e.guideSignContainerStyle,d=h(Object(o.useState)(!0),2),f=d[0],m=d[1];if(!f)return null;var v=document.querySelector(e.containerSelector);if(!v)return null;var b=function(){m(!1),e.onRead()},g=function(){var t=v.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[n]),t.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(n)){v.style.position="relative";var r=v.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(r.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+r.height,"px"),t.style.left="".concat(r.width/2-6,"px");break;default:t.style.left="".concat((r.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}e.styleFix&&e.styleFix(t)}var o=e.readTrigger||[],a=function(t){t.target.closest(".larkui-feature-guide")&&(t.preventDefault(),t.stopPropagation()),m(!1),e.onRead(),o.forEach((function(t){v.removeEventListener(t,e.closeGuide||a)}))};return o.forEach((function(t){v.addEventListener(t,e.closeGuide||a)})),v.appendChild(t),t}(),_=y(b,l),E=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===n)return u.a.createPortal(_,g);var w="center"!==e.placement&&"top"!==e.placement;return"custom"===n?u.a.createPortal(a.a.createElement(e.customRender,p(p({},e),{},{sign:_,visible:f,arrowPointAtCenter:w,portalDom:g,onReadGuide:b,setVisible:m})),g):"lite"===n?u.a.createPortal(a.a.createElement(r.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:w,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,c?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:b},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:b,className:E},a.a.createElement(s.default,{width:16,height:16}))),placement:e.placement,visible:f,align:{targetOffset:[0,4]}},_),g):void 0}b.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},y((function(){})))},b.defaultProps={enableMultiLines:!1},b.propTypes={type:c.a.oneOf(["lite","mini","custom"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool,customRender:c.a.element,styleFix:c.a.func,closeGuide:c.a.func};t.a=b},4292:function(e,t,n){var r=new(n(4618));e.exports=r},4293:function(e,t){function n(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.name="ShareDBError",n.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=n},4294:function(e,t,n){t.defaultType=n(4193).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},4305:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return A}));n(48);var r=n(11),o=n(0),a=n(64),i=n.n(a);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e,t){return t.book&&Object.values(i.a.TYPE).includes(e.type)},s=function(e,t){if(!e.joinToken)return"";var n=e.joinToken;if("Doc"===n.target_type){var r=e.slug,o=t.group,a=t.book,i=t.isEditing,c="".concat(window.location.origin,"/g/").concat(o.login,"/").concat(a.slug,"/").concat(r,"/collaborator/join?token=").concat(n.token);if(i){var l="/".concat(o.login,"/").concat(a.slug,"/").concat(r,"/edit");c="".concat(c,"&goto=").concat(encodeURIComponent(l))}return c+="# ".concat(__("邀你参与文档协作"),"《").concat(e.title,"》")}return""},d=function(e){return!e.joinToken||!!e.joinToken.approve},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(Object(o.useState)(!1),2),a=n[0],i=n[1],l=c(Object(o.useState)(s(e,t)),2),f=l[0],p=l[1],m=c(Object(o.useState)(d(e)),2),h=m[0],v=m[1],y=t.dispatch,b=function(n){i(!0);var o="proxy.web/books.token",a="book/updateToken",c=e.id;u(e,t)&&(o="proxy.web/docs.token",a="doc/updateToken",c=e.id),y({type:o,payload:{data:{id:c,force:n},reducer:a}}).then((function(o){n&&r.a.success(__("重置链接成功")),e.joinToken=o;var a=s(e,t);p(a),v(d(e)),i(!1)}))};return Object(o.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!f&&b()}),[e.id]),[f,function(){return b(!0)},a,h,function(n){var r="proxy.web/books.updateToken",o="book/updateToken",a=e.id;u(e,t)&&(r="proxy.web/docs.updateToken",o="doc/updateToken",a=e.id),y({type:r,payload:{data:{id:a,approve:!0===n?1:0},reducer:o}}).then((function(e){v(n)}))}]},p=n(424),m=n.n(p),h=n(3746),v=n(47);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==y(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function g(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.organization,r=_(Object(o.useState)(!1),2),a=r[0],i=r[1],c=_(Object(o.useState)([]),2),l=c[0],u=c[1],s=Object(o.useCallback)(m()(function(){var e,r=(e=b().mark((function e(r){var o,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return i(!1),e.abrupt("return");case 3:return i(!0),o={q:r.trim(),include_unconfirmed_corp_account:!0,optional_properties:t.optional_properties},n&&n.id||(o.global=!0),e.prev=6,e.next=9,v.a.users.complete(o);case 9:a=e.sent,u(Object(h.format)(a));case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[6,,11,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,c,"next",e)}function c(e){g(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),200),[]);return[l,s,a,function(){return u([])}]};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(){var e=O(Object(o.useState)(!1),2),t=e[0],n=e[1];return[t,Object(o.useCallback)((function(){return n((function(e){return!e}))}),[])]},N=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var A=function(e,t){return function(n,r){var o=e.id,a=e.settings.homepage,i=a?a.layout:{};Object.keys(i).map((function(e){return i[e]&&i[e].length>0&&(i[e]=i[e].map((function(e){return"string"==typeof e&&e===t||"object"===x(e)&&e.type===t?{name:n,type:t}:e}))),i[e]})),v.a.groups.settings({id:o,homepage:{layout:i}}).then((function(e){r&&"function"==typeof r&&r(e)}))}}},4309:function(e,t,n){"use strict";n(3528);var r=n(1276);n(3523);t.a=r.a},4314:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(473),i=n(4220),c=n(308),l=n(4288);t.a=Object(c.b)(Object(a.d)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,n=e.tip_id;return Object(r.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:n,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),o.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(n),onClick:function(){var t=i.a.findFeatureGuide({tip_id:n,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[n])&&o.a.createElement(l.a.Mini,null))})),!1)},4344:function(e,t,n){"use strict";var r=n(1342);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a={adaptDocToDocument:function(e){return{origin:"database",format:e.format,draft_version:e.draft_version,base_timestamp:e.content_updated_at,value:this.adaptBodyToContent(e)}},adaptBodyToContent:function(e){var t;return"object"===o(t=r.FORMATS_SAVE_TO_BODY_ASL.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"")&&(t=JSON.stringify(t)),t.trim()},adaptCacheDataToDocument:function(e,t){if(!e)return null;var n=JSON.parse(e);return"object"!==o(n)?null:["lakesheet","spreadjs"].includes(t)&&n.doc?{origin:"cache",format:t,draft_version:n.doc.data.draft_version,value:n.doc.value}:{origin:"cache",format:t,draft_version:n.draft_version,base_timestamp:n.base_timestamp||null,value:n.content}},adaptChangeToCacheData:function(e,t){var n={draft_version:e.draft_version,base_timestamp:t,content:e.value,offline:navigator&&!1===navigator.onLine};return JSON.stringify(n)},adapterDocumentContent:function(e){return"string"==typeof e.value?e.value:"object"===o(e.value)?JSON.stringify(e.value):""}};t.a=a},4352:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(60),o=n.n(r),a=n(258),i=n.n(a),c=n(163);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function s(e,t,n){return t=f(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var v=o()("pagestatus"),y={ACTIVE:"active",INACTIVE:"inActive",ONLINE:"online",OFFLINE:"offline",CLOSE:"close",LONG_TIME_NO_REFRESH:"longTimeNoRefresh"},b=new Date,g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(e=s(this,t),"onVisibilityChange",(function(){v("visibility change to: ",document.visibilityState),"hidden"===document.visibilityState?e.onPageHide():"visible"===document.visibilityState&&e.onActive()})),m(e,"registerCloseChecker",(function(t){e.closeChecker.push(t)})),m(e,"closeAbleCheck",(function(){var t=e.closeChecker;for(var n in t)if(!t[n]())return!1;return!0})),m(e,"onBeforeunload",(function(t){if(v("close"),e.emit(y.CLOSE),!e.closeAbleCheck())return t.returnValue="确定要离开么？","确定要离开么？"})),m(e,"onBlur",(function(){e.transmitStatus(y.INACTIVE)})),m(e,"onPageHide",(function(){e.transmitStatus(y.INACTIVE),e.checkPageReload()})),m(e,"onPageNetworkChange",(function(t){t?e.emit(y.ONLINE):e.emit(y.OFFLINE)})),m(e,"checkPageReload",(function(){new Date-b>e.REFRESH_INTERVAL&&c.b.onLine&&e.emit(y.LONG_TIME_NO_REFRESH)})),m(e,"transmitStatus",(function(t){e.status!==t&&(e.status=t,v(t),e.emit(t))})),m(e,"onActive",(function(t){e.startIdle(),e.transmitStatus(y.ACTIVE)})),e.IDLE_INTERVAL=n.idleInterval||60,e.status=y.ACTIVE,e.init(),e.closeChecker=[],e.REFRESH_INTERVAL=2592e5,e.destroyed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(r=[{key:"isActive",get:function(){return this.status===y.ACTIVE}},{key:"init",value:function(){this.bindEvents()}},{key:"destroy",value:function(){this.destroyed||(this.unbindEvents(),this.clearIdle(),this.destroyed=!0)}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.onBeforeunload),window.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.onPageHide),c.b.on(c.a,this.onPageNetworkChange),window.addEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.addEventListener(t,e.onActive)})),this.startIdle()}},{key:"unbindEvents",value:function(){var e=this;window.removeEventListener("beforeunload",this.onBeforeunload),window.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.onPageHide),c.b.off(c.a,this.onPageNetworkChange),window.removeEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.removeEventListener(t,e.onActive)})),this.closeChecker=[]}},{key:"setIdle",value:function(e){isNaN(e)||(this.IDLE_INTERVAL=e)}},{key:"startIdle",value:function(){var e=this;this.clearIdle(),this._idleTimer=setTimeout((function(){e.transmitStatus(y.INACTIVE),e.checkPageReload()}),1e3*this.IDLE_INTERVAL)}},{key:"clearIdle",value:function(){this._idleTimer&&clearTimeout(this._idleTimer)}}])&&u(n.prototype,r),o&&u(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.a);t.b=g},4354:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(813),i=n(1849),c=n(1441),l=n(4214);t.a=function(e){var t=e.verifyStatus,n=e.seconds,u=Object(r.useCallback)((function(){switch(t){case a.CERTIFICATION_STATUS.certified:return o.a.createElement("div",{className:l.a.resultContentBox},o.a.createElement(i.default,{className:l.a.checkIcon}),o.a.createElement("div",{className:l.a.title},__("实名认证成功，{seconds}s 后自动关闭",{seconds:n})),o.a.createElement("div",{className:l.a.description},__("实名认证成功，可继续进行分享操作")));case a.CERTIFICATION_STATUS.fail:return o.a.createElement("div",{className:l.a.resultContentBox},o.a.createElement(c.default,{className:l.a.closeIcon}),o.a.createElement("div",{className:l.a.title},__("认证失败")),o.a.createElement("div",{className:l.a.description},__("抱歉，系统识别你的账号存在风险，未通过安全认证")));default:return null}}),[t,n]);return o.a.createElement("div",null,u(),o.a.createElement("div",{className:l.a.resultBox},o.a.createElement("img",{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*OaxJQpBX8s8AAAAAAAAAAAAADvuFAQ/original"})))}},4355:function(e,t,n){var r=n(182);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===l?c==c&&!r(c):n(c,l)))var l=c,u=i}return u}},4364:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(48),n(11)),a=n(0),i=n.n(a),c=n(60),l=n.n(c),u=n(4284),s=n.n(u),d=n(64),f=n.n(d),p=n(4145),m=n(74),h=n(424),v=n.n(h),y=n(1250),b=n(4075),g=n(259),_=n(4076),E=n(1223),w=n(4006),O=n(114),k=n(1226),S=n(34),N=n(4140),x=n(14),A=n.n(x),P=n(238),C=n(3785);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(){T=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==j(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,c,"next",e)}function c(e){R(a,r,o,i,c,"throw",e)}i(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var z=l()("doc:useDocAction"),F=window.appData.isYuqueMobileApp,V=function(e,t,n){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,n)},G=v()((function(e){V("execCommand","defaultFontsize",e),V("execCommand","clearDefaultFontsize")}),200),Y=v()((function(e){V("execCommand","paragraphSpacing",e)})),$=v()((function(e){V("execCommand","autoSpacing",!!e)}));t.a=function(e){var t=e.book,c=e.doc,l=e.commandParams,u=e.dispatch,d=e.onCommandsExecuted,h=e.onSelectTemplate,v=e.onCreateDoc,x=e.history,j=e.spaMode,I=Object(E.a)(t),L=U(Object(a.useState)(null),2),R=L[0],B=L[1],q=U(Object(a.useState)(!1),2),W=q[0],H=q[1],K=U(Object(a.useState)(!1),2),Z=K[0],Q=K[1];Object(a.useEffect)((function(){Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1414)]).then(n.bind(null,4362))}),[]);var X=function(){return V("queryCommandValue","defaultFontsize",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},J=U(Object(a.useState)(V("queryCommandValue","typography")),2),ee=J[0],te=J[1],ne=U(Object(a.useState)(X(!1)),2),re=ne[0],oe=ne[1],ae=U(Object(a.useState)(V("queryCommandValue","paragraphSpacing")),2),ie=ae[0],ce=ae[1],le=U(Object(a.useState)(!!V("queryCommandValue","autoSpacing")),2),ue=le[0],se=le[1],de=function(e){te(e),V("execCommand","typography",e),X()||oe(X(!1))},fe=Object(a.useCallback)((function(e){oe(e),G(e)}),[ie,re,ue]),pe=Object(a.useCallback)((function(e){ce(e),Y(e)}),[ie,re,ue]),me=Object(a.useCallback)((function(e){se(!!e),$(!!e)}),[ie,re,ue]),he=function(e){V("execCommand","layout",e)},ve=function(){B(null)},ye=function(){var e=D(T().mark((function e(){var n,r,a,i,c,u,s,d,f,p,h,y,b,g=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=M(M({},n=g.length>0&&void 0!==g[0]?g[0]:{}),l),r=n.slug||k.a.createSlug(),n.slug=r,n.book_id=t.id,n.format||(n.format=w.a.getDefaultDocumentFormat(n.type)),a=null,e.prev=7,!j||!x){e.next=26;break}return e.next=11,k.a.createDoc(n,void 0,{useOriginResp:!0});case 11:if(i=e.sent,c=i.data,u=i.toc,z("doc created",{cmd:R,doc:c}),s="/".concat(t.namespace,"/").concat(c.slug,"/edit"),d=s,"doc_toc"===n.create_from&&((f=new URLSearchParams(window.location.search)).set("toc_node_uuid",n.toc_node_uuid),d="".concat(s,"?").concat(f.toString())),I.current.id!==t.id){e.next=23;break}if("markdown"===c.format?(p=new URL(s,window.location.origin),a=a||window,"doc_toc"===n.create_from&&p.searchParams.set("toc_node_uuid",n.toc_node_uuid),a.location.href=p.href):x.push(d),!v){e.next=23;break}return v(c,u),e.abrupt("return");case 23:ve(),e.next=40;break;case 26:if(j){e.next=40;break}return e.next=29,k.a.createDoc(n);case 29:if(h=e.sent,z("doc created",{cmd:R,doc:h}),y="/".concat(t.namespace,"/").concat(h.slug,"/edit"),b=new URL(y,window.location.origin),a=a||window,"doc_toc"===n.create_from&&b.searchParams.set("toc_node_uuid",n.toc_node_uuid),ve(),!v){e.next=39;break}return v(h),e.abrupt("return");case 39:a.location.href=b.href;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(7),"limit_exceeded"===e.t0.code?o.a.error(e.t0.message):e.t0.code!==m.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 45:return e.prev=45,a=null,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[7,42,45,48]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=__("确认删除 {title}？",{title:c.title});r.a.confirm({title:e,content:__(""),onOk:function(){u({type:"proxy.web/docs.destroy",payload:{data:{id:c.id}}}).then((function(e){d({cmd:O.a.DOC.delete.cmd,result:e})}))}})},ge=Object(b.a)(),_e=ge.loadTemplateSelector,Ee=ge.showTemplateSelector,we=ge.contextHolder,Oe=Object(N.a)(),ke=Oe.loadCreateAIDocModal,Se=Oe.showCreateAIDocModal,Ne=Oe.contextHolder,xe=function(){var e=D(T().mark((function e(){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee({book:t});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",ve());case 5:return e.abrupt("return",Object(y.d)(t,n,l));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=D(T().mark((function e(){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se({book:t,isDesktop:!(null===(n=window.appData)||void 0===n||!n.isDesktopApp),commandParams:l});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(e){return'<!doctype lake><meta name="doc-version" content="1" /><meta name="viewport" content="fixed" /><meta name="typography" content="classic" /><meta name="paragraphSpacing" content="relax" /><p data-lake-id="u5a25ad48" id="u5a25ad48"><span data-lake-id="u2fd5925c" id="u2fd5925c">文档生成器页面已生成，请前往 </span><a href="'.concat(e,'" target="_blank" data-lake-id="uf45ee0a8" id="uf45ee0a8"><span data-lake-id="u9d5830ac" id="u9d5830ac">文档生成器页面</span></a><span data-lake-id="u9aa5dcaa" id="u9aa5dcaa"> 进行编辑并完成发布。</span></p>')},Ce=function(){var e=D(T().mark((function e(t){var n,r,o,a,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.type,o=t.docId,e.prev=1,e.next=4,_.a({title:n,type:r,doc_id:o});case 4:if(a=e.sent,i=a.data,!a.success||null==i||!i.id){e.next=8;break}return e.abrupt("return","https://".concat(window.location.host,"/doc_generator/").concat(i.id));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var r=D(T().mark((function r(a,i){var m,v,y,b,_,E,w,N,x,j,I,L,R,D;return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:z("exec",{cmd:a,params:v=l}),B(a),r.t0=a,r.next=r.t0===O.a.DOC.delete.cmd?6:r.t0===O.a.DOC.print.cmd?8:r.t0===O.a.DOC.enter_read_mode.cmd||r.t0===O.a.DOC.publish_enter_read_mode.cmd?10:r.t0===O.a.DOC.open_in_browser.cmd?12:r.t0===O.a.DOC.fullscreen.cmd||r.t0===O.a.DOC.exit_fullscreen.cmd?14:r.t0===O.a.DOC.raw.cmd?16:r.t0===O.a.DOC.view_markdown.cmd?18:r.t0===O.a.DOC.presentation.cmd?20:r.t0===O.a.DOC.create_doc.cmd?22:r.t0===O.a.DOC.create_sre.cmd||r.t0===O.a.DOC.create_prd.cmd?24:r.t0===O.a.NOTE.create_note.cmd?43:r.t0===O.a.DOC.create_doc_template.cmd?46:r.t0===O.a.DOC.create_from_template.cmd?48:r.t0===O.a.DOC.create_ai_doc.cmd?51:r.t0===O.a.DOC.create_markdown.cmd?53:r.t0===O.a.DOC.create_sheet.cmd?55:r.t0===O.a.DOC.create_mind.cmd?57:r.t0===O.a.DOC.create_board.cmd?59:r.t0===O.a.DOC.create_table.cmd?61:r.t0===O.a.DOC.create_thread.cmd?63:r.t0===O.a.DOC.edit.cmd?65:r.t0===O.a.DOC.manage_table.cmd||r.t0===O.a.DOC.manage_doc.cmd?69:r.t0===O.a.DOC.modify_toc.cmd?71:r.t0===O.a.DOC.exit.cmd?73:r.t0===O.a.DOC.archive.cmd?75:r.t0===O.a.DOC.unarchive.cmd?77:r.t0===O.a.DOC.pin.cmd?79:r.t0===O.a.DOC.unpin.cmd?81:r.t0===O.a.DOC.send_mail.cmd?83:r.t0===O.a.DOC.document_layout_select.cmd||r.t0===O.a.DOC.document_layout.cmd?85:r.t0===O.a.DOC.document_typography.cmd?87:r.t0===O.a.DOC.document_fontsize.cmd?89:r.t0===O.a.DOC.document_paragraph_spacing.cmd?91:r.t0===O.a.DOC.document_auto_spacing.cmd?93:95;break;case 6:return be(),r.abrupt("break",97);case 8:return window.print(),r.abrupt("break",97);case 10:return window.__readyToPublish({enterReadMode:!0}),r.abrupt("break",97);case 12:return window.YuqueDesktopAppJSBridge.openExternalLink("".concat(window.location.origin,"/").concat(t.namespace,"/").concat(c.slug)),r.abrupt("break",97);case 14:return s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能")),r.abrupt("break",97);case 16:return window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html"),r.abrupt("break",97);case 18:return window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown"),r.abrupt("break",97);case 20:return window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present")),r.abrupt("break",97);case 22:return ye({type:"Doc",format:f.a.FORMAT.LAKE,title:v.title,slug:v.slug}),r.abrupt("break",97);case 24:return y=a===O.a.DOC.create_sre.cmd?p.a.SRE:p.a.PRD,b="WIP ".concat(A()().format("YYYYMMDD")," ").concat(y," 文档"),_="".concat(y," 文档"),E=M({type:"Doc",format:f.a.FORMAT.LAKE,title:b,slug:v.slug},l),w=v.slug||k.a.createSlug(),E.slug=w,E.book_id=t.id,r.next=33,k.a.createDoc(E,void 0,{useOriginResp:!0});case 33:return N=r.sent,x=N.data,r.next=37,Ce({title:_,type:y,docId:x.id});case 37:return j=r.sent,I={id:x.id,format:f.a.FORMAT.LAKE,save_type:"user",draft_version:x.draft_version,body_asl:Pe(j)},r.next=41,Object(P.updateContent)(I);case 41:return window.location.href=j,r.abrupt("break",97);case 43:return window.appData.isDesktopApp?null===(L=window.YuqueDesktopAppJSBridge)||void 0===L||null===(R=L.ipcSend)||void 0===R||R.call(L,{channel:S.a.MINI_WINDOW.OPEN_WINDOW}):Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1414)]).then(n.bind(null,4362)).then((function(e){e.default.show()})),r.abrupt("break",97);case 46:return ye({title:__("自定义模板"),type:f.a.TYPE.DOC,format:f.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"}),r.abrupt("break",97);case 48:return h&&h(),xe(),r.abrupt("break",97);case 51:return Ae(),r.abrupt("break",97);case 53:return ye({type:"Doc",format:f.a.FORMAT.MARKDOWN,title:v.title,slug:v.slug}),r.abrupt("break",97);case 55:return ye({type:"Sheet",title:v.title,slug:v.slug}),r.abrupt("break",97);case 57:case 59:return ye({type:"Board",title:v.title,slug:v.slug}),r.abrupt("break",97);case 61:return ye({type:"Table",title:v.title,slug:v.slug}),r.abrupt("break",97);case 63:return window.location.href="/".concat(t.namespace,"/new"),r.abrupt("break",97);case 65:return D="/".concat(t.namespace,"/").concat(c.slug,"/edit"),(C.d.isCycleThreadRepo(t)||null!==(m=window.appData)&&void 0!==m&&m.newThreadEnable&&C.d.isThreadRepo(t))&&(D="/thd/".concat(t.namespace,"/").concat(c.slug,"/edit")),F?g.a.pushWebWindow({url:"".concat(window.location.origin).concat(D)}):window.location.href=D,r.abrupt("break",97);case 69:return window.location.href="/r/".concat(t.namespace,"/docs"),r.abrupt("break",97);case 71:return window.location.href="/r/".concat(t.namespace,"/toc?from=").concat(c.slug),r.abrupt("break",97);case 73:return window.location.href="/dashboard",r.abrupt("break",97);case 75:return u({type:"proxy.web/docs.archive",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("话题已归档")),d({cmd:O.a.DOC.archive.cmd,result:e})})),r.abrupt("break",97);case 77:return u({type:"proxy.web/docs.unarchive",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("已取消归档")),d({cmd:O.a.DOC.unarchive.cmd,result:e})})),r.abrupt("break",97);case 79:return u({type:"proxy.web/docs.pin",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("置顶成功")),d({cmd:O.a.DOC.pin.cmd,result:e})})),r.abrupt("break",97);case 81:return u({type:"proxy.web/docs.unpin",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("已取消置顶")),d({cmd:O.a.DOC.unpin.cmd,result:e})})),r.abrupt("break",97);case 83:return H(!0),r.abrupt("break",97);case 85:return he(i),r.abrupt("break",97);case 87:return de(i),r.abrupt("break",97);case 89:return fe(i),r.abrupt("break",97);case 91:return pe(i),r.abrupt("break",97);case 93:return me(i),r.abrupt("break",97);case 95:return e.onCommandsExecuted({cmd:a}),r.abrupt("break",97);case 97:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return i.a.useEffect((function(){R&&(null==R?void 0:R.cmd)===O.a.DOC.create_from_template.cmd&&_e(),R&&(null==R?void 0:R.cmd)===O.a.DOC.create_ai_doc.cmd&&ke()}),[R]),i.a.useEffect((function(){window.__execAction=function(t,n){[O.a.DOC.save_published_as_version.cmd,O.a.DOC.save_editing_as_version.cmd].includes(t)&&(je(t,n),e.onSelect({key:t}))}}),[]),{cmd:R,sendAlimail:W,mailSending:Z,typography:ee,defaultFontSize:re,paragraphSpacing:ie,autoSpacing:ue,reset:ve,doAction:je,setSendAlimail:H,setMailSending:Q,getEditorLayout:function(){return V("queryCommandValue","layout")},getWordCount:function(){return V("queryCommandValue","wordCount")},contextHolder:i.a.createElement(i.a.Fragment,null,we,Ne)}}},4369:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(701);var r=n(309),o=(n(53),n(12)),a=(n(40),n(9)),i=(n(48),n(11)),c=(n(227),n(101)),l=n(0),u=n(1634),s=n(1653),d=n(1232),f=n(87),p=n(5),m=n.n(p),h=n(1233),v=n.n(h),y=n(464),b=n(3676),g=n(208),_=n(4040),E=n(1422),w=n(10),O=n(74),k=n(3787);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function N(){N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==S(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(S(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function x(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){var t,n,p=e.bookPublicSet,h=e.panelType,S=e.panelTitle,x=e.share,C=e.belongs,j=e.organization,T=e.group,I=e.book,M=e.me,L=e.shareViewType,R=e.handlePasswordChange,D=e.handleScopeChange,U=e.handleSearchChange,B=e.onBack,z=l.useMemo((function(){return Object(E.d)(x,L,T,I)}),[x,L,T,I]).privacy,F=Object(g.a)(),V={scopeSet:function(){var e=b.q[C],t=e.desc,n=e.actions,r=C===y.a.ORG&&(0===(null==j?void 0:j.share_to_outside_enable)||!f.a.isPremium(j));return l.createElement(l.Fragment,null,l.createElement("p",{className:k.a.titleDesc},t),n.map((function(e){var t;return l.createElement(c.a,{key:e.value,title:e.value===w.PRIVACY.public&&r?null===(t=e.tip)||void 0===t?void 0:t.call(e,j):"",placement:"bottomLeft",overlayInnerStyle:{width:"200px"},autoAdjustOverflow:!0},function(e){return l.createElement("div",{className:m()(k.a.contentArea,k.a.selectorItem,P({},k.a.disabledItem,e.value===w.PRIVACY.public&&r)),onClick:function(){z===e.value||e.value===w.PRIVACY.public&&r||null==D||D(e.value)}},l.createElement("span",null,e.label),z===e.value&&l.createElement(u.default,{className:k.a.selectorIcon,width:16,height:16}))}(e))})))},passwordSet:function(){var e=Object(E.c)(x,L,T,I),t=e.currentPassword,n=e.isInheritBookPassword,r="";(L===y.b.DOC&&n||L===y.b.BOOK)&&(r=b.o[L]);var u=Object(g.a)()?"https://www.yuque.com/yuque/thyzgp/wgy2sb#ebmU2":"https://yuque.antfin.com/lark/bsgp0v/lrui64#ebmU2",d=__("所属知识库已开启密码，文档无法独立设置。{terms}",{terms:l.createElement("a",{href:u,target:"_blank"},__("查看帮助"))}),f=function(e,t){var n=Object(E.a)(e,L,T,I);if(null!=n&&n.url){v()((null==n?void 0:n.urlWithDesc)||n.url,{format:"text/plain"});var r=t?__("已重置并复制链接和密码"):__("已复制链接和密码"),o=null!=e&&e.password?r:__("已复制链接");i.a.success(o,2)}},h=function(){var e=A(N().mark((function e(){var n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==R?void 0:R(t?w.ENCRYPTED_PASSWORD_ACTIONS.disabled:w.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:if(!(n=e.sent)){e.next=8;break}if(!t){e.next=7;break}return e.abrupt("return",i.a.success(__("设置成功"),1));case 7:return e.abrupt("return",f(n));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=A(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==R?void 0:R(w.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:(t=e.sent)&&f(t,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=l.createElement("div",{className:k.a.contentArea},t?l.createElement("div",{className:m()(k.a.pwdBlock,P({},k.a.bookPublicSet,p))},l.createElement("span",{"data-testid":"password-text",className:k.a.passwordText},__("密码：{password}",{password:t})),l.createElement(a.a,{type:"text",disabled:n,onClick:_,className:k.a.resetBtn},l.createElement(s.default,{className:k.a.resetIcon,width:12,height:12}),__("重置"))):l.createElement(o.a,{className:m()(k.a.pwdLink,P({},k.a.bookPublicSet,p)),disabled:!0,placeholder:__("点击开启生成随机密码")}),l.createElement(a.a,{className:k.a.pwdBtn,size:"large",type:"primary",disabled:n,onClick:h},t?__("关闭"):__("开启")));return l.createElement(l.Fragment,null,l.createElement("p",{className:m()(k.a.titleDesc,P({},k.a.bookPublicSet,p))},r),l.createElement(c.a,{title:n?d:"",placement:"bottomRight",autoAdjustOverflow:!0},O))},searchSet:function(){var e=Object(E.b)(x,L,T,I),t=e.currentIndexedLevel,n=e.isInheritBookIndex,o=b.r[L][C],a=o.desc,i=o.action,u=o.tip,s=l.createElement("div",{className:k.a.contentArea},l.createElement("span",{className:k.a.switchTitle},i),l.createElement(r.a,{disabled:n,onChange:U,checked:1===t}));return l.createElement(l.Fragment,null,l.createElement("p",{className:m()(k.a.titleDesc,P({},k.a.bookPublicSet,p))},a),l.createElement(c.a,{title:n?u:"",placement:"bottomRight",autoAdjustOverflow:!0},s))},shareExpiredTimeSet:function(){var e=!(!j||null==j||!j.id),t=L===y.b.NOTE||!e&&T&&"User"===(null==T?void 0:T.type)&&T.id===M.id,n=Object(E.e)(x,L,e);if(n){var r=n.startTime,o=n.expiredTime,a=(b.s[C]||"").desc;if(!F)return l.createElement("p",{className:k.a.titleDesc},a);var i=[{label:__("半年（{startTime} - {expiredTime}）",{startTime:r,expiredTime:o}),value:o},{label:__("永久有效"),value:null}],c=function(e){return l.createElement(l.Fragment,null,l.createElement("div",{onClick:function(){return function(e){var n;null===e.value&&t&&(null===(n=window.__member_message_ref)||void 0===n||n.current.showMemberIntro(O.LIMIT_SCENE.share_public))}(e)},className:m()(k.a.contentArea,k.a.selectorItem,P({},k.a.notOwner,!t))},l.createElement("span",{className:k.a.shareTime},e.label,null===e.value&&l.createElement(_.a,{className:k.a.memberAbleIcon,noTooltip:!0,isYuque:Object(g.a)(),group:T,organization:j})),e.value===o&&l.createElement(u.default,{className:k.a.selectorIcon,width:16,height:16})),null===e.value&&!t&&l.createElement("span",{className:k.a.shareNotOwner},__("请联系知识库所有者购买会员")))};return l.createElement(l.Fragment,null,l.createElement("p",{className:k.a.titleDesc},a),i.map((function(e){return c(e)})))}}};return p?l.createElement("div",{className:m()(k.a.shareDetailSettingPanel,k.a.bookPublicSetting)},l.createElement("div",{className:k.a.bookPublicTitle},S),null===(n=V[h])||void 0===n?void 0:n.call(V)):l.createElement("div",{className:k.a.shareDetailSettingPanel},l.createElement("div",{className:k.a.title,onClick:B},l.createElement(d.default,{className:k.a.backIcon,width:20,height:20}),S),null===(t=V[h])||void 0===t?void 0:t.call(V))}},4370:function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){Object(r.useEffect)((function(){if(e){var n=function(e){return e.preventDefault(),t&&(e.returnValue=t),t};return window.addEventListener("beforeunload",n),function(){return window.removeEventListener("beforeunload",n)}}}),[t,e])}},4397:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return I}));var r=n(47),o=n(464),a=n(50),i=n(813),c=n(10),l=n(829),u=n(208),s=(n(48),n(11)),d=n(0),f=n.n(d),p=n(4282),m=n(4096),h=n.n(m),v=n(4354),y=n(4214);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=y.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==b(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,c,"next",e)}function c(e){_(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t,n=e.onResult,o=e.onError,a=w(Object(d.useState)(i.CERTIFICATION_STATUS.init),2),c=a[0],l=a[1],u=w(Object(d.useState)(!1),2),m=u[0],b=u[1],_=w(Object(d.useState)(3),2),O=_[0],k=_[1],S=w(Object(d.useState)(""),2),N=S[0],x=S[1],A=Object(d.useRef)(0),P=function(){var e=E(g().mark((function e(){var a,c,u,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,A.current+=1,!(A.current>80)){e.next=6;break}return s.a.warning(__("人脸认证超时")),n(i.CERTIFICATION_STATUS.init,i.CERTIFICATION_STATUS.init,!0),e.abrupt("return");case 6:return e.next=8,r.a.mine.user_certification();case 8:if((null==(a=e.sent)?void 0:a.certification_status)!==i.CERTIFICATION_STATUS.init){e.next=13;break}return b(!0),t=setTimeout(P,3e3),e.abrupt("return");case 13:c=null==a?void 0:a.share_certification,u=null==a?void 0:a.face_certification,e.t0=c,e.next=e.t0===i.CERTIFICATION_STATUS.certified?18:22;break;case 18:return l(i.CERTIFICATION_STATUS.certified),n(c,u,!1),d=setInterval((function(){k((function(e){return e<=1&&(n(c,u,!0),clearInterval(d)),e-1}))}),1e3),e.abrupt("break",24);case 22:return(null==a?void 0:a.certification_status)===i.CERTIFICATION_STATUS.fail?(l(i.CERTIFICATION_STATUS.fail),clearTimeout(t),setTimeout((function(){n(c,u,!0)}),1e3)):t=setTimeout(P,3e3),e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),clearTimeout(t),o(e.t1);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=E(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.faceCertify.reset();case 2:e.sent.success&&P();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function j(){return(j=E(g().mark((function e(){var t,n,o,a,i,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin,e.prev=1,n="".concat(t,"/r/face_certify"),e.next=5,r.a.accounts.getAuthToken({url:n});case 5:o=e.sent,(a=o.token)&&(i=h.a.stringify({url:n,token:a}),(c="".concat(t,"/r/auth?").concat(i))&&x(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s.a.error(__("获取扫码链接失败"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}Object(d.useEffect)((function(){return C(),function(){clearTimeout(t)}}),[]),Object(d.useEffect)((function(){!function(){j.apply(this,arguments)}()}),[]);var T=Object(d.useCallback)((function(){switch(c){case i.CERTIFICATION_STATUS.certified:return f.a.createElement(v.a,{verifyStatus:i.CERTIFICATION_STATUS.certified,seconds:O});case i.CERTIFICATION_STATUS.fail:return f.a.createElement(v.a,{verifyStatus:i.CERTIFICATION_STATUS.fail});default:return m?f.a.createElement("div",null,f.a.createElement("div",{className:y.a.title},__("扫描成功")),f.a.createElement("div",{className:y.a.description},__("请继续在手机上完成实名认证"))):f.a.createElement("div",null,f.a.createElement("div",{className:y.a.title},__("请使用支付宝 APP 扫码完成实名认证")),f.a.createElement("div",{className:y.a.description},__("使用互联网公开分享功能需要进行实名认证")))}}),[c,O,m]);return f.a.createElement("div",null,f.a.createElement("img",{className:y.a.img,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*OaxJQpBX8s8AAAAAAAAAAAAADvuFAQ/original"}),T(),c===i.CERTIFICATION_STATUS.init?f.a.createElement(p.b,{value:N,size:232,className:y.a.qrCode}):null)},S=function(e){return new Promise((function(t,n){var r,o=e.confirm({content:f.a.createElement(k,{onResult:function(e,n,a){r={shareCertification:e,faceCertification:n},a&&(t(r),o.destroy())},onError:function(e){n(e)}}),onCancel:function(){r&&t(r)},className:y.a.modalStyle,bodyStyle:{textAlign:"center"},width:550,closable:!0,icon:f.a.createElement(f.a.Fragment,null),cancelButtonProps:{style:{display:"none"}},okButtonProps:{style:{display:"none"}}})}))},N=n(3676);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(){A=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==x(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(x(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function P(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,c,"next",e)}function c(e){P(a,r,o,i,c,"throw",e)}i(void 0)}))}}var j=function(){var e=C(A().mark((function e(t,n,o,l,s,d,f,p){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof d){e.next=6;break}return e.next=3,d({public:t});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t!==c.PRIVACY.public){e.next=28;break}if(Object(u.a)()&&!l.interests[a.INTEREST_CODE.create_public_resource]){e.next=12;break}return e.next=10,T(t,n,o,s,f,p);case 10:case 18:e.next=26;break;case 12:return e.next=14,r.a.mine.user_certification();case 14:if(e.sent.share_certification!==i.CERTIFICATION_STATUS.certified){e.next=20;break}return e.next=18,T(t,n,o,s,f,p);case 20:return e.next=22,S(s);case 22:if(e.sent.shareCertification!==i.CERTIFICATION_STATUS.certified){e.next=26;break}return e.next=26,T(t,n,o,s,f,p);case 26:e.next=30;break;case 28:return e.next=30,T(t,n,o,s,f,p);case 30:case"end":return e.stop()}}),e)})));return function(t,n,r,o,a,i,c,l){return e.apply(this,arguments)}}(),T=function(){var e=C(A().mark((function e(t,n,r,a,i,s){var d,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c.PRIVACY.public){e.next=29;break}if(Object(u.a)()){e.next=23;break}return e.prev=2,e.next=5,null==i?void 0:i({public:t});case 5:e.next=23;break;case 7:if(e.prev=7,e.t0=e.catch(2),d=n===o.b.DOC?l.TargetType.Doc:l.TargetType.Book,f=n===o.b.DOC?l.WorkflowType.DocPublicPrivacyWorkflow:l.WorkflowType.BookPublicPrivacyWorkflow,(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==c.PUBLIC_SET_CODE.public_has_approve){e.next=14;break}return window.open("/g/approve_workflow?target_id=".concat(r.id,"&target_type=").concat(d,"&type=").concat(f)),e.abrupt("return");case 14:if((null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==c.PUBLIC_SET_CODE.public_need_approve){e.next=22;break}return e.next=17,Object(N.f)(n,a);case 17:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return window.open("/g/approve_workflow?target_id=".concat(r.id,"&target_type=").concat(d,"&type=").concat(f)),e.abrupt("return");case 22:throw e.t0;case 23:if(!Object(u.a)()){e.next=29;break}return e.next=26,Object(N.f)(n,a);case 26:if(e.sent){e.next=29;break}return e.abrupt("return");case 29:if(Object(u.a)()||t===c.PRIVACY.public||s!==c.PRIVACY.public){e.next=35;break}return e.next=32,Object(N.g)(a);case 32:if(e.sent){e.next=35;break}return e.abrupt("return");case 35:return Object(u.a)()||t!==c.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE||(t=c.PRIVACY.private),e.next=38,null==i?void 0:i({public:t});case 38:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n,r,o,a,i){return e.apply(this,arguments)}}(),I=function(){var e=C(A().mark((function e(t,n,o,l){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c.PRIVACY.public){e.next=22;break}if(Object(u.a)()&&!n.interests[a.INTEREST_CODE.share_note]){e.next=6;break}return e.next=4,l(t);case 4:case 12:e.next=20;break;case 6:return e.next=8,r.a.mine.user_certification();case 8:if(e.sent.share_certification!==i.CERTIFICATION_STATUS.certified){e.next=14;break}return e.next=12,l(t);case 14:return e.next=16,S(o);case 16:if(e.sent.shareCertification!==i.CERTIFICATION_STATUS.certified){e.next=20;break}return e.next=20,l(t);case 20:e.next=24;break;case 22:return e.next=24,l(t);case 24:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},44:function(e,t,n){"use strict";n(1462);var r=n(710);n(175);t.a=r.a},4401:function(e,t,n){"use strict";n(175);var r=n(44),o=(n(40),n(9)),a=(n(277),n(147)),i=(n(1219),n(959)),c=(n(48),n(11)),l=(n(130),n(41)),u=(n(138),n(30)),s=(n(67),n(31)),d=n(0),f=n.n(d),p=n(6),m=n.n(p),h=n(1441),v=n(1437),y=n(1428),b=n(88),g=n.n(b),_=n(152),E=n.n(_),w=n(4457),O=n(1342),k=n.n(O),S=n(81);var N=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=e}),[e]),Object(d.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},x=n(4370),A=n(216),P=n(3789),C=n(208),j=n(47),T=n(1467),I=n(4469);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(){L=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==M(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(M(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function R(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var D=function(e){var t=e.docs,r=e.onSuccess,o=e.bookId,a=t.length,i=function(){var e,i=(e=L().mark((function e(){var i,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=L().mark((function e(){var a,i,l,u,s,d,f;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[c].slug,e.prev=1,e.next=4,j.a.docs.findOne({id:a,book_id:o});case 4:if(i=e.sent,l=i.format,u=i.content,s=null,"lakesheet_html"!==l){e.next=12;break}s=Object(I.a)(i.content),d="lakesheet",e.next=17;break;case 12:if("html"!==l){e.next=17;break}return e.next=15,Promise.all([n.e(4),n.e(5),n.e(6),n.e(0),n.e(1),n.e(1695)]).then(n.bind(null,4038)).then((function(e){return e.htmlToLakeAndHtml(u)}));case 15:s=e.sent,d="lake";case 17:return f={id:i.id,format:d,body_asl:s.value,draft_version:i.draft_version,save_type:"auto"},s.html&&(f.body_html=s.html),e.next=21,j.a.docs.updateContent(f);case 21:return e.next=23,j.a.docs.publish({id:i.id,format:d,notify:!1,force:!0});case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.log("convert error",e.t0),r();case 29:case"end":return e.stop()}}),e,null,[[1,25]])})),c=0;case 2:if(!(c<a)){e.next=7;break}return e.delegateYield(i(),"t0",4);case 4:c++,e.next=2;break;case 7:r();case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,c,"next",e)}function c(e){R(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return Object(d.useEffect)((function(){return i(),function(){}}),[]),f.a.createElement("div",null)};D.propTypes={onSuccess:m.a.func.isRequired,bookId:m.a.number.isRequired,docs:m.a.array.isRequired};var U=D,B=n(975),z="DocImport-module_docImport_uDZWD",F="DocImport-module_title_vylxD",V="DocImport-module_tips_gx2+N",G="DocImport-module_help_YDms4",Y="DocImport-module_processingModal_5vLO+",$="DocImport-module_setting_6ttU6",q="DocImport-module_settingTitle_EsA43",W="DocImport-module_settingUpload_WXf0g",H="DocImport-module_processing_K3nVL",K="DocImport-module_processingTitle_UzLg1",Z="DocImport-module_processingFooter_xOxG5",Q="DocImport-module_fileList_jRvlw",X="DocImport-module_fileItem_gtT95",J="DocImport-module_fileItemIcon_SdTY-",ee="DocImport-module_fileItemTitle_qprAi",te="DocImport-module_spin_aEZeg",ne="DocImport-module_uploadingStatus_UWCen",re="DocImport-module_hr_nD0TF",oe="DocImport-module_footerTitle_2O1eI",ae="DocImport-module_radioGroup_klLUa",ie=n(323),ce=n(1542),le={id:14,content:'{"popupType":"activity","title":"👋🏻 Hi，亲爱的印象笔记用户","desc":"欢迎加入语雀，开启新的创作旅程，语雀会稳定地陪伴着你。\\n<br />\\n<br />\\n为感谢你的选择，已赠送你 1 个月语雀会员。\\n<br />\\n<br />\\n✨ 分享你的迁移经验 / 使用心得，再获得 1 个月会员。 <br /><a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/share-events\\">了解详情</a>\\n<br />\\n<br />\\n<a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/evernote\\">👉🏻 迁移支持与反馈</a>","image":"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/345912/1678879373131-361a8d0b-c661-4afa-8714-9b49afc2ef87.png?x-oss-process=image%2Fresize%2Cw_1272%2Climit_0","type":"normal","mainButton":{"title":"我知道了","openType":"close"},"viceButton":{"title":"","openType":"close"},"otherButton":{"openType":"href"}}',type:"public_popup",user_id:null,created_at:"2023-07-22T02:22:29.000Z",updated_at:"2023-07-22T02:25:07.000Z",deleted_at:null,_serializer:"admin.tip"};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(){se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ue(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ue(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function de(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,c,"next",e)}function c(e){de(a,r,o,i,c,"throw",e)}i(void 0)}))}}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _e=s.a.confirm,Ee=B.a.STATUS,we=window.appData.settings&&window.appData.settings.max_import_task_count||2,Oe=function(e){var t=e.visible,n=e.book,p=e.group,m=e.formats,b=e.importType,_=e.importParams,O=e.wrapModal,k=void 0===O||O,A=e.autoConvert,I=void 0===A||A,M=ye(Object(d.useState)(Ee.INIT),2),L=M[0],R=M[1],D=ye(Object(d.useState)([]),2),ue=D[0],de=D[1],pe=ye(Object(d.useState)([]),2),he=pe[0],ge=pe[1],Oe=ye(Object(d.useState)(0),2),ke=Oe[0],Se=Oe[1],Ne=ye(Object(d.useState)(0),2),xe=Ne[0],Ae=Ne[1],Pe=ye(Object(d.useState)(0),2),Ce=Pe[0],je=Pe[1],Te=ye(Object(d.useState)({}),2),Ie=Te[0],Me=Te[1],Le=ye(Object(d.useState)(!1),2),Re=Le[0],De=Le[1],Ue=ye(Object(d.useState)(!0),2),Be=Ue[0],ze=Ue[1],Fe=ye(Object(d.useState)(!1),2),Ve=Fe[0],Ge=Fe[1],Ye=ye(Object(d.useState)([]),2),$e=Ye[0],qe=Ye[1],We=ye(Object(d.useState)(!1),2),He=We[0],Ke=We[1],Ze=Object(d.useRef)();Object(x.a)(!Ve&&L===Ee.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Qe=function(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if($e.length>0)return $e.push(e),void qe(ve($e));$e.push(e)}var t=e.data,n=e.file,r=e.filename,o=e.onError,a=e.onSuccess;e.__uploaded=!0;var i=me(me(me({},_),t),{},{filename:r,path:n.path});n.uploading=!0,Object(C.f)({requestData:i,params:e,onError:o,onSuccess:function(e){a(e,n)}})},Xe={evernote:[{default:E.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],gitbook:[{default:E.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1}],confluence:[{type:"text",label:f.a.createElement(l.a,{type:"flex",justify:"space-between"},f.a.createElement(u.a,null,__("批量替换链接")),f.a.createElement(u.a,null,f.a.createElement("a",{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(e,t,n){var r=w.validator.httpURL(t);ze(!r),n(r)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]},Je=[{key:"markdown",value:"markdown",invertedIndex:["markdown","zip"],title:__("单个 Markdown 文件"),desc:".md .markdown .mark .txt",name:__("Markdown")},{key:"zip",value:"zip1",invertedIndex:["markdown","zip"],title:__("Markdown 打包后的压缩文件"),desc:".zip",name:__("Markdown"),formValue:{fileFormat:"markdown"}},{key:"zip",value:"zip2",invertedIndex:["markdown","zip"],title:__("HTML 打包后的压缩文件"),desc:".zip",name:__("HTML"),formValue:{fileFormat:"html"}},{key:"zip",value:"zip3",invertedIndex:["markdown","zip"],title:__("Lake 打包后的压缩文件"),desc:".zip",name:"LAKE",formValue:{fileFormat:"html"}}];Object(d.useEffect)((function(){L!==Ee.PROCESSING||Re||R(Ee.SUCCESS)}),[L,Re]);var et=function(e){return e.response&&e.response.data&&e.response.data.status},tt=function(e){var t=e||{},r=t.data,o=t.joinedEvernoteIncentive,a={};if(r){var i,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=be(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;a[u.id]=u}}catch(e){l.e(e)}finally{l.f()}}var s=he.map((function(e){var t,n,r;if(!e.response||!e.response.data)return e;var o=a[e.response.data.id];if(!o)return e;var i=g()(o,"error.limitError");if(i&&400===i.status&&i.code){if(window.appData.isDesktopApp)return c.a.error(__("桌面端不支持此操作，请去 web 端完成"));var l=P.h.getMessage(i.code,{isImport:!0},i)||{},u=l.msg,s=l.alwaysOpen,d=l.level,f=l.callback;if(u)return f(c.a[d||"error"](u,s?0:void 0)),Ge(!0),e}e.response.data=me(me({},e.response.data),o),o.status===Ee.SUCCESS?(e.status=Ee.SUCCESS,e.url=o.url):(o.status===Ee.ERROR||o.error)&&(e.status=Ee.ERROR);var p=null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.successDocs)||void 0===r?void 0:r.filter((function(e){return"html"===e.format||"lakesheet_html"===e.format}));return(null==p?void 0:p.length)>0&&I&&de(ue.concat(p)),e})),d=0,f=0;s.forEach((function(e){var t=et(e);e.status!==Ee.ERROR&&t!==Ee.ERROR&&t!==Ee.SUCCESS||d++,e.status!==Ee.ERROR&&t!==Ee.ERROR||f++})),s.filter((function(e){var t=et(e);return t===Ee.PENDING||e.status!==Ee.ERROR&&!(null!=t||!e.uploading&&"done"!==e.status&&100!==e.percent)})).length<we&&function(){for(var e=$e.shift();e&&e.__uploaded;)e=$e.shift();e&&Qe(e,!0),qe(ve($e))}(),d>xe&&Ae(d),je(f),ge(s),ke===d?(De(!1),function(){if(n.toc){var e="highlightBookImport_".concat(n.slug,"_").concat(n.id),t=n.toc[0];S.a.set(e,t?t.uuid:"_")}}()):R(Ee.PROCESSING),o&&Object(ce.b)({tip:le})};N(fe(se().mark((function e(){var n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=he.filter((function(e){return e.response&&e.response.data}))).length){e.next=3;break}return e.abrupt("return",tt());case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,j.a.import.getImportResult({files:JSON.stringify(n.map((function(e){return{convertTaskId:e.response.data.convertTaskId,id:e.response.data.id,type:e.response.data.type,name:e.name}}))),toc_node_uuid:_&&_.toc_node_uuid,format:null==Ie?void 0:Ie.key},{useOriginResp:!0});case 7:r=e.sent,tt(r);case 9:case"end":return e.stop()}}),e)}))),Re?5e3:null);var nt,rt,ot,at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=me(me({},m.find((function(t){return t.key===e}))),t);Me(n),Xe[e]&&R(Ee.SETTING),"confluence"===e&&ze(!1)},it=function(e){return!!Xe[e.key]},ct=function(e){var t=ve(e.fileList),n=t.length;n!==t.filter((function(e){var t=et(e);return t===Ee.ERROR||t===Ee.SUCCESS})).length&&R(Ee.PROCESSING),De(!0),ge(t),Se(n)},lt=function(){De(!1),R((function(t){if(t!==Ee.PROCESSING)return e.onCancel(),t;ge((function(t){return e.onCancel(),t}))}))},ut=function(){var t,r;if(_&&"doc_toc"===_.create_from)return lt(),he.forEach((function(e){if(!t){var o=e.response&&e.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(t="/".concat(p.login,"/").concat(n.slug,"/").concat(o.import_toc[0].url),r=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(t="/".concat(p.login,"/").concat(n.slug,"/").concat(o.slug),r=o)}})),void(t&&(e.onRead?e.onRead(r):window.location.href=t));window.location.href="/".concat(p.login,"/").concat(n.slug)},st=f.a.createElement("div",{className:z},(nt=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",rt=m.filter((function(e){return e.key.startsWith("lake")})),ot=m.filter((function(e){return!e.key.startsWith("lake")&&"zip"!==e.key})).filter((function(e){return!window.appData.isYuque||"dingdocs"!==e.key})).filter((function(e){return!window.appData.isAts||"word"!==e.key&&"excel"!==e.key})),f.a.createElement("div",{className:"entry",style:{display:L===Ee.INIT?"block":"none"}},f.a.createElement("div",{className:F},__("导入")),f.a.createElement("div",{className:V},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),f.a.createElement("a",{href:nt,target:"_blank","data-desktoptarget":"_browser",className:G},__("帮助文档"))),f.a.createElement("div",null,f.a.createElement("h4",null,__("三方格式")),f.a.createElement(T.a,{mode:"import",book:n,types:ot,importType:b,disableUpload:it,onSelect:at,onUploadChange:ct,customRequest:Qe,maxCount:0,setModalHide:Ke})),f.a.createElement("div",null,f.a.createElement("h4",null,__("语雀格式")),f.a.createElement(T.a,{mode:"import",book:n,types:rt,importType:b,disableUpload:it,onSelect:at,onUploadChange:ct,customRequest:Qe,maxCount:0})))),function(){var e;if(!Ie)return null;var t=Ie.key,a=Ie.multiSettingValue,i=Je.filter((function(e){return e.invertedIndex.includes(t)})),c=i.find((function(e){return e.value===a}))||(null==i?void 0:i[0]),l=Xe[t];return l?f.a.createElement("div",{className:$,style:{display:L===Ee.SETTING?"block":"none"}},f.a.createElement("h1",{className:q},__("{type} 导入配置",{type:(null==c?void 0:c.name)||Ie.name})),!!i.length&&f.a.createElement(r.a.Group,{value:null===(e=c||(null==i?void 0:i[0]))||void 0===e?void 0:e.value,className:ae},null==i?void 0:i.map((function(e){return f.a.createElement(r.a,{value:e.value,onClick:function(){return at(e.key,{multiSettingValue:e.value})}},f.a.createElement(ie.a,{variant:"title",type:"strong"},e.title),f.a.createElement(ie.a,{variant:"caption-small"},e.desc))}))),f.a.createElement(B.a.AdvanceSetting,{wrappedComponentRef:Ze,type:Ie,settings:l,hideHeader:i,actions:f.a.createElement(T.a.FileUpload,{mode:"import",book:n,getParamsOption:function(){return me(me({},(null==c?void 0:c.formValue)||{}),Ze.current.getValue())},fileOption:Ie,importType:b,customRequest:Qe,onUploadChange:ct,maxCount:0},f.a.createElement(o.a,{type:"primary",disabled:!Be,className:W},__("选择本地文件")))})):null}(),L!==Ee.INIT&&L!==Ee.SETTING?f.a.createElement("div",{className:H},f.a.createElement("h1",{className:K},L===Ee.DONE?__("导入完成"):__("导入中")),f.a.createElement("div",{className:Q},he.map((function(e){return f.a.createElement(l.a,{type:"flex",justify:"space-between",align:"middle",className:X,key:e.uid},f.a.createElement(u.a,null,f.a.createElement(l.a,{type:"flex",align:"middle"},f.a.createElement(u.a,null,f.a.createElement("img",{src:Ie.icon,className:J}),function(e){var t,n=e.name,r=et(e);return t=e.url?f.a.createElement("a",{className:ee,href:e.url,target:"_blank"},n):f.a.createElement("h2",{className:ee},n),e.status!==Ee.ERROR&&r!==Ee.ERROR||(t=f.a.createElement(i.a,{placement:"right",content:__("文件处理失败，请重新上传。")},t)),t}(e)))),f.a.createElement(u.a,null,function(e){var t=et(e);if(e.status===Ee.ERROR||t===Ee.ERROR){var n=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message;n||(n=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message);var r=e.response&&e.response.data&&e.response.data.id;return r&&(n="".concat(n," [id: ").concat(r,"]")),n?n+=__("（请重新上传，如果持续失败，请反馈到语雀）"):n=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),f.a.createElement("span",null,f.a.createElement(i.a,{placement:"right",width:600,content:n},f.a.createElement(h.default,null)))}return e.status===Ee.SUCCESS||t===Ee.SUCCESS?f.a.createElement("span",null,f.a.createElement(v.default,null)):f.a.createElement("span",null,f.a.createElement("span",{className:ne},0===e.percent&&__("等待中"),100===e.percent&&__("处理中"),0!==e.percent&&100!==e.percent&&f.a.createElement("span",null,parseInt(e.percent,10),"%")),f.a.createElement(a.a,{indicator:f.a.createElement(y.default,{style:{fontSize:16},spin:!0}),className:te}))}(e)))}))),f.a.createElement("div",{className:re}),function(){var e;if(0!==xe&&ke===xe&&0===ue.length){var t;he.forEach((function(e){if(!t){e.status===Ee.ERROR&&((t=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message)||(t=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message));var n=e.response&&e.response.data&&e.response.data.id;t&&n&&(t="".concat(t," [id: ").concat(n,"]"))}}));var n=Ce?__("导入结束，有文件导入失败"):__("导入完成");t&&(n="".concat(n," (").concat(t,")")),e=f.a.createElement(l.a,{type:"flex",justify:"space-between",align:"middle"},f.a.createElement(u.a,null,Ce?f.a.createElement(h.default,null):f.a.createElement(v.default,null),f.a.createElement("span",{className:oe},n)),f.a.createElement(u.a,null,f.a.createElement(o.a,{type:"primary",onClick:ut},__("查看"))))}else L===Ee.PROCESSING||L===Ee.UPLOADING||L===Ee.PENDING?e=f.a.createElement("div",null,f.a.createElement(a.a,{indicator:f.a.createElement(y.default,{style:{fontSize:16},spin:!0})}),f.a.createElement("span",{className:oe},__("文件导入中")),"(".concat(xe,"/").concat(ke,")")):0!==ue.length&&(e=f.a.createElement("div",null,f.a.createElement(a.a,{indicator:f.a.createElement(y.default,{style:{fontSize:16},spin:!0})}),f.a.createElement("span",{className:oe},__("文件转换中"))));return f.a.createElement("div",{className:Z},e)}()):null,I&&function(){if(xe&&ke===xe&&ue.length)return f.a.createElement(U,{docs:ue,bookId:n.id,onSuccess:function(){de([])}})}());return k?f.a.createElement(s.a,{title:null,onCancel:function(e){L!==Ee.INIT&&L!==Ee.DONE?(e.preventDefault(),e.stopPropagation(),L===Ee.PROCESSING?_e({title:__("导入尚未完成，确认要停止导入?"),content:f.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:lt,onCancel:function(){}}):lt()):lt()},visible:t,footer:null,centered:!0,width:L===Ee.INIT?160*Math.min(m.length,4):406,maskClosable:!1,className:L!==Ee.INIT&&Y,style:He?{display:"none"}:{}},st):st};Oe.defaultProps={visible:!0,importType:k.a.IMPORT_TYPE.PARSE},Oe.propTypes={visible:m.a.bool,book:m.a.object.isRequired,formats:m.a.array.isRequired,importType:m.a.oneOf([k.a.IMPORT_TYPE.CREATE,k.a.IMPORT_TYPE.PARSE]),onCancel:m.a.func.isRequired,onRead:m.a.func,importParams:m.a.object,group:m.a.object.isRequired,wrapModal:m.a.bool,autoConvert:m.a.bool};t.a=Object(A.b)(Oe,!0)},4402:function(e,t,n){"use strict";n(3512);var r=n(3810),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(4072),u=n(1240),s=n(974),d=n(1337),f=n(4007),p=n(308);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}function y(e,t,n){return t=g(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var E=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,t,[e])).breadcrumbRef=a.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.group,o=t.book,i=t.doc,c=t.separator,d=t.noPrivateTip,f=t.noDocPrivateTip,m=t.docLevelUrl,h=t.noGroup,v=t.showBookIcon,y=t.isNote,b=t.disableClickOnIcon,g=o?o.namespace||"".concat(n.login,"/").concat(o.slug):null;return y?null:a.a.createElement(p.a,null,a.a.createElement("div",{className:"lark-breadcrumb",ref:this.breadcrumbRef},v&&a.a.createElement(u.d,{group:n,book:o}),a.a.createElement(r.a,{separator:c},!h&&n&&a.a.createElement(r.a.Item,{href:"/".concat(n.login)},a.a.createElement(l.default.Name,{user:n,className:"".concat(o||i?"":"lark-breadcrumb-current")})),o&&(b?a.a.createElement(r.a.Item,{className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(u.g,{group:n,book:o,showBookIcon:!1,showPrivateIcon:!d,href:"/".concat(g),getPopupContainer:function(){return e.breadcrumbRef.current}}))):a.a.createElement(r.a.Item,{href:"/".concat(g),className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(u.g,{group:n,book:o,showBookIcon:!1,showPrivateIcon:!d,getPopupContainer:function(){return e.breadcrumbRef.current}})))),i&&a.a.createElement(r.a.Item,{className:"header-crumb-doc",href:m||"/".concat(g,"/").concat(i.slug)},a.a.createElement("span",{className:"lark-breadcrumb-current"},a.a.createElement(s.n,{doc:i})),!f&&a.a.createElement(s.b,{group:n,book:o,doc:i,getPopupContainer:function(){return e.breadcrumbRef.current}})))))}}])&&h(n.prototype,o),i&&h(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(o.PureComponent);E.propTypes={group:c.a.object.isRequired,book:c.a.object,doc:c.a.object,separator:c.a.node,noPrivateTip:c.a.bool,noDocPrivateTip:c.a.bool,docLevelUrl:c.a.string,noGroup:c.a.bool,showBookIcon:c.a.bool,isNote:c.a.bool,disableClickOnIcon:c.a.bool},E.Logo=function(e){var t=e.separator,n=e.organization,r=e.allowClick,o=n&&n.id?a.a.createElement(d.g,{src:n.logo,size:28}):a.a.createElement(f.b,{height:40});return a.a.createElement("span",{className:"lark-breadcrumb-logo"},r?a.a.createElement("a",{href:"/",className:"lark-logo"},o):o,t&&a.a.createElement("span",{className:"lark-breadcrumb-separator"},t))},E.Logo.defaultProps={allowClick:!0},E.Logo.propTypes={separator:c.a.node,organization:c.a.object,allowClick:c.a.bool};t.a=E},4405:function(e,t,n){"use strict";n(48);var r=n(11),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(4281);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};d(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==u(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=m;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?y:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=d(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),d(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(f(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),d(S,l,"Generator"),d(S,i,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function d(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=e.doc,n=e.docDomain,i=e.type,c=f(Object(o.useState)(null),2),u=c[0],p=c[1],m=f(Object(o.useState)(!1),2),h=m[0],v=m[1],y=function(){var o,a=(o=s().mark((function o(){var a,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:n,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),r.a.warning(c)),v(!1);case 5:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){d(a,n,r,i,c,"next",e)}function c(e){d(a,n,r,i,c,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){y()}),[]),h||!u?null:a.a.createElement(l.b,{version:u,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){r.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}m.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=m},4413:function(e,t,n){(function(t){var r=n(4212),o=n(4292),a=n(4293),i=n(4294),c=n(4213),l=a.CODES;function u(e,t,n){r.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function s(e,t,n){if(t){var r=e.pop();e.push((function(e){r&&r(e),n&&n(e)}))}else e.push(n)}function d(e,t){if(e.del)return delete(n=t).op,delete n.create,void delete n.del;var n;if(t.del)return new a(l.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new a(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.op){if(e.create)return new a(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var r=e.type.transformX(e.op,t.op);e.op=r[0],t.op=r[1]}else{var o=e.type.transform(e.op,t.op,"left"),i=e.type.transform(t.op,e.op,"right");e.op=o,t.op=i}}}function f(e,t){for(var n=!1,r=0;r<e.length;r++){var o=e[r];o&&(o(t),n=!0)}return n}e.exports=u,r.mixin(u),u.prototype.destroy=function(e){var t=this;t.whenNothingPending((function(){t.wantSubscribe?t.unsubscribe((function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()})):(t.connection._destroyDoc(t),e&&e())}))},u.prototype._setType=function(e){if("string"==typeof e&&(e=i.map[e]),e)this.type=e;else{if(null!==e){var t=new a(l.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},u.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new a(l.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);n=new a(l.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=void 0===e.type?i.defaultType:e.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),t&&t()},u.prototype.whenNothingPending=function(e){var n=this;t.nextTick((function(){n.hasPending()?n.once("nothing pending",e):e()}))},u.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},u.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},u.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},u.prototype._emitResponseError=function(e,t){return e&&e.code===l.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},u.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},u.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending()},u.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},u.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===l.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp)if(r=d(this.inflightOp,t))return this._hardRollback(r);for(var n=0;n<this.pendingOps.length;n++){var r;if(r=d(this.pendingOps[n],t))return this._hardRollback(r)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},u.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],f(e)}},u.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe((function(t){f(e,t)})):void this.subscribe();e.length&&this.fetch((function(t){f(e,t)}))},u.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);s(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},u.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);s(this.inflightSubscribe,t,e)}else this.pendingFetch.push(e)},u.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);s(this.inflightUnsubscribe,n,e)}else e&&t.nextTick(e)},u.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},u.prototype._otApply=function(e,t){if(e.op){if(!this.type)throw new a(l.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!t&&this.type===i.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,r=0;r<e.op.length;r++){for(var o={op:[e.op[r]]},c=n;c<this.applyStack.length;c++){var u=d(this.applyStack[c],o);if(u)return this._hardRollback(u)}this.emit("before op",o.op,t),this.data=this.type.apply(this.data,o.op),this.emit("op",o.op,t)}return void this._popApplyStack(n)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var s=this.data;return this._setType(null),void this.emit("del",s,t)}},u.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new a(l.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=c.MAX_SAFE_INTEGER)return this.emit("error",new a(l.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},u.prototype._submit=function(e,n,r){if(n||(n=!0),e.op){if(!this.type){var o=new a(l.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(o):this.emit("error",o)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,r),this._otApply(e,n)}catch(e){return this._hardRollback(e)}var i=this;t.nextTick((function(){i.flush()}))},u.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},u.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t)if(-1!==(r=this.pendingOps.indexOf(t)))for(var n=this.pendingOps.splice(r),r=0;r<n.length;r++){t=n[r];var o=this._tryCompose(t);o?o.callbacks=o.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},u.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},u.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r={op:e},o=t&&t.source;this._submit(r,o,n)},u.prototype.create=function(e,t,n,r){if("function"==typeof t?(r=t,n=null,t=null):"function"==typeof n&&(r=n,n=null),t||(t=i.defaultType.uri),this.type){var o=new a(l.ERR_DOC_ALREADY_CREATED,"Document already exists");return r?r(o):this.emit("error",o)}var c={create:{type:t,data:e}},u=n&&n.source;this._submit(c,u,r)},u.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new a(l.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var r=e&&e.source;this._submit({del:!0},r,t)},u.prototype.pause=function(){this.paused=!0},u.prototype.resume=function(){this.paused=!1,this.flush()},u.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return o.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},u.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var r=d(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}this._clearInflightOp(e)}else this._hardRollback(e)},u.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var n=this;this.fetch((function(){for(var r=!!t.length,o=0;o<t.length;o++)r=f(t[o].callbacks,e)&&r;if(e&&!r)return n.emit("error",e)}))},u.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=f(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)}}).call(this,n(158))},4414:function(e,t,n){(function(t){var r=n(4212);function o(e,t,n,o,a,i,c){r.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=o,this.query=a,this.results=null,i&&i.results&&(this.results=i.results,delete i.results),this.extra=void 0,this.options=i,this.callback=c,this.ready=!1,this.sent=!1}e.exports=o,r.mixin(o),o.prototype.hasPending=function(){return!this.ready},o.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},o.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},o.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},o.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},o.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var o=this,a=1,i=function(e){if(e)return o._finishResponse(e,r);--a||o._finishResponse(null,r)};if(Array.isArray(t))a+=t.length,this.results=this._ingestSnapshots(t,i),this.extra=n;else for(var c in t){a++;var l=t[c];this.connection.get(l.c||this.collection,c).ingestSnapshot(l,i)}i()},o.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],a=this.connection.get(o.c||this.collection,o.d);a.ingestSnapshot(o,t),n.push(a)}return n},o.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},o.prototype._handleError=function(e){this.emit("error",e)},o.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){"insert"===(n=e[t]).type&&(n.values=this._ingestSnapshots(n.values))}for(t=0;t<e.length;t++){var n;switch((n=e[t]).type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var o=n.howMany||1,a=this.results.splice(n.index,o);this.emit("remove",a,n.index);break;case"move":o=n.howMany||1;var i=this.results.splice(n.from,o);Array.prototype.splice.apply(this.results,[n.to,0].concat(i)),this.emit("move",i,n.from,n.to)}}this.emit("changed",this.results)},o.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(this,n(158))},4415:function(e,t,n){var r=n(4620),o=n(4212);function a(e,t,n,r,a){if(o.EventEmitter.call(this),"function"!=typeof a)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=a,this.sent=!1}e.exports=a,o.mixin(a),a.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},a.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},a.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,o=new r(this.id,t.v,t.type,t.data,n);this.callback(null,o)}},4416:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(40),n(9)),a=(n(48),n(11)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(216),d=n(150),f=n(1250),p=n(1273);n(1370);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==m(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function v(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=y(Object(i.useState)(e.doc.title),2),n=t[0],l=t[1],u=y(Object(i.useState)(-1),2),s=u[0],m=u[1],b=function(){var t,r=(t=h().mark((function t(){var r,o,i,l,u,p,m;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.book,o=e.doc,i=e.docletType,l=e.onOpenTemplateSelector,u=e.inEdit,s===d.TYPE.BOOK?(p=r.id,m=d.TARGET_TYPE.BOOK):s===d.TYPE.PERSONAL?(p=window.appData.me.id,m=d.TARGET_TYPE.USER):(p=r.user_id,m=d.TARGET_TYPE.USER),Object(f.e)(p,m,s,i,n,o.id,u).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:l},__("查看全部模板")));a.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){v(a,r,o,i,c,"next",e)}function c(e){v(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),g=e.group,_=e.organization,E=e.isDesktop;return c.a.createElement(r.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{onClick:e.onCancel},__("取消")),c.a.createElement(o.a,{type:"primary",onClick:b},__("确定")))},c.a.createElement(p.a,{newTemplateName:n,onSetNewTemplateName:l,onSetSelectedScope:m,group:g,organization:_,isDesktop:E}))}g.propTypes={visible:u.a.bool,onCancel:u.a.func,modalTitle:u.a.string,docletType:u.a.string,doc:u.a.object,book:u.a.object,group:u.a.object,organization:u.a.object,isDesktop:u.a.bool,onOpenTemplateSelector:u.a.func,templateProxy:u.a.object,docProxy:u.a.object,inEdit:u.a.bool},t.a=Object(s.b)(g,!0)},4418:function(e,t,n){"use strict";n.r(t);n(67);var r=n(31),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(4143),u="index-module_searchModalWrapper_vtDAq",s="index-module_searchInput_MvuM1",d=["visible","onCancel"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(null,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=e.visible,n=e.onCancel,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,d),c=p(Object(o.useState)(t),2),m=c[0],h=c[1],v={size:"large",placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,bordered:!1,className:s},y=function(){h(!1),n()};return Object(o.useEffect)((function(){h(t)}),[t]),a.a.createElement(r.a,{keyboard:!0,onCancel:y,wrapClassName:u,width:720,footer:null,visible:m,destroyOnClose:!0},a.a.createElement(l.a,f({},i,{sence:"modal",searchInputProps:v,onCancel:y})))};h.propTypes={onCancel:c.a.func,visible:c.a.bool};t.default=h},4443:function(e,t,n){"use strict";n.r(t),n.d(t,"ShareButton",(function(){return Xn}));n(40);var r=n(9),o=n(0),a=n.n(o),i=n(216),c=(n(1219),n(959)),l=(n(227),n(101)),u=n(464),s=n(208),d=n(34),f="styles-module_popover_v7CCF",p="styles-module_disable_OpJcF";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var h=["panel","CollaboratorChannel","InviteSelectorChannel","children"],v=["shareViewType","canCollaborator","canShare","isFileBook","onlyCollaborator","organization","group","book","me","targetResource","onChangeShare","beforeShareUpdate","getPopupContainer"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==m(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var N=function(e){return e.parentNode||document.body},x=function(e){var t=e.panel,n=e.CollaboratorChannel,a=e.InviteSelectorChannel,i=e.children,m=S(e,h),g=m.shareViewType,E=m.canCollaborator,k=m.canShare,x=m.isFileBook,A=m.onlyCollaborator,P=m.organization,C=m.group,j=m.book,T=m.me,I=m.targetResource,M=m.onChangeShare,L=m.beforeShareUpdate,R=m.getPopupContainer,D=void 0===R?N:R,U=S(m,v),B=O(o.useState(!1),2),z=B[0],F=B[1],V=O(o.useState(!1),2),G=V[0],Y=V[1];o.useEffect((function(){var e="#collaborator"===window.location.hash||window.location.hash.startsWith("#collaborator?");A&&e&&E&&g===u.b.DOC&&(Y(!0),F(!0))}),[]),o.useEffect((function(){A&&E&&g===u.b.DOC&&Y(!0)}),[A]);var $=function(){var e,t=(e=b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_(_({},t),{},{id:I.id}),!A){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",null==M?void 0:M(n));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),q=o.useMemo((function(){var e=null!=P&&P.id?u.a.ORG:u.a.PERSON;return Object(s.a)()?e:u.a.INTERNAL}),[P]);return null!=I&&I.id?o.createElement(c.a,{overlayClassName:f,content:o.createElement(t,{CollaboratorChannel:n,InviteSelectorChannel:a,onAttrsChange:$,beforeAttrsChange:L,share:I,shareViewType:g,canCollaborator:E,canShare:k,isFileBook:x,belongs:q,organization:P,group:C,book:j,me:T,showCollaborator:G,onlyCollaborator:A}),trigger:z&&d.c?"hover":"click",placement:"bottomRight",destroyTooltipOnHide:!0,visible:z,onVisibleChange:function(e){F(e)},getPopupContainer:D,noArrow:!0},i||o.createElement(r.a,y({},U,{"data-aspm-click":"c36321.d326998"}),o.createElement("span",null,__("分享")))):o.createElement(l.a,{placement:"bottomRight",title:__("当前无法使用分享，请检查网络状态"),arrowPointAtCenter:!0},o.createElement(r.a,y({className:p},U),o.createElement("span",null,__("分享"))))},A=(n(48),n(11)),P=(n(67),n(31)),C=n(251),j=n(1422),T=n(3971),I=n(10),M=n(88),L=n.n(M),R=n(4369),D=(n(1429),n(1426)),U="ShareQrCodeLazyShow-module_skeletonPanel_OLLRv",B="ShareQrCodeLazyShow-module_skeletonTitle_-9VKp",z="ShareQrCodeLazyShow-module_skeletonImage_oIjcM",F="ShareQrCodeLazyShow-module_skeletonButton_VsITP",V=function(){return o.createElement("div",{className:U},o.createElement(D.a,{className:B,title:!0,paragraph:!1,active:!0}),o.createElement(D.a.Image,{className:z}),o.createElement(D.a,{className:F,title:!0,paragraph:!1,active:!0}))},G=(n(1006),n(702)),Y=(n(1528),n(1367)),$=n(5),q=n.n($),W=n(369),H=n.n(W),K=n(63),Z=n(47),Q=n(285),X=n(492),J=n(3676),ee=n(3804);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.target_id,n=e.target_type,r=te(o.useState(0),2),a=r[0],i=r[1];return o.useEffect((function(){t&&["Book","Doc"].includes(n)&&Z.a.collaborations.count({target_type:n,target_id:t,status:X.STATUS.applying}).then((function(e){i((null==e?void 0:e.count)||0)}))}),[t,n]),o.createElement(Y.a,{dot:a>0,offset:[-4,4],className:ee.a.dot},o.createElement(K.b,{className:ee.a.inviteIcon,name:"icon-collaboratorlist",width:30}))},oe=function(e){var t=e.share,n=e.shareViewType,r=e.group,a=e.book,i=e.handlePanelShow;return o.createElement(o.Fragment,null,o.createElement(G.a.Item,{className:ee.a.firstItem,actions:[o.createElement(l.a,{title:__("链接添加协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-edit",onClick:function(){return i(J.c.inviteSelectorChannel)},"data-aspm-click":"c36321.d326999"},o.createElement(K.b,{className:ee.a.inviteIcon,name:"addlink",width:30}))),o.createElement(l.a,{title:__("查看所有协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-more",className:ee.a.inviteIconLi,onClick:function(){n===u.b.BOOK?Object(Q.c)("/r/".concat(null==r?void 0:r.login,"/").concat(null==a?void 0:a.slug,"/collaborators")):n===u.b.DOC&&i(J.c.collaboratorChannel)},"data-aspm-click":"c36321.d327000"},o.createElement(re,{target_id:null==t?void 0:t.id,target_type:H()(n.toLowerCase())})))]},o.createElement(G.a.Item.Meta,{avatar:o.createElement(K.b,{className:q()(ee.a.itemIcon,ee.a.appointIcon),name:"nav-invite",width:40}),title:o.createElement("span",null,__("添加协作者")),description:o.createElement("span",null,__("通过链接，邀请对方加入协作"))})))},ae=n(1428),ie=n(1856),ce=n(1857),le=n(4040),ue=n(74),se=n(50);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(){pe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==de(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(de(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function me(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(e){var t=e.canCollaborator,n=e.isShareActive,a=e.belongs,i=e.shareViewType,c=e.organization,l=e.group,d=e.book,f=e.share,p=e.me,m=e.handleScopeChange,h=he(o.useState(!1),2),v=h[0],y=h[1],b=!(!c||null==c||!c.id),g=Object(T.a)(),_=o.useMemo((function(){var e=g.interests[se.INTEREST_CODE.create_public_resource];return e||b||i!==u.b.DOC||(e=!0),e}),[l]),E=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(ue.LIMIT_SCENE.share_public)},w=o.useMemo((function(){if(!n&&!_&&((null==c||!c.id)&&"User"===(null==l?void 0:l.type)))return l.id===p.id?__("会员可公开内容至互联网 {btn}",{btn:o.createElement("a",{onClick:E},__("购买会员"))}):__("联系知识库所有者购买会员可公开内容至互联网");return L()(J.v,[a,Object(J.k)(f,i,l,d)])}),[i,a,f,l,d]),O=o.useMemo((function(){return L()(J.t,[a,n?"public":"private"])}),[a,n]),k=function(){var e,t=(e=pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,m(a===u.a.PERSON?I.PRIVACY.public:I.PRIVACY.intranet);case 4:return e.prev=4,y(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){me(a,r,o,i,c,"next",e)}function c(e){me(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.createElement(G.a.Item,{className:q()(fe({},ee.a.firstItem,!t)),actions:[!n&&(_||b)&&o.createElement(o.Fragment,null,o.createElement(r.a,{className:q()(ee.a.shareButton,ee.a.sharePublic),disabled:v,onClick:k},v?o.createElement(ae.default,{width:14,height:14,className:ee.a.loadingIcon}):__("公开")))]},o.createElement(G.a.Item.Meta,{avatar:n?o.createElement(ie.default,{width:40,height:40,className:q()(ee.a.itemIcon,ee.a.publicIcon)}):o.createElement(ce.default,{width:40,height:40,className:q()(ee.a.itemIcon,ee.a.publicIcon)}),title:o.createElement("span",{className:ee.a.itemTitle},O,!_&&o.createElement(le.a,{className:ee.a.memberAbleIcon,isYuque:Object(s.a)(),group:l,organization:c})),description:w}))},be=(n(53),n(12)),ge=n(1858),_e=n(1233),Ee=n.n(_e),we=n(4014),Oe=n(242),ke=function(e){var t,n=e.shareLink,a=e.isFileBook,i=e.privacy,c=e.belongs,l=e.shareViewType,s=e.organization,d=e.group,f=e.book,p=e.share,m=e.handleScopeChange,h=e.handlePanelShow,v=e.handlePanelType,y=e.handlePanelTitle,b=e.LazyShareQrCodeChannel,g=!(!s||null==s||!s.id),_=Object(j.c)(p,l,d,f).currentPassword,E=Object(j.b)(p,l,d,f).currentIndexedLevel,w=Object(j.e)(p,l,g),O=Object(Oe.g)(d),k=[{type:"scopeSet",title:__("分享范围"),hidden:c===u.a.PERSON||c===u.a.ORG&&a,defaultValue:c!==u.a.PERSON?null===(t=J.q[c].actions.find((function(e){return e.value===i})))||void 0===t?void 0:t.label:null,icon:"icon-range"},{type:"passwordSet",title:__("密码访问"),defaultValue:_||__("无密码"),icon:"icon-key-2"},{type:"searchSet",title:J.r[l][c].action,hidden:a||O,defaultValue:1===E?__("已开启"):__("关闭"),icon:"help-search"},{type:"closeShareSet",title:__("关闭公开分享"),noDetail:!0,icon:"icon-cancellink"}];w&&k.unshift({type:"shareExpiredTimeSet",title:__("有效期"),defaultValue:w.expiredTime,icon:"nav-clock"}),l===u.b.DOC&&c===u.a.INTERNAL&&(null==f?void 0:f.public)===I.PRIVACY.private&&(k=k.filter((function(e){return"searchSet"!==e.type})));var S=o.useCallback((function(){if(null!=n&&n.url){Ee()((null==n?void 0:n.urlWithDesc)||n.url,{format:"text/plain"});var e=_?__("已复制链接和密码"):__("已复制链接");A.a.success(e,1)}}),[n]);return o.createElement("div",{className:ee.a.moreConfigs},o.createElement("div",{className:ee.a.shareLinkSet},o.createElement(be.a,{className:q()(ee.a.shareLinkShow,ee.a.qrCode),disabled:!0,placeholder:null==n?void 0:n.url}),o.createElement(r.a,{className:ee.a.shareButton,onClick:S},__("复制链接")),o.createElement(r.a,{className:ee.a.shareQrCode,onClick:function(){return h(J.c.shareQrCodeChannel)},onMouseOver:function(){b.preload()}},o.createElement(ge.default,{className:ee.a.shareQrCodeIcon,width:18,height:18}))),o.createElement(we.a,{settings:k,onClick:function(e,t){"closeShareSet"===e?m(I.PRIVACY.private):function(e,t){h(J.c.shareChannels),v(e),y(t)}(e,t)}}))},Se=n(4397);function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function xe(){xe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ne(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ne(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ae(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ae(a,r,o,i,c,"next",e)}function c(e){Ae(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Te=Object(C.b)((function(){return n.e(1447).then(n.bind(null,8639))})),Ie=function(e){var t=e.share,n=e.shareViewType,r=e.canShare,a=e.canCollaborator,i=void 0!==a&&a,c=e.isFileBook,l=void 0!==c&&c,s=e.showCollaborator,d=e.onlyCollaborator,f=e.belongs,p=e.beforeAttrsChange,m=e.onAttrsChange,h=e.organization,v=e.group,y=e.book,b=e.me,g=e.CollaboratorChannel,_=e.InviteSelectorChannel,E=Ce(o.useState(s?J.c.collaboratorChannel:J.c.sharePanel),2),w=E[0],O=E[1],k=Ce(o.useState(""),2),S=k[0],N=k[1],x=Ce(o.useState(""),2),C=x[0],M=x[1],D=Object(T.a)(),U=Ce(P.a.useModal(),2),B=U[0],z=U[1],F=o.useMemo((function(){return Object(j.d)(t,n,v,y)}),[t,n,v,y]),G=F.privacy,Y=F.isShareActive,$=o.useMemo((function(){var e=Object(J.k)(t,n,v,y);return f===u.a.INTERNAL&&G===I.PRIVACY.private&&(null==y?void 0:y.extend_private)===I.EXTEND_PRIVATE.BIND_DEPARTMENTS&&(e="extend_private"),L()(J.d,[n,f,e])}),[n,f,t,v,y]),q=o.useMemo((function(){return Object(j.a)(t,n,v,y)}),[t,n,v,y]),W=function(){var e=Pe(xe().mark((function e(r){return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Se.b)(r,n,t,D,B,p,m,G);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),A.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Pe(xe().mark((function e(t){return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==m?void 0:m({encrypted_password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Pe(xe().mark((function e(t){var n;return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?1:0,e.next=3,null==m?void 0:m({indexed_level:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(o.Fragment,null,o.createElement("div",{className:ee.a.sharePanel},r&&w===J.c.shareChannels&&o.createElement(R.a,{panelType:S,panelTitle:C,share:t,belongs:f,organization:h,group:v,book:y,me:b,shareViewType:n,handlePasswordChange:H,handleScopeChange:W,handleSearchChange:K,onBack:function(){return O(J.c.sharePanel)}}),w===J.c.sharePanel&&o.createElement("div",{className:ee.a.main},o.createElement("div",{className:ee.a.mainIntro},r&&o.createElement("div",{className:ee.a.shareDescText},$),i&&o.createElement(oe,{share:t,shareViewType:n,group:v,book:y,handlePanelShow:function(e){return O(e)}}),r&&o.createElement(ye,{canCollaborator:i,isShareActive:Y,belongs:f,shareViewType:n,organization:h,group:v,book:y,share:t,me:b,handleScopeChange:W})),r&&Y&&o.createElement(ke,{shareLink:q,isFileBook:l,privacy:G,belongs:f,shareViewType:n,organization:h,group:v,book:y,share:t,handleScopeChange:W,handlePanelShow:function(e){return O(e)},handlePanelType:function(e){return N(e)},handlePanelTitle:function(e){return M(e)},LazyShareQrCodeChannel:Te})),i&&w===J.c.inviteSelectorChannel&&_&&o.createElement(_,{share:t,organization:h,group:v,book:y,shareViewType:n,onBack:function(){return O(J.c.sharePanel)},inviteContent:"inviteSharePanel"}),i&&w===J.c.collaboratorChannel&&g&&o.createElement(g,{onlyCollaborator:d,share:t,organization:h,group:v,book:y,inviteContent:"collaboratorPanel",onBack:function(){return O(J.c.sharePanel)}}),r&&Y&&w===J.c.shareQrCodeChannel&&o.createElement(o.Suspense,{fallback:o.createElement(V,null)},o.createElement(Te,{share:t,shareViewType:n,link:null==q?void 0:q.url,onBack:function(){return O(J.c.sharePanel)}}))),z)},Me=n(1232),Le=n(473),Re=n(60),De=n.n(Re),Ue=n(6),Be=n.n(Ue),ze=n(3982),Fe=n(3789),Ve=n(3981),Ge=n(1226),Ye=(n(188),n(32)),$e=(n(277),n(147)),qe=(n(589),n(206)),We=(n(278),n(86)),He=(n(588),n(110)),Ke=n(1651),Ze=n(591),Qe=n(82),Xe=n(54),Je=n(1459),et=n(965),tt=n(157),nt=(n(800),n(381)),rt=n(1339),ot={role:"RoleSelector-module_role_jDwZn",trigger:"RoleSelector-module_trigger_PbJ3K",active:"RoleSelector-module_active_lhpS5",icon:"RoleSelector-module_icon_YSGjG",up:"RoleSelector-module_up_BKR9i",menu:"RoleSelector-module_menu_MwfMA",label:"RoleSelector-module_label_JI2Gx",menuItem:"RoleSelector-module_menuItem_cwz56",desc:"RoleSelector-module_desc_lnp7h"};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ut=lt(lt({},X.ROLE.edit,{label:Object(ze.getPermissionName)(X.ROLE.edit),desc:__("拥有文档的编辑权限"),role:X.ROLE.edit}),X.ROLE.readonly,{label:Object(ze.getPermissionName)(X.ROLE.readonly),desc:__("仅拥有只读和评论权限"),role:X.ROLE.readonly}),st=function(e){var t,n,r,i=it(Object(o.useState)(!1),2),c=i[0],l=i[1],u=e.role,s=e.placement,d=e.canChange,f=e.title,p=e.disableItems,m=e.externalActions;if([X.ROLE.readonly,X.ROLE.edit].includes(u)&&(n=ut[u]),!d)return a.a.createElement("span",{className:ot.status,"data-collaboration-role":u},null===(r=n)||void 0===r?void 0:r.label);return a.a.createElement("div",{className:"role-selector"},a.a.createElement(nt.a,{trigger:["click"],placement:s,onVisibleChange:function(e){l(e)},overlay:a.a.createElement(He.a,{selectedKeys:["".concat(u)],className:ot.menu,style:{border:"none"}},[X.ROLE.edit,X.ROLE.readonly].map((function(t){var n=ut[t],r=p.includes(n.role);return a.a.createElement(He.a.Item,{key:"".concat(n.role),disabled:r,onClick:function(){return t=n.role,e.onChange(t),void l(!1);var t}},a.a.createElement("a",{className:ot.menuItem,href:"#"},a.a.createElement("span",null,a.a.createElement("span",{className:ot.label},n.label),a.a.createElement("span",{className:ot.desc},n.desc)),a.a.createElement(rt.default,{style:{color:"#25B864"}})))})),m&&m())},a.a.createElement("span",{className:q()(ot.trigger,lt({},ot.active,c)),"data-collaboration-role":u},f||(null===(t=n)||void 0===t?void 0:t.label),a.a.createElement(K.b,{name:"arrow-down",className:q()(ot.icon,lt({},ot.up,c)),width:16}))))};st.propTypes={onChange:Be.a.func,placement:Be.a.string,canChange:Be.a.bool,role:Be.a.oneOf([X.ROLE.readonly,X.ROLE.edit]),title:Be.a.string,externalActions:Be.a.func,disableItems:Be.a.array},st.defaultProps={onChange:function(){},placement:"bottomRight",canChange:!0,disableItems:[]};var dt=st,ft={joinUserItem:"Item-module_joinUserItem_0O6yw",checkboxInfo:"Item-module_checkboxInfo_mWKfK",virtualLink:"Item-module_virtualLink_ty3p1",userInfo:"Item-module_userInfo_F4pgj",showItem:"Item-module_showItem_sCn3R",avatar:"Item-module_avatar_JD1HW",userDesc:"Item-module_userDesc_q4mqR",name:"Item-module_name_ff-QM",loginShow:"Item-module_loginShow_DePxA",loginShowSearch:"Item-module_loginShowSearch_zdokE",login:"Item-module_login_bu7O2",roleDesc:"Item-module_roleDesc_Dy5G9",roleDescSearch:"Item-module_roleDescSearch_Dw+uE",targetTypeRole:"Item-module_targetTypeRole_4riim",department:"Item-module_department_y3daB",dingtalkGroupTag:"Item-module_dingtalkGroupTag_lW9PH",applyPending:"Item-module_applyPending_7Va+N",pending:"Item-module_pending_KikZW",pendingRole:"Item-module_pendingRole_mvO-A",topRightDesc:"Item-module_topRightDesc_dQW2s",actions:"Item-module_actions_Mfqej",actionItem:"Item-module_actionItem_piU3P",actionItemReject:"Item-module_actionItemReject_rSq40",actionItemLabel:"Item-module_actionItemLabel_kzYeZ",deleteActionItem:"Item-module_deleteActionItem_RJWcd",label:"Item-module_label_qLBXy",desc:"Item-module_desc_-+chL"};function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_t(r.key),r)}}function ht(){ht=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==pt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(pt(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function vt(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t,n){return(t=_t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pt(t)?t:t+""}var Et=gt(gt(gt({},X.ROLE.manage,__("知识库管理员")),X.ROLE.edit,__("知识库可编辑成员")),X.ROLE.readonly,__("知识库可阅读成员")),wt=gt(gt(gt({},Qe.ROLE.owner,__("团队管理员")),Qe.ROLE.member,__("团队成员")),Qe.ROLE.readonly,__("团队只读成员")),Ot=gt(gt({},X.TARGET_TYPE.Book,Et),X.TARGET_TYPE.Group,wt),kt=gt(gt(gt({},X.ROLE.manage,__("可管理")),X.ROLE.edit,__("可编辑")),X.ROLE.readonly,__("可阅读"));function St(e){var t;return(null===(t=e.collaborator)||void 0===t?void 0:t.target_type)===X.TARGET_TYPE.Book}function Nt(e){var t;return(null===(t=e.collaborator)||void 0===t?void 0:t.target_type)===X.TARGET_TYPE.Group}function xt(e){var t,n,r,o,a=e.collaborator;switch(null==a?void 0:a.target_type){case X.TARGET_TYPE.Book:return null!=a&&a.owner&&null!=a&&a.target?"/r/".concat(null==a||null===(t=a.owner)||void 0===t?void 0:t.login,"/").concat(null==a||null===(n=a.target)||void 0===n?void 0:n.slug,"/collaborators?role=").concat(null==a?void 0:a.target_role):"#";case X.TARGET_TYPE.Group:return null!=a&&a.owner&&null!=a&&null!==(r=a.owner)&&void 0!==r&&r.login&&(null==a||null===(o=a.owner)||void 0===o?void 0:o.type)===Xe.TYPES_MAP.group?"/".concat(null==a?void 0:a.owner.login,"/members?role=").concat(null==a?void 0:a.target_role):"#";default:return"#"}}function At(e){var t,n,r,o,i,c,l,u,s=e.data,d=e.renderActions,f=e.isChecked,p=e.isCheckboxDisabled,m=e.isBatchProcessing,h=e.onSelect,v=(null===(u=s.collaborator)||void 0===u?void 0:u.owner_type)===X.OWNER_TYPE.VirtualCollaborator,y=St(s),b=Nt(s),g=!s.isNewUser()||Nt(s)||St(s);return a.a.createElement("div",{"data-testid":"join-user-item",key:s.uid,className:ft.joinUserItem,onClick:function(){s.ableToAdd()&&e.onAdd(s)}},m&&a.a.createElement("div",{className:ft.checkboxInfo},a.a.createElement(qe.a,{checked:f,disabled:p,onChange:function(e){h(e,s)}})),v?a.a.createElement("div",{className:ft.virtualLink},a.a.createElement("div",{className:q()(ft.userInfo,gt({},ft.showItem,g))},a.a.createElement("span",{className:ft.avatar},b&&a.a.createElement(Je.a,{group:null===(t=s.collaborator)||void 0===t?void 0:t.owner,size:32}),y&&a.a.createElement(et.b,{showTooltip:!1,book:null===(n=s.collaborator)||void 0===n?void 0:n.target,width:32})),a.a.createElement("a",{href:xt(s),"data-desktoptarget":"_browser",target:"_blank"},a.a.createElement("span",null,Ot[null===(r=s.collaborator)||void 0===r?void 0:r.target_type][null===(o=s.collaborator)||void 0===o?void 0:o.target_role]),(null===(i=s.collaborator)||void 0===i?void 0:i.target_count)&&a.a.createElement("span",null,__("({count}人)",{count:null===(c=s.collaborator)||void 0===c?void 0:c.target_count})))),a.a.createElement("div",{className:ft.actions},a.a.createElement("span",{className:ft.actionItemLabel},kt[null===(l=s.collaborator)||void 0===l?void 0:l.role]))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:q()(ft.userInfo,gt({},ft.showItem,g))},a.a.createElement("span",{className:ft.avatar},a.a.createElement(Ze.a,{src:s.avatar,name:s.name,size:"sm"})),a.a.createElement("div",{className:ft.userDesc},function(e,t,n,r){var o,i,c,l=window.appData.isYuque,u=e.login||e.uid;if(!l){var s,d,f,p=(null===(s=e.data)||void 0===s?void 0:s.lastName)||e.login,m="AntDingTalkGroup"!==e.originType;return a.a.createElement("div",{className:ft.name},a.a.createElement("p",{className:q()(ft.loginShow,gt({},ft.loginShowSearch,!r))},e.name,m&&a.a.createElement("span",{className:ft.login},__("（")+p+__("）"))),"AntDingTalkGroup"===e.originType&&a.a.createElement("p",{className:ft.dingtalkGroup},a.a.createElement(We.a,{color:"#D9E8FC",className:ft.dingtalkGroupTag},"钉钉群")),a.a.createElement("p",{className:q()(ft.roleDesc,gt({},ft.roleDescSearch,!r))},t&&a.a.createElement("span",{className:ft.targetTypeRole},Et[null===(d=e.collaborator)||void 0===d?void 0:d.target_role]),n&&a.a.createElement("span",{className:ft.targetTypeRole},wt[null===(f=e.collaborator)||void 0===f?void 0:f.target_role]),e.department&&a.a.createElement("span",{className:ft.department},e.department)))}return a.a.createElement("div",{className:ft.name},a.a.createElement("p",{className:ft.loginShow},e.name,1!==(null===(o=e.collaborator)||void 0===o?void 0:o.status)?null:a.a.createElement("span",{className:ft.login},__("（")+u+__("）"))),a.a.createElement("p",{className:ft.roleDesc},t&&a.a.createElement("span",{className:ft.targetTypeRole},Et[null===(i=e.collaborator)||void 0===i?void 0:i.target_role]),n&&a.a.createElement("span",{className:ft.targetTypeRole},wt[null===(c=e.collaborator)||void 0===c?void 0:c.target_role])))}(s,y,b,g),!s.isGroupMember()&&!s.isGroupReadonlyMember()&&s.isInvited()&&!s.isMine()&&a.a.createElement("div",null,a.a.createElement("span",{className:ft.topRightDesc},__("尚未加入"))),!s.isGroupMember()&&!s.isGroupReadonlyMember()&&s.isApplying()&&a.a.createElement("div",{className:ft.applyPending},a.a.createElement("span",{className:ft.pending},__("申请权限")),a.a.createElement("span",{className:q()(ft.pending,ft.pendingRole)},"0"===s.role?__("可阅读"):__("可编辑"))))),a.a.createElement("div",{className:ft.actions},d(e))))}var Pt=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gt(this,"data",void 0),this.data=t},(t=[{key:"actionId",get:function(){throw new Error("需要实现这个对象")}},{key:"actionType",get:function(){throw new Error("需要实现这个对象")}},{key:"uid",get:function(){return this.data.uid}},{key:"id",get:function(){return this.data.id}},{key:"login",get:function(){return this.data.login}},{key:"name",get:function(){return this.data.name}},{key:"avatar",get:function(){return this.data.avatar_url}},{key:"role",get:function(){return this.data.role}},{key:"provider_type",get:function(){return this.data.provider_type}},{key:"provider_userid",get:function(){return this.data.provider_userid}}])&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ct=function(e){if(!(e.data instanceof Pt))throw new Error("data should be extend ItemBase");return At(e)};Ct.propTypes={data:Be.a.object.isRequired,renderActions:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onRoleChange:Be.a.func,onAdd:Be.a.func,limited:Be.a.bool,isChecked:Be.a.bool,isCheckboxDisabled:Be.a.bool,isBatchProcessing:Be.a.bool,onSelect:Be.a.func},Ct.defaultProps={renderActions:function(e){var t=e.data,n=e.limited,o=a.a.useRef(null),i=yt(P.a.useModal(),2),c=i[0],l=i[1];if(Nt(t)||St(t))return a.a.createElement("span",{className:ft.actionItemLabel},kt[t.role]);if(t.ableToAdd())return null;var u=function(e){var t=__("确认拒绝 ".concat(e," 的访问申请？")),n=__("确认要拒绝 ".concat(e," 的访问申请吗？"));return new Promise((function(e){c.confirm({icon:a.a.createElement(Ke.default,null),width:505,title:t,content:__("{desc}拒绝后该用户无法访问该文档。",{desc:n}),okText:__("拒绝"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)},getContainer:function(){return o.current||document.body}})}))},s=function(){var t,n=(t=ht().mark((function t(n){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(n.name);case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:Object(tt.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"refuse",infoType:"Doc"}),e.onReject(n);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){vt(a,r,o,i,c,"next",e)}function c(e){vt(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,t.isUpdateAbility()&&t.isApplying()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{type:"text",size:"small",onClick:function(){e.onAgree(t),Object(tt.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"approve",infoType:"Doc"})},className:ft.actionItem,"data-testid":"join-user-agree-button",disabled:n},__("同意")),a.a.createElement(r.a,{type:"text",size:"small",onClick:function(){s(t)},className:q()(ft.actionItem,ft.actionItemReject)},__("拒绝"))),t.isUpdateAbility()&&(t.isJoined()||t.isInvited())&&a.a.createElement(dt,{role:parseInt(t.role,10),onChange:function(n){e.onRoleChange(t,n)},externalActions:function(){return a.a.createElement(He.a.Item,{key:"deleteItem-".concat(t.role)},a.a.createElement("a",{key:"deleteItem",className:ft.deleteActionItem,"data-testid":"join-user-delete-button",onClick:function(){e.onDelete(t)}},a.a.createElement("span",null,a.a.createElement("span",{className:ft.label},__("移除")),a.a.createElement("span",{className:ft.desc},__("移除该协作者")))))},canChange:t.isUpdateAbility()}),l)}};var jt=Ct;function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mt=function(e){var t=Tt(Object(o.useState)(""),2),n=t[0],r=t[1],i=e.renderItem,c=e.dataSource,l="searchSelector-".concat(+new Date);return a.a.createElement("div",{className:"join-user-search-selector",id:l},a.a.createElement("div",{className:"selector"},a.a.createElement(Ye.a,{mode:"multiple",labelInValue:!0,listHeight:354,value:[],placeholder:e.placeholder,notFoundContent:e.loading?a.a.createElement($e.a,{justify:"block"}):n?e.renderNotFound():null,filterOption:!1,onSearch:function(t){r(t),e.onSearch(t)},onChange:e.onChange,onSelect:function(t,n){r("");var o=c.find((function(n){return n[e.key]===t.key}));o&&e.onSelect(o)},onBlur:function(){r(""),e.onBlur&&e.onBlur()},style:{width:"100%"},disabled:e.disableSearch,getPopupContainer:function(){return document.getElementById(l)}},c.map((function(t){return a.a.createElement(Ye.a.Option,{key:t[e.key],className:"selector-item",disabled:e.disableSelect(t)},a.a.createElement("div",{className:"full-item"},a.a.createElement(i,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions})),a.a.createElement("div",{className:"simple-item"},t[e.name]))})))))};Mt.propTypes={dataSource:Be.a.array,renderItem:Be.a.func,renderNotFound:Be.a.func,renderActions:Be.a.func,key:Be.a.string,name:Be.a.string,disableSelect:Be.a.func,onSearch:Be.a.func,onChange:Be.a.func,onSelect:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onRoleChange:Be.a.func,onAdd:Be.a.func,onBlur:Be.a.func,loading:Be.a.bool,placeholder:Be.a.string,disableSearch:Be.a.bool},Mt.defaultProps={key:"uid",name:"name",placeholder:__("搜索添加用户"),loading:!1,dataSource:[],renderItem:jt,renderNotFound:function(){return null},onSearch:function(){},onChange:function(){},onSelect:function(){},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onBlur:function(){},onAdd:function(){},disableSelect:function(){return!1},disableSearch:!1};var Lt=Mt,Rt="EmptyTip-module_emptyTip_aBtYt",Dt="EmptyTip-module_emptyImageWrapper_6BIQC",Ut="EmptyTip-module_emptyImage_u42M6",Bt="EmptyTip-module_emptyText_JUjEv",zt=function(){return a.a.createElement("div",{className:Rt},a.a.createElement("div",{className:Dt},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*aSg9SJR6isIAAAAAAAAAAAAAARQnAQ",className:Ut})),a.a.createElement("p",{className:Bt},__("暂无文档协作者")))},Ft="List-module_item_Yt8gv",Vt="List-module_batchItem_Us7Lf",Gt="List-module_checkIcon_hePQ4",Yt="List-module_batchAction_BzAK1",$t="List-module_batchDelete_HYqdG";function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Wt(){Wt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==qt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(qt(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ht(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ht(a,r,o,i,c,"next",e)}function c(e){Ht(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Zt(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var en=function(e){var t=e.dataSource,n=e.renderItem,r=e.limited,o=e.isBatchProcessing,i=e.onRoleBatchChange,c=e.onBatchDelete,l=t.filter((function(e){return e.collaborator.target_type===X.TARGET_TYPE.Doc&&(e.collaborator.status!==X.STATUS.joined||window.appData.me.login===e.login)})),u=t.filter((function(e){return e.collaborator.target_type===X.TARGET_TYPE.Doc&&e.collaborator.status===X.STATUS.joined&&window.appData.me.login!==e.login})),s=t.filter((function(e){return e.collaborator.target_type===X.TARGET_TYPE.Book})),d=t.filter((function(e){return e.collaborator.target_type===X.TARGET_TYPE.Group})),f=Qt(a.a.useState([]),2),p=f[0],m=f[1],h=p.length>0&&p.length<u.length,v=u.length>0&&u.length===p.length,y=function(e,t){var n=p.includes(t)?p.filter((function(e){return e!==t})):[].concat(Zt(p),[t]);m(n)},b=function(){var e=Kt(Wt().mark((function e(t){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,t);case 2:m([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Kt(Wt().mark((function e(){return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(p);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(t,n){e.onRoleChange(t,n),p.length>0&&m([])};return a.a.useEffect((function(){m([])}),[t.length]),a.a.createElement(a.a.Fragment,null,o&&a.a.createElement("div",{className:Vt},a.a.createElement("div",{className:Gt},a.a.createElement(qe.a,{onChange:function(e){m(e.target.checked?u:[])},indeterminate:h,checked:v},p.length>0?__("已选择 {count} 个",{count:p.length}):__("全选"))),p.length>0&&a.a.createElement("div",{className:Yt},a.a.createElement(dt,{title:__("批量调整权限"),onChange:b}),a.a.createElement("div",{className:$t,onClick:g},a.a.createElement("span",null,__("批量移除"))))),!!l.length&&a.a.createElement(a.a.Fragment,null,null==l?void 0:l.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Ft},a.a.createElement(n,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:_,onAdd:e.onAdd,renderActions:e.renderActions,limited:r,isBatchProcessing:o,isCheckboxDisabled:!0}))}))),!!u.length&&a.a.createElement(a.a.Fragment,null,null==u?void 0:u.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Ft},a.a.createElement(n,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:_,onAdd:e.onAdd,renderActions:e.renderActions,onSelect:y,isBatchProcessing:o,isChecked:p.includes(t)}))}))),!!s.length&&a.a.createElement(a.a.Fragment,null,null==s?void 0:s.map((function(e){return a.a.createElement("div",{key:e.id,className:Ft},a.a.createElement(n,{data:e,isBatchProcessing:o,isCheckboxDisabled:!0}))}))),!!d.length&&a.a.createElement(a.a.Fragment,null,null==d?void 0:d.map((function(e){return a.a.createElement("div",{key:e.id,className:Ft},a.a.createElement(n,{data:e,isBatchProcessing:o,isCheckboxDisabled:!0}))}))))};en.propTypes={dataSource:Be.a.array,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onBatchDelete:Be.a.func,onRoleChange:Be.a.func,onRoleBatchChange:Be.a.func,onAdd:Be.a.func,renderItem:Be.a.func,renderActions:Be.a.func,limited:Be.a.bool,isBatchProcessing:Be.a.bool},en.defaultProps={dataSource:[],onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){},renderItem:jt};var tn=en,nn={title:"Modal-module_title_Fhe+q",menu:"Modal-module_menu_GTmMW",searchWrapper:"Modal-module_searchWrapper_G76nZ",searchSelector:"Modal-module_searchSelector_qZfrJ",searchAdd:"Modal-module_searchAdd_srKkd",btnLoadMore:"Modal-module_btnLoadMore_+NLxh",spinContainer:"Modal-module_spinContainer_6y18w",listWrapper:"Modal-module_listWrapper_YI-Wn"};function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return on(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var an=function(e){var t=e.collaboratorCount,n=e.dataSource,r=rn(Object(o.useState)(!1),2),i=r[0],c=r[1],l=rn(Object(o.useState)(!1),2),u=l[0],d=l[1],f=rn(Object(o.useState)(!1),2),p=f[0],m=f[1],h=window.appData,v=h.isYuque,y=h.organization,b=h.group,g=t>=Ge.a.getDocCollaboratorLimit(b),_=!(Object(s.a)()&&(null==y||!y.id));return e.onLoading?a.a.createElement("div",{className:nn.spinContainer},a.a.createElement(D.a,{title:!0,paragraph:!1,active:!0}),a.a.createElement(D.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(D.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(D.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(D.a,{avatar:!0,title:!0,paragraph:!1,active:!0})):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:nn.content},v&&e.memberDocCollaboratorTip&&a.a.createElement(Fe.e,{collaboratorCount:e.collaboratorCount,user:b}),a.a.createElement("div",{className:nn.searchWrapper},e.showSearch&&a.a.createElement("div",{className:nn.searchSelector},a.a.createElement(Lt,{loading:e.searchLoading,dataSource:p?e.searchData:e.recentContacts,placeholder:e.placeholder,onSelect:e.onSelect,onSearch:function(t){m(!0),e.onSearch(t)},onChange:e.onChange,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,onBlur:e.onBlur,disableSelect:e.disableSelect,disableSearch:e.disableSearch,renderNotFound:e.renderSearchNotFound,renderItem:e.renderItem,renderActions:e.renderActions})),_&&a.a.createElement("div",{className:nn.searchAdd,onClick:function(){return c(!0)}},__("批量添加")),t>0&&a.a.createElement("div",{className:nn.searchAdd,onClick:function(){d(!u)}},u?__("取消处理"):__("批量处理"))),n.length>0?a.a.createElement("div",{className:nn.listWrapper},a.a.createElement(tn,{dataSource:n,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onBatchDelete:e.onBatchDelete,onRoleChange:e.onRoleChange,onRoleBatchChange:e.onRoleBatchChange,onAdd:e.onAdd,renderItem:e.renderItem,renderActions:e.renderActions,limited:v&&g,isBatchProcessing:u}),e.moreLoading?a.a.createElement("div",{className:nn.btnLoadMore},__("加载中...")):e.shouldLoadMore?a.a.createElement("div",{className:nn.btnLoadMore,onClick:e.onLoadMore},__("加载更多")):null):a.a.createElement(zt,null)),i&&a.a.createElement(Ve.a,{type:"doc",visible:i,onCancel:function(){return c(!1)},afterSubmit:function(){var t;c(!1),null===(t=e.onAdd)||void 0===t||t.call(e)}}))};an.propTypes={dataSource:Be.a.array,shouldLoadMore:Be.a.bool,onLoadMore:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onBatchDelete:Be.a.func,onRoleChange:Be.a.func,onRoleBatchChange:Be.a.func,onAdd:Be.a.func,moreLoading:Be.a.bool,renderItem:Be.a.func,renderActions:Be.a.func,dispatch:Be.a.func,memberDocCollaboratorTip:Be.a.bool,collaboratorCount:Be.a.number,searchData:Be.a.array,placeholder:Be.a.string,disableSearch:Be.a.bool,disableSelect:Be.a.func,onSearch:Be.a.func,onChange:Be.a.func,onSelect:Be.a.func,onBlur:Be.a.func,searchLoading:Be.a.bool,renderSearchNotFound:Be.a.func,showSearch:Be.a.bool,onLoading:Be.a.bool},an.defaultProps={collaboratorCount:0,dataSource:[],searchData:[],shouldLoadMore:!1,moreLoading:!1,onLoadMore:function(){},showSearch:!0,disableSearch:!1};var cn=an,ln=n(308),un=n(4305),sn=n(3746),dn=n(4123),fn="SearchNotFound-module_notfound_MSXOw",pn="SearchNotFound-module_notfoundTitle_Br7DA",mn=function(){return a.a.createElement("div",{className:fn},a.a.createElement("p",{className:pn},__("未在空间中找到该用户，请检查输入或联系管理员添加到空间成员")))},hn=function(){return a.a.createElement("div",{className:fn},a.a.createElement("p",{className:pn},__("未搜索到相关用户")))};function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function gn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _n(e){var t=function(e,t){if("object"!=vn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vn(t)?t:t+""}function En(e,t,n){return t=On(t),function(e,t){if(t&&("object"==vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wn()?Reflect.construct(t,n||[],On(e).constructor):t.apply(e,n))}function wn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wn=function(){return!!e})()}function On(e){return On=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},On(e)}function kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}var Nn=function(e){function t(e,n,r,o,a){var i;return yn(this,t),(i=En(this,t,[e])).collaborator=n,i.groupUser=r,i.target=o,i.book=a||o,i}return kn(t,e),gn(t,[{key:"originId",get:function(){return this.data.origin_id}},{key:"originType",get:function(){return this.data.origin_type}},{key:"department",get:function(){var e,t;return(null===(e=this.data)||void 0===e||null===(e=e.profile)||void 0===e?void 0:e.department)||(null===(t=this.data)||void 0===t?void 0:t.dep)||null}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return"AntDingTalkGroup"===this.originType?"".concat(this.originType,"_").concat(this.originId):(this.data.uid||Object(sn.format)([this.data]),this.data.uid)}},{key:"userId",get:function(){return this.data.id}},{key:"role",get:function(){return this.collaborator&&String(this.collaborator.role)}},{key:"workId",get:function(){return this.data.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator&&this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator&&this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator&&this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Qe.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Qe.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}}])}(Pt),xn=function(e){function t(e,n,r,o){var a,i;return yn(this,t),(i=En(this,t,[e])).collaborator=e,i.user=e.owner,i.collaborator.owner_id=null===(a=i.user)||void 0===a?void 0:a.id,i.groupUser=n,i.target=r,i.book=o||r,i.departments=e.departments,i}return kn(t,e),gn(t,[{key:"department",get:function(){var e;return null!==(e=this.departments)&&void 0!==e&&e.length?this.departments.map((function(e){return e.name})).join("-"):null}},{key:"ownerType",get:function(){return this.collaborator.owner_type}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.user.uid||Object(sn.format)([this.user]),this.user.uid}},{key:"userId",get:function(){return this.user.id}},{key:"role",get:function(){return String(this.collaborator.role)}},{key:"login",get:function(){return this.user.login}},{key:"name",get:function(){return this.user.name}},{key:"avatar",get:function(){return this.user.avatar_url}},{key:"workId",get:function(){return this.user.workid}},{key:"originId",get:function(){return this.data.owner_id}},{key:"originType",get:function(){return this.data.owner_type}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator.target_type===X.TARGET_TYPE.Doc&&this.collaborator.status===X.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Qe.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Qe.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login&&this.isUser()}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}},{key:"isUser",value:function(){return this.ownerType===X.OWNER_TYPE.User}}])}(Pt);function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=An(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=An(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==An(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(){Tn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==An(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(An(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function In(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Mn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){In(a,r,o,i,c,"next",e)}function c(e){In(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dn=De()("collaborator:add"),Un=function(e){var t=e.group,n=e.book,r=e.doc,i=e.organization,c=e.dispatch,l=e.isEditing,u=e.onReverting,s=window.appData.isYuque,d=Ln(Object(o.useState)(0),2),f=d[0],p=d[1],m=Ln(Object(o.useState)(0),2),h=m[0],v=m[1],y=Ln(Object(o.useState)(!1),2),b=y[0],g=y[1],_=Ln(Object(o.useState)(!1),2),E=_[0],w=_[1],O=Ln(Object(un.c)(r,{dispatch:c,book:n,group:t,isEditing:l}),5),k=O[0],S=O[1],N=O[2],x=O[3],C=O[4],j=Ln(Object(un.e)(r,{dispatch:c,organization:i,optional_properties:"profile"}),4),T=j[0],I=j[1],M=j[2],L=j[3],R=Ln(Object(o.useState)([]),2),D=R[0],U=R[1],B=Object(o.useCallback)((function(){Z.a.collaborations.count({target_type:"Doc",target_id:r.id}).then((function(e){v((null==e?void 0:e.count)||0)}))}),[r.id]),z=Object(o.useCallback)((function(e){return Dn("list",r.id),c({type:"proxy.web/collaborations.find",payload:{data:{target_type:"Doc",target_id:r.id,offset:e,limit:200,optional_properties:"departments"},reducer:0===e?"doc/updateCollaborations":"doc/addCollaboration"}}).then((function(t){var n=t.filter((function(e){return e.target_type===X.TARGET_TYPE.Doc}));p(e+n.length),200===n.length?w(!0):w(!1)}))}),[r.id]);Object(o.useEffect)((function(){g(!0),z(0).then((function(){g(!1)})).catch((function(e){g(!1)})),c({type:"proxy.web/groups.users",payload:{data:{id:t.id},reducer:"group/updateMembers"}}),B(),window.appData.isAntDingtalkUser&&Z.a.users.recentContacts().then((function(e){U(e)}))}),[r.id,t.id]);var F=function(){z(0),B()},V=Object(o.useCallback)(function(){var e=Mn(Tn().mark((function e(t,n){var o;return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:g(!0),o=Number(n),c({type:"proxy.web/collaborations.batchUpdate",payload:{data:{target_id:r.id,target_type:"Doc",list:t.map((function(e){return{id:e.id,type:e.type}})),role:o},reducer:"doc/updateMultipleCollaborations"}}).then((function(){A.a.success(__("已将 {count} 人的权限修改为“{role}”",{count:t.length,role:Object(ze.getPermissionName)(o)}),5),o===X.ROLE.readonly&&A.a.warning(__("下方的“邀请协作链接”依然有较高权限，建议调整或重置"),8),g(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r.id]),G=function(e){c({type:"proxy.web/collaborations.destroy",payload:{data:{id:e.actionId,type:e.actionType},reducer:"doc/removeCollaboration"}}).then((function(){var t=!e.isMine()&&!e.isApplying();A.a.success(a.a.createElement("span",null,__("操作成功"),t&&a.a.createElement("a",{className:dn.a.revertLink,onClick:function(){u&&u(),A.a.destroy(),c({type:"doc/addCollaborator",payload:{data:Cn(Cn({},e.collaborator),{},{user:e.user})}}).then((function(){A.a.success(__("撤销成功!"))}))}},__("撤销"))),3),B()}))},Y=Object(o.useCallback)(function(){var e=Mn(Tn().mark((function e(t){return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:c({type:"proxy.web/collaborations.batchDestroy",payload:{data:{target_id:r.id,target_type:"Doc",list:t.map((function(e){return{id:e.id,type:e.collaborator.type}}))},reducer:"doc/removeMultipleCollaborations"}}).then((function(){A.a.success(a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,__("批量删除成功")),a.a.createElement("a",{className:dn.a.revertLink,onClick:Mn(Tn().mark((function e(){return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.a.destroy(),c({type:"doc/batchAddCollaborators",payload:{data:{target_id:r.id,target_type:"Doc",users:t.map((function(e){return{user_id:e.collaborator.owner_id,owner_type:e.collaborator.owner_type,role:e.collaborator.role,status:e.collaborator.ROLEstatus}}))}}}).then((function(){A.a.success(__("撤销成功"))}));case 2:case"end":return e.stop()}}),e)})))},__("撤销")))),A.a.warning(__("下方的“邀请协作链接”依然有较高权限，建议调整或重置"),8)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r.id]),$=function(){var e=Mn(Tn().mark((function e(t){var n,r,o;return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:n=t,r=__("确定移除 {name} 等 {num} 位协作者吗？",{name:n[0].name,num:n.length}),o=__("移除权限后，{name} 等 {num} 个人将无法访问该文档",{name:n[0].name,num:n.length}),1===n.length&&(r=__("确定移除 {name} 的权限吗？",{name:n[0].name}),o=__("移除权限后，{name} 将无法访问该文档",{name:n[0].name})),P.a.confirm({title:r,content:o,okText:__("移除"),cancelText:__("取消"),autoFocusButton:null,onOk:function(){var e=Mn(Tn().mark((function e(){return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Mn(Tn().mark((function e(t){var n,o;return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={target_type:"Doc",target_id:r.id,role:X.ROLE.edit,dingtalk_group_ids:[t.originId]},Dn("add_ding_talk_group:data",n),e.next=4,Z.a.collaborations.addDingTalkGroup(n);case 4:if(o=e.sent,Dn("add_ding_talk_group:result",n),0!==o.length){e.next=9;break}return A.a.error("添加失败"),e.abrupt("return");case 9:A.a.success(__("添加成功")),c({type:"doc/addOneCollaboration",payload:o[0]});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=s&&h>=Ge.a.getDocCollaboratorLimit(t);Object(sn.format)(t.members.map((function(e){return e.user}))),Object(sn.format)(r.collaborations.map((function(e){return e.owner})));var H=T.map((function(e){var o=t.members.find((function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.uid)===e.uid})),a=r.collaborations.find((function(t){var n;return(null===(n=t.owner)||void 0===n?void 0:n.uid)===e.uid}));return new Nn(e,a,o,r,n)})),K=r.collaborations.map((function(e){var o=t.members.find((function(t){var n,r;return(null===(n=t.user)||void 0===n?void 0:n.uid)===(null===(r=e.owner)||void 0===r?void 0:r.uid)}));return new xn(e,o,r,n)})),Q=D.map((function(e){return new Nn(e,null,null,r,n)}));return a.a.createElement(cn,{memberDocCollaboratorTip:s&&!!r,collaboratorCount:h,placeholder:__("输入用户名邀请协作"),dataSource:K,link:k,onRefreshLink:S,linkLoading:N,checked:x,onCheckChange:C,recentContacts:Q,searchData:H,onSearch:I,onSelect:function(e){Dn("handle_add",e),"AntDingTalkGroup"!==e.originType?(e.ableToAdd()&&function(e){var t={target_type:"Doc",target_id:r.id,role:X.ROLE.edit};e.userId?t.user_id=e.userId:t=Cn(Cn({},t),{},{login:e.login,workid:e.workId,name:e.name,provider_type:e.provider_type,provider_userid:e.provider_userid}),c({type:"proxy.web/collaborations.create",payload:{data:t,reducer:"doc/addOneCollaboration"}}).then((function(){A.a.success(__("添加成功")),setTimeout((function(){F()}),100)}))}(e),L(e)):q(e)},onBlur:L,disableSelect:function(e){return W||e&&!e.ableToAdd()},disableSearch:W,searchLoading:M,onAgree:function(e){c({type:"proxy.web/collaborations.approve",payload:{data:{id:e.actionId},reducer:"doc/updateOneCollaboration"}}).then((function(e){var t=__("已同意用户 {member} 加入",{member:e.owner.name});A.a.success(t),B()}))},onReject:G,onDelete:G,onBatchDelete:$,onRoleChange:function(e,t){c({type:"proxy.web/collaborations.update",payload:{data:{id:e.actionId,role:t},reducer:"doc/updateOneCollaboration"}}).then((function(){A.a.success(__("更新成功")),B()}))},onRoleBatchChange:V,onAdd:F,disableInvite:W,onLoadMore:function(){z(f)},shouldLoadMore:E,onLoading:b,showSearch:r.abilities.create_collaborator,showJoinLink:r.abilities.create_collaborator,renderSearchNotFound:i&&i.id?mn:hn})};Un.propTypes={dispatch:Be.a.func.isRequired,organization:Be.a.object.isRequired,group:Be.a.object.isRequired,book:Be.a.object.isRequired,doc:Be.a.object.isRequired,isEditing:Be.a.bool,onReverting:Be.a.func};var Bn=Object(Le.d)((function(e){return e}))(Object(ln.b)(Un)),zn=n(4021),Fn=n(4019);function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Vn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn=function(e){var t,n=e.share,r=e.shareViewType,a=e.isEditing,i=e.inviteContent,c=e.organization,l=e.group,s=e.book,d=e.onBack,f=e.onToggleCollaboratorShow,p={type:r.toLowerCase(),book:s,group:l,organization:c};r===u.b.DOC&&(t=Yn(Yn({},p),{},{doc:n}));var m,h=o.useMemo((function(){return Fn.a.create(t||p)}),[t,p]);return h&&h.enable&&(m={id:Fn.a.id,title:Fn.a.title,inviteSelectorType:r.toLowerCase(),getJoinUrl:h.getUrl,getToken:h.getToken,updateToken:h.updateToken,deleteTokens:h.deleteTokens,getCopyText:h.getCopyText,inviteModalContent:i,onBackShare:d,moreSettingOptions:h.getMoreSettingOptions(),organization:c,isEditing:a,inviteTarget:n,toggleCollaboratorList:function(e){null==f||f(e)}}),o.createElement(o.Fragment,null,o.createElement(zn.a,m))},Wn=n(3787);function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zn=function(e){var t=e.onlyCollaborator,n=e.share,r=e.inviteContent,a=e.organization,i=e.group,c=e.book,l=e.onBack,u=Hn(o.useState(!0),2),s=u[0],d=u[1];return o.createElement(o.Fragment,null,s&&o.createElement("div",{className:q()(Wn.a.shareDetailSettingPanel,Wn.a.collaborator)},t?o.createElement("div",{className:Wn.a.title},__("文档协作者")):o.createElement("div",{className:Wn.a.title,onClick:l},o.createElement(Me.default,{className:Wn.a.backIcon,width:20,height:20}),__("文档协作者"))),s&&o.createElement("div",{className:Wn.a.collaboratorContent},o.createElement(Bn,null)),o.createElement(qn,{share:n,organization:a,group:i,book:c,shareViewType:"DOC",isEditing:!0,inviteContent:r,onToggleCollaboratorShow:function(e){return d(e)}}))};function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qn.apply(null,arguments)}var Xn=function(e){return o.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return o.createElement(r.a,null,__("分享"))}},o.createElement(x,Qn({panel:Ie,CollaboratorChannel:Zn,InviteSelectorChannel:qn},e)))}},4445:function(e,t,n){"use strict";n(277);var r=n(147),o=(n(40),n(9)),a=(n(53),n(12)),i=(n(48),n(11)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(178),f=n.n(d),p=n(47),m=(n(188),n(32)),h=n(424),v=n.n(h),y=n(4122),b=n.n(y),g=n(4016),_=n(308),E=n(591);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=w(Object(c.useState)([]),2),n=t[0],r=t[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){r(e)}))}),[e]),{mailHistory:n}},S="RecipientSelector-module_recipient_Ds5UW",N="RecipientSelector-module_mention_5r6oN",x="RecipientSelector-module_userForCheck_a4ZZP",A="RecipientSelector-module_mailHistory_-ft0g",P="RecipientSelector-module_title_-yKJG",C="RecipientSelector-module_users_ZwnLM",j="RecipientSelector-module_info_eM40g",T="RecipientSelector-module_avatar_lGHzI",I="RecipientSelector-module_name_HeaN7",M="RecipientSelector-module_dep_B2T89";function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function U(e){var t=L(Object(c.useState)(!1),2),n=t[0],r=t[1],o=L(Object(c.useState)(e.defaultValue||[]),2),a=o[0],u=o[1],s=k(window.appData.me).mailHistory,d=L(Object(c.useState)([]),2),f=d[0],h=d[1],y=Object(c.useRef)(),_=null,w=__("最多只能选择100个邮箱地址，建议请使用邮件组"),O=__("收件人有重复，已自动去重"),R=function(t){var n=t.length,o=(t=b()(t,(function(e,t){return e.work_id&&t.work_id?e.work_id===t.work_id:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(w),t.splice(100)):o!==n&&i.a.warning(O),u(t),e.onChange(t),r(!1),h([]),setTimeout((function(){y&&y.current&&y.current.focus()}),100)};Object(c.useEffect)((function(){return function(){_&&(clearTimeout(_),_=null)}}));var U=v()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(g.validator.isEmail(e))t.push({name:e,email:e});else{var n=e.match(/([^<]+)<([^>]+)>/);n&&g.validator.isEmail(n[2])&&t.push({name:n[1],email:n[2]})}})),t.length>0){var n=a.concat(t);return R(n),y.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),n=t[1],r=D.filter((function(e){return e.startsWith(n)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return h(r),!0}return!1}(e)||(r(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){h(e),y.current.focus()})))}),300),B=a.map((function(e){return e.name}));return l.a.createElement("div",{className:S},l.a.createElement("span",{className:N,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);R(t)}}},__("添加文档中 @ 的人")),l.a.createElement(m.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));R(t)},onFocus:function(){0===a.length&&r(!0)},onSearch:U,onBlur:function(){_&&clearTimeout(_),_=setTimeout((function(){r(!1),h([])}),500)},allowClear:!0,value:B,notFoundContent:null,ref:y}),f.length>0&&l.a.createElement("div",{className:x},f.map((function(e){return l.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.login===e.login})).length){var t=a.concat(e);R(t)}else i.a.warning(O);else i.a.warning(w)}(e)}},e.avatar_url&&l.a.createElement(E.a,{className:T,src:e.avatar_url,size:32}),l.a.createElement("span",{className:I},e.name),e.dep&&l.a.createElement("span",{className:M},e.dep))}))),n&&s&&s.length>0&&l.a.createElement("div",{className:A,"data-testid":"mail-history"},l.a.createElement("div",{className:P},__("历史记录")),l.a.createElement("ul",null,s.map((function(e){return l.a.createElement("li",{onClick:function(){!function(e){R(e.mail_list)}(e)},key:e.id},l.a.createElement("p",{className:C},e.mail_list.map((function(e){return e.name})).join(",")),l.a.createElement("p",null,l.a.createElement("span",{className:j},__("标题："),e.title)))})))))}U.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var B=Object(_.b)(U,!1),z="DocSendMail-module_sendMail_QBA+O",F="DocSendMail-module_recipient_zqM9E",V="DocSendMail-module_title_Af2FA",G="DocSendMail-module_submitButton_HEsW-",Y="DocSendMail-module_mailResult_AhaV4";function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function W(e,t,n){return t=K(t),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,n||[],K(e).constructor):t.apply(e,n))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function Q(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(n=W(this,t,[e]),"ready",(function(){0!==n.state.receiver.length?"sending"!==n.state.mailStatus&&(n.setState({mailStatus:"sending"},(function(){n.props.onMailSending(),n.startClock(5)})),n.timer=setTimeout(n.sendMail,5e3)):i.a.error(__("请选择收件人"))})),Q(n,"startClock",(function(e){n.setState({seconds:e}),0!==e&&"sending"===n.state.mailStatus&&(n.clocker=setTimeout((function(){n.startClock(e-1)}),1e3))})),Q(n,"sendMail",(function(){var e=n.state,t=e.receiver,r=e.title,o={id:n.props.doc.id,title:r||n.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=n.normalizeMail(t)}catch(e){return void i.a.error(e.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){n.setState({mailStatus:"success",receiver:[]}),n.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?n.setState({mailStatus:"block",mailBlockMessage:e.message}):n.setState({mailStatus:"failed"})}))})),Q(n,"retry",(function(){n.setState({mailStatus:"normal",mailBlockMessage:""})})),Q(n,"normalizeMail",(function(e){return e.map((function(e){return f()(e,["email","login","user_id","name"])}))})),Q(n,"onChangeReceiver",(function(e){n.setState({receiver:e})})),Q(n,"onChangeTitle",(function(e){n.setState({title:e.target.value})})),Q(n,"renderMailSelector",(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:V},l.a.createElement("h5",null,__("标题")),l.a.createElement(a.a,{onChange:n.onChangeTitle,defaultValue:n.props.doc.title})),l.a.createElement("div",{className:F},l.a.createElement("h5",null,__("收件人")),l.a.createElement(B,{onChange:n.onChangeReceiver,defaultValue:n.state.receiver})),l.a.createElement("div",{className:G},l.a.createElement(o.a,{onClick:n.ready,type:"primary"},__("发送"))))})),Q(n,"cancel",(function(){n.timer&&(clearTimeout(n.timer),n.timer=null),n.clocker&&(clearTimeout(n.clocker),n.clocker=null),n.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),n.props.onMailSended()})),Q(n,"renderSending",(function(){return l.a.createElement("div",{className:Y},l.a.createElement(r.a,{justify:"block"}),l.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:l.a.createElement("a",{href:"#",onClick:n.cancel},__("撤销")),seconds:n.state.seconds||0})))})),Q(n,"renderSuccess",(function(){return l.a.createElement("div",{className:Y},l.a.createElement("span",{className:"larkicon larkicon-check-o"}),l.a.createElement("p",null,__("发送成功")))})),Q(n,"renderFailed",(function(){return l.a.createElement("div",{className:Y},l.a.createElement("span",{className:"larkicon larkicon-error"}),l.a.createElement("p",null,__("发送失败, 请{retry}",{retry:l.a.createElement("a",{href:"#",onClick:n.retry},__("重新发送"))})))})),Q(n,"renderBlock",(function(){return l.a.createElement("div",{className:Y},l.a.createElement("span",{className:"larkicon larkicon-error"}),l.a.createElement("p",null,n.state.mailBlockMessage))})),Q(n,"renderCanceled",(function(){return l.a.createElement("div",{className:Y},l.a.createElement("p",null,__("已取消发送")))})),n.state={receiver:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return l.a.createElement("div",{className:z,"data-testid":"send-mail-modal"},l.a.createElement("h4",null,__("发送到邮箱")),l.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&q(n.prototype,c),u&&q(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,u}(c.PureComponent);J.defaultProps={},J.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=J},4455:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(493);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=a(a(a(a({},r.EDITOR_NAME.LAKEX,{bgColor:"ca19007.da16020",label:"ca19007.da16062",headingCollapsed:"ca19007.da16050",tableSpacing:"ca19007.da16043",tableBorderVisible:"ca19007.da16042",tableVerticalAlign:"ca19007.da16033",tableEquallyColumn:"ca19007.da16045",tableInsertAfterColumn:"ca19007.da16037",tableInsertAfterRow:"ca19007.da16035",tableToggleWidthMode:"ca19007.da16044",tableColumnWidth:"ca19007.da16032",tableColumnMoveTo:"ca19007.da16041",tableInsertBeforeColumn:"ca19007.da16036",tableInsertBeforeRow:"ca19007.da16034",tableDeleteColumn:"ca19007.da16038",tableDeleteRow:"ca19007.da16039",tableRowHeight:"ca19007.da16031",tableRowMoveTo:"ca19007.da16040",emoji:"ca19007.da16071",unicodeEmoji:"ca19007.da16071",table:"ca19007.da16027",insertFile:"ca19007.da9386",insertFiles:"ca19007.da9386",insertCard:"ca19007.da13586",insertLink:"ca19007.da16054",insertVideo:"ca19007.da15970",insertBookmark:"ca19007.da16079",image:"ca19007.da15966",insertImage:"ca19007.da15966",insertYuqueInlineDoc:"ca19007.da16075",insertDocument:"ca19007.da16081",tableUnmergeCell:"ca19007.da16029",undo:"ca19007.da9540",tableCellBgColor:"ca19007.da16030",alignment:"ca19007.da16049",translate:"ca19007.da16059",outdent:"ca19007.da16052",columnsAddColumn:"ca19007.da16086",columns:"ca19007.da16084",columnsToggleWidthMode:"ca19007.da16089",columnsWidths:"ca19007.da16085",copy:"ca19007.da16046",alert:"ca19007.da16064",paintFormat:"ca19007.da16057",tableMergeCell:"ca19007.da16028",hr:"ca19007.da16063",bold:"ca19007.da15971",cut:"ca19007.da16047",cardToLink:"ca19007.da16055",textContainerTrans:"ca19007.da9385",link:"ca19007.da16053",linkToYuqueInlineDoc:"ca19007.da16074",linkToYuqueDoc:"ca19007.da16073",linkToThirdparty:"ca19007.da16061",linkToBookmark:"ca19007.da16077",linkToBookmarkInline:"ca19007.da16078",defaultFontsize:"ca19007.da16023",cardBatchApply:"ca19007.da15965",clearBgColor:"ca19007.da16021",clearFormat:"ca19007.da16058",clearColor:"ca19007.da16019",taskList:"ca19007.da16026",containerToggle:"ca19007.da9384",deleteColumns:"ca19007.da16088",columnDelete:"ca19007.da16087",columnDeleteByIndex:"ca19007.da16087",deleteCard:"ca19007.da13690",deleteBrick:"ca19007.da9381",sup:"ca19007.da16067",paragraphSpacing:"ca19007.da13585",typography:"ca19007.da13582",layout:"ca19007.da9542",search:"ca19007.da16069",indent:"ca19007.da16051",mention:"ca19007.da16076",replaceText:"ca19007.da16070",dropFile:"ca19007.da9387",unorderedList:"ca19007.da16025",sub:"ca19007.da16066",addBelowBrick:"ca19007.da9383",underline:"ca19007.da16016",insertSlash:"ca19007.da16082",italic:"ca19007.da16015",lineHeight:"ca19007.da16056",code:"ca19007.da16068",moveCard:"ca19007.da13691",moveBrick:"ca19007.da9382",moveImage:"ca19007.da16060",quote:"ca19007.da16065",orderedList:"ca19007.da16024",paste:"ca19007.da16048",markdownPasteParse:"ca19007.da16080",collapse:"ca19007.da16083",strikethrough:"ca19007.da16017",redo:"ca19007.da9541",brickToCodeblock:"ca19007.da16072",fontsize:"ca19007.da16022",wordCount:"ca19007.da9539",color:"ca19007.da16018"}),r.EDITOR_NAME.SHEET,{setType:"ca33271.da12555",setDecimal:"ca33271.da12842",setStyle:"ca33271.da12843",insertCol:"ca33271.da12844",insertRow:"ca33271.da16148",mergeCell:"ca33271.da16149",splitCell:"ca33271.da16150",moveCol:"ca33271.da16151",moveRow:"ca33271.da16152",removeCol:"ca33271.da16153",removeRow:"ca33271.da16154",hideCol:"ca33271.da16155",hideRow:"ca33271.da16156",cancelHide:"ca33271.da16157",resizeCol:"ca33271.da16158",resizeRow:"ca33271.da16159",copy:"ca33271.da16160",paste:"ca33271.da16161",cut:"ca33271.da16162",clear:"ca33271.da16163",clearFormat:"ca33271.da16164",filter:"ca33271.da16165",sort:"ca33271.da16166",insert:"ca33271.da16167",replaceOne:"ca33271.da16168",replaceAll:"ca33271.da16169",autofill:"ca33271.da16170",insertRowAtBottom:"ca33271.da16171",frozen:"ca33271.da16172",insertSheet:"ca33271.da16173",removeSheet:"ca33271.da16174",cloneSheet:"ca33271.da16175",moveSheet:"ca33271.da16176",renameSheet:"ca33271.da16177",paint:"ca33271.da16178",setBorder:"ca33271.da16179",protect:"ca33271.da16180",resizeVessel:"ca33271.da16181",moveVessel:"ca33271.da16182",removeVessel:"ca33271.da16183",addChart:"ca33271.da16184",copyChart:"ca33271.da16185",updateChartConfig:"ca33271.da16186",activeSheet:"ca33271.da16187",adjustRowHeight:"ca33271.da16188",adjustColWidth:"ca33271.da16189",hideSheet:"ca33271.da16190",showSheet:"ca33271.da16191",setConditionalFormatting:"ca33271.da16192",sortConditionalFormatting:"ca33271.da16193",removeConditionalFormatting:"ca33271.da16194",clearConditionalFormatting:"ca33271.da16195",replaceSelections:"ca33271.da16196",exportSheet:"ca33271.da16197",addNote:"ca33271.da16198",removeNotes:"ca33271.da16199",highlightArea:"ca33271.da16200",tabColor:"ca33271.da16201",zoomSheet:"ca33271.da16202",setValueRichText:"ca56094.da46034",detail:{conditionalFormatting:{highlightCell:"ca56094.da48475",bar:"ca56094.da48476"},chartTransposeRowCol:"ca56094.da51565"}}),r.EDITOR_NAME.BOARD,{ToBack:"ca33306.da16235",ToFront:"ca33306.da16236",Forward:"ca33306.da16237",Backward:"ca33306.da16238",Collapse:"ca33306.da16239",Expand:"ca33306.da16240",ZoomIn:"ca33306.da16241",ZoomOut:"ca33306.da16242",ZoomTo:"ca33306.da16243",ActualSize:"ca33306.da16244",FitViewport:"ca33306.da16245",Copy:"ca33306.da16246",Paste:"ca33306.da16247",CreateLink:"ca33306.da16248",BeginInsertLine:"ca33306.da16249",ButtonDragCanvas:"ca33306.da16250",SetTheme:"ca33306.da16251",SetCanvasBackgroundColor:"ca33306.da16252",Cut:"ca33306.da16253",MakeGroup:"ca33306.da16254",Ungroup:"ca33306.da16255",BeginInsertGeometry:"ca33306.da16256",BeginInsertText:"ca33306.da16257",BeginInsertImage:"ca33306.da16258",AlignBottom:"ca33306.da16259",AlignHCenter:"ca33306.da16260",AlignLeft:"ca33306.da16261",AlignRight:"ca33306.da16262",AlignTop:"ca33306.da16263",AlignVCenter:"ca33306.da16264",DistributeHorizontally:"ca33306.da16265",DistributeVertically:"ca33306.da16266",InsertText:"ca33306.da16257",InsertGeometry:"ca33306.da16256",InsertImage:"ca33306.da16258",AttachLink:"ca33306.da16248",LineSwapEndpoint:"ca33306.da16267",MindmapAppendChild:"ca33306.da16268",MindmapAppendSibling:"ca33306.da16269",MindmapMoveNode:"ca33306.da16270",MindmapAttachImage:"ca33306.da16271",MindmapBeginInsertStem:"ca33306.da16272",MindmapCreateLink:"ca33306.da16273",MindmapPrependSibling:"ca33306.da16269",MindmapInsertStem:"ca33306.da16272",MindmapInsertImage:"ca33306.da16271",MindmapAppendParent:"ca33306.da16274",MindmapRemoveSingleNode:"ca33306.da16275",MindmapAttachNote:"ca33306.da16276",MindmapAppendAbstract:"ca33306.da16277",ChangeLaneNumber:"ca33306.da16278",AddSwimlane:"ca33306.da16279",UpdateSwimlane:"ca33306.da16280"}),r.EDITOR_NAME.TABLE,{createFilter:"a385.b77856.c352022.d418880",removeFilter:"a385.b77856.c352022.d418881",updateFilter:"a385.b77856.c352022.d418882",addField:"a385.b77856.c352023.d418883",copyField:"a385.b77856.c352023.d420021",changeFieldType:"a385.b77856.c352023.d420024",updateFieldName:"a385.b77856.c352023.d420027",updateField:"a385.b77856.c352023.d420028",removeField:"a385.b77856.c352023.d420029",updateCoverDisplay:"a385.b77856.c352023.d420030",updateShowFieldName:"a385.b77856.c352023.d420031",updateCoverSource:"a385.b77856.c352023.d420032",updateFieldHidden:"a385.b77856.c352023.d420033",createFieldOption:"a385.b77856.c352023.d420034",updateFieldOption:"a385.b77856.c352023.d420035",removeFieldOption:"a385.b77856.c352023.d420036",changeFieldOrder:"a385.b77856.c352023.d420037",changeFieldOptionOrder:"a385.b77856.c352023.d420038",addView:"a385.b77856.c352067.d420039",switchView:"a385.b77856.c352067.d420040",removeView:"a385.b77856.c352067.d420041",copyView:"a385.b77856.c352067.d420042",changeViewOrder:"a385.b77856.c352067.d420043",updateViewName:"a385.b77856.c352067.d420044",createSort:"a385.b77856.c352069.d420045",removeSort:"a385.b77856.c352069.d420046",updateSort:"a385.b77856.c352069.d420047",changeColWidth:"a385.b77856.c352070.d420048",pasteUpdateRecords:"a385.b77856.c352070.d420049",addEmptyRecord:"a385.b77856.c352071.d420050",copyRecord:"a385.b77856.c352071.d420051",removeRecords:"a385.b77856.c352071.d420052",changeRecordOrder:"a385.b77856.c352071.d420053",updateContent:"a385.b77856.c352071.d420099",removeCells:"a385.b77856.c352072.d420054",setCell:"a385.b77856.c352072.d420055",updateValueOrder:"a385.b77856.c352072.d420056",autofillCells:"a385.b77856.c352072.d420057",updateStat:"a385.b77856.c352073.d420058",removeStat:"a385.b77856.c352073.d420059",createGridGroup:"a385.b77856.c352074.d420060",removeGridGroup:"a385.b77856.c352074.d420061",updateGridGroup:"a385.b77856.c352074.d420062",updateGridGroupFold:"a385.b77856.c352074.d420063",updateGridRecordHeight:"a385.b77856.c352075.d420070",updateKanbanGroup:"a385.b77856.c352076.d420071",upsertStartOrEndDate:"a385.b77856.c352078.d420072",setActiveDate:"a385.b77856.c352078.d420075",createSchedule:"a385.b77856.c352078.d420076",updateSchedule:"a385.b77856.c352078.d420078",showLunar:"a385.b77856.c352078.d420079",updateScheduleTitle:"a385.b77856.c352078.d420080",updateScheduleColorType:"a385.b77856.c352078.d420082",updateScheduleColor:"a385.b77856.c352078.d420083",removeViewField:"a385.b77856.c352081.d420084",insertViewField:"a385.b77856.c352081.d420085",updateViewDesc:"a385.b77856.c352081.d420087",updateViewFieldDisplayType:"a385.b77856.c352081.d420088",updateViewFieldRequired:"a385.b77856.c352081.d420089",updateViewFieldName:"a385.b77856.c352081.d420090",cloneViewField:"a385.b77856.c352081.d420091",upsertViewShare:"a385.b77856.c352081.d420092",updateAiWritingOpen:"a385.b77856.c352082.d420094",updateAiWritingType:"a385.b77856.c352082.d420095",updateAiWritingPrompt:"a385.b77856.c352082.d420096",updateAiWritingAuto:"a385.b77856.c352082.d420097"})},4456:function(e,t,n){"use strict";var r=n(88),o=n.n(r),a=n(60),i=n.n(a),c=n(258),l=n.n(c),u=n(14),s=n.n(u),d=n(493),f=n(1342),p=n(4344);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",v="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==m(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function v(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,c,"next",e)}function c(e){v(a,r,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function E(e,t,n){return t=O(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var x=i()("common:biz:doc.editor.base"),A="empty",P="actived",C="out",j=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=n||{},(r=E(this,t)).doc=e,r.docDomain=n.docDomain||d.DOC_DOMAIN.DOC,r.baseVersion=e.draft_version,r.storage={},r.cacheKeys=r._getCacheKeys(),r.cacheStatus=A,r.MaxClearCacheCount=10,r.clearCacheCount=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,r=[{key:"hasNewVersion",value:function(e){return x("check new version",{base:this.baseVersion,lock:e}),this.baseVersion<e.draft_version}},{key:"isContentChanged",value:function(e){e=e.trim();var t="<cursor />";return p.a.adaptBodyToContent(this.doc).replace(t,"")!==e.replace(t,"")}},{key:"resetDoc",value:function(e){x("onSaved, version:",this.baseVersion),this.doc=g(g({},this.doc),e),this.baseVersion=e.draft_version,this.cacheKeys=this._getCacheKeys()}},{key:"getInitialDocument",value:function(){return this.getLatestDocument()}},{key:"getLatestDocument",value:function(){var e=p.a.adaptDocToDocument(this.doc),t=this._getCachedDocument();if(!t)return x("not found cached content, user server version"),this.transmitCacheStatus(A),e;var n=!this._needUseCache(t,e);return this.transmitCacheStatus(n?C:P),n?e:t}},{key:"transmitCacheStatus",value:function(e){this.cacheStatus!==e&&(this.cacheStatus=e)}},{key:"isCacheActived",get:function(){return this.cacheStatus===P}},{key:"extractSummaryRaw",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.summary,r=t.maxHtmlTextLength,a=e.match(/^\s*<([^>]+)>/),i=["LI","CARD"],c="",l=!n||n===e;a&&(a[1].startsWith("!")||a[1].startsWith("meta"));){var u=a[0].length;c+=a[0],a=(e=e.substr(u)).match(/^\s*<([^>]+)>/)}var s=(new DOMParser).parseFromString(e,"text/html"),f=s.body.childNodes.length>d.BIG_DOCUMENT_BLOCK_COUNT;this.isBigDocument=f;var p=!!s.body.querySelector('card[name="image"]'),m=!!s.body.querySelector('card[name="checkbox"]'),h=!!s.body.querySelector('card[name="bookmarklink"]'),v=!!s.body.querySelector('card[name="file"],card[name="localdoc"]'),y=l?s:(new DOMParser).parseFromString(n,"text/html"),b=y.body,g=d.SUMMARY_PARAGRAPH_MAX_COUNT,_=c;r&&(r-=c.length);for(var E=0,w=!1,O="<p>---".concat(__("首段内容太长，无法截取摘要"),"---</p>"),k=b.childNodes[g];k;){var S=k.nextSibling;k.remove(),k=S}b.querySelectorAll("*").forEach((function(e){if("CARD"===e.nodeName){var t=e.getAttribute("name");if("bookmarklink"===t){var n=e.getAttribute("value");if(n)try{var r=JSON.parse(decodeURIComponent(n.slice(5))),a=o()(r,"detail.icon")||"",c=o()(r,"detail.image")||"";a.startsWith("data:")&&(r.detail.icon=""),c.startsWith("data:")&&(r.detail.image=""),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(r))))}catch(t){e.remove()}}if("image"===t){var l=e.getAttribute("value");if(l)try{var u=JSON.parse(decodeURIComponent(l.slice(5)));delete u.ocrLocations,delete u.search,e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(u))))}catch(t){e.remove()}}if("board"===t){var s=e.getAttribute("value");if(s)try{var d=JSON.parse(decodeURIComponent(s.slice(5)));if(d.src){var f={src:d.src};e.setAttribute("name","image"),e.setAttribute("type","inline"),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(f))));var m=y.createElement("p");e.parentNode.replaceChild(m,e),m.appendChild(e),p=!0}}catch(t){e.remove()}}}i.includes(e.nodeName)||(e.removeAttribute("id"),e.removeAttribute("data-lake-id"))}));for(var N=0;N<b.childNodes.length;N++){var x=b.childNodes[N];if(_.length+x.outerHTML.length>r){if(0===N){var A=x;for("TABLE"===x.nodeName&&(A=x.querySelector("tbody"));A.lastChild&&_.length+x.outerHTML.length>r;)if(A.lastChild!==A.firstChild)A.lastChild.remove();else if(A.firstChild.nodeType===Node.ELEMENT_NODE)A=A.firstChild;else{var P=_.length+x.outerHTML.length-r;A.firstChild.data="".concat(A.firstChild.data.substr(0,Math.max(0,A.firstChild.data.length-P-3)),"...")}A.lastChild?(E++,_+=x.outerHTML):_+=O}w=!0;break}E++,_+=x.outerHTML}return{extractCount:E,html:_,isFull:!w&&E===s.body.childNodes.length&&l,isBigDocument:f,hasImage:p,hasTodo:m,hasBookmark:h,hasAttachment:v}}},{key:"extractSummary",value:function(){var e=this.getLatestDocument(),t=e.value;if(e.format!==f.FORMAT.LAKE)return t;var n=this.extractSummaryRaw(t);return n&&n.html}},{key:"_needUseCache",value:function(e,t){return e.draft_version===t.draft_version||e.base_timestamp===t.base_timestamp}},{key:"saveToCache",value:function(e){if(!e.format)return x("save to cache, format not supplied: ignore"),!1;var t=this.doc.content_updated_at;e.draft_version||(e.draft_version=this.doc.draft_version),x("save to cache:",{doc_draft_version:this.doc.draft_version,change_draft_version:e.draft_version});var n=p.a.adaptChangeToCacheData(e,t),r=this.storage.set(this.cacheKeys.changes,n);return r?this.transmitCacheStatus(P):this.clearCacheCount<this.MaxClearCacheCount&&(this._clearOlderCacheBySize(n.length),this.clearCacheCount++),r}},{key:"saveOutdatedCacheToServer",value:(c=y(h().mark((function e(n){var r,o,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(r=p.a.adapterDocumentContent(n),t.CACHE_CONTENT_SAVED[this.doc.id]!==r){e.next=5;break}return e.abrupt("return");case 5:return t.CACHE_CONTENT_SAVED[this.doc.id]=r,o={doc_id:this.doc.id,format:n.format,content:r,base_timestamp:n.base_timestamp,draft_version:n.draft_version,origin:d.DOC_VERSION.ORIGIN.cache,doc_type:this.docDomain},e.prev=7,e.next=10,this.doSaveOutdatedDocVersion(o);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(7),e.abrupt("return");case 15:a=!this.isContentChanged(r),this.cacheStatus===C&&(this.clearCachedContent(),a||this.emit("outDatedCacheSavedToServer"));case 17:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return c.apply(this,arguments)})},{key:"doSaveOutdatedDocVersion",value:(i=y(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"clearCachedContent",value:function(){x("clear cache"),this.storage.remove(this.cacheKeys.changes),this.transmitCacheStatus(A)}},{key:"_getCacheKeys",value:function(){var e="autosave/docs/".concat(this.doc.id),t={changes:"".concat(e,"/changes")};return this.doc.format===f.FORMAT.LAKE&&(t.changes="".concat(e,"/lake")),t}},{key:"_clearOlderCacheBySize",value:function(e){var t=this;if(!(e>5242880)){for(var n=this.storage.keys().filter((function(e){return e.startsWith("autosave/docs/")})).map((function(e){try{var n=t.storage.get(e);return{key:e,value:JSON.parse(n),length:n.length}}catch(e){return null}})).filter((function(e){return e&&e.value&&e.value.base_timestamp})).sort((function(e,t){return s()(e.value.base_timestamp).isBefore(t.value.base_timestamp)?-1:1})),r=0,o=[],a=0;n[r]&&a<e;)if(n[r].value.offline)r++;else{if(s()(n[r].value.base_timestamp).isAfter(s()().add(-30,"day")))break;a+=n[r].length,o.push(n[r].key),r++}a>e&&o.forEach((function(e){t.storage.remove(e)}))}}},{key:"_getCachedDocument",value:function(){var e=this.cacheKeys.changes,t=this.storage.get(e);try{var n=p.a.adaptCacheDataToDocument(t,this.doc.format);if(n&&n.value)return n}catch(e){this.clearCachedContent(),x("invalid cached data: ")}return null}},{key:"getDocument",value:function(){return p.a.adaptDocToDocument(this.doc)}},{key:"saveCacheToServer",value:function(){try{var e=this._getCachedDocument();if(!e)return;this.saveOutdatedCacheToServer(e)}catch(e){}}}],a=[{key:"isDefaultTitle",value:function(e){return!e||e.startsWith("无标题")||e.startsWith("Untitled")}}],r&&_(n.prototype,r),a&&_(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a,i,c}(l.a);S(j,"SAVE_TYPE",d.SAVE_TYPE),S(j,"MODE",{NORMAL:"normal",OT:"ot"}),S(j,"CACHE_CONTENT_SAVED",{}),t.a=j},4457:function(e,t,n){e.exports=n(4016)},4464:function(e,t,n){"use strict";n(48);var r=n(11),o=n(258),a=n.n(o),i=n(60),c=n.n(i),l=n(493),u=n(85),s=n(244),d=n(391),f=n.n(d);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var v=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timing={Init:(new Date).getTime(),EditorLoaded:-1,DocLoadStart:-1,DocLoadEnd:-1,DocRendered:-1,LockReady:-1,CollabReady:-1},this.context=t,this.scene=t.scene,this.MaxRenderTime=5e3,this.maxTimeLimit=6e4,this.autoReportTime=12e4,this._records=[],this.maxRecordCount=1e3,this.minRecordCount=150,this.heartbeatInterval=2e3,this.minBlockTime=300,this.perfReported=!1,this.smoothReported=!1,this.limitSlowActionTime=1e3,this.lastReportAction={},this.reportInterval=3e4,this.startAutoReport()},t=[{key:"getDocFormat",value:function(){return this.context.docFormat}},{key:"getEditorMode",value:function(){return this.context.defaultMode}},{key:"getEditorScene",value:function(){return this.context.scene}},{key:"marks",value:function(e){this.timing[e]=(new Date).getTime()}},{key:"has",value:function(e){return-1!==this.timing[e]}},{key:"startAutoReport",value:function(){var e=this;this.reportTimer=setTimeout((function(){e.reportPerf()}),this.autoReportTime)}},{key:"stopAutoReport",value:function(){this.reportTimer&&(clearTimeout(this.reportTimer),this.reportTimer=null)}},{key:"destroy",value:function(){try{this.reportPerf(),this.reportSmooth(),this.stopAutoReport(),this.clearHeartbeat()}catch(e){}}},{key:"stats",value:function(){var e={m1:this.measure("Init","EditorLoaded"),m2:this.measure("DocLoadStart","DocLoadEnd"),m3:this.measure("Init","DocRendered")};return this.has("CollabReady")?(e.m4=this.measure("Init","CollabReady"),e.d1="collab"):(e.m4=this.measure("Init","DocRendered"),e.d1="lock"),e.d2=this.getEditorScene(),e}},{key:"editReady",value:function(){return this.has("EditorLoaded")&&this.has("DocRendered")}},{key:"reportPerf",value:function(){if(!this.perfReported&&(this.perfReported=!0,this.editReady())){var e=this.stats(),t=this.getDocFormat();this.context.isBigLakeDocument&&u.a.logBigLakeEditorPerf(e),u.a.logEditorPerf(t,e),e.m3>this.MaxRenderTime&&u.a.logEditWorkflow({code:"RENDER_SLOW",message:"渲染耗时 <".concat(Math.ceil(e.m3/1e4),"0 秒"),editMode:this.getEditorMode(),scene:this.getEditorScene()})}}},{key:"reset",value:function(){for(var e in this.timing)this.timing[e]=-1}},{key:"measure",value:function(e,t){return this.timing[e]&&this.timing[t]?-1===this.timing[e]||-1===this.timing[t]?0:Math.max(0,Math.min(this.maxTimeLimit,this.timing[t]-this.timing[e])):0}},{key:"startHeartbeat",value:function(){var e=this;this.smoothReported||(this.clearHeartbeat(),this.pingTime=+new Date,this.heartbeat=setTimeout((function(){e.pong()}),this.heartbeatInterval))}},{key:"clearHeartbeat",value:function(){this.heartbeat&&clearTimeout(this.heartbeat)}},{key:"pong",value:function(){if(!this.inActive){var e=new Date-this.pingTime-this.heartbeatInterval;e<this.minBlockTime?this._records.push(0):this._records.push(Math.ceil(e/1e3))}this._records.length>this.maxRecordCount?this.reportSmooth():this.startHeartbeat()}},{key:"pause",value:function(){this.inActive=!0}},{key:"resume",value:function(){this.inActive=!1}},{key:"reportSmooth",value:function(){if(!this.smoothReported){var e=this._records.length;if(!(e<this.minRecordCount)){var t=0;this._records.forEach((function(e){e&&t++}));var n=Math.round(100*(e-t)/e),r=this.getDocFormat();u.a.logEditorSmooth(r,{d1:this.getEditorMode(),d2:this.getEditorScene(),m1:n,m2:2*e,c2:this._records.join("_"),msg:"顺滑等级: ".concat(Math.floor(n/10))}),this._records=[],this.smoothReported=!0}}}},{key:"logSlowAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(n<this.limitSlowActionTime)){var r=+new Date;if(!(this.lastReportAction[t]&&this.lastReportAction[t]+this.reportInterval>r)){this.lastReportAction[t]=r;var o={action:t,useTime:n,scene:this.getEditorScene()};switch(e){case"sheet":u.a.logSheetSlowAction(o);break;case"lakex":u.a.logLakexSlowAction(o);break;case"board":u.a.logBoardSlowAction(o);break;case"table":u.a.logTableSlowAction(o)}}}}}],t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),y=v,b=n(14),g=n.n(b),_=n(190);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function O(e,t,n){return t=S(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function x(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}var P=c()("editor:doc:lockManager"),C=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(r=O(this,t),"lazyLock",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r.clearLockTimer(),e?r.lockTimer=setTimeout((function(){r.lock()}),1e3*e):r.lock()})),x(r,"unLock",(function(){var e,t,n;if(P("unLock"),r.clearLockTimer(),!r.locked)return Promise.resolve();var o=(null===(e=window.appData)||void 0===e?void 0:e.isYuqueMobileApp)&&(null===(t=window.AlipayJSBridge)||void 0===t||null===(n=t.startupParams)||void 0===n?void 0:n.appId);if("function"!=typeof navigator.sendBeacon||r.workflow.isDesktopApp||window.appData.isAlipayWebApp||o||r.workflow.note)return r.locked=!1,r.workflow.doUnlock({id:r.doc.id,uuid:r.uuid});var a=new URLSearchParams;return a.set("ctoken",Object(_.a)(window)),a.set("uuid",r.uuid),navigator.sendBeacon("/api/".concat(r.workflow.docDomain.toLowerCase(),"s/").concat(r.doc.id,"/unlock?").concat(a.toString())),r.locked=!1,Promise.resolve()})),x(r,"checkLakeEditConflict",(function(e){P("[check conflict]lock: %o",e);var t,n=r.me,o=e.locker,a=e.collab_members,i=void 0===a?[]:a;return i.length>0&&(P("[check conflict]doc is editing in ot mode"),t=1===i.length&&i[0].id===n.id?l.ERROR_CODE.LOCKED_BY_SELF_COLLAB:l.ERROR_CODE.LOCKED_BY_COLLAB),!t&&o&&o.id!==n.id&&(P("[check conflict]doc is locked by other one"),t=l.ERROR_CODE.LOCKED_BY_OTHER),!t&&e.draft_version>r.doc.draft_version&&(P("[check conflict]doc content has new version"),t=l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),!t&&e.content_updated_at&&g()(e.content_updated_at).isAfter(r.doc.content_updated_at)&&(P("[check conflict]doc content has new version"),t=l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),P("[check conflict]result",{code:t,lock:e}),t})),r.doc=e,r.workflow=n,r.me=n.me,r.lockTimer=null,r.LOCK_INTERVAL=59,r.MAX_RETRY_COUNT=10,r.locking=!1,r.locked=!1,r.retryCount=0,r.uuid=f()(10),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,r=[{key:"start",value:function(){P("lock start"),this.lockTimer||this.lazyLock()}},{key:"resume",value:function(){this.lazyLock(1)}},{key:"resetDoc",value:function(e){this.doc=e}},{key:"lock",value:function(){var e,t,n=this;P("lock doc, is locking: ",this.locking);var r=null===(e=this.doc)||void 0===e?void 0:e.id;if(!this.locking&&r&&"offline"!==(null===(t=this.doc)||void 0===t?void 0:t.created_by)){this.locking=!0;var o=this.uuid;return this.emit("lock_start"),this.workflow.doLock({id:r,uuid:o}).then((function(e){if(n.locking=!1,!n.doc||n.doc.id!==r)return n.workflow.doUnlock({id:r,uuid:o});n.locked=!e.code;var t=n.checkLakeEditConflict(e);t?(n.emit("error",{code:t,lock:e}),n.locked&&n.workflow.doUnlock({id:r,uuid:o})):n.locked&&(n.lazyLock(n.LOCK_INTERVAL),n.emit("ready"),n.retryCount=0)})).catch((function(e){n.locking=!1,n.doc&&r===n.doc.id&&(n.locked=!1,e.code!==l.ERROR_CODE.LOCKED_BY_SYNC?(n.emit("error",{code:l.ERROR_CODE.LOCK_FAILED,message:e.message,stack:e.stack}),n.retryCount++,n.retryCount<n.MAX_RETRY_COUNT&&n.lazyLock(n.retryCount*n.LOCK_INTERVAL)):n.emit("error",e))}))}}},{key:"clearLockTimer",value:function(){this.lockTimer&&(P("stop polling"),clearTimeout(this.lockTimer),this.lockTimer=null)}},{key:"destroy",value:function(){try{this.unLock(),this.locking=!1,this.workflow=null,delete this.doc}catch(e){}}}],r&&w(n.prototype,r),o&&w(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.a),j=C,T=n(4455),I=n(157);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function U(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}var B=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageId=window.appData.traceId,this.actions=[],this.errorCode=null,this.context=t,this.userChanged=!1},(t=[{key:"getDate",value:function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},{key:"getTime",value:function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}},{key:"pushDate",value:function(){var e=this.getDate();e!==this.date&&(this.date&&this.report(),this.date=e,this.actions.push("[".concat(e,"]")))}},{key:"log",value:function(e,t){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t))}},{key:"logUserChanged",value:function(){this.userChanged=!0}},{key:"logError",value:function(e,t,n){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t)),null!=n&&n.stack&&this.actions.push(n.stack),this.errorCode=e}},{key:"getReportData",value:function(){return["".concat(this.context.doc.id,":").concat(this.context.scene,":").concat(this.context.defaultMode)].concat(L(this.actions)).join("~")}},{key:"reset",value:function(){this.actions=[],this.errorCode=null,this.date=null,this.userChanged=!1}},{key:"report",value:function(){if(0!==this.actions.length){var e={c2:this.getReportData(),d1:this.context.currentMode,d2:this.context.docFormat,d3:this.context.scene,d4:this.errorCode};u.a.logEditAction(e,this.errorCode,this.userChanged),this.reset()}}},{key:"logAction",value:function(e,t){T.a[e]&&T.a[e][t]&&Object(I.spmClick)(T.a[e][t])}},{key:"destroy",value:function(){try{(this.userChanged||this.errorCode)&&this.report()}catch(e){}}}])&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),z=B,F=n(34);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(){$=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==V(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(V(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function q(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){q(a,r,o,i,c,"next",e)}function c(e){q(a,r,o,i,c,"throw",e)}i(void 0)}))}}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function K(e,t,n){return t=Q(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,n||[],Q(e).constructor):t.apply(e,n))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function J(e,t,n){return(t=ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var te=c()("editor:doc:wf"),ne=window.appData,re=ne.isAlipayWebApp,oe=ne.isYuqueMobileApp,ae=function(e){function t(e){var n,r=e.doc,o=void 0===r?{}:r,a=e.mode,i=e.scene;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(n=K(this,t),"clear",W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.doc.id){e.next=2;break}return e.abrupt("return",!0);case 2:if(n._clearAble()){e.next=4;break}return e.abrupt("return",!1);case 4:return n.clearing=!0,n.onBeforeReset(),n.clearError(),n._clearMessage(),n._clearLazyDisconnect(),n._clearLazyStartTimer(),n._clearCacheTimer(),e.next=13,n.save(l.SAVE_TYPE.AUTO);case 13:return n.transmitDocStatus(l.DOC_STATUS.loaded),n.editable=!1,n.docLoaded={},n.saving=!1,n.publishing=!1,n.docRendered=!1,n.initialDocument=null,n.saveId=null,n.lockManager&&(n.lockManager.destroy(),n.lockManager=null),n.collabManager=null,n.collabDisabled=!1,delete n.editorBiz,n.onReset(),n.clearing=!1,n.destroying=!1,delete n.destroyed,e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})))),J(n,"onEditorLoaded",(function(e){var t=e.engine;n.engine=t,window.__engine=t.getOriginEngine(),window.__workflow=n,n._bindEvents(),n.performance.marks("EditorLoaded"),n.userAction.log("editor_ready"),Object(s.a)("editorLoaded"),window.dispatchEvent(new CustomEvent("WORKFLOW_EVENT.editorLoaded",{detail:{engine:t.getOriginEngine()}}))})),J(n,"_bindEvents",(function(){var e,t;n.eventBinded||(n.doBindEvents(),n.engine.bindEditorTipEvent((function(e){e.error&&n.error(Y({code:l.ERROR_CODE.EDITOR_ERROR},e.error)),e.message&&n.emit(l.WORKFLOW_EVENT.message,Y({type:l.MESSAGE.EDITOR_MESSAGE},e.message))})),n.engine.onCommandError((function(e){n.error(Y({code:l.ERROR_CODE.COMMAND_ERROR},e))})),null===(e=(t=n.engine).onMonitorLog)||void 0===e||e.call(t,(function(e,t,n){u.a.editorMonitorLog(e,t,n)})),n.engine.onCommandEnd((function(e,t,r){n.performance.logSlowAction(e,t,r),n.userAction.logAction(e,t)})),n.eventBinded=!0)})),J(n,"onPageInactive",(function(){n.userAction.log("page_inactive"),n.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&(n.save(l.SAVE_TYPE.AUTO),n.currentMode===l.EDIT_MODE.LOCK&&n.lockManager&&n.lockManager.unLock(),n._lazyDisconnect())})),J(n,"onPageLeave",(function(){n.userAction.log("page_leave"),n.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&(n.save(l.SAVE_TYPE.AUTO),n.currentMode===l.EDIT_MODE.LOCK&&n.lockManager&&n.lockManager.unLock())})),J(n,"onPageOnline",(function(){n.transmitNetStatus(l.NET_STATUS.online),n.cache(),n.reStart()})),J(n,"onPageOffline",(function(){n.transmitNetStatus(l.NET_STATUS.offline),n.cache()})),J(n,"onPageActive",(function(){n.userAction.log("page_active"),n._clearLazyDisconnect(),te("page _onPageActive",n.currentMode,n.docStatus),n.reStart()})),J(n,"reStart",(function(){n.reChooseMode(),n.currentMode===l.EDIT_MODE.COLLAB?n.collabManager&&n.collabManager.isAlive()||n.start():n.currentMode===l.EDIT_MODE.LOCK&&n.startLockService()})),J(n,"_lazyDisconnect",(function(){n._clearLazyDisconnect(),n.disconnectTimer=setTimeout((function(){n.disconnectTimer=null,n.currentMode===l.EDIT_MODE.COLLAB&&n.collabManager&&n.collabManager.isAlive()&&(n.collabManager.disconnect(),n.userAction.log("collab_lazy_disconnect"),n.setEditable(!1))}),n.lazyDisconnectInterval)})),J(n,"_clearLazyDisconnect",(function(){n.disconnectTimer&&(clearTimeout(n.disconnectTimer),n.disconnectTimer=null)})),J(n,"start",function(){var e=W($().mark((function e(t){var r,o,a,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userAction.log("start"),n._checkStartAble()){e.next=4;break}return n.lazyStart(t),e.abrupt("return");case 4:return a=t&&t.local,n._beforeStart(),n.setEditable(!1),n.performance.marks("DocLoadStart"),t||Object(s.a)("loadStart"),e.next=11,n.loadDoc(t);case 11:if((i=e.sent)&&n.doc&&i.id===n.doc.id&&!n.destroying){e.next=14;break}return e.abrupt("return");case 14:return t||Object(s.a)("loadEnd",i),n.performance.marks("DocLoadEnd"),n._updateDoc(i),n.editorBiz.isCacheActived?(n.useCache=!0,n.userAction.log("useCache_to_edit")):n.useCache=!1,n.editorBiz.saveCacheToServer(),!t&&null!==(r=n.doc.readerEditModeData)&&void 0!==r&&null!==(o=r.matchCondition)&&void 0!==o&&o.editType.includes("Collab")&&n.currentMode===l.EDIT_MODE.LOCK&&n.scene!==l.EDIT_SCENE.MOBILE&&(n.defaultMode=l.EDIT_MODE.COLLAB,n.transmitMode(l.EDIT_MODE.COLLAB)),n.currentMode===l.EDIT_MODE.COLLAB&&(n.netStatus===l.NET_STATUS.offline?n.transmitMode(l.EDIT_MODE.LOCK):n.startCollabService()),e.next=23,n.initEditor(i);case 23:n.currentMode!==l.EDIT_MODE.LOCK&&n.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&n.netStatus!==l.NET_STATUS.offline||n.setEditable(!0),n.performance.marks("DocRendered"),Object(s.a)("docRendered",n.currentMode),n.currentMode===l.EDIT_MODE.LOCK&&(n.startLockService(),n.performance.reportPerf()),a&&n.netStatus===l.NET_STATUS.online&&n.currentMode===l.EDIT_MODE.COLLAB&&(Object(s.a)("start","reload_instart"),n.start()),n.onStarted();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(n,"setContent",(function(e){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.engine).setContent.apply(t,[e].concat(o))})),J(n,"isReady",(function(){return!!n.engine})),J(n,"onSaveTitle",(function(e){n.doc.title=e,n.emit(l.WORKFLOW_EVENT.saveTitle,e),window.dispatchEvent(new CustomEvent("WORKFLOW_EVENT.saveTitle",{detail:e}))})),J(n,"onContentChange",(function(e){if(!n.ignoreChange())return n.changeTips(),n._lazyCache(),n._setStopWatch("autosaveConflict",10),n.transmitDocStatus(l.DOC_STATUS.changed),n.emit(l.WORKFLOW_EVENT.change,e),n.currentMode===l.EDIT_MODE.LOCK&&n.startLockService(),delete n.cached,n.userAction.logUserChanged(),!0})),J(n,"_getInitEditorOption",(function(e){var t={};return e&&e.doc_dynamic_data&&(t.dynamicData=e.doc_dynamic_data),t})),J(n,"initEditor",function(){var e=W($().mark((function e(t){var r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te("document loaded, use document",n.initialDocument),r=n.initialDocument.value,n.currentMode===l.EDIT_MODE.COLLAB_CUSTOM&&(r=t.content),n.engine.getPureContent()===r&&!n.isDynamicDataChanged){e.next=15;break}return e.prev=5,e.next=8,n.engine.init({content:r},n._getInitEditorOption(n.doc));case 8:n.userAction.log("editor_render","".concat(null==t?void 0:t.id,":").concat(n.initialDocument.draft_version)),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),n.error({code:l.ERROR_CODE.RENDER_FAILED,error:e.t0,detail:{commandName:"init",content:r}}),e.t0;case 15:n.docRendered=!0,n.engine.readonly(!1),n.onDocRendered();case 18:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),J(n,"save",function(){var e=W($().mark((function e(t){var r,o,a,i,c,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.userAction.log("save","".concat(t," ").concat(null===(r=n.doc)||void 0===r?void 0:r.id)),o=n.editable,te("on save, context: ",{editable:o,type:t}),n.cache(),a=n.checkSaveStatus(t),e.t0=a,e.next=e.t0===l.SAVE_STATUS.IGNORE?8:e.t0===l.SAVE_STATUS.DISABLED?10:e.t0===l.SAVE_STATUS.LAZY?13:(e.t0,l.SAVE_STATUS.OK,15);break;case 8:return n.userAction.log("ignore_save",n.docStatus),e.abrupt("return");case 10:return n.userAction.log("unable_save"),n.throwWhenPublish(t),e.abrupt("return");case 13:return n._addTask("save"),e.abrupt("return");case 15:return n.transmitDocStatus(l.DOC_STATUS.saving),n.saving=!0,n.saveId=f()(6),i=new Date,e.prev=19,e.next=22,n.engine.onBeforeSave();case 22:te("save:before done, do save to server"),e.next=31;break;case 25:e.prev=25,e.t1=e.catch(19),n.saving=!1,te("save:before has exception: ",e.t1),n.throwWhenPublish(t,new Error(__("内容存在未完成的上传或其他异常，请检查后重试"))),n.userAction.logError(l.ERROR_CODE.SAVE_BEFORE_FAILED,null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 31:return e.prev=31,e.next=34,n.doSaveDoc(t,n.saveId);case 34:if(u=e.sent,n.saving=!1,u&&u.id===(null===(c=n.doc)||void 0===c?void 0:c.id)){e.next=38;break}throw new Error("document unExist");case 38:return n.saveSuccess(t,u),n._lastSaveTime=new Date,n.repairDestroyCount(n._lastSaveTime-i),e.abrupt("return",u);case 44:e.prev=44,e.t2=e.catch(31),n.saving=!1,n.throwWhenPublish(t,e.t2),n.saveFailed(t,e.t2);case 49:case"end":return e.stop()}}),e,null,[[19,25],[31,44]])})));return function(t){return e.apply(this,arguments)}}()),J(n,"publish",function(){var e=W($().mark((function e(t){var r,o,a,i,c,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userAction.log("publish"),te("publish:",t),!n._checkBuzy()){e.next=4;break}throw new Error("buzy");case 4:return e.prev=4,e.next=7,n.save(l.SAVE_TYPE.USER_PUBLISH);case 7:return r=e.sent,n.publishing=!0,n.transmitDocStatus(l.DOC_STATUS.publishing),o=!!r,e.next=13,n.doPublishDoc(t,o);case 13:n.publishing=!1,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(4),n.publishing=!1,n.publishFailed(e.t0),e.t0;case 21:return e.next=23,n.publishSuccess(r||n.doc);case 23:if(!n.destroying){e.next=25;break}throw new Error("destroying");case 25:return a=n.doc,i={},"Table"===a.type&&t.type===l.SAVE_TYPE.USER_PUBLISH&&(i.fullBody=!0),c=n.engine.getEditorContent(i),u=c.content,e.abrupt("return",u);case 30:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),J(n,"saveDocTheme",function(){var e=W($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveEditorMeta({isDraft:!0,themeMetas:[t]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(n,"getWordCount",(function(e){return n.engine.getWordCount(e)})),J(n,"getSummary",(function(e){n.engine.getSummary(e)})),J(n,"isVersionConflict",(function(e){return n.editorBiz.hasNewVersion(e)})),J(n,"isEmptyDoc",(function(){return!!n.isDefaultTitle(n.doc.title)&&n.engine.isEmpty()})),J(n,"isDocContentEmpty",(function(){return n.engine.isEmpty()})),J(n,"isOnlyOneEditSession",(function(){return n.currentMode===l.EDIT_MODE.LOCK||n.collabManager&&n.collabManager.isOnlyOneCollabSession()})),J(n,"revert",(function(e){n.userAction.log("revert_doc"),te("[onRevert]version:",e),n.editorBiz.saveCacheToServer(),n.engine.setContent(e.content),n.docRendered=!0,n.setEditable(!0),n.transmitDocStatus(l.DOC_STATUS.changed),n.currentMode===l.EDIT_MODE.LOCK&&n.startLockService()})),J(n,"reset",(function(e){n.engine.reset(e)})),J(n,"doSaveDoc",function(){var e=W($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(n,"doIgnoreSave",(function(){return!1})),J(n,"dontIgnoreSave",(function(){return!1})),J(n,"doPublishDoc",function(){var e=W($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.doc=Y({},o),n.scene=i||l.EDIT_SCENE.WEB,n.defaultMode=a||l.EDIT_MODE.LOCK,n.engine=null,n.editorBiz=null,n.lockManager=null,n.collabManager=null,n.editable=!1,n.docLoaded={},n.saving=!1,n.useCache=!1,n.initialDocument=null,n.performance=new y(n),n.userAction=new z(n),n._stopWatch={},n.lazyCacheInterval=re||oe?1e3:5e3,n.lazyDisconnectInterval=12e5,n.bigDocumentWordCount=1e4,n.maxCollabReconnect=100,n.collabReconnectCount=0,n.isDynamicDataChanged=!1,n.collabConnected=!1,n.netStatus=n.getNetStatus(),n.currentMode=n.defaultMode,n.destroyCount=0,n.maxDestroyCount=20,n.taskList=[],n._lastSaveTime=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),n=t,o=[{key:"repairDestroyCount",value:function(e){var t=2*Math.ceil(e/1e3);this.maxDestroyCount=Math.min(60,Math.max(this.maxDestroyCount,t))}},{key:"getNetStatus",value:function(){var e,t=null!==(e=navigator)&&void 0!==e&&e.onLine?l.NET_STATUS.online:l.NET_STATUS.offline;return this.userAction.log("navigator.onLine: ".concat(t)),t}},{key:"docFormat",get:function(){var e;return this.doc&&this.doc.format&&(e=this.doc.format),"lake"===e&&this.engine&&this.engine.lakex&&(e="lakex"),e}},{key:"isBigLakeDocument",get:function(){return this.doc&&"lake"===this.doc.format&&this.doc.word_count>this.bigDocumentWordCount}},{key:"_addTask",value:function(e){this.taskList.includes(e)||(this.userAction.log("lazy ".concat(e)),this.taskList.push(e))}},{key:"_runTask",value:function(){0!==this.taskList.length&&"save"===this.taskList.shift()&&this.save(l.SAVE_TYPE.AUTO)}},{key:"_checkBuzy",value:function(){return!!this._isBuzy()&&(this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.BUZY,docStatus:this.docStatus}),!0)}},{key:"reChooseMode",value:function(){this.defaultMode!==l.EDIT_MODE.COLLAB_CUSTOM&&this.defaultMode!==l.EDIT_MODE.LOCK?(this.currentMode===l.EDIT_MODE.LOCK&&this.defaultMode===l.EDIT_MODE.COLLAB&&this.lockManager&&this.lockManager.unLock(),this.transmitMode(l.EDIT_MODE.COLLAB)):this.transmitMode(this.defaultMode)}},{key:"_checkStartAble",value:function(){return!this._isBuzy()&&!!this.engine&&this.startAble()}},{key:"_isBuzy",value:function(){return!!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing,l.DOC_STATUS.loading].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_destroyDisabled",value:function(){return!!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing].includes(this.docStatus)||this.publishing||this.saving)}},{key:"_clearAble",value:function(){return!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_beforeStart",value:function(){this.clearError(),this._clearLazyStartTimer(),this._clearLazyDisconnect()}},{key:"lazyStart",value:function(e){var t=this;this._clearLazyStartTimer(),this.lazyStartTimer=setTimeout((function(){t.lazyStartTimer=null,t.start(e)}),1e3)}},{key:"_clearLazyStartTimer",value:function(){this.lazyStartTimer&&(clearTimeout(this.lazyStartTimer),this.lazyStartTimer=null)}},{key:"_setStopWatch",value:function(e,t){var n=+new Date;this._stopWatch[e]={start:n,end:n+1e3*t}}},{key:"_inStopWatch",value:function(e){if(!this._stopWatch[e])return!1;var t=+new Date;return t>=this._stopWatch[e].start&&t<=this._stopWatch[e].end}},{key:"clearError",value:function(){this.emit(l.WORKFLOW_EVENT.error,null)}},{key:"_clearMessage",value:function(){this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.CLEAR})}},{key:"loadDoc",value:(g=W($().mark((function e(t){var n,r;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te("start loading document"),n=this.doc,this.userAction.log("load_doc",n.id),this.needLoad()){e.next=5;break}return e.abrupt("return");case 5:if(this.transmitDocStatus(l.DOC_STATUS.loading),e.prev=6,e.t0=t,e.t0){e.next=12;break}return e.next=11,this.doLoadDoc();case 11:e.t0=e.sent;case 12:return r=e.t0,this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[n.id]=!0,this.repairNetStatusOnline(),e.abrupt("return",r);case 19:e.prev=19,e.t1=e.catch(6),this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[n.id]&&this._isNetWorkError(null===e.t1||void 0===e.t1?void 0:e.t1.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DISCONNECT}):this.error({code:l.ERROR_CODE.INIT_FAILED,type:null===e.t1||void 0===e.t1?void 0:e.t1.type,status:null===e.t1||void 0===e.t1?void 0:e.t1.status,message:null===e.t1||void 0===e.t1?void 0:e.t1.message,stack:null===e.t1||void 0===e.t1?void 0:e.t1.stack});case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return g.apply(this,arguments)})},{key:"updateEditorBiz",value:function(e){var t=this;this.editorBiz&&this.editorBiz.doc.id===e.id?(this.onBeforeUpdateEditorBiz(e),this.editorBiz.resetDoc(e)):(this.editorBiz=this.createEditorBiz(e),this.editorBiz.on("outDatedCacheSavedToServer",(function(){t.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DOC_CACHE_SAVED}),t.userAction.log("outDatedCacheSavedToServer")})))}},{key:"createLockManager",value:function(){var e=this;this.lockManager||(this.userAction.log("create_lock"),this.lockManager=new j(this.doc,this),this.lockManager.on("ready",(function(){e.userAction.log("lock_ready"),e.docStatus!==l.DOC_STATUS.changed&&e.unLock(),e.repairNetStatusOnline()})),this.lockManager.on("lock_start",(function(){e.userAction.log("lock_start")})),this.lockManager.on("error",(function(t){e.lockError(t)})))}},{key:"lockError",value:function(e){this.userAction.log(e.code,e.message),e.message&&this._isNetWorkError(e.message)||(e.code!==l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT||this.docStatus!==l.DOC_STATUS.saving&&!this.saving)&&(this.onLockError(e)||(this.setEditable(!1),this.error(e)))}},{key:"createCollabManager",value:function(){var e=this;this.collabManager||(this.collabManager=this.doCreateCollabManager(),this.collabManager&&(this.userAction.log("create_collab"),this.collabManager.on("ready",(function(){e.userAction.log("collab_ready"),e.setEditable(!0),e.collabConnected=!0,e.engine.focusBlankDoc(e.initialDocument.value),e.performance.marks("CollabReady"),e.performance.reportPerf()})),this.collabManager.on(l.WORKFLOW_EVENT.error,(function(t){if(e.onCollabError(t),e.cache(),e.error(t),t.code!==l.ERROR_CODE.COLLAB_DATA_INIT_ERROR){if((t.code===l.ERROR_CODE.DISCONNECTED||t.code===l.ERROR_CODE.COLLAB_DATA_ERROR)&&e._collaboratorCounts&&e.netStatus===l.NET_STATUS.online&&e.collabReconnectCount<e.maxCollabReconnect)return e.userAction.log("collab_reconnect"),e.start(),void e.collabReconnectCount++;t.code===l.ERROR_CODE.COLLAB_DATA_LIMIT&&(e.defaultMode=l.EDIT_MODE.LOCK),e.transmitMode(l.EDIT_MODE.LOCK),e.lockModeReason=t.code,e.transmitNetStatus(e.getNetStatus()),e.collabManager.destroy(),e.collabManager=null}else e.setEditable(!1)})),this.collabManager.on(l.WORKFLOW_EVENT.message,(function(t){t.type===l.MESSAGE.DOC_DELETED?(e.transmitDocStatus(l.DOC_STATUS.deleted),e.error({code:l.ERROR_CODE.DOC_DELETED,data:t})):e.emit(l.WORKFLOW_EVENT.message,t)})),this.collabManager.on(l.WORKFLOW_EVENT.collabUsersChange,(function(t){e.emit(l.WORKFLOW_EVENT.collabUsersChange,t),e._collaboratorCounts=t.length,e.userAction.log("collab_user_changes",t.length)})),this.collabManager.on(l.WORKFLOW_EVENT.netStatusChange,(function(t){e.transmitNetStatus(t)}))))}},{key:"startLockService",value:function(){this.docStatus!==l.DOC_STATUS.deleted&&(te("startLockService"),this.createLockManager(),this.lockManager.start())}},{key:"startCollabService",value:function(){this.userAction.log("collab_start"),te("startCollabService"),this.createCollabManager(),this.collabManager.connect()}},{key:"unLock",value:function(){this.currentMode===l.EDIT_MODE.LOCK&&this.lockManager&&this.docStatus!==l.DOC_STATUS.changed&&(this.doc&&this.doc.local||(this.userAction.log("unlock"),this.lockManager.unLock()))}},{key:"transmitDocStatus",value:function(e){if(te("transmitDocStatus===========: ",this.docStatus,"=>",e),this.docStatus!==l.DOC_STATUS.deleted)if(e!==l.DOC_STATUS.saved||this.docStatus===l.DOC_STATUS.saving){if((e!==l.DOC_STATUS.published||this.docStatus===l.DOC_STATUS.publishing)&&this.docStatus!==e){if(this.userAction.log("docStatus_changed","".concat(this.docStatus," => ").concat(e)),this.docStatus=e,this.destroying)return;this.emit(l.WORKFLOW_EVENT.docStatusChange,e)}}else this.emit(l.WORKFLOW_EVENT.docStatusChange,e)}},{key:"repairNetStatusOnline",value:function(){F.c||this.transmitNetStatus(l.NET_STATUS.online)}},{key:"transmitNetStatus",value:function(e){if(this.netStatus!==e){if(e===l.NET_STATUS.congestion&&this.netStatus===l.NET_STATUS.offline)return;this.netStatus=e,this.userAction.log("netStatus_changed",e),this.emit(l.WORKFLOW_EVENT.netStatusChange,e)}}},{key:"transmitMode",value:function(e){this.currentMode!==e&&(te("transmitDocStatus===========: ",this.currentMode,"=>",e),this.currentMode=e,this.userAction.log("mode_changed",e),this.emit(l.WORKFLOW_EVENT.editModeChange,e)),this.currentMode===l.EDIT_MODE.LOCK&&this.setEditable(!0)}},{key:"setEditable",value:function(e){this.editable!==e&&(this.editable=e,this.userAction.log("editable_changed",e),this.emit(l.WORKFLOW_EVENT.editableChange,e))}},{key:"_updateDoc",value:function(e){this.userAction.log("doc_update",e.draft_version),this.updateEditorBiz(e),this.initialDocument=this.editorBiz.getInitialDocument(),this.onDocUpdated(e);var t=e&&e.doc_dynamic_data&&e.doc_dynamic_data[0]&&e.doc_dynamic_data[0].updated_at||"",n=this.doc&&this.doc.doc_dynamic_data&&this.doc.doc_dynamic_data[0]&&this.doc.doc_dynamic_data[0].updated_at||"";this.isDynamicDataChanged=t!==n,this.doc=Y({},e),this.lockManager&&this.lockManager.resetDoc(e),this.currentMode===l.EDIT_MODE.COLLAB&&this.collabManager&&this.collabManager.resetDoc(e,this.initialDocument)}},{key:"_clearCacheTimer",value:function(){this.cacheTimer&&(clearTimeout(this.cacheTimer),this.cacheTimer=null)}},{key:"_lazyCache",value:function(){var e=this;this._clearCacheTimer(),this.cacheTimer=setTimeout((function(){e.cacheTimer=null,e.cache()}),this.lazyCacheInterval)}},{key:"changeTips",value:function(){var e;this.docStatus===l.DOC_STATUS.loading&&this.docRendered&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.UNREADY}),"offline"===(null===(e=this.doc)||void 0===e?void 0:e.created_by)&&this.netStatus===l.NET_STATUS.online&&this.error({code:l.ERROR_CODE.LOCKED_BY_SYNC}),this.editable||this.currentMode!==l.EDIT_MODE.LOCK||this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.EDIT_DISABLE,mode:this.currentMode})}},{key:"ignoreChange",value:function(){return!this.docRendered||!!this.destroying}},{key:"cache",value:function(){if(this.needCache()&&!this.cached&&this.docRendered&&this.docStatus===l.DOC_STATUS.changed&&(this._clearCacheTimer(),this.engine)){var e;try{e=this.engine.getPureContent()}catch(e){return this.error({code:l.ERROR_CODE.DATA_ERROR,error:e}),!1}try{this.cached=this.editorBiz.saveToCache({format:this.doc.format,value:e})}catch(e){return this.userAction.logError(l.ERROR_CODE.CACHE_FAILED,null==e?void 0:e.message,e),!1}return this.cached||this.userAction.logError(l.ERROR_CODE.CACHE_FAILED),this.userAction.log("cached"),!0}}},{key:"checkSaveStatus",value:function(e){var t=this.editable,n=this.docStatus,o=this.docRendered,a=this.saving,i=this.publishing,c=this.netStatus,u=this.currentMode,s=this.destroying,d=this.destroyed;this.userAction.log("save_status","editable:".concat(t,", docStatus:").concat(n,", docRendered:").concat(o,", saving:").concat(a,", publishing:").concat(i,", netStatus:").concat(c,", currentMode:").concat(u,", destroying:").concat(s,", destroyed:").concat(d));var f=e===l.SAVE_TYPE.USER_PUBLISH||e===l.SAVE_TYPE.USER_SAVE;return o?t?n===l.DOC_STATUS.deleted?(f&&(r.a.destroy(),r.a.error(__("文档已经被删除"))),l.SAVE_STATUS.DISABLED):n===l.DOC_STATUS.publishing||i?(f&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.PUBLISHING}),l.SAVE_STATUS.LAZY):n===l.DOC_STATUS.saving||a?(f&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVING}),l.SAVE_STATUS.LAZY):this.dontIgnoreSave(e)?l.SAVE_STATUS.OK:this.doIgnoreSave(e)?l.SAVE_STATUS.IGNORE:this.docStatus===l.DOC_STATUS.saved||this.docStatus===l.DOC_STATUS.published||this.docStatus===l.DOC_STATUS.loaded&&!this.editorBiz.isCacheActived?(e===l.SAVE_TYPE.USER_SAVE&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVED}),l.SAVE_STATUS.IGNORE):l.SAVE_STATUS.OK:(te("on save, editor disabled, ignore"),f&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.EDIT_DISABLE,mode:this.currentMode}),l.SAVE_STATUS.DISABLED):(te("on save, editor unrendered, ignore"),f&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.UNREADY}),l.SAVE_STATUS.DISABLED)}},{key:"throwWhenPublish",value:function(e,t){if(e===l.SAVE_TYPE.USER_PUBLISH)throw t||(t=new Error("")),t}},{key:"_isNetWorkError",value:function(e){return e.startsWith(__("网络异常"))||e.includes("Failed to fetch")}},{key:"_isConflictError",value:function(e){return e.includes("conflict")}},{key:"closeAble",value:function(){return!1===this.cached&&[l.DOC_STATUS.saving,l.DOC_STATUS.changed].includes(this.docStatus)?(this.error({code:l.ERROR_CODE.CACHE_FAILED}),!1):!(this.engine&&!this.engine.isContentReady()&&(this.error({code:l.ERROR_CODE.CONTENT_UNREADY}),1))}},{key:"saveFailed",value:function(e,t,n){var r;(this.userAction.log("save_failed",null==t?void 0:t.message),n&&n!==this.saveId)||(this.transmitDocStatus(l.DOC_STATUS.changed),"文档不存在"===(null==t?void 0:t.message)&&F.c&&(r=l.ERROR_CODE.DOC_NOT_EXIST),e===l.SAVE_TYPE.USER_SAVE&&(this._isNetWorkError(null==t?void 0:t.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVE_FAILED,body:null==t?void 0:t.message,cached:this.cached}):this._isConflictError(null==t?void 0:t.message)?(r=l.ERROR_CODE.DOC_SAVE_CONFLICT,null!=t&&t.weak_net_delay&&(r=null)):r=404===(null==t?void 0:t.status)?l.ERROR_CODE.DOC_NOT_EXIST:t.code===l.ERROR_CODE.LOCKED_BY_SYNC?l.ERROR_CODE.LOCKED_BY_SYNC:l.ERROR_CODE.SAVE_FAILED),r&&this.error({code:r,message:null==t?void 0:t.message,stack:null==t?void 0:t.stack,error:t}),this.onSaveFailed(),this._runTask())}},{key:"saveSuccess",value:function(e,t){this.userAction.log("save_success","".concat(e,":").concat(null==t?void 0:t.id)),this.transmitDocStatus(l.DOC_STATUS.saved),e!==l.SAVE_TYPE.USER_SAVE||t.local||(r.a.destroy(),r.a.success(__("保存成功"))),t.local&&!this.clearing&&"offline"!==t.created_by||this.clearCache(),this._updateDoc(t),this.unLock(),e!==l.SAVE_TYPE.USER_PUBLISH&&(this.onSaveSuccess(t),this._runTask())}},{key:"clearCache",value:function(){this.docStatus!==l.DOC_STATUS.changed&&(this.editorBiz.clearCachedContent(),delete this.cached,this.userAction.log("clear_cache"))}},{key:"publishSuccess",value:(b=W($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userAction.log("publish_success"),this.transmitDocStatus(l.DOC_STATUS.published),e.next=4,this.onPublishSuccess(t);case 4:this._runTask();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"publishFailed",value:function(e){this.transmitDocStatus(l.DOC_STATUS.changed),"max_doc_note_number"!==(null==e?void 0:e.code)&&this.error({code:l.ERROR_CODE.PUBLISH_FAILED,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,error:e}),this.onPublishFailed(),this._runTask()}},{key:"saveEditorMeta",value:(v=W($().mark((function e(t){var n,r,o,a,i,c;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isDraft,r=t.themeMetas,o=this.doc,a=this.engine.getDocMeta({themeMetas:r})){e.next=5;break}return e.abrupt("return");case 5:return i=JSON.stringify(a),c={id:o.id,meta_draft:i},n||(c.meta=i),e.prev=8,e.next=11,this.doSaveEditorMeta(c);case 11:this.engine.updateDocEditorMeta(c),this.onEditorMetaSaved(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return v.apply(this,arguments)})},{key:"deleteDoc",value:function(){this.transmitDocStatus(l.DOC_STATUS.deleted),this.onDocDeleted()}},{key:"exit",value:(h=W($().mark((function e(t){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.unlock||!this.lockManager){e.next=6;break}return e.next=4,this.lockManager.unLock();case 4:e.next=7;break;case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"error",value:function(e){var t,n;e.message=e.message||(null===(t=e.error)||void 0===t?void 0:t.message),e.stack=e.stack||(null===(n=e.error)||void 0===n?void 0:n.stack),e.reason=this.lockModeReason,this.emit(l.WORKFLOW_EVENT.error,e),this.reportError(e)}},{key:"reportError",value:function(e){var t;e.editMode=this.currentMode,e.scene=this.scene,e.docFormat=this.docFormat,l.REPORT_ACTION_ERROR.includes(e.code)?this.userAction.logError(e.code,e.message,e):this.userAction.log(e.code,e.message),l.REPORT_ACTION_ERROR.includes(e.code)&&this.userAction.report(),u.a.logEditWorkflow(e),e.code===l.ERROR_CODE.COMMAND_ERROR&&u.a.logEngineError(Y(Y({},e),{},{code:null===(t=e.detail)||void 0===t?void 0:t.commandName}))}},{key:"lazyDestroy",value:function(){var e=this;this.userAction.log("lazy_destroy"),this.lazyDestroyTimer=setTimeout((function(){e.lazyDestroyTimer=null,e.destroy()}),1e3)}},{key:"_clearLazyDestroyTimer",value:function(){this.lazyDestroyTimer&&(clearTimeout(this.lazyDestroyTimer),this.lazyDestroyTimer=null)}},{key:"_clearTimer",value:function(){this._clearCacheTimer(),this._clearLazyDisconnect(),this._clearLazyStartTimer(),this._clearLazyDestroyTimer()}},{key:"_clearEvents",value:function(){this.unBindEvents()}},{key:"destroy",value:function(){if(this.destroying=!0,this._clearTimer(),this._clearEvents(),this.onBeforeDestroy(),this._destroyDisabled()&&this.destroyCount<this.maxDestroyCount)return this.destroyCount++,void this.lazyDestroy();if(this.userAction.log("workflow_destroy"),this.performance&&(this.performance.destroy(),this.performance=null),this.lockManager&&(this.lockManager.destroy(),this.lockManager=null),this.collabManager&&(this.collabManager.destroy(),this.collabManager=null),this.engine){try{this.engine.destroy()}catch(e){}this.engine=null}this.userAction&&(this.userAction.destroy(),this.userAction=null),this.doc=null,this.destroyed=!0,this.onDestroy()}},{key:"onDestroy",value:function(){}},{key:"onBeforeReset",value:function(){}},{key:"onReset",value:function(){}},{key:"onBeforeUpdateEditorBiz",value:function(){}},{key:"doBindEvents",value:function(){}},{key:"unBindEvents",value:function(){}},{key:"startAble",value:function(){return!0}},{key:"onStarted",value:function(){}},{key:"needLoad",value:function(){return!0}},{key:"doLoadDoc",value:(m=W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"onLockError",value:function(){}},{key:"doCreateCollabManager",value:function(){}},{key:"onCollabError",value:function(){}},{key:"createEditorBiz",value:function(){}},{key:"onDocUpdated",value:function(){}},{key:"onDocRendered",value:function(){}},{key:"needCache",value:function(){return!0}},{key:"onSaveFailed",value:function(){}},{key:"onSaveSuccess",value:function(){}},{key:"onDocDeleted",value:function(){}},{key:"onPublishSuccess",value:(p=W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"onPublishFailed",value:function(){}},{key:"doSaveEditorMeta",value:(d=W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"onEditorMetaSaved",value:function(){}},{key:"isDefaultTitle",value:function(){}},{key:"isActive",value:function(){return!0}},{key:"onBeforeDestroy",value:function(){try{this.engine.readyToDestroy()}catch(e){}}},{key:"doLock",value:(c=W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"doUnlock",value:(i=W($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}],o&&H(n.prototype,o),a&&H(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a,i,c,d,p,m,h,v,b,g}(a.a);t.a=ae},4469:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4622),o=n(85);function a(e){var t=[],n={};if(e.startsWith("<!doctype html>"))t.push(e.substring(15));else try{var a=JSON.parse(e.substring(15));t=a.htmls,n=a.options}catch(t){o.a.logError(t,"JSON.parse error when contentToSheet htmlOrJSON: ".concat(e))}var i=Object(r.a)(t,n);return{value:JSON.stringify(i)}}},4478:function(e,t,n){"use strict";var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,o=r.exec(n);if(!o)return n;var a="",i=0,c=0;for(i=o.index;i<n.length;i++){switch(n.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==i&&(a+=n.substring(c,i)),c=i+1,a+=t}return c!==i?a+n.substring(c,i):a}},4483:function(e,t,n){var r=n(4355),o=n(4484),a=n(261);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},4484:function(e,t){e.exports=function(e,t){return e>t}},4524:function(e,t,n){"use strict";n(3540);var r=n(1564);n(3531);t.a=r.a},4534:function(e,t,n){var r=n(818),o=n(243),a=n(596),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:a(n);return l<0&&(l=i(c+l,0)),r(e,o(t,3),l)}},4546:function(e,t,n){},4547:function(e,t,n){var r=n(4004)(n(4534));e.exports=r},4615:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(14),u=n.n(l),s=n(493);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,o=[{key:"renderContent",value:function(){var e=this.props,t=e.docStatus,n=e.savedAt,r=e.netStatus;if(r===s.NET_STATUS.offline)switch(t){case"loading":return a.a.createElement("span",{"data-testid":"DocSaveTip:loading_offline"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"DocSaveTip:auto_saving_offline"},__("离线编辑中..."));case"saving":return a.a.createElement("span",{"data-testid":"DocSaveTip:saving_offline"},__("正在离线保存..."));case"saved":return a.a.createElement("span",{"data-testid":"DocSaveTip:saved_offline"},__("已保存离线版本")," ",n&&u()(n).format("H:mm:ss"));default:return a.a.createElement("span",{"data-testid":"DocSaveTip:offline"},__("当前在离线编辑状态..."))}if(r===s.NET_STATUS.congestion)return a.a.createElement("span",{"data-testid":"DocSaveTip:congestion"},__("网络不稳定，无法实时协同..."));switch(t){case"loading":return a.a.createElement("span",{"data-testid":"DocSaveTip:loading"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"DocSaveTip:auto_saving"},__("自动保存中..."));case"saving":return a.a.createElement("span",{"data-testid":"DocSaveTip:saving"},__("正在保存..."));case"publishing":return a.a.createElement("span",{"data-testid":"DocSaveTip:publishing"},__("正在发布..."));case"published":return a.a.createElement("span",{"data-testid":"DocSaveTip:published"},__("已发布"));case"saved":return a.a.createElement("span",{"data-testid":"DocSaveTip:saved"},__("已保存")," ",n&&u()(n).format("H:mm:ss"));case"loaded":return a.a.createElement("span",{"data-testid":"DocSaveTip:loaded"},__("已加载最新版本"));default:return null}}},{key:"render",value:function(){var e=this,t=this.renderContent(),n=this.props.showHistory;return t&&n?a.a.createElement(r.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},a.a.createElement("span",{style:{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(t){return e.handleClick(t)}},t)):t}},{key:"handleClick",value:function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&(0,this.props.showHistory)()}}],o&&f(n.prototype,o),i&&f(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(o.PureComponent);b.propTypes={savedAt:c.a.instanceOf(Date),docStatus:c.a.string,netStatus:c.a.string,showHistory:c.a.func},t.a=b},4616:function(e,t,n){t.Connection=n(4617),t.Doc=n(4413),t.Error=n(4293),t.Query=n(4414),t.types=n(4294),t.logger=n(4292)},4617:function(e,t,n){(function(t){var r=n(4413),o=n(4414),a=n(4619),i=n(4621),c=n(4212),l=n(4293),u=n(4294),s=n(4213),d=n(4292),f=l.CODES;function p(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function m(e){c.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=p(e),this.bindToSocket(e)}function h(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}function v(e){return e.hasPending()}function y(e){return e.hasWritePending()}e.exports=m,c.mixin(m),m.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var n=p(e);this._setState(n),this.canSend=!1;var r=this;e.onmessage=function(e){try{var n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void d.warn("Failed to parse message",e)}r.debug&&d.info("RECV",JSON.stringify(n));var o={data:n};if(r.emit("receive",o),o.data)try{r.handleMessage(o.data)}catch(e){t.nextTick((function(){r.emit("error",e)}))}},1===e.readyState&&r._initializeHandshake(),e.onopen=function(){r._setState("connecting"),r._initializeHandshake()},e.onerror=function(e){r.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?r._setState("closed",e):"stopped"===e||"Stopped by server"===e?r._setState("stopped",e):r._setState("disconnected",e)}},m.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=h(e.error,e),delete e.error),e.a){case"init":return this._handleLegacyInit(e);case"hs":return this._handleHandshake(t,e);case"qf":return void((n=this.queries[e.id])&&n._handleFetch(t,e.data,e.extra));case"qs":return void((n=this.queries[e.id])&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n;if(!(n=this.queries[e.id]))return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":return this._handleBulkMessage(t,e,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((r=this.getExisting(e.c,e.d))&&r._handleFetch(t,e.data));case"s":return void((r=this.getExisting(e.c,e.d))&&r._handleSubscribe(t,e.data));case"u":return void((r=this.getExisting(e.c,e.d))&&r._handleUnsubscribe(t));case"op":var r;return void((r=this.getExisting(e.c,e.d))&&r._handleOp(t,e));default:d.warn("Ignoring unrecognized message",e)}},m.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var r in t.data){var o=t.data[r];(i=this.getExisting(t.c,r))&&(e?i[n](e):o.error?i[n](h(o.error)):i[n](null,o))}else if(Array.isArray(t.b))for(var a=0;a<t.b.length;a++){r=t.b[a];(i=this.getExisting(t.c,r))&&i[n](e)}else if(t.b)for(var r in t.b){var i;(i=this.getExisting(t.c,r))&&i[n](e)}else d.error("Invalid bulk message",t)},m.prototype._reset=function(){this.agent=null},m.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new l(f.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}for(var r in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries){this.queries[r]._onConnectionStateChanged()}for(var o in this.collections){var a=this.collections[o];for(var r in a)a[r]._onConnectionStateChanged()}for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},m.prototype.startBulk=function(){this.bulk||(this.bulk={})},m.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},m.prototype._sendBulk=function(e,t,n){if(n){var r,o=[],a={},i=0;for(var c in n){var l=n[c];null==l?o.push(c):(a[c]=l,r=c,i++)}if(1===o.length){c=o[0];this.send({a:e,c:t,d:c})}else o.length&&this.send({a:"b"+e,c:t,b:o});if(1===i){var u=a[r];this.send({a:e,c:t,d:r,v:u})}else i&&this.send({a:"b"+e,c:t,b:a})}},m.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),o=r[e]||(r[e]={}),a=o.hasOwnProperty(t.id);return o[t.id]=n,a}var i={a:e,c:t.collection,d:t.id,v:n};this.send(i)},m.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},m.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},m.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},m.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},m.prototype.send=function(e){this.debug&&d.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},m.prototype.close=function(){this.socket.close()},m.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},m.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),o=n[t];return o||(o=n[t]=new r(this,e,t),this.emit("doc",o)),o},m.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],s.hasKeys(t)||delete this.collections[e.collection])},m.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},m.prototype._createQuery=function(e,t,n,r,a){var i=this.nextQueryId++,c=new o(e,this,i,t,n,r,a);return this.queries[i]=c,c.send(),c},m.prototype._destroyQuery=function(e){delete this.queries[e.id]},m.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},m.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},m.prototype.hasPending=function(){return!!(this._firstDoc(v)||this._firstQuery(v)||this._firstSnapshotRequest())},m.prototype.hasWritePending=function(){return!!this._firstDoc(y)},m.prototype.whenNothingPending=function(e){var n=this._firstDoc(v);if(n)n.once("nothing pending",this._nothingPendingRetry(e));else{var r=this._firstQuery(v);if(r)r.once("ready",this._nothingPendingRetry(e));else{var o=this._firstSnapshotRequest();o?o.once("ready",this._nothingPendingRetry(e)):t.nextTick(e)}}},m.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick((function(){n.whenNothingPending(e)}))}},m.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var o=n[r];if(e(o))return o}}},m.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},m.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},m.prototype.fetchSnapshot=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,i=new a(this,o,e,t,n,r);this._snapshotRequests[i.requestId]=i,i.send()},m.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,a=new i(this,o,e,t,n,r);this._snapshotRequests[a.requestId]=a,a.send()},m.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))},m.prototype._handleLegacyInit=function(e){e.protocolMinor||this._initialize(e)},m.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})},m.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},m.prototype._initialize=function(e){return 1!==e.protocol?this.emit("error",new l(f.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol)):u.map[e.type]!==u.defaultType?this.emit("error",new l(f.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type")):"string"!=typeof e.id?this.emit("error",new l(f.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string")):(this.id=e.id,void this._setState("connected"))}}).call(this,n(158))},4618:function(e,t){var n=["info","warn","error"];function r(){var e={};n.forEach((function(t){e[t]=console[t].bind(console)})),this.setMethods(e)}e.exports=r,r.prototype.setMethods=function(e){e=e||{};var t=this;n.forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])}))}},4619:function(e,t,n){var r=n(4415),o=n(4213);function a(e,t,n,a,i,c){if(r.call(this,e,t,n,a,c),!o.isValidVersion(i))throw new Error("Snapshot version must be a positive integer or null");this.version=i}e.exports=a,a.prototype=Object.create(r.prototype),a.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},4620:function(e,t){e.exports=function(e,t,n,r,o){this.id=e,this.v=t,this.type=n,this.data=r,this.m=o}},4621:function(e,t,n){var r=n(4415),o=n(4213);function a(e,t,n,a,i,c){if(r.call(this,e,t,n,a,c),!o.isValidTimestamp(i))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=i}e.exports=a,a.prototype=Object.create(r.prototype),a.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},4622:function(e,t,n){"use strict";n.d(t,"a",(function(){return ue})),n.d(t,"b",(function(){return C}));var r=n(121),o=n.n(r),a=n(4483),i=n.n(a),c=n(836),l=n.n(c),u=n(4147),s=n.n(u),d=n(729),f=n.n(d),p=n(1029),m=n.n(p),h=n(4623),v=n.n(h),y=n(176),b=n.n(y),g=n(354),_=n.n(g);n(1533);function E(e,t){return function(e){for(var t,n=e.rows,r=n.length,o=[],a=[],i=0,c=0,l=0,u=0;u<r;u++){for(var s=n[u].cells,d=0,f=0;f<s.length;f++){var p=s[f],m=p.rowSpan,h=p.colSpan;i+=m*h,d+=h,m>1&&(c+=(m-1)*h)}a[u]=d,0===u&&(t=d),l=Math.max(d,l)}if(v()(i/t)&&t===l){var y=0;if(a.forEach((function(e){y+=l-e})),y!==c){var b=c-y;if(b&&v()(b/l)){for(var g=[],_=0;_<r;_++){for(var E=n[_].cells;o[_+g.length]===l;)g.push(_+g.length);for(var w=_+g.length,O=0;O<E.length;O++){var k=E[O],S=k.rowSpan,N=k.colSpan;if(S>1)for(var x=1;x<S;x++)o[w+x]=(o[w+x]||0)+N}}g.forEach((function(t){e.insertRow(t)}))}}}}(e),function(e){var t=e.rows[0];0===t.cells.length&&t.remove(),e.rows.length>1&&1===t.cells.length&&""===t.cells[0].innerText.trim()&&0===t.cells[0].getElementsByTagName("img").length&&1===t.cells[0].colSpan&&1===t.cells[0].rowSpan&&t.remove()}(e),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var o=parseInt(n[1]);r=parseInt(r)/o||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var o=t.colSpan;t.setAttribute("colSpan",1);for(var a=1;a<o;a++){var i=t.cloneNode();e.insertBefore(i,t.nextSibling)}}})),n){var a=parseInt(n[1]);if(a<1e6)for(var i=1;i<a;i++){var c=e.cloneNode();e.parentNode.insertBefore(c,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,o=r.length,a=100,i=0;i<o;i++){var c=r[i].cells,l=c.length;n[i]=n[i]||[];for(var u=l>16300,s=0;s<l;s++){var d=c[s];if(u&&s>a&&""===d.innerHTML&&w(d))break;a=Math.max(a,s);for(var f=d.rowSpan,p=void 0===f?1:f,h=d.colSpan,v=void 0===h?1:h,y=p>1||v>1,b=s;n[i][b];)b++;if(n[i][b]={rowSpan:p,colSpan:v,isMulti:y,element:d},y)for(var g=p;g>0;){for(var _=v;_>0;){if(1!==_||1!==g){var E=i+g-1,O=b+_-1;n[E]=n[E]||[],n[E][O]={isEmpty:!0,parent:{row:i,col:b}}}_--}g--}}}var k=n.map((function(e){return e.length})),S=Math.max.apply(Math,m()(k));return n.forEach((function(e,n){if(e.length<S)for(var r=S-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var o=0;o<S;o++)e[o]||(e[o]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:S,table:n}}(e,t)}function w(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}var O=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,k=/^#+$/,S=/^\d\.\d+[Ee]\+\d+$/,N=String.fromCharCode(165),x=String.fromCharCode(36),A=String.fromCharCode(8364),P=String.fromCharCode(163);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e=function(e){return e.replace(/\\0022/g,"")}(e=function(e,t,n){var r=e.match(/<col[^>]*>/g),o=0;if(r){var a=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);a&&(o=parseInt(a[1],10))}if(o>n){var i=e.split("</tr>");e=(i=i.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(o-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var c=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(c&&c.length>t){var l=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!l)return"<table><tr><td></td></tr></table>";var u=l[l.length-1],s=e.lastIndexOf(u),d=e.slice(0,s+u.length);e=e.slice(s+u.length);var p={};c.forEach((function(e){p[e]=p[e]||{content:e,count:0},p[e].count+=1}));for(var m=Object.values(p),h=(m=f()(m,"count")).length-1;m[h];){var v=m[h];if(v.count>t){var y=v.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(y,"g"),"")}h--}e=d+e}return e}(e,200,200));var a=(new DOMParser).parseFromString(e,"text/html"),c=a.body,u=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++)t(e[o])&&r.push(e[o]);return r}(a.all,(function(e){return"STYLE"===e.tagName}));if(!c)return null;for(var s,d=c.firstChild,p=[],m=[],h={},v={},y=[],b={},g=!1;d;)if(M(d)){var _=q(d,p.length,u,o);_.mergeCells&&(m=m.concat(_.mergeCells)),_.startCell&&(s=_.startCell),_.selectOptions&&Object.assign(b,_.selectOptions),Object.assign(v,_.rows),_.columns&&Object.assign(h,_.columns),p=p.concat(_.table),_.cellsNeedFix&&(y=y.concat(_.cellsNeedFix)),d=$(d),g=!1}else if(z(d))U(d)&&(d.innerHTML=""),L(d)&&(d.innerHTML=d.innerHTML.replace(/\n/g,"<br/>")),d=d.firstChild||$(d),g=!1;else if(D(d)){var E=d.innerText.trim(),w=d.getAttribute("href");T(p,p.length,E,w),g=!1,d=$(d)}else if(R(d)){var O=d.getAttribute("src");I(p,p.length,O,o),g=!1,d=$(d)}else if(V(d))d=d.firstChild||$(d);else if(G(d))g=!1,d=$(d);else if(Y(d)){var k=d.data;if(""!==k.trim()||!z(d.parentNode))j(p,g?p.length-1:p.length,k),g=!0;d=$(d)}else d=$(d);var S=function(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}(p);m=l()(m,(function(e){return"".concat(e.row,":").concat(e.col)}));var N=i()(p.map((function(e){return e.length})))||20,x={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(p.length,r.rowCount):p.length,colCount:r?Math.max(N,r.colCount):N,data:S,mergeCells:m,rows:v,columns:h,filter:{},index:t,defaults:{}};return s&&(x.startCell=s),Object.keys(b).length>0&&(x.selectOptions=b),y.length>0&&(x.cellsNeedFix=y),x}function j(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function T(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function I(e,t,n,r){n=function(e){return e.replace(/\?x-oss-process=image\/resize.+/,"")}(n),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function M(e){return"TABLE"===e.tagName}function L(e){return"PRE"===e.tagName}function R(e){return"IMG"===e.tagName}function D(e){return"A"===e.tagName}function U(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var B=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function z(e){return 1===e.nodeType&&B.includes(e.tagName)}var F=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function V(e){return 1===e.nodeType&&F.includes(e.tagName)}function G(e){return"BR"===e.tagName}function Y(e){return 3===e.nodeType}function $(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=e.cloneNode(!0);document.body.appendChild(a);var i=E(a,r),c={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(c,H(e.innerHTML))}));var l={table:[]},u=a.querySelectorAll("col");if(u.length>0){var s={},d=0;u.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&d<i.cols;)s[d]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},d+=1,r+=1})),l.columns=s}var f=Array.from(a.rows);l.rows={},f.forEach((function(e,n){if(0===e.offsetHeight&&n!==f.length-1)l.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,o={size:r};24!==r&&(o.customSize=r),l.rows[n+t]=o}}));var p=a.getAttribute("data-startCell");if(p){var m=p.split(":");l.startCell={row:parseInt(m[0])||0,col:parseInt(m[1])||0}}var h=a.getAttribute("data-selectOptions");if(h)try{l.selectOptions=JSON.parse(decodeURIComponent(h))}catch(e){console.log(e)}return i.table.forEach((function(e,n){l.table[n]=[],e.forEach((function(e,a){if(e.element){var i=function(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if(function(e){return!!e.class&&("link"===e.class?e.text&&e.url:"file"===e.class||"image"===e.class?e.name&&e.src:"checkbox"===e.class?void 0!==e.value:"select"===e.class?e.value&&(e.options||e.optionId):"mention"===e.class?e.value&&e.value[0].id&&e.value[0].login:"formula"===e.class&&void 0!==e.formula)}(r))return r}catch(e){console.log(e)}for(var o=e.querySelectorAll("img"),a=o.length,i=0;i<a;i++){var c=o[i].getAttribute("src");if(c)return t?{class:"image",src:c,name:"image"}:{class:"image",status:"needUpload",originSrc:c,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n[ ]?/g,"").replace(/<br>\s*/g,"\n");var l,u=e.innerHTML.replace(/<[^>]+>/g,"").trim();u="string"!=typeof(l=u)?l:l.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var s=e.querySelector("a");return s&&s.getAttribute("href")?{class:"link",text:u.replace(/\n/g,""),url:s.getAttribute("href")}:(u.endsWith(" %")&&(u=u.replace(/ %$/,"%")),u)}(e.element,r),u=function(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),K[t])return t;var r=Object.keys(K).map((function(e){return parseInt(e,10)}));r.sort();for(var o=0;r[o];){if(r[o]>t)return r[o];o++}return r[o-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)","rgb(89, 89, 89)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=W[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=W[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch(e){return null}}(e.element),s=function(e){var t=e.getAttribute("data-note");if(t)try{var n=JSON.parse(decodeURIComponent(t));if(n.text)return n}catch(e){console.log(e)}}(e.element),d={name:"auto"},f=!1;if(c){var p=e.element.classList&&e.element.classList[0];c[p]&&("object"===o()(c[p])?Object.assign(d,c[p]):d.name=c[p],["currency","number","percentage"].includes(d.name)&&(d.decimal=2),l.table[n][a]=l.table[n][a]||{},l.table[n][a].type=d,["text","auto"].includes(d.name)||(f=!0))}u&&(l.table[n][a]=l.table[n][a]||{},l.table[n][a].style=u),s&&(l.table[n][a]=l.table[n][a]||{},l.table[n][a].note=s),void 0!==i&&""!==i?(l.table[n][a]=l.table[n][a]||{},l.table[n][a].type=d,l.table[n][a].value=i,"string"==typeof i&&((k.test(i)||S.test(i))&&(f=!0),O.test(i)&&"auto"===d.name&&(f=!0,l.table[n][a].type.name="currency",l.table[n][a].type.symbol=N,l.table[n][a].type.decimal=2))):""===i&&l.columns&&l.columns[a]&&l.columns[a].size<=15&&l.columns[a].size>=0&&(f=!0),f&&r&&(l.cellsNeedFix=l.cellsNeedFix||[],l.cellsNeedFix.push({row:n+t,col:a})),e.isMulti&&(l.mergeCells=l.mergeCells||[],l.mergeCells.push({row:n+t,col:a,rowCount:e.rowSpan,colCount:e.colSpan}),u&&(l.table[n+e.rowSpan-1]=l.table[n+e.rowSpan-1]||[],l.table[n+e.rowSpan-1][a+e.colSpan-1]=l.table[n+e.rowSpan-1][a+e.colSpan-1]||{},l.table[n+e.rowSpan-1][a+e.colSpan-1].style=u))}}))})),a.remove(),n&&n.forEach((function(e){e.remove()})),l}var W={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};function H(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n=e.match(t);if(n){var o=n[1].trim(),a=n[2];if(o.startsWith(".")){var i=a.match(/mso-number-format:(.+);(\n|$)/);i&&(r[o.substr(1)]=function(e){return-1!==(e=e.replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==e.indexOf("Time")?"time":e.endsWith("%")?"percentage":-1!==e.indexOf(P)?{name:"currency",symbol:P}:-1!==e.indexOf(A)?{name:"currency",symbol:A}:-1!==e.indexOf(N)?{name:"currency",symbol:N}:e.match(/^@$/)?"text":-1!==e.indexOf("General")||-1!==e.indexOf("Standard")||-1!==e.indexOf("Fixed")?"auto":e.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?e.match(/(时|分|秒|s|h)/)?"datetime":e.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==e.indexOf(x)?{name:"currency",symbol:x}:"number"}(i[1]))}}})),0===Object.keys(r).length?null:r}var K={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};function Z(e){return e.trim().replace(/'/g,"").replace(/"/g,"")}var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZ",X=Q.length,J=[{type:"whitespace",reg:/^(?:\s+)/},{type:"string",reg:/^(?:"(\\["]|[^"])*")/},{type:"string",reg:/^(?:'(\\[']|[^'])*')/},{type:"function",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/},{type:"error",reg:/^(?:#[A-Z0-9\/]+(!|\?)?)/},{type:"sheetCell",reg:/^(?:'{1}[^']+'{1}!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"sheetCell",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"absoluteCell",reg:/^(?:\$[A-Za-z]+\$[0-9]+)/},{type:"absoluteColCell",reg:/^(?:\$[A-Za-z]+[0-9]+)/},{type:"absoluteRowCell",reg:/^(?:[A-Za-z]+\$[0-9]+)/},{type:"relativeCell",reg:/^(?:[A-Za-z]+[0-9]+)/},{type:"colRange",reg:/^(?:[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"rowRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[0-9]+:[0-9]+)/},{type:"mixRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"function",reg:/^(?:[A-Za-z\.0-9]+(?=[(]))/},{type:"variable",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/},{type:"number",reg:/^(?:[0-9]+)/},{type:"array",reg:/^(?:\[(.*)?\])/},{type:"&",reg:/^(?:&)/},{type:"whitespace",reg:/^(?: )/},{type:"decimal",reg:/^(?:[.])/},{type:":",reg:/^(?::)/},{type:";",reg:/^(?:;)/},{type:",",reg:/^(?:,)/},{type:"*",reg:/^(?:\*)/},{type:"/",reg:/^(?:\/)/},{type:"-",reg:/^(?:-)/},{type:"+",reg:/^(?:\+)/},{type:"^",reg:"/^(?:^)/,"},{type:"(",reg:/^(?:\()/},{type:")",reg:/^(?:\))/},{type:">",reg:/^(?:>)/},{type:"<",reg:/^(?:<)/},{type:"NOT",reg:/^(?:NOT\b)/},{type:'"',reg:/^(?:")/},{type:"'",reg:/^(?:')/},{type:"!",reg:/^(?:!)/},{type:"=",reg:/^(?:=)/},{type:"%",reg:/^(?:%)/},{type:"#",reg:/^(?:[#])/},{type:"EOF",reg:/^(?:$)/}],ee=/^([\u4e00-\u9fa5A-Za-z0-9]+!{1})/,te=/^'{1}(.+'{1}!{1})/,ne=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function re(e){var t=parseInt(e,10);return isNaN(t)?-1:Math.max(t-1,-1)}function oe(e){var t=0;if("string"==typeof e)for(var n=0,r=e.length-1;n<e.length;n+=1,r-=1)t+=Math.pow(X,r)*(Q.indexOf(e[n])+1);return t-1}function ae(e){var t=function(e){var t=null,n=e,r=e.match(ee);return r?(n=e.substring(r[0].length),t=r[0].slice(0,-1)):(r=e.match(te))&&(n=e.substring(r[0].length),t=r[0].slice(1,-2)),{sheet:t,label:n.toUpperCase()}}(e),n=t.label.match(ne),r=b()(n,5),o=r[1],a=r[2],i=r[3],c=r[4];return{row:{index:re(c),label:c,absolute:"$"===i},col:{index:oe(a),label:a,absolute:"$"===o},sheet:t.sheet}}function ie(e){var t=(e.row.absolute?"$":"")+(e.row.index+1);return function(e,t){return t?/^[A-Za-z0-9]+$/.test(t)&&!t.match(/^[A-Za-z]{1,3}[0-9]+/)?"".concat(t,"!").concat(e):"'".concat(t,"'!").concat(e):e}((e.col.absolute?"$":"")+function e(t){var n=Q.substr(t%26,1),r=Math.floor(t/26);return r>0?"".concat(e(r-1)).concat(n):n}(e.col.index)+t,e.sheet)}function ce(e,t){var n=e.baseCell,r=e.formula,o=ae(n),a=ae(t);return function(e,t,n,r){var o=function(e,t){var n=[];e=(e+"").replace(/\s/g,"");for(var r=function(){var t,r,o;J.forEach((function(n){(o=e.match(n.reg))&&(!t||o[0].length>t[0].length)&&(t=o,r=n.type)})),t?(n.push({text:t[0],type:r}),e=e.slice(t[0].length)):(n.push({text:e[0],type:"other"}),e=e.slice(1)),t=null};e.length>0;)r();for(var o=n.length,a=0;a<o-2;a++)n[a].type.indexOf("Cell")>0&&":"===n[a+1].type&&n[a+2].type.indexOf("Cell")<0&&(n[a+1].type="colon");return n}(e),a="";return o.forEach((function(e){if(e.type.indexOf("Cell")>0){var r=ae(e.text);r.row.index+=r.row.absolute?0:t,r.col.index+=r.col.absolute?0:n,a+=ie(r)}else a+=e.text})),a}(r,a.row.index-o.row.index,a.col.index-o.col.index)}function le(e){return(new DOMParser).parseFromString(e,"text/xml")}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e=[e]);var n={format:"lakesheet",type:"Sheet",version:"1.0",larkJson:!0,sheet:[]},r=t.names,a=void 0===r?[]:r,i=t.deflate,c=void 0!==i&&i,l=t.worksheetsDeflate,u=void 0!==l&&l,d=t.xml;if(e.forEach((function(e,t){c&&(e=s.a.inflate(e,{to:"string"}));var r=C(e,t,a[t],{rowCount:50,colCount:20},!0);r.selectOptions&&(n.selectOptions=n.selectOptions||{},Object.assign(n.selectOptions,r.selectOptions),delete r.selectOptions),n.sheet.push(r)})),d){if(u&&d.worksheets){var f={};for(var p in d.worksheets){var m=d.worksheets[p];f[p]=s.a.inflate(m,{to:"string"})}d.worksheets=f}!function(e,t){if(t.workbook&&t.worksheets){for(var n=function(e){if(!e)return null;var t=le(e).getElementsByTagName("c");if(0!==t.length){for(var n=[],r=0;r<t.length;r++)n.push({cell:t[r].getAttribute("r"),sheetIndex:t[r].getAttribute("i")||1});return 0===n.length?null:_()(n,"sheetIndex")}}(t.calcChain),r=le(t.workbook).getElementsByTagName("sheet"),a={},i={},c={},l=1,u=0;u<r.length;u++){var s=parseInt(r[u].getAttribute("r:id").replace("rId","")),d=r[u].getAttribute("sheetId"),f=r[u].getAttribute("state");a[d]=s,"hidden"!==f&&(i[l]=s,c[d]=l,l+=1)}if(e.calcChain=[],n)for(var p in n){var m=a[p],h="sheet".concat(m);if(t.worksheets[h])for(var v=le(t.worksheets[h]).getElementsByTagName("f"),y={},b=0;b<v.length;b++){var g=v[b],E=g.parentNode.getAttribute("r"),w=g.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "),O=g.getAttribute("t"),k=g.getAttribute("ref"),S=g.getAttribute("si");"shared"===O&&(k?y[S]={baseCell:E,formula:w}:w=ce(y[S],E));var N=E.match(/\d+/),x=E.match(/[A-Z]+/);N&&(N=parseInt(N[0])-1),x&&(x=oe(x[0]));var A=c[p]-1;if(e.sheet[A])if(e.sheet[A].data[N]=e.sheet[A].data[N]||{},e.sheet[A].data[N][x]=e.sheet[A].data[N][x]||{},"string"==typeof w&&0===w.toLowerCase().indexOf("hyperlink(")){var P=w.substring(10,w.length-1).split(","),C=Z(P[0]),j=P.length>1?Z(P[1]):C;console.log(C,j),e.sheet[A].data[N][x].value={class:"link",url:C,text:j}}else e.sheet[A].data[N][x].value={class:"formula",formula:w,value:e.sheet[A].data[N][x].value||""},e.calcChain.push({row:N,col:x,sheet:A})}}e.sheet.forEach((function(e,n){if(e.cellsNeedFix){var r=i[n+1],a="sheet".concat(r),c=le(t.worksheets[a]);e.cellsNeedFix.forEach((function(t){var n=t.row,r=t.col,a=ie({row:{index:n},col:{index:r}}),i=c.querySelector("c[r=".concat(a,"]"));if(i){var l="s"===i.getAttribute("t"),u=i.querySelector("v");if(u&&u.innerHTML&&!l){var s=e.data[n]&&e.data[n][r]&&e.data[n][r].value,d=e.data[n]&&e.data[n][r]&&e.data[n][r].type,f=u.innerHTML;if(d&&!isNaN(1*f)){var p=1*f,m=p>=367?343:p<61?86400:0;"date"===d.name||"datetime"===d.name||"time"===d.name?f=86400*f+m:["percentage","number","currency"].includes(d.name)&&(f*=1)}s&&"formula"===s.class?s.value=f:"object"!==o()(s)&&(e.data[n]=e.data[n]||{},e.data[n][r]=e.data[n][r]||{},e.data[n][r].value=f)}}})),delete e.cellsNeedFix}}))}}(n,d)}return n.sheet=s.a.deflate(JSON.stringify(n.sheet),{to:"string"}),n}},4623:function(e,t,n){var r=n(596);e.exports=function(e){return"number"==typeof e&&e==r(e)}},4630:function(e,t,n){"use strict";n(48);var r=n(11),o=n(60),a=n.n(o),i=n(473),c=n(4464),l=n(1342),u=n(4352),s=n(181),d=n(4010),f=n(244),p=n(47),m=n(4041),h=n(193),v=n(152),y=n.n(v),b=n(4456),g=n(133),_=n(4344),E={adaptDocPreviewImageToFormData:function(e){for(var t=new FormData,n=e.replace(/^data:image\/\w+;base64,/,""),r=window.atob(n),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);var i=new Blob([o],{type:"image/png"});return t.append("file",i,"image.png"),t}};Object.assign(E,_.a);var w=E;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function k(){k=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var S=g.prototype=y.prototype=Object.create(_);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==O(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(O(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function S(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function A(e,t,n){return t=C(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var T=a()("editor:doc.biz"),I=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A(this,t,[e,r])).dispatch=o,n.storage=g.a,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),n=t,r=[{key:"doSaveOutdatedDocVersion",value:(a=k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.docVersions.create(t);case 2:case"end":return e.stop()}}),e)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){S(o,n,r,i,c,"next",e)}function c(e){S(o,n,r,i,c,"throw",e)}i(void 0)}))},function(e){return i.apply(this,arguments)})}],o=[{key:"uploadCover",value:function(e){var t=e.image,n=e.doc_id,r=window.navigator.userAgent,o=y.a.detect(r);if(o.msie||o.msedge)return Promise.resolve(null);var a="/api/upload/attach?attachable_type=Doc&attachable_id=".concat(n,"&type=image"),i=w.adaptDocPreviewImageToFormData(t);return new Promise((function(e,t){Object(h.ajax)({url:a,data:i,dataType:"json",success:function(t){T("upload cover success",t.data),e(t.data.url)},error:function(){T("upload cover error"),t(new Error("DocEditorBiz.uploadCover failed."))},method:"POST",processData:!1})}))}}],r&&N(n.prototype,r),o&&N(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,a,i}(b.a),M=I;function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.appData.callbackURL;if(n){if("SAME"===n)return;e=n}e&&(t.beforeRedirect&&t.beforeRedirect(),window.location.href=e)}var R=n(4218),D=n(4616),U=n.n(D),B=n(258),z=n.n(B),F=n(85),V=n(260),G=n.n(V),Y=n(391),$=n.n(Y);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}function K(e,t,n){return t=Q(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,n||[],Q(e).constructor):t.apply(e,n))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var J=15728640;function ee(e){var t=JSON.stringify(e);return function(e){return(new TextEncoder).encode(e).length>J}(t=function(e){return e.replace(/"url":"data:image\/(jpeg|png|svg|\*);base64[^"]+"/g,'"url":""')}(t))?{error:"DataLimitError"}:{data:JSON.parse(t)}}var te=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=K(this,t)).doc=e,r.clientId=n?n.clientId:$()(),n&&n instanceof t&&(r.parent=n),r.subCollabDoc={},r._init(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),n=t,(r=[{key:"data",get:function(){return this.collabId?this.doc.data[this.collabId]:this.doc.data}},{key:"commands",get:function(){var e,t;return this.collabId?null===(t=this.doc.data[this.collabId])||void 0===t?void 0:t.commands:null===(e=this.doc.data)||void 0===e?void 0:e.commands}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"_init",value:function(){var e=this;this.doc.on("op",(function(t,n){if(e.clientId!==n&&0!==(t=e._pickOps(t)).length){var r=t.filter((function(e){return"commands"===e.p[0]&&e.li})),o=t.filter((function(e){return"commands"!==e.p[0]}));r.length>0&&e.emit("command",r.map((function(e){return e.li}))),o.length>0&&e.emit("op",o)}}))}},{key:"_setCollabId",value:function(e){this.parent&&(this.collabId=e)}},{key:"createSub",value:function(e){if(this.parent)throw new Error("只支持1级子协同");if(void 0===e)throw new Error("需要传递 collabId");this.subCollabDoc[e]&&this._collabIdExistError();var n=new t(this.doc,this);return n._setCollabId(e),this.subCollabDoc[e]=n,n}},{key:"submitOp",value:function(e){this.parent&&(e=this._transformToParentOp(e));try{var t=ee(e);if(t.data&&!t.error)e=t.data;else if("DataLimitError"===t.error)return void this.emit("DataLimitError")}catch(e){}this.doc.submitOp(e,{source:this.clientId})}},{key:"submitCommand",value:function(e){if(this.data||this.create({}),this.data&&this.data.commands){var t=this.data.commands.length;this.submitOp([{p:["commands",t],li:e}])}else this.submitOp([{p:["commands"],oi:[e]}])}},{key:"deleteCommand",value:function(e){this.data&&this.data.commands&&this.data.commands[e]&&this.submitOp([{p:["commands",e],li:{},ld:{}}])}},{key:"updateCommand",value:function(e,t){this.data&&this.data.commands&&this.data.commands[e]&&this.submitOp([{p:["commands",e],li:t,ld:{}}])}},{key:"create",value:function(e){try{var t=ee(e);if(t.data&&!t.error)e=t.data;else if("DataLimitError"===t.error)return void this.emit("DataLimitError")}catch(e){}if(this.parent)return this._requireCollabId(),void this.doc.submitOp([{p:[this.collabId],oi:e}],{source:this.clientId});this.doc.create(e,"json0",{source:this.clientId})}},{key:"_pickOps",value:function(e){var t=this;return this.collabId?e.filter((function(e){return e.p[0]===t.collabId})).map((function(e){var t=G()(e);return t.p=t.p.slice(1),t})):e.filter((function(e){return!t.subCollabDoc[e.p[0]]})).map((function(e){return G()(e)}))}},{key:"_transformToParentOp",value:function(e){var t=this;return this._requireCollabId(),e.forEach((function(e){e.p=[t.collabId].concat(e.p)})),e}},{key:"_requireCollabId",value:function(){if(!this.collabId)throw new Error("缺少 collabId")}},{key:"_collabIdExistError",value:function(){throw new Error("collabId 已存在")}}])&&W(n.prototype,r),o&&W(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(z.a),ne=n(4283);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,de(r.key),r)}}function ie(e,t,n){return t=le(t),function(e,t){if(t&&("object"==re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,n||[],le(e).constructor):t.apply(e,n))}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function se(e,t,n){return(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}var fe=a()("editor:doc:collabManager"),pe=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],me=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(o=ie(this,t),"onMessage",(function(e){var t=JSON.parse(e.data);if(o._limitFetchRequest(t),t.action&&fe("message, action: ",t.action,t.data),"members"===t.action)return o.engine.setCollabMembers(t.data),o.addMembers(t.data),void o.reportCollabUserCount(t.data.length);if("join"===t.action)return o.engine.addCollabMember(t.data),void o.addMembers([t.data]);if("leave"===t.action)return o.engine.removeCollabMember(t.data),void o.removeMember(t.data);if("ready"===t.action){if(o.engine.setCurrentMember(t.data),o.currentMember=t.data,o.checkCollabLimit())return;o.loadCollabDoc()}"broadcast"===t.action&&(t.data.body.user.uuid!==o.currentMember.uuid&&o.emit(m.i.message,t.data));"reload"===t.action&&window.location.reload()})),o.doc=e,o.dispatch=n,o.ctx=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),o.initialContent=r.initialContent,o.socket=null,o.engine=r.engine,o.userClients=[],o.currentMember=null,o.MAX_FETCH_COUNT=100,o.fetchCount=0,o.startFetchTime=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),n=t,r=[{key:"reset",value:function(){this.userClients=[],this.currentMember=null,this.disconnect()}},{key:"resetDoc",value:function(e){this.doc=e,e.collab&&(this.ctx.collab=e.collab)}},{key:"connect",value:function(){var e=this;this.reset();var t=this.ctx.collab;if(t){var n="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);fe("connect",n);var r=new ne.a(n);r.on("ready",(function(t){t&&(e.socket=t,t.addEventListener("message",e.onMessage),e.connectTime=+new Date)})),r.on("close",(function(t){fe("collab server connection close",{event:t});var n=!!e.socket;e.disconnect(),!n||e.justConnect()?e.emit(m.i.error,{code:m.d.CONNECT_COLLAB_SERVER_FAILED,message:t.message,stack:t.stack}):e.emit(m.i.error,{code:m.d.DISCONNECTED,message:t.message,stack:t.stack})})),r.on("error",(function(e){throw fe("collab server connection close",{event:e}),e})),r.on("congestion",(function(){e.transmitNetStatus(m.g.congestion)})),r.on("congestionEnd",(function(){e.transmitNetStatus(m.g.online)})),this.connection=r}}},{key:"justConnect",value:function(){return this.connectTime&&+new Date-this.connectTime<2e4}},{key:"reportCollabUserCount",value:function(e){var t=this.doc.format;F.a.logCollabUserCount(t,e)}},{key:"_limitFetchRequest",value:function(e){if("f"===e.a)if(this.fetchCount+=1,this.startFetchTime){var t=+new Date;this.fetchCount>this.MAX_FETCH_COUNT&&1e3*this.fetchCount/(t-this.startFetchTime)>this.MAX_FETCH_COUNT&&(this.disconnect(),this.transmitNetStatus(m.g.congestion))}else this.startFetchTime=+new Date;else this.fetchCount=0,this.startFetchTime=null}},{key:"checkCollabLimit",value:function(){var e=this.currentMember,t=this.userClients.length;return t>60?(this.disconnect(),this.emit(m.i.error,{code:m.d.COLLAB_MEMBERS_LIMIT_ERROR}),!0):this.userClients.filter((function(t){return t.login===e.login})).length>1&&t>40&&(this.disconnect(),this.emit(m.i.error,{code:m.d.COLLAB_MULTIPAGE_LIMIT_ERROR}),!0)}},{key:"loadCollabDoc",value:function(){var e=this,t=this.ctx.collab;fe("start load collab doc",t.id);var n=new U.a.Connection(this.socket);n.on("receive",(function(e){fe("receive",e.data)}));var r=n.get("lake",t.id);r.subscribe((function(t){if(t)fe("collab doc subscribe error",t);else{try{fe("ot doc loaded",r),e.initOt(r)}catch(t){e.emit(m.i.error,{code:m.d.COLLAB_DATA_INIT_ERROR,error:t,message:t.message})}e.connection&&(e.connection.startHeartBeat(),e.emit("ready"),e.emit(m.i.collabUsersChange,e.normalizeMembers()))}})),r.on("create",(function(){fe("collab doc create",r)})),r.on("load",(function(){})),r.on("op",(function(e,t){})),r.on("del",(function(e,t){fe("collab doc deleted",e,t)})),r.on("error",(function(t){var n;null!==(n=t.message)&&void 0!==n&&n.includes("out of range")&&(e.disconnect(),e.emit(m.i.error,{code:m.d.COLLAB_DATA_LIMIT,error:t,message:t.message})),"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT"!==t.code&&"ERR_DOC_DOES_NOT_EXIST"!==t.code||(e.disconnect(),e.emit(m.i.error,{code:m.d.COLLAB_DATA_ERROR,error:t,message:t.message})),fe("collab doc error",{error:t,origin_code:t.code})}))}},{key:"initOt",value:function(e){var t=this;fe("init ot");var n=new te(e);n.on("DataLimitError",(function(){t.emit(m.i.error,{code:m.d.COLLAB_DATA_LIMIT,message:__("协同文档大小超过限制，请删除部分内容后重试")}),t.disconnect()})),this.engine.initCollabDoc(n)}},{key:"disconnect",value:function(){try{this.socket&&(this.socket.removeEventListener("message",this.onMessage),this.socket=null),this.connection&&(this.connection.disconnect(),this.connection=null)}catch(e){}}},{key:"isAlive",value:function(){return!!this.connection}},{key:"isOnlyOneCollabSession",value:function(){return 1===this.userClients.length}},{key:"needRedirectToLock",value:function(){return!this.socket||!(!this.connection||"congestion"!==this.connection.netStatus||!this.isOnlyOneCollabSession())}},{key:"onDocDeleted",value:function(){fe("doc deleted"),this.connection&&this.connection.broadcast(m.f.DOC_DELETED,{user:this.currentMember})}},{key:"onDocPublished",value:function(){fe("doc deleted"),this.connection&&this.connection.broadcast(m.f.DOC_PUBLISHED,{user:this.currentMember})}},{key:"addMembers",value:function(e){this.userClients=this.userClients.concat(e),this.emit(m.i.collabUsersChange,this.normalizeMembers())}},{key:"removeMember",value:function(e){this.userClients=this.userClients.filter((function(t){return t.uuid!==e.uuid})),this.emit(m.i.collabUsersChange,this.normalizeMembers())}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%pe.length;e.color=pe[t]}},{key:"normalizeMembers",value:function(){for(var e=[],t={},n=this.userClients.length;n>0;n--){var r=this.userClients[n-1];r.color||(r.color=this.setMemberColor(r)),t[r.login]||(t[r.login]=r,r.login!==this.ctx.me.login&&e.push(r))}return e}},{key:"transmitNetStatus",value:function(e){this.emit(m.i.netStatusChange,e)}},{key:"destroy",value:function(){this.disconnect(),this.removeAllListeners()}}],r&&ae(n.prototype,r),o&&ae(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(z.a),he=me;function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(){ge=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ve(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ve(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){we(a,r,o,i,c,"next",e)}function c(e){we(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function Se(e,t,n){return t=xe(t),function(e,t){if(t&&("object"==ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ne()?Reflect.construct(t,n||[],xe(e).constructor):t.apply(e,n))}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Pe(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){var t=function(e,t){if("object"!=ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ve(t)?t:t+""}var je=a()("editor:doc:wf"),Te=function(e){function t(e){var n,o=e.group,a=e.book,i=e.doc,c=e.docDomain,d=e.dispatch,f=e.params,h=e.mode,v=e.scene,y=e.onPublishSuccessRedirect,b=void 0===y?function(e){return setTimeout((function(){return L(e)}),1e3)}:y,g=e.disableAutoSave,_=e.me,E=void 0===_?window.appData.me:_,w=e.pageStatus;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(n=Se(this,t,[{doc:i,mode:h,scene:v}]),"doBindEvents",(function(){n.pageStatus.on(u.a.CLOSE,n.onPageLeave.bind(n)),n.pageStatus.on(u.a.INACTIVE,(function(){n._saveByInactive=!0;try{n.onPageInactive()}catch(e){}n._saveByInactive=!1})),n.pageStatus.on(u.a.ACTIVE,n.onPageActive.bind(n)),n.pageStatus.on(u.a.ONLINE,n.onPageOnline.bind(n)),n.pageStatus.on(u.a.OFFLINE,n.onPageOffline.bind(n)),n.pageStatus.registerCloseChecker(n.closeAble.bind(n)),n.pageStatus.on(u.a.LONG_TIME_NO_REFRESH,(function(){window.location.reload()})),n.pageStatus.on(u.a.INACTIVE,(function(){n.performance.pause()})),n.pageStatus.on(u.a.ACTIVE,(function(){n.performance.resume()})),n.pageStatus.on(u.a.CLOSE,(function(){n.performance.reportSmooth(),n.userAction.report()}))})),Pe(n,"_fetchMentionDocsHandler",(function(e,t){return e.map((function(e){return e.group=t?n.group.name:e.group_name,e.book=t?n.book.name:e.belong,e}))})),Pe(n,"getDefaultSuggestions",Oe(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([null!==(t=n.book.abilities)&&void 0!==t&&t.read?p.a.books.docs({id:n.book.id,order_by:"published_at"}):[],p.a.users.listDocContextUsers({id:n.doc.id})]).then((function(e){var t=_e(e,2),r=t[0],o=t[1];return{docs:n._fetchMentionDocsHandler(r,!0),users:o}})));case 1:case"end":return e.stop()}}),e)})))),Pe(n,"onMentionSearch",function(){var e=Oe(ge().mark((function e(t,r){var o,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",n.getDefaultSuggestions());case 2:return o=function(){var e=Oe(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,p.a.books.docs({id:n.book.id,order_by:"published_at"}).then((function(e){return n._fetchMentionDocsHandler(e,!0)}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,p.a.editor.search({q:t,type:"content",related:!0,range:"title"}).then((function(e){return n._fetchMentionDocsHandler(e||[])}));case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Oe(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.users.complete({q:t,target_type:n.docDomain,target_id:n.doc.id}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all([o(),a()]).then((function(e){return{docs:e[0],users:e[1]}})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Pe(n,"doIgnoreSave",(function(e){return!(e!==m.h.AUTO||!n.disableAutoSave)||!!(e===m.h.AUTO&&n._saveByInactive&&n._lastSaveTime&&new Date-n._lastSaveTime<6e4)})),Pe(n,"doSaveDoc",function(){var e=Oe(ge().mark((function e(t){var r,o,a,i,c,u,d,f,p,h,v;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.doc,o=r.id,a=r.format,i={fullHTML:n.openEditorConfig.fullHTML},"Table"===r.type&&t===m.h.USER_PUBLISH&&(i.fullBody=!0),c=n.engine.getEditorContent(i),u=c.content,d=c.html,je("doSaveDoc",n.currentMode),f={save_type:t===m.h.AUTO?"auto":"user",edit_type:"collab"===n.currentMode?l.EDIT_TYPE.LAKE_COLLAB:l.EDIT_TYPE.LAKE},n.autoPublish&&(f.target_uuid=new URLSearchParams(window.location.search).get("toc_node_uuid")),"Doc"===r.type&&"html"===a&&(a="lake"),p={id:o,format:l.FORMAT_REPAIR_MAP[a]||a,body_asl:u,draft_version:r.draft_version,sync_dynamic_data:!1,created_by:r.created_by},"Show"===r.type&&(p.cover=(null==t||null===(h=t.shows)||void 0===h||null===(h=h[0])||void 0===h?void 0:h.thumb)||null),n.docDomain===s.DOCLET?p.body=d:p.body_html=d,p.draft_version||(p._without_draft_version=1),je("doc save lake doc: ",p),e.next=17,n.modelProxy.updateContent(n.docDomain===s.DOCLET?p:be(be({},p),f),{ignoreGlobalMessage:!0});case 17:return v=e.sent,e.abrupt("return",v);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Pe(n,"doPublishDoc",function(){var e=Oe(ge().mark((function e(t,r){var o,a,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.autoPublish||!r){e.next=2;break}return e.abrupt("return");case 2:return t=t||{notify:!1},o={id:n.doc.id,force:!1,notify:!0===t.notify,cover:null,ignoreGlobalMessage:!0},window.h5&&(o.insertToCatalog=!0),e.next=7,n.getDocCover();case 7:return(a=e.sent)&&(o.cover=a),i=n.docDomain===s.DOCLET?{id:n.doc.id}:o,e.next=12,n.modelProxy.publish(i,{ignoreGlobalMessage:!0});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Pe(n,"getOpenEditorConfig",(function(){return n.openEditorConfig})),Pe(n,"useTemplate",(function(e){var t,o=e.title,a=e.content;n.engine.setContent(a),n.transmitDocStatus(m.a.changed);var i=(null==o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||n.doc.title;n.isDefaultTitle(i)||p.a.docs.updateMeta({id:n.doc.id,title:i}).then((function(){n.dispatch({type:"doc/update",payload:{title:i}})})).catch((function(e){r.a.warn("save title failed")})),n.doc.title=i})),n.group=o,n.book=a,n.params=f||{},n.dispatch=d,n.me=E,n.docDomain=c||s.DOC,n.modelProxy=c===s.DOCLET?p.a.doclets:p.a.docs,n.onPublishSuccessRedirect=b,n.disableAutoSave=g,n.openEditorConfig=new R.a,n.pageStatus=w||new u.b,n._saveByInactive=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(t,e),n=t,o=[{key:"autoPublish",get:function(){return this.book&&this.book.enable_auto_publish&&this.docDomain!==s.DOCLET}},{key:"onStarted",value:function(){this.startAutoSave(),this.performance.startHeartbeat(),this.emit(m.i.netStatusChange,this.netStatus)}},{key:"unBindEvents",value:function(){this.pageStatus.destroy(),this.clearAutoSave()}},{key:"onDestroy",value:function(){r.a.destroy()}},{key:"onSaveSuccess",value:function(){if(this.startAutoSave(),this.autoPublish)try{this.saveEditorMeta({isDraft:!1})}catch(e){je("saveEditorMeta error",e)}this.performance.reportSmooth()}},{key:"clearAutoSave",value:function(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer)}},{key:"startAutoSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;if(this.disableAutoSave)return!1;this.clearAutoSave(),this.autoSaveTimer=setTimeout((function(){e._inStopWatch("autosaveConflict")?e.startAutoSave(10):(e.save(m.h.AUTO),e.startAutoSave())}),1e3*t)}},{key:"onLockError",value:function(e){return e.code===m.d.LOCKED_BY_COLLAB&&this.defaultMode===m.b.COLLAB&&this.collabConnected&&(e.code=m.d.LOCKED_BY_COLLAB_DISCONNECT),!1}},{key:"createEditorBiz",value:function(e){return new M(e,{docDomain:this.docDomain},this.dispatch)}},{key:"onDocUpdated",value:function(e){var t=this;if(!this.destroying){var n={};!e.contributors||this.doc.contributors&&this.doc.contributors.length===e.contributors.length||(n.contributors=e.contributors),n.content_updated_at=e.content_updated_at,e.description&&(n.description=e.description),Object(i.c)((function(){t.dispatch({type:"doc/update",payload:be({},n)}),t.dispatch({type:"book/updateDoc",payload:be({id:e.id},n)})})),this.collab=e.collab}}},{key:"needCache",value:function(){var e;return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)&&"laketable"!==(null===(e=this.doc)||void 0===e?void 0:e.format)}},{key:"needLoad",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"doLoadDoc",value:(g=Oe(ge().mark((function e(){var t,n,r,o,a,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.doc,o=this.docDomain===s.DOCLET?{id:r.id,category:s.CATEGORY.BOOK_INDEX_PAGE,target_type:"Book",target_id:r.target_id}:{id:r.slug,book_id:r.book_id,mode:"edit",merge_dynamic_data:!1},Object(f.b)("start-loadDoc"),e.next=5,this.modelProxy.findOne(o,{ignoreGlobalMessage:!0,useOriginResp:!0});case 5:return a=e.sent,(i=be({},a.data)).readerEditModeData=a.meta,Object(f.b)("finish-loadDoc"),Object(f.b)("doc-size",(null==i||null===(t=i.body_draft_asl)||void 0===t?void 0:t.length)||(null==i||null===(n=i.body_draft)||void 0===n?void 0:n.length)||0),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"onDocRendered",value:function(){Object(f.b)("finish-doc-render")}},{key:"doCreateCollabManager",value:function(){return new he(this.doc,this.dispatch,{book:this.book,group:this.group,engine:this.engine,me:this.me,collab:this.collab,initialContent:this.initialDocument.value})}},{key:"getDocCover",value:(b=Oe(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.getThumbnail();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:if(!(t=e.t0).startsWith("https:")){e.next=8;break}return e.abrupt("return",t);case 8:if(!t){e.next=18;break}return e.prev=9,e.next=12,M.uploadCover({image:t,doc_id:this.doc.id});case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t1=e.catch(9),je("upload cover error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return b.apply(this,arguments)})},{key:"isActive",value:function(){return this.pageStatus.isActive}},{key:"onPublishSuccess",value:(y=Oe(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain!==s.DOCLET)try{this.saveEditorMeta({isDraft:!1})}catch(e){je("saveEditorMeta error",e)}this.currentMode===m.b.COLLAB&&this.collabManager&&this.collabManager.onDocPublished(),d.c.saveEditPosition(this.doc.id,this.doc.format),this.performance.reportSmooth(),this.userAction.report(),window.__readerEditMode||this.destroying||this.onPublishSuccessRedirect(this.buildRedirectToUrlForPublish());case 6:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"doLock",value:(v=Oe(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.lock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"doUnlock",value:(h=Oe(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.unlock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"buildRedirectToUrlForPublish",value:function(){var e=this.book,t=this.doc,n=this.params,r=this.docDomain;return"lakesheet"===t.format&&r===s.DOC?"/".concat(e.namespace,"/").concat(t.slug).concat(window.location.hash):r===s.DOCLET?t.category===s.CATEGORY.TEMPLATE?window.location.href.replace(/\/[^\/]+?$/,""):"/".concat(window.appData.group.login,"/").concat(window.appData.book.slug):n.group&&n.book?"/".concat(n.group,"/").concat(n.book,"/").concat(t.slug):"/go/doc/".concat(t.id)}},{key:"doSaveEditorMeta",value:(c=Oe(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain!==s.DOCLET){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,0!==Object.keys(JSON.parse(t.meta_draft||{})).length||0!==Object.keys(JSON.parse(t.meta||{})).length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p.a.docs.updateEditorMeta(t);case 7:if(!this.destroying){e.next=9;break}return e.abrupt("return");case 9:this.dispatch({type:"doc/updateEditorMetas",payload:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(e){return c.apply(this,arguments)})},{key:"isDefaultTitle",value:function(e){return M.isDefaultTitle(e)}},{key:"onDocDeleted",value:function(){var e=this.group,t=this.book;this.currentMode===m.b.COLLAB&&this.collabManager.onDocDeleted(),setTimeout((function(){L("/".concat(e.login,"/").concat(t.slug))}),300)}}],o&&ke(n.prototype,o),a&&ke(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a,c,h,v,y,b,g}(c.a);Te.WORKFLOW_EVENT=m.i,Te.DOC_STATUS=m.a,Te.SAVE_TYPE=m.h,Te.EDIT_MODE=m.b,Te.EDIT_SCENE=m.c;t.a=Te},4632:function(e,t,n){"use strict";n(48);var r=n(11),o=(n(3523),n(4309)),a=(n(40),n(9)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(1851),d=n(1853),f=n(1861),p=n(5),m=n.n(p),h=n(35),v=n(493),y=n(34),b="StatusView-module_wrap_8c-mq",g="StatusView-module_tip_DFrDV",_="StatusView-module_error_cvob-",E="StatusView-module_title_8Zp5n",w="StatusView-module_content_80A7-",O="StatusView-module_contentIcon_vp-6I",k="StatusView-module_action_FlBG8",S="StatusView-module_mask_CFGUv",N="StatusView-module_mask_mobile_vHbQp";function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t,n,l,u=e.book,p=e.doc,x=e.error,P=e.docStatus,C=e.onReload,j=e.wfMessage,T=e.onClear,I=Object(h.useHistory)(),M=Object(h.useParams)().doc,L=function(){window.__forceFetchRemoteDocOnce__=!0,I.push("/".concat(u.namespace))},R=c.a.createElement(a.a,{type:"primary",onClick:L,"data-testid":"StatusView:refresh"},__("重新加载")),D=c.a.createElement(a.a,{onClick:T,"data-testid":"StatusView:clearError"},__("关闭提示")),U=y.c?c.a.createElement(a.a,{type:"primary",onClick:L,"data-testid":"StatusView:reload"},__("重新加载")):c.a.createElement(a.a,{type:"primary",onClick:C,"data-testid":"StatusView:reload"},__("重新加载")),B=c.a.createElement(a.a,{href:u?"/".concat(u.namespace,"/").concat(p.slug):"/dashboard"},__("退出编辑")),z=function(e,t){o.a.destroy(),o.a.open({message:c.a.createElement("div",{"data-testid":"editor:StatusView:showMessage:".concat(e)},t)})},F={Unauthorized:__("登录过期，请刷新页面重新登录"),"Failed to fetch":__("请求异常"),"Not Found":__("当前文档不存在或已被删除"),"request entity too large":__("文档内容太大，无法保存"),"502 Bad Gateway":__("服务器繁忙，请稍后再试"),"<h3>404</h3>":__("当前文档已被删除或移走"),"无权限访问":__("当前文档缺少权限或权限被移除"),"服务中断":__("服务器繁忙，请稍后再试"),"<h1>50":__("服务器繁忙，请稍后再试"),"<!DOCTYPE html>":__("请求异常")},V=A(A(A({},v.ERROR_CODE.COLLAB_DATA_LIMIT,__("因文档数据超限，无法进行多人协同，当前页已切换成单人编辑模式")),v.ERROR_CODE.CONNECT_COLLAB_SERVER_FAILED,__("因网络无法连接协同服务器，当前页已切换成单人编辑模式")),v.ERROR_CODE.DISCONNECTED,__("因网络断开协同服务器，当前页已切换成单人编辑模式")),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;for(var n in F)if(e&&e.includes(n))return F[n];var r=function(e){if(e&&e.error&&"starpoint"===e.error.__intercept_source&&e.error.approve_link)return c.a.createElement("span",null,__("当前操作存在数据外发行为，包括内容编辑、文件上传，该行为已被阻止。如有工作需要，请点击"),c.a.createElement("a",{href:"https://asop-s.alipay.com/asop/mySafe/myReport/dataOutput/add",target:"_blank"},__("数据输出合规审批")),__("进行报备，审批通过后再次尝试使用。如有疑问请钉钉联系@蚂蚁数安超人"))}(t);return r||e},Y=c.a.createElement("div",{className:_,"data-testid":"StatusView:network-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档加载失败")),c.a.createElement("p",{className:w},__("网络异常，请检查网络连接是否正常")),c.a.createElement("p",{className:k},D,U)),$=function(e){return e&&V[e]?c.a.createElement("p",{className:w},V[e]):null},q=c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-desktop-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("你正在使用语雀桌面端编辑此文档")),c.a.createElement("p",{className:w},__("语雀当前不支持使用桌面端和浏览器同时编辑")),c.a.createElement("p",{className:k},B)),W=c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-versionConflict-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档内容有更新")),c.a.createElement("p",{className:w},__("请基于最新内容重新编辑")),c.a.createElement("p",{className:k},U)),H=c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-sync-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档正在同步中")),c.a.createElement("p",{className:w},__("请稍等一会再重新加载")),c.a.createElement("p",{className:k},D,R)),K=function(e){var t=e.type;z(t,__("正在保存，请稍候"))};if(j&&!j.readed){switch(j.type){case v.MESSAGE.DOC_PUBLISHED:n=(t=j).body,l=t.type,z(l,__("{user} 刚刚 {action} 了文档",{user:n.user.name,action:p.published_at?__("更新"):__("发布")}));break;case v.MESSAGE.DOC_CACHE_SAVED:!function(e){var t=e.type;z(t,__("已为你加载最新编辑版本，上次离线缓存内容已保存到历史版本备份"))}(j);break;case v.MESSAGE.SAVING:K(j);break;case v.MESSAGE.SAVED:!function(e){var t=e.type;z(t,__("文档已保存"))}(j);break;case v.MESSAGE.SAVE_FAILED:!function(e){z(e.type,c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,__("网络异常，保存失败")),c.a.createElement("p",null,__("编辑内容无法保存到服务器，"),e.cached?__("已尝试保存到离线缓存"):__("当前离线缓存存在异常，请勿关闭页面，以防内容丢失"))))}(j);break;case v.MESSAGE.DISCONNECT:!function(e){z(e.type,__("网络连接异常，无法实时协同编辑"))}(j);break;case v.MESSAGE.UNREADY:!function(e){z(e.type,__("文档正在加载中，请稍候编辑"))}(j);break;case v.MESSAGE.EDIT_DISABLE:!function(e){e.mode===v.EDIT_MODE.LOCK?z(e.type,__("当前编辑冲突，可能出现数据保存异常，请稍等一会再操作")):z(e.type,__("正在连接服务，请稍等一会再操作，如果不行，请检查网络，浏览器插件，或重启浏览器。"))}(j);break;case v.MESSAGE.CACHE_FAILED:!function(e){z(e.type,__("本地缓存失败，请确保手动保存成功才关闭页面"))}(j);break;case v.MESSAGE.RENDER_BIG_DOCUMENT:!function(e){z(e.type,__("文档较大，正在努力渲染，请稍等一下"))}(j);break;case v.MESSAGE.LARGE_NUMBER_OF_BLANK_COLUMNS:!function(e){z(e.type,__("表格中含有大量空白列，请及时删除，避免影响协同与编辑性能"))}(j);break;case v.MESSAGE.BUZY:j.docStatus===v.DOC_STATUS.saving?K(j):j.docStatus===v.DOC_STATUS.publishing&&function(e){var t=e.type;z(t,__("正在发布，请稍候"))}(j);break;case v.MESSAGE.CLEAR:o.a.destroy()}j.readed=!0}Object(i.useEffect)((function(){var e=function(){};return P===v.DOC_STATUS.loading?y.c||(e=r.a.loading(c.a.createElement("span",{"data-testid":"StatusView:loading"},__("正在加载")),0)):P===v.DOC_STATUS.published&&(e=r.a.success(c.a.createElement("span",{"data-testid":"StatusView:loading"},__("内容发布成功")),3)),function(){e()}}),[P]),Object(i.useEffect)((function(){r.a.destroy()}),[M]);var Z,Q,X,J,ee=!1,te="";if(x&&!x.readed)switch(x.code){case v.ERROR_CODE.INIT_FAILED:te="network"===x.type?Y:c.a.createElement("div",{className:_,"data-testid":"StatusView:load-doc-fail-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档加载失败")),404===x.status?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:w,"data-testid":"StatusView:doc-not-found"},__("文档已被删除或无访问权限")),c.a.createElement("p",{className:k},D,B)):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:w,"data-testid":"StatusView:doc-load-error"},__("你可以尝试重新加载，或者退出编辑")),c.a.createElement("p",{className:k},B,404!==x.status&&U))),ee=!0;break;case v.ERROR_CODE.SAVE_FAILED:J=x,te=c.a.createElement("div",{className:_,"data-testid":"StatusView:save-failed-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档保存失败")),c.a.createElement("p",{className:w},G(J.message,J)),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.PUBLISH_FAILED:te=function(e){return c.a.createElement("div",{className:_,"data-testid":"StatusView:publish-failed-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档发布失败")),c.a.createElement("p",{className:w},G(e.message,e)),c.a.createElement("p",{className:k},D))}(x),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_COLLAB:Q=x.lock.collab_members,X=x.reason,te=c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-collab-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("{user} 正在与其他人编辑该文档",{user:Q[0].name})),$(X),c.a.createElement("p",{className:w},window.h5?__("手机端不支持实时协同编辑，请待其他人编辑完后重试"):__("当前网络无法进入协同编辑，请检查网络后刷新重试")),c.a.createElement("p",{className:k},U,window.h5&&B)),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_COLLAB_DISCONNECT:te=function(e,t){return c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-collab-disconnect-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("{user} 正在与其他人编辑该文档",{user:e[0].name})),$(t),c.a.createElement("p",{className:w},__("当前网络已断开实时同步，请检查网络后刷新页面，重新加入协同")))}(x.lock.collab_members,x.reason),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_SELF_COLLAB:te=function(e){return c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-self-collab-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("你正在其它窗口编辑该文档")),$(e),c.a.createElement("p",{className:w},__("请重新加载最新的编辑内容")),c.a.createElement("p",{className:k},U))}(x.reason),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_OTHER:te=function(e,t){return c.a.createElement("div",{className:_,"data-testid":"StatusView:locked-by-other-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("{user} 正在编辑该文档",{user:e.name})),$(t),c.a.createElement("p",{className:w},__("请等待对方完成编辑后，再进行编辑")),c.a.createElement("p",{className:k},y.c&&D,B))}(x.lock.locker,x.reason),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_DESKTOP:te=q,ee=!0;break;case v.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT:te=W,ee=!0;break;case v.ERROR_CODE.LOCK_FAILED:Z=x.message,te=c.a.createElement("div",{className:_,"data-testid":"StatusView:lock-failed-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("无法获得单人编辑权限")),c.a.createElement("p",{className:w},G(Z)),c.a.createElement("p",{className:w},__("为避免编辑出错，请检查后重试")),c.a.createElement("p",{className:k},D,U)),ee=!0;break;case v.ERROR_CODE.LOCKED_BY_SYNC:te=H,ee=!0;break;case v.ERROR_CODE.DOC_DELETED:te=function(e){return c.a.createElement("div",{className:_,"data-testid":"StatusView:doc-deleted-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("当前文档已被 {user} 删除",{user:e.body.user.name})),c.a.createElement("p",{className:w},__("你可以通过知识库的 回收站 找到此篇文档")),c.a.createElement("p",{className:k},D))}(x.data),ee=!0;break;case v.ERROR_CODE.DOC_NOT_EXIST:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:publish-failed-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档保存失败")),c.a.createElement("p",{className:w},__("文档不存在或者已经被删除")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.DOC_SAVE_CONFLICT:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:publish-failed-error-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("文档保存冲突")),c.a.createElement("p",{className:w},__("文档已被修改，此次保存将保存到历史版本，请重新加载并基于最新文档进行编辑")),c.a.createElement("p",{className:k},U)),ee=!0;break;case v.ERROR_CODE.CACHE_FAILED:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:cache-failed-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("自动保存异常提醒")),c.a.createElement("p",{className:w},__("本地离线缓存失败，请勿在不稳定网络编辑内容，以防丢失")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.CONTENT_UNREADY:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:content-unready"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("保存提醒")),c.a.createElement("p",{className:w},__("检测有尚未上传完成的文件，请检查确认后再关闭页面！")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.DATA_ERROR:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:data-error-view"},c.a.createElement("p",{className:E},c.a.createElement(d.default,null)," ",__("数据异常")),c.a.createElement("p",{className:w},__("检测到异常数据，请将本次修改部分备份后，刷新页面重新编辑")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.COLLAB_DATA_INIT_ERROR:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:collab-data-init-error-view"},c.a.createElement("p",{className:E},c.a.createElement(d.default,null)," ",__("协同数据初始化异常")),c.a.createElement("p",{className:w},__("协同数据存在异常，请所有协作者先退出编辑，重新进入编辑")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.COLLAB_DATA_LIMIT:x.message,te=c.a.createElement("div",{className:_,"data-testid":"StatusView:collab-data-limit-error-view"},c.a.createElement("p",{className:E},c.a.createElement(d.default,null)," ",__("无法进行协同编辑")),c.a.createElement("p",{className:w},__("当前文档数据超限，无法进行多人协同编辑，已切换到单人模式，请清理冗余数据或拆成更小的文档，然后刷新重试")),c.a.createElement("p",{className:k},D)),ee=!0;break;case v.ERROR_CODE.COLLAB_MEMBERS_LIMIT_ERROR:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:collab-members-limit-error-view"},c.a.createElement("p",{className:E},c.a.createElement(d.default,null)," ",__("协同人员超限")),c.a.createElement("p",{className:w},__("当前协同人数过多，请先退出编辑，稍候进入编辑")),c.a.createElement("p",{className:k},y.c&&D,B)),ee=!0;break;case v.ERROR_CODE.COLLAB_MULTIPAGE_LIMIT_ERROR:te=c.a.createElement("div",{className:_,"data-testid":"StatusView:collab-multipage-limit-error-view"},c.a.createElement("p",{className:E},c.a.createElement(d.default,null)," ",__("协同人员超限")),c.a.createElement("p",{className:w},__("当前协同人数过多，请勿多窗口同时编辑！")),c.a.createElement("p",{className:k},y.c&&D,B)),ee=!0;break;case v.ERROR_CODE.RENDER_FAILED:te=y.c&&"markdown"===(p.origin_format||p.format)?c.a.createElement("div",{className:_,"data-testid":"StatusView:render-failed-view-desktop-markdown"},c.a.createElement("p",{className:O},c.a.createElement(f.default,{width:22,height:22})," ",__("抱歉，桌面端暂不支持 Markdown 文档编辑器")),c.a.createElement("p",{className:k},c.a.createElement(a.a,{onClick:function(){return window.__setEditMode(!1)}},__("取消")),c.a.createElement(a.a,{type:"primary",onClick:function(){window.YuqueDesktopAppJSBridge.openExternalLink(window.location.href),window.__setEditMode(!1)}},__("去网页编辑")))):c.a.createElement("div",{className:_,"data-testid":"StatusView:render-failed-view"},c.a.createElement("p",{className:E},c.a.createElement(s.default,null)," ",__("渲染失败")),c.a.createElement("p",{className:w},__("数据存在异常，请尝试重新加载，如果不行，关闭提示后在历史版本里恢复最近一次正常的版本进行编辑")),c.a.createElement("p",{className:k},D,U)),ee=!0;break;case v.ERROR_CODE.COMMAND_ERROR:r.a.destroy(),r.a.error(c.a.createElement("span",{"data-testid":"StatusView:".concat(x.code)},__("出现异常错误，可刷新重试"))),x.readed=!0}return te?c.a.createElement("div",{"data-testid":"StatusView:mask",className:m()(b,A(A({},S,ee),N,window.h5))},c.a.createElement("div",{className:g},te)):null}P.propTypes={netStatus:u.a.string,docStatus:u.a.string,collabUsers:u.a.array,book:u.a.object,doc:u.a.object.isRequired,error:u.a.object,wfMessage:u.a.object,onReload:u.a.func,onClear:u.a.func};t.a=P},464:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r=function(e){return e.NOTE="NOTE",e.BOOK="BOOK",e.DOC="DOC",e.GROUP="GROUP",e}({}),o=function(e){return e.PERSON="PERSON",e.ORG="ORG",e.PUBLIC_PAGE="PUBLIC_PAGE",e.INTERNAL="INTERNAL",e.INTERNAL_THREAD="INTERNAL_THREAD",e}({})},4740:function(e,t,n){"use strict";n(48);var r=n(11),o=n(0),a=n(60),i=n.n(a),c=n(244),l=n(4041),u=n(4630),s=n(1226),d=n(1017),f=i()("useBroadcastChannel");function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(o.useEffect)((function(){var r=e.current;if(r)return r.addEventListener(t,n),function(){return r.removeEventListener(t,n)}}),[e,t,n])}var m=n(34);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(){v=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==h(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,c,"next",e)}function c(e){_(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=i()("editor:doc:vm");t.a=function(e){var t,n,a,i,h=e.doc,y=e.docDomain,g=e.book,_=e.group,O=e.dispatch,S=e.onPublishSuccessRedirect,N=e.me,x=e.readerEditMode,A=void 0!==x&&x,P=e.matchCondition,C=void 0===P?window.appData.matchCondition||{}:P,j=e.currentDocSlug,T=e.scene,I=e.mode,M=C.useEditorTileRendering,L=C.useEditorVirtualRendering,R=C.useEditorTileRenderingForOT,D=C.useEditorVirtualRenderingForOT,U=C.editType,B=void 0===U?"":U,z=I||(B.includes("Collab")?l.b.COLLAB:l.b.LOCK),F=w(Object(o.useState)(!1),2),V=F[0],G=F[1],Y=w(Object(o.useState)(!1),2),$=Y[0],q=Y[1],W=w(Object(o.useState)(!1),2),H=W[0],K=W[1],Z=w(Object(o.useState)(null),2),Q=Z[0],X=Z[1],J=w(Object(o.useState)(!1),2),ee=J[0],te=J[1],ne=w(Object(o.useState)(null),2),re=ne[0],oe=ne[1],ae=w(Object(o.useState)([]),2),ie=ae[0],ce=ae[1],le=w(Object(o.useState)(z),2),ue=le[0],se=le[1],de=w(Object(o.useState)(null),2),fe=de[0],pe=de[1],me=w(Object(o.useState)(l.a.loading),2),he=me[0],ve=me[1],ye=w(Object(o.useState)(""),2),be=ye[0],ge=ye[1],_e=w(Object(o.useState)(h.title),2),Ee=_e[0],we=_e[1],Oe=(t="sync_doc_title_".concat(h.id),n=function(e){return O({type:"doc/update",payload:{title:e.data}})},p(i=Object(o.useRef)("undefined"!=typeof window&&"BroadcastChannel"in window?new BroadcastChannel("".concat(t,"-channel")):null),"message",n),p(i,"messageerror",a),Object(o.useCallback)((function(e){var t;null==i||null===(t=i.current)||void 0===t||t.postMessage(e),f("postMessage",e)}),[i])),ke=Object(d.a)(Ee),Se=Object(d.a)(g.toc);Object(o.useEffect)((function(){return E(v().mark((function e(){var t,n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ke.current,A&&h.title!==t&&h.slug===j&&t&&(n=Se.current,r=n.map((function(e){return e.url===j?b(b({},e),{},{title:t}):e})),O({type:"book/updateToc",payload:r}));case 2:case"end":return e.stop()}}),e)})))}),[j]);var Ne=Object(o.useMemo)((function(){return k("create workflow instance"),new u.a({me:N,doc:h,docDomain:y,book:g,group:_,dispatch:O,mode:z,scene:m.c?l.c.DESKTOP:T||l.c.WEB,onPublishSuccessRedirect:S})}),[]),xe=Object(o.useMemo)((function(){return s.a.getEditorTheme(h,g)}),[h,g]),Ae=function(){var e=E(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.save(t||l.h.USER_SAVE);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=E(v().mark((function e(t){var n,r,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k("on publish:",t),e.next=3,Ne.publish(t);case 3:if(void 0!==(r=e.sent)){e.next=6;break}return e.abrupt("return");case 6:o=A?b(b({word_count:Ne.getWordCount(),published_at:new Date,is_fake_published_at:!0},(null===(n=h.contributors)||void 0===n?void 0:n.length)>0?{}:{contributors:[N]}),m.c?{}:{readerEditModeData:null}):{},"string"==typeof r&&(o.content=r),O({type:"doc/update",payload:b(b({},o),{},{content_modified:!1})});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){if(k("editable change",e),K(e),e){var t=Ne.isDocContentEmpty();k("empty doc, show wizard view:",t),q(t)}else q(!1)},je=function(e){e===l.a.saved&&X(new Date),ve(e)},Te=function(){var e=E(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne.on(l.i.editableChange,Ce),Ne.on(l.i.error,oe),Ne.on(l.i.collabUsersChange,ce),Ne.on(l.i.editModeChange,se),Ne.on(l.i.message,pe),Ne.on(l.i.docStatusChange,je),Ne.on(l.i.netStatusChange,ge),Ne.on(l.i.saveTitle,(function(e){k("title change to:",e),O("Doclet"!==y?{type:"doc/update",payload:{title:e}}:{type:"template/update",payload:{name:e}})})),e.next=10,Ne.start(t);case 10:"Doc"===h.type&&window.dispatchEvent(new CustomEvent("GetDocWordCount"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return function(){Ne.off(l.i.editableChange,Ce),Ne.off(l.i.error,oe),Ne.off(l.i.collabUsersChange,ce),Ne.off(l.i.editModeChange,se),Ne.off(l.i.message,pe),Ne.off(l.i.docStatusChange,je),Ne.off(l.i.netStatusChange,ge)}}),[]),{state:{historyView:V,wizardView:$,editable:H,editorLoaded:ee,docStatus:he,docTitle:Ee},getWorkflow:function(){return Ne},getTheme:function(){return xe},getOpenEditorConfig:function(){return Ne.getOpenEditorConfig()},useTemplate:function(e){q(!1),Ne.useTemplate(e)},start:Te,onEditableChange:Ce,onSave:Ae,onPublish:Pe,buildStatusProps:function(){return{book:g,doc:h,error:re,wfMessage:fe,docStatus:he,onReload:function(){Object(c.a)("start","reload"),Ne.cache(),Ne.start()},onClear:function(){Ne.clearError()}}},buildHistoryProps:function(){return{docId:h.id,doc:h,docDomain:y,onCancel:function(){G(!1)},onRevert:function(e){Ne.isOnlyOneEditSession()?(r.a.success(__("文档恢复成功")),Ne.revert(e),G(!1)):0!==ie.length?r.a.error(__("有其他用户正在编辑该文档，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):r.a.error(__("你同时打开了多个浏览器窗口编辑该文档，请关闭其它窗口再进行恢复"))}}},buildEditorProps:function(){return{docTitle:Ee,doc:h,docDomain:y,book:g,group:_,theme:xe,editable:H,openEditorConfig:Ne.getOpenEditorConfig(),onSave:Ae,onPublish:Pe,onEditorLoaded:function(e){Ne.onEditorLoaded(e),te(!0)},onSaveTitle:Ne.onSaveTitle,onTitleChange:function(e){we(e),Oe(e)},getDefaultSuggestions:Ne.getDefaultSuggestions,onMentionSearch:Ne.onMentionSearch,onConnnectError:function(){ge("offline")},onThemeChange:Ne.saveDocTheme,onContentChange:function(e){Ne.onContentChange(e);var t=!e&&Ne.isDocContentEmpty();q(t),"Doc"===h.type&&window.dispatchEvent(new CustomEvent("GetDocWordCount"))},isDefaultTitle:function(e){return Ne.isDefaultTitle(e)},useEditorTileRendering:M,useEditorVirtualRendering:L,useEditorTileRenderingForOT:R,useEditorVirtualRenderingForOT:D,focusOnLoaded:!0,editType:B}},buildHeadProps:function(){return{pageReady:H&&he!==l.a.loading,editable:H,publishing:he===l.a.publishing||!!Ne.publishing,saving:he===l.a.saving||!!Ne.saving,savedAt:Q,docStatus:he,collabUsers:ue===l.b.COLLAB?ie:null,showTitle:!!h.title,shortDocTitle:window.appData.isDocCollaborator,publish:Pe,save:Ae,showHistory:function(){G(!0)},netStatus:be,getSummary:Ne.getSummary,getWordCount:Ne.getWordCount,onDeleted:function(){Ne.deleteDoc()},errorStatus:re}},buildH5EditorProps:function(){return{doc:h,book:g,group:_,onChange:function(e){Ne.onContentChange(e)},getDefaultSuggestions:Ne.getDefaultSuggestions,onMentionSearch:Ne.onMentionSearch,onLoad:function(e){Ne.onEditorLoaded(e),te(!0)},onAutoSave:function(){Ae(l.h.AUTO)},onSave:Ae,onPublish:Pe,meta:s.a.getEditorMeta(h),openEditorConfig:Ne.getOpenEditorConfig()}}}}},4795:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return v}));var r=n(258),o={PUBLISH:"yuque_sdk_publish",PUBLISH_CALLBACK:"yuque_sdk_publish_callback",RESIZE_CALLBACK:"yuque_sdk_resize_callback",CONNECT:"yuque_sdk_connect",DISCONNECT:"yuque_sdk_disconnect",FULLSCREEN_CALLBACK:"yuque_sdk_fullscreen_callback",SAVE_CALLBACK:"yuque_sdk_save_callback",SET_VALUE:"yuque_sdk_set_value",GET_VALUE:"yuque_sdk_get_value",GET_VALUE_CALLBACK:"yuque_sdk_get_value_callback",INSERT_VALUE:"yuque_sdk_insert_value",CHANGE_CALLBACK:"yuque_sdk_change_callback",SET_TITLE_VALUE:"yuque_sdk_set_title_value",GET_TITLE_VALUE:"yuque_sdk_get_title_value",GET_TITLE_VALUE_CALLBACK:"yuque_sdk_get_title_value_callback",SAVE_TITLE_CALLBACK:"yuque_sdk_save_title_callback",TITLE_CHANGE_CALLBACK:"yuque_sdk_title_change_callback",SCROLL_TO:"yuque_sdk_scroll_to",DOC_LOADED_CALLBACK:"yuque_sdk_doc_loaded_callback",UNLOCK:"yuque_sdk_unlock",UNLOCK_CALLBACK:"yuque_sdk_unlock_callback",RESET:"yuque_sdk_reset",RESET_CALLBACK:"yuque_sdk_reset_callback",LOAD_CALLBACK:"yuque_sdk_load_callback"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function c(e,t,n){return t=u(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function d(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var p=0,m=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(e=c(this,t),"init",(function(t){e.url=document.location.href,e.target=t,e._postMessageToParent({type:o.CONNECT,url:e.url}),window.addEventListener("message",e.handleMessage,!1),window.addEventListener("unload",e.handleUnload,!1)})),d(e,"handleMessage",(function(t){("string"==typeof t.data?JSON.parse(t.data):t.data).type===o.CONNECT&&(e._postMessageToParent({type:o.CONNECT,url:e.url}),window.removeEventListener("message",e.handleMessage,!1))})),d(e,"handleUnload",(function(){e._postMessageToParent({type:o.DISCONNECT,url:e.url})})),d(e,"_postMessageToParent",(function(t){e.target&&e.target.postMessage(JSON.stringify(t),"*")})),d(e,"postMessage",(function(t,n){var r={type:t,message:n,messageId:++p,url:e.url};e._postMessageToParent(r)})),d(e,"handleMessage",(function(t){return e.emit("message",t)})),d(e,"destroy",(function(){window.removeEventListener("message",e.handleMessage,!1),window.removeEventListener("unload",e.handleUnload,!1)})),e.ready=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),n=t,r&&i(n.prototype,r),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(n.n(r).a));window&&window.parent&&window.self!==window.top&&(m.init(window.parent),window.addEventListener("message",(function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;m.handleMessage(t)}catch(e){console&&console.error(e)}})));var h=function(e,t){return m.postMessage(e,t)},v=function(e){return m.on("message",e),function(){m.off("message",e)}}},495:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){switch(t.type){case"init":return{response:null,error:null,loading:!0};case"success":return{response:t.response,error:null,loading:!1};case"error":return{response:null,error:t.error,loading:!1};default:return{response:null,error:null,loading:!1}}}function c(e){var t=Object(r.useRef)(0),n=o(Object(r.useReducer)(i,{response:null,loading:!1,error:null}),2),a=n[0],c=n[1];return{data:a.response,loading:a.loading,request:function(n,r){var o=++t.current;return c({type:"init"}),e(n,r).then((function(e){return o===t.current&&c({type:"success",response:e}),e})).catch((function(e){if(c({type:"error",error:e}),null!=r&&r.ignoreGlobalMessage)throw e;console.error(e)}))},error:a.error}}},5008:function(e,t,n){"use strict";var r=n(5031),o=n.n(r),a=n(5032),i=n.n(a),c=n(1461),l=n.n(c),u=n(4547),s=n.n(u),d=n(3978),f=n.n(d),p=n(1415),m=n.n(p),h=n(834);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function b(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=b.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==v(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function _(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function S(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var A=S((function e(t){var n=this,r=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"isLongTag",(function(e){return e&&e.length>h.MAX_SHOW_TEXT_LENGTH})),N(this,"getShowText",(function(e){return"".concat(e.slice(0,h.MAX_SHOW_TEXT_LENGTH),"...")})),N(this,"createTag",m()(function(){var e=O(g().mark((function e(t){var r,o,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.currentTags,o=t.docId,a=f()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(h.TAG_RULES_REG.test(a)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、-_@#/ 等符号")});case 6:if(!(a.length>h.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:h.MAX_LENGTH})});case 8:if(!s()(r,(function(e){return e.title===a}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,n.tagProxy.create({docId:o,title:a});case 12:if(!(i=e.sent)||!i.id){e.next=15;break}return e.abrupt("return",{data:[].concat(_(r),[i])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),N(this,"getSuggest",function(){var e=O(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.suggest(t);case 2:return r=e.sent,e.abrupt("return",l()(r,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N(this,"destroy",function(){var e=O(g().mark((function e(t,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.destroy(t);case 2:return e.sent&&i()(r,(function(e){return e.id===t.id})),e.abrupt("return",_(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N(this,"arrangeResultTags",(function(e,t,n){var r=n.reduce((function(e,t){return b(b({},e),{},N({},t.title,t.count))}),{});return l()(e,(function(e){var n=e.tags.split(",").filter((function(e){return o()(t,e)<0})),a=function(e,t){return r[t]-r[e]},i=[].concat(_(t.sort(a)),_(n.sort(a)));return b(b({},e),{},{tags:i.map((function(e){return{title:e}}))})}))})),N(this,"tagsToString",(function(e){var t=e.tags,n=void 0===t?[]:t;return b(b({},e),{},{tags:n.join(",")})})),N(this,"findDocs",function(){var e=O(g().mark((function e(t,r){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.findDocs(n.tagsToString(t));case 2:return o=e.sent,e.abrupt("return",n.arrangeResultTags(o,t.tags,r.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N(this,"countDocs",function(){var e=O(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.tagProxy.countDocs(n.tagsToString(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=r}));t.a=A},5029:function(e,t,n){"use strict";n(53);var r=n(12),o=n(0),a=n.n(o),i=n(6),c=n.n(i);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=l(Object(o.useState)(!1),2),n=t[0],i=t[1],c=l(Object(o.useState)(e.title||__("无标题")),2),u=c[0],s=c[1];Object(o.useEffect)((function(){e.title!==u&&s(e.title||__("无标题"))}),[e.title]);var d=function(){var t=u||__("无标题");e.saveTitle(t),s(t),i(!1)};return n?a.a.createElement(r.a,{className:"lark-editor-header-title-input",autoFocus:!0,type:"text",value:u,onChange:function(e){s(e.target.value)},onFocus:function(e){n&&e.target.select()},onBlur:d,onPressEnter:d}):a.a.createElement("span",{className:"name-title",title:u,onClick:function(){i(!0)}},u)};s.propTypes={title:c.a.string.isRequired,saveTitle:c.a.func.isRequired},t.a=s},5031:function(e,t,n){var r=n(806),o=n(596),a=Math.max;e.exports=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var c=null==n?0:o(n);return c<0&&(c=a(i+c,0)),r(e,t,c)}},5032:function(e,t,n){var r=n(243),o=n(5033);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var a=-1,i=[],c=e.length;for(t=r(t,3);++a<c;){var l=e[a];t(l,a,e)&&(n.push(l),i.push(a))}return o(e,i),n}},5033:function(e,t,n){var r=n(845),o=n(233),a=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,i=n-1;n--;){var c=t[n];if(n==i||c!==l){var l=c;o(c)?a.call(e,c,1):r(e,c)}}return e}},5088:function(e,t,n){"use strict";n(3531);var r=n(4524),o=(n(278),n(86)),a=(n(177),n(58)),i=(n(48),n(11)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(1438),f=n(1635),p=n(424),m=n.n(p),h=n(834),v="Tag-module_wrapper_hMv3z",y="Tag-module_add_2EgPb";function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=y.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==b(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,c,"next",e)}function c(e){_(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=m()((function(e,t){t(e)}),400),S=function(e){var t=e.docId,n=e.group,r=e.tagBiz,o=e.onChange,a=w(Object(c.useState)([]),2),l=a[0],u=a[1],s=w(Object(c.useState)([]),2),d=s[0],f=s[1],p=w(Object(c.useState)(""),2),m=p[0],h=p[1],v=w(Object(c.useState)(!1),2),y=v[0],b=v[1];function _(e,t){return O.apply(this,arguments)}function O(){return(O=E(g().mark((function e(n,a){var c,s,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createTag({title:n,currentTags:l,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,s=c.error,d=c.data,!s){e.next=12;break}if(i.a.error(s),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:b(!1),h(""),f([]),d&&(u(d),o(d));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=E(g().mark((function e(n){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.destroy({docId:t,id:n},l);case 2:a=e.sent,u(a),o(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=E(g().mark((function e(o){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSuggest({target:n.login,query:o,docId:t});case 2:a=e.sent,f(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=E(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,_(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:l,suggestOptions:d,showInput:y,inputValue:m},setTagsArray:u,deleteTag:function(e){return k.apply(this,arguments)},createTag:_,getSuggest:function(e){return S.apply(this,arguments)},setInputShowStatus:b,handleKeydown:function(e){return N.apply(this,arguments)},setInputValue:h}},N=function(e){var t=e.tagsArray,n=e.group,r=e.editable,i=e.deleteTag;return t.map((function(e){var t=e.title,c=e.id;return l.a.createElement(o.a,{className:"doc-tag",key:c},l.a.createElement("a",{className:"tag-title",target:"_blank","data-desktoptarget":"_blank",href:"/r/".concat(n.login,"/tags?tag=").concat(encodeURIComponent(t))},t),r&&l.a.createElement(a.a,{title:__("确认删除标签"),onConfirm:function(){i(c)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},l.a.createElement(d.default,{style:{marginLeft:4},width:8})))}))},x=function(e){var t=e.tags,n=e.editable,o=e.docId,a=e.group,i=e.tagBiz,u=e.onChange,s=S({docId:o,group:a,tagBiz:i,onChange:u}),d=s.state,p=d.tagsArray,m=d.showInput,b=d.suggestOptions,g=d.inputValue,_=s.getSuggest,E=s.deleteTag,w=s.setInputShowStatus,O=s.handleKeydown,x=s.setTagsArray,A=s.setInputValue,P=s.createTag,C=(p?p.length:0)>=h.MAX_COUNT,j=n&&!m&&!C,T=n&&m;Object(c.useEffect)((function(){x(t),u(t)}),[x,t]);var I=l.a.createElement(N,{tagsArray:p,group:a,editable:n,deleteTag:E,tagBiz:i});return n?l.a.createElement("div",{className:v,"data-testid":"editable-tag"},I,j&&l.a.createElement("span",{className:y,onClick:function(){return w(!0)},"data-testid":"edit-btn"},l.a.createElement(f.default,null)),T&&l.a.createElement(r.a,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:b,onChange:function(e){A(e),k(e,_)},onSelect:P,style:{width:"200px"},backfill:!0,value:g,onBlur:function(e){P(e.target.value,"blur")},onInputKeyDown:O})):l.a.createElement("div",{className:v,"data-testid":"only-read-tag"},I)};x.useViewModel=S,x.propTypes={tags:s.a.array.isRequired,docId:s.a.number,editable:s.a.bool,group:s.a.object,tagBiz:s.a.object,onChange:s.a.func},x.defaultProps={onChange:function(){}};t.a=x},5203:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return S}));n(48);var r=n(11),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(424),u=n.n(l),s=n(4478),d=n.n(s),f=n(4795),p=n(1226),m=n(4041);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(){v=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",y="completed",b={};function g(){}function _(){}function E(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(w=k);var S=E.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==h(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:_,configurable:!0}),_.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function y(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var O=new(n(4218).a),k=function(){return e=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=n.doc,this.getContent=n.getContent,this.workflow=n.workflow,this.engine=n.workflow?n.workflow.engine:n.engine,this._title=this.doc&&this.doc.title,this.getTitle=function(){return t._title},O.saveToServer||(this.getTitle=n.getTitle||function(){return this.doc?this.doc.title:null}),this.change=u()(this.change,300),this.onMessage=f.b,this.MESSAGE_TYPES=f.a,"off"===O.extraConfig.message&&r.a.config({top:-9999})},t=[{key:"_postContentMessage",value:function(e,t){if(t||(t={status:"success",message:"ok"}),t.id=this.doc.slug,"success"===t.status)return this._getEmbedData().then((function(n){t.data=g(g({},n),t.data||{}),Object(f.c)(e,t)}));Object(f.c)(e,t)}},{key:"_getEmbedData",value:(o=v().mark((function e(){var t,n,r,o,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.engine){e.next=3;break}return e.next=3,this.engine.onBeforeSave();case 3:return t=this.getContent({fullHTML:O.fullHTML}),n=t.content,r=t.html,o=t.thumbnail,a=this.getTitle(),i={id:this.doc.slug,slug:this.doc.slug,title:a},"Sheet"===this.doc.type||"Table"===this.doc.type?(i.thumbnail=o,i.lakesheet=n):(i.lake=n,i.html=r),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){y(a,n,r,i,c,"next",e)}function c(e){y(a,n,r,i,c,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"publish",value:function(e){this._postContentMessage(f.a.PUBLISH_CALLBACK,e)}},{key:"save",value:function(e){this._postContentMessage(f.a.SAVE_CALLBACK,e)}},{key:"saveTitle",value:function(e){this._title=e,this._postContentMessage(f.a.SAVE_TITLE_CALLBACK,{data:{data:e},status:"success"})}},{key:"changeTitle",value:function(e,t){this._title=e,t&&this._postContentMessage(f.a.TITLE_CHANGE_CALLBACK,{data:{data:e},status:"success"})}},{key:"loadCallback",value:function(){Object(f.c)(f.a.LOAD_CALLBACK)}},{key:"getValueCallback",value:function(){this._postContentMessage(f.a.GET_VALUE_CALLBACK)}},{key:"unlockCallback",value:function(){this._postContentMessage(f.a.UNLOCK_CALLBACK)}},{key:"resetCallback",value:function(){this._postContentMessage(f.a.RESET_CALLBACK)}},{key:"change",value:function(){this._postContentMessage(f.a.CHANGE_CALLBACK)}},{key:"fullScreen",value:function(e){Object(f.c)(f.a.FULLSCREEN_CALLBACK,e)}},{key:"resize",value:function(e){Object(f.c)(f.a.RESIZE_CALLBACK,e)}},{key:"onDocLoaded",value:function(e){Object(f.c)(f.a.DOC_LOADED_CALLBACK,e)}},{key:"onHashChange",value:function(e){Object(f.c)("hashchange",{newURL:e.newURL,oldURL:e.oldURL,href:location.href})}},{key:"connect",value:function(e){var t=this;e.on(m.i.error,(function(e){t.onError(e)})),e.on(m.i.docStatusChange,(function(e){t.onDocStatusChanged(e)})),e.on(m.i.saveTitle,(function(e){t.saveTitle({data:e,state:"success",message:"ok"})})),e.on(m.i.change,(function(){O.onchange&&t.change()})),e.on(m.i.miniExpand,(function(e){t.fullScreen(e)}))}},{key:"onDocStatusChanged",value:function(e){e===m.a.saved?this.save({status:"success",message:"ok",data:{save_type:"user"}}):e===m.a.published?this.publish():e===m.a.loaded&&this.onDocLoaded()}},{key:"onError",value:function(e){e&&e.code===m.d.PUBLISH_FAILED&&this.publish({status:"error",message:e.message})}}],t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,a}();function S(e){var t=e.backgroundColor,n=e.autoHeight,r=e.bodyBackgroundColor,a=e.toolbarBackgroundColor;Object(o.useEffect)((function(){var e="";if(r&&(e+="\n        .lake-max-editor-wrapper-content .lake-max-editor-content {\n          background-color: ".concat(d()(r),";\n        }\n        .lake-max-editor-wrapper-content .lake-content-editor {\n          border: 0 none;\n          box-shadow: none;\n        }\n      ")),a&&(e+="\n        .lake-toolbar {\n          background-color: ".concat(d()(a),";\n        }\n      ")),t&&(e+="\n        #content,\n        .lake-content-editor,\n        .lake-title-editor .ant-input {\n          background-color: ".concat(d()(t),"\n        }\n      ")),n||(e+="\n        .lake-mini-editor .lake-content-editor-core {\n          height: calc(100vh - 40px);\n          min-height: calc(100vh - 40px);\n          overflow-y: auto;\n        }\n      "),e){var o=document.createElement("style");document.head.appendChild(o),o.type="text/css",o.appendChild(document.createTextNode(e))}}),[])}function N(e){var t=e.doc,n=e.publish,i=e.setContent,c=e.getContent,l=e.insertContent,u=e.getTitle,s=e.getContainer,d=e.autoHeight,m=(e.fullScreen,e.onLoad),h=e.workflow,v=e.engine,y=e.backgroundColor,b=e.bodyBackgroundColor,g=e.toolbarBackgroundColor,_=Object(o.useRef)(null),E=s(),w=Object(o.useRef)(null),O=Object(o.useMemo)((function(){return new k({doc:t,getContent:c,getTitle:u})}),[t,c,u]);return S({autoHeight:d,backgroundColor:y,bodyBackgroundColor:b,toolbarBackgroundColor:g}),Object(o.useEffect)((function(){var e=Object(f.b)((function(e){var t=e.type,o=e.message,a=e.options,c=void 0===a?{}:a;if(t===f.a.PUBLISH)n();else if(t===f.a.GET_VALUE)O.getValueCallback();else if(t===f.a.SET_VALUE)if("markdown"===c.format)try{p.a.convertMarkdownToLake(o).then((function(e){return i(e)}))}catch(e){r.a.error(__("初始化 Markdown 格式失败"))}else i(o);else if(t===f.a.SCROLL_TO){var u=document.querySelector(".lake-editor-scroll-container")||document.querySelector(".lake-content-editor-core");u?u.scrollTop=o:window.scrollTo(0,o)}else if(t===f.a.INSERT_VALUE)l(o);else if(t===f.a.UNLOCK)h&&h.exit({unlock:!0}).then((function(){O.unlockCallback()}));else if(t===f.a.RESET&&(v||h)){var s=(v||h).reset,d=function(e){s(e),O.resetCallback()};if("markdown"===c.format)try{p.a.convertMarkdownToLake(o).then((function(e){d(e)}))}catch(e){r.a.error(__("重置 Markdown 格式失败"))}else d(o)}}));return O.loadCallback(),m(O),h&&O.connect(h),function(){e()}}),[]),Object(o.useEffect)((function(){if(E&&d){var e=function(){_.current||(_.current=setTimeout((function(){_.current=null;var t=E.querySelector?E:E.current,n=t.querySelector(".lake-max-editor-content");if(n||(n=t.querySelector(".lake-content-editor")),n){var r=n.scrollHeight,o=document.querySelector(".lake-toolbar"),a=o?o.offsetHeight:0,i=document.querySelector(".lark-editor-header"),c=i?i.offsetHeight:0;w.current!==r&&(O.resize({height:a+c+r+60}),w.current=r)}e()}),300))};e()}return function(){clearTimeout(_.current),_.current=null}}),[E,d]),a.a.createElement("span",null)}N.defaultProps={onLoad:function(){}},N.propTypes={doc:c.a.object,getContainer:c.a.func.isRequired,getContent:c.a.func.isRequired,getTitle:c.a.func,publish:c.a.func.isRequired,setContent:c.a.func.isRequired,autoHeight:c.a.bool,onLoad:c.a.func,insertContent:c.a.func.isRequired,engine:c.a.func.object},t.b=N},5248:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(53),n(12)),a=(n(207),n(49)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(76),d=n(5088),f=n(5008),p=n(1232),m=n(1536),h=n(308),v=n(1226),y=n(958),b=n(47),g=(n(130),n(41)),_=(n(138),n(30)),E=(n(188),n(32));function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.value,n=e.contributors,r=e.onChange,a=N(Object(i.useState)(t.showAuthorOption),2),l=a[0],u=a[1],d=N(Object(i.useState)(t.showAuthorId),2),f=d[0],p=d[1],m=N(Object(i.useState)(t.showAuthorCustomText),2),h=m[0],v=m[1],y=function(t){r&&"function"==typeof r&&r(k(k({},e.value),t))};return c.a.createElement(g.a,{gutter:16},c.a.createElement(_.a,{span:10},c.a.createElement(E.a,{"data-testid":"show-author-option-selector",value:l,onChange:function(e){u(Number(e));var t=Number(e);y({showAuthorOption:e,showAuthorId:t!==s.SHOW_AUTHOR_OPTION.specific_user?0:f,showAuthorCustomText:t!==s.SHOW_AUTHOR_OPTION.custom_text?"":h})},getPopupContainer:function(e){return e.parentNode}},c.a.createElement(E.a.Option,{value:s.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),c.a.createElement(E.a.Option,{"data-testid":"show-author-option-selector-user",value:s.SHOW_AUTHOR_OPTION.specific_user,disabled:n.length<=1},__("显示指定编辑者")),c.a.createElement(E.a.Option,{"data-testid":"show-author-option-selector-hide",value:s.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),c.a.createElement(E.a.Option,{"data-testid":"show-author-option-selector-text",value:s.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),l===s.SHOW_AUTHOR_OPTION.specific_user&&c.a.createElement(_.a,{span:14},c.a.createElement(E.a,{"data-testid":"show-author-option-user-selector",value:f,onChange:function(e){p(Number(e)),y({showAuthorId:e})},placeholder:__("选择编辑者")},n.map((function(e){return c.a.createElement(E.a.Option,{value:e.id,key:String(e.id)},e.name)})))),l===s.SHOW_AUTHOR_OPTION.custom_text&&c.a.createElement(_.a,{span:14},c.a.createElement(o.a,{"data-testid":"show-author-option-custom-input",value:h,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;v(t),y({showAuthorCustomText:t})}})))};A.propTypes={value:u.a.shape({showAuthorCustomText:u.a.string,showAuthorId:u.a.number,showAuthorOption:u.a.number}).isRequired,contributors:u.a.array,onChange:u.a.func.isRequired};var P=A,C={tagWrapper:"DocMetaEdit-module_tagWrapper_H2QK1",tagTip:"DocMetaEdit-module_tagTip_ThFbG",cover:"DocMetaEdit-module_cover_JaV7l",coverPlaceholder:"DocMetaEdit-module_coverPlaceholder_c80Dd",coverActions:"DocMetaEdit-module_coverActions_CZ+Ed",btnRemoveCover:"DocMetaEdit-module_btnRemoveCover_RF2fK",btnRemoveCoverIcon:"DocMetaEdit-module_btnRemoveCoverIcon_ec2SG",moreBtn:"DocMetaEdit-module_moreBtn_c8CgD"};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(){T=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==j(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function I(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function R(e,t,n){return t=U(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D()?Reflect.construct(t,n||[],U(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function z(e,t,n){return(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var V=a.a.Item,G=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(n=R(this,t,[e]),"onSubmit",(function(e){e.preventDefault(),(0,n.props.form.validateFields)((function(e,t){e||n.handleUploadCover((function(){var e=n.state,r=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:t.title,slug:t.slug,show_author_id:r.showAuthorId,public:n.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:r.showAuthorOption,show_author_custom_text:r.showAuthorCustomText};n.setState({submitting:!0},M(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.save(i);case 2:n.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),z(n,"handleUploadCover",(function(e){n.coverUploader.current?n.coverUploader.current.onSubmit().then((function(t){n.setState({cover:t||""},e)})):e()})),z(n,"onChangePermission",(function(e){n.setState({public:e})})),z(n,"handleChangeDesc",(function(e){n.setState({description:e.target.value})})),z(n,"showMore",(function(){var e;n.setState({showMore:!0});var t=n.props,r=t.doc,o=t.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==r||null===(e=r.abilities)||void 0===e?void 0:e.update;(a||i)&&b.a.tags.find({docId:r.id}).then((function(e){n.setState({tags:e})}))})),z(n,"onAuthorShowOptionChange",(function(e){n.setState({showAuthorOptionData:e})}));var r=e.doc,o=v.a.getDocShowAuthorId(r),a=v.a.getDocShowAuthorOption(r),i=v.a.getDocShowAuthorCustomText(r);return n.state={public:r.public,cover:r.custom_cover||r.cover||"",description:null!=r.custom_description?r.custom_description:r.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:o||void 0,showAuthorOption:a,showAuthorCustomText:i},showMore:!1,tags:[]},n.coverUploader=c.a.createRef(),n.tagBiz=new f.a({tagProxy:b.a.tags}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var n=t.summary,r=t.cover;e.props.doc.custom_description||e.setState({description:n}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:r})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,n=t.showAuthorId,r=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=r===s.SHOW_AUTHOR_OPTION.specific_user&&!n||r===s.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,n=e.group,r=this.state.tags,o=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,a=o||r&&r.length,i=n&&"User"===n.type,l=__("标签用于管理，仅{desc}可见",{desc:i?__("自己"):y.a.memberTitle(n)});if(a)return c.a.createElement(V,null,c.a.createElement("div",{className:C.tagWrapper},c.a.createElement("p",{className:C.title},__("标签"),c.a.createElement("span",{className:C.tagTip},l)),c.a.createElement(d.a,{tags:r||[],editable:o,group:n,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,n=e.book,i=e.hideMoreInfo,l=e.hideTitle,u=this.props.form.getFieldDecorator,s="/".concat(n.namespace,"/"),d={xs:{span:24},sm:{span:14}},f=t.contributors||[],h=this.state.showMore,v=!i||h;return c.a.createElement("div",{className:"doc-meta-edit"},c.a.createElement(a.a,{layout:"vertical"},!l&&c.a.createElement(V,{label:__("标题"),colon:!1,wrapperCol:d},u("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(c.a.createElement(o.a,{type:"text",autoComplete:"off"}))),c.a.createElement(V,{label:__("摘要"),colon:!1},c.a.createElement(o.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),c.a.createElement(V,{label:__("封面"),colon:!1},c.a.createElement("div",{className:C.cover},c.a.createElement(m.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader,cropperCheckCrossOrigin:!1,cropperCrossOrigin:"anonymous"}))),v?c.a.createElement(c.a.Fragment,null,c.a.createElement(V,{label:__("作者"),colon:!1},c.a.createElement(P,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:f})),c.a.createElement(V,{label:__("路径"),colon:!1,wrapperCol:d},u("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(c.a.createElement(o.a,{type:"text",addonBefore:s,autoComplete:"off"}))),this.renderTags()):c.a.createElement("div",{className:C.moreBtn,onClick:this.showMore},__("高级选项")," ",c.a.createElement(p.default,null)),c.a.createElement(r.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&L(n.prototype,i),l&&L(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,l}(i.Component);G.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,save:u.a.func,getSummary:u.a.func,hideMoreInfo:u.a.bool,hideTitle:u.a.bool};t.a=Object(h.b)(a.a.create()(G),!0)},5254:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(40);var r=n(9),o=n(0),a=n.n(o),i=n(63),c={playBtn:"index-module_playBtn_5wHuG"};function l(){return a.a.createElement(r.a,{className:c.playBtn,onClick:function(){return window.postMessage("show:play")}},a.a.createElement(i.b,{name:"play",width:8,height:12}),__("播放"))}},5341:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(701),n(309)),a=(n(588),n(110)),i=n(0),c=n.n(i),l=n(6),u=n.n(l),s=n(60),d=n.n(s),f=n(473),p=n(64),m=n.n(p),h=n(5),v=n.n(h),y=n(4314),b=n(4405),g=n(4416),_=n(4248),E=n(4401),w=n(1476),O=(n(3513),n(4003)),k="Slider-module_slideTitle_jDMWk",S="Slider-module_slideContainer_5puOR";function N(e){var t=e.title,n=e.onChange,r=e.value,o=e.min,a=e.max,l=e.marks,u=e.className,s=e.valueMap,d=e.labelMap,f=e.unit,p=Object(i.useCallback)((function(e){n(s?s[e]:e)}),[s,n]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:k},c.a.createElement("span",null,t)),c.a.createElement("div",{className:S},c.a.createElement(O.a,{className:u,onChange:p,min:o,max:a,value:d?d[r]:r,tooltipVisible:!1,marks:l})),c.a.createElement("div",null,r,f))}N.propTypes={title:l.PropTypes.string.required,onChange:l.PropTypes.func.required,value:l.PropTypes.number.required,min:l.PropTypes.number.required,max:l.PropTypes.number.required,marks:l.PropTypes.array.required,labelMap:l.PropTypes.object,valueMap:l.PropTypes.object,className:l.PropTypes.string,unit:l.PropTypes.string},N.defaultProps={unit:"px"};var x=n(63),A="Select-module_selectTitle_o273v",P="Select-module_selectOptions_iZn-b",C="Select-module_optionAction_KeaaB",j="Select-module_iconSvg_3tsh1",T="Select-module_optionActive_HTKqR",I="Select-module_optionTitle_ZbDCu";function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=e.title,n=e.value,r=e.options,o=e.onChange;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:A},t),c.a.createElement("div",{className:P},r.map((function(e){return c.a.createElement("div",{key:e.value,className:v()(C,L({},T,n===e.value)),"data-aspm-click":e.asp||null,onClick:function(){o(e.value)}},c.a.createElement(x.a,{className:j,width:38,height:28,name:n===e.value?e.selectedIcon:e.icon}),c.a.createElement("div",{className:I},e.title))}))))}R.propTypes={title:l.PropTypes.string.required,value:l.PropTypes.number.required,options:l.PropTypes.array.required,onChange:l.PropTypes.func.required},R.defaultProps={};var D="Switch-module_switchTitle_WJKZB",U="Switch-module_switchContainer_Ajcua";function B(e){var t=e.title,n=e.onChange,r=e.defaultChecked;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:D},t),c.a.createElement("div",{className:U},c.a.createElement(o.a,{size:"small",onChange:n,defaultChecked:r})))}B.propTypes={title:l.PropTypes.string.required,value:l.PropTypes.number.required,defaultChecked:l.PropTypes.bool.required,onChange:l.PropTypes.func.required},B.defaultProps={};var z=n(47),F=n(114),V=n(1226),G=n(308),Y=n(499),$=n(1249),q=n.n($),W=n(4445),H="DocActionMore-module_wrap_le9aB",K="DocActionMore-module_sceneItem_sDxCm",Z="DocActionMore-module_selectItem_Ga0F3",Q="DocActionMore-module_submenuSwitchItem_AK8z3",X="DocActionMore-module_slideItem_zrnG8",J="DocActionMore-module_switchItem_vBijY",ee="DocActionMore-module_infoItem_pGDVA",te="DocActionMore-module_submenuContainer_mgSTF",ne="DocActionMore-module_submenuIcon_BidTJ",re="DocActionMore-module_sceneAction_KTXPK",oe="DocActionMore-module_sceneTitle_GJRbH",ae="DocActionMore-module_switchTitle_oFkGc",ie="DocActionMore-module_switchDesc_pWX8R",ce="DocActionMore-module_switchAction_Yfn-p",le="DocActionMore-module_infoContent_PBXyF",ue="DocActionMore-module_menuItemContainer_sQ4rU",se="DocActionMore-module_menuDescribe_g8JML",de="DocActionMore-module_iconContainer_Jwqih",fe="DocActionMore-module_menu_+zp+S",pe="DocActionMore-module_iconBeta_hbg2z",me=n(4364);function he(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ye=d()("doc:actionMenu"),be=function(e){var t=Object(me.a)(e),n=t.cmd,i=t.sendAlimail,l=t.mailSending,u=t.typography,s=t.defaultFontSize,d=t.paragraphSpacing,f=t.reset,p=t.doAction,h=t.getEditorLayout,O=t.getWordCount,k=t.setSendAlimail,S=t.setMailSending,A=t.contextHolder,P=function(t,n){e.onSelect({key:t}),p(t,n),Object(Y.a)("c34619.d69461",{create_type:t})},C=function(){return null},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.map((function(e,n){return"scene"===e.type?e.actions.length>0?(r=he(e.actions),c.a.createElement(a.a.Item,{key:"scene",className:K},r.map((function(e){return c.a.createElement("div",{key:e.cmd,scene:e.cmd,className:re,"data-aspm-click":e.asp||null,onClick:function(){P(e.cmd)}},c.a.createElement(x.b,{name:e.sceneIcon,width:36,height:36}),c.a.createElement("div",{className:oe},e.title))})))):null:"select"===e.type?(l=he((i=e).options),f="",i.cmd===F.a.DOC.document_typography.cmd?f=u:i.cmd===F.a.DOC.document_layout_select.cmd&&(f=h()),c.a.createElement(a.a.Item,{key:i.cmd,className:Z,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(R,{title:i.title,options:l,value:f,onChange:function(e){return P(i.cmd,e)}}))):"switch"===e.type?t?function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),Q),n="";return e.cmd===F.a.DOC.document_paragraph_spacing.cmd&&(n=d===m.a.PARAGRAPH_SPACING.relax),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-submenu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(B,{title:e.title,defaultChecked:n,onChange:function(t){P(e.cmd,t?m.a.PARAGRAPH_SPACING.relax:m.a.PARAGRAPH_SPACING.default)}}))}(e):function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),J),n="";return e.cmd===F.a.DOC.document_layout.cmd&&(n=h()),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:ae},c.a.createElement("span",null,e.title),c.a.createElement("div",{className:ie},e.describe)),c.a.createElement(o.a,{onChange:function(t){P(e.cmd,t?m.a.VIEWPORT.adapt:m.a.VIEWPORT.fixed)},size:"small",defaultChecked:n===m.a.VIEWPORT.adapt,className:ce}))}(e):"slider"===e.type?function(e){var t=v()("doc-action-menu-item-".concat(e.cmd),X),n="",r="";return e.cmd===F.a.DOC.document_fontsize.cmd&&(r=u,n=s),c.a.createElement(a.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement(N,{className:r,title:e.title,min:e.min,max:e.max,value:n,marks:e.marks,labelMap:e.labelMap,valueMap:e.valueMap,onChange:function(t){return P(e.cmd,t)}}))}(e):"submenu"===e.type?C(e):"divide"===e.cmd?c.a.createElement(a.a.Divider,{key:n,className:t?"menu-sub":""}):function(e){return c.a.createElement(a.a.Item,{key:e.cmd,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(){P(e.cmd)}},c.a.createElement("div",{className:ue,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:de},e.icon&&c.a.createElement(x.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(y.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:pe},"Beta")))}(e);var r,i,l,f}));return n};C=function(e){var t=v()("doc-action-menu-item-".concat(e.cmd));return c.a.createElement(a.a.SubMenu,{key:e.cmd,popupClassName:H,className:t,title:c.a.createElement("div",{className:te,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:ue,"data-aspm-click":e.asp||null},c.a.createElement("div",{className:de},e.icon&&c.a.createElement(x.b,{name:e.icon,width:16})),e.tip_id?c.a.createElement(y.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&c.a.createElement("span",{className:pe},"Beta"),c.a.createElement(x.b,{className:ne,name:"arrow-right",width:16})),c.a.createElement("div",{className:se},e.describe)),onTitleClick:function(e){e.domEvent.stopPropagation()},"data-testid":"doc-action-menu-item-".concat(e.cmd)},j(e.subcmds,!0))};var T=e.book,I=e.className,M=e.doc,L=e.commandParams,D=e.commands;return ye("render, currect action",n,L),c.a.createElement("div",{className:"".concat(H," ").concat(I)},c.a.createElement(a.a,{className:fe,selectable:!1,multiple:!0,mode:"vertical"},j(D),c.a.createElement(a.a.Divider,null),function(){var t,n,r=e.doc;return c.a.createElement(a.a.Item,{key:"info",className:ee,onClick:function(e){e.domEvent.stopPropagation()}},c.a.createElement("div",{className:le},"Doc"===r.type?c.a.createElement("div",null,__("字数统计：{count}",{count:O()||0})):c.a.createElement("div",null,__("阅读数：{count}",{count:r.hits||0})),c.a.createElement("div",null,__(r.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=r.user)||void 0===t?void 0:t.name,timer:q.a.format(r.created_at,{onlyDate:!0})})),c.a.createElement("div",null,__(r.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(n=r.last_editor)||void 0===n?void 0:n.name,time:q.a.format(r.content_updated_at)})),c.a.createElement("div",null,__("编辑者："),r.contributors.map((function(e){return e.name})).join("、"))))}()),A,n===F.a.DOC.export_doc.cmd&&c.a.createElement(_.a,{doc:M,bookId:T.id,onCancel:f,exportParams:L}),n===F.a.BOOK.export_book.cmd&&c.a.createElement(w.a,{visible:!0,book:T,exportParams:L,onCancel:f}),n===F.a.DOC.import_to_doc.cmd&&c.a.createElement(E.a,{book:T,formats:V.a.getImportFormats({multi:!1}),importType:m.a.IMPORT_TYPE.PARSE,onCancel:f,onSuccess:function(t){e.onCommandsExecuted({cmd:n,result:t})}}),n===F.a.DOC.import_to_book.cmd&&c.a.createElement(E.a,{book:T,importParams:L,formats:V.a.getImportFormats({multi:!0}),importType:m.a.IMPORT_TYPE.CREATE,onCancel:f,onSuccess:function(t){e.onCommandsExecuted({cmd:n,result:t})},group:window.appData.group}),n===F.a.DOC.save_as_template.cmd&&c.a.createElement(g.a,{visible:n===F.a.DOC.save_as_template.cmd,onCancel:f,modalTitle:__("另存为模板"),book:T,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return p(F.a.DOC.create_from_template.cmd)},templateProxy:z.a.templates.v1,docProxy:z.a.docs,inEdit:e.inEdit}),n===F.a.DOC.save_published_as_version.cmd&&c.a.createElement(b.a,{doc:M,docDomain:"Doc",type:"published",onCancel:f,docVersionProxy:z.a.docVersions}),c.a.createElement(r.a,{width:500,visible:i,footer:null,closable:!l,maskClosable:!1,onCancel:function(){k(!1)}},i&&c.a.createElement(W.a,{onMailSended:function(){S(!1)},onMailSending:function(){S(!0)},doc:M})))};be.defaultProps={className:"",onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},be.propTypes={className:u.a.string,group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,commands:u.a.array.isRequired,commandParams:u.a.object,onSelect:u.a.func,onCommandsExecuted:u.a.func,dispatch:u.a.func,onSelectTemplate:u.a.func,inEdit:u.a.bool};t.a=Object(f.d)()(Object(G.b)(be))},5388:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));n(1235),n(1522);var r=function(e,t,n){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,n)},o=function(){return r("queryCommandValue","wordCount")},a=function(){return r("queryCommandValue","wordCountSelection")}},5491:function(e,t,n){"use strict";n(1219);var r=n(959),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(473),u=n(5),s=n.n(u),d=n(63),f=n(308),p=n(251),m={navigation:"index-module_navigation_uXN0h",triggerIcon:"index-module_triggerIcon_qjqIF",navigationPopoverOverlay:"index-module_navigationPopoverOverlay_h0IVJ"},h=Object(p.b)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(1459)]).then(n.bind(null,8650))}),{suspense:!0}),v=function(e){var t=e.trigger;return a.a.createElement(r.a,{type:"menu",className:m.navigation,getPopupContainer:function(e){return e.parentNode},trigger:t,overlayClassName:m.navigationPopoverOverlay,placement:"bottomLeft",content:a.a.createElement(h,{isNavigation:!0}),arrowPointAtCenter:!0,mouseLeaveDelay:.3},a.a.createElement("a",{className:s()(m.trigger),"data-testid":"dropdown-navigation","data-aspm-click":"nav_navigation.d1"},a.a.createElement(d.b,{name:"nav-menu",className:m.triggerIcon,width:12})))};v.defaultProps={trigger:"hover"},v.propTypes={trigger:c.a.string};t.a=Object(l.d)((function(e){return e}))(Object(f.b)(v))},563:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(76),o=n(801),a=n(139);function i(e){if(e.symbol){var t=a.e.URL_TYPE_LIST,n=a.e.LEGACY_URL_TYPE_LIST,r=a.e.ICON_TYPE_LIST,o=a.e.LEGACY_ICON_TYPE_LIST,i=a.e.BOOK_ICON_TYPE_MAP;if(Object.keys(i).includes(e.symbol))return i[e.symbol];if("url"===e.type){if(n.includes(e.symbol))return t[n.findIndex((function(t){return t===e.symbol}))||0];if(t.includes(e.symbol))return e.symbol}else if("icon"===e.type){if(o.includes(e.symbol))return r[o.findIndex((function(t){return t===e.symbol}))||0];if(r.includes(e.symbol))return e.symbol}}}var c={book:function(e){var t=(e.type||"").toLowerCase();return a.a[t]||a.a.default},user:function(e){var t=e.scene||"";return e.avatar?null:a.h[t]||null},doc:function(e){return"Thread"===e.type?this.thread(e):a.c[e.type.toLowerCase()]||null},template:function(e){return"lakesheet"===e.format?c.doc({type:"Sheet"}):"lake"===e.format?c.doc({type:"Doc"}):"lakemind"===e.format?c.doc({type:"Mind"}):"lakeboard"===e.format?c.doc({type:"Board"}):"lakeshow"===e.format?c.doc({type:"Show"}):"laketable"===e.format?c.doc({type:"Table"}):void 0},thread:function(e){var t=e.sub_type||"";return e.view_status===r.VIEW_STATUS.archive?"thread-archive":a.g[t.toLowerCase()]||a.g.default},resource:function(e){return Object(o.getFileIcon)(e)},artboardGroup:function(){return a.c.artboardgroup},docVersion:function(e){return a.b[e.format]},recycle:function(e){var t=e.target_type,n=e.params;if(!t||!n)return null;if("User"===t)return c.user(n.group)||a.h.default;if("Note"===t)return a.c.note;if("Issue"===t)return a.c.issue;if("ArtboardGroup"===t)return a.c.artboardgroup;if("Artboard"===t)return a.c.artboard;var r=t.toLowerCase();return c[r]&&n[r]?c[r](n[r]):null},action:function(e){var t=e.target_type,n=e.action_option;if(e.target&&e.target.book_icon){var r=i(e.target.book_icon);if(r)return r}if("Doc"===t){var l=this._entityTypeOfAction(e);return l&&a.c[l]}if("Book"===t){if(e.target)return c.book(e.target);var u=this._entityTypeOfAction(e);return u&&a.c[u]}return"User"===t&&e.target?c.user(e.target):"Resource"===t?Object(o.getFileIcon)({type:"file",ext:n}):"ArtboardGroup"===t?a.c.artboardgroup:"DocVersion"===t&&e.target?c.docVersion(e.target):"ActionTag"===t?a.c.actiontag:null},_entityTypeOfAction:function(e){var t=e.action_option.split("_"),n=null;return t.length>=1&&(n=t[t.length-1]),n},userActionLog:function(e){var t=e.target_type,n=e.subject_type;if("Book"===t)return e.target?c.book(e.target):a.a.default;if("User"===t)return a.h.default;if("Resource"===t)return c.resource({type:"file",ext:e.fileExt});var r="";return"Design"===n?r=a.c.artboardgroup:"Sheet"===n?r=a.c.sheet:"Table"===n?r=a.c.table:"Doc"===n?r=a.c.doc:"Thread"===n?r=a.c.thread:"Mind"===n?r=a.c.mind:"Board"===n?r=a.c.board:"Show"===n&&(r=a.c.show),r}},l={getName:function(e,t){if(!e||!t)return null;if(e=e.charAt(0).toLowerCase()+e.slice(1),t.book_icon){var n=i(t.book_icon);if(n)return n}if("resource"===e){var r="file";return"folder"===t.type&&(r="folder"),c.resource({type:r,ext:t.ext,name:t.title||t.name})}return c[e]?c[e](t):null},getStyle:function(e){if(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).size,n=void 0===t?24:t;return{width:"".concat(n,"px"),height:"".concat(n,"px")}}},getSelectorIcons:function(){return a.e},getSymbolName:i,getColor:function(e){if(e&&e.color)return e.color}};t.b=l},565:function(e,t,n){"use strict";n(227);var r=n(101),o=n(0),a=n.n(o),i=n(1225);t.a=function(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.className,c=e.useTip,l=e.time,u=e.disableYear,s=i.default.format(l,{disableYear:u});return c?a.a.createElement(r.a,{title:i.default.format(l,{full:!0}),placement:n},a.a.createElement("span",{className:o},s)):a.a.createElement("span",{className:o},s)}},5834:function(e,t,n){"use strict";n(227);var r=n(101),o=(n(277),n(147)),a=(n(40),n(9)),i=(n(67),n(31)),c=n(0),l=n.n(c),u=n(6),s=n.n(u),d=n(4130),f=n(1428),p=n(493),m=n(63),h=n(4041),v=n(974),y=n(308),b=n(4226),g=n(34),_=(n(53),n(12)),E=(n(48),n(11)),w=(n(207),n(49)),O=n(473),k=n(1536),S=n(47),N="DocSummaryInfo-module_modal_WEf3n",x="DocSummaryInfo-module_btnSubmit_-ZmDs";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function P(){P=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(I([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==A(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(A(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function C(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,c,"next",e)}function c(e){C(a,r,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function I(e,t,n){return t=L(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,n||[],L(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function D(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}var B=w.a.create,z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(n=I(this,t,[e]),"updateDocInfo",j(P().mark((function e(){var t,r,o,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.doc,o=t.dispatch,e.next=3,S.a.docs.updateMeta({id:r.id,custom_cover:n.state.cover,custom_description:n.state.description});case 3:return a=e.sent,e.abrupt("return",o({type:"doc/update",payload:{custom_cover:a.custom_cover,custom_description:a.custom_description}}));case 5:case"end":return e.stop()}}),e)})))),D(n,"onSubmit",(function(e){e.preventDefault(),n.coverUploader&&(n.setState({submitting:!0}),n.coverUploader.current.onSubmit().then((function(e){n.setState({cover:e||""},(function(){n.updateDocInfo().then((function(){n.setState({submitting:!1}),n.props.onOk()}))}))})).catch((function(e){E.a.error(e.message),n.setState({submitting:!1})})))})),D(n,"handleChangeSummary",(function(e){n.setState({description:e.target.value})})),n.state={submitting:!1,error:"",cover:e.doc.cover||"",description:e.doc.custom_description||""},n.coverUploader=l.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var n=t.summary,r=t.cover;e.props.doc.custom_description||e.setState({description:n}),e.props.doc.cover||e.setState({cover:r})}))}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.children,r=e.doc;return l.a.createElement(i.a,{className:N,visible:t,title:__("发布"),footer:null,onCancel:this.props.onCancel,maskClosable:!1,width:608},l.a.createElement(w.a,null,this.state.error&&l.a.createElement("div",{className:"has-error"},l.a.createElement("p",{className:"ant-legacy-form-explain"},__("出错了"))),l.a.createElement(w.a.Item,{label:__("封面"),colon:!1},l.a.createElement(k.a,{attachable_type:"Doc",attachable_id:r.id,cover:this.state.cover,ref:this.coverUploader})),l.a.createElement(w.a.Item,{colon:!1,label:l.a.createElement("span",null,__("摘要"),l.a.createElement("span",{className:"tip"},__("（150字内）")))},l.a.createElement(_.a.TextArea,{autoSize:{minRows:3},maxLength:"150",value:this.state.description,onChange:this.handleChangeSummary})),l.a.createElement(w.a.Item,null,l.a.createElement(a.a,{type:"primary",className:x,disabled:this.state.submitting,onClick:this.onSubmit},__("发布")),n)))}}])&&T(n.prototype,r),o&&T(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(c.PureComponent);z.propTypes={visible:s.a.bool.isRequired,doc:s.a.object.isRequired,getSummary:s.a.func.isRequired,onCancel:s.a.func.isRequired,onOk:s.a.func.isRequired,dispatch:s.a.func.isRequired,children:s.a.node};var F=Object(O.d)((function(e){return e}))(B()(z));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(){G=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==V(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(V(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Y(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,c,"next",e)}function c(e){Y(a,r,o,i,c,"throw",e)}i(void 0)}))}}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function W(e,t,n){return t=K(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,n||[],K(e).constructor):t.apply(e,n))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function Q(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var J=h.e.publish.key.join(),ee=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return Q(e=W(this,t,[].concat(c)),"state",{modalVisible:!1,presentEditModalVisible:!1}),Q(e,"ref",l.a.createRef()),Q(e,"bindHotkeys",(function(){Object(d.a)(J,e.readyToPublish)})),Q(e,"readyToPublish",function(){var t=$(G().mark((function t(n){var r,o,a,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,a=o.doc,i=o.book,null===(r=e.ref.current)||void 0===r||r.focus(),!i||!i.enable_auto_publish){t.next=6;break}return t.next=5,e.onPublish(n);case 5:case 9:case 13:case 17:return t.abrupt("return");case 6:if(e.props.editMode||!a.published_at){t.next=10;break}return t.next=9,e.onPublish(n);case 10:if(!e.props.editMode||!a.published_at||a.is_fake_published_at){t.next=14;break}return t.next=13,e.onPublish(n);case 14:if(!window.appData.isDocCollaborator){t.next=18;break}return t.next=17,e.onPublish(n);case 18:if(!e.shouldInitDocInfo()){t.next=21;break}return e.setState({modalVisible:!0}),t.abrupt("return");case 21:return t.next=23,e.onPublish(n);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q(e,"onPublish",function(){var t=$(G().mark((function t(n){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!!!document.querySelector("#present-edit-sidebar")){t.next=4;break}return e.setState({presentEditModalVisible:!0}),t.abrupt("return");case 4:return t.next=6,e.publishDoc(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q(e,"publishDoc",function(){var t=$(G().mark((function t(n){var r,o,a,i,c,l,u,s,d;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.book,a=r.doc,i=r.history,c=r.editMode,l=r.onsubmit,t.next=3,l();case 3:if(!c){t.next=13;break}if(window.dispatchEvent(new CustomEvent("PresentEditSideBar.visibleChange",{detail:{visible:!1}})),g.c||null===(u=window)||void 0===u||u.__setEditMode(!1),!g.c){t.next=9;break}return null!=n&&n.enterReadMode&&(Object(b.c)(a.slug,!0),null===(s=window)||void 0===s||s.__setEditMode(!1)),t.abrupt("return");case 9:d="/".concat(o.namespace,"/").concat(a.slug),"lakesheet"===a.format&&(d="/".concat(o.namespace,"/").concat(a.slug).concat(window.location.hash)),window.sessionStorage.setItem("readerEditModeChange",1),i.replace(d);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Q(e,"onCancelModal",(function(){e.setState({modalVisible:!1})})),Q(e,"getVisibilityTip",(function(){var t=e.props,n=t.group,r=t.book,o=t.doc,a=__("公开知识库发布后，所有人可见；私密知识库发布后，团队成员及协作者可见。"),i=v.a.getTypeText(o.type),c=o.published_at?__("更新#action_tip"):__("发布#action_tip");return"User"===n.type?0===o.public?a=__("该{type}是私密状态，{action}后仅自己、协作者可见。",{type:i,action:c}):1===r.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:c}):0===r.public&&(a=__("该{type}属于私密知识库，{action}后仅自己、协作者可见。",{type:i,action:c})):0===o.public?a=__("该{type}是私密状态，{action}后仅团队成员、协作者可见。",{type:i,action:c}):1===r.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:c}):0===r.public&&(a=__("该{type}属于私密知识库，{action}后团队成员及协作者可见。",{type:i,action:c})),a})),Q(e,"shouldInitDocInfo",(function(){var t=e.props,n=t.book,r=t.doc;return!(!n||"Column"!==n.layout||"Doc"!==r.type||r.published_at)})),Q(e,"renderPresentEditModal",(function(){return l.a.createElement(i.a,{className:"present-edit-modal",visible:e.state.presentEditModalVisible,closable:!1,maskClosable:!1,onCancel:$(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({presentEditModalVisible:!1}),t.next=3,e.publishDoc();case 3:case"end":return t.stop()}}),t)}))),onOk:function(){e.setState({presentEditModalVisible:!1}),window.dispatchEvent(new CustomEvent("PresentEditSideBar.saveSeparator",{})),setTimeout($(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.publishDoc();case 2:case"end":return t.stop()}}),t)}))),300)},okText:__("保存"),cancelText:__("不保存")},l.a.createElement("div",{className:"title"},l.a.createElement(m.b,{className:"warning-icon",name:"warning",width:16,height:16}),__("当前已编辑演示分页，是否保存编辑？")),l.a.createElement("p",{className:"content"},__("选择“不保存”将仅更新文档，不保存已编辑的演示分页")))})),Q(e,"renderPublishButton",(function(){var t=e.props,n=t.docStatus,r=t.publishing,o=t.disabled;return l.a.createElement(a.a,{"data-testid":"PublishButton:doc-publish-button",id:"lake-doc-publish-button",type:g.c&&n===p.DOC_STATUS.published?"default":"primary",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:o,ref:e.ref},r&&l.a.createElement("span",{className:"larkicon"},l.a.createElement(f.default,null)),l.a.createElement("span",{className:"text"},g.c&&n===p.DOC_STATUS.published?__("已发布"):e.getActionText()))})),Q(e,"renderAutoPublishButton",(function(){var t=e.props,n=t.publishing,i=t.disabled,c=t.saving,u=c?__("正在更新中"):__("已开启自动发布，内容将自动更新至阅读页面，亦可手动点击更新"),s=l.a.createElement(m.b,{className:"publish-loading-icon",name:"publish-loading-icon",width:16,height:16});return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{title:u,placement:"bottom",arrowPointAtCenter:!0,overlayStyle:c?void 0:{width:148}},l.a.createElement(a.a,{"data-testid":"PublishButton:doc-exit-edit-button",id:"lake-doc-publish-button",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:i,ref:e.ref},c||n?l.a.createElement(o.a,{indicator:s}):l.a.createElement("span",{className:"text"},__("更新")))),e.renderPresentEditModal())})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){this.bindHotkeys()}},{key:"componentDidUpdate",value:function(e){this.props.errorStatus&&this.props.errorStatus!==e.errorStatus&&this.onCancelModal()}},{key:"componentWillUnmount",value:function(){d.a.unbind(J)}},{key:"getTipTitle",value:function(){var e=this.props.doc,t="";return t="Sheet"===e.type?e.published_at?__("更新这个表格"):__("发布这个表格"):e.published_at?__("更新这篇文档"):__("发布这篇文档"),"".concat(t," (").concat(h.e.publish.title,")")}},{key:"getActionText",value:function(){return this.props.doc.published_at?__("更新"):__("发布")}},{key:"render",value:function(){return window.__readyToPublish=this.readyToPublish,this.props.book&&this.props.book.enable_auto_publish?this.renderAutoPublishButton():this.shouldInitDocInfo()?l.a.createElement("span",null,this.renderPublishButton(),this.state.modalVisible&&l.a.createElement(F,{"data-testid":"PublishButton:doc-summary-info",visible:this.state.modalVisible,onCancel:this.onCancelModal,onOk:this.onPublish,getSummary:this.props.getSummary})):l.a.createElement("span",null,this.renderPublishButton(),this.renderPresentEditModal())}}])&&q(n.prototype,c),u&&q(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,u}(c.PureComponent);ee.propTypes={group:s.a.object.isRequired,book:s.a.object.isRequired,me:s.a.object.isRequired,doc:s.a.object.isRequired,loading:s.a.bool.isRequired,disabled:s.a.bool,publishing:s.a.bool.isRequired,saving:s.a.bool,editMode:s.a.bool,onsubmit:s.a.func.isRequired,getSummary:s.a.func,history:s.a.object,docStatus:s.a.string};t.a=Object(y.b)(ee)},587:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=(n(5),n(63)),l=n(87),u=n(960),s=(n(323),n(208));function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t,n,r=e.organization,a=e.department,i=e.className,c=null!=r&&r.id?[r.name]:[];null!=a&&null!==(t=a.dept_full_path)&&void 0!==t&&t.length&&(c=[].concat(d(c),d(null==a||null===(n=a.dept_full_path)||void 0===n?void 0:n.map((function(e){return e.name})))));var l=c.join(" - ");return o.a.createElement("span",{title:l,className:i},l)}function m(e){var t=e.organization,n=e.suffix,r=e.className;return o.a.createElement("span",{title:t.name,className:r},t.name," ",n)}function h(e){var t=e.organization;e.className;return o.a.createElement("a",{href:t.host,title:t.name},t.name)}function v(e){var t=e.src,n=e.size,r=e.radius,a=e.name,i=e.className,l=e.organization,s=t||(null==l?void 0:l.logo);return s?o.a.createElement(u.a,{src:s,size:n,radius:r||4,name:a,className:i}):o.a.createElement(c.b,{name:"icon-organization",width:n,radius:r||4,className:i})}function y(e){var t,n,r,a=e.className,i=e.organization,u=(t="en-us"===Object(s.d)(),n=l.a.isPro(i),r=l.a.isEnterprise(i),n?t?"icon-spacepayment-en":"spacepayment-pro":r?t?"en-spacepayment-business":"spacepayment-business":null);return u?o.a.createElement(c.b,{name:u,width:48,height:16,className:a}):null}p.propTypes={organization:i.a.any,department:i.a.any,className:i.a.string},m.propTypes={organization:i.a.object.isRequired,suffix:i.a.node,className:i.a.string},h.propTypes={organization:i.a.object.isRequired,className:i.a.string},v.propTypes={src:i.a.string,name:i.a.string,radius:i.a.oneOfType([i.a.string,i.a.number]),size:i.a.oneOfType([i.a.string,i.a.node]),className:i.a.string,organization:i.a.object},y.propTypes={className:i.a.string,organization:i.a.object},i.a.array.isRequired,i.a.string.isRequired,i.a.string,i.a.bool},591:function(e,t,n){"use strict";var r=n(960);n.d(t,"a",(function(){return r.a}))},592:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(3),o=n(29),a=(n(42),["expandable"]),i="RC_TABLE_INTERNAL_COL_DEFINE";function c(e){var t=e.expandable,n=Object(o.a)(e,a);return"expandable"in e?Object(r.a)(Object(r.a)({},n),t):n}function l(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)||(t[n]=e[n]),t}),{})}},593:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(0),o=n(256),a=n(1238),i=r.createContext({});t.c=function(e){var t=e.children,n=e.stickyOffsets,a=e.flattenColumns,c=r.useContext(o.a).prefixCls,l=a.length-1,u=a[l],s=r.useMemo((function(){return{stickyOffsets:n,flattenColumns:a,scrollColumnIndex:(null==u?void 0:u.scrollbar)?l:null}}),[u,a,l,n]);return r.createElement(i.Provider,{value:s},r.createElement("tfoot",{className:"".concat(c,"-summary")},t))};var c=a.a},62:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));var r=function(e){return e.activity="activity",e.announcement="announcement",e}({}),o=function(e){return e.common="common",e.recommendation="recommendation",e}({}),a=function(e){return e.normal="normal",e.qrCode="qrCode",e.select="select",e}({}),i=function(e){return e.mainButton="mainButton",e.viceButton="viceButton",e.otherButton="otherButton",e}({}),c=function(e){return e.none="none",e.icon="icon",e.bg="bg",e}({}),l=function(e){return e.open="open",e.href="href",e.close="close",e}({})},702:function(e,t,n){"use strict";n(3151);var r=n(807),o=n(80),a=n.n(o),i=n(57),c=n.n(i),l=n(1234),u=n.n(l),s=n(94),d=n.n(s),f=n(135),p=n.n(f),m=n(0),h=n.n(m),v=n(6),y=n.n(v),b=n(5),g=n.n(b),_=n(95),E=n.n(_),w=n(176),O=n.n(w);var k=n(60),S=n.n(k)()("useInifiniteScroll"),N=function(e,t){var n,r,o,a,i,c,l=(n=!1,r=Object(m.useState)(n),o=O()(r,2),a=o[0],i=o[1],(c=Object(m.useRef)(a)).current=a,[a,i,Object(m.useCallback)((function(){return c.current}),[])]),s=O()(l,3),d=s[0],f=s[1],h=s[2],v=Object(m.useRef)(null);v.current=e;var y=Object(m.useCallback)(function(){var e=u()(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O()(t,1),r=n[0],!h()){e.next=3;break}return e.abrupt("return");case 3:if(null==r||!r.isIntersecting){e.next=12;break}return S("entry?.isIntersecting",null==r?void 0:r.isIntersecting),e.prev=5,f(!0),e.next=9,v.current();case 9:return e.prev=9,f(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])})));return function(t){return e.apply(this,arguments)}}(),[v]);return{loading:d,refCallback:Object(m.useCallback)((function(e){S("ref",e);var n,r=null;if(e&&!r&&window.IntersectionObserver)return S("enter"),r=new IntersectionObserver(y,{threshold:(null==t?void 0:t.threshold)||.1,root:(null===(n=t.root)||void 0===n?void 0:n.current)||null}),S("observe",e),r.observe(e),function(){return r.unobserve(e)}}),[t.threshold])}},x=n(707),A=n(147),P=(n(1006),["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadOnScroll","listContainer"]);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=h.a.forwardRef((function(e,t){var n=e.className,o=e.emptyView,a=e.onLoadMore,i=e.dataSource,l=e.renderItem,s=e.loading,f=e.showLoadingMore,m=e.pagination,v=e.children,y=e.justify,b=e.customItem,_=e.loadOnScroll,E=e.listContainer,w=d()(e,P),O=e.loadMoreText,k=void 0===O?Object(x.a)("查看更多"):O,S=s;"boolean"==typeof S&&(S={spinning:S});var C=S&&S.spinning,T=N(u()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_||!a){e.next=3;break}return e.next=3,a();case 3:case"end":return e.stop()}}),e)}))),{root:E}),I=T.loading,M=T.refCallback;_&&(k=Object(x.a)("到底了"));var L=i.length&&f?h.a.createElement("div",{className:"larkui-list-block-more"},C&&h.a.createElement(A.a,c()({justify:"block"},S)),!C&&h.a.createElement("a",{className:"larkui-list-block-more-btn",ref:M,onClick:function(e){e.preventDefault(),a&&a()}},I?Object(x.a)("加载中"):k)):null;if(C&&!L)return h.a.createElement("div",{className:g()("larkui-list","larkui-list-loading")},h.a.createElement(A.a,c()({justify:"block"},S)));var R=m;return R&&(R=m.total<=m.pageSize?null:j({showSizeChanger:!1},R)),h.a.createElement(r.b,c()({ref:t,className:g()(n,"larkui-list",{"larkui-list-justify-block":"block"===y}),loading:!1,loadMore:L,pagination:R,dataSource:i.length>0?i:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return h.a.createElement("div",{className:"blankslate"},o);var n=l(e,t);return n?b?n:h.a.createElement(r.b.Item,{key:e.id},n):h.a.createElement("div",null)}},w),v)}));T.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},T.propTypes=j(j({},r.b.ListProps),{},{className:y.a.string,emptyView:y.a.node,onLoadMore:y.a.func,dataSource:y.a.array,renderItem:y.a.func,loading:y.a.oneOfType([y.a.bool,y.a.object]),showLoadingMore:y.a.bool,pagination:y.a.object,children:y.a.node,justify:y.a.oneOf(["block","flex"]),customItem:y.a.bool,loadOnScroll:y.a.bool,listContainer:y.a.node}),E()(T,r.b);t.a=T},703:function(e,t,n){"use strict";var r=n(2),o=n(3),a=n(29),i=n(26),c=n(0),l=n(5),u=n.n(l),s=n(75),d=n(384),f=["colSpan","rowSpan","style","className"];function p(e,t){var n,l,p,m,h=e.prefixCls,v=e.className,y=e.record,b=e.index,g=e.dataIndex,_=e.render,E=e.children,w=e.component,O=void 0===w?"td":w,k=e.colSpan,S=e.rowSpan,N=e.fixLeft,x=e.fixRight,A=e.firstFixLeft,P=e.lastFixLeft,C=e.firstFixRight,j=e.lastFixRight,T=e.appendNode,I=e.additionalProps,M=void 0===I?{}:I,L=e.ellipsis,R=e.align,D=e.rowType,U=e.isSticky,B="".concat(h,"-cell");if(E)p=E;else{var z=Object(d.b)(y,g);if(p=z,_){var F=_(z,y,b);!(m=F)||"object"!==Object(i.a)(m)||Array.isArray(m)||c.isValidElement(m)?p=F:(p=F.children,l=F.props)}}"object"!==Object(i.a)(p)||Array.isArray(p)||c.isValidElement(p)||(p=null),L&&(P||C)&&(p=c.createElement("span",{className:"".concat(B,"-content")},p));var V=l||{},G=V.colSpan,Y=V.rowSpan,$=V.style,q=V.className,W=Object(a.a)(V,f),H=void 0!==G?G:k,K=void 0!==Y?Y:S;if(0===H||0===K)return null;var Z={},Q="number"==typeof N,X="number"==typeof x;Q&&(Z.position="sticky",Z.left=N),X&&(Z.position="sticky",Z.right=x);var J,ee={};R&&(ee.textAlign=R);var te=!0===L?{showTitle:!0}:L;te&&(te.showTitle||"header"===D)&&("string"==typeof p||"number"==typeof p?J=p.toString():c.isValidElement(p)&&"string"==typeof p.props.children&&(J=p.props.children));var ne,re=Object(o.a)(Object(o.a)(Object(o.a)({title:J},W),M),{},{colSpan:H&&1!==H?H:null,rowSpan:K&&1!==K?K:null,className:u()(B,v,(n={},Object(r.a)(n,"".concat(B,"-fix-left"),Q),Object(r.a)(n,"".concat(B,"-fix-left-first"),A),Object(r.a)(n,"".concat(B,"-fix-left-last"),P),Object(r.a)(n,"".concat(B,"-fix-right"),X),Object(r.a)(n,"".concat(B,"-fix-right-first"),C),Object(r.a)(n,"".concat(B,"-fix-right-last"),j),Object(r.a)(n,"".concat(B,"-ellipsis"),L),Object(r.a)(n,"".concat(B,"-with-append"),T),Object(r.a)(n,"".concat(B,"-fix-sticky"),(Q||X)&&U),n),M.className,q),style:Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},M.style),ee),Z),$),ref:(ne=O,"string"==typeof ne||Object(s.d)(ne)?t:null)});return c.createElement(O,re,T,p)}var m=c.forwardRef(p);m.displayName="Cell";var h=c.memo(m,(function(e,t){return!!t.shouldCellUpdate&&!t.shouldCellUpdate(t.record,e.record)}));t.a=h},708:function(e,t,n){"use strict";t.a={contactInfoTitle:"receipt-module_contactInfoTitle_+WTvl",receiptButtons:"receipt-module_receiptButtons_tBTuB",cancelButton:"receipt-module_cancelButton_1xXKN"}},711:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(130),n(41)),a=(n(138),n(30)),i=(n(207),n(49)),c=(n(53),n(12)),l=n(0),u=n.n(l),s=n(6),d=n.n(s),f=n(708);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var _=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=v(this,t,[e]);var r=void 0===e.isFinished||!e.isFinished;return n.state={editing:r,btnLoading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(l=[{key:"render",value:function(){var e,t,n=this,l=this.props.form,s=l.getFieldDecorator,d=l.getFieldValue,p=l.validateFields,m=l.resetFields,h=this.props,v=h.handleClickReceiptConfirm,y=h.handleApplyReceiptCancel,b=h.handleReceiptChange,g=h.data,_=h.isFinished,E=h.submitButtonText,w=!(null===(e=window.appData)||void 0===e||null===(e=e.me)||void 0===e||!e.isAdmin),O=!(null===(t=window.appData)||void 0===t||null===(t=t.me)||void 0===t||!t.isSecurityOperator),k=g||{},S=this.state,N=S.editing,x=S.btnLoading;return u.a.createElement(i.a,{layout:"vertical"},u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("发票抬头")},s("title",{initialValue:k.title,rules:[{required:!0,message:__("请填写{label}",{label:__("发票抬头")})},{validator:function(e,t,n){if(t){var r=d("tax_no");if(t.includes(r))return n(__("{label}填写有误",{label:__("发票抬头")}));if(t.length<4||/^\d+$/.test(t)||/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t))return n(__("{label}填写有误",{label:__("发票抬头")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("发票抬头")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:11},u.a.createElement(i.a.Item,{label:__("税号")},s("tax_no",{initialValue:k.tax_no,rules:[{required:!0,message:__("请填写{label}",{label:__("税号")})},{validator:function(e,t,n){if(t&&!/^[0-9A-Za-z]{18}$/.test(t))return n(__("{label}填写有误",{label:__("税号")}));n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("税号")})})))),u.a.createElement(a.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("公司注册电话")},s("telephone",{initialValue:k.telephone,rules:[{required:!0,message:__("请填写{label}",{label:__("公司注册电话")})},{validator:function(e,t,n){if(t){if(O&&t.indexOf("*")>=0)return n();if(!/^\+?[0-9\-\ ]{6,16}$/.test(t))return n(__("{label}填写有误",{label:__("公司注册电话")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("公司注册电话")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:11},u.a.createElement(i.a.Item,{label:__("开户行")},s("bank_name",{initialValue:k.bank_name,rules:[{required:!0,message:__("请填写{label}",{label:__("开户行")})},{validator:function(e,t,n){if(t){var r=d("tax_no"),o=d("bank_account"),a=d("address"),i=d("telephone");if(t.includes(r)||t.includes(o)||t.includes(a)||t.includes(i))return n(__("{label}填写有误",{label:__("开户行")}));if(t>35||/^\d+$/.test(t)||!/^[\u4e00-\u9fa5A-Za-z0-9（）() -\.]+$/.test(t))return n(__("{label}填写有误",{label:__("开户行")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("开户行")})})))),u.a.createElement(a.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("银行账户")},s("bank_account",{initialValue:k.bank_account,rules:[{required:!0,message:__("请填写{label}",{label:__("银行账户")})},{validator:function(e,t,n){if(t){var r=d("tax_no"),o=d("telephone");if(t.includes(r)||t.includes(o))return n(__("{label}填写有误",{label:__("银行账户")}));if(!/^\d{8,28}$/.test(t))return n(__("{label}填写有误",{label:__("银行账户")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("银行账户")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("公司注册地址")},s("address",{initialValue:k.address,rules:[{required:!0,message:__("请填写{label}",{label:__("公司注册地址")})},{validator:function(e,t,n){if(t){var r=d("tax_no"),o=d("bank_name"),a=d("bank_account"),i=d("telephone");if(t.includes(r)||t.includes(o)||t.includes(a)||t.includes(i))return n(__("不允许包含{label1},{label2},{label3},{label4}",{label1:__("税号"),label2:__("开户行"),label3:__("银行账户"),label4:__("公司注册电话")}));if(t>40||/^\d+$/.test(t)||!/^[\u4e00-\u9fa5A-Za-z0-9（）() -\.]+$/.test(t))return n(__("{label}填写有误",{label:__("公司注册地址")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("公司注册地址")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24,className:f.a.contactInfoTitle})),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:11},u.a.createElement(i.a.Item,{label:__("联系人")},s("contact_name",{initialValue:k.contact_name,rules:[{required:!0,message:__("请填写{label}",{label:__("联系人")})},{validator:function(e,t,n){if(t&&!/^[\u4e00-\u9fa5]{2,10}$/.test(t)&&!/^[A-Za-z][A-Za-z\s\.]{1,48}[A-Za-z]$/.test(t))return n(__("{label}填写有误",{label:__("联系人")}));n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("联系人")})})))),u.a.createElement(a.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("联系手机号")},s("contact_telephone",{initialValue:k.contact_telephone,rules:[{required:!0,message:__("请填写{label}",{label:__("联系手机号")})},{validator:function(e,t,n){if(t){if(O&&t.indexOf("*")>=0)return n();if(!/^\+?[0-9\-\ ]{6,16}$/.test(t))return n(__("{label}填写有误",{label:__("联系手机号")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("联系手机号")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("邮箱")},s("email",{initialValue:k.email,rules:[{required:!0,type:"email",message:__("请填写{label}",{label:__("邮箱")})},{validator:function(e,t,n){if(t){if(O&&t.indexOf("*")>=0)return n();if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t))return n(__("{label}填写有误",{label:__("邮箱")}))}n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("邮箱")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("联系地址")},s("detail_address",{initialValue:k.detail_address,rules:[{required:!w,message:__("请填写{label}",{label:__("联系地址")})},{validator:function(e,t,n){if(t&&(/^\d+$/.test(t)||!/^[\u4e00-\u9fa5A-Za-z0-9（）() -\.]+$/.test(t)))return n(__("{label}填写有误",{label:__("联系地址")}));n()}}]})(u.a.createElement(c.a,{disabled:!N,maxLength:100,placeholder:__("请填写{label}",{label:__("联系地址")})}))))),!_&&u.a.createElement(o.a,{className:f.a.receiptButtons},u.a.createElement(a.a,{span:24},u.a.createElement(r.a,{type:"primary",onClick:function(){return function(){if(!N)return n.setState({btnLoading:!0}),v(n.props,"special"),void n.setState({btnLoading:!1});p((function(e){e?n.setState({btnLoading:!1}):(b(!1),n.setState({editing:!1,btnLoading:!1}))}))}()},loading:x},N?__("下一步"):E||__("确认开票")),u.a.createElement(r.a,{className:f.a.cancelButton,onClick:function(){return function(){if(N)return y(),void m();b(!0),n.setState({editing:!0})}()}},N?__("取消"):__("返回修改")))))}}])&&m(n.prototype,l),s&&m(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,s}(u.a.PureComponent);_.propTypes={handleClickReceiptConfirm:d.a.func.isRequired,handleApplyReceiptCancel:d.a.func.isRequired,handleReceiptChange:d.a.func.isRequired,form:d.a.object.isRequired,data:d.a.object,isFinished:d.a.bool,submitButtonText:d.a.string},t.a=_},712:function(e,t,n){"use strict";n(40);var r=n(9),o=(n(130),n(41)),a=(n(138),n(30)),i=(n(207),n(49)),c=(n(53),n(12)),l=n(0),u=n.n(l),s=n(6),d=n.n(s),f=n(708);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var _=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=v(this,t,[e]);var r=void 0===e.isFinished||!e.isFinished;return n.state={editing:r,btnLoading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(l=[{key:"render",value:function(){var e,t,n=this,l=this.props.form,s=l.getFieldDecorator,d=l.getFieldValue,p=l.validateFields,m=l.resetFields,h=this.props,v=h.handleClickReceiptConfirm,y=h.handleApplyReceiptCancel,b=h.handleReceiptChange,g=h.data,_=h.isFinished,E=h.submitButtonText,w=h.isOrganization,O=!(null===(e=window.appData)||void 0===e||null===(e=e.me)||void 0===e||!e.isAdmin),k=!(null===(t=window.appData)||void 0===t||null===(t=t.me)||void 0===t||!t.isSecurityOperator),S=g||{},N=this.state,x=N.editing,A=N.btnLoading;return u.a.createElement(i.a,{layout:"vertical"},u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("发票抬头")},s("title",{initialValue:S.title,rules:[{required:!0,message:__("请填写{label}",{label:__("发票抬头")})},{validator:function(e,t,n){if(t){var r=d("tax_no");if(t.includes(r))return n(__("{label}填写有误",{label:__("发票抬头")}));if(t.length<2||/^\d+$/.test(t)||/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t))return n(__("{label}填写有误",{label:__("发票抬头")}))}n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:__("请填写{label}",{label:__("发票抬头")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:w?__("税号"):__("税号(选填)")},s("tax_no",{initialValue:S.tax_no,rules:[{required:!!w,message:w?__("国际商户可填18个零开具形式发票, 国内无法计税"):__("请填写{label}",{label:__("税号")})},{validator:function(e,t,n){if(t&&!/^[0-9A-Za-z]{18}$/.test(t))return n(__("{label}填写有误",{label:__("税号")}));n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:w?__("国际商户可填18个零开具形式发票, 国内无法计税"):__("请填写{label}",{label:__("税号")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24,className:f.a.contactInfoTitle})),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:11},u.a.createElement(i.a.Item,{label:__("联系人")},s("contact_name",{initialValue:S.contact_name,rules:[{required:!0,message:__("请填写{label}",{label:__("联系人")})},{validator:function(e,t,n){if(t&&!/^[\u4e00-\u9fa5]{2,10}$/.test(t)&&!/^[A-Za-z][A-Za-z\s\.]{1,48}[A-Za-z]$/.test(t))return n(__("{label}填写有误",{label:__("联系人")}));n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:__("请填写{label}",{label:__("联系人")})})))),u.a.createElement(a.a,{push:2,span:11},u.a.createElement(i.a.Item,{label:__("联系手机号")},s("contact_telephone",{initialValue:S.contact_telephone,rules:[{required:!0,message:__("请填写{label}",{label:__("联系手机号")})},{validator:function(e,t,n){if(t){if(k&&t.indexOf("*")>=0)return n();if(!/^\+?[0-9\-\ ]{6,16}$/.test(t))return n(__("{label}填写有误",{label:__("联系手机号")}))}n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:__("请填写{label}",{label:__("联系手机号")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("邮箱")},s("email",{initialValue:S.email,rules:[{required:!0,type:"email",message:__("请填写{label}",{label:__("邮箱")})},{validator:function(e,t,n){if(t){if(k&&t.indexOf("*")>=0)return n();if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t))return n(__("{label}填写有误",{label:__("邮箱")}))}n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:__("请填写{label}",{label:__("邮箱")})}))))),u.a.createElement(o.a,null,u.a.createElement(a.a,{span:24},u.a.createElement(i.a.Item,{label:__("联系地址")},s("detail_address",{initialValue:S.detail_address,rules:[{required:!O,message:__("请填写{label}",{label:__("联系地址")})},{validator:function(e,t,n){if(t&&(/^\d+$/.test(t)||!/^[\u4e00-\u9fa5A-Za-z0-9（）() -\.]+$/.test(t)))return n(__("{label}填写有误",{label:__("联系地址")}));n()}}]})(u.a.createElement(c.a,{disabled:!x,maxLength:100,placeholder:__("请填写{label}",{label:__("联系地址")})}))))),!_&&u.a.createElement(o.a,{className:f.a.receiptButtons},u.a.createElement(a.a,{span:24},u.a.createElement(r.a,{type:"primary",onClick:function(){return function(){if(!x)return n.setState({btnLoading:!0}),v(n.props),void n.setState({btnLoading:!1});p((function(e){e?n.setState({btnLoading:!1}):(b(!1),n.setState({editing:!1,btnLoading:!1}))}))}()},loading:A},x?__("下一步"):E||__("确认开票")),u.a.createElement(r.a,{className:f.a.cancelButton,onClick:function(){return function(){if(x)return y(),void m();b(!0),n.setState({editing:!0})}()}},x?__("取消"):__("返回修改")))))}}])&&m(n.prototype,l),s&&m(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,s}(u.a.PureComponent);_.propTypes={handleClickReceiptConfirm:d.a.func.isRequired,handleApplyReceiptCancel:d.a.func.isRequired,handleReceiptChange:d.a.func.isRequired,form:d.a.object.isRequired,data:d.a.object,isFinished:d.a.bool,submitButtonText:d.a.string,isOrganization:d.a.bool},t.a=_},7678:function(e,t,n){"use strict";t.a={wordCount:"index-module_wordCount_Wzj9E"}},7735:function(e,t,n){"use strict";n(67);var r=n(31),o=(n(227),n(101)),a=n(0),i=n.n(a),c=n(78),l=n(6),u=n.n(l),s=n(473),d=n(60),f=n.n(d),p=n(4405),m=n(1463),h=n(4443),v=n(63),y=n(4418),b=n(282),g=n(5491),_=n(974),E=n(4402),w=n(114),O=n(1226),k=n(4041),S=n(5254),N=n(47),x=n(285),A=n(5834),P=n(4615),C=n(5248),j=(n(277),n(147)),T=n(349),I=n(308);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}function D(e,t,n){return t=B(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],B(e).constructor):t.apply(e,n))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}var F=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,t,[e])).state={loading:!0,contributors:[],user:null,last_editor:null,wordCount:null},n.shouldShowWordCount="Doc"===e.doc.type,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.doc,r=t.book;if(this.shouldShowWordCount){var o=this.props.getWordCount();this.setState({wordCount:o})}this.props.dispatch({type:"proxy.web/docs.findOne",payload:{data:{id:n.slug,book_id:r.id,mode:"raw"}}}).then((function(t){e.setState({loading:!1,user:t.user,last_editor:t.last_editor})})),this.props.dispatch({type:"proxy.web/docs.contributors",payload:{data:{id:n.slug,book_id:r.id}}}).then((function(t){e.setState({contributors:t})}))}},{key:"render",value:function(){var e=this.props.doc;if(this.state.loading)return i.a.createElement(j.a,{justify:"block",className:"doc-insight-spin"});var t=this.state,n=t.user,r=t.last_editor,o=t.contributors;return i.a.createElement("div",{className:"doc-insight"},i.a.createElement("div",{className:"head"},__("统计信息")),i.a.createElement("div",{className:"meta"},this.shouldShowWordCount&&i.a.createElement("div",{className:"word-count"},i.a.createElement("span",{className:"num"},this.state.wordCount),i.a.createElement("span",{className:"desc"},__("字"))),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"/".concat(n.login),className:"user"},n.name),i.a.createElement("span",null,__("创建于#middle")," "),i.a.createElement(T.a,{className:"time",time:e.created_at})),i.a.createElement("li",null,i.a.createElement("a",{href:"/".concat(r.login),className:"user"},r.name),i.a.createElement("span",null,__("最后编辑于")," "),i.a.createElement(T.a,{className:"time",time:e.content_updated_at})))),i.a.createElement("div",{className:"contributors"},i.a.createElement("h4",{className:"title"},__("编辑者")),i.a.createElement("ul",null,o.map((function(e,t){return i.a.createElement("li",{className:"user",key:n.id},i.a.createElement("a",{href:"/".concat(e.login),target:"_blank"},i.a.createElement("span",null,e.name)),t!==o.length-1&&__("、"))})))))}}])&&L(n.prototype,r),o&&L(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(a.PureComponent);F.propTypes={doc:u.a.object.isRequired,getWordCount:u.a.func.isRequired};var V=Object(s.d)((function(e){return e}))(Object(I.b)(F,!0)),G=n(5341),Y=(n(1219),n(959)),$=n(591),q={avatar:"EditorHeaderCollabUsers-module_avatar_humc6",name:"EditorHeaderCollabUsers-module_name_RmtES",sign:"EditorHeaderCollabUsers-module_sign_f2lq4",signInner:"EditorHeaderCollabUsers-module_signInner_UJ3E3",more:"EditorHeaderCollabUsers-module_more_x6mXq",moreUsers:"EditorHeaderCollabUsers-module_moreUsers_2uEpx"};function W(e){var t=e.user;return i.a.createElement("span",{className:q.avatar},i.a.createElement($.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&i.a.createElement("span",{className:q.sign},i.a.createElement("div",{className:q.signInner,style:{background:t.color}})))}function H(e){var t,n=((null===(t=document.querySelector("#header"))||void 0===t?void 0:t.clientWidth)||960)-600,r=Math.max(Math.min(9,n/32-1),0),a=e.users,c=e.me,l=[],u=[];return a.length<=r?l=a.slice(0,a.length):(l=a.slice(0,r),u=a.slice(r)),i.a.createElement(i.a.Fragment,null,l.map((function(e){return i.a.createElement(o.a,{title:e.name,key:e.id},i.a.createElement("span",null,i.a.createElement(W,{user:e})))})),u.length>0&&i.a.createElement(Y.a,{overlayInnerStyle:{maxHeight:300,overflow:"auto"},placement:"bottom",content:i.a.createElement("ul",{className:q.moreUsers},u.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(W,{user:e}),i.a.createElement("a",{href:"/".concat(e.login),className:q.name,target:"_blank"},e.name))})))},i.a.createElement("a",{className:"".concat(q.avatar," ").concat(q.more)},"+",u.length)),i.a.createElement(o.a,{title:0===a.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我"),overlayStyle:{minWidth:"24px",width:0===a.length?"192px":"unset"}},i.a.createElement("span",null,i.a.createElement(W,{user:c}))))}H.propTypes={users:u.a.array.isRequired,me:u.a.object.isRequired};var K=H,Z=n(5029);n(4546);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(){X=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Q(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Q(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function J(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){J(a,r,o,i,c,"next",e)}function c(e){J(a,r,o,i,c,"throw",e)}i(void 0)}))}}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ue(r.key),r)}}function oe(e,t,n){return t=ie(t),function(e,t){if(t&&("object"==Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,n||[],ie(e).constructor):t.apply(e,n))}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q(t)?t:t+""}var se=f()("editor:doc:head"),de=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(n=oe(this,t,[e]),"handleKeyDownEvent",(function(e){(e.ctrlKey||e.metaKey)&&74===e.keyCode&&(e.preventDefault(),n.setState({showSearchModal:!0}))})),le(n,"saveMeta",(function(e,t){var r=n.props,o=r.doc,a=r.book,i={id:o.id},c=!1,l=function(){"function"==typeof t&&t(),n.setState({showMetaEdit:!1})};Object.keys(e).forEach((function(t){("custom_cover"===t&&e.custom_cover!==o.cover||void 0!==e[t]&&e[t]!==o[t])&&(c=!0,i[t]=e[t])})),c?(se("save meta:",i),n.props.dispatch({type:"proxy.web/docs.updateMeta",payload:{data:i}}).then((function(e){n.props.dispatch({type:"doc/update",payload:i}),n.props.dispatch({type:"book/update",payload:{toc:a.toc.map((function(e){return e.url===o.url||e.doc_id===o.id?ne(ne({},e),{},{title:i.title}):e})),docs:a.toc.map((function(e){return e.id===o.id?ne(ne({},e),{},{title:i.title}):e}))}}),l(),i.slug&&(window.location.href="/".concat(a.namespace,"/").concat(i.slug,"/edit"))})).catch((function(e){t(e)}))):l()})),le(n,"showStatics",(function(){n.setState({showStatics:!0})})),le(n,"showMetaEdit",(function(){n.setState({showMetaEdit:!0})})),le(n,"saveTitle",(function(e){n.saveMeta({title:e})})),le(n,"exec",function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se("exec: ".concat(t)),e.t0=t,e.next=e.t0===w.a.DOC.statics.cmd?4:e.t0===w.a.DOC.edit_meta.cmd||e.t0===w.a.DOC.edit_table_meta.cmd?6:e.t0===w.a.DOC.history.cmd?8:e.t0===w.a.DOC.save_editing_as_version.cmd?10:e.t0===w.a.DOC.save_as_template.cmd?14:17;break;case 4:return n.showStatics(),e.abrupt("break",18);case 6:return n.showMetaEdit(),e.abrupt("break",18);case 8:return n.props.showHistory(),e.abrupt("break",18);case 10:return e.next=12,n.props.save(k.h.USER_SAVE_AS_VERSION);case 12:return n.setState({showSaveAsVersion:!0}),e.abrupt("break",18);case 14:return e.next=16,n.props.save(k.h.USER_SAVE_AS_TEMPLATE);case 16:case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le(n,"getDisabledActions",(function(){var e=[];return window.appData.isDocCollaborator&&e.push(w.a.DOC.delete),e})),n.state={showMetaEdit:!1,showStatics:!1,showSaveAsVersion:!1,showSearchModal:!1},n.docTitleRef=i.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.props.editMode||window.addEventListener("keydown",this.handleKeyDownEvent,!1)}},{key:"componentWillUnmount",value:function(){this.props.editMode||window.removeEventListener("keydown",this.handleKeyDownEvent)}},{key:"isPublishEnabled",value:function(){var e=this.props,t=e.editable,n=e.publishing,r=e.loading;return t&&!n&&!r}},{key:"renderDocSaveTip",value:function(){var e=this.props.editMode,t=i.a.createElement("div",{className:"lark-editor-header-status"},i.a.createElement("div",{className:"lark-editor-save-tip"},i.a.createElement(P.a,{netStatus:this.props.netStatus,docStatus:this.props.docStatus,savedAt:this.props.savedAt,showHistory:this.props.showHistory}),i.a.createElement(v.b,{name:"cloud",width:16})));if(e){var n=document.getElementById("docSaveTipContainer");return n?Object(c.createPortal)(t,n):null}return i.a.createElement("div",{className:"lark-editor-header-status"},i.a.createElement("div",{className:"lark-editor-save-tip"},i.a.createElement(P.a,{netStatus:this.props.netStatus,docStatus:this.props.docStatus,savedAt:this.props.savedAt,showHistory:this.props.showHistory}),i.a.createElement(v.b,{name:"cloud",width:16})))}},{key:"renderEditorHeaderCollabUsers",value:function(){var e=this.props,t=e.me,n=e.editMode;if(e.collabUsers){var r=i.a.createElement("div",{className:"lark-editor-collab-users",style:n?{marginLeft:16,display:"flex"}:{}},i.a.createElement(K,{users:this.props.collabUsers,me:t}));if(n){var o=document.getElementById("collabUsersContainer");return o?Object(c.createPortal)(r,o):null}return r}return null}},{key:"renderPublishButton",value:function(){var e=this.props,t=e.doc,n=e.book,r=e.me,o=e.group,a=e.pageReady,l=e.saving,u=e.publishing,s=e.publish,d=e.getSummary,f=e.errorStatus,p=e.editMode,m=e.history,h=e.docStatus,v=i.a.createElement(A.a,{doc:t,book:n,group:o,me:r,loading:!a,saving:l,title:_.a.getFormalTitle(t),disabled:!this.isPublishEnabled(),publishing:u,onsubmit:s,getSummary:d,errorStatus:f,editMode:p,history:m,docStatus:h});if(p){var y=document.getElementById("publishButtonContainer");return y?Object(c.createPortal)(v,y):null}return v}},{key:"isHideNavMode",value:function(){return Object(x.b)()}},{key:"render",value:function(){var e,t,n=this,a=this.props,c=a.organization,l=a.group,u=a.book,s=a.doc,d=a.shortDocTitle,f=a.me,k=a.editMode;return window.__editMode_show_history=function(){return n.exec(w.a.DOC.history.cmd)},i.a.createElement("div",{className:"lark-editor-header",type:s.type,style:k?{display:"none"}:{}},i.a.createElement("div",{className:"lark-editor-header-content"},!this.isHideNavMode()&&i.a.createElement("div",{className:"lark-editor-header-back"},i.a.createElement(g.a,{book:u,doc:s,group:l})),i.a.createElement("div",{className:"lark-editor-header-info",style:this.isHideNavMode()?{marginLeft:76}:{}},i.a.createElement("div",{className:"lark-editor-header-title",ref:this.docTitleRef},i.a.createElement(Z.a,{title:s.title,saveTitle:this.saveTitle}),i.a.createElement(_.b,{group:l,book:u,doc:s,organization:c,getPopupContainer:function(){return n.docTitleRef.current}})),i.a.createElement("div",{className:"lark-editor-header-crumb-status"},!this.isHideNavMode()&&i.a.createElement(i.a.Fragment,null,!d&&i.a.createElement(E.a,{group:l,book:u,noGroup:!1,showBookIcon:!1,disableClickOnIcon:!0}),!d&&i.a.createElement("span",{className:"split"},"|")),this.renderDocSaveTip())),i.a.createElement("div",{className:"lark-editor-header-action"},this.renderEditorHeaderCollabUsers(),(null===(e=s.abilities)||void 0===e?void 0:e.create_collaborator)&&i.a.createElement("div",{className:"lark-editor-header-action-item",style:{marginRight:14,paddingTop:5,cursor:"pointer"}},i.a.createElement(h.ShareButton,{shareViewType:"DOC",key:"collaborator-doc-".concat(s.id),targetResource:s,organization:c,book:u,group:l,canCollaborator:null===(t=s.abilities)||void 0===t?void 0:t.create_collaborator,onlyCollaborator:!0,me:f},i.a.createElement(o.a,{title:__("协作"),placement:"bottom"},i.a.createElement("span",{"data-testid":"EditorHeader:doc-action-collaborate","data-aspm-click":"d225876"},i.a.createElement(v.b,{name:"nav-invite",width:20}))))),"Show"===s.type&&i.a.createElement("div",{className:"lark-editor-play-show"},i.a.createElement(S.a,null)),i.a.createElement("div",{className:"lark-editor-header-action-item"},this.renderPublishButton()),i.a.createElement("div",{className:"lark-editor-header-more","data-testid":"EditorHeader:lark-editor-header-more"},i.a.createElement(m.a,{"data-testid":"EditorHeader:doc-reader-more-actions",direction:"circle",iconWidth:20,content:i.a.createElement(G.a,{commands:O.a.adjustCommands(O.a.additionalActionsInEditPage(s)),disabledCommands:this.getDisabledActions(),book:u,doc:s,onSelect:function(e){var t=e.key;n.exec(t)},onCommandsExecuted:function(e){e.cmd===w.a.DOC.delete.cmd&&n.props.onDeleted()},inEdit:!0})})))),this.state.showMetaEdit&&i.a.createElement(r.a,{width:514,visible:!0,centered:!0,title:__("设置"),footer:null,onCancel:function(){n.setState({showMetaEdit:!1})},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},i.a.createElement(C.a,{doc:s,group:l,book:u,save:this.saveMeta,getSummary:this.props.getSummary,key:"doc-meta-edit-from-title"})),this.state.showStatics&&i.a.createElement(r.a,{width:384,visible:!0,footer:null,onCancel:function(){n.setState({showStatics:!1})}},i.a.createElement(V,{getWordCount:this.props.getWordCount})),this.state.showSaveAsVersion&&i.a.createElement(p.a,{doc:s,docDomain:"Doc",type:u.enable_auto_publish?"published":"draft",onCancel:function(){n.setState({showSaveAsVersion:!1})},docVersionProxy:N.a.docVersions}),this.state.showSearchModal&&i.a.createElement(y.default,{onCancel:ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(500);case 2:n.setState({showSearchModal:!1});case 3:case"end":return e.stop()}}),e)}))),sence:"modal",subSence:"docEdit",visible:this.state.showSearchModal,forceDisplay:!0,jumpToNewPage:!0}))}}])&&re(n.prototype,a),l&&re(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,l}(a.PureComponent);de.defaultProps={collabUsers:null},de.propTypes={dispatch:u.a.func.isRequired,organization:u.a.object,group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object.isRequired,me:u.a.object.isRequired,collabUsers:u.a.array,editing:u.a.bool,editable:u.a.bool,pageReady:u.a.bool.isRequired,publishing:u.a.bool.isRequired,saving:u.a.bool,savedAt:u.a.object,shortDocTitle:u.a.bool,save:u.a.func.isRequired,publish:u.a.func.isRequired,showHistory:u.a.func.isRequired,getWordCount:u.a.func,getSummary:u.a.func,onDeleted:u.a.func,netStatus:u.a.string,docStatus:u.a.string,editMode:u.a.bool,history:u.a.object};t.a=Object(s.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}))(de)},7745:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(35),i=n(4010),c=n(493),l=n(78),u=n.n(l),s=n(6),d=n.n(s),f=n(473),p=n(5),m=n.n(p),h=n(424),v=n.n(h),y=n(964),b=n.n(y),g=n(178),_=n.n(g),E=n(220),w=n.n(E),O=n(4632),k=n(216),S=n(157),N=n(1518),x=n(1250),A=n(253),P=n(4119),C=n(7735),j=n(47),T=n(5388),I=n(7678);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e){var t=e.doc,n=document.getElementById("commonEditPage"),o=M(r.useState(0),2),a=o[0],i=o[1],c=M(r.useState(0),2),l=c[0],u=c[1];r.useEffect((function(){u(t.word_count||0)}),[]);var s=r.useCallback(v()((function(){var e=Object(T.a)();u(e)}),3e3,{leading:!0}),[t]);return r.useEffect((function(){return window.addEventListener("GetDocWordCount",s,!1),function(){window.removeEventListener("GetDocWordCount",s,!1),s.cancel()}}),[]),r.useEffect((function(){var e,t=function(){var e=Object(T.b)();i(e||0)};return document.addEventListener("selectionchange",t),null===(e=window.__engine)||void 0===e||e.on("selectionchange",t),function(){var e;document.removeEventListener("selectionchange",t),null===(e=window.__engine)||void 0===e||e.off("selectionchange",t)}}),[]),r.useEffect((function(){var e=function(e){n&&!n.contains(e.target)&&i(0)};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[]),r.createElement("div",{className:I.a.wordCount},a?"".concat(a,"/").concat(l):l,__("字"))}var D=n(4740),U=n(5203),B={creationGuide:"CommonEditPage-module_creationGuide_AaTbI",guideWrapper:"CommonEditPage-module_guideWrapper_+9pCK",adaptMode:"CommonEditPage-module_adaptMode_Tq+Y+",editMode:"CommonEditPage-module_editMode_pYkEm",commonEditPage:"CommonEditPage-module_commonEditPage_Cwjj2"};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(null,arguments)}function G(){G=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==z(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(z(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){q(a,r,o,i,c,"next",e)}function c(e){q(a,r,o,i,c,"throw",e)}i(void 0)}))}}var H=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(31),n.e(32),n.e(1368)]).then(n.bind(null,7916))})),K=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(31),n.e(1360)]).then(n.bind(null,5403))})),Z=window.self!==window.top;function Q(e){return A.TYPE_FORMAT_MAP[e.type]===A.FORMAT.LAKETABLE&&!window.appData.isDesktopApp}function X(e,t,n){return J.apply(this,arguments)}function J(){return(J=W(G().mark((function e(t,n,r){var o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.docs.copy({doc_id:t.id,target_doc_id:n.id,only_draft:!0});case 2:if((o=e.sent).content=o.content||o.body_draft_asl||o.body_draft,!Q(o)){e.next=6;break}return e.abrupt("return",{title:r||o.title,content:o.content,type:A.FORMAT.LAKETABLE});case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t,n,r){return te.apply(this,arguments)}function te(){return(te=W(G().mark((function e(t,n,r,o){var a,i,c,l,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.k)(t.id);case 2:if(a=e.sent,i=A.FORMAT_TYPE_MAP[a.format],c=o||a.name,i!==n.type){e.next=13;break}if(a.format!==A.FORMAT.LAKETABLE&&!/<card.*name=\"dataTable\"/.test(a.doclet.body_asl)){e.next=11;break}return e.next=9,Object(x.c)(r,a,{docId:n.id});case 9:return l=e.sent,e.abrupt("return",{title:c,content:a.format===A.TYPE_FORMAT_MAP.Doc?l.body_draft_asl:l.body_draft});case 11:return Object(S.spmClick)(N.a.TEMPLATE_USAGE,{id:a.id,type:a.type,format:a.format,name:a.name,platform:"pc"}),e.abrupt("return",{title:c,content:a.format===A.TYPE_FORMAT_MAP.Doc?a.doclet.body_asl:a.doclet.body});case 13:return e.next=15,Object(x.c)(r,a);case 15:u=e.sent,window.open("/".concat(r.namespace,"/").concat(u.slug,"/edit"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){var t,n=e.doc,i=e.book,l=e.group,s=e.header,d=e.editMode,f=e.dispatch,p=e.me,h=s||C.a,y=Object(r.useRef)(null),b=Object(a.useHistory)(),g=Object(a.useParams)().doc,_=Object(r.useRef)(!1),E=Object(D.a)({doc:n,book:i,group:l,dispatch:f,onPublishSuccessRedirect:window.appData.isYuqueMobileApp?function(e){return setTimeout((function(){window.location.replace(e)}),1e3)}:void 0,readerEditMode:d,matchCondition:d?(null==n||null===(t=n.readerEditModeData)||void 0===t?void 0:t.matchCondition)||{}:window.appData.matchCondition||{},currentDocSlug:g,me:p}),S=E.getOpenEditorConfig(),N=E.getWorkflow(),x=E.getTheme(),A=E.state,j=A.historyView,T=A.wizardView,I=A.editorLoaded,M=A.docTitle,L=E.buildEditorProps(),z=E.buildHistoryProps(),$=E.buildHeadProps(),q=E.buildStatusProps();Object(r.useEffect)((function(){d&&!_.current&&(!0!==I||n.slug!==g||w()(n.body_asl)||(E.start(n),_.current=!0))}),[I,n,g]),Object(r.useEffect)((function(){d||!0!==I||E.start()}),[I]);var J=Y(o.a.useState((function(){return window.innerHeight})),2),te=J[0],ne=J[1];o.a.useEffect((function(){var e=v()((function(){ne(window.innerHeight)}),100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){return function(){d&&(N.save(c.SAVE_TYPE.AUTO),N.destroy())}}),[d]);var oe=Y(o.a.useState(26),2),ae=oe[0],ie=oe[1];Object(r.useEffect)((function(){if("Doc"===n.type&&T){var e,t=null===(e=y.current)||void 0===e?void 0:e.querySelector(".ne-engine :first-child");t&&t.offsetHeight&&ie(t.offsetHeight)}}),[T,n.type]);var ce=Y(o.a.useState(50),2),le=ce[0],ue=ce[1];o.a.useLayoutEffect((function(){"Doc"===n.type&&T&&setTimeout((function(){var e,t=null===(e=y.current)||void 0===e?void 0:e.querySelector(".ne-editor .lake-title-editor textarea:first-child");t&&t.offsetHeight&&ue(t.offsetHeight)}),0)}),[M,T,n.type]),Object(P.a)(n.title,d);var se=function(){var e=W(G().mark((function e(t){var r,o,a,c,l=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(l.length>1&&void 0!==l[1])||l[1])){e.next=8;break}return e.next=4,ee(t,n,i,M);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",E.useTemplate(r));case 8:return e.next=10,X(t,n,M);case 10:o=e.sent,E.useTemplate(o),Q(o)&&(null==N||null===(a=N.engine)||void 0===a||null===(c=a.requestRecords)||void 0===c||c.call(a));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=e.layout||x.viewport||"fixed",fe=o.a.useMemo((function(){return 110+(le||50)+37+20+2*(ae||26)+16}),[le,ae]);return o.a.createElement("div",{id:"commonEditPage",className:m()("lark",B.commonEditPage,e.className),"data-testid":"lock-based-doc-editor"},I&&o.a.createElement(re,{doc:n}),o.a.createElement("div",{className:m()("lark-editor","lark-editor-lake",{"lark-iframe-mode":Z,"lake-editor-adapt":"adapt"===de}),ref:y},!S.isServify&&u.a.createPortal(o.a.createElement(O.a,q),document.querySelector("body")),S.showHeader&&o.a.createElement(h,V({},$,{editMode:d,history:b})),e.renderEditor(L)),I&&"Doc"===n.type&&o.a.createElement(R,{doc:n}),j&&e.renderHistory(z),Z&&S.isEmbedMode&&N.isReady()&&o.a.createElement(U.b,{doc:n,getContainer:function(){return y},getContent:N.engine.getEditorContent,setContent:N.engine.setContent,getTitle:function(){return n.title},workflow:N,autoHeight:S.autoHeight,backgroundColor:S.backgroundColor,bodyBackgroundColor:S.bodyBackgroundColor,toolbarBackgroundColor:S.toolbarBackgroundColor,insertContent:function(e){N.engine.insertContent(e)},publish:E.onPublish}),!Z&&o.a.createElement(k.a,{noMessage:!0},o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null)},"Doc"===(null==n?void 0:n.type)?o.a.createElement("div",{className:m()(B.creationGuide,F(F({},B.adaptMode,"adapt"===x.viewport),B.editMode,d)),style:{top:fe}},o.a.createElement(K,{className:B.guideWrapper,doc:n,height:te-fe,book:i,group:l,visible:T,isFullWidth:"adapt"===x.viewport,onUseTemplate:se})):o.a.createElement(H,{currentDoc:n,viewport:x.viewport,visible:T,book:i,group:l,useTemplate:se,requestRecords:N.engine&&N.engine.requestRecords}))))}function re(e){var t=e.doc,n=Object(r.useRef)(!1);return Object(r.useEffect)((function(){var e=document.querySelector(i.a)||document.querySelector(i.b),r=v()((function(e){n.current&&3!==e.eventPhase&&i.c.saveEditPosition(t.id)}),300);return null==e||e.addEventListener("scroll",r),function(){r.cancel(),null==e||e.removeEventListener("scroll",r)}}),[t.id]),Object(r.useEffect)((function(){var e=setTimeout((function(){n.current=!0}),1e3);return function(){clearTimeout(e)}}),[]),Object(r.useEffect)((function(){var e=function(){i.c.clearPosition()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),null}function oe(e){return e.editMode&&e.doc.readerEditModeData?o.a.createElement(ne,e):e.editMode?o.a.createElement("span",{"data-testid":"readerEditModeData-null"}):o.a.createElement(ne,e)}ne.propTypes={doc:d.a.object.isRequired,book:d.a.object.isRequired,group:d.a.object.isRequired,layout:d.a.oneOf(["fixed","adapt"]),renderEditor:d.a.func.isRequired,renderHistory:d.a.func.isRequired,header:d.a.elementType,error:d.a.object,editMode:d.a.bool};t.default=Object(f.d)((function(e){return{book:e.book,doc:e.doc,group:e.group,me:e.me}}))(o.a.memo(oe,(function(e,t){var n=["book","doc","group","me","layout","editMode","error"];return b()(_.a.apply(void 0,[e].concat(n)),_.a.apply(void 0,[t].concat(n)))})))},795:function(e,t){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},796:function(e,t,n){const r=n(1419),o=n(1420);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return o.testNumeric(e)?t.NUMERIC:o.testAlphanumeric(e)?t.ALPHANUMERIC:o.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},798:function(e,t,n){"use strict";var r=n(1446);n(2916),e.exports=r},799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getENV=t.getUA=t.ENV_ENUM_SUB=t.APP_TYPE=t.ENV_ENUM=void 0;var r=n(961),o=n(961);Object.defineProperty(t,"ENV_ENUM",{enumerable:!0,get:function(){return o.ENV_ENUM}}),Object.defineProperty(t,"APP_TYPE",{enumerable:!0,get:function(){return o.APP_TYPE}}),Object.defineProperty(t,"ENV_ENUM_SUB",{enumerable:!0,get:function(){return o.ENV_ENUM_SUB}});var a,i,c=n(2906);(i=a||(a={})).singlePage="singlePage",i.miniApp="miniApp",i.miniWidget="miniWidget";t.getUA=function(){var e="";try{"undefined"!=typeof navigator&&(e=navigator&&(navigator.userAgent||navigator.swuserAgent)||"")}catch(t){e=""}return e};t.getENV=function(){var e=(0,t.getUA)(),n=/iPhone|iPad|iPod|iOS/i.test(e),o=/Android/i.test(e),i=(/Nebula/i.test(e),/DingTalk/i.test(e)),l=/dd-web/i.test(e),u="object"==typeof nuva,s="object"==typeof dd&&"function"==typeof dd.dtBridge,d=s&&n||u&&n,f=i||c.default.isDingTalk,p=n&&f||c.default.isWeexiOS||d,m=o&&f||c.default.isWeexAndroid,h=s,v=l,y=r.APP_TYPE.WEB;if(v)y=r.APP_TYPE.WEBVIEW_IN_MINIAPP;else if(h)y=r.APP_TYPE.MINI_APP;else if(c.default.isWeexiOS||c.default.isWeexAndroid)try{y=weex.config.ddWeexEnv===a.miniWidget?r.APP_TYPE.WEEX_WIDGET:r.APP_TYPE.WEEX}catch(e){y=r.APP_TYPE.WEEX}var b,g,_="*",E=e.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===E&&(E=e.match(/DingTalk\/([a-zA-Z0-9.-]+)/)),E&&E[1]&&(g=E[1]);var w="";"undefined"!=typeof name&&(w=name);var O=function(){try{if("undefined"!=typeof window&&void 0!==window.top)return window.top.__dingtalk_jsapi_top_platfrom_config__}catch(e){return}}();try{O&&"undefined"!=typeof window&&void 0!==window.top&&window.top!==window&&(w=top.name)}catch(e){}if(w)try{var k=JSON.parse(w);k.hostVersion&&(g=k.hostVersion),_=k.language||navigator.language||"*",b=k.containerId}catch(e){}var S=!!b;S&&!g&&(E=e.match(/DingTalk\(([a-zA-Z0-9\.-]+)\)/))&&E[1]&&(g=E[1]);var N,x=r.ENV_ENUM_SUB.noSub;return(N=p?r.ENV_ENUM.ios:m?r.ENV_ENUM.android:S?r.ENV_ENUM.pc:O&&O.platform?O.platform:r.ENV_ENUM.notInDingTalk)===r.ENV_ENUM.pc&&(x=e.indexOf("Macintosh; Intel Mac OS")>-1?r.ENV_ENUM_SUB.mac:r.ENV_ENUM_SUB.win),{platform:N,platformSub:x,version:g,appType:y,language:_}}},801:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=n(715),i=a.RAW_EXTNAMES,c=a.IMAGE_EXTNAMES,l=a.VIDEO_EXTNAMES,u=a.AUDIO_EXTNAMES,s=a.PRESENTATION_EXTNAMES,d=a.SHEET_EXTNAMES,f=a.MMAP_EXTNAMES,p=a.ZIP_EXTNAMES,m=a.ALLOW_RESOURCE_EDIT_EXTNAMES,h=n(193).FileUtils,v=n(125),y=n(126),b="#eef4fd",g="#eef7f1",_="#f5f2fb",E="#fef8ec",w="#fcf1ec";function O(e){return!!(e=e.toLowerCase()).endsWith(".mindnode.zip")||(!!e.endsWith(".xmind.zip")||(!!e.endsWith(".mpp.zip")||!!e.endsWith(".mmap.zip")))}function k(e){return h.getFileExtname(e)}function S(e,t){if(!t)return!1;switch(t.ext=t.ext?t.ext.toLowerCase():k(t),e){case"raw":return i.includes(t.ext);case"image":return c.includes(t.ext);case"video":return l.includes(t.ext);case"audio":return u.includes(t.ext);case"presentation":return s.includes(t.ext);case"sheet":return d.includes(t.ext);case"rp":return["rp","rplib"].includes(t.ext);case"zip":return p.includes(t.ext);case"mmap":return f.includes(t.ext);case"ppt":return["ppt","pptx"].includes(t.ext);case"office":return[].concat(r(v),r(y)).map((function(e){return e.substr(1)})).includes(t.ext);default:return t.ext===e}}function N(e){return S("image",e)}function x(e){return S("video",e)}function A(e){return S("audio",e)}function P(e){return S("presentation",e)}function C(e){return S("sheet",e)}function j(e){return S("sketch",e)}function T(e){return S("rp",e)}function I(e){return S("pdf",e)}e.exports={isPreviewableZipFiles:O,getExtname:k,getFilename:function(e){if(!e||!e.name)return"";var t=e.name,n=t.split(".");return n.pop(),O(t)&&n.pop(),n.join(".")},isRaw:function(e){return S("raw",e)},isImage:N,isVideo:x,isAudio:A,isPresentation:P,isSheet:C,isSketch:j,isRP:T,isPDF:I,isPpt:function(e){return S("ppt",e)},isOffice:function(e){return S("office",e)},getFileIcon:function(e){if("folder"===e.type)return"file-folder";var t=e.ext;return t=t?t.toLowerCase():k(e),N(e)?"file-image":x(e)?"file-video":A(e)?"file-audio":["doc","docx","dot","dotx"].includes(t)?"file-word":I(e)?"file-pdf":S("txt",e)?"file-txt":["pages","md","markdown","rtf"].includes(t)?"file-doc":S("numbers",e)?"file-numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"file-excel":C(e)?"file-sheet":S("key",e)?"file-keynote":P(e)?"file-ppt":["xmind","xmind.zip"].includes(t)?"file-xmind":["mindnode","mindnode.zip"].includes(t)?"file-mindnode":S("mmap",e)?"file-mindmap":j(e)?"file-sketch":T(e)?"file-axure":S("psd",e)?"file-psd":S("ai",e)?"file-ai":S("graffle",e)?"file-graffle":S("zip",e)?"file-rar":S("lake",e)?"doc-type-default":S("lakesheet",e)?"doc-type-sheet":"file-default"},allowResourceEdit:function(e){var t=e.ext||k(e);return!!t&&m.includes(t.toLowerCase())},getFileBgColor:function(e){if("folder"===e.type)return b;var t=e.ext;return t=t?t.toLowerCase():"",N(e)?E:x(e)?_:A(e)||["doc","docx","dot","dotx"].includes(t)?b:I(e)?w:S("txt",e)||["pages","md","markdown","rtf"].includes(t)?b:S("numbers",e)||["xls","xlsx","xlsm","xltx","xlt"].includes(t)||C(e)?g:S("key",e)?b:P(e)||["xmind","xmind.zip"].includes(t)?w:["mindnode","mindnode.zip"].includes(t)||S("mmap",e)?_:j(e)?E:T(e)?_:S("psd",e)?b:S("ai",e)?E:S("graffle",e)?g:S("zip",e)?_:S("lake",e)?b:S("lakesheet",e)?g:b}}},803:function(e,t,n){"use strict";var r=n(87);t.a=r.a},815:function(e,t,n){e.exports=function(){"use strict";function e(e,t,n){(n=n||{}).childrenKeyName=n.childrenKeyName||"children";var r=e||[],o=[],a=0;do{var i=r.filter((function(e){return t(e,a)}))[0];if(!i)break;o.push(i),r=i[n.childrenKeyName]||[],a+=1}while(r.length>0);return o}return e}()},86:function(e,t,n){"use strict";n(1487);var r=n(976);n(278);t.a=r.a},87:function(e,t,n){"use strict";var r,o=n(324),a=n.n(o),i=n(20),c=n(97),l=n(311),u=n(427),s=n(74),d=n(133),f=n(47),p=n(50);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var g,_=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(){w=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:A(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(I([])));k&&k!==n&&r.call(k,i)&&(_=k);var S=g.prototype=y.prototype=Object.create(_);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==E(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(E(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},N(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function O(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){O(a,r,o,i,c,"next",e)}function c(e){O(a,r,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r=_,y(_,"getFeatureBelongsPayment",(function(e){var t=p.ORG_PRO_FEATURE[e],n=p.ORG_ENTERPRISE_FEATURE[e];return t?i.PAYMENT_TYPE.pro:n?i.PAYMENT_TYPE.enterprise:i.PAYMENT_TYPE.free})),y(_,"paymentCheck",(function(e,t){switch(r.getFeatureBelongsPayment(e)){case i.PAYMENT_TYPE.pro:return[i.PAYMENT_TYPE.enterprise,i.PAYMENT_TYPE.pro].includes(t);case i.PAYMENT_TYPE.enterprise:return i.PAYMENT_TYPE.enterprise===t;case i.PAYMENT_TYPE.free:default:return!0}}));var N={},x=S(S(S(S(S({},c.STATUS.applying,__("待审批")),c.STATUS.invited,__("待加入")),c.STATUS.imported,__("待加入")),c.STATUS.terminated,__("已离职")),c.STATUS.waiting,__("待处理")),A=S(S(S({},c.ROLE.owner,__("管理员")),c.ROLE.member,__("成员")),c.ROLE.outsourcer,__("外部联系人")),P=S(S(S({},i.PAYMENT_TYPE.free,__("标准版")),i.PAYMENT_TYPE.pro,__("专业版")),i.PAYMENT_TYPE.enterprise,__("旗舰版")),C={free:0,paid:1,welfare:2},j=S(S(S({},C.free,{name:__("免费版"),desc:__("50 人以下，享受基础权益"),testId:"mode-free"}),C.paid,{name:__("付费版"),desc:__("999 元/年/50 人 起"),testId:"mode-pro",help:{text:__("试用到期后可降为免费版继续使用。"),linkText:__("查看详细版本对比"),link:"/about/price#team"}}),C.welfare,{name:__("公益版"),desc:__("支持公益、教育、初创企业"),testId:"mode-welfare",help:{text:__("非营利性公益组织、教育机构及初创企业可申请免费使用付费版权益。"),linkText:__("查看版本介绍"),link:"/about/welfare"}}),T=S(S(S({},i.CERTIFICATION_TYPE.welfare,{name:__("公益组织"),desc:__("从事公益事业的非营利组织")}),i.CERTIFICATION_TYPE.education,{name:__("教育机构"),desc:__("公办或非营利的学校或机构")}),i.CERTIFICATION_TYPE.startup,{name:__("初创企业"),desc:__("创办三年内且小于 100 人")}),I=[{name:__("资质证明"),desc:__("需提供营业执照、事业单位法人证明或其他相关证明材料，支持jpg、jpeg、png、bmp 格式，大小不超过 5MB"),helpList:[{text:__("查看示例"),link:"https://www.yuque.com/yuque/rvzzxz/gf443f#b5fb6957"}]},{name:__("申请公函"),desc:__("申请函红色部分需要填写，签名需手写，支持jpg、jpeg、png、pdf、bmp 格式，大小不超过 5MB"),helpList:[{text:__("下载模板"),link:"https://gw.alipayobjects.com/os/bmw-prod/5e485a34-3b78-4248-9fe4-1d8607cfc53e.docx"},{text:__("查看帮助"),link:"https://www.yuque.com/yuque/rvzzxz/gf443f#b5fb6957"}]}],M=(S(S(S(S(S(S(S(S(S(S(g={},p.INTEREST_CODE.book_statistics,__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。")),p.INTEREST_CODE.book_security,__("知识库安全设置可设置文档水印等安全信息")),p.INTEREST_CODE.thirdpart_address,__("标准版空间不支持钉钉、企业微信通讯录绑定，请及时进行版本升级")),p.INTEREST_CODE.group_department,__("绑定部门后，部门成员访问该团队时将自动成为团队成员。")),p.INTEREST_CODE.organization_statistics,__("可查看贡献榜，查看导出成员和团队明细等空间统计信息。")),p.INTEREST_CODE.group_statistics,__("可查看贡献榜，查看导出成员和团队明细等团队统计信息。")),p.INTEREST_CODE.group_security_logs,__("记录团队内成员变更，内容创建、删除、分享、导出等信息，让行为可查询追溯。")),p.INTEREST_CODE.group_webhook,__("可通过 Webhook 向钉钉群等发送团队动态")),p.INTEREST_CODE.group_handover,__("团队管理员离职后，允许空间管理员接管团队，整理内容。")),p.INTEREST_CODE.open_ocr,__("升级专业版、旗舰版空间可享受识图搜索等功能优先体验权")),S(S(S(S(S(S(S(S(g,p.INTEREST_CODE.organization_security_operation_logs,__("记录空间内成员变更，内容创建、删除、分享、导出等信息，以供查询，升级付费版即可立即使用")),p.INTEREST_CODE.organization_security_visite_logs,__("展示空间最近访问记录，包括到访用户、时间、IP 地址、被访问地址信息，升级付费版即可立即使用")),p.INTEREST_CODE.open_api,__("记录空间内成员变更，内容创建、删除、分享、导出等信息，以供查询，升级付费版即可立即使用")),p.INTEREST_CODE.organization_security_warning,__("安全预警可以帮助管理员及时识别风险。支持高频操作（如导出、删除、分享等）、账号密码泄漏风险等预警设置")),p.INTEREST_CODE.outsourcer,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。")),p.INTEREST_CODE.organization_security_share_logs,__("记录空间中所有分享行为，包括所有正在分享的文档或知识库内容，管理员可作统一管理，关闭不必要的分享")),p.INTEREST_CODE.organization_webhook,__("可通过 Webhook 向钉钉群等发送空间动态")),p.INTEREST_CODE.public_page,__("空间公开页适用于企业对外的帮助手册、更新日志、技术博客等面向互联网公开分享场景。"))),L={free:0,downgrade:1,vip:2,trial:3,expired:4},R=S(S(S({},L.free,{title:__("免费版空间"),guideText:__("试用付费版，享更多专属权益"),controlText:__("试用"),guideLink:"/r/organizations/dashboard/cashier?action=tryout"}),L.vip,{title:__("付费版空间"),guideText:__("续费"),guideLink:"/r/organizations/dashboard/cashier?action=renew"}),L.expired,{title:__("付费版空间"),guideText:__("付费"),guideLink:"/r/organizations/dashboard/cashier?action=renew"}),D="page_dashboard_org_wiki_redirect",U={isOwner:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy},isOutsourcer:function(e){return!!e&&(e.abilities&&!e.abilities.read&&e.abilities.read_home)},isTopLevel:function(e){var t;return null==e||null===(t=e.owner)||void 0===t?void 0:t.isTopLevel},enableAddressbook:function(){if(!window.appData.isYuque)return!0;var e=window.appData.organization,t=void 0===e?{}:e;return!(!t||t.address_book_type!==i.ADDRESS_BOOK_TYPE.yuque)||!!window.appData.corp&&(!!this.isWeixin()||!this.isTeambition())},disableRegistry:function(e){return!!e&&!(!e.id||e.enable_registry)},isWeixin:function(){return window.appData.corp&&"weixin"===window.appData.corp.type},isDingtalk:function(){return window.appData.corp&&"dingtalk"===window.appData.corp.type},isTeambition:function(){return window.appData.corp&&"teambition"===window.appData.corp.type},isYuqueAddressBook:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&(null==n?void 0:n.address_book_type)===i.ADDRESS_BOOK_TYPE.yuque},enableContacts:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&[i.ADDRESS_BOOK_TYPE.dingtalk,i.ADDRESS_BOOK_TYPE.weixin,i.ADDRESS_BOOK_TYPE.yuque,i.ADDRESS_BOOK_TYPE.custom].includes(n.address_book_type)},isWeixinAddressBook:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return e.isYuque&&i.ADDRESS_BOOK_TYPE.weixin===n.address_book_type},userNameEditable:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t,r=e.isYuque;return this.isWeixinAddressBook()||this.isYuqueAddressBook()||r&&1!==n.corp_sync_name_enable},isInOrg:function(){var e=window.appData,t=e.organization,n=void 0===t?{}:t;return!(!e.isYuque||null==n||!n.id)},isExpired:function(e){return!!e&&(!U.isFree(e)&&new Date(e.expired_at)<Date.now())},isFree:function(e){return!e||e.payment_type===i.PAYMENT_TYPE.free},isTrial:function(e){return!(!e||U.isFree(e))&&e.trialStatus===u.TRIAL_STATUS.on},isWelfareOrg:function(e){return!U.isExpired(e)&&e.certification_type>i.CERTIFICATION_TYPE.normal},isPremium:function(e){return!!e&&(U.isPaidVersion(e)&&!U.isExpired(e))},isPaidVersion:function(e){var t=e.payment_type;return t===i.PAYMENT_TYPE.enterprise||t===i.PAYMENT_TYPE.pro},isPro:function(e){return!(!e||U.isExpired(e))&&e.payment_type===i.PAYMENT_TYPE.pro},isEnterprise:function(e){return!(!e||U.isExpired(e))&&e.payment_type===i.PAYMENT_TYPE.enterprise},getIconName:function(e){var t="icon-overpaid";return U.isPro(e)&&(t="icon-org-pro"),U.isEnterprise(e)&&(t="icon-org-enterprise"),t},buildOrgPayLink:function(e){var t=e.action,n=e.targetLevel,r=e.paySource,o=new URL("r/organizations/dashboard/cashier",window.location.origin);return t&&o.searchParams.set("action",t),n&&o.searchParams.set("targetLevel",n),r&&o.searchParams.set("paySource",r),o.toString()},canIndirectAddOrgMember:function(e){return k(w().mark((function t(){var n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(N[e.id]){t.next=4;break}return t.next=3,f.a.organizations.getPermissions({id:e.id});case 3:N[e.id]=t.sent;case 4:return n=N[e.id],t.abrupt("return",n&&n.indirect_add_org_member);case 6:case"end":return t.stop()}}),t)})))()},getMemberRoleName:function(e){return e===c.ROLE.owner?__("空间管理员"):e===c.ROLE.member?__("空间成员"):e===c.ROLE.outsourcer?__("外部联系人"):""},getPaymentAction:function(e){return i.PAYMENT_TYPE.free===e?__("升级付费版"):__("续费")},getPaymentActionGuide:function(e){return i.PAYMENT_TYPE.free===e?__("立即升级"):__("立即续费")},getPaymentFeatureDesc:function(e){return S(S({},i.PAYMENT_TYPE.pro,__("专业版、旗舰版空间专属功能")),i.PAYMENT_TYPE.enterprise,__("旗舰版空间专属功能"))[U.getFeatureBelongsPayment(e)]},getFeatureBelongsPayment:_.getFeatureBelongsPayment,paymentCheck:_.paymentCheck,getFeatureIntro:function(e){return M[e]},getCorpType:function(e){if(!e)return null;switch(l.TYPE[e.type]){case l.TYPE.dingtalk:case l.TYPE.dingtalk_selfcorp:return{addressBookName:__("钉钉通讯录"),corpName:__("钉钉")};case l.TYPE.teambition:case l.TYPE.aone_teambition:return{addressBookName:__("Teambition"),corpName:__("Teambition")};case l.TYPE.weixin:return{addressBookName:__("企业微信通讯录"),corpName:__("企业微信")};default:return null}},getStatusLabel:function(e){var t=e.status;return x[t]},getPaymentBoardStatus:function(e){var t,n=U.isFree(e),r=U.isExpired(e);if(!n&&r)return L.expired;switch(e.payment_type){case i.PAYMENT_TYPE.free:t=L.free;break;case i.PAYMENT_TYPE.enterprise:t=L.vip;break;default:t=L.free}return t},getInviteUrl:function(){var e=arguments;return k(w().mark((function t(){var n,r,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},r=e.length>1&&void 0!==e[1]?e[1]:window.appData.organization,o=window.appData.defaultSpaceHost,a=null,null!=n&&n.token&&(a="".concat(o,"/r/organizations/").concat(r.login,"/join?token=").concat(n.token,"&source=org").concat(n.extraParams?"&extra=".concat(n.extraParams):"")),null==r||!r.id){t.next=10;break}return t.next=8,f.a.organizations.getCurrentCorp();case 8:t.sent&&(a=r.host);case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))()},getRule:function(e){var t=U.isPremium(e)?e.payment_type:i.PAYMENT_TYPE.free;return s.MEMBER_RULE.Organization[t]},getRuleSize:function(e,t){var n;return null===(n=U.getRule(e))||void 0===n?void 0:n[t]},getMonthMaxUploadSize:function(e,t){return U.isPremium(e)&&null!=t&&t.max_upload_size_month?null==t?void 0:t.max_upload_size_month:U.getRuleSize(e,s.LIMIT_RULE_CODE.max_resource_month_size)},orgWikiRedirect:{redirectToWiki:function(e,t,n){var r;if(null!=e&&e.id&&null!=t&&t.id&&n){var o="".concat(D,"_").concat(t.id,"_").concat(e.id);!d.a.get(o)&&(a()(e.created_at).isSameOrAfter(new Date("2022-10-12"))||a()(t.created_at).isSameOrAfter(new Date("2022-10-12")))&&null!=t&&null!==(r=t.abilities)&&void 0!==r&&r.read_wiki&&(d.a.set(o,!0),n.push({pathname:"/dashboard/org_wiki",hash:window.location.hash,search:window.location.search}))}},setRedirected:function(e,t){if(null!=e&&e.id&&null!=t&&t.id){var n="".concat(D,"_").concat(t.id,"_").concat(e.id);return d.a.set(n,!0),!0}}},getInterestLimitMsg:function(e,t,n){var r=S(S(S(S(S({},s.LIMIT_RULE_CODE.max_group_number,__("团队数量")),s.LIMIT_RULE_CODE.max_member,__("成员数量")),s.LIMIT_RULE_CODE.max_book_collaborator_number,__("协作人数")),s.LIMIT_RULE_CODE.max_doc_collaborator_number,__("协作人数")),s.LIMIT_RULE_CODE.max_resource_month_size,__("本月上传流量"))[e],o=U.getPayment(t),a=U.getInterestActionText(e,t,n);return __("".concat(r,"已达到").concat(o,"上限，").concat(a,"。"),{desc:r,payment:o,actionText:a})},getPayment:function(e){return U.isExpired(e)?U.PAYMENT_MAP[i.PAYMENT_TYPE.free]:U.PAYMENT_MAP[null==e?void 0:e.payment_type]},getInterestActionText:function(e,t,n){var r,o,a={owner:{upgrade:__("请及时进行版本升级"),renew:__("请及时进行版本续费"),expand:__("请及时增加席位")},member:{upgrade:__("请联系管理员进行版本升级"),renew:__("请联系管理员进行版本续费"),expand:__("请联系管理员增加席位")}},i={owner:{upgrade:__("请及时进行版本升级"),renew:__("请及时进行版本续费"),help:__("请及时联系语雀进行处理")},member:{upgrade:__("请联系管理员进行版本升级"),renew:__("请联系管理员进行版本续费"),help:__("请及时联系语雀进行处理")}},c=null==t||null===(r=t.abilities)||void 0===r?void 0:r.destroy,l=null==n||null===(o=n.owner)||void 0===o?void 0:o.isTopLevel,u=e===s.LIMIT_RULE_CODE.max_member,d=U.isExpired(t),f=U.isPremium(t),p=c?"owner":"member";return u?a[p][d?"renew":f?"expand":"upgrade"]:i[p][d?"renew":l?"help":"upgrade"]},genCreateFromKey:function(e){var t,n,r;if(null!==(t=window.appData)&&void 0!==t&&t.isDesktopApp)return e;var o=null===(n=window.location)||void 0===n||null===(r=n.pathname)||void 0===r?void 0:r.split("/").join("_").substring(0,50);return"_"===o?e:"".concat(e,":").concat(o)},ROLE_MAP:A,PAYMENT_BOARD_STATUS:L,PAYMENT_BOARD_STATUS_MAP:R,CREAT_MODE:C,CREAT_MODE_MAP:j,PAYMENT_MAP:P,CERTIFICATION_TYPE_MAP:T,CERTIFICATION_MATERIAL_LIST:I};t.a=U},958:function(e,t,n){"use strict";var r=n(242);n.d(t,"a",(function(){return r.c}))},960:function(e,t,n){"use strict";n(1343);var r=n(972),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(63),u=n(5),s=n.n(u),d=n(462),f=n(425),p=n(1011),m=n(1440),h=f.avatar.user,v=f.avatar.userDark,y=function(e){var t=e.src,n=e.icon,o=e.size,i=e.className,c=e.name,u=e.useLetterAvatar,f=e.radius,y=e.bordered,b=e.onPreviewImage,g=e.enableLarkUIImage,_=e.iconSize,E=Object(d.a)().isDarkMode,w={lg:128,md:64,sm:32,contributorAvatar:28,xs:16}[o]||o,O={width:w,minWidth:w,height:w,borderRadius:f||w/2};y&&(O.borderColor="rgba(0,0,0,0.06)",O.borderWidth=1,O.borderStyle="solid");var k=t&&t.indexOf("rmsportal/SZXCSCJTuhRSmAggBlVp")>-1;if(k&&!n||u&&!t&&!n)return a.a.createElement(m.a,{size:w,text:c,style:O,className:i,isGroup:k});if(t&&!k){var S=t;E&&t===h&&(S=v);var N=Object(p.a)(S,{width:2*w,height:2*w,fill:!0,format:"png"});S.indexOf("work.alibaba-inc.com")>-1?N=w&&w<=32?S.replace(".220x220.",".64x64.xz."):S:S.includes("/avatar_buc/")&&w&&w>64?N="".concat(S).concat(S.indexOf("?")>-1?"&":"?","size=large"):S.indexOf(".svg")>-1&&(N=S);return g?a.a.createElement(r.a,{"data-testid":"img-avatar",src:N,className:i,style:O,alt:c||"",preview:!1,onError:function(e){e.target.src!==h&&(e.target.alt="",e.target.src=h)}}):a.a.createElement("img",{"data-testid":"img-avatar",onError:function(e){e.target.src!==h&&(e.target.alt="",e.target.src=h)},onClick:b?function(){return b({src:S,msrc:N})}:void 0,src:N,className:s()(i,"img"),style:O,alt:c||""})}return n?a.a.createElement(l.b,{className:i,name:e.icon,width:_||w,height:_||w}):null};y.defaultProps={size:"sm"},y.propTypes={className:c.a.string,src:c.a.string,icon:c.a.string,name:c.a.string,useLetterAvatar:c.a.bool,radius:c.a.oneOfType([c.a.string,c.a.number]),size:c.a.oneOfType([c.a.string,c.a.node,c.a.number]),onPreviewImage:c.a.func,enableLarkUIImage:c.a.bool,bordered:c.a.bool,iconSize:c.a.number},t.a=y},961:function(e,t,n){"use strict";function r(e,t){var n=e&&e.vs;return"object"==typeof n&&(n=n[t.platformSub]),n}Object.defineProperty(t,"__esModule",{value:!0}),t.Sdk=t.LogLevel=t.APP_TYPE=t.isFunction=t.compareVersion=t.ENV_ENUM_SUB=t.ENV_ENUM=void 0;var o=n(2905);Object.defineProperty(t,"APP_TYPE",{enumerable:!0,get:function(){return o.APP_TYPE}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return o.LogLevel}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return o.isFunction}}),Object.defineProperty(t,"compareVersion",{enumerable:!0,get:function(){return o.compareVersion}}),Object.defineProperty(t,"ENV_ENUM",{enumerable:!0,get:function(){return o.ENV_ENUM}}),Object.defineProperty(t,"ENV_ENUM_SUB",{enumerable:!0,get:function(){return o.ENV_ENUM_SUB}});var a=function(e,t){var n=this;this.configJsApiList=[],this.hadConfig=!1,this.p={},this.config$=new Promise((function(e,t){n.p.reject=t,n.p.resolve=e})),this.logQueue=[],this.devConfig={debug:!1},this.platformConfigMap={},this.invokeAPIConfigMapByMethod={},this.isBridgeDrity=!0,this.getExportSdk=function(){return n.exportSdk},this.setAPI=function(e,t){n.invokeAPIConfigMapByMethod[e]=t},this.setPlatform=function(e){n.isBridgeDrity=!0,n.platformConfigMap[e.platform]=e,e.platform===n.env.platform&&e.bridgeInit().catch((function(e){n.customLog(o.LogLevel.WARNING,["auto bridgeInit error",e||""])}))},this.getPlatformConfigMap=function(){return n.platformConfigMap},this.deleteApiConfig=function(e,t){var r=n.invokeAPIConfigMapByMethod[e];r&&delete r[t]},this.invokeAPI=function(e,t,a){void 0===t&&(t={}),void 0===a&&(a=!0),n.customLog(o.LogLevel.INFO,['==> "'.concat(e,'" params: '),t]);var i=+new Date,c=i+"_"+Math.floor(1e3*Math.random());if(n.devConfig.onBeforeInvokeAPI)try{n.devConfig.onBeforeInvokeAPI({invokeId:c,method:e,params:t,startTime:i})}catch(e){n.customLog(o.LogLevel.ERROR,["call Hook:onBeforeInvokeAPI failed, reason:",e])}return!1===n.devConfig.isAuthApi&&(a=!1),n.bridgeInitFn().then((function(l){var u=n.invokeAPIConfigMapByMethod[e],s=!(n.devConfig.forceEnableDealApiFnMap&&n.devConfig.forceEnableDealApiFnMap[e]&&!0===n.devConfig.forceEnableDealApiFnMap[e](t))&&(!0===n.devConfig.isDisableDeal||n.devConfig.disbaleDealApiWhiteList&&-1!==n.devConfig.disbaleDealApiWhiteList.indexOf(e));if(u||!a){var d;if(u&&(d=u[n.env.platform]),d||!a){var f={};f=!s&&d&&d.paramsDeal&&(0,o.isFunction)(d.paramsDeal)?d.paramsDeal(t):Object.assign({},t);var p=function(e){return!s&&d&&d.resultDeal&&(0,o.isFunction)(d.resultDeal)?d.resultDeal(e):e};if((0,o.isFunction)(f.onSuccess)){var m=f.onSuccess;f.onSuccess=function(e){m(p(e))}}return l(e,f).then(p,(function(t){var i=n.hadConfig&&void 0===n.isReady&&-1!==n.configJsApiList.indexOf(e),c="object"==typeof t&&"string"==typeof t.errorCode&&t.errorCode===o.ERROR_CODE.no_permission,u="object"==typeof t&&"string"==typeof t.errorCode&&t.errorCode===o.ERROR_CODE.cancel,s=r(d,n.env),m=s&&n.env.version&&(0,o.compareVersion)(n.env.version,s),h=(n.env.platform===o.ENV_ENUM.ios||n.env.platform===o.ENV_ENUM.android)&&i&&c,v=n.env.platform===o.ENV_ENUM.pc&&i&&(m&&!u&&a||c);return h||v?n.config$.then((function(){return l(e,f).then(p)})):Promise.reject(t)})).then((function(r){if(n.devConfig.onAfterInvokeAPI)try{n.devConfig.onAfterInvokeAPI({invokeId:c,method:e,params:t,payload:r,isSuccess:!0,startTime:i,duration:+new Date-i})}catch(e){n.customLog(o.LogLevel.ERROR,["call Hook:onAfterInvokeAPI failed, reason:",e])}return n.customLog(o.LogLevel.INFO,['<== "'.concat(e,'" success result: '),r]),r}),(function(r){if(n.devConfig.onAfterInvokeAPI)try{n.devConfig.onAfterInvokeAPI({invokeId:c,method:e,params:t,payload:r,startTime:i,duration:+new Date-i,isSuccess:!1})}catch(r){n.customLog(o.LogLevel.ERROR,["call Hook:onAfterInvokeAPI failed, reason:",r])}return n.customLog(o.LogLevel.WARNING,['<== "'.concat(e,'" fail result: '),r]),Promise.reject(r)}))}var h='"'.concat(e,'" do not support the current platform (').concat(n.env.platform,")");return n.customLog(o.LogLevel.ERROR,[h]),Promise.reject({errorCode:o.ERROR_CODE.jsapi_internal_error,errorMessage:h})}return h="This API method is not configured for the platform (".concat(n.env.platform,")"),n.customLog(o.LogLevel.ERROR,[h]),Promise.reject({errorCode:o.ERROR_CODE.jsapi_internal_error,errorMessage:h})}))},this.isLogQueueTimeout=!1,this.customLog=function(e,t){var r={level:e,text:t,time:new Date};!0===n.devConfig.debug?n.customLogInstance(r):n.isLogQueueTimeout||(n.logQueueTimer||(n.logQueueTimer=setTimeout((function(){n.isLogQueueTimeout=!0,n.logQueue=[]}),1e4)),n.logQueue.push(r),n.logQueue.length>10&&(n.logQueue=n.logQueue.slice(n.logQueue.length-10)))},this.clearLogQueue=function(){n.logQueue.forEach((function(e){n.customLogInstance(e)})),n.logQueue=[]},this.customLogInstance=t,this.env=e,this.bridgeInitFn=function(){if(n.bridgeInitFnPromise&&!n.isBridgeDrity)return n.bridgeInitFnPromise;n.isBridgeDrity=!1;var t=n.platformConfigMap[e.platform];if(t)n.bridgeInitFnPromise=t.bridgeInit().catch((function(e){return n.customLog(o.LogLevel.ERROR,["\b\b\b\b\bJsBridge initialization fails, jsapi will not work"]),Promise.reject(e)}));else{var r="Do not support the current environment：".concat(e.platform);n.customLog(o.LogLevel.WARNING,[r]),n.bridgeInitFnPromise=Promise.reject(new Error(r))}return n.bridgeInitFnPromise};var a=function(e){void 0===e&&(e={}),n.devConfig=Object.assign(n.devConfig,e),!0===e.debug&&n.clearLogQueue(),e.extraPlatform&&n.setPlatform(e.extraPlatform)};this.exportSdk={config:function(t){void 0===t&&(t={});var r=!0;Object.keys(t).forEach((function(e){-1===["debug","usePromise"].indexOf(e)&&(r=!1)})),r?(n.customLog(o.LogLevel.WARNING,["This is a deprecated feature, recommend use dd.devConfig"]),a(t)):n.hadConfig?n.customLog(o.LogLevel.WARNING,["Config has been executed"]):(t.jsApiList&&(n.configJsApiList=t.jsApiList),n.hadConfig=!0,n.bridgeInitFn().then((function(r){var o=n.platformConfigMap[e.platform],a=t;o.authParamsDeal&&(a=o.authParamsDeal(a)),r(o.authMethod,a).then((function(e){n.isReady=!0,n.p.resolve(e)})).catch((function(e){n.isReady=!1,n.p.reject(e)}))}),(function(e){n.customLog(o.LogLevel.ERROR,['\b\b\b\b\bJsBridge initialization failed and "dd.config" failed to call']),n.p.reject(e)})))},devConfig:a,ready:function(e){!1===n.hadConfig?(n.customLog(o.LogLevel.WARNING,["You don 't use a dd.config, so you don't need to wrap dd.ready, recommend remove dd.ready"]),n.bridgeInitFn().then((function(){e()}))):n.config$.then((function(t){e()}))},error:function(e){n.config$.catch((function(t){e(t)}))},on:function(t,r){n.bridgeInitFn().then((function(){n.platformConfigMap[e.platform].event.on(t,r)}))},off:function(t,r){n.bridgeInitFn().then((function(){n.platformConfigMap[e.platform].event.off(t,r)}))},env:e,checkJsApi:function(t){void 0===t&&(t={});var a={};return t.jsApiList&&t.jsApiList.forEach((function(t){var i=n.invokeAPIConfigMapByMethod[t];if(i){var c=r(i[e.platform],e);c&&e.version&&(0,o.compareVersion)(e.version,c)&&(a[t]=!0)}a[t]||(a[t]=!1)})),Promise.resolve(a)},_invoke:function(e,t){return void 0===t&&(t={}),n.invokeAPI(e,t,!1)}}};t.Sdk=a},962:function(e,t,n){"use strict";var r=n(1446);n(1448),n(1452),e.exports=r},963:function(e,t,n){"use strict";n(48);var r=n(11),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(20),u=n(87),s=(n(67),n(31)),d=n(5),f=n.n(d),p=n(157),m=n(74),h=(n(589),n(206)),v=(n(227),n(101)),y=(n(40),n(9)),b=(n(53),n(12)),g=(n(188),n(32)),_=n(14),E=n.n(_),w=n(1231),O=n.n(w),k=n(473),S=n(1415),N=n.n(S),x=n(84),A=n(63),P=n(1222),C=n(47),j=(n(310),n(115)),T="index-module_right_3Ce8Y",I="index-module_detailsWrapper_rnkfa",M="index-module_detailTitle_-gjun",L="index-module_details_E5fEt",R="index-module_detailRow_e7YNK",D="index-module_summary_TYNAM",U="index-module_left_m83qX",B="index-module_summaryTitle_FTeFf",z="index-module_price_5CyQB",F="index-module_divider_Rppou",V=function(e){var t=e.totalAmount,n=e.discountAmount,r=e.details;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:I},a.a.createElement("div",{className:M},__("费用明细")),a.a.createElement("div",{className:L},(null==r?void 0:r.length)>0&&r.map((function(e){return a.a.createElement("div",{className:R},a.a.createElement("span",null,null==e?void 0:e.label),a.a.createElement("span",null,null==e?void 0:e.price))}))),a.a.createElement(j.a,{className:F}),a.a.createElement("div",{className:D},a.a.createElement("div",{className:U},a.a.createElement("div",{className:B},__("总计")),a.a.createElement("span",{style:{fontSize:"14px"}},__("支持电子发票或专用发票开具"))),a.a.createElement("div",{className:T},a.a.createElement("span",{className:z},"¥",n||t)))))};V.propTypes={totalAmount:c.a.number,discountAmount:c.a.number,details:c.a.number};var G=V,Y=(n(130),n(41)),$=(n(138),n(30)),q=n(427),W=n(803),H={paymentSelector:"index-module_paymentSelector_60wvq",paymentItem:"index-module_paymentItem_86B2e",header:"index-module_header_KM0S4",title:"index-module_title_87CwY",icon:"index-module_icon_sjp+e",paymentType:"index-module_paymentType_rBxoj",price:"index-module_price_n7XGL",priceNumber:"index-module_priceNumber_6EuVJ",priceUnit:"index-module_priceUnit_xqqPQ",oldMemberPrice:"index-module_oldMemberPrice_4QJhr",desc:"index-module_desc_5wzpx",active:"index-module_active_HZTq5",disable:"index-module_disable_+DYkl",tooltip:"index-module_tooltip_lMvUZ"};function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}E.a.extend(O.a);var J=Object(k.d)((function(e){return e}))((function(e){var t,n=e.className,r=e.actionType,i=e.paymentType,c=e.onPaymentChange,u=e.organization,s=r===l.PAY_MODAL_ACTION.upgrade,d=r===l.PAY_MODAL_ACTION.trial,p=r===l.PAY_MODAL_ACTION.renew,m=W.a.isExpired(u),h=window.appData.organization.memberPrice,y=(t=W.a.isFree(u)?null:u.payment_type,d?t?[t]:[l.PAYMENT_TYPE.pro,l.PAYMENT_TYPE.enterprise]:s?[l.PAYMENT_TYPE.enterprise]:[l.PAYMENT_TYPE.pro,l.PAYMENT_TYPE.enterprise]),b=Q(Object(o.useState)(i),2),g=b[0],_=b[1],w=function(e){var t=Math.max(E()(u.expired_at).diff(Date.now(),"day"),1)<=x.MAX_ORG_ALLOW_DOWNGRADE_DAYS;return e===l.PAYMENT_TYPE.pro&&!t&&p&&W.a.isEnterprise(u)},O=Z(Z(Z(Z({},l.PAY_MODAL_ACTION.trial,__("选择适合你的空间版本")),l.PAY_MODAL_ACTION.buy,__("选择适合你的空间版本")),l.PAY_MODAL_ACTION.upgrade,__("版本升级")),l.PAY_MODAL_ACTION.renew,__("当前为{payment}，{memberCount}人，有效期至 {expiredAt}",{payment:W.a.PAYMENT_MAP[u.payment_type],memberCount:u.max_member,expiredAt:E()(u.expired_at).format("YYYY-MM-DD")}));return a.a.createElement("div",{className:f()(H.paymentSelector,n)},a.a.createElement("h4",null,m?O[l.PAY_MODAL_ACTION.buy]:O[r]),a.a.createElement(Y.a,{className:H.paymentList,gutter:[8,0]},y.map((function(e,t){var n=x.ORG_AMOUNT_MAP[e],r=w(e),o=(null==u?void 0:u.trialStatus)===q.TRIAL_STATUS.on,i=W.a.isPremium(u),s=e===l.PAYMENT_TYPE.enterprise&&i&&!o?h:0,d=a.a.createElement("div",{className:f()(H.paymentItem,Z({},H.active,e===g),Z({},H.disable,r)),onClick:function(){return function(e){w(e)||(_(e),null==c||c(e))}(e)}},a.a.createElement("div",{className:H.header},a.a.createElement("div",{className:H.title},a.a.createElement(A.b,{name:n.icon,size:18}),a.a.createElement("span",{className:H.paymentType},W.a.PAYMENT_MAP[e])),a.a.createElement("div",{className:H.price},a.a.createElement("span",{className:H.priceNumber},"¥",s>0?s:n.price),a.a.createElement("span",{className:H.priceUnit},__("/人/年")))),s>0&&a.a.createElement("span",{className:H.oldMemberPrice},n.price,__("/人/年")));return a.a.createElement($.a,{span:24/y.length,key:t},r?a.a.createElement(v.a,{title:a.a.createElement("div",{className:H.tooltip},a.a.createElement("span",null,__("旗舰版到期前 30 天开放选择")),a.a.createElement("a",{href:"https://www.yuque.com/yuque/ng1qth/member-privilege#p5KMh"},__("查看帮助"))),overlayInnerStyle:{display:"inline-block"}},d):d)}))))})),ee={row:"BuyModal-module_row_k9bGD",left:"BuyModal-module_left_U5aM7",right:"BuyModal-module_right_-+dqF",payModal:"BuyModal-module_payModal_RkJau",channel:"BuyModal-module_channel_aD1hq",payBtn:"BuyModal-module_payBtn_JujzZ",promoCode:"BuyModal-module_promoCode_IT7ha",tips:"BuyModal-module_tips_fuHYC",pricingContainer:"BuyModal-module_pricingContainer_tqVEA",pro:"BuyModal-module_pro_J6mfJ",enterprise:"BuyModal-module_enterprise_KQPTt",pricingLeft:"BuyModal-module_pricingLeft_X4ns6",payment:"BuyModal-module_payment_jheFG",icon:"BuyModal-module_icon_UPf-t",paymentDesc:"BuyModal-module_paymentDesc_7e1Uv",paymentCaption:"BuyModal-module_paymentCaption_sAndL",benefitItem:"BuyModal-module_benefitItem_4iuZe",iconWarpper:"BuyModal-module_iconWarpper_j2vhb",title:"BuyModal-module_title_aoygt",desc:"BuyModal-module_desc_nWmKR",pricingRight:"BuyModal-module_pricingRight_p54lJ",avatar:"BuyModal-module_avatar_SRhTt",termsContainer:"BuyModal-module_termsContainer_i187T",statsWrapper:"BuyModal-module_statsWrapper_ZDvF1",statsDesc:"BuyModal-module_statsDesc_1iKOA",compact:"BuyModal-module_compact_qVAW5",active:"BuyModal-module_active_SC0g+",settle:"BuyModal-module_settle_6sm-p",name:"BuyModal-module_name_bL3Ia",memberSizeInput:"BuyModal-module_memberSizeInput_xIYHO",errorMsg:"BuyModal-module_errorMsg_ZbqFE",footer:"BuyModal-module_footer_eF3uw"};function te(){return a.a.createElement("span",null,__("正在准备账户信息，请5分钟后再尝试，如一直未成功，请"),a.a.createElement("a",{href:"/feedbacks/new",target:"_blank"},__("联系语雀")),__("进行处理。"))}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(){oe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ne(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ne(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ae(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ae(a,r,o,i,c,"next",e)}function c(e){ae(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}E.a.extend(O.a);var ue=g.a.Option,se=function(e){var t,n,i,c=e.targetLevel,s=e.actionType,d=e.buyLoading,p=e.handleSubmitBuy,_=e.subAccountInfo,w=e.organization,O=e.paySource,k=s===l.PAY_MODAL_ACTION.upgrade,S=s===l.PAY_MODAL_ACTION.trial,j=u.a.isExpired(w),T=window.appData.interest.usage.member_count,I=function(e,t){var n=window.appData.organization,r=l.PAYMENT_TYPE.pro,o=0;return e===l.PAY_MODAL_ACTION.buy&&(r=t||(n.payment_type===l.PAYMENT_TYPE.free?l.PAYMENT_TYPE.pro:n.payment_type),o=window.appData.interest.usage.member_count),e===l.PAY_MODAL_ACTION.upgrade&&(r=l.PAYMENT_TYPE.enterprise,o=n.max_member),e===l.PAY_MODAL_ACTION.renew&&(r=n.payment_type,o=n.max_member),e===l.PAY_MODAL_ACTION.trial&&(r=(u.a.isFree(n)?null:n.payment_type)||l.PAYMENT_TYPE.pro),{initOrgPayment:r,initMemberSize:o}}(s,c),M=I.initOrgPayment,L=I.initMemberSize,R=ce(Object(o.useState)(M),2),D=R[0],U=R[1],B=ce(Object(o.useState)(x.PAYMENT_TYPE.normal),2),z=B[0],F=B[1],V=ce(Object(o.useState)(L),2),Y=V[0],$=V[1],q=ce(Object(o.useState)(L),2),W=q[0],H=q[1],K=ce(Object(o.useState)(!1),2),Z=K[0],Q=K[1],X=ce(Object(o.useState)(1),2),ne=X[0],ae=X[1],le=(t=w.expired_at,n=E()(t).diff(Date.now(),"day")||1,i=t&&n>=0?t:E()().endOf("day"),E()(i).add(ne,"year")),se=ce(Object(o.useState)(),2),de=se[0],fe=se[1],pe=ce(Object(o.useState)(),2),me=pe[0],he=pe[1],ve=ce(Object(o.useState)(),2),ye=ve[0],be=ve[1],ge=ce(Object(o.useState)(!1),2),_e=ge[0],Ee=ge[1],we=Object(o.useRef)(null),Oe=function(){_e?Z||p({memberSize:Y,duration:ne,promoCode:me,paymentType:z,packageType:D,orderType:j?l.PAY_MODAL_ACTION.buy:s}):r.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))},ke=function(){var e=ie(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_e){e.next=3;break}return r.a.info(__("需阅读并同意《语雀空间服务协议》后才能试用")),e.abrupt("return");case 3:if(!Z){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,C.a.organizations.trial({id:w.id,trial_type:D},{ignoreGlobalMessage:!0});case 8:e.sent&&(window.location.search=""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),r.a.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),Se=function(e){F(e)},Ne=function(e){var t="",n=e.target.value;if(!n)return $("");if(/^[0-9]*$/g.test(n)){var r=Math.max(E()(w.expired_at).diff(Date.now(),"day"),1)<=x.MAX_ORG_ALLOW_DOWNGRADE_DAYS;n<T&&(t="购买人数应大于等于空间人数"),u.a.isEnterprise(w)&&!r&&n<w.max_member&&(t="旗舰版到期前 30 天可降级人数"),Q(t||null),$(Math.min(n,l.MAX_MEMBER_LIMIT)),t||H(Math.min(n,l.MAX_MEMBER_LIMIT))}},xe=Object(o.useCallback)(N()(function(){var e=ie(oe().mark((function e(t){var n,o,a,i,c,l,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.actionType,o=t.orderPayment,a=t.orgPayment,i=t.duration,c=t.memberSize,l=t.validPromoCode,!(S||c<=0)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,C.a.pay.amount({order_type:n,payment_type:o,package_type:a,duration:i,member_size:c,promo_code:l});case 6:u=e.sent,be(u),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r.a.warn(__("加载失败"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500),[]);Object(o.useEffect)((function(){xe({actionType:s,orderPayment:z,orgPayment:D,duration:ne,memberSize:W,validPromoCode:me})}),[D,z,W,ne,me]),Object(o.useEffect)((function(){xe({actionType:s,orderPayment:z,orgPayment:D,duration:ne,memberSize:W,validPromoCode:me})}),[]);var Ae,Pe,Ce;return a.a.createElement("div",{className:f()(ee.pricingContainer,ee.payModal,re(re({},ee.pro,D===l.PAYMENT_TYPE.pro),ee.enterprise,D===l.PAYMENT_TYPE.enterprise)),"data-testid":"renew-package",ref:we},a.a.createElement("div",{className:ee.pricingLeft},(Ae=D,Pe=x.ORG_AMOUNT_MAP[Ae],Ce=u.a.PAYMENT_MAP[Ae],a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:ee.payment},Ce,__("空间"),a.a.createElement(A.b,{name:null==Pe?void 0:Pe.icon,className:ee.icon,size:28})),a.a.createElement("div",{className:ee.paymentDesc},Pe.desc),a.a.createElement("a",{className:ee.paymentCaption,href:"https://www.yuque.com/about/price",target:"_blank"},__("查看完整权益介绍"),a.a.createElement(A.b,{name:"arrow-right",size:16,className:ee.icon})),a.a.createElement("ul",{className:ee.benefitList},Pe.introList.map((function(e,t){return a.a.createElement("li",{className:ee.benefitItem,key:null==e?void 0:e.title},a.a.createElement("div",{className:ee.iconWarpper},a.a.createElement(A.b,{className:ee.icon,name:null==e?void 0:e.icon,size:24})),a.a.createElement("h4",{className:ee.title},null==e?void 0:e.title),a.a.createElement("p",{className:ee.desc},null==e?void 0:e.desc))})))))),a.a.createElement("div",{className:ee.pricingRight},a.a.createElement(J,{actionType:s,paymentType:D,onPaymentChange:function(e){return U(e)}}),a.a.createElement("div",{className:ee.row,style:{alignItems:"flex-start"}},k?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ee.left},a.a.createElement("div",null,__("空间人数"))),a.a.createElement("div",{className:ee.right},a.a.createElement("div",null,__("{memberSize} 人",{memberSize:w.max_member})))):S?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ee.left},a.a.createElement("div",null,__("试用人数")),a.a.createElement("p",{className:ee.tips},__("当前空间 {memberSize} 人",{memberSize:T}))),a.a.createElement("div",{className:ee.right},a.a.createElement("div",null,__("{memberSize} 人",{memberSize:u.a.isFree(w)?l.TRAIL_MAX_MEMBER:w.max_member})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ee.left},a.a.createElement("div",null,a.a.createElement("div",null,__("购买人数")),a.a.createElement("p",{className:ee.tips},__("当前空间席位 {memberSize} 人",{memberSize:w.maxMember})))),a.a.createElement("div",{className:ee.right},a.a.createElement("div",{className:ee.memberSizeInput},a.a.createElement(b.a,{value:Y,onChange:Ne,style:{width:100},suffix:__("人")}),Z&&a.a.createElement("div",{className:ee.errorMsg},Z))))),S&&a.a.createElement("div",{className:ee.row,style:{alignItems:"flex-start"}},a.a.createElement("div",{className:ee.left},__("试用期限")),a.a.createElement("div",{className:ee.right},__("可使用至 {date}",{date:E()().add(l.TRIAL_DAYS,"day").format("YYYY-MM-DD")}))),!S&&!k&&a.a.createElement("div",{className:ee.row},a.a.createElement("div",{className:ee.left},__("购买时长"),a.a.createElement("p",{className:ee.tips},__("可使用至")," ",le.format("YYYY-MM-DD"))),a.a.createElement("div",{className:ee.right},a.a.createElement("div",{className:ee.inputNumber},a.a.createElement(g.a,{className:ee.select,defaultValue:1,value:ne,onChange:function(e){return ae(e)},style:{width:100}},[1,2,3].map((function(e){return a.a.createElement(ue,{value:e,key:e},e,__("年"))})))))),!S&&a.a.createElement("div",{className:ee.row},a.a.createElement("div",{className:ee.left},__("支付方式")),a.a.createElement("div",{className:ee.right},a.a.createElement(y.a,{className:f()(ee.channel,re({},ee.active,z===x.PAYMENT_TYPE.normal)),onClick:function(){return Se(x.PAYMENT_TYPE.normal)},icon:a.a.createElement(A.b,{name:"icon-zhi",size:16})},__("支付宝")),_?a.a.createElement(y.a,{className:f()(ee.channel,ee.settle,re({},ee.active,z===x.PAYMENT_TYPE.settle)),onClick:function(){return Se(x.PAYMENT_TYPE.settle)},icon:a.a.createElement(A.b,{name:"icon-bank",size:16})},__("银行转账")):a.a.createElement(v.a,{title:a.a.createElement(te,null),placement:"top"},a.a.createElement(y.a,{className:f()(ee.channel,ee.settle),icon:a.a.createElement(A.b,{name:"icon-bank",size:16}),disabled:!0},__("银行转账"))))),!S&&!k&&a.a.createElement("div",{className:ee.row},a.a.createElement("div",{className:ee.left},__("优惠码#upper")),a.a.createElement("div",{className:ee.right},a.a.createElement("div",{style:{width:172},className:ee.promoCode},a.a.createElement(P.a,{value:de,orderType:s,packageType:D,promoUsage:"organization",onChange:function(e){return fe(e)},onVerifySuccess:function(e){return he(null==e?void 0:e.code)}})))),!S&&ye&&a.a.createElement(G,{totalAmount:ye.totalAmount,discountAmount:ye.discountAmount,details:ye.details}),a.a.createElement("div",{className:ee.footer},S?a.a.createElement(y.a,{"data-testid":"buy-button",type:"primary",onClick:ke,className:ee.payBtn},__("免费试用 15 天")):a.a.createElement(y.a,{"data-aspm-click":m.ORG_LIMIT_SPM.create_order,"data-aspm-param":"pay_source=".concat(O,"^org_id=").concat(null==w?void 0:w.id,"^org_payment_type=").concat(null==w?void 0:w.payment_type,"^"),"data-testid":"buy-button",type:"primary",loading:d,onClick:Oe,className:ee.payBtn},d?__("购买中"):__("确认购买")),a.a.createElement("p",{className:ee.termsContainer},a.a.createElement(h.a,{onChange:function(){return Ee(!_e)},checked:_e,"data-testid":"check-terms"},__("我已阅读并同意")),a.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》"))))))};se.propTypes={actionType:c.a.number,buyLoading:c.a.bool,handleSubmitBuy:c.a.func,max_member:c.a.number,subAccountInfo:c.a.object,targetLevel:c.a.oneOf([l.PAYMENT_TYPE.pro,l.PAYMENT_TYPE.enterprise]),organization:c.a.object,paySource:c.a.string};var de=Object(k.d)((function(e){return e}))(se),fe={row:"BuyMember-module_row_9srYf",left:"BuyMember-module_left_kE3og",right:"BuyMember-module_right_Oni7O",payModal:"BuyMember-module_payModal_ID058",channel:"BuyMember-module_channel_oCioT",payBtn:"BuyMember-module_payBtn_2QBqR",promoCode:"BuyMember-module_promoCode_3q8my",tips:"BuyMember-module_tips_0MaeW",pricingContainer:"BuyMember-module_pricingContainer_oSImw",expiredDesc:"BuyMember-module_expiredDesc_kyKaA",active:"BuyMember-module_active_hyrgK"};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){he=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:N(e,n,c)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function y(){}function b(){}function g(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&r.call(w,i)&&(_=w);var O=g.prototype=y.prototype=Object.create(_);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var l=d(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==pe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function N(t,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=x(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?h:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(pe(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ve(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e){var t,n=e.buyLoading,i=e.handleSubmitBuy,c=e.subAccountInfo,s=e.organization,d=e.paySource,p=l.ORDER_TYPE.buyMember,g=ye(Object(o.useState)(!1),2),_=g[0],w=g[1],O=ye(Object(o.useState)(1),2),k=O[0],S=O[1],N=Object(o.useRef)(null),P=ye(Object(o.useState)(x.PAYMENT_TYPE.normal),2),j=P[0],T=P[1],I=ye(Object(o.useState)(),2),M=I[0],L=I[1],R=(null==s?void 0:s.max_member)+Number(k),D=function(){var e,t=(e=he().mark((function e(){var t;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(k<=0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,C.a.pay.amount({order_type:p,payment_type:j,package_type:s.payment_type,member_size:R});case 5:t=e.sent,L(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.a.warn(__("加载失败"));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ve(a,r,o,i,c,"next",e)}function c(e){ve(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){D()}),[k]),Object(o.useEffect)((function(){D()}),[]),a.a.createElement("div",{className:f()(fe.pricingContainer,fe.payModal),"data-testid":"buy-member-modal",ref:N},a.a.createElement("h2",null,__("人数扩容")),a.a.createElement("p",{className:fe.expiredDesc},__("扩容后有效期至：{date}",{date:E()(null==s?void 0:s.expired_at).format("YYYY-MM-DD")})),a.a.createElement("div",{className:fe.row},a.a.createElement("div",{className:fe.left},__("当前版本")),a.a.createElement("div",{className:fe.right},null===(t=u.a.PAYMENT_MAP)||void 0===t?void 0:t[null==s?void 0:s.payment_type])),a.a.createElement("div",{className:fe.row},a.a.createElement("div",{className:fe.left},a.a.createElement("div",null,a.a.createElement("div",null,__("增购人数")),a.a.createElement("p",{className:fe.tips},__("已购空间席位 {memberSize} 人，购买后共 {newMemberSize} 人",{memberSize:s.maxMember,newMemberSize:R})))),a.a.createElement("div",{className:fe.right},a.a.createElement("div",{className:fe.memberSizeInput},a.a.createElement(b.a,{value:k,onChange:function(e){var t=e.target.value;if(!t)return S("");!/^[0-9]*$/g.test(t)||t<0||S(Math.min(t,l.MAX_MEMBER_LIMIT))},style:{width:100},suffix:__("人")})))),a.a.createElement("div",{className:fe.row},a.a.createElement("div",{className:fe.left},__("支付方式")),a.a.createElement("div",{className:fe.right},a.a.createElement(y.a,{className:f()(fe.channel,me({},fe.active,j===x.PAYMENT_TYPE.normal)),onClick:function(){return T(x.PAYMENT_TYPE.normal)},icon:a.a.createElement(A.b,{name:"icon-zhi",size:16})},__("支付宝")),c?a.a.createElement(y.a,{className:f()(fe.channel,me({},fe.active,j===x.PAYMENT_TYPE.settle)),style:{marginLeft:"12px"},onClick:function(){return T(x.PAYMENT_TYPE.settle)},icon:a.a.createElement(A.b,{name:"icon-bank",size:16})},__("银行转账")):a.a.createElement(v.a,{title:a.a.createElement(te,null),placement:"top"},a.a.createElement(y.a,{className:fe.channel,icon:a.a.createElement(A.b,{name:"icon-bank",size:16}),disabled:!0},__("银行转账"))))),M&&a.a.createElement(G,{totalAmount:M.totalAmount,discountAmount:M.discountAmount,details:M.details}),a.a.createElement("div",{className:fe.footer},a.a.createElement(y.a,{"data-aspm-click":m.ORG_LIMIT_SPM.create_order,"data-aspm-param":"pay_source=".concat(d,"^org_id=").concat(null==s?void 0:s.id,"^org_payment_type=").concat(null==s?void 0:s.payment_type,"^"),"data-testid":"buy-button",type:"primary",loading:n,onClick:function(){_?k<=0||i({memberIntrement:k,paymentType:j,orderType:p}):r.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))},className:fe.payBtn},n?__("购买中"):__("确认升级")),a.a.createElement("p",{className:fe.termsContainer},a.a.createElement(h.a,{onChange:function(){w(!_)},checked:_,"data-testid":"check-terms"},__("我已阅读并同意")),a.a.createElement("a",{target:"_blank",href:"/org-terms"},__("《语雀空间服务协议》")))))};ge.propTypes={buyLoading:c.a.bool,handleSubmitBuy:c.a.func,subAccountInfo:c.a.object,organization:c.a.object,paySource:c.a.string};var _e=Object(k.d)((function(e){return e}))(ge),Ee=(n(175),n(44)),we=n(1456),Oe=n.n(we),ke=n(1432),Se="Pay-module_left_u3-Jq",Ne="Pay-module_totalInfo_YM7Fb",xe="Pay-module_footer_MsuSK",Ae="Pay-module_termsContainer_MMlAf",Pe="Pay-module_pricingContainer_hjkUd",Ce="Pay-module_desc_a1fXI",je="Pay-module_dashline_y-S0k",Te="Pay-module_inputNumber_Uaz26",Ie="Pay-module_priceTag_ot6Kz",Me="Pay-module_hasDiscount_KLNoP",Le="Pay-module_discountPrice_HbCLz",Re="Pay-module_discountPriceValue_CUsg2",De="Pay-module_uploadPackages_VO59r",Ue="Pay-module_uploadPackageCard_6UXsL",Be="Pay-module_selectedUploadCard_yWd2Y",ze="Pay-module_uploadSize_WpwBc",Fe="Pay-module_uploadPackagePrice_zQPrm",Ve="Pay-module_promo_sD6ap";function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $e=function(e){var t=e.buyLoading,n=e.handleSubmitBuy,i=e.promoCode,c=e.setPromoCode,u=e.handlePaymentTypeChange,s=e.subAccountInfo,d=Ge(Object(o.useState)(!1),2),f=d[0],p=d[1],m=Ge(Object(o.useState)(!1),2),b=m[0],g=m[1],_=Ge(Object(o.useState)(x.ORG_UPLOAD_SIZE_MAP["100G"].value),2),E=_[0],w=_[1],O=Oe()({order_type:l.ORDER_TYPE.data,upload_size:E}),k=Object(ke.a)({totalAmount:O,setPromoCode:c}),S=k.totalAmountWithPromo,N=k.onVerifySuccess,C=k.handlePromoChange,j=window.appData.organization,T=void 0===j?{}:j;return a.a.createElement("div",{className:Pe,"data-testid":"buy-upload"},a.a.createElement("div",{className:Ce},__("流量购买后对{orgName}空间账户长期有效",{orgName:T.name})),a.a.createElement("h3",null,__("流量包")),a.a.createElement("div",{className:De},Object.keys(x.ORG_UPLOAD_SIZE_MAP).map((function(e){return a.a.createElement("div",{key:x.ORG_UPLOAD_SIZE_MAP[e].value,className:"".concat(Ue," ").concat(E===x.ORG_UPLOAD_SIZE_MAP[e].value?Be:""),onClick:function(){return w(x.ORG_UPLOAD_SIZE_MAP[e].value)}},a.a.createElement("div",{className:ze},e),a.a.createElement("div",{className:Fe},x.ORG_UPLOAD_SIZE_MAP[e].price," ",__("元")))}))),a.a.createElement("h3",null,__("支付方式")),a.a.createElement(Ee.a.Group,{defaultValue:x.PAYMENT_TYPE.normal,onChange:function(e){return u(e.target.value)},style:{marginTop:8}},a.a.createElement(Ee.a.Button,{value:x.PAYMENT_TYPE.normal},__("支付宝")),s?a.a.createElement(Ee.a.Button,{value:x.PAYMENT_TYPE.settle},__("银行转账")):a.a.createElement(v.a,{title:a.a.createElement(te,null),placement:"top"},a.a.createElement(Ee.a.Button,{value:x.PAYMENT_TYPE.settle,disabled:!0},__("银行转账")))),a.a.createElement("div",{className:Ve,style:{marginTop:24}},a.a.createElement("div",{className:Se,onClick:function(){p(!f)}},a.a.createElement(A.b,{name:"promo",width:18})," ",__("优惠码")),f&&a.a.createElement("div",{style:{width:240},className:Te},a.a.createElement(P.a,{value:i,promoUsage:"organization",onChange:C,onVerifySuccess:N}))),a.a.createElement("p",{className:je}),a.a.createElement("h3",null,__("费用总计"),"："),a.a.createElement("div",{className:Ne},a.a.createElement("span",{className:"".concat(Ie," ").concat(S?Me:"")},O)," ",__("元"),S&&a.a.createElement("span",{className:Le},__("优惠价")," ",a.a.createElement("span",{className:Re},S||O)," ",__("元"))),a.a.createElement("div",{className:xe},a.a.createElement(y.a,{"data-testid":"buy-button",type:"primary",loading:t,onClick:function(){b?n({uploadSize:E,total_amount:O}):r.a.info(__("需阅读并同意《语雀空间服务协议》后才能支付"))}},t?__("购买中"):__("立即支付")),a.a.createElement("p",{className:Ae},a.a.createElement(h.a,{onChange:function(){g(!b)},checked:b,"data-testid":"check-terms"},__("我已阅读并同意")),a.a.createElement("a",{target:"_blank",href:"/org-terms"},"《语雀空间服务协议》"))))};$e.propTypes={buyLoading:c.a.bool,handleSubmitBuy:c.a.func,promoCode:c.a.string,setPromoCode:c.a.func,handlePaymentTypeChange:c.a.func,subAccountInfo:c.a.object};var qe=$e,We="Qrcode-module_qrcodeImageCon_yy+Gi",He="Qrcode-module_alipayIconInQrCode_5Ng19",Ke="Qrcode-module_qrcodeContainer_c79eX",Ze="Qrcode-module_qrcodeImage_UEIyZ",Qe="Qrcode-module_desc1_ArZR9",Xe="Qrcode-module_desc2_E5sDl",Je="Qrcode-module_qrcodeTitleCon_-LJr2",et="Qrcode-module_qrcodeTitleDesc_OOQby",tt="Qrcode-module_qrcodeTitleValue_PBwE+",nt=function(e){var t=e.qrcodeUrl,n=e.totalAmount;return a.a.createElement("div",{className:Ke,"data-testid":"qrcode"},a.a.createElement("div",{className:Je},a.a.createElement("div",{className:et},__("扫一扫付款 (元)")),a.a.createElement("div",{className:tt},n)),a.a.createElement("div",{className:We},a.a.createElement("div",{className:He},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*GE2FQLYZ4kAAAAAAAAAAAABjARQnAQ"})),a.a.createElement("img",{className:Ze,src:t})),a.a.createElement("div",{className:Qe},__("打开手机支付宝，扫一扫继续付款")),a.a.createElement("div",{className:Xe},__("付款后可在线申请发票")))};nt.propTypes={qrcodeUrl:c.a.string,totalAmount:c.a.number};var rt=nt,ot="PayModal-module_noLineModal_r4djn",at="PayModal-module_payModal_1VmRL",it="PayModal-module_largeModal_reIw0";function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ut(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st,dt=function(e){var t=e.type,n=e.targetLevel,r=e.qrcodeUrl,i=e.visible,c=e.onCancel,u=e.buyLoading,d=e.memberSize,h=e.max_member,v=e.handleMemberChange,y=e.handleSubmitBuy,b=e.handleSelectPackage,g=e.duration,_=e.handleDurationChange,E=e.remaining,w=e.totalAmount,O=e.organizationInfo,k=void 0===O?{}:O,S=e.promoCode,N=e.setPromoCode,x=e.currentMember,A=e.subAccountInfo,P=e.paySource,C=null,j=[l.PAY_MODAL_ACTION.upgrade,l.PAY_MODAL_ACTION.renew,l.PAY_MODAL_ACTION.trial,l.PAY_MODAL_ACTION.buy].includes(t);switch(t){case"qrcode":C=a.a.createElement(rt,{qrcodeUrl:r,totalAmount:w});break;case l.PAY_MODAL_ACTION.buy:case l.PAY_MODAL_ACTION.upgrade:case l.PAY_MODAL_ACTION.renew:case l.PAY_MODAL_ACTION.trial:C=a.a.createElement(de,{actionType:t,targetLevel:n,handleSelectPackage:b,remaining:E,max_member:h,memberSize:d,handleMemberChange:v,duration:g,handleDurationChange:_,buyLoading:u,handleSubmitBuy:y,organizationInfo:k,promoCode:S,setPromoCode:N,currentMember:x,subAccountInfo:A,paySource:P});break;case l.PAY_MODAL_ACTION.buyMember:C=a.a.createElement(_e,{max_member:h,memberSize:d,handleMemberChange:v,buyLoading:u,handleSubmitBuy:y,organizationInfo:k,promoCode:S,setPromoCode:N,currentMember:x,subAccountInfo:A,paySource:P});break;case l.PAY_MODAL_ACTION.data:C=a.a.createElement(qe,{buyLoading:u,handleSubmitBuy:y,promoCode:S,setPromoCode:N,subAccountInfo:A})}var T=[l.PAY_MODAL_ACTION.renew,l.PAY_MODAL_ACTION.buyMember].includes(t)?"":ot,I=ut(ut(ut(ut(ut({},l.PAY_MODAL_ACTION.upgrade,860),l.PAY_MODAL_ACTION.renew,860),l.PAY_MODAL_ACTION.trial,860),l.PAY_MODAL_ACTION.buy,860),l.PAY_MODAL_ACTION.buyMember,420);return Object(o.useEffect)((function(){var e=[l.PAY_MODAL_ACTION.trial].includes(t);if(i&&e)Object(p.spmClick)(m.ORG_LIMIT_SPM.start_trial,{pay_source:P,org_id:k.id,org_payment_type:k.payment_type});else{var n=[l.PAY_MODAL_ACTION.buy,l.PAY_MODAL_ACTION.renew,l.PAY_MODAL_ACTION.upgrade,l.PAY_MODAL_ACTION.buyMember].includes(t);i&&n&&Object(p.spmClick)(m.ORG_LIMIT_SPM.start_pay,{pay_source:P,order_type:t,org_id:k.id,org_payment_type:k.payment_type,org_trial_status:k.trialStatus})}}),[]),a.a.createElement(s.a,{visible:i,maskClosable:!1,onCancel:c,footer:null,width:I[t]||560,centered:!0,className:f()(T,at,ut({},it,j))},a.a.createElement("div",{"data-testid":"pay-modal"},C))};dt.propTypes={type:c.a.oneOf(["qrcode"].concat((st=Object.values(l.PAY_MODAL_ACTION),function(e){if(Array.isArray(e))return lt(e)}(st)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(st)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(st)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))),visible:c.a.bool,qrcodeUrl:c.a.string,onCancel:c.a.func,buyLoading:c.a.bool,memberSize:c.a.number,max_member:c.a.number,handleMemberChange:c.a.func,handleSubmitBuy:c.a.func,handleSelectPackage:c.a.func,duration:c.a.number,handleDurationChange:c.a.func,remaining:c.a.number,totalAmount:c.a.number,organizationInfo:c.a.object,promoCode:c.a.string,setPromoCode:c.a.func,handlePaymentTypeChange:c.a.func,currentMember:c.a.number,subAccountInfo:c.a.object,paySource:c.a.string};var ft=dt,pt="ProcessingModal-module_processContainer_dOZ9t",mt="ProcessingModal-module_processImg_Fl+7o",ht="ProcessingModal-module_processInfo_VPh0u",vt=function(e){var t=e.visible;return a.a.createElement(s.a,{title:null,visible:t,maskClosable:!1,closable:!1,footer:null,centered:!0,width:480},a.a.createElement("div",{className:pt,"data-testid":"processing-modal"},a.a.createElement("img",{className:mt,src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*7q7fR4_EUQQAAAAAAAAAAABjARQnAQ"}),a.a.createElement("p",{className:ht},__("付费更新中，请稍后..."))))};vt.propTypes={visible:c.a.bool};var yt=vt,bt=n(382),gt=n(347),_t="PaidSuccessModal-module_successModalContainer_gb6Iw",Et="PaidSuccessModal-module_successModalInfoCon_aLoy0",wt="PaidSuccessModal-module_successModalButtonCon_BP8Ns",Ot="PaidSuccessModal-module_applyReceiptButton_BrptN",kt="PaidSuccessModal-module_checkUploadButton_n0Sct",St="PaidSuccessModal-module_successModalSubTitle_Hq8oy",Nt="PaidSuccessModal-module_successModalItem_EBnTl",xt="PaidSuccessModal-module_successModalBlank_3ENdm",At=function(e){var t,n=e.organizationInfo,r=void 0===n?{}:n,o=e.visible,i=e.onClose,c=e.onClickApplyReceipt,d=window.appData.me,f=r.name,p=r.expired_at,m=r.order_id,h=r.order_type,v=r.package_type,b=r.duration,g=r.upload_size,_=r.max_member,w=r.member_increment,O=r.amount,k=r.order_updated_at,S="",N="",x="",A=!1,P=!1,C=!1,j=!1,T="",I="";switch(h){case l.ORDER_TYPE.buy:S=__(__("恭喜你，语雀空间成功升级为{payment}",{payment:u.a.PAYMENT_MAP[v]})),N=__("套餐"),x=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[v],max_member:_}),A=!0,P=!0,C=!1,T="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",I="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case l.ORDER_TYPE.renew:S=__("恭喜你，语雀空间{action}成功",{action:u.a.getPaymentAction(null===(t=window.appData.organization)||void 0===t?void 0:t.payment_type)}),N=__("套餐"),x=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[v],max_member:_}),A=!0,P=!0,C=!1,T="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",I="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case l.ORDER_TYPE.upgrade:S=__("恭喜你，语雀空间升级成功"),N=__("套餐"),x=__("{payment}｜{max_member}人套餐",{payment:u.a.PAYMENT_MAP[v],max_member:_}),A=!0,P=!1,C=!1,T="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",I="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case l.ORDER_TYPE.buyMember:S=__("恭喜你，空间人数规模升级成功"),C=!1,j=!0,T="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Jr-6TomkfQ0AAAAAAAAAAAAAARQnAQ",I="//gw.alipayobjects.com/mdn/prod_resou/afts/img/A*v1AKQ5xxigYAAAAAAAAAAAAAARQnAQ";break;case l.ORDER_TYPE.data:S=__("恭喜你，上传流量购买成功"),N=__("上传流量"),x="".concat(Object(gt.getSizeValue)(g).value).concat(Object(gt.getSizeValue)(g).unit),T="https://gw.alipayobjects.com/zos/basement_prod/39563d69-6bdd-4ee3-8844-0f549452d13f.svg"}return a.a.createElement(s.a,{className:"paid-success-modal",title:null,visible:o,maskClosable:!1,onCancel:i,footer:null,centered:!0,width:480},a.a.createElement("div",{className:_t,"data-testid":"paid-success-modal"},a.a.createElement(bt.a,{src:T,darkSrc:I}),a.a.createElement("div",{className:Et},a.a.createElement("h1",{style:{fontSize:"18px"}},S),a.a.createElement("p",{className:xt}),a.a.createElement("p",{className:St},__("订单信息")),a.a.createElement("p",{className:Nt},__("空间名称"),"：",f),a.a.createElement("p",{className:Nt},__("订单号"),"：",m),N&&a.a.createElement("p",{className:Nt},N,"：",x),P&&a.a.createElement("p",{className:Nt},__("购买时长"),"：",b," ",__("年")),C&&a.a.createElement("p",{className:Nt},__("人数规模"),"：",__("{max_member}人",{max_member:_})),j&&a.a.createElement("p",{className:Nt},__("增购人数"),"：",__("{member_increment} 人",{member_increment:w})),a.a.createElement("p",{className:Nt},__("付款金额"),"：",O," ",__("元")),a.a.createElement("p",{className:Nt},__("付款人"),"：",d&&d.name),a.a.createElement("p",{className:Nt},__("付款时间"),"：",E()(k).format("YYYY-MM-DD HH:mm:ss")),A&&a.a.createElement("p",{className:Nt},__("到期时间"),"：",E()(p).format("YYYY-MM-DD HH:mm:ss")),a.a.createElement("div",{className:wt},a.a.createElement(y.a,{type:"primary",onClick:i,"data-testid":"close-button"},__("立即使用")),a.a.createElement(y.a,{className:Ot,onClick:function(){return c()}},__("申请开票")),h===l.ORDER_TYPE.data&&a.a.createElement(y.a,{className:kt,href:"/r/organizations/dashboard/cashier"},__("查看上传流量"))))))};At.propTypes={organizationInfo:c.a.object.isRequired,visible:c.a.bool,onClose:c.a.func,onClickApplyReceipt:c.a.func};var Pt=At,Ct=(n(207),n(49)),jt=n(712),Tt=n(711),It={contactTips:"ReceiptModal-module_contactTips_f0fAJ",receiptTypeTitle:"ReceiptModal-module_receiptTypeTitle_mZi8G",receiptTypeTitleText:"ReceiptModal-module_receiptTypeTitleText_QQBhY",receiptDesc:"ReceiptModal-module_receiptDesc_fY2bw"};function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Mt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zt=Ct.a.create()(jt.a),Ft=Ct.a.create()(Tt.a),Vt=function(e){var t=e.visible,n=e.organizationInfo,i=e.handleApplyReceiptCancel,c=e.hasReceipt,l=e.setHasReceipt,u=(window.appData||{}).organization,d=void 0===u?{}:u,f=(window.appData.paymentInfo||{}).receipt,p=f&&void 0!==f.type?f.type:1,m=Ut(Object(o.useState)(p),2),h=m[0],v=m[1],y=Ut(Object(o.useState)(!0),2),b=y[0],g=y[1],_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";(0,e.form.validateFields)((function(e,o){if(!e){var a=x.RECEIPT_TYPES[t];C.a.organizationReceipts.create(Rt(Rt({},o),{},{type:a,order_id:n.order_id,organization_id:d.id})).then((function(e){r.a.success(__("已成功提交发票申请")),l(!0),i()}))}}))};return a.a.createElement(s.a,{className:"receipt-success-modal",title:a.a.createElement(a.a.Fragment,null,c?__("已提交申请"):__("申请发票"),a.a.createElement("p",{className:It.receiptDesc},__("发票将在申请后的 7 个工作日内开具，目前处于升级数电发票的过渡期，详情请查看"),a.a.createElement("a",{href:"https://www.yuque.com/yuque/qa/ul74ukuugy5wvuqd",target:"_blank"},__("关于开具数电发票的通知")))),visible:t,maskClosable:!1,closable:c,onCancel:i,footer:null,centered:!0,width:500},a.a.createElement("div",{className:It.receiptContainer,"data-testid":"receipt-modal"},c?a.a.createElement("p",{className:It.contactTips},__("如需帮助请联系"),"：support@yuque.com"):a.a.createElement("div",{className:It.receiptTypeTitle},a.a.createElement(Ee.a.Group,{disabled:c||!b,onChange:function(){v(0===h?1:0)},value:h},a.a.createElement(Ee.a,{value:1},__("专用发票")),a.a.createElement(Ee.a,{value:0},__("普通电子发票")))),0===h?a.a.createElement(zt,{handleClickReceiptConfirm:_,handleApplyReceiptCancel:i,handleReceiptChange:g,data:f,isFinished:c,isOrganization:!0}):a.a.createElement(Ft,{handleClickReceiptConfirm:_,handleApplyReceiptCancel:i,handleReceiptChange:g,data:f,isFinished:c})))};Vt.propTypes={visible:c.a.bool,organizationInfo:c.a.object,handleApplyReceiptCancel:c.a.func,hasReceipt:c.a.bool,setHasReceipt:c.a.func};var Gt=Vt,Yt=(n(177),n(58)),$t=n(1428),qt={wrapper:"SubAccountInfoModal-module_wrapper_P6mlj",infoField:"SubAccountInfoModal-module_infoField_IMZ6p",infoFieldTitle:"SubAccountInfoModal-module_infoFieldTitle_tgwmv",infoFieldPaymentAlert:"SubAccountInfoModal-module_infoFieldPaymentAlert_UOLk7",buttons:"SubAccountInfoModal-module_buttons_rfW-e",btn:"SubAccountInfoModal-module_btn_WuNy4",loading:"SubAccountInfoModal-module_loading_sNKQL",loadingIcon:"SubAccountInfoModal-module_loadingIcon_M7IJr",loadingCircle:"SubAccountInfoModal-module_loadingCircle_mPmQ5",loadingDesc:"SubAccountInfoModal-module_loadingDesc_QHGbP"};function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=Xt(Xt(Xt(Xt(Xt(Xt({},l.ORDER_TYPE.buy,__("购买空间")),l.ORDER_TYPE.upgrade,__("升级空间")),l.ORDER_TYPE.renew,__("续费空间")),l.ORDER_TYPE.buyMember,__("购买空间人数")),l.ORDER_TYPE.data,__("购买空间流量")),l.ORDER_TYPE.downgrade,__("降级空间")),en=function(e){var t,n=(window.appData.paymentInfo||{}).order_type,r=function(e){var t=void 0!==e.orderTypeFromAppData,n=Zt(Object(o.useState)(!t),2),r=n[0],a=n[1],i=Jt[e.orderTypeFromAppData]||"";return{state:Kt(Kt({},e),{},{showExistedTips:t,showMainField:r,orderTypeName:i}),setShowMainField:a}}(Kt(Kt({},e),{},{orderTypeFromAppData:n})),i=r.state,c=i.visible,l=i.subAccountInfo,u=i.closeSettleOrder,d=i.closeAccountInfoModal,f=i.showExistedTips,p=i.showMainField,m=i.orderTypeName,h=r.setShowMainField;return a.a.createElement(s.a,{title:__("购买空间套餐"),visible:c,maskClosable:!1,closable:!0,footer:null,centered:!0,width:550,onCancel:d},l&&l.order?a.a.createElement("div",{className:qt.wrapper,"data-testid":"subaccount-modal"},f&&!p&&a.a.createElement("div",{className:qt.tips},a.a.createElement("div",null,__("你有订单尚未完成，请先完成订单或取消订单")),a.a.createElement("div",{className:qt.buttons},a.a.createElement(y.a,{type:"primary",onClick:function(){return h(!0)},className:qt.btn},__("去查看")))),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:qt.infoField},n&&a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("订单类型")),m),a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("转账金额")),l.order.amount," ",__("元")),a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("收款公司")),l.local_account_name),a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("收款账户")),l.account_no_4_credit_transfer),a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("开户行")),l.local_bank_name_4_transfer)),a.a.createElement("div",{className:qt.infoField},a.a.createElement("p",null,a.a.createElement("span",{className:qt.infoFieldTitle},__("订单号")),l.order.order_id),a.a.createElement("div",null,__("请于 10 日内转账付款，银行转账有 1~3 个工作日延迟，收到转账后将以短信形式通知您开通情况。")),a.a.createElement("div",null,__("如有任何疑问，请发邮件到")," ",a.a.createElement("a",{href:"mailto:support@yuque.com"},"support@yuque.com")," ",__("，会有专人协助您解决。"))),a.a.createElement("div",{className:qt.buttons},a.a.createElement(Yt.a,{title:__("你确定取消订单吗？"),onConfirm:u,okText:__("取消订单"),cancelText:__("再想想")},a.a.createElement(y.a,{type:"danger",className:qt.btn},__("取消订单")))))):(t=__("正在准备相关信息，可能需等待 1-5 分钟"),a.a.createElement("div",{className:qt.loading},a.a.createElement($t.default,{className:qt.loadingIcon}),t&&a.a.createElement("div",{className:qt.loadingDesc},t))))};en.propTypes={visible:c.a.bool,subAccountInfo:c.a.object,closeSettleOrder:c.a.func,closeAccountInfoModal:c.a.func};var tn=en,nn=n(1230),rn=n.n(nn),on=n(1427),an=n.n(on),cn=n(88),ln=n.n(cn);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==un(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn,vn=!1,yn=function(e,t){if(e.max_member<t){var n=l.PRICE_STAGES.find((function(e){return e.member>t}));if(n)return n.member}return e.max_member},bn=C.a.pay,gn=bn.create,_n=bn.buyMember,En=bn.buyUpload,wn=bn.downgrade,On=bn.upgrade,kn=bn.renew,Sn=mn(mn(mn(mn(mn(mn({},l.ORDER_TYPE.buy,gn),l.ORDER_TYPE.upgrade,On),l.ORDER_TYPE.renew,kn),l.ORDER_TYPE.buyMember,_n),l.ORDER_TYPE.data,En),l.ORDER_TYPE.downgrade,wn),Nn=function(e){var t,n=e.organization,r=void 0===n?{}:n,a=e.visible,i=void 0!==a&&a,c=e.type,u=void 0===c?"buyModal":c,s=e.actionType,d=e.onClose,f=window.appData.paymentInfo||{},p=f.order_id,m=f.receipt,h=f.isSettleOrder,v=fn(Object(o.useState)(!1),2),y=v[0],b=v[1],g=fn(Object(o.useState)(!1),2),_=g[0],w=g[1],O=fn(Object(o.useState)(!1),2),k=O[0],S=O[1],N=fn(Object(o.useState)(!1),2),A=N[0],P=N[1],j=fn(Object(o.useState)(!1),2),T=j[0],I=j[1],M=fn(Object(o.useState)(null),2),L=M[0],R=M[1],D=fn(Object(o.useState)(!!m),2),U=D[0],B=D[1],z=fn(Object(o.useState)(!1),2),F=z[0],V=z[1],G=fn(Object(o.useState)(dn(dn({},r),{},{order_id:p})),2),Y=G[0],$=G[1],q=fn(Object(o.useState)(1===r.payment_type),2),W=q[0],H=q[1],K=fn(Object(o.useState)(null),2),Z=K[0],Q=K[1],X=fn(Object(o.useState)(null),2),J=X[0],ee=X[1],te=fn(Object(o.useState)(r.members_count||r.max_member),2),ne=te[0],re=te[1],oe=s===l.ORDER_TYPE.renew?yn(Y,ne):null===(t=l.PRICE_STAGES.find((function(e){return e.member>=r.max_member})))||void 0===t?void 0:t.member,ae=fn(Object(o.useState)(oe),2),ie=ae[0],ce=ae[1],le=fn(Object(o.useState)(1),2),ue=le[0],se=le[1],de=fn(Object(o.useState)(0),2),fe=de[0],pe=de[1],me=fn(Object(o.useState)(),2),he=me[0],ve=me[1],ye=Object(o.useRef)(null),be=function(){S(!1),P(!0)},ge=function(e){C.a.pay.query({order_id:e}).then((function(t){return t.isFinished?(b(!1),w(!1),S(!0),H(!0),void $(t)):(t.isPaid&&(b(!1),w(!0),H(!0)),t.isClosed?(b(!1),w(!1),void S(!1)):void((t.isPaid||t.needQuery)&&(ye.current=setTimeout((function(){return ge(e)}),3e3))))}))},_e=function(e){C.a.pay.query({order_id:e}).then((function(t){return t.isFinished?(b(!1),w(!1),S(!0),H(!0),void $(t)):t.isClosed?(b(!1),w(!1),void S(!1)):(t.account_no&&(R(t),b(!1),I(!0)),void(t.needQuery&&(b(!1),I(!0),ye.current=setTimeout((function(){return _e(e)}),3e3))))}))},Ee=function(){if(hn||h)return I(!0),void _e(hn||p);if(s===l.ORDER_TYPE.buyMember){var e=l.PRICE_STAGES.find((function(e){return e.member>r.max_member}));ce(e?e.member:l.MAX_MEMBER_LIMIT)}Q(null),V(!1),b(!0)};Object(o.useEffect)((function(){if(i){switch(u){case"buyModal":Ee();break;case"receiptModal":be()}C.a.organizations.membersCount({id:r.id}).then(re),L||C.a.pay.getSettleAccount({order_id:hn||p}).then(R)}}),[i]),Object(o.useEffect)((function(){if(!vn&&(vn=!0,!W&&window.appData.paymentInfo&&!h)){var e=rn.a.parse(window.location.search).order_id,t=window.appData.paymentInfo,n=t.orderExpired,r=t.isFinished;if(p&&!r)return function(e){var t=window.location,n="".concat(t.protocol,"//").concat(t.host).concat(t.pathname,"?order_id=").concat(e);t.href=n}(p);n?window.location.href=window.location.pathname:e&&(w(!0),ge(e))}}),[y]),Object(o.useEffect)((function(){return function(){ye.current&&(clearTimeout(ye.current),ye.current=null)}}),[]);var we=r.max_member;if(Object(o.useEffect)((function(){if(s===l.ORDER_TYPE.renew){var e=yn(Y,ne);ce(e)}}),[oe]),!window.appData.paymentInfo)return{};var Oe=function(e,t){d&&d(),e&&window.location.assign(t||window.location.origin+window.location.pathname)},ke=Y.expired_at,Se=E()(ke).diff(Date.now(),"day")||1;return{payModalVisible:y,processModalVisible:_,successModalVisible:k,receiptModalVisible:A,subAccountInfoModalVisible:T,subAccountInfo:L,startToApplyReceipt:be,buyLoading:F,organizationInfo:Y,payModalType:Z?"qrcode":s,qrcodeUrl:J,handleSubmitBuy:function(e){var t=e.orderType||l.ORDER_TYPE.buy;if(!F){V(!0);var n={member_increment:null==e?void 0:e.memberIntrement,member_size:null==e?void 0:e.memberSize,duration:null==e?void 0:e.duration,promo_code:null==e?void 0:e.promoCode,payment_type:null==e?void 0:e.paymentType,package_type:null==e?void 0:e.packageType};(null==e?void 0:e.paymentType)===x.PAYMENT_TYPE.settle?Sn[t](n).then((function(e){V(!1);var t=e.order_id;pe(+e.amount),hn=t,_e(t)})).catch((function(){V(!1)})):Sn[t](n).then((function(e){V(!1);var t=e.out_trade_no;Q({orderId:t,url:e.qr_code}),an.a.toDataURL(e.qr_code,(function(e,t){ee(t)})),pe(+e.totalAmount),ge(t)})).catch((function(){V(!1)}))}},handlePayModalCancel:function(){b(!1),Oe(!1)},handleApplyReceiptCancel:function(){P(!1),Oe(!0,"/r/organizations/dashboard/cashier/orders")},handleMemberChange:function(e){ce(e)},closePaidSuccessModal:function(){S(!1),Oe(!0)},memberSize:ie,hasReceipt:U,setHasReceipt:B,duration:ue,handleDurationChange:function(e){se(e)},remaining:Se,totalAmount:fe,promoCode:he,setPromoCode:ve,closeAccountInfoModal:function(){d&&d(),ye.current&&(clearTimeout(ye.current),ye.current=null),I(!1)},closeSettleOrder:function(){var e=ln()(L,"order.order_id");e&&C.a.pay.close({order_id:e}).then((function(){window.location.reload()}))},currentMember:ne,maxMember:we}},xn=function(e){var t=e.organization,n=e.visible,o=e.type,i=e.actionType,c=e.targetLevel,s=e.onClose,d=e.paySource,f=Nn({organization:t,visible:n,type:o,actionType:i,onClose:s}),p=f.payModalVisible,m=f.processModalVisible,h=f.successModalVisible,v=f.receiptModalVisible,y=f.subAccountInfoModalVisible,b=f.subAccountInfo,g=f.startToApplyReceipt,_=f.buyLoading,E=f.organizationInfo,w=void 0===E?{}:E,O=f.payModalType,k=f.qrcodeUrl,S=f.handleSubmitBuy,N=f.handlePayModalCancel,x=f.handleApplyReceiptCancel,A=f.handleMemberChange,P=f.closePaidSuccessModal,C=f.hasReceipt,j=f.setHasReceipt,T=f.duration,I=f.handleDurationChange,M=f.remaining,L=f.totalAmount,R=f.closeAccountInfoModal,D=f.closeSettleOrder,U=u.a.isPremium(t),B=u.a.isFree(t);return i===l.PAY_MODAL_ACTION.buy&&U?(r.a.warning(__("已付费空间不允许重复购买")),null):i!==l.PAY_MODAL_ACTION.upgrade||U?i===l.PAY_MODAL_ACTION.renew&&B?(r.a.warning(__("标准版空间无法续费，请直接购买")),null):a.a.createElement("div",{"data-testid":"org-pay-flow"},a.a.createElement(ft,{key:"pay-modal-".concat(p),visible:p,type:O,targetLevel:c,qrcodeUrl:k,onCancel:N,buyLoading:_,handleMemberChange:A,handleSubmitBuy:S,duration:T,handleDurationChange:I,remaining:M,organizationInfo:w,totalAmount:L,subAccountInfo:b,paySource:d}),a.a.createElement(yt,{key:"process-modal-".concat(m),visible:m}),a.a.createElement(Pt,{key:"success-modal-".concat(h),visible:h,organizationInfo:w,onClose:P,onClickApplyReceipt:g}),a.a.createElement(Gt,{key:"receipt-modal-".concat(v),visible:v,organizationInfo:w,handleApplyReceiptCancel:x,hasReceipt:C,setHasReceipt:j}),a.a.createElement(tn,{key:"subaccount-modal-".concat(y),visible:y,subAccountInfo:b,closeAccountInfoModal:R,closeSettleOrder:D})):(r.a.warning(__("非付费空间无法升级")),null)};xn.propTypes={organization:c.a.object.isRequired,type:c.a.oneOf(["buyModal","receiptModal"]),actionType:c.a.oneOf(Object.values(l.PAY_MODAL_ACTION)),visible:c.a.bool,onClose:c.a.func,targetLevel:c.a.oneOf([l.PAYMENT_TYPE.pro,l.PAYMENT_TYPE.enterprise]),paySource:c.a.string};t.a=xn},965:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return b}));n(227);var r=n(101),o=n(0),a=n.n(o),i=n(6),c=n.n(i),l=n(10),u=n(184),s=n(216),d=n(63),f=n(563),p=["book","width","showTooltip"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(null,arguments)}var h={book:__("文档知识库"),design:__("图集"),sheet:__("表格知识库"),column:__("专栏"),resource:__("资源知识库"),thread:__("话题知识库")},v=function(e){var t,n=e.book,o=e.width,i=void 0===o?24:o,c=e.showTooltip,l=void 0===c||c,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,p),s=null===(t=n.type)||void 0===t?void 0:t.toLowerCase(),v=l?h[s]:"";return a.a.createElement(r.a,{title:v},a.a.createElement(d.b,m({name:f.b.getName("Book",n),style:f.b.getStyle(n),className:"book-icon",width:i},u)))};v.propTypes={book:c.a.object.isRequired,width:c.a.number,showTooltip:c.a.bool};var y=function(e){var t,n=e.size,o=void 0===n?14:n,i=e.placement,c=void 0===i?"top":i,s=e.showTooltip,f=void 0===s||s,p=e.group,m=e.book,h=e.organization,v=e.getPopupContainer,y=Object(u.d)({privacy:e.public,type:"book",organization:h,book:m,group:p});return a.a.createElement(r.a,{open:f,placement:c,getPopupContainer:v,title:a.a.createElement("span",null,y,(null===(t=m.abilities)||void 0===t?void 0:t.share)&&a.a.createElement("a",{onClick:function(e){e.stopPropagation(),window.open("/r/".concat(null==p?void 0:p.login,"/").concat(m.slug,"/collaborators"))},className:"toggle-publicity"},__("切换公开性")))},a.a.createElement("span",{className:"name-lock"},a.a.createElement(d.b,{name:e.public!==l.PRIVACY.private?"icon-public":(null==m||m.extend_private,l.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:o,height:o})))};y.propTypes={size:c.a.number,placement:c.a.string,showTooltip:c.a.bool,public:c.a.number,group:c.a.object,book:c.a.object,organization:c.a.object,getPopupContainer:c.a.func};var b=function(e){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"book-access-scope"})}},a.a.createElement(y,e))}},966:function(e,t,n){"use strict";function r(e,t,n,r,o){var a,i,c=n[e]||{},l=n[t]||{};"left"===c.fixed?a=r.left[e]:"right"===l.fixed&&(i=r.right[t]);var u=!1,s=!1,d=!1,f=!1,p=n[t+1],m=n[e-1];if("rtl"===o){if(void 0!==a)f=!(m&&"left"===m.fixed);else if(void 0!==i){d=!(p&&"right"===p.fixed)}}else if(void 0!==a){u=!(p&&"left"===p.fixed)}else if(void 0!==i){s=!(m&&"right"===m.fixed)}return{fixLeft:a,fixRight:i,lastFixLeft:u,firstFixRight:s,lastFixRight:d,firstFixLeft:f,isSticky:r.isSticky}}n.d(t,"a",(function(){return r}))},967:function(e,t,n){"use strict";function r(){var e=window.appData||{},t=e.isAntDingTalkDesktopApp,n=e.isAntDingTalkMobileApp;return t||n}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_self",t=window.appData||{},n=t.isAntDingTalkDesktopApp,r=t.isAntDingTalkMobileApp;return"_self"===e?n||r?"_blank":"_self":"_blank"}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},972:function(e,t,n){"use strict";n(3154);var r=n(1258);n(1343);t.a=r.a},974:function(e,t,n){"use strict";var r=n(1439);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.e})),n.d(t,"e",(function(){return r.f})),n.d(t,"f",(function(){return r.g})),n.d(t,"g",(function(){return r.h})),n.d(t,"h",(function(){return r.i})),n.d(t,"i",(function(){return r.j})),n.d(t,"j",(function(){return r.k})),n.d(t,"k",(function(){return r.l})),n.d(t,"l",(function(){return r.m})),n.d(t,"m",(function(){return r.n})),n.d(t,"n",(function(){return r.o}))},975:function(e,t,n){"use strict";n(277);var r=n(147),o=(n(589),n(206)),a=(n(53),n(12)),i=(n(175),n(44)),c=(n(130),n(41)),l=(n(138),n(30)),u=(n(207),n(49)),s=n(0),d=n.n(s),f=n(6),p=n.n(f),m=n(1443),h=n(1437),v={docTask:"DocTask-module_docTask_NywmO",settingFile:"DocTask-module_settingFile_bFy51",hr:"DocTask-module_hr_y8Wz9",settingFileIcon:"DocTask-module_settingFileIcon_++xRm",settingContent:"DocTask-module_settingContent_leSlb",isFirst:"DocTask-module_isFirst_RPJNh",settingTitlt2:"DocTask-module_settingTitlt2_OZfjd",settingFileTypeName:"DocTask-module_settingFileTypeName_S4Bv1",settingFileTypeExt:"DocTask-module_settingFileTypeExt_GCoBd"};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}var b={STATUS:{INIT:"init",SETTING:"setting",PROCESSING:"processing",UPLOADING:"uploading",PENDING:"pending",DONE:"done",SUCCESS:"success",ERROR:"error"}};b.AdvanceSetting=u.a.create({name:"advanceSettingForm"})(Object(s.forwardRef)((function(e,t){var n=e.type,r=e.target,f=void 0===r?{}:r,p=e.settings,m=e.actions,h=e.title,b=e.form,g=e.hideHeader;if(!n)return null;var _=b.getFieldDecorator;return Object(s.useImperativeHandle)(t,(function(){return{form:b,getValue:function(){var e=b.getFieldsValue()||{};return Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var n=e[t][0];null==n?delete e[t]:e[t]=n}})),e}}})),d.a.createElement("div",{"data-testid":"docTask-".concat(n.key)},!g&&d.a.createElement(c.a,{className:v.settingFile,type:"flex",justify:"start",align:"middle"},d.a.createElement(l.a,{className:v.settingFileIcon},d.a.createElement("img",{src:n.icon,className:""})),d.a.createElement(l.a,{className:v.settingFileTypeMeta},d.a.createElement("div",{className:v.settingFileTypeName},h||f.title||f.name||n.name),d.a.createElement("div",{className:v.settingFileTypeExt},n.extensions.join(" ")))),d.a.createElement("div",{className:v.settingContent},d.a.createElement("h2",{className:v.settingTitlt2},__("高级选项")),d.a.createElement(u.a,null,p.map((function(e,t){if(Array.isArray(e)){var n=0===t?v.isFirst:"";return d.a.createElement(u.a.Item,{className:n},_(e[0].name,{initialValue:e.find((function(e){return e.default})).value})(d.a.createElement(i.a.Group,null,e.map((function(e){return d.a.createElement(i.a,{value:e.value},e.label)})))))}if("text"===e.type){var r={};return e.validator&&(e.validateOnBlur&&(r.validateTrigger=["onChange","onBlur"]),r.rules=[{validator:e.validator}]),d.a.createElement(u.a.Item,{label:e.label,colon:e.colon,hidden:e.hidden},_(e.name,r)(d.a.createElement(a.a,y({type:"text",autoComplete:"off",maxLength:"1000"},e))))}return d.a.createElement(u.a.Item,null,_(e.name,{initialValue:[e.default&&e.value]})(d.a.createElement(o.a.Group,null,d.a.createElement(o.a,{value:e.value},e.label))))})))),d.a.createElement("div",{className:v.settingFooter},m))}))),b.Error=function(e){return d.a.createElement("div",{className:"".concat(v.docTask," ").concat(v.docTaskError)},d.a.createElement("p",{className:"icon"},d.a.createElement(m.default,null)),d.a.createElement("p",{className:"tip"},e.tip),d.a.createElement("p",{className:"error"},e.error),d.a.createElement("p",{className:"action"},e.action))},b.Error.propTypes={tip:p.a.string,action:p.a.node,error:p.a.string},b.Success=function(e){return d.a.createElement("div",{className:"".concat(v.docTask," ").concat(v.docTaskSuccess)},d.a.createElement("p",{className:"icon"},d.a.createElement(h.default,null)),d.a.createElement("p",{className:"tip"},e.tip),d.a.createElement("p",{className:"action"},e.action))},b.Success.propTypes={tip:p.a.string,action:p.a.node},b.Processing=function(e){return d.a.createElement("div",{className:"".concat(v.docTask," ").concat(v.docTaskProcessing)},d.a.createElement(r.a,{justify:"block"}),d.a.createElement("p",{className:"tip"},d.a.createElement("span",null,e.tip)))},b.Processing.propTypes={tip:p.a.string};t.a=b},977:function(e,t,n){"use strict";var r=n(26),o=n(2),a=n(7),i=n(4),c=n(0),l=n(5),u=n.n(l),s=n(61),d=n(1012),f=n(1237),p=n(1236),m=n(218),h=n(474),v=n(167),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},b=10;function g(e,t,n){var o=t&&"object"===Object(r.a)(t)?t:{},l=o.total,u=void 0===l?0:l,s=y(o,["total"]),d=Object(c.useState)((function(){return{current:"defaultCurrent"in s?s.defaultCurrent:1,pageSize:"defaultPageSize"in s?s.defaultPageSize:b}})),f=Object(a.a)(d,2),p=f[0],m=f[1],h=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))})),e}(p,s,{total:u>0?u:e}),v=Math.ceil((u||e)/h.pageSize);h.current>v&&(h.current=v||1);var g=function(){m({current:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,pageSize:(arguments.length>1?arguments[1]:void 0)||h.pageSize})};return!1===t?[{},function(){}]:[Object(i.a)(Object(i.a)({},h),{onChange:function(e,r){var o;t&&(null===(o=t.onChange)||void 0===o||o.call(t,e,r)),g(e,r),n(e,r||(null==h?void 0:h.pageSize))}}),g]}var _=n(721),E=n(16),w=n(468),O=n(132),k=n(477),S=n(160),N=n(68),x=n(426),A=n(348),P=n(217),C=n(710),j=n(59),T="SELECT_ALL",I="SELECT_INVERT",M="SELECT_NONE";function L(e){return e&&e.fixed}function R(e,t){var n=[];return(e||[]).forEach((function(e){n.push(e),e&&"object"===Object(r.a)(e)&&t in e&&(n=[].concat(Object(E.a)(n),Object(E.a)(R(e[t],t))))})),n}function D(e,t){var n=e||{},r=n.preserveSelectedRowKeys,l=n.selectedRowKeys,u=n.defaultSelectedRowKeys,s=n.getCheckboxProps,f=n.onChange,p=n.onSelect,m=n.onSelectAll,h=n.onSelectInvert,v=n.onSelectNone,y=n.onSelectMultiple,b=n.columnWidth,g=n.type,D=n.selections,U=n.fixed,B=n.renderCell,z=n.hideSelectAll,F=n.checkStrictly,V=void 0===F||F,G=t.prefixCls,Y=t.data,$=t.pageData,q=t.getRecordByKey,W=t.getRowKey,H=t.expandType,K=t.childrenColumnName,Z=t.locale,Q=t.expandIconColumnIndex,X=t.getPopupContainer,J=c.useRef(new Map),ee=Object(N.a)(l||u||[],{value:l}),te=Object(a.a)(ee,2),ne=te[0],re=te[1],oe=Object(c.useMemo)((function(){return V?{keyEntities:null}:Object(O.a)(Y,{externalGetKey:W,childrenPropName:K})}),[Y,W,V,K]).keyEntities,ae=Object(c.useMemo)((function(){return R($,K)}),[$,K]),ie=Object(c.useMemo)((function(){var e=new Map;return ae.forEach((function(t,n){var r=W(t,n),o=(s?s(t):null)||{};e.set(r,o)})),e}),[ae,W,s]),ce=Object(c.useCallback)((function(e){var t;return!!(null===(t=ie.get(W(e)))||void 0===t?void 0:t.disabled)}),[ie,W]),le=Object(c.useMemo)((function(){if(V)return[ne||[],[]];var e=Object(k.a)(ne,!0,oe,ce);return[e.checkedKeys||[],e.halfCheckedKeys]}),[ne,V,oe,ce]),ue=Object(a.a)(le,2),se=ue[0],de=ue[1],fe=Object(c.useMemo)((function(){var e="radio"===g?se.slice(0,1):se;return new Set(e)}),[se,g]),pe=Object(c.useMemo)((function(){return"radio"===g?new Set:new Set(de)}),[de,g]),me=Object(c.useState)(null),he=Object(a.a)(me,2),ve=he[0],ye=he[1];c.useEffect((function(){e||re([])}),[!!e]);var be=Object(c.useCallback)((function(e){var t,n;if(r){var o=new Map;t=e,n=e.map((function(e){var t=q(e);return!t&&J.current.has(e)&&(t=J.current.get(e)),o.set(e,t),t})),J.current=o}else t=[],n=[],e.forEach((function(e){var r=q(e);void 0!==r&&(t.push(e),n.push(r))}));re(t),null==f||f(t,n)}),[re,q,f,r]),ge=Object(c.useCallback)((function(e,t,n,r){if(p){var o=n.map((function(e){return q(e)}));p(q(e),t,o,r)}be(n)}),[p,q,be]),_e=Object(c.useMemo)((function(){return!D||z?null:(!0===D?[T,I,M]:D).map((function(e){return e===T?{key:"all",text:Z.selectionAll,onSelect:function(){be(Y.map((function(e,t){return W(e,t)})))}}:e===I?{key:"invert",text:Z.selectInvert,onSelect:function(){var e=new Set(fe);$.forEach((function(t,n){var r=W(t,n);e.has(r)?e.delete(r):e.add(r)}));var t=Array.from(e);h&&(Object(j.a)(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),h(t)),be(t)}}:e===M?{key:"none",text:Z.selectNone,onSelect:function(){null==v||v(),be([])}}:e}))}),[D,fe,$,W,h,be]);return[Object(c.useCallback)((function(t){if(!e)return t;var n,r,a=new Set(fe),l=ae.map(W).filter((function(e){return!ie.get(e).disabled})),u=l.every((function(e){return a.has(e)})),s=l.some((function(e){return a.has(e)}));if("radio"!==g){var f;if(_e){var p=c.createElement(P.a,{getPopupContainer:X},_e.map((function(e,t){var n=e.key,r=e.text,o=e.onSelect;return c.createElement(P.a.Item,{key:n||t,onClick:function(){null==o||o(l)}},r)})));f=c.createElement("div",{className:"".concat(G,"-selection-extra")},c.createElement(A.a,{overlay:p,getPopupContainer:X},c.createElement("span",null,c.createElement(w.a,null))))}var h=ae.every((function(e,t){var n=W(e,t);return(ie.get(n)||{}).disabled}));n=!z&&c.createElement("div",{className:"".concat(G,"-selection")},c.createElement(x.a,{checked:!h&&!!ae.length&&u,indeterminate:!u&&s,onChange:function(){var e=[];u?l.forEach((function(t){a.delete(t),e.push(t)})):l.forEach((function(t){a.has(t)||(a.add(t),e.push(t))}));var t=Array.from(a);null==m||m(!u,t.map((function(e){return q(e)})),e.map((function(e){return q(e)}))),be(t)},disabled:0===ae.length||h,skipGroup:!0}),f)}r="radio"===g?function(e,t,n){var r=W(t,n),o=a.has(r);return{node:c.createElement(C.a,Object(i.a)({},ie.get(r),{checked:o,onClick:function(e){return e.stopPropagation()},onChange:function(e){a.has(r)||ge(r,!0,[r],e.nativeEvent)}})),checked:o}}:function(e,t,n){var r,o,u=W(t,n),s=a.has(u),d=pe.has(u),f=ie.get(u);return"nest"===H?(o=d,Object(j.a)("boolean"!=typeof(null==f?void 0:f.indeterminate),"Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):o=null!==(r=null==f?void 0:f.indeterminate)&&void 0!==r?r:d,{node:c.createElement(x.a,Object(i.a)({},f,{indeterminate:o,checked:s,skipGroup:!0,onClick:function(e){return e.stopPropagation()},onChange:function(e){var t=e.nativeEvent,n=t.shiftKey,r=-1,o=-1;if(n&&V){var i=new Set([ve,u]);l.some((function(e,t){if(i.has(e)){if(-1!==r)return o=t,!0;r=t}return!1}))}if(-1!==o&&r!==o&&V){var c=l.slice(r,o+1),d=[];s?c.forEach((function(e){a.has(e)&&(d.push(e),a.delete(e))})):c.forEach((function(e){a.has(e)||(d.push(e),a.add(e))}));var f=Array.from(a);null==y||y(!s,f.map((function(e){return q(e)})),d.map((function(e){return q(e)}))),be(f)}else{var p=se;if(V){var m=s?Object(S.b)(p,u):Object(S.a)(p,u);ge(u,!s,m,t)}else{var h=Object(k.a)([].concat(Object(E.a)(p),[u]),!0,oe,ce),v=h.checkedKeys,b=h.halfCheckedKeys,g=v;if(s){var _=new Set(v);_.delete(u),g=Object(k.a)(Array.from(_),{checked:!1,halfCheckedKeys:b},oe,ce).checkedKeys}ge(u,!s,g,t)}}ye(u)}})),checked:s}};var v=Object(o.a)({width:b,className:"".concat(G,"-selection-column"),title:e.columnTitle||n,render:function(e,t,n){var o=r(e,t,n),a=o.node,i=o.checked;return B?B(i,t,n,a):a}},d.a,{className:"".concat(G,"-selection-col")});if("row"===H&&t.length&&!Q){var O=Object(_.a)(t),N=O[0],T=O.slice(1),I=U||L(T[0]);return I&&(N.fixed=I),[N,Object(i.a)(Object(i.a)({},v),{fixed:I})].concat(Object(E.a)(T))}return[Object(i.a)(Object(i.a)({},v),{fixed:U||L(t[0])})].concat(Object(E.a)(t))}),[W,ae,e,se,fe,pe,b,_e,H,ve,ie,y,ge,ce]),fe]}var U=n(1479),B=n(1478),z=n(156);function F(e,t){return"key"in e&&void 0!==e.key&&null!==e.key?e.key:e.dataIndex?Array.isArray(e.dataIndex)?e.dataIndex.join("."):e.dataIndex:t}function V(e,t){return t?"".concat(t,"-").concat(e):"".concat(e)}function G(e,t){return"function"==typeof e?e(t):e}var Y="ascend",$="descend";function q(e){return"object"===Object(r.a)(e.sorter)&&"number"==typeof e.sorter.multiple&&e.sorter.multiple}function W(e){return"function"==typeof e?e:!(!e||"object"!==Object(r.a)(e)||!e.compare)&&e.compare}function H(e,t,n){var r=[];function o(e,t){r.push({column:e,key:F(e,t),multiplePriority:q(e),sortOrder:e.sortOrder})}return(e||[]).forEach((function(e,a){var i=V(a,n);e.children?("sortOrder"in e&&o(e,i),r=[].concat(Object(E.a)(r),Object(E.a)(H(e.children,t,i)))):e.sorter&&("sortOrder"in e?o(e,i):t&&e.defaultSortOrder&&r.push({column:e,key:F(e,i),multiplePriority:q(e),sortOrder:e.defaultSortOrder}))})),r}function K(e,t,n,a,l,s,d,f){return(t||[]).map((function(t,p){var m=V(p,f),h=t;if(h.sorter){var v=h.sortDirections||l,y=void 0===h.showSorterTooltip?d:h.showSorterTooltip,b=F(h,m),g=n.find((function(e){return e.key===b})),_=g?g.sortOrder:null,E=function(e,t){return t?e[e.indexOf(t)+1]:e[0]}(v,_),w=v.includes(Y)&&c.createElement(B.a,{className:u()("".concat(e,"-column-sorter-up"),{active:_===Y})}),O=v.includes($)&&c.createElement(U.a,{className:u()("".concat(e,"-column-sorter-down"),{active:_===$})}),k=s||{},S=k.cancelSort,N=k.triggerAsc,x=k.triggerDesc,A=S;E===$?A=x:E===Y&&(A=N);var P="object"===Object(r.a)(y)?y:{title:A};h=Object(i.a)(Object(i.a)({},h),{className:u()(h.className,Object(o.a)({},"".concat(e,"-column-sort"),_)),title:function(n){var r=c.createElement("div",{className:"".concat(e,"-column-sorters")},c.createElement("span",null,G(t.title,n)),c.createElement("span",{className:u()("".concat(e,"-column-sorter"),Object(o.a)({},"".concat(e,"-column-sorter-full"),!(!w||!O)))},c.createElement("span",{className:"".concat(e,"-column-sorter-inner")},w,O)));return y?c.createElement(z.a,P,r):r},onHeaderCell:function(n){var r=t.onHeaderCell&&t.onHeaderCell(n)||{},o=r.onClick;return r.onClick=function(e){a({column:t,key:b,sortOrder:E,multiplePriority:q(t)}),o&&o(e)},r.className=u()(r.className,"".concat(e,"-column-has-sorters")),r}})}return"children"in h&&(h=Object(i.a)(Object(i.a)({},h),{children:K(e,h.children,n,a,l,s,d,m)})),h}))}function Z(e){var t=e.column;return{column:t,order:e.sortOrder,field:t.dataIndex,columnKey:t.key}}function Q(e){var t=e.filter((function(e){return e.sortOrder})).map(Z);return 0===t.length&&e.length?Object(i.a)(Object(i.a)({},Z(e[e.length-1])),{column:void 0}):t.length<=1?t[0]||{}:t}function X(e,t,n){var r=t.slice().sort((function(e,t){return t.multiplePriority-e.multiplePriority})),a=e.slice(),c=r.filter((function(e){var t=e.column.sorter,n=e.sortOrder;return W(t)&&n}));return c.length?a.sort((function(e,t){for(var n=0;n<c.length;n+=1){var r=c[n],o=r.column.sorter,a=r.sortOrder,i=W(o);if(i&&a){var l=i(e,t,a);if(0!==l)return a===Y?l:-l}}return 0})).map((function(e){var r=e[n];return r?Object(i.a)(Object(i.a)({},e),Object(o.a)({},n,X(r,t,n))):e})):a}function J(e){var t=e.prefixCls,n=e.mergedColumns,r=e.onSorterChange,o=e.sortDirections,l=e.tableLocale,u=e.showSorterTooltip,s=c.useState(H(n,!0)),d=Object(a.a)(s,2),f=d[0],p=d[1],m=c.useMemo((function(){var e=!0,t=H(n,!1);if(!t.length)return f;var r=[];function o(t){e?r.push(t):r.push(Object(i.a)(Object(i.a)({},t),{sortOrder:null}))}var a=null;return t.forEach((function(t){null===a?(o(t),t.sortOrder&&(!1===t.multiplePriority?e=!1:a=!0)):(a&&!1!==t.multiplePriority||(e=!1),o(t))})),r}),[n,f]),h=c.useMemo((function(){var e=m.map((function(e){return{column:e.column,order:e.sortOrder}}));return{sortColumns:e,sortColumn:e[0]&&e[0].column,sortOrder:e[0]&&e[0].order}}),[m]);function v(e){var t;t=!1!==e.multiplePriority&&m.length&&!1!==m[0].multiplePriority?[].concat(Object(E.a)(m.filter((function(t){return t.key!==e.key}))),[e]):[e],p(t),r(Q(t),t)}return[function(e){return K(t,e,m,v,o,l,u)},m,h,function(){return Q(m)}]}var ee=n(964),te=n.n(ee),ne=n(1477),re=n(162),oe=n(503),ae=function(e){return c.createElement("div",{className:e.className,onClick:function(e){return e.stopPropagation()}},e.children)},ie=n(1526),ce=P.a.SubMenu,le=P.a.Item;function ue(e){var t=e.filters,n=e.prefixCls,r=e.filteredKeys,o=e.filterMultiple,a=e.locale;return 0===t.length?c.createElement(le,{key:"empty"},c.createElement("div",{style:{margin:"16px 0"}},c.createElement(oe.a,{image:oe.a.PRESENTED_IMAGE_SIMPLE,description:a.filterEmptyText,imageStyle:{height:24}}))):t.map((function(e,t){var i=String(e.value);if(e.children)return c.createElement(ce,{key:i||t,title:e.text,popupClassName:"".concat(n,"-dropdown-submenu")},ue({filters:e.children,prefixCls:n,filteredKeys:r,filterMultiple:o,locale:a}));var l=o?x.a:C.a;return c.createElement(le,{key:void 0!==e.value?i:t},c.createElement(l,{checked:r.includes(i)}),c.createElement("span",null,e.text))}))}var se=function(e){var t,n=e.prefixCls,r=e.column,i=e.dropdownPrefixCls,l=e.columnKey,s=e.filterMultiple,d=e.filterState,f=e.triggerFilter,p=e.locale,m=e.children,h=e.getPopupContainer,y=r.filterDropdownVisible,b=r.onFilterDropdownVisibleChange,g=c.useState(!1),_=Object(a.a)(g,2),E=_[0],w=_[1],O=!(!d||!(null===(t=d.filteredKeys)||void 0===t?void 0:t.length)&&!d.forceFiltered),k=function(e){w(e),null==b||b(e)},S="boolean"==typeof y?y:E,N=null==d?void 0:d.filteredKeys,x=Object(ie.a)(N||[]),C=Object(a.a)(x,2),j=C[0],T=C[1],I=function(e){var t=e.selectedKeys;T(t)};c.useEffect((function(){I({selectedKeys:N||[]})}),[N]);var M=c.useState([]),L=Object(a.a)(M,2),R=L[0],D=L[1],U=c.useRef();c.useEffect((function(){return function(){window.clearTimeout(U.current)}}),[]);var B,z=function(e){var t=e&&e.length?e:null;return null!==t||d&&d.filteredKeys?te()(t,null==d?void 0:d.filteredKeys)?null:void f({column:r,key:l,filteredKeys:t}):null},F=function(){k(!1),z(j())},V=function(){T([]),k(!1),z([])},G=u()(Object(o.a)({},"".concat(i,"-menu-without-submenu"),!(r.filters||[]).some((function(e){return e.children}))));if("function"==typeof r.filterDropdown)B=r.filterDropdown({prefixCls:"".concat(i,"-custom"),setSelectedKeys:function(e){return I({selectedKeys:e})},selectedKeys:j(),confirm:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closeDropdown:!0}).closeDropdown&&k(!1),z(j())},clearFilters:V,filters:r.filters,visible:S});else if(r.filterDropdown)B=r.filterDropdown;else{var Y=j()||[];B=c.createElement(c.Fragment,null,c.createElement(P.a,{multiple:s,prefixCls:"".concat(i,"-menu"),className:G,onClick:function(){window.clearTimeout(U.current)},onSelect:I,onDeselect:I,selectedKeys:Y,getPopupContainer:h,openKeys:R,onOpenChange:function(e){U.current=window.setTimeout((function(){D(e)}))}},ue({filters:r.filters||[],prefixCls:n,filteredKeys:j(),filterMultiple:s,locale:p})),c.createElement("div",{className:"".concat(n,"-dropdown-btns")},c.createElement(re.a,{type:"link",size:"small",disabled:0===Y.length,onClick:V},p.filterReset),c.createElement(re.a,{type:"primary",size:"small",onClick:F},p.filterConfirm)))}var $,q=c.createElement(ae,{className:"".concat(n,"-dropdown")},B);$="function"==typeof r.filterIcon?r.filterIcon(O):r.filterIcon?r.filterIcon:c.createElement(ne.a,null);var W=c.useContext(v.b).direction;return c.createElement("div",{className:u()("".concat(n,"-column"))},m,c.createElement(A.a,{overlay:q,trigger:["click"],visible:S,onVisibleChange:function(e){e&&void 0!==N&&T(N||[]),k(e),e||r.filterDropdown||F()},getPopupContainer:h,placement:"rtl"===W?"bottomLeft":"bottomRight"},c.createElement("span",{role:"button",tabIndex:-1,className:u()("".concat(n,"-trigger"),{active:O}),onClick:function(e){e.stopPropagation()}},$)))};function de(e,t,n){var r=[];return(e||[]).forEach((function(e,o){var a,i=V(o,n);if("children"in e)r=[].concat(Object(E.a)(r),Object(E.a)(de(e.children,t,i)));else if(e.filters||"filterDropdown"in e||"onFilter"in e)if("filteredValue"in e){var c=e.filteredValue;"filterDropdown"in e||(c=null!==(a=null==c?void 0:c.map(String))&&void 0!==a?a:c),r.push({column:e,key:F(e,i),filteredKeys:c,forceFiltered:e.filtered})}else r.push({column:e,key:F(e,i),filteredKeys:t&&e.defaultFilteredValue?e.defaultFilteredValue:void 0,forceFiltered:e.filtered})})),r}function fe(e,t,n,r,o,a,l,u){return n.map((function(n,s){var d=V(s,u),f=n.filterMultiple,p=void 0===f||f,m=n;if(m.filters||m.filterDropdown){var h=F(m,d),v=r.find((function(e){var t=e.key;return h===t}));m=Object(i.a)(Object(i.a)({},m),{title:function(r){return c.createElement(se,{prefixCls:"".concat(e,"-filter"),dropdownPrefixCls:t,column:m,columnKey:h,filterState:v,filterMultiple:p,triggerFilter:o,locale:l,getPopupContainer:a},G(n.title,r))}})}return"children"in m&&(m=Object(i.a)(Object(i.a)({},m),{children:fe(e,t,m.children,r,o,a,l,d)})),m}))}function pe(e){var t=[];return(e||[]).forEach((function(e){var n=e.value,r=e.children;t.push(n),r&&(t=[].concat(Object(E.a)(t),Object(E.a)(pe(r))))})),t}function me(e){var t={};return e.forEach((function(e){var n=e.key,r=e.filteredKeys,o=e.column,a=o.filters;if(o.filterDropdown)t[n]=r||null;else if(Array.isArray(r)){var i=pe(a);t[n]=i.filter((function(e){return r.includes(String(e))}))}else t[n]=null})),t}function he(e,t){return t.reduce((function(e,t){var n=t.column,r=n.onFilter,o=n.filters,a=t.filteredKeys;return r&&a&&a.length?e.filter((function(e){return a.some((function(t){var n=pe(o),a=n.findIndex((function(e){return String(e)===String(t)})),i=-1!==a?n[a]:t;return r(i,e)}))})):e}),e)}var ve=function(e){var t=e.prefixCls,n=e.dropdownPrefixCls,r=e.mergedColumns,o=e.onFilterChange,i=e.getPopupContainer,l=e.locale,u=c.useState(de(r,!0)),s=Object(a.a)(u,2),d=s[0],f=s[1],p=c.useMemo((function(){var e=de(r,!1);return e.every((function(e){return void 0===e.filteredKeys}))?d:e}),[r,d]),m=c.useCallback((function(){return me(p)}),[p]),h=function(e){var t=p.filter((function(t){return t.key!==e.key}));t.push(e),f(t),o(me(t),t)};return[function(e){return fe(t,n,e,p,h,i,l)},p,m]};function ye(e,t){return e.map((function(e){var n=Object(i.a)({},e);return n.title=G(e.title,t),"children"in n&&(n.children=ye(n.children,t)),n}))}function be(e){return[c.useCallback((function(t){return ye(t,e)}),[e])]}var ge=function(e){return function(t){var n,r=t.prefixCls,a=t.onExpand,i=t.record,l=t.expanded,s=t.expandable,d="".concat(r,"-row-expand-icon");return c.createElement("button",{type:"button",onClick:function(e){a(i,e),e.stopPropagation()},className:u()(d,(n={},Object(o.a)(n,"".concat(d,"-spaced"),!s),Object(o.a)(n,"".concat(d,"-expanded"),s&&l),Object(o.a)(n,"".concat(d,"-collapsed"),s&&!l),n)),"aria-label":l?e.collapse:e.expand})}},_e=n(981),Ee=n(1022),we=n(159);var Oe=function(e){return null};var ke=function(e){return null},Se=n(476),Ne=[];function xe(e){var t,n=e.prefixCls,l=e.className,y=e.style,_=e.size,E=e.bordered,w=e.dropdownPrefixCls,O=e.dataSource,k=e.pagination,S=e.rowSelection,N=e.rowKey,x=e.rowClassName,A=e.columns,P=e.children,C=e.childrenColumnName,T=e.onChange,I=e.getPopupContainer,M=e.loading,L=e.expandIcon,R=e.expandable,U=e.expandedRowRender,B=e.expandIconColumnIndex,z=e.indentSize,F=e.scroll,V=e.sortDirections,G=e.locale,Y=e.showSorterTooltip,$=void 0===Y||Y;Object(j.a)(!("function"==typeof N&&N.length>1),"Table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.");var q=Object(Se.a)(),W=c.useMemo((function(){var e=new Set(Object.keys(q).filter((function(e){return q[e]})));return(A||Object(p.a)(P)).filter((function(t){return!t.responsive||t.responsive.some((function(t){return e.has(t)}))}))}),[P,A,q]),H=Object(s.a)(e,["className","style","columns"]),K=c.useContext(we.b),Z=c.useContext(v.b),Q=Z.locale,ee=void 0===Q?Ee.a:Q,te=Z.renderEmpty,ne=Z.direction,re=_||K,oe=Object(i.a)(Object(i.a)({},ee.Table),G),ae=O||Ne,ie=c.useContext(v.b).getPrefixCls,ce=ie("table",n),le=ie("dropdown",w),ue=Object(i.a)({childrenColumnName:C,expandIconColumnIndex:B},R),se=ue.childrenColumnName,de=void 0===se?"children":se,fe=c.useMemo((function(){return ae.some((function(e){var t;return null===(t=e)||void 0===t?void 0:t[de]}))?"nest":U||R&&R.expandedRowRender?"row":null}),[ae]),pe={body:c.useRef()},me=c.useMemo((function(){return"function"==typeof N?N:function(e){var t;return null===(t=e)||void 0===t?void 0:t[N]}}),[N]),ye=function(e,t,n){var o=c.useRef({});return[function(a){if(!o.current||o.current.data!==e||o.current.childrenColumnName!==t||o.current.getRowKey!==n){var i=new Map;function c(e){e.forEach((function(e,o){var a=n(e,o);i.set(a,e),e&&"object"===Object(r.a)(e)&&t in e&&c(e[t]||[])}))}c(e),o.current={data:e,childrenColumnName:t,kvMap:i,getRowKey:n}}return o.current.kvMap.get(a)}]}(ae,de,me),Oe=Object(a.a)(ye,1)[0],ke={},xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(i.a)(Object(i.a)({},ke),e);n&&(ke.resetPagination(),r.pagination.current&&(r.pagination.current=1),k&&k.onChange&&k.onChange(1,r.pagination.pageSize)),F&&!1!==F.scrollToFirstRowOnChange&&pe.body.current&&Object(_e.a)(0,{getContainer:function(){return pe.body.current}}),null==T||T(r.pagination,r.filters,r.sorter,{currentDataSource:he(X(ae,r.sorterStates,de),r.filterStates),action:t})},Ae=J({prefixCls:ce,mergedColumns:W,onSorterChange:function(e,t){xe({sorter:e,sorterStates:t},"sort",!1)},sortDirections:V||["ascend","descend"],tableLocale:oe,showSorterTooltip:$}),Pe=Object(a.a)(Ae,4),Ce=Pe[0],je=Pe[1],Te=Pe[2],Ie=Pe[3],Me=c.useMemo((function(){return X(ae,je,de)}),[ae,je]);ke.sorter=Ie(),ke.sorterStates=je;var Le=ve({prefixCls:ce,locale:oe,dropdownPrefixCls:le,mergedColumns:W,onFilterChange:function(e,t){xe({filters:e,filterStates:t},"filter",!0)},getPopupContainer:I}),Re=Object(a.a)(Le,3),De=Re[0],Ue=Re[1],Be=Re[2],ze=he(Me,Ue);ke.filters=Be(),ke.filterStates=Ue;var Fe=be(c.useMemo((function(){return Object(i.a)({},Te)}),[Te])),Ve=Object(a.a)(Fe,1)[0],Ge=g(ze.length,k,(function(e,t){xe({pagination:Object(i.a)(Object(i.a)({},ke.pagination),{current:e,pageSize:t})},"paginate")})),Ye=Object(a.a)(Ge,2),$e=Ye[0],qe=Ye[1];ke.pagination=!1===k?{}:function(e,t){var n={current:t.current,pageSize:t.pageSize},o=e&&"object"===Object(r.a)(e)?e:{};return Object.keys(o).forEach((function(e){var r=t[e];"function"!=typeof r&&(n[e]=r)})),n}(k,$e),ke.resetPagination=qe;var We=c.useMemo((function(){if(!1===k||!$e.pageSize)return ze;var e=$e.current,t=void 0===e?1:e,n=$e.total,r=$e.pageSize,o=void 0===r?b:r;return Object(j.a)(t>0,"Table","`current` should be positive number."),ze.length<n?ze.length>o?(Object(j.a)(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),ze.slice((t-1)*o,t*o)):ze:ze.slice((t-1)*o,t*o)}),[!!k,ze,$e&&$e.current,$e&&$e.pageSize,$e&&$e.total]),He=D(S,{prefixCls:ce,data:ze,pageData:We,getRowKey:me,getRecordByKey:Oe,expandType:fe,childrenColumnName:de,locale:oe,expandIconColumnIndex:ue.expandIconColumnIndex,getPopupContainer:I}),Ke=Object(a.a)(He,2),Ze=Ke[0],Qe=Ke[1];ue.__PARENT_RENDER_ICON__=ue.expandIcon,ue.expandIcon=ue.expandIcon||L||ge(oe),"nest"===fe&&void 0===ue.expandIconColumnIndex?ue.expandIconColumnIndex=S?1:0:ue.expandIconColumnIndex>0&&S&&(ue.expandIconColumnIndex-=1),"number"!=typeof ue.indentSize&&(ue.indentSize="number"==typeof z?z:15);var Xe,Je,et,tt=c.useCallback((function(e){return Ve(Ze(De(Ce(e))))}),[Ce,De,Ze]);if(!1!==k&&(null==$e?void 0:$e.total)){var nt;nt=$e.size?$e.size:"small"===re||"middle"===re?"small":void 0;var rt=function(e){return c.createElement(h.a,Object(i.a)({className:"".concat(ce,"-pagination ").concat(ce,"-pagination-").concat(e)},$e,{size:nt}))},ot="rtl"===ne?"left":"right",at=$e.position;if(null!==at&&Array.isArray(at)){var it=at.find((function(e){return-1!==e.indexOf("top")})),ct=at.find((function(e){return-1!==e.indexOf("bottom")})),lt=at.every((function(e){return"none"==="".concat(e)}));it||ct||lt||(Je=rt(ot)),it&&(Xe=rt(it.toLowerCase().replace("top",""))),ct&&(Je=rt(ct.toLowerCase().replace("bottom","")))}else Je=rt(ot)}"boolean"==typeof M?et={spinning:M}:"object"===Object(r.a)(M)&&(et=Object(i.a)({spinning:!0},M));var ut=u()("".concat(ce,"-wrapper"),Object(o.a)({},"".concat(ce,"-wrapper-rtl"),"rtl"===ne),l);return c.createElement("div",{className:ut,style:y},c.createElement(m.a,Object(i.a)({spinning:!1},et),Xe,c.createElement(d.c,Object(i.a)({},H,{columns:W,direction:ne,expandable:ue,prefixCls:ce,className:u()((t={},Object(o.a)(t,"".concat(ce,"-middle"),"middle"===re),Object(o.a)(t,"".concat(ce,"-small"),"small"===re),Object(o.a)(t,"".concat(ce,"-bordered"),E),Object(o.a)(t,"".concat(ce,"-empty"),0===ae.length),t)),data:We,rowKey:me,rowClassName:function(e,t,n){var r;return r="function"==typeof x?u()(x(e,t,n)):u()(x),u()(Object(o.a)({},"".concat(ce,"-row-selected"),Qe.has(me(e,t))),r)},emptyText:G&&G.emptyText||te("Table"),internalHooks:f.a,internalRefs:pe,transformColumns:tt})),Je))}xe.defaultProps={rowKey:"key"},xe.SELECTION_ALL=T,xe.SELECTION_INVERT=I,xe.SELECTION_NONE=M,xe.Column=Oe,xe.ColumnGroup=ke,xe.Summary=d.b;var Ae=xe;t.a=Ae}}]);