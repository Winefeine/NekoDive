(window.webpackJsonp=window.webpackJsonp||[]).push([[1432],{4286:function(e,t,n){"use strict";n.r(t);n(177);var r=n(58),a=(n(67),n(31)),l=(n(227),n(101)),o=(n(48),n(11)),i=n(0),c=n.n(i),u=n(6),s=n.n(u),d=n(505),m=n.n(d),f=n(5),_=n.n(f),p=n(76),S=n(149),A=n(54),T=n(63),b={wrap:"index-module_wrap_4GDfH",close:"index-module_close_27uFj",icon:"index-module_icon_RfM4L",closeIcon:"index-module_closeIcon_6sSTs"};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.icon,n=e.content,r=e.style,a=e.showClose,l=y(Object(i.useState)(!0),2),o=l[0],u=l[1];return o?c.a.createElement("div",{className:b.wrap,style:r},t&&c.a.createElement("div",{className:b.icon},t),c.a.createElement("div",{className:b.content},n),a&&c.a.createElement("div",{className:b.close,onClick:function(){u(!1)}},c.a.createElement("span",{className:_()("lake-icon","lake-icon-close",b.closeIcon)}))):null};E.propTypes={icon:s.a.node,content:s.a.node.isRequired,style:s.a.object,showClose:s.a.bool};var v=E,R=n(308),h="ReaderAudit-module_closeBtn_hHU+3",D="ReaderAudit-module_detail_mWCgN",U="ReaderAudit-module_toggleDetail_pq7CA",w="ReaderAudit-module_moreLink_oxcCo",O="ReaderAudit-module_tagModeWrapper_xupeI",k="ReaderAudit-module_tagText_Womh9",j="ReaderAudit-module_pending_m3C28",N="ReaderAudit-module_illegal_B8aJ7",x="ReaderAudit-module_banned_sHuxy",C="ReaderAudit-module_isIntranet_WPBjb",I="ReaderAudit-module_tagClose_YIxR7";function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,i=[],c=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e){var t=Y(Object(i.useState)(!1),2),n=t[0],u=t[1],s=Y(Object(i.useState)(!0),2),d=s[0],f=s[1],b=e.doc,y=e.type,g=e.tagMode,E=b.audits,R=b.read_status,P=b.id,q=b.abilities,F=void 0===q?{}:q,W=window.appData,H=W.book,J=W.group,K=W.me,L=e.isYuque||window.appData.isYuque;var $="audit_ignored_".concat(y,"_").concat(P);function z(e){null==e||e.preventDefault(),localStorage.setItem($,Date.now()),f(!1)}function G(e){var t=e.filter((function(e){return null!==e}));return m()(t)}if(Object(i.useEffect)((function(){R===p.READ_STATUS.insecure&&(K.isAdmin||K.isSecurityOperator||F.update||f(!1))}),[]),R<=p.READ_STATUS.ok&&(null==H?void 0:H.status)!==S.STATUS.banned&&(null==J?void 0:J.status)!==A.STATUS.blocked)return null;if(R<=p.READ_STATUS.ok&&((null==H?void 0:H.status)===S.STATUS.banned||(null==J?void 0:J.status)===A.STATUS.blocked)){if(null!=K&&K.isAdmin){var Q="ATTENTION: 该文档所在的知识库或者作者被屏蔽, groupBlocked: ".concat((null==J?void 0:J.status)===A.STATUS.blocked,", bookBlocked: ").concat((null==H?void 0:H.status)===S.STATUS.banned);console.error(Q),o.a.error(Q)}return null}if(null!=J&&J.isPermanentPunished){if(null!=K&&K.isAdmin&&R>p.READ_STATUS.ok){console.error("ATTENTION: 该用户已经被永久屏蔽，此文档也是屏蔽状态"),o.a.error("ATTENTION: 该用户已经被永久屏蔽，此文档也是屏蔽状态")}return null}if("Comment"===y&&R<=p.READ_STATUS.ok)return null;if(!d)return null;var V=[];E&&(E.forbidden||E.reason)&&(V=E.forbidden||[E.reason]);var X,Z={};if(Z[p.READ_STATUS.pending]=__("当前内容正在审核中，其他人暂时无法查看，请稍候。"),Z[p.READ_STATUS.suspect]=__("因内容疑似有违规内容，其他人无法查看，正在审核中，请稍后。"),Z[p.READ_STATUS.illegal]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),Z[p.READ_STATUS.illegal_polity]=__("当前内容有违规内容，其他人无法查看，请修正后再发布。"),Z[p.READ_STATUS.illegal_ak]=__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),Z[p.READ_STATUS.illegal_privacy]=__("当前文档中包含疑似明文敏感信息（包括不限于身份证号、住址、手机号、账户密码等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),Z[p.READ_STATUS.banned]=__("内容因含敏感信息已被系统屏蔽处理，其他人无法查看。"),L)X=Z[R]||Z[p.READ_STATUS.suspect];else{var ee=!g&&V.length>0?c.a.createElement("a",{onClick:function(e){e.preventDefault(),u(!n)},className:U},n?"收起详情":"展开详情"):null,te=c.a.createElement("a",{href:"https://yuque.antfin.com/lark/bqllwz/cg2xev",target:"_blank",className:w},__("了解更多"));X=R===p.READ_STATUS.insecure?c.a.createElement(c.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），可能会造成数据泄露，请脱敏或删除明文敏感信息后重新发布。"),te,ee):c.a.createElement(c.a.Fragment,null,__("当前文档中包含疑似明文敏感信息（包括不限于OSS秘钥、AK信息、数据库账密等），已被系统自动设置为私密，请脱敏或删除明文敏感信息后重新发布。"),te,ee," ")}var ne=L?{}:{padding:24,paddingRight:32,marginTop:8,position:"relative"},re=F.update;if(g){if(L){var ae,le,oe=M(M(M({},p.READ_STATUS.pending,__("审核中")),p.READ_STATUS.illegal,__("该内容涉嫌违规#tag")),p.READ_STATUS.banned,__("该内容已屏蔽#tag"));switch(R){case p.READ_STATUS.pending:case p.READ_STATUS.suspect:le=p.READ_STATUS.pending;break;case p.READ_STATUS.illegal:case p.READ_STATUS.illegal_polity:case p.READ_STATUS.illegal_ak:case p.READ_STATUS.illegal_privacy:le=p.READ_STATUS.illegal;break;case p.READ_STATUS.banned:le=p.READ_STATUS.banned;break;default:le=null}return(ae=oe[le])?c.a.createElement(l.a,{title:c.a.createElement("span",{className:k},X),placement:"bottom"},c.a.createElement("div",{className:_()(O,M(M(M({},j,le===p.READ_STATUS.pending),N,le===p.READ_STATUS.illegal),x,le===p.READ_STATUS.banned))},c.a.createElement("span",{className:k},ae))):null}return c.a.createElement("div",{className:_()(O,C),onClick:function(){a.a.confirm({title:__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag"),content:c.a.createElement(c.a.Fragment,null,X,V.length>0&&c.a.createElement("ul",{className:D},G(V).map((function(e){return c.a.createElement("li",{key:e},e)})))),okText:__("知道了"),cancelText:__("忽略"),onCancel:function(){z()}})}},c.a.createElement("span",{className:k},__("疑似含敏感信息，请脱敏或删除敏感信息后重新发布#tag")),re&&c.a.createElement("div",{className:I,onClick:function(e){e.stopPropagation(),z()}},c.a.createElement(T.b,{name:"close",width:10,height:10})))}return c.a.createElement(v,{style:B({marginBottom:"Doc"===y?24:0,marginTop:4},ne),icon:c.a.createElement(T.b,{name:"doc-has-content-risk",height:17,width:15}),content:c.a.createElement(c.a.Fragment,null,!L&&re&&c.a.createElement(r.a,{title:__("确认忽略该提醒？"),onConfirm:z,okText:__("忽略"),cancelText:__("取消"),placement:"bottom"},c.a.createElement("span",{className:h},c.a.createElement(T.b,{name:"close",width:14}))),c.a.createElement("span",{"data-testid":"audit-tip"},X),n&&c.a.createElement("ul",{className:D},G(V).map((function(e){return c.a.createElement("li",{key:e},e)}))))})}W.defaultProps={isYuque:window.appData.isYuque},W.propTypes={doc:s.a.object.isRequired,type:s.a.string,isYuque:s.a.bool,tagMode:s.a.bool};t.default=Object(R.b)(W)}}]);