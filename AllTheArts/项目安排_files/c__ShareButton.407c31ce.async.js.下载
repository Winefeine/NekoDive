/*! For license information please see c__ShareButton.407c31ce.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1446,369,372,501,798,1005,1038,1043],{1233:function(e,t,r){"use strict";var n=r(1642),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,a,i,c,l,u,s=!1;t||(t={}),r=t.debug||!1;try{if(i=n(),c=document.createRange(),l=document.getSelection(),(u=document.createElement("span")).textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[t.format]||o.default;window.clipboardData.setData(a,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(u),c.selectNodeContents(u),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),u&&document.body.removeChild(u),i()}return s}},1367:function(e,t,r){"use strict";r(3250);var n=r(1272);r(1528);t.a=n.a},1431:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-avatar-upload",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),n.createElement("path",{d:"M177.268 80.262c4.525 3.166 10.76 2.064 13.926-2.461 3.11-4.445 2.102-10.538-2.222-13.754l-.24-.173-43.535-30.457a30 30 0 0 0-34.01-.264l-.384.264-43.535 30.457c-4.526 3.166-5.628 9.401-2.462 13.927 3.11 4.444 9.18 5.587 13.682 2.627l.244-.166 43.536-30.457a10 10 0 0 1 11.197-.18l.267.18 43.536 30.457Z",fillRule:"nonzero"}),n.createElement("rect",{x:118,y:39,width:20,height:150,rx:10})))},1433:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-download",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),n.createElement("path",{d:"M177.268 137.806c4.525-3.166 10.76-2.064 13.926 2.462 3.11 4.444 2.102 10.538-2.222 13.753l-.24.173-43.535 30.457a30 30 0 0 1-34.01.264l-.384-.264-43.535-30.457c-4.526-3.166-5.628-9.401-2.462-13.926 3.11-4.445 9.18-5.587 13.682-2.627l.244.165 43.536 30.457a10 10 0 0 0 11.197.18l.267-.18 43.536-30.457Z",fillRule:"nonzero"}),n.createElement("rect",{x:118,y:28,width:20,height:150,rx:10})))},1444:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(5),i=r.n(a),c=r(960),l=r(587),u=r(563),s=r(242),f=r(139);t.a=function(e){var t=window.appData.isPublicCloud,r=e.group,n=e.size,a=e.showOrgLabel,h=void 0!==a&&a,d=e.iconSize,p=e.radius,m=e.className,y=null==r?void 0:r.organization,v=(null==r?void 0:r.iconMap)||f.d;s.c.isPublicPage(r)&&(v[0]=f.f[0]);var g=u.b.getName("User",r)||v[0];return o.a.createElement("div",{className:i()("group-avatar",m),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},t&&h&&y&&o.a.createElement("span",{className:"lock"},o.a.createElement(l.c,{src:y.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(c.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":g}),name:r.name,icon:g,iconSize:d||Math.floor(.9*n),radius:p}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},1459:function(e,t,r){"use strict";var n=r(1444);r.d(t,"a",(function(){return n.a}))},1634:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-check",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M210.827 55.428c3.906-3.905 10.237-3.905 14.143 0 3.834 3.834 3.904 10.007.209 13.927l-.21.215-124 124c-3.834 3.834-10.007 3.904-13.926.21l-.216-.21-55.708-55.708c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.835 10.008-3.904 13.927-.21l.215.21 48.637 48.636 116.93-116.928Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{d:"M0 0h256v256H0z"})))},1642:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},1653:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-change",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m66.77 130.998 25.42 6.812c5.334 1.429 8.5 6.912 7.07 12.247-1.429 5.335-6.912 8.5-12.247 7.071l-21.17-5.672C75.695 180.568 103.246 201 135 201c25.226 0 48.234-12.886 61.569-33.76 2.973-4.654 9.157-6.017 13.81-3.043 4.655 2.973 6.017 9.156 3.044 13.81C196.451 204.574 167.123 221 135 221c-39.108 0-73.2-24.314-86.77-59.453l-6.13 22.887c-1.43 5.335-6.914 8.5-12.248 7.071-5.335-1.43-8.5-6.913-7.071-12.247l7.247-27.046c4.288-16.004 20.738-25.502 36.742-21.214ZM122 35c38.662 0 72.359 23.75 86.25 58.135l5.501-20.538c1.43-5.335 6.913-8.5 12.248-7.071 5.334 1.43 8.5 6.913 7.07 12.247l-6.729 25.114c-4.288 16.004-20.738 25.502-36.742 21.213l-23.555-6.311c-5.335-1.43-8.5-6.913-7.071-12.248 1.429-5.334 6.912-8.5 12.247-7.07l19.66 5.266C180.809 75.094 153.499 55 122 55c-26.405 0-50.336 14.129-63.29 36.594-2.759 4.784-8.874 6.426-13.658 3.668-4.785-2.76-6.427-8.874-3.668-13.659C57.874 53.006 88.373 35 122 35Z",fill:"currentColor",fillRule:"nonzero"}))},1816:function(e,t,r){var n=r(210),o=r(243),a=r(570),i=r(387);e.exports=function(e,t){if(null==e)return{};var r=n(i(e),(function(e){return[e]}));return t=o(t),a(e,r,(function(e,r){return t(e,r[0])}))}},1856:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-public",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h16v16H0z"}),n.createElement("path",{d:"M8 1.487a6.513 6.513 0 1 1 0 13.026A6.513 6.513 0 0 1 8 1.487Zm5.005 8.765-.029.003c-.223.042-.491.213-.875.54l-.53.465-.196.166-.082.066-.144.107c-.044.03-.086.056-.126.078l-.12.06-.13.049a1.162 1.162 0 0 1-.447.08c-.578-.011-.863-.24-1.08-.693l-.073-.163c-.075-.18-.091-.199-.169-.22-.359-.094-1.08.61-1.212 1.37-.054.315-.008.488.204.797l.155.216c.083.112.151.21.21.302a5.489 5.489 0 0 0 4.644-3.223ZM8.46 2.532l.022.046c.108.26.139.533.055.775-.062.181-.15.31-.293.462l-.266.261c-.068.07-.08.097-.08.122.002.058.09.132.35.234l.2.072.255.08.317.09c1.615.442 1.65 2.616-.231 3.395-1.288.534-2.074.239-2.707-.647L5.92 7.18l-.145-.221c-.222-.315-.835-.451-1.057-.3l-.005.009-.045.114-.051.152-.068.216-.1.348-.099.308c-.226.66-.454.9-1.005.865-.335-.022-.581-.148-.823-.39a5.486 5.486 0 0 0 4.543 5.126c-.289-.46-.382-.85-.283-1.422.221-1.283 1.432-2.465 2.484-2.187.408.108.617.316.79.672l.127.293c.032.069.05.075.117.076l.064-.001.062-.02.071-.03.079-.048.096-.07.124-.1.256-.22.231-.204c.819-.725 1.394-1.052 2.065-.914a5.488 5.488 0 0 0-4.889-6.701Zm-1.323.047c-2.224.355-4 2.04-4.49 4.211a.497.497 0 0 1 .025.028l.099.125.222.303c.132.181.229.291.304.349l.022.015.017-.033.051-.127.057-.172.132-.452.092-.296c.131-.391.242-.56.475-.719.7-.475 1.937-.2 2.471.558l.235.358c.402.61.705.744 1.547.395 1.007-.417.993-1.283.354-1.457l-.204-.057-.367-.113c-.913-.302-1.29-.622-1.306-1.27-.01-.377.11-.6.394-.889l.204-.199.07-.075a.157.157 0 0 0 .026-.042c.018-.053-.26-.413-.43-.441Z",fill:"currentColor",fillRule:"nonzero"})))},1857:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-lock",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"2932495269a",d:"M0 0h20v20H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"2932495269b",fill:"#fff"},n.createElement("use",{xlinkHref:"#2932495269a"})),n.createElement("g",{mask:"url(#2932495269b)",fill:"#FFF",fillRule:"nonzero"},n.createElement("path",{d:"M10 1.172a4.219 4.219 0 0 1 4.219 4.219l-.001 1.874h1.407c1.036 0 1.875.84 1.875 1.876v7.812c0 1.036-.84 1.875-1.875 1.875H4.375A1.875 1.875 0 0 1 2.5 16.953V9.141c0-1.036.84-1.875 1.875-1.875l1.406-.001V5.39A4.219 4.219 0 0 1 10 1.17Zm5.64 7.657H4.376a.313.313 0 0 0-.312.296v7.828c0 .167.131.304.296.312h11.266a.313.313 0 0 0 .312-.296V9.14a.313.313 0 0 0-.296-.312ZM10 10.78a1.406 1.406 0 0 1 .782 2.575v1.175a.781.781 0 1 1-1.563 0l-.001-1.175A1.405 1.405 0 0 1 10 10.781Zm.044-8.046H10a2.656 2.656 0 0 0-2.656 2.612v1.919h5.312V5.39a2.656 2.656 0 0 0-2.612-2.656Z"}))))},1858:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-qrcode2",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h256v256H0z"}),n.createElement("path",{d:"M122.353 133.647v73.412c0 9.353-7.588 16.941-16.941 16.941h-56.47C39.587 224 32 216.412 32 207.059v-56.47c0-9.354 7.588-16.942 16.941-16.942h73.412Zm45.176-.224L167.52 160l22.56-.001v-26.576H224v33.92l-29.185-.016v20.672L224 188v33.92h-33.92v-29.921h-22.513v29.921h-33.92V188l29.168-.001.001-20.703-29.169.01v-33.883h33.882Zm-62.794 17.842H49.618v55.117h55.117v-55.117ZM105.412 32c9.353 0 16.94 7.588 16.94 16.941v73.412h-73.41c-9.354 0-16.942-7.588-16.942-16.941v-56.47C32 39.587 39.588 32 48.941 32h56.47Zm101.647 0C216.412 32 224 39.588 224 48.941v56.47c0 9.354-7.588 16.942-16.941 16.942h-73.412V48.94c0-9.353 7.588-16.941 16.941-16.941h56.47ZM104.735 49.618H49.618v55.117h55.117V49.618Zm101.647 0h-55.117v55.117h55.117V49.618Z",fill:"currentColor",fillRule:"nonzero"})))},309:function(e,t,r){"use strict";r(3152);var n=r(1254);r(701);t.a=n.a},3677:function(e,t,r){var n=r(189),o=r(103);e.exports=function(e){return o(e)&&n(e)}},3982:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"bookPrivilegeEditable",(function(){return p})),r.d(t,"getPermissionName",(function(){return m})),r.d(t,"getOwnerTypeName",(function(){return y})),r.d(t,"permissionCompare",(function(){return d})),r.d(t,"MemberGroup",(function(){return g})),r.d(t,"getOwnerModel",(function(){return v}));var n=r(492),o=r(82),a=r(97),i=r(149);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function f(e){return n.ALL_PERMISSIONS.includes(e)}function h(e){return e===n.ROLE.noPermission?0-e:e}var d={gte:function(e,t){return!(!f(e)||!f(t))&&h(e)>=h(t)},gt:function(e,t){return!(!f(e)||!f(t))&&h(e)>h(t)},lt:function(e,t){return!(!f(e)||!f(t))&&h(e)<h(t)},lte:function(e,t){return!(!f(e)||!f(t))&&h(e)<=h(t)},eq:function(e,t){return!(!f(e)||!f(t))&&h(e)===h(t)},max:function(e,t){var r=[f(e),f(t)];if(r.every((function(e){return!!e})))return h(e)>h(t)?e:t;var n=r.indexOf(!0);return n<0?null:n>0?t:e}};function p(e,t,r){if(!e||!t)return null;var o=n.ALL_PERMISSIONS;if(null!=r&&(o=o.filter((function(e){return d.lte(e,r)}))),e.owner_type===n.OWNER_TYPE.User)return o=o.filter((function(e){return e!==n.ROLE.noPermission})),e.owner_id===t.user_id?{edit:!1,delete:!1}:{edit:!0,delete:!0,permissions:o};var a=i.PUBLIC_PRIVACY.includes(t.public),c=t.public===i.PUBLIC.public;return e.owner_type===n.OWNER_TYPE.GroupManager||e.owner_type===n.OWNER_TYPE.OrganizationOwner?{edit:!1,delete:!1}:e.owner_type===n.OWNER_TYPE.GroupMember?{edit:!0,delete:!1,permissions:o.filter((function(e){return a?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:a&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationMember?{edit:a,delete:!1,permissions:o.filter((function(e){return a?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:a&&e.role===n.ROLE.noPermission?n.ROLE.readonly:a?e.role:n.ROLE.noPermission}:e.owner_type===n.OWNER_TYPE.GroupReadonlyMember?{edit:!a,delete:!1,permissions:a?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission],availableTargetPermission:a&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationOutsourcer?{edit:!c&&a,delete:!1,permissions:c?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission].filter((function(e){return a?void 0!==e:e!==n.ROLE.readonly})),availableTargetPermission:c?n.ROLE.readonly:n.ROLE.noPermission}:{edit:!0,delete:!0,permissions:o}}function m(t,r){var o=function(e){return e};return void 0!==e.window&&"function"==typeof e.window.__&&(o=e.window.__),r&&(o=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.__).call.apply(e,[r].concat(n))}),u(u(u(u({},n.ROLE.readonly,o("可阅读")),n.ROLE.edit,o("可编辑")),n.ROLE.manage,o("可管理")),n.ROLE.noPermission,o("无权限"))[t]}function y(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.inOrganization,a=r.ctx,i=r.isYuque,c=void 0===i||i,l=function(e,t){return e};void 0!==e.window&&"function"==typeof e.window.__&&(l=e.window.__),a&&(l=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.__).call.apply(e,[a].concat(r))});var s=l(!c||o?"团队":"知识小组");return u(u(u(u(u(u(u(u({},n.OWNER_TYPE.User,l("用户")),n.OWNER_TYPE.GroupManager,l("{groupTypeName}管理员",{groupTypeName:s})),n.OWNER_TYPE.GroupMember,l("{groupTypeName}成员",{groupTypeName:s})),n.OWNER_TYPE.GroupReadonlyMember,l("{groupTypeName}只读成员",{groupTypeName:s})),n.OWNER_TYPE.OrganizationOwner,l("空间管理员")),n.OWNER_TYPE.OrganizationMember,l("空间成员")),n.OWNER_TYPE.OrganizationOutsourcer,l("空间外部联系人")),n.OWNER_TYPE.AntDingTalkGroup,l("钉钉群"))[t]}function v(e){switch(e){case n.OWNER_TYPE.User:case n.OWNER_TYPE.GroupManager:case n.OWNER_TYPE.GroupMember:case n.OWNER_TYPE.GroupReadonlyMember:return"User";case n.OWNER_TYPE.OrganizationOwner:case n.OWNER_TYPE.OrganizationMember:case n.OWNER_TYPE.OrganizationOutsourcer:return"Organization";default:throw new Error("invalid owner_type")}}var g=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"collaboration",void 0),!t)throw new Error("target collaboration not exist");this.collaboration=t},(t=[{key:"model",get:function(){return Object.values(n.GROUP_ROLE_OWNER_TYPE_MAP).includes(this.collaboration.owner_type)?"GroupUser":"OrganizationUser"}},{key:"query",get:function(){return"GroupUser"===this.model?{group_id:this.collaboration.owner_id,status:o.STATUS.joined,role:n.LEGACY_ROLE_MAP[this.collaboration.owner_type]}:{organization_id:this.collaboration.owner_id,status:a.STATUS.joined,role:n.LEGACY_ROLE_MAP[this.collaboration.owner_type]}}},{key:"owner_type",get:function(){return this.collaboration.owner_type}},{key:"owner_id",get:function(){return this.collaboration.owner_id}},{key:"permission",get:function(){return this.collaboration.role}},{key:"target_type",get:function(){return this.collaboration.target_type}},{key:"target_id",get:function(){return this.collaboration.target_id}},{key:"legacyRole",get:function(){return n.LEGACY_ROLE_MAP[this.collaboration.owner_type]}}])&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}.call(this,r(92))},4123:function(e,t,r){"use strict";t.a={revertLink:"index-module_revertLink_csROb"}},4305:function(e,t,r){"use strict";r.d(t,"c",(function(){return h})),r.d(t,"e",(function(){return _})),r.d(t,"d",(function(){return k})),r.d(t,"b",(function(){return j})),r.d(t,"a",(function(){return x}));r(48);var n=r(11),o=r(0),a=r(64),i=r.n(a);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e,t){return t.book&&Object.values(i.a.TYPE).includes(e.type)},s=function(e,t){if(!e.joinToken)return"";var r=e.joinToken;if("Doc"===r.target_type){var n=e.slug,o=t.group,a=t.book,i=t.isEditing,c="".concat(window.location.origin,"/g/").concat(o.login,"/").concat(a.slug,"/").concat(n,"/collaborator/join?token=").concat(r.token);if(i){var l="/".concat(o.login,"/").concat(a.slug,"/").concat(n,"/edit");c="".concat(c,"&goto=").concat(encodeURIComponent(l))}return c+="# ".concat(__("邀你参与文档协作"),"《").concat(e.title,"》")}return""},f=function(e){return!e.joinToken||!!e.joinToken.approve},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c(Object(o.useState)(!1),2),a=r[0],i=r[1],l=c(Object(o.useState)(s(e,t)),2),h=l[0],d=l[1],p=c(Object(o.useState)(f(e)),2),m=p[0],y=p[1],v=t.dispatch,g=function(r){i(!0);var o="proxy.web/books.token",a="book/updateToken",c=e.id;u(e,t)&&(o="proxy.web/docs.token",a="doc/updateToken",c=e.id),v({type:o,payload:{data:{id:c,force:r},reducer:a}}).then((function(o){r&&n.a.success(__("重置链接成功")),e.joinToken=o;var a=s(e,t);d(a),y(f(e)),i(!1)}))};return Object(o.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!h&&g()}),[e.id]),[h,function(){return g(!0)},a,m,function(r){var n="proxy.web/books.updateToken",o="book/updateToken",a=e.id;u(e,t)&&(n="proxy.web/docs.updateToken",o="doc/updateToken",a=e.id),v({type:n,payload:{data:{id:a,approve:!0===r?1:0},reducer:o}}).then((function(e){y(r)}))}]},d=r(424),p=r.n(d),m=r(3746),y=r(47);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function b(){}function w(){}function E(){}var _={};u(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(C([])));S&&S!==r&&n.call(S,i)&&(_=S);var k=E.prototype=b.prototype=Object.create(_);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==v(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=T(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return w.prototype=E,o(k,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new L(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function b(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.organization,n=w(Object(o.useState)(!1),2),a=n[0],i=n[1],c=w(Object(o.useState)([]),2),l=c[0],u=c[1],s=Object(o.useCallback)(p()(function(){var e,n=(e=g().mark((function e(n){var o,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return i(!1),e.abrupt("return");case 3:return i(!0),o={q:n.trim(),include_unconfirmed_corp_account:!0,optional_properties:t.optional_properties},r&&r.id||(o.global=!0),e.prev=6,e.next=9,y.a.users.complete(o);case 9:a=e.sent,u(Object(m.format)(a));case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[6,,11,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),200),[]);return[l,s,a,function(){return u([])}]};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(){var e=O(Object(o.useState)(!1),2),t=e[0],r=e[1];return[t,Object(o.useCallback)((function(){return r((function(e){return!e}))}),[])]},j=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}var x=function(e,t){return function(r,n){var o=e.id,a=e.settings.homepage,i=a?a.layout:{};Object.keys(i).map((function(e){return i[e]&&i[e].length>0&&(i[e]=i[e].map((function(e){return"string"==typeof e&&e===t||"object"===L(e)&&e.type===t?{name:r,type:t}:e}))),i[e]})),y.a.groups.settings({id:o,homepage:{layout:i}}).then((function(e){n&&"function"==typeof n&&n(e)}))}}},4369:function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));r(701);var n=r(309),o=(r(53),r(12)),a=(r(40),r(9)),i=(r(48),r(11)),c=(r(227),r(101)),l=r(0),u=r(1634),s=r(1653),f=r(1232),h=r(87),d=r(5),p=r.n(d),m=r(1233),y=r.n(m),v=r(464),g=r(3676),b=r(208),w=r(4040),E=r(1422),_=r(10),O=r(74),S=r(3787);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(){j=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(C([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==k(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=T(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new L(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function L(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){L(a,n,o,i,c,"next",e)}function c(e){L(a,n,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){var t,r,d=e.bookPublicSet,m=e.panelType,k=e.panelTitle,L=e.share,N=e.belongs,P=e.organization,A=e.group,C=e.book,I=e.me,R=e.shareViewType,D=e.handlePasswordChange,G=e.handleScopeChange,M=e.handleSearchChange,B=e.onBack,U=l.useMemo((function(){return Object(E.d)(L,R,A,C)}),[L,R,A,C]).privacy,Y=Object(b.a)(),F={scopeSet:function(){var e=g.q[N],t=e.desc,r=e.actions,n=N===v.a.ORG&&(0===(null==P?void 0:P.share_to_outside_enable)||!h.a.isPremium(P));return l.createElement(l.Fragment,null,l.createElement("p",{className:S.a.titleDesc},t),r.map((function(e){var t;return l.createElement(c.a,{key:e.value,title:e.value===_.PRIVACY.public&&n?null===(t=e.tip)||void 0===t?void 0:t.call(e,P):"",placement:"bottomLeft",overlayInnerStyle:{width:"200px"},autoAdjustOverflow:!0},function(e){return l.createElement("div",{className:p()(S.a.contentArea,S.a.selectorItem,T({},S.a.disabledItem,e.value===_.PRIVACY.public&&n)),onClick:function(){U===e.value||e.value===_.PRIVACY.public&&n||null==G||G(e.value)}},l.createElement("span",null,e.label),U===e.value&&l.createElement(u.default,{className:S.a.selectorIcon,width:16,height:16}))}(e))})))},passwordSet:function(){var e=Object(E.c)(L,R,A,C),t=e.currentPassword,r=e.isInheritBookPassword,n="";(R===v.b.DOC&&r||R===v.b.BOOK)&&(n=g.o[R]);var u=Object(b.a)()?"https://www.yuque.com/yuque/thyzgp/wgy2sb#ebmU2":"https://yuque.antfin.com/lark/bsgp0v/lrui64#ebmU2",f=__("所属知识库已开启密码，文档无法独立设置。{terms}",{terms:l.createElement("a",{href:u,target:"_blank"},__("查看帮助"))}),h=function(e,t){var r=Object(E.a)(e,R,A,C);if(null!=r&&r.url){y()((null==r?void 0:r.urlWithDesc)||r.url,{format:"text/plain"});var n=t?__("已重置并复制链接和密码"):__("已复制链接和密码"),o=null!=e&&e.password?n:__("已复制链接");i.a.success(o,2)}},m=function(){var e=x(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==D?void 0:D(t?_.ENCRYPTED_PASSWORD_ACTIONS.disabled:_.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:if(!(r=e.sent)){e.next=8;break}if(!t){e.next=7;break}return e.abrupt("return",i.a.success(__("设置成功"),1));case 7:return e.abrupt("return",h(r));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=x(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==D?void 0:D(_.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:(t=e.sent)&&h(t,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=l.createElement("div",{className:S.a.contentArea},t?l.createElement("div",{className:p()(S.a.pwdBlock,T({},S.a.bookPublicSet,d))},l.createElement("span",{"data-testid":"password-text",className:S.a.passwordText},__("密码：{password}",{password:t})),l.createElement(a.a,{type:"text",disabled:r,onClick:w,className:S.a.resetBtn},l.createElement(s.default,{className:S.a.resetIcon,width:12,height:12}),__("重置"))):l.createElement(o.a,{className:p()(S.a.pwdLink,T({},S.a.bookPublicSet,d)),disabled:!0,placeholder:__("点击开启生成随机密码")}),l.createElement(a.a,{className:S.a.pwdBtn,size:"large",type:"primary",disabled:r,onClick:m},t?__("关闭"):__("开启")));return l.createElement(l.Fragment,null,l.createElement("p",{className:p()(S.a.titleDesc,T({},S.a.bookPublicSet,d))},n),l.createElement(c.a,{title:r?f:"",placement:"bottomRight",autoAdjustOverflow:!0},O))},searchSet:function(){var e=Object(E.b)(L,R,A,C),t=e.currentIndexedLevel,r=e.isInheritBookIndex,o=g.r[R][N],a=o.desc,i=o.action,u=o.tip,s=l.createElement("div",{className:S.a.contentArea},l.createElement("span",{className:S.a.switchTitle},i),l.createElement(n.a,{disabled:r,onChange:M,checked:1===t}));return l.createElement(l.Fragment,null,l.createElement("p",{className:p()(S.a.titleDesc,T({},S.a.bookPublicSet,d))},a),l.createElement(c.a,{title:r?u:"",placement:"bottomRight",autoAdjustOverflow:!0},s))},shareExpiredTimeSet:function(){var e=!(!P||null==P||!P.id),t=R===v.b.NOTE||!e&&A&&"User"===(null==A?void 0:A.type)&&A.id===I.id,r=Object(E.e)(L,R,e);if(r){var n=r.startTime,o=r.expiredTime,a=(g.s[N]||"").desc;if(!Y)return l.createElement("p",{className:S.a.titleDesc},a);var i=[{label:__("半年（{startTime} - {expiredTime}）",{startTime:n,expiredTime:o}),value:o},{label:__("永久有效"),value:null}],c=function(e){return l.createElement(l.Fragment,null,l.createElement("div",{onClick:function(){return function(e){var r;null===e.value&&t&&(null===(r=window.__member_message_ref)||void 0===r||r.current.showMemberIntro(O.LIMIT_SCENE.share_public))}(e)},className:p()(S.a.contentArea,S.a.selectorItem,T({},S.a.notOwner,!t))},l.createElement("span",{className:S.a.shareTime},e.label,null===e.value&&l.createElement(w.a,{className:S.a.memberAbleIcon,noTooltip:!0,isYuque:Object(b.a)(),group:A,organization:P})),e.value===o&&l.createElement(u.default,{className:S.a.selectorIcon,width:16,height:16})),null===e.value&&!t&&l.createElement("span",{className:S.a.shareNotOwner},__("请联系知识库所有者购买会员")))};return l.createElement(l.Fragment,null,l.createElement("p",{className:S.a.titleDesc},a),i.map((function(e){return c(e)})))}}};return d?l.createElement("div",{className:p()(S.a.shareDetailSettingPanel,S.a.bookPublicSetting)},l.createElement("div",{className:S.a.bookPublicTitle},k),null===(r=F[m])||void 0===r?void 0:r.call(F)):l.createElement("div",{className:S.a.shareDetailSettingPanel},l.createElement("div",{className:S.a.title,onClick:B},l.createElement(f.default,{className:S.a.backIcon,width:20,height:20}),k),null===(t=F[m])||void 0===t?void 0:t.call(F))}},4443:function(e,t,r){"use strict";r.r(t),r.d(t,"ShareButton",(function(){return $r}));r(40);var n=r(9),o=r(0),a=r.n(o),i=r(216),c=(r(1219),r(959)),l=(r(227),r(101)),u=r(464),s=r(208),f=r(34),h="styles-module_popover_v7CCF",d="styles-module_disable_OpJcF";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var m=["panel","CollaboratorChannel","InviteSelectorChannel","children"],y=["shareViewType","canCollaborator","canShare","isFileBook","onlyCollaborator","organization","group","book","me","targetResource","onChangeShare","beforeShareUpdate","getPopupContainer"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:x(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",y="completed",v={};function b(){}function w(){}function E(){}var _={};u(_,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(C([])));S&&S!==r&&n.call(S,i)&&(_=S);var k=E.prototype=b.prototype=Object.create(_);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==p(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function x(t,r,n){var o=h;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=T(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return w.prototype=E,o(k,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=u(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new L(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var j=function(e){return e.parentNode||document.body},L=function(e){var t=e.panel,r=e.CollaboratorChannel,a=e.InviteSelectorChannel,i=e.children,p=k(e,m),b=p.shareViewType,E=p.canCollaborator,S=p.canShare,L=p.isFileBook,x=p.onlyCollaborator,T=p.organization,N=p.group,P=p.book,A=p.me,C=p.targetResource,I=p.onChangeShare,R=p.beforeShareUpdate,D=p.getPopupContainer,G=void 0===D?j:D,M=k(p,y),B=O(o.useState(!1),2),U=B[0],Y=B[1],F=O(o.useState(!1),2),z=F[0],V=F[1];o.useEffect((function(){var e="#collaborator"===window.location.hash||window.location.hash.startsWith("#collaborator?");x&&e&&E&&b===u.b.DOC&&(V(!0),Y(!0))}),[]),o.useEffect((function(){x&&E&&b===u.b.DOC&&V(!0)}),[x]);var W=function(){var e,t=(e=g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=w(w({},t),{},{id:C.id}),!x){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",null==I?void 0:I(r));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,c,"next",e)}function c(e){_(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),q=o.useMemo((function(){var e=null!=T&&T.id?u.a.ORG:u.a.PERSON;return Object(s.a)()?e:u.a.INTERNAL}),[T]);return null!=C&&C.id?o.createElement(c.a,{overlayClassName:h,content:o.createElement(t,{CollaboratorChannel:r,InviteSelectorChannel:a,onAttrsChange:W,beforeAttrsChange:R,share:C,shareViewType:b,canCollaborator:E,canShare:S,isFileBook:L,belongs:q,organization:T,group:N,book:P,me:A,showCollaborator:z,onlyCollaborator:x}),trigger:U&&f.c?"hover":"click",placement:"bottomRight",destroyTooltipOnHide:!0,visible:U,onVisibleChange:function(e){Y(e)},getPopupContainer:G,noArrow:!0},i||o.createElement(n.a,v({},M,{"data-aspm-click":"c36321.d326998"}),o.createElement("span",null,__("分享")))):o.createElement(l.a,{placement:"bottomRight",title:__("当前无法使用分享，请检查网络状态"),arrowPointAtCenter:!0},o.createElement(n.a,v({className:d},M),o.createElement("span",null,__("分享"))))},x=(r(48),r(11)),T=(r(67),r(31)),N=r(251),P=r(1422),A=r(3971),C=r(10),I=r(88),R=r.n(I),D=r(4369),G=(r(1429),r(1426)),M="ShareQrCodeLazyShow-module_skeletonPanel_OLLRv",B="ShareQrCodeLazyShow-module_skeletonTitle_-9VKp",U="ShareQrCodeLazyShow-module_skeletonImage_oIjcM",Y="ShareQrCodeLazyShow-module_skeletonButton_VsITP",F=function(){return o.createElement("div",{className:M},o.createElement(G.a,{className:B,title:!0,paragraph:!1,active:!0}),o.createElement(G.a.Image,{className:U}),o.createElement(G.a,{className:Y,title:!0,paragraph:!1,active:!0}))},z=(r(1006),r(702)),V=(r(1528),r(1367)),W=r(5),q=r.n(W),Z=r(369),H=r.n(Z),J=r(63),Q=r(47),$=r(285),K=r(492),X=r(3676),ee=r(3804);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t=e.target_id,r=e.target_type,n=te(o.useState(0),2),a=n[0],i=n[1];return o.useEffect((function(){t&&["Book","Doc"].includes(r)&&Q.a.collaborations.count({target_type:r,target_id:t,status:K.STATUS.applying}).then((function(e){i((null==e?void 0:e.count)||0)}))}),[t,r]),o.createElement(V.a,{dot:a>0,offset:[-4,4],className:ee.a.dot},o.createElement(J.b,{className:ee.a.inviteIcon,name:"icon-collaboratorlist",width:30}))},oe=function(e){var t=e.share,r=e.shareViewType,n=e.group,a=e.book,i=e.handlePanelShow;return o.createElement(o.Fragment,null,o.createElement(z.a.Item,{className:ee.a.firstItem,actions:[o.createElement(l.a,{title:__("链接添加协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-edit",onClick:function(){return i(X.c.inviteSelectorChannel)},"data-aspm-click":"c36321.d326999"},o.createElement(J.b,{className:ee.a.inviteIcon,name:"addlink",width:30}))),o.createElement(l.a,{title:__("查看所有协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-more",className:ee.a.inviteIconLi,onClick:function(){r===u.b.BOOK?Object($.c)("/r/".concat(null==n?void 0:n.login,"/").concat(null==a?void 0:a.slug,"/collaborators")):r===u.b.DOC&&i(X.c.collaboratorChannel)},"data-aspm-click":"c36321.d327000"},o.createElement(ne,{target_id:null==t?void 0:t.id,target_type:H()(r.toLowerCase())})))]},o.createElement(z.a.Item.Meta,{avatar:o.createElement(J.b,{className:q()(ee.a.itemIcon,ee.a.appointIcon),name:"nav-invite",width:40}),title:o.createElement("span",null,__("添加协作者")),description:o.createElement("span",null,__("通过链接，邀请对方加入协作"))})))},ae=r(1428),ie=r(1856),ce=r(1857),le=r(4040),ue=r(74),se=r(50);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(){de=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==fe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=L(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(fe(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function pe(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ve=function(e){var t=e.canCollaborator,r=e.isShareActive,a=e.belongs,i=e.shareViewType,c=e.organization,l=e.group,f=e.book,h=e.share,d=e.me,p=e.handleScopeChange,m=me(o.useState(!1),2),y=m[0],v=m[1],g=!(!c||null==c||!c.id),b=Object(A.a)(),w=o.useMemo((function(){var e=b.interests[se.INTEREST_CODE.create_public_resource];return e||g||i!==u.b.DOC||(e=!0),e}),[l]),E=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(ue.LIMIT_SCENE.share_public)},_=o.useMemo((function(){if(!r&&!w&&((null==c||!c.id)&&"User"===(null==l?void 0:l.type)))return l.id===d.id?__("会员可公开内容至互联网 {btn}",{btn:o.createElement("a",{onClick:E},__("购买会员"))}):__("联系知识库所有者购买会员可公开内容至互联网");return R()(X.v,[a,Object(X.k)(h,i,l,f)])}),[i,a,h,l,f]),O=o.useMemo((function(){return R()(X.t,[a,r?"public":"private"])}),[a,r]),S=function(){var e,t=(e=de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,p(a===u.a.PERSON?C.PRIVACY.public:C.PRIVACY.intranet);case 4:return e.prev=4,v(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pe(a,n,o,i,c,"next",e)}function c(e){pe(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.createElement(z.a.Item,{className:q()(he({},ee.a.firstItem,!t)),actions:[!r&&(w||g)&&o.createElement(o.Fragment,null,o.createElement(n.a,{className:q()(ee.a.shareButton,ee.a.sharePublic),disabled:y,onClick:S},y?o.createElement(ae.default,{width:14,height:14,className:ee.a.loadingIcon}):__("公开")))]},o.createElement(z.a.Item.Meta,{avatar:r?o.createElement(ie.default,{width:40,height:40,className:q()(ee.a.itemIcon,ee.a.publicIcon)}):o.createElement(ce.default,{width:40,height:40,className:q()(ee.a.itemIcon,ee.a.publicIcon)}),title:o.createElement("span",{className:ee.a.itemTitle},O,!w&&o.createElement(le.a,{className:ee.a.memberAbleIcon,isYuque:Object(s.a)(),group:l,organization:c})),description:_}))},ge=(r(53),r(12)),be=r(1858),we=r(1233),Ee=r.n(we),_e=r(4014),Oe=r(242),Se=function(e){var t,r=e.shareLink,a=e.isFileBook,i=e.privacy,c=e.belongs,l=e.shareViewType,s=e.organization,f=e.group,h=e.book,d=e.share,p=e.handleScopeChange,m=e.handlePanelShow,y=e.handlePanelType,v=e.handlePanelTitle,g=e.LazyShareQrCodeChannel,b=!(!s||null==s||!s.id),w=Object(P.c)(d,l,f,h).currentPassword,E=Object(P.b)(d,l,f,h).currentIndexedLevel,_=Object(P.e)(d,l,b),O=Object(Oe.g)(f),S=[{type:"scopeSet",title:__("分享范围"),hidden:c===u.a.PERSON||c===u.a.ORG&&a,defaultValue:c!==u.a.PERSON?null===(t=X.q[c].actions.find((function(e){return e.value===i})))||void 0===t?void 0:t.label:null,icon:"icon-range"},{type:"passwordSet",title:__("密码访问"),defaultValue:w||__("无密码"),icon:"icon-key-2"},{type:"searchSet",title:X.r[l][c].action,hidden:a||O,defaultValue:1===E?__("已开启"):__("关闭"),icon:"help-search"},{type:"closeShareSet",title:__("关闭公开分享"),noDetail:!0,icon:"icon-cancellink"}];_&&S.unshift({type:"shareExpiredTimeSet",title:__("有效期"),defaultValue:_.expiredTime,icon:"nav-clock"}),l===u.b.DOC&&c===u.a.INTERNAL&&(null==h?void 0:h.public)===C.PRIVACY.private&&(S=S.filter((function(e){return"searchSet"!==e.type})));var k=o.useCallback((function(){if(null!=r&&r.url){Ee()((null==r?void 0:r.urlWithDesc)||r.url,{format:"text/plain"});var e=w?__("已复制链接和密码"):__("已复制链接");x.a.success(e,1)}}),[r]);return o.createElement("div",{className:ee.a.moreConfigs},o.createElement("div",{className:ee.a.shareLinkSet},o.createElement(ge.a,{className:q()(ee.a.shareLinkShow,ee.a.qrCode),disabled:!0,placeholder:null==r?void 0:r.url}),o.createElement(n.a,{className:ee.a.shareButton,onClick:k},__("复制链接")),o.createElement(n.a,{className:ee.a.shareQrCode,onClick:function(){return m(X.c.shareQrCodeChannel)},onMouseOver:function(){g.preload()}},o.createElement(be.default,{className:ee.a.shareQrCodeIcon,width:18,height:18}))),o.createElement(_e.a,{settings:S,onClick:function(e,t){"closeShareSet"===e?p(C.PRIVACY.private):function(e,t){m(X.c.shareChannels),y(e),v(t)}(e,t)}}))},ke=r(4397);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Le(){Le=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==je(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=L(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(je(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function xe(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Te(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xe(a,n,o,i,c,"next",e)}function c(e){xe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ae=Object(N.b)((function(){return r.e(1447).then(r.bind(null,8639))})),Ce=function(e){var t=e.share,r=e.shareViewType,n=e.canShare,a=e.canCollaborator,i=void 0!==a&&a,c=e.isFileBook,l=void 0!==c&&c,s=e.showCollaborator,f=e.onlyCollaborator,h=e.belongs,d=e.beforeAttrsChange,p=e.onAttrsChange,m=e.organization,y=e.group,v=e.book,g=e.me,b=e.CollaboratorChannel,w=e.InviteSelectorChannel,E=Ne(o.useState(s?X.c.collaboratorChannel:X.c.sharePanel),2),_=E[0],O=E[1],S=Ne(o.useState(""),2),k=S[0],j=S[1],L=Ne(o.useState(""),2),N=L[0],I=L[1],G=Object(A.a)(),M=Ne(T.a.useModal(),2),B=M[0],U=M[1],Y=o.useMemo((function(){return Object(P.d)(t,r,y,v)}),[t,r,y,v]),z=Y.privacy,V=Y.isShareActive,W=o.useMemo((function(){var e=Object(X.k)(t,r,y,v);return h===u.a.INTERNAL&&z===C.PRIVACY.private&&(null==v?void 0:v.extend_private)===C.EXTEND_PRIVATE.BIND_DEPARTMENTS&&(e="extend_private"),R()(X.d,[r,h,e])}),[r,h,t,y,v]),q=o.useMemo((function(){return Object(P.a)(t,r,y,v)}),[t,r,y,v]),Z=function(){var e=Te(Le().mark((function e(n){return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ke.b)(n,r,t,G,B,d,p,z);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),x.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Te(Le().mark((function e(t){return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==p?void 0:p({encrypted_password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Te(Le().mark((function e(t){var r;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?1:0,e.next=3,null==p?void 0:p({indexed_level:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(o.Fragment,null,o.createElement("div",{className:ee.a.sharePanel},n&&_===X.c.shareChannels&&o.createElement(D.a,{panelType:k,panelTitle:N,share:t,belongs:h,organization:m,group:y,book:v,me:g,shareViewType:r,handlePasswordChange:H,handleScopeChange:Z,handleSearchChange:J,onBack:function(){return O(X.c.sharePanel)}}),_===X.c.sharePanel&&o.createElement("div",{className:ee.a.main},o.createElement("div",{className:ee.a.mainIntro},n&&o.createElement("div",{className:ee.a.shareDescText},W),i&&o.createElement(oe,{share:t,shareViewType:r,group:y,book:v,handlePanelShow:function(e){return O(e)}}),n&&o.createElement(ve,{canCollaborator:i,isShareActive:V,belongs:h,shareViewType:r,organization:m,group:y,book:v,share:t,me:g,handleScopeChange:Z})),n&&V&&o.createElement(Se,{shareLink:q,isFileBook:l,privacy:z,belongs:h,shareViewType:r,organization:m,group:y,book:v,share:t,handleScopeChange:Z,handlePanelShow:function(e){return O(e)},handlePanelType:function(e){return j(e)},handlePanelTitle:function(e){return I(e)},LazyShareQrCodeChannel:Ae})),i&&_===X.c.inviteSelectorChannel&&w&&o.createElement(w,{share:t,organization:m,group:y,book:v,shareViewType:r,onBack:function(){return O(X.c.sharePanel)},inviteContent:"inviteSharePanel"}),i&&_===X.c.collaboratorChannel&&b&&o.createElement(b,{onlyCollaborator:f,share:t,organization:m,group:y,book:v,inviteContent:"collaboratorPanel",onBack:function(){return O(X.c.sharePanel)}}),n&&V&&_===X.c.shareQrCodeChannel&&o.createElement(o.Suspense,{fallback:o.createElement(F,null)},o.createElement(Ae,{share:t,shareViewType:r,link:null==q?void 0:q.url,onBack:function(){return O(X.c.sharePanel)}}))),U)},Ie=r(1232),Re=r(473),De=r(60),Ge=r.n(De),Me=r(6),Be=r.n(Me),Ue=r(3982),Ye=r(3789),Fe=r(3981),ze=r(1226),Ve=(r(188),r(32)),We=(r(277),r(147)),qe=(r(589),r(206)),Ze=(r(278),r(86)),He=(r(588),r(110)),Je=r(1651),Qe=r(591),$e=r(82),Ke=r(54),Xe=r(1459),et=r(965),tt=r(157),rt=(r(800),r(381)),nt=r(1339),ot={role:"RoleSelector-module_role_jDwZn",trigger:"RoleSelector-module_trigger_PbJ3K",active:"RoleSelector-module_active_lhpS5",icon:"RoleSelector-module_icon_YSGjG",up:"RoleSelector-module_up_BKR9i",menu:"RoleSelector-module_menu_MwfMA",label:"RoleSelector-module_label_JI2Gx",menuItem:"RoleSelector-module_menuItem_cwz56",desc:"RoleSelector-module_desc_lnp7h"};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ut=lt(lt({},K.ROLE.edit,{label:Object(Ue.getPermissionName)(K.ROLE.edit),desc:__("拥有文档的编辑权限"),role:K.ROLE.edit}),K.ROLE.readonly,{label:Object(Ue.getPermissionName)(K.ROLE.readonly),desc:__("仅拥有只读和评论权限"),role:K.ROLE.readonly}),st=function(e){var t,r,n,i=it(Object(o.useState)(!1),2),c=i[0],l=i[1],u=e.role,s=e.placement,f=e.canChange,h=e.title,d=e.disableItems,p=e.externalActions;if([K.ROLE.readonly,K.ROLE.edit].includes(u)&&(r=ut[u]),!f)return a.a.createElement("span",{className:ot.status,"data-collaboration-role":u},null===(n=r)||void 0===n?void 0:n.label);return a.a.createElement("div",{className:"role-selector"},a.a.createElement(rt.a,{trigger:["click"],placement:s,onVisibleChange:function(e){l(e)},overlay:a.a.createElement(He.a,{selectedKeys:["".concat(u)],className:ot.menu,style:{border:"none"}},[K.ROLE.edit,K.ROLE.readonly].map((function(t){var r=ut[t],n=d.includes(r.role);return a.a.createElement(He.a.Item,{key:"".concat(r.role),disabled:n,onClick:function(){return t=r.role,e.onChange(t),void l(!1);var t}},a.a.createElement("a",{className:ot.menuItem,href:"#"},a.a.createElement("span",null,a.a.createElement("span",{className:ot.label},r.label),a.a.createElement("span",{className:ot.desc},r.desc)),a.a.createElement(nt.default,{style:{color:"#25B864"}})))})),p&&p())},a.a.createElement("span",{className:q()(ot.trigger,lt({},ot.active,c)),"data-collaboration-role":u},h||(null===(t=r)||void 0===t?void 0:t.label),a.a.createElement(J.b,{name:"arrow-down",className:q()(ot.icon,lt({},ot.up,c)),width:16}))))};st.propTypes={onChange:Be.a.func,placement:Be.a.string,canChange:Be.a.bool,role:Be.a.oneOf([K.ROLE.readonly,K.ROLE.edit]),title:Be.a.string,externalActions:Be.a.func,disableItems:Be.a.array},st.defaultProps={onChange:function(){},placement:"bottomRight",canChange:!0,disableItems:[]};var ft=st,ht={joinUserItem:"Item-module_joinUserItem_0O6yw",checkboxInfo:"Item-module_checkboxInfo_mWKfK",virtualLink:"Item-module_virtualLink_ty3p1",userInfo:"Item-module_userInfo_F4pgj",showItem:"Item-module_showItem_sCn3R",avatar:"Item-module_avatar_JD1HW",userDesc:"Item-module_userDesc_q4mqR",name:"Item-module_name_ff-QM",loginShow:"Item-module_loginShow_DePxA",loginShowSearch:"Item-module_loginShowSearch_zdokE",login:"Item-module_login_bu7O2",roleDesc:"Item-module_roleDesc_Dy5G9",roleDescSearch:"Item-module_roleDescSearch_Dw+uE",targetTypeRole:"Item-module_targetTypeRole_4riim",department:"Item-module_department_y3daB",dingtalkGroupTag:"Item-module_dingtalkGroupTag_lW9PH",applyPending:"Item-module_applyPending_7Va+N",pending:"Item-module_pending_KikZW",pendingRole:"Item-module_pendingRole_mvO-A",topRightDesc:"Item-module_topRightDesc_dQW2s",actions:"Item-module_actions_Mfqej",actionItem:"Item-module_actionItem_piU3P",actionItemReject:"Item-module_actionItemReject_rSq40",actionItemLabel:"Item-module_actionItemLabel_kzYeZ",deleteActionItem:"Item-module_deleteActionItem_RJWcd",label:"Item-module_label_qLBXy",desc:"Item-module_desc_-+chL"};function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wt(n.key),n)}}function mt(){mt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==dt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=L(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(dt(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function yt(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bt(e,t,r){return(t=wt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){var t=function(e,t){if("object"!=dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dt(t)?t:t+""}var Et=bt(bt(bt({},K.ROLE.manage,__("知识库管理员")),K.ROLE.edit,__("知识库可编辑成员")),K.ROLE.readonly,__("知识库可阅读成员")),_t=bt(bt(bt({},$e.ROLE.owner,__("团队管理员")),$e.ROLE.member,__("团队成员")),$e.ROLE.readonly,__("团队只读成员")),Ot=bt(bt({},K.TARGET_TYPE.Book,Et),K.TARGET_TYPE.Group,_t),St=bt(bt(bt({},K.ROLE.manage,__("可管理")),K.ROLE.edit,__("可编辑")),K.ROLE.readonly,__("可阅读"));function kt(e){var t;return(null===(t=e.collaborator)||void 0===t?void 0:t.target_type)===K.TARGET_TYPE.Book}function jt(e){var t;return(null===(t=e.collaborator)||void 0===t?void 0:t.target_type)===K.TARGET_TYPE.Group}function Lt(e){var t,r,n,o,a=e.collaborator;switch(null==a?void 0:a.target_type){case K.TARGET_TYPE.Book:return null!=a&&a.owner&&null!=a&&a.target?"/r/".concat(null==a||null===(t=a.owner)||void 0===t?void 0:t.login,"/").concat(null==a||null===(r=a.target)||void 0===r?void 0:r.slug,"/collaborators?role=").concat(null==a?void 0:a.target_role):"#";case K.TARGET_TYPE.Group:return null!=a&&a.owner&&null!=a&&null!==(n=a.owner)&&void 0!==n&&n.login&&(null==a||null===(o=a.owner)||void 0===o?void 0:o.type)===Ke.TYPES_MAP.group?"/".concat(null==a?void 0:a.owner.login,"/members?role=").concat(null==a?void 0:a.target_role):"#";default:return"#"}}function xt(e){var t,r,n,o,i,c,l,u,s=e.data,f=e.renderActions,h=e.isChecked,d=e.isCheckboxDisabled,p=e.isBatchProcessing,m=e.onSelect,y=(null===(u=s.collaborator)||void 0===u?void 0:u.owner_type)===K.OWNER_TYPE.VirtualCollaborator,v=kt(s),g=jt(s),b=!s.isNewUser()||jt(s)||kt(s);return a.a.createElement("div",{"data-testid":"join-user-item",key:s.uid,className:ht.joinUserItem,onClick:function(){s.ableToAdd()&&e.onAdd(s)}},p&&a.a.createElement("div",{className:ht.checkboxInfo},a.a.createElement(qe.a,{checked:h,disabled:d,onChange:function(e){m(e,s)}})),y?a.a.createElement("div",{className:ht.virtualLink},a.a.createElement("div",{className:q()(ht.userInfo,bt({},ht.showItem,b))},a.a.createElement("span",{className:ht.avatar},g&&a.a.createElement(Xe.a,{group:null===(t=s.collaborator)||void 0===t?void 0:t.owner,size:32}),v&&a.a.createElement(et.b,{showTooltip:!1,book:null===(r=s.collaborator)||void 0===r?void 0:r.target,width:32})),a.a.createElement("a",{href:Lt(s),"data-desktoptarget":"_browser",target:"_blank"},a.a.createElement("span",null,Ot[null===(n=s.collaborator)||void 0===n?void 0:n.target_type][null===(o=s.collaborator)||void 0===o?void 0:o.target_role]),(null===(i=s.collaborator)||void 0===i?void 0:i.target_count)&&a.a.createElement("span",null,__("({count}人)",{count:null===(c=s.collaborator)||void 0===c?void 0:c.target_count})))),a.a.createElement("div",{className:ht.actions},a.a.createElement("span",{className:ht.actionItemLabel},St[null===(l=s.collaborator)||void 0===l?void 0:l.role]))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:q()(ht.userInfo,bt({},ht.showItem,b))},a.a.createElement("span",{className:ht.avatar},a.a.createElement(Qe.a,{src:s.avatar,name:s.name,size:"sm"})),a.a.createElement("div",{className:ht.userDesc},function(e,t,r,n){var o,i,c,l=window.appData.isYuque,u=e.login||e.uid;if(!l){var s,f,h,d=(null===(s=e.data)||void 0===s?void 0:s.lastName)||e.login,p="AntDingTalkGroup"!==e.originType;return a.a.createElement("div",{className:ht.name},a.a.createElement("p",{className:q()(ht.loginShow,bt({},ht.loginShowSearch,!n))},e.name,p&&a.a.createElement("span",{className:ht.login},__("（")+d+__("）"))),"AntDingTalkGroup"===e.originType&&a.a.createElement("p",{className:ht.dingtalkGroup},a.a.createElement(Ze.a,{color:"#D9E8FC",className:ht.dingtalkGroupTag},"钉钉群")),a.a.createElement("p",{className:q()(ht.roleDesc,bt({},ht.roleDescSearch,!n))},t&&a.a.createElement("span",{className:ht.targetTypeRole},Et[null===(f=e.collaborator)||void 0===f?void 0:f.target_role]),r&&a.a.createElement("span",{className:ht.targetTypeRole},_t[null===(h=e.collaborator)||void 0===h?void 0:h.target_role]),e.department&&a.a.createElement("span",{className:ht.department},e.department)))}return a.a.createElement("div",{className:ht.name},a.a.createElement("p",{className:ht.loginShow},e.name,1!==(null===(o=e.collaborator)||void 0===o?void 0:o.status)?null:a.a.createElement("span",{className:ht.login},__("（")+u+__("）"))),a.a.createElement("p",{className:ht.roleDesc},t&&a.a.createElement("span",{className:ht.targetTypeRole},Et[null===(i=e.collaborator)||void 0===i?void 0:i.target_role]),r&&a.a.createElement("span",{className:ht.targetTypeRole},_t[null===(c=e.collaborator)||void 0===c?void 0:c.target_role])))}(s,v,g,b),!s.isGroupMember()&&!s.isGroupReadonlyMember()&&s.isInvited()&&!s.isMine()&&a.a.createElement("div",null,a.a.createElement("span",{className:ht.topRightDesc},__("尚未加入"))),!s.isGroupMember()&&!s.isGroupReadonlyMember()&&s.isApplying()&&a.a.createElement("div",{className:ht.applyPending},a.a.createElement("span",{className:ht.pending},__("申请权限")),a.a.createElement("span",{className:q()(ht.pending,ht.pendingRole)},"0"===s.role?__("可阅读"):__("可编辑"))))),a.a.createElement("div",{className:ht.actions},f(e))))}var Tt=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bt(this,"data",void 0),this.data=t},(t=[{key:"actionId",get:function(){throw new Error("需要实现这个对象")}},{key:"actionType",get:function(){throw new Error("需要实现这个对象")}},{key:"uid",get:function(){return this.data.uid}},{key:"id",get:function(){return this.data.id}},{key:"login",get:function(){return this.data.login}},{key:"name",get:function(){return this.data.name}},{key:"avatar",get:function(){return this.data.avatar_url}},{key:"role",get:function(){return this.data.role}},{key:"provider_type",get:function(){return this.data.provider_type}},{key:"provider_userid",get:function(){return this.data.provider_userid}}])&&pt(e.prototype,t),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),Nt=function(e){if(!(e.data instanceof Tt))throw new Error("data should be extend ItemBase");return xt(e)};Nt.propTypes={data:Be.a.object.isRequired,renderActions:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onRoleChange:Be.a.func,onAdd:Be.a.func,limited:Be.a.bool,isChecked:Be.a.bool,isCheckboxDisabled:Be.a.bool,isBatchProcessing:Be.a.bool,onSelect:Be.a.func},Nt.defaultProps={renderActions:function(e){var t=e.data,r=e.limited,o=a.a.useRef(null),i=vt(T.a.useModal(),2),c=i[0],l=i[1];if(jt(t)||kt(t))return a.a.createElement("span",{className:ht.actionItemLabel},St[t.role]);if(t.ableToAdd())return null;var u=function(e){var t=__("确认拒绝 ".concat(e," 的访问申请？")),r=__("确认要拒绝 ".concat(e," 的访问申请吗？"));return new Promise((function(e){c.confirm({icon:a.a.createElement(Je.default,null),width:505,title:t,content:__("{desc}拒绝后该用户无法访问该文档。",{desc:r}),okText:__("拒绝"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)},getContainer:function(){return o.current||document.body}})}))},s=function(){var t,r=(t=mt().mark((function t(r){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(r.name);case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:Object(tt.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"refuse",infoType:"Doc"}),e.onReject(r);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){yt(a,n,o,i,c,"next",e)}function c(e){yt(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,t.isUpdateAbility()&&t.isApplying()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){e.onAgree(t),Object(tt.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"approve",infoType:"Doc"})},className:ht.actionItem,"data-testid":"join-user-agree-button",disabled:r},__("同意")),a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){s(t)},className:q()(ht.actionItem,ht.actionItemReject)},__("拒绝"))),t.isUpdateAbility()&&(t.isJoined()||t.isInvited())&&a.a.createElement(ft,{role:parseInt(t.role,10),onChange:function(r){e.onRoleChange(t,r)},externalActions:function(){return a.a.createElement(He.a.Item,{key:"deleteItem-".concat(t.role)},a.a.createElement("a",{key:"deleteItem",className:ht.deleteActionItem,"data-testid":"join-user-delete-button",onClick:function(){e.onDelete(t)}},a.a.createElement("span",null,a.a.createElement("span",{className:ht.label},__("移除")),a.a.createElement("span",{className:ht.desc},__("移除该协作者")))))},canChange:t.isUpdateAbility()}),l)}};var Pt=Nt;function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var It=function(e){var t=At(Object(o.useState)(""),2),r=t[0],n=t[1],i=e.renderItem,c=e.dataSource,l="searchSelector-".concat(+new Date);return a.a.createElement("div",{className:"join-user-search-selector",id:l},a.a.createElement("div",{className:"selector"},a.a.createElement(Ve.a,{mode:"multiple",labelInValue:!0,listHeight:354,value:[],placeholder:e.placeholder,notFoundContent:e.loading?a.a.createElement(We.a,{justify:"block"}):r?e.renderNotFound():null,filterOption:!1,onSearch:function(t){n(t),e.onSearch(t)},onChange:e.onChange,onSelect:function(t,r){n("");var o=c.find((function(r){return r[e.key]===t.key}));o&&e.onSelect(o)},onBlur:function(){n(""),e.onBlur&&e.onBlur()},style:{width:"100%"},disabled:e.disableSearch,getPopupContainer:function(){return document.getElementById(l)}},c.map((function(t){return a.a.createElement(Ve.a.Option,{key:t[e.key],className:"selector-item",disabled:e.disableSelect(t)},a.a.createElement("div",{className:"full-item"},a.a.createElement(i,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions})),a.a.createElement("div",{className:"simple-item"},t[e.name]))})))))};It.propTypes={dataSource:Be.a.array,renderItem:Be.a.func,renderNotFound:Be.a.func,renderActions:Be.a.func,key:Be.a.string,name:Be.a.string,disableSelect:Be.a.func,onSearch:Be.a.func,onChange:Be.a.func,onSelect:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onRoleChange:Be.a.func,onAdd:Be.a.func,onBlur:Be.a.func,loading:Be.a.bool,placeholder:Be.a.string,disableSearch:Be.a.bool},It.defaultProps={key:"uid",name:"name",placeholder:__("搜索添加用户"),loading:!1,dataSource:[],renderItem:Pt,renderNotFound:function(){return null},onSearch:function(){},onChange:function(){},onSelect:function(){},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onBlur:function(){},onAdd:function(){},disableSelect:function(){return!1},disableSearch:!1};var Rt=It,Dt="EmptyTip-module_emptyTip_aBtYt",Gt="EmptyTip-module_emptyImageWrapper_6BIQC",Mt="EmptyTip-module_emptyImage_u42M6",Bt="EmptyTip-module_emptyText_JUjEv",Ut=function(){return a.a.createElement("div",{className:Dt},a.a.createElement("div",{className:Gt},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*aSg9SJR6isIAAAAAAAAAAAAAARQnAQ",className:Mt})),a.a.createElement("p",{className:Bt},__("暂无文档协作者")))},Yt="List-module_item_Yt8gv",Ft="List-module_batchItem_Us7Lf",zt="List-module_checkIcon_hePQ4",Vt="List-module_batchAction_BzAK1",Wt="List-module_batchDelete_HYqdG";function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Zt(){Zt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==qt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=L(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qt(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ht(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Jt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ht(a,n,o,i,c,"next",e)}function c(e){Ht(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Qt(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Kt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){if(e){if("string"==typeof e)return Xt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xt(e,t):void 0}}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var er=function(e){var t=e.dataSource,r=e.renderItem,n=e.limited,o=e.isBatchProcessing,i=e.onRoleBatchChange,c=e.onBatchDelete,l=t.filter((function(e){return e.collaborator.target_type===K.TARGET_TYPE.Doc&&(e.collaborator.status!==K.STATUS.joined||window.appData.me.login===e.login)})),u=t.filter((function(e){return e.collaborator.target_type===K.TARGET_TYPE.Doc&&e.collaborator.status===K.STATUS.joined&&window.appData.me.login!==e.login})),s=t.filter((function(e){return e.collaborator.target_type===K.TARGET_TYPE.Book})),f=t.filter((function(e){return e.collaborator.target_type===K.TARGET_TYPE.Group})),h=$t(a.a.useState([]),2),d=h[0],p=h[1],m=d.length>0&&d.length<u.length,y=u.length>0&&u.length===d.length,v=function(e,t){var r=d.includes(t)?d.filter((function(e){return e!==t})):[].concat(Qt(d),[t]);p(r)},g=function(){var e=Jt(Zt().mark((function e(t){return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(d,t);case 2:p([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Jt(Zt().mark((function e(){return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(t,r){e.onRoleChange(t,r),d.length>0&&p([])};return a.a.useEffect((function(){p([])}),[t.length]),a.a.createElement(a.a.Fragment,null,o&&a.a.createElement("div",{className:Ft},a.a.createElement("div",{className:zt},a.a.createElement(qe.a,{onChange:function(e){p(e.target.checked?u:[])},indeterminate:m,checked:y},d.length>0?__("已选择 {count} 个",{count:d.length}):__("全选"))),d.length>0&&a.a.createElement("div",{className:Vt},a.a.createElement(ft,{title:__("批量调整权限"),onChange:g}),a.a.createElement("div",{className:Wt,onClick:b},a.a.createElement("span",null,__("批量移除"))))),!!l.length&&a.a.createElement(a.a.Fragment,null,null==l?void 0:l.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Yt},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:w,onAdd:e.onAdd,renderActions:e.renderActions,limited:n,isBatchProcessing:o,isCheckboxDisabled:!0}))}))),!!u.length&&a.a.createElement(a.a.Fragment,null,null==u?void 0:u.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Yt},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:w,onAdd:e.onAdd,renderActions:e.renderActions,onSelect:v,isBatchProcessing:o,isChecked:d.includes(t)}))}))),!!s.length&&a.a.createElement(a.a.Fragment,null,null==s?void 0:s.map((function(e){return a.a.createElement("div",{key:e.id,className:Yt},a.a.createElement(r,{data:e,isBatchProcessing:o,isCheckboxDisabled:!0}))}))),!!f.length&&a.a.createElement(a.a.Fragment,null,null==f?void 0:f.map((function(e){return a.a.createElement("div",{key:e.id,className:Yt},a.a.createElement(r,{data:e,isBatchProcessing:o,isCheckboxDisabled:!0}))}))))};er.propTypes={dataSource:Be.a.array,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onBatchDelete:Be.a.func,onRoleChange:Be.a.func,onRoleBatchChange:Be.a.func,onAdd:Be.a.func,renderItem:Be.a.func,renderActions:Be.a.func,limited:Be.a.bool,isBatchProcessing:Be.a.bool},er.defaultProps={dataSource:[],onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){},renderItem:Pt};var tr=er,rr={title:"Modal-module_title_Fhe+q",menu:"Modal-module_menu_GTmMW",searchWrapper:"Modal-module_searchWrapper_G76nZ",searchSelector:"Modal-module_searchSelector_qZfrJ",searchAdd:"Modal-module_searchAdd_srKkd",btnLoadMore:"Modal-module_btnLoadMore_+NLxh",spinContainer:"Modal-module_spinContainer_6y18w",listWrapper:"Modal-module_listWrapper_YI-Wn"};function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return or(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ar=function(e){var t=e.collaboratorCount,r=e.dataSource,n=nr(Object(o.useState)(!1),2),i=n[0],c=n[1],l=nr(Object(o.useState)(!1),2),u=l[0],f=l[1],h=nr(Object(o.useState)(!1),2),d=h[0],p=h[1],m=window.appData,y=m.isYuque,v=m.organization,g=m.group,b=t>=ze.a.getDocCollaboratorLimit(g),w=!(Object(s.a)()&&(null==v||!v.id));return e.onLoading?a.a.createElement("div",{className:rr.spinContainer},a.a.createElement(G.a,{title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(G.a,{avatar:!0,title:!0,paragraph:!1,active:!0})):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:rr.content},y&&e.memberDocCollaboratorTip&&a.a.createElement(Ye.e,{collaboratorCount:e.collaboratorCount,user:g}),a.a.createElement("div",{className:rr.searchWrapper},e.showSearch&&a.a.createElement("div",{className:rr.searchSelector},a.a.createElement(Rt,{loading:e.searchLoading,dataSource:d?e.searchData:e.recentContacts,placeholder:e.placeholder,onSelect:e.onSelect,onSearch:function(t){p(!0),e.onSearch(t)},onChange:e.onChange,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,onBlur:e.onBlur,disableSelect:e.disableSelect,disableSearch:e.disableSearch,renderNotFound:e.renderSearchNotFound,renderItem:e.renderItem,renderActions:e.renderActions})),w&&a.a.createElement("div",{className:rr.searchAdd,onClick:function(){return c(!0)}},__("批量添加")),t>0&&a.a.createElement("div",{className:rr.searchAdd,onClick:function(){f(!u)}},u?__("取消处理"):__("批量处理"))),r.length>0?a.a.createElement("div",{className:rr.listWrapper},a.a.createElement(tr,{dataSource:r,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onBatchDelete:e.onBatchDelete,onRoleChange:e.onRoleChange,onRoleBatchChange:e.onRoleBatchChange,onAdd:e.onAdd,renderItem:e.renderItem,renderActions:e.renderActions,limited:y&&b,isBatchProcessing:u}),e.moreLoading?a.a.createElement("div",{className:rr.btnLoadMore},__("加载中...")):e.shouldLoadMore?a.a.createElement("div",{className:rr.btnLoadMore,onClick:e.onLoadMore},__("加载更多")):null):a.a.createElement(Ut,null)),i&&a.a.createElement(Fe.a,{type:"doc",visible:i,onCancel:function(){return c(!1)},afterSubmit:function(){var t;c(!1),null===(t=e.onAdd)||void 0===t||t.call(e)}}))};ar.propTypes={dataSource:Be.a.array,shouldLoadMore:Be.a.bool,onLoadMore:Be.a.func,onAgree:Be.a.func,onReject:Be.a.func,onDelete:Be.a.func,onBatchDelete:Be.a.func,onRoleChange:Be.a.func,onRoleBatchChange:Be.a.func,onAdd:Be.a.func,moreLoading:Be.a.bool,renderItem:Be.a.func,renderActions:Be.a.func,dispatch:Be.a.func,memberDocCollaboratorTip:Be.a.bool,collaboratorCount:Be.a.number,searchData:Be.a.array,placeholder:Be.a.string,disableSearch:Be.a.bool,disableSelect:Be.a.func,onSearch:Be.a.func,onChange:Be.a.func,onSelect:Be.a.func,onBlur:Be.a.func,searchLoading:Be.a.bool,renderSearchNotFound:Be.a.func,showSearch:Be.a.bool,onLoading:Be.a.bool},ar.defaultProps={collaboratorCount:0,dataSource:[],searchData:[],shouldLoadMore:!1,moreLoading:!1,onLoadMore:function(){},showSearch:!0,disableSearch:!1};var ir=ar,cr=r(308),lr=r(4305),ur=r(3746),sr=r(4123),fr="SearchNotFound-module_notfound_MSXOw",hr="SearchNotFound-module_notfoundTitle_Br7DA",dr=function(){return a.a.createElement("div",{className:fr},a.a.createElement("p",{className:hr},__("未在空间中找到该用户，请检查输入或联系管理员添加到空间成员")))},pr=function(){return a.a.createElement("div",{className:fr},a.a.createElement("p",{className:hr},__("未搜索到相关用户")))};function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function gr(e,t,r){return t&&vr(e.prototype,t),r&&vr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function br(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mr(t)?t:t+""}function wr(e,t,r){return t=_r(t),function(e,t){if(t&&("object"==mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Er()?Reflect.construct(t,r||[],_r(e).constructor):t.apply(e,r))}function Er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Er=function(){return!!e})()}function _r(e){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_r(e)}function Or(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sr(e,t)}function Sr(e,t){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sr(e,t)}var kr=function(e){function t(e,r,n,o,a){var i;return yr(this,t),(i=wr(this,t,[e])).collaborator=r,i.groupUser=n,i.target=o,i.book=a||o,i}return Or(t,e),gr(t,[{key:"originId",get:function(){return this.data.origin_id}},{key:"originType",get:function(){return this.data.origin_type}},{key:"department",get:function(){var e,t;return(null===(e=this.data)||void 0===e||null===(e=e.profile)||void 0===e?void 0:e.department)||(null===(t=this.data)||void 0===t?void 0:t.dep)||null}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return"AntDingTalkGroup"===this.originType?"".concat(this.originType,"_").concat(this.originId):(this.data.uid||Object(ur.format)([this.data]),this.data.uid)}},{key:"userId",get:function(){return this.data.id}},{key:"role",get:function(){return this.collaborator&&String(this.collaborator.role)}},{key:"workId",get:function(){return this.data.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator&&this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator&&this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator&&this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==$e.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===$e.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}}])}(Tt),jr=function(e){function t(e,r,n,o){var a,i;return yr(this,t),(i=wr(this,t,[e])).collaborator=e,i.user=e.owner,i.collaborator.owner_id=null===(a=i.user)||void 0===a?void 0:a.id,i.groupUser=r,i.target=n,i.book=o||n,i.departments=e.departments,i}return Or(t,e),gr(t,[{key:"department",get:function(){var e;return null!==(e=this.departments)&&void 0!==e&&e.length?this.departments.map((function(e){return e.name})).join("-"):null}},{key:"ownerType",get:function(){return this.collaborator.owner_type}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.user.uid||Object(ur.format)([this.user]),this.user.uid}},{key:"userId",get:function(){return this.user.id}},{key:"role",get:function(){return String(this.collaborator.role)}},{key:"login",get:function(){return this.user.login}},{key:"name",get:function(){return this.user.name}},{key:"avatar",get:function(){return this.user.avatar_url}},{key:"workId",get:function(){return this.user.workid}},{key:"originId",get:function(){return this.data.owner_id}},{key:"originType",get:function(){return this.data.owner_type}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator.target_type===K.TARGET_TYPE.Doc&&this.collaborator.status===K.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==$e.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===$e.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login&&this.isUser()}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}},{key:"isUser",value:function(){return this.ownerType===K.OWNER_TYPE.User}}])}(Tt);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){Nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Lr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(){Pr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",p="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,i)&&(w=_);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Lr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=L(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Lr(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ar(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Cr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ar(a,n,o,i,c,"next",e)}function c(e){Ar(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Dr=Ge()("collaborator:add"),Gr=function(e){var t=e.group,r=e.book,n=e.doc,i=e.organization,c=e.dispatch,l=e.isEditing,u=e.onReverting,s=window.appData.isYuque,f=Ir(Object(o.useState)(0),2),h=f[0],d=f[1],p=Ir(Object(o.useState)(0),2),m=p[0],y=p[1],v=Ir(Object(o.useState)(!1),2),g=v[0],b=v[1],w=Ir(Object(o.useState)(!1),2),E=w[0],_=w[1],O=Ir(Object(lr.c)(n,{dispatch:c,book:r,group:t,isEditing:l}),5),S=O[0],k=O[1],j=O[2],L=O[3],N=O[4],P=Ir(Object(lr.e)(n,{dispatch:c,organization:i,optional_properties:"profile"}),4),A=P[0],C=P[1],I=P[2],R=P[3],D=Ir(Object(o.useState)([]),2),G=D[0],M=D[1],B=Object(o.useCallback)((function(){Q.a.collaborations.count({target_type:"Doc",target_id:n.id}).then((function(e){y((null==e?void 0:e.count)||0)}))}),[n.id]),U=Object(o.useCallback)((function(e){return Dr("list",n.id),c({type:"proxy.web/collaborations.find",payload:{data:{target_type:"Doc",target_id:n.id,offset:e,limit:200,optional_properties:"departments"},reducer:0===e?"doc/updateCollaborations":"doc/addCollaboration"}}).then((function(t){var r=t.filter((function(e){return e.target_type===K.TARGET_TYPE.Doc}));d(e+r.length),200===r.length?_(!0):_(!1)}))}),[n.id]);Object(o.useEffect)((function(){b(!0),U(0).then((function(){b(!1)})).catch((function(e){b(!1)})),c({type:"proxy.web/groups.users",payload:{data:{id:t.id},reducer:"group/updateMembers"}}),B(),window.appData.isAntDingtalkUser&&Q.a.users.recentContacts().then((function(e){M(e)}))}),[n.id,t.id]);var Y=function(){U(0),B()},F=Object(o.useCallback)(function(){var e=Cr(Pr().mark((function e(t,r){var o;return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:b(!0),o=Number(r),c({type:"proxy.web/collaborations.batchUpdate",payload:{data:{target_id:n.id,target_type:"Doc",list:t.map((function(e){return{id:e.id,type:e.type}})),role:o},reducer:"doc/updateMultipleCollaborations"}}).then((function(){x.a.success(__("已将 {count} 人的权限修改为“{role}”",{count:t.length,role:Object(Ue.getPermissionName)(o)}),5),o===K.ROLE.readonly&&x.a.warning(__("下方的“邀请协作链接”依然有较高权限，建议调整或重置"),8),b(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[n.id]),z=function(e){c({type:"proxy.web/collaborations.destroy",payload:{data:{id:e.actionId,type:e.actionType},reducer:"doc/removeCollaboration"}}).then((function(){var t=!e.isMine()&&!e.isApplying();x.a.success(a.a.createElement("span",null,__("操作成功"),t&&a.a.createElement("a",{className:sr.a.revertLink,onClick:function(){u&&u(),x.a.destroy(),c({type:"doc/addCollaborator",payload:{data:Tr(Tr({},e.collaborator),{},{user:e.user})}}).then((function(){x.a.success(__("撤销成功!"))}))}},__("撤销"))),3),B()}))},V=Object(o.useCallback)(function(){var e=Cr(Pr().mark((function e(t){return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:c({type:"proxy.web/collaborations.batchDestroy",payload:{data:{target_id:n.id,target_type:"Doc",list:t.map((function(e){return{id:e.id,type:e.collaborator.type}}))},reducer:"doc/removeMultipleCollaborations"}}).then((function(){x.a.success(a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,__("批量删除成功")),a.a.createElement("a",{className:sr.a.revertLink,onClick:Cr(Pr().mark((function e(){return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.a.destroy(),c({type:"doc/batchAddCollaborators",payload:{data:{target_id:n.id,target_type:"Doc",users:t.map((function(e){return{user_id:e.collaborator.owner_id,owner_type:e.collaborator.owner_type,role:e.collaborator.role,status:e.collaborator.ROLEstatus}}))}}}).then((function(){x.a.success(__("撤销成功"))}));case 2:case"end":return e.stop()}}),e)})))},__("撤销")))),x.a.warning(__("下方的“邀请协作链接”依然有较高权限，建议调整或重置"),8)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.id]),W=function(){var e=Cr(Pr().mark((function e(t){var r,n,o;return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:r=t,n=__("确定移除 {name} 等 {num} 位协作者吗？",{name:r[0].name,num:r.length}),o=__("移除权限后，{name} 等 {num} 个人将无法访问该文档",{name:r[0].name,num:r.length}),1===r.length&&(n=__("确定移除 {name} 的权限吗？",{name:r[0].name}),o=__("移除权限后，{name} 将无法访问该文档",{name:r[0].name})),T.a.confirm({title:n,content:o,okText:__("移除"),cancelText:__("取消"),autoFocusButton:null,onOk:function(){var e=Cr(Pr().mark((function e(){return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Cr(Pr().mark((function e(t){var r,o;return Pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={target_type:"Doc",target_id:n.id,role:K.ROLE.edit,dingtalk_group_ids:[t.originId]},Dr("add_ding_talk_group:data",r),e.next=4,Q.a.collaborations.addDingTalkGroup(r);case 4:if(o=e.sent,Dr("add_ding_talk_group:result",r),0!==o.length){e.next=9;break}return x.a.error("添加失败"),e.abrupt("return");case 9:x.a.success(__("添加成功")),c({type:"doc/addOneCollaboration",payload:o[0]});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=s&&m>=ze.a.getDocCollaboratorLimit(t);Object(ur.format)(t.members.map((function(e){return e.user}))),Object(ur.format)(n.collaborations.map((function(e){return e.owner})));var H=A.map((function(e){var o=t.members.find((function(t){var r;return(null===(r=t.user)||void 0===r?void 0:r.uid)===e.uid})),a=n.collaborations.find((function(t){var r;return(null===(r=t.owner)||void 0===r?void 0:r.uid)===e.uid}));return new kr(e,a,o,n,r)})),J=n.collaborations.map((function(e){var o=t.members.find((function(t){var r,n;return(null===(r=t.user)||void 0===r?void 0:r.uid)===(null===(n=e.owner)||void 0===n?void 0:n.uid)}));return new jr(e,o,n,r)})),$=G.map((function(e){return new kr(e,null,null,n,r)}));return a.a.createElement(ir,{memberDocCollaboratorTip:s&&!!n,collaboratorCount:m,placeholder:__("输入用户名邀请协作"),dataSource:J,link:S,onRefreshLink:k,linkLoading:j,checked:L,onCheckChange:N,recentContacts:$,searchData:H,onSearch:C,onSelect:function(e){Dr("handle_add",e),"AntDingTalkGroup"!==e.originType?(e.ableToAdd()&&function(e){var t={target_type:"Doc",target_id:n.id,role:K.ROLE.edit};e.userId?t.user_id=e.userId:t=Tr(Tr({},t),{},{login:e.login,workid:e.workId,name:e.name,provider_type:e.provider_type,provider_userid:e.provider_userid}),c({type:"proxy.web/collaborations.create",payload:{data:t,reducer:"doc/addOneCollaboration"}}).then((function(){x.a.success(__("添加成功")),setTimeout((function(){Y()}),100)}))}(e),R(e)):q(e)},onBlur:R,disableSelect:function(e){return Z||e&&!e.ableToAdd()},disableSearch:Z,searchLoading:I,onAgree:function(e){c({type:"proxy.web/collaborations.approve",payload:{data:{id:e.actionId},reducer:"doc/updateOneCollaboration"}}).then((function(e){var t=__("已同意用户 {member} 加入",{member:e.owner.name});x.a.success(t),B()}))},onReject:z,onDelete:z,onBatchDelete:W,onRoleChange:function(e,t){c({type:"proxy.web/collaborations.update",payload:{data:{id:e.actionId,role:t},reducer:"doc/updateOneCollaboration"}}).then((function(){x.a.success(__("更新成功")),B()}))},onRoleBatchChange:F,onAdd:Y,disableInvite:Z,onLoadMore:function(){U(h)},shouldLoadMore:E,onLoading:g,showSearch:n.abilities.create_collaborator,showJoinLink:n.abilities.create_collaborator,renderSearchNotFound:i&&i.id?dr:pr})};Gr.propTypes={dispatch:Be.a.func.isRequired,organization:Be.a.object.isRequired,group:Be.a.object.isRequired,book:Be.a.object.isRequired,doc:Be.a.object.isRequired,isEditing:Be.a.bool,onReverting:Be.a.func};var Mr=Object(Re.d)((function(e){return e}))(Object(cr.b)(Gr)),Br=r(4021),Ur=r(4019);function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){Vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Yr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wr=function(e){var t,r=e.share,n=e.shareViewType,a=e.isEditing,i=e.inviteContent,c=e.organization,l=e.group,s=e.book,f=e.onBack,h=e.onToggleCollaboratorShow,d={type:n.toLowerCase(),book:s,group:l,organization:c};n===u.b.DOC&&(t=zr(zr({},d),{},{doc:r}));var p,m=o.useMemo((function(){return Ur.a.create(t||d)}),[t,d]);return m&&m.enable&&(p={id:Ur.a.id,title:Ur.a.title,inviteSelectorType:n.toLowerCase(),getJoinUrl:m.getUrl,getToken:m.getToken,updateToken:m.updateToken,deleteTokens:m.deleteTokens,getCopyText:m.getCopyText,inviteModalContent:i,onBackShare:f,moreSettingOptions:m.getMoreSettingOptions(),organization:c,isEditing:a,inviteTarget:r,toggleCollaboratorList:function(e){null==h||h(e)}}),o.createElement(o.Fragment,null,o.createElement(Br.a,p))},qr=r(3787);function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Jr=function(e){var t=e.onlyCollaborator,r=e.share,n=e.inviteContent,a=e.organization,i=e.group,c=e.book,l=e.onBack,u=Zr(o.useState(!0),2),s=u[0],f=u[1];return o.createElement(o.Fragment,null,s&&o.createElement("div",{className:q()(qr.a.shareDetailSettingPanel,qr.a.collaborator)},t?o.createElement("div",{className:qr.a.title},__("文档协作者")):o.createElement("div",{className:qr.a.title,onClick:l},o.createElement(Ie.default,{className:qr.a.backIcon,width:20,height:20}),__("文档协作者"))),s&&o.createElement("div",{className:qr.a.collaboratorContent},o.createElement(Mr,null)),o.createElement(Wr,{share:r,organization:a,group:i,book:c,shareViewType:"DOC",isEditing:!0,inviteContent:n,onToggleCollaboratorShow:function(e){return f(e)}}))};function Qr(){return Qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qr.apply(null,arguments)}var $r=function(e){return o.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return o.createElement(n.a,null,__("分享"))}},o.createElement(L,Qr({panel:Ce,CollaboratorChannel:Jr,InviteSelectorChannel:Wr},e)))}},702:function(e,t,r){"use strict";r(3151);var n=r(807),o=r(80),a=r.n(o),i=r(57),c=r.n(i),l=r(1234),u=r.n(l),s=r(94),f=r.n(s),h=r(135),d=r.n(h),p=r(0),m=r.n(p),y=r(6),v=r.n(y),g=r(5),b=r.n(g),w=r(95),E=r.n(w),_=r(176),O=r.n(_);var S=r(60),k=r.n(S)()("useInifiniteScroll"),j=function(e,t){var r,n,o,a,i,c,l=(r=!1,n=Object(p.useState)(r),o=O()(n,2),a=o[0],i=o[1],(c=Object(p.useRef)(a)).current=a,[a,i,Object(p.useCallback)((function(){return c.current}),[])]),s=O()(l,3),f=s[0],h=s[1],m=s[2],y=Object(p.useRef)(null);y.current=e;var v=Object(p.useCallback)(function(){var e=u()(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O()(t,1),n=r[0],!m()){e.next=3;break}return e.abrupt("return");case 3:if(null==n||!n.isIntersecting){e.next=12;break}return k("entry?.isIntersecting",null==n?void 0:n.isIntersecting),e.prev=5,h(!0),e.next=9,y.current();case 9:return e.prev=9,h(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])})));return function(t){return e.apply(this,arguments)}}(),[y]);return{loading:f,refCallback:Object(p.useCallback)((function(e){k("ref",e);var r,n=null;if(e&&!n&&window.IntersectionObserver)return k("enter"),n=new IntersectionObserver(v,{threshold:(null==t?void 0:t.threshold)||.1,root:(null===(r=t.root)||void 0===r?void 0:r.current)||null}),k("observe",e),n.observe(e),function(){return n.unobserve(e)}}),[t.threshold])}},L=r(707),x=r(147),T=(r(1006),["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadOnScroll","listContainer"]);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=m.a.forwardRef((function(e,t){var r=e.className,o=e.emptyView,a=e.onLoadMore,i=e.dataSource,l=e.renderItem,s=e.loading,h=e.showLoadingMore,p=e.pagination,y=e.children,v=e.justify,g=e.customItem,w=e.loadOnScroll,E=e.listContainer,_=f()(e,T),O=e.loadMoreText,S=void 0===O?Object(L.a)("查看更多"):O,k=s;"boolean"==typeof k&&(k={spinning:k});var N=k&&k.spinning,A=j(u()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w||!a){e.next=3;break}return e.next=3,a();case 3:case"end":return e.stop()}}),e)}))),{root:E}),C=A.loading,I=A.refCallback;w&&(S=Object(L.a)("到底了"));var R=i.length&&h?m.a.createElement("div",{className:"larkui-list-block-more"},N&&m.a.createElement(x.a,c()({justify:"block"},k)),!N&&m.a.createElement("a",{className:"larkui-list-block-more-btn",ref:I,onClick:function(e){e.preventDefault(),a&&a()}},C?Object(L.a)("加载中"):S)):null;if(N&&!R)return m.a.createElement("div",{className:b()("larkui-list","larkui-list-loading")},m.a.createElement(x.a,c()({justify:"block"},k)));var D=p;return D&&(D=p.total<=p.pageSize?null:P({showSizeChanger:!1},D)),m.a.createElement(n.b,c()({ref:t,className:b()(r,"larkui-list",{"larkui-list-justify-block":"block"===v}),loading:!1,loadMore:R,pagination:D,dataSource:i.length>0?i:e.emptyView?["empty"]:[],renderItem:function(e,t){if("empty"===e)return m.a.createElement("div",{className:"blankslate"},o);var r=l(e,t);return r?g?r:m.a.createElement(n.b.Item,{key:e.id},r):m.a.createElement("div",null)}},_),y)}));A.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},A.propTypes=P(P({},n.b.ListProps),{},{className:v.a.string,emptyView:v.a.node,onLoadMore:v.a.func,dataSource:v.a.array,renderItem:v.a.func,loading:v.a.oneOfType([v.a.bool,v.a.object]),showLoadingMore:v.a.bool,pagination:v.a.object,children:v.a.node,justify:v.a.oneOf(["block","flex"]),customItem:v.a.bool,loadOnScroll:v.a.bool,listContainer:v.a.node}),E()(A,n.b);t.a=A}}]);