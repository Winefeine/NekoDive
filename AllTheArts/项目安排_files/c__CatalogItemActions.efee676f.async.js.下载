/*! For license information please see c__CatalogItemActions.efee676f.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1327,18,30,227,267,372,501,798,847,1359,1407],{1008:function(t,e,r){var n=r(568),o=r(213),a=r(263),i=r(72),c=r(189),u=r(262),l=r(265),s=r(368),f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(i(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||s(t)||a(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!n(t).length;for(var r in t)if(f.call(t,r))return!1;return!0}},1229:function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r(506),o=r.n(n),a=o()(window.appData&&window.appData.defaultSpaceHost).host;a=a.split(".").slice(-2).join(".");var i={relocate:function(t,e){e?setTimeout((function(){window.location.href=i.normalize(t)}),e):window.location.href=i.normalize(t)},normalize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=o()(t).host||"";if(e){if(e===window.location.host)return t;if(e===a)return t;if(!e.endsWith(a))return"/";var r=e.slice(0,-a.length);return/^[.a-zA-Z0-9_-]+\.$/.test(r)?t:"/"}return"/"!==t[0]&&(t="/".concat(t)),t}},c=(i.normalize,i.relocate);function u(){var t=window.location.hash,e=decodeURIComponent(t.split("#")[1]),r=document.getElementById(e);r&&r.scrollIntoView()}},1233:function(t,e,r){"use strict";var n=r(1642),o={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var r,a,i,c,u,l,s=!1;e||(e={}),r=e.debug||!1;try{if(i=n(),c=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=t,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),e.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[e.format]||o.default;window.clipboardData.setData(a,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t);e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),u.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),s=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),a=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),i()}return s}},1244:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-home",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M12.734 14.844H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm0-2.813H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm5.698-4.433-8.02-5.616A.698.698 0 0 0 10 1.855a.698.698 0 0 0-.412.127l-8.02 5.616a.702.702 0 1 0 .807 1.15l.125-.086v8.799a.703.703 0 1 0 1.406 0V7.678L10 3.41l6.094 4.268v9.783a.703.703 0 1 0 1.406 0V8.662l.125.088a.704.704 0 0 0 .807-1.152Zm-5.698 1.62H7.266a.703.703 0 1 0 0 1.407h5.468a.703.703 0 1 0 0-1.406Z",fill:"currentColor",fillRule:"nonzero"}))},1245:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-user",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M16.004 15.508a6.5 6.5 0 0 0-1.397-2.07 6.5 6.5 0 0 0-2.878-1.678 5.362 5.362 0 0 0 2.076-1.293 5.346 5.346 0 0 0 1.576-3.803 5.337 5.337 0 0 0-1.576-3.803 5.346 5.346 0 0 0-3.803-1.576 5.337 5.337 0 0 0-3.803 1.576 5.346 5.346 0 0 0-1.576 3.803c0 1.436.559 2.787 1.576 3.803a5.362 5.362 0 0 0 2.076 1.293 6.5 6.5 0 0 0-2.879 1.678 6.5 6.5 0 0 0-1.908 4.607.703.703 0 1 0 1.407 0c0-1.365.53-2.649 1.496-3.613a5.076 5.076 0 0 1 3.613-1.496c1.365 0 2.648.53 3.613 1.496a5.076 5.076 0 0 1 1.496 3.613.703.703 0 1 0 1.407 0 6.552 6.552 0 0 0-.516-2.537ZM10 10.637a3.977 3.977 0 0 1-3.973-3.973A3.977 3.977 0 0 1 10 2.691a3.977 3.977 0 0 1 3.973 3.973A3.976 3.976 0 0 1 10 10.637Z",fill:"currentColor",fillRule:"nonzero"}))},1249:function(t,e,r){t.exports=r(1225)},1250:function(t,e,r){"use strict";r.d(e,"c",(function(){return v})),r.d(e,"f",(function(){return b})),r.d(e,"k",(function(){return _})),r.d(e,"m",(function(){return O})),r.d(e,"e",(function(){return S})),r.d(e,"h",(function(){return j})),r.d(e,"j",(function(){return C})),r.d(e,"d",(function(){return T})),r.d(e,"i",(function(){return P})),r.d(e,"a",(function(){return I})),r.d(e,"b",(function(){return R})),r.d(e,"l",(function(){return M})),r.d(e,"g",(function(){return G}));var n=r(1008),o=r.n(n),a=r(150),i=r(149),c=r(47),u=r(157),l=r(1518);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(){h=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=d(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=p;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(s(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function m(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){m(a,n,o,i,c,"next",t)}function c(t){m(a,n,o,i,c,"throw",t)}i(void 0)}))}}function v(t,e){return g.apply(this,arguments)}function g(){return g=y(h().mark((function t(e,r){var n,o,a=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{useOriginResp:!1},t.next=3,c.a.templates.v2.useTemplate({template_id:r.id,book_id:e.id,doc_id:n.docId},{useOriginResp:n.useOriginResp});case 3:return o=t.sent,Object(u.spmClick)(l.a.TEMPLATE_USAGE,{id:r.id,type:r.type,format:r.format,name:r.name,platform:n.isDesktop?"desktop":"pc"}),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function b(t){return w.apply(this,arguments)}function w(){return(w=y(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.templates.v2.destroy({id:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t,e){return E.apply(this,arguments)}function E(){return(E=y(h().mark((function t(e,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.templates.v2.findOne({id:e,usage:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e){return x.apply(this,arguments)}function x(){return(x=y(h().mark((function t(e,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.templates.v2.update({id:e,name:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e,r,n,o){return k.apply(this,arguments)}function k(){return k=y(h().mark((function t(e,r,n,o,i){var u,l,s,f=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=f.length>5&&void 0!==f[5]?f[5]:null,l=f.length>6&&void 0!==f[6]&&f[6],s={target_id:e,target_type:r,template_type:n,format:a.TYPE_FORMAT_MAP[o],type:o,name:i,in_edit:l},null!==u&&(s.doc_id=u),t.next=6,c.a.templates.v2.create(s);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function j(t){var e={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",laketable:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*W_NeRqkOsJsAAAAAAAAAAAAAARQnAQ",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeboard:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return t.cover?t.cover:e[t.format]||e.lake}function C(t,e){return L.apply(this,arguments)}function L(){return(L=y(h().mark((function t(e,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.docs.findOne({book_id:r,id:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e,r){return A.apply(this,arguments)}function A(){return(A=y(h().mark((function t(e,r,n){var o,a,i,u,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,r);case 2:if(o=t.sent,a="/go/doc/".concat(o.id,"/edit"),"doc_toc"!==(null==n?void 0:n.create_from)){t.next=12;break}return i=o.id,t.next=8,c.a.docs.addToCatalog({ids:[i],book_id:e.id,target_node_uuid:n.toc_node_uuid,action:"prependChild"});case 8:return(u=new URLSearchParams).set("toc_node_uuid",n.toc_node_uuid),window.location.href="".concat(a,"?").concat(u.toString()),t.abrupt("return");case 12:return l=o.id,t.next=15,c.a.docs.addToCatalog({ids:[l],book_id:e.id,target_node_uuid:null,action:"prependChild"});case 15:window.location.href=a;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.book_id,r=t.group_id,n=t.include_personal,o=t.official_channel,i=[],c={limit:t.limit,format:t.format,include_types:""};return e&&(i.push(a.TEMPLATE_TYPE_MAP.BOOK),c.book_id=e),r&&(i.push(a.TEMPLATE_TYPE_MAP.GROUP),c.group_id=r),o&&(i.push(a.TEMPLATE_TYPE_MAP.OFFICIAL),c.official_channel=o),n&&i.push(a.TEMPLATE_TYPE_MAP.PERSONAL),i.length&&(c.include_types=i.join(",")),c}function P(){return D.apply(this,arguments)}function D(){return D=y(h().mark((function t(){var e,r,n,o,i,u=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]?u[1]:{},t.next=4,c.a.templates.v2.find(N(e));case 4:return n=t.sent,o=new URLSearchParams(window.location.search),i=o.has("isSupportTable"),r.isDesktop&&!i&&(n.data=n.data.filter((function(t){return t.format!==a.TYPE_FORMAT_MAP.Table}))),Array.isArray(n.meta.official)&&(n.meta.official=n.meta.official.map((function(t){return d(d({},t),{},{name:"en-us"!==r.locale?t.name_zh:t.name_en})}))),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function I(t){var e;return!(null==t||null===(e=t.abilities)||void 0===e||!e.create_doc)}function R(t){var e;return Boolean("Group"===(null==t?void 0:t.type)&&(null==t||null===(e=t.abilities)||void 0===e?void 0:e.read_private))}function M(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{book_id:I(t)?t.id:void 0,group_id:R(e)?e.id:void 0,include_personal:r}}function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.filter((function(t){return!!i.MIXING_BOOK_TYPES.includes(t.type)}));return o()(e)?r:r.filter((function(t){return t.user_id===e.id}))}},1273:function(t,e,r){"use strict";r(800);var n=r(381),o=(r(53),r(12)),a=(r(588),r(110)),i=r(0),c=r.n(i),u=r(6),l=r.n(u),s=r(1244),f=r(1346),d=r(1245),p=r(1339),h=r(1232),m=r(242);r(1370);function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function g(t){var e,r,u=t.isOfficial,l=t.isDesktop,v=t.newTemplateName,g=t.onSetNewTemplateName,b=t.onSetSelectedScope,w=t.group,_=t.organization,E=l?w&&Object(m.f)(w):w&&Object(m.f)(w)&&(null===(e=w.abilities)||void 0===e?void 0:e.read_private),O=!!_,x=y(Object(i.useState)(E||O||u?0:1),2),S=x[0],k=x[1];r=E?[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement(f.default,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var j=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];u&&(r=j);var C=r[S];Object(i.useEffect)((function(){return b(r[S].type)}),[]);var L=c.a.createElement(a.a,null,r.map((function(t,e){var n=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(t.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},t.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,t.header),c.a.createElement("p",null,t.desc)),e===S&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(p.default,{width:20})));return c.a.createElement(a.a.Item,{key:t.header,onClick:function(){k(e),b(r[e].type)}},n)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(o.a,{value:v||"",onChange:function(t){return g(t.target.value)},onFocus:function(t){return t.target.setSelectionRange(0,t.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(n.a,{trigger:["click"],overlay:L},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},C.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,C.header),c.a.createElement("p",null,C.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(h.default,null)))))}g.defaultProps={isOfficial:!1},g.propTypes={newTemplateName:l.a.string,onSetNewTemplateName:l.a.func,onSetSelectedScope:l.a.func,isOfficial:l.a.bool,isDesktop:l.a.bool,group:l.a.object,organization:l.a.object},e.a=g},1274:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1346:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-team",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M17.057 12.45c.086-.446.13-.905.13-1.376A7.19 7.19 0 0 0 13 4.541a3.008 3.008 0 0 0-6 0 7.19 7.19 0 0 0-4.057 7.908 3.011 3.011 0 0 0-1.693 2.707 3.007 3.007 0 0 0 5.13 2.13 7.147 7.147 0 0 0 3.62.976c1.32 0 2.555-.356 3.62-.977a3.007 3.007 0 0 0 5.13-2.129c0-1.19-.691-2.218-1.693-2.707ZM10 3.163a1.601 1.601 0 1 1 0 3.203 1.601 1.601 0 0 1 0-3.203ZM4.258 16.758a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Zm8.476-1.602a3 3 0 0 0 .147.932 5.755 5.755 0 0 1-2.881.767 5.755 5.755 0 0 1-2.88-.767 3.01 3.01 0 0 0-2.8-3.94A5.784 5.784 0 0 1 7.25 5.986a3.01 3.01 0 0 0 5.498 0 5.784 5.784 0 0 1 2.932 6.162 3.01 3.01 0 0 0-2.948 3.008Zm3.008 1.602a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Z",fill:"currentColor",fillRule:"nonzero"}))},1361:function(t,e,r){"use strict";var n=r(94),o=r.n(n),a=r(80),i=r.n(a),c=r(498),u=r.n(c),l=r(567),s=r.n(l),f=r(597),d=r.n(f),p=r(979),h=r.n(p),m=r(571),y=r.n(m),v=r(0),g=r.n(v),b=r(6),w=r.n(b),_=r(1496),E=r.n(_),O=(r(1491),["width","height"]);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var o=y()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h()(this,r)}}var k=["aspectRatio","preview","viewMode","dragMode","guides","autoCropArea","checkCrossOrigin"],j=function(t){d()(r,t);var e=S(r);function r(){return u()(this,r),e.apply(this,arguments)}return s()(r,[{key:"componentDidMount",value:function(){var t=this,e=Object.keys(this.props).filter((function(t){return k.indexOf(t)>=0})).reduce((function(e,r){return Object.assign({},e,i()({},r,t.props[r]))}),{});this.cropper=new E.a(this.img,e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.src!==this.props.src&&this.cropper.reset().clear().replace(t.src)}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"getCroppedCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,r=e.containerWidth,n=e.cropWidth,a=e.aspectRatio,c=t.width||n||r,u=t.height||c/a,l=t.width,s=void 0===l?c:l,f=t.height,d=void 0===f?u:f,p=o()(t,O);return this.cropper.getCroppedCanvas(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({width:s,height:d},p))}},{key:"render",value:function(){var t=this,e=this.props,r=e.className,n=e.containerWidth,o=e.containerHeight,a=e.aspectRatio,i=e.src,c=e.alt,u=e.crossOrigin,l=o||n/a;return g.a.createElement("div",{style:{width:n,height:l},className:r},g.a.createElement("img",{ref:function(e){t.img=e},src:i,crossOrigin:u,alt:void 0===c?"picture":c,style:{opacity:0}}))}}]),r}(v.Component);j.propTypes={containerWidth:w.a.number.isRequired,containerHeight:w.a.number,src:w.a.string.isRequired,cropWidth:w.a.number,className:w.a.string,alt:w.a.string,crossOrigin:w.a.oneOf(["anonymous","use-credentials"]),aspectRatio:w.a.number,dragMode:w.a.oneOf(["crop","move","none"]),viewMode:w.a.oneOf([0,1,2,3]),preview:w.a.string,guides:w.a.bool,autoCropArea:w.a.number,checkCrossOrigin:w.a.bool},j.defaultProps={aspectRatio:4/3,dragMode:"move",viewMode:1,guides:!1,autoCropArea:1},e.a=j},1368:function(t,e,r){"use strict";r(3251);var n=r(1275);r(1529);e.a=n.a},1370:function(t,e,r){},1417:function(t,e,r){"use strict";var n=r(323);r.d(e,"a",(function(){return n.a}))},1431:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-avatar-upload",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),n.createElement("path",{d:"M177.268 80.262c4.525 3.166 10.76 2.064 13.926-2.461 3.11-4.445 2.102-10.538-2.222-13.754l-.24-.173-43.535-30.457a30 30 0 0 0-34.01-.264l-.384.264-43.535 30.457c-4.526 3.166-5.628 9.401-2.462 13.927 3.11 4.444 9.18 5.587 13.682 2.627l.244-.166 43.536-30.457a10 10 0 0 1 11.197-.18l.267.18 43.536 30.457Z",fillRule:"nonzero"}),n.createElement("rect",{x:118,y:39,width:20,height:150,rx:10})))},1433:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-download",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{x:28,y:209,width:200,height:20,rx:10}),n.createElement("path",{d:"M177.268 137.806c4.525-3.166 10.76-2.064 13.926 2.462 3.11 4.444 2.102 10.538-2.222 13.753l-.24.173-43.535 30.457a30 30 0 0 1-34.01.264l-.384-.264-43.535-30.457c-4.526-3.166-5.628-9.401-2.462-13.926 3.11-4.445 9.18-5.587 13.682-2.627l.244.165 43.536 30.457a10 10 0 0 0 11.197.18l.267-.18 43.536-30.457Z",fillRule:"nonzero"}),n.createElement("rect",{x:118,y:28,width:20,height:150,rx:10})))},1444:function(t,e,r){"use strict";var n=r(0),o=r.n(n),a=r(5),i=r.n(a),c=r(960),u=r(587),l=r(563),s=r(242),f=r(139);e.a=function(t){var e=window.appData.isPublicCloud,r=t.group,n=t.size,a=t.showOrgLabel,d=void 0!==a&&a,p=t.iconSize,h=t.radius,m=t.className,y=null==r?void 0:r.organization,v=(null==r?void 0:r.iconMap)||f.d;s.c.isPublicPage(r)&&(v[0]=f.f[0]);var g=l.b.getName("User",r)||v[0];return o.a.createElement("div",{className:i()("group-avatar",m),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},e&&d&&y&&o.a.createElement("span",{className:"lock"},o.a.createElement(u.c,{src:y.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(c.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":g}),name:r.name,icon:g,iconSize:p||Math.floor(.9*n),radius:h}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},1459:function(t,e,r){"use strict";var n=r(1444);r.d(e,"a",(function(){return n.a}))},1474:function(t,e,r){"use strict";var n=r(1229);r.d(e,"a",(function(){return n.a})),r.d(e,"b",(function(){return n.b}))},1493:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function i(t,e,r){return e=u(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,r||[],u(t).constructor):e.apply(t,r))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}t.exports=function(t){for(var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),r=e,n&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(t),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach((function(t){!function(t,e){Object.getOwnPropertyNames(e).forEach((function(r){if("constructor"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}}))}(e.prototype,t.prototype)})),e}},1496:function(t,e,r){t.exports=function(){"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function e(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function n(t){var e=r(t,"string");return"symbol"==typeof e?e:e+""}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function c(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return s(t)||f(t)||d(t)||h()}function s(t){if(Array.isArray(t))return p(t)}function f(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var m="undefined"!=typeof window&&void 0!==window.document,y=m?window:{},v=!(!m||!y.document.documentElement)&&"ontouchstart"in y.document.documentElement,g=!!m&&"PointerEvent"in y,b="cropper",w="all",_="crop",E="move",O="zoom",x="e",S="w",k="s",j="n",C="ne",L="nw",T="se",A="sw",N="".concat(b,"-crop"),P="".concat(b,"-disabled"),D="".concat(b,"-hidden"),I="".concat(b,"-hide"),R="".concat(b,"-invisible"),M="".concat(b,"-modal"),G="".concat(b,"-move"),B="".concat(b,"Action"),F="".concat(b,"Preview"),U="crop",z="move",Y="none",W="crop",H="cropend",V="cropmove",K="cropstart",q="dblclick",X=v?"touchstart":"mousedown",$=v?"touchmove":"mousemove",Q=v?"touchend touchcancel":"mouseup",Z=g?"pointerdown":X,J=g?"pointermove":$,tt=g?"pointerup pointercancel":Q,et="ready",rt="resize",nt="wheel",ot="zoom",at="image/jpeg",it=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ct=/^data:/,ut=/^data:image\/jpeg;base64,/,lt=/^img|canvas$/i,st=200,ft=100,dt={viewMode:0,dragMode:U,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:st,minContainerHeight:ft,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},pt='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ht=Number.isNaN||y.isNaN;function mt(t){return"number"==typeof t&&!ht(t)}var yt=function(t){return t>0&&t<1/0};function vt(t){return void 0===t}function gt(t){return"object"===o(t)&&null!==t}var bt=Object.prototype.hasOwnProperty;function wt(t){if(!gt(t))return!1;try{var e=t.constructor,r=e.prototype;return e&&r&&bt.call(r,"isPrototypeOf")}catch(t){return!1}}function _t(t){return"function"==typeof t}var Et=Array.prototype.slice;function Ot(t){return Array.from?Array.from(t):Et.call(t)}function xt(t,e){return t&&_t(e)&&(Array.isArray(t)||mt(t.length)?Ot(t).forEach((function(r,n){e.call(t,r,n,t)})):gt(t)&&Object.keys(t).forEach((function(r){e.call(t,t[r],r,t)}))),t}var St=Object.assign||function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return gt(t)&&r.length>0&&r.forEach((function(e){gt(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]}))})),t},kt=/\.\d*(?:0|9){12}\d*$/;function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return kt.test(t)?Math.round(t*e)/e:t}var Ct=/^width|height|left|top|marginLeft|marginTop$/;function Lt(t,e){var r=t.style;xt(e,(function(t,e){Ct.test(e)&&mt(t)&&(t="".concat(t,"px")),r[e]=t}))}function Tt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function At(t,e){if(e)if(mt(t.length))xt(t,(function(t){At(t,e)}));else if(t.classList)t.classList.add(e);else{var r=t.className.trim();r?r.indexOf(e)<0&&(t.className="".concat(r," ").concat(e)):t.className=e}}function Nt(t,e){e&&(mt(t.length)?xt(t,(function(t){Nt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Pt(t,e,r){e&&(mt(t.length)?xt(t,(function(t){Pt(t,e,r)})):r?At(t,e):Nt(t,e))}var Dt=/([a-z\d])([A-Z])/g;function It(t){return t.replace(Dt,"$1-$2").toLowerCase()}function Rt(t,e){return gt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(It(e)))}function Mt(t,e,r){gt(r)?t[e]=r:t.dataset?t.dataset[e]=r:t.setAttribute("data-".concat(It(e)),r)}function Gt(t,e){if(gt(t[e]))try{delete t[e]}catch(r){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(r){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(It(e)))}var Bt=/\s\s*/,Ft=function(){var t=!1;if(m){var e=!1,r=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});y.addEventListener("test",r,n),y.removeEventListener("test",r,n)}return t}();function Ut(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r;e.trim().split(Bt).forEach((function(e){if(!Ft){var a=t.listeners;a&&a[e]&&a[e][r]&&(o=a[e][r],delete a[e][r],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,o,n)}))}function zt(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r;e.trim().split(Bt).forEach((function(e){if(n.once&&!Ft){var a=t.listeners,i=void 0===a?{}:a;o=function(){delete i[e][r],t.removeEventListener(e,o,n);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];r.apply(t,c)},i[e]||(i[e]={}),i[e][r]&&t.removeEventListener(e,i[e][r],n),i[e][r]=o,t.listeners=i}t.addEventListener(e,o,n)}))}function Yt(t,e,r){var n;return _t(Event)&&_t(CustomEvent)?n=new CustomEvent(e,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r),t.dispatchEvent(n)}function Wt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ht=y.location,Vt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Kt(t){var e=t.match(Vt);return null!==e&&(e[1]!==Ht.protocol||e[2]!==Ht.hostname||e[3]!==Ht.port)}function qt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Xt(t){var e=t.rotate,r=t.scaleX,n=t.scaleY,o=t.translateX,a=t.translateY,i=[];mt(o)&&0!==o&&i.push("translateX(".concat(o,"px)")),mt(a)&&0!==a&&i.push("translateY(".concat(a,"px)")),mt(e)&&0!==e&&i.push("rotate(".concat(e,"deg)")),mt(r)&&1!==r&&i.push("scaleX(".concat(r,")")),mt(n)&&1!==n&&i.push("scaleY(".concat(n,")"));var c=i.length?i.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function $t(t){var r=e({},t),n=0;return xt(t,(function(t,e){delete r[e],xt(r,(function(e){var r=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),i=Math.abs(t.endY-e.endY),c=Math.sqrt(r*r+o*o),u=(Math.sqrt(a*a+i*i)-c)/c;Math.abs(u)>Math.abs(n)&&(n=u)}))})),n}function Qt(t,r){var n=t.pageX,o=t.pageY,a={endX:n,endY:o};return r?a:e({startX:n,startY:o},a)}function Zt(t){var e=0,r=0,n=0;return xt(t,(function(t){var o=t.startX,a=t.startY;e+=o,r+=a,n+=1})),{pageX:e/=n,pageY:r/=n}}function Jt(t){var e=t.aspectRatio,r=t.height,n=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=yt(n),i=yt(r);if(a&&i){var c=r*e;"contain"===o&&c>n||"cover"===o&&c<n?r=n/e:n=r*e}else a?r=n/e:i&&(n=r*e);return{width:n,height:r}}function te(t){var e=t.width,r=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:r,height:e};var o=n%90*Math.PI/180,a=Math.sin(o),i=Math.cos(o),c=e*i+r*a,u=e*a+r*i;return n>90?{width:u,height:c}:{width:c,height:u}}function ee(t,e,r,n){var o=e.aspectRatio,a=e.naturalWidth,i=e.naturalHeight,c=e.rotate,u=void 0===c?0:c,s=e.scaleX,f=void 0===s?1:s,d=e.scaleY,p=void 0===d?1:d,h=r.aspectRatio,m=r.naturalWidth,y=r.naturalHeight,v=n.fillColor,g=void 0===v?"transparent":v,b=n.imageSmoothingEnabled,w=void 0===b||b,_=n.imageSmoothingQuality,E=void 0===_?"low":_,O=n.maxWidth,x=void 0===O?1/0:O,S=n.maxHeight,k=void 0===S?1/0:S,j=n.minWidth,C=void 0===j?0:j,L=n.minHeight,T=void 0===L?0:L,A=document.createElement("canvas"),N=A.getContext("2d"),P=Jt({aspectRatio:h,width:x,height:k}),D=Jt({aspectRatio:h,width:C,height:T},"cover"),I=Math.min(P.width,Math.max(D.width,m)),R=Math.min(P.height,Math.max(D.height,y)),M=Jt({aspectRatio:o,width:x,height:k}),G=Jt({aspectRatio:o,width:C,height:T},"cover"),B=Math.min(M.width,Math.max(G.width,a)),F=Math.min(M.height,Math.max(G.height,i)),U=[-B/2,-F/2,B,F];return A.width=jt(I),A.height=jt(R),N.fillStyle=g,N.fillRect(0,0,I,R),N.save(),N.translate(I/2,R/2),N.rotate(u*Math.PI/180),N.scale(f,p),N.imageSmoothingEnabled=w,N.imageSmoothingQuality=E,N.drawImage.apply(N,[t].concat(l(U.map((function(t){return Math.floor(jt(t))}))))),N.restore(),A}var re=String.fromCharCode;function ne(t,e,r){var n="";r+=e;for(var o=e;o<r;o+=1)n+=re(t.getUint8(o));return n}var oe=/^data:.*,/;function ae(t){var e=t.replace(oe,""),r=atob(e),n=new ArrayBuffer(r.length),o=new Uint8Array(n);return xt(o,(function(t,e){o[e]=r.charCodeAt(e)})),n}function ie(t,e){for(var r=[],n=8192,o=new Uint8Array(t);o.length>0;)r.push(re.apply(null,Ot(o.subarray(0,n)))),o=o.subarray(n);return"data:".concat(e,";base64,").concat(btoa(r.join("")))}function ce(t){var e,r=new DataView(t);try{var n,o,a;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var i=r.byteLength,c=2;c+1<i;){if(255===r.getUint8(c)&&225===r.getUint8(c+1)){o=c;break}c+=1}if(o){var u=o+10;if("Exif"===ne(r,o+4,4)){var l=r.getUint16(u);if(((n=18761===l)||19789===l)&&42===r.getUint16(u+2,n)){var s=r.getUint32(u+4,n);s>=8&&(a=u+s)}}}if(a){var f,d,p=r.getUint16(a,n);for(d=0;d<p;d+=1)if(f=a+12*d+2,274===r.getUint16(f,n)){f+=8,e=r.getUint16(f,n),r.setUint16(f,1,n);break}}}catch(t){e=1}return e}function ue(t){var e=0,r=1,n=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90}return{rotate:e,scaleX:r,scaleY:n}}var le={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,r=this.container,n=this.cropper,o=Number(e.minContainerWidth),a=Number(e.minContainerHeight);At(n,D),Nt(t,D);var i={width:Math.max(r.offsetWidth,o>=0?o:st),height:Math.max(r.offsetHeight,a>=0?a:ft)};this.containerData=i,Lt(n,{width:i.width,height:i.height}),At(t,D),Nt(n,D)},initCanvas:function(){var t=this.containerData,e=this.imageData,r=this.options.viewMode,n=Math.abs(e.rotate)%180==90,o=n?e.naturalHeight:e.naturalWidth,a=n?e.naturalWidth:e.naturalHeight,i=o/a,c=t.width,u=t.height;t.height*i>t.width?3===r?c=t.height*i:u=t.width/i:3===r?u=t.width/i:c=t.height*i;var l={aspectRatio:i,naturalWidth:o,naturalHeight:a,width:c,height:u};this.canvasData=l,this.limited=1===r||2===r,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=St({},l)},limitCanvas:function(t,e){var r=this.options,n=this.containerData,o=this.canvasData,a=this.cropBoxData,i=r.viewMode,c=o.aspectRatio,u=this.cropped&&a;if(t){var l=Number(r.minCanvasWidth)||0,s=Number(r.minCanvasHeight)||0;i>1?(l=Math.max(l,n.width),s=Math.max(s,n.height),3===i&&(s*c>l?l=s*c:s=l/c)):i>0&&(l?l=Math.max(l,u?a.width:0):s?s=Math.max(s,u?a.height:0):u&&(l=a.width,(s=a.height)*c>l?l=s*c:s=l/c));var f=Jt({aspectRatio:c,width:l,height:s});l=f.width,s=f.height,o.minWidth=l,o.minHeight=s,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(i>(u?0:1)){var d=n.width-o.width,p=n.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),u&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,2===i&&(o.width>=n.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=n.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,e){var r=this.canvasData,n=this.imageData;if(e){var o=te({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=o.width,i=o.height,c=r.width*(a/r.naturalWidth),u=r.height*(i/r.naturalHeight);r.left-=(c-r.width)/2,r.top-=(u-r.height)/2,r.width=c,r.height=u,r.aspectRatio=a/i,r.naturalWidth=a,r.naturalHeight=i,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Lt(this.canvas,St({width:r.width,height:r.height},Xt({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,r=this.imageData,n=r.naturalWidth*(e.width/e.naturalWidth),o=r.naturalHeight*(e.height/e.naturalHeight);St(r,{width:n,height:o,left:(e.width-n)/2,top:(e.height-o)/2}),Lt(this.image,St({width:r.width,height:r.height},Xt(St({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};r&&(e.height*r>e.width?o.height=o.width/r:o.width=o.height*r),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=St({},o)},limitCropBox:function(t,e){var r=this.options,n=this.containerData,o=this.canvasData,a=this.cropBoxData,i=this.limited,c=r.aspectRatio;if(t){var u=Number(r.minCropBoxWidth)||0,l=Number(r.minCropBoxHeight)||0,s=i?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,f=i?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;u=Math.min(u,n.width),l=Math.min(l,n.height),c&&(u&&l?l*c>u?l=u/c:u=l*c:u?l=u/c:l&&(u=l*c),f*c>s?f=s/c:s=f*c),a.minWidth=Math.min(u,s),a.minHeight=Math.min(l,f),a.maxWidth=s,a.maxHeight=f}e&&(i?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(n.width,o.left+o.width)-a.width,a.maxTop=Math.min(n.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&Mt(this.face,B,r.width>=e.width&&r.height>=e.height?E:w),Lt(this.cropBox,St({width:r.width,height:r.height},Xt({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Yt(this.element,W,this.getData())}},se={initPreview:function(){var t=this.element,e=this.crossOrigin,r=this.options.preview,n=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=n,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,r){var i=r;"string"==typeof r?i=t.ownerDocument.querySelectorAll(r):r.querySelector&&(i=[r]),this.previews=i,xt(i,(function(t){var r=document.createElement("img");Mt(t,F,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(r.crossOrigin=e),r.src=n,r.alt=o,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(r)}))}},resetPreview:function(){xt(this.previews,(function(t){var e=Rt(t,F);Lt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Gt(t,F)}))},preview:function(){var t=this.imageData,e=this.canvasData,r=this.cropBoxData,n=r.width,o=r.height,a=t.width,i=t.height,c=r.left-e.left-t.left,u=r.top-e.top-t.top;this.cropped&&!this.disabled&&(Lt(this.viewBoxImage,St({width:a,height:i},Xt(St({translateX:-c,translateY:-u},t)))),xt(this.previews,(function(e){var r=Rt(e,F),l=r.width,s=r.height,f=l,d=s,p=1;n&&(d=o*(p=l/n)),o&&d>s&&(f=n*(p=s/o),d=s),Lt(e,{width:f,height:d}),Lt(e.getElementsByTagName("img")[0],St({width:a*p,height:i*p},Xt(St({translateX:-c*p,translateY:-u*p},t))))})))}},fe={bind:function(){var t=this.element,e=this.options,r=this.cropper;_t(e.cropstart)&&zt(t,K,e.cropstart),_t(e.cropmove)&&zt(t,V,e.cropmove),_t(e.cropend)&&zt(t,H,e.cropend),_t(e.crop)&&zt(t,W,e.crop),_t(e.zoom)&&zt(t,ot,e.zoom),zt(r,Z,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&zt(r,nt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&zt(r,q,this.onDblclick=this.dblclick.bind(this)),zt(t.ownerDocument,J,this.onCropMove=this.cropMove.bind(this)),zt(t.ownerDocument,tt,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&zt(window,rt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,r=this.cropper;_t(e.cropstart)&&Ut(t,K,e.cropstart),_t(e.cropmove)&&Ut(t,V,e.cropmove),_t(e.cropend)&&Ut(t,H,e.cropend),_t(e.crop)&&Ut(t,W,e.crop),_t(e.zoom)&&Ut(t,ot,e.zoom),Ut(r,Z,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ut(r,nt,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ut(r,q,this.onDblclick),Ut(t.ownerDocument,J,this.onCropMove),Ut(t.ownerDocument,tt,this.onCropEnd),e.responsive&&Ut(window,rt,this.onResize)}},de={resize:function(){if(!this.disabled){var t,e,r=this.options,n=this.container,o=this.containerData,a=n.offsetWidth/o.width,i=n.offsetHeight/o.height,c=Math.abs(a-1)>Math.abs(i-1)?a:i;1!==c&&(r.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),r.restore&&(this.setCanvasData(xt(t,(function(e,r){t[r]=e*c}))),this.setCropBoxData(xt(e,(function(t,r){e[r]=t*c})))))}},dblclick:function(){this.disabled||this.options.dragMode===Y||this.setDragMode(Tt(this.dragBox,N)?z:U)},wheel:function(t){var e=this,r=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*r,t)))},cropStart:function(t){var e=t.buttons,r=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(mt(e)&&1!==e||mt(r)&&0!==r||t.ctrlKey))){var n,o=this.options,a=this.pointers;t.changedTouches?xt(t.changedTouches,(function(t){a[t.identifier]=Qt(t)})):a[t.pointerId||0]=Qt(t),n=Object.keys(a).length>1&&o.zoomable&&o.zoomOnTouch?O:Rt(t.target,B),it.test(n)&&!1!==Yt(this.element,K,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===_&&(this.cropping=!0,At(this.dragBox,M)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var r=this.pointers;t.preventDefault(),!1!==Yt(this.element,V,{originalEvent:t,action:e})&&(t.changedTouches?xt(t.changedTouches,(function(t){St(r[t.identifier]||{},Qt(t,!0))})):St(r[t.pointerId||0]||{},Qt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,r=this.pointers;t.changedTouches?xt(t.changedTouches,(function(t){delete r[t.identifier]})):delete r[t.pointerId||0],e&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,Pt(this.dragBox,M,this.cropped&&this.options.modal)),Yt(this.element,H,{originalEvent:t,action:e}))}}},pe={change:function(t){var e,r=this.options,n=this.canvasData,o=this.containerData,a=this.cropBoxData,i=this.pointers,c=this.action,u=r.aspectRatio,l=a.left,s=a.top,f=a.width,d=a.height,p=l+f,h=s+d,m=0,y=0,v=o.width,g=o.height,b=!0;!u&&t.shiftKey&&(u=f&&d?f/d:1),this.limited&&(m=a.minLeft,y=a.minTop,v=m+Math.min(o.width,n.width,n.left+n.width),g=y+Math.min(o.height,n.height,n.top+n.height));var N=i[Object.keys(i)[0]],P={x:N.endX-N.startX,y:N.endY-N.startY},I=function(t){switch(t){case x:p+P.x>v&&(P.x=v-p);break;case S:l+P.x<m&&(P.x=m-l);break;case j:s+P.y<y&&(P.y=y-s);break;case k:h+P.y>g&&(P.y=g-h)}};switch(c){case w:l+=P.x,s+=P.y;break;case x:if(P.x>=0&&(p>=v||u&&(s<=y||h>=g))){b=!1;break}I(x),(f+=P.x)<0&&(c=S,l-=f=-f),u&&(d=f/u,s+=(a.height-d)/2);break;case j:if(P.y<=0&&(s<=y||u&&(l<=m||p>=v))){b=!1;break}I(j),d-=P.y,s+=P.y,d<0&&(c=k,s-=d=-d),u&&(f=d*u,l+=(a.width-f)/2);break;case S:if(P.x<=0&&(l<=m||u&&(s<=y||h>=g))){b=!1;break}I(S),f-=P.x,l+=P.x,f<0&&(c=x,l-=f=-f),u&&(d=f/u,s+=(a.height-d)/2);break;case k:if(P.y>=0&&(h>=g||u&&(l<=m||p>=v))){b=!1;break}I(k),(d+=P.y)<0&&(c=j,s-=d=-d),u&&(f=d*u,l+=(a.width-f)/2);break;case C:if(u){if(P.y<=0&&(s<=y||p>=v)){b=!1;break}I(j),d-=P.y,s+=P.y,f=d*u}else I(j),I(x),P.x>=0?p<v?f+=P.x:P.y<=0&&s<=y&&(b=!1):f+=P.x,P.y<=0?s>y&&(d-=P.y,s+=P.y):(d-=P.y,s+=P.y);f<0&&d<0?(c=A,s-=d=-d,l-=f=-f):f<0?(c=L,l-=f=-f):d<0&&(c=T,s-=d=-d);break;case L:if(u){if(P.y<=0&&(s<=y||l<=m)){b=!1;break}I(j),d-=P.y,s+=P.y,f=d*u,l+=a.width-f}else I(j),I(S),P.x<=0?l>m?(f-=P.x,l+=P.x):P.y<=0&&s<=y&&(b=!1):(f-=P.x,l+=P.x),P.y<=0?s>y&&(d-=P.y,s+=P.y):(d-=P.y,s+=P.y);f<0&&d<0?(c=T,s-=d=-d,l-=f=-f):f<0?(c=C,l-=f=-f):d<0&&(c=A,s-=d=-d);break;case A:if(u){if(P.x<=0&&(l<=m||h>=g)){b=!1;break}I(S),f-=P.x,l+=P.x,d=f/u}else I(k),I(S),P.x<=0?l>m?(f-=P.x,l+=P.x):P.y>=0&&h>=g&&(b=!1):(f-=P.x,l+=P.x),P.y>=0?h<g&&(d+=P.y):d+=P.y;f<0&&d<0?(c=C,s-=d=-d,l-=f=-f):f<0?(c=T,l-=f=-f):d<0&&(c=L,s-=d=-d);break;case T:if(u){if(P.x>=0&&(p>=v||h>=g)){b=!1;break}I(x),d=(f+=P.x)/u}else I(k),I(x),P.x>=0?p<v?f+=P.x:P.y>=0&&h>=g&&(b=!1):f+=P.x,P.y>=0?h<g&&(d+=P.y):d+=P.y;f<0&&d<0?(c=L,s-=d=-d,l-=f=-f):f<0?(c=A,l-=f=-f):d<0&&(c=C,s-=d=-d);break;case E:this.move(P.x,P.y),b=!1;break;case O:this.zoom($t(i),t),b=!1;break;case _:if(!P.x||!P.y){b=!1;break}e=Wt(this.cropper),l=N.startX-e.left,s=N.startY-e.top,f=a.minWidth,d=a.minHeight,P.x>0?c=P.y>0?T:C:P.x<0&&(l-=f,c=P.y>0?A:L),P.y<0&&(s-=d),this.cropped||(Nt(this.cropBox,D),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(a.width=f,a.height=d,a.left=l,a.top=s,this.action=c,this.renderCropBox()),xt(i,(function(t){t.startX=t.endX,t.startY=t.endY}))}},he={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&At(this.dragBox,M),Nt(this.cropBox,D),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=St({},this.initialImageData),this.canvasData=St({},this.initialCanvasData),this.cropBoxData=St({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(St(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Nt(this.dragBox,M),At(this.cropBox,D)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,xt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Nt(this.cropper,P)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,At(this.cropper,P)),this},destroy:function(){var t=this.element;return t[b]?(t[b]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=r.left,o=r.top;return this.moveTo(vt(t)?t:n+Number(t),vt(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(mt(t)&&(r.left=t,n=!0),mt(e)&&(r.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var r=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(r.width*t/r.naturalWidth,null,e)},zoomTo:function(t,e,r){var n=this.options,o=this.canvasData,a=o.width,i=o.height,c=o.naturalWidth,u=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var l=c*t,s=u*t;if(!1===Yt(this.element,ot,{ratio:t,oldRatio:a/c,originalEvent:r}))return this;if(r){var f=this.pointers,d=Wt(this.cropper),p=f&&Object.keys(f).length?Zt(f):{pageX:r.pageX,pageY:r.pageY};o.left-=(l-a)*((p.pageX-d.left-o.left)/a),o.top-=(s-i)*((p.pageY-d.top-o.top)/i)}else wt(e)&&mt(e.x)&&mt(e.y)?(o.left-=(l-a)*((e.x-o.left)/a),o.top-=(s-i)*((e.y-o.top)/i)):(o.left-=(l-a)/2,o.top-=(s-i)/2);o.width=l,o.height=s,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return mt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,mt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(mt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(mt(t)&&(r.scaleX=t,n=!0),mt(e)&&(r.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.options,n=this.imageData,o=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-o.left,y:a.top-o.top,width:a.width,height:a.height};var i=n.width/n.naturalWidth;if(xt(t,(function(e,r){t[r]=e/i})),e){var c=Math.round(t.y+t.height),u=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=u-t.x,t.height=c-t.y}}else t={x:0,y:0,width:0,height:0};return r.rotatable&&(t.rotate=n.rotate||0),r.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,r=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&wt(t)){var a=!1;e.rotatable&&mt(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,a=!0),e.scalable&&(mt(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,a=!0),mt(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var i=r.width/r.naturalWidth;mt(t.x)&&(o.left=t.x*i+n.left),mt(t.y)&&(o.top=t.y*i+n.top),mt(t.width)&&(o.width=t.width*i),mt(t.height)&&(o.height=t.height*i),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?St({},this.containerData):{}},getImageData:function(){return this.sized?St({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&xt(["left","top","width","height","naturalWidth","naturalHeight"],(function(r){e[r]=t[r]})),e},setCanvasData:function(t){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&wt(t)&&(mt(t.left)&&(e.left=t.left),mt(t.top)&&(e.top=t.top),mt(t.width)?(e.width=t.width,e.height=t.width/r):mt(t.height)&&(e.height=t.height,e.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,r,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&wt(t)&&(mt(t.left)&&(n.left=t.left),mt(t.top)&&(n.top=t.top),mt(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),mt(t.height)&&t.height!==n.height&&(r=!0,n.height=t.height),o&&(e?n.height=n.width/o:r&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=ee(this.image,this.imageData,e,t);if(!this.cropped)return r;var n=this.getData(t.rounded),o=n.x,a=n.y,i=n.width,c=n.height,u=r.width/Math.floor(e.naturalWidth);1!==u&&(o*=u,a*=u,i*=u,c*=u);var s=i/c,f=Jt({aspectRatio:s,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=Jt({aspectRatio:s,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=Jt({aspectRatio:s,width:t.width||(1!==u?r.width:i),height:t.height||(1!==u?r.height:c)}),h=p.width,m=p.height;h=Math.min(f.width,Math.max(d.width,h)),m=Math.min(f.height,Math.max(d.height,m));var y=document.createElement("canvas"),v=y.getContext("2d");y.width=jt(h),y.height=jt(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,h,m);var g=t.imageSmoothingEnabled,b=void 0===g||g,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var _,E,O,x,S,k,j=r.width,C=r.height,L=o,T=a;L<=-i||L>j?(L=0,_=0,O=0,S=0):L<=0?(O=-L,L=0,S=_=Math.min(j,i+L)):L<=j&&(O=0,S=_=Math.min(i,j-L)),_<=0||T<=-c||T>C?(T=0,E=0,x=0,k=0):T<=0?(x=-T,T=0,k=E=Math.min(C,c+T)):T<=C&&(x=0,k=E=Math.min(c,C-T));var A=[L,T,_,E];if(S>0&&k>0){var N=h/i;A.push(O*N,x*N,S*N,k*N)}return v.drawImage.apply(v,[r].concat(l(A.map((function(t){return Math.floor(jt(t))}))))),y},setAspectRatio:function(t){var e=this.options;return this.disabled||vt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,r=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o=t===U,a=e.movable&&t===z;t=o||a?t:Y,e.dragMode=t,Mt(r,B,t),Pt(r,N,o),Pt(r,G,a),e.cropBoxMovable||(Mt(n,B,t),Pt(n,N,o),Pt(n,G,a))}return this}},me=y.Cropper,ye=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e||!lt.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=St({},dt,wt(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return c(t,[{key:"init",value:function(){var t,e=this.element,r=e.tagName.toLowerCase();if(!e[b]){if(e[b]=this,"img"===r){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===r&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var r=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(ct.test(t))ut.test(t)?this.read(ae(t)):this.clone();else{var o=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=a,o.onerror=a,o.ontimeout=a,o.onprogress=function(){o.getResponseHeader("content-type")!==at&&o.abort()},o.onload=function(){e.read(o.response)},o.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Kt(t)&&r.crossOrigin&&(t=qt(t)),o.open("GET",t,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===r.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,r=this.imageData,n=ce(t),o=0,a=1,i=1;if(n>1){this.url=ie(t,at);var c=ue(n);o=c.rotate,a=c.scaleX,i=c.scaleY}e.rotatable&&(r.rotate=o),e.scalable&&(r.scaleX=a,r.scaleY=i),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,r=t.crossOrigin,n=e;this.options.checkCrossOrigin&&Kt(e)&&(r||(r="anonymous"),n=qt(e)),this.crossOrigin=r,this.crossOriginUrl=n;var o=document.createElement("img");r&&(o.crossOrigin=r),o.src=n||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),At(o,I),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var r=y.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(y.navigator.userAgent),n=function(e,r){St(t.imageData,{naturalWidth:e,naturalHeight:r,aspectRatio:e/r}),t.initialImageData=St({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||r){var o=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),r||a.removeChild(o)},o.src=e.src,r||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,r=this.image,n=t.parentNode,o=document.createElement("div");o.innerHTML=pt;var a=o.querySelector(".".concat(b,"-container")),i=a.querySelector(".".concat(b,"-canvas")),c=a.querySelector(".".concat(b,"-drag-box")),u=a.querySelector(".".concat(b,"-crop-box")),l=u.querySelector(".".concat(b,"-face"));this.container=n,this.cropper=a,this.canvas=i,this.dragBox=c,this.cropBox=u,this.viewBox=a.querySelector(".".concat(b,"-view-box")),this.face=l,i.appendChild(r),At(t,D),n.insertBefore(a,t.nextSibling),Nt(r,I),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,At(u,D),e.guides||At(u.getElementsByClassName("".concat(b,"-dashed")),D),e.center||At(u.getElementsByClassName("".concat(b,"-center")),D),e.background&&At(a,"".concat(b,"-bg")),e.highlight||At(l,R),e.cropBoxMovable&&(At(l,G),Mt(l,B,w)),e.cropBoxResizable||(At(u.getElementsByClassName("".concat(b,"-line")),D),At(u.getElementsByClassName("".concat(b,"-point")),D)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),_t(e.ready)&&zt(t,et,e.ready,{once:!0}),Yt(t,et)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Nt(this.element,D)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=me,t}},{key:"setDefaults",value:function(t){St(dt,wt(t)&&t)}}])}();return St(ye.prototype,le,se,fe,de,pe,he),ye}()},150:function(t,e,r){t.exports=r(253)},1518:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={TEMPLATE_USAGE:"c100045.d210978"}},1541:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=r(0);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new N(n||[]);return i(a,"_invoke",{value:C(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,u,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,u)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(a,i,c,u){var l=p(t[a],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return w.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),f(j.prototype,l,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),f(S,s,"Generator"),f(S,u,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=u(Object(n.useState)(t),2),r=e[0],o=e[1];return[r,function(t){return c(a().mark((function e(){var r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,t.apply(void 0,r);case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,o(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})))}]}},1550:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1551:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1552:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1553:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1554:function(t,e,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},i=r(22),c=function(t,e){return o.createElement(i.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:a}))},u=o.forwardRef(c);e.a=u},1634:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-check",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M210.827 55.428c3.906-3.905 10.237-3.905 14.143 0 3.834 3.834 3.904 10.007.209 13.927l-.21.215-124 124c-3.834 3.834-10.007 3.904-13.926.21l-.216-.21-55.708-55.708c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.835 10.008-3.904 13.927-.21l.215.21 48.637 48.636 116.93-116.928Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{d:"M0 0h256v256H0z"})))},1642:function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||r.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},1646:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-close",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},1816:function(t,e,r){var n=r(210),o=r(243),a=r(570),i=r(387);t.exports=function(t,e){if(null==t)return{};var r=n(i(t),(function(t){return[t]}));return e=o(e),a(t,r,(function(t,r){return e(t,r[0])}))}},309:function(t,e,r){"use strict";r(3152);var n=r(1254);r(701);e.a=n.a},3677:function(t,e,r){var n=r(189),o=r(103);t.exports=function(t){return o(t)&&n(t)}},3785:function(t,e,r){"use strict";r.d(e,"c",(function(){return h})),r.d(e,"b",(function(){return m})),r.d(e,"a",(function(){return y}));var n=r(14),o=r.n(n),a=r(54),i=r(1249),c=r.n(i),u=r(149),l=r(803);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h={daily:"daily",weekly:"weekly",vote:"vote",default:"default",punchIn:"punchIn"},m=p(p(p(p({},h.default,{typeName:__("基础模板"),description:__("适用于自定义内容的话题"),title:"",content:"<!doctype lake><p></p>",type:h.default}),h.daily,{typeName:__("日报模板"),description:__("适用于团队日报的收集"),title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>',type:h.daily}),h.weekly,{typeName:__("周报模板"),description:__("适用于团队周报的收集"),title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>',type:h.weekly}),h.vote,{typeName:__("投票模板"),description:__("适用于需要投票的内容"),title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>',type:h.vote}),y=20,v={},g={archive:{startday:[{value:"0",title:__("当天")},{value:"1",title:__("一天后")},{value:"2",title:__("两天后")},{value:"7",title:__("一周后")},{value:"14",title:__("两周后")},{value:"31",title:__("一个月后")}]},create:{cycle:[{value:"daily",title:__("每天")},{value:"weekly",title:__("每周")},{value:"fortnightly",title:__("每双周")},{value:"monthly",title:__("每月")}],day:["",__("星期一"),__("星期二"),__("星期三"),__("星期四"),__("星期五"),__("星期六"),__("星期日")]}};v.archiveScheduleToText=function(t){if(!t)return"";var e=g.archive.startday.find((function(e){return e.value==="".concat(t.startday)}));return t.next_task_execute_time?__("{next_time} 自动归档",{next_time:c.a.format(t.next_task_execute_time)}):__("{day} {time} 自动归档",{day:e.title,time:t.time})},v.createScheduleToText=function(t){if(!t)return"";var e=g.create.cycle.find((function(e){return e.value==="".concat(t.cycle)})).title,r=null;if("daily"===t.cycle)5===t.weekdays.length?(e=__("每周一到周五"),r=""):(e=__("每天"),r="");else if("monthly"===t.cycle)r=t.monthdays.map((function(t){return 32===t?__("最后一天"):"".concat(t,"号")})).join(", ");else{r=t.weekdays.map((function(t){return g.create.day[t]})).join(", ")}return t.next_task_execute_time?__("{cycle} {day} {time} 自动发起，下一次执行时间：{next_time}",{cycle:e,day:r,time:t.time,next_time:c.a.format(t.next_task_execute_time)}):__("{cycle} {day} {time} 自动发起",{cycle:e,day:r,time:t.time})},v.isScheduleOrigin=function(t,e){return 0!==e.length&&e[0].object_id===t.id},v.adaptScheduleConfigs=function(t){var e={};return t&&t.forEach((function(t){e[t.type]=t.config})),e},v.normalizeSelectedUsers=function(t,e){var r={};(e=e||[]).forEach((function(t){r[t.id]=t}));var n=[],o=t;return Array.isArray(t)||(o=[t]),o.forEach((function(t){t.user&&(t.id=t.user.id),r[t.id]||n.push(t)})),n},v.mergeUsersToCollaborators=function(t,e){var r=f(t);return e.forEach((function(e){e.user&&(e.id=e.user.id),t.find((function(t){return t.user&&(t.id=t.user.id),e.id?e.id===t.id:e.user_id?e.user_id===t.user_id:e.provider_userid?e.provider_userid===t.provider_userid:!!e.workid&&e.workid===t.workid}))||r.push(e)})),r},v.isDepartment=function(t){return t.department||"Department"===t.type},v.adaptDepartment=function(t){return(Array.isArray(t)?t:[t]).forEach((function(t){v.isDepartment(t)&&(t.department=t.department||t)})),t},v.mergeDeptToCollaborators=function(t,e){if(l.a.isYuqueAddressBook())return t.push(e),t;var r=t.filter((function(t){return!v.isDepartment(t)}));return r.push(e),r},v.mergeDepartmentUsersToParticipants=function(t,e){var r=t.filter((function(t){return!t.department}));return v.mergeUsersToCollaborators(r,e)},v.adaptCollaboratorsToCreateRequest=function(t){var e=[],r=[],n=null,o=l.a.isYuqueAddressBook();t.forEach((function(t){v.isDepartment(t)?o?e.push(t.department.id):n=t.department:(t.user&&(t.user_id=t.user.id),r.push(t))}));var a={};return n&&(a.department_id=n.id),r.length>0&&(a.users=r),e.length&&(a.department_ids=e),a},v.adaptRequestForQueryUserPosts=function(t){var e=t.participants,r=t.period,n=[],o=null;e.forEach((function(t){v.isDepartment(t)?o=t.department:t.user_id?n.push(t.user_id):t.user?n.push(t.user.id):t.id&&n.push(t.id)}));var a=v.adaptPeriod(r,"YYYY-MM-DD");return{department_id:o?o.id:null,user_ids:n.length>0?n:null,start_time:a.start_time,end_time:a.end_time}},v.getParticipants=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||0===t.length)return[e];var n=f(t);return r&&(n=n.reverse()),window.appData.isYuque&&(n=n&&n.filter((function(t){return t.status!==a.STATUS.terminated}))),t.find((function(t){return t.id===e.id}))||n.push(e),n},v.getAbsentUsers=function(t,e){var r=[];return t.forEach((function(t){e.find((function(e){return t.id===e.id||t.name===e.name}))||r.push(t)})),r},v.adaptPeriod=function(t,e){var r={day:o()().startOf("day"),yesterday:o()().startOf("day").subtract(1,"day"),week:o()().startOf("isoWeek"),last_week:o()().startOf("isoWeek").subtract(7,"day"),month:o()().startOf("month")},n=null,a=null;switch(t){case"today":n=r.day,a=null;break;case"yesterday":n=r.yesterday,a=r.day;break;case"week":n=r.week,a=null;break;case"last_week":n=r.last_week,a=r.week;break;case"month":n=r.month,a=null}return e&&(n=n?n.format(e):null,a=a?a.format(e):null),{start_time:n,end_time:a}},v.isThreadRepo=function(t){return"Thread"===(null==t?void 0:t.type)},v.isCycleThreadRepo=function(t){return(null==t?void 0:t.scene)===u.ThreadScene.cycle||(null==t?void 0:t.scene)===u.ThreadScene.punchIn},v.isPunchInThreadRepo=function(t){return(null==t?void 0:t.scene)===u.ThreadScene.punchIn},v.generatePunchInDataTemplate=function(t,e){var r=o()(t),n=o()(e),a=n.diff(r,"day"),i=Array.from({length:a},(function(t,e){return{date:r.add(e,"day").startOf("D").toDate()}}));return i.push({date:n.startOf("D").toDate()}),i},v.fillPunchInDataToTemplate=function(t,e){return e?t?(e.forEach((function(e){var r=t.find((function(t){return o()(t.date).isSame(o()(e.created_at),"day")}));r&&(r.mood=e.mood,r.checked=!0,r.slug=e.slug)})),t):[]:t},e.d=v},3791:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));r(227);var n=r(101),o=r(0),a=r.n(o),i=r(10),c=r(63),u=r(184),l=r(242),s=r(216),f=["group","size","placement","getPopupContainer"];function d(){return d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d.apply(null,arguments)}var p=function(t){var e,r,o,s=t.group,p=t.size,h=t.placement,m=t.getPopupContainer,y=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,f);h=h||"top",p=p||14;var v=(null===(e=window.appData)||void 0===e?void 0:e.organization)||(null===(r=window.appData)||void 0===r?void 0:r.currentOrganization)||s.organization||{id:s.organization_id},g=Object(u.c)({type:"group",target:s,group:s,org:v}),b=Object(u.d)({privacy:g,type:"group",organization:v,group:s});return a.a.createElement(n.a,{title:a.a.createElement("span",null,b,!Object(l.h)(s)&&(null===(o=s.abilities)||void 0===o?void 0:o.manage)&&a.a.createElement("a",{onClick:function(t){t.stopPropagation(),window.open("/".concat(s.login,"/settings/permission"))},style:{marginLeft:12}},__("切换公开性"))),getPopupContainer:m,placement:h},a.a.createElement("span",{className:"name-lock"},a.a.createElement(c.b,d({},y,{name:g!==i.PRIVACY.private?"icon-public":(null==s||s.extend_private,i.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:p,height:p}))))},h=function(t){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"group-access-scope"})}},a.a.createElement(p,t))}},3812:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));var n=r(0),o=r(486),a=r(216),i=function(t){var e=t.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):e().then((function(t){return r.current=t,r.current})).catch((function(t){return console.error(t.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var l=p(t[o],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),f(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),f(S,s,"Generator"),f(S,i,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function y(t){var e=t.loader,r=t.name,u=h(o.a.useModal(),2),s=u[0],d=u[1],m=i({loader:e}),y=function(){var t,e=(t=l().mark((function t(e,o){var i,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:if(i=t.sent){t.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),t.abrupt("return");case 6:return u=new Promise((function(t){var r=s.info({}),u=function(){var t,n;r.destroy(),null==e||null===(t=e.onClose)||void 0===t||t.call(e),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},l=f(f({},e),{},{onSelect:function(e){t(e),u()},onClose:function(){t(void 0),u()}});r.update(f(f({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(a.a,null,n.createElement(i,l))}))})),t.next=9,u;case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){p(a,n,o,i,c,"next",t)}function c(t){p(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return{loadSelector:function(){return m()},showSelector:y,contextHolder:d}}},3980:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__=e},(e=[{key:"_stringify",value:function(t){return null==t||"number"==typeof t&&isNaN(t)?t="":"string"!=typeof t&&(t=String(t)),t}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.BaseValidatorClass=i},3996:function(t,e,r){"use strict";e.a={contentArea:"index-module_contentArea_0xSfa",switchTitle:"index-module_switchTitle_qW8aM",switchButton:"index-module_switchButton_xHUSN",tip:"index-module_tip_eCtT0"}},4006:function(t,e,r){"use strict";var n=r(64),o=r.n(n),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(t,e,r){return e=e||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[t]||o.a.FORMAT.LAKE}};e.a=a},4013:function(t,e,r){"use strict";var n=r(0),o=r.n(n),a=r(6),i=r.n(a),c=r(5),u=r.n(c),l=r(1459),s=r(242),f=r(3791),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",h="index-module_groupNameScope_qP0XF",m=function(t){var e=t.group,r=t.size,n=t.nameStyleCls,a=t.linkStyleCls,i=t.showName,c=void 0===i||i,m=t.isLink,y=void 0===m||m,v=t.iconSize,g=t.radius,b=Object(s.e)(e)||Object(s.h)(e),w=c?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(e.login),title:e.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},e.name),b&&o.a.createElement("span",{className:u()(h,"group-name-scope")},o.a.createElement(f.a,{group:e,size:16}))):null;return!y&&w&&(w=o.a.createElement("span",{title:e.name,className:u()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:u()(p,"group-name-text")},e.name),b&&o.a.createElement("span",{className:u()(h,"group-name-scope")},o.a.createElement(f.a,{group:e,size:16})))),o.a.createElement(o.a.Fragment,null,y?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(e.login),title:e.name,className:a},o.a.createElement(l.a,{group:e,size:r,iconSize:v,radius:g})):o.a.createElement(l.a,{group:e,size:r,iconSize:v,radius:g}),w)};m.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string,iconSize:i.a.number,radius:i.a.number};e.a=m},4016:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=r(1030),c=r(425),u=r(1493),l=r(3980).BaseValidatorClass,s=r(4050).MobileValidatorClass,f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,d=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"httpURL",value:function(t){t=this._stringify(t);try{var e=new URL(t);if("https:"!==e.protocol&&"http:"!==e.protocol)throw new Error("protocol error")}catch(t){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(t){if(!(t=this._stringify(t))||!i.isAlphanumeric(t))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("必须都是数字字符")}},{key:"decimal",value:function(t){if(!(t=this._stringify(t))||!i.isDecimal(t))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(t,e){if("string"!=typeof t)return this.__("必须是字符串");if(!i.isNumeric(t))return this.__("必须都是数字字符");var r=e&&e.min||4;return t.length<r?this.__("至少 {s} 个数字",{s:r}):void 0}},{key:"IP",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(t){if(!(t=this._stringify(t))||!i.isIP(t,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("public 参数只允许是 0、1 或者 2");t=parseInt(t)}var e=c.book.PUBLIC;if(t!==e.public&&t!==e.private&&t!==e.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(t){if(t){var e=["Book","Design"];return e.includes(t)?void 0:this.__("type 参数只允许为 {s}",{s:e.join(", ")})}}},{key:"searchPage250",value:function(t){if("number"!=typeof t){if(!(t=this._stringify(t))||!i.isNumeric(t))return this.__("只允许是正整数并且要小于等于 250");t=parseInt(t)}if(t<1||t>250||isNaN(t))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(t){return t=this._stringify(t),i.isEmail(t)}},{key:"isUser",value:function(t){return t=this._stringify(t),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(t)}},{key:"isoDate",value:function(t){if(!t||!f.test(t))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(t){t=this._stringify(t);var e=this.__("请输入正确的 URL 地址");if(!t)return e;if(!/^\//.test(t)){if(/^\s*javascript:\/\//i.test(t))return e;try{new URL(t)}catch(t){return e}}}},{key:"stringArr",value:function(t,e){if(t&&e.values&&(t=t.split(",").map((function(t){return t.trim()})),t.some((function(t){return!e.values.includes(t)}))))return this.__("必须是 {type} 其中的值",{type:e.values.join("、")})}}],e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),p=u.apply(void 0,[l].concat([s,d]));e.Validator=p,"undefined"!=typeof window&&"function"==typeof window.__&&(e.validator=new p(window.__))},4045:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));r(701);var n=r(309),o=r(0),a=r.n(o),i=r(3676),c=r(464),u=r(10),l=r(208),s=r(3996);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==f(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(f(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function p(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var h=function(t){var e=t.checked,r=t.organization,o=t.onChangePermission,f=a.a.useMemo((function(){var t=null!=r&&r.id?c.a.ORG:c.a.PERSON;return Object(l.a)()?t:c.a.INTERNAL}),[r]),h=function(){var t,e=(t=d().mark((function t(e){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e?f===c.a.PERSON?u.PRIVACY.public:u.PRIVACY.intranet:u.PRIVACY.private,o(r);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){p(a,n,o,i,c,"next",t)}function c(t){p(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:s.a.contentArea},a.a.createElement("span",{className:s.a.switchTitle},i.p[f]),a.a.createElement("div",{className:s.a.switchButton},a.a.createElement(n.a,{size:"small",onChange:h,checked:e}))))}},4050:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var i=r(1493),c=r(3980).BaseValidatorClass,u=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,l=/^\+[1-9]\d{0,2}? \d{1,20}$/,s=/^\+86 /,f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"chinaMobilePhone",value:function(t){if(!(t=this._stringify(t))||!u.test(t))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(t){return(t=this._stringify(t))&&l.test(t)?s.test(t)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)}},{key:"mobilePhoneForNonChinese",value:function(t){if(this.globalMobilePhone(t))return s.test(t)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(t)?this.__("必须是合法的手机号码"):void 0}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.MobileValidatorClass=f,e.chinaMobilePhoneRE=u,e.globalMobilePhoneRE=l,e.MobileValidator=i.apply(void 0,[c].concat([f]))},4060:function(t,e,r){"use strict";r(188);var n=r(32),o=r(0),a=r.n(o),i=r(6),c=r.n(i),u=r(211),l=r.n(u),s=r(1339),f=r(242),d=r(1337),p=r(4013),h=r(4099),m="index-module_name_2g47z";function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var g=n.a.Option;function b(t){var e,r=t.current,i=t.disabled,c=t.groups,u=t.orgs,v=t.placeholder,b=t.size,w=t.loading,_=Object(f.h)()?__("知识小组"):__("团队"),E=y(Object(o.useState)(!1),2),O=E[0],x=E[1];function S(t,e){var r=e.type;return"User"===(null==e?void 0:e.type)&&(r="Group"),t.type===r&&t.id===e.id}function k(){x(!0)}return a.a.createElement("div",{className:"group-selector ".concat(t.className||""),"data-testid":"group-selector"},a.a.createElement(n.a,{size:b,showSearch:!0,disabled:i,loading:w,getPopupContainer:function(t){return t.parentNode},placeholder:v,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.h)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{onClick:k},__("新建")),groupTitle:_}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{onClick:k},__("新建")),groupTitle:_}))),value:r&&(e=r,null!=e&&e.id?"".concat("isNewOrg"in e?"organization":"group","-").concat(null==e?void 0:e.id):null),onChange:function(e,r){var n;(null!=c&&c.length||null!=u&&u.length)&&(null!=r&&null!==(n=r.value)&&void 0!==n&&n.startsWith("organization")&&(r.target.type="Organization"),t.onChange&&t.onChange(r.target))},filterOption:function(t,e){if(!e.target)return!1;var r=e.target,n=r.login,o=r.name,a=t.toLowerCase();return n.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0},placement:"bottomLeft"},c&&c.length?l()(c,"id").map((function(t){return a.a.createElement(g,{"data-testid":"group-selector-".concat(t.login),key:"group-".concat(t.id),value:"group-".concat(t.id),target:t,title:t.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(p.a,{organization:t.organization,group:t,size:24,showCard:!1,nameStyleCls:m,isLink:!1})),S(r,t)&&a.a.createElement(s.default,null))})):null,null!=u&&u.length?u.map((function(t){return a.a.createElement(g,{key:"organization-".concat(t.id),value:"organization-".concat(t.id),title:t.name,target:t},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.g,{className:"group-selector-org-icon",src:t.logo||t.logo_url,size:24,radius:"2px"}),a.a.createElement(d.h,{organization:t,className:"group-selector-org-name"})),S(r,t)&&a.a.createElement(s.default,null))})):null),a.a.createElement(h.default,{isModalVisible:O,handleCancel:function(){x(!1)}}))}b.defaultProps={size:"middle",placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.h)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},b.propTypes={groups:c.a.arrayOf(c.a.object),current:c.a.shape({login:c.a.string,name:c.a.string}),onChange:c.a.func,className:c.a.string,placeholder:c.a.string,disabled:c.a.bool,size:c.a.string};e.a=b},4075:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(3812),o=function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(1471)]).then(r.bind(null,4407)).then((function(t){return t.default}))};function a(){var t=Object(n.a)({loader:o,name:"TemplateSelector"}),e=t.loadSelector,r=t.showSelector;return{loadTemplateSelector:e,showTemplateSelector:function(t){return r(t,{width:t.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:t.contextHolder}}},4076:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"f",(function(){return s})),r.d(e,"g",(function(){return d})),r.d(e,"e",(function(){return h})),r.d(e,"d",(function(){return y})),r.d(e,"c",(function(){return g})),r.d(e,"b",(function(){return w}));var n=r(1);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new N(n||[]);return i(a,"_invoke",{value:C(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,u,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,u)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(a,i,c,u){var l=p(t[a],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return w.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),f(j.prototype,l,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),f(S,s,"Generator"),f(S,u,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function i(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function u(t){return l.apply(this,arguments)}function l(){return l=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",t.abrupt("return",n.put("/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",e,r));case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function s(t){return f.apply(this,arguments)}function f(){return f=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",t.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",e,r));case 3:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function d(t){return p.apply(this,arguments)}function p(){return p=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",t.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",e,r));case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return m=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",t.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",e,r));case 3:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function y(t){return v.apply(this,arguments)}function v(){return v=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",t.abrupt("return",n.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",e,r));case 3:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",t.abrupt("return",n.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",e,r));case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function w(t){return _.apply(this,arguments)}function _(){return _=c(a().mark((function t(e){var r,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",t.abrupt("return",n.delete("/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",e,r));case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}},4099:function(t,e,r){"use strict";r.r(e);r(48);var n=r(11),o=(r(67),r(31)),a=(r(53),r(12)),i=(r(40),r(9)),c=(r(134),r(21)),u=r(0),l=r.n(u),s=r(6),f=r.n(s),d=r(1816),p=r.n(d),h=r(3741),m=r.n(h),y=r(1635),v=r(3981),g=r(473),b=r(3964),w=r(3965),_=r(3966),E=b.a.LiteSearchSelector,O=function(t){var e,r,n={type:t.type,me:t.me},o=Object(u.useMemo)((function(){return w.a.create(n)}),[n]);return null!==(e=t.organization)&&void 0!==e&&e.id&&(r=l.a.createElement(_.a,null)),l.a.createElement(E,{type:t.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:o.searchUser,getDefaultUsers:t.getDefaultUsers||o.searchUsersByIds,checkValid:o.checkValid,onChange:t.onChange,initialValues:t.initialValues,notFoundContent:r})};O.propTypes={type:f.a.string,onChange:f.a.func,initialValues:f.a.array,getDefaultUsers:f.a.func};var x=Object(g.d)((function(t){return{organization:t.organization,me:t.me}}))(O),S=r(47),k=r(4045),j=r(10),C=r(3650),L=r(139),T=r(4101),A=r(323),N={newGroupModal:"index-module_newGroupModal_An+Qw",title:"index-module_title_gTevv",titleDesc:"index-module_titleDesc_EmDkC",newGroupModalContent:"index-module_newGroupModalContent_LFB42",nameWrapper:"index-module_nameWrapper_OFOD6",avatarGroup:"index-module_avatarGroup_olnac",addMember:"index-module_addMember_i0kI8",addMemberBtn:"index-module_addMemberBtn_nvC2a",btnText:"index-module_btnText_6V0fp",submitBtn:"index-module_submitBtn_ZJkHv"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){R(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function R(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(){G=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==P(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(P(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function B(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){B(a,n,o,i,c,"next",t)}function c(t){B(a,n,o,i,c,"throw",t)}i(void 0)}))}}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){if(t){if("string"==typeof t)return Y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var W=c.a.Item,H=function(t){var e=t.isModalVisible,r=t.handleCancel,s=t.organization,f=t.isAntDingTalkDesktopApp,d=U(Object(u.useState)(),2),h=d[0],g=d[1],b=U(Object(u.useState)(!0),2),w=b[0],_=b[1],E=U(Object(u.useState)(!1),2),O=E[0],P=E[1],D=U(Object(u.useState)(!1),2),I=D[0],R=D[1],B=U(Object(u.useState)([]),2),z=B[0],Y=B[1],H=U(Object(u.useState)(j.PRIVACY.private),2),V=H[0],K=H[1],q=Object(u.useRef)(),X=Object(u.useRef)(null),$=Object(u.useMemo)((function(){return z.map((function(t){return t.user_id||t.id}))}),[z]);Object(u.useEffect)((function(){var t;null===(t=q.current)||void 0===t||t.focus()}),[]);var Q=U(c.a.useForm(),1)[0],Z=function(t){t&&t.preventDefault(),R((function(t){return!t}))};function J(){return(J=F(G().mark((function e(r){var o,a,i,c,u,l,d,m,y;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),P(!0),o=Q.getFieldsValue(),z&&(o.members=z),a={name:h,description:o.description,avatar:o.avatar,public:V,scene:o.scene||L.d[0]},null!=s&&s.id&&(a.organization_id=s.id),e.prev=6,e.next=9,S.a.groups.createGroup(a);case 9:if(i=e.sent){if(o.members)try{l=null===(u=o.members.find(C.a.isDepartment))||void 0===u?void 0:u.id,d=o.members.filter((function(t){return!C.a.isDepartment(t)})),m=p()({group_id:i.id,role:1,users:C.a.serializeUserPostBody(d),department_id:l}),S.a.groupUsers.create(m)}catch(t){n.a.error(t.message)}y="/".concat(i.login),f?window.open(y):(n.a.success(__("新建成功"),1e3),window.location.href=y),null===(c=t.handleSuccess)||void 0===c||c.call(t)}return P(!1),e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(6),P(!1);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var tt=Object(u.useCallback)(F(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",z);case 1:case"end":return t.stop()}}),t)}))),[z]),et=function(){var e=F(G().mark((function e(r){var n,o,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=X&&X.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X.current.searchSelectorBiz.getRealUsers(r);case 4:n=e.sent,o=t.me,a=o.user_id||o.id,i=n.filter((function(t){return(t.user_id||t.id)!==a})),Y((function(t){var e=t.findIndex(C.a.isDepartment);return[e,i.findIndex(C.a.isDepartment)].every((function(t){return t>-1}))&&t.splice(e,1),m()([].concat(M(t),M(i)),(function(t){return t.user_id||t.id}))})),Z();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:N.newGroupModal,title:l.a.createElement("div",{className:N.title},l.a.createElement("p",null,__("新建团队")),l.a.createElement("p",{className:N.titleDesc},__("和成员一起进行项目协作和知识管理"))),width:432,visible:e,onCancel:r,footer:[l.a.createElement(i.a,{className:N.submitBtn,key:"submit",type:"primary",disabled:w,loading:O,onClick:function(t){return J.apply(this,arguments)}},__("新建"))]},l.a.createElement("div",{className:N.newGroupModalContent},l.a.createElement(c.a,{form:Q,layout:"vertical",onValuesChange:function(t){Q.setFieldsValue(t)}},l.a.createElement(W,{name:"name",colon:!1,label:__("基本信息")},l.a.createElement("div",{className:N.nameWrapper},l.a.createElement(W,{noStyle:!0,shouldUpdate:function(t,e){return t.scene!==e.scene||t.avatar!==e.avatar}},(function(t){var e=t.getFieldValue;return l.a.createElement(A.a,{mr:8,component:T.a,componentProps:{getFieldValue:e}})})),l.a.createElement(a.a,{type:"text",autoComplete:"off",maxLength:36,placeholder:__("团队名称"),onChange:function(t){g(t.target.value),t.target.value.trim()?_(!1):_(!0)},ref:q}))),l.a.createElement(W,{colon:!1,name:"description"},l.a.createElement(a.a.TextArea,{className:"group-form-desc",autoComplete:"off",autoSize:{minRows:4},maxLength:100,placeholder:__("团队")+__("简介")})),l.a.createElement(W,{colon:!1,label:l.a.createElement("div",{className:N.addMember},l.a.createElement("div",{className:N.addMemberText},__("添加成员")),l.a.createElement("div",{onClick:Z},l.a.createElement("div",{className:N.addMemberBtn},l.a.createElement(y.default,null),l.a.createElement("span",{className:N.btnText},__("批量添加"))))),name:"users"},!I&&l.a.createElement(x,{getDefaultUsers:window.appData.isYuque?null:tt,type:"simple",initialValues:$,onChange:function(t){Y(t)}})),l.a.createElement(W,{colon:!1,label:__("公开性")},l.a.createElement(k.a,{type:"group",checked:V!==j.PRIVACY.private,onChangePermission:function(t){K(t)},organization:s}))))),I&&l.a.createElement(v.a,{ref:X,type:"simpleWithRole",visible:I,title:__("批量添加"),roles:[{key:"member",label:__("成员"),value:2}],onCancel:Z,onSubmit:et,initialValues:$,getDefaultUsers:window.appData.isYuque?null:tt}))};H.propTypes={isModalVisible:f.a.bool,handleCancel:f.a.func,handleSuccess:f.a.func,group:f.a.object,organization:f.a.object};e.default=function(t){var e=window.appData,r=e.me,n=e.organization,o=e.isAntDingTalkDesktopApp,a=I(I({},t),{},{me:r,organization:n,isAntDingTalkDesktopApp:o});return l.a.createElement(H,a)}},4101:function(t,e,r){"use strict";r(800);var n=r(381),o=(r(40),r(9)),a=r(473),i=r(0),c=r(1459),u=r(139),l=(r(134),r(21)),s=r(5),f=r.n(s),d=r(1417),p=(r(277),r(147)),h=(r(385),r(185)),m=(r(1491),r(1361)),y=(r(48),r(11)),v=r(1431),g=r(63),b=r(323);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var E=function(){var t=w(Object(i.useState)(),2),e=t[0],r=t[1],n=w(Object(i.useState)(),2),o=n[0],a=n[1],c=new FileReader;return c.addEventListener("load",(function(){r(c.result)}),!1),Object(i.useEffect)((function(){o&&c.readAsDataURL(o)}),[o]),{url:e,uploadFile:a}},O=r(193),x="index-module_iconListContainer_2kTPj",S="index-module_iconListHeader_zgb1B",k="index-module_iconListHeaderTab_Rb7UW",j="index-module_iconListHeaderTabActive_l9CpK",C="index-module_iconListContent_5acPP",L="index-module_iconListIconContainer_W2jPd",T="index-module_iconListIconContainerActive_m+9aX",A="index-module_groupIconBtn_1pBes",N="index-module_groupIconBtnLarge_PGNAs",P="index-module_uploader_uEToK",D="index-module_dragger_yzTL7",I="index-module_imageContainer_lklS2",R="index-module_uploaderContainer_Y0VkK",M="index-module_reupload_3agQP",G="index-module_uploaderFooter_F5A9k",B="index-module_previewContainer_s7urA",F="index-module_preview_8GFmF";function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},z.apply(null,arguments)}function Y(){Y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==U(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(U(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function W(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function H(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){W(a,n,o,i,c,"next",t)}function c(t){W(a,n,o,i,c,"throw",t)}i(void 0)}))}}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var q=function(t){var e=t.value,r=t.onChange,n=t.uploadUrl,a=t.hideDropdown,c=function(t){var e=t.uploadUrl,r=t.onChange,n=t.hideDropdown,o=Object(i.useRef)(),a=E(),c=a.url,u=a.uploadFile,l=Object(i.useRef)(),s=V(Object(i.useState)(!1),2),f=s[0],d=s[1],p=function(){var t=H(Y().mark((function t(){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.current){t.next=2;break}return t.abrupt("return");case 2:if(void 0!==o.current.getCroppedCanvas()){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise((function(t,r){o.current.getCroppedCanvas().toBlob((function(n){var o=new FormData;o.append("file",n,"image.png"),Object(O.ajax)({url:e,method:"POST",data:o,dataType:"json",processData:!1,success:function(e){t(e.data.url)},error:function(t){r(t),y.a.error(__("上传失败"))}})}))})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=H(Y().mark((function t(){var e;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,p();case 4:e=t.sent,null==r||r(e),n();case 7:return t.prev=7,d(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})));return function(){return t.apply(this,arguments)}}();return{loading:f,localUrl:c,cropper:o,getUploadProps:function(){return{name:"file",showUploadList:!1,dataType:"json",accept:"image/*",beforeUpload:function(t){return t.size/1024/1024>20?(y.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(u(t),!1)}}},upload:p,preview:l,onOk:h}}({uploadUrl:n,onChange:r,hideDropdown:a}),u=c.loading,l=c.cropper,s=c.getUploadProps,f=c.localUrl,d=c.preview,w=c.onOk;return React.createElement("div",{className:P,"data-testid":"mocked-avatar-uploader"},f||e?React.createElement(p.a,{spinning:!1},React.createElement("div",{className:I},React.createElement("div",{className:R},React.createElement(m.a,{ref:l,src:f||e,containerWidth:window.h5?200:320,cropWidth:window.h5?200:320,aspectRatio:1,preview:d}),React.createElement(b.a,{ml:40,className:B},React.createElement("div",{className:F,ref:d}),React.createElement(b.a,{mt:16},__("预览")))),React.createElement(h.a,s(),React.createElement(o.a,{icon:React.createElement(v.default,null),className:M},__("重新上传"))),React.createElement("div",{className:G},React.createElement(o.a,{onClick:function(){return a()}},__("取消")),React.createElement(o.a,{type:"primary",onClick:w,loading:u},__("确定"))))):React.createElement(h.a.Dragger,z({},s(),{className:D}),React.createElement(o.a,{icon:React.createElement(g.b,{name:"avatar-upload",size:16})},__("上传头像")),React.createElement(b.a,{variant:"caption",fontSize:14,mt:12},__("在此上传或拖入头像"))))};q.defaultProps={uploadUrl:"/api/upload/avatar"};var X=q;function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Q(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=function(t){var e=t.value,r=t.onChange,n=t.hideDropdown,o=t.avatar,a=t.setFieldsValue,i=t.iconMap||u.d;return React.createElement("div",{className:C},i.map((function(t){return React.createElement(d.a,{className:f()(L,Q({},T,e===t&&!o)),type:"iconButton",onClick:function(){a({avatar:null}),null==r||r(t),n()}},React.createElement(g.b,{name:t,size:24}))})))};function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var nt=function(t){var e=et(Object(i.useState)(0),2),r=e[0],n=e[1],o=(null==t?void 0:t.iconMap)||u.d,a=[__("图标"),__("自定义")];return React.createElement("div",{className:f()(x,t.prefixCls)},React.createElement("div",{className:S},a.map((function(t,e){return React.createElement(d.a,{mr:8,className:f()(k,tt({},j,r===e)),onClick:function(){return n(e)},"data-testid":"GroupAvatarSelector-Tabs-".concat(e)},t)}))),React.createElement(l.a.Item,{noStyle:!0,shouldUpdate:function(t,e){return t.avatar!==e.avatar}},(function(e){var n=e.setFieldsValue,a=e.getFieldValue;return React.createElement(l.a.Item,{name:"scene",noStyle:!0,hidden:0!==r,initialValue:o[0]},React.createElement(Z,{iconMap:o,setFieldsValue:n,hideDropdown:t.hideDropdown,avatar:a("avatar")}))})),React.createElement(l.a.Item,{name:"avatar",noStyle:!0,hidden:1!==r},React.createElement(X,{hideDropdown:t.hideDropdown})))};function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ct(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return lt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.getFieldValue,r=t.style,l=t.largeSize,s="publicPage"===t.type?u.f:u.d,f=Object(a.f)((function(t){return t.group})),d=e("scene")||s[0],p=e("avatar"),h=ut(Object(i.useState)(!1),2),m=h[0],y=h[1];return React.createElement(n.a,{overlay:React.createElement(nt,{iconMap:s,avatar:p,hideDropdown:function(){return y(!1)}}),trigger:["click"],visible:m,onVisibleChange:y},React.createElement(o.a,{"data-testid":"GroupAvatarSelector",className:l?N:A,style:r,icon:React.createElement(c.a,{group:it(it({},f),{},{avatar:p,scene:d,avatar_url:p,iconMap:s}),iconSize:l?38:27,size:38,radius:6})}))}},4122:function(t,e,r){var n=r(500);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?n(t,void 0,e):[]}},4140:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r(3812),o=function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1306)]).then(r.bind(null,4444)).then((function(t){return t.AIDocModal}))},a=function(){var t=Object(n.a)({loader:o,name:"AIDocModal"}),e=t.loadSelector,r=t.showSelector;return{loadCreateAIDocModal:e,showCreateAIDocModal:function(t){return r(t,{width:"76vw",maskClosable:!1,centered:!0})},contextHolder:t.contextHolder}}},4142:function(t,e,r){var n=r(432),o=r(824),a=r(825),i=r(210),c=r(245),u=r(433);t.exports=function(t,e,r,l){var s=-1,f=o,d=!0,p=t.length,h=[],m=e.length;if(!p)return h;r&&(e=i(e,c(r))),l?(f=a,d=!1):e.length>=200&&(f=u,d=!1,e=new n(e));t:for(;++s<p;){var y=t[s],v=null==r?y:r(y);if(y=l||0!==y?y:0,d&&v==v){for(var g=m;g--;)if(e[g]===v)continue t;h.push(y)}else f(e,v,l)||h.push(y)}return h}},4145:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i}));var n=function(t){return t.INIT="init",t.SRE="SRE",t.PRD="PRD",t.SAD="SAD",t.TEST="TEST",t}({}),o=function(t){return t[t.DRAFT=0]="DRAFT",t[t.PUBLISH=1]="PUBLISH",t}({}),a=function(t){return t.ASSOCIATED_PRD="ASSOCIATED_PRD",t.CORE_FUNCTION_SPLITTING="CORE_FUNCTION_SPLITTING",t.SUB_FUNCTION_DESCRIPTION="SUB_FUNCTION_DESCRIPTION",t.CREATIVE_REATIVE_AND_PAIN_POINT_TIPS="CREATIVE_REATIVE_AND_PAIN_POINT_TIPS",t.LOGIC_QA="LOGIC_QA",t.LOGIC_QA_ALL="LOGIC_QA_ALL",t.BUSINESS_CHALLENGE="BUSINESS_CHALLENGE",t.BUSINESS_KEYWORD_EXTRACT="BUSINESS_KEYWORD_EXTRACT",t.CUSTOM_BLOCK="CUSTOM_BLOCK",t.BACKGROUND_BLOCK="BACKGROUND_BLOCK",t.CORE_FUNCTION_BLOCK="CORE_FUNCTION_BLOCK",t.INTERPRETATION_ALL="INTERPRETATION_ALL",t}({}),i=function(t){return t.REQUIREMENT_UNDERSTANDING="REQUIREMENT_UNDERSTANDING",t.DOMAIN_MODEL_OUTLINE_GENERATION="DOMAIN_MODEL_OUTLINE_GENERATION",t.DOMAIN_MODEL_TABLE_GENERATION="DOMAIN_MODEL_TABLE_GENERATION",t.DOMAIN_MODEL_REFERENCES="DOMAIN_MODEL_REFERENCES",t.PRESELECTED_DATA_TABLE_EXTRACTION="PRESELECTED_DATA_TABLE_EXTRACTION",t.DATABASE_DESIGN_OUTLINE_GENERATION="DATABASE_DESIGN_OUTLINE_GENERATION",t.DATABASE_TABLE_GENERATION="DATABASE_TABLE_GENERATION",t.DATABASE_TABLE_CHANGE_DDL_GENERATION="DATABASE_TABLE_CHANGE_DDL_GENERATION",t.API_OUTLINE_GENERATION="API_OUTLINE_GENERATION",t.API_DOCUMENTATION_GENERATION="API_DOCUMENTATION_GENERATION",t.SEQUENCE_DIAGRAM_DRAWING="SEQUENCE_DIAGRAM_DRAWING",t.PROGRAM_ANALYSIS_CONVERSATION="PROGRAM_ANALYSIS_CONVERSATION",t}({})},4146:function(t,e,r){"use strict";var n=r(0),o=r(4224),a=r(34);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,u,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,u)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,c,u){var l=p(t[o],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return r("throw",t,c,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),f(j.prototype,l,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),f(S,s,"Generator"),f(S,u,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function u(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){u(a,n,o,i,c,"next",t)}function c(t){u(a,n,o,i,c,"throw",t)}i(void 0)}))}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var d=window.desktopAppData.isWin,p=new o.a({platform:d?"windows":"macOS"});e.a=function(t){var e=s(Object(n.useState)(""),2),r=e[0],o=e[1],i=function(){var e=l(c().mark((function e(){var r,n,i,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=window.YuqueDesktopAppJSBridge)||void 0===r||null===(n=r.ipcInvoke)||void 0===n?void 0:n.call(r,{channel:null===a.a||void 0===a.a||null===(i=a.a.SHORTCUT)||void 0===i?void 0:i.GET_SHORTCUT,options:{shortcutKey:t}});case 2:u=e.sent,l=p.shortcutToShowString(u),o(l);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){},f=function(){var t=l(c().mark((function t(){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=window.YuqueDesktopAppJSBridge)||void 0===e||null===(r=e.ipcOn)||void 0===r?void 0:r.call(e,a.a.SHORTCUT.SHORTCUT_CHANGED,(function(t,e){var r=e.value,n=p.shortcutToShowString(r);o(n)}));case 2:u=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(a.a)return i(),f(),function(){var t;null===(t=u)||void 0===t||t()}}),[]),{shortcut:r}}},4220:function(t,e,r){"use strict";var n=r(63),o="KnowledgePieGuide-module_wrapper_McOcd",a="KnowledgePieGuide-module_close_Hta-f",i="KnowledgePieGuide-module_breathBorder_JnuNa",c=(r(227),r(101)),u=(r(40),r(9)),l=r(0),s=r(323),f=r(1646),d="index-module_container_YifTz",p="index-module_titleContainer_E19Ts",h="index-module_content_u6ksX",m="index-module_close_xIF4s",y=function(t){var e=t.onReadGuide,r=t.sign,n=t.visible,o=t.arrowPointAtCenter,a=t.placement;return l.createElement(c.a,{overlayClassName:d,arrowPointAtCenter:o,destroyTooltipOnHide:!0,autoAdjustOverflow:!0,getPopupContainer:function(){return document.querySelector("#dragBarContainer")},title:l.createElement("div",{className:p},l.createElement("div",{className:h},l.createElement(s.a,{variant:"caption",mt:4,mb:4},__("知识库全新升级，来看看吧"))),l.createElement(u.a,{onClick:e,icon:l.createElement(f.default,{width:14,height:14}),type:"text",className:m})),placement:a,visible:n,align:{targetOffset:[0,4]}},r)},v={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"},{area:"DASHBOARD_BOOK_MENU",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip",customRender:y,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(t){t.style.position="absolute",t.style.transform="translateY(-21px)",t.style.left="50px",t.style.zIndex=4},closeGuide:function(t){t.target.closest(".larkui-feature-guide")&&(t.preventDefault(),t.stopPropagation())}},{area:"DASHBOARD_BOOK_MENU_COLLAPSED",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip_isCollapsed",customRender:y,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip_isCollapsed"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(t){t.style.position="absolute",t.style.left="17px",t.style.top="-30px",t.style.zIndex=4},closeGuide:function(t){t.target.closest(".larkui-feature-guide")&&(t.preventDefault(),t.stopPropagation())}},{area:"DASHBOARD_QUICKSTART",enable:!0,type:"custom",tip_id:"knowledge_pie_ai_doc_create",customRender:function(){return React.createElement(React.Fragment,null,React.createElement("div",{className:o},__("新增「 AI 帮你写 」功能帮助你提供高效的AI创作体验"),React.createElement(n.b,{name:"delete",size:16,className:a})),React.createElement("div",{className:i}))},placement:"bottom",containerSelector:'[data-feature-guide-container="knowledge_pie_ai_doc_create"]',readTrigger:["click"],createdAt:"2024-08-24",styleFix:function(t){t.style.position="absolute",t.style.left="-225px",t.style.top="20px",t.style.zIndex=4}},{area:"ADD_BUTTON_MENU",enable:!0,type:"mini",tip_id:"knowledge_pie_ai_doc_create_menu_item",tip:__("新增「 AI 帮你写 」功能帮助你提供高效的AI创作体验"),placement:"bottom",createdAt:"2024-08-24"}]},g=r(47),b=r(190),w=v.FEATURES,_={readLiteFeatureGuide:function(t){if("function"==typeof navigator.sendBeacon){var e=new URLSearchParams;e.set("ctoken",Object(b.a)(window)),e.set("type",t.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(e.toString()))}else g.a.mine.readGuide({type:t.tip_id});var r=t.containerSelector&&document.querySelector(t.containerSelector);if(r){var n=r.querySelector(".larkui-feature-guide");if(!n)return;n.style.display="none"}},readMiniFeatureGuide:function(t,e){var r=t.tip_id;g.a.mine.readGuide({type:r}),e({type:"guide/readFeatureGuide",payload:{tip_id:r}})},findFeatureGuide:function(t){var e=t.tip_id,r=t.type;return w.find((function(t){return t.tip_id===e&&t.type===r}))},needDisplayGuide:function(t){if("#guide"===window.location.hash)return!0;var e=window.appData.readTip;return!e||!e[t]}};_.FEATURES=w;e.a=_},4248:function(t,e,r){"use strict";r(67);var n=r(31),o=(r(40),r(9)),a=(r(277),r(147)),i=(r(48),r(11)),c=r(0),u=r.n(c),l=r(6),s=r.n(l),f=r(78),d=r.n(f),p=r(1442),h=r(282),m=r(47),y=r(208),v=r(1342),g=r.n(v),b=r(216),w=r(251),_=r(34),E=r(1467),O=r(975),x="DocExport-module_docExport_zwx9b",S="DocExport-module_title_eGdGG",k="DocExport-module_entry_qjwYu",j="DocExport-module_setting_yai1Y",C="DocExport-module_settingTitle_IjcSw",L="DocExport-module_settingUpload_3ymtX";function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D(){D=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==T(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(T(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function I(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function R(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){I(a,n,o,i,c,"next",t)}function c(t){I(a,n,o,i,c,"throw",t)}i(void 0)}))}}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var B=Object(w.b)((function(){return Promise.all([r.e(14),r.e(1285)]).then(r.bind(null,8382))}),{suspense:!0}),F=O.a.STATUS,U=function(t){var e=t.bookId,r=t.exportParams,l=t.onCancel,s=t.wrapModal,f=void 0===s||s,v=function(t){var e=t.doc,r=t.bookId,n=t.exportParams,o=M(Object(c.useState)(e||null),2),a=o[0],i=o[1],l=M(Object(c.useState)(!1),2),s=l[0],f=l[1],p=M(Object(c.useState)(e?g.a.SUPPORTED_EXPORT_FORMATS[e.type]:[]),2),h=p[0],y=p[1],v=Object(c.useRef)();return Object(c.useEffect)((function(){var t=a&&("Mind"===a.type||"Board"===a.type),e=null,o=function(){var t=R(D().mark((function t(){var e;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.doc_id){t.next=11;break}return f(!0),t.next=5,m.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:e=t.sent,i(e),f(!1),y(g.a.SUPPORTED_EXPORT_FORMATS[e.type]),t.next=12;break;case 11:y([g.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(a){if(!t)return;e=document.createElement("div"),document.body.appendChild(e),d.a.render(u.a.createElement(B,{height:"100%",width:"100%",onLoad:function(t){v.current=t},content:a.content}),e)}else o();return function(){e&&(document.body.removeChild(e),e=null)}}),[a]),{state:{currentDoc:a,loading:s,formats:h},lakeBoardEngineRef:v}}(t),b=v.state,w=b.currentDoc,T=b.loading,A=b.formats,P=v.lakeBoardEngineRef,I=M(Object(c.useState)(),2),G=I[0],U=I[1],z=M(Object(c.useState)(),2),Y=z[0],W=z[1],H=M(Object(c.useState)(),2),V=H[0],K=H[1],q=M(Object(c.useState)(F.INIT),2),X=q[0],$=q[1],Q=M(Object(c.useState)(""),2),Z=Q[0],J=Q[1],tt=Object(c.useRef)(),et={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},rt=function(){var t=R(D().mark((function t(n){var o,a,i,c,u,l;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={type:n,force:0},tt.current&&(a=tt.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),u=0;case 5:if(!(u<c)){t.next=33;break}if(t.prev=6,"lakebook"!==n){t.next=13;break}return t.next=10,m.a.books.exports(N(N({},o),{},{id:e,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:l=t.sent,t.next=17;break;case 13:if(!w){t.next=17;break}return t.next=16,m.a.docs.exports(N(N({},o),{},{id:w.id}));case 16:l=t.sent;case 17:if("success"!==l.state){t.next=19;break}return t.abrupt("return",l);case 19:if("error"!==l.state){t.next=23;break}if(!l.error){t.next=22;break}return t.abrupt("return",l.error);case 22:return t.abrupt("return",{error:l.message});case 23:return t.next=25,Object(h.a)(i);case 25:u++,t.next=31;break;case 28:return t.prev=28,t.t0=t.catch(6),t.abrupt("return",{error:t.t0.message});case 31:t.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return t.stop()}}),t,null,[[6,28]])})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=R(D().mark((function t(e){var r;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w||g.a.SUPPORTED_EXPORT_FORMATS[w.type]){t.next=2;break}return t.abrupt("return");case 2:return U(e),$(F.PROCESSING),K(null),t.prev=5,t.next=8,rt(e);case 8:if(!(r=t.sent).error){t.next=13;break}return $(F.ERROR),J(r.error),t.abrupt("return");case 13:U(e),$(F.SUCCESS),K(r.url),Object(y.b)(r.url),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(5),$(F.ERROR),J(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}(),ot=function(){var t=R(D().mark((function t(e,r){var n;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:P.current&&(null===(n=P.current)||void 0===n||n.export(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),at=function(t){var e=w&&("Mind"===w.type||"Board"===w.type);!e||w.content?(W(g.a.THIRD_PARTY_FORMAT[t.toUpperCase()]),!e||t!==g.a.THIRD_PARTY_FORMAT.JPG.key&&t!==g.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==w?void 0:w.type)||"pdf"!==t)&&et[t]?(U(t),$(F.SETTING)):nt(t):ot(t,{filename:w.title})):i.a.warn(__("画板为空，请编辑发布后导出"))},it=null;return X===F.PROCESSING?it=Y?u.a.createElement("div",{className:j},u.a.createElement("h1",{className:C},__("导出 {type}",{type:Y.name})),u.a.createElement(O.a.Processing,{tip:__("正在导出中...")})):null:X===F.SUCCESS?it=Y?u.a.createElement("div",{className:j},u.a.createElement("h1",{className:C},__("导出 {type}",{type:Y.name})),u.a.createElement(O.a.Success,{tip:__("文件生成成功"),action:u.a.createElement("a",{href:_.c?null:V,desktopDisableHref:!0,target:"_blank",onClick:function(){Object(y.b)(V)}},__("点击下载"))})):null:X===F.ERROR?it=u.a.createElement(O.a.Error,{tip:__("文件生成失败"),error:Z,action:u.a.createElement(o.a,{icon:u.a.createElement(p.default,null),size:"small",onClick:function(){nt(G)}},__("重新生成"))}):X===F.INIT&&(it=u.a.createElement("div",{className:k},u.a.createElement("div",{className:S},__("导出文档")),u.a.createElement(a.a,{spinning:T},u.a.createElement(E.a,{mode:"export",types:A,onSelect:at})))),it=u.a.createElement("div",{className:x},it,function(){if(!Y||!w)return null;var t=et[Y.key];return t?u.a.createElement("div",{className:j,style:{display:X===F.SETTING?"block":"none"}},u.a.createElement("h1",{className:C},__("{type} 导出配置",{type:Y.name})),u.a.createElement(O.a.AdvanceSetting,{wrappedComponentRef:tt,target:w,type:Y,settings:t,actions:u.a.createElement(o.a,{type:"primary",className:L,onClick:function(){return nt(G)}},__("导出"))})):null}()),u.a.createElement("div",null,f?u.a.createElement(n.a,{title:null,onCancel:l,visible:!0,footer:null,width:640,maskClosable:!1},it):it)};U.defaultProps={exportParams:{}},U.propTypes={doc:s.a.object,exportParams:s.a.object,bookId:s.a.number.isRequired,onCancel:s.a.func.isRequired,wrapModal:s.a.bool};e.a=Object(b.b)(U,!0)},4281:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));r(40);var n=r(9),o=(r(67),r(31)),a=(r(53),r(12)),i=(r(134),r(21)),c=r(0),u=r.n(c),l=r(6),s=r.n(l),f=r(308),d=r(1220),p={nameVersion:"SaveAsVersion-module_nameVersion_VphI2"};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(){m=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==h(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function y(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e=t.version,r=v(i.a.useForm(),1)[0],n=function(){var n,o=(n=m().mark((function n(){var o,a;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.validateFields();case 3:return o=n.sent,n.next=6,t.docVersionProxy.name({id:e.id,name:o.name});case 6:a=n.sent,t.onCreated(a),t.onCancel(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function i(t){y(a,r,o,i,c,"next",t)}function c(t){y(a,r,o,i,c,"throw",t)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return u.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:t.onCancel,onCancel:t.onCancel,onOk:n,title:__("保存为版本"),getContainer:function(){var e;return(null===(e=t.getContainer)||void 0===e?void 0:e.call(t))||document.body},visible:!0},u.a.createElement(i.a,{"data-testid":"history-name-form",className:p.nameVersion,form:r,layout:"vertical"},u.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},u.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function w(t){var e=t.version,r=v(Object(c.useState)(!1),2),o=r[0],a=r[1],i=e.local&&e.draft;return!Object(d.b)()||i?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{"data-testid":"save-as-version",onClick:function(){a(!0)}},__("保存为版本")),o&&u.a.createElement(b,{getContainer:t.getContainer,version:t.version,onCreated:t.onCreated,docVersionProxy:t.docVersionProxy,onCancel:function(){a(!1)}}))}b.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},w.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};e.b=Object(f.b)(b,!1)},4284:function(t,e,r){!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var t,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((t=r[n])&&t[1]in e){for(n=0;n<t.length;n++)a[r[0][n]]=t[n];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(t){var r=o.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[r]():t[r](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){e[o.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,r){var n=a[t];n&&e.addEventListener(n,r,!1)},off:function(t,r){var n=a[t];n&&e.removeEventListener(n,r,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(e[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[o.fullscreenEnabled])}}}),r?t.exports=i:window.screenfull=i):r?t.exports=!1:window.screenfull=!1}()},4288:function(t,e,r){"use strict";r(227);var n=r(101),o=r(0),a=r.n(o),i=r(6),c=r.n(i),u=r(78),l=r.n(u),s=r(1646);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:e,onClick:t,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function g(t){var e=t.type,r=void 0===e?"lite":e,i=t.tip,c=t.enableMultiLines,u=t.guideSignContainerStyle,f=m(Object(o.useState)(!0),2),d=f[0],h=f[1];if(!d)return null;var y=document.querySelector(t.containerSelector);if(!y)return null;var g=function(){h(!1),t.onRead()},b=function(){var e=y.querySelector(".larkui-feature-guide");if(e)return e;(e=document.createElement("div")).classList.add("larkui-feature-guide");if(e.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[r]),e.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(r)){y.style.position="relative";var n=y.getBoundingClientRect();switch(t.placement){case"right":e.style.left="".concat(n.width+2,"px");break;case"left":e.style.left="-14px";break;case"top":e.style.bottom="".concat((t.offsetY?parseInt(t.offsetY,10):0)+n.height,"px"),e.style.left="".concat(n.width/2-6,"px");break;default:e.style.left="".concat((n.width-12)/2,"px"),e.style.bottom=t.offsetY||"0"}t.styleFix&&t.styleFix(e)}var o=t.readTrigger||[],a=function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation()),h(!1),t.onRead(),o.forEach((function(e){y.removeEventListener(e,t.closeGuide||a)}))};return o.forEach((function(e){y.addEventListener(e,t.closeGuide||a)})),y.appendChild(e),e}(),w=v(g,u),_=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===r)return l.a.createPortal(w,b);var E="center"!==t.placement&&"top"!==t.placement;return"custom"===r?l.a.createPortal(a.a.createElement(t.customRender,p(p({},t),{},{sign:w,visible:d,arrowPointAtCenter:E,portalDom:b,onReadGuide:g,setVisible:h})),b):"lite"===r?l.a.createPortal(a.a.createElement(n.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:E,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,c?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:g},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:g,className:_},a.a.createElement(s.default,{width:16,height:16}))),placement:t.placement,visible:d,align:{targetOffset:[0,4]}},w),b):void 0}g.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},v((function(){})))},g.defaultProps={enableMultiLines:!1},g.propTypes={type:c.a.oneOf(["lite","mini","custom"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool,customRender:c.a.element,styleFix:c.a.func,closeGuide:c.a.func};e.a=g},4314:function(t,e,r){"use strict";var n=r(0),o=r.n(n),a=r(473),i=r(4220),c=r(308),u=r(4288);e.a=Object(c.b)(Object(a.d)((function(t){return{guide:t.guide}}))((function(t){var e=t.guide,r=t.tip_id;return Object(n.useEffect)((function(){var t=i.a.findFeatureGuide({tip_id:r,type:"lite"});t&&i.a.readLiteFeatureGuide(t)}),[]),o.a.createElement("div",{className:t.className||"",style:t.style,"data-testid":"guide_".concat(r),onClick:function(){var e=i.a.findFeatureGuide({tip_id:r,type:"mini"});i.a.readMiniFeatureGuide(e,t.dispatch)}},t.children,("#guide"===window.location.hash||!e.readTip[r])&&o.a.createElement(u.a.Mini,null))})),!1)},4351:function(t,e,r){var n=r(4142),o=r(472),a=r(716),i=r(3677),c=a((function(t,e){return i(t)?n(t,o(e,1,i,!0)):[]}));t.exports=c},4353:function(t,e,r){var n=r(4142),o=r(472),a=r(243),i=r(716),c=r(3677),u=r(812),l=i((function(t,e){var r=u(e);return c(r)&&(r=void 0),c(t)?n(t,o(e,1,c,!0),a(r,2)):[]}));t.exports=l},4359:function(t,e,r){"use strict";r(40);var n=r(9),o=(r(277),r(147)),a=r(0),i=r.n(a),c=r(6),u=r.n(c),l=r(328),s=r(1522),f=(r(130),r(41)),d=(r(188),r(32)),p=r(4353),h=r.n(p),m=r(149),y=r(47),v=r(1240),g=r(1541),b=r(4060),w="index-module_repoSelector_2Z0BO",_="index-module_repoSelectorGroup_0chHn",E="index-module_repoSelectorRepo_nq0Ar",O="index-module_repoSelectorItem_-+1uF";function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function S(){S=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==x(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(x(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function k(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){k(a,n,o,i,c,"next",t)}function c(t){k(a,n,o,i,c,"throw",t)}i(void 0)}))}}function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function P(t){var e=t.disabled,r=function(t){var e=window.appData,r=e.me,n=e.organization,o=null==n?void 0:n.id,i=t.defaultBook,c=t.defaultGroup,u=t.bookLayout,l=t.disableBooks,s=void 0===l?[]:l,f=t.disableSelectOrg,d=void 0!==f&&f,p=A(Object(a.useState)([]),2),v=p[0],b=p[1],w=A(Object(a.useState)([c]),2),_=w[0],E=w[1],O=A(Object(a.useState)([]),2),x=O[0],k=O[1],C=A(Object(a.useState)([L(L({},i),{},{user:c})]),2),T=C[0],N=C[1],P=A(Object(g.a)(!1),2),D=P[0],I=P[1],R=A(Object(a.useState)(c||{}),2),M=R[0],G=R[1],B=A(Object(a.useState)({}),2),F=B[0],U=B[1],z=A(Object(a.useState)({}),2),Y=z[0],W=z[1],H=i&&!s.includes(i)?i:{},V=A(Object(a.useState)(H),2),K=V[0],q=V[1],X=A(Object(a.useState)(!1),2),$=X[0],Q=X[1],Z=499;function J(t){return tt.apply(this,arguments)}function tt(){return(tt=j(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.mine.groupsAll({offset:0,limit:Z,organization_id:null==e?void 0:e.id});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t,e){return rt.apply(this,arguments)}function rt(){return(rt=j(S().mark((function t(e,r){var a,c,l,f,d;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(null===(a=e.abilities)||void 0===a?void 0:a.read)){t.next=2;break}return t.abrupt("return",i.user_id===e.id?[i]:[]);case 2:return c=m.MIXING_BOOK_TYPES.join(","),l=(null==n?void 0:n.id)||0,!o&&null!=r&&r.id&&(l=null==r?void 0:r.id),f={organization_id:l,type:c,filterByAbility:"create_doc",offset:0,limit:Z,group_id:e.id,sence:"collaborate",enable_group_filter:!0},t.next=8,y.a.mine.books(f);case 8:return d=t.sent,d=u?d.filter((function(t){return u.includes(t.layout)})):m.MIXING_BOOK_TYPES.includes(i.type)?d.filter((function(t){return m.MIXING_BOOK_TYPES.includes(t.type)})):d.filter((function(t){return t.type===i.type})),d=h()(d,s,"id"),t.abrupt("return",d);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t){return ot.apply(this,arguments)}function ot(){return(ot=j(S().mark((function e(r){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!M||r.id!==M.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(et)(r);case 4:n=e.sent,o=n?n[0]:{},N(n),G(r),q(o),t.onSelected(r,o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return(at=j(S().mark((function e(r){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!F||r.id!==F.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(et)(r,Y);case 4:n=e.sent,o=n?n[0]:{},N(n),U(r),q(o),t.onSelected(r,o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(t){return ct.apply(this,arguments)}function ct(){return(ct=j(S().mark((function e(r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==Y?void 0:Y.id)!==(null==r?void 0:r.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I(j(S().mark((function e(){var n,o,a,i,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(r);case 2:if(o=e.sent,a=(null==o?void 0:o[0])||{},i=[],null==a||!a.id){e.next=9;break}return e.next=8,et(a,r);case 8:i=e.sent;case 9:c=(null===(n=i)||void 0===n?void 0:n[0])||{},W(r),k(o),U(a),N(i),q(c),t.onSelected(a,c);case 16:case"end":return e.stop()}}),e)}))))();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return(ut=j(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:"Organization"===e.type?(G({}),it(e)):(W({}),U({}),k([]),nt(e));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(){return st.apply(this,arguments)}function st(){return(st=j(S().mark((function e(){var n,a,u,l,f,p;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=15;break}return a=m.MIXING_BOOK_TYPES.join(","),e.next=4,y.a.mine.groupsAll({offset:0,limit:Z,filterByAbility:"create_doc",type:a});case 4:if((u=e.sent)&&Array.isArray(u)&&u.unshift(r),E(u),Q(!0),n=c||u[0],c||G(n),o||d){e.next=15;break}return e.next=13,y.a.mine.organizations();case 13:l=e.sent,b(l);case 15:return e.next=17,et(n);case 17:f=e.sent,N(f),i&&!s.includes(i)?p=i:(p=f?f[0]:{},q(p)),t.onSelected(n,p);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){I(lt)()}),[]),{state:{currentOrg:Y,currentGroup:M,currentOrgGroup:F,currentBook:K,orgs:v,groups:_,orgGroups:x,books:T,selectorLoading:D},onRepoSelect:function(e){var r=T.find((function(t){return t.id===e}))||{};q(r),t.onSelected(null!=Y&&Y.id?F:M,r)},onBelongSelect:function(t){return ut.apply(this,arguments)},onOrgGroupSelect:function(t){return at.apply(this,arguments)},onGroupSelect:nt}}(t),n=r.state,c=n.currentOrg,u=n.currentGroup,l=n.currentOrgGroup,s=n.currentBook,p=n.orgs,x=n.groups,k=n.orgGroups,C=n.books,T=n.selectorLoading;return i.a.createElement(o.a,{spinning:T},i.a.createElement(f.a,{className:w,type:"flex","data-testid":"repo-selector"},i.a.createElement("div",{className:_},i.a.createElement(b.a,{current:null!=c&&c.id?c:u,disabled:e,loading:T,groups:x,orgs:p,onChange:r.onBelongSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/"),(null==c?void 0:c.id)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:_},i.a.createElement(b.a,{current:l,disabled:e,loading:T,groups:k,onChange:r.onOrgGroupSelect})),i.a.createElement("span",{style:{margin:"0 12px",lineHeight:"32px"}},"/")),i.a.createElement(d.a,{showSearch:!0,style:{flex:1},className:E,disabled:e,value:s&&s.id,placeholder:__("请选择知识库"),onSelect:r.onRepoSelect,filterOption:function(t,e){if(t&&e.book)return e.book.name.toLowerCase().includes(t.toLowerCase())}},C.map((function(t){return i.a.createElement(d.a.Option,{key:t.id,value:t.id,book:t},i.a.createElement("div",{className:O},i.a.createElement(v.g,{group:t.user,book:t,iconSize:20})))})))))}P.defaultProps={onSelected:function(){},disableBooks:[]},P.propTypes={defaultGroup:u.a.object,defaultBook:u.a.object,bookLayout:u.a.array,disabled:u.a.bool,onSelected:u.a.func,disableBooks:u.a.array};var D=P,I=(r(589),r(206)),R=(r(73),r(33)),M=(r(175),r(44)),G=(r(227),r(101)),B=r(5),F=r.n(B),U=r(4360),z=r(63),Y="SearchCatalogTrigger-module_actionItem_rk-NO",W="SearchCatalogTrigger-module_searchContainer_Zv6BH",H="SearchCatalogTrigger-module_searchInput_4Tgor",V="SearchCatalogTrigger-module_prefixIconWrapper_Ub-Vo",K="SearchCatalogTrigger-module_searchIcon_RK482";function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function $(t){var e=function(t){var e=t.listData,r=t.onSelectOption,n=t.isLoading,o=q(Object(a.useState)(!1),2),i=o[0],c=o[1];return{state:{inputVisible:i,searchOptions:Object(a.useMemo)((function(){return e.map((function(t){return{label:t.title,value:t.uuid}}))}),[e]),isLoading:n},handleTriggerClick:function(){c(!0)},handleBlur:function(){c(!1)},handleOptionSelect:function(t){t&&("function"==typeof r&&r({tocItemUuid:t}),c(!1))}}}(t),r=e.state,n=r.inputVisible,c=r.searchOptions,u=r.isLoading,l=e.handleTriggerClick,s=e.handleBlur,f=e.handleOptionSelect;return i.a.createElement(i.a.Fragment,null,n?i.a.createElement("div",{className:W},i.a.createElement(d.a,{getPopupContainer:function(t){return t.parentElement},className:H,notFoundContent:u?i.a.createElement(o.a,{size:"small",delay:100}):null,showArrow:!1,autoFocus:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",options:c,placeholder:__("目录搜索"),onBlur:s,onChange:f}),i.a.createElement("span",{className:V},i.a.createElement(z.b,{name:"help-search",width:16,height:16,className:K}))):i.a.createElement(G.a,{title:__("目录搜索"),getPopupContainer:function(t){return t}},i.a.createElement("span",{className:Y,onClick:l},i.a.createElement(z.b,{name:"help-search",width:16,height:16,className:K}))))}var Q=$;$.defaultProps={listData:[],isLoading:!1},$.propTypes={listData:u.a.arrayOf(u.a.object),isLoading:u.a.object,onSelectOption:u.a.func};var Z=r(220),J=r.n(Z),tt=r(60);function et(t){return function(t){if(Array.isArray(t))return ot(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){if(t){if("string"==typeof t)return ot(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(t,e):void 0}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var at=r.n(tt)()("CatalogSelecter:viewModel"),it=["child","sibling"];var ct={useViewModel:function(t,e){var r,n,o=t.catalog,i=t.disableItems,c=void 0===i?[]:i,u=t.submitType,l=t.currentSelectedUId,s=t.currentSelectedAction,f=c.map((function(t){return t.uuid})),d=rt(Object(a.useState)(null),2),p=d[0],h=d[1],m=rt(Object(a.useState)("child"),2),y=m[0],v=m[1],g=rt(Object(a.useState)("top"),2),b=g[0],w=g[1],_=rt(Object(a.useState)("auto"),2),E=_[0],O=_[1],x=rt(Object(a.useState)("copy"!==u),2),S=x[0],k=x[1],j=Object(a.useRef)(),C="all"===(r=t.catalogLevel)||r===1/0?1/0:parseInt(r,10)+1,L=rt(Object(a.useState)((n=C)===1/0?o.map((function(t){return t.uuid})):o.filter((function(t){return t.level<n-1})).map((function(t){return t.uuid}))),2),T=L[0],A=L[1],N=function(){var t=et(T),e=[];if(p){var r=o.find((function(t){return t.uuid===p})),n=function(t){if(t){var r=function(t){return o.find((function(e){return e.uuid===t.parent_uuid}))}(t);r&&(e.push(r.uuid),r.level>0&&n(r))}};n(r)}return e.length&&t.push.apply(t,e),t};Object(a.useEffect)((function(){A(N())}),[p]);var P=function(t,e){var r=et(T),n=r.findIndex((function(e){return e===t.uuid}));"sibling"===e?(n>=0&&r.splice(n,1),A(r)):n<0&&A([t.uuid].concat(et(r)))},D=function(t,e,r,n){J()(n)||it.includes(n)?t&&f.includes(t.uuid)||(t?(h(t.uuid),w(null),v(n||"child"),P(t,n||"child")):(h(null),w(r),O("auto"))):at("invalid insert action type",n)},I=function(){if(!t.disable&&!f.includes(p)){var e={action:"prependChild",target_uuid:p,insert_to_catalog:!0,with_children:S};return"top"===b?(e.action="prependChild",e.target_uuid=null):"bottom"===b?(e.action="appendChild",e.target_uuid=null):e.action="sibling"===y?"moveAfter":"prependChild",e}};return Object(a.useEffect)((function(){var t=o.find((function(t){return t.uuid===l}));t&&D(t,0,null,s)}),[l,s]),Object(a.useImperativeHandle)(e,(function(){return{getSubmitParams:I}})),{state:{selectItemUId:p,action:y,position:b,expandedKeys:T,placeholderTop:E,level:C,withChildren:S,catalogTreeRef:j},onSelectItem:D,onChangeAction:function(t,e){if(!f.includes(e.uuid)){t.stopPropagation(),t.preventDefault();var r=t.target.value;v(r),P(e,r),"child"===r&&O("auto")}},onExpand:function(t,e){var r=e.expanded,n=e.node;if(A(t),"sibling"===y&&n.props.uuid===p)if(r){var o=document.querySelector(".ant-tree-treenode-selected");o&&setTimeout((function(){O(o.getBoundingClientRect().height)}),200)}else T.includes(n.props.uuid)||O("auto")},handleChangeWithChildren:function(t,e){k(t.target.checked)},getSubmitParams:I,handleCatalogSearchSelect:function(t){var e=t.tocItemUuid,r=o.find((function(t){return t.uuid===e}));D(r,0,null,"sibling");var n=setTimeout((function(){var t;null===(t=j.current)||void 0===t||t.scrollTo({key:r.uuid,align:"top",offset:100}),clearTimeout(n)}),300)},handleInsertToTop:function(t){return D(null,0,"top")},handleInsertToBottom:function(t){return D(null,0,"bottom")}}}},ut={card:"CatalogSelector-module_card_EnAh7",disabled:"CatalogSelector-module_disabled_DdXXq",titleWrapper:"CatalogSelector-module_titleWrapper_mcDOG",title:"CatalogSelector-module_title_ixnVK",docCatalogItem:"CatalogSelector-module_docCatalogItem_yI0aV",emptyViewInner:"CatalogSelector-module_emptyViewInner_FIALf",placeholder:"CatalogSelector-module_placeholder_topjs",caret:"CatalogSelector-module_caret_jxv72",placeholderSibling:"CatalogSelector-module_placeholderSibling_-rdTP",placeholderChild:"CatalogSelector-module_placeholderChild_uP7D6",actions:"CatalogSelector-module_actions_HKHke",topSimulator:"CatalogSelector-module_topSimulator_t0qhG",bottomSimulator:"CatalogSelector-module_bottomSimulator_HSsiS",textTip:"CatalogSelector-module_textTip_LK8n1",selected:"CatalogSelector-module_selected_JDZUv",wrapper:"CatalogSelector-module_wrapper_tsHiF",submitOptions:"CatalogSelector-module_submitOptions_Om8RW",submitOptionItem:"CatalogSelector-module_submitOptionItem_oqA8J",shortcutArea:"CatalogSelector-module_shortcutArea_AgvQv",shortcutTip:"CatalogSelector-module_shortcutTip_BR+Yo",shortcutActionCont:"CatalogSelector-module_shortcutActionCont_l0Ug2",shortcutAction:"CatalogSelector-module_shortcutAction_u+U2K",shortcutActionDisabled:"CatalogSelector-module_shortcutActionDisabled_+nyVB"};function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},st.apply(null,arguments)}function ft(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var dt=i.a.forwardRef((function(t,e){var r=t.catalog,n=t.disableItems,o=t.submitType,c=t.currentSelectedUId,u=t.showChildrenOptions,s=t.extraOptions,f=t.maxHeight,d=t.hideCopyWithChildren,p=void 0!==d&&d,h=ct.useViewModel(t,e),m=Object(l.generateTreeByTocItems)(r),y=h.state,v=y.selectItemUId,g=y.action,b=y.position,w=y.expandedKeys,_=y.placeholderTop,E=y.level,O=y.withChildren,x=y.catalogTreeRef,S=__("插入");switch(o){case"move":S=__("移动");break;case"copy":S=__("复制");break;default:S=__("插入")}var k=[{label:__("同级"),value:"sibling"},{label:__("子级"),value:"child"}],j=function(){return i.a.createElement("div",{"data-testid":"catalog-selector-tree-placeholder",className:F()([ut.placeholder],ft(ft({},ut.placeholderChild,v&&"child"===g),ut.placeholderSibling,v&&"sibling"===g)),style:{top:_}},i.a.createElement(z.b,{name:"catalog-caret",width:13,height:6,className:ut.caret}))};Object(a.useEffect)((function(){if(c&&x.current){var t=x.current;setTimeout((function(){t.scrolled||t.scrollTo({key:c,align:"top",offset:100})}),300)}}),[c]);var C={data:m,listData:r,editable:!1,catalogLevel:E,disabledKeys:n.map((function(t){return t.uuid})),selectedKeys:v&&[v],expandedKeys:w,onSelect:h.onSelectItem,onExpand:h.onExpand,size:"normal"};r.length>10&&(C.height=f);var L=!r.length;return i.a.createElement("div",{className:ut.wrapper},i.a.createElement("div",{className:ut.shortcutArea},i.a.createElement("div",{className:ut.shortcutTip},__("请选择要放置的目录位置")),i.a.createElement("div",{className:ut.shortcutActionCont},i.a.createElement(Q,{listData:r,onSelectOption:h.handleCatalogSearchSelect}),i.a.createElement(G.a,{title:__("置顶")},i.a.createElement("span",{className:F()([ut.shortcutAction,ft({},ut.shortcutActionDisabled,L)]),onClick:function(t){L||h.handleInsertToTop(t)}},i.a.createElement(z.b,{name:"move-top",width:9,height:13,style:{fill:"red"}}))),i.a.createElement(G.a,{title:__("置底")},i.a.createElement("span",{className:F()([ut.shortcutAction,ft({},ut.shortcutActionDisabled,L)]),onClick:function(t){L||h.handleInsertToBottom(t)}},i.a.createElement(z.b,{name:"move-bottom",width:9,height:13}))))),i.a.createElement(R.a,{className:F()([ut.card])},i.a.createElement("div",{"data-testid":"catalog-selector-tree-top-simulator",className:ut.topSimulator},"top"===b&&j()),r.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,st({},C,{ref:x,renderTitle:function(t){return i.a.createElement("div",{className:ut.titleWrapper,"data-testid":"catalog-selector-tree-title-".concat(t.uuid)},i.a.createElement("div",{className:ut.title},t.title),v===t.uuid&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:ut.actions,"data-testid":"catalog-selector-insert-actions-".concat(t.uuid),onClick:function(t){t.stopPropagation()}},i.a.createElement("span",null,__("{actionType}为",{actionType:S})),i.a.createElement(M.a.Group,{value:h.state.action,onChange:function(e){h.onChangeAction(e,t)},options:k})),j()))}})),i.a.createElement("div",{"data-testid":"catalog-selector-tree-bottom-simulator",className:ut.bottomSimulator},"bottom"===b&&j())):i.a.createElement("div",{className:ut.emptyView},i.a.createElement("div",{className:ut.emptyViewInner},i.a.createElement("p",null,__("插入第一个目录节点"))))),i.a.createElement("div",{className:F()(t.optionClassnames,ut.submitOptions)},u&&!p&&i.a.createElement("div",{className:ut.submitOptionItem},i.a.createElement(I.a,{checked:O,onChange:h.handleChangeWithChildren},__("包含子文档"))),s))}));dt.defaultProps={catalog:[],catalogLevel:1/0,disableItems:[],maxHeight:326,hideCopyWithChildren:!1},dt.propTypes={catalog:u.a.array,catalogLevel:u.a.oneOfType([u.a.number,u.a.string]),submitType:u.a.oneOf(["create","move","copy"]),disableItems:u.a.array,showChildrenOptions:u.a.bool,optionClassnames:u.a.string,extraOptions:u.a.node,currentSelectedUId:u.a.string,maxHeight:u.a.number,hideCopyWithChildren:u.a.bool},dt.displayName="CatalogSelector";var pt=dt,ht="CatalogTransfer-module_wrapper_PCdb1",mt="CatalogTransfer-module_repoSelector_xEuzZ",yt="CatalogTransfer-module_selectBookTip_Ju7F8",vt="CatalogTransfer-module_emptyIcon_tkaXF",gt="CatalogTransfer-module_loading_MvRPo",bt="CatalogTransfer-module_footer_XgWWv",wt="CatalogTransfer-module_actions_3DruK",_t="CatalogTransfer-module_selectorOptions_evk3C";function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(r),!0).forEach((function(e){St(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function St(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Et(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kt(){kt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Et(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Et(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function jt(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){jt(a,n,o,i,c,"next",t)}function c(t){jt(a,n,o,i,c,"throw",t)}i(void 0)}))}}function Lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||At(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t){return function(t){if(Array.isArray(t))return Nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||At(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){if(t){if("string"==typeof t)return Nt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(t,e):void 0}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Pt(t,e){var r,n=[],o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=At(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=Object(l.findAllChildrenByParentNode)(t,a,!0)||[];n.push.apply(n,Tt(i))}}catch(t){o.e(t)}finally{o.f()}return n}var Dt=i.a.forwardRef((function(t,e){var r=t.currentGroup,c=t.currentBook,u=t.disableSelectorBooks,l=t.showRepoSelector,f=t.submitType,d=t.hideCopyWithChildren,p=void 0!==d&&d,h=t.disableSelector,m=t.disableSelectOrg,y=void 0!==m&&m,v=function(t){var e,r=t.currentGroup,n=t.currentBook,o=t.items,i=t.showRepoSelector,c=t.submitType,u=Lt(Object(a.useState)(r),2),l=u[0],f=u[1],d=Lt(Object(a.useState)(n),2),p=d[0],h=d[1],m=Lt(Object(a.useState)([]),2),y=m[0],v=m[1],g=Lt(Object(a.useState)([]),2),b=g[0],w=g[1],_=Lt(Object(a.useState)(!0),2),E=_[0],O=_[1],x=Lt(Object(a.useState)(!1),2),S=x[0],k=x[1],j=o&&Array.isArray(o)&&1===o.length,C="child";if(p.id===n.id&&j){var L=o[0].uuid,T=o[0].doc_id,A=(N=y.find((function(t){return t.uuid===L||t.doc_id===T})),P=e,D=C,N&&(P=N.prev_uuid,N.prev_uuid&&N.parent_uuid!==N.prev_uuid?(P=N.prev_uuid,D="sibling"):P=N.parent_uuid),{uuid:P,actionType:D});e=A.uuid,C=A.actionType}var N,P,D;var I,R=Object(a.useMemo)((function(){return o.reduce((function(t,e){var r=b.find((function(t){return t.uuid===e.uuid||t.doc_id===e.doc_id}));return r&&t.push(r),t}),[])}),[o,b]),M=Object(a.useMemo)((function(){return Array.isArray(R)&&R.length&&"move"===c&&p.id===n.id?[].concat(R,Pt(y,R)):[]}),[y,n.id,p.id,R]),G=function(){var t=Ct(kt().mark((function t(e){var r,o;return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,s.a.getCatalogNodes(e.id);case 3:r=t.sent,o=r?r.toc:[],v(o),e.id===n.id&&w(o),O(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){return i||G(n),k(!1)}),[i,n]),{state:{targetGroup:l,targetBook:p,toc:y,items:R,disableItemsInToc:M,loading:E,submitting:S,defaultSelectedCatalogNodeUid:e,defaultSelectedNodeActionType:C},handleSelect:(I=Ct(kt().mark((function t(e){var r,n=arguments;return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},e&&f(e),r&&h(r),!e||!r){t.next=6;break}return t.next=6,G(r);case 6:case"end":return t.stop()}}),t)}))),function(t){return I.apply(this,arguments)}),setSubmitting:k}}(t),g=v.state,b=g.targetGroup,w=g.targetBook,_=g.toc,E=g.disableItemsInToc,O=g.loading,x=g.submitting,S=g.defaultSelectedCatalogNodeUid,k=g.defaultSelectedNodeActionType,j=g.items,C=v.setSubmitting,L=i.a.useRef(),T=Array.isArray(j)&&j.some((function(t){return!!t.child_uuid})),A=function(){var e=Ct(kt().mark((function e(){var r,n,o,a;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:return C(!0),r={targetGroup:b,targetBook:w},Array.isArray(j)&&j.length&&(n=j.map((function(t){return t.uuid})),r.node_uuid=n[0]),o={},L&&L.current&&(o=L.current.getSubmitParams()),e.prev=7,e.next=10,t.onSubmit(xt(xt({},o),r));case 10:return a=e.sent,C(!1),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(7),C(!1);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),N=(w.toc||[]).length,P=48+(N>10?326:32*N);return i.a.createElement("div",{className:ht},l&&i.a.createElement("div",{className:mt},i.a.createElement(D,{defaultGroup:r,defaultBook:c,disableBooks:u,onSelected:v.handleSelect,disabled:h,disableSelectOrg:y})),O?i.a.createElement(o.a,{className:gt,size:"large",style:{height:P}}):i.a.createElement(i.a.Fragment,null,b&&w&&w.id?i.a.createElement(pt,{currentSelectedUId:S,currentSelectedAction:k,submitType:f,targetBook:w,catalog:_,catalogLevel:w.catalog_display_level,disableItems:E,ref:L,optionClassnames:_t,showChildrenOptions:T,hideCopyWithChildren:p}):i.a.createElement("div",{className:yt},i.a.createElement("img",{className:vt,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*9iSQTaU_i9kAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("span",null,__("暂无目录，选择知识库后可查看")))),i.a.createElement("div",{className:bt},i.a.createElement("div",{className:wt},i.a.createElement(n.a,{onClick:t.onCancel},__("取消")),i.a.createElement(n.a,{type:"primary",onClick:A,loading:x,disabled:!b||!w||!w.id||x,"data-testid":"catalog-transfer-btn-submit"},__("确认")))))}));Dt.defaultProps={showRepoSelector:!0,items:[]},Dt.propTypes={currentGroup:u.a.object,currentBook:u.a.object.isRequired,disableSelectorBooks:u.a.array,disableSelectOrg:u.a.bool,disableSelector:u.a.bool,items:u.a.array,onSubmit:u.a.func.isRequired,onCancel:u.a.func.isRequired,submitType:u.a.oneOf(["create","move","copy","add"]).isRequired,showRepoSelector:u.a.bool,hideCopyWithChildren:u.a.bool},Dt.displayName="CatalogTransfer";e.a=Dt},4360:function(t,e,r){"use strict";r(1529);var n=r(1368),o=r(0),a=r.n(o),i=r(1428),c=r(60),u=r.n(c),l=r(5),s=r.n(l),f=r(6),d=r.n(f),p=r(964),h=r.n(p),m=r(4351),y=r.n(m),v=r(77),g=r(328),b={loading:"index-module_loading_6Xjs9",titleWrapper:"index-module_titleWrapper_NRfy4",wrapper:"index-module_wrapper_G8dbv",scrolled:"index-module_scrolled_ZXFD1",topScrolled:"index-module_topScrolled_8VE-9",bottomScrolled:"index-module_bottomScrolled_G+APF",dragging:"index-module_dragging_fFNee",normalWrapper:"index-module_normalWrapper_9CiWJ",largeWrapper:"index-module_largeWrapper_SUwil",ListTocWrapper:"index-module_ListTocWrapper_4wy2S"};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_.apply(null,arguments)}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=k(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){if(t){if("string"==typeof t)return j(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function C(){C=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:j(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var _={};l(_,i,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(P([])));O&&O!==r&&n.call(O,i)&&(_=O);var x=b.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==w(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function j(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(w(e)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function L(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function A(t,e,r){return e=P(e),function(t,e){if(e&&("object"==w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N()?Reflect.construct(e,r||[],P(t).constructor):e.apply(t,r))}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function I(t,e,r){return(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:e+""}var M="catalog-tree",G="".concat(M,"-drag-container"),B=u()(M),F=n.a.DirectoryTree,U=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),I(r=A(this,e,[t]),"initScrollValue",(function(){r.scrolled=!0})),I(r,"initScrollMask",(function(){if(r.props.showScrollMask){var t=r.getCurrentScrollElement();if(t){var e=r.containerElem.getBoundingClientRect().height;r.virtualListEnabled()&&(e=r.props.height);var n=t.childNodes[0].offsetHeight,o=!1,a=!1;n>e&&(o=!0,a=!0,t.scrollTop<=0?o=!1:t.scrollTop>=n-e&&(a=!1));var i={};o!==r.state.showTopScrollMask&&(i.showTopScrollMask=o),a!==r.state.showBottomScrollMask&&(i.showBottomScrollMask=a),r.setState(i)}}})),I(r,"onExpand",(function(t,e){var n=e.expanded,o=e.node;r.expandLocked||r.setState({expandedKeys:t,currentNodeExpanded:n,autoExpandParent:!1},(function(){r.props.onExpand&&r.props.onExpand(t,{expanded:n,node:o}),r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.initScrollMask,200)}))})),I(r,"onSelect",(function(t,e){var n=t[0],o=e.node.props,a=o.type,i=r.props.toggleTitleOnSelect,c=r.state.expandedKeys.slice(),u=c.findIndex((function(t){return t===n}));u<0?c.push(n):a===v.TYPES.title&&i&&c.splice(u,1),r.setState({expandedKeys:c,selectedKeys:[n]});var l=r.props.onSelect;l&&([v.TYPES.doc,v.TYPES.link,v.TYPES.uncreated_doc,v.TYPES.title].includes(a)&&l(o,e.nativeEvent))})),I(r,"onCheck",(function(t,e){r.props.onCheck&&r.props.onCheck(t,e)})),I(r,"getAction",(function(t){var e=t.node.pos.split("-");return-1===t.dropPosition-Number(e[e.length-1])?v.ACTIONS.moveBefore:t.dropToGap?v.ACTIONS.moveAfter:v.ACTIONS.prependChild})),I(r,"onDrop",function(){var t,e=(t=C().mark((function t(e){var n,o,a,i,c,u;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.node.key,o=e.dragNode.key,r._showLoading(),a=r.getAction(e),B("发出 Action",i={action:a,target_uuid:n,node_uuid:o}),t.next=8,r.props.onAction(i);case 8:[v.ACTIONS.prependChild].includes(a)&&(c=r.state.expandedKeys,(u=c.slice()).includes(n)||(u.push(n),r.setState({expandedKeys:u}))),r.props.onDragEnd&&r.props.onDragEnd(e.dragNode),r.setState({draggingNode:null}),r._hideLoading();case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){L(a,n,o,i,c,"next",t)}function c(t){L(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}()),I(r,"onDragEnd",(function(t){if(r.props.onDragEnd&&r.props.onDragEnd(t.dragNode),r._hideLoading(),r.cacheExpandedKey){var e=S(r.state.expandedKeys);if(!e.includes(r.cacheExpandedKey)){var n=S(new Set([].concat(S(e),[r.cacheExpandedKey])));r.setState({draggingNode:null,expandedKeys:n}),r.props.onExpand(n)}r.collapseTimer&&clearTimeout(r.collapseTimer),r.cacheExpandedKey=null}else r.setState({draggingNode:null})})),I(r,"onDragStart",(function(t){var e=t.event,n=t.node;if(n.expanded?(r.collapseTimer&&clearTimeout(r.collapseTimer),r.collapseTimer=setTimeout((function(){var t=S(r.state.expandedKeys);if(t.includes(n.uuid)){r.cacheExpandedKey=n.uuid;var e=y()(t,[n.uuid]);r.setState({draggingNode:n,expandedKeys:e}),r.props.onExpand(S(new Set(e)))}}),10)):r.setState({draggingNode:n}),e.dataTransfer){var o=document.getElementById(G);o&&document.body.removeChild(o);var a=document.createElement("div");a.style.position="fixed";var i=r.props.offscreenRendering;a.style.top=i?"-100px":"0px",a.style.left="0px",a.style.cursor="grabbing",a.id=G,a.innerText=e.target.innerText,document.body.appendChild(a),e.dataTransfer.setDragImage(a,16,10),e.dataTransfer.dropEffect="none"}r.props.onDragStart&&r.props.onDragStart(n)})),I(r,"_showLoading",(function(){if(r.loadingElem){var t=r.containerElem.getBoundingClientRect(),e=t.x,n=t.width;r.loadingElem.style.left="".concat(e,"px"),r.loadingElem.style.width="".concat(n,"px"),r.loadingElem.style.display="block"}})),I(r,"_hideLoading",(function(){r.loadingElem&&(r.loadingElem.style.display="none")})),I(r,"scrollTo",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.virtualListEnabled()){if(!r.treeRef)return;r.treeRef.scrollTo(t)}else{var e=r.containerElem.querySelector('[data-uuid="catalog-'.concat(t.key,'"]'));if(!e)return;var n=e.closest(".ant-tree-treenode");r.containerElem.scrollTop=n.offsetTop-t.offset}})),I(r,"_getChildNodeUIds",(function(t){return t&&t.child_uuid?Object(g.findAllChildrenByParentNode)(r.props.listData,t,!0).map((function(t){return t.uuid})):[]})),I(r,"getTreeData",(function(){var t=r.props,e=t.data,n=t.disabledKeys,o=t.disabledCheckedKeys,i=t.highlightKeys,c=t.renderTitle,u=t.visibleFilter,l=0,f=S(n);if(r.state.draggingNode){var d=r._getChildNodeUIds(r.state.draggingNode);d&&d.length&&f.push.apply(f,S(d))}var p=function(t){var e,r=[],n=x(t=t.filter(u));try{for(n.s();!(e=n.n()).done;){var d=e.value,h=f.includes(d.uuid),m=i.includes(d.uuid),y=o&&o.includes(d.uuid);d.index=l,l++;var v=O(O({},d),{},{disableCheckbox:y,"data-tree-index":d.index,"data-uuid":"catalog-".concat(d.uuid),key:d.uuid,className:s()(["catalog-treenode-level-".concat(d.level+1)],{"catalog-item-highlight":m,"catalog-item-disabled":h}),title:a.a.createElement("div",{className:s()(b.titleWrapper,I({},b.titleDisabled,h))},c(d,d.index))});d.children&&d.children.length&&(v.children=p(d.children)),r.push(v)}}catch(t){n.e(t)}finally{n.f()}return r};return p(e)})),r.maxNodeLengthForLoading=100,r.scrolled=!1;var n=t.expandedKeys||r.getExpandKeysByLevel(t);return r.state={draggingNode:null,expandedKeys:n,selectedKeys:t.selectedKeys||[],currentNodeExpanded:!0,autoExpandParent:!0,showTopScrollMask:!1,showBottomScrollMask:!1},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),r=e,n=[{key:"componentDidMount",value:function(){var t=this.getCurrentScrollElement();t&&t.addEventListener("scroll",this.initScrollValue,!1),this.props.showScrollMask&&(this.initScrollMask(),t&&t.addEventListener("scroll",this.initScrollMask,!1));var e=this.containerElem;e&&this.props.enableScrollHelper&&e.addEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"componentWillUnmount",value:function(){var t=this.getCurrentScrollElement();t&&(t.removeEventListener("scroll",this.initScrollValue,!1),t.removeEventListener("scroll",this.initScrollMask,!1));var e=this.containerElem;e&&e.removeEventListener("dragover",this.dragoverEdgeToScroll)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this,r=this.props,n=r.catalogLevel,o=r.expandedKeys,a=t.catalogLevel,i=t.expandedKeys,c=t.selectedKeys;if(!h()(i,o)){var u=i||this.lastExpandedKeys;return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:u})}if(i&&!h()(i,this.state.expandedKeys))return this.lastExpandedKeys=this.state.expandedKeys,void this.setState({expandedKeys:i});a!==n&&this.setState((function(r){return{expandedKeys:e.getExpandKeysByLevel(t,r.currentNodeExpanded)}})),c&&!h()(c,this.state.selectedKeys)&&this.setState({selectedKeys:c})}},{key:"shouldComponentUpdate",value:function(t,e){return!this.props.editable||!(t.catalogLevel===this.props.catalogLevel&&t.rerenderString===this.props.rerenderString&&t.height===this.props.height&&h()(t.highlightKeys,this.props.highlightKeys)&&h()(t.listData,this.props.listData)&&h()(t.checkedKeys,this.props.checkedKeys)&&h()(t.disabledCheckedKeys,this.props.disabledCheckedKeys)&&h()(e,this.state))}},{key:"dragoverEdgeToScroll",value:function(t){var e=t.clientY,r=document.documentElement,n=r.scrollTop;n>199&&e<150&&r.scrollTop>0?r.scrollTop=n-10:e>window.innerHeight-150&&r.scrollTop<r.scrollHeight-r.offsetHeight&&(r.scrollTop=n+10)}},{key:"getCurrentScrollElement",value:function(){var t=this.containerElem;return this.virtualListEnabled()&&(t=document.querySelector(".ant-tree-list-holder")),t}},{key:"virtualListEnabled",value:function(){var t=this.props,e=t.listData,r=void 0===e?[]:e,n=t.height;return r.length>this.maxNodeLengthForLoading&&n}},{key:"lockExpand",value:function(){var t=this;this.expandLocked=!0,setTimeout((function(){t.expandLocked=!1}),100)}},{key:"foldAll",value:function(){this.setState({expandedKeys:[],autoExpandParent:!1}),this.props.onExpand&&this.props.onExpand([])}},{key:"unfoldAll",value:function(){var t=this.getExpandKeysByLevel(O(O({},this.props),{},{catalogLevel:1/0}));this.setState({expandedKeys:t}),this.props.onExpand&&this.props.onExpand(t)}},{key:"getExpandKeysByLevel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.catalogLevel,n=t.listData,o=t.selectedKeys;if(r===1/0)return n.map((function(t){return t.uuid}));var a,i=[],c=x(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.level<r-1&&i.push(u.uuid)}}catch(t){c.e(t)}finally{c.f()}return o&&o.length&&e&&i.push.apply(i,S(o)),i}},{key:"render",value:function(){var t=this,e=this.props,r=e.listData,n=e.editable,o=void 0!==n&&n,c=e.wrapperClassName,u=void 0===c?"":c,l=e.size,f=e.height,d=e.onRightClick,p=e.checkable,h=e.checkStrictly,m=e.checkedKeys,y={},v={};this.virtualListEnabled()?(y.virtual=!0,y.height="large"===l?f-32:f):(y.virtual=!1,f&&(v.height=f,v.overflow="hidden auto")),d&&(y.onRightClick=function(t){return d(t.node.props)});var g=this.state,w=g.expandedKeys,E=void 0===w?[]:w,O=g.selectedKeys,x=g.autoExpandParent,k=g.showTopScrollMask,j=g.showBottomScrollMask,C=g.draggingNode,L=this.getTreeData();return a.a.createElement("div",{"data-testid":M,className:s()(u,b.wrapper,I(I(I(I(I(I(I({},b.largeWrapper,"large"===l),b.normalWrapper,"normal"===l),b.editable,o),b.dragging,!!C),b.scrolled,k||j),b.topScrolled,k),b.bottomScrolled,j))},a.a.createElement("div",{style:v,ref:function(e){t.containerElem=e}},a.a.createElement(F,_({switcherIcon:a.a.createElement("span",{className:"lake-icon lake-icon-catalog-switcher",style:{fontSize:"16px",fontWeight:"500"}}),showIcon:!1,showLine:!1,draggable:o,expandedKeys:S(new Set(E)),selectedKeys:S(new Set(O)),blockNode:!0,expandAction:"click",autoExpandParent:x,onExpand:this.onExpand,onSelect:this.onSelect,onDrop:this.onDrop,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onCheck:this.onCheck,treeData:L,checkable:p,checkStrictly:h,checkedKeys:m,ref:function(e){t.treeRef=e}},y)),r.length>this.maxNodeLengthForLoading&&a.a.createElement("div",{className:b.loading,ref:function(e){t.loadingElem=e}},a.a.createElement(i.default,null))))}}],n&&T(r.prototype,n),o&&T(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(o.Component);U.defaultProps={listData:[],highlightKeys:[],selectedKeys:[],disabledKeys:[],size:"normal",toggleTitleOnSelect:!1,visibleFilter:function(){return!0},enableScrollHelper:!1,onExpand:function(){}},U.propTypes={autoExpandParent:d.a.bool,size:d.a.oneOf(["normal","large"]),toggleTitleOnSelect:d.a.bool,data:d.a.array.isRequired,listData:d.a.array,editable:d.a.bool.isRequired,offscreenRendering:d.a.bool,onRightClick:d.a.func,onAction:d.a.func,renderTitle:d.a.func.isRequired,catalogLevel:d.a.number,wrapperClassName:d.a.string,onSelect:d.a.func,onDragStart:d.a.func,onDragEnd:d.a.func,onExpand:d.a.func,visibleFilter:d.a.func,highlightKeys:d.a.array,expandedKeys:d.a.array,selectedKeys:d.a.array,disabledKeys:d.a.array,checkedKeys:d.a.object,height:d.a.number,showScrollMask:d.a.bool,rerenderString:d.a.string,enableScrollHelper:d.a.bool,checkable:d.a.bool,checkStrictly:d.a.bool,onCheck:d.a.func,disabledCheckedKeys:d.a.array};e.a=U},4364:function(t,e,r){"use strict";r(67);var n=r(31),o=(r(48),r(11)),a=r(0),i=r.n(a),c=r(60),u=r.n(c),l=r(4284),s=r.n(l),f=r(64),d=r.n(f),p=r(4145),h=r(74),m=r(424),y=r.n(m),v=r(1250),g=r(4075),b=r(259),w=r(4076),_=r(1223),E=r(4006),O=r(114),x=r(1226),S=r(34),k=r(4140),j=r(14),C=r.n(j),L=r(238),T=r(3785);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function N(){N=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==A(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(A(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){R(a,n,o,i,c,"next",t)}function c(t){R(a,n,o,i,c,"throw",t)}i(void 0)}))}}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var F=u()("doc:useDocAction"),U=window.appData.isYuqueMobileApp,z=function(t,e,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[t](e,r)},Y=y()((function(t){z("execCommand","defaultFontsize",t),z("execCommand","clearDefaultFontsize")}),200),W=y()((function(t){z("execCommand","paragraphSpacing",t)})),H=y()((function(t){z("execCommand","autoSpacing",!!t)}));e.a=function(t){var e=t.book,c=t.doc,u=t.commandParams,l=t.dispatch,f=t.onCommandsExecuted,m=t.onSelectTemplate,y=t.onCreateDoc,j=t.history,A=t.spaMode,P=Object(_.a)(e),I=G(Object(a.useState)(null),2),R=I[0],B=I[1],V=G(Object(a.useState)(!1),2),K=V[0],q=V[1],X=G(Object(a.useState)(!1),2),$=X[0],Q=X[1];Object(a.useEffect)((function(){Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1414)]).then(r.bind(null,4362))}),[]);var Z=function(){return z("queryCommandValue","defaultFontsize",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},J=G(Object(a.useState)(z("queryCommandValue","typography")),2),tt=J[0],et=J[1],rt=G(Object(a.useState)(Z(!1)),2),nt=rt[0],ot=rt[1],at=G(Object(a.useState)(z("queryCommandValue","paragraphSpacing")),2),it=at[0],ct=at[1],ut=G(Object(a.useState)(!!z("queryCommandValue","autoSpacing")),2),lt=ut[0],st=ut[1],ft=function(t){et(t),z("execCommand","typography",t),Z()||ot(Z(!1))},dt=Object(a.useCallback)((function(t){ot(t),Y(t)}),[it,nt,lt]),pt=Object(a.useCallback)((function(t){ct(t),W(t)}),[it,nt,lt]),ht=Object(a.useCallback)((function(t){st(!!t),H(!!t)}),[it,nt,lt]),mt=function(t){z("execCommand","layout",t)},yt=function(){B(null)},vt=function(){var t=M(N().mark((function t(){var r,n,a,i,c,l,s,f,d,p,m,v,g,b=arguments;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=D(D({},r=b.length>0&&void 0!==b[0]?b[0]:{}),u),n=r.slug||x.a.createSlug(),r.slug=n,r.book_id=e.id,r.format||(r.format=E.a.getDefaultDocumentFormat(r.type)),a=null,t.prev=7,!A||!j){t.next=26;break}return t.next=11,x.a.createDoc(r,void 0,{useOriginResp:!0});case 11:if(i=t.sent,c=i.data,l=i.toc,F("doc created",{cmd:R,doc:c}),s="/".concat(e.namespace,"/").concat(c.slug,"/edit"),f=s,"doc_toc"===r.create_from&&((d=new URLSearchParams(window.location.search)).set("toc_node_uuid",r.toc_node_uuid),f="".concat(s,"?").concat(d.toString())),P.current.id!==e.id){t.next=23;break}if("markdown"===c.format?(p=new URL(s,window.location.origin),a=a||window,"doc_toc"===r.create_from&&p.searchParams.set("toc_node_uuid",r.toc_node_uuid),a.location.href=p.href):j.push(f),!y){t.next=23;break}return y(c,l),t.abrupt("return");case 23:yt(),t.next=40;break;case 26:if(A){t.next=40;break}return t.next=29,x.a.createDoc(r);case 29:if(m=t.sent,F("doc created",{cmd:R,doc:m}),v="/".concat(e.namespace,"/").concat(m.slug,"/edit"),g=new URL(v,window.location.origin),a=a||window,"doc_toc"===r.create_from&&g.searchParams.set("toc_node_uuid",r.toc_node_uuid),yt(),!y){t.next=39;break}return y(m),t.abrupt("return");case 39:a.location.href=g.href;case 40:t.next=45;break;case 42:t.prev=42,t.t0=t.catch(7),"limit_exceeded"===t.t0.code?o.a.error(t.t0.message):t.t0.code!==h.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 45:return t.prev=45,a=null,t.finish(45);case 48:case"end":return t.stop()}}),t,null,[[7,42,45,48]])})));return function(){return t.apply(this,arguments)}}(),gt=function(){var t=__("确认删除 {title}？",{title:c.title});n.a.confirm({title:t,content:__(""),onOk:function(){l({type:"proxy.web/docs.destroy",payload:{data:{id:c.id}}}).then((function(t){f({cmd:O.a.DOC.delete.cmd,result:t})}))}})},bt=Object(g.a)(),wt=bt.loadTemplateSelector,_t=bt.showTemplateSelector,Et=bt.contextHolder,Ot=Object(k.a)(),xt=Ot.loadCreateAIDocModal,St=Ot.showCreateAIDocModal,kt=Ot.contextHolder,jt=function(){var t=M(N().mark((function t(){var r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_t({book:e});case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",yt());case 5:return t.abrupt("return",Object(v.d)(e,r,u));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ct=function(){var t=M(N().mark((function t(){var r;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St({book:e,isDesktop:!(null===(r=window.appData)||void 0===r||!r.isDesktopApp),commandParams:u});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Lt=function(t){return'<!doctype lake><meta name="doc-version" content="1" /><meta name="viewport" content="fixed" /><meta name="typography" content="classic" /><meta name="paragraphSpacing" content="relax" /><p data-lake-id="u5a25ad48" id="u5a25ad48"><span data-lake-id="u2fd5925c" id="u2fd5925c">文档生成器页面已生成，请前往 </span><a href="'.concat(t,'" target="_blank" data-lake-id="uf45ee0a8" id="uf45ee0a8"><span data-lake-id="u9d5830ac" id="u9d5830ac">文档生成器页面</span></a><span data-lake-id="u9aa5dcaa" id="u9aa5dcaa"> 进行编辑并完成发布。</span></p>')},Tt=function(){var t=M(N().mark((function t(e){var r,n,o,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.title,n=e.type,o=e.docId,t.prev=1,t.next=4,w.a({title:r,type:n,doc_id:o});case 4:if(a=t.sent,i=a.data,!a.success||null==i||!i.id){t.next=8;break}return t.abrupt("return","https://".concat(window.location.host,"/doc_generator/").concat(i.id));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),At=function(){var n=M(N().mark((function n(a,i){var h,y,v,g,w,_,E,k,j,A,P,I,R,M;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:F("exec",{cmd:a,params:y=u}),B(a),n.t0=a,n.next=n.t0===O.a.DOC.delete.cmd?6:n.t0===O.a.DOC.print.cmd?8:n.t0===O.a.DOC.enter_read_mode.cmd||n.t0===O.a.DOC.publish_enter_read_mode.cmd?10:n.t0===O.a.DOC.open_in_browser.cmd?12:n.t0===O.a.DOC.fullscreen.cmd||n.t0===O.a.DOC.exit_fullscreen.cmd?14:n.t0===O.a.DOC.raw.cmd?16:n.t0===O.a.DOC.view_markdown.cmd?18:n.t0===O.a.DOC.presentation.cmd?20:n.t0===O.a.DOC.create_doc.cmd?22:n.t0===O.a.DOC.create_sre.cmd||n.t0===O.a.DOC.create_prd.cmd?24:n.t0===O.a.NOTE.create_note.cmd?43:n.t0===O.a.DOC.create_doc_template.cmd?46:n.t0===O.a.DOC.create_from_template.cmd?48:n.t0===O.a.DOC.create_ai_doc.cmd?51:n.t0===O.a.DOC.create_markdown.cmd?53:n.t0===O.a.DOC.create_sheet.cmd?55:n.t0===O.a.DOC.create_mind.cmd?57:n.t0===O.a.DOC.create_board.cmd?59:n.t0===O.a.DOC.create_table.cmd?61:n.t0===O.a.DOC.create_thread.cmd?63:n.t0===O.a.DOC.edit.cmd?65:n.t0===O.a.DOC.manage_table.cmd||n.t0===O.a.DOC.manage_doc.cmd?69:n.t0===O.a.DOC.modify_toc.cmd?71:n.t0===O.a.DOC.exit.cmd?73:n.t0===O.a.DOC.archive.cmd?75:n.t0===O.a.DOC.unarchive.cmd?77:n.t0===O.a.DOC.pin.cmd?79:n.t0===O.a.DOC.unpin.cmd?81:n.t0===O.a.DOC.send_mail.cmd?83:n.t0===O.a.DOC.document_layout_select.cmd||n.t0===O.a.DOC.document_layout.cmd?85:n.t0===O.a.DOC.document_typography.cmd?87:n.t0===O.a.DOC.document_fontsize.cmd?89:n.t0===O.a.DOC.document_paragraph_spacing.cmd?91:n.t0===O.a.DOC.document_auto_spacing.cmd?93:95;break;case 6:return gt(),n.abrupt("break",97);case 8:return window.print(),n.abrupt("break",97);case 10:return window.__readyToPublish({enterReadMode:!0}),n.abrupt("break",97);case 12:return window.YuqueDesktopAppJSBridge.openExternalLink("".concat(window.location.origin,"/").concat(e.namespace,"/").concat(c.slug)),n.abrupt("break",97);case 14:return s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能")),n.abrupt("break",97);case 16:return window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html"),n.abrupt("break",97);case 18:return window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown"),n.abrupt("break",97);case 20:return window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present")),n.abrupt("break",97);case 22:return vt({type:"Doc",format:d.a.FORMAT.LAKE,title:y.title,slug:y.slug}),n.abrupt("break",97);case 24:return v=a===O.a.DOC.create_sre.cmd?p.a.SRE:p.a.PRD,g="WIP ".concat(C()().format("YYYYMMDD")," ").concat(v," 文档"),w="".concat(v," 文档"),_=D({type:"Doc",format:d.a.FORMAT.LAKE,title:g,slug:y.slug},u),E=y.slug||x.a.createSlug(),_.slug=E,_.book_id=e.id,n.next=33,x.a.createDoc(_,void 0,{useOriginResp:!0});case 33:return k=n.sent,j=k.data,n.next=37,Tt({title:w,type:v,docId:j.id});case 37:return A=n.sent,P={id:j.id,format:d.a.FORMAT.LAKE,save_type:"user",draft_version:j.draft_version,body_asl:Lt(A)},n.next=41,Object(L.updateContent)(P);case 41:return window.location.href=A,n.abrupt("break",97);case 43:return window.appData.isDesktopApp?null===(I=window.YuqueDesktopAppJSBridge)||void 0===I||null===(R=I.ipcSend)||void 0===R||R.call(I,{channel:S.a.MINI_WINDOW.OPEN_WINDOW}):Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1414)]).then(r.bind(null,4362)).then((function(t){t.default.show()})),n.abrupt("break",97);case 46:return vt({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"}),n.abrupt("break",97);case 48:return m&&m(),jt(),n.abrupt("break",97);case 51:return Ct(),n.abrupt("break",97);case 53:return vt({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:y.title,slug:y.slug}),n.abrupt("break",97);case 55:return vt({type:"Sheet",title:y.title,slug:y.slug}),n.abrupt("break",97);case 57:case 59:return vt({type:"Board",title:y.title,slug:y.slug}),n.abrupt("break",97);case 61:return vt({type:"Table",title:y.title,slug:y.slug}),n.abrupt("break",97);case 63:return window.location.href="/".concat(e.namespace,"/new"),n.abrupt("break",97);case 65:return M="/".concat(e.namespace,"/").concat(c.slug,"/edit"),(T.d.isCycleThreadRepo(e)||null!==(h=window.appData)&&void 0!==h&&h.newThreadEnable&&T.d.isThreadRepo(e))&&(M="/thd/".concat(e.namespace,"/").concat(c.slug,"/edit")),U?b.a.pushWebWindow({url:"".concat(window.location.origin).concat(M)}):window.location.href=M,n.abrupt("break",97);case 69:return window.location.href="/r/".concat(e.namespace,"/docs"),n.abrupt("break",97);case 71:return window.location.href="/r/".concat(e.namespace,"/toc?from=").concat(c.slug),n.abrupt("break",97);case 73:return window.location.href="/dashboard",n.abrupt("break",97);case 75:return l({type:"proxy.web/docs.archive",payload:{data:{id:c.id}}}).then((function(t){o.a.success(__("话题已归档")),f({cmd:O.a.DOC.archive.cmd,result:t})})),n.abrupt("break",97);case 77:return l({type:"proxy.web/docs.unarchive",payload:{data:{id:c.id}}}).then((function(t){o.a.success(__("已取消归档")),f({cmd:O.a.DOC.unarchive.cmd,result:t})})),n.abrupt("break",97);case 79:return l({type:"proxy.web/docs.pin",payload:{data:{id:c.id}}}).then((function(t){o.a.success(__("置顶成功")),f({cmd:O.a.DOC.pin.cmd,result:t})})),n.abrupt("break",97);case 81:return l({type:"proxy.web/docs.unpin",payload:{data:{id:c.id}}}).then((function(t){o.a.success(__("已取消置顶")),f({cmd:O.a.DOC.unpin.cmd,result:t})})),n.abrupt("break",97);case 83:return q(!0),n.abrupt("break",97);case 85:return mt(i),n.abrupt("break",97);case 87:return ft(i),n.abrupt("break",97);case 89:return dt(i),n.abrupt("break",97);case 91:return pt(i),n.abrupt("break",97);case 93:return ht(i),n.abrupt("break",97);case 95:return t.onCommandsExecuted({cmd:a}),n.abrupt("break",97);case 97:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}();return i.a.useEffect((function(){R&&(null==R?void 0:R.cmd)===O.a.DOC.create_from_template.cmd&&wt(),R&&(null==R?void 0:R.cmd)===O.a.DOC.create_ai_doc.cmd&&xt()}),[R]),i.a.useEffect((function(){window.__execAction=function(e,r){[O.a.DOC.save_published_as_version.cmd,O.a.DOC.save_editing_as_version.cmd].includes(e)&&(At(e,r),t.onSelect({key:e}))}}),[]),{cmd:R,sendAlimail:K,mailSending:$,typography:tt,defaultFontSize:nt,paragraphSpacing:it,autoSpacing:lt,reset:yt,doAction:At,setSendAlimail:q,setMailSending:Q,getEditorLayout:function(){return z("queryCommandValue","layout")},getWordCount:function(){return z("queryCommandValue","wordCount")},contextHolder:i.a.createElement(i.a.Fragment,null,Et,kt)}}},4370:function(t,e,r){"use strict";var n=r(0);e.a=function(t,e){Object(n.useEffect)((function(){if(t){var r=function(t){return t.preventDefault(),e&&(t.returnValue=e),e};return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}}}),[e,t])}},4401:function(t,e,r){"use strict";r(175);var n=r(44),o=(r(40),r(9)),a=(r(277),r(147)),i=(r(1219),r(959)),c=(r(48),r(11)),u=(r(130),r(41)),l=(r(138),r(30)),s=(r(67),r(31)),f=r(0),d=r.n(f),p=r(6),h=r.n(p),m=r(1441),y=r(1437),v=r(1428),g=r(88),b=r.n(g),w=r(152),_=r.n(w),E=r(4457),O=r(1342),x=r.n(O),S=r(81);var k=function(t,e){var r=Object(f.useRef)();Object(f.useEffect)((function(){r.current=t}),[t]),Object(f.useEffect)((function(){if(null!==e){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e])},j=r(4370),C=r(216),L=r(3789),T=r(208),A=r(47),N=r(1467),P=r(4469);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function I(){I=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==D(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(D(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function R(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var M=function(t){var e=t.docs,n=t.onSuccess,o=t.bookId,a=e.length,i=function(){var t,i=(t=I().mark((function t(){var i,c;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=I().mark((function t(){var a,i,u,l,s,f,d;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e[c].slug,t.prev=1,t.next=4,A.a.docs.findOne({id:a,book_id:o});case 4:if(i=t.sent,u=i.format,l=i.content,s=null,"lakesheet_html"!==u){t.next=12;break}s=Object(P.a)(i.content),f="lakesheet",t.next=17;break;case 12:if("html"!==u){t.next=17;break}return t.next=15,Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1695)]).then(r.bind(null,4038)).then((function(t){return t.htmlToLakeAndHtml(l)}));case 15:s=t.sent,f="lake";case 17:return d={id:i.id,format:f,body_asl:s.value,draft_version:i.draft_version,save_type:"auto"},s.html&&(d.body_html=s.html),t.next=21,A.a.docs.updateContent(d);case 21:return t.next=23,A.a.docs.publish({id:i.id,format:f,notify:!1,force:!0});case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(1),console.log("convert error",t.t0),n();case 29:case"end":return t.stop()}}),t,null,[[1,25]])})),c=0;case 2:if(!(c<a)){t.next=7;break}return t.delegateYield(i(),"t0",4);case 4:c++,t.next=2;break;case 7:n();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){R(a,n,o,i,c,"next",t)}function c(t){R(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return Object(f.useEffect)((function(){return i(),function(){}}),[]),d.a.createElement("div",null)};M.propTypes={onSuccess:h.a.func.isRequired,bookId:h.a.number.isRequired,docs:h.a.array.isRequired};var G=M,B=r(975),F="DocImport-module_docImport_uDZWD",U="DocImport-module_title_vylxD",z="DocImport-module_tips_gx2+N",Y="DocImport-module_help_YDms4",W="DocImport-module_processingModal_5vLO+",H="DocImport-module_setting_6ttU6",V="DocImport-module_settingTitle_EsA43",K="DocImport-module_settingUpload_WXf0g",q="DocImport-module_processing_K3nVL",X="DocImport-module_processingTitle_UzLg1",$="DocImport-module_processingFooter_xOxG5",Q="DocImport-module_fileList_jRvlw",Z="DocImport-module_fileItem_gtT95",J="DocImport-module_fileItemIcon_SdTY-",tt="DocImport-module_fileItemTitle_qprAi",et="DocImport-module_spin_aEZeg",rt="DocImport-module_uploadingStatus_UWCen",nt="DocImport-module_hr_nD0TF",ot="DocImport-module_footerTitle_2O1eI",at="DocImport-module_radioGroup_klLUa",it=r(323),ct=r(1542),ut={id:14,content:'{"popupType":"activity","title":"👋🏻 Hi，亲爱的印象笔记用户","desc":"欢迎加入语雀，开启新的创作旅程，语雀会稳定地陪伴着你。\\n<br />\\n<br />\\n为感谢你的选择，已赠送你 1 个月语雀会员。\\n<br />\\n<br />\\n✨ 分享你的迁移经验 / 使用心得，再获得 1 个月会员。 <br /><a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/share-events\\">了解详情</a>\\n<br />\\n<br />\\n<a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/evernote\\">👉🏻 迁移支持与反馈</a>","image":"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/345912/1678879373131-361a8d0b-c661-4afa-8714-9b49afc2ef87.png?x-oss-process=image%2Fresize%2Cw_1272%2Climit_0","type":"normal","mainButton":{"title":"我知道了","openType":"close"},"viceButton":{"title":"","openType":"close"},"otherButton":{"openType":"href"}}',type:"public_popup",user_id:null,created_at:"2023-07-22T02:22:29.000Z",updated_at:"2023-07-22T02:25:07.000Z",deleted_at:null,_serializer:"admin.tip"};function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(){st=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==lt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function k(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(lt(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function ft(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ft(a,n,o,i,c,"next",t)}function c(t){ft(a,n,o,i,c,"throw",t)}i(void 0)}))}}function pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yt(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){if(t){if("string"==typeof t)return bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var wt=s.a.confirm,_t=B.a.STATUS,Et=window.appData.settings&&window.appData.settings.max_import_task_count||2,Ot=function(t){var e=t.visible,r=t.book,p=t.group,h=t.formats,g=t.importType,w=t.importParams,O=t.wrapModal,x=void 0===O||O,C=t.autoConvert,P=void 0===C||C,D=vt(Object(f.useState)(_t.INIT),2),I=D[0],R=D[1],M=vt(Object(f.useState)([]),2),lt=M[0],ft=M[1],pt=vt(Object(f.useState)([]),2),mt=pt[0],bt=pt[1],Ot=vt(Object(f.useState)(0),2),xt=Ot[0],St=Ot[1],kt=vt(Object(f.useState)(0),2),jt=kt[0],Ct=kt[1],Lt=vt(Object(f.useState)(0),2),Tt=Lt[0],At=Lt[1],Nt=vt(Object(f.useState)({}),2),Pt=Nt[0],Dt=Nt[1],It=vt(Object(f.useState)(!1),2),Rt=It[0],Mt=It[1],Gt=vt(Object(f.useState)(!0),2),Bt=Gt[0],Ft=Gt[1],Ut=vt(Object(f.useState)(!1),2),zt=Ut[0],Yt=Ut[1],Wt=vt(Object(f.useState)([]),2),Ht=Wt[0],Vt=Wt[1],Kt=vt(Object(f.useState)(!1),2),qt=Kt[0],Xt=Kt[1],$t=Object(f.useRef)();Object(j.a)(!zt&&I===_t.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Qt=function(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if(Ht.length>0)return Ht.push(t),void Vt(yt(Ht));Ht.push(t)}var e=t.data,r=t.file,n=t.filename,o=t.onError,a=t.onSuccess;t.__uploaded=!0;var i=ht(ht(ht({},w),e),{},{filename:n,path:r.path});r.uploading=!0,Object(T.f)({requestData:i,params:t,onError:o,onSuccess:function(t){a(t,r)}})},Zt={evernote:[{default:_.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],gitbook:[{default:_.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1}],confluence:[{type:"text",label:d.a.createElement(u.a,{type:"flex",justify:"space-between"},d.a.createElement(l.a,null,__("批量替换链接")),d.a.createElement(l.a,null,d.a.createElement("a",{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(t,e,r){var n=E.validator.httpURL(e);Ft(!n),r(n)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]},Jt=[{key:"markdown",value:"markdown",invertedIndex:["markdown","zip"],title:__("单个 Markdown 文件"),desc:".md .markdown .mark .txt",name:__("Markdown")},{key:"zip",value:"zip1",invertedIndex:["markdown","zip"],title:__("Markdown 打包后的压缩文件"),desc:".zip",name:__("Markdown"),formValue:{fileFormat:"markdown"}},{key:"zip",value:"zip2",invertedIndex:["markdown","zip"],title:__("HTML 打包后的压缩文件"),desc:".zip",name:__("HTML"),formValue:{fileFormat:"html"}},{key:"zip",value:"zip3",invertedIndex:["markdown","zip"],title:__("Lake 打包后的压缩文件"),desc:".zip",name:"LAKE",formValue:{fileFormat:"html"}}];Object(f.useEffect)((function(){I!==_t.PROCESSING||Rt||R(_t.SUCCESS)}),[I,Rt]);var te=function(t){return t.response&&t.response.data&&t.response.data.status},ee=function(t){var e=t||{},n=e.data,o=e.joinedEvernoteIncentive,a={};if(n){var i,u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=gt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(u.s();!(i=u.n()).done;){var l=i.value;a[l.id]=l}}catch(t){u.e(t)}finally{u.f()}}var s=mt.map((function(t){var e,r,n;if(!t.response||!t.response.data)return t;var o=a[t.response.data.id];if(!o)return t;var i=b()(o,"error.limitError");if(i&&400===i.status&&i.code){if(window.appData.isDesktopApp)return c.a.error(__("桌面端不支持此操作，请去 web 端完成"));var u=L.h.getMessage(i.code,{isImport:!0},i)||{},l=u.msg,s=u.alwaysOpen,f=u.level,d=u.callback;if(l)return d(c.a[f||"error"](l,s?0:void 0)),Yt(!0),t}t.response.data=ht(ht({},t.response.data),o),o.status===_t.SUCCESS?(t.status=_t.SUCCESS,t.url=o.url):(o.status===_t.ERROR||o.error)&&(t.status=_t.ERROR);var p=null==t||null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r||null===(n=r.successDocs)||void 0===n?void 0:n.filter((function(t){return"html"===t.format||"lakesheet_html"===t.format}));return(null==p?void 0:p.length)>0&&P&&ft(lt.concat(p)),t})),f=0,d=0;s.forEach((function(t){var e=te(t);t.status!==_t.ERROR&&e!==_t.ERROR&&e!==_t.SUCCESS||f++,t.status!==_t.ERROR&&e!==_t.ERROR||d++})),s.filter((function(t){var e=te(t);return e===_t.PENDING||t.status!==_t.ERROR&&!(null!=e||!t.uploading&&"done"!==t.status&&100!==t.percent)})).length<Et&&function(){for(var t=Ht.shift();t&&t.__uploaded;)t=Ht.shift();t&&Qt(t,!0),Vt(yt(Ht))}(),f>jt&&Ct(f),At(d),bt(s),xt===f?(Mt(!1),function(){if(r.toc){var t="highlightBookImport_".concat(r.slug,"_").concat(r.id),e=r.toc[0];S.a.set(t,e?e.uuid:"_")}}()):R(_t.PROCESSING),o&&Object(ct.b)({tip:ut})};k(dt(st().mark((function t(){var r,n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=mt.filter((function(t){return t.response&&t.response.data}))).length){t.next=3;break}return t.abrupt("return",ee());case 3:if(e){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,A.a.import.getImportResult({files:JSON.stringify(r.map((function(t){return{convertTaskId:t.response.data.convertTaskId,id:t.response.data.id,type:t.response.data.type,name:t.name}}))),toc_node_uuid:w&&w.toc_node_uuid,format:null==Pt?void 0:Pt.key},{useOriginResp:!0});case 7:n=t.sent,ee(n);case 9:case"end":return t.stop()}}),t)}))),Rt?5e3:null);var re,ne,oe,ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ht(ht({},h.find((function(e){return e.key===t}))),e);Dt(r),Zt[t]&&R(_t.SETTING),"confluence"===t&&Ft(!1)},ie=function(t){return!!Zt[t.key]},ce=function(t){var e=yt(t.fileList),r=e.length;r!==e.filter((function(t){var e=te(t);return e===_t.ERROR||e===_t.SUCCESS})).length&&R(_t.PROCESSING),Mt(!0),bt(e),St(r)},ue=function(){Mt(!1),R((function(e){if(e!==_t.PROCESSING)return t.onCancel(),e;bt((function(e){return t.onCancel(),e}))}))},le=function(){var e,n;if(w&&"doc_toc"===w.create_from)return ue(),mt.forEach((function(t){if(!e){var o=t.response&&t.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(e="/".concat(p.login,"/").concat(r.slug,"/").concat(o.import_toc[0].url),n=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(e="/".concat(p.login,"/").concat(r.slug,"/").concat(o.slug),n=o)}})),void(e&&(t.onRead?t.onRead(n):window.location.href=e));window.location.href="/".concat(p.login,"/").concat(r.slug)},se=d.a.createElement("div",{className:F},(re=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",ne=h.filter((function(t){return t.key.startsWith("lake")})),oe=h.filter((function(t){return!t.key.startsWith("lake")&&"zip"!==t.key})).filter((function(t){return!window.appData.isYuque||"dingdocs"!==t.key})).filter((function(t){return!window.appData.isAts||"word"!==t.key&&"excel"!==t.key})),d.a.createElement("div",{className:"entry",style:{display:I===_t.INIT?"block":"none"}},d.a.createElement("div",{className:U},__("导入")),d.a.createElement("div",{className:z},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),d.a.createElement("a",{href:re,target:"_blank","data-desktoptarget":"_browser",className:Y},__("帮助文档"))),d.a.createElement("div",null,d.a.createElement("h4",null,__("三方格式")),d.a.createElement(N.a,{mode:"import",book:r,types:oe,importType:g,disableUpload:ie,onSelect:ae,onUploadChange:ce,customRequest:Qt,maxCount:0,setModalHide:Xt})),d.a.createElement("div",null,d.a.createElement("h4",null,__("语雀格式")),d.a.createElement(N.a,{mode:"import",book:r,types:ne,importType:g,disableUpload:ie,onSelect:ae,onUploadChange:ce,customRequest:Qt,maxCount:0})))),function(){var t;if(!Pt)return null;var e=Pt.key,a=Pt.multiSettingValue,i=Jt.filter((function(t){return t.invertedIndex.includes(e)})),c=i.find((function(t){return t.value===a}))||(null==i?void 0:i[0]),u=Zt[e];return u?d.a.createElement("div",{className:H,style:{display:I===_t.SETTING?"block":"none"}},d.a.createElement("h1",{className:V},__("{type} 导入配置",{type:(null==c?void 0:c.name)||Pt.name})),!!i.length&&d.a.createElement(n.a.Group,{value:null===(t=c||(null==i?void 0:i[0]))||void 0===t?void 0:t.value,className:at},null==i?void 0:i.map((function(t){return d.a.createElement(n.a,{value:t.value,onClick:function(){return ae(t.key,{multiSettingValue:t.value})}},d.a.createElement(it.a,{variant:"title",type:"strong"},t.title),d.a.createElement(it.a,{variant:"caption-small"},t.desc))}))),d.a.createElement(B.a.AdvanceSetting,{wrappedComponentRef:$t,type:Pt,settings:u,hideHeader:i,actions:d.a.createElement(N.a.FileUpload,{mode:"import",book:r,getParamsOption:function(){return ht(ht({},(null==c?void 0:c.formValue)||{}),$t.current.getValue())},fileOption:Pt,importType:g,customRequest:Qt,onUploadChange:ce,maxCount:0},d.a.createElement(o.a,{type:"primary",disabled:!Bt,className:K},__("选择本地文件")))})):null}(),I!==_t.INIT&&I!==_t.SETTING?d.a.createElement("div",{className:q},d.a.createElement("h1",{className:X},I===_t.DONE?__("导入完成"):__("导入中")),d.a.createElement("div",{className:Q},mt.map((function(t){return d.a.createElement(u.a,{type:"flex",justify:"space-between",align:"middle",className:Z,key:t.uid},d.a.createElement(l.a,null,d.a.createElement(u.a,{type:"flex",align:"middle"},d.a.createElement(l.a,null,d.a.createElement("img",{src:Pt.icon,className:J}),function(t){var e,r=t.name,n=te(t);return e=t.url?d.a.createElement("a",{className:tt,href:t.url,target:"_blank"},r):d.a.createElement("h2",{className:tt},r),t.status!==_t.ERROR&&n!==_t.ERROR||(e=d.a.createElement(i.a,{placement:"right",content:__("文件处理失败，请重新上传。")},e)),e}(t)))),d.a.createElement(l.a,null,function(t){var e=te(t);if(t.status===_t.ERROR||e===_t.ERROR){var r=t.error&&t.error.response&&t.error.response.data&&t.error.response.data.message;r||(r=t.response&&t.response.data&&t.response.data.error&&t.response.data.error.message);var n=t.response&&t.response.data&&t.response.data.id;return n&&(r="".concat(r," [id: ").concat(n,"]")),r?r+=__("（请重新上传，如果持续失败，请反馈到语雀）"):r=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),d.a.createElement("span",null,d.a.createElement(i.a,{placement:"right",width:600,content:r},d.a.createElement(m.default,null)))}return t.status===_t.SUCCESS||e===_t.SUCCESS?d.a.createElement("span",null,d.a.createElement(y.default,null)):d.a.createElement("span",null,d.a.createElement("span",{className:rt},0===t.percent&&__("等待中"),100===t.percent&&__("处理中"),0!==t.percent&&100!==t.percent&&d.a.createElement("span",null,parseInt(t.percent,10),"%")),d.a.createElement(a.a,{indicator:d.a.createElement(v.default,{style:{fontSize:16},spin:!0}),className:et}))}(t)))}))),d.a.createElement("div",{className:nt}),function(){var t;if(0!==jt&&xt===jt&&0===lt.length){var e;mt.forEach((function(t){if(!e){t.status===_t.ERROR&&((e=t.error&&t.error.response&&t.error.response.data&&t.error.response.data.message)||(e=t.response&&t.response.data&&t.response.data.error&&t.response.data.error.message));var r=t.response&&t.response.data&&t.response.data.id;e&&r&&(e="".concat(e," [id: ").concat(r,"]"))}}));var r=Tt?__("导入结束，有文件导入失败"):__("导入完成");e&&(r="".concat(r," (").concat(e,")")),t=d.a.createElement(u.a,{type:"flex",justify:"space-between",align:"middle"},d.a.createElement(l.a,null,Tt?d.a.createElement(m.default,null):d.a.createElement(y.default,null),d.a.createElement("span",{className:ot},r)),d.a.createElement(l.a,null,d.a.createElement(o.a,{type:"primary",onClick:le},__("查看"))))}else I===_t.PROCESSING||I===_t.UPLOADING||I===_t.PENDING?t=d.a.createElement("div",null,d.a.createElement(a.a,{indicator:d.a.createElement(v.default,{style:{fontSize:16},spin:!0})}),d.a.createElement("span",{className:ot},__("文件导入中")),"(".concat(jt,"/").concat(xt,")")):0!==lt.length&&(t=d.a.createElement("div",null,d.a.createElement(a.a,{indicator:d.a.createElement(v.default,{style:{fontSize:16},spin:!0})}),d.a.createElement("span",{className:ot},__("文件转换中"))));return d.a.createElement("div",{className:$},t)}()):null,P&&function(){if(jt&&xt===jt&&lt.length)return d.a.createElement(G,{docs:lt,bookId:r.id,onSuccess:function(){ft([])}})}());return x?d.a.createElement(s.a,{title:null,onCancel:function(t){I!==_t.INIT&&I!==_t.DONE?(t.preventDefault(),t.stopPropagation(),I===_t.PROCESSING?wt({title:__("导入尚未完成，确认要停止导入?"),content:d.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:ue,onCancel:function(){}}):ue()):ue()},visible:e,footer:null,centered:!0,width:I===_t.INIT?160*Math.min(h.length,4):406,maskClosable:!1,className:I!==_t.INIT&&W,style:qt?{display:"none"}:{}},se):se};Ot.defaultProps={visible:!0,importType:x.a.IMPORT_TYPE.PARSE},Ot.propTypes={visible:h.a.bool,book:h.a.object.isRequired,formats:h.a.array.isRequired,importType:h.a.oneOf([x.a.IMPORT_TYPE.CREATE,x.a.IMPORT_TYPE.PARSE]),onCancel:h.a.func.isRequired,onRead:h.a.func,importParams:h.a.object,group:h.a.object.isRequired,wrapModal:h.a.bool,autoConvert:h.a.bool};e.a=Object(C.b)(Ot,!0)},4405:function(t,e,r){"use strict";r(48);var n=r(11),o=r(0),a=r.n(o),i=r(6),c=r.n(i),u=r(4281);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=p(t[o],t,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==l(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(e,r,n);if("normal"===l.type){if(o=n.done?v:m,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(l(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,f(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),f(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(d(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),f(S,u,"Generator"),f(S,i,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function f(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function h(t){var e=t.doc,r=t.docDomain,i=t.type,c=d(Object(o.useState)(null),2),l=c[0],p=c[1],h=d(Object(o.useState)(!1),2),m=h[0],y=h[1],v=function(){var o,a=(o=s().mark((function o(){var a,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.docVersionProxy.find({doc_id:e.id,doc_type:r,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),n.a.warning(c)),y(!1);case 5:case"end":return o.stop()}}),o)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var a=o.apply(t,e);function i(t){f(a,r,n,i,c,"next",t)}function c(t){f(a,r,n,i,c,"throw",t)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){v()}),[]),m||!l?null:a.a.createElement(u.b,{version:l,docVersionProxy:t.docVersionProxy,onCancel:t.onCancel,onCreated:t.onCreated||function(t){n.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(t.id),target:"_blank","data-testid":"version-link"},t.name)}))}})}h.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},e.a=h},4416:function(t,e,r){"use strict";r(67);var n=r(31),o=(r(40),r(9)),a=(r(48),r(11)),i=r(0),c=r.n(i),u=r(6),l=r.n(u),s=r(216),f=r(150),d=r(1250),p=r(1273);r(1370);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(){m=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=_.prototype=b.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==h(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function y(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e=v(Object(i.useState)(t.doc.title),2),r=e[0],u=e[1],l=v(Object(i.useState)(-1),2),s=l[0],h=l[1],g=function(){var e,n=(e=m().mark((function e(){var n,o,i,u,l,p,h;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.book,o=t.doc,i=t.docletType,u=t.onOpenTemplateSelector,l=t.inEdit,s===f.TYPE.BOOK?(p=n.id,h=f.TARGET_TYPE.BOOK):s===f.TYPE.PERSONAL?(p=window.appData.me.id,h=f.TARGET_TYPE.USER):(p=n.user_id,h=f.TARGET_TYPE.USER),Object(d.e)(p,h,s,i,r,o.id,l).then((function(){var e=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:u},__("查看全部模板")));a.a.success(e),t.onCancel()})).catch((function(t){console.error(t)}));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(t){y(a,n,o,i,c,"next",t)}function c(t){y(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),b=t.group,w=t.organization,_=t.isDesktop;return c.a.createElement(n.a,{className:"modal-without-padding",visible:t.visible,style:{top:78},width:"368px",onCancel:t.onCancel,title:t.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{onClick:t.onCancel},__("取消")),c.a.createElement(o.a,{type:"primary",onClick:g},__("确定")))},c.a.createElement(p.a,{newTemplateName:r,onSetNewTemplateName:u,onSetSelectedScope:h,group:b,organization:w,isDesktop:_}))}b.propTypes={visible:l.a.bool,onCancel:l.a.func,modalTitle:l.a.string,docletType:l.a.string,doc:l.a.object,book:l.a.object,group:l.a.object,organization:l.a.object,isDesktop:l.a.bool,onOpenTemplateSelector:l.a.func,templateProxy:l.a.object,docProxy:l.a.object,inEdit:l.a.bool},e.a=Object(s.b)(b,!0)},4445:function(t,e,r){"use strict";r(277);var n=r(147),o=(r(40),r(9)),a=(r(53),r(12)),i=(r(48),r(11)),c=r(0),u=r.n(c),l=r(6),s=r.n(l),f=r(178),d=r.n(f),p=r(47),h=(r(188),r(32)),m=r(424),y=r.n(m),v=r(4122),g=r.n(v),b=r(4016),w=r(308),_=r(591);function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var x=function(t){var e=E(Object(c.useState)([]),2),r=e[0],n=e[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(t){n(t)}))}),[t]),{mailHistory:r}},S="RecipientSelector-module_recipient_Ds5UW",k="RecipientSelector-module_mention_5r6oN",j="RecipientSelector-module_userForCheck_a4ZZP",C="RecipientSelector-module_mailHistory_-ft0g",L="RecipientSelector-module_title_-yKJG",T="RecipientSelector-module_users_ZwnLM",A="RecipientSelector-module_info_eM40g",N="RecipientSelector-module_avatar_lGHzI",P="RecipientSelector-module_name_HeaN7",D="RecipientSelector-module_dep_B2T89";function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var M=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function G(t){var e=I(Object(c.useState)(!1),2),r=e[0],n=e[1],o=I(Object(c.useState)(t.defaultValue||[]),2),a=o[0],l=o[1],s=x(window.appData.me).mailHistory,f=I(Object(c.useState)([]),2),d=f[0],m=f[1],v=Object(c.useRef)(),w=null,E=__("最多只能选择100个邮箱地址，建议请使用邮件组"),O=__("收件人有重复，已自动去重"),R=function(e){var r=e.length,o=(e=g()(e,(function(t,e){return t.work_id&&e.work_id?t.work_id===e.work_id:!(!t.login||!e.login)&&t.login===e.login}))).length;o>100?(i.a.warning(E),e.splice(100)):o!==r&&i.a.warning(O),l(e),t.onChange(e),n(!1),m([]),setTimeout((function(){v&&v.current&&v.current.focus()}),100)};Object(c.useEffect)((function(){return function(){w&&(clearTimeout(w),w=null)}}));var G=y()((function(t){(function(t){t=t.split(";");var e=[];if(t.forEach((function(t){if(b.validator.isEmail(t))e.push({name:t,email:t});else{var r=t.match(/([^<]+)<([^>]+)>/);r&&b.validator.isEmail(r[2])&&e.push({name:r[1],email:r[2]})}})),e.length>0){var r=a.concat(e);return R(r),v.current.blur(),!0}return!1})(t)||function(t){if(-1!==t.indexOf("@")){var e=t.split("@"),r=e[1],n=M.filter((function(t){return t.startsWith(r)})).map((function(t){return{name:"".concat(e[0],"@").concat(t),email:"".concat(e[0],"@").concat(t)}}));return m(n),!0}return!1}(t)||(n(!1),p.a.users.complete({q:t.trim(),include_unconfirmed_corp_account:!0}).then((function(t){m(t),v.current.focus()})))}),300),B=a.map((function(t){return t.name}));return u.a.createElement("div",{className:S},u.a.createElement("span",{className:k,onClick:function(){if(window.__engine&&window.__engine.extractMention){var t=window.__engine.extractMention();if(0===(t=t.filter((function(t){return t.name&&t.name.trim()&&t.login&&t.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var e=a.concat(t);R(e)}}},__("添加文档中 @ 的人")),u.a.createElement(h.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(t){var e=a.filter((function(e){return t.includes(e.name)}));R(e)},onFocus:function(){0===a.length&&n(!0)},onSearch:G,onBlur:function(){w&&clearTimeout(w),w=setTimeout((function(){n(!1),m([])}),500)},allowClear:!0,value:B,notFoundContent:null,ref:v}),d.length>0&&u.a.createElement("div",{className:j},d.map((function(t){return u.a.createElement("p",{key:t.email,onClick:function(){!function(t){if(100!==a.length)if(0===a.filter((function(e){return e.login===t.login})).length){var e=a.concat(t);R(e)}else i.a.warning(O);else i.a.warning(E)}(t)}},t.avatar_url&&u.a.createElement(_.a,{className:N,src:t.avatar_url,size:32}),u.a.createElement("span",{className:P},t.name),t.dep&&u.a.createElement("span",{className:D},t.dep))}))),r&&s&&s.length>0&&u.a.createElement("div",{className:C,"data-testid":"mail-history"},u.a.createElement("div",{className:L},__("历史记录")),u.a.createElement("ul",null,s.map((function(t){return u.a.createElement("li",{onClick:function(){!function(t){R(t.mail_list)}(t)},key:t.id},u.a.createElement("p",{className:T},t.mail_list.map((function(t){return t.name})).join(",")),u.a.createElement("p",null,u.a.createElement("span",{className:A},__("标题："),t.title)))})))))}G.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var B=Object(w.b)(G,!1),F="DocSendMail-module_sendMail_QBA+O",U="DocSendMail-module_recipient_zqM9E",z="DocSendMail-module_title_Af2FA",Y="DocSendMail-module_submitButton_HEsW-",W="DocSendMail-module_mailResult_AhaV4";function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function K(t,e,r){return e=X(e),function(t,e){if(e&&("object"==H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,q()?Reflect.construct(e,r||[],X(t).constructor):e.apply(t,r))}function q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(q=function(){return!!t})()}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function Q(t,e,r){return(e=Z(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H(e)?e:e+""}var J=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Q(r=K(this,e,[t]),"ready",(function(){0!==r.state.receiver.length?"sending"!==r.state.mailStatus&&(r.setState({mailStatus:"sending"},(function(){r.props.onMailSending(),r.startClock(5)})),r.timer=setTimeout(r.sendMail,5e3)):i.a.error(__("请选择收件人"))})),Q(r,"startClock",(function(t){r.setState({seconds:t}),0!==t&&"sending"===r.state.mailStatus&&(r.clocker=setTimeout((function(){r.startClock(t-1)}),1e3))})),Q(r,"sendMail",(function(){var t=r.state,e=t.receiver,n=t.title,o={id:r.props.doc.id,title:n||r.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=r.normalizeMail(e)}catch(t){return void i.a.error(t.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(t){r.setState({mailStatus:"success",receiver:[]}),r.props.onMailSended()})).catch((function(t){t.status&&t.status>=400&&t.status<500?r.setState({mailStatus:"block",mailBlockMessage:t.message}):r.setState({mailStatus:"failed"})}))})),Q(r,"retry",(function(){r.setState({mailStatus:"normal",mailBlockMessage:""})})),Q(r,"normalizeMail",(function(t){return t.map((function(t){return d()(t,["email","login","user_id","name"])}))})),Q(r,"onChangeReceiver",(function(t){r.setState({receiver:t})})),Q(r,"onChangeTitle",(function(t){r.setState({title:t.target.value})})),Q(r,"renderMailSelector",(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:z},u.a.createElement("h5",null,__("标题")),u.a.createElement(a.a,{onChange:r.onChangeTitle,defaultValue:r.props.doc.title})),u.a.createElement("div",{className:U},u.a.createElement("h5",null,__("收件人")),u.a.createElement(B,{onChange:r.onChangeReceiver,defaultValue:r.state.receiver})),u.a.createElement("div",{className:Y},u.a.createElement(o.a,{onClick:r.ready,type:"primary"},__("发送"))))})),Q(r,"cancel",(function(){r.timer&&(clearTimeout(r.timer),r.timer=null),r.clocker&&(clearTimeout(r.clocker),r.clocker=null),r.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),r.props.onMailSended()})),Q(r,"renderSending",(function(){return u.a.createElement("div",{className:W},u.a.createElement(n.a,{justify:"block"}),u.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:u.a.createElement("a",{href:"#",onClick:r.cancel},__("撤销")),seconds:r.state.seconds||0})))})),Q(r,"renderSuccess",(function(){return u.a.createElement("div",{className:W},u.a.createElement("span",{className:"larkicon larkicon-check-o"}),u.a.createElement("p",null,__("发送成功")))})),Q(r,"renderFailed",(function(){return u.a.createElement("div",{className:W},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,__("发送失败, 请{retry}",{retry:u.a.createElement("a",{href:"#",onClick:r.retry},__("重新发送"))})))})),Q(r,"renderBlock",(function(){return u.a.createElement("div",{className:W},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,r.state.mailBlockMessage))})),Q(r,"renderCanceled",(function(){return u.a.createElement("div",{className:W},u.a.createElement("p",null,__("已取消发送")))})),r.state={receiver:[]},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),r=e,(c=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var t;switch(this.state.mailStatus){case"sending":t=this.renderSending();break;case"success":t=this.renderSuccess();break;case"failed":t=this.renderFailed();break;case"block":t=this.renderBlock();break;case"canceled":t=this.renderCanceled();break;default:t=this.renderMailSelector()}return u.a.createElement("div",{className:F,"data-testid":"send-mail-modal"},u.a.createElement("h4",null,__("发送到邮箱")),u.a.createElement("p",null,__("将文档内容发送到指定邮箱")),t)}}])&&V(r.prototype,c),l&&V(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,l}(c.PureComponent);J.defaultProps={},J.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};e.a=J},4457:function(t,e,r){t.exports=r(4016)},4644:function(t,e,r){"use strict";r.r(e);r(67);var n=r(31),o=(r(588),r(110)),a=r(0),i=r.n(a),c=r(6),u=r.n(c),l=r(60),s=r.n(l),f=r(473),d=r(64),p=r.n(d),h=r(501),m=r(4314),y=r(4405),v=r(4416),g=r(4248),b=r(4401),w=r(1476),_=r(63),E=r(5),O=r.n(E),x=r(47),S=r(4146),k=r(114),j=r(1226),C=r(308),L=r(4129),T=r(1220),A=r(1424),N=r(34),P=r(499),D=r(4445),I={wrap:"DocActionMenu-module_wrap_oZQ06",featureGuide:"DocActionMenu-module_featureGuide_8ujxi",menuItemContainer:"DocActionMenu-module_menuItemContainer_pMpjo",menuTileWrapper:"DocActionMenu-module_menuTileWrapper_WYEAB",iconContainer:"DocActionMenu-module_iconContainer_QaDi2","icon-ai-active":"DocActionMenu-module_icon-ai-active_EoJt6",menu:"DocActionMenu-module_menu_6Bn5J",iconBeta:"DocActionMenu-module_iconBeta_9CIl5"},R=r(4364),M=s()("doc:actionMenu"),G=function(t){var e,r=Object(R.a)(t),a=r.cmd,c=r.sendAlimail,u=r.mailSending,l=r.reset,s=r.doAction,f=r.contextHolder,d=r.setSendAlimail,E=r.setMailSending,C=t.book,G=t.className,B=t.doc,F=t.commandParams,U=t.useDynamicShortcutTip;M("render, currect action",a,F);var z,Y,W,H=Object(T.b)(),V=Object(S.a)("createNewDoc").shortcut,K=null===(e=window.appData)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.desktop_offline_enhanced;return i.a.createElement("div",{className:"".concat(I.wrap," ").concat(G)},i.a.createElement(o.a,{className:I.menu,selectable:!1,onClick:function(e){var r=e.key;t.onSelect({key:r}),s(r),Object(P.a)("c34619.d69461",{create_type:r})}},(z=t.commands,Y=t.disabledCommands,W={},Y.forEach((function(t){W[t.cmd]=!0})),z.slice(0).map((function(t,e){if("divide"===t.cmd)return i.a.createElement(o.a.Divider,{key:"".concat(e,"-divider")});var r=t.menuTitle||t.title,n=U?i.a.createElement("div",{className:I.menuTileWrapper},i.a.createElement("span",null,r),i.a.createElement("span",null,t.cmd===k.a.DOC.create_doc.cmd?V:"")):r,a=[k.a.DOC.create_from_template.cmd,k.a.DOC.import_to_book.cmd,k.a.DOC.create_table.cmd,k.a.DOC.create_sre.cmd,k.a.DOC.create_prd.cmd,k.a.DOC.create_test.cmd,k.a.DOC.create_sad.cmd];return K||a.push(k.a.CATALOG.create_title.cmd,k.a.CATALOG.create_link.cmd),!H&&N.c&&a.includes(t.cmd)?i.a.createElement(o.a.Item,{key:t.cmd,disabled:!0,className:"doc-action-menu-item-".concat(t.cmd),"data-testid":"doc-action-menu-item-".concat(t.cmd)},i.a.createElement(A.a,{tooltipPlacement:"right"},i.a.createElement("div",{className:I.menuItemContainer,"data-aspm-click":t.aspm},t.icon&&i.a.createElement(_.b,{className:I.iconContainer,name:t.icon,width:20,height:20}),t.tip_id?i.a.createElement(m.a,{className:I.featureGuide,tip_id:t.tip_id},r):r))):t===k.a.DOC.create_doc?i.a.createElement(o.a.Item,{key:t.cmd,disabled:W[t.cmd]||!1,className:"doc-action-menu-item-".concat(t.cmd),"data-testid":"doc-action-menu-item-".concat(t.cmd)},i.a.createElement(L.a,{content:[__("点击「文档」")],placement:"right",taskId:h.TASK_ID.NOVICE_OFFER,stage:h.ACTION.new_doc,step:2,width:146,height:30,borderRadius:8,popWidth:162,action:"click",offsetY:3,offsetX:1,getPopupContainer:function(t){var e;return null===(e=t.parentNode)||void 0===e?void 0:e.parentNode}},i.a.createElement("div",{className:I.menuItemContainer,"data-aspm-click":t.aspm},t.icon&&i.a.createElement(_.b,{className:I.iconContainer,name:t.icon,width:20,height:20}),t.tip_id?i.a.createElement(m.a,{className:I.featureGuide,tip_id:t.tip_id},n):n))):i.a.createElement(o.a.Item,{key:t.cmd,disabled:W[t.cmd]||!1,className:"doc-action-menu-item-".concat(t.cmd),"data-testid":"doc-action-menu-item-".concat(t.cmd)},i.a.createElement("div",{className:I.menuItemContainer,"data-aspm-click":t.aspm},t.icon&&i.a.createElement(_.b,{className:O()(I.iconContainer,I[t.icon]),name:t.icon,width:20,height:20}),t.tip_id?i.a.createElement(m.a,{className:I.featureGuide,tip_id:t.tip_id},n):n))})))),f,a===k.a.DOC.export_doc.cmd&&i.a.createElement(g.a,{doc:B,bookId:C.id,onCancel:l,exportParams:F,canExportMultiple:F.can_export_multiple}),a===k.a.BOOK.export_book.cmd&&i.a.createElement(w.a,{visible:!0,book:C,exportParams:F,onCancel:l}),a===k.a.DOC.import_to_doc.cmd&&i.a.createElement(b.a,{book:C,formats:j.a.getImportFormats({multi:!1}),importType:p.a.IMPORT_TYPE.PARSE,onCancel:l,onSuccess:function(e){t.onCommandsExecuted({cmd:a,result:e})}}),a===k.a.DOC.import_to_book.cmd&&i.a.createElement(b.a,{book:C,importParams:F,formats:j.a.getImportFormats({multi:!0}),importType:p.a.IMPORT_TYPE.CREATE,onCancel:l,onSuccess:function(e){t.onCommandsExecuted({cmd:a,result:e})},group:window.appData.group}),a===k.a.DOC.save_as_template.cmd&&i.a.createElement(v.a,{visible:a===k.a.DOC.save_as_template.cmd,onCancel:l,modalTitle:__("另存为模板"),book:C,doc:t.doc,group:window.appData.group,organization:window.appData.organization,docletType:t.doc.type,onOpenTemplateSelector:function(){return s(k.a.DOC.create_from_template.cmd)},inEdit:t.inEdit}),a===k.a.DOC.save_published_as_version.cmd&&i.a.createElement(y.a,{doc:B,docDomain:"Doc",type:"published",onCancel:l,docVersionProxy:x.a.docVersions}),i.a.createElement(n.a,{width:500,visible:c,footer:null,closable:!u,maskClosable:!1,onCancel:function(){d(!1)}},c&&i.a.createElement(D.a,{onMailSended:function(){E(!1)},onMailSending:function(){E(!0)},doc:B})))};G.defaultProps={className:"",disabledCommands:[],onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},G.propTypes={className:u.a.string,group:u.a.object,book:u.a.object.isRequired,doc:u.a.object,commands:u.a.array.isRequired,commandParams:u.a.object,disabledCommands:u.a.array,onSelect:u.a.func,onCommandsExecuted:u.a.func,dispatch:u.a.func,onSelectTemplate:u.a.func,inEdit:u.a.bool,onCreateDoc:u.a.func,menuId:u.a.string,spaMode:u.a.bool,useDynamicShortcutTip:u.a.bool};e.default=Object(f.d)()(Object(C.b)(G))},5181:function(t,e,r){"use strict";r(48);var n=r(11),o=(r(67),r(31)),a=r(0),i=r.n(a),c=r(6),u=r.n(c),l=r(1233),s=r.n(l),f=r(77),d=r(5),p=r.n(d),h=r(34),m=r(47),y=r(1522),v=r(4359),g=r(5019),b=r(5009);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new N(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,x=O&&O(O(P([])));x&&x!==r&&n.call(x,i)&&(E=x);var S=b.prototype=v.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==w(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function C(e,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(w(e)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){S(a,n,o,i,c,"next",t)}function c(t){S(a,n,o,i,c,"throw",t)}i(void 0)}))}}function j(t){u.a.checkPropTypes(j.propTypes,t,"prop","CatalogViewModel");var e=t.item,r=t.group,a=t.book,c=t.doc,l=t.catalog,d=t.disableSelectorBooks,w=t.showRepoSelector,E=void 0===w||w,x=t.onCopy,S=t.onMove,C=t.onAction,L=t.onDestroy,T=t.onUnshare,A=t.hideCopyWithChildren,N=void 0!==A&&A,P=function(t){e&&C({node_uuid:e.uuid,action:"edit",title:t.title,url:t.url,type:f.TYPES.link,open_window:t.open_window})};return{handleEditLinkNode:P,showCopyToModal:function(){var t=o.a.confirm(),u=function(){var r=k(_().mark((function r(){var o,u,s,f,d,p,h,y,v,g,b=arguments;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=b.length>0&&void 0!==b[0]?b[0]:{},r.prev=1,r.next=4,m.a.catalogNodes.copy({book_id:a.id,node_uuid:e&&e.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0});case 4:if(u=r.sent,s=u.data,f=u.meta,d=f.toc_updated_at,p=f.docIds,t.destroy(),h=o.targetBook,y=o.targetGroup,h.id!==a.id?(v=p[0],g=v?"/go/doc/".concat(p[0]):"/".concat(y.login,"/").concat(h.slug),n.a.success(__("已复制到：{target}",{target:i.a.createElement("a",{href:g,target:"_blank","data-desktoptarget":"_self"},h.name)}),3)):n.a.success(__("复制成功")),!x){r.next=12;break}return r.next=12,x(l,s,O(O({},o),{},{currentItem:e,toc_updated_at:d,doc_ids:p}));case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(1),console.error(r.t0);case 17:return r.prev=17,t.destroy(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[1,14,17,20]])})));return function(){return r.apply(this,arguments)}}();t.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("复制到...")),E&&i.a.createElement("p",{className:b.a.modalDescription},__("可复制到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:E,items:e?[e]:[],submitType:"copy",onSubmit:u,onCancel:function(){t.destroy()},hideCopyWithChildren:N}))})},showMoveToModal:function(){var t=o.a.confirm(),u=function(){var r=k(_().mark((function r(){var o,u,s,f,d,p,h,y=arguments;return _().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(o=y.length>0&&void 0!==y[0]?y[0]:{}).targetGroup,s=o.targetBook,f="/".concat(u.login,"/").concat(s.slug),r.prev=3,r.next=6,m.a.catalogNodes.move({book_id:a.id,node_uuid:e&&e.uuid,target_uuid:o.target_uuid,action:o.action,target_book_id:o.targetBook.id,with_children:o.with_children,insert_to_catalog:o.insert_to_catalog,doc_id:c&&c.id},{useOriginResp:!0,ignoreGlobalMessage:!0});case 6:if(d=r.sent,p=d.data,h=d.meta.docIds,t.destroy(),s.id!==a.id?n.a.success(__("已移动到「{target}」，{link}",{target:s.name,link:i.a.createElement("a",{href:f,target:"_blank","data-desktoptarget":"_self"},__("去查看"))}),5):n.a.success(__("移动成功")),!S){r.next=14;break}return r.next=14,S(l,p,O(O({},o),{},{currentItem:e,docIds:h}));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),n.a.error(r.t0.message);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})));return function(){return r.apply(this,arguments)}}();t.update({className:p()(b.a.modalCatalog,b.a.modal),icon:null,closable:!0,width:600,footer:null,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("移动到...")),E&&i.a.createElement("p",{className:b.a.modalDescription},__("可移动到有创建文档权限的知识库"))),content:i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{currentGroup:r,currentBook:a,disableSelectorBooks:d,showRepoSelector:E,items:e?[e]:[],submitType:"move",onSubmit:u,onCancel:function(){t.destroy()}}))})},showLinkNodeModal:function(){var t=o.a.confirm();t.update({className:b.a.modal,icon:null,closable:!0,width:520,centered:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{className:b.a.modalTitle},__("添加链接")),i.a.createElement("p",{className:b.a.modalDescription},__("通过添加网页链接，可插入非本知识库的内容"))),content:i.a.createElement(g.a,{item:e,onSubmit:function(e){P(e),t.destroy()},onCancel:function(){return t.destroy()}})})},showRemoveConfirmModal:function(){if(e){var t=o.a.confirm(),c=e.child_uuid?"removeWithChildren":"remove";t.update({className:b.a.removeModal,width:437,centered:!0,title:__("确认要移出目录吗？",{name:e.title}),content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,__("移出后将展示在「全部文档」，可在「文档管理」中添加到目录")),i.a.createElement("p",null,e.child_uuid&&__("将同时移出 {name} 下的所有节点",{name:e.title}))),onOk:function(){return C({node_uuid:e.uuid,action:c}),n.a.success(i.a.createElement(i.a.Fragment,null,__("移出成功！"),i.a.createElement("a",{href:"/r/".concat(r.login,"/").concat(a.slug,"/docs?status=notInTOC"),target:"_blank"},__("查看"))),5)},okText:__("确认"),cancelText:__("取消")})}},showDestroyConfirmModal:function(){var t;e&&o.a.confirm().update({className:b.a.removeModal,width:437,centered:!0,title:__("确认删除 {name} 吗？",{name:e.title}),content:e.child_uuid?__("同时删除 {name} 下的所有文档",{name:e.title}):null,onOk:(t=k(_().mark((function t(){var r,n,o,i;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.updateNode(a,{node_uuid:e.uuid,action:"destroyWithChildren",has_child:!!e.child_uuid});case 2:r=t.sent,n=r.toc,o=r.deletedDocIds,i=void 0===o?[]:o,L&&L(l,n,{currentItem:e,docIds:i});case 7:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),okText:__("确认"),cancelText:__("取消")})},showUnshareConfirmModal:function(){if(e){var t=__("你正在取消《{title}》的分享链接，取消后用户将无法通过原有链接浏览",{title:e.title});o.a.confirm({title:__("关闭分享"),content:t,onOk:function(){T(e)}})}},copyLink:function(){var t;if(e.type===f.TYPES.link)t=e.url;else{var o=window.location,i=o.protocol,c=o.host;t="".concat(i,"//").concat(c,"/").concat(r.login,"/").concat(a.slug,"/").concat(e.url)}s()(t,{format:"text/plain"}),n.a.success(__("链接复制成功"))},openInNewTab:function(){var t="/".concat(a.namespace,"/").concat(e.url);if(h.c)window.YuqueDesktopAppJSBridge.openExternalLink({targetUrl:t,isNewWindow:!0,parent:null});else{var r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href",t),r.click()}},openInNewWindow:function(){var t="/".concat(a.namespace,"/").concat(e.url);if(h.c)window.YuqueDesktopAppJSBridge.openExternalLink({targetUrl:t,isNewWindow:!0,parent:null});else{var r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href",t),r.click()}}}}j.propTypes={group:u.a.object.isRequired,book:u.a.object.isRequired,doc:u.a.object,catalog:u.a.array.isRequired,item:u.a.object,disableSelectorBooks:u.a.array,showRepoSelector:u.a.bool,onCopy:u.a.func,onMove:u.a.func,onAction:u.a.func,onDestroy:u.a.func,onUnshare:u.a.func},e.a={useViewModel:j}},5386:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}));var n=function(){return window.self!==window.top};function o(t){var e=document.querySelector("#".concat(t.id));if(e)return e;var r=document.createElement("div");return r.id=t.id,document.body.append(r),r}},5524:function(t,e,r){"use strict";e.a={modal:"CatalogMenuEditNode-module_modal_4focI",modalTitle:"CatalogMenuEditNode-module_modalTitle_ZgYhp",modalDescription:"CatalogMenuEditNode-module_modalDescription_-7x6D",btnCloseModal:"CatalogMenuEditNode-module_btnCloseModal_ESRS+",menu:"CatalogMenuEditNode-module_menu_IUmmu",menuItem:"CatalogMenuEditNode-module_menuItem_AuSRR",icon:"CatalogMenuEditNode-module_icon_9R6mY",iconBeta:"CatalogMenuEditNode-module_iconBeta_KHwCd",menuItemContent:"CatalogMenuEditNode-module_menuItemContent_Lf9nF",disabled:"CatalogMenuEditNode-module_disabled_G919H",iconWrapper:"CatalogMenuEditNode-module_iconWrapper_IoV7X"}},5793:function(t,e,r){"use strict";r(1219);var n=r(959),o=(r(227),r(101)),a=(r(588),r(110)),i=(r(48),r(11)),c=r(0),u=r.n(c),l=r(6),s=r.n(l),f=r(5),d=r.n(f),p=r(63),h=r(4248),m=r(1522),y=r(4037),v=r(114),g=r(1474),b=r(285),w=r(1424),_=r(5524),E=r(5181);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var L=function(t){var e=t.book,r=t.item,n=t.setEditItem,o=t.hideCopyWithChildren,a=j(Object(c.useState)(!1),2),u=a[0],l=a[1],s=function(){l(!u)},f=function(t){Object(b.c)({targetUrl:t,isNewWindow:!0},g.b)},d=E.a.useViewModel(S(S({},t),{},{showRepoSelector:!0,hideCopyWithChildren:o}));return{state:{exportModalVisible:u},handleMenuClick:function(o,a){switch(o.domEvent.stopPropagation(),a){case v.a.DOC.copyLink.cmd:d.copyLink();break;case v.a.DOC.open_in_new_tab.cmd:d.openInNewTab();break;case v.a.DOC.open_in_new_window.cmd:d.openInNewWindow();break;case v.a.CATALOG.copy.cmd:d.showCopyToModal();break;case v.a.CATALOG.move.cmd:d.showMoveToModal();break;case v.a.CATALOG.edit_link.cmd:d.showLinkNodeModal();break;case v.a.CATALOG.remove.cmd:d.showRemoveConfirmModal();break;case v.a.CATALOG.destroy.cmd:d.showDestroyConfirmModal();break;case v.a.DOC.unshare.cmd:d.showUnshareConfirmModal();break;case v.a.CATALOG.rename.cmd:u=window.appData.locale,l=null==(c=e.toc)?void 0:c.some((function(t){return void 0!==t.original_title})),"en-us"===u&&l?i.a.warn(__("目录被翻译为英文时不允许重命名，可回到中文目录再操作"),5):n(r.uuid);break;case v.a.CATALOG.export.cmd:s();break;case v.a.CATALOG.view_doc.cmd:f("/".concat(e.namespace,"/").concat(r.url));break;case v.a.DOC.edit.cmd:f("/".concat(e.namespace,"/").concat(r.url,"/edit"))}var c,u,l;t.onMenuItemClick(o,a)},toggleExportModalVisible:s}},T=function(t){var e,r=t.item,i=t.mode,l=t.book,s=t.placement,f=t.align,g=t.visible,b=t.onVisibleChange,E=t.children,O=L(t),x=Object(c.useRef)(),S=m.a.actionsForEdit(r,i,l.abilities),k=window.appData.organization,j=(null==k?void 0:k.id)&&!k.export_content_enable,C=null===(e=window.appData)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.desktop_offline_enhanced,T=[];C&&T.push(v.a.CATALOG.rename.cmd,v.a.CATALOG.edit_link.cmd);var A=u.a.createElement(a.a,{selectedKeys:[]},S.map((function(t){if("divide"===t.cmd)return u.a.createElement(a.a.Divider,{key:t.cmd});var e,r=null;return t.cmd===v.a.CATALOG.export.cmd&&j?r=u.a.createElement(a.a.Item,{key:t.cmd},u.a.createElement(o.a,{overlayInnerStyle:{minWidth:300},title:null!=k&&k.abilities.destroy?__("空间管理设置已禁止空间内容导出。{action}",{action:u.a.createElement("a",{target:"_blank",href:"/r/organizations/dashboard/security"},__("前往设置"))}):__("管理员已关闭空间内容导出权限，请联系空间管理员开启。")},u.a.createElement("div",{className:d()(_.a.menuItemContent,_.a.disabled)},u.a.createElement("span",{className:_.a.iconWrapper},u.a.createElement(p.b,{name:t.icon,width:16,height:16})),u.a.createElement("span",null,t.title)))):(r=u.a.createElement(a.a.Item,{key:t.cmd,onClick:function(e){O.handleMenuClick(e,t.cmd)}},u.a.createElement("div",{className:_.a.menuItemContent},u.a.createElement("span",{className:_.a.iconWrapper},u.a.createElement(p.b,{name:t.icon,width:16,height:16})),u.a.createElement("span",null,t.title))),r=T.includes(t.cmd)?r:(e=r,u.a.createElement(w.a,{tooltipPlacement:"right"},e))),r})));return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,visible:g,onVisibleChange:b,align:f,placement:s,getPopupContainer:function(){var t;return(null===(t=x.current)||void 0===t?void 0:t.closest("[".concat(y.d,"]")))||document.body},content:A},u.a.cloneElement(E,{ref:x})),O.state.exportModalVisible&&u.a.createElement(h.a,{visible:!0,bookId:l.id,exportParams:{doc_id:r.doc_id,toc_node_uuid:r.uuid,toc_node_url:r.url,toc_node_title:r.title,create_from:"doc_toc"},onCancel:O.toggleExportModalVisible,canExportMultiple:!0}))};T.defaultProps={mode:"lite",onMenuItemClick:function(){},hideCopyWithChildren:!1},T.propTypes={group:s.a.object.isRequired,book:s.a.object.isRequired,catalog:s.a.array,item:s.a.object.isRequired,mode:s.a.oneOf(["full","lite","desktop"]),placement:s.a.string,align:s.a.object,children:s.a.node.isRequired,visible:s.a.bool,onVisibleChange:s.a.func,onAction:s.a.func,setEditItem:s.a.func,onMove:s.a.func,onCopy:s.a.func,isActive:s.a.bool,onMenuItemClick:s.a.func,onUnshare:s.a.func,hideCopyWithChildren:s.a.bool},e.a=T},702:function(t,e,r){"use strict";r(3151);var n=r(807),o=r(80),a=r.n(o),i=r(57),c=r.n(i),u=r(1234),l=r.n(u),s=r(94),f=r.n(s),d=r(135),p=r.n(d),h=r(0),m=r.n(h),y=r(6),v=r.n(y),g=r(5),b=r.n(g),w=r(95),_=r.n(w),E=r(176),O=r.n(E);var x=r(60),S=r.n(x)()("useInifiniteScroll"),k=function(t,e){var r,n,o,a,i,c,u=(r=!1,n=Object(h.useState)(r),o=O()(n,2),a=o[0],i=o[1],(c=Object(h.useRef)(a)).current=a,[a,i,Object(h.useCallback)((function(){return c.current}),[])]),s=O()(u,3),f=s[0],d=s[1],m=s[2],y=Object(h.useRef)(null);y.current=t;var v=Object(h.useCallback)(function(){var t=l()(p.a.mark((function t(e){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=O()(e,1),n=r[0],!m()){t.next=3;break}return t.abrupt("return");case 3:if(null==n||!n.isIntersecting){t.next=12;break}return S("entry?.isIntersecting",null==n?void 0:n.isIntersecting),t.prev=5,d(!0),t.next=9,y.current();case 9:return t.prev=9,d(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[5,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),[y]);return{loading:f,refCallback:Object(h.useCallback)((function(t){S("ref",t);var r,n=null;if(t&&!n&&window.IntersectionObserver)return S("enter"),n=new IntersectionObserver(v,{threshold:(null==e?void 0:e.threshold)||.1,root:(null===(r=e.root)||void 0===r?void 0:r.current)||null}),S("observe",t),n.observe(t),function(){return n.unobserve(t)}}),[e.threshold])}},j=r(707),C=r(147),L=(r(1006),["className","emptyView","onLoadMore","dataSource","renderItem","loading","showLoadingMore","pagination","children","justify","customItem","loadOnScroll","listContainer"]);function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var N=m.a.forwardRef((function(t,e){var r=t.className,o=t.emptyView,a=t.onLoadMore,i=t.dataSource,u=t.renderItem,s=t.loading,d=t.showLoadingMore,h=t.pagination,y=t.children,v=t.justify,g=t.customItem,w=t.loadOnScroll,_=t.listContainer,E=f()(t,L),O=t.loadMoreText,x=void 0===O?Object(j.a)("查看更多"):O,S=s;"boolean"==typeof S&&(S={spinning:S});var T=S&&S.spinning,N=k(l()(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w||!a){t.next=3;break}return t.next=3,a();case 3:case"end":return t.stop()}}),t)}))),{root:_}),P=N.loading,D=N.refCallback;w&&(x=Object(j.a)("到底了"));var I=i.length&&d?m.a.createElement("div",{className:"larkui-list-block-more"},T&&m.a.createElement(C.a,c()({justify:"block"},S)),!T&&m.a.createElement("a",{className:"larkui-list-block-more-btn",ref:D,onClick:function(t){t.preventDefault(),a&&a()}},P?Object(j.a)("加载中"):x)):null;if(T&&!I)return m.a.createElement("div",{className:b()("larkui-list","larkui-list-loading")},m.a.createElement(C.a,c()({justify:"block"},S)));var R=h;return R&&(R=h.total<=h.pageSize?null:A({showSizeChanger:!1},R)),m.a.createElement(n.b,c()({ref:e,className:b()(r,"larkui-list",{"larkui-list-justify-block":"block"===v}),loading:!1,loadMore:I,pagination:R,dataSource:i.length>0?i:t.emptyView?["empty"]:[],renderItem:function(t,e){if("empty"===t)return m.a.createElement("div",{className:"blankslate"},o);var r=u(t,e);return r?g?r:m.a.createElement(n.b.Item,{key:t.id},r):m.a.createElement("div",null)}},E),y)}));N.defaultProps={dataSource:[],loading:!1,showLoadingMore:!1,justify:"flex"},N.propTypes=A(A({},n.b.ListProps),{},{className:v.a.string,emptyView:v.a.node,onLoadMore:v.a.func,dataSource:v.a.array,renderItem:v.a.func,loading:v.a.oneOfType([v.a.bool,v.a.object]),showLoadingMore:v.a.bool,pagination:v.a.object,children:v.a.node,justify:v.a.oneOf(["block","flex"]),customItem:v.a.bool,loadOnScroll:v.a.bool,listContainer:v.a.node}),_()(N,n.b);e.a=N},7895:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return O}));r(1219);var n=r(959),o=r(0),a=r.n(o),i=r(78),c=r.n(i),u=r(5),l=r.n(u),s=r(63),f=r(77),d=r(5793),p=r(1226),h=r(4644),m=r(4037),y=r(114),v=r(1220),g=r(1424),b=r(34),w=r(982),_=r(5386),E=r(5236);function O(t){var e,r=t.book,i=t.group,u=t.treeItemData,O=t.onAction,x=t.onCreateCatalogLink,S=t.setEditingItemId,k=t.onMove,j=t.onCopy,C=t.onDestroy,L=t.createMenuVisible,T=t.setCreateMenuVisible,A=t.editMenuVisible,N=t.setEditMenuVisible,P=t.history,D=t.handleCreateDoc,I=t.contextPoint,R=t.contextMenuVisible,M=t.setContextMenuVisible,G=t.handlePreviewDoc,B=Object(o.useRef)(null);Object(_.a)({id:"lark-tree-ctxmenu-trigger"});var F=Object(v.b)(),U=null===(e=window.appData)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.desktop_offline_enhanced;return a.a.createElement("span",{className:E.a.catalogItemActions},c.a.createPortal(a.a.createElement(d.a,{group:i,book:r,catalog:r.toc,item:u,onAction:O,onMove:k,onCopy:j,onDestroy:C,setEditItem:S,mode:"lite",placement:"bottomLeft",align:{offset:[-22,-3]},visible:R,onVisibleChange:function(t){M(t)},onMenuItemClick:function(){M(!1)}},a.a.createElement("div",{style:{position:"fixed",left:I.x,top:I.y,width:1,height:1,background:"transparent"}})),document.querySelector("#lark-tree-ctxmenu-trigger")),a.a.createElement(d.a,{group:i,book:r,catalog:r.toc,item:u,onAction:O,onMove:k,onCopy:j,onDestroy:C,setEditItem:S,mode:"lite",placement:"bottomLeft",align:{offset:[-22,-3]},visible:A,onVisibleChange:function(t){N(t)},onMenuItemClick:function(){N(!1)}},a.a.createElement("span",{className:l()(E.a.btnItem,E.a.btnGap)},a.a.createElement(s.b,{name:"more",width:16}))),b.c&&"DOC"===(null==u?void 0:u.type)&&a.a.createElement("span",{className:E.a.btnItem,style:{marginRight:8},onClick:function(t){t.stopPropagation(),t.preventDefault(),null==G||G()}},a.a.createElement(w.a,{width:16})),a.a.createElement(n.a,{type:"menu",trigger:["click"],arrowPointAtCenter:!0,hideWhenInactive:!0,autoAdjustOverflow:!0,visible:L,onVisibleChange:function(t){(!b.c||U||F)&&T(t)},placement:"bottomLeft",align:{offset:[-22,-3]},getPopupContainer:function(){var t;return(null===(t=B.current)||void 0===t?void 0:t.closest("[".concat(m.d,"]")))||document.body},content:a.a.createElement(h.default,{book:r,commands:p.a.additionalActionsForNewDoc({canImport:!0,canCreateCatalogGroup:!0,canCreateCatalogLink:!0}),commandParams:{toc_node_uuid:u.uuid,toc_node_url:u.url,toc_node_title:u.title,create_from:"doc_toc",insert_to_catalog:!0,action:"prependChild",target_uuid:u.uuid},onCommandsExecuted:function(t){var e=t.cmd;T(!1),e===y.a.CATALOG.create_title.cmd&&O({target_uuid:u.uuid,action:f.ACTIONS.insert,type:f.TYPES.title}),e===y.a.CATALOG.create_link.cmd&&x({target_uuid:u.uuid,action:f.ACTIONS.insert,type:f.TYPES.link})},history:P,spaMode:!0,onCreateDoc:D})},a.a.createElement("span",{className:E.a.btnItem,ref:B},U?a.a.createElement(s.b,{name:"add",width:16}):a.a.createElement(g.a,{tooltipPlacement:"right"},a.a.createElement(s.b,{name:"add",width:16})))))}}}]);