/*! For license information please see lakex_table_yq.40315f98.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4531:function(e,t,n){"use strict";n.r(t),function(e,r,i){n.d(t,"ActiveTableServiceToken",(function(){return Aze})),n.d(t,"CommandService",(function(){return Lj})),n.d(t,"ConfigurationToken",(function(){return RC})),n.d(t,"ContentEditorContribution",(function(){return pKt})),n.d(t,"ContentViewerContribution",(function(){return vKt})),n.d(t,"DimaServiceToken",(function(){return AKt})),n.d(t,"FIELD_TYPE",(function(){return xO})),n.d(t,"FIELD_TYPE_CONFIGS",(function(){return OO})),n.d(t,"FULL_SCREEN_STATUS",(function(){return _Kt})),n.d(t,"FullScreenService",(function(){return SKt})),n.d(t,"FullWidthService",(function(){return RKt})),n.d(t,"ModalServiceToken",(function(){return z9e})),n.d(t,"ROW_HEIGHT",(function(){return TO})),n.d(t,"ReadService",(function(){return XA})),n.d(t,"RenderContextService",(function(){return Vze})),n.d(t,"SearchService",(function(){return _gt})),n.d(t,"SelectionService",(function(){return yot})),n.d(t,"ToolbarServiceToken",(function(){return r9e})),n.d(t,"VIEW_TYPE",(function(){return WO})),n.d(t,"ViewerCalendarScrollService",(function(){return Mmt})),n.d(t,"ViewerCardScrollService",(function(){return xyt})),n.d(t,"ViewerGridScrollService",(function(){return Hit})),n.d(t,"ViewerKanbanScrollService",(function(){return bCt})),n.d(t,"WIDTH_MODE",(function(){return OKt})),n.d(t,"createDocCardEditor",(function(){return r3t})),n.d(t,"createDocCardEditorH5",(function(){return v3t})),n.d(t,"createForm",(function(){return G5t})),n.d(t,"createStandardEditor",(function(){return v5t})),n.d(t,"createStandardEditorH5",(function(){return N5t})),n.d(t,"createStandardReader",(function(){return S5t})),n.d(t,"isDate",(function(){return Rx})),n.d(t,"isDecimal",(function(){return cC})),n.d(t,"isMobilePhone",(function(){return b3t})),n.d(t,"isURL",(function(){return lC})),n.d(t,"uid",(function(){return Cx})),n.d(t,"ymap",(function(){return OC}));n(7968);var o=n(14),a=n.n(o),l=n(0),u=n.n(l),c=n(78),s=n.n(c),d=n(430),f=n(217),h=n(718),p=n(317),v=n(218),g=n(162),m=n(1260),y=n(426),b=n(1284),w=n(371),_=n(710),x=n(156),k=n(348),C=n(809),S=n(486),O=n(51),E=n(725),I=n(1563),P=n(503),M=n(1287),R=n(1259),A=n(1263),j=n(1254),D=n(474),T=n(5),F=n.n(T),N=n(1664),L=n(1661),B=n(1650),V=n(1662),z=n(1700),H=n(1232),W=n(1455),U=n(1641),G=n(1633),Y=n(1701),$=n(1817),q=n(1634),K=n(1654),X=n(1646),J=n(1688),Z=n(1702),Q=n(1433),ee=n(1703),te=n(1704),ne=n(1705),re=n(1706),ie=n(1707),oe=n(1708),ae=n(1692),le=n(1693),ue=n(1694),ce=n(1709),se=n(1710),de=n(1711),fe=n(1712),he=n(1713),pe=n(1695),ve=n(1714),ge=n(1715),me=n(1716),ye=n(1689),be=n(1717),we=n(1718),_e=n(1719),xe=n(1640),ke=n(1720),Ce=n(1721),Se=n(1643),Oe=n(1690),Ee=n(1722),Ie=n(1723),Pe=n(1696),Me=n(1724),Re=n(1725),Ae=n(1726),je=n(1727),De=n(1728),Te=n(1729),Fe=n(1730),Ne=n(1731),Le=n(1657),Be=n(1660),Ve=n(1732),ze=n(1733),He=n(1734),We=n(1735),Ue=n(1457),Ge=n(1736),Ye=n(1737),$e=n(1738),qe=n(1739),Ke=n(1740),Xe=n(1741),Je=n(1742),Ze=n(1743),Qe=n(1744),et=n(1745),tt=n(1746),nt=n(1747),rt=n(1748),it=n(1749),ot=n(1750),at=n(1751),lt=n(1752),ut=n(1753),ct=n(1754),st=n(1755),dt=n(1756),ft=n(1757),ht=n(1758),pt=n(1759),vt=n(1760),gt=n(1761),mt=n(1762),yt=n(1763),bt=n(1764),wt=n(1765),_t=n(1766),xt=n(1767),kt=n(1768),Ct=n(1769),St=n(1770),Ot=n(1771),Et=n(1772),It=n(1773),Pt=n(1774),Mt=n(1775),Rt=n(1776),At=n(1777),jt=n(1778),Dt=n(1779),Tt=n(1780),Ft=n(1781),Nt=n(1428),Lt=n(1782),Bt=n(1783),Vt=n(1686),zt=n(1687),Ht=n(1653),Wt=n(1697),Ut=n(1784),Gt=n(1785),Yt=n(1786),$t=n(1787),qt=n(1788),Kt=n(1789),Xt=n(1790),Jt=n(1791),Zt=n(1792),Qt=n(1793),en=n(1794),tn=n(1795),nn=n(1796),rn=n(1797),on=n(1798),an=n(1799),ln=n(1800),un=n(1801),cn=n(1802),sn=n(1803),dn=n(1804),fn=n(1698),hn=n(1805),pn=n(1806),vn=n(1807),gn=n(1808),mn=n(1454),yn=n(1809),bn=n(1810),wn=n(1811),_n=n(1663),xn=n(1699),kn=n(1812),Cn=n(1339),Sn=n(1813),On=n(1233),En=n.n(On),In=n(4196),Pn=n(11),Mn=n(101),Rn=n(110),An=n(309),jn=n(381),Dn=n(12),Tn=n(9),Fn=n(959),Nn=n(147),Ln=n(193),Bn=n(3807);const Vn=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return mxe},get Circle(){return yxe},get Ellipse(){return wxe},get Image(){return xxe},get Line(){return Cxe},get Marker(){return Oxe},get Path(){return Fxe},get Polygon(){return Lxe},get Polyline(){return Bxe},get Rect(){return Vxe},get Text(){return zxe}},Symbol.toStringTag,{value:"Module"})),zn=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return rke},get Circle(){return ike},get Dom(){return oke},get Ellipse(){return ake},get Image(){return lke},get Line(){return uke},get Marker(){return dke},get Path(){return fke},get Polygon(){return hke},get Polyline(){return pke},get Rect(){return vke},get Text(){return bke}},Symbol.toStringTag,{value:"Module"})),Hn=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var Wn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function Un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gn,Yn,$n={exports:{}},qn=$n.exports={};function Kn(){throw new Error("setTimeout has not been defined")}function Xn(){throw new Error("clearTimeout has not been defined")}function Jn(e){if(Gn===setTimeout)return setTimeout(e,0);if((Gn===Kn||!Gn)&&setTimeout)return Gn=setTimeout,setTimeout(e,0);try{return Gn(e,0)}catch(t){try{return Gn.call(null,e,0)}catch(t){return Gn.call(this,e,0)}}}!function(){try{Gn="function"==typeof setTimeout?setTimeout:Kn}catch(e){Gn=Kn}try{Yn="function"==typeof clearTimeout?clearTimeout:Xn}catch(e){Yn=Xn}}();var Zn,Qn=[],er=!1,tr=-1;function nr(){er&&Zn&&(er=!1,Zn.length?Qn=Zn.concat(Qn):tr=-1,Qn.length&&rr())}function rr(){if(!er){var e=Jn(nr);er=!0;for(var t=Qn.length;t;){for(Zn=Qn,Qn=[];++tr<t;)Zn&&Zn[tr].run();tr=-1,t=Qn.length}Zn=null,er=!1,function(e){if(Yn===clearTimeout)return clearTimeout(e);if((Yn===Xn||!Yn)&&clearTimeout)return Yn=clearTimeout,clearTimeout(e);try{return Yn(e)}catch(t){try{return Yn.call(null,e)}catch(t){return Yn.call(this,e)}}}(e)}}function ir(e,t){this.fun=e,this.array=t}function or(){}qn.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Qn.push(new ir(e,t)),1!==Qn.length||er||Jn(rr)},ir.prototype.run=function(){this.fun.apply(null,this.array)},qn.title="browser",qn.browser=!0,qn.env={},qn.argv=[],qn.version="",qn.versions={},qn.on=or,qn.addListener=or,qn.once=or,qn.off=or,qn.removeListener=or,qn.removeAllListeners=or,qn.emit=or,qn.prependListener=or,qn.prependOnceListener=or,qn.listeners=function(e){return[]},qn.binding=function(e){throw new Error("process.binding is not supported")},qn.cwd=function(){return"/"},qn.chdir=function(e){throw new Error("process.chdir is not supported")},qn.umask=function(){return 0};const ar=Un($n.exports);function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ur="object"==lr(Hn)&&Hn&&Hn.Object===Object&&Hn,cr="object"==("undefined"==typeof self?"undefined":lr(self))&&self&&self.Object===Object&&self,sr=ur||cr||Function("return this")(),dr=sr.Symbol,fr=Object.prototype,hr=fr.hasOwnProperty,pr=fr.toString,vr=dr?dr.toStringTag:void 0;var gr=Object.prototype.toString;var mr="[object Null]",yr="[object Undefined]",br=dr?dr.toStringTag:void 0;function wr(e){return null==e?void 0===e?yr:mr:br&&br in Object(e)?function(e){var t=hr.call(e,vr),n=e[vr];try{e[vr]=void 0;var r=!0}catch(e){}var i=pr.call(e);return r&&(t?e[vr]=n:delete e[vr]),i}(e):function(e){return gr.call(e)}(e)}function _r(e){return null!=e&&"object"==lr(e)}var xr="[object Symbol]";function kr(e){return"symbol"==lr(e)||_r(e)&&wr(e)==xr}function Cr(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Sr=Array.isArray,Or=dr?dr.prototype:void 0,Er=Or?Or.toString:void 0;function Ir(e){if("string"==typeof e)return e;if(Sr(e))return Cr(e,Ir)+"";if(kr(e))return Er?Er.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Pr=/\s/;var Mr=/^\s+/;function Rr(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Pr.test(e.charAt(t)););return t}(e)+1).replace(Mr,""):e}function Ar(e){var t=lr(e);return null!=e&&("object"==t||"function"==t)}var jr=NaN,Dr=/^[-+]0x[0-9a-f]+$/i,Tr=/^0b[01]+$/i,Fr=/^0o[0-7]+$/i,Nr=parseInt;function Lr(e){if("number"==typeof e)return e;if(kr(e))return jr;if(Ar(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ar(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Rr(e);var n=Tr.test(e);return n||Fr.test(e)?Nr(e.slice(2),n?2:8):Dr.test(e)?jr:+e}var Br=1/0,Vr=17976931348623157e292;function zr(e){var t=function(e){return e?(e=Lr(e))===Br||e===-1/0?(e<0?-1:1)*Vr:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function Hr(e){return e}var Wr="[object AsyncFunction]",Ur="[object Function]",Gr="[object GeneratorFunction]",Yr="[object Proxy]";function $r(e){if(!Ar(e))return!1;var t=wr(e);return t==Ur||t==Gr||t==Wr||t==Yr}var qr,Kr=sr["__core-js_shared__"],Xr=(qr=/[^.]+$/.exec(Kr&&Kr.keys&&Kr.keys.IE_PROTO||""))?"Symbol(src)_1."+qr:"";var Jr=Function.prototype.toString;function Zr(e){if(null!=e){try{return Jr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Qr=/^\[object .+?Constructor\]$/,ei=Function.prototype,ti=Object.prototype,ni=ei.toString,ri=ti.hasOwnProperty,ii=RegExp("^"+ni.call(ri).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oi(e){return!(!Ar(e)||(t=e,Xr&&Xr in t))&&($r(e)?ii:Qr).test(Zr(e));var t}function ai(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return oi(n)?n:void 0}var li=ai(sr,"WeakMap"),ui=Object.create,ci=function(){function e(){}return function(t){if(!Ar(t))return{};if(ui)return ui(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function si(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var di=Date.now;var fi,hi,pi,vi=function(){try{var e=ai(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),gi=vi?function(e,t){return vi(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Hr,mi=(fi=gi,hi=0,pi=0,function(){var e=di(),t=16-(e-pi);if(pi=e,t>0){if(++hi>=800)return arguments[0]}else hi=0;return fi.apply(void 0,arguments)});function yi(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function bi(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function wi(e){return e!=e}function _i(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bi(e,wi,n)}(e,t,0)>-1}var xi=9007199254740991,ki=/^(?:0|[1-9]\d*)$/;function Ci(e,t){var n=lr(e);return!!(t=null==t?xi:t)&&("number"==n||"symbol"!=n&&ki.test(e))&&e>-1&&e%1==0&&e<t}function Si(e,t,n){"__proto__"==t&&vi?vi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Oi(e,t){return e===t||e!=e&&t!=t}var Ei=Object.prototype.hasOwnProperty;function Ii(e,t,n){var r=e[t];Ei.call(e,t)&&Oi(r,n)&&(void 0!==n||t in e)||Si(e,t,n)}function Pi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],u=void 0;void 0===u&&(u=e[l]),i?Si(n,l,u):Ii(n,l,u)}return n}var Mi=Math.max;function Ri(e,t,n){return t=Mi(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Mi(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}function Ai(e,t){return mi(Ri(e,t,Hr),e+"")}var ji=9007199254740991;function Di(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ji}function Ti(e){return null!=e&&Di(e.length)&&!$r(e)}function Fi(e,t,n){if(!Ar(n))return!1;var r=lr(t);return!!("number"==r?Ti(n)&&Ci(t,n.length):"string"==r&&t in n)&&Oi(n[t],e)}var Ni=Object.prototype;function Li(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ni)}function Bi(e){return _r(e)&&"[object Arguments]"==wr(e)}var Vi=Object.prototype,zi=Vi.hasOwnProperty,Hi=Vi.propertyIsEnumerable,Wi=Bi(function(){return arguments}())?Bi:function(e){return _r(e)&&zi.call(e,"callee")&&!Hi.call(e,"callee")};var Ui="object"==("undefined"==typeof exports?"undefined":lr(exports))&&exports&&!exports.nodeType&&exports,Gi=Ui&&"object"==lr(r)&&r&&!r.nodeType&&r,Yi=Gi&&Gi.exports===Ui?sr.Buffer:void 0,$i=(Yi?Yi.isBuffer:void 0)||function(){return!1},qi={};function Ki(e){return function(t){return e(t)}}qi["[object Float32Array]"]=qi["[object Float64Array]"]=qi["[object Int8Array]"]=qi["[object Int16Array]"]=qi["[object Int32Array]"]=qi["[object Uint8Array]"]=qi["[object Uint8ClampedArray]"]=qi["[object Uint16Array]"]=qi["[object Uint32Array]"]=!0,qi["[object Arguments]"]=qi["[object Array]"]=qi["[object ArrayBuffer]"]=qi["[object Boolean]"]=qi["[object DataView]"]=qi["[object Date]"]=qi["[object Error]"]=qi["[object Function]"]=qi["[object Map]"]=qi["[object Number]"]=qi["[object Object]"]=qi["[object RegExp]"]=qi["[object Set]"]=qi["[object String]"]=qi["[object WeakMap]"]=!1;var Xi="object"==("undefined"==typeof exports?"undefined":lr(exports))&&exports&&!exports.nodeType&&exports,Ji=Xi&&"object"==lr(r)&&r&&!r.nodeType&&r,Zi=Ji&&Ji.exports===Xi&&ur.process,Qi=function(){try{var e=Ji&&Ji.require&&Ji.require("util").types;return e||Zi&&Zi.binding&&Zi.binding("util")}catch(e){}}(),eo=Qi&&Qi.isTypedArray,to=eo?Ki(eo):function(e){return _r(e)&&Di(e.length)&&!!qi[wr(e)]},no=Object.prototype.hasOwnProperty;function ro(e,t){var n=Sr(e),r=!n&&Wi(e),i=!n&&!r&&$i(e),o=!n&&!r&&!i&&to(e),a=n||r||i||o,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(var c in e)!t&&!no.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ci(c,u))||l.push(c);return l}function io(e,t){return function(n){return e(t(n))}}var oo=io(Object.keys,Object),ao=Object.prototype.hasOwnProperty;function lo(e){return Ti(e)?ro(e):function(e){if(!Li(e))return oo(e);var t=[];for(var n in Object(e))ao.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var uo=Object.prototype.hasOwnProperty;function co(e){if(!Ar(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Li(e),n=[];for(var r in e)("constructor"!=r||!t&&uo.call(e,r))&&n.push(r);return n}function so(e){return Ti(e)?ro(e,!0):co(e)}var fo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ho=/^\w*$/;function po(e,t){if(Sr(e))return!1;var n=lr(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!kr(e))||(ho.test(e)||!fo.test(e)||null!=t&&e in Object(t))}var vo=ai(Object,"create");var go=Object.prototype.hasOwnProperty;var mo=Object.prototype.hasOwnProperty;function yo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function bo(e,t){for(var n=e.length;n--;)if(Oi(e[n][0],t))return n;return-1}yo.prototype.clear=function(){this.__data__=vo?vo(null):{},this.size=0},yo.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yo.prototype.get=function(e){var t=this.__data__;if(vo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return go.call(t,e)?t[e]:void 0},yo.prototype.has=function(e){var t=this.__data__;return vo?void 0!==t[e]:mo.call(t,e)},yo.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vo&&void 0===t?"__lodash_hash_undefined__":t,this};var wo=Array.prototype.splice;function _o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_o.prototype.clear=function(){this.__data__=[],this.size=0},_o.prototype.delete=function(e){var t=this.__data__,n=bo(t,e);return!(n<0)&&(n==t.length-1?t.pop():wo.call(t,n,1),--this.size,!0)},_o.prototype.get=function(e){var t=this.__data__,n=bo(t,e);return n<0?void 0:t[n][1]},_o.prototype.has=function(e){return bo(this.__data__,e)>-1},_o.prototype.set=function(e,t){var n=this.__data__,r=bo(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var xo=ai(sr,"Map");function ko(e,t){var n,r,i=e.__data__;return("string"==(r=lr(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Co(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Co.prototype.clear=function(){this.size=0,this.__data__={hash:new yo,map:new(xo||_o),string:new yo}},Co.prototype.delete=function(e){var t=ko(this,e).delete(e);return this.size-=t?1:0,t},Co.prototype.get=function(e){return ko(this,e).get(e)},Co.prototype.has=function(e){return ko(this,e).has(e)},Co.prototype.set=function(e,t){var n=ko(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var So="Expected a function";function Oo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(So);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oo.Cache||Co),n}Oo.Cache=Co;var Eo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Io=/\\(\\)?/g,Po=function(e){var t=Oo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Eo,(function(e,n,r,i){t.push(r?i.replace(Io,"$1"):n||e)})),t}));function Mo(e){return null==e?"":Ir(e)}function Ro(e,t){return Sr(e)?e:po(e,t)?[e]:Po(Mo(e))}function Ao(e){if("string"==typeof e||kr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e,t){for(var n=0,r=(t=Ro(t,e)).length;null!=e&&n<r;)e=e[Ao(t[n++])];return n&&n==r?e:void 0}function Do(e,t,n){var r=null==e?void 0:jo(e,t);return void 0===r?n:r}function To(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Fo=dr?dr.isConcatSpreadable:void 0;function No(e){return Sr(e)||Wi(e)||!!(Fo&&e&&e[Fo])}function Lo(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=No),i||(i=[]);++o<a;){var l=e[o];n(l)?To(i,l):r||(i[i.length]=l)}return i}function Bo(e){return(null==e?0:e.length)?Lo(e):[]}var Vo=io(Object.getPrototypeOf,Object),zo="[object Object]",Ho=Function.prototype,Wo=Object.prototype,Uo=Ho.toString,Go=Wo.hasOwnProperty,Yo=Uo.call(Object);function $o(e){if(!_r(e)||wr(e)!=zo)return!1;var t=Vo(e);if(null===t)return!0;var n=Go.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Uo.call(n)==Yo}function qo(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}var Ko=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Xo(e){return Ko.test(e)}var Jo="\\ud800-\\udfff",Zo="["+Jo+"]",Qo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ea="\\ud83c[\\udffb-\\udfff]",ta="[^"+Jo+"]",na="(?:\\ud83c[\\udde6-\\uddff]){2}",ra="[\\ud800-\\udbff][\\udc00-\\udfff]",ia="(?:"+Qo+"|"+ea+")"+"?",oa="[\\ufe0e\\ufe0f]?",aa=oa+ia+("(?:\\u200d(?:"+[ta,na,ra].join("|")+")"+oa+ia+")*"),la="(?:"+[ta+Qo+"?",Qo,na,ra,Zo].join("|")+")",ua=RegExp(ea+"(?="+ea+")|"+la+aa,"g");function ca(e){return Xo(e)?function(e){return e.match(ua)||[]}(e):function(e){return e.split("")}(e)}var sa,da=(sa="toUpperCase",function(e){var t,n,r,i,o=Xo(e=Mo(e))?ca(e):void 0,a=o?o[0]:e.charAt(0),l=o?(t=o,n=1,i=t.length,r=void 0===r?i:r,!n&&r>=i?t:qo(t,n,r)).join(""):e.slice(1);return a[sa]()+l});var fa,ha=(fa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},function(e){return null==fa?void 0:fa[e]}),pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,va=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var ga=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var ma=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var ya="\\ud800-\\udfff",ba="\\u2700-\\u27bf",wa="a-z\\xdf-\\xf6\\xf8-\\xff",_a="A-Z\\xc0-\\xd6\\xd8-\\xde",xa="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ka="["+xa+"]",Ca="\\d+",Sa="["+ba+"]",Oa="["+wa+"]",Ea="[^"+ya+xa+Ca+ba+wa+_a+"]",Ia="(?:\\ud83c[\\udde6-\\uddff]){2}",Pa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ma="["+_a+"]",Ra="(?:"+Oa+"|"+Ea+")",Aa="(?:"+Ma+"|"+Ea+")",ja="(?:['’](?:d|ll|m|re|s|t|ve))?",Da="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ta="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Fa="[\\ufe0e\\ufe0f]?",Na=Fa+Ta+("(?:\\u200d(?:"+["[^"+ya+"]",Ia,Pa].join("|")+")"+Fa+Ta+")*"),La="(?:"+[Sa,Ia,Pa].join("|")+")"+Na,Ba=RegExp([Ma+"?"+Oa+"+"+ja+"(?="+[ka,Ma,"$"].join("|")+")",Aa+"+"+Da+"(?="+[ka,Ma+Ra,"$"].join("|")+")",Ma+"?"+Ra+"+"+ja,Ma+"+"+Da,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ca,La].join("|"),"g");function Va(e,t,n){return e=Mo(e),void 0===t?function(e){return ma.test(e)}(e)?function(e){return e.match(Ba)||[]}(e):function(e){return e.match(ga)||[]}(e):e.match(t)||[]}var za=RegExp("['’]","g");var Ha=Math.ceil,Wa=Math.max;function Ua(e){var t=this.__data__=new _o(e);this.size=t.size}Ua.prototype.clear=function(){this.__data__=new _o,this.size=0},Ua.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ua.prototype.get=function(e){return this.__data__.get(e)},Ua.prototype.has=function(e){return this.__data__.has(e)},Ua.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _o){var r=n.__data__;if(!xo||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Co(r)}return n.set(e,t),this.size=n.size,this};var Ga="object"==("undefined"==typeof exports?"undefined":lr(exports))&&exports&&!exports.nodeType&&exports,Ya=Ga&&"object"==lr(r)&&r&&!r.nodeType&&r,$a=Ya&&Ya.exports===Ga?sr.Buffer:void 0,qa=$a?$a.allocUnsafe:void 0;function Ka(e,t){if(t)return e.slice();var n=e.length,r=qa?qa(n):new e.constructor(n);return e.copy(r),r}function Xa(){return[]}var Ja=Object.prototype.propertyIsEnumerable,Za=Object.getOwnPropertySymbols,Qa=Za?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(Za(e),(function(t){return Ja.call(e,t)})))}:Xa;var el=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)To(t,Qa(e)),e=Vo(e);return t}:Xa;function tl(e,t,n){var r=t(e);return Sr(e)?r:To(r,n(e))}function nl(e){return tl(e,lo,Qa)}function rl(e){return tl(e,so,el)}var il=ai(sr,"DataView"),ol=ai(sr,"Promise"),al=ai(sr,"Set"),ll="[object Map]",ul="[object Promise]",cl="[object Set]",sl="[object WeakMap]",dl="[object DataView]",fl=Zr(il),hl=Zr(xo),pl=Zr(ol),vl=Zr(al),gl=Zr(li),ml=wr;(il&&ml(new il(new ArrayBuffer(1)))!=dl||xo&&ml(new xo)!=ll||ol&&ml(ol.resolve())!=ul||al&&ml(new al)!=cl||li&&ml(new li)!=sl)&&(ml=function(e){var t=wr(e),n="[object Object]"==t?e.constructor:void 0,r=n?Zr(n):"";if(r)switch(r){case fl:return dl;case hl:return ll;case pl:return ul;case vl:return cl;case gl:return sl}return t});var yl=Object.prototype.hasOwnProperty;var bl=sr.Uint8Array;function wl(e){var t=new e.constructor(e.byteLength);return new bl(t).set(new bl(e)),t}var _l=/\w*$/;var xl=dr?dr.prototype:void 0,kl=xl?xl.valueOf:void 0;function Cl(e,t){var n=t?wl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Sl="[object Boolean]",Ol="[object Date]",El="[object Map]",Il="[object Number]",Pl="[object RegExp]",Ml="[object Set]",Rl="[object String]",Al="[object Symbol]",jl="[object ArrayBuffer]",Dl="[object DataView]",Tl="[object Float32Array]",Fl="[object Float64Array]",Nl="[object Int8Array]",Ll="[object Int16Array]",Bl="[object Int32Array]",Vl="[object Uint8Array]",zl="[object Uint8ClampedArray]",Hl="[object Uint16Array]",Wl="[object Uint32Array]";function Ul(e,t,n){var r,i,o,a=e.constructor;switch(t){case jl:return wl(e);case Sl:case Ol:return new a(+e);case Dl:return function(e,t){var n=t?wl(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Tl:case Fl:case Nl:case Ll:case Bl:case Vl:case zl:case Hl:case Wl:return Cl(e,n);case El:return new a;case Il:case Rl:return new a(e);case Pl:return(o=new(i=e).constructor(i.source,_l.exec(i))).lastIndex=i.lastIndex,o;case Ml:return new a;case Al:return r=e,kl?Object(kl.call(r)):{}}}function Gl(e){return"function"!=typeof e.constructor||Li(e)?{}:ci(Vo(e))}var Yl=Qi&&Qi.isMap,$l=Yl?Ki(Yl):function(e){return _r(e)&&"[object Map]"==ml(e)};var ql=Qi&&Qi.isSet,Kl=ql?Ki(ql):function(e){return _r(e)&&"[object Set]"==ml(e)},Xl=1,Jl=2,Zl=4,Ql="[object Arguments]",eu="[object Function]",tu="[object GeneratorFunction]",nu="[object Object]",ru={};function iu(e,t,n,r,i,o){var a,l=t&Xl,u=t&Jl,c=t&Zl;if(void 0!==a)return a;if(!Ar(e))return e;var s=Sr(e);if(s){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&yl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return si(e,a)}else{var d=ml(e),f=d==eu||d==tu;if($i(e))return Ka(e,l);if(d==nu||d==Ql||f&&!i){if(a=u||f?{}:Gl(e),!l)return u?function(e,t){return Pi(e,el(e),t)}(e,function(e,t){return e&&Pi(t,so(t),e)}(a,e)):function(e,t){return Pi(e,Qa(e),t)}(e,function(e,t){return e&&Pi(t,lo(t),e)}(a,e))}else{if(!ru[d])return i?e:{};a=Ul(e,d,l)}}o||(o=new Ua);var h=o.get(e);if(h)return h;o.set(e,a),Kl(e)?e.forEach((function(r){a.add(iu(r,t,n,r,e,o))})):$l(e)&&e.forEach((function(r,i){a.set(i,iu(r,t,n,i,e,o))}));var p=s?void 0:(c?u?rl:nl:u?so:lo)(e);return yi(p||e,(function(r,i){p&&(r=e[i=r]),Ii(a,i,iu(r,t,n,i,e,o))})),a}ru[Ql]=ru["[object Array]"]=ru["[object ArrayBuffer]"]=ru["[object DataView]"]=ru["[object Boolean]"]=ru["[object Date]"]=ru["[object Float32Array]"]=ru["[object Float64Array]"]=ru["[object Int8Array]"]=ru["[object Int16Array]"]=ru["[object Int32Array]"]=ru["[object Map]"]=ru["[object Number]"]=ru[nu]=ru["[object RegExp]"]=ru["[object Set]"]=ru["[object String]"]=ru["[object Symbol]"]=ru["[object Uint8Array]"]=ru["[object Uint8ClampedArray]"]=ru["[object Uint16Array]"]=ru["[object Uint32Array]"]=!0,ru["[object Error]"]=ru[eu]=ru["[object WeakMap]"]=!1;function ou(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Co;++t<n;)this.add(e[t])}function au(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function lu(e,t){return e.has(t)}ou.prototype.add=ou.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ou.prototype.has=function(e){return this.__data__.has(e)};var uu=1,cu=2;function su(e,t,n,r,i,o){var a=n&uu,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=o.get(e),s=o.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,h=n&cu?new ou:void 0;for(o.set(e,t),o.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,o):r(p,v,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!au(t,(function(e,t){if(!lu(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function du(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function fu(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var hu=1,pu=2,vu="[object Boolean]",gu="[object Date]",mu="[object Error]",yu="[object Map]",bu="[object Number]",wu="[object RegExp]",_u="[object Set]",xu="[object String]",ku="[object Symbol]",Cu="[object ArrayBuffer]",Su="[object DataView]",Ou=dr?dr.prototype:void 0,Eu=Ou?Ou.valueOf:void 0;var Iu=1,Pu=Object.prototype.hasOwnProperty;var Mu=1,Ru="[object Arguments]",Au="[object Array]",ju="[object Object]",Du=Object.prototype.hasOwnProperty;function Tu(e,t,n,r,i,o){var a=Sr(e),l=Sr(t),u=a?Au:ml(e),c=l?Au:ml(t),s=(u=u==Ru?ju:u)==ju,d=(c=c==Ru?ju:c)==ju,f=u==c;if(f&&$i(e)){if(!$i(t))return!1;a=!0,s=!1}if(f&&!s)return o||(o=new Ua),a||to(e)?su(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case Su:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Cu:return!(e.byteLength!=t.byteLength||!o(new bl(e),new bl(t)));case vu:case gu:case bu:return Oi(+e,+t);case mu:return e.name==t.name&&e.message==t.message;case wu:case xu:return e==t+"";case yu:var l=du;case _u:var u=r&hu;if(l||(l=fu),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=pu,a.set(e,t);var s=su(l(e),l(t),r,i,o,a);return a.delete(e),s;case ku:if(Eu)return Eu.call(e)==Eu.call(t)}return!1}(e,t,u,n,r,i,o);if(!(n&Mu)){var h=s&&Du.call(e,"__wrapped__"),p=d&&Du.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return o||(o=new Ua),i(v,g,n,r,o)}}return!!f&&(o||(o=new Ua),function(e,t,n,r,i,o){var a=n&Iu,l=nl(e),u=l.length;if(u!=nl(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:Pu.call(t,s)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var v=e[s=l[c]],g=t[s];if(r)var m=a?r(g,v,s,t,e,o):r(v,g,s,e,t,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){h=!1;break}p||(p="constructor"==s)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}function Fu(e,t,n,r,i){return e===t||(null==e||null==t||!_r(e)&&!_r(t)?e!=e&&t!=t:Tu(e,t,n,r,Fu,i))}var Nu=1,Lu=2;function Bu(e){return e==e&&!Ar(e)}function Vu(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function zu(e){var t=function(e){for(var t=lo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bu(i)]}return t}(e);return 1==t.length&&t[0][2]?Vu(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=n[i])[0],u=e[l],c=a[1];if(a[2]){if(void 0===u&&!(l in e))return!1}else{var s=new Ua;if(!Fu(c,u,Nu|Lu,r,s))return!1}}return!0}(n,0,t)}}function Hu(e,t){return null!=e&&t in Object(e)}function Wu(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Ro(t,e)).length,o=!1;++r<i;){var a=Ao(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Di(i)&&Ci(a,i)&&(Sr(e)||Wi(e))}(e,t,Hu)}var Uu=1,Gu=2;function Yu(e){return po(e)?(t=Ao(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return jo(t,e)}}(e);var t}function $u(e){return"function"==typeof e?e:null==e?Hr:"object"==lr(e)?Sr(e)?(t=e[0],n=e[1],po(t)&&Bu(n)?Vu(Ao(t),n):function(e){var r=Do(e,t);return void 0===r&&r===n?Wu(e,t):Fu(n,r,Uu|Gu)}):zu(e):Yu(e);var t,n}function qu(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}var Ku=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var l=o[++r];if(!1===t(i[l],l,i))break}return e};var Xu,Ju=(Xu=function(e,t){return e&&Ku(e,t,lo)},function(e,t){if(null==e)return e;if(!Ti(e))return Xu(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e});function Zu(e,t,n,r){return Ju(e,(function(e,i,o){t(r,e,n(e),o)})),r}var Qu=function(){return sr.Date.now()},ec="Expected a function",tc=Math.max,nc=Math.min;function rc(e,t,n){var r,i,o,a,l,u,c=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(ec);function h(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function p(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=o}function v(){var e=Qu();if(p(e))return g(e);l=setTimeout(v,function(e){var n=t-(e-u);return d?nc(n,o-(e-c)):n}(e))}function g(e){return l=void 0,f&&r?h(e):(r=i=void 0,a)}function m(){var e=Qu(),n=p(e);if(r=arguments,i=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(v,t),s?h(e):a}(u);if(d)return clearTimeout(l),l=setTimeout(v,t),h(u)}return void 0===l&&(l=setTimeout(v,t)),a}return t=Lr(t)||0,Ar(n)&&(s=!!n.leading,o=(d="maxWait"in n)?tc(Lr(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=i=l=void 0},m.flush=function(){return void 0===l?a:g(Qu())},m}function ic(e,t,n){(void 0!==n&&!Oi(e[t],n)||void 0===n&&!(t in e))&&Si(e,t,n)}function oc(e){return _r(e)&&Ti(e)}function ac(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function lc(e,t,n,r,i,o,a){var l=ac(e,n),u=ac(t,n),c=a.get(u);if(c)ic(e,n,c);else{var s,d=o?o(l,u,n+"",e,t,a):void 0,f=void 0===d;if(f){var h=Sr(u),p=!h&&$i(u),v=!h&&!p&&to(u);d=u,h||p||v?Sr(l)?d=l:oc(l)?d=si(l):p?(f=!1,d=Ka(u,!0)):v?(f=!1,d=Cl(u,!0)):d=[]:$o(u)||Wi(u)?(d=l,Wi(l)?d=Pi(s=l,so(s)):Ar(l)&&!$r(l)||(d=Gl(u))):f=!1}f&&(a.set(u,d),i(d,u,r,o,a),a.delete(u)),ic(e,n,d)}}function uc(e,t,n,r,i){e!==t&&Ku(t,(function(o,a){if(i||(i=new Ua),Ar(o))lc(e,t,a,n,uc,r,i);else{var l=r?r(ac(e,a),o,a+"",e,t,i):void 0;void 0===l&&(l=o),ic(e,a,l)}}),so)}function cc(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var sc=Ai((function(e,t){return oc(e)?function(e,t,n,r){var i=-1,o=_i,a=!0,l=e.length,u=[],c=t.length;if(!l)return u;t.length>=200&&(o=lu,a=!1,t=new ou(t));e:for(;++i<l;){var s=e[i],d=s;if(s=0!==s?s:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(s)}else o(t,d,r)||u.push(s)}return u}(e,Lo(t,0,oc,!0)):[]}));function dc(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function fc(e,t){var n;return(Sr(e)?yi:Ju)(e,"function"==typeof(n=t)?n:Hr)}function hc(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function pc(e,t){var n=!0;return Ju(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vc(e,t,n){return(Sr(e)?hc:pc)(e,$u(t))}var gc=Math.max,mc=Math.min;var yc,bc=(yc=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=zr(n),i=n<0?gc(r+i,0):mc(i,r-1)),bi(e,$u(t),i,!0)},function(e,t,n){var r=Object(e);if(!Ti(e)){var i=$u(t);e=lo(e),t=function(e){return i(r[e],e,r)}}var o=yc(e,t,n);return o>-1?r[i?e[o]:o]:void 0});var wc,_c,xc=Object.prototype.hasOwnProperty,kc=(wc=function(e,t,n){xc.call(e,n)?e[n].push(t):Si(e,n,[t])},function(e,t){var n=Sr(e)?qu:Zu,r=_c?_c():{};return n(e,wc,$u(t),r)});function Cc(e){return"string"==typeof e||!Sr(e)&&_r(e)&&"[object String]"==wr(e)}function Sc(e){return!0===e||!1===e||_r(e)&&"[object Boolean]"==wr(e)}function Oc(e,t){return Fu(e,t)}var Ec="[object Number]";function Ic(e){return function(e){return"number"==typeof e||_r(e)&&wr(e)==Ec}(e)&&e!=+e}function Pc(e){return null==e}function Mc(e){return void 0===e}var Rc,Ac,jc=(Rc=function(e,t,n){return e+(n?"-":"")+t.toLowerCase()},function(e){return function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;)n=t(n,e[i],i,e);return n}(Va(function(e){return(e=Mo(e))&&e.replace(pa,ha).replace(va,"")}(e).replace(za,"")),Rc,"")}),Dc=(Ac=function(e,t,n){uc(e,t,n)},Ai((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Ac.length>3&&"function"==typeof i?(r--,i):void 0,o&&Fi(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Ac(e,a,n,i)}return e})));function Tc(e,t){return null==(e=function(e,t){return t.length<2?e:jo(e,qo(t,0,-1))}(e,t=Ro(t,e)))||delete e[Ao(dc(t))]}function Fc(e,t,n,r){if(!Ar(e))return e;for(var i=-1,o=(t=Ro(t,e)).length,a=o-1,l=e;null!=l&&++i<o;){var u=Ao(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var s=l[u];void 0===(c=void 0)&&(c=Ar(s)?s:Ci(t[i+1])?[]:{})}Ii(l,u,c),l=l[u]}return e}function Nc(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=kr(e),a=void 0!==t,l=null===t,u=t==t,c=kr(t);if(!l&&!c&&!o&&e>t||o&&a&&u&&!l&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!u)return-1}return 0}function Lc(e,t,n){t=t.length?Cr(t,(function(e){return Sr(e)?function(t){return jo(t,1===e.length?e[0]:e)}:e})):[Hr];var r=-1;t=Cr(t,Ki($u));var i=function(e,t){var n=-1,r=Ti(e)?Array(e.length):[];return Ju(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}(e,(function(e,n,i){return{criteria:Cr(t,(function(t){return t(e)})),index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=n.length;++r<a;){var u=Nc(i[r],o[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Bc(e,t){return function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],l=jo(e,a);n(l,a)&&Fc(o,Ro(a,e),l)}return o}(e,t,(function(t,n){return Wu(e,n)}))}var Vc=function(e){return mi(Ri(e,void 0,Bo),e+"")}((function(e,t){return null==e?{}:Bc(e,t)})),zc=Array.prototype.splice;function Hc(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=$u(t);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Ci(i)?zc.call(e,i,1):Tc(e,i)}}}(e,i),n}function Wc(e,t,n){return null==e?e:Fc(e,t,n)}var Uc=Ai((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Fi(e,t[0],t[1])?t=[]:n>2&&Fi(t[0],t[1],t[2])&&(t=[t[0]]),Lc(e,Lo(t),[])}));function Gc(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Ar(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),rc(e,t,{leading:r,maxWait:t,trailing:i})}var Yc=al&&1/fu(new al([,-0]))[1]==1/0?function(e){return new al(e)}:function(){},$c=200;function qc(e,t,n){var r=-1,i=_i,o=e.length,a=!0,l=[],u=l;if(n)a=!1,i=cc;else if(o>=$c){var c=t?null:Yc(e);if(c)return fu(c);a=!1,i=lu,u=new ou}else u=t?[]:l;e:for(;++r<o;){var s=e[r],d=t?t(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),l.push(s)}else i(u,d,n)||(u!==l&&u.push(d),l.push(s))}return l}var Kc=Ai((function(e){var t=dc(e);return oc(t)&&(t=void 0),qc(Lo(e,0,oc,!0),$u(t))}));function Xc(e){return e&&e.length?qc(e):[]}function Jc(e,t){return e&&e.length?qc(e,$u(t)):[]}function Zc(e,t){return t="function"==typeof t?t:void 0,e&&e.length?qc(e,void 0,t):[]}function Qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function es(e,t){if(e){if("string"==typeof e)return Qc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qc(e,t):void 0}}function ts(e){return function(e){if(Array.isArray(e))return Qc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||es(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ns(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,i)}function rs(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ns(o,r,i,a,l,"next",e)}function l(e){ns(o,r,i,a,l,"throw",e)}a(void 0)}))}}function is(e){var t=function(e,t){if("object"!=lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lr(t)?t:t+""}function os(e,t,n){return(t=is(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,is(r.key),r)}}function ls(e,t,n){return t&&as(e.prototype,t),n&&as(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function us(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cs={exports:{}},ss={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ss);var ds=ss.exports;!function(e){var t=ds.default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},o=Object.prototype,a=o.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new j(r||[]);return l(o,"_invoke",{value:P(e,n,a)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=h;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function x(){}var k={};f(k,c,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(D([])));S&&S!==o&&a.call(S,c)&&(k=S);var O=x.prototype=w.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,n){function r(i,o,l,u){var c=p(e[i],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,l,u)}),(function(e){r("throw",e,l,u)})):n.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,u)}))}u(c.arg)}var i;l(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}})}function P(e,t,n){var i=v;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:r,done:!0}}for(n.method=o,n.arg=a;;){var l=n.delegate;if(l){var u=M(l,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(e,t,n);if("normal"===c.type){if(i=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function M(e,t){var n=t.method,i=e.iterator[n];if(i===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,M(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=p(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,b;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=x,l(O,"constructor",{value:x,configurable:!0}),l(x,"constructor",{value:_,configurable:!0}),_.displayName=f(x,d,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},i.awrap=function(e){return{__await:e}},E(I.prototype),f(I.prototype,s,(function(){return this})),i.AsyncIterator=I,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new I(h(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),f(O,d,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},i.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return l.type="throw",l.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(cs);var fs=(0,cs.exports)(),hs=fs;try{regeneratorRuntime=fs}catch(e){"object"===("undefined"==typeof globalThis?"undefined":lr(globalThis))?globalThis.regeneratorRuntime=fs:Function("r","regeneratorRuntime = r")(fs)}const ps=Un(hs);function vs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gs(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bs="named",ws="name",_s="unmanaged",xs="optional",ks="inject",Cs="multi_inject",Ss="inversify:tagged",Os="inversify:tagged_props",Es="inversify:paramtypes",Is="design:paramtypes",Ps="post_construct",Ms="pre_destroy";var Rs=[ks,Cs,ws,_s,bs,xs],As={Request:"Request",Singleton:"Singleton",Transient:"Transient"},js={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Ds={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},Ts=0;function Fs(){return Ts++}var Ns=function(){function e(e,t){this.id=Fs(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=js.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===As.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),Ls="Cannot apply @injectable decorator multiple times.",Bs="Metadata key was used more than once in a parameter:",Vs="NULL argument",zs="Key Not Found",Hs="Ambiguous match found for serviceIdentifier:",Ws="No matching bindings found for serviceIdentifier:",Us="Missing required @injectable annotation in:",Gs="Missing required @inject or @multiInject annotation in:",Ys="Circular dependency found:",$s="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",qs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+"".concat(e[0]," must be >= than the number of constructor arguments of its base class.")},Ks=function(e,t){return"@postConstruct error in class ".concat(e,": ").concat(t)},Xs=function(e,t){return"@preDestroy error in class ".concat(e,": ").concat(t)},Js=function(e,t){return"onDeactivation() error in class ".concat(e,": ").concat(t)},Zs="Maximum call stack size exceeded",Qs=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(Es,e),userGeneratedMetadata:Reflect.getMetadata(Ss,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(Os,e)||[]},e}(),ed={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function td(e){return e instanceof RangeError||e.message===Zs}function nd(e){return"function"==typeof e?e.name:"symbol"==lr(e)?e.toString():e}function rd(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=ad(e.implementationType)),r="".concat(r,"\n ").concat(t),e.constraint.metaData&&(r="".concat(r," - ").concat(e.constraint.metaData))}))),r}function id(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||id(e.parentRequest,t))}function od(e){e.childRequests.forEach((function(e){if(id(e,e.serviceIdentifier)){var t=function(e){var t=function e(t,n){void 0===n&&(n=[]);var r=nd(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(e);throw new Error("".concat(Ys," ").concat(t))}od(e)}))}function ad(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: ".concat(t)}var ld=function(){function e(e){this.id=Fs(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),ud=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===bs?"named: ".concat(String(this.value).toString()," "):"tagged: { key:".concat(this.key.toString(),", value: ").concat(String(this.value)," }")},e}(),cd=function(){return function(e,t){this.parentContext=e,this.rootRequest=t}}(),sd=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),dd=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),fd=function(){function e(e,t,n,r){this.id=Fs(),this.type=e,this.serviceIdentifier=n;var i="symbol"==lr(t)?function(e){return e.toString().slice(7,-1)}(t):t;this.name=new dd(i||""),this.identifier=t,this.metadata=new Array;var o=null;"string"==typeof r?o=new ud(bs,r):r instanceof ud&&(o=r),null!==o&&this.metadata.push(o)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(Cs)},e.prototype.matchesArray=function(e){return this.matchesTag(Cs)(e)},e.prototype.isNamed=function(){return this.hasTag(bs)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return Rs.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(xs)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===bs}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return Rs.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(bs)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}(),hd=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function pd(e,t,n,r){var i=e.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o){var a="".concat(Us," ").concat(t,".");throw new Error(a)}var l=i.userGeneratedMetadata,u=Object.keys(l),c=0===n.length&&u.length>0,s=u.length>n.length,d=function(e,t,n,r,i){for(var o=[],a=0;a<i;a++){var l=vd(a,e,t,n,r);null!==l&&o.push(l)}return o}(r,t,o,l,c||s?u.length:n.length),f=md(e,n,t);return hd(hd([],d,!0),f,!0)}function vd(e,t,n,r,i){var o=i[e.toString()]||[],a=bd(o),l=!0!==a.unmanaged,u=r[e];if((u=a.inject||a.multiInject||u)instanceof sd&&(u=u.unwrap()),l){if(!t&&(u===Object||u===Function||void 0===u)){var c="".concat(Gs," argument ").concat(e," in class ").concat(n,".");throw new Error(c)}var s=new fd(Ds.ConstructorArgument,a.targetName,u);return s.metadata=o,s}return null}function gd(e,t,n,r){var i=e||t;if(void 0===i){var o="".concat(Us," for property ").concat(String(n)," in class ").concat(r,".");throw new Error(o)}return i}function md(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),a=0,l=Object.keys(r).concat(o);a<l.length;a++){var u=l[a],c=r[u],s=bd(c),d=s.targetName||u,f=gd(s.inject,s.multiInject,u,n),h=new fd(Ds.ClassProperty,d,f);h.metadata=c,i.push(h)}var p=Object.getPrototypeOf(t.prototype).constructor;if(p!==Object){var v=md(e,p,n);i=hd(hd([],i,!0),v,!0)}return i}function yd(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=pd(e,ad(n),n,!0),i=r.map((function(e){return e.metadata.filter((function(e){return e.key===_s}))})),o=[].concat.apply([],i).length,a=r.length-o;return a>0?a:yd(e,n)}return 0}function bd(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[ks],multiInject:t[Cs],targetName:t[ws],unmanaged:t[_s]}}var wd=function(){function e(e,t,n,r,i){this.id=Fs(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function _d(e){return e._bindingDictionary}function xd(e,t,n,r,i){var o=Cd(n.container,i.serviceIdentifier),a=[];return o.length===ed.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=Cd(n.container,i.serviceIdentifier)),a=t?o:o.filter((function(e){var t=new wd(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case ed.NoBindingsAvailable:if(n.isOptional())return t;var i=nd(e),o=Ws;throw o+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," ".concat(e,"\n ").concat(e," - ").concat(n)}return" ".concat(e)}(i,n),o+=rd(r,i,Cd),new Error(o);case ed.OnlyOneBindingAvailable:return t;case ed.MultipleBindingsAvailable:default:if(n.isArray())return t;i=nd(e),o="".concat(Hs," ").concat(i);throw o+=rd(r,i,Cd),new Error(o)}}(i.serviceIdentifier,a,i,n.container),a}function kd(e,t,n,r,i,o){var a,l;if(null===i){a=xd(e,t,r,null,o),l=new wd(n,r,null,a,o);var u=new cd(r,l);r.addPlan(u)}else a=xd(e,t,r,i,o),l=i.addChildRequest(o.serviceIdentifier,a,o);a.forEach((function(t){var n=null;if(o.isArray())n=l.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=l}if(t.type===js.Instance&&null!==t.implementationType){var i=function(e,t){return pd(e,ad(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var a=yd(e,t.implementationType);if(i.length<a){var u=qs(ad(t.implementationType));throw new Error(u)}}i.forEach((function(t){kd(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function Cd(e,t){var n=[],r=_d(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=Cd(e.parent,t)),n}function Sd(e,t,n,r,i,o,a,l){void 0===l&&(l=!1);var u=new ld(t),c=function(e,t,n,r,i,o){var a=new ud(e?Cs:ks,n),l=new fd(t,r,n,a);if(void 0!==i){var u=new ud(i,o);l.metadata.push(u)}return l}(n,r,i,"",o,a);try{return kd(e,l,i,u,null,c),u}catch(e){throw td(e)&&od(u.plan.rootRequest),e}}function Od(e){return("object"==lr(e)&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function Ed(e){return!!Od(e)||Array.isArray(e)&&e.some(Od)}var Id,Pd,Md=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Rd=globalThis&&globalThis.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ad=function(e,t,n){e.has(t.id)||e.set(t.id,n)},jd=function(e,t){e.cache=t,e.activated=!0,Od(t)&&Dd(e,t)},Dd=function(e,t){return Md(void 0,void 0,void 0,(function(){var n,r;return Rd(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))}))};(Pd=Id||(Id={})).DynamicValue="toDynamicValue",Pd.Factory="toFactory",Pd.Provider="toProvider";var Td=globalThis&&globalThis.__assign||function(){return Td=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Td.apply(this,arguments)},Fd=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Nd=globalThis&&globalThis.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ld=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Bd(e,t,n){var r;if(t.length>0){var i=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===Ds.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=Ed(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),o=Td(Td({},i),{constr:e});r=i.isAsync?function(e){return Fd(this,void 0,void 0,(function(){var t,n;return Nd(this,(function(r){switch(r.label){case 0:return[4,zd(e.constructorInjections)];case 1:return t=r.sent(),[4,zd(e.propertyInjections)];case 2:return n=r.sent(),[2,Vd(Td(Td({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(o):Vd(o)}else r=new e;return r}function Vd(e){var t,n=new((t=e.constr).bind.apply(t,Ld([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var i=t.target.identifier,o=e.propertyInjections[r];n[i]=o})),n}function zd(e){return Fd(this,void 0,void 0,(function(){var t,n,r,i;return Nd(this,(function(o){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]}))}))}function Hd(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(Ps,e)){var i=Reflect.getMetadata(Ps,e);try{return null===(r=(n=t)[i.value])||void 0===r?void 0:r.call(n)}catch(t){if(t instanceof Error)throw new Error(Ks(e.name,t.message))}}}(e,t);return Od(n)?n.then((function(){return t})):t}function Wd(e,t){e.scope!==As.Singleton&&function(e,t){var n="Class cannot be instantiated in ".concat(e.scope===As.Request?"request":"transient"," scope.");if("function"==typeof e.onDeactivation)throw new Error(Js(t.name,n));if(Reflect.hasMetadata(Ms,t))throw new Error(Xs(t.name,n))}(e,t)}var Ud=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Gd=globalThis&&globalThis.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Yd=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((function(t){return Yd(e)(t)}));if(!t.target.isOptional()||0!==n.length){var a=n[0];return Xd(e,t,a)}}},$d=function(e,t){var n=function(e){switch(e.type){case js.Factory:return{factory:e.factory,factoryType:Id.Factory};case js.Provider:return{factory:e.provider,factoryType:Id.Provider};case js.DynamicValue:return{factory:e.dynamicValue,factoryType:Id.DynamicValue};default:throw new Error("Unexpected factory type ".concat(e.type))}}(e);return function(e,t){try{return e()}catch(e){throw td(e)&&(e=t()),e}}((function(){return n.factory.bind(e)(t)}),(function(){return new Error(function(e,t){return"It looks like there is a circular dependency in one of the '".concat(e,"' bindings. Please investigate bindings with ")+"service identifier '".concat(t,"'.")}(n.factoryType,t.currentRequest.serviceIdentifier.toString()))}))},qd=function(e,t,n){var r,i=t.childRequests;switch(function(e){var t=null;switch(e.type){case js.ConstantValue:case js.Function:t=e.cache;break;case js.Constructor:case js.Instance:t=e.implementationType;break;case js.DynamicValue:t=e.dynamicValue;break;case js.Provider:t=e.provider;break;case js.Factory:t=e.factory}if(null===t){var n=nd(e.serviceIdentifier);throw new Error("".concat("Invalid binding type:"," ").concat(n))}}(n),n.type){case js.ConstantValue:case js.Function:r=n.cache;break;case js.Constructor:r=n.implementationType;break;case js.Instance:r=function(e,t,n,r){Wd(e,t);var i=Bd(t,n,r);return Od(i)?i.then((function(e){return Hd(t,e)})):Hd(t,i)}(n,n.implementationType,i,Yd(e));break;default:r=$d(n,t.parentContext)}return r},Kd=function(e,t,n){var r=function(e,t){return t.scope===As.Singleton&&t.activated?t.cache:t.scope===As.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===As.Singleton&&jd(t,n),t.scope===As.Request&&Ad(e,t,n)}(e,t,r=n()),r},Xd=function(e,t,n){return Kd(e,n,(function(){var r=qd(e,t,n);return r=Od(r)?r.then((function(e){return Jd(t,n,e)})):Jd(t,n,r),r}))};function Jd(e,t,n){var r,i=Zd(e.parentContext,t,n),o=nf(e.parentContext.container),a=o.next();do{r=a.value;var l=e.parentContext,u=e.serviceIdentifier,c=tf(r,u);i=Od(i)?ef(c,l,i):Qd(c,l,i),a=o.next()}while(!0!==a.done&&!_d(r).hasKey(e.serviceIdentifier));return i}var Zd=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},Qd=function(e,t,n){for(var r=e.next();!r.done;){if(Od(n=r.value(t,n)))return ef(e,t,n);r=e.next()}return n},ef=function(e,t,n){return Ud(void 0,void 0,void 0,(function(){var r,i;return Gd(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=e.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=e.next(),[3,2];case 4:return[2,r]}}))}))},tf=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},nf=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};var rf=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||rf(n,t))},of=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new ud(e,t),n}},af=of(bs),lf=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},uf=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new cf(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=af(e),new cf(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged())},new cf(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=of(e)(t),new cf(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&lf(e)(t.parentRequest)},new cf(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&af(e)(t.parentRequest)},new cf(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&of(e)(t)(n.parentRequest)},new cf(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&rf(t,lf(e))},new cf(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!rf(t,lf(e))},new cf(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&rf(t,af(e))},new cf(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!rf(t,af(e))},new cf(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&rf(n,of(e)(t))},new cf(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!rf(n,of(e)(t))},new cf(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&rf(t,e)},new cf(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!rf(t,e)},new cf(this._binding)},e}(),cf=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new uf(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new uf(this._binding)},e}(),sf=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new uf(this._binding),this._bindingOnSyntax=new cf(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),df=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=As.Request,new sf(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=As.Transient,new sf(this._binding)},e}(),ff=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new uf(this._binding),this._bindingOnSyntax=new cf(this._binding),this._bindingInSyntax=new df(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),hf=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=js.Instance,this._binding.implementationType=e,new ff(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("".concat("The toSelf function can only be applied when a constructor is used as service identifier"));var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=js.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=js.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new ff(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=js.Constructor,this._binding.implementationType=e,this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=js.Factory,this._binding.factory=e,this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=js.Function,this._binding.scope=As.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=js.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=js.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new sf(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=js.Provider,this._binding.provider=e,this._binding.scope=As.Singleton,new sf(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),pf=function(){function e(){}return e.of=function(t,n,r,i,o){var a=new e;return a.bindings=t,a.middleware=n,a.deactivations=i,a.activations=r,a.moduleActivationStore=o,a},e}();var vf=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(Vs);if(null==t)throw new Error(Vs);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(Vs);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(zs)},e.prototype.remove=function(e){if(null==e)throw new Error(Vs);if(!this._map.delete(e))throw new Error(zs)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){var o=r.filter((function(e){return!i.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,i){for(var o=[],a=0,l=r;a<l.length;a++){var u=l[a];e(u)?n.push(u):o.push(u)}t._setValue(i,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(Vs);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,function(e){return"object"==lr(e)&&null!==e&&"clone"in e&&"function"==typeof e.clone}(e)?e.clone():e)}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),gf=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new vf,onDeactivations:new vf}},e}(),mf=globalThis&&globalThis.__assign||function(){return mf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mf.apply(this,arguments)},yf=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},bf=globalThis&&globalThis.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},wf=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},_f=function(){function e(e){var t=e||{};if("object"!=lr(t))throw new Error("".concat("Invalid Container constructor argument. Container options must be an object."));if(void 0===t.defaultScope)t.defaultScope=As.Transient;else if(t.defaultScope!==As.Singleton&&t.defaultScope!==As.Transient&&t.defaultScope!==As.Request)throw new Error("".concat('Invalid Container option. Default scope must be a string ("singleton" or "transient").'));if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("".concat("Invalid Container option. Auto bind injectable must be a boolean"));if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("".concat("Invalid Container option. Skip base check must be a boolean"));this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=Fs(),this._bindingDictionary=new vf,this._snapshots=[],this._middleware=null,this._activations=new vf,this._deactivations=new vf,this.parent=null,this._metadataReader=new Qs,this._moduleActivationStore=new gf}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new e,a=wf([t,n],r,!0).map((function(e){return _d(e)})),l=_d(o);return a.forEach((function(e){!function(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}(e,l)})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yf(this,void 0,void 0,(function(){var t,n,r,i,o;return bf(this,(function(a){switch(a.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,a.label=1;case 1:return n<r.length?(i=r[n],o=t(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yf(this,void 0,void 0,(function(){var t,n,r,i;return bf(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(r=n[t],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||As.Transient,n=new Ns(e,t);return this._bindingDictionary.add(e,n),new hf(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return yf(this,void 0,void 0,(function(){return bf(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return yf(this,void 0,void 0,(function(){var t;return bf(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new vf},e.prototype.unbindAllAsync=function(){return yf(this,void 0,void 0,(function(){var e,t=this;return bf(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new vf,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,bs,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=function(e,t,n,r){var i=new fd(Ds.Variable,"",t,new ud(n,r)),o=new ld(e);return new wd(t,o,null,[],i)}(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(pf.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return yf(this,void 0,void 0,(function(){var t;return bf(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return yf(this,void 0,void 0,(function(){var r;return bf(this,(function(i){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,bs,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,bs,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,bs,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,bs,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){var n,r;if(Reflect.hasMetadata(Ms,e))return null===(r=(n=t)[Reflect.getMetadata(Ms,e).value])||void 0===r?void 0:r.call(n)},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var i=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(Od(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(Od(o))return this._handleDeactivationError(o,r)}catch(e){if(e instanceof Error)throw new Error(Js(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return yf(this,void 0,void 0,(function(){var n;return bf(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:if((n=r.sent())instanceof Error)throw new Error(Js(t.name,n.message));return[3,3];case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var i=r.value(e);if(Od(i))return i.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return yf(this,void 0,void 0,(function(){var n;return bf(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.bind(r);return t(i,n),i}},r=function(n){return function(r){var i=e.rebind(r);return t(i,n),i}},i=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},o=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(t){return{bindFunction:n(t),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:i(t),onDeactivationFunction:o(t),rebindFunction:r(t),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}}}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=mf(mf({},e),{contextInterceptor:function(e){return e},targetType:Ds.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(Ed(t))throw new Error(function(e){return"You are attempting to construct '".concat(e,"' in a synchronous way\n but it has asynchronous dependencies.")}(e.serviceIdentifier));return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=Sd(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints),r=function(e){return Yd(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n));return r}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return Od(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(Od(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return yf(this,void 0,void 0,(function(){var t=this;return bf(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return yf(this,void 0,void 0,(function(){return bf(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("".concat("Could not unbind serviceIdentifier:"," ").concat(nd(e)))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var i=e.onDeactivation(t);if(Od(i))return i.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return yf(this,void 0,void 0,(function(){return bf(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}(),xf=function(){return function(e){this.id=Fs(),this.registry=e}}();function kf(e,t,n,r){(function(e){if(void 0!==e)throw new Error($s)})(t),Sf(Ss,e,n.toString(),r)}function Cf(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error("".concat(Bs," ").concat(n.toString()))}else t=[e];return t}function Sf(e,t,n,r){var i=Cf(r),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var a=o[n];if(void 0===a)a=[];else for(var l=function(e){if(i.some((function(t){return t.key===e.key})))throw new Error("".concat(Bs," ").concat(e.key.toString()))},u=0,c=a;u<c.length;u++){l(c[u])}a.push.apply(a,i),o[n]=a,Reflect.defineMetadata(e,o,t)}function Of(e){return function(t,n,r){"number"==typeof r?kf(t,n,r,e):function(e,t,n){if(function(e){return void 0!==e.prototype}(e))throw new Error($s);Sf(Os,e.constructor,t,n)}(t,n,e)}}var Ef=function(e){return function(t){return function(n,r,i){if(void 0===t){var o="function"==typeof n?n.name:n.constructor.name;throw new Error(function(e){return"@inject called with undefined this could mean that the class ".concat(e," has ")+"a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."}(o))}return Of(new ud(e,t))(n,r,i)}}}(ks);function If(){return Of(new ud(xs,!0))}function Pf(e,t){return function(){return function(n,r){var i=new ud(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,i,n.constructor)}}}var Mf,Rf,Af,jf=Pf(Ps,"Cannot apply @postConstruct decorator multiple times in the same class"),Df=Pf(Ms,"Cannot apply @preDestroy decorator multiple times in the same class"),Tf=("undefined"==typeof globalThis?"undefined":lr(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":lr(window))<"u"?window:lr(Hn)<"u"?Hn:("undefined"==typeof self?"undefined":lr(self))<"u"?self:{};function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nf(e,t){return t.lifecycle===Rf.Lifecycle.singleton?function(e){return e.inSingletonScope()}(e):function(e){return e.inTransientScope()}(e)}function Lf(e,t){e.whenTargetNamed(zf(t))}function Bf(e,t){return t.bind(Hf(e))}function Vf(e,t){if(t.isBound(Hf(e)))try{return t.rebind(Hf(e))}catch(n){return t.bind(Hf(e))}return t.bind(Hf(e))}function zf(e){return Af.isDefinedToken(e)?e.symbol:e}function Hf(e){return Af.isDefinedToken(e)?e.symbol:e}!function(e){!function(t){var n="object"==lr(Tf)?Tf:"object"==("undefined"==typeof self?"undefined":lr(self))?self:"object"==lr(this)?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}lr(n.Reflect)>"u"?n.Reflect=e:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&lr(Symbol.toPrimitive)<"u"?Symbol.toPrimitive:"@@toPrimitive",i=n&&lr(Symbol.iterator)<"u"?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,l=!o&&!a,u={create:o?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:l?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:l?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),s="object"==lr(ar)&&ar.env&&"true"===ar.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=s||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=s||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(s||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,r){if(T(n)){if(!U(e))throw new TypeError;if(!Y(t))throw new TypeError;return C(e,t)}if(!U(e))throw new TypeError;if(!L(t))throw new TypeError;if(!L(r)&&!T(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),S(e,t,n=W(n),r)}function v(e,t){function n(n,r){if(!L(n))throw new TypeError;if(!T(r)&&!$(r))throw new TypeError;R(e,t,n,r)}return n}function g(e,t,n,r){if(!L(n))throw new TypeError;return T(r)||(r=W(r)),R(e,t,n,r)}function m(e,t,n){if(!L(t))throw new TypeError;return T(n)||(n=W(n)),E(e,t,n)}function y(e,t,n){if(!L(t))throw new TypeError;return T(n)||(n=W(n)),I(e,t,n)}function b(e,t,n){if(!L(t))throw new TypeError;return T(n)||(n=W(n)),P(e,t,n)}function w(e,t,n){if(!L(t))throw new TypeError;return T(n)||(n=W(n)),M(e,t,n)}function _(e,t){if(!L(e))throw new TypeError;return T(t)||(t=W(t)),A(e,t)}function x(e,t){if(!L(e))throw new TypeError;return T(t)||(t=W(t)),j(e,t)}function k(e,t,n){if(!L(t))throw new TypeError;T(n)||(n=W(n));var r=O(t,n,!1);if(T(r)||!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}function C(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!T(r)&&!F(r)){if(!Y(r))throw new TypeError;t=r}}return t}function S(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!T(o)&&!F(o)){if(!L(o))throw new TypeError;r=o}}return r}function O(e,t,n){var r=h.get(e);if(T(r)){if(!n)return;r=new d,h.set(e,r)}var i=r.get(t);if(T(i)){if(!n)return;i=new d,r.set(t,i)}return i}function E(e,t,n){if(I(e,t,n))return!0;var r=Q(t);return!F(r)&&E(e,r,n)}function I(e,t,n){var r=O(t,n,!1);return!T(r)&&z(r.has(e))}function P(e,t,n){if(I(e,t,n))return M(e,t,n);var r=Q(t);return F(r)?void 0:P(e,r,n)}function M(e,t,n){var r=O(t,n,!1);if(!T(r))return r.get(e)}function R(e,t,n,r){O(n,r,!0).set(e,t)}function A(e,t){var n=j(e,t),r=Q(e);if(null===r)return n;var i=A(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new f,a=[],l=0,u=n;l<u.length;l++){var c=u[l];o.has(c)||(o.add(c),a.push(c))}for(var s=0,d=i;s<d.length;s++){c=d[s];o.has(c)||(o.add(c),a.push(c))}return a}function j(e,t){var n=[],r=O(e,t,!1);if(T(r))return n;for(var i=K(r.keys()),o=0;;){var a=J(i);if(!a)return n.length=o,n;var l=X(a);try{n[o]=l}catch(e){try{Z(i)}finally{throw e}}o++}}function D(e){if(null===e)return 1;switch(lr(e)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function T(e){return void 0===e}function F(e){return null===e}function N(e){return"symbol"==lr(e)}function L(e){return"object"==lr(e)?null!==e:"function"==typeof e}function B(e,t){switch(D(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n="string",i=q(e,r);if(void 0!==i){var o=i.call(e,n);if(L(o))throw new TypeError;return o}return V(e)}function V(e,t){var n,r,i=e.toString;if(G(i)&&!L(r=i.call(e)))return r;if(G(n=e.valueOf)&&!L(r=n.call(e)))return r;throw new TypeError}function z(e){return!!e}function H(e){return""+e}function W(e){var t=B(e);return N(t)?t:H(t)}function U(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function G(e){return"function"==typeof e}function Y(e){return"function"==typeof e}function $(e){switch(D(e)){case 3:case 4:return!0;default:return!1}}function q(e,t){var n=e[t];if(null!=n){if(!G(n))throw new TypeError;return n}}function K(e){var t=q(e,i);if(!G(t))throw new TypeError;var n=t.call(e);if(!L(n))throw new TypeError;return n}function X(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c||t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,n=u.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(u.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function l(e){return"function"==typeof Uint8Array?("undefined"==typeof crypto?"undefined":lr(crypto))<"u"?crypto.getRandomValues(new Uint8Array(e)):("undefined"==typeof msCrypto?"undefined":lr(msCrypto))<"u"?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=l(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];(4===r||6===r||8===r)&&(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",v),e("defineMetadata",g),e("hasMetadata",m),e("hasOwnMetadata",y),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",_),e("getOwnMetadataKeys",x),e("deleteMetadata",k)}(r)}()}(Mf||(Mf={})),function(e){e.defineToken=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0,global:!1};return new e.DefinedToken(t,n)};var t,n=ls((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(this,e),this.prototype={};var r=n.multiple,i=void 0!==r&&r,o=n.global;this.name=t,this.symbol=o?Symbol.for(this.name):Symbol(this.name),this.multiple=i}));e.DefinedToken=n,e.isModule=function(e){return!!e&&"object"==lr(e)&&"id"in e},(t=e.Lifecycle||(e.Lifecycle={})).singleton="singleton",t.transient="transient",e.ClassOptionSymbol=Symbol.for("SyringeClassOption"),e.DefaultOption={lifecycle:"transient"}}(Rf||(Rf={})),function(e){e.toArray=function(e){return Array.isArray(e)?e:void 0===e?[]:[e]},e.isClass=function(e){return!(!e||"function"!=typeof e||!("prototype"in e))},e.isDefinedToken=function(e){return!!(e&&"object"==lr(e)&&"symbol"in e&&"multiple"in e)},e.isInjectOption=function(e){return!(!e||"object"!=lr(e)||!("token"in e))},e.isNamedToken=function(e){return!!(e&&"object"==lr(e)&&"token"in e&&"named"in e)},e.isMultipleEnabled=function(t){return e.isDefinedToken(t)&&t.multiple}}(Af||(Af={}));var Wf=new _f;function Uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){if(Reflect.hasOwnMetadata(Es,e))throw new Error(Ls);var t=Reflect.getMetadata(Is,e)||[];return Reflect.defineMetadata(Es,t,e),e};return function(n){Reflect.defineMetadata(Rf.ClassOptionSymbol,ys(ys({},e),{},{target:n}),n),t(n)}}function Gf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Uf(ys(ys({},e),{},{lifecycle:Rf.Lifecycle.singleton})).apply(void 0,[t].concat(r)),t}}function Yf(e){return Ef(e instanceof sd?e:Hf(e))}function $f(e){return function(e){return Of(new ud(bs,e))}(zf(e))}var qf=Symbol.for("SyringeSideOption");var Kf=function(){function e(t,n,r){us(this,e),this.register=t,this.token=n,this.option=r,this.rawToken=Af.isNamedToken(n)?n.token:n,this.named=Af.isNamedToken(n)?n.named:void 0,this.mutiple=!!this.named||Af.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return ls(e,[{key:"resolve",value:function(){var e=this,t=this.register;(function(e){return e&&"object"==lr(e)&&"bind"in e&&"unbind"in e&&"rebind"in e&&"isBound"in e})(t)&&(this.mutiple?this.resolveMutilple(t):(this.resolveMono(t),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach((function(n){Af.isMultipleEnabled(n)?Bf(n,t).toService(e.generalToken):Vf(n,t).toService(e.generalToken)}))))}},{key:"resolveMono",value:function(e){if("useValue"in this.option)return Vf(this.generalToken,e).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var t=this.option.useDynamic[this.option.useDynamic.length-1];return Nf(Vf(this.generalToken,e).toDynamicValue((function(e){var n=hh.getContainer(e.container);return t({container:n})})),this.option)}if(this.option.useFactory.length>0){var n=this.option.useFactory[this.option.useFactory.length-1];return Vf(this.generalToken,e).toFactory((function(e){var t=hh.getContainer(e.container);return n({container:t})}))}if(this.option.useClass.length>0){var r=this.option.useClass[this.option.useClass.length-1];return Nf(Vf(this.generalToken,e).to(r),this.option)}}},{key:"resolveMutilple",value:function(e){var t=this,n=this.option.useClass.map((function(n){return Nf(Bf(t.generalToken,e).to(n),t.option)})),r=this.option.useDynamic.map((function(n){return Nf(Bf(t.generalToken,e).toDynamicValue((function(e){var t=hh.getContainer(e.container);return n({container:t})})),t.option)})),i=this.option.useFactory.map((function(n){return Bf(t.generalToken,e).toFactory((function(e){var t=hh.getContainer(e.container);return n({container:t})}))})),o="useValue"in this.option?Bf(this.generalToken,e).toConstantValue(this.option.useValue):void 0;this.named&&(n.forEach((function(e){return t.named&&Lf(e,t.named)})),r.forEach((function(e){return t.named&&Lf(e,t.named)})),i.forEach((function(e){return t.named&&Lf(e,t.named)})),o&&Lf(o,this.named))}}],[{key:"resolveTarget",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{try{var i=Reflect.getMetadata(qf,n);i&&e.resolveOption(t,i)}catch(e){}if(Af.isClass(n))if(r.useClass){var o=Af.toArray(r.useClass);o.unshift(n),r.useClass=o}else r.useClass=[n];var a;try{a=Reflect.getMetadata(Rf.ClassOptionSymbol,n)}catch(e){}if((a=ys(ys({},a||{}),r)).token){var l=Af.toArray(a.token);l.unshift(n),a.token=l}else a.token=[n];e.resolveOption(t,a)}catch(e){}}},{key:"resolveOption",value:function(t,n){var r=function(e){var t=Af.toArray(e.token),n=Af.toArray(e.useClass),r=Af.toArray(e.useDynamic),i=Af.toArray(e.useFactory),o=Af.toArray(e.contrib),a=e.lifecycle||Rf.Lifecycle.transient,l={token:t,useClass:n,lifecycle:o.length>0?Rf.Lifecycle.singleton:a,contrib:o,useDynamic:r,useFactory:i};return"useValue"in e&&(l.useValue=e.useValue),l}(ys(ys({},e.globalConfig),n));0===r.useClass.length&&0===r.useDynamic.length&&0===r.useFactory.length&&!("useValue"in r)||r.token.forEach((function(n){new e(t,n,ys({},r)).resolve()}))}}])}();Kf.globalConfig=Rf.DefaultOption;var Xf,Jf,Zf,Qf=Kf,eh=Rf.defineToken("SyringeContributionProvider",{global:!0});!function(e){function t(e){return{dispose:e}}e.is=function(e){return!!e&&"object"==lr(e)&&"dispose"in e&&"function"==typeof e.dispose},e.create=t,e.NONE=t((function(){}))}(Xf||(Xf={})),function(e){e.is=function(e){return!!e&&"object"==lr(e)&&"disposed"in e&&"boolean"==typeof e.disposed}}(Jf||(Jf={})),function(e){e.None=function(){return Xf.NONE},e.map=function(e,t){return function(n,r){return e((function(e){return n.call(r,t(e))}),void 0)}}}(Zf||(Zf={}));var th=function(){return ls((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];us(this,e),this.mono=!1,this.mono=t}),[{key:"length",get:function(){return this._callbacks&&this._callbacks.length||0}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this._callbacks||(this._callbacks=[]),this._callbacks.push([e,t])}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this._callbacks){for(var n=!1,r=0;r<this._callbacks.length;r+=1)if(this._callbacks[r][0]===e){if(this._callbacks[r][1]===t)return void this._callbacks.splice(r,1);n=!0}if(n)throw new Error("You should remove it with the same context you add it")}}},{key:Symbol.iterator,value:function(){return this._callbacks?this._callbacks.slice(0).map((function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[0].apply(e[1],n)}}))[Symbol.iterator]():[][Symbol.iterator]()}},{key:"invoke",value:function(){var e,t=[],n=vs(this);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{t.push(r.apply(void 0,arguments))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"isEmpty",value:function(){return!this._callbacks||0===this._callbacks.length}},{key:"dispose",value:function(){this._callbacks=void 0}}])}(),nh=function(){function e(t){us(this,e),this._disposed=!1,this._options=t}return ls(e,[{key:"event",get:function(){var t=this;return this._event||(this._event=function(n,r,i){t._callbacks||(t._callbacks=new th),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(n,r);var o={dispose:function(){o.dispose=e._noop,t._disposed||(t._callbacks.remove(n,r),o.dispose=e._noop,t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t))}};return Array.isArray(i)&&i.push(o),o}),this._event}},{key:"fire",value:function(e){this._callbacks&&this._callbacks.invoke(e)}},{key:"sequence",value:(t=rs(ps.mark((function e(t){var n,r,i;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._callbacks){e.next=20;break}n=vs(this._callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=12;break}return i=r.value,e.next=8,t(i);case 8:if(e.sent){e.next=10;break}return e.abrupt("break",12);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(e){return t.apply(this,arguments)})},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this._disposed=!0}}]);var t}();nh._noop=function(){};var rh=nh,ih=function(){return ls((function e(){var t=this;us(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.disposables=[],this.onDisposeEmitter=new rh,this.disposingElements=!1,r.forEach((function(e){return t.push(e)}))}),[{key:"onDispose",get:function(){return this.onDisposeEmitter.event}},{key:"checkDisposed",value:function(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}},{key:"disposed",get:function(){return 0===this.disposables.length}},{key:"dispose",value:function(){if(!this.disposed&&!this.disposingElements){for(this.disposingElements=!0;!this.disposed;)try{this.disposables.pop().dispose()}catch(e){console.error(e)}this.disposingElements=!1,this.checkDisposed()}}},{key:"push",value:function(e){var t=this,n=this.disposables;n.push(e);var r=e.dispose.bind(e),i=Xf.create((function(){var r=n.indexOf(e);-1!==r&&n.splice(r,1),t.checkDisposed()}));return e.dispose=function(){i.dispose(),r()},i}},{key:"pushAll",value:function(e){var t=this;return e.map((function(e){return t.push(e)}))}}])}(),oh=function(){return ls((function e(t,n,r){var i=this;us(this,e),this.onChangedEmitter=new rh,this.option={recursive:!1,cache:!0},this.toDispose=new ih,this.onCtxChanged=function(){i.services=void 0,i.onChangedEmitter.fire()},this.container=n,this.serviceIdentifier=t,r&&(this.option=ys(ys({},this.option),r)),this.toDispose.push(this.onChangedEmitter),this.toDispose.push(this.container.onModuleChanged(this.onCtxChanged)),this.toDispose.push(this.container.onRegistered(this.onCtxChanged))}),[{key:"onChanged",get:function(){return this.onChangedEmitter.event}},{key:"dispose",value:function(){this.toDispose.dispose(),this.disposed=!0}},{key:"getServices",value:function(e){for(var t=[],n=this.container;n;){if(n.isBound(this.serviceIdentifier)){var r=n.getAll(this.serviceIdentifier);t.push.apply(t,ts(r))}n=e?n.parent:void 0}return t}},{key:"getContributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ys(ys({},this.option),e),n=t.cache,r=t.recursive,i=void 0===r||r;return(!n||void 0===this.services)&&(this.services=this.getServices(!!i)),this.services}}])}();function ah(e,t,n){e({token:{token:eh,named:t},useDynamic:function(e){return new oh(t,e.container,n)},lifecycle:Rf.Lifecycle.singleton})}var lh=function(){return ls((function e(t){var n=this;us(this,e),this.inversifyRegister=function(e,t,r,i){var o={bind:e,unbind:t,isBound:r,rebind:i},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Af.isInjectOption(e)?Qf.resolveOption(o,e):Qf.resolveTarget(o,e,t)};n.baseRegistry&&n.baseRegistry(a),n.optionCollection&&n.optionCollection.forEach((function(e){return a(e)}))},this.baseRegistry=t,this.inversifyModule=new xf(this.inversifyRegister),this.id=this.inversifyModule.id}),[{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(t)})),this}},{key:"contribution",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.options.push(function(e,t){return{token:{token:eh,named:e},useDynamic:function(n){return new oh(e,n.container,t)},lifecycle:Rf.Lifecycle.singleton}}(t))})),this}}])}();function uh(e){return e&&"inversifyModule"in e}function ch(e){return new lh(e)}var sh="abcdefghigklmnopqrstuvwxyz",dh=sh+"0123456789"+sh.toUpperCase();var fh=new Map,hh=function(){function e(t){us(this,e),this.toDisposeOnParentChange=new ih,this.onModuleChangedEmitter=new rh,this.id=function(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=dh.charAt(Math.floor(Math.random()*dh.length));return t}(),this.onRegisteredEmitter=new rh,this.loadedModules=[],this.inversify=!0,this.container=t||new _f,e.setContainer(this.container,this)}return ls(e,[{key:"onModuleChanged",get:function(){return this.onModuleChangedEmitter.event}},{key:"onRegistered",get:function(){return this.onRegisteredEmitter.event}},{key:"parent",get:function(){return this._parent},set:function(e){var t=this;this._parent=e,this.toDisposeOnParentChange&&(this.toDisposeOnParentChange.dispose(),this.toDisposeOnParentChange=new ih),e&&(this.toDisposeOnParentChange.push(e.onModuleChanged((function(){t.onModuleChangedEmitter.fire()}))),this.toDisposeOnParentChange.push(e.onRegistered((function(){t.onRegisteredEmitter.fire()}))))}},{key:"dispose",value:function(){this.toDisposeOnParentChange.dispose(),this.onModuleChangedEmitter.dispose(),this.onRegisteredEmitter.dispose(),this.disposed=!0}},{key:"load",value:function(e,t){var n=this;return t||!this.loadedModules.includes(e.id)?(uh(e)?(this.container.load(e.inversifyModule),this.onModuleChangedEmitter.fire()):console.warn("Unsupported module.",e),this.loadedModules.push(e.id),{dispose:function(){n.unload(e)}}):{dispose:function(){}}}},{key:"unload",value:function(e){uh(e)&&(this.container.unload(e.inversifyModule),this.onModuleChangedEmitter.fire(),this.loadedModules=this.loadedModules.filter((function(t){return t!==e.id})))}},{key:"remove",value:function(e){return this.container.unbind(Hf(e))}},{key:"get",value:function(e){var t,n=Hf(e);try{t=this.container.get(n)}catch(e){if(e.message.includes("No matching bindings found")&&this.parent)return this.parent.get(n);throw e}return t}},{key:"getNamed",value:function(e,t){return this.container.getNamed(Hf(e),zf(t))}},{key:"getAll",value:function(e){return this.container.getAll(Hf(e))}},{key:"getAllNamed",value:function(e,t){return this.container.getAllNamed(Hf(e),zf(t))}},{key:"isBound",value:function(e){return this.container.isBound(Hf(e))}},{key:"isBoundNamed",value:function(e,t){return this.container.isBoundNamed(Hf(e),zf(t))}},{key:"createChild",value:function(){var t=new e(this.container.createChild());return t.parent=this,t}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Af.isInjectOption(e)?Qf.resolveOption(this.container,e):Qf.resolveTarget(this.container,e,t),this.onRegisteredEmitter.fire()}}],[{key:"setContainer",value:function(e,t){return fh.set(e.id,t)}},{key:"getContainer",value:function(t){var n=fh.get(t.id);if(!n){var r=new e(t);return e.setContainer(t,r),r}return n}},{key:"config",value:function(e){Qf.globalConfig=e}}])}(),ph=new hh(Wf);ph.register.bind(ph);var vh,gh=function(e){return function(t,n,r){$f(e)(t,n,r),Yf(eh)(t,n,r)}};!function(e){e.Provider=eh,e.register=ah}(vh||(vh={}));var mh,yh,bh={exports:{}};function wh(){if(yh)return mh;yh=1;var e=1e3,t=6e4,n=60*t,r=24*n,i=7*r,o=365.25*r;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return mh=function(l,u){u=u||{};var c=lr(l);if("string"===c&&l.length>0)return function(a){if(a=String(a),!(a.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(l){var u=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}(l);if("number"===c&&isFinite(l))return u.long?function(i){var o=Math.abs(i);return o>=r?a(i,o,r,"day"):o>=n?a(i,o,n,"hour"):o>=t?a(i,o,t,"minute"):o>=e?a(i,o,e,"second"):i+" ms"}(l):function(i){var o=Math.abs(i);return o>=r?Math.round(i/r)+"d":o>=n?Math.round(i/n)+"h":o>=t?Math.round(i/t)+"m":o>=e?Math.round(i/e)+"s":i+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}}var _h=function(e){function t(e){var r,i,o,a=null;function l(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(l.enabled){var o=l,a=Number(new Date),u=a-(r||a);o.diff=u,o.prev=r,o.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var i=t.formatters[r];if("function"==typeof i){var a=n[c];e=i.call(o,a),n.splice(c,1),c--}return e})),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=n,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(l),l}function n(e,n){var r=t(this.namespace+(lr(n)>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(ts(t.names.map(r)),ts(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=wh(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};function xh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kh(e,t){if(t&&("object"==lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xh(e)}function Ch(e){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sh(e,t){return(Sh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sh(e,t)}!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&lr(ar)<"u"&&"env"in ar&&(e=ar.env.DEBUG),e},t.useColors=function(){return!(!(("undefined"==typeof window?"undefined":lr(window))<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(("undefined"==typeof navigator?"undefined":lr(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(("undefined"==typeof document?"undefined":lr(document))<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||("undefined"==typeof window?"undefined":lr(window))<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||("undefined"==typeof navigator?"undefined":lr(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||("undefined"==typeof navigator?"undefined":lr(navigator))<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=_h(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(bh,bh.exports),Ff(bh.exports)("di");var Eh={};function Ih(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ph(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ph(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Eh.deprecate=function(e,t){var n=!0;return function(){return n&&(console.warn("DeprecationWarning: "+t),n=!1),e.apply(this,arguments)}};var Mh=Eh.deprecate((function(){}),"Hook.context is deprecated and will be removed"),Rh=function(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)},Ah=function(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)},jh=function(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)},Dh=function(){return ls((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;us(this,e),this._args=t,this.name=n,this.taps=[],this.interceptors=[],this._call=Rh,this.call=Rh,this._callAsync=Ah,this.callAsync=Ah,this._promise=jh,this.promise=jh,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}),[{key:"compile",value:function(e){throw new Error("Abstract: should be overridden")}},{key:"_createCall",value:function(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}},{key:"_tap",value:function(e,t,n){if("string"==typeof t)t={name:t.trim()};else if("object"!==lr(t)||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");void 0!==t.context&&Mh(),t=Object.assign({type:e,fn:n},t),t=this._runRegisterInterceptors(t),this._insert(t)}},{key:"tap",value:function(e,t){this._tap("sync",e,t)}},{key:"tapAsync",value:function(e,t){this._tap("async",e,t)}},{key:"tapPromise",value:function(e,t){this._tap("promise",e,t)}},{key:"_runRegisterInterceptors",value:function(e){var t,n=Ih(this.interceptors);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.register){var i=r.register(e);void 0!==i&&(e=i)}}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"withOptions",value:function(e){var t=this,n=function(t){return Object.assign({},e,"string"==typeof t?{name:t}:t)};return{name:this.name,tap:function(e,r){return t.tap(n(e),r)},tapAsync:function(e,r){return t.tapAsync(n(e),r)},tapPromise:function(e,r){return t.tapPromise(n(e),r)},intercept:function(e){return t.intercept(e)},isUsed:function(){return t.isUsed()},withOptions:function(e){return t.withOptions(n(e))}}}},{key:"isUsed",value:function(){return this.taps.length>0||this.interceptors.length>0}},{key:"intercept",value:function(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(var t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}},{key:"_resetCompilation",value:function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}},{key:"_insert",value:function(e){var t;this._resetCompilation(),"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));var n=0;"number"==typeof e.stage&&(n=e.stage);for(var r=this.taps.length;r>0;){r--;var i=this.taps[r];this.taps[r+1]=i;var o=i.stage||0;if(t){if(t.has(i.name)){t.delete(i.name);continue}if(t.size>0)continue}if(!(o>n)){r++;break}}this.taps[r]=e}}])}();Object.setPrototypeOf(Dh.prototype,null);var Th=Dh;function Fh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nh(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nh(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Lh=function(){return ls((function e(t){us(this,e),this.config=t,this.options=void 0,this._args=void 0}),[{key:"create",value:function(e){var t;switch(this.init(e),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(e){return"throw ".concat(e,";\n")},onResult:function(e){return"return ".concat(e,";\n")},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(e){return"_callback(".concat(e,");\n")},onResult:function(e){return"_callback(null, ".concat(e,");\n")},onDone:function(){return"_callback();\n"}}));break;case"promise":var n=!1,r=this.contentWithInterceptors({onError:function(e){return n=!0,"_error(".concat(e,");\n")},onResult:function(e){return"_resolve(".concat(e,");\n")},onDone:function(){return"_resolve();\n"}}),i="";i+='"use strict";\n',i+=this.header(),i+="return new Promise((function(_resolve, _reject) {\n",n&&(i+="var _sync = true;\n",i+="function _error(_err) {\n",i+="if(_sync)\n",i+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",i+="else\n",i+="_reject(_err);\n",i+="};\n"),i+=r,n&&(i+="_sync = false;\n"),i+="}));\n",t=new Function(this.args(),i)}return this.deinit(),t}},{key:"setup",value:function(e,t){e._x=t.taps.map((function(e){return e.fn}))}},{key:"init",value:function(e){this.options=e,this._args=e.args.slice()}},{key:"deinit",value:function(){this.options=void 0,this._args=void 0}},{key:"contentWithInterceptors",value:function(e){var t=this;if(this.options.interceptors.length>0){for(var n=e.onError,r=e.onResult,i=e.onDone,o="",a=0;a<this.options.interceptors.length;a++){var l=this.options.interceptors[a];l.call&&(o+="".concat(this.getInterceptor(a),".call(").concat(this.args({before:l.context?"_context":void 0}),");\n"))}return o+=this.content(Object.assign(e,{onError:n&&function(e){for(var r="",i=0;i<t.options.interceptors.length;i++){t.options.interceptors[i].error&&(r+="".concat(t.getInterceptor(i),".error(").concat(e,");\n"))}return r+=n(e)},onResult:r&&function(e){for(var n="",i=0;i<t.options.interceptors.length;i++){t.options.interceptors[i].result&&(n+="".concat(t.getInterceptor(i),".result(").concat(e,");\n"))}return n+=r(e)},onDone:i&&function(){for(var e="",n=0;n<t.options.interceptors.length;n++){t.options.interceptors[n].done&&(e+="".concat(t.getInterceptor(n),".done();\n"))}return e+=i()}}))}return this.content(e)}},{key:"header",value:function(){var e="";return this.needContext()?e+="var _context = {};\n":e+="var _context;\n",e+="var _x = this._x;\n",this.options.interceptors.length>0&&(e+="var _taps = this.taps;\n",e+="var _interceptors = this.interceptors;\n"),e}},{key:"needContext",value:function(){var e,t=Fh(this.options.taps);try{for(t.s();!(e=t.n()).done;){if(e.value.context)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"callTap",value:function(e,t){for(var n=t.onError,r=t.onResult,i=t.onDone,o=t.rethrowIfPossible,a="",l=!1,u=0;u<this.options.interceptors.length;u++){var c=this.options.interceptors[u];c.tap&&(l||(a+="var _tap".concat(e," = ").concat(this.getTap(e),";\n"),l=!0),a+="".concat(this.getInterceptor(u),".tap(").concat(c.context?"_context, ":"","_tap").concat(e,");\n"))}a+="var _fn".concat(e," = ").concat(this.getTapFn(e),";\n");var s=this.options.taps[e];switch(s.type){case"sync":o||(a+="var _hasError".concat(e," = false;\n"),a+="try {\n"),a+=r?"var _result".concat(e," = _fn").concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"):"_fn".concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"),o||(a+="} catch(_err) {\n",a+="_hasError".concat(e," = true;\n"),a+=n("_err"),a+="}\n",a+="if(!_hasError".concat(e,") {\n")),r&&(a+=r("_result".concat(e))),i&&(a+=i()),o||(a+="}\n");break;case"async":var d="";d+=r?"(function(_err".concat(e,", _result").concat(e,") {\n"):"(function(_err".concat(e,") {\n"),d+="if(_err".concat(e,") {\n"),d+=n("_err".concat(e)),d+="} else {\n",r&&(d+=r("_result".concat(e))),i&&(d+=i()),d+="}\n",d+="})",a+="_fn".concat(e,"(").concat(this.args({before:s.context?"_context":void 0,after:d}),");\n");break;case"promise":a+="var _hasResult".concat(e," = false;\n"),a+="var _promise".concat(e," = _fn").concat(e,"(").concat(this.args({before:s.context?"_context":void 0}),");\n"),a+="if (!_promise".concat(e," || !_promise").concat(e,".then)\n"),a+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise".concat(e," + ')');\n"),a+="_promise".concat(e,".then((function(_result").concat(e,") {\n"),a+="_hasResult".concat(e," = true;\n"),r&&(a+=r("_result".concat(e))),i&&(a+=i()),a+="}), function(_err".concat(e,") {\n"),a+="if(_hasResult".concat(e,") throw _err").concat(e,";\n"),a+=n("_err".concat(e)),a+="});\n"}return a}},{key:"callTapsSeries",value:function(e){var t=this,n=e.onError,r=e.onResult,i=e.resultReturns,o=e.onDone,a=e.doneReturns,l=e.rethrowIfPossible;if(0===this.options.taps.length)return o();for(var u=this.options.taps.findIndex((function(e){return"sync"!==e.type})),c=i||a,s="",d=o,f=0,h=function(){var e=p;d!==o&&("sync"!==t.options.taps[e].type||f++>20)&&(f=0,s+="function _next".concat(e,"() {\n"),s+=d(),s+="}\n",d=function(){return"".concat(c?"return ":"","_next").concat(e,"();\n")});var i=d,a=function(e){return e?"":o()},h=t.callTap(e,{onError:function(t){return n(e,t,i,a)},onResult:r&&function(t){return r(e,t,i,a)},onDone:!r&&i,rethrowIfPossible:l&&(u<0||e<u)});d=function(){return h}},p=this.options.taps.length-1;p>=0;p--)h();return s+=d()}},{key:"callTapsLooping",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;if(0===this.options.taps.length)return n();var i=this.options.taps.every((function(e){return"sync"===e.type})),o="";i||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(var a=0;a<this.options.interceptors.length;a++){var l=this.options.interceptors[a];l.loop&&(o+="".concat(this.getInterceptor(a),".loop(").concat(this.args({before:l.context?"_context":void 0}),");\n"))}return o+=this.callTapsSeries({onError:t,onResult:function(e,t,n,r){var o="";return o+="if(".concat(t," !== undefined) {\n"),o+="_loop = true;\n",i||(o+="if(_loopAsync) _looper();\n"),o+=r(!0),o+="} else {\n",o+=n(),o+="}\n"},onDone:n&&function(){var e="";return e+="if(!_loop) {\n",e+=n(),e+="}\n"},rethrowIfPossible:r&&i}),o+="} while(_loop);\n",i||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}},{key:"callTapsParallel",value:function(e){var t=this,n=e.onError,r=e.onResult,i=e.onDone,o=e.rethrowIfPossible,a=e.onTap,l=void 0===a?function(e,t){return t()}:a;if(this.options.taps.length<=1)return this.callTapsSeries({onError:n,onResult:r,onDone:i,rethrowIfPossible:o});var u="";u+="do {\n",u+="var _counter = ".concat(this.options.taps.length,";\n"),i&&(u+="var _done = (function() {\n",u+=i(),u+="});\n");for(var c=function(e){var a=function(){return i?"if(--_counter === 0) _done();\n":"--_counter;"},c=function(e){return e||!i?"_counter = 0;\n":"_counter = 0;\n_done();\n"};u+="if(_counter <= 0) break;\n",u+=l(e,(function(){return t.callTap(e,{onError:function(t){var r="";return r+="if(_counter > 0) {\n",r+=n(e,t,a,c),r+="}\n"},onResult:r&&function(t){var n="";return n+="if(_counter > 0) {\n",n+=r(e,t,a,c),n+="}\n"},onDone:!r&&function(){return a()},rethrowIfPossible:o})}),a,c)},s=0;s<this.options.taps.length;s++)c(s);return u+="} while(false);\n"}},{key:"args",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.before,n=e.after,r=this._args;return t&&(r=[t].concat(r)),n&&(r=r.concat(n)),0===r.length?"":r.join(", ")}},{key:"getTapFn",value:function(e){return"_x[".concat(e,"]")}},{key:"getTap",value:function(e){return"_taps[".concat(e,"]")}},{key:"getInterceptor",value:function(e){return"_interceptors[".concat(e,"]")}}])}(),Bh=Lh;function Vh(e,t,n){return t=Ch(t),kh(e,zh()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function zh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zh=function(){return!!e})()}var Hh=Th,Wh=function(e){function t(){return us(this,t),Vh(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,n){return t(n)},onDone:n,rethrowIfPossible:r})}}])}(Bh),Uh=new Wh,Gh=function(){throw new Error("tapAsync is not supported on a SyncHook")},Yh=function(){throw new Error("tapPromise is not supported on a SyncHook")},$h=function(e){return Uh.setup(this,e),Uh.create(e)};function qh(){var e=new Hh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0);return e.constructor=qh,e.tapAsync=Gh,e.tapPromise=Yh,e.compile=$h,e}qh.prototype=null;var Kh=qh;function Xh(e,t,n){return t=Ch(t),kh(e,Jh()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function Jh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jh=function(){return!!e})()}var Zh=function(e){function t(){return us(this,t),Xh(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.resultReturns,i=e.onDone,o=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,n){return t(n)},onResult:function(e,t,r){return"if(".concat(t," !== undefined) {\n").concat(n(t),";\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:i,rethrowIfPossible:o})}}])}(Bh);new Zh;function Qh(e,t,n){return t=Ch(t),kh(e,ep()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function ep(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ep=function(){return!!e})()}var tp=function(e){function t(){return us(this,t),Qh(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=this,n=e.onError,r=e.onResult,i=e.resultReturns,o=e.rethrowIfPossible;return this.callTapsSeries({onError:function(e,t){return n(t)},onResult:function(e,n,r){var i="";return i+="if(".concat(n," !== undefined) {\n"),i+="".concat(t._args[0]," = ").concat(n,";\n"),i+="}\n",i+=r()},onDone:function(){return r(t._args[0])},doneReturns:i,rethrowIfPossible:o})}}])}(Bh);new tp;function np(e,t,n){return t=Ch(t),kh(e,rp()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function rp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rp=function(){return!!e})()}var ip=function(e){function t(){return us(this,t),np(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone,r=e.rethrowIfPossible;return this.callTapsLooping({onError:function(e,n){return t(n)},onDone:n,rethrowIfPossible:r})}}])}(Bh);new ip;function op(e,t,n){return t=Ch(t),kh(e,ap()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function ap(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ap=function(){return!!e})()}var lp=Th,up=function(e){function t(){return us(this,t),op(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsParallel({onError:function(e,n,r,i){return t(n)+i(!0)},onDone:n})}}])}(Bh),cp=new up,sp=function(e){return cp.setup(this,e),cp.create(e)};function dp(){var e=new lp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0);return e.constructor=dp,e.compile=sp,e._call=void 0,e.call=void 0,e}dp.prototype=null;var fp=dp;function hp(e,t,n){return t=Ch(t),kh(e,pp()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function pp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pp=function(){return!!e})()}var vp=function(e){function t(){return us(this,t),hp(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.onDone,i="";return i+="var _results = new Array(".concat(this.options.taps.length,");\n"),i+="var _checkDone = function() {\n",i+="for(var i = 0; i < _results.length; i++) {\n",i+="var item = _results[i];\n",i+="if(item === undefined) return false;\n",i+="if(item.result !== undefined) {\n",i+=n("item.result"),i+="return true;\n",i+="}\n",i+="if(item.error) {\n",i+=t("item.error"),i+="return true;\n",i+="}\n",i+="}\n",i+="return false;\n",i+="}\n",i+=this.callTapsParallel({onError:function(e,t,n,r){var i="";return i+="if(".concat(e," < _results.length && ((_results.length = ").concat(e+1,"), (_results[").concat(e,"] = { error: ").concat(t," }), _checkDone())) {\n"),i+=r(!0),i+="} else {\n",i+=n(),i+="}\n"},onResult:function(e,t,n,r){var i="";return i+="if(".concat(e," < _results.length && (").concat(t," !== undefined && (_results.length = ").concat(e+1,"), (_results[").concat(e,"] = { result: ").concat(t," }), _checkDone())) {\n"),i+=r(!0),i+="} else {\n",i+=n(),i+="}\n"},onTap:function(e,t,n,r){var i="";return e>0&&(i+="if(".concat(e," >= _results.length) {\n"),i+=n(),i+="} else {\n"),i+=t(),e>0&&(i+="}\n"),i},onDone:r}),i}}])}(Bh);new vp;function gp(e,t,n){return t=Ch(t),kh(e,mp()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function mp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mp=function(){return!!e})()}var yp=function(e){function t(){return us(this,t),gp(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsSeries({onError:function(e,n,r,i){return t(n)+i(!0)},onDone:n})}}])}(Bh);new yp;function bp(e,t,n){return t=Ch(t),kh(e,wp()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function wp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wp=function(){return!!e})()}var _p=function(e){function t(){return us(this,t),bp(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onResult,r=e.resultReturns,i=e.onDone;return this.callTapsSeries({onError:function(e,n,r,i){return t(n)+i(!0)},onResult:function(e,t,r){return"if(".concat(t," !== undefined) {\n").concat(n(t),"\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:i})}}])}(Bh);new _p;function xp(e,t,n){return t=Ch(t),kh(e,kp()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function kp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kp=function(){return!!e})()}var Cp=function(e){function t(){return us(this,t),xp(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=e.onError,n=e.onDone;return this.callTapsLooping({onError:function(e,n,r,i){return t(n)+i(!0)},onDone:n})}}])}(Bh);new Cp;function Sp(e,t,n){return t=Ch(t),kh(e,Op()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function Op(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Op=function(){return!!e})()}var Ep=function(e){function t(){return us(this,t),Sp(this,t,arguments)}return Oh(t,e),ls(t,[{key:"content",value:function(e){var t=this,n=e.onError,r=e.onResult;return e.onDone,this.callTapsSeries({onError:function(e,t,r,i){return n(t)+i(!0)},onResult:function(e,n,r){var i="";return i+="if(".concat(n," !== undefined) {\n"),i+="".concat(t._args[0]," = ").concat(n,";\n"),i+="}\n",i+=r()},onDone:function(){return r(t._args[0])}})}}])}(Bh);new Ep;var Ip=Eh,Pp=function(e,t){return t},Mp=function(){return ls((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;us(this,e),this._map=new Map,this.name=n,this._factory=t,this._interceptors=[]}),[{key:"get",value:function(e){return this._map.get(e)}},{key:"for",value:function(e){var t=this.get(e);if(void 0!==t)return t;for(var n=this._factory(e),r=this._interceptors,i=0;i<r.length;i++)n=r[i].factory(e,n);return this._map.set(e,n),n}},{key:"intercept",value:function(e){this._interceptors.push(Object.assign({factory:Pp},e))}}])}();Mp.prototype.tap=Ip.deprecate((function(e,t,n){return this.for(e).tap(t,n)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),Mp.prototype.tapAsync=Ip.deprecate((function(e,t,n){return this.for(e).tapAsync(t,n)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),Mp.prototype.tapPromise=Ip.deprecate((function(e,t,n){return this.for(e).tapPromise(t,n)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var Rp=Kh,Ap=fp;const jp=()=>new Map,Dp=e=>{const t=jp();return e.forEach(((e,n)=>{t.set(n,e)})),t},Tp=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Fp=()=>new Set,Np=e=>e[e.length-1],Lp=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Bp=Array.from,Vp=Array.isArray;class zp{constructor(){this._observers=jp()}on(e,t){Tp(this._observers,e,Fp).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return Bp((this._observers.get(e)||jp()).values()).forEach((e=>e(...t)))}destroy(){this._observers=jp()}}const Hp=Math.floor,Wp=Math.abs,Up=(e,t)=>e<t?e:t,Gp=(e,t)=>e>t?e:t,Yp=128,$p=127,qp=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Hp(e)===e),Kp=/^\s*/g,Xp=/([A-Z])/g,Jp=(e,t)=>(e=>e.replace(Kp,""))(e.replace(Xp,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),Zp="undefined"!=typeof TextEncoder?new TextEncoder:null,Qp=Zp?e=>Zp.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let ev="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ev&&1===ev.decode(new Uint8Array).length&&(ev=null);class tv{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const nv=()=>new tv,rv=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},iv=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},ov=iv,av=(e,t)=>{for(;t>$p;)iv(e,Yp|$p&t),t=Hp(t/128);iv(e,$p&t)},lv=(e,t)=>{const n=0!==(r=t)?r<0:1/r<0;var r;for(n&&(t=-t),iv(e,(t>63?Yp:0)|(n?64:0)|63&t),t=Hp(t/64);t>0;)iv(e,(t>$p?Yp:0)|$p&t),t=Hp(t/128)},uv=new Uint8Array(3e4),cv=uv.length/3,sv=Zp&&Zp.encodeInto?(e,t)=>{if(t.length<cv){const n=Zp.encodeInto(t,uv).written||0;av(e,n);for(let t=0;t<n;t++)iv(e,uv[t])}else fv(e,Qp(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;av(e,r);for(let t=0;t<r;t++)iv(e,n.codePointAt(t))},dv=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Up(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Gp(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},fv=(e,t)=>{av(e,t.byteLength),dv(e,t)},hv=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Gp(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},pv=new DataView(new ArrayBuffer(4)),vv=(e,t)=>{switch(typeof t){case"string":iv(e,119),sv(e,t);break;case"number":qp(t)&&Wp(t)<=2147483647?(iv(e,125),lv(e,t)):(n=t,pv.setFloat32(0,n),pv.getFloat32(0)===n?(iv(e,124),((e,t)=>{hv(e,4).setFloat32(0,t,!1)})(e,t)):(iv(e,123),((e,t)=>{hv(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":iv(e,122),((e,t)=>{hv(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)iv(e,126);else if(Vp(t)){iv(e,117),av(e,t.length);for(let n=0;n<t.length;n++)vv(e,t[n])}else if(t instanceof Uint8Array)iv(e,116),fv(e,t);else{iv(e,118);const n=Object.keys(t);av(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];sv(e,i),vv(e,t[i])}}break;case"boolean":iv(e,t?120:121);break;default:iv(e,127)}var n};class gv extends tv{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&av(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const mv=e=>{e.count>0&&(lv(e.encoder,1===e.count?e.s:-e.s),e.count>1&&av(e.encoder,e.count-2))};class yv{constructor(){this.encoder=new tv,this.s=0,this.count=0}write(e){this.s===e?this.count++:(mv(this),this.count=1,this.s=e)}toUint8Array(){return mv(this),rv(this.encoder)}}const bv=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);lv(e.encoder,t),e.count>1&&av(e.encoder,e.count-2)}};class wv{constructor(){this.encoder=new tv,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(bv(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return bv(this),rv(this.encoder)}}class _v{constructor(){this.sarr=[],this.s="",this.lensE=new yv}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new tv;return this.sarr.push(this.s),this.s="",sv(e,this.sarr.join("")),dv(e,this.lensE.toUint8Array()),rv(e)}}const xv=e=>new Error(e),kv=()=>{throw xv("Method unimplemented")},Cv=()=>{throw xv("Unexpected case")},Sv=crypto.getRandomValues.bind(crypto),Ov=()=>Sv(new Uint32Array(1))[0],Ev="10000000-1000-4000-8000-100000000000",Iv=()=>Ev.replace(/[018]/g,(e=>(e^Ov()&15>>e/4).toString(16))),Pv=Date.now,Mv=e=>new Promise(e);Promise.all.bind(Promise);const Rv=e=>void 0===e?null:e;let Av=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},jv=!0;try{"undefined"!=typeof localStorage&&localStorage&&(Av=localStorage,jv=!1)}catch(Pd){}const Dv=Av,Tv=Object.assign,Fv=Object.keys,Nv=e=>Fv(e).length,Lv=(e,t)=>e===t||Nv(e)===Nv(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,((e,n)=>(void 0!==e||((e,t)=>Object.prototype.hasOwnProperty.call(e,t))(t,n))&&t[n]===e)),Bv=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Bv(e,t,n+1)}},Vv=void 0!==i&&i.release&&/node|io\.js/.test(i.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==i?i:0);let zv;const Hv=e=>(()=>{if(void 0===zv)if(Vv){zv=jp();const e=i.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&zv.set(t,""),t=r):null!==t&&(zv.set(t,r),t=null)}null!==t&&zv.set(t,"")}else"object"==typeof location?(zv=jp(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");zv.set(`--${Jp(t,"-")}`,n),zv.set(`-${Jp(t,"-")}`,n)}}))):zv=jp();return zv})().has(e),Wv=e=>Rv(Vv?i.env[e.toUpperCase().replaceAll("-","_")]:Dv.getItem(e)),Uv=e=>Hv("--"+e)||null!==Wv(e);Uv("production");var Gv;const Yv=Vv&&(Gv=i.env.FORCE_COLOR,["true","1","2"].includes(Gv))||!Hv("--no-colors")&&!Uv("no-color")&&(!Vv||i.stdout.isTTY)&&(!Vv||Hv("--color")||null!==Wv("COLORTERM")||(Wv("TERM")||"").includes("color"));class $v{constructor(e,t){this.left=e,this.right=t}}const qv=(e,t)=>new $v(e,t);"undefined"!=typeof DOMParser&&new DOMParser;const Kv=Symbol,Xv=Kv(),Jv=Kv(),Zv=Kv(),Qv=Kv(),eg=Kv(),tg=Kv(),ng=Kv(),rg=Kv(),ig=Kv(),og={[Xv]:qv("font-weight","bold"),[Jv]:qv("font-weight","normal"),[Zv]:qv("color","blue"),[eg]:qv("color","green"),[Qv]:qv("color","grey"),[tg]:qv("color","red"),[ng]:qv("color","purple"),[rg]:qv("color","orange"),[ig]:qv("color","black")},ag=Yv?e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[],i=jp();let o=[],a=0;for(;a<e.length;a++){const t=e[a],o=og[t];if(void 0!==o)i.set(o.left,o.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=((e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n})(i,((e,t)=>`${t}:${e};`)).join("");a>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}}}for(a>0&&(o=r,o.unshift(n.join("")));a<e.length;a++){const t=e[a];t instanceof Symbol||o.push(t)}return o}:e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[];let i=0;for(;i<e.length;i++){const t=e[i];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(i>0&&r.push(n.join(""));i<e.length;i++){const t=e[i];t instanceof Symbol||r.push(t)}return r},lg=Fp(),ug=e=>({[Symbol.iterator](){return this},next:e}),cg=(e,t)=>ug((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}));class sg{constructor(e,t){this.clock=e,this.len=t}}class dg{constructor(){this.clients=new Map}}const fg=(e,t,n)=>t.clients.forEach(((t,r)=>{const i=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const o=t[r];Ug(e,i,o.clock,o.len,n)}})),hg=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=Hp((n+r)/2),o=e[i],a=o.clock;if(a<=t){if(t<a+o.len)return i;n=i+1}else r=i-1}return null})(n,t.clock)},pg=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=Gp(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},vg=e=>{const t=new dg;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,i)=>{if(!t.clients.has(i)){const o=r.slice();for(let t=n+1;t<e.length;t++)Lp(o,e[t].clients.get(i)||[]);t.clients.set(i,o)}}));return pg(t),t},gg=(e,t,n,r)=>{Tp(e.clients,t,(()=>[])).push(new sg(n,r))},mg=Ov;class yg extends zp{constructor({guid:e=Iv(),collectionid:t=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=mg(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Tg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Mv((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const l=()=>Mv((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=l()),this.isSynced=void 0===e||!0===e,this.isLoaded||this.emit("load",[])})),this.whenSynced=l()}load(){const e=this._item;null===e||this.shouldLoad||Kg(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Bp(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return Kg(this,e,t)}get(e,t=cm){const n=Tp(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==cm&&r!==t){if(r===cm){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Em)}getText(e=""){return this.get(e,Gm)}getMap(e=""){return this.get(e,Pm)}getXmlFragment(e=""){return this.get(e,$m)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){Bp(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new yg({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Kg(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class bg{constructor(){this.restEncoder=nv()}toUint8Array(){return rv(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){av(this.restEncoder,e)}writeDsLen(e){av(this.restEncoder,e)}}class wg extends bg{writeLeftID(e){av(this.restEncoder,e.client),av(this.restEncoder,e.clock)}writeRightID(e){av(this.restEncoder,e.client),av(this.restEncoder,e.clock)}writeClient(e){av(this.restEncoder,e)}writeInfo(e){ov(this.restEncoder,e)}writeString(e){sv(this.restEncoder,e)}writeParentInfo(e){av(this.restEncoder,e?1:0)}writeTypeRef(e){av(this.restEncoder,e)}writeLen(e){av(this.restEncoder,e)}writeAny(e){vv(this.restEncoder,e)}writeBuf(e){fv(this.restEncoder,e)}writeJSON(e){sv(this.restEncoder,JSON.stringify(e))}writeKey(e){sv(this.restEncoder,e)}}class _g{constructor(){this.restEncoder=nv(),this.dsCurrVal=0}toUint8Array(){return rv(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,av(this.restEncoder,t)}writeDsLen(e){0===e&&Cv(),av(this.restEncoder,e-1),this.dsCurrVal+=e}}class xg extends _g{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new wv,this.clientEncoder=new yv,this.leftClockEncoder=new wv,this.rightClockEncoder=new wv,this.infoEncoder=new gv(ov),this.stringEncoder=new _v,this.parentInfoEncoder=new gv(ov),this.typeRefEncoder=new yv,this.lenEncoder=new yv}toUint8Array(){const e=nv();return av(e,0),fv(e,this.keyClockEncoder.toUint8Array()),fv(e,this.clientEncoder.toUint8Array()),fv(e,this.leftClockEncoder.toUint8Array()),fv(e,this.rightClockEncoder.toUint8Array()),fv(e,rv(this.infoEncoder)),fv(e,this.stringEncoder.toUint8Array()),fv(e,rv(this.parentInfoEncoder)),fv(e,this.typeRefEncoder.toUint8Array()),fv(e,this.lenEncoder.toUint8Array()),dv(e,rv(this.restEncoder)),rv(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){vv(this.restEncoder,e)}writeBuf(e){fv(this.restEncoder,e)}writeJSON(e){vv(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const kg=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{Ng(t,n)>e&&r.set(n,e)})),Fg(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),av(e.restEncoder,r.size),Bp(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=Gp(r,t[0].id.clock);const i=Bg(t,r);av(e.restEncoder,t.length-i),e.writeClient(n),av(e.restEncoder,r);const o=t[i];o.write(e,r-o.id.clock);for(let n=i+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))};class Cg{constructor(){this.l=[]}}const Sg=()=>new Cg,Og=(e,t)=>e.l.push(t),Eg=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Ig=(e,t,n)=>Bv(e.l,[t,n]);class Pg{constructor(e,t){this.client=e,this.clock=t}}const Mg=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Rg=(e,t)=>new Pg(e,t),Ag=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},jg=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!hg(t.ds,e.id),Dg=(e,t)=>{const n=Tp(e.meta,Dg,Fp),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<Ng(r,n)&&Hg(e,Rg(n,t))})),fg(e,t.ds,(e=>{})),n.add(t))};class Tg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Fg=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Ng=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Lg=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Cv()}n.push(t)},Bg=(e,t)=>{let n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;let a=Hp(t/(o+i.length-1)*r);for(;n<=r;){if(i=e[a],o=i.id.clock,o<=t){if(t<o+i.length)return a;n=a+1}else r=a-1;a=Hp((n+r)/2)}throw Cv()},Vg=(e,t)=>{const n=e.clients.get(t.client);return n[Bg(n,t.clock)]},zg=(e,t,n)=>{const r=Bg(t,n),i=t[r];return i.id.clock<n&&i instanceof gy?(t.splice(r+1,0,hy(e,i,n-i.id.clock)),r+1):r},Hg=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[zg(e,n,t.clock)]},Wg=(e,t,n)=>{const r=t.clients.get(n.client),i=Bg(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Jm&&r.splice(i+1,0,hy(e,o,n.clock-o.id.clock+1)),o},Ug=(e,t,n,r,i)=>{if(0===r)return;const o=n+r;let a,l=zg(e,t,n);do{a=t[l++],o<a.id.clock+a.length&&zg(e,t,o),i(a)}while(l<t.length&&t[l].id.clock<o)};const Gg=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(pg(t.deleteSet),((e,t)=>{kg(e,t.doc.store,t.beforeState)})(e,t),((e,t)=>{av(e.restEncoder,t.clients.size),Bp(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),av(e.restEncoder,t);const r=n.length;av(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))})(e,t.deleteSet),!0),Yg=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Tp(e.changed,t,Fp).add(n)},$g=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--i-1])n instanceof gy&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const o=t-i;return o&&e.splice(t+1-o,o),o},qg=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,o=n.deleteSet,a=n._mergeStructs;try{pg(o),n.afterState=Fg(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),Ig(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),Bv(e,[]),n._needFormattingCleanup&&Hm(n)}finally{r.gc&&((e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],a=o.clock+o.len;for(let r=Bg(e,o.clock),i=e[r];r<e.length&&i.id.clock<a;i=e[++r]){const i=e[r];if(o.clock+o.len<=i.id.clock)break;i instanceof gy&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}})(o,i,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Up(r.length-1,1+Bg(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+$g(r,e)}}))})(o,i),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=Gp(Bg(e,r),1);for(let t=e.length-1;t>=n;)t-=1+$g(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=i.clients.get(t),o=Bg(r,n);o+1<r.length&&$g(r,o+1)>1||o>0&&$g(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(((...e)=>{console.log(...ag(e)),lg.forEach((t=>t.print(e)))})(rg,Xv,"[yjs] ",Jv,tg,"Changed the client-id because another client seems to be using it."),r.clientID=mg()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new wg;Gg(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new xg;Gg(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:c}=n;(l.size>0||c.size>0||u.size>0)&&(l.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:u,added:l,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):qg(e,t+1)}}},Kg=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,a=null;null===e._transaction&&(o=!0,e._transaction=new class{constructor(e,t,n){this.doc=e,this.deleteSet=new dg,this.beforeState=Fg(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(o){const t=e._transaction===i[0];e._transaction=null,t&&qg(i,0)}}return a};class Xg{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const Jg=(e,t,n)=>{fg(e,n.deletions,(e=>{e instanceof gy&&t.scope.some((t=>Ag(t,e)))&&fy(e,!1)}))},Zg=(e,t,n)=>{let r=null,i=null;const o=e.doc,a=e.scope;if(Kg(o,(n=>{for(;t.length>0&&null===r;){const i=o.store,l=t.pop(),u=new Set,c=[];let s=!1;fg(n,l.insertions,(e=>{if(e instanceof gy){if(null!==e.redone){let{item:t,diff:r}=dy(i,e.id);r>0&&(t=Hg(n,Rg(t.id.client,t.id.clock+r))),e=t}!e.deleted&&a.some((t=>Ag(t,e)))&&c.push(e)}})),fg(n,l.deletions,(e=>{e instanceof gy&&a.some((t=>Ag(t,e)))&&!hg(l.insertions,e.id)&&u.add(e)})),u.forEach((t=>{s=null!==vy(n,t,u,l.insertions,e.ignoreRemoteMapChanges,e)||s}));for(let t=c.length-1;t>=0;t--){const r=c[t];e.deleteFilter(r)&&(r.delete(n),s=!0)}r=s?l:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),i=n}),e),null!=r){const t=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:t},e])}return r};class Qg extends zp{constructor(e,{captureTimeout:t=500,captureTransaction:n=(e=>!0),deleteFilter:r=(()=>!0),trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=(Vp(e)?e[0].doc:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const i=new dg;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,o=t-r;o>0&&gg(i,n,r,o)}));const o=Pv();let a=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=vg([t.deletions,e.deleteSet]),t.insertions=vg([t.insertions,i])}else r.push(new Xg(e.deleteSet,i)),a=!0;t||n||(this.lastChange=o),fg(e,e.deleteSet,(e=>{e instanceof gy&&this.scope.some((t=>Ag(t,e)))&&fy(e,!0)}));const l=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",l):this.emit("stack-item-updated",l)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){(e=Vp(e)?e:[e]).forEach((e=>{this.scope.every((t=>t!==e))&&(e.doc!==this.doc&&((...e)=>{console.warn(...ag(e)),e.unshift(rg),lg.forEach((t=>t.print(e)))})("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>Jg(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>Jg(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=Zg(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=Zg(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}const em="You must not compute changes after the event-handler fired.";class tm{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=nm(this.currentTarget,this.target))}deletes(e){return hg(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw xv(em);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let i,o;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",o=Np(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",o=Np(e.content.getContent())):(i="add",o=void 0)}else{if(!this.deletes(r))return;i="delete",o=Np(r.content.getContent())}e.set(n,{action:i,oldValue:o})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw xv(em);const t=this.target,n=Fp(),r=Fp(),i=[];e={added:n,deleted:r,delta:i,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const nm=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n};let rm=0;class im{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=rm++}}const om=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=rm++},am=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Wp(t-e.index)<Wp(t-n.index)?e:n));let r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,(e=>{e.timestamp=rm++})(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&Wp(n.index-i)<r.parent.length/80?(om(n,r,i),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return om(r,t,n),r}{const r=new im(t,n);return e.push(r),r}})(e._searchMarker,r,i)},lm=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=Gp(t,i.index+n))}},um=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;Tp(i,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;Ig(r._eH,n,t)};class cm{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Sg(),this._dEH=Sg(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw kv()}clone(){throw kv()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Og(this._eH,e)}observeDeep(e){Og(this._dEH,e)}unobserve(e){Eg(this._eH,e)}unobserveDeep(e){Eg(this._dEH,e)}toJSON(){}}const sm=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;for(;null!==o&&r>0;){if(o.countable&&!o.deleted){const e=o.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}o=o.right}return i},dm=e=>{const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},fm=(e,t)=>{let n=0,r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},hm=(e,t)=>{const n=[];return fm(e,((r,i)=>{n.push(t(r,i,e))})),n},pm=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},vm=(e,t)=>{const n=am(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},gm=(e,t,n,r)=>{let i=n;const o=e.doc,a=o.clientID,l=o.store,u=null===n?t._start:n.right;let c=[];const s=()=>{c.length>0&&(i=new gy(Rg(a,Ng(l,a)),i,i&&i.lastId,u,u&&u.id,t,null,new ry(c)),i.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(s(),n.constructor){case Uint8Array:case ArrayBuffer:i=new gy(Rg(a,Ng(l,a)),i,i&&i.lastId,u,u&&u.id,t,null,new Zm(new Uint8Array(n))),i.integrate(e,0);break;case yg:i=new gy(Rg(a,Ng(l,a)),i,i&&i.lastId,u,u&&u.id,t,null,new ey(n)),i.integrate(e,0);break;default:if(!(n instanceof cm))throw new Error("Unexpected content type in insert operation");i=new gy(Rg(a,Ng(l,a)),i,i&&i.lastId,u,u&&u.id,t,null,new sy(n)),i.integrate(e,0)}}})),s()},mm=()=>xv("Length exceeded!"),ym=(e,t,n,r)=>{if(n>t._length)throw mm();if(0===n)return t._searchMarker&&lm(t._searchMarker,n,r.length),gm(e,t,null,r);const i=n,o=am(t,n);let a=t._start;for(null!==o&&(a=o.p,0===(n-=o.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Hg(e,Rg(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&lm(t._searchMarker,i,r.length),gm(e,t,a,r)},bm=(e,t,n,r)=>{if(0===r)return;const i=n,o=r,a=am(t,n);let l=t._start;for(null!==a&&(l=a.p,n-=a.index);null!==l&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Hg(e,Rg(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&null!==l;)l.deleted||(r<l.length&&Hg(e,Rg(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw mm();t._searchMarker&&lm(t._searchMarker,i,-o+r)},wm=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},_m=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,a=o.clientID;let l;if(null==r)l=new ry([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new ry([r]);break;case Uint8Array:l=new Zm(r);break;case yg:l=new ey(r);break;default:if(!(r instanceof cm))throw new Error("Unexpected content type");l=new sy(r)}new gy(Rg(a,Ng(o.store,a)),i,i&&i.lastId,null,null,t,n,l).integrate(e,0)},xm=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},km=e=>{const t={};return e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Cm=(e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted},Sm=e=>{return t=e.entries(),n=e=>!e[1].deleted,ug((()=>{let e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n};class Om extends tm{constructor(e,t){super(e,t),this._transaction=t}}class Em extends cm{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Em;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Em}clone(){const e=new Em;return e.insert(0,this.toArray().map((e=>e instanceof cm?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),um(this,e,new Om(this,e))}insert(e,t){null!==this.doc?Kg(this.doc,(n=>{ym(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Kg(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;gm(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Kg(this.doc,(n=>{bm(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return vm(this,e)}toArray(){return dm(this)}slice(e=0,t=this.length){return sm(this,e,t)}toJSON(){return this.map((e=>e instanceof cm?e.toJSON():e))}map(e){return hm(this,e)}forEach(e){fm(this,e)}[Symbol.iterator](){return pm(this)}_write(e){e.writeTypeRef(oy)}}class Im extends tm{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Pm extends cm{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Pm}clone(){const e=new Pm;return this.forEach(((t,n)=>{e.set(n,t instanceof cm?t.clone():t)})),e}_callObserver(e,t){um(this,e,new Im(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof cm?r.toJSON():r}})),e}get size(){return[...Sm(this._map)].length}keys(){return cg(Sm(this._map),(e=>e[0]))}values(){return cg(Sm(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return cg(Sm(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Kg(this.doc,(t=>{wm(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Kg(this.doc,(n=>{_m(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return xm(this,e)}has(e){return Cm(this,e)}clear(){null!==this.doc?Kg(this.doc,(e=>{this.forEach((function(t,n,r){wm(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(ay)}}const Mm=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&Lv(e,t);class Rm{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&Cv(),this.right.content.constructor===ny)this.right.deleted||Tm(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Am=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===ny)t.right.deleted||Tm(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&Hg(e,Rg(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},jm=(e,t,n)=>{const r=new Map,i=am(t,n);if(i){const t=new Rm(i.p.left,i.p,i.index,r);return Am(e,t,n-i.index)}{const i=new Rm(null,t._start,0,r);return Am(e,i,n)}},Dm=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===ny&&Mm(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach(((r,a)=>{const l=n.left,u=n.right,c=new gy(Rg(o,Ng(i.store,o)),l,l&&l.lastId,u,u&&u.id,t,null,new ny(a,r));c.integrate(e,0),n.right=c,n.forward()}))},Tm=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Fm=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===ny&&Mm(t[e.right.content.key]||null,e.right.content.value));)e.forward()},Nm=(e,t,n,r)=>{const i=e.doc,o=i.clientID,a=new Map;for(const l in r){const u=r[l],c=n.currentAttributes.get(l)||null;if(!Mm(c,u)){a.set(l,c);const{left:r,right:s}=n;n.right=new gy(Rg(o,Ng(i.store,o)),r,r&&r.lastId,s,s&&s.id,t,null,new ny(l,u)),n.right.integrate(e,0),n.forward()}}return a},Lm=(e,t,n,r,i)=>{n.currentAttributes.forEach(((e,t)=>{void 0===i[t]&&(i[t]=null)}));const o=e.doc,a=o.clientID;Fm(n,i);const l=Nm(e,t,n,i),u=r.constructor===String?new iy(r):r instanceof cm?new sy(r):new ty(r);let{left:c,right:s,index:d}=n;t._searchMarker&&lm(t._searchMarker,n.index,u.getLength()),s=new gy(Rg(a,Ng(o.store,a)),c,c&&c.lastId,s,s&&s.id,t,null,u),s.integrate(e,0),n.right=s,n.index=d,n.forward(),Dm(e,t,n,l)},Bm=(e,t,n,r,i)=>{const o=e.doc,a=o.clientID;Fm(n,i);const l=Nm(e,t,n,i);e:for(;null!==n.right&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===ny));){if(!n.right.deleted)switch(n.right.content.constructor){case ny:{const{key:t,value:o}=n.right.content,a=i[t];if(void 0!==a){if(Mm(a,o))l.delete(t);else{if(0===r)break e;l.set(t,o)}n.right.delete(e)}else n.currentAttributes.set(t,o);break}default:r<n.right.length&&Hg(e,Rg(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new gy(Rg(a,Ng(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new iy(i)),n.right.integrate(e,0),n.forward()}Dm(e,t,n,l)},Vm=(e,t,n,r,i)=>{let o=t;const a=jp();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ny){const e=o.content;a.set(e.key,e)}o=o.right}let l=0,u=!1;for(;t!==o;){if(n===t&&(u=!0),!t.deleted){const n=t.content;switch(n.constructor){case ny:{const{key:o,value:c}=n,s=r.get(o)||null;a.get(o)===n&&s!==c||(t.delete(e),l++,u||(i.get(o)||null)!==c||s===c||(null===s?i.delete(o):i.set(o,s))),u||t.deleted||Tm(i,n);break}}}t=t.right}return l},zm=e=>{let t=0;return Kg(e.doc,(n=>{let r=e._start,i=e._start,o=jp();const a=Dp(o);for(;i;){if(!1===i.deleted)if(i.content.constructor===ny)Tm(a,i.content);else t+=Vm(n,r,i,o,a),o=Dp(a),r=i;i=i.right}})),t},Hm=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&Ug(e,n.store.clients.get(r),o,i,(e=>{e.deleted||e.content.constructor!==ny||e.constructor===Jm||t.add(e.parent)}))}Kg(n,(n=>{fg(e,e.deleteSet,(e=>{if(e instanceof Jm||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===ny?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ny){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)zm(e)}))},Wm=(e,t,n)=>{const r=n,i=Dp(t.currentAttributes),o=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case sy:case ty:case iy:n<t.right.length&&Hg(e,Rg(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&Vm(e,o,t.right,i,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&lm(a._searchMarker,t.index,-r+n),t};class Um extends tm{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Kg(e,(e=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const a={};let l="",u=0,c=0;const s=()=>{if(null!==o){let e=null;switch(o){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof l||l.length>0)&&(e={insert:l},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),l="";break;case"retain":u>0&&(e={retain:u},(e=>{for(const t in e)return!1;return!0})(a)||(e.attributes=Tv({},a))),u=0}e&&t.push(e),o=null}};for(;null!==i;){switch(i.content.constructor){case sy:case ty:this.adds(i)?this.deletes(i)||(s(),o="insert",l=i.content.getContent()[0],s()):this.deletes(i)?("delete"!==o&&(s(),o="delete"),c+=1):i.deleted||("retain"!==o&&(s(),o="retain"),u+=1);break;case iy:this.adds(i)?this.deletes(i)||("insert"!==o&&(s(),o="insert"),l+=i.content.str):this.deletes(i)?("delete"!==o&&(s(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(s(),o="retain"),u+=i.length);break;case ny:{const{key:t,value:l}=i.content;if(this.adds(i)){if(!this.deletes(i)){const u=n.get(t)||null;Mm(u,l)?null!==l&&i.delete(e):("retain"===o&&s(),Mm(l,r.get(t)||null)?delete a[t]:a[t]=l)}}else if(this.deletes(i)){r.set(t,l);const e=n.get(t)||null;Mm(e,l)||("retain"===o&&s(),a[t]=e)}else if(!i.deleted){r.set(t,l);const n=a[t];void 0!==n&&(Mm(n,l)?null!==n&&i.delete(e):("retain"===o&&s(),null===l?delete a[t]:a[t]=l))}i.deleted||("insert"===o&&s(),Tm(n,i.content));break}}i=i.right}for(s();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class Gm extends cm{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new Gm}clone(){const e=new Gm;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Um(this,e,t);um(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===iy&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Kg(this.doc,(n=>{const r=new Rm(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const a=t||"string"!=typeof o.insert||i!==e.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&Lm(n,this,r,a,o.attributes||{})}else void 0!==o.retain?Bm(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&Wm(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){const r=[],i=new Map,o=this.doc;let a="",l=this._start;function u(){if(a.length>0){const e={};let t=!1;i.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==l;){if(jg(l,e)||void 0!==t&&jg(l,t))switch(l.content.constructor){case iy:{const r=i.get("ychange");void 0===e||jg(l,e)?void 0===t||jg(l,t)?void 0!==r&&(u(),i.delete("ychange")):void 0!==r&&r.user===l.id.client&&"added"===r.type||(u(),i.set("ychange",n?n("added",l.id):{type:"added"})):void 0!==r&&r.user===l.id.client&&"removed"===r.type||(u(),i.set("ychange",n?n("removed",l.id):{type:"removed"})),a+=l.content.str;break}case sy:case ty:{u();const e={insert:l.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case ny:jg(l,e)&&(u(),Tm(i,l.content))}l=l.right}u()};return e||t?Kg(o,(n=>{e&&Dg(n,e),t&&Dg(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Kg(r,(r=>{const i=jm(r,this,e);n||(n={},i.currentAttributes.forEach(((e,t)=>{n[t]=e}))),Lm(r,this,i,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n={}){const r=this.doc;null!==r?Kg(r,(r=>{const i=jm(r,this,e);Lm(r,this,i,t,n)})):this._pending.push((()=>this.insertEmbed(e,t,n)))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Kg(n,(n=>{Wm(n,jm(n,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Kg(r,(r=>{const i=jm(r,this,e);null!==i.right&&Bm(r,this,i,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?Kg(this.doc,(t=>{wm(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Kg(this.doc,(n=>{_m(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return xm(this,e)}getAttributes(){return km(this)}_write(e){e.writeTypeRef(ly)}}class Ym{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==qm&&t.constructor!==$m||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class $m extends cm{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $m}clone(){const e=new $m;return e.insert(0,this.toArray().map((e=>e instanceof cm?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Ym(this,e)}querySelector(e){e=e.toUpperCase();const t=new Ym(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Bp(new Ym(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){um(this,e,new Km(this,t,e))}toString(){return hm(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),fm(this,(i=>{r.insertBefore(i.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?Kg(this.doc,(n=>{ym(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Kg(this.doc,(n=>{const r=e&&e instanceof cm?e._item:e;gm(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw xv("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Kg(this.doc,(n=>{bm(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return dm(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return vm(this,e)}slice(e=0,t=this.length){return sm(this,e,t)}forEach(e){fm(this,e)}_write(e){e.writeTypeRef(cy)}}class qm extends $m{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new qm(this.nodeName)}clone(){const e=new qm(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof cm?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let i=0;i<r;i++){const r=n[i];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase();return`<${i}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?Kg(this.doc,(t=>{wm(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Kg(this.doc,(n=>{_m(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return xm(this,e)}hasAttribute(e){return Cm(this,e)}getAttributes(){return km(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const e in i){const t=i[e];"string"==typeof t&&r.setAttribute(e,t)}return fm(this,(i=>{r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(uy),e.writeKey(this.nodeName)}}class Km extends tm{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class Xm{constructor(e,t){this.id=e,this.length=t}get deleted(){throw kv()}mergeWith(e){return!1}write(e,t,n){throw kv()}integrate(e,t){throw kv()}}class Jm extends Xm{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Lg(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class Zm{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Zm(this.content)}splice(e){throw kv()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Qm{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Qm(this.len)}splice(e){const t=new Qm(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){gg(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}class ey{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ey((e=this.doc.guid,t=this.opts,new yg({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1})));var e,t}splice(e){throw kv()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ty{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ty(this.embed)}splice(e){throw kv()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class ny{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ny(this.key,this.value)}splice(e){throw kv()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class ry{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ry(this.arr)}splice(e){const t=new ry(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class iy{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new iy(this.str)}splice(e){const t=new iy(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const oy=0,ay=1,ly=2,uy=3,cy=4;class sy{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new sy(this.type._copy())}splice(e){throw kv()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const dy=(e,t)=>{let n,r=t,i=0;do{i>0&&(r=Rg(r.client,r.clock+i)),n=Vg(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof gy);return{item:n,diff:i}},fy=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},hy=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new gy(Rg(r,i+n),t,Rg(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=Rg(t.redone.client,t.redone.clock+n)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=n,o},py=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(e,(e=>hg(e.deletions,t))),vy=(e,t,n,r,i,o)=>{const a=e.doc,l=a.store,u=a.clientID,c=t.redone;if(null!==c)return Hg(e,c);let s,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===vy(e,d,n,r,i,o)))return null;for(;null!==d.redone;)d=Hg(e,d.redone)}const h=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,s=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Hg(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==s;){let t=s;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Hg(e,t.redone);if(null!==t&&t.parent._item===d){s=t;break}s=s.right}}else if(s=null,t.right&&!i){for(f=t;null!==f&&null!==f.right&&(f.right.redone||hg(r,f.right.id)||py(o.undoStack,f.right.id)||py(o.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Hg(e,f.redone);if(f&&null!==f.right)return null}else f=h._map.get(t.parentSub)||null;const p=Ng(l,u),v=Rg(u,p),g=new gy(v,f,f&&f.lastId,s,s&&s.id,h,t.parentSub,t.content.copy());return t.redone=v,fy(g,!0),g.integrate(e,0),g};let gy=class e extends Xm{constructor(e,t,n,r,i,o,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ng(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ng(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Pg&&this.id.client!==this.parent.client&&this.parent.clock>=Ng(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Wg(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Hg(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Jm||this.right&&this.right.constructor===Jm)this.parent=null;else if(this.parent){if(this.parent.constructor===Pg){const e=Vg(n,this.parent);e.constructor===Jm?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===e&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===e&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Wg(e,e.doc.store,Rg(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),r.add(t),Mg(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Mg(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Vg(e.doc.store,t.origin)))break;r.has(Vg(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Lg(e.doc.store,this),this.content.integrate(e,this),Yg(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Jm(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Rg(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Mg(e.origin,this.lastId)&&this.right===e&&Mg(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),gg(e.deleteSet,this.id.client,this.id.clock,this.length),Yg(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Cv();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[Bg(r,t.id.clock)]=n})(e,this,new Jm(this.id,this.length)):this.content=new Qm(this.length)}write(e,t){const n=t>0?Rg(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===n?0:Yp)|(null===r?0:64)|(null===i?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=(e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Cv()})(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Pg?(e.writeParentInfo(!1),e.writeLeftID(t)):Cv();null!==i&&e.writeString(i)}this.content.write(e,t)}};const my="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{},yy="__ $YJS$ __";!0===my[yy]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),my[yy]=!0;var by=1e6,wy="[big.js] ",_y=wy+"Invalid ",xy=_y+"decimal places",ky=_y+"rounding mode",Cy=wy+"Division by zero",Sy={},Oy=void 0,Ey=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Iy(e,t,n,r){var i=e.c;if(n===Oy&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(ky);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==Oy))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==Oy||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t,r)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function Py(e,t,n){var r=e.e,i=e.c.join(""),o=i.length;if(t)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>o)for(r-=o;r--;)i+="0";else r<o&&(i=i.slice(0,r)+"."+i.slice(r));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}Sy.abs=function(){var e=new this.constructor(this);return e.s=1,e},Sy.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,o=n.s,a=e.s,l=n.e,u=e.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-a:0;if(o!=a)return o;if(t=o<0,l!=u)return l>u^t?1:-1;for(a=(l=r.length)<(u=i.length)?l:u,o=-1;++o<a;)if(r[o]!=i[o])return r[o]>i[o]^t?1:-1;return l==u?0:l>u^t?1:-1},Sy.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>by)throw Error(xy);if(!i[0])throw Error(Cy);if(!r[0])return e.s=o,e.c=[e.e=0],e;var l,u,c,s,d,f=i.slice(),h=l=i.length,p=r.length,v=r.slice(0,l),g=v.length,m=e,y=m.c=[],b=0,w=a+(m.e=t.e-e.e)+1;for(m.s=o,o=w<0?0:w,f.unshift(0);g++<l;)v.push(0);do{for(c=0;c<10;c++){if(l!=(g=v.length))s=l>g?1:-1;else for(d=-1,s=0;++d<l;)if(i[d]!=v[d]){s=i[d]>v[d]?1:-1;break}if(!(s<0))break;for(u=g==l?i:f;g;){if(v[--g]<u[g]){for(d=g;d&&!v[--d];)v[d]=9;--v[d],v[g]+=10}v[g]-=u[g]}for(;!v[0];)v.shift()}y[b++]=s?c:++c,v[0]&&s?v[g]=r[h]||0:v=[r[h]]}while((h++<p||v[0]!==Oy)&&o--);return y[0]||1==b||(y.shift(),m.e--,w--),b>w&&Iy(m,w,n.RM,v[0]!==Oy),m},Sy.eq=function(e){return 0===this.cmp(e)},Sy.gt=function(e){return this.cmp(e)>0},Sy.gte=function(e){return this.cmp(e)>-1},Sy.lt=function(e){return this.cmp(e)<0},Sy.lte=function(e){return this.cmp(e)<1},Sy.minus=Sy.sub=function(e){var t,n,r,i,o=this,a=o.constructor,l=o.s,u=(e=new a(e)).s;if(l!=u)return e.s=-u,o.plus(e);var c=o.c.slice(),s=o.e,d=e.c,f=e.e;if(!c[0]||!d[0])return d[0]?e.s=-u:c[0]?e=new a(o):e.s=1,e;if(l=s-f){for((i=l<0)?(l=-l,r=c):(f=s,r=d),r.reverse(),u=l;u--;)r.push(0);r.reverse()}else for(n=((i=c.length<d.length)?c:d).length,l=u=0;u<n;u++)if(c[u]!=d[u]){i=c[u]<d[u];break}if(i&&(r=c,c=d,d=r,e.s=-e.s),(u=(n=d.length)-(t=c.length))>0)for(;u--;)c[t++]=0;for(u=t;n>l;){if(c[--n]<d[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=d[n]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--f;return c[0]||(e.s=1,c=[f=0]),e.c=c,e.e=f,e},Sy.mod=function(e){var t,n=this,r=n.constructor,i=n.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(Cy);return n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=o,t?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=o,this.minus(n.times(e)))},Sy.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},Sy.plus=Sy.add=function(e){var t,n,r,i=this,o=i.constructor;if(e=new o(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var a=i.e,l=i.c,u=e.e,c=e.c;if(!l[0]||!c[0])return c[0]||(l[0]?e=new o(i):e.s=i.s),e;if(l=l.slice(),t=a-u){for(t>0?(u=a,r=c):(t=-t,r=l),r.reverse();t--;)r.push(0);r.reverse()}for(l.length-c.length<0&&(r=c,c=l,l=r),t=c.length,n=0;t;l[t]%=10)n=(l[--t]=l[t]+c[t]+n)/10|0;for(n&&(l.unshift(n),++u),t=l.length;0===l[--t];)l.pop();return e.c=l,e.e=u,e},Sy.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(_y+"exponent");for(i&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return i?n.div(r):r},Sy.prec=function(e,t){if(e!==~~e||e<1||e>by)throw Error(_y+"precision");return Iy(new this.constructor(this),e,t)},Sy.round=function(e,t){if(e===Oy)e=0;else if(e!==~~e||e<-1e6||e>by)throw Error(xy);return Iy(new this.constructor(this),e+this.e+1,t)},Sy.sqrt=function(){var e,t,n,r=this,i=r.constructor,o=r.s,a=r.e,l=new i("0.5");if(!r.c[0])return new i(r);if(o<0)throw Error(wy+"No square root");0===(o=Math.sqrt(+Py(r,!0,!0)))||o===1/0?((t=r.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new i(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):e=new i(o+""),a=e.e+(i.DP+=4);do{n=e,e=l.times(n.plus(r.div(n)))}while(n.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return Iy(e,(i.DP-=4)+e.e+1,i.RM)},Sy.times=Sy.mul=function(e){var t,n=this,r=n.constructor,i=n.c,o=(e=new r(e)).c,a=i.length,l=o.length,u=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!o[0])return e.c=[e.e=0],e;for(e.e=u+c,a<l&&(t=i,i=o,o=t,c=a,a=l,l=c),t=new Array(c=a+l);c--;)t[c]=0;for(u=l;u--;){for(l=0,c=a+u;c>u;)l=t[c]+o[u]*i[c-u-1]+l,t[c--]=l%10,l=l/10|0;t[c]=l}for(l?++e.e:t.shift(),u=t.length;!t[--u];)t.pop();return e.c=t,e},Sy.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==Oy){if(e!==~~e||e<0||e>by)throw Error(xy);for(n=Iy(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return Py(n,!0,!!r)},Sy.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==Oy){if(e!==~~e||e<0||e>by)throw Error(xy);for(e=e+(n=Iy(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return Py(n,!1,!!r)},Sy[Symbol.for("nodejs.util.inspect.custom")]=Sy.toJSON=Sy.toString=function(){var e=this,t=e.constructor;return Py(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},Sy.toNumber=function(){var e=+Py(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(wy+"Imprecise conversion");return e},Sy.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==Oy){if(e!==~~e||e<1||e>by)throw Error(_y+"precision");for(n=Iy(new r(n),e,t);n.c.length<e;)n.c.push(0)}return Py(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},Sy.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(wy+"valueOf disallowed");return Py(e,e.e<=t.NE||e.e>=t.PE,!0)};var My=function e(){function t(n){var r=this;if(!(r instanceof t))return n===Oy?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(_y+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,i;if(!Ey.test(t))throw Error(_y+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length);for(i=t.length,r=0;r<i&&"0"==t.charAt(r);)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=Sy,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),Ry={};!function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==lr(r))throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(Ry);var Ay={},jy={},Dy={},Ty=Ry,Fy=0,Ny=1;function Ly(e){for(var t=e.length;--t>=0;)e[t]=0}var By=0,Vy=29,zy=256,Hy=zy+1+Vy,Wy=30,Uy=19,Gy=2*Hy+1,Yy=15,$y=16,qy=7,Ky=256,Xy=16,Jy=17,Zy=18,Qy=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],eb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rb=new Array(2*(Hy+2));Ly(rb);var ib=new Array(2*Wy);Ly(ib);var ob=new Array(512);Ly(ob);var ab=new Array(256);Ly(ab);var lb=new Array(Vy);Ly(lb);var ub,cb,sb,db=new Array(Wy);function fb(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function hb(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function pb(e){return e<256?ob[e]:ob[256+(e>>>7)]}function vb(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function gb(e,t,n){e.bi_valid>$y-n?(e.bi_buf|=t<<e.bi_valid&65535,vb(e,e.bi_buf),e.bi_buf=t>>$y-e.bi_valid,e.bi_valid+=n-$y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function mb(e,t,n){gb(e,n[2*t],n[2*t+1])}function yb(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function bb(e,t,n){var r,i,o=new Array(Yy+1),a=0;for(r=1;r<=Yy;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var l=e[2*i+1];0!==l&&(e[2*i]=yb(o[l]++,l))}}function wb(e){var t;for(t=0;t<Hy;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Wy;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Uy;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Ky]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _b(e){e.bi_valid>8?vb(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function xb(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function kb(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&xb(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!xb(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function Cb(e,t,n){var r,i,o,a,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?mb(e,i,t):(mb(e,(o=ab[i])+zy+1,t),0!==(a=Qy[o])&&gb(e,i-=lb[o],a),mb(e,o=pb(--r),n),0!==(a=eb[o])&&gb(e,r-=db[o],a))}while(l<e.last_lit);mb(e,Ky,t)}function Sb(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=Gy,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,l&&(e.static_len-=a[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)kb(e,o,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],kb(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,kb(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,l,u=t.dyn_tree,c=t.max_code,s=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,v=0;for(o=0;o<=Yy;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<Gy;n++)(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,v++),u[2*r+1]=o,r>c||(e.bl_count[o]++,a=0,r>=h&&(a=f[r-h]),l=u[2*r],e.opt_len+=l*(o+a),d&&(e.static_len+=l*(s[2*r+1]+a)));if(0!==v){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,v-=2}while(v>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(e,t),bb(o,c,e.bl_count)}function Ob(e,t,n){var r,i,o=-1,a=t[1],l=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++l<u&&i===a||(l<c?e.bl_tree[2*i]+=l:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*Xy]++):l<=10?e.bl_tree[2*Jy]++:e.bl_tree[2*Zy]++,l=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function Eb(e,t,n){var r,i,o=-1,a=t[1],l=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++l<u&&i===a)){if(l<c)do{mb(e,i,e.bl_tree)}while(0!=--l);else 0!==i?(i!==o&&(mb(e,i,e.bl_tree),l--),mb(e,Xy,e.bl_tree),gb(e,l-3,2)):l<=10?(mb(e,Jy,e.bl_tree),gb(e,l-3,3)):(mb(e,Zy,e.bl_tree),gb(e,l-11,7));l=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}Ly(db);var Ib=!1;function Pb(e,t,n,r){gb(e,(By<<1)+(r?1:0),3),function(e,t,n,r){_b(e),vb(e,n),vb(e,~n),Ty.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}Dy._tr_init=function(e){Ib||(!function(){var e,t,n,r,i,o=new Array(Yy+1);for(n=0,r=0;r<Vy-1;r++)for(lb[r]=n,e=0;e<1<<Qy[r];e++)ab[n++]=r;for(ab[n-1]=r,i=0,r=0;r<16;r++)for(db[r]=i,e=0;e<1<<eb[r];e++)ob[i++]=r;for(i>>=7;r<Wy;r++)for(db[r]=i<<7,e=0;e<1<<eb[r]-7;e++)ob[256+i++]=r;for(t=0;t<=Yy;t++)o[t]=0;for(e=0;e<=143;)rb[2*e+1]=8,e++,o[8]++;for(;e<=255;)rb[2*e+1]=9,e++,o[9]++;for(;e<=279;)rb[2*e+1]=7,e++,o[7]++;for(;e<=287;)rb[2*e+1]=8,e++,o[8]++;for(bb(rb,Hy+1,o),e=0;e<Wy;e++)ib[2*e+1]=5,ib[2*e]=yb(e,5);ub=new fb(rb,Qy,zy+1,Hy,Yy),cb=new fb(ib,eb,0,Wy,Yy),sb=new fb(new Array(0),tb,0,Uy,qy)}(),Ib=!0),e.l_desc=new hb(e.dyn_ltree,ub),e.d_desc=new hb(e.dyn_dtree,cb),e.bl_desc=new hb(e.bl_tree,sb),e.bi_buf=0,e.bi_valid=0,wb(e)},Dy._tr_stored_block=Pb,Dy._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Fy;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Ny;for(t=32;t<zy;t++)if(0!==e.dyn_ltree[2*t])return Ny;return Fy}(e)),Sb(e,e.l_desc),Sb(e,e.d_desc),a=function(e){var t;for(Ob(e,e.dyn_ltree,e.l_desc.max_code),Ob(e,e.dyn_dtree,e.d_desc.max_code),Sb(e,e.bl_desc),t=Uy-1;t>=3&&0===e.bl_tree[2*nb[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?Pb(e,t,n,r):4===e.strategy||o===i?(gb(e,2+(r?1:0),3),Cb(e,rb,ib)):(gb(e,4+(r?1:0),3),function(e,t,n,r){var i;for(gb(e,t-257,5),gb(e,n-1,5),gb(e,r-4,4),i=0;i<r;i++)gb(e,e.bl_tree[2*nb[i]+1],3);Eb(e,e.dyn_ltree,t-1),Eb(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),Cb(e,e.dyn_ltree,e.dyn_dtree)),wb(e),r&&_b(e)},Dy._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ab[n]+zy+1)]++,e.dyn_dtree[2*pb(t)]++),e.last_lit===e.lit_bufsize-1},Dy._tr_align=function(e){gb(e,2,3),mb(e,Ky,rb),function(e){16===e.bi_valid?(vb(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var Mb=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};var Rb=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var Ab,jb=function(e,t,n,r){var i=Rb,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},Db={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tb=Ry,Fb=Dy,Nb=Mb,Lb=jb,Bb=Db,Vb=0,zb=4,Hb=0,Wb=-2,Ub=-1,Gb=4,Yb=2,$b=8,qb=9,Kb=286,Xb=30,Jb=19,Zb=2*Kb+1,Qb=15,ew=3,tw=258,nw=tw+ew+1,rw=42,iw=103,ow=113,aw=666,lw=1,uw=2,cw=3,sw=4;function dw(e,t){return e.msg=Bb[t],t}function fw(e){return(e<<1)-(e>4?9:0)}function hw(e){for(var t=e.length;--t>=0;)e[t]=0}function pw(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Tb.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function vw(e,t){Fb._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,pw(e.strm)}function gw(e,t){e.pending_buf[e.pending++]=t}function mw(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function yw(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,Tb.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=Nb(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Lb(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function bw(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,l=e.nice_match,u=e.strstart>e.w_size-nw?e.strstart-(e.w_size-nw):0,c=e.window,s=e.w_mask,d=e.prev,f=e.strstart+tw,h=c[o+a-1],p=c[o+a];e.prev_length>=e.good_match&&(i>>=2),l>e.lookahead&&(l=e.lookahead);do{if(c[(n=t)+a]===p&&c[n+a-1]===h&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(r=tw-(f-o),o=f-tw,r>a){if(e.match_start=t,a=r,r>=l)break;h=c[o+a-1],p=c[o+a]}}}while((t=d[t&s])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function ww(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-nw)){Tb.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=yw(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ew)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ew-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ew)););}while(e.lookahead<nw&&0!==e.strm.avail_in)}function _w(e,t){for(var n,r;;){if(e.lookahead<nw){if(ww(e),e.lookahead<nw&&t===Vb)return lw;if(0===e.lookahead)break}if(n=0,e.lookahead>=ew&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ew-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-nw&&(e.match_length=bw(e,n)),e.match_length>=ew)if(r=Fb._tr_tally(e,e.strstart-e.match_start,e.match_length-ew),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ew){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ew-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Fb._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(vw(e,!1),0===e.strm.avail_out))return lw}return e.insert=e.strstart<ew-1?e.strstart:ew-1,t===zb?(vw(e,!0),0===e.strm.avail_out?cw:sw):e.last_lit&&(vw(e,!1),0===e.strm.avail_out)?lw:uw}function xw(e,t){for(var n,r,i;;){if(e.lookahead<nw){if(ww(e),e.lookahead<nw&&t===Vb)return lw;if(0===e.lookahead)break}if(n=0,e.lookahead>=ew&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ew-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ew-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-nw&&(e.match_length=bw(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===ew&&e.strstart-e.match_start>4096)&&(e.match_length=ew-1)),e.prev_length>=ew&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ew,r=Fb._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ew),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ew-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ew-1,e.strstart++,r&&(vw(e,!1),0===e.strm.avail_out))return lw}else if(e.match_available){if((r=Fb._tr_tally(e,0,e.window[e.strstart-1]))&&vw(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return lw}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Fb._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ew-1?e.strstart:ew-1,t===zb?(vw(e,!0),0===e.strm.avail_out?cw:sw):e.last_lit&&(vw(e,!1),0===e.strm.avail_out)?lw:uw}function kw(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function Cw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Tb.Buf16(2*Zb),this.dyn_dtree=new Tb.Buf16(2*(2*Xb+1)),this.bl_tree=new Tb.Buf16(2*(2*Jb+1)),hw(this.dyn_ltree),hw(this.dyn_dtree),hw(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Tb.Buf16(Qb+1),this.heap=new Tb.Buf16(2*Kb+1),hw(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Tb.Buf16(2*Kb+1),hw(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Sw(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Yb,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?rw:ow,e.adler=2===t.wrap?0:1,t.last_flush=Vb,Fb._tr_init(t),Hb):dw(e,Wb)}function Ow(e){var t,n=Sw(e);return n===Hb&&((t=e.state).window_size=2*t.w_size,hw(t.head),t.max_lazy_match=Ab[t.level].max_lazy,t.good_match=Ab[t.level].good_length,t.nice_match=Ab[t.level].nice_length,t.max_chain_length=Ab[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ew-1,t.match_available=0,t.ins_h=0),n}function Ew(e,t,n,r,i,o){if(!e)return Wb;var a=1;if(t===Ub&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>qb||n!==$b||r<8||r>15||t<0||t>9||o<0||o>Gb)return dw(e,Wb);8===r&&(r=9);var l=new Cw;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ew-1)/ew),l.window=new Tb.Buf8(2*l.w_size),l.head=new Tb.Buf16(l.hash_size),l.prev=new Tb.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Tb.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,Ow(e)}Ab=[new kw(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ww(e),0===e.lookahead&&t===Vb)return lw;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,vw(e,!1),0===e.strm.avail_out))return lw;if(e.strstart-e.block_start>=e.w_size-nw&&(vw(e,!1),0===e.strm.avail_out))return lw}return e.insert=0,t===zb?(vw(e,!0),0===e.strm.avail_out?cw:sw):(e.strstart>e.block_start&&(vw(e,!1),e.strm.avail_out),lw)})),new kw(4,4,8,4,_w),new kw(4,5,16,8,_w),new kw(4,6,32,32,_w),new kw(4,4,16,16,xw),new kw(8,16,32,32,xw),new kw(8,16,128,128,xw),new kw(8,32,128,256,xw),new kw(32,128,258,1024,xw),new kw(32,258,258,4096,xw)],jy.deflateInit=function(e,t){return Ew(e,t,$b,15,8,0)},jy.deflateInit2=Ew,jy.deflateReset=Ow,jy.deflateResetKeep=Sw,jy.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?Wb:(e.state.gzhead=t,Hb):Wb},jy.deflate=function(e,t){var n,r,i,o;if(!e||!e.state||t>5||t<0)return e?dw(e,Wb):Wb;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===aw&&t!==zb)return dw(e,0===e.avail_out?-5:Wb);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===rw)if(2===r.wrap)e.adler=0,gw(r,31),gw(r,139),gw(r,8),r.gzhead?(gw(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),gw(r,255&r.gzhead.time),gw(r,r.gzhead.time>>8&255),gw(r,r.gzhead.time>>16&255),gw(r,r.gzhead.time>>24&255),gw(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),gw(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(gw(r,255&r.gzhead.extra.length),gw(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Lb(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(gw(r,0),gw(r,0),gw(r,0),gw(r,0),gw(r,0),gw(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),gw(r,3),r.status=ow);else{var a=$b+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=ow,mw(r,a),0!==r.strstart&&(mw(r,e.adler>>>16),mw(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),pw(e),i=r.pending,r.pending!==r.pending_buf_size));)gw(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),pw(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,gw(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),pw(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,gw(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Lb(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=iw)}else r.status=iw;if(r.status===iw&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&pw(e),r.pending+2<=r.pending_buf_size&&(gw(r,255&e.adler),gw(r,e.adler>>8&255),e.adler=0,r.status=ow)):r.status=ow),0!==r.pending){if(pw(e),0===e.avail_out)return r.last_flush=-1,Hb}else if(0===e.avail_in&&fw(t)<=fw(n)&&t!==zb)return dw(e,-5);if(r.status===aw&&0!==e.avail_in)return dw(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==Vb&&r.status!==aw){var l=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(ww(e),0===e.lookahead)){if(t===Vb)return lw;break}if(e.match_length=0,n=Fb._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(vw(e,!1),0===e.strm.avail_out))return lw}return e.insert=0,t===zb?(vw(e,!0),0===e.strm.avail_out?cw:sw):e.last_lit&&(vw(e,!1),0===e.strm.avail_out)?lw:uw}(r,t):3===r.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=tw){if(ww(e),e.lookahead<=tw&&t===Vb)return lw;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ew&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+tw;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=tw-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ew?(n=Fb._tr_tally(e,1,e.match_length-ew),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Fb._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(vw(e,!1),0===e.strm.avail_out))return lw}return e.insert=0,t===zb?(vw(e,!0),0===e.strm.avail_out?cw:sw):e.last_lit&&(vw(e,!1),0===e.strm.avail_out)?lw:uw}(r,t):Ab[r.level].func(r,t);if(l!==cw&&l!==sw||(r.status=aw),l===lw||l===cw)return 0===e.avail_out&&(r.last_flush=-1),Hb;if(l===uw&&(1===t?Fb._tr_align(r):5!==t&&(Fb._tr_stored_block(r,0,0,!1),3===t&&(hw(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),pw(e),0===e.avail_out))return r.last_flush=-1,Hb}return t!==zb?Hb:r.wrap<=0?1:(2===r.wrap?(gw(r,255&e.adler),gw(r,e.adler>>8&255),gw(r,e.adler>>16&255),gw(r,e.adler>>24&255),gw(r,255&e.total_in),gw(r,e.total_in>>8&255),gw(r,e.total_in>>16&255),gw(r,e.total_in>>24&255)):(mw(r,e.adler>>>16),mw(r,65535&e.adler)),pw(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Hb:1)},jy.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==rw&&69!==t&&73!==t&&91!==t&&t!==iw&&t!==ow&&t!==aw?dw(e,Wb):(e.state=null,t===ow?dw(e,-3):Hb):Wb},jy.deflateSetDictionary=function(e,t){var n,r,i,o,a,l,u,c,s=t.length;if(!e||!e.state)return Wb;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==rw||n.lookahead)return Wb;for(1===o&&(e.adler=Nb(e.adler,t,s,0)),n.wrap=0,s>=n.w_size&&(0===o&&(hw(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new Tb.Buf8(n.w_size),Tb.arraySet(c,t,s-n.w_size,n.w_size,0),t=c,s=n.w_size),a=e.avail_in,l=e.next_in,u=e.input,e.avail_in=s,e.next_in=0,e.input=t,ww(n);n.lookahead>=ew;){r=n.strstart,i=n.lookahead-(ew-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ew-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=ew-1,ww(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ew-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=a,n.wrap=o,Hb},jy.deflateInfo="pako deflate (from Nodeca project)";var Iw={},Pw=Ry,Mw=!0,Rw=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Mw=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Rw=!1}for(var Aw=new Pw.Buf8(256),jw=0;jw<256;jw++)Aw[jw]=jw>=252?6:jw>=248?5:jw>=240?4:jw>=224?3:jw>=192?2:1;function Dw(e,t){if(t<65534&&(e.subarray&&Rw||!e.subarray&&Mw))return String.fromCharCode.apply(null,Pw.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}Aw[254]=Aw[254]=1,Iw.string2buf=function(e){var t,n,r,i,o,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Pw.Buf8(l),o=0,i=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},Iw.buf2binstring=function(e){return Dw(e,e.length)},Iw.binstring2buf=function(e){for(var t=new Pw.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},Iw.buf2string=function(e,t){var n,r,i,o,a=t||e.length,l=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)l[r++]=i;else if((o=Aw[i])>4)l[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return Dw(l,r)},Iw.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Aw[e[n]]>t?n:t};var Tw=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Fw=jy,Nw=Ry,Lw=Iw,Bw=Db,Vw=Tw,zw=Object.prototype.toString,Hw=0,Ww=-1,Uw=0,Gw=8;function Yw(e){if(!(this instanceof Yw))return new Yw(e);this.options=Nw.assign({level:Ww,method:Gw,chunkSize:16384,windowBits:15,memLevel:8,strategy:Uw,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vw,this.strm.avail_out=0;var n=Fw.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Hw)throw new Error(Bw[n]);if(t.header&&Fw.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Lw.string2buf(t.dictionary):"[object ArrayBuffer]"===zw.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Fw.deflateSetDictionary(this.strm,r))!==Hw)throw new Error(Bw[n]);this._dict_set=!0}}function $w(e,t){var n=new Yw(t);if(n.push(e,!0),n.err)throw n.msg||Bw[n.err];return n.result}Yw.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=Lw.string2buf(e):"[object ArrayBuffer]"===zw.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Nw.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=Fw.deflate(i,r))&&n!==Hw)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(Lw.buf2binstring(Nw.shrinkBuf(i.output,i.next_out))):this.onData(Nw.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=Fw.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Hw):2!==r||(this.onEnd(Hw),i.avail_out=0,!0)},Yw.prototype.onData=function(e){this.chunks.push(e)},Yw.prototype.onEnd=function(e){e===Hw&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Nw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Ay.Deflate=Yw,Ay.deflate=$w,Ay.deflateRaw=function(e,t){return(t=t||{}).raw=!0,$w(e,t)},Ay.gzip=function(e,t){return(t=t||{}).gzip=!0,$w(e,t)};var qw={},Kw={},Xw=Ry,Jw=15,Zw=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Qw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],e_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],t_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],n_=Ry,r_=Mb,i_=jb,o_=function(e,t){var n,r,i,o,a,l,u,c,s,d,f,h,p,v,g,m,y,b,w,_,x,k,C,S,O;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,O=e.output,a=o-(t-e.avail_out),l=o+(e.avail_out-257),u=n.dmax,c=n.wsize,s=n.whave,d=n.wnext,f=n.window,h=n.hold,p=n.bits,v=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),b=v[h&m];t:for(;;){if(h>>>=w=b>>>24,p-=w,0===(w=b>>>16&255))O[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(p<w&&(h+=S[r++]<<p,p+=8),_+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=S[r++]<<p,p+=8,h+=S[r++]<<p,p+=8),b=g[h&y];n:for(;;){if(h>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&b,p<(w&=15)&&(h+=S[r++]<<p,(p+=8)<w&&(h+=S[r++]<<p,p+=8)),(x+=h&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=w,p-=w,x>(w=o-a)){if((w=x-w)>s&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=0,C=f,0===d){if(k+=c-w,w<_){_-=w;do{O[o++]=f[k++]}while(--w);k=o-x,C=O}}else if(d<w){if(k+=c+d-w,(w-=d)<_){_-=w;do{O[o++]=f[k++]}while(--w);if(k=0,d<_){_-=w=d;do{O[o++]=f[k++]}while(--w);k=o-x,C=O}}}else if(k+=d-w,w<_){_-=w;do{O[o++]=f[k++]}while(--w);k=o-x,C=O}for(;_>2;)O[o++]=C[k++],O[o++]=C[k++],O[o++]=C[k++],_-=3;_&&(O[o++]=C[k++],_>1&&(O[o++]=C[k++]))}else{k=o-x;do{O[o++]=O[k++],O[o++]=O[k++],O[o++]=O[k++],_-=3}while(_>2);_&&(O[o++]=O[k++],_>1&&(O[o++]=O[k++]))}break}}break}}while(r<i&&o<l);r-=_=p>>3,h&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<l?l-o+257:257-(o-l),n.hold=h,n.bits=p},a_=function(e,t,n,r,i,o,a,l){var u,c,s,d,f,h,p,v,g,m=l.bits,y=0,b=0,w=0,_=0,x=0,k=0,C=0,S=0,O=0,E=0,I=null,P=0,M=new Xw.Buf16(16),R=new Xw.Buf16(16),A=null,j=0;for(y=0;y<=Jw;y++)M[y]=0;for(b=0;b<r;b++)M[t[n+b]]++;for(x=m,_=Jw;_>=1&&0===M[_];_--);if(x>_&&(x=_),0===_)return i[o++]=20971520,i[o++]=20971520,l.bits=1,0;for(w=1;w<_&&0===M[w];w++);for(x<w&&(x=w),S=1,y=1;y<=Jw;y++)if(S<<=1,(S-=M[y])<0)return-1;if(S>0&&(0===e||1!==_))return-1;for(R[1]=0,y=1;y<Jw;y++)R[y+1]=R[y]+M[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[R[t[n+b]]++]=b);if(0===e?(I=A=a,h=19):1===e?(I=Zw,P-=257,A=Qw,j-=257,h=256):(I=e_,A=t_,h=-1),E=0,b=0,y=w,f=o,k=x,C=0,s=-1,d=(O=1<<x)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){p=y-C,a[b]<h?(v=0,g=a[b]):a[b]>h?(v=A[j+a[b]],g=I[P+a[b]]):(v=96,g=0),u=1<<y-C,w=c=1<<k;do{i[f+(E>>C)+(c-=u)]=p<<24|v<<16|g|0}while(0!==c);for(u=1<<y-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,b++,0==--M[y]){if(y===_)break;y=t[n+a[b]]}if(y>x&&(E&d)!==s){for(0===C&&(C=x),f+=w,S=1<<(k=y-C);k+C<_&&!((S-=M[k+C])<=0);)k++,S<<=1;if(O+=1<<k,1===e&&O>852||2===e&&O>592)return 1;i[s=E&d]=x<<24|k<<16|f-o|0}}return 0!==E&&(i[f+E]=y-C<<24|64<<16|0),l.bits=x,0},l_=1,u_=2,c_=0,s_=-2,d_=1,f_=12,h_=30,p_=852,v_=592;function g_(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n_.Buf16(320),this.work=new n_.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y_(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n_.Buf32(p_),t.distcode=t.distdyn=new n_.Buf32(v_),t.sane=1,t.back=-1,c_):s_}function b_(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y_(e)):s_}function w_(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?s_:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,b_(e))):s_}function __(e,t){var n,r;return e?(r=new m_,e.state=r,r.window=null,(n=w_(e,t))!==c_&&(e.state=null),n):s_}var x_,k_,C_=!0;function S_(e){if(C_){var t;for(x_=new n_.Buf32(512),k_=new n_.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a_(l_,e.lens,0,288,x_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a_(u_,e.lens,0,32,k_,0,e.work,{bits:5}),C_=!1}e.lencode=x_,e.lenbits=9,e.distcode=k_,e.distbits=5}function O_(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n_.Buf8(o.wsize)),r>=o.wsize?(n_.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),n_.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(n_.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}Kw.inflateReset=b_,Kw.inflateReset2=w_,Kw.inflateResetKeep=y_,Kw.inflateInit=function(e){return __(e,15)},Kw.inflateInit2=__,Kw.inflate=function(e,t){var n,r,i,o,a,l,u,c,s,d,f,h,p,v,g,m,y,b,w,_,x,k,C,S,O=0,E=new n_.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return s_;(n=e.state).mode===f_&&(n.mode=13),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,l=e.avail_in,c=n.hold,s=n.bits,d=l,f=u,k=c_;e:for(;;)switch(n.mode){case d_:if(0===n.wrap){n.mode=13;break}for(;s<16;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(2&n.wrap&&35615===c){n.check=0,E[0]=255&c,E[1]=c>>>8&255,n.check=i_(n.check,E,2,0),c=0,s=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=h_;break}if(8!=(15&c)){e.msg="unknown compression method",n.mode=h_;break}if(s-=4,x=8+(15&(c>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=h_;break}n.dmax=1<<x,e.adler=n.check=1,n.mode=512&c?10:f_,c=0,s=0;break;case 2:for(;s<16;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=h_;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=h_;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=i_(n.check,E,2,0)),c=0,s=0,n.mode=3;case 3:for(;s<32;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.head&&(n.head.time=c),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,n.check=i_(n.check,E,4,0)),c=0,s=0,n.mode=4;case 4:for(;s<16;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=i_(n.check,E,2,0)),c=0,s=0,n.mode=5;case 5:if(1024&n.flags){for(;s<16;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(E[0]=255&c,E[1]=c>>>8&255,n.check=i_(n.check,E,2,0)),c=0,s=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=n.length)>l&&(h=l),h&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),n_.arraySet(n.head.extra,r,o,h,x)),512&n.flags&&(n.check=i_(n.check,r,h,o)),l-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===l)break e;h=0;do{x=r[o+h++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&h<l);if(512&n.flags&&(n.check=i_(n.check,r,h,o)),l-=h,o+=h,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===l)break e;h=0;do{x=r[o+h++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&h<l);if(512&n.flags&&(n.check=i_(n.check,r,h,o)),l-=h,o+=h,x)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;s<16;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=h_;break}c=0,s=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=f_;break;case 10:for(;s<32;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}e.adler=n.check=g_(c),c=0,s=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=c,n.bits=s,2;e.adler=n.check=1,n.mode=f_;case f_:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&s,s-=7&s,n.mode=27;break}for(;s<3;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}switch(n.last=1&c,s-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(S_(n),n.mode=20,6===t){c>>>=2,s-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=h_}c>>>=2,s-=2;break;case 14:for(c>>>=7&s,s-=7&s;s<32;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=h_;break}if(n.length=65535&c,c=0,s=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(h=n.length){if(h>l&&(h=l),h>u&&(h=u),0===h)break e;n_.arraySet(i,r,o,h,a),l-=h,o+=h,u-=h,a+=h,n.length-=h;break}n.mode=f_;break;case 17:for(;s<14;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(n.nlen=257+(31&c),c>>>=5,s-=5,n.ndist=1+(31&c),c>>>=5,s-=5,n.ncode=4+(15&c),c>>>=4,s-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=h_;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;s<3;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.lens[I[n.have++]]=7&c,c>>>=3,s-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},k=a_(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,k){e.msg="invalid code lengths set",n.mode=h_;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(O=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&O,!((g=O>>>24)<=s);){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(y<16)c>>>=g,s-=g,n.lens[n.have++]=y;else{if(16===y){for(S=g+2;s<S;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(c>>>=g,s-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=h_;break}x=n.lens[n.have-1],h=3+(3&c),c>>>=2,s-=2}else if(17===y){for(S=g+3;s<S;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}s-=g,x=0,h=3+(7&(c>>>=g)),c>>>=3,s-=3}else{for(S=g+7;s<S;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}s-=g,x=0,h=11+(127&(c>>>=g)),c>>>=7,s-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=h_;break}for(;h--;)n.lens[n.have++]=x}}if(n.mode===h_)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=h_;break}if(n.lenbits=9,C={bits:n.lenbits},k=a_(l_,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,k){e.msg="invalid literal/lengths set",n.mode=h_;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},k=a_(u_,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,k){e.msg="invalid distances set",n.mode=h_;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(l>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=c,n.bits=s,o_(e,f),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,l=e.avail_in,c=n.hold,s=n.bits,n.mode===f_&&(n.back=-1);break}for(n.back=0;m=(O=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&O,!((g=O>>>24)<=s);){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(m&&0==(240&m)){for(b=g,w=m,_=y;m=(O=n.lencode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&O,!(b+(g=O>>>24)<=s);){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=f_;break}if(64&m){e.msg="invalid literal/length code",n.mode=h_;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(S=n.extra;s<S;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(O=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&O,!((g=O>>>24)<=s);){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(0==(240&m)){for(b=g,w=m,_=y;m=(O=n.distcode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&O,!(b+(g=O>>>24)<=s);){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,64&m){e.msg="invalid distance code",n.mode=h_;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(S=n.extra;s<S;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=h_;break}n.mode=25;case 25:if(0===u)break e;if(h=f-u,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=h_;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),v=n.window}else v=i,p=a-n.offset,h=n.length;h>u&&(h=u),u-=h,n.length-=h;do{i[a++]=v[p++]}while(--h);0===n.length&&(n.mode=21);break;case 26:if(0===u)break e;i[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;s<32;){if(0===l)break e;l--,c|=r[o++]<<s,s+=8}if(f-=u,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?i_(n.check,i,f,a-f):r_(n.check,i,f,a-f)),f=u,(n.flags?c:g_(c))!==n.check){e.msg="incorrect data check",n.mode=h_;break}c=0,s=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;s<32;){if(0===l)break e;l--,c+=r[o++]<<s,s+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=h_;break}c=0,s=0}n.mode=29;case 29:k=1;break e;case h_:k=-3;break e;case 31:return-4;default:return s_}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=c,n.bits=s,(n.wsize||f!==e.avail_out&&n.mode<h_&&(n.mode<27||4!==t))&&O_(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?i_(n.check,i,f,e.next_out-f):r_(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===f_?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&k===c_&&(k=-5),k},Kw.inflateEnd=function(e){if(!e||!e.state)return s_;var t=e.state;return t.window&&(t.window=null),e.state=null,c_},Kw.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?s_:(n.head=t,t.done=!1,c_):s_},Kw.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?s_:11===n.mode&&r_(1,t,r,0)!==n.check?-3:O_(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,c_):s_},Kw.inflateInfo="pako inflate (from Nodeca project)";var E_={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var I_=Kw,P_=Ry,M_=Iw,R_=E_,A_=Db,j_=Tw,D_=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},T_=Object.prototype.toString;function F_(e){if(!(this instanceof F_))return new F_(e);this.options=P_.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j_,this.strm.avail_out=0;var n=I_.inflateInit2(this.strm,t.windowBits);if(n!==R_.Z_OK)throw new Error(A_[n]);if(this.header=new D_,I_.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=M_.string2buf(t.dictionary):"[object ArrayBuffer]"===T_.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=I_.inflateSetDictionary(this.strm,t.dictionary))!==R_.Z_OK))throw new Error(A_[n])}function N_(e,t){var n=new F_(t);if(n.push(e,!0),n.err)throw n.msg||A_[n.err];return n.result}F_.prototype.push=function(e,t){var n,r,i,o,a,l=this.strm,u=this.options.chunkSize,c=this.options.dictionary,s=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?R_.Z_FINISH:R_.Z_NO_FLUSH,"string"==typeof e?l.input=M_.binstring2buf(e):"[object ArrayBuffer]"===T_.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new P_.Buf8(u),l.next_out=0,l.avail_out=u),(n=I_.inflate(l,R_.Z_NO_FLUSH))===R_.Z_NEED_DICT&&c&&(n=I_.inflateSetDictionary(this.strm,c)),n===R_.Z_BUF_ERROR&&!0===s&&(n=R_.Z_OK,s=!1),n!==R_.Z_STREAM_END&&n!==R_.Z_OK)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&n!==R_.Z_STREAM_END&&(0!==l.avail_in||r!==R_.Z_FINISH&&r!==R_.Z_SYNC_FLUSH)||("string"===this.options.to?(i=M_.utf8border(l.output,l.next_out),o=l.next_out-i,a=M_.buf2string(l.output,i),l.next_out=o,l.avail_out=u-o,o&&P_.arraySet(l.output,l.output,i,o,0),this.onData(a)):this.onData(P_.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(s=!0)}while((l.avail_in>0||0===l.avail_out)&&n!==R_.Z_STREAM_END);return n===R_.Z_STREAM_END&&(r=R_.Z_FINISH),r===R_.Z_FINISH?(n=I_.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===R_.Z_OK):r!==R_.Z_SYNC_FLUSH||(this.onEnd(R_.Z_OK),l.avail_out=0,!0)},F_.prototype.onData=function(e){this.chunks.push(e)},F_.prototype.onEnd=function(e){e===R_.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=P_.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},qw.Inflate=F_,qw.inflate=N_,qw.inflateRaw=function(e,t){return(t=t||{}).raw=!0,N_(e,t)},qw.ungzip=N_;var L_={};(0,Ry.assign)(L_,Ay,qw,E_);const B_=Un(L_);var V_,z_,H_={exports:{}};function W_(){if(z_)return V_;z_=1;var e=1e3,t=6e4,n=60*t,r=24*n,i=7*r,o=365.25*r;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return V_=function(l,u){u=u||{};var c=lr(l);if("string"===c&&l.length>0)return function(a){if((a=String(a)).length>100)return;var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!l)return;var u=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(l);if("number"===c&&isFinite(l))return u.long?function(i){var o=Math.abs(i);if(o>=r)return a(i,o,r,"day");if(o>=n)return a(i,o,n,"hour");if(o>=t)return a(i,o,t,"minute");if(o>=e)return a(i,o,e,"second");return i+" ms"}(l):function(i){var o=Math.abs(i);if(o>=r)return Math.round(i/r)+"d";if(o>=n)return Math.round(i/n)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))},V_}function U_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G_(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function G_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Y_,$_,q_=function(e){function t(e){var r,i,o,a=null;function l(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(l.enabled){var o=l,a=Number(new Date),u=a-(r||a);o.diff=u,o.prev=r,o.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var i=t.formatters[r];if("function"==typeof i){var a=n[c];e=i.call(o,a),n.splice(c,1),c--}return e})),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=n,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(l),l}function n(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e,t){for(var n=0,r=0,i=-1,o=0;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(i=r,o=n,r++):(n++,r++);else{if(-1===i)return!1;r=i+1,n=++o}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(ts(t.names),ts(t.skips.map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n,r=U_(("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean));try{for(r.s();!(n=r.n()).done;){var i=n.value;"-"===i[0]?t.skips.push(i.slice(1)):t.names.push(i)}}catch(e){r.e(e)}finally{r.f()}},t.enabled=function(e){var n,i=U_(t.skips);try{for(i.s();!(n=i.n()).done;){if(r(e,n.value))return!1}}catch(e){i.e(e)}finally{i.f()}var o,a=U_(t.names);try{for(a.s();!(o=a.n()).done;){if(r(e,o.value))return!0}}catch(e){a.e(e)}finally{a.f()}return!1},t.humanize=W_(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};Y_=H_,($_=H_.exports).formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Y_.exports.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,t)}},$_.save=function(e){try{e?$_.storage.setItem("debug",e):$_.storage.removeItem("debug")}catch(e){}},$_.load=function(){var e;try{e=$_.storage.getItem("debug")}catch(e){}return!e&&void 0!==ar&&"env"in ar&&(e=ar.env.DEBUG),e},$_.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));var e},$_.storage=function(){try{return localStorage}catch(e){}}(),$_.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),$_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],$_.log=console.debug||console.log||function(){},Y_.exports=q_($_),Y_.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};const K_=Un(H_.exports);function X_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J_(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Z_(e,t){if(e){if("string"==typeof e)return X_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X_(e,t):void 0}}function Q_(e){return function(e){if(Array.isArray(e))return X_(e)}(e)||J_(e)||Z_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ex(e){return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tx(e){var t=function(e,t){if("object"!=ex(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ex(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ex(t)?t:t+""}function nx(e,t,n){return(t=tx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ix(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tx(r.key),r)}}function ox(e,t,n){return t&&ix(e.prototype,t),n&&ix(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ax(e){if(Array.isArray(e))return e}function lx(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ux,cx=function(e){return e[e.Waiting=-1]="Waiting",e[e.Init=0]="Init",e[e.Configed=1]="Configed",e[e.Inited=2]="Inited",e[e.WorkbenchInited=3]="WorkbenchInited",e[e.Starting=4]="Starting",e[e.Ready=5]="Ready",e[e.RecordInit=6]="RecordInit",e[e.RecordReady=7]="RecordReady",e[e.Rendered=8]="Rendered",e[e.beforeDestroy=9]="beforeDestroy",e[e.Destroyed=10]="Destroyed",e}(cx||{}),sx=Rf.defineToken("LifecycleService"),dx=Object.defineProperty,fx=Object.getOwnPropertyDescriptor,hx=(nx(nx(nx(nx(nx(nx(nx(nx(nx(nx(ux={},cx.Waiting,"Waiting"),cx.Init,"Init"),cx.Configed,"Configed"),cx.Inited,"Inited"),cx.Starting,"Starting"),cx.Ready,"Ready"),cx.RecordInit,"RecordInit"),cx.RecordReady,"RecordReady"),cx.Rendered,"Rendered"),cx.WorkbenchInited,"WorkbenchInited"),nx(nx(ux,cx.beforeDestroy,"beforeDestroy"),cx.Destroyed,"Destroyed")),px=function(){return ox((function e(){rx(this,e),this._status=cx.Waiting,this.statusWhen=new Map,this._statusChangedAt=new Map,this._disabled=!1}),[{key:"disable",value:function(){this._disabled=!0}},{key:"statusStr",get:function(){return hx[this.status]}},{key:"status",get:function(){return this._status},set:function(e){if(!this._disabled){if(e<this.status){var t=JSON.stringify({current:this.status,setStatus:e});throw new Error("Lifecycle cannot go backwards"+t)}if(this.status===e)return}this._status=e,this._statusChangedAt.set(e,+new Date),this._runCallback()}},{key:"when",value:function(e,t){if(this._disabled||!(e<=this.status)){var n=this.statusWhen.get(e);if(Array.isArray(n)){var r=[].concat(Q_(n),[t]);this.statusWhen.set(e,r)}else this.statusWhen.set(e,[t])}}},{key:"_runCallback",value:function(){var e=this.statusWhen.get(this.status);e&&e.length&&e.forEach((function(e){e()}))}},{key:"getStatusChangedAt",value:function(e){return this._statusChangedAt.get(e)}}])}();function vx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vx(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}px=function(e,t,n,r){for(var i,o=r>1?void 0:r?fx(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dx(t,n,o),o}([Gf({token:sx})],px);var mx=/\$(\d+)/g;var yx=function(){function e(){rx(this,e)}return ox(e,null,[{key:"setLanguage",value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN"}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._data=gx(gx({},e._data),t)}},{key:"get",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.length?(t="zhCN"===e._lang?t:e._data[t]||t)?((r=r.map((function(t){return"zhCN"===e._lang?t:e._data[t]||r}))).unshift(""),t.replace(mx,(function(e,t){return r[t]||""}))):"":"zhCN"===e._lang?t:e._data[t]||t}}])}();yx._lang="zhCN",yx._data={};var bx=yx;function wx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bx.get.apply(bx,[e].concat(n))}bx.setLanguage(function(){var e,t="zh-cn";if("undefined"!=typeof window&&"undefined"!=typeof document){if(null==(e=window.appData)?void 0:e.locale)return window.appData.locale;var n=window.location.search,r=new URLSearchParams(n).get("language");if(r)return r;var i=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return i?i[1]:t}return t}()||"zhCN");var _x=function(e){return setTimeout((function(){e()}),1e3/60)},xx="abcdefghigklmnopqrstuvwxyz",kx=xx+"0123456789"+xx.toUpperCase();function Cx(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=kx.charAt(Math.floor(Math.random()*kx.length));return t}var Sx={}.toString,Ox=function(e,t){return Sx.call(e)==="[object "+t+"]"};function Ex(e){return"function"==typeof e}var Ix=function(e){return Ox(e,"RegExp")},Px=function(e){return Ox(e,"String")},Mx=function(e){return Ox(e,"Object")},Rx=function(e){return e instanceof Date},Ax=function(e){return null==e};function jx(e){return!/\s/gi.test(e)&&/.+@.+\..+/gi.test(e)}var Dx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Hn?Hn:"undefined"!=typeof self?self:{};function Tx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fx,Nx={exports:{}};Nx.exports;function Lx(){return Fx||(Fx=1,function(e,t){e.exports=function(e,t,n){var r=t.prototype,i=function(e){return e&&(e.indexOf?e:e.s)},o=function(e,t,n,r,o){var a=e.name?e:e.$locale(),l=i(a[t]),u=i(a[n]),c=l||u.map((function(e){return e.slice(0,r)}));if(!o)return c;var s=a.weekStart;return c.map((function(e,t){return c[(t+(s||0))%7]}))},a=function(){return n.Ls[n.locale()]},l=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))},u=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):o(e,"months")},monthsShort:function(t){return t?t.format("MMM"):o(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):o(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):o(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):o(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return l(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return u.bind(this)()},n.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return l(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return o(a(),"months")},n.monthsShort=function(){return o(a(),"monthsShort","months",3)},n.weekdays=function(e){return o(a(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return o(a(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return o(a(),"weekdaysMin","weekdays",2,e)}}}(Nx)),Nx.exports}var Bx,Vx=Tx(Lx()),zx={exports:{}};zx.exports;function Hx(){return Bx||(Bx=1,function(e,t){e.exports=function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,n=this.$W,r=(n<t?n+7:n)-t;return this.$utils().u(e)?r:this.subtract(r,"day").add(e,"day")}}}(zx)),zx.exports}var Wx,Ux=Tx(Hx()),Gx={exports:{}};Gx.exports;function Yx(){return Wx||(Wx=1,function(e,t){e.exports=function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),o=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(o)}}}(Gx)),Gx.exports}var $x,qx=Tx(Yx()),Kx={exports:{}};Kx.exports;function Xx(){return $x||($x=1,function(e,t){e.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,r=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],s=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var n,r=a.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?"pm":"PM");return n},f={A:[o,function(e){this.afternoon=d(e,!1)}],a:[o,function(e){this.afternoon=d(e,!0)}],Q:[n,function(e){this.month=3*(e-1)+1}],S:[n,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[r,u("day")],Do:[o,function(e){var t=a.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],w:[i,u("week")],ww:[r,u("week")],M:[i,u("month")],MM:[r,u("month")],MMM:[o,function(e){var t=s("months"),n=(s("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=s("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(e){this.year=l(e)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function h(n){var r,i;r=n,i=a&&a.formats;for(var o=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var o=r&&r.toUpperCase();return n||i[r]||e[r]||i[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),l=o.length,u=0;u<l;u+=1){var c=o[u],s=f[c],d=s&&s[0],h=s&&s[1];o[u]=h?{regex:d,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<l;n+=1){var i=o[n];if("string"==typeof i)r+=i.length;else{var a=i.regex,u=i.parser,c=e.slice(r),s=a.exec(c)[0];u.call(t,s),e=e.replace(s,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(l=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var l=o[1];if("string"==typeof l){var u=!0===o[2],c=!0===o[3],s=u||c,d=o[2];c&&(d=o[2]),a=this.$locale(),!u&&d&&(a=n.Ls[d]),this.$d=function(e,t,n,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var i=h(t)(e),o=i.year,a=i.month,l=i.day,u=i.hours,c=i.minutes,s=i.seconds,d=i.milliseconds,f=i.zone,p=i.week,v=new Date,g=l||(o||a?1:v.getDate()),m=o||v.getFullYear(),y=0;o&&!a||(y=a>0?a-1:v.getMonth());var b,w=u||0,_=c||0,x=s||0,k=d||0;return f?new Date(Date.UTC(m,y,g,w,_,x,k+60*f.offset*1e3)):n?new Date(Date.UTC(m,y,g,w,_,x,k)):(b=new Date(m,y,g,w,_,x,k),p&&(b=r(b).week(p).toDate()),b)}catch(e){return new Date("")}}(t,l,r,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),s&&t!=this.format(l)&&(this.$d=new Date("")),a={}}else if(l instanceof Array)for(var f=l.length,p=1;p<=f;p+=1){o[1]=l[p-1];var v=n.apply(this,o);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}p===f&&(this.$d=new Date(""))}else i.call(this,e)}}}()}(Kx)),Kx.exports}var Jx,Zx=Tx(Xx()),Qx={exports:{}};Qx.exports;function ek(){return Jx||(Jx=1,function(e,t){e.exports=function(){var e="week",t="year";return function(n,r,i){var o=r.prototype;o.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var o=i(this).startOf(t).add(1,t).date(r),a=i(this).endOf(e);if(o.isBefore(a))return 1}var l=i(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),u=this.diff(l,e,!0);return u<0?i(this).startOf("week").week():Math.ceil(u)},o.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()}(Qx)),Qx.exports}var tk,nk=Tx(ek()),rk={exports:{}};rk.exports;function ik(){return tk||(tk=1,function(e,t){e.exports=function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),n=this.year();return 1===t&&11===e?n+1:0===e&&t>=52?n-1:n}}}(rk)),rk.exports}var ok,ak=Tx(ik()),lk={exports:{}};var uk,ck=(ok||(ok=1,function(e,t){e.exports=function(e,t,n){t.prototype.isBetween=function(e,t,r,i){var o=n(e),a=n(t),l="("===(i=i||"()")[0],u=")"===i[1];return(l?this.isAfter(o,r):!this.isBefore(o,r))&&(u?this.isBefore(a,r):!this.isAfter(a,r))||(l?this.isBefore(o,r):!this.isAfter(o,r))&&(u?this.isAfter(a,r):!this.isBefore(a,r))}}}(lk)),lk.exports),sk=Tx(ck),dk={exports:{}};var fk,hk=(uk||(uk=1,function(e,t){e.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}(dk)),dk.exports),pk=Tx(hk),vk={exports:{}};var gk,mk=(fk||(fk=1,function(e,t){e.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}(vk)),vk.exports),yk=Tx(mk),bk={exports:{}};var wk=(gk||(gk=1,function(e,t){e.exports=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var a=i.prototype;o.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=o(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var l=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var u=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=a.utcOffset;a.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(r)))return this;var a=Math.abs(r)<=16?60*r:r,l=this;if(i)return l.$offset=a,l.$u=0===r,l;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(a+u,e)).$offset=a,l.$x.$localOffset=u}else l=this.utc();return l};var s=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return s.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return f.call(this,e,t,n);var r=this.local(),i=o(e).local();return f.call(r,i,t,n)}}}()}(bk)),bk.exports),_k=Tx(wk);a.a.extend(Ux),a.a.extend(Vx),a.a.extend(qx),a.a.extend(Zx),a.a.extend(nk),a.a.extend(ak),a.a.extend(sk),a.a.extend(pk),a.a.extend(yk),a.a.extend(_k);var xk,kk={exports:{}};xk||(xk=1,function(e,t){e.exports=function(e){function t(e){return e&&"object"==ex(e)&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(a.a)}(kk));function Ck(e){if(Pc(e))return null;e>=31708800&&(e+=a()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1);return a()("1899-12-30").add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}"zhCN"===bx._lang&&a.a.locale("zh-cn");var Sk=function(e){var t=e;if(""===e)return"";Px(e)&&4===e.length&&(/^(0[1-9]|1[0-2]).*(0[1-9]|[12][0-9]|3[01])/g.test(e)&&(t=a()().year()+e));return a()(t).format("YYYY-MM-DD")};function Ok(e){return Number.parseInt(e.format("YYYYMMDD"),10)}function Ek(){return a()().startOf("month")}var Ik=/^(?:\w+:)?\/\//,Pk=/^(javascript:)?\/\//,Mk=/^(?:\w+:)?\/\/(\S+)$/,Rk=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,Ak=/^[^\s.]+\.\S{2,}$/;function jk(e){return function(e){if("string"!=typeof e)return!1;if(e.match(Pk))return!1;var t=e.match(Mk);if(!t)return!1;var n=t[1];return!(!n||!Rk.test(n)&&!Ak.test(n))}(e)?e:(t=e,(t=String(t).trim()).match(Ik)&&!t.match(Pk)?t:"http://"+t);var t}function Dk(e){return/^-?\d*[.]?\d*$/.test(e)||/^[-+]?\d{1,3}(,\d{3})*(\.(\d*))?$/.test(e)?e+"":""}var Tk,Fk=function(e){return!(""!==e&&!Pc(e))||""!==Dk(e)},Nk={exports:{}},Lk={exports:{}};function Bk(){return Tk||(Tk=1,function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default}(Lk,Lk.exports)),Lk.exports}var Vk,zk={exports:{}};function Hk(){return Vk||(Vk=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,o;(0,r.default)(e),"object"===i(t)?(n=t.min||0,o=t.max):(n=arguments[1],o=arguments[2]);var a=encodeURI(e).split(/%..|./).length-1;return a>=n&&(void 0===o||a<=o)};var n,r=(n=Bk())&&n.__esModule?n:{default:n};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default}(zk,zk.exports)),zk.exports}var Wk,Uk,Gk={exports:{}},Yk={exports:{}};function $k(){return Wk||(Wk=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default}(Yk,Yk.exports)),Yk.exports}function qk(){return Uk||(Uk=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),t=(0,r.default)(t,o),t.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var i=e.split("."),a=i[i.length-1];if(t.require_tld){if(i.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a))return!1;if(/\s/.test(a))return!1}if(!t.allow_numeric_tld&&/^\d+$/.test(a))return!1;return i.every((function(e){return!(e.length>63&&!t.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var n=i(Bk()),r=i($k());function i(e){return e&&e.__esModule?e:{default:e}}var o={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default}(Gk,Gk.exports)),Gk.exports}var Kk,Xk,Jk={exports:{}};function Zk(){return Kk||(Kk=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,r.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n)return a.test(t);if("6"===n)return u.test(t);return!1};var n,r=(n=Bk())&&n.__esModule?n:{default:n};var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",o="(".concat(i,"[.]){3}").concat(i),a=new RegExp("^".concat(o,"$")),l="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(l,":){7}(?:").concat(l,"|:)|")+"(?:".concat(l,":){6}(?:").concat(o,"|:").concat(l,"|:)|")+"(?:".concat(l,":){5}(?::").concat(o,"|(:").concat(l,"){1,2}|:)|")+"(?:".concat(l,":){4}(?:(:").concat(l,"){0,1}:").concat(o,"|(:").concat(l,"){1,3}|:)|")+"(?:".concat(l,":){3}(?:(:").concat(l,"){0,2}:").concat(o,"|(:").concat(l,"){1,4}|:)|")+"(?:".concat(l,":){2}(?:(:").concat(l,"){0,3}:").concat(o,"|(:").concat(l,"){1,5}|:)|")+"(?:".concat(l,":){1}(?:(:").concat(l,"){0,4}:").concat(o,"|(:").concat(l,"){1,6}|:)|")+"(?::((?::".concat(l,"){0,5}:").concat(o,"|(?::").concat(l,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default}(Jk,Jk.exports)),Jk.exports}function Qk(){return Xk||(Xk=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),t=(0,a.default)(t,u),t.require_display_name||t.allow_display_name){var l=e.match(c);if(l){var g=l[1];if(e=e.replace(g,"").replace(/(^<|>$)/g,""),g.endsWith(" ")&&(g=g.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(g))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>v)return!1;var m=e.split("@"),y=m.pop(),b=y.toLowerCase();if(t.host_blacklist.includes(b))return!1;if(t.host_whitelist.length>0&&!t.host_whitelist.includes(b))return!1;var w=m.join("@");if(t.domain_specific_validation&&("gmail.com"===b||"googlemail.com"===b)){var _=(w=w.toLowerCase()).split("+")[0];if(!(0,r.default)(_.replace(/\./g,""),{min:6,max:30}))return!1;for(var x=_.split("."),k=0;k<x.length;k++)if(!d.test(x[k]))return!1}if(!(!1!==t.ignore_max_length||(0,r.default)(w,{max:64})&&(0,r.default)(y,{max:254})))return!1;if(!(0,i.default)(y,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,o.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var C=y.slice(1,-1);if(0===C.length||!(0,o.default)(C))return!1}}if('"'===w[0])return w=w.slice(1,w.length-1),t.allow_utf8_local_part?p.test(w):f.test(w);for(var S=t.allow_utf8_local_part?h:s,O=w.split("."),E=0;E<O.length;E++)if(!S.test(O[E]))return!1;if(t.blacklisted_chars&&-1!==w.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var n=l(Bk()),r=l(Hk()),i=l(qk()),o=l(Zk()),a=l($k());function l(e){return e&&e.__esModule?e:{default:e}}var u={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,v=254;e.exports=t.default,e.exports.default=t.default}(Nk,Nk.exports)),Nk.exports}var eC,tC=Tx(Qk()),nC={exports:{}};function rC(){return eC||(eC=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),!e||/[\s<>]/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;if(t=(0,o.default)(t,u),t.validate_length&&e.length>=2083)return!1;if(!t.allow_fragments&&e.includes("#"))return!1;if(!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var a,d,f,h,p,v,g,m;if(g=e.split("#"),e=g.shift(),g=e.split("?"),e=g.shift(),(g=e.split("://")).length>1){if(a=g.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(a))return!1}else{if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!t.allow_protocol_relative_urls)return!1;g[0]=e.slice(2)}}if(""===(e=g.join("://")))return!1;if(g=e.split("/"),""===(e=g.shift())&&!t.require_host)return!0;if((g=e.split("@")).length>1){if(t.disallow_auth)return!1;if(""===g[0])return!1;if((d=g.shift()).indexOf(":")>=0&&d.split(":").length>2)return!1;var y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t);else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d.split(":"),2),b=y[0],w=y[1];if(""===b&&""===w)return!1}h=g.join("@"),v=null,m=null;var _=h.match(c);_?(f="",m=_[1],v=_[2]||null):(f=(g=h.split(":")).shift(),g.length&&(v=g.join(":")));if(null!==v&&v.length>0){if(p=parseInt(v,10),!/^[0-9]+$/.test(v)||p<=0||p>65535)return!1}else if(t.require_port)return!1;if(t.host_whitelist)return s(f,t.host_whitelist);if(""===f&&!t.require_host)return!0;if(!((0,i.default)(f)||(0,r.default)(f,t)||m&&(0,i.default)(m,6)))return!1;if(f=f||m,t.host_blacklist&&s(f,t.host_blacklist))return!1;return!0};var n=a(Bk()),r=a(qk()),i=a(Zk()),o=a($k());function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||(i=r,"[object RegExp]"===Object.prototype.toString.call(i)&&r.test(e)))return!0}var i;return!1}e.exports=t.default,e.exports.default=t.default}(nC,nC.exports)),nC.exports}var iC=Tx(rC());function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return iC(e,aC(aC({},{require_protocol:!0}),t))},uC=function(e){return"Invalid Date"!==a()(e).toString()},cC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;"number"==typeof e&&(e=String(e));var n=t.precision||18,r=t.scale||2,i=t.forceDecimal||!1;return!(e.replace(/[-+.]/gi,"").length>n)&&new RegExp("^[-+]?([0-9]+)?(\\.[0-9]{0,".concat(r,"})").concat(i?"":"?","$")).test(e)},sC=Rf.defineToken("DatabaseToken");function dC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function fC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hC=function(){return ox((function e(){rx(this,e),this.ydoc=new yg,this.ydata=this.ydoc.getMap()}),[{key:"data",get:function(){return this.ydata}},{key:"newMap",value:function(e,t){var n=new Pm;e&&Object.keys(e).forEach((function(t){n.set(t,e[t])}));var r=n.get;if(n.get=function(e){var t,i,o,a=r.call(n,e);if(!a){var l=null==(t=n._map)?void 0:t.get(e);if(l)return null==(o=null==(i=l.content)?void 0:i.arr)?void 0:o[0]}return a},t){var i,o=dC(t);try{var a=function(){var e=i.value;Object.defineProperty(n,e.name,{get:function(){return console.warn("please use .get('".concat(e.name,"').")),n.get(e.name)}})};for(o.s();!(i=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"newArray",value:function(e){var t=this,n=new Em;return e&&n.push(e.map((function(e){return $o(e)?t.newMap(e):e}))),n}},{key:"transact",value:function(e,t){this.ydoc.transact(e,t||this)}},{key:"destroy",value:function(){var e;null==(e=this.ydoc)||e.destroy(),this.ydoc=null,this.ydata=null,this._spellEventObj=null,this._storageEventObj=null}}])}(),pC=function(){return ox((function e(t){var n=this;rx(this,e),this.canUndo=!1,this.canRedo=!1,this._yUndoManager=new Qg(t.ydata,{captureTimeout:0,trackedOrigins:new Set([t])}),this._yUndoManager.on("stack-item-added",(function(){n._setCanUndoRedo()})),this._yUndoManager.on("stack-item-popped",(function(){n._setCanUndoRedo()}))}),[{key:"_setCanUndoRedo",value:function(){var e=this._yUndoManager;this.canRedo=e.canRedo(),this.canUndo=e.canUndo()}},{key:"stopCapturing",value:function(){this._yUndoManager.stopCapturing()}},{key:"undo",value:function(){this._yUndoManager.undo()}},{key:"redo",value:function(){this._yUndoManager.redo()}},{key:"destroy",value:function(){this._yUndoManager.destroy()}}])}(),vC=function(){return ox((function e(){rx(this,e),this._ystruct=new hC,this._yhistory=new pC(this._ystruct)}),[{key:"ystruct",get:function(){return this._ystruct}},{key:"doc",get:function(){return this._ystruct.ydoc}},{key:"data",get:function(){return this._ystruct.data}},{key:"newMap",value:function(e,t){return(null==e?void 0:e._map)?e:this._ystruct.newMap(e,t)}},{key:"newArray",value:function(e){return this._ystruct.newArray(e)}},{key:"transact",value:function(e){this._ystruct.transact(e)}},{key:"canUndo",value:function(){return this._yhistory.canUndo}},{key:"canRedo",value:function(){return this._yhistory.canRedo}},{key:"undo",value:function(){this._yhistory.undo()}},{key:"redo",value:function(){this._yhistory.redo()}},{key:"destroy",value:function(){this._ystruct.destroy(),this._yhistory.destroy()}}])}();function gC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function mC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yC=function(){function e(t){var n=this;rx(this,e),this._arr=[],Array.isArray(t)?t.forEach((function(e){return n._arr.push(e)})):t&&this._arr.push(t)}return ox(e,[{key:"origin",get:function(){return this._arr}},{key:"length",get:function(){return this._arr.length}},{key:"clone",value:function(){var t=new e;return this._arr.forEach((function(e){t.push([Object.assign({},e)])})),t}},{key:"insert",value:function(e){}},{key:"push",value:function(e){var t,n=gC(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"get",value:function(e){return this._arr[e]}},{key:"toArray",value:function(){return this._arr}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this._arr.slice(e,t)}},{key:"toJSON",value:function(){return JSON.parse(JSON.stringify(this._arr))}},{key:"map",value:function(e){return this._arr.map(e)}},{key:"forEach",value:function(e){return this._arr.forEach(e)}},{key:"delete",value:function(e,t){return this._arr.splice(e,t)}},{key:"unshift",value:function(e){var t,n=gC(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.unshift(r)}}catch(e){n.e(e)}finally{n.f()}return this._arr}},{key:Symbol.iterator,value:function(){return e=this,t=0,nx(nx({},Symbol.iterator,(function(){return this})),"next",(function(){if(0===e.origin.length||null==e.origin[t])return{done:!0,value:void 0};var n=e.origin[t];return t+=1,{done:!1,value:n}}));var e,t}}])}(),bC=function(){return ox((function e(t){var n=this;rx(this,e),this._map=new Map,t&&Object.keys(t).forEach((function(e){n.set(e,t[e])}))}),[{key:"clone",value:function(){return this}},{key:"keys",value:function(){return this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"delete",value:function(e){return this._map.delete(e)}},{key:"values",value:function(){return this._map.values()}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(e){return this._map.forEach(e)}},{key:"toJSON",value:function(){return Object.fromEntries(this._map)}},{key:Symbol.iterator,value:function(){return this._map[Symbol.iterator]()}},{key:"uuid",get:function(){return this.get("uuid")}},{key:"updated_at",get:function(){return this.get("updated_at")}},{key:"created_at",get:function(){return this.get("created_at")}}])}();function wC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_C(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function _C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xC(e,t){var n,r=wC(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(e){r.e(e)}finally{r.f()}return null}function kC(e,t){var n,r=new yC,i=wC(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t(o)&&r.push([o])}}catch(e){i.e(e)}finally{i.f()}return r}function CC(e,t){var n=-1;return e?(e.forEach((function(e,r){-1===n&&t(e)&&(n=r)})),n):n}function SC(e,t,n){return e.forEach((function(e){t(n,e)})),n}function OC(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function EC(e,t){var n,r=wC(e);try{for(r.s();!(n=r.n()).done;){if(t(n.value))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}function IC(e,t,n){return e.slice(t,n)}function PC(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function MC(e,t){var n,r=new yC,i=wC(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t(o)&&r.push([o])}}catch(e){i.e(e)}finally{i.f()}return r}var RC=Rf.defineToken("ConfigurationToken");function AC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jC(e,t){if(t&&("object"==ex(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AC(e)}function DC(e){return(DC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TC(){return TC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=DC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},TC.apply(null,arguments)}function FC(e,t){return(FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}function LC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return BC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BC(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function BC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var VC=Object.defineProperty,zC=Object.getOwnPropertyDescriptor,HC=function(){return ox((function e(){rx(this,e),this._store=new Set,this._isDestroyed=!1}),[{key:"_register",value:function(e){return this._store.add(e),e}},{key:"destroy",value:function(){if(!this._isDestroyed){var e,t=LC(this._store.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.destroy()}}catch(e){t.e(e)}finally{t.f()}this._store.clear(),this._isDestroyed=!0}}}])}();HC=function(e,t,n,r){for(var i,o=r>1?void 0:r?zC(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&VC(t,n,o),o}([Uf()],HC);var WC,UC,GC,YC,$C=function(){return ox((function e(){rx(this,e),this.destroy=function(){},this.unset=function(){},this.isset=function(){return!1}}),[{key:"set",value:function(e){var t=this,n=e;return this.unset=function(){return n=void 0},this.isset=function(){return void 0!==n},this.destroy=function(){n&&(n(),n=void 0,t.unset=void 0,t.isset=void 0)},this}}])}(),qC=function(e){return{destroy:e}},KC=function(){return ox((function e(){rx(this,e),this.destroyableList=[],this._isDisposing=!1}),[{key:"destroyed",get:function(){return 0===this.destroyableList.length}},{key:"destroy",value:function(){if(!this.destroyed&&!this._isDisposing){for(this._isDisposing=!0;!this.destroyed;)try{this.destroyableList.pop().destroy()}catch(e){}this._isDisposing=!1}}},{key:"push",value:function(e){var t=this.destroyableList;t.push(e);var n=e.destroy.bind(e),r=qC((function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}));return e.destroy=function(){try{r.destroy(),n()}catch(e){}},r}}])}(),XC={exports:{}},JC={exports:{}};function ZC(){return UC||(UC=1,function(e){var t=(WC||(WC=1,function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(JC)),JC.exports).default;function n(){e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var r,i={},o=Object.prototype,a=o.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new j(r||[]);return l(o,"_invoke",{value:P(e,n,a)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=h;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function x(){}var k={};f(k,c,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(D([])));S&&S!==o&&a.call(S,c)&&(k=S);var O=x.prototype=w.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,n){function r(i,o,l,u){var c=p(e[i],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,l,u)}),(function(e){r("throw",e,l,u)})):n.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,u)}))}u(c.arg)}var i;l(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}})}function P(e,t,n){var i=v;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:r,done:!0}}for(n.method=o,n.arg=a;;){var l=n.delegate;if(l){var u=M(l,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=p(e,t,n);if("normal"===c.type){if(i=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function M(e,t){var n=t.method,i=e.iterator[n];if(i===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,M(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=p(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,b;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=x,l(O,"constructor",{value:x,configurable:!0}),l(x,"constructor",{value:_,configurable:!0}),_.displayName=f(x,d,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},i.awrap=function(e){return{__await:e}},E(I.prototype),f(I.prototype,s,(function(){return this})),i.AsyncIterator=I,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new I(h(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),f(O,d,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},i.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return l.type="throw",l.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(XC)),XC.exports}var QC=Tx(function(){if(YC)return GC;YC=1;var e=ZC()();GC=e;try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":ex(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return GC}()),eS=ox((function e(t){rx(this,e),this.element=t,this.next=e.Undefined,this.prev=e.Undefined}));eS.Undefined=new eS(void 0);var tS=eS,nS=function(){return ox((function e(){rx(this,e),this._first=tS.Undefined,this._last=tS.Undefined,this._size=0}),[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return this._first===tS.Undefined}},{key:"clear",value:function(){for(var e=this._first;e!==tS.Undefined;){var t=e.next;e.prev=tS.Undefined,e.next=tS.Undefined,e=t}this._first=tS.Undefined,this._last=tS.Undefined,this._size=0}},{key:"unshift",value:function(e){return this._insert(e,!1)}},{key:"push",value:function(e){return this._insert(e,!0)}},{key:"_insert",value:function(e,t){var n=this,r=new tS(e);if(this._first===tS.Undefined)this._first=r,this._last=r;else if(t){var i=this._last;this._last=r,r.prev=i,i.next=r}else{var o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;var a=!1;return function(){a||(a=!0,n._remove(r))}}},{key:"shift",value:function(){if(this._first!==tS.Undefined){var e=this._first.element;return this._remove(this._first),e}}},{key:"pop",value:function(){if(this._last!==tS.Undefined){var e=this._last.element;return this._remove(this._last),e}}},{key:"_remove",value:function(e){if(e.prev!==tS.Undefined&&e.next!==tS.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===tS.Undefined&&e.next===tS.Undefined?(this._first=tS.Undefined,this._last=tS.Undefined):e.next===tS.Undefined?(this._last=this._last.prev,this._last.next=tS.Undefined):e.prev===tS.Undefined&&(this._first=this._first.next,this._first.prev=tS.Undefined);this._size-=1}},{key:Symbol.iterator,value:QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._first;case 1:if(t===tS.Undefined){e.next=7;break}return e.next=4,t.element;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}])}();function rS(e,t,n){return t=DC(t),jC(e,iS()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function iS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iS=function(){return!!e})()}function oS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aS(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function aS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lS=function(){return ox((function e(t,n,r){rx(this,e),this.callback=t,this.callbackThis=n,this.stack=r,this.subscription=new $C}),[{key:"invoke",value:function(e){this.callback.call(this.callbackThis,e)}}])}(),uS=ox((function e(t,n,r){rx(this,e),this.emitter=t,this.listener=n,this.event=r})),cS=function(){return ox((function e(){rx(this,e),this._queue=new nS}),[{key:"size",get:function(){return this._queue.size}},{key:"push",value:function(e,t,n){this._queue.push(new uS(e,t,n))}},{key:"clear",value:function(e){var t,n=new nS,r=oS(this._queue);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.emitter!==e&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}this._queue=n}},{key:"deliver",value:function(){for(;this._queue.size>0;){var e=this._queue.shift();try{e.listener.invoke(e.event)}catch(e){console.error(e)}}}}])}(),sS=function(e){function t(){return rx(this,t),rS(this,t,arguments)}return NC(t,e),ox(t,[{key:"clear",value:function(e){this._queue.clear()}}])}(cS),dS=function(e){function t(){var e;return rx(this,t),(e=rS(this,t,arguments))._id=Cx(6),e._disposed=!1,e}return NC(t,e),ox(t,[{key:"event",get:function(){var e=this;return this._event||(this._event=function(t,n,r){e._listeners||(e._listeners=new nS);var i=new lS(t,n,undefined),o=e._listeners.push(i),a=i.subscription.set((function(){e._disposed||o()}));return Array.isArray(r)&&r.push(a),a}),this._event}},{key:"id",get:function(){return this._id}},{key:"listeners",get:function(){return this._listeners?this._listeners:null}},{key:"destroy",value:function(){var e;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(this))}},{key:"emit",value:function(e){if(this.listeners){this._deliveryQueue||(this._deliveryQueue=new sS);var t,n=oS(this.listeners);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._deliveryQueue.push(this,r,e)}}catch(e){n.e(e)}finally{n.f()}this._deliveryQueue.deliver()}}},{key:"hasListeners",value:function(){return!!this._listeners&&!this._listeners.isEmpty()}}])}(HC);function fS(e){return ax(e)||J_(e)||Z_(e)||lx()}var hS=/\\(\\)?/g,pS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vS=Object.defineProperty,gS=Object.getOwnPropertyDescriptor,mS=function(){return ox((function e(){rx(this,e),this._configurationProperties={}}),[{key:"getSchema",value:function(){return{title:"数据表配置列表",type:"object",properties:this._configurationProperties}}},{key:"register",value:function(e){this._doRegister(e)}},{key:"_doRegister",value:function(e){var t=e.id;if(!t)throw new Error("配置不合法: ".concat(JSON.stringify(e),", configuration.id 是必填"));var n=t.split(".");if(1===n.length)this._configurationProperties[n[0]]=e;else{this._configurationProperties[n[0]]?this._configurationProperties[n[0]].properties||(this._configurationProperties[n[0]].properties={}):this._configurationProperties[n[0]]={id:n[0],type:"object",properties:{}};var r=this._configurationProperties[n[0]].properties;n.forEach((function(t,i){if(0!==i)if(r[t])r[t].properties||(r[t].properties={}),r=r[t].properties;else if(i===n.length-1)r[t]=e;else{var o=n.slice(i+1);r[t]={id:o.join("."),type:"object",properties:{}}}}))}}},{key:"getProperty",value:function(e){for(var t=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(pS,(function(e,n,r,i){t.push(r?i.replace(hS,"$1"):n||e)})),t}(e),n=fS(t),r=n[0],i=n.slice(1),o=this._configurationProperties[r],a=r,l=0;l<i.length;l++){var u=i[l];if(a+="."+u,!o)return null;if(/^\d+$/g.test(u))o=null==o?void 0:o.items;else if(o.properties){for(var c=Object.keys(o.properties),s=!1,d=0;d<c.length;d++){var f=c[d],h=r+"."+f;if(h===a){o=o.properties[f],s=!0;break}if(h.startsWith(a)){s=!0;break}}if(s)continue;o=o.properties[u]}}return o}},{key:"validate",value:function(e,t){return!!this.getProperty(e)}}])}();function yS(e,t,n){return t=DC(t),jC(e,bS()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function bS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bS=function(){return!!e})()}mS=function(e,t,n,r){for(var i,o=r>1?void 0:r?gS(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vS(t,n,o),o}([Gf()],mS);var wS=Object.defineProperty,_S=Object.getOwnPropertyDescriptor,xS=function(e,t,n,r){for(var i,o=r>1?void 0:r?_S(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wS(t,n,o),o},kS=function(e){function t(){var e;return rx(this,t),(e=yS(this,t,arguments))._defaultModel={},e._overrideModel={},e._onDidChange=e._register(new dS),e.onDidChange=e._onDidChange.event,e._cacheMap={},e}return NC(t,e),ox(t,[{key:"registerDefaultValue",value:function(e){for(var t=Object.keys(e),n=0,r=t;n<r.length;n++){var i=r[n];this._configurationRegistry.validate(i,e[i])}for(var o=0,a=t;o<a.length;o++){var l=a[o];Wc(this._defaultModel,l,e[l])}}},{key:"setValue",value:function(e,t){var n=this;this._configurationRegistry.validate(e,t);var r=this.getValue(e);return _x((function(){n._onDidChange.emit({type:"valueChanged",path:e,pre:r,cur:t})})),this._cacheMap={},Wc(this._overrideModel,e,t)}},{key:"getValue",value:function(e){if(!e)return this.getValues();if(null!=this._cacheMap[e])return this._cacheMap[e];this._configurationRegistry.validate(e);var t=Do(this.getValues(),e);return this._cacheMap[e]=t,t}},{key:"getValues",value:function(){return Dc({},this._defaultModel,this._overrideModel)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function CS(e,t,n){return t=DC(t),jC(e,SS()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function SS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SS=function(){return!!e})()}xS([Yf(mS)],kS.prototype,"_configurationRegistry",2),xS([Df()],kS.prototype,"destroy",1),kS=xS([Gf()],kS);var OS=Object.defineProperty,ES=Object.getOwnPropertyDescriptor,IS=function(e,t,n,r){for(var i,o=r>1?void 0:r?ES(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&OS(t,n,o),o},PS=function(e){function t(){var e;return rx(this,t),(e=CS(this,t,arguments))._onConfigurationChange=e._register(new dS),e.onConfigurationChange=e._onConfigurationChange.event,e}return NC(t,e),ox(t,[{key:"registerConfiguration",value:function(e){this._configurationRegistry.register(e)}},{key:"registerDefaultValue",value:function(e){this._configurationModel.registerDefaultValue(e)}},{key:"setValue",value:function(e,t){if("object"===ex(e))for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];this._configurationModel.setValue(i,e[i])}else"string"==typeof e&&this._configurationModel.setValue(e,t);this._onConfigurationChange.emit({key:e,value:t})}},{key:"getValue",value:function(e){return this._configurationModel.getValue(e)}},{key:"getAllValues",value:function(){return this._configurationModel.getValues()}},{key:"getSchema",value:function(){return this._configurationRegistry.getSchema()}},{key:"onValueChange",value:function(e){this._configurationModel.onDidChange((function(t){"valueChanged"===t.type&&e(t)}))}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);IS([Yf(mS)],PS.prototype,"_configurationRegistry",2),IS([Yf(kS)],PS.prototype,"_configurationModel",2),IS([Df()],PS.prototype,"destroy",1),PS=IS([Gf({token:RC})],PS);var MS=ch().register(mS).register(kS).register(PS),RS=function(){return ox((function e(t){rx(this,e),this._struct=t,this._onUndo=new dS,this.onUndo=this._onUndo.event,this._onRedo=new dS,this.onRedo=this._onRedo.event}),[{key:"transact",value:function(e){this._struct.transact(e)}},{key:"canUndo",value:function(){return this._struct.canUndo()}},{key:"canRedo",value:function(){return this._struct.canRedo()}},{key:"undo",value:function(){this._struct.undo(),this._onUndo.emit(this)}},{key:"redo",value:function(){this._struct.redo(),this._onRedo.emit(this)}}])}();function AS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jS(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function jS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var DS=function(){return ox((function e(){rx(this,e)}),[{key:"where",value:function(e,t,n){var r=this,i=Object.keys(t),o=i.length===(null==n?void 0:n.length)&&(null==n?void 0:n.every((function(e){return i.includes(e)})));if(n&&n.length>0&&(e=this.getDataByIndexes(e,t,n)),!e)return new yC;if(o)return e;if(t)for(var a=0,l=Object.keys(t);a<l.length;a++){var u=l[a];if(Array.isArray(t[u])){for(var c={},s=0;s<t[u].length;s++)c[t[u][s]]=!0;t["$__".concat(u)]=c}}var d=new yC;return e.forEach((function(e){r._matchRow(e,t)&&d.push([e])})),d}},{key:"getDataByIndexes",value:function(e,t,n){if(!e)return new yC;var r=new yC;if(2===n.length){var i=[],o=null==t?void 0:t[n[0]];o?Array.isArray(o)||(o=[o]):o=e.keys();var a,l=AS(o);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=e.get(u);c&&(i=i.concat(c))}}catch(e){l.e(e)}finally{l.f()}var s=null==t?void 0:t[n[1]];if(s){Array.isArray(s)||(s=[s]);var d,f=AS(s);try{for(f.s();!(d=f.n()).done;){var h,p=d.value,v=AS(i);try{for(v.s();!(h=v.n()).done;){var g=h.value.get(p);g&&r.push(g)}}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}}else{var m,y=AS(i);try{for(y.s();!(m=y.n()).done;){var b,w=m.value,_=w.keys(),x=[],k=AS(_);try{for(k.s();!(b=k.n()).done;){var C=b.value;x.push(C)}}catch(e){k.e(e)}finally{k.f()}var S,O=AS(x.reverse());try{for(O.s();!(S=O.n()).done;){var E=S.value;r.push(w.get(E))}}catch(e){O.e(e)}finally{O.f()}}}catch(e){y.e(e)}finally{y.f()}}}else{var I=null==t?void 0:t[n[0]];I?Array.isArray(I)||(I=[I]):I=Array.from(e.keys());var P,M=AS(I);try{for(M.s();!(P=M.n()).done;){var R=P.value,A=e.get(R);A&&r.push(A)}}catch(e){M.e(e)}finally{M.f()}}return r}},{key:"_matchRow",value:function(e,t){var n=!1;if(!t)return!0;var r=Object.keys(t);if(0===r.length)return!0;if(!t)return!0;for(var i=0,o=r;i<o.length;i++){var a=o[i];if(!a.startsWith("$__")&&!(n=this._match(e,a,t)))return!1}return n}},{key:"_match",value:function(e,t,n){var r,i=n[t];return(null==i?void 0:i.$not)?(i=i.$not,Array.isArray(i)?!i.find((function(n){return n==e.get(t)})):e.get(t)!=i):Array.isArray(i)?!!(null==(r=n["$__".concat(t)])?void 0:r[e.get(t)]):e.get(t)==i}}])}();function TS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FS(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function FS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var NS=["uuid","uid"],LS=function(){return ox((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rx(this,e),this._onBeforeChange=new dS,this.onBeforeChange=this._onBeforeChange.event,this._options=n,this._struct=t,this._dataHelper=new DS}),[{key:"root",get:function(){return this._struct.data||new bC}},{key:"getIndexes",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("indexes"))||[]}},{key:"getColumns",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("columns"))||[]}},{key:"setTable",value:function(e,t,n){var r=this.root.get(e);r||(r=this._struct.newMap(),this.root.set(e,r));var i,o=[],a=TS(t);try{for(a.s();!(i=a.n()).done;){var l=i.value;l.uuid||(l.uuid=Cx(32)),o.push(l)}}catch(e){a.e(e)}finally{a.f()}r.set("columns",o),r.set("indexes",n)}},{key:"dropTable",value:function(e){this.root.delete(e)}},{key:"setData",value:function(e,t){var n,r=this,i=this.getIndexes(e),o=this.getColumns(e);this._filterColumns(t),this._onBeforeChange.emit({type:"init",table:e,data:t});var a=this.root.get(e);if(a){if(i&&i.length>0){var l=this._struct.newMap(null,o);a.set("data",l);var u,c=TS(t);try{var s=function(){var e=u.value;if(2===i.length){var t=e[i[0]],a=e[i[1]];if(!l.get(t)){var c=r._struct.newMap(null,o);c.set(a,r._struct.newArray()),l.set(t,c)}if((null==(n=l.get(t))?void 0:n.get(a))||l.get(t).set(a,r._struct.newArray()),xC(l.get(t).get(a),(function(t){return(null==t?void 0:t.get("uuid"))===e.uuid})))return 1;l.get(t).get(a).push([r._struct.newMap(e,o)])}else{var s=e[i[0]],d=l.get(s);d||(d=r._struct.newArray(),l.set(s,d)),d.push([r._struct.newMap(e,o)])}};for(c.s();!(u=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}else a.set("data",this._struct.newArray(t));return t}}},{key:"update",value:function(e,t,n){var r=this,i=this.getIndexes(e),o=this.getColumns(e),a=this.root.get(e);if(a){var l=a.get("data"),u=[];if(i&&i.length>0)if(l||(l=this._struct.newMap(null,o),a.set("data",l)),2===i.length){var c,s=TS(t);try{var d=function(){var e=c.value,t=e.get(i[0]),a=e.get(i[1]),s=l.get(t).get(a),d=n[i[1]];if(null!=d&&a!==d){var f=l.get(t).get(d);f||(f=r._struct.newArray(),l.get(t).set(d,f));var h=CC(s,(function(t){return t.get("uuid")===e.get("uuid")})),p=null==s?void 0:s.get(h);if(!p)return 0;var v=Object.assign(p.toJSON(),n||{});return f.push([r._struct.newMap(v,o)]),s.delete(h),0}u=u.concat(s.toArray())};for(s.s();!(c=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}}else if(NS.includes(i[0])){var f,h=TS(t);try{for(h.s();!(f=h.n()).done;){var p=f.value,v=l.get(p.get(i[0])).get(0);if(v)for(var g in n)v.set(g,n[g])}}catch(e){h.e(e)}finally{h.f()}}else{var m=t.get(0).get(i[0]);u=l.get(m)}else u=l;if(u){var y,b={},w=TS(u);try{for(w.s();!(y=w.n()).done;){var _=y.value;b[_.get("uuid")]=_}}catch(e){w.e(e)}finally{w.f()}var x,k=TS(t);try{for(k.s();!(x=k.n()).done;){var C=b[x.value.get("uuid")];if(C)for(var S in n)C.set(S,n[S])}}catch(e){k.e(e)}finally{k.f()}}}}},{key:"append",value:function(e,t,n){var r,i=this;Array.isArray(t)||(t=[t]);var o=this.getIndexes(e),a=this.getColumns(e),l=this.root.get(e);if(l){var u=l.get("data");if(this._filterColumns(t),o&&o.length>0)if(u||(u=this._struct.newMap(null,a),l.set("data",u)),2===o.length){var c=t[0][o[0]],s=t[0][o[1]];if(!u.get(c)){var d=this._struct.newMap(null,a);d.set(s,this._struct.newArray()),u.set(c,d)}var f=null==(r=u.get(c))?void 0:r.get(s);if(f||(f=this._struct.newArray(),u.get(c).set(s,f)),n){var h=CC(f,(function(e){return e.get("uuid")===n.get("uuid")}));if(h>-1)return void f.insert(h+1,t.map((function(e){return i._struct.newMap(e,a)})))}f.push(t.map((function(e){return i._struct.newMap(e,a)})))}else if(NS.includes(o[0])){var p,v=TS(t);try{for(v.s();!(p=v.n()).done;){var g=p.value,m=g[o[0]];if(u.get(m)||u.set(m,this._struct.newArray()),u.get(m).length>0)return;u.get(m).push([this._struct.newMap(g,a)])}}catch(e){v.e(e)}finally{v.f()}}else{var y=t[0][o[0]];if(u.get(y)||u.set(y,this._struct.newArray()),n){var b=CC(u.get(n.get(o[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(b>-1)return void u.get(y).insert(b+1,t.map((function(e){return i._struct.newMap(e,a)})))}u.get(y).push(t.map((function(e){return i._struct.newMap(e,a)})))}else{if(u||(u=this._struct.newArray(),l.set("data",u)),n){var w=CC(u,(function(e){return e.get("uuid")===n.get("uuid")}));if(w>-1)return void u.insert(w+1,t.map((function(e){return i._struct.newMap(e,a)})))}u.push(t.map((function(e){return i._struct.newMap(e,a)})))}}}},{key:"before",value:function(e,t,n){var r=this;Array.isArray(t)||(t=[t]);var i=this.getIndexes(e),o=this.getColumns(e);t=this._filterColumns(t);var a=this.root.get(e);if(a){var l=a.get("data");if(i&&i.length>0)if(l||(l=this._struct.newMap(null,o),a.set("data",l)),2===i.length){var u=t[0][i[0]],c=t[0][i[1]];if(!l.get(u)){var s=this._struct.newMap(null,o);s.set(c,this._struct.newArray()),l.set(u,s)}if(l.get(u).get(c)||l.get(u).set(c,this._struct.newArray()),n){var d=CC(l.get(u).get(c),(function(e){return e.get("uuid")===n.get("uuid")}));if(d>-1)return void l.get(u).get(c).insert(d,t.map((function(e){return r._struct.newMap(e,o)})))}l.get(u).get(c).unshift(t.map((function(e){return r._struct.newMap(e,o)})))}else{var f=t[0][i[0]];if(l.get(f)||l.set(f,this._struct.newArray()),n){var h=CC(l.get(n.get(i[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(h>-1)return void l.get(f).insert(h,t.map((function(e){return r._struct.newMap(e,o)})))}l.get(f).unshift(t.map((function(e){return r._struct.newMap(e,o)})))}else{if(l||(l=this._struct.newArray(),a.set("data",l)),n){var p=CC(l,(function(e){return e.get("uuid")===n.get("uuid")}));if(p>-1)return void l.insert(p,t.map((function(e){return r._struct.newMap(e,o)})))}l.unshift(t.map((function(e){return r._struct.newMap(e,o)})))}}}},{key:"remove",value:function(e,t){var n,r=this.getIndexes(e),i=this.getColumns(e),o=this.root.get(e);if(o){var a=o.get("data"),l=t.toJSON();if(r&&r.length>0)if(a||(a=this._struct.newMap(null,i),o.set("data",a)),2===r.length){var u,c=TS(t);try{var s,d=function(){var e=u.value,t=e.get(r[0]),i=e.get(r[1]),o=null==(n=a.get(t))?void 0:n.get(i);if(!o)return{v:void 0};var l={};o.forEach((function(e,t){l[e.get("uuid")]=t}));var c=l[e.get("uuid")];o.delete(c)};for(c.s();!(u=c.n()).done;)if(s=d())return s.v}catch(e){c.e(e)}finally{c.f()}}else if(NS.includes(r[0])){var f,h=TS(l);try{var p,v=function(){var e=f.value,t=e[r[0]],n=a.get(t);if(!n)return{v:void 0};var i={};n.forEach((function(e,t){i[e.get("uuid")]=t}));var o=i[e.uuid];n.delete(o)};for(h.s();!(f=h.n()).done;)if(p=v())return p.v}catch(e){h.e(e)}finally{h.f()}}else{var g=l[0][r[0]],m=a.get(g);if(!m)return;var y={},b=m.length;m.forEach((function(e,t){y[e.get("uuid")]=t}));var w,_=l.map((function(e){return e.uuid})),x=Array.from({length:b}),k=TS(_);try{for(k.s();!(w=k.n()).done;){var C=w.value;x[y[C]]=C}}catch(e){k.e(e)}finally{k.f()}for(var S=b-1;S>=0;)x[S]&&m.delete(S),S--}else{var O={};a.forEach((function(e,t){O[e.get("uuid")]=t}));var E,I=a.length,P=l.map((function(e){return e.uuid})),M=Array.from({length:I}),R=TS(P);try{for(R.s();!(E=R.n()).done;){var A=E.value;M[O[A]]=A}}catch(e){R.e(e)}finally{R.f()}for(var j=I-1;j>=0;)M[j]&&a.delete(j),j--}}}},{key:"query",value:function(e,t){var n,r,i=null==(r=null==(n=this.root)?void 0:n.get(e))?void 0:r.get("data");if(!i)return new yC;var o=this.getIndexes(e);return t?this._dataHelper.where(i,t,o)||new yC:o&&o.length>0?this._dataHelper.getDataByIndexes(i,t,o)||new yC:i}},{key:"getOriginData",value:function(e){var t=this.root.get(e);return(null==t?void 0:t.get("data"))||new yC}},{key:"getAll",value:function(){return this.root.toJSON()}},{key:"clear",value:function(e){var t=this;return(e||Array.from(this.root.keys())).forEach((function(e){var n,r;(null==(n=t._options.frozenTable)?void 0:n.includes(e))||null==(r=t.root.get(e))||r.delete("data")})),this}},{key:"_filterColumns",value:function(e){var t=function(e){e._map&&(e=e.toJSON()),e.uuid||(e.uuid=Cx(32));var t=new Date;return e.created_at?Rx(e.created_at)&&(e.created_at=e.created_at.getTime()):e.created_at=+t,e.updated_at?Rx(e.updated_at)&&(e.updated_at=e.updated_at.getTime()):e.updated_at=+t,e};if(!Array.isArray(e))return t(e);var n,r=TS(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(e){r.e(e)}finally{r.f()}return e}},{key:"destroy",value:function(){var e,t;null==(e=this._webrtc)||e.disconnect(),null==(t=this._ws)||t.disconnect(),this._struct.destroy(),this._webrtc=null,this._ws=null}}])}();function BS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return VS(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VS(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function VS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zS=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,WS=function(e,t,n,r){for(var i,o=r>1?void 0:r?HS(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zS(t,n,o),o},US=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e;this._struct=new vC,this._stack=new RS(this._struct);var t=null==(e=this._configuration)?void 0:e.getValue("model.frozenTable");this._storage=new LS(this._struct,{frozenTable:t}),this._dataHelper=new DS}},{key:"struct",get:function(){return this._struct}},{key:"stack",get:function(){return this._stack}},{key:"root",get:function(){return this._storage.root}},{key:"setTable",value:function(e,t,n){this._storage.setTable(e,t,n)}},{key:"setData",value:function(e,t){this._storage.setData(e,t)}},{key:"getData",value:function(){return this._storage.getAll()}},{key:"query",value:function(e,t){return this._storage.query(e,t)}},{key:"upsert",value:function(e,t,n){var r=this._storage.getOriginData(e),i=this._storage.getIndexes(e),o=this._dataHelper.where(r,t,i);return o&&0!==o.length?(this._storage.update(e,o,n),n):(n.uuid||(n.uuid=Cx(32)),this._storage.append(e,n),n)}},{key:"update",value:function(e,t,n){var r=this._storage.getOriginData(e),i=this._storage.getIndexes(e),o=this._dataHelper.where(r,t,i);return 0===o.length||this._storage.update(e,o,n),n}},{key:"insert",value:function(e,t,n){return n.uuid||(n.uuid=Cx(32)),this._storage.append(e,n),n}},{key:"insertAfter",value:function(e,t,n){var r,i,o,a=this._storage.getOriginData(e),l=this._storage.getIndexes(e),u=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,u,l))?void 0:r.get(0)))return t&&(o=null==(i=this._dataHelper.where(a,t,l))?void 0:i.get(0)),this._storage.append(e,u,o),u}},{key:"insertBefore",value:function(e,t,n){var r,i,o,a=this._storage.getOriginData(e),l=this._storage.getIndexes(e),u=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,u,l))?void 0:r.get(0)))return t&&(o=null==(i=this._dataHelper.where(a,t,l))?void 0:i.get(0)),this._storage.before(e,u,o),u}},{key:"remove",value:function(e,t,n){var r=this._storage.getOriginData(e),i=this._storage.getIndexes(e),o=this._dataHelper.where(r,t,i);if(0===o.length)return n;var a={};if(i&&i.length>0){o.forEach((function(e){var t=i.map((function(t){return e.get(t)})).join(",");a[t]||(a[t]=new yC),a[t].push([e])}));for(var l=0,u=Object.values(a);l<u.length;l++){var c=u[l];this._storage.remove(e,c)}}else this._storage.remove(e,o);return n}},{key:"bulkInsert",value:function(e,t,n){var r,i=BS(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.uuid||(o.uuid=Cx(32))}}catch(e){i.e(e)}finally{i.f()}var a={},l=this._storage.getIndexes(e);if(l&&l.length>0){n.forEach((function(e){var t=l.map((function(t){return e[t]})).join(",");a[t]||(a[t]=[]),a[t].push(e)}));for(var u=0,c=Object.values(a);u<c.length;u++){var s=c[u];this._storage.append(e,s)}}else this._storage.append(e,n);return n}},{key:"moveAfter",value:function(e,t,n){var r,i=this._storage.getOriginData(e),o=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,l=this._dataHelper.where(i,a,o);if(l){var u;t&&(u=null==(r=this._dataHelper.where(i,t,o))?void 0:r.get(0));var c=l.toJSON(),s=null==u?void 0:u.toJSON();return this._storage.remove(e,l),s?this._storage.append(e,c,new bC(s)):this._storage.append(e,c),l}}},{key:"moveBefore",value:function(e,t,n){var r,i=this._storage.getOriginData(e),o=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,l=this._dataHelper.where(i,a,o);if(l){var u;t&&(u=null==(r=this._dataHelper.where(i,t,o))?void 0:r.get(0));var c=l.toJSON(),s=null==u?void 0:u.toJSON();return this._storage.remove(e,l),s?this._storage.before(e,c,new bC(s)):this._storage.before(e,c),l}}},{key:"clear",value:function(e){this._storage.clear(e)}},{key:"destroy",value:function(){this._storage.destroy(),this._struct.destroy(),this._storage.clear()}}])}();WS([Yf(RC)],US.prototype,"_configuration",2),WS([jf()],US.prototype,"init",1),WS([Df()],US.prototype,"destroy",1),US=WS([Gf({token:sC})],US);var GS=ch().register(US),YS=function(e){return e.core="core",e.kernel="kernel",e.command="command",e.workbench="workbench",e.render="render",e}(YS||{}),$S=Rf.defineToken("LoggerToken"),qS=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,XS=function(e,t,n,r){for(var i,o=r>1?void 0:r?KS(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qS(t,n,o),o},JS="lakex_table_logs",ZS=function(){return ox((function e(){var t=this;rx(this,e),this._logs=[],this._save=rc((function(){var e;try{null==(e=window.localStorage)||e.setItem(JS,t.safeGetStorageValue())}catch(e){console.error(e)}}),300)}),[{key:"_init",value:function(){var e;this.configuration.registerConfiguration({id:"logger",type:"object",title:"日志",properties:{maxLen:{type:"number",description:"最大日志长度"}}}),this.configuration.registerDefaultValue({"logger.maxLen":200}),"undefined"!=typeof window?window.addEventListener("beforeunload",this._save):void 0!==ar&&ar.on("exit",this._save);var t=null==(e=window.localStorage)?void 0:e.getItem(JS);t&&(this._logs=JSON.parse(t))}},{key:"log",value:function(e){var t=this;e.time=a()().format("YYYY-MM-DD HH:mm:ss"),_x((function(){try{var n=t.configuration.getValue("logger.maxLen");t._logs=t._shiftLogs(t._logs,n),e.data&&(e.data=JSON.stringify(e.data)),t._logs.push(e),t._save()}catch(e){console.error(e)}}))}},{key:"_shiftLogs",value:function(e,t){return e.length>=t?(e.shift(),this._shiftLogs(e,t)):e}},{key:"getLogs",value:function(){return this._logs}},{key:"download",value:function(){var e=document.createElement("a");e.download="lakex_table_".concat((new Date).toISOString(),".json"),e.style.display="none",e.href=URL.createObjectURL(new Blob([JSON.stringify(Q_(this._logs))],{type:"application/json"})),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"safeGetStorageValue",value:function(){var e=JSON.stringify(this._logs);return e.length>=2621440?(this._logs=this._logs.map((function(e){return"kernelInited"===e.action&&(e.data=""),e})),JSON.stringify(this._logs)):e}},{key:"destroy",value:function(){this._save(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._save):void 0!==ar&&ar.off("exit",this._save)}}])}();XS([Yf(RC)],ZS.prototype,"configuration",2),XS([jf()],ZS.prototype,"_init",1),XS([Df()],ZS.prototype,"destroy",1),ZS=XS([Gf({token:$S})],ZS);var QS=ch().register(ZS),eO=Ap,tO=Rp;function nO(e,t,n){return t=DC(t),jC(e,rO()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function rO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rO=function(){return!!e})()}var iO=function(e){function t(){var e;return rx(this,t),(e=nO(this,t,arguments))._Plugin=new Map,e._unregisterToDestroy=new KC,e}return NC(t,e),ox(t,[{key:"registerPlugins",value:function(e,t){var n=this;Array.isArray(e)&&e.forEach((function(e){var r=e.pluginName;if(!r)throw new Error('static property "pluginName" in Plugin is required!'+e);if(n._Plugin.get(r))throw Error('Plugin "'.concat(r,'" has been registered'));if(!e.pluginModule)throw Error('static property "pluginModule" in Plugin is required!'+e);var i=e.pluginModule(),o=t.container.load(i);n._unregisterToDestroy.push({destroy:o.dispose}),n._Plugin.set(r,e)}))}},{key:"unregisterPlugins",value:function(e){this._Plugin.size&&(this._unregisterToDestroy.destroy(),this._Plugin.clear())}}])}(HC);function oO(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,i)}function aO(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){oO(o,r,i,a,l,"next",e)}function l(e){oO(o,r,i,a,l,"throw",e)}a(void 0)}))}}var lO,uO=Ax(navigator)?"":navigator.userAgent,cO=!Ax(window)&&window.h5,sO=void 0!==ar&&"string"==typeof ar.platform&&"number"==typeof ar.pid?ar:null,dO=/edge/i.test(uO),fO=!dO&&/chrome/i.test(uO),hO=/firefox/i.test(uO),pO=!dO&&!fO&&/safari/i.test(uO),vO=/dingtalk/i.test(uO),gO=/mobile/i.test(uO),mO=/os [._\d]+ like mac os/i.test(uO),yO={isAndroid:/android/i.test(uO),isIOS:mO,isMac:sO?"darwin"===sO.platform:!mO&&/mac os x/i.test(uO),isWin:sO?"win32"===sO.platform:/windows\s*(?:nt)?\s*[._\d]+/i.test(uO),isMobile:cO||gO},bO={isChrome:fO,isEdge:dO,isFirefox:hO,isSafari:pO,isDingtalk:vO},wO=function(){return ox((function e(){rx(this,e)}),null,[{key:"onBeforeUnLoad",value:function(e){return window.addEventListener("beforeunload",e),{destroy:function(){window.removeEventListener("beforeunload",e)}}}}])}(),_O=function(e){var t;return window.requestIdleCallback?t=requestIdleCallback(e):e(),function(){null!=t&&window.cancelIdleCallback(t)}},xO=function(e){return e.TEXT="text",e.NUMBER="number",e.SELECT="select",e.MULTI_SELECT="multiSelect",e.DATE="date",e.MENTION="mention",e.IMAGE="image",e.FILE="file",e.CHECKBOX="checkbox",e.LINK="link",e.EMAIL="email",e.PHONE="phone",e.CREATED_AT="createdAt",e.UPDATED_AT="updatedAt",e.USER_ID="userId",e.MODIFIER_ID="modifierId",e.TITLE="title",e.TEXTAREA="textarea",e.INPUT="input",e.RATE="rate",e.PROGRESS="progress",e}(xO||{}),kO=function(e){return e.STRING="string",e.NUMBER="number",e.SELECT="select",e.URI="uri",e.BOOLEAN="boolean",e.DATE="date",e.SYSTEM="system",e}(kO||{}),CO=(nx(nx(nx(nx(nx(nx(nx(nx(nx(nx(lO={},"text","string"),"email","string"),"phone","string"),"select","select"),"multiSelect","select"),"number","number"),"rate","number"),"progress","number"),"date","date"),"mention","uri"),nx(nx(nx(nx(nx(nx(nx(nx(lO,"image","uri"),"file","uri"),"link","uri"),"checkbox","boolean"),"createdAt","system"),"updatedAt","system"),"userId","system"),"modifierId","system"));Object.values(xO);var SO=[{name:"文本",type:xO.TEXT},{name:"单选",type:xO.SELECT,color:!0,options:[{name:"待开始",color:"#FBD3D0"},{name:"进行中",color:"#E4F7D2"},{name:"已完成",color:"#F7E9BC"}]},{name:"日期",type:xO.DATE}],OO=[{type:xO.TEXT,name:wx("文本")},{type:xO.NUMBER,name:wx("数字")},{type:xO.SELECT,name:wx("单选")},{type:xO.MULTI_SELECT,name:wx("多选")},{type:xO.DATE,name:wx("日期")},{type:xO.MENTION,name:wx("人员")},{type:xO.IMAGE,name:wx("图片"),disableGroup:!0,disableSort:!0},{type:xO.FILE,name:wx("附件"),disableGroup:!0,disableSort:!0},{type:xO.CHECKBOX,name:wx("复选框")},{type:xO.LINK,name:wx("链接")},{type:xO.EMAIL,name:wx("邮箱")},{type:xO.PHONE,name:wx("手机号码")},{type:xO.RATE,name:wx("评分")},{type:xO.PROGRESS,name:wx("进度")},{type:xO.USER_ID,name:wx("创建人"),isAdvanced:!0,disableForm:!0},{type:xO.CREATED_AT,name:wx("创建时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0},{type:xO.MODIFIER_ID,name:wx("修改人"),isAdvanced:!0,disableForm:!0},{type:xO.UPDATED_AT,name:wx("修改时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0}];function EO(e,t){var n={};OO.forEach((function(e){n[e.type]=e.name}));for(var r=n[e],i=t.map((function(e){return e.name})),o=1,a=r;i.includes(a);)a="".concat(r," ").concat(o),o+=1;return a}function IO(e){var t=OO.find((function(t){return t.type===e}));return(null==t?void 0:t.name)||""}Rf.defineToken("KernelModelToken");var PO,MO=function(e){return e[e.ACTIVE=0]="ACTIVE",e[e.INACTIVE=1]="INACTIVE",e}(MO||{}),RO=function(e){return e.equalTo="equalTo",e.notEqualTo="notEqualTo",e.greaterThan="greaterThan",e.greaterThanOrEqualTo="greaterThanOrEqualTo",e.lessThan="lessThan",e.lessThanOrEqualTo="lessThanOrEqualTo",e.isEmpty="isEmpty",e.isNotEmpty="isNotEmpty",e.startsWith="startsWith",e.notStartsWith="notStartsWith",e.endsWith="endsWith",e.notEndsWith="notEndsWith",e.contains="contains",e.notContains="notContains",e.yesterday="yesterday",e.today="today",e.tomorrow="tomorrow",e.last7days="last7days",e.lastWeek="lastWeek",e.thisWeek="thisWeek",e.nextWeek="nextWeek",e.lastMonth="lastMonth",e.thisMonth="thisMonth",e.nextMonth="nextMonth",e.is="is",e.isNot="isNot",e.isEmptySelect="isEmptySelect",e.isNotEmptySelect="isNotEmptySelect",e.isExactly="isExactly",e.hasAnyOf="hasAnyOf",e.hasAllOf="hasAllOf",e.hasNoneOf="hasNoneOf",e}(RO||{}),AO=function(e){return e.And="and",e.Or="or",e}(AO||{}),jO=function(e){return e.forward="forward",e.reverse="reverse",e}(jO||{}),DO=function(e){return e.Clip="clip",e.Fit="fit",e}(DO||{}),TO=function(e){return e.LOW="low",e.MIDDLE="middle",e.HIGH="high",e}(TO||{}),FO=function(e){return e.CUSTOM="custom",e.FOLLOW_FIELD="follow_field",e}(FO||{}),NO=function(e){return e.ASC="asc",e.DESC="desc",e}(NO||{}),LO=function(e){return e.ASC="asc",e.DESC="desc",e}(LO||{}),BO=[{type:"number",func:RO.equalTo,text:wx("等于")},{type:"number",func:RO.notEqualTo,text:wx("不等于")},{type:"number",func:RO.greaterThan,text:wx("大于")},{type:"number",func:RO.greaterThanOrEqualTo,text:wx("大于等于")},{type:"number",func:RO.lessThan,text:wx("小于")},{type:"number",func:RO.lessThanOrEqualTo,text:wx("小于等于")},{type:"number",func:RO.isEmpty,text:wx("为空")},{type:"number",func:RO.isNotEmpty,text:wx("非空")},{type:"text",func:RO.startsWith,text:wx("开头是")},{type:"text",func:RO.notStartsWith,text:wx("开头不是")},{type:"text",func:RO.endsWith,text:wx("结尾是")},{type:"text",func:RO.notEndsWith,text:wx("结尾不是")},{type:"text",func:RO.contains,text:wx("包含")},{type:"text",func:RO.notContains,text:wx("不包含")},{type:"text",func:RO.isEmpty,text:wx("为空")},{type:"text",func:RO.isNotEmpty,text:wx("非空")},{type:"timePeriod",func:RO.equalTo,text:wx("等于")},{type:"timePeriod",func:RO.lessThan,text:wx("早于")},{type:"timePeriod",func:RO.greaterThan,text:wx("晚于")},{type:"timePeriod",func:RO.isEmpty,text:wx("为空")},{type:"timePeriod",func:RO.isNotEmpty,text:wx("非空")},{type:"select",func:RO.is,text:wx("是")},{type:"select",func:RO.isNot,text:wx("不是")},{type:"select",func:RO.isEmptySelect,text:wx("为空")},{type:"select",func:RO.isNotEmptySelect,text:wx("非空")},{type:"multiSelect",func:RO.isExactly,text:wx("是")},{type:"multiSelect",func:RO.isNot,text:wx("不是")},{type:"multiSelect",func:RO.hasAnyOf,text:wx("包含一个")},{type:"multiSelect",func:RO.hasAllOf,text:wx("包含所有")},{type:"multiSelect",func:RO.hasNoneOf,text:wx("不包含")},{type:"multiSelect",func:RO.isEmptySelect,text:wx("为空")},{type:"multiSelect",func:RO.isNotEmptySelect,text:wx("非空")},{type:"checkbox",func:RO.equalTo,text:wx("等于")},{type:"file",func:RO.isEmpty,text:wx("为空")},{type:"file",func:RO.isNotEmpty,text:wx("非空")}],VO=(nx(nx(nx(nx(nx(nx(nx(nx(nx(nx(PO={},xO.TEXT,"text"),xO.LINK,"text"),xO.EMAIL,"text"),xO.PHONE,"text"),xO.DATE,"timePeriod"),xO.CREATED_AT,"timePeriod"),xO.UPDATED_AT,"timePeriod"),xO.NUMBER,"number"),xO.RATE,"number"),xO.PROGRESS,"number"),nx(nx(nx(nx(nx(nx(nx(nx(PO,xO.SELECT,"select"),xO.MULTI_SELECT,"multiSelect"),xO.MENTION,"multiSelect"),xO.USER_ID,"select"),xO.MODIFIER_ID,"select"),xO.CHECKBOX,"checkbox"),xO.IMAGE,"file"),xO.FILE,"file")),zO=["isEmpty","isNotEmpty","duplicate","unique","isEmptySelect","isNotEmptySelect"],HO=[{name:"custom",text:wx("具体日期")},{name:"today",text:wx("今天")},{name:"tomorrow",text:wx("明天")},{name:"yesterday",text:wx("昨天")},{name:"thisWeek",text:wx("本周")},{name:"lastWeek",text:wx("上周")},{name:"nextWeek",text:wx("下周")},{name:"lastMonth",text:wx("上月")},{name:"thisMonth",text:wx("本月")},{name:"nextMonth",text:wx("下月")},{name:"thisYear",text:wx("本年")},{name:"last7days",text:wx("过去7天内"),matchFuncs:[RO.equalTo]},{name:"next7days",text:wx("未来7天内"),matchFuncs:[RO.equalTo]},{name:"last30days",text:wx("过去30天内"),matchFuncs:[RO.equalTo]},{name:"next30days",text:wx("未来30天内"),matchFuncs:[RO.equalTo]}],WO=function(e){return e.GRID="GRID",e.CARD="CARD",e.KANBAN="KANBAN",e.FORM="FORM",e.CALENDAR="CALENDAR",e.CHART="CHART",e.TODO="TODO",e}(WO||{});Object.values(WO);var UO=nx(nx(nx(nx(nx(nx(nx({},"GRID",{type:"GRID",name:wx("表格视图")}),"CARD",{type:"CARD",name:wx("画册视图")}),"KANBAN",{type:"KANBAN",name:wx("看板视图")}),"FORM",{type:"FORM",name:wx("表单")}),"CALENDAR",{type:"CALENDAR",name:wx("日历视图")}),"CHART",{type:"CHART",name:wx("图表视图")}),"TODO",{type:"TODO",name:wx("待办视图")}),GO="__(empty)__",YO=function(){return ox((function e(){rx(this,e)}),null,[{key:"isBoolean",value:function(e){return e===xO.CHECKBOX}},{key:"isDate",value:function(e){return e===xO.DATE}},{key:"isDateLike",value:function(e){return e===xO.DATE||e===xO.UPDATED_AT||e===xO.CREATED_AT}},{key:"isSystemDate",value:function(e){return e===xO.CREATED_AT||e===xO.UPDATED_AT}},{key:"isNumberLike",value:function(e){return e===xO.NUMBER||e===xO.RATE||e===xO.PROGRESS}},{key:"isSelectLike",value:function(e){return e===xO.SELECT||e===xO.MULTI_SELECT}},{key:"isSelect",value:function(e){return e===xO.SELECT}},{key:"isMultiSelect",value:function(e){return e===xO.MULTI_SELECT}},{key:"isSystemType",value:function(e){return e===xO.CREATED_AT||e===xO.UPDATED_AT||e===xO.USER_ID||e===xO.MODIFIER_ID}},{key:"isSystemUser",value:function(e){return e===xO.USER_ID||e===xO.MODIFIER_ID}},{key:"isString",value:function(e){return e===xO.TEXT||e===xO.EMAIL||e===xO.PHONE}},{key:"isUri",value:function(e){return e===xO.IMAGE||e===xO.FILE||e===xO.MENTION||e===xO.LINK}},{key:"isLink",value:function(e){return e===xO.LINK}},{key:"isMultiple",value:function(e){return e===xO.MULTI_SELECT||e===xO.IMAGE||e===xO.FILE||e===xO.MENTION}},{key:"isMention",value:function(e){return e===xO.MENTION}},{key:"isMentionLike",value:function(e){return e===xO.MENTION||e===xO.USER_ID||e===xO.MODIFIER_ID}},{key:"isImage",value:function(e){return e===xO.IMAGE}},{key:"isCheckbox",value:function(e){return e===xO.CHECKBOX}},{key:"isGroup",value:function(e){return e===xO.TEXT||e===xO.NUMBER||e===xO.RATE||e===xO.PROGRESS||e===xO.SELECT||e===xO.MULTI_SELECT||e===xO.DATE||e===xO.MENTION||e===xO.CHECKBOX||e===xO.LINK||e===xO.EMAIL||e===xO.PHONE||e===xO.USER_ID||e===xO.MODIFIER_ID}},{key:"isSort",value:function(e){return e===xO.TEXT||e===xO.NUMBER||e===xO.RATE||e===xO.PROGRESS||e===xO.SELECT||e===xO.MULTI_SELECT||e===xO.DATE||e===xO.MENTION||e===xO.CHECKBOX||e===xO.LINK||e===xO.EMAIL||e===xO.PHONE||e===xO.USER_ID||e===xO.CREATED_AT||e===xO.MODIFIER_ID||e===xO.UPDATED_AT}},{key:"isFilter",value:function(e){return e===xO.TEXT||e===xO.NUMBER||e===xO.RATE||e===xO.PROGRESS||e===xO.SELECT||e===xO.MULTI_SELECT||e===xO.DATE||e===xO.MENTION||e===xO.IMAGE||e===xO.FILE||e===xO.CHECKBOX||e===xO.LINK||e===xO.EMAIL||e===xO.PHONE||e===xO.USER_ID||e===xO.CREATED_AT||e===xO.MODIFIER_ID||e===xO.UPDATED_AT}},{key:"getBaseType",value:function(e){return CO[e]}}])}(),$O=Rf.defineToken("DriverToken"),qO=function(e){return e.Pending="pending",e.Runing="Runing",e}(qO||{}),KO=Rf.defineToken("ModelEventToken"),XO=Rf.defineToken("ModelInitialToken"),JO=function(e){return e.SELECT="select",e.INSERT="insert",e.UPDATE="update",e.DELETE="remove",e.UPSERT="upsert",e.BULK_INSERT="bulkInsert",e.MOVE_BEFORE="moveBefore",e.MOVE_AFTER="moveAfter",e.INSERT_AFTER="insertAfter",e.INSERT_BEFORE="insertBefore",e}(JO||{}),ZO=Object.defineProperty,QO=Object.getOwnPropertyDescriptor,eE=function(e,t,n,r){for(var i,o=r>1?void 0:r?QO(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ZO(t,n,o),o},tE=function(){return ox((function e(){rx(this,e),this._status=qO.Pending,this._tableMap={}}),[{key:"initTable",value:function(e){this._tableMap[e.name]=e}},{key:"tables",get:function(){return Object.values(this._tableMap)}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.command===JO.SELECT)return this._read(e);if(e.command===JO.INSERT||e.command===JO.UPDATE||e.command===JO.UPSERT||e.command===JO.DELETE||e.command===JO.BULK_INSERT||e.command===JO.MOVE_AFTER||e.command===JO.MOVE_BEFORE||e.command===JO.INSERT_AFTER||e.command===JO.INSERT_BEFORE)return t.slient?this._modelEvent.emitChangeWithSilent({spell:e}):this._modelEvent.emitChange({spell:e}),this._modelEvent.emitChangeAllways({spell:e}),this._write(e);throw new Error("".concat(e.command," 指令没有实现驱动"))}},{key:"_read",value:function(e){var t=this._database.query(e.table,e.where);return this._parseRes(t)}},{key:"_write",value:function(e){var t=this._database[e.command](e.table,e.where,e.sets);return this._parseRes(t)}},{key:"_parseRes",value:function(e){var t=0;return e?{rows:e,rowCount:t=Array.isArray(e)?e.length:1}:{rows:new yC,rowCount:t}}}])}();eE([Yf(sC)],tE.prototype,"_database",2),eE([Yf(KO)],tE.prototype,"_modelEvent",2),tE=eE([Gf({token:$O})],tE);var nE=Rf.defineToken("ModelContribution");function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rE(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=t.constructor;r.columns||(r.columns={}),r.columns[n]=iE(iE({},e),{},{name:n})}}function aE(e,t){if(null!=e&&null!=t){for(var n in t){var r=e[n],i=t[n].defaultValue;void 0===r&&null!=i&&(e[n]=i)}return e}}function lE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uE(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function uE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cE(e,t){var n=e.Model,r={};for(var i in t){var o=n.columns[i],a=t[i];o&&(o.type?r[i]=o.type.toValue(a):r[i]=a)}return r}function sE(e,t){var n;if(Array.isArray(t)){n=[];var r,i=lE(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(cE(e,o))}}catch(e){i.e(e)}finally{i.f()}}else n=cE(e,t);return n}function dE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dE(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hE=function(){return ox((function e(t,n,r){rx(this,e),this.sets=[],this.groups=[],this.orders=[],this.offset=0,this.Model=t,this.table=t.table,this.command=JO.SELECT,this._driver=n,this._executeOpts=r}),[{key:"execute",value:function(){if(this._driver){var e=this._driver.execute(this.toObject(),this._executeOpts);return e=fE(fE({},e),{},{spell:this})}}},{key:"$insert",value:function(e){return this.command=JO.INSERT,this.sets=sE(this,e),this}},{key:"$update",value:function(e){return this.command=JO.UPDATE,this.sets=sE(this,e),this}},{key:"$upsert",value:function(e){return this.command=JO.UPSERT,this.sets=sE(this,e),this}},{key:"$delete",value:function(){return this.command=JO.DELETE,this}},{key:"$bulkInsert",value:function(e){return this.command=JO.BULK_INSERT,this.sets=sE(this,e),this}},{key:"$insertAfter",value:function(e){return this.command=JO.INSERT_AFTER,this.sets=sE(this,e),this}},{key:"$insertBefore",value:function(e){return this.command=JO.INSERT_BEFORE,this.sets=sE(this,e),this}},{key:"$moveAfter",value:function(e){return this.command=JO.MOVE_AFTER,this.sets=sE(this,e),this}},{key:"$moveBefore",value:function(e){return this.command=JO.MOVE_BEFORE,this.sets=sE(this,e),this}},{key:"$where",value:function(e){return this.where=e,this}},{key:"$offset",value:function(e){if(Number.isNaN(e))throw new Error("invalid offset ".concat(e));return this.offset=e,this}},{key:"$limit",value:function(e){if(Number.isNaN(e))throw new Error("invalid limit ".concat(e));return this.limit=e,this}},{key:"toObject",value:function(){return{table:this.table,command:this.command,where:this.where,sets:this.sets,offset:this.offset,limit:this.limit}}}])}();function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pE(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mE(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function mE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yE=function(){return ox((function e(t,n){rx(this,e),this.timestamps={updatedAt:"updated_at",createdAt:"created_at"},this.Model=t,this.driver=n}),[{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new hE(this.Model,this.driver);if(n.$where(e),t)for(var r=0,i=["order","limit","offset","select"];r<i.length;r++){var o=i[r],a=t[o];null!=a&&n["$".concat(o)](a)}var l=n.execute();return(null==l?void 0:l.rows)&&0!==l.rows.length?l.rows:new yC}},{key:"findOne",value:function(e){var t=this.find(e);return t&&t.get(0)?t.get(0):null}},{key:"findById",value:function(e){var t={uuid:e},n=this.find(t);return n&&n.get(0)?n.get(0):null}},{key:"remove",value:function(e){return new hE(this.Model,this.driver).$where(e).$delete().execute().affectedRows}},{key:"update",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.timestamps.updatedAt,o=Object.assign({},n);return!(null==(t=this.Model.columns)?void 0:t[i])||o[i]||r.silent||(o[i]=+new Date),new hE(this.Model,this.driver,r).$where(e).$update(o).execute().rows}},{key:"upsert",value:function(e,t,n){var r,i=this.timestamps.updatedAt,o=Object.assign({},t);(null==(r=this.Model.columns)?void 0:r[i])&&!o[i]&&(o[i]=+new Date);var a=new hE(this.Model,this.driver,n).$where(e).$upsert(o).execute();return null==a?void 0:a.rows}},{key:"bulkCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.length)return e;var n,r=this.columns,i=this.timestamps,o=i.createdAt,a=i.updatedAt,l=new Date,u=gE(e);try{for(u.s();!(n=u.n()).done;){var c=n.value;o&&(c[o]=+l),a&&(c[a]=+l),aE(c,r)}}catch(e){u.e(e)}finally{u.f()}return t=vE(vE({},t),{},{columns:r}),new hE(this.Model,this.driver).$bulkInsert(e).execute(),e}},{key:"moveAfter",value:function(e,t){return t=Object.assign({},t),new hE(this.Model,this.driver).$where(e).$moveAfter(t).execute().rows}},{key:"moveBefore",value:function(e,t){return t=Object.assign({},t),new hE(this.Model,this.driver).$where(e).$moveBefore(t).execute().rows}},{key:"create",value:function(e){var t=new hE(this.Model,this.driver).$insert(this._getCreateValue(e)).execute();return this.findOne({uuid:t.rows.uuid}).toJSON()}},{key:"createAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new hE(this.Model,this.driver).$where(e).$insertAfter(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"createBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new hE(this.Model,this.driver).$where(e).$insertBefore(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"_getCreateValue",value:function(e){var t=this.Model.columns,n=this.timestamps,r=n.createdAt,i=n.updatedAt,o={},a=new Date;for(var l in(null==t?void 0:t[r])&&(this[r]=+a),(null==t?void 0:t[i])&&(this[i]=+a),t){var u=e[l],c=t[l].defaultValue;null!=u?o[l]=u:void 0===u&&null!=c&&(o[l]=c)}return o}}])}();function bE(e,t,n){return t=DC(t),jC(e,wE()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function wE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wE=function(){return!!e})()}var _E=Object.defineProperty,xE=Object.getOwnPropertyDescriptor,kE=function(e,t,n,r){for(var i,o=r>1?void 0:r?xE(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_E(t,n,o),o},CE=function(e){function t(){var e;return rx(this,t),(e=bE(this,t,arguments))._onChange=e._register(new dS),e.onChange=e._onChange.event,e.emitChange=function(t){_x((function(){e._onChange.emit(t)}))},e._onChangeWithSlient=e._register(new dS),e.onChangeWithSlient=e._onChange.event,e.emitChangeWithSilent=function(t){_x((function(){e._onChangeWithSlient.emit(t)}))},e._onChangeAllways=e._register(new dS),e.onChangeAllways=e._onChange.event,e.emitChangeAllways=function(t){_x((function(){e._onChangeAllways.emit(t)}))},e}return NC(t,e),ox(t,[{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function SE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return OE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OE(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function OE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}kE([Df()],CE.prototype,"destroy",1),CE=kE([Gf({token:KO})],CE);var EE=Object.defineProperty,IE=Object.getOwnPropertyDescriptor,PE=function(e,t,n,r){for(var i,o=r>1?void 0:r?IE(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&EE(t,n,o),o},ME=function(){return ox((function e(){rx(this,e),this._modelMap=new Map}),[{key:"init",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=SE(this._modelProvider.getContributions());try{for(n.s();!(e=n.n()).done;){var r=e.value;try{r.registerModel&&t.push(r.registerModel()),r.registerModels&&(t=t.concat(r.registerModels()))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}var i,o=SE(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._initTable(a),this._modelMap.set(a.table,a)}}catch(e){o.e(e)}finally{o.f()}}},{key:"getModel",value:function(e){return this._modelMap.get(e)}},{key:"_initTable",value:function(e){if(!e.table)throw new Error("Model must have a name");var t=e.columns||{};t.uuid={name:"uuid"},t.created_at={name:"created_at"},t.updated_at={name:"updated_at"};var n=Object.keys(t).map((function(e){return t[e]}));return this._driver.initTable({name:e.table,indexes:e.indexes,columns:n}),this._database.setTable(e.table,n,e.indexes),this}}])}();PE([gh(nE)],ME.prototype,"_modelProvider",2),PE([Yf($O)],ME.prototype,"_driver",2),PE([Yf(sC)],ME.prototype,"_database",2),ME=PE([Gf()],ME);var RE=Object.defineProperty,AE=Object.getOwnPropertyDescriptor,jE=function(e,t,n,r){for(var i,o=r>1?void 0:r?AE(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&RE(t,n,o),o},DE=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this._configuration.registerConfiguration({id:"model",type:"object",title:"数据模型",properties:{frozenTable:{type:"array",description:"固化表，普通刷新不清空内容"}}}),this._modelRegistry.init(null==e?void 0:e.models)}}])}();jE([Yf(RC)],DE.prototype,"_configuration",2),jE([Yf(ME)],DE.prototype,"_modelRegistry",2),DE=jE([Gf({token:XO})],DE);var TE=Object.defineProperty,FE=Object.getOwnPropertyDescriptor,NE=function(e,t,n,r){for(var i,o=r>1?void 0:r?FE(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&TE(t,n,o),o},LE=function(){return ox((function e(){rx(this,e)}),[{key:"getModel",value:function(e){var t=this._modelRegistry.getModel(e);return new yE(t,this._driver)}}])}();NE([Yf(ME)],LE.prototype,"_modelRegistry",2),NE([Yf($O)],LE.prototype,"_driver",2),LE=NE([Gf()],LE);var BE=ox((function e(){rx(this,e)})),VE=ch().contribution(nE).register(tE).register(CE).register(DE).register(LE).register(ME);function zE(e,t,n){return t=DC(t),jC(e,HE()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function HE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HE=function(){return!!e})()}var WE=Object.defineProperty,UE=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&WE(t,n,o),o},GE=function(e){function t(){return rx(this,t),zE(this,t,arguments)}return NC(t,e),ox(t)}(BE);function YE(e,t,n){return t=DC(t),jC(e,$E()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($E=function(){return!!e})()}GE.table="field_boolean",GE.indexes=["field_uuid","record_uuid"],GE.ignoreColumns=["uuid"],UE([oE()],GE.prototype,"field_uuid"),UE([oE()],GE.prototype,"record_uuid"),UE([oE()],GE.prototype,"value");var qE=Object.defineProperty,KE=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&qE(t,n,o),o},XE=function(e){function t(){return rx(this,t),YE(this,t,arguments)}return NC(t,e),ox(t)}(BE);function JE(e,t,n){return t=DC(t),jC(e,ZE()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ZE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZE=function(){return!!e})()}XE.table="field_date",XE.indexes=["field_uuid","record_uuid"],XE.ignoreColumns=["uuid"],KE([oE()],XE.prototype,"field_uuid"),KE([oE()],XE.prototype,"record_uuid"),KE([oE()],XE.prototype,"value");var QE=Object.defineProperty,eI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&QE(t,n,o),o},tI=function(e){function t(){return rx(this,t),JE(this,t,arguments)}return NC(t,e),ox(t)}(BE);function nI(e,t,n){return t=DC(t),jC(e,rI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function rI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rI=function(){return!!e})()}tI.table="field",tI.indexes=["uuid"],eI([oE()],tI.prototype,"name"),eI([oE()],tI.prototype,"type"),eI([oE()],tI.prototype,"sub_type"),eI([oE()],tI.prototype,"color"),eI([oE()],tI.prototype,"multiple"),eI([oE()],tI.prototype,"config");var iI=Object.defineProperty,oI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&iI(t,n,o),o},aI=function(e){function t(){return rx(this,t),nI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function lI(e,t,n){return t=DC(t),jC(e,uI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function uI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uI=function(){return!!e})()}aI.table="field_number",aI.indexes=["field_uuid","record_uuid"],aI.ignoreColumns=["uuid"],oI([oE()],aI.prototype,"field_uuid"),oI([oE()],aI.prototype,"record_uuid"),oI([oE()],aI.prototype,"value"),oI([oE()],aI.prototype,"format");var cI=Object.defineProperty,sI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&cI(t,n,o),o},dI=function(e){function t(){return rx(this,t),lI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function fI(e,t,n){return t=DC(t),jC(e,hI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function hI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hI=function(){return!!e})()}dI.table="field_option",dI.indexes=["field_uuid"],dI.MAX_LENGTH=128,sI([oE()],dI.prototype,"field_uuid"),sI([oE()],dI.prototype,"name"),sI([oE()],dI.prototype,"color"),sI([oE()],dI.prototype,"temp");var pI=Object.defineProperty,vI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&pI(t,n,o),o},gI=function(e){function t(){return rx(this,t),fI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function mI(e,t,n){return t=DC(t),jC(e,yI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function yI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yI=function(){return!!e})()}gI.table="field_select",gI.indexes=["field_uuid","record_uuid"],gI.ignoreColumns=["uuid"],vI([oE()],gI.prototype,"field_uuid"),vI([oE()],gI.prototype,"record_uuid"),vI([oE()],gI.prototype,"value");var bI=Object.defineProperty,wI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&bI(t,n,o),o},_I=function(e){function t(){return rx(this,t),mI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function xI(e,t,n){return t=DC(t),jC(e,kI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function kI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kI=function(){return!!e})()}_I.table="field_string",_I.indexes=["field_uuid","record_uuid"],_I.ignoreColumns=["uuid"],wI([oE()],_I.prototype,"field_uuid"),wI([oE()],_I.prototype,"record_uuid"),wI([oE()],_I.prototype,"value"),wI([oE()],_I.prototype,"updated_at"),wI([oE()],_I.prototype,"created_at");var CI=Object.defineProperty,SI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&CI(t,n,o),o},OI=function(e){function t(){return rx(this,t),xI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function EI(e,t,n){return t=DC(t),jC(e,II()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function II(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(II=function(){return!!e})()}OI.table="field_uri",OI.indexes=["field_uuid","record_uuid"],OI.ignoreColumns=["uuid"],SI([oE()],OI.prototype,"field_uuid"),SI([oE()],OI.prototype,"record_uuid"),SI([oE()],OI.prototype,"uid"),SI([oE()],OI.prototype,"name"),SI([oE()],OI.prototype,"src"),SI([oE()],OI.prototype,"size"),SI([oE()],OI.prototype,"mime"),SI([oE()],OI.prototype,"icon"),SI([oE()],OI.prototype,"width"),SI([oE()],OI.prototype,"height");var PI=Object.defineProperty,MI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&PI(t,n,o),o},RI=function(e){function t(){return rx(this,t),EI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function AI(e,t,n){return t=DC(t),jC(e,jI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function jI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jI=function(){return!!e})()}RI.table="filter_thing",RI.indexes=["view_uuid"],MI([oE()],RI.prototype,"packet_uuid"),MI([oE()],RI.prototype,"view_uuid"),MI([oE()],RI.prototype,"field_uuid"),MI([oE()],RI.prototype,"func"),MI([oE()],RI.prototype,"expected");var DI=Object.defineProperty,TI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&DI(t,n,o),o},FI=function(e){function t(){return rx(this,t),AI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function NI(e,t,n){return t=DC(t),jC(e,LI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function LI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(LI=function(){return!!e})()}FI.table="filter_packet",FI.indexes=["view_uuid"],TI([oE()],FI.prototype,"type"),TI([oE()],FI.prototype,"parent_uuid"),TI([oE()],FI.prototype,"root_uuid"),TI([oE()],FI.prototype,"view_uuid"),TI([oE()],FI.prototype,"operator");var BI=Object.defineProperty,VI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&BI(t,n,o),o},zI=function(e){function t(){return rx(this,t),NI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function HI(e,t,n){return t=DC(t),jC(e,WI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function WI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WI=function(){return!!e})()}zI.table="group",zI.indexes=["view_uuid"],VI([oE()],zI.prototype,"view_uuid"),VI([oE()],zI.prototype,"field_uuid"),VI([oE()],zI.prototype,"type");var UI=Object.defineProperty,GI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&UI(t,n,o),o},YI=function(e){function t(){return rx(this,t),HI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function $I(e,t,n){return t=DC(t),jC(e,qI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function qI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qI=function(){return!!e})()}YI.table="group_item",YI.indexes=["view_uuid","field_uuid"],GI([oE()],YI.prototype,"view_uuid"),GI([oE()],YI.prototype,"field_uuid"),GI([oE()],YI.prototype,"key"),GI([oE()],YI.prototype,"collapse"),GI([oE()],YI.prototype,"pagination_total"),GI([oE()],YI.prototype,"pagination_count"),GI([oE()],YI.prototype,"pagination_current"),GI([oE()],YI.prototype,"pagination_page_size"),GI([oE()],YI.prototype,"pagination_loaded"),GI([oE()],YI.prototype,"pagination_start_index");var KI=Object.defineProperty,XI=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&KI(t,n,o),o},JI=function(e){function t(){return rx(this,t),$I(this,t,arguments)}return NC(t,e),ox(t)}(BE);function ZI(e,t,n){return t=DC(t),jC(e,QI()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function QI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QI=function(){return!!e})()}JI.table="record",JI.indexes=["uuid"],XI([oE()],JI.prototype,"id"),XI([oE()],JI.prototype,"desc"),XI([oE()],JI.prototype,"creator_id"),XI([oE()],JI.prototype,"modifier_id");var eP=Object.defineProperty,tP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&eP(t,n,o),o},nP=function(e){function t(){return rx(this,t),ZI(this,t,arguments)}return NC(t,e),ox(t)}(BE);function rP(e,t,n){return t=DC(t),jC(e,iP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function iP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iP=function(){return!!e})()}nP.table="sort",nP.indexes=["view_uuid"],tP([oE()],nP.prototype,"view_uuid"),tP([oE()],nP.prototype,"field_uuid"),tP([oE()],nP.prototype,"type");var oP=Object.defineProperty,aP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&oP(t,n,o),o},lP=function(e){function t(){return rx(this,t),rP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function uP(e,t,n){return t=DC(t),jC(e,cP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function cP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cP=function(){return!!e})()}lP.table="stat",lP.indexes=["view_uuid","field_uuid"],aP([oE()],lP.prototype,"view_uuid"),aP([oE()],lP.prototype,"field_uuid"),aP([oE()],lP.prototype,"type");var sP=Object.defineProperty,dP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&sP(t,n,o),o},fP=function(e){function t(){return rx(this,t),uP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function hP(e,t,n){return t=DC(t),jC(e,pP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function pP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pP=function(){return!!e})()}fP.table="table",dP([oE()],fP.prototype,"version"),dP([oE()],fP.prototype,"active_view_uuid");var vP=Object.defineProperty,gP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&vP(t,n,o),o},mP=function(e){function t(){return rx(this,t),hP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function yP(e,t,n){return t=DC(t),jC(e,bP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function bP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bP=function(){return!!e})()}mP.table="user",mP.indexes=["uid"],gP([oE()],mP.prototype,"uid"),gP([oE()],mP.prototype,"login"),gP([oE()],mP.prototype,"work_id"),gP([oE()],mP.prototype,"name"),gP([oE()],mP.prototype,"icon");var wP=Object.defineProperty,_P=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&wP(t,n,o),o},xP=function(e){function t(){return rx(this,t),yP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function kP(e,t,n){return t=DC(t),jC(e,CP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function CP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CP=function(){return!!e})()}xP.table="view_config",xP.indexes=["view_uuid"],_P([oE()],xP.prototype,"view_uuid"),_P([oE()],xP.prototype,"cover_field_uuid"),_P([oE()],xP.prototype,"cover_display"),_P([oE()],xP.prototype,"show_field_name"),_P([oE()],xP.prototype,"keep_sort"),_P([oE()],xP.prototype,"frozen_field"),_P([oE()],xP.prototype,"record_height"),_P([oE()],xP.prototype,"start_date_field_uuid"),_P([oE()],xP.prototype,"end_date_field_uuid"),_P([oE()],xP.prototype,"active_date"),_P([oE()],xP.prototype,"date_title_field_uuid"),_P([oE()],xP.prototype,"show_lunar"),_P([oE()],xP.prototype,"sunday_at_first"),_P([oE()],xP.prototype,"date_color_type"),_P([oE()],xP.prototype,"date_color"),_P([oE()],xP.prototype,"charts"),_P([oE()],xP.prototype,"highlight_same_fields"),_P([oE()],xP.prototype,"pagination_total"),_P([oE()],xP.prototype,"pagination_current"),_P([oE()],xP.prototype,"pagination_page_size"),_P([oE()],xP.prototype,"pagination_loaded"),_P([oE()],xP.prototype,"text_colors"),_P([oE()],xP.prototype,"todo_title_field_uuid"),_P([oE()],xP.prototype,"todo_remark_field_uuid"),_P([oE()],xP.prototype,"todo_priority_field_uuid"),_P([oE()],xP.prototype,"todo_done_field_uuid"),_P([oE()],xP.prototype,"todo_day_field_uuid"),_P([oE()],xP.prototype,"todo_time_field_uuid");var SP=Object.defineProperty,OP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&SP(t,n,o),o},EP=function(e){function t(){return rx(this,t),kP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function IP(e,t,n){return t=DC(t),jC(e,PP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function PP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PP=function(){return!!e})()}EP.table="view_field",EP.indexes=["view_uuid"],OP([oE()],EP.prototype,"view_uuid"),OP([oE()],EP.prototype,"field_uuid"),OP([oE()],EP.prototype,"group_uuid"),OP([oE()],EP.prototype,"name"),OP([oE()],EP.prototype,"size"),OP([oE()],EP.prototype,"display_type"),OP([oE()],EP.prototype,"required"),OP([oE()],EP.prototype,"hidden");var MP=Object.defineProperty,RP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&MP(t,n,o),o},AP=function(e){function t(){return rx(this,t),IP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function jP(e,t,n){return t=DC(t),jC(e,DP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function DP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DP=function(){return!!e})()}AP.table="view",RP([oE()],AP.prototype,"id"),RP([oE()],AP.prototype,"type"),RP([oE()],AP.prototype,"name"),RP([oE()],AP.prototype,"desc"),RP([oE()],AP.prototype,"creator_id"),RP([oE()],AP.prototype,"modifier_id");var TP=Object.defineProperty,FP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&TP(t,n,o),o},NP=function(e){function t(){return rx(this,t),jP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function LP(e,t,n){return t=DC(t),jC(e,BP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function BP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BP=function(){return!!e})()}NP.table="view_record",NP.indexes=["view_uuid"],FP([oE()],NP.prototype,"view_uuid"),FP([oE()],NP.prototype,"record_uuid"),FP([oE()],NP.prototype,"group_item_key"),FP([oE()],NP.prototype,"hidden");var VP=Object.defineProperty,zP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&VP(t,n,o),o},HP=function(e){function t(){return rx(this,t),LP(this,t,arguments)}return NC(t,e),ox(t)}(BE);function WP(e,t,n){return t=DC(t),jC(e,UP()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UP=function(){return!!e})()}HP.table="view_share",HP.indexes=["view_uuid"],zP([oE()],HP.prototype,"view_uuid"),zP([oE()],HP.prototype,"src"),zP([oE()],HP.prototype,"status");var GP=Object.defineProperty,YP=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&GP(t,n,o),o},$P=function(e){function t(){return rx(this,t),WP(this,t,arguments)}return NC(t,e),ox(t)}(BE);$P.table="cell",$P.indexes=["field_uuid","record_uuid"],$P.ignoreColumns=["uuid"],YP([oE()],$P.prototype,"field_uuid"),YP([oE()],$P.prototype,"field_type"),YP([oE()],$P.prototype,"record_uuid"),YP([oE()],$P.prototype,"format_value"),YP([oE()],$P.prototype,"key_value"),YP([oE()],$P.prototype,"verify"),YP([oE()],$P.prototype,"verify_message"),YP([oE()],$P.prototype,"by_system");var qP=Object.defineProperty,KP=Object.getOwnPropertyDescriptor,XP=function(e,t,n,r){for(var i,o=r>1?void 0:r?KP(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qP(t,n,o),o},JP=function(){return ox((function e(){rx(this,e)}),[{key:"cellModel",get:function(){return this._modelService.getModel($P.table)}},{key:"fieldBooleanModel",get:function(){return this._modelService.getModel(GE.table)}},{key:"fieldDateModel",get:function(){return this._modelService.getModel(XE.table)}},{key:"fieldModel",get:function(){return this._modelService.getModel(tI.table)}},{key:"fieldNumberModel",get:function(){return this._modelService.getModel(aI.table)}},{key:"fieldOptionModel",get:function(){return this._modelService.getModel(dI.table)}},{key:"fieldSelectModel",get:function(){return this._modelService.getModel(gI.table)}},{key:"fieldStringModel",get:function(){return this._modelService.getModel(_I.table)}},{key:"fieldUriModel",get:function(){return this._modelService.getModel(OI.table)}},{key:"filterThingModel",get:function(){return this._modelService.getModel(RI.table)}},{key:"filterPacketModel",get:function(){return this._modelService.getModel(FI.table)}},{key:"groupModel",get:function(){return this._modelService.getModel(zI.table)}},{key:"groupItemModel",get:function(){return this._modelService.getModel(YI.table)}},{key:"recordModel",get:function(){return this._modelService.getModel(JI.table)}},{key:"sortModel",get:function(){return this._modelService.getModel(nP.table)}},{key:"statModel",get:function(){return this._modelService.getModel(lP.table)}},{key:"tableModel",get:function(){return this._modelService.getModel(fP.table)}},{key:"userModel",get:function(){return this._modelService.getModel(mP.table)}},{key:"viewConfigModel",get:function(){return this._modelService.getModel(xP.table)}},{key:"viewFieldModel",get:function(){return this._modelService.getModel(EP.table)}},{key:"viewModel",get:function(){return this._modelService.getModel(AP.table)}},{key:"viewRecordModel",get:function(){return this._modelService.getModel(NP.table)}},{key:"viewShareModel",get:function(){return this._modelService.getModel(HP.table)}}])}();XP([Yf(LE)],JP.prototype,"_modelService",2),JP=XP([Gf()],JP);var ZP=Object.defineProperty,QP=Object.getOwnPropertyDescriptor,eM=function(){return ox((function e(){rx(this,e)}),[{key:"currentUser",get:function(){return this._user}},{key:"setCurrentUser",value:function(e){e.uuid||(e.uuid=e.uid),this._user=e}}])}();function tM(e,t,n){return t=DC(t),jC(e,nM()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function nM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nM=function(){return!!e})()}eM=function(e,t,n,r){for(var i,o=r>1?void 0:r?QP(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ZP(t,n,o),o}([Gf()],eM);var rM=Object.defineProperty,iM=Object.getOwnPropertyDescriptor,oM=function(e,t,n,r){for(var i,o=r>1?void 0:r?iM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rM(t,n,o),o},aM=function(e){function t(){var e;return rx(this,t),(e=tM(this,t,arguments))._onCellChange=e._register(new dS),e.onCellChange=e._onCellChange.event,e}return NC(t,e),ox(t,[{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);oM([Df()],aM.prototype,"destroy",1),aM=oM([Gf()],aM);var lM=Object.defineProperty,uM=Object.getOwnPropertyDescriptor,cM=function(){return ox((function e(){rx(this,e),this._fieldMap=new Map}),[{key:"registerField",value:function(e){this._fieldMap.set(e.type,e)}},{key:"getValueModel",value:function(e){var t;return null==(t=this.getValueField(e))?void 0:t.model}},{key:"getValueField",value:function(e){return this._fieldMap.get(e)}}])}();function sM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function dM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}cM=function(e,t,n,r){for(var i,o=r>1?void 0:r?uM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lM(t,n,o),o}([Gf()],cM);var fM=Object.defineProperty,hM=Object.getOwnPropertyDescriptor,pM=function(e,t,n,r){for(var i,o=r>1?void 0:r?hM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fM(t,n,o),o},vM=function(){return ox((function e(){rx(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this.getCell(e,t)})}},{key:"setCell",value:function(e,t,n){var r,i,o=n.fieldType,a=this._model.fieldModel.findById(e),l=null==a?void 0:a.get("config");o||(o=null==a?void 0:a.get("type")),null==(i=null==(r=this._fieldRegistry.getValueField(o))?void 0:r.setCell)||i.call(r,e,t,n,l),this.updateRecord(t),this._notifyCellChange(e,t)}},{key:"bulkSetCell",value:function(e){var t,n,r=this;if(0!==e.length){var i=e[0].fieldType,o=e[0].fieldId,a=this._model.fieldModel.findById(o),l=null==a?void 0:a.get("config");i||(i=null==a?void 0:a.get("type")),null==(n=null==(t=this._fieldRegistry.getValueField(i))?void 0:t.bulkSetCell)||n.call(t,e,l),e.forEach((function(e){r.updateRecord(e.recordId),r._notifyCellChange(e.fieldId,e.recordId)}))}}},{key:"updateRecord",value:function(e){var t=this._model.fieldModel.find({type:xO.UPDATED_AT});if(t.length>0){var n,r=sM(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.updateRecordUpdatedAt(i.get("uuid"),e)}}catch(e){r.e(e)}finally{r.f()}}var o=this._model.fieldModel.find({type:xO.MODIFIER_ID});if(o.length>0){var a,l=sM(o);try{for(l.s();!(a=l.n()).done;){var u=a.value;this.updateRecordModifierId(u.get("uuid"),e)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"updateRecordUpdatedAt",value:function(e,t){this._model.recordModel.update({uuid:t},{updated_at:+new Date}),this._notifyCellChange(e,t)}},{key:"updateRecordModifierId",value:function(e,t){var n;this._model.recordModel.update({uuid:t},{modifier_id:null==(n=this._contextService.currentUser)?void 0:n.uid}),this._notifyCellChange(e,t)}},{key:"removeByRecordId",value:function(e,t){var n;if(0!==(n=t?this._model.fieldModel.find({uuid:t}):this._model.fieldModel.find()).length){var r=[];if(e)Array.isArray(e)?r=e:r.push(e);else r=OC(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var i,o=sM(n);try{for(o.s();!(i=o.n()).done;){var a=i.value,l=this._fieldRegistry.getValueModel(a.get("type"));if(!l)return;var u={field_uuid:a.get("uuid"),record_uuid:r};l.remove(u),this._model.cellModel.remove(u)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"refreshCells",value:function(){var e,t=this._model.fieldModel.find(),n=this._model.recordModel.find(),r=sM(t);try{for(r.s();!(e=r.n()).done;){var i,o=e.value,a=o.get("uuid"),l=o.get("type")===xO.DATE?null==o?void 0:o.get("config"):null==o?void 0:o.get("options"),u=sM(n);try{for(u.s();!(i=u.n()).done;){var c=i.value.get("uuid");this._model.cellModel.upsert({field_uuid:a,record_uuid:c},{field_uuid:a,record_uuid:c,field_type:o.get("type"),format_value:this.getCellFormattedValue(a,c,l),key_value:this.getCellKeyValue(a,c)})}}catch(e){u.e(e)}finally{u.f()}}}catch(e){r.e(e)}finally{r.f()}}},{key:"getFieldCells",value:function(e){if(!this._model.fieldModel.findById(e))return[];var t,n=[],r=sM(this._model.recordModel.find());try{for(r.s();!(t=r.n()).done;){var i=t.value,o=this.getCell(e,i.get("uuid"));o&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getFieldFormatValues",value:function(e,t){var n,r,i,o,a,l,u,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("type"),h=f===xO.DATE?null==d?void 0:d.get("config"):null==d?void 0:d.get("options");if(!f)return[];t=t||OC(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var p=this._fieldRegistry.getValueField(f);if(!p)return[];var v,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=p.model)?void 0:n.find({field_uuid:e}),y=SC(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?SC(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=sM(t);try{var x=function(){var t=v.value;if(YO.isSystemType(f))w.push({recordId:t,formatValue:s.getCellFormattedValue(e,t,h)});else if(y[t])w.push({recordId:t,formatValue:null==(r=y[t])?void 0:r.get("format_value")});else{var n=YO.isMultiple(f)?YO.isMultiSelect(f)?null==(i=b[t])?void 0:i.map((function(e){return e.get("value")})):null==(o=b[t])?void 0:o.map((function(e){return e.toJSON()})):YO.isUri(f)?null==(l=null==(a=b[t])?void 0:a[0])?void 0:l.toJSON():null==(c=null==(u=b[t])?void 0:u[0])?void 0:c.get("value");w.push({recordId:t,formatValue:null==p?void 0:p.formatted(n,void 0,h)}),_x((function(){var r;null==(r=p.upsertModelCell)||r.call(p,e,t,n,!0,h)}))}};for(_.s();!(v=_.n()).done;)x()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getFieldKeyValues",value:function(e,t){var n,r,i,o,a,l,u,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("type"),h=null==d?void 0:d.get("config");if(!f)return[];t=t||OC(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var p=this._fieldRegistry.getValueField(f);if(!p)return[];var v,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=p.model)?void 0:n.find({field_uuid:e}),y=SC(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?SC(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=sM(t);try{var x=function(){var t=v.value;if(YO.isSystemType(f))w.push({recordId:t,keyValue:s.getCellKeyValue(e,t)});else if(y[t])w.push({recordId:t,keyValue:null==(r=y[t])?void 0:r.get("key_value")});else{var n=YO.isMultiple(f)?YO.isMultiSelect(f)?null==(i=b[t])?void 0:i.map((function(e){return e.get("value")})):null==(o=b[t])?void 0:o.map((function(e){return e.toJSON()})):YO.isUri(f)?null==(l=null==(a=b[t])?void 0:a[0])?void 0:l.toJSON():null==(c=null==(u=b[t])?void 0:u[0])?void 0:c.get("value");w.push({recordId:t,keyValue:null==p?void 0:p.keyValue(n)}),_x((function(){var r;null==(r=p.upsertModelCell)||r.call(p,e,t,n,!0,h)}))}};for(_.s();!(v=_.n()).done;)x()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getViewRecordCells",value:function(e,t){var n,r,i=this;if(null==t&&(t=e,e=null),!this._model.recordModel.findById(t))return new yC;var o=new yC,a={},l=function(e){if(a[e])return a[e];var t=i._model.fieldModel.findById(e),n=null==t?void 0:t.get("type");if(n){var r=i._fieldRegistry.getValueField(n);return a[e]=r,r}};if(e){var u,c=sM(this._model.viewFieldModel.find({view_uuid:e}));try{for(c.s();!(u=c.n()).done;){var s=u.value;if(!s.get("hidden")){var d=s.get("field_uuid"),f=this._model.fieldModel.findById(d),h=null==f?void 0:f.get("config"),p=null==(n=l(d))?void 0:n.getCell(d,t,h);p&&o.push([p])}}}catch(e){c.e(e)}finally{c.f()}}else{var v,g=sM(this._model.viewFieldModel.find());try{for(g.s();!(v=g.n()).done;){var m=v.value.get("field_uuid"),y=this._model.fieldModel.findById(m),b=null==y?void 0:y.get("config"),w=null==(r=l(m))?void 0:r.getCell(m,t,b);w&&o.push([w])}}catch(e){g.e(e)}finally{g.f()}}return o}},{key:"getRecordCells",value:function(e){if(!this._model.recordModel.findById(e))return new yC;var t,n=this._model.fieldModel.find(),r=new yC,i=sM(n);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=this.getCell(o.get("uuid"),e);a&&r.push([a])}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"getCell",value:function(e,t){var n=this._model.fieldModel.findById(e),r=null==n?void 0:n.get("type");if(!r)return null;var i=this._fieldRegistry.getValueField(r),o=null==n?void 0:n.get("config");return null==i?void 0:i.getCell(e,t,o)}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this._model.fieldModel.findById(e);if(!r)return"";var i=this._fieldRegistry.getValueField(r.get("type"));return i?i.getCellFormattedValue(e,t,n):""}},{key:"getCellKeyValue",value:function(e,t){var n=this._model.fieldModel.findById(e);if(!n)return null;var r=this._fieldRegistry.getValueField(n.get("type"));if(!r)return null;var i=null==n?void 0:n.get("config");return r.getCellKeyValue(e,t,i)}},{key:"keyValue",value:function(e){if(!e||!(null==e?void 0:e.value))return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return null==n?void 0:n.keyValue(e.value)}},{key:"groupValue",value:function(e){if(!e||!(null==e?void 0:e.value))return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return this.toGroupValue(t,n,e.value)}},{key:"toGroupValue",value:function(e,t,n){var r;return r=e.get("type")===xO.DATE?null==t?void 0:t.formatted(n,e.get("uuid"),e.get("config")):null==t?void 0:t.keyValue(n),"".concat(e.get("uuid"),":").concat(r)}},{key:"copy",value:function(e,t,n,r){var i=this.getCell(e,t);i&&this.setCell(n,r,i)}},{key:"updateOrder",value:function(e){var t=e.fieldId,n=e.fieldType,r=e.recordId,i=e.sourceValueId,o=e.targetValueId,a=this._fieldRegistry.getValueModel(n);if(a){var l=a.find({field_uuid:t,record_uuid:r}),u=CC(l,(function(e){return e.get("uuid")===i})),c=CC(l,(function(e){return e.get("uuid")===o})),s={},d=l.get(u),f=l.get(c);f&&(s={uuid:o,field_uuid:f.get("field_uuid"),record_uuid:f.get("record_uuid")}),u<c?a.moveAfter(s,{uuid:i,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}):a.moveBefore(s,{uuid:i,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}),this._notifyCellChange(t,r)}}}])}();pM([Yf(JP)],vM.prototype,"_model",2),pM([Yf(cM)],vM.prototype,"_fieldRegistry",2),pM([Yf(aM)],vM.prototype,"_eventService",2),pM([Yf(eM)],vM.prototype,"_contextService",2),vM=pM([Gf()],vM);var gM=Rf.defineToken("CellEditContribution"),mM=Object.defineProperty,yM=Object.getOwnPropertyDescriptor,bM=function(e,t,n,r){for(var i,o=r>1?void 0:r?yM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mM(t,n,o),o},wM=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e,t=this.userProvider.getContributions(),n=t[t.length-1];return null==(e=null==n?void 0:n.registerCellEdit)?void 0:e.call(n)}}])}();bM([gh(gM)],wM.prototype,"userProvider",2),wM=bM([Gf()],wM);var _M=Object.defineProperty,xM=Object.getOwnPropertyDescriptor,kM=function(e,t,n,r){for(var i,o=r>1?void 0:r?xM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_M(t,n,o),o},CM=function(){return ox((function e(){rx(this,e)}),[{key:"provider",get:function(){return this._cellEditRegistry.getProvider()}},{key:"setCell",value:function(e){var t;return null==(t=this.provider)?void 0:t.setCell(e)}}])}();kM([Yf(wM)],CM.prototype,"_cellEditRegistry",2),CM=kM([Gf()],CM);var SM=ch().contribution(gM).register(wM).register(CM);function OM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OM(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var IM=Object.defineProperty,PM=Object.getOwnPropertyDescriptor,MM=function(e,t,n,r){for(var i,o=r>1?void 0:r?PM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&IM(t,n,o),o},RM=function(){return ox((function e(){rx(this,e)}),[{key:"changeCellType",value:function(e,t,n,r,i){var o,a,l,u,c=this._fieldRegistry.getValueField(t),s=this._fieldRegistry.getValueField(n);if(c&&s){var d=null;if(c.baseType!==s.baseType||c.type===xO.TEXT){var f=c.formatted(e.value,r);d=YO.isSelectLike(s.type)&&!i?s.transform(f,r):s.transform(f,i)}else if(YO.isUri(s.type)){var h=e.value;YO.isMultiple(c.type)&&!YO.isMultiple(s.type)&&(h=(null==e?void 0:e.value)[0]),d=s.transform(h)}else if(YO.isSelectLike(s.type)){var p=e.value,v=e.formatValue||"";if(YO.isMultiple(c.type)&&!YO.isMultiple(s.type)&&(p=null==(o=null==e?void 0:e.value)?void 0:o[0],v=(null==(a=null==e?void 0:e.formatValue)?void 0:a.split(",")[0])||""),YO.isMultiple(c.type)&&YO.isMultiple(s.type)&&r&&i){var g=(null==s?void 0:s.getFieldOptionName(p,r))||[];0===g.length&&(g=(null==v?void 0:v.split(","))||[]),d=s.transform(g,i)}else if(r&&i&&r!==i){var m=c.formatted(p,r);m||(m=v),d=s.transform(m,i)}else{var y=Ax(r)?i:void 0;d=s.transform(p,y)}}else d=s.transform(null==e?void 0:e.value);if(null!==d){if(s.validate(d.value)){var b=EM(EM({},e),{},{value:d.value});if(null==(l=this._cellEditService)?void 0:l.provider)if(!this._cellEditService.setCell({cells:[b]}))return;e.fieldId&&e.recordId&&(null==(u=s.setCell)||u.call(s,e.fieldId,e.recordId,b),this._eventService._onCellChange.emit({fieldId:e.fieldId,recordId:e.recordId,cellValue:b}))}}else c.model&&c.model.remove({field_uuid:e.fieldId,record_uuid:e.recordId})}}}])}();function AM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function jM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}MM([Yf(cM)],RM.prototype,"_fieldRegistry",2),MM([Yf(CM)],RM.prototype,"_cellEditService",2),MM([Yf(aM)],RM.prototype,"_eventService",2),RM=MM([Gf()],RM);var DM=Object.defineProperty,TM=Object.getOwnPropertyDescriptor,FM=function(e,t,n,r){for(var i,o=r>1?void 0:r?TM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DM(t,n,o),o},NM=function(){return ox((function e(){rx(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this._cellService.getCell(e,t)})}},{key:"getFields",value:function(){var e=this,t=this._model.fieldModel.find(),n=new yC;return t.forEach((function(t){var r=new bC(t.toJSON()),i=r.get("type");if(YO.isSelectLike(i)){var o=e.getFieldOptions(t.get("uuid"));null==r||r.set("options",o)}n.push([r])})),n}},{key:"getField",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});if(t){var n=new bC(t.toJSON()),r=n.get("type");if(YO.isSelectLike(r)){var i=this.getFieldOptions(n.get("uuid"));null==n||n.set("options",i)}return n}}},{key:"getFieldDetail",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});return t?{field:t,options:this.getFieldOptions(e)}:null}},{key:"getFieldOption",value:function(e){return this._model.fieldOptionModel.findOne({uuid:e})}},{key:"getFieldOptions",value:function(e){return this._model.fieldOptionModel.find({field_uuid:e})}},{key:"getFieldOptionName",value:function(e){var t=this,n=e.split(",");if(Array.isArray(n)){var r=[];return n.forEach((function(e){var n=t._model.fieldOptionModel.findOne({uuid:e});n&&r.push(n.get("name"))})),r.join(",")}var i=this._model.fieldOptionModel.findOne({uuid:e});return i?i.get("name"):""}},{key:"create",value:function(e){var t=this._model.fieldModel.create({name:e.name,type:e.type,color:e.color,config:e.config,uuid:e.uuid,multiple:!!e.multiple});if(e.options){var n,r=AM(e.options);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._model.fieldOptionModel.create({uuid:i.uuid,field_uuid:t.uuid,name:i.name.slice(0,dI.MAX_LENGTH),color:i.color})}}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"remove",value:function(e){this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"removeAll",value:function(){var e=OC(this._model.fieldModel.find(),(function(e){return e.get("uuid")}));return this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"update",value:function(e){var t,n,r=e.uuid;if(this._model.fieldModel.update({uuid:r},e),e.config&&(e.config.format||e.config.date_format)){var i,o=this._model.recordModel.find(),a=null==(t=this._model.tableModel.find().get(0))?void 0:t.get("active_view_uuid"),l=this._model.groupModel.findOne({view_uuid:a}),u=l&&l.get("field_uuid")===r,c=AM(o);try{for(c.s();!(i=c.n()).done;){var s=i.value,d=this._model.fieldModel.findById(r);if(!d)return;var f=s.get("uuid"),h=null==d?void 0:d.get("config"),p=null==(n=this._fieldRegistry.getValueField(d.get("type")))?void 0:n.getCellFormattedValue(r,f,h);this._model.cellModel.update({field_uuid:r,record_uuid:f},{format_value:p}),u&&this._model.viewRecordModel.update({record_uuid:f},{group_item_key:p}),this._notifyCellChange(r,f)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"createFieldOption",value:function(e,t,n){if(!this._model.fieldModel.findOne({uuid:e}))throw new Error(wx("不存在对应字段"));if(!t.name)throw new Error(wx("选项名不能为空"));if(t.name.length>dI.MAX_LENGTH)throw new Error(wx("选项名不能超过最大长度限制"));if(EC(this._model.fieldOptionModel.find({field_uuid:e}),(function(e){return e.get("name")===t.name})))throw new Error(wx("已存在该选项，不可重复创建！"));var r=this._model.fieldOptionModel.create({uuid:t.uuid,field_uuid:e,name:t.name,color:t.color});if(t.users){var i,o=AM(t.users);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._model.userModel.upsert({uid:a.uid},{uid:a.uid,login:a.login,work_id:a.work_id,name:a.name,icon:a.icon})}}catch(e){o.e(e)}finally{o.f()}}return n&&this._model.fieldOptionModel.moveAfter({uuid:n},{uuid:r.uuid}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()}),r}},{key:"updateFieldOption",value:function(e,t){var n=this._model.fieldOptionModel.findOne({uuid:e});if(!n)throw new Error(wx("不存在对应选项"));if(!t.name)throw new Error(wx("选项名不能为空"));if(t.name.length>dI.MAX_LENGTH)throw new Error(wx("选项名不能超过最大长度限制"));if(EC(this._model.fieldOptionModel.find({field_uuid:n.get("field_uuid"),uuid:{$not:e}}),(function(e){return e.get("name")===t.name})))throw new Error(wx("已存在该选项，不可重复创建！"));var r={name:t.name,color:t.color};this._model.fieldOptionModel.update({uuid:n.get("uuid"),field_uuid:n.get("field_uuid")},r),this._model.fieldModel.update({uuid:n.get("field_uuid")},{updated_at:(new Date).getTime()})}},{key:"updateMentionFieldOptionId",value:function(e,t){this._model.fieldOptionModel.update({uuid:e},{uuid:t})}},{key:"updateFieldOptions",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(r.length>0){var i=this._model.fieldSelectModel.find({value:r,field_uuid:e});i.forEach((function(e){n._model.fieldSelectModel.remove({uuid:e.get("uuid")})}));var o,a=AM(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;this._notifyCellChange(e,l.get("record_uuid"))}}catch(e){a.e(e)}finally{a.f()}this._model.fieldOptionModel.remove({uuid:r,field_uuid:e})}t.map((function(t){var n;return{uuid:t.uuid,field_uuid:e,name:(null==(n=t.name)?void 0:n.slice(0,dI.MAX_LENGTH))||"",color:t.color}})).forEach((function(t,r){var i=n._model.fieldOptionModel.find({field_uuid:e}),o=CC(i,(function(e){return e.get("uuid")===t.uuid}));if(n._model.fieldOptionModel.update({uuid:t.uuid},t),r===o){var a=i.get(o);(null!=t.name&&t.name!==a.get("name")||null!=t.color&&t.color!==a.get("color"))&&n._model.fieldOptionModel.update({uuid:t.uuid},t)}else if(-1===o)if(0===r)n._model.fieldOptionModel.createBefore(null,t);else{var l=i.get(r-1);n._model.fieldOptionModel.createAfter({uuid:l.get("uuid")},t)}else if(0===r)n._model.fieldOptionModel.moveBefore(null,t);else{var u=i.get(r-1);n._model.fieldOptionModel.moveAfter(null==u?void 0:u.toJSON(),t)}})),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}},{key:"updateFieldOptionOrder",value:function(e,t,n){if(t!==n){var r=this._model.fieldOptionModel.find({field_uuid:e}),i=CC(r,(function(e){return e.get("uuid")===t})),o=CC(r,(function(e){return e.get("uuid")===n})),a=r.get(o),l={};a&&(l={field_uuid:e,uuid:a.get("uuid")}),i<o?this._model.fieldOptionModel.moveAfter(l,{uuid:t,field_uuid:e}):this._model.fieldOptionModel.moveBefore(l,{uuid:t,field_uuid:e}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}}},{key:"removeFieldOption",value:function(e){var t=this._model.fieldOptionModel.findOne({uuid:e});if(t){var n=t.get("field_uuid");this._model.fieldOptionModel.remove({uuid:e,field_uuid:n}),this._model.fieldSelectModel.remove({field_uuid:n,value:e}),this._model.fieldModel.update({uuid:n},{updated_at:(new Date).getTime()})}}},{key:"changeFieldType",value:function(e,t,n,r){if(this._model.fieldModel.update({uuid:e},{type:n}),(null==r?void 0:r[0].fieldType)===n)this._cellService.bulkSetCell(r);else{var i,o=AM(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._processService.changeCellType(a,t,n,e)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"clone",value:function(e,t){var n=this._model.fieldModel.findOne({uuid:e});if(n){var r=this._model.fieldOptionModel.find({field_uuid:n.get("uuid")}),i=this._model.fieldModel.create({uuid:t,name:this.getCloneFieldName(n.get("type"),n.get("name")),type:n.get("type"),sub_type:n.get("sub_type"),config:n.get("config"),color:n.get("color"),multiple:n.get("multiple")});return r.length>0&&this._model.fieldOptionModel.bulkCreate(OC(r,(function(e){return{field_uuid:i.uuid,name:e.get("name"),color:e.get("color")}}))),i}}},{key:"getCloneFieldName",value:function(e,t){var n=this._model.fieldModel.find({type:e}),r=function(i){var o,a=(t||(null==(o=OO.find((function(t){return t.type===e})))?void 0:o.name))+"-"+wx("复制")+(i>0?" ".concat(i):"");return xC(n,(function(e){return e.get("name")===a}))?(i++,r(i)):a};return r(0)}}])}();FM([Yf(vM)],NM.prototype,"_cellService",2),FM([Yf(RM)],NM.prototype,"_processService",2),FM([Yf(aM)],NM.prototype,"_eventService",2),FM([Yf(cM)],NM.prototype,"_fieldRegistry",2),FM([Yf(JP)],NM.prototype,"_model",2),NM=FM([Gf()],NM);var LM=Object.defineProperty,BM=Object.getOwnPropertyDescriptor,VM=function(){return ox((function e(){rx(this,e)}),[{key:"equalTo",value:function(e,t){return null===t||e===t}},{key:"notEqualTo",value:function(e,t){return null===t||e!==t}},{key:"greaterThan",value:function(e,t){return null===t||e>t}},{key:"greaterThanOrEqualTo",value:function(e,t){return null===t||e>=t}},{key:"lessThan",value:function(e,t){return null===t||e<t}},{key:"lessThanOrEqualTo",value:function(e,t){return null===t||e<=t}},{key:"startsWith",value:function(e,t){return null===t||"string"==typeof e&&e.startsWith(t)}},{key:"notStartsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.startsWith(t)}},{key:"endsWith",value:function(e,t){return null===t||"string"==typeof e&&e.endsWith(t)}},{key:"notEndsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.endsWith(t)}},{key:"contains",value:function(e,t){return null===t||-1!==e.indexOf(t)}},{key:"notContains",value:function(e,t){return null===t||-1===e.indexOf(t)}},{key:"is",value:function(e,t){return null===t||(Array.isArray(e)?e[0]===t:e===t)}},{key:"isNot",value:function(e,t){if(null===t)return!0;if(!Array.isArray(t))return!e||(Array.isArray(e)?e[0]!==t:e!==t);if(!e)return!0;if(Array.isArray(e)&&e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!0;return!1}},{key:"isEmpty",value:function(e){return null==e||""===e}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isEmptySelect",value:function(e){return!e||!!Array.isArray(e)&&0===e.length}},{key:"isNotEmptySelect",value:function(e){return!!e&&(!Array.isArray(e)||e.length>0)}},{key:"hasAnyOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!0}else if(Oc(e,t[n]))return!0;return!1}},{key:"hasAllOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(!e.includes(t[n]))return!1}else if(!Oc(e,t[n]))return!1;return!0}},{key:"isExactly",value:function(e,t){return null===t||(t=Array.isArray(t)?t:[t],!(!(null==e?void 0:e.sort)||!(null==t?void 0:t.sort))&&Oc(e.sort(),t.sort()))}},{key:"hasNoneOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!1}else if(Oc(e,t[n]))return!1;return!0}}])}();VM=function(e,t,n,r){for(var i,o=r>1?void 0:r?BM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&LM(t,n,o),o}([Gf()],VM);var zM=Object.defineProperty,HM=Object.getOwnPropertyDescriptor,WM=function(e,t,n,r){for(var i,o=r>1?void 0:r?HM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zM(t,n,o),o},UM=function(){return ox((function e(){rx(this,e)}),[{key:"isMatchCondition",value:function(e,t,n){if(e===RO.isEmpty||e===RO.isNotEmpty)return this._filterFuncService[e](t);if(!t)return!1;var r;if(uC(n)?r=[n+" 00:00:00",n+" 23:59:59"]:"today"===n?r=this.getTodayRange():"tomorrow"===n?r=this.getTomorrowRange():"yesterday"===n?r=this.getYesterdayRange():"thisWeek"===n?r=this.getThisWeekRange():"lastWeek"===n?r=this.getLastWeekRange():"nextWeek"===n?r=this.getNextWeekRange():"lastMonth"===n?r=this.getLastMonthRange():"thisMonth"===n?r=this.getThisMonthRange():"nextMonth"===n?r=this.getNextMonthRange():"thisYear"===n?r=this.getThisYearRange():"last7days"===n?r=this.getLast7daysRange():"next7days"===n?r=this.getNext7daysRange():"last30days"===n?r=this.getLast30daysRange():"next30days"===n&&(r=this.getNext30daysRange()),!r)return!1;var i=a()(t);return e===RO.equalTo?(i.isAfter(r[0])||i.isSame(r[0]))&&(i.isBefore(r[1])||i.isSame(r[1])):e===RO.lessThan?i.isBefore(r[0]):e===RO.greaterThan&&i.isAfter(r[1])}},{key:"getYesterdayRange",value:function(){var e=a()().add(-1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getTodayRange",value:function(){var e=a()();return[e.startOf("day"),e.endOf("day")]}},{key:"getTomorrowRange",value:function(){var e=a()().add(1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getLastWeekRange",value:function(){var e=a()().startOf("week");return[e.add(-7,"days"),e.add(-1,"millisecond")]}},{key:"getThisWeekRange",value:function(){var e=a()().endOf("week");return[e.add(-7,"days"),e]}},{key:"getNextWeekRange",value:function(){var e=a()().endOf("week");return[e,e.add(7,"days")]}},{key:"getLastMonthRange",value:function(){var e=a()().startOf("month");return[e.add(-1,"months"),e.add(-1,"millisecond")]}},{key:"getThisMonthRange",value:function(){return[a()().startOf("month"),a()().endOf("month")]}},{key:"getNextMonthRange",value:function(){var e=a()().endOf("month"),t=e.add(1,"months");return[e,t]}},{key:"getThisYearRange",value:function(){return[a()().startOf("year"),a()().endOf("year")]}},{key:"getLast7daysRange",value:function(){return[a()().add(-7,"days"),a()()]}},{key:"getNext7daysRange",value:function(){return[a()(),a()().add(7,"days")]}},{key:"getLast30daysRange",value:function(){return[a()().add(-30,"days"),a()()]}},{key:"getNext30daysRange",value:function(){return[a()(),a()().add(30,"days")]}}])}();function GM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return YM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function YM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}WM([Yf(VM)],UM.prototype,"_filterFuncService",2),UM=WM([Gf()],UM);var $M=Object.defineProperty,qM=Object.getOwnPropertyDescriptor,KM=function(e,t,n,r){for(var i,o=r>1?void 0:r?qM(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$M(t,n,o),o},XM=function(){return ox((function e(){rx(this,e)}),[{key:"_getExpectedValue",value:function(e,t,n){var r=null;if(e!==xO.TEXT&&e!==xO.SELECT||(r=n),YO.isNumberLike(e)&&(r=n?parseFloat(n):""),e===xO.MULTI_SELECT&&(r=(null==n?void 0:n.split(","))||[]),e===xO.MENTION){var i=(null==n?void 0:n.split(","))||[];r=OC(this._model.userModel.find({uid:i}),(function(e){return{uid:e.get("uid"),name:e.get("name"),icon:e.get("icon"),login:e.get("login")}}))}return e===xO.DATE&&(r="yesterday"===n?a()().add(-1,"days").toString():"today"===n?a()(new Date).toString():"tomorrow"===n?a()().add(1,"days").toString():n),e===xO.CHECKBOX&&(r="true"===n),r}},{key:"safeGetFilterCellValue",value:function(e){var t=this,n=function(e){var r,i=GM(e.filters);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=void 0;if(void 0!==(a="packet"===o.type?n(o):{field_uuid:o.field_uuid,value:t._getExpectedValue(o.field.type,o.func,o.expected)}))return a}}catch(e){i.e(e)}finally{i.f()}};return n(e)}},{key:"getDefaultThing",value:function(e,t,n){var r,i,o,a;if(t){var l=[],u=function(e){if(e.filters){var t,n=GM(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;"packet"===r.type?u(r):l.push([r.packet_uuid,r.field_uuid])}}catch(e){n.e(e)}finally{n.f()}}};u(t),n&&(a=null==(r=l.find((function(e){return e[0]===n})))?void 0:r[1]),a||(a=null==(i=l[l.length-1])?void 0:i[1])}if(!a){var c={view_uuid:e,hidden:{$not:!0}},s=this._model.viewFieldModel.findOne(c);a=null==s?void 0:s.get("field_uuid")}var d=this._fieldService.getField(a),f=this.getConditions(null==d?void 0:d.get("type"));return{uuid:Cx(32),field:null==d?void 0:d.toJSON(),view_uuid:e,packet_uuid:n,field_uuid:a,func:(null==(o=null==f?void 0:f[0])?void 0:o.func)||RO.equalTo,expected:null,updated_at:(new Date).getTime(),created_at:(new Date).getTime()}}},{key:"getConditions",value:function(e){var t=VO[e];if(t)return BO.filter((function(e){return e.type===t}))}},{key:"isEmpty",value:function(e){var t=this._model.filterThingModel.find({view_uuid:e});return 0===t.length||!!function(e,t){var n,r=wC(e);try{for(r.s();!(n=r.n()).done;)if(!t(n.value))return!1}catch(e){r.e(e)}finally{r.f()}return!0}(t,(function(e){return(null==e.get("expected")||""===e.get("expected"))&&!zO.includes(e.get("func"))}))}}])}();function JM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ZM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZM(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ZM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}KM([Yf(JP)],XM.prototype,"_model",2),KM([Yf(NM)],XM.prototype,"_fieldService",2),XM=KM([Gf()],XM);var QM=Object.defineProperty,eR=Object.getOwnPropertyDescriptor,tR=function(e,t,n,r){for(var i,o=r>1?void 0:r?eR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&QM(t,n,o),o},nR=function(){return ox((function e(){rx(this,e)}),[{key:"getViewGroup",value:function(e){var t=this._model.groupModel.findOne({view_uuid:e});if(t){var n=this._model.fieldModel.findOne({uuid:t.get("field_uuid")});if(n){var r=this._model.fieldOptionModel.find({field_uuid:t.get("field_uuid")});return{group:t,field:n,options:r}}this._model.groupModel.remove({uuid:t.get("uuid"),view_uuid:e})}}},{key:"getGroupItems",value:function(e,t){return this._model.groupItemModel.find({view_uuid:e,field_uuid:t})}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._model.groupItemModel.upsert({view_uuid:e,field_uuid:t,key:n},{view_uuid:e,field_uuid:t,key:n,collapse:r})}},{key:"updateGroupItemPagination",value:function(e,t,n,r){this._model.groupItemModel.upsert({view_uuid:e,field_uuid:t,key:n},{view_uuid:e,field_uuid:t,key:n,pagination_total:r.total,pagination_current:r.current,pagination_page_size:r.page_size,pagination_loaded:r.loaded,pagination_start_index:r.start_index})}},{key:"isGroup",value:function(e){return!!this.getViewGroup(e)}},{key:"create",value:function(e,t){var n=this._model.groupModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});this.refreshGroup(e,n)}},{key:"remove",value:function(e){this._model.groupModel.remove({view_uuid:e}),this._model.viewRecordModel.update({view_uuid:e},{group_item_key:GO})}},{key:"update",value:function(e,t){var n=this._model.groupModel.update({view_uuid:e},{field_uuid:t.field_uuid,view_uuid:e,type:t.type});return this.refreshGroup(e,t),n}},{key:"refreshGroup",value:function(e,t){var n,r=this._model.viewRecordModel.find({view_uuid:e}),i=OC(r,(function(e){return e.get("record_uuid")})),o=this._fieldService.getField(t.field_uuid);if((null==o?void 0:o.get("type"))===xO.DATE){var a,l=JM(n=this._cellService.getFieldFormatValues(t.field_uuid,i));try{for(l.s();!(a=l.n()).done;){var u=a.value;u.formatValue&&(u.groupValue=t.field_uuid+":"+u.formatValue)}}catch(e){l.e(e)}finally{l.f()}}else{var c,s=JM(n=this._cellService.getFieldKeyValues(t.field_uuid,i));try{for(s.s();!(c=s.n()).done;){var d=c.value;d.keyValue&&(d.groupValue=t.field_uuid+":"+d.keyValue)}}catch(e){s.e(e)}finally{s.f()}}var f,h=n.map((function(e){return e.groupValue})).filter((function(e){return null!=e})),p=SC(r,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),v=[],g=JM(n);try{var m=function(){var e=f.value,t=e.groupValue||GO,n=p[e.recordId];if(!n)return 1;if((null==n?void 0:n.get("group_item_key"))!=t){var r=v.find((function(e){return e.key===t})),i=n.get("record_uuid");r?r.recordIds.push(i):v.push({key:t,recordIds:[i]})}};for(g.s();!(f=g.n()).done;)m()}catch(e){g.e(e)}finally{g.f()}if(v.length>0){var y,b=JM(v);try{for(b.s();!(y=b.n()).done;){var w=y.value;this._model.viewRecordModel.update({view_uuid:e,record_uuid:Xc(w.recordIds)},{group_item_key:w.key}),o&&o.get("type")===xO.MENTION&&this._refreshMentionFieldOption(e,o,t,w.key)}}catch(e){b.e(e)}finally{b.f()}}o&&o.get("type")===xO.MENTION&&this._removeMentionFieldOption(h,o)}},{key:"_refreshMentionFieldOption",value:function(e,t,n,r){var i=this;if(r&&!EC(this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}),(function(e){return i._cellService.groupValue(e)===r}))){var o=this._model.viewModel.findOne({uuid:e});this._model.fieldOptionModel.create({field_uuid:n.field_uuid,uuid:r,name:r,temp:(null==o?void 0:o.get("type"))!==WO.KANBAN})}}},{key:"_removeMentionFieldOption",value:function(e,t){var n=this;this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}).forEach((function(t){e.indexOf(t.get("uuid"))<0&&n._model.fieldOptionModel.remove({uuid:t.get("uuid"),temp:!0})}))}},{key:"copy",value:function(e,t){var n=this._model.groupModel.find({view_uuid:e});n&&0!==n.length&&this._model.groupModel.bulkCreate(OC(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"createDefaultKanbanViewGroup",value:function(e){var t=this._fieldService.getFields(),n=xC(t,(function(e){return xO.SELECT===e.get("type")}));return n||(n=xC(t,(function(e){return xO.MENTION===e.get("type")}))),this.create(e,{field_uuid:(null==n?void 0:n.get("uuid"))||"",type:NO.ASC}),this.getViewGroup(e)}}])}();function rR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function iR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}tR([Yf(JP)],nR.prototype,"_model",2),tR([Yf(NM)],nR.prototype,"_fieldService",2),tR([Yf(vM)],nR.prototype,"_cellService",2),nR=tR([Gf()],nR);var oR=Object.defineProperty,aR=Object.getOwnPropertyDescriptor,lR=function(){return ox((function e(){rx(this,e)}),[{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t=YO.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,r):this.descSortSelect(t,r):YO.isNumberLike(n.get("type"))||xO.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):YO.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):YO.isSystemDate(n.get("type"))?"asc"===e?this.ascSortSystemDate(t):this.descSortSystemDate(t):YO.isUri(n.get("type"))||YO.isMentionLike(n.get("type"))?"asc"===e?this.ascSortUri(t):this.descSortUri(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"",r=t.option.value||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"";return(t.option.value||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){return Number(e.option.value)-Number(t.option.value)}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){return Number(t.option.value)-Number(e.option.value)}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){return a()(e.option.formatValue).unix()-a()(t.option.formatValue).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){return a()(t.option.formatValue).unix()-a()(e.option.formatValue).unix()}))}},{key:"ascSortSystemDate",value:function(e){return e.sort((function(e,t){return a()(e.option.value).unix()-a()(t.option.value).unix()}))}},{key:"descSortSystemDate",value:function(e){return e.sort((function(e,t){return a()(t.option.value).unix()-a()(e.option.value).unix()}))}},{key:"ascSortUri",value:function(e){return e.sort((function(e,t){var n,r,i=(null==(n=e.option.value)?void 0:n.toJSON)?e.option.value.toJSON():e.option.value,o=(null==(r=t.option.value)?void 0:r.toJSON)?t.option.value.toJSON():t.option.value,a=(Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"",l=(Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"";return a.localeCompare(l)}))}},{key:"descSortUri",value:function(e){return e.sort((function(e,t){var n,r,i=(null==(n=e.option.value)?void 0:n.toJSON)?e.option.value.toJSON():e.option.value,o=(null==(r=t.option.value)?void 0:r.toJSON)?t.option.value.toJSON():t.option.value,a=(Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"";return((Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"").localeCompare(a)}))}},{key:"ascSortSelect",value:function(e,t){var n=OC(t,(function(e){return e.get("uuid")}));return this._getlistOrderByOptions(e,n)}},{key:"descSortSelect",value:function(e,t){var n=OC(t,(function(e){return e.get("uuid")})).reverse();return this._getlistOrderByOptions(e,n)}},{key:"_getlistOrderByOptions",value:function(e,t){var n,r,i=t.reduce((function(e,t){return e[t]=[],e}),{}),o=[],a=rR(e);try{for(a.s();!(r=a.n()).done;){var l=r.value,u=l.option.value;if(u){var c=Array.isArray(u)?u[0]:u;null==(n=i[c])||n.push(l)}else o.push(l)}}catch(e){a.e(e)}finally{a.f()}var s=[];return t.forEach((function(e){s=s.concat(i[e])})),s=s.concat(o)}}])}();function uR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uR(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function dR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}lR=function(e,t,n,r){for(var i,o=r>1?void 0:r?aR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oR(t,n,o),o}([Gf()],lR);var fR=Object.defineProperty,hR=Object.getOwnPropertyDescriptor,pR=function(e,t,n,r){for(var i,o=r>1?void 0:r?hR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fR(t,n,o),o},vR=function(){return ox((function e(){rx(this,e)}),[{key:"groupViewRecords",value:function(e,t,n){return this._configuration.getValue("kernel.groupLimitByGroupItemModel")?this._groupRecordWithLimit(e,t,n):this._groupRecordWithNormal(e,t,n)}},{key:"_groupRecordWithNormal",value:function(e,t,n){var r,i,o,a,l,u,c,s,d,f,h,p,v=this,g={},m=this._model.viewModel.findOne({uuid:t.get("view_uuid")}),y=SC(this._model.groupItemModel.find({view_uuid:t.get("view_uuid"),field_uuid:t.get("field_uuid")}),(function(e,t){return e[t.get("key")]=t,e}),{}),b=sR(e);try{for(b.s();!(p=b.n()).done;){var w=p.value;w.get("group_item_key")?(g[w.get("group_item_key")]=g[w.get("group_item_key")]||[],g[w.get("group_item_key")].push(w)):(g[GO]=g[GO]||[],g[GO].push(w))}}catch(e){b.e(e)}finally{b.f()}var _=[],x=this._fieldService.getField(t.get("field_uuid"));if(_=YO.isSelect(x.get("type"))?OC(n,(function(e){var t,n,r,i,o;if(!e||!e.get("uuid"))return null;var a=cR(cR({},e.toJSON()),{},{fieldId:e.get("field_uuid"),value:e.get("uuid")});if(YO.isMention(x.get("type"))){var l=v._model.userModel.find({uid:e.get("uuid").split(",")});if(0===l.length)return null;a.value=l}var u=v._cellService.groupValue(a);return{key:u,option:a,field:x,viewRecords:g[u]||[],collapse:(null==(t=y[u])?void 0:t.get("collapse"))||!1,paginationTotal:null==(n=y[u])?void 0:n.get("pagination_total"),paginationCurrent:null==(r=y[u])?void 0:r.get("pagination_current"),paginationPageSize:null==(i=y[u])?void 0:i.get("pagination_page_size"),paginationStartIndex:null==(o=y[u])?void 0:o.get("pagination_start_index")}})).filter((function(e){return!!e})):Object.keys(g).map((function(e){var n,r,i,o,a;if(e!==GO){var l=g[e][0].get("record_uuid");return{key:e,option:v._cellService.getCell(t.get("field_uuid"),l),field:x,viewRecords:g[e]||[],collapse:(null==(n=y[e])?void 0:n.get("collapse"))||!1,paginationTotal:null==(r=y[e])?void 0:r.get("pagination_total"),paginationCurrent:null==(i=y[e])?void 0:i.get("pagination_current"),paginationPageSize:null==(o=y[e])?void 0:o.get("pagination_page_size"),paginationStartIndex:null==(a=y[e])?void 0:a.get("pagination_start_index")}}})).filter((function(e){return!!e})),(null==x?void 0:x.get("type"))===xO.CHECKBOX&&_.push({key:GO,field:x,option:{value:!1},viewRecords:g[GO],collapse:(null==(r=y[GO])?void 0:r.get("collapse"))||!1,paginationTotal:null==(i=y[GO])?void 0:i.get("pagination_total"),paginationCurrent:null==(o=y[GO])?void 0:o.get("pagination_current"),paginationPageSize:null==(a=y[GO])?void 0:a.get("pagination_page_size"),paginationStartIndex:null==(l=y[GO])?void 0:l.get("pagination_start_index")}),(null==m?void 0:m.get("type"))!==WO.KANBAN&&(_=this._groupSortService.sort(t.get("type"),_,x,n)),(null==x?void 0:x.get("type"))!==xO.CHECKBOX&&_.push({key:GO,field:x,option:null,viewRecords:g[GO],collapse:(null==(u=y[GO])?void 0:u.get("collapse"))||!1,paginationTotal:null==(c=y[GO])?void 0:c.get("pagination_total"),paginationCurrent:null==(s=y[GO])?void 0:s.get("pagination_current"),paginationPageSize:null==(d=y[GO])?void 0:d.get("pagination_page_size"),paginationStartIndex:null==(f=y[GO])?void 0:f.get("pagination_start_index")}),(null==m?void 0:m.get("type"))===WO.KANBAN){var k=_.findIndex((function(e){return e.key===GO}));if(k>-1){var C=_.splice(k,1)[0];C.viewRecords&&C.viewRecords.length>0&&_.unshift(C)}var S,O=sR(_);try{for(O.s();!(S=O.n()).done;){null==(h=S.value.viewRecords)||h.reverse()}}catch(e){O.e(e)}finally{O.f()}}return _}},{key:"_groupRecordWithLimit",value:function(e,t,n){var r,i,o,a,l,u,c,s,d,f=t.get("field_uuid"),h={},p=this._model.groupItemModel.find({view_uuid:t.get("view_uuid"),field_uuid:f}),v=SC(p,(function(e,t){return e[t.get("key")]=t,e}),{}),g=[],m=sR(e);try{for(m.s();!(d=m.n()).done;){var y=d.value;y.get("group_item_key")?(h[y.get("group_item_key")]=h[y.get("group_item_key")]||[],h[y.get("group_item_key")].push(y)):(h[GO]=h[GO]||[],h[GO].push(y))}}catch(e){m.e(e)}finally{m.f()}var b,w=this._fieldService.getField(f),_=YO.isSelectLike(w.get("type")),x=n?n.toJSON().reduce((function(e,t){return e[t.uuid]=t,e}),{}):{},k=sR(p);try{for(k.s();!(b=k.n()).done;){var C=b.value.get("key"),S=null==(i=null==(r=h[C])?void 0:r[0])?void 0:i.get("record_uuid"),O=void 0;if(S){var E=x[C];_?E&&(O=cR(cR({},E),{},{fieldId:f,value:E.uuid})):O=this._cellService.getCell(f,S)}var I={key:C,field:w,option:O,viewRecords:h[C]||[],collapse:(null==(o=v[C])?void 0:o.get("collapse"))||!1,paginationTotal:null==(a=v[C])?void 0:a.get("pagination_total"),paginationCurrent:null==(l=v[C])?void 0:l.get("pagination_current"),paginationPageSize:null==(u=v[C])?void 0:u.get("pagination_page_size"),paginationLoaded:null==(c=v[C])?void 0:c.get("pagination_loaded"),paginationStartIndex:null==(s=v[C])?void 0:s.get("pagination_start_index")};g.push(I)}}catch(e){k.e(e)}finally{k.f()}return g}}])}();pR([Yf(JP)],vR.prototype,"_model",2),pR([Yf(NM)],vR.prototype,"_fieldService",2),pR([Yf(vM)],vR.prototype,"_cellService",2),pR([Yf(lR)],vR.prototype,"_groupSortService",2),pR([Yf(RC)],vR.prototype,"_configuration",2),vR=pR([Gf()],vR);var gR=Object.defineProperty,mR=Object.getOwnPropertyDescriptor,yR=function(e,t,n,r){for(var i,o=r>1?void 0:r?mR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gR(t,n,o),o},bR=function(){return ox((function e(){rx(this,e)}),[{key:"getRecords",value:function(){return this._model.recordModel.find()}},{key:"getRecordById",value:function(e){return this._model.recordModel.findById(e)}},{key:"getRecordDesc",value:function(e){var t=this._model.recordModel.findById(e);if(t)return t.get("desc")}},{key:"create",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid,r={uuid:e.uuid,creator_id:(null==e?void 0:e.modifier_id)||n,modifier_id:(null==e?void 0:e.modifier_id)||n,updated_at:+new Date,created_at:+new Date};return Array.isArray(e.uuid)?this._model.recordModel.bulkCreate(e.uuid.map((function(t){return{uuid:t,creator_id:n,modifier_id:(null==e?void 0:e.modifier_id)||n}}))):(this._model.recordModel.create(r),[r])}},{key:"update",value:function(e,t){if(this._model.recordModel.findById(e))return this._model.recordModel.update({uuid:e},t)}},{key:"bulkCreate",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid;return this._model.recordModel.bulkCreate(e.map((function(e){return{uuid:e.uuid,creator_id:e.creator_id||n,modifier_id:e.modifier_id||n}})))}},{key:"remove",value:function(e){return this._model.recordModel.remove({uuid:e})}},{key:"removeAll",value:function(){var e=this._model.recordModel.find();return this._model.recordModel.remove({uuid:OC(e,(function(e){return e.get("uuid")}))})}}])}();function wR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_R(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function _R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}yR([Yf(eM)],bR.prototype,"_contextService",2),yR([Yf(JP)],bR.prototype,"_model",2),bR=yR([Gf()],bR);var xR=Object.defineProperty,kR=Object.getOwnPropertyDescriptor,CR=function(e,t,n,r){for(var i,o=r>1?void 0:r?kR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xR(t,n,o),o},SR=function(){return ox((function e(){rx(this,e)}),[{key:"getOriginViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e})}},{key:"getViewRecords",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewRecordModel.find(t)}},{key:"getGroupViewRecords",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._groupService.getViewGroup(e);if(!n)return[];var r=this.getViewRecords(e,t);return this._groupRecordService.groupViewRecords(r,n.group,n.options)}},{key:"getViewRecordsDetail",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};Array.isArray(t)||(t=[t]);var i=this._model.viewRecordModel.find({view_uuid:e,record_uuid:t}),o={view_uuid:e};r.filterHidden&&(o.hidden={$not:!0});var a,l=this._model.viewFieldModel.find(o),u=[],c=wR(i);try{var s=function(){var e=a.value,t=n._model.recordModel.findOne({uuid:e.get("record_uuid")});if(!t)return 1;var r=[],i={};i.cellMap=new Map,l.forEach((function(e,o){var a=n._fieldService.getField(e.get("field_uuid"));if(a&&t){var l=n._cellService.getCell(a.get("uuid"),t.get("uuid"));r.push(l),i.cellMap.set(a.get("uuid"),o)}})),i.record=t,i.cells=r,u.push(i)};for(c.s();!(a=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}return u}},{key:"getViewRecordsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),(this._model.viewRecordModel.find(t)||[]).length}},{key:"getFlatViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}})}},{key:"getGroupFlatViewRecords",value:function(e){var t,n=this._groupService.getViewGroup(e),r=this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}}),i=new yC,o=wR(this._groupRecordService.groupViewRecords(r,n.group,n.options));try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.viewRecords){var l,u=wR(a.viewRecords);try{for(u.s();!(l=u.n()).done;){var c=l.value;i.push([c])}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"getViewRecordByRecordId",value:function(e,t){return this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:t})}},{key:"getVisibleRecordIds",value:function(e){return OC(this._model.viewRecordModel.find({view_uuid:e}),(function(e){return e.get("record_uuid")}))}},{key:"getFieldRecords",value:function(e,t,n){var r={view_uuid:e,hidden:{$not:!0}};null!=n&&(r.group_item_key=n);var i,o=this._model.viewRecordModel.find(r),a=function(e,t){var n,r=new Map,i=wC(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.set(o.get(t),o)}}catch(e){i.e(e)}finally{i.f()}return r}(this._recordService.getRecords(),"uuid"),l=[],u=wR(o);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c.get("record_uuid")){var s=a.get(c.get("record_uuid"));if(s){var d=this._cellService.getCell(t,s.get("uuid"));d&&l.push({view_uuid:c.get("view_uuid"),record_uuid:c.get("record_uuid"),cells:[d]})}}}}catch(e){u.e(e)}finally{u.f()}return l}},{key:"createEmpty",value:function(e){var t,n=this,r=e.uuid,i=e.viewId,o=e.viewRecord,a=e.sourceRecordId,l=e.direction,u=e.groupOption,c=e.filter,s=e.modifierId,d=e.groupItemKey,f=this._recordService.create({uuid:r,modifier_id:s});Array.isArray(f)||(f=[f]),c&&(t=this._filterHelperService.safeGetFilterCellValue(c));var h,p=wR(f);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(null!=u){var g=u.value;this._cellService.setCell(u.fieldId,v.uuid,{fieldId:u.fieldId,recordId:v.uuid,value:(null==g?void 0:g.toJSON)?g.toJSON():g})}else null!=t&&this._cellService.setCell(t.field_uuid,v.uuid,{fieldId:t.field_uuid,recordId:v.uuid,value:t.value})}}catch(e){p.e(e)}finally{p.f()}return f.forEach((function(e){var t={uuid:null==o?void 0:o.uuid,created_at:null==o?void 0:o.created_at,updated_at:null==o?void 0:o.updated_at,view_uuid:i,record_uuid:e.uuid,group_item_key:d||GO};null!=u&&(t.group_item_key=n._cellService.groupValue(u)),a?"after"===l?n._model.viewRecordModel.createAfter({view_uuid:i,record_uuid:a},t):n._model.viewRecordModel.createBefore({view_uuid:i,record_uuid:a},t):n._model.viewRecordModel.create(t)})),f}},{key:"createRecord",value:function(e,t,n){for(var r=this.createEmpty({uuid:n.uuid,viewId:e,direction:"after",sourceRecordId:t}),i=0,o=Object.keys(n);i<o.length;i++){var a=o[i],l=this._fieldService.getField(a);if(l){var u=n[a];Array.isArray(u)||(u=[u]);var c,s=wR(u);try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.setCell(l.get("uuid"),r[0].uuid,d)}}catch(e){s.e(e)}finally{s.f()}}}return r}},{key:"createRecords",value:function(e,t){this._recordService.bulkCreate(t),this._model.viewRecordModel.bulkCreate(t.map((function(t){return{view_uuid:e,record_uuid:t.uuid,group_item_key:GO}})),{validate:!1})}},{key:"copy",value:function(e,t){var n,r=[],i=wR(this._model.viewRecordModel.find({view_uuid:e}));try{for(i.s();!(n=i.n()).done;){var o=n.value;o&&r.push({uuid:Cx(32),view_uuid:t,record_uuid:o.get("record_uuid"),hidden:o.get("hidden"),group_item_key:o.get("group_item_key")||GO})}}catch(e){i.e(e)}finally{i.f()}this._model.viewRecordModel.bulkCreate(r)}},{key:"copyRecord",value:function(e){var t=e.uuid,n=e.viewId,r=e.sourceRecordId,i=e.modifierId,o=this._recordService.create({uuid:t,modifier_id:i})[0],a=this._model.viewRecordModel.find({view_uuid:n}),l=CC(a,(function(e){return e.get("record_uuid")===r})),u=a.get(l);if(u){var c,s=wR(this._model.viewFieldModel.find({view_uuid:n}));try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.copy(d.get("field_uuid"),u.get("record_uuid"),d.get("field_uuid"),o.uuid)}}catch(e){s.e(e)}finally{s.f()}this._model.viewRecordModel.create({uuid:Cx(32),view_uuid:u.get("view_uuid"),record_uuid:o.uuid,hidden:u.get("hidden"),group_item_key:u.get("group_item_key")}),l!==(a=this._model.viewRecordModel.find({view_uuid:n})).length-1&&this._model.viewRecordModel.moveAfter({view_uuid:n,record_uuid:r},{view_uuid:n,record_uuid:o.uuid})}}},{key:"remove",value:function(e,t){this._model.viewRecordModel.remove({view_uuid:e,record_uuid:t}),this._cellService.removeByRecordId(t),this._recordService.remove(t)}},{key:"removeAll",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n=OC(this._model.viewRecordModel.find(t),(function(e){return e.get("record_uuid")}));return this._model.viewRecordModel.remove({view_uuid:e,record_uuid:n}),this._cellService.removeByRecordId(n),this._recordService.remove(n)}},{key:"updateOrder",value:function(e,t,n,r){var i,o,a=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jO.forward,u=this.getOriginViewRecords(e),c="string"==typeof t?[t]:t,s=u.toArray();null!=r&&(this._model.viewRecordModel.find({view_uuid:e,record_uuid:c}).forEach((function(e){a.updateGroupByViewRecord(e,r)})),s=kC(u,(function(e){return e.get("group_item_key")===r.key})).toArray());var d,f=CC(u,(function(e){return e.get("record_uuid")===c[0]})),h=CC(u,(function(e){return e.get("record_uuid")===n})),p=u.get(h);if(p&&(d={view_uuid:e,record_uuid:p.get("record_uuid")}),l===jO.forward)if(f<=h){if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:null==(i=s[0])?void 0:i.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}else if(f<=h){if(d||(d={view_uuid:e,record_uuid:null==(o=s[0])?void 0:o.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}}},{key:"updateGroupByViewRecord",value:function(e,t){var n;if(e.get("group_item_key")!==(null==t?void 0:t.key)){var r=t.field,i=r.get("type"),o=this._fieldRegistry.getValueField(i),a=r.get("uuid"),l=e.get("record_uuid");this._cellService.removeByRecordId(l,a);var u=null==(n=null==t?void 0:t.option)?void 0:n.value;if(o){var c=this._cellService.toGroupValue(r,o,u)||GO;this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:c}),this._cellService.setCell(a,l,{fieldId:a,recordId:l,value:((null==u?void 0:u.toJSON)?u.toJSON():u)||""})}else this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:GO})}}}])}();function OR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ER(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ER(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ER(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}CR([Yf(JP)],SR.prototype,"_model",2),CR([Yf(bR)],SR.prototype,"_recordService",2),CR([Yf(NM)],SR.prototype,"_fieldService",2),CR([Yf(vM)],SR.prototype,"_cellService",2),CR([Yf(nR)],SR.prototype,"_groupService",2),CR([Yf(cM)],SR.prototype,"_fieldRegistry",2),CR([Yf(vR)],SR.prototype,"_groupRecordService",2),CR([Yf(XM)],SR.prototype,"_filterHelperService",2),SR=CR([Gf()],SR);var IR=Object.defineProperty,PR=Object.getOwnPropertyDescriptor,MR=function(e,t,n,r){for(var i,o=r>1?void 0:r?PR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&IR(t,n,o),o},RR=function(){return ox((function e(){rx(this,e)}),[{key:"getViewFilter",value:function(e,t){var n=this,r=this._model.filterPacketModel.find({view_uuid:e}).toJSON();if(0===r.length)return null;var i=this._model.filterThingModel.find({view_uuid:e}).toJSON();return 0===(i=i.map((function(e){var r=n._fieldService.getField(e.field_uuid);return r?((null==t?void 0:t.notIncludeField)||(e.field=r.toJSON()),e):null})).filter((function(e){return!!e}))).length?(this._model.filterPacketModel.remove({view_uuid:e}),null):this._buildFilter(r,i,t)}},{key:"refresh",value:function(e){var t=this.getViewFilter(e);if(t)if(this._groupService.isGroup(e)){var n,r=OR(this._viewRecordService.getGroupViewRecords(e,!1));try{for(r.s();!(n=r.n()).done;){var i=n.value;this.refreshData(e,i.viewRecords,t)}}catch(e){r.e(e)}finally{r.f()}}else{var o=this._viewRecordService.getViewRecords(e,!1);this.refreshData(e,o,t)}else this._model.viewRecordModel.update({view_uuid:e},{hidden:!1})}},{key:"refreshData",value:function(e,t,n){t=t||this._model.viewRecordModel.find({view_uuid:e}),n=n||this.getViewFilter(e);var r,i={false:[],true:[]},o={},a=OR(Xc(OC(this._model.filterThingModel.find({view_uuid:e}),(function(e){return e.get("field_uuid")}))));try{for(a.s();!(r=a.n()).done;){var l=r.value,u=this._cellService.getFieldKeyValues(l);o[l]=u.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}}catch(e){a.e(e)}finally{a.f()}var c,s=OR(t);try{for(s.s();!(c=s.n()).done;){var d=c.value,f=d.get("record_uuid"),h=this.isMatch(n,f,o);!0===h&&!1===d.get("hidden")||!1===h&&d.get("hidden")||(h?i.false.push(d):i.true.push(d))}}catch(e){s.e(e)}finally{s.f()}i.true.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.true.map((function(e){return e.get("record_uuid")}))},{hidden:!0}),i.false.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.false.map((function(e){return e.get("record_uuid")}))},{hidden:!1})}},{key:"createPacket",value:function(e,t){var n;this._model.filterPacketModel.create({uuid:e.uuid,type:"packet",view_uuid:e.view_uuid,parent_uuid:e.parent_uuid,root_uuid:e.root_uuid,operator:e.operator}),t?(this._model.filterThingModel.update({uuid:t,view_uuid:e.view_uuid},{packet_uuid:e.uuid}),this.refresh(e.view_uuid)):(n=e.filters?e.filters[0]:this._filterHelperService.getDefaultThing(e.view_uuid,void 0,e.uuid),this.createThing(n))}},{key:"updatePacket",value:function(e){this._model.filterPacketModel.update({uuid:e.uuid,view_uuid:e.view_uuid},{operator:e.operator}),this.refresh(e.view_uuid)}},{key:"removePacket",value:function(e,t,n){var r=this,i=this._model.filterPacketModel.findOne({uuid:e,view_uuid:t});if(i){if(n){var o=[e],a=function(e){var t,n=OR(r._model.filterPacketModel.find({parent_uuid:e.uuid}));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.get("operator")&&(o.push(i.get("uuid")),a(i.toJSON()))}}catch(e){n.e(e)}finally{n.f()}};a(i),this._model.filterThingModel.remove({view_uuid:t,packet_uuid:o}),this._model.filterPacketModel.remove({view_uuid:t,uuid:o})}else{var l=i.get("parent_uuid");this._model.filterPacketModel.remove({uuid:e,view_uuid:t}),this._model.filterThingModel.update({packet_uuid:e,view_uuid:t},{packet_uuid:l})}this.refresh(t)}}},{key:"createThing",value:function(e){if(e.packet_uuid){this._model.filterPacketModel.findOne({uuid:e.packet_uuid,view_uuid:e.view_uuid})||this._model.filterPacketModel.create({uuid:e.packet_uuid,type:"packet",view_uuid:e.view_uuid,operator:AO.And})}else{var t=Cx();this._model.filterPacketModel.create({uuid:t,type:"packet",view_uuid:e.view_uuid,operator:AO.And}),e.packet_uuid=t}var n=this._model.filterThingModel.create({uuid:e.uuid,packet_uuid:e.packet_uuid,view_uuid:e.view_uuid,field_uuid:e.field_uuid,func:e.func,expected:e.expected});return this.refresh(e.view_uuid),n}},{key:"updateThing",value:function(e){this._model.filterThingModel.update({uuid:e.uuid},e),this.refresh(e.view_uuid)}},{key:"removeThing",value:function(e){var t=this._model.filterThingModel.findOne({uuid:e});if(!t)return null;var n=t.get("view_uuid"),r=t.get("packet_uuid");this._model.filterThingModel.remove({view_uuid:n,uuid:e});var i=this._model.filterPacketModel.find({parent_uuid:r,view_uuid:n}),o=this._model.filterThingModel.find({packet_uuid:r,view_uuid:n});return 0===i.length&&0===o.length&&this._model.filterPacketModel.remove({uuid:r,view_uuid:n}),this.refresh(n),t}},{key:"removeThingByFieldId",value:function(e,t){this._model.filterThingModel.remove({view_uuid:t,field_uuid:e}),this.refresh(t)}},{key:"remove",value:function(e){this._model.filterThingModel.remove({view_uuid:e}),this._model.filterPacketModel.remove({view_uuid:e}),this.refresh(e)}},{key:"copy",value:function(e,t){var n=this._model.filterThingModel.find({view_uuid:e}),r=this._model.filterPacketModel.find({view_uuid:e});if(n&&0!==n.length){var i,o={},a=OR(r);try{for(a.s();!(i=a.n()).done;){var l=i.value,u=Cx(32);o[l.get("uuid")]=u}}catch(e){a.e(e)}finally{a.f()}var c,s=OR(r);try{for(s.s();!(c=s.n()).done;){var d=c.value;this._model.filterPacketModel.create({uuid:o[d.get("uuid")],type:"packet",view_uuid:t,root_uuid:o[d.get("root_uuid")],parent_uuid:o[d.get("parent_uuid")],operator:d.get("operator")})}}catch(e){s.e(e)}finally{s.f()}this._model.filterThingModel.bulkCreate(OC(n,(function(e){return{packet_uuid:o[e.get("packet_uuid")],view_uuid:t,field_uuid:e.get("field_uuid"),func:e.get("func"),expected:e.get("expected")}})))}}},{key:"filterRecordIds",value:function(e,t){if(!e)return t;var n,r={},i=OR(this._getFilterFieldIds(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this._cellService.getFieldKeyValues(o);r[o]=a.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}}catch(e){i.e(e)}finally{i.f()}var l,u=[],c=OR(t);try{for(c.s();!(l=c.n()).done;){var s=l.value;this.isMatch(e,s,r)&&u.push(s)}}catch(e){c.e(e)}finally{c.f()}return u}},{key:"isMatch",value:function(e,t,n){return this._checkPacket(e,t,n)}},{key:"_getFilterFieldIds",value:function(e){var t,n=[],r=OR(e.filters);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.field_uuid&&n.push(i.field_uuid),"packet"===i.type){var o=this._getFilterFieldIds(i);n=n.concat(o)}}}catch(e){r.e(e)}finally{r.f()}return n.filter((function(e){return!!e}))}},{key:"isFieldInFilter",value:function(e,t){if(!t)return!1;var n=function(t){var r,i=OR(t.filters);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.field_uuid===e)return!0;if("packet"===o.type&&n(o))return!0}}catch(e){i.e(e)}finally{i.f()}return!1};return n(t)}},{key:"_buildFilter",value:function(e,t,n){var r,i=SC(this._model.fieldModel.find({uuid:t.map((function(e){return e.field_uuid}))}),(function(e,t){return e[t.get("uuid")]=t,e}),{}),o=OR(t);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.field||(null==n?void 0:n.notIncludeField)||(l.field=i[l.field_uuid])}}catch(e){o.e(e)}finally{o.f()}var u=e.find((function(e){return!e.root_uuid}));if(!u)return null;var c=function(n){var r=n.uuid,i=t.filter((function(e){return e.packet_uuid===r}))||[],o=e.filter((function(e){return e.parent_uuid===r}))||[],l=[].concat(Q_(i),Q_(o)).sort((function(e,t){return a()(e.created_at).unix()-a()(t.created_at).unix()}));n.filters=l;var u,s=OR(n.filters);try{for(s.s();!(u=s.n()).done;){var d=u.value;"packet"===d.type&&c(d)}}catch(e){s.e(e)}finally{s.f()}return n};return c(u),u}},{key:"_checkPacket",value:function(e,t,n){var r=this,i=e.operator||AO.And,o=function(e){return"packet"===e.type?r._checkPacket(e,t,n):r._checkThing(e,t,n)};return i===AO.And?e.filters.every((function(e){return o(e)})):e.filters.some((function(e){return o(e)}))}},{key:"_checkThing",value:function(e,t,n){var r,i,o=e.expected,a=e.func,l=e.field_uuid;if((null==o||""===o)&&!zO.includes(a))return!0;var u=null==(r=null==n?void 0:n[l])?void 0:r[t];if(null==u&&(u=this._cellService.getCellKeyValue(l,t)),e.field||(e.field=null==(i=this._fieldService.getField(l))?void 0:i.toJSON()),!e.field)return!1;var c=e.field.type,s=VO[c];return this._matchCondition(u,s,c,a,o)}},{key:"_matchCondition",value:function(e,t,n,r,i){var o,a;if("text"===t||"file"===t||"select"===t){var l=null==e?"":e+"";return n!==xO.LINK||r!==RO.startsWith&&r!==RO.notStartsWith&&r!==RO.endsWith&&r!==RO.notEndsWith||(l=l.split("|")[1]||""),"text"===t?this._filterFuncService[r](null==(o=null==l?void 0:l.toLowerCase)?void 0:o.call(l),null==(a=null==i?void 0:i.toLowerCase)?void 0:a.call(i)):this._filterFuncService[r](l,i)}if("number"===t){var u=e;return n!=xO.RATE&&n!==xO.PROGRESS||""!==u||(u="0"),(""===u||null==u||!isNaN(parseFloat(u)))&&this._filterFuncService[r](""===u||null==u?"":parseFloat(u),parseFloat(i))}if("timePeriod"===t)return""===e||null==e?this._filterFuncService[r](""):this._filterDateService.isMatchCondition(r,e,i);if("checkbox"===t)return e=e?"true":"false",i=!0===i||"true"===i?"true":"false",this._filterFuncService[r](e,i);if("multiSelect"===t){var c=[];return e?Array.isArray(e)?c=e.map((function(e){return e.value})):"string"==typeof e&&(c=e.split(",")):c=[],i&&"string"==typeof i&&(i=i.split(",")),this._filterFuncService[r](c,i)}return!1}}])}();function AR(e,t,n){var r;e=""===e||null===e?0:e,t=""===t||null===t?0:t;try{r=(e=new My(e))[n](t).valueOf()}catch(e){r=NaN}return r}MR([Yf(JP)],RR.prototype,"_model",2),MR([Yf(NM)],RR.prototype,"_fieldService",2),MR([Yf(vM)],RR.prototype,"_cellService",2),MR([Yf(VM)],RR.prototype,"_filterFuncService",2),MR([Yf(UM)],RR.prototype,"_filterDateService",2),MR([Yf(XM)],RR.prototype,"_filterHelperService",2),MR([Yf(nR)],RR.prototype,"_groupService",2),MR([Yf(SR)],RR.prototype,"_viewRecordService",2),RR=MR([Gf()],RR);var jR=function(e,t){return AR(e,t,"plus")},DR=function(e,t){return AR(e,t,"times")},TR=function(e,t){return isNaN(e)?NaN:""===t||0===parseFloat(t)?1/0:AR(e,t,"div")},FR=function(e,t){return AR(e,t,"lt")};function NR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return LR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function LR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var BR=Object.defineProperty,VR=Object.getOwnPropertyDescriptor,zR=function(){return ox((function e(){rx(this,e)}),[{key:"sort",value:function(e,t,n,r){return t=this.ascSortCreatedAt(t),t=YO.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,n,r):this.descSortSelect(t,n,r):YO.isNumberLike(n.get("type"))||xO.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):YO.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortCreatedAt",value:function(e){return e.sort((function(e,t){return+new Date(e.created_at)-+new Date(t.created_at)}))}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"";return(t.sortValue||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:FR(n,r)?-1:1}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:FR(r,n)?-1:1}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return a()(n).unix()-a()(r).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return a()(r).unix()-a()(n).unix()}))}},{key:"ascSortSelect",value:function(e,t,n){var r=OC(n,(function(e){return e.get("uuid")}));return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"descSortSelect",value:function(e,t,n){var r=OC(n,(function(e){return e.get("uuid")})).reverse();return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"_getViewRecordsOrderByOptions",value:function(e,t,n){var r,i=t.reduce((function(e,t){return e[t]=[],e}),{}),o=[],a=NR(e);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(YO.isSelect(n.get("type"))&&null!=l.sortValue)i[l.sortValue].push(l);else if(YO.isMultiSelect(n.get("type"))&&0!==l.sortValue.length){var u=l.sortValue.split(",")[0];i[u].push(l)}else o.push(l)}}catch(e){a.e(e)}finally{a.f()}var c=[];return t.forEach((function(e){c=c.concat(i[e])})),c=c.concat(o)}}])}();function HR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return WR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function WR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}zR=function(e,t,n,r){for(var i,o=r>1?void 0:r?VR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&BR(t,n,o),o}([Gf()],zR);var UR=Object.defineProperty,GR=Object.getOwnPropertyDescriptor,YR=function(e,t,n,r){for(var i,o=r>1?void 0:r?GR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&UR(t,n,o),o},$R=function(){return ox((function e(){rx(this,e)}),[{key:"getViewSort",value:function(e){return this._model.sortModel.findOne({view_uuid:e})}},{key:"isKeepSort",value:function(e){var t=this._model.viewConfigModel.findOne({view_uuid:e});return!!(null==t?void 0:t.get("keep_sort"))}},{key:"create",value:function(e,t,n){if(this._fieldService.getField(t.field_uuid)){var r=this._model.sortModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}}},{key:"remove",value:function(e){var t=this._model.sortModel.remove({view_uuid:e});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:!1}),this.refresh(e),t}},{key:"update",value:function(e,t,n){var r=this._model.sortModel.upsert({view_uuid:e},{view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}},{key:"copy",value:function(e,t){var n=this._model.sortModel.find({view_uuid:e});n&&0!==n.length&&this._model.sortModel.bulkCreate(OC(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"refresh",value:function(e){var t=this._model.viewModel.findOne({uuid:e}),n=this.getViewSort(e);if(n){var r=n.get("type"),i=this._fieldService.getField(n.get("field_uuid"));if(i)if(this._groupService.isGroup(e)){(null==t?void 0:t.get("type"))===WO.KANBAN&&(r&&r!==LO.ASC?n.get("type")===LO.DESC&&(r=LO.ASC):r=LO.DESC);var o,a=[],l=[],u=HR(this._viewRecordService.getGroupViewRecords(e));try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.viewRecords){var s=this._sortViewRecords(c.viewRecords,r,i);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:s.map((function(e){return e.record_uuid}))}),a=[].concat(Q_(a),Q_(s.map((function(e){return e.record_uuid})))),l=[].concat(Q_(l),Q_(s.map((function(e){return{uuid:e.uuid,hidden:e.hidden,view_uuid:e.view_uuid,record_uuid:e.record_uuid,group_item_key:e.group_item_key||GO}}))))}}}catch(e){u.e(e)}finally{u.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a}),l.length>0&&this._model.viewRecordModel.bulkCreate(l)}else{var d=this._model.viewRecordModel.find({view_uuid:e}),f=this._sortViewRecords(d,r,i);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:f.map((function(e){return e.record_uuid}))}),this._model.viewRecordModel.bulkCreate(f.map((function(e){return{uuid:e.uuid,view_uuid:e.view_uuid,hidden:e.hidden,record_uuid:e.record_uuid,group_item_key:e.group_item_key||GO}})))}}}},{key:"_sortViewRecords",value:function(e,t,n){var r=[],i=[],o=OC(e,(function(e){return e.get("record_uuid")})),a=SC(this._model.recordModel.find({uuid:o}),(function(e,t){return e[t.get("uuid")]=t.get("created_at"),e}),{}),l={};if(YO.isSelectLike(null==n?void 0:n.get("type"))||YO.isNumberLike(null==n?void 0:n.get("type"))){var u=this._cellService.getFieldKeyValues(n.get("uuid"),o);l=u.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}else{var c=this._cellService.getFieldFormatValues(n.get("uuid"),o);l=c.reduce((function(e,t){return e[t.recordId]=t.formatValue,e}),{})}return e.forEach((function(e){var t=e.get("record_uuid"),o={uuid:e.get("uuid"),hidden:e.get("hidden"),record_uuid:t,view_uuid:e.get("view_uuid"),group_item_key:e.get("group_item_key"),created_at:a[t],sortValue:l[t]};YO.isCheckbox(null==n?void 0:n.get("type"))&&(o.sortValue="true"===o.sortValue?1:0),""===o.sortValue||null==o.sortValue?i.push(o):r.push(o)})),r=this._sortFuncService.sort(t,r,n,this._fieldService.getFieldOptions(n.get("uuid"))),r=[].concat(Q_(r),i)}}])}();YR([Yf(JP)],$R.prototype,"_model",2),YR([Yf(zR)],$R.prototype,"_sortFuncService",2),YR([Yf(SR)],$R.prototype,"_viewRecordService",2),YR([Yf(NM)],$R.prototype,"_fieldService",2),YR([Yf(vM)],$R.prototype,"_cellService",2),YR([Yf(nR)],$R.prototype,"_groupService",2),$R=YR([Gf()],$R);var qR=Object.defineProperty,KR=Object.getOwnPropertyDescriptor;function XR(e,t){if(0===t)return"";var n=DR(TR(e,t),100);return-1===n.indexOf(".")?n+"%":parseFloat(n).toFixed(2)+"%"}var JR=function(){return ox((function e(){rx(this,e)}),[{key:"count",value:function(e){return e.length}},{key:"sum",value:function(e){return e.reduce((function(e,t){return jR(e,t)}),0)}},{key:"average",value:function(e){var t=this.sum(e),n=TR(t,e.length);return isNaN(n)?0:parseFloat(n).toFixed(2)}},{key:"max",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.max.apply(Math,Q_(e))}},{key:"min",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.min.apply(Math,Q_(e))}},{key:"filled",value:function(e){return e.filter((function(e){return""!==e})).length}},{key:"empty",value:function(e){return e.filter((function(e){return""===e})).length}},{key:"unique",value:function(e){var t={};return e.forEach((function(e){""!==e&&(t[e]=!0)})),Object.keys(t).length}},{key:"median",value:function(e){var t=(e=e.filter((function(e){return""!==e}))).sort((function(e,t){return e-t})),n=t.length;if(n%2==0){var r=t[n/2-1],i=t[n/2];return jR(r,i)/2}return t[Math.floor(n/2)]}},{key:"percentFilled",value:function(e){return XR(this.filled(e),e.length)}},{key:"percentEmpty",value:function(e){return XR(this.empty(e),e.length)}},{key:"percentUnique",value:function(e){return XR(this.unique(e),e.length)}},{key:"earliestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&(e[n]<t||""===t)&&(t=e[n]);return t}},{key:"latestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&e[n]>t&&(t=e[n]);return t}},{key:"dateRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:a()(n).diff(a()(t),"days")}},{key:"monthRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:a()(n).diff(a()(t),"months")}},{key:"checked",value:function(e){return e.reduce((function(e,t){return"是"===t||"true"===t||!0===t?e+1:e}),0)}},{key:"unchecked",value:function(e){return e.reduce((function(e,t){return"是"!==t&&"true"!==t&&!0!==t?e+1:e}),0)}},{key:"percentChecked",value:function(e){return XR(this.checked(e),e.length)}},{key:"percentUnchecked",value:function(e){return XR(this.unchecked(e),e.length)}}])}();function ZR(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return QR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QR(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function QR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}JR=function(e,t,n,r){for(var i,o=r>1?void 0:r?KR(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qR(t,n,o),o}([Gf()],JR);var eA=Object.defineProperty,tA=Object.getOwnPropertyDescriptor,nA=function(e,t,n,r){for(var i,o=r>1?void 0:r?tA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&eA(t,n,o),o},rA=function(){return ox((function e(){rx(this,e)}),[{key:"getViewStats",value:function(e){var t=this._model.statModel.find({view_uuid:e});if(0!==t.length)return t}},{key:"getStatValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this._model.statModel.findOne({view_uuid:e,field_uuid:t});if(n=n.filter((function(e){return!!e})),r&&0!==n.length)return{stat:r,value:this.calc(r.get("field_uuid"),r.get("type"),n)}}},{key:"calc",value:function(e,t,n){var r,i=[],o=ZR(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,l=this._cellService.getCellFormattedValue(e,a);l?i.push(l):i.push("")}}catch(e){o.e(e)}finally{o.f()}return this._statFuncService[t]?this._statFuncService[t](i):null}},{key:"upsert",value:function(e,t,n){this._model.statModel.upsert({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:t,type:n})}},{key:"remove",value:function(e,t){this._model.statModel.remove({view_uuid:e,field_uuid:t})}},{key:"copy",value:function(e,t){var n=this._model.statModel.find({view_uuid:e});n&&0!==n.length&&this._model.statModel.bulkCreate(OC(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}}])}();function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}nA([Yf(JP)],rA.prototype,"_model",2),nA([Yf(JR)],rA.prototype,"_statFuncService",2),nA([Yf(vM)],rA.prototype,"_cellService",2),rA=nA([Gf()],rA);var oA=Object.defineProperty,aA=Object.getOwnPropertyDescriptor,lA=function(e,t,n,r){for(var i,o=r>1?void 0:r?aA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oA(t,n,o),o},uA=function(){return ox((function e(){rx(this,e)}),[{key:"getViewConfig",value:function(e){return this._model.viewConfigModel.findOne({view_uuid:e})}},{key:"create",value:function(e){var t,n=this._model.viewModel.findById(e);if(n){if(n.get("type")===WO.CARD){var r=this._model.fieldModel.findOne({type:xO.IMAGE});return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1,cover_field_uuid:(null==r?void 0:r.get("uuid"))||null,cover_display:DO.Clip})}if(n.get("type")===WO.KANBAN)return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1});if(n.get("type")===WO.CALENDAR){var i=this._model.fieldModel.findOne({type:xO.DATE}),o=this._model.fieldModel.findOne({type:xO.TEXT}),a=this._model.fieldModel.find();return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),start_date_field_uuid:(null==i?void 0:i.get("uuid"))||null,end_date_field_uuid:(null==i?void 0:i.get("uuid"))||null,active_date:Ek().format("YYYY-MM-DD"),date_title_field_uuid:(null==o?void 0:o.get("uuid"))||(null==(t=a.get(0))?void 0:t.get("uuid"))||null,show_lunar:!1,sunday_at_first:!1,date_color_type:FO.CUSTOM,date_color:null})}return this._model.viewConfigModel.create({view_uuid:n.get("uuid")})}}},{key:"update",value:function(e,t){if(e)return this._model.viewConfigModel.upsert({view_uuid:e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iA(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({view_uuid:e},t))}},{key:"copy",value:function(e,t){var n=this.getViewConfig(e);if(n){var r=n.toJSON();delete r.uuid,r.view_uuid=t,this._model.viewConfigModel.create(r)}}},{key:"refresh",value:function(e){var t,n=this.getViewConfig(e);if(!n)return this.create(e);var r=this._model.fieldModel.find(),i=SC(r,(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{}),o=i[(null==n?void 0:n.get("cover_field_uuid"))||""];if(n&&n.get("cover_field_uuid")&&(!o||o!==xO.IMAGE)){var a=xC(r,(function(e){return e.get("type")===xO.IMAGE}));a?this.update(e,{cover_field_uuid:a.get("uuid")}):this.update(e,{cover_field_uuid:null})}var l=i[(null==n?void 0:n.get("start_date_field_uuid"))||""];if(!l||!YO.isDateLike(l)){var u=xC(r,(function(e){return e.get("type")===xO.DATE}));u?this.update(e,{start_date_field_uuid:u.get("uuid")}):this.update(e,{start_date_field_uuid:null})}var c=i[(null==n?void 0:n.get("end_date_field_uuid"))||""];if(!c||!YO.isDateLike(c)){var s=xC(r,(function(e){return e.get("type")===xO.DATE}));s?this.update(e,{end_date_field_uuid:s.get("uuid")}):this.update(e,{end_date_field_uuid:null})}if(!i[(null==n?void 0:n.get("date_title_field_uuid"))||""]){var d=xC(r,(function(e){return e.get("type")===xO.TEXT}));this.update(e,{date_title_field_uuid:(null==d?void 0:d.get("uuid"))||(null==(t=r.get(0))?void 0:t.get("uuid"))||null})}var f=null==n?void 0:n.get("date_color_type"),h=i[(null==n?void 0:n.get("date_color"))||""];f!==FO.FOLLOW_FIELD||h&&YO.isSelect(h)||this.update(e,{date_color:null})}},{key:"remove",value:function(e){this._model.viewConfigModel.remove({view_uuid:e})}}])}();function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cA(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function fA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}lA([Yf(JP)],uA.prototype,"_model",2),uA=lA([Gf()],uA);var hA=Object.defineProperty,pA=Object.getOwnPropertyDescriptor,vA=function(e,t,n,r){for(var i,o=r>1?void 0:r?pA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hA(t,n,o),o},gA=function(){return ox((function e(){rx(this,e)}),[{key:"getViewField",value:function(e,t){return this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t})}},{key:"getViewFields",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n,r=new yC,i=dA(this._model.viewFieldModel.find(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=new bC(o.toJSON());a.set("field",this._fieldService.getField(o.get("field_uuid"))),r.push([a])}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"getViewFieldsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewFieldModel.find(t).length}},{key:"getAllViewFields",value:function(e){return this.getViewFields(e,!1)}},{key:"create",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,i=e.sourceFieldId,o=e.direction,a=this._model.viewModel.findOne({uuid:t});if(a){var l=YO.isMultiple(n.type),u=this._fieldService.create({uuid:n.uuid,name:n.name,type:n.type,color:n.color,multiple:l,config:n.config,options:n.options}),c=this._model.viewFieldModel.find({view_uuid:t}),s=CC(c,(function(e){return e.get("field_uuid")===i})),d={uuid:null==r?void 0:r.uuid,size:null==r?void 0:r.size,created_at:null==r?void 0:r.created_at,updated_at:null==r?void 0:r.updated_at,view_uuid:t,field_uuid:u.uuid};return a.get("type")===WO.FORM&&(d.required=!0),this._model.viewFieldModel.create(d),c=this._model.viewFieldModel.find({view_uuid:t}),"before"===o?this._model.viewFieldModel.moveBefore({view_uuid:t,field_uuid:i},{view_uuid:t,field_uuid:n.uuid}):s!==c.length-1&&this._model.viewFieldModel.moveAfter({view_uuid:t,field_uuid:i},{view_uuid:t,field_uuid:n.uuid}),u}}},{key:"copy",value:function(e,t,n){var r,i=[],o=dA(this.getAllViewFields(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;n&&n(a)||i.push({field_uuid:a.get("field_uuid"),view_uuid:t,name:a.get("name"),size:a.get("size"),display_type:a.get("display_type"),required:a.get("required"),hidden:a.get("hidden")})}}catch(e){o.e(e)}finally{o.f()}this._model.viewFieldModel.bulkCreate(i)}},{key:"insert",value:function(e,t){var n=this._model.viewModel.findOne({uuid:t}),r=this._model.fieldModel.findOne({uuid:e});if(n&&r)return this._model.viewFieldModel.upsert({view_uuid:n.get("uuid"),field_uuid:r.get("uuid")},{view_uuid:n.get("uuid"),field_uuid:r.get("uuid"),hidden:!1})}},{key:"remove",value:function(e,t,n){var r={field_uuid:e,view_uuid:t};if(this._model.viewFieldModel.remove(r),!n)return this._fieldService.remove(e)}},{key:"removeAll",value:function(e){return this._model.viewFieldModel.remove({view_uuid:e}),this._fieldService.removeAll()}},{key:"update",value:function(e,t,n,r){return this._model.viewFieldModel.update({view_uuid:e,field_uuid:t},nx({},n,r))}},{key:"updateOrder",value:function(e,t,n){var r=this._model.viewFieldModel.find({view_uuid:e}),i=CC(r,(function(e){return e.get("field_uuid")===t})),o=n?CC(r,(function(e){return e.get("field_uuid")===n})):0,a=r.get(o);i<o?this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t}):this._model.viewFieldModel.moveBefore({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t})}},{key:"refresh",value:function(e){var t=this.getViewFields(e,!1),n=SC(this._model.fieldModel.find(),(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{});this._viewConfigService.refresh(e);var r,i=dA(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n[o.get("field_uuid")]?delete n[o.get("field_uuid")]:this._model.viewFieldModel.remove({field_uuid:o.get("field_uuid"),view_uuid:o.get("view_uuid")})}}catch(e){i.e(e)}finally{i.f()}var a=Object.keys(n);if(a.length>0){var l,u=dA(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;this._model.viewFieldModel.create({view_uuid:e,field_uuid:c})}}catch(e){u.e(e)}finally{u.f()}}}},{key:"clone",value:function(e,t,n){var r=this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t});if(r){var i=this._fieldService.clone(r.get("field_uuid"),n);if(i){var o=this._model.viewFieldModel.create({view_uuid:r.get("view_uuid"),field_uuid:n,size:null==r?void 0:r.get("size"),name:i.name,display_type:r.get("display_type"),required:r.get("required")});return this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:n}),o}}}},{key:"copyField",value:function(e){var t,n=e.viewId,r=e.uuid,i=e.sourceFieldId,o=this._model.fieldModel.findOne({uuid:i}),a=this.clone(n,i,r),l=this._model.fieldModel.findOne({uuid:a.field_uuid});if(o&&l){var u=this._fieldService.getFieldOptions(i),c=this._fieldService.getFieldOptions(l.get("uuid")),s=new Map,d=new Map;OC(u,(function(e){d.set(e.get("name"),e.get("uuid"))})),OC(c,(function(e){s.set(d.get(e.get("name"))||"",e.get("uuid"))}));var f,h=dA(this._model.viewRecordModel.find({view_uuid:n}));try{for(h.s();!(f=h.n()).done;){var p=f.value;if(l.get("type")===xO.SELECT||l.get("type")==xO.MULTI_SELECT){var v=l.get("type")==xO.MULTI_SELECT,g=this._cellService.getCell(i,p.get("record_uuid")),m=(v?null==(t=null==g?void 0:g.value)?void 0:t.map((function(e){return s.get(e)})):s.get(null==g?void 0:g.value))||"";this._cellService.setCell(l.get("uuid"),p.get("record_uuid"),sA(sA({},g),{},{value:m}))}else this._cellService.copy(i,p.get("record_uuid"),l.get("uuid"),p.get("record_uuid"))}}catch(e){h.e(e)}finally{h.f()}}}}])}();function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mA(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function wA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}vA([Yf(JP)],gA.prototype,"_model",2),vA([Yf(NM)],gA.prototype,"_fieldService",2),vA([Yf(uA)],gA.prototype,"_viewConfigService",2),vA([Yf(vM)],gA.prototype,"_cellService",2),gA=vA([Gf()],gA);var _A=Object.defineProperty,xA=Object.getOwnPropertyDescriptor,kA=function(e,t,n,r){for(var i,o=r>1?void 0:r?xA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_A(t,n,o),o},CA=function(){return ox((function e(){rx(this,e)}),[{key:"getView",value:function(e){return this._model.viewModel.findById(e)}},{key:"getViews",value:function(e){var t={};return(null==e?void 0:e.skipType)&&(t.type={$not:e.skipType}),(null==e?void 0:e.type)&&(t.type=e.type),this._model.viewModel.find(t)}},{key:"setActiveView",value:function(e){var t=this._model.viewModel.findById(e);if(t||(t=this._model.viewModel.find()[0])){var n=this._model.tableModel.find().get(0).get("uuid");this._activeViewId=t.get("uuid"),this._model.tableModel.update({uuid:n},{active_view_uuid:t.get("uuid")})}}},{key:"getActiveView",value:function(){var e,t;if(this._activeViewId)t=this._model.viewModel.findOne({uuid:this._activeViewId});else{var n=null==(e=this._model.tableModel.find().get(0))?void 0:e.get("active_view_uuid");n&&(t=this.getView(n))}return t||(t=this._model.viewModel.find().get(0)),this._activeViewId=null==t?void 0:t.get("uuid"),t}},{key:"create",value:function(e){var t,n,r=this,i=null==(t=this.getActiveView())?void 0:t.get("uuid"),o=null==(n=this._contextService.currentUser)?void 0:n.uid,a=this._model.viewModel.create({uuid:e.uuid,name:e.name,type:e.type,creator_id:o,modifier_id:o}),l=a.uuid;return this._viewConfigService.create(l),i&&(this._viewFieldService.copy(i,l,(function(e){var t=r._fieldService.getField(e.get("field_uuid"));return a.type===WO.FORM&&YO.isSystemType(t.get("type"))})),this._viewRecordService.copy(i,l)),e.type===WO.CARD?this._createCard(l):e.type===WO.KANBAN?this._createKanban(l):e.type===WO.FORM&&this._createForm(l),this.refresh(l),this._model.viewModel.findOne({uuid:l})}},{key:"_createCard",value:function(e){var t,n,r=0,i=bA(this._viewFieldService.getViewFields(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this._fieldService.getField(o.get("field_uuid"));(null==a?void 0:a.get("type"))===xO.IMAGE&&(t||(t=a.get("uuid"))),this._model.viewFieldModel.update({view_uuid:o.get("view_uuid"),field_uuid:o.get("field_uuid")},{hidden:r>=3}),r++}}catch(e){i.e(e)}finally{i.f()}t&&this._model.viewConfigModel.update({view_uuid:e},{cover_field_uuid:t})}},{key:"_createKanban",value:function(e){var t=this._fieldService.getFields(),n=this._getKanbanGroupField(t);n&&this._groupService.create(e,{field_uuid:n.get("uuid"),type:NO.ASC})}},{key:"_createForm",value:function(e){var t,n=bA(this._viewFieldService.getViewFields(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._fieldService.getField(r.get("field_uuid"));YO.isSystemType(null==i?void 0:i.get("type"))?this._model.viewFieldModel.remove({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")}):this._model.viewFieldModel.update({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")},{required:!0})}}catch(e){n.e(e)}finally{n.f()}}},{key:"_getKanbanGroupField",value:function(e){for(var t=[],n=0,r=[xO.SELECT,xO.MENTION];n<r.length;n++){var i,o=r[n],a=bA(e);try{for(a.s();!(i=a.n()).done;){var l=i.value;o===(null==l?void 0:l.get("type"))&&t.push(l)}}catch(e){a.e(e)}finally{a.f()}}for(var u=0,c=t;u<c.length;u++){var s=c[u];if((null==s?void 0:s.get("type"))===xO.SELECT&&s.get("color"))return s}if(0===t.length){var d=SO.find((function(e){return e.type===xO.SELECT})),f=this._fieldService.create({name:d.name,type:d.type,color:d.color,multiple:!!d.multiple,options:d.options});return this._fieldService.getField(f.uuid)}return t[0]}},{key:"createByType",value:function(e,t){var n=this._model.viewModel.find({type:t}),r=UO[t].name;return n.length>0&&(r+=n.length),this.create({uuid:e,name:r,type:t})}},{key:"update",value:function(e,t){var n;if(!this.getView(e))throw new Error("视图 ".concat(e," 没有找到"));var r=null==(n=this._contextService.currentUser)?void 0:n.uid;return this._model.viewModel.update({uuid:e},yA(yA({},t),{},{modifier_id:r}))}},{key:"remove",value:function(e){if(!this.getView(e))throw new Error("view not found. id: ".concat(e));return this._viewConfigService.remove(e),this._model.viewRecordModel.remove({view_uuid:e}),this._groupService.remove(e),this._sortService.remove(e),this._filterService.remove(e),this._model.viewModel.remove({uuid:e})}},{key:"copy",value:function(e,t){var n;if(e&&t){var r=this.getView(t);if(!r)throw new Error("view not found. id: ".concat(t));var i=r.get("name")+" (".concat(wx("副本"),")"),o=r.get("type"),a=null==(n=this._contextService.currentUser)?void 0:n.uid;return this._model.viewModel.create({uuid:e,name:i,type:o,creator_id:a,modifier_id:a}),this._viewConfigService.copy(t,e),this._viewFieldService.copy(t,e),this._viewRecordService.copy(t,e),this._groupService.copy(t,e),this._sortService.copy(t,e),this._filterService.copy(t,e),this._statService.copy(t,e),this._model.viewModel.findOne({uuid:e})}}},{key:"updateOrder",value:function(e,t){var n=this._model.viewModel.find(),r=CC(n,(function(t){return t.get("uuid")===e})),i=CC(n,(function(e){return e.get("uuid")===t}));r<i&&(i=Math.min(i,n.length-1));var o=n.get(i),a={};o&&(a={uuid:o.get("uuid")}),r<i?this._model.viewModel.moveAfter(a,{uuid:e}):this._model.viewModel.moveBefore(a,{uuid:e})}},{key:"refresh",value:function(e){var t=this.getView(e);if((null==t?void 0:t.get("type"))!==WO.FORM){var n=this._groupService.getViewGroup(e);(null==t?void 0:t.get("type"))===WO.KANBAN&&((null==n?void 0:n.group)||(n=this._groupService.createDefaultKanbanViewGroup(e))),this._viewFieldService.refresh(e);var r={},i={};this._model.recordModel.find().forEach((function(e){r[e.get("uuid")]=!0}));var o,a=[],l=bA(this._model.viewRecordModel.find({view_uuid:e}));try{for(l.s();!(o=l.n()).done;){var u=o.value.get("record_uuid");i[u]=!0,r[u]||a.push(u)}}catch(e){l.e(e)}finally{l.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a});var c=this._filterService.getViewFilter(e),s=[];if(Object.keys(r).forEach((function(e){i[e]||s.push(e)})),s.length>0){var d=s.map((function(t){return{uuid:Cx(32),view_uuid:e,record_uuid:t,group_item_key:GO}}));this._model.viewRecordModel.bulkCreate(d)}(null==n?void 0:n.group)&&this._groupService.refreshGroup(e,n.group.toJSON()),c&&this._filterService.refreshData(e,null,c),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}}}])}();kA([Yf(JP)],CA.prototype,"_model",2),kA([Yf(eM)],CA.prototype,"_contextService",2),kA([Yf(NM)],CA.prototype,"_fieldService",2),kA([Yf(uA)],CA.prototype,"_viewConfigService",2),kA([Yf(SR)],CA.prototype,"_viewRecordService",2),kA([Yf(gA)],CA.prototype,"_viewFieldService",2),kA([Yf(nR)],CA.prototype,"_groupService",2),kA([Yf($R)],CA.prototype,"_sortService",2),kA([Yf(RR)],CA.prototype,"_filterService",2),kA([Yf(rA)],CA.prototype,"_statService",2),CA=kA([Gf()],CA);var SA=Object.defineProperty,OA=Object.getOwnPropertyDescriptor,EA=function(e,t,n,r){for(var i,o=r>1?void 0:r?OA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&SA(t,n,o),o},IA=function(){return ox((function e(){rx(this,e)}),[{key:"setProcessor",value:function(e){this._processor=e}},{key:"setContent",value:function(e){this._database.clear(),this._processor.toModel(e,this._database)}},{key:"setRecords",value:function(e){var t;this._database.clear([GE.table,XE.table,aI.table,gI.table,_I.table,OI.table,JI.table]),this._processor.toRecordModel(e,this._database);var n=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid");n&&this._viewService.refresh(n)}},{key:"setUsers",value:function(e){this._database.clear([mP.table]),this._processor.toUserModel(e,this._database)}},{key:"getContent",value:function(){return this._processor.toData(this._database)}}])}();function PA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PA(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return AA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function AA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}EA([Yf(sC)],IA.prototype,"_database",2),EA([Yf(CA)],IA.prototype,"_viewService",2),IA=EA([Gf()],IA);var jA=Object.defineProperty,DA=Object.getOwnPropertyDescriptor,TA=function(e,t,n,r){for(var i,o=r>1?void 0:r?DA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&jA(t,n,o),o},FA=function(){return ox((function e(){rx(this,e)}),[{key:"getTable",value:function(){return this._model.tableModel.find().get(0)}},{key:"getVersion",value:function(){return this._model.tableModel.find().get(0).get("version")}},{key:"getViewList",value:function(){return this._model.viewModel.find()}},{key:"createTable",value:function(){this._model.tableModel.create({version:"2.0.0"})}},{key:"create",value:function(){this.createTable();var e,t=RA(SO);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._fieldService.create(n)}}catch(e){t.e(e)}finally{t.f()}var r=UO[WO.GRID],i=Cx(32);this._viewService.create({uuid:i,name:r.name,type:r.type});for(var o=0,a=Array.from({length:3});o<a.length;o++){a[o];var l=Cx(32);this._model.recordModel.create({uuid:l}),this._model.viewRecordModel.create({view_uuid:i,record_uuid:l})}}},{key:"replaceTable",value:function(e){var t=this,n=e.sheet[0],r=Object.values(n.views);this._viewService.getViews().forEach((function(e){t._viewRecordService.removeAll(e.get("uuid"),!1),t._viewFieldService.removeAll(e.get("uuid")),t._model.viewConfigModel.remove({view_uuid:e.get("uuid")}),t._model.statModel.remove({view_uuid:e.get("uuid")}),t._viewService.remove(e.get("uuid"))})),r.forEach((function(r){var i;t._viewService.create({id:r.id,uuid:r.id,type:r.type,name:r.name}),r.type!==WO.FORM&&(n.columns.forEach((function(e){var n,i={uuid:e.id,name:e.name,type:e.type,color:e.color,options:null==(n=e.options)?void 0:n.map((function(e){return{uuid:e.id,name:e.value,color:e.color}}))},o=YO.isMultiple(e.type),a=t._fieldService.create(MA(MA({},i),{},{multiple:o})),l={view_uuid:r.id,field_uuid:a.uuid};r.type===WO.FORM&&(l.required=!0),t._model.viewFieldModel.create(l)})),null==(i=e.records)||i.forEach((function(e){var n=JSON.parse(e.data),i=e.id||e.uuid;n.uuid=i,t._viewRecordService.createRecord(r.id,i,n)})))})),this._viewService.setActiveView(n.activeView)}}])}();TA([Yf(JP)],FA.prototype,"_model",2),TA([Yf(NM)],FA.prototype,"_fieldService",2),TA([Yf(CA)],FA.prototype,"_viewService",2),TA([Yf(SR)],FA.prototype,"_viewRecordService",2),TA([Yf(gA)],FA.prototype,"_viewFieldService",2),FA=TA([Gf()],FA);var NA=Object.defineProperty,LA=Object.getOwnPropertyDescriptor,BA=function(e,t,n,r){for(var i,o=r>1?void 0:r?LA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&NA(t,n,o),o},VA=function(){return ox((function e(){rx(this,e)}),[{key:"getViewShare",value:function(e){return this._model.viewShareModel.findOne({view_uuid:e})}},{key:"upsertViewShare",value:function(e,t){this._model.viewShareModel.upsert({view_uuid:e},{view_uuid:e,src:null==t?void 0:t.src,status:null==t?void 0:t.status})}}])}();BA([Yf(JP)],VA.prototype,"_model",2),VA=BA([Gf()],VA);var zA=Object.defineProperty,HA=Object.getOwnPropertyDescriptor,WA=function(e,t,n,r){for(var i,o=r>1?void 0:r?HA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zA(t,n,o),o},UA=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).processor;this._modelInitial.init({models:[fP,AP,xP,EP,NP,HP,$P,mP,lP,nP,JI,zI,YI,RI,FI,tI,dI,OI,_I,gI,aI,XE,GE]}),e&&this._contentService.setProcessor(e)}},{key:"start",value:function(){}},{key:"initData",value:function(e){this._contentService.setContent(e);var t=this._contextService.currentUser;t&&this._modelService.getModel("user").upsert({uid:t.uid},{uid:String(t.uid),work_id:t.work_id,name:t.name,login:t.login,icon:t.icon})}},{key:"initRecords",value:function(e){this._contentService.setRecords(e)}},{key:"initUsers",value:function(e){this._contentService.setUsers(e)}}])}();WA([Yf(XO)],UA.prototype,"_modelInitial",2),WA([Yf(LE)],UA.prototype,"_modelService",2),WA([Yf(IA)],UA.prototype,"_contentService",2),WA([Yf(eM)],UA.prototype,"_contextService",2),UA=WA([Gf()],UA);function GA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return YA(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YA(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function YA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $A=Object.defineProperty,qA=Object.getOwnPropertyDescriptor,KA=function(e,t,n,r){for(var i,o=r>1?void 0:r?qA(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$A(t,n,o),o},XA=function(){return ox((function e(){rx(this,e)}),[{key:"currentUser",get:function(){return this._contextService.currentUser}},{key:"maxRecordCount",get:function(){return this._configuration.getValue("record.maxCount")}},{key:"version",get:function(){return"1.1.0"}},{key:"getTable",value:function(){return this._tableService.getTable()}},{key:"getContent",value:function(){return this._contentService.getContent()}},{key:"isEmptyTable",value:function(){var e,t,n,r=this.getAllFields();if(3!==r.length)return!1;if(r.get(0).get("type")!==SO[0].type)return!1;if(r.get(1).get("type")!==SO[1].type)return!1;if(r.get(2).get("type")!==SO[2].type)return!1;var i=this.getViews();if((null==i?void 0:i.length)>1)return!1;var o=this.getFieldOptions(r.get(1).get("uuid"));if(3!==o.length)return!1;if(o.get(0).get("name")!==(null==(e=SO[1].options)?void 0:e[0].name))return!1;if(o.get(1).get("name")!==(null==(t=SO[1].options)?void 0:t[1].name))return!1;if(o.get(2).get("name")!==(null==(n=SO[1].options)?void 0:n[2].name))return!1;var a,l=GA(this.getRecords());try{for(l.s();!(a=l.n()).done;){var u,c=a.value,s=GA(r);try{for(s.s();!(u=s.n()).done;){var d=u.value;if(""!==this.getCellFormattedValue(d.get("uuid"),c.get("uuid")))return!1}}catch(e){s.e(e)}finally{s.f()}}}catch(e){l.e(e)}finally{l.f()}return!0}},{key:"getActiveView",value:function(){return this._viewService.getActiveView()}},{key:"getView",value:function(e){return e=e||this.getActiveViewId(),this._viewService.getView(e)}},{key:"getViews",value:function(e){return this._viewService.getViews(e)}},{key:"getViewConfig",value:function(e){return e=e||this.getActiveViewId(),this._viewConfigService.getViewConfig(e)}},{key:"getViewFilter",value:function(e,t){return e=e||this.getActiveViewId(),this._filterService.getViewFilter(e,t)}},{key:"getViewGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.getViewGroup(e)}},{key:"getViewSort",value:function(e){return e=e||this.getActiveViewId(),this._sortService.getViewSort(e)}},{key:"getViewStats",value:function(e){return this._statService.getViewStats(e)}},{key:"getViewShare",value:function(e){return this._viewShareService.getViewShare(e)}},{key:"getStatValue",value:function(e,t,n){return this._statService.getStatValue(e,t,n)}},{key:"calcStatValue",value:function(e,t,n){return this._statService.calc(e,t,n)}},{key:"getCell",value:function(e,t){return this._cellService.getCell(e,t)}},{key:"getFieldCells",value:function(e){return this._cellService.getFieldCells(e)}},{key:"getFieldFormatValues",value:function(e,t){return this._cellService.getFieldFormatValues(e,t)}},{key:"getFieldKeyValues",value:function(e,t){return this._cellService.getFieldKeyValues(e,t)}},{key:"getViewRecordCells",value:function(e,t){return null==t&&(t=e,e=this.getActiveViewId()),this._cellService.getViewRecordCells(e,t)}},{key:"getRecordCells",value:function(e){return this._cellService.getRecordCells(e)}},{key:"getOriginRecord",value:function(e){return this._recordService.getRecordById(e)}},{key:"getViewRecordByRecordId",value:function(e){var t=this._viewService.getActiveView().get("uuid");return this._viewRecordService.getViewRecordByRecordId(t,e)}},{key:"getRecordDesc",value:function(e){return this._recordService.getRecordDesc(e)}},{key:"getViewRecordsDetail",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};return this._viewRecordService.getViewRecordsDetail(e,t,n)}},{key:"getRecordByIndex",value:function(e){return this.getFlatViewRecords().get(e)}},{key:"getFieldByIndex",value:function(e){var t=this.getViewFields().get(e);return t?this._fieldService.getField(t.get("field_uuid")):null}},{key:"getCellByIndexes",value:function(e,t){var n=this.getFieldByIndex(t),r=this.getRecordByIndex(e);return n&&r?this.getCell(null==n?void 0:n.get("uuid"),r.get("record_uuid")):null}},{key:"getVisibleRecordIdsInActiveView",value:function(){var e=this.getActiveViewId();return this._viewRecordService.getVisibleRecordIds(e)}},{key:"getPrimaryCellInRecord",value:function(e,t){if(this._recordService.getRecordById(e)){var n=t;if(!n){var r=this.getViewFields(),i=null==r?void 0:r.get(0);n=null==i?void 0:i.get("field_uuid")}return n?{formattedValue:this._cellService.getCellFormattedValue(n,e),recordId:e,fieldId:n}:null}return null}},{key:"getAllFields",value:function(){return this._fieldService.getFields()}},{key:"getRecords",value:function(){return this._recordService.getRecords()}},{key:"getViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecords(e)}},{key:"getGroupViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getGroupViewRecords(e)}},{key:"getOriginViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getOriginViewRecords(e)}},{key:"getFlatViewRecords",value:function(e){return e=e||this.getActiveViewId(),this.isGroup(e)?this._viewRecordService.getGroupFlatViewRecords(e):this._viewRecordService.getFlatViewRecords(e)}},{key:"getViewRecordsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecordsCount(e)}},{key:"getFieldOptionCells",value:function(e,t){var n=this.getField(t.field_uuid),r=[];if((null==n?void 0:n.get("type"))===xO.MENTION){var i=this.getUsers(t.uuid.split(",").map((function(e){return String(e)}))),o=this.groupValue({fieldId:t.field_uuid,value:Q_(i)});r=(this.getFieldRecords(e,t.field_uuid,o)||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}else{r=(this.getFieldRecords(e,t.field_uuid,this.groupValue({fieldId:t.field_uuid,value:t.uuid}))||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}return r}},{key:"getFieldRecords",value:function(e,t,n){return this._viewRecordService.getFieldRecords(e,t,n)}},{key:"getField",value:function(e){return this._fieldService.getField(e)}},{key:"getFieldOption",value:function(e){return this._fieldService.getFieldOption(e)}},{key:"getFieldOptions",value:function(e){return this._fieldService.getFieldOptions(e)}},{key:"getViewField",value:function(e,t){return this._viewFieldService.getViewField(e,t)}},{key:"isGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.isGroup(e)}},{key:"getViewFields",value:function(e,t){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,t)}},{key:"getViewFieldsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFieldsCount(e)}},{key:"getAllViewFields",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,!1)}},{key:"getCellFormattedValue",value:function(e,t){return this._cellService.getCellFormattedValue(e,t)||""}},{key:"getActiveViewId",value:function(){var e,t,n=this._viewService.getActiveView();return n?null==n?void 0:n.get("uuid"):null==(t=null==(e=this.getViews())?void 0:e.get(0))?void 0:t.get("uuid")}},{key:"getActiveViewType",value:function(){var e;return null==(e=this._viewService.getActiveView())?void 0:e.get("type")}},{key:"getUser",value:function(e){return this._model.userModel.findOne({uid:e})}},{key:"getUsers",value:function(e){return this._model.userModel.find({uid:e})}},{key:"getValueField",value:function(e){return this._fieldRegistry.getValueField(e)}},{key:"keyValue",value:function(e){return this._cellService.keyValue(e)}},{key:"groupValue",value:function(e){return this._cellService.groupValue(e)}},{key:"getGroupItems",value:function(e,t){return this._groupService.getGroupItems(e,t)}},{key:"filterRecordIds",value:function(e,t){return this._filterService.filterRecordIds(e,t)}},{key:"isFieldInFilter",value:function(e,t){return this._filterService.isFieldInFilter(e,t)}},{key:"getDefaultThing",value:function(e,t,n){return this._filterHelperService.getDefaultThing(e,t,n)}}])}();function JA(e,t,n){return t=DC(t),jC(e,ZA()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ZA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZA=function(){return!!e})()}KA([Yf(FA)],XA.prototype,"_tableService",2),KA([Yf(NM)],XA.prototype,"_fieldService",2),KA([Yf(bR)],XA.prototype,"_recordService",2),KA([Yf(CA)],XA.prototype,"_viewService",2),KA([Yf(uA)],XA.prototype,"_viewConfigService",2),KA([Yf(gA)],XA.prototype,"_viewFieldService",2),KA([Yf(SR)],XA.prototype,"_viewRecordService",2),KA([Yf(VA)],XA.prototype,"_viewShareService",2),KA([Yf(rA)],XA.prototype,"_statService",2),KA([Yf(nR)],XA.prototype,"_groupService",2),KA([Yf($R)],XA.prototype,"_sortService",2),KA([Yf(RR)],XA.prototype,"_filterService",2),KA([Yf(XM)],XA.prototype,"_filterHelperService",2),KA([Yf(vM)],XA.prototype,"_cellService",2),KA([Yf(cM)],XA.prototype,"_fieldRegistry",2),KA([Yf(RC)],XA.prototype,"_configuration",2),KA([Yf(eM)],XA.prototype,"_contextService",2),KA([Yf(IA)],XA.prototype,"_contentService",2),KA([Yf(JP)],XA.prototype,"_model",2),XA=KA([Gf()],XA);var QA=Object.defineProperty,ej=Object.getOwnPropertyDescriptor,tj=function(e,t,n,r){for(var i,o=r>1?void 0:r?ej(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&QA(t,n,o),o},nj=function(e){return e.GROUP="group",e.SORT="sort",e.FILTER="filter",e.ACTIVE_VIEW="activeView",e.CUSTOM="custom",e}(nj||{}),rj=function(e){function t(){var e;return rx(this,t),(e=JA(this,t,arguments))._onBeforeRefresh=e._register(new dS),e.onBeforeRefresh=e._onBeforeRefresh.event,e._onAfterRefresh=e._register(new dS),e.onAfterRefresh=e._onAfterRefresh.event,e}return NC(t,e),ox(t,[{key:"isNeedRefreshGroup",value:function(e,t){var n,r=this._groupService.getViewGroup(e);if(!(null==r?void 0:r.group))return!1;return("string"==typeof t?[t]:t).includes(null==(n=r.group)?void 0:n.get("field_uuid"))}},{key:"isNeedRefreshSort",value:function(e,t){var n=this._sortService.getViewSort(e),r=[];return r="string"==typeof t?[t]:t,this._sortService.isKeepSort(e)&&!!n&&r.includes(n.get("field_uuid"))}},{key:"isNeedRefreshFilter",value:function(e,t,n,r,i){var o=!1,a=this._filterService.getViewFilter(e);if(!a)return o;var l=this._model.fieldModel.findOne({uuid:t}),u=this._fieldRegistry.getValueField(null==l?void 0:l.get("type")),c=this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:n}),s=t?!this._filterService.isMatch(a,n,nx({},t,nx({},n,null==u?void 0:u.keyValue(r)))):!this._filterService.isMatch(a,n);return o=i?s:s!=(null==c?void 0:c.get("hidden"))}},{key:"isNeedRefreshFilterWithField",value:function(e,t){var n=this._model.filterThingModel.find({view_uuid:e}).toJSON();if(!n.length)return!1;var r=n.map((function(e){return e.field_uuid}));return("string"==typeof t?[t]:t).some((function(e){return r.includes(e)}))}},{key:"getRefreshType",value:function(e,t,n,r){return this.isNeedRefreshGroup(e,t)?"group":this.isNeedRefreshSort(e,t)?"sort":n&&"string"==typeof t&&this.isNeedRefreshFilter(e,t,n,r)?"filter":""}},{key:"emitBeforeRefresh",value:function(e,t,n,r){this._onBeforeRefresh.emit({type:e,commandName:t,params:n,action:r})}},{key:"emitAfterRefresh",value:function(e){this._onAfterRefresh.emit({type:e})}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ij(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function lj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}tj([Yf(nR)],rj.prototype,"_groupService",2),tj([Yf($R)],rj.prototype,"_sortService",2),tj([Yf(RR)],rj.prototype,"_filterService",2),tj([Yf(cM)],rj.prototype,"_fieldRegistry",2),tj([Yf(JP)],rj.prototype,"_model",2),tj([Df()],rj.prototype,"destroy",1),rj=tj([Gf()],rj);var uj=Object.defineProperty,cj=Object.getOwnPropertyDescriptor,sj=function(e,t,n,r){for(var i,o=r>1?void 0:r?cj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uj(t,n,o),o},dj=function(){return ox((function e(){rx(this,e)}),[{key:"setActiveView",value:function(e){var t=this,n=this._viewService.setActiveView(e),r=function(){t._viewService.refresh(e),t._refreshEventService.emitAfterRefresh(nj.ACTIVE_VIEW)};return globalThis.localStorage.debugPerformance?r():_O((function(){r()})),n}},{key:"createView",value:function(e){return this._viewService.create(e)}},{key:"createViewByType",value:function(e,t){return this._viewService.createByType(e,t)}},{key:"updateView",value:function(e,t){return this._viewService.update(e,t)}},{key:"removeView",value:function(e){return this._viewService.remove(e)}},{key:"copyView",value:function(e,t){return this._viewService.copy(e,t)}},{key:"updateViewConfig",value:function(e,t){return this._viewConfigService.update(e,t)}},{key:"updateViewOrder",value:function(e,t){this._viewService.updateOrder(e,t)}},{key:"updateRecordOrder",value:function(e,t,n,r,i){this._viewRecordService.updateOrder(e,t,n,r,i),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}},{key:"updateRecord",value:function(e,t){this._recordService.update(e,t)}},{key:"updateFieldOrder",value:function(e,t,n){this._viewFieldService.updateOrder(e,t,n)}},{key:"updateFieldOptionOrder",value:function(e,t,n){this._fieldService.updateFieldOptionOrder(e,t,n)}},{key:"createFieldOption",value:function(e,t,n){return this._fieldService.createFieldOption(e,t,n)}},{key:"updateFieldOption",value:function(e,t){if(t.users){var n=this._readService.getFieldOption(e);if(0===t.users.length)return void this.removeFieldOption(e);var r=this._viewService.getActiveView();if(!r)return;var i=this._readService.getFieldOptionCells(r.get("uuid"),null==n?void 0:n.toJSON()),o=null==i?void 0:i.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:t.users||[],fieldType:e.fieldType,uuid:e.uuid}})),a=this._cellService.keyValue({fieldId:t.field_uuid,value:Q_(t.users)});return this.updateMentionFieldOptionId(e,a||""),void this.bulkSetCell(o)}this._fieldService.updateFieldOption(e,t)}},{key:"updateMentionFieldOptionId",value:function(e,t){this._fieldService.updateMentionFieldOptionId(e,t)}},{key:"createSort",value:function(e,t,n){return this._sortService.create(e,t,n)}},{key:"removeSort",value:function(e){return this._sortService.remove(e)}},{key:"updateSort",value:function(e,t,n){return this._sortService.update(e,t,n)}},{key:"refreshSort",value:function(e){return this._sortService.refresh(e)}},{key:"createGroup",value:function(e,t){this._groupService.create(e,t)}},{key:"removeGroup",value:function(e){this._groupService.remove(e)}},{key:"updateGroup",value:function(e,t){return this._groupService.update(e,t)}},{key:"createFilterPacket",value:function(e,t){return this._filterService.createPacket(e,t)}},{key:"updateFilterPacket",value:function(e){return this._filterService.updatePacket(e)}},{key:"removeFilterPacket",value:function(e,t,n){return this._filterService.removePacket(e,t,n)}},{key:"createFilterThing",value:function(e){return this._filterService.createThing(e)}},{key:"removeFilterThing",value:function(e){return this._filterService.removeThing(e)}},{key:"removeFilterThingByFieldId",value:function(e,t){return this._filterService.removeThingByFieldId(e,t)}},{key:"updateFilterThing",value:function(e){this._filterService.updateThing(e)}},{key:"refreshFilter",value:function(e){this._filterService.refresh(e)}},{key:"createField",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,i=e.sourceFieldId,o=e.direction,a=this._viewFieldService.create({viewId:t,field:n,viewField:r,sourceFieldId:i,direction:o});return this.refreshView(),a}},{key:"copyField",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceFieldId;return this._viewFieldService.copyField({viewId:t,uuid:n,sourceFieldId:r})}},{key:"changeFieldType",value:function(e,t,n,r){var i=this;if(r=r||this._readService.getFieldCells(e),this._fieldService.changeFieldType(e,t,n,r),n!==xO.SELECT||n!==xO.MENTION){var o=this._readService.getViews(),a=xC(this._readService.getAllFields(),(function(e){return e.get("type")===xO.SELECT||e.get("type")===xO.MENTION}));o.forEach((function(t){var n=i._readService.getViewGroup(t.get("uuid"));(null==n?void 0:n.group)&&(null==n?void 0:n.group.get("field_uuid"))===e&&t.get("type")===WO.KANBAN&&(a?i.updateGroup(t.get("uuid"),{field_uuid:a.get("uuid"),type:NO.ASC}):i.removeGroup(t.get("uuid")))}))}}},{key:"removeField",value:function(e){var t=this._viewService.getActiveView(),n=t.get("uuid"),r=t&&this._readService.getAllViewFields(n);if(r){var i=CC(r,(function(t){return t.get("field_uuid")===e}));if(r&&-1!==i){this.removeFilterThingByFieldId(e,n);var o=this._readService.getViewSort(n);(null==o?void 0:o.get("field_uuid"))===e&&this.removeSort(n);var a=this._readService.getFieldCells(e);this.removeCells(a);var l=this._viewFieldService.remove(e,n);return this.refreshView(n),l}}}},{key:"removeFieldOption",value:function(e){var t=this._readService.getFieldOption(e),n=this._readService.getActiveView();if(n){var r=this._readService.getFieldOptionCells(n.get("uuid"),null==t?void 0:t.toJSON()),i=null==r?void 0:r.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:null,fieldType:e.fieldType,uuid:e.uuid}}));this.bulkSetCell(i),this._fieldService.removeFieldOption(e)}}},{key:"createRecord",value:function(e,t,n){return this._viewRecordService.createRecord(e,t,n)}},{key:"createEmptyRecord",value:function(e){var t,n,r=e.viewId,i=e.uuid,o=e.viewRecord,a=e.direction,l=void 0===a?"after":a,u=e.groupItemKey,c=e.filter,s=e.modifierId,d=e.sourceRecordId,f=e.groupOption,h=this._viewService.getActiveView();if(!h)return[];if(!d){var p=this._readService.getOriginViewRecords();d=null==(t=p.get(p.length-1))?void 0:t.get("record_uuid")}if(u&&u!==GO){var v,g=aj(this._viewRecordService.getGroupViewRecords(h.get("uuid")));try{for(g.s();!(v=g.n()).done;){var m=v.value.option;if((null==(n=null==m?void 0:m.value)?void 0:n.toJSON)&&(m.value=m.value.toJSON()),this._cellService.groupValue(m)===u){f=m;break}}}catch(e){g.e(e)}finally{g.f()}}return this._viewRecordService.createEmpty({uuid:i,viewId:r,viewRecord:o,sourceRecordId:d,direction:l,groupOption:f,filter:c,modifierId:s,groupItemKey:u})}},{key:"createRecords",value:function(e,t){return this._viewRecordService.createRecords(e,t)}},{key:"copyRecord",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceRecordId,i=e.modifierId;return this._viewRecordService.copyRecord({viewId:t,uuid:n,sourceRecordId:r,modifierId:i})}},{key:"removeRecord",value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=this._viewService.getActiveView();if(n){var r,i=aj(e);try{var o=function(){var e=r.value,i=t._readService.getOriginRecord(e),o=CC(t._readService.getOriginViewRecords(),(function(t){return t.get("record_uuid")===e}));if(!i||o<0)return 1;var a=t._readService.getViewRecordCells(e);t.removeCells(a.toJSON()),t._viewRecordService.remove(n.get("uuid"),e)};for(i.s();!(r=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}}},{key:"removeCells",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.map((function(e){return oj(oj({},e),{},{value:""})})),r=kc(n,"fieldId"),i=Object.values(r),o=0,a=Object.values(i);o<a.length;o++){var l=a[o];this.bulkSetCell(l,t)}}},{key:"removeAllRecords",value:function(e){return this._viewRecordService.removeAll(e)}},{key:"upsertStat",value:function(e,t,n){this._statService.upsert(e,t,n)}},{key:"removeStat",value:function(e,t){this._statService.remove(e,t)}},{key:"setCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((null==(t=this._cellEditService)?void 0:t.provider)&&!this._cellEditService.setCell({cells:[e]}))return;if(this._cellService.setCell(e.fieldId,e.recordId,e),n){var r=this._viewService.getActiveView(),i=this._groupService.getViewGroup(r.get("uuid"));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),e.fieldId)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),e.fieldId)&&this.refreshGroup(r.get("uuid"),null==i?void 0:i.group.toJSON()),this._refreshEventService.isNeedRefreshFilter(r.get("uuid"),e.fieldId,e.recordId,e.value)&&this.refreshFilter(r.get("uuid"))}}},{key:"bulkSetCellWithRecord",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=aj(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._cellService.setCell(i.fieldId,i.recordId,i)}}catch(e){r.e(e)}finally{r.f()}var o=[];if(n){var a=this._viewService.getActiveView(),l=this._groupService.getViewGroup(a.get("uuid"));this._refreshEventService.isNeedRefreshSort(a.get("uuid"),o)&&this.refreshSort(a.get("uuid")),this._refreshEventService.isNeedRefreshGroup(a.get("uuid"),o)&&this.refreshGroup(a.get("uuid"),null==l?void 0:l.group.toJSON()),this._refreshEventService.isNeedRefreshFilterWithField(a.get("uuid"),o)&&this.refreshFilter(a.get("uuid"))}}},{key:"bulkSetCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((null==(t=this._cellEditService)?void 0:t.provider)&&!this._cellEditService.setCell({cells:e}))return;if(this._cellService.bulkSetCell(e),n){var r=this._viewService.getActiveView(),i=this._groupService.getViewGroup(r.get("uuid")),o=e.map((function(e){return e.fieldId}));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),o)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),o)&&this.refreshGroup(r.get("uuid"),null==i?void 0:i.group.toJSON())}}},{key:"safeSetCell",value:function(e,t,n,r,i){this._valueProcessService.changeCellType(e,t,n,r,i)}},{key:"updateValueOrder",value:function(e){this._cellService.updateOrder(e)}},{key:"updateFieldSize",value:function(e,t,n){this._viewFieldService.update(e,t,"size",n)}},{key:"updateFieldName",value:function(e,t){this._fieldService.update({uuid:e,name:t})}},{key:"updateFieldHidden",value:function(e,t,n){this._viewFieldService.update(e,t,"hidden",n)}},{key:"updateFieldColor",value:function(e,t){this._fieldService.update({uuid:e,color:t})}},{key:"updateFieldConfig",value:function(e,t){this._fieldService.update({uuid:e,config:t})}},{key:"updateFieldProperty",value:function(e){var t,n=e.uuid,r=e.color,i=e.options;Ax(r)||this._fieldService.update({uuid:n,color:r});var o=this._viewService.getActiveView(),a=this._groupService.getViewGroup(o.get("uuid")),l=OC(this._fieldService.getFieldOptions(n),(function(e){return e.get("uuid")})),u=(i||[]).map((function(e){return e.uuid})),c=sc(l,u);this._fieldService.updateFieldOptions(n,i||[],c),(null==(t=null==a?void 0:a.group)?void 0:t.get("field_uuid"))===n&&c.length>0&&this._groupService.refreshGroup(o.get("uuid"),null==a?void 0:a.group.toJSON())}},{key:"refreshGroup",value:function(e,t){this._groupService.refreshGroup(e,t)}},{key:"refreshView",value:function(e){var t;(e||(e=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid")))&&this._viewService.refresh(e)}},{key:"refreshCells",value:function(){this._cellService.refreshCells()}},{key:"upsertViewShare",value:function(e,t){this._viewShareService.upsertViewShare(e,t)}},{key:"removeViewField",value:function(e,t){this._viewFieldService.remove(t,e,!0),this.refreshView()}},{key:"insertViewField",value:function(e,t){this._viewFieldService.insert(t,e),this.refreshView()}},{key:"updateViewField",value:function(e,t,n){var r=this;Object.keys(n).forEach((function(i){r._viewFieldService.update(e,t,i,n[i])})),this.refreshView()}},{key:"cloneViewField",value:function(e,t,n){this._viewFieldService.clone(e,t,n),this.refreshView()}},{key:"importTable",value:function(e){this._tableService.replaceTable(e)}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._groupService.setGroupItemCollapse(e,t,n,r)}}])}();sj([Yf(XA)],dj.prototype,"_readService",2),sj([Yf(FA)],dj.prototype,"_tableService",2),sj([Yf(NM)],dj.prototype,"_fieldService",2),sj([Yf(bR)],dj.prototype,"_recordService",2),sj([Yf(CA)],dj.prototype,"_viewService",2),sj([Yf(uA)],dj.prototype,"_viewConfigService",2),sj([Yf(SR)],dj.prototype,"_viewRecordService",2),sj([Yf(rA)],dj.prototype,"_statService",2),sj([Yf(nR)],dj.prototype,"_groupService",2),sj([Yf($R)],dj.prototype,"_sortService",2),sj([Yf(RR)],dj.prototype,"_filterService",2),sj([Yf(vM)],dj.prototype,"_cellService",2),sj([Yf(gA)],dj.prototype,"_viewFieldService",2),sj([Yf(RM)],dj.prototype,"_valueProcessService",2),sj([Yf(VA)],dj.prototype,"_viewShareService",2),sj([Yf(rj)],dj.prototype,"_refreshEventService",2),sj([Yf(CM)],dj.prototype,"_cellEditService",2),dj=sj([Gf()],dj);var fj=ch().register(JP).register(UA).register(FA).register(aM).register(rj).register(CA).register(vM).register(RM).register(NM).register(cM).register(bR).register(uA).register(SR).register(gA).register(VA).register(rA).register(nR).register(vR).register(lR).register($R).register(zR).register(RR).register(VM).register(XM).register(UM).register(JR).register(IA).register(eM).register(XA).register(dj),hj=Object.defineProperty,pj=Object.getOwnPropertyDescriptor,vj=function(e,t,n,r){for(var i,o=r>1?void 0:r?pj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hj(t,n,o),o},gj=function(){return ox((function e(){rx(this,e)}),[{key:"rules",get:function(){return[]}},{key:"getModelCell",value:function(e,t){return this._model.cellModel.findOne({field_uuid:e,record_uuid:t})}},{key:"updateModelCell",value:function(e,t,n,r,i,o,a){var l=this._model.fieldModel.findOne({uuid:e});e&&t&&this._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:n,key_value:null!=r?r:"",field_type:null==l?void 0:l.get("type"),verify:i,verify_message:o,by_system:!!a})}},{key:"getVerify",value:function(e){if(!e)return{};if(!this.rules||0===this.rules.length)return{};var t=this.rules.reduce((function(t,n){var r;return t+((null==(r=n.validator)?void 0:r.call(n,"",e))?"":n.errorMsg)}),"");return t?{verify:!1,errorMessage:t}:{verify:!0}}},{key:"bulkSetCell",value:function(e){}}])}();vj([Yf(JP)],gj.prototype,"_model",2),gj=vj([Uf()],gj),Rf.defineToken("KernelService");var mj=Rf.defineToken("KernelPluginContribution"),yj=Rf.defineToken("UserContribution"),bj=Object.defineProperty,wj=Object.getOwnPropertyDescriptor,_j=function(e,t,n,r){for(var i,o=r>1?void 0:r?wj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&bj(t,n,o),o},xj=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.userProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerUser()}}])}();_j([gh(yj)],xj.prototype,"userProvider",2),xj=_j([Gf()],xj);var kj=Object.defineProperty,Cj=Object.getOwnPropertyDescriptor,Sj=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kj(t,n,o),o},Oj=function(){return ox((function e(){rx(this,e)}),[{key:"provider",get:function(){return this._userRegistry.getProvider()}},{key:"searchUser",value:(t=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(n=this.provider)?void 0:n.searchUser(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"contextUsers",value:(e=aO(QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=this.provider)?void 0:t.contextUsers();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"getCurrentUser",value:function(){var e;return null==(e=this.provider)?void 0:e.getCurrentUser()}}]);var e,t}();Sj([Yf(xj)],Oj.prototype,"_userRegistry",2),Oj=Sj([Gf()],Oj);var Ej=ch().contribution(yj).register(xj).register(Oj),Ij=function(){return ox((function e(t,n,r,i,o){rx(this,e),this.kernel=t,this.plugin=n,this.readService=r,this.writeService=i,this.modelService=o}),[{key:"init",value:function(){}},{key:"destroy",value:function(){}}])}(),Pj=Rf.defineToken("CommandExecutor"),Mj=Rf.defineToken("CommandRegistry");function Rj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Aj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aj(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jj(e,t,n){return t=DC(t),jC(e,Dj()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Dj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dj=function(){return!!e})()}var Tj=Object.defineProperty,Fj=Object.getOwnPropertyDescriptor,Nj=function(e,t,n,r){for(var i,o=r>1?void 0:r?Fj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Tj(t,n,o),o},Lj=function(e){function t(){var e;return rx(this,t),(e=jj(this,t,arguments))._onDidUndoCommand=e._register(new dS),e.onDidUndoCommand=e._onDidUndoCommand.event,e._onDidRedoCommand=e._register(new dS),e.onDidRedoCommand=e._onDidRedoCommand.event,e}return NC(t,e),ox(t,[{key:"onWillExecuteCommand",get:function(){return this._commandExecutor.onWillExecuteCommand}},{key:"onDidExecuteCommand",get:function(){return this._commandExecutor.onDidExecuteCommand}},{key:"onCancelExecuteCommand",get:function(){return this._commandExecutor.onCancelExecuteCommand}},{key:"onFinishExecuteCommand",get:function(){return this._commandExecutor.onFinishExecuteCommand}},{key:"destroy",value:function(){this._commandRegistry.destroy(),this._commandExecutor.destroy()}},{key:"seal",value:function(){this._commandRegistry.seal()}},{key:"registerCommand",value:function(e,t,n){this._commandRegistry.register(e,t,n)}},{key:"registerCommandHook",value:function(e){this._commandRegistry.registerCommandHook(e)}},{key:"getCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._commandRegistry.getByName(e,t,n)}},{key:"getCommandHook",value:function(e){return this._commandRegistry.getCommandHooks(e)}},{key:"execCommand",value:(n=aO(QC.mark((function e(t,n,r){var i,o,a,l,u,c,s=this;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getCommand(t,r)){e.next=3;break}return e.abrupt("return",null);case 3:if(!i.beforeExecute){e.next=7;break}return e.next=6,i.beforeExecute.call(i,n);case 6:n=e.sent;case 7:if(!((o=this._commandRegistry.getCommandHooks(t)).length>0)){e.next=34;break}a=Rj(o),e.prev=10,a.s();case 12:if((l=a.n()).done){e.next=26;break}if(!(u=l.value).beforeExecute){e.next=18;break}return e.next=17,u.beforeExecute(n,this._readService);case 17:n=e.sent;case 18:if(!u.executeChecker){e.next=24;break}return e.next=21,u.executeChecker(n,this._readService);case 21:if(e.sent){e.next=24;break}return e.abrupt("return");case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),a.e(e.t0);case 31:return e.prev=31,a.f(),e.finish(31);case 34:return this._logger.log({type:YS.command,action:t,data:n}),this._database.stack.transact((function(){var e;if(c=null==i?void 0:i.execute.call(i,n),o.length>0){var t,r=Rj(o);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.afterExecute&&a.afterExecute(null==c?void 0:c.result,n,s._readService)}}catch(e){r.e(e)}finally{r.f()}}i.afterExecute?n=i.afterExecute.call(i,n,null==c?void 0:c.result,s._refreshEventService):(null==(e=i.context)||e.destroy(),i.context=null)})),e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,this,[[10,28,31,34]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"execRemoteCommand",value:function(e,t,n,r){var i=this.getCommand(e,r,!0);return i?(n&&(n.modifierId=null==t?void 0:t.uid),this._contentService.setUsers([t]),null==i?void 0:i.execute.call(i,n)):null}},{key:"undo",value:function(){var e;if(!(null==(e=this._database.stack)?void 0:e.canUndo()))return!1;this._database.stack.undo(),this._onDidUndoCommand.emit()}},{key:"redo",value:function(){var e;if(!(null==(e=this._database.stack)?void 0:e.canRedo()))return!1;this._database.stack.redo(),this._onDidRedoCommand.emit()}}]);var n}(HC);Nj([Yf(XA)],Lj.prototype,"_readService",2),Nj([Yf(IA)],Lj.prototype,"_contentService",2),Nj([Yf(Mj)],Lj.prototype,"_commandRegistry",2),Nj([Yf(Pj)],Lj.prototype,"_commandExecutor",2),Nj([Yf(rj)],Lj.prototype,"_refreshEventService",2),Nj([Yf(sC)],Lj.prototype,"_database",2),Nj([Yf($S)],Lj.prototype,"_logger",2),Nj([Df()],Lj.prototype,"destroy",1),Lj=Nj([Gf()],Lj);var Bj=Object.defineProperty,Vj=Object.getOwnPropertyDescriptor,zj=function(e,t,n,r){for(var i,o=r>1?void 0:r?Vj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Bj(t,n,o),o},Hj=function(){return ox((function e(){rx(this,e),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}),[{key:"destroy",value:function(){var e=this;Object.keys(this._commands).forEach((function(t){e._commands[t].destroy()})),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}},{key:"seal",value:function(){this._isSealed||(this._isSealed=!0,this.initCommand())}},{key:"getByName",value:function(e,t,n){var r=this._commands[e];return r?r=this.trap(e,r,t,n):(console.warn('This command "'.concat(e,'" is not registered')),null)}},{key:"getCommandHooks",value:function(e){return this._commands[e]?this._commandHooks[e]||[]:(console.warn('This command "'.concat(e,'" is not registered')),[])}},{key:"register",value:function(e,t,n){if(this._pool[e])throw new Error("The command ".concat(e," has been registered"));if(this._isSealed)throw new Error("No command can be registered at this stage");this._pool[e]={clazz:t,plugin:n}}},{key:"registerCommandHook",value:function(e){var t=e.commandName;this._pool[t]&&(this._commandHooks[t]||(this._commandHooks[t]=[]),this._commandHooks[t].push(e))}},{key:"trap",value:function(e,t,n,r){var i=this,o=t._rawExec||t.execute;return t._rawExec=o,t.execute=new Proxy(t.execute,{apply:function(a,l,u){return i._commandExecutor.exec(e,t,n,r,o,l,u)}}),t}},{key:"initCommand",value:function(){var e=this;Object.keys(this._pool).forEach((function(t){var n=e._pool[t],r=n.clazz,i=n.plugin,o=e.trap(t,new r(e._kernel,i,e._readService,e._writeService,e._modelService),!1,!1);o.init(),e._commands[t]=o}))}}])}();zj([Yf(Pj)],Hj.prototype,"_commandExecutor",2),zj([Yf(XA)],Hj.prototype,"_readService",2),zj([Yf(dj)],Hj.prototype,"_writeService",2),zj([Yf(LE)],Hj.prototype,"_modelService",2),Hj=zj([Gf({token:Mj})],Hj);var Wj=function(){return ox((function e(t,n,r){rx(this,e),this.commandExecutor=t,this.commandName=n,this.argArray=r,this.startTime=0,this.usedTime=0}),[{key:"destroy",value:function(){delete this._remote,delete this._user,this.startTime=0,this.usedTime=0}},{key:"isRemote",get:function(){return this._remote}},{key:"user",get:function(){return this._user}},{key:"setRemote",value:function(e){this._remote=e}},{key:"setUser",value:function(e){this._user=e}},{key:"setStartTime",value:function(e){this.startTime=e}},{key:"setUsedTime",value:function(e){this.usedTime=e}},{key:"cancel",value:function(){}}])}(),Uj=function(){return ox((function e(t){rx(this,e),this.notify=t}),[{key:"destroy",value:function(){var e=this;delete e.notify,delete e._operations,delete e.notify}},{key:"execute",value:function(e){var t,n,r,i,o,a,l,u,c;null==(n=null==(t=this.notify)?void 0:t.beforeExecute)||n.call(t,this);try{c=e(),null==(i=null==(r=this.notify)?void 0:r.afterExecute)||i.call(r,this)}catch(e){return console.error(e),this.rollback(),null==(a=null==(o=this.notify)?void 0:o.completed)||a.call(o,this,!1),{isSuccess:!1,error:e}}return null==(u=null==(l=this.notify)?void 0:l.completed)||u.call(l,this,!0),{isSuccess:!0,result:c}}},{key:"rollback",value:function(){}}])}();function Gj(e,t,n){return t=DC(t),jC(e,Yj()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yj=function(){return!!e})()}var $j=Object.defineProperty,qj=Object.getOwnPropertyDescriptor,Kj=function(e,t,n,r){for(var i,o=r>1?void 0:r?qj(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$j(t,n,o),o},Xj=function(e){function t(){var e;return rx(this,t),(e=Gj(this,t,arguments))._onWillExecuteCommand=e._register(new dS),e.onWillExecuteCommand=e._onWillExecuteCommand.event,e._onDidExecuteCommand=e._register(new dS),e.onDidExecuteCommand=e._onDidExecuteCommand.event,e._onCancelExecuteCommand=e._register(new dS),e.onCancelExecuteCommand=e._onCancelExecuteCommand.event,e._onFinishExecuteCommand=e._register(new dS),e.onFinishExecuteCommand=e._onFinishExecuteCommand.event,e}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"_process",value:function(e,t){var n=this,r=new Uj({beforeExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onWillExecuteCommand.emit({context:e})},afterExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onDidExecuteCommand.emit({context:e})},completed:function(t,r){if(!r)return n._onCancelExecuteCommand.emit({changed:!0});e.setUsedTime(+new Date-e.startTime),n._onFinishExecuteCommand.emit({context:e})}}),i=r.execute(t);return r.destroy(),i}},{key:"execCommand",value:function(e,t){return this._process(e,t)}},{key:"exec",value:function(e,t,n,r,i,o,a){var l=this,u=new Wj(this,e,a);return u.setStartTime(+new Date),this.execCommand(u,(function(){return u.setRemote(r),u.setUser(l.readService.currentUser),t.context=u,i.call.apply(i,[o].concat(Q_(a)))}))}}])}(HC);Kj([Yf(XA)],Xj.prototype,"readService",2),Kj([Yf(dj)],Xj.prototype,"writeService",2),Kj([Yf(LE)],Xj.prototype,"modelService",2),Kj([Df()],Xj.prototype,"destroy",1),Xj=Kj([Gf({token:Pj})],Xj);var Jj=ch().register(Xj).register(Hj).register(Lj),Zj=function(e){return e.CREATE="create",e.DELETE="delete",e.READ="read",e.UPDATE="update",e.EDIT="edit",e.TRANSFORM="transform",e}(Zj||{}),Qj=function(e){return e.TABLE="table",e.FIELD="field",e.RECORD="record",e.VIEW="view",e}(Qj||{}),eD=Object.defineProperty,tD=Object.getOwnPropertyDescriptor,nD=function(e,t,n,r){for(var i,o=r>1?void 0:r?tD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&eD(t,n,o),o},rD=function(){return ox((function e(){rx(this,e),this._abilityMap=new Map}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability",type:"object",title:"权限"})}},{key:"getAbilities",value:function(){return Array.from(this._abilityMap.values())}},{key:"getAbility",value:function(e){return this._abilityMap.get(e)}},{key:"registerAbility",value:function(e){this._abilityMap.set(e.id,e)}}])}();function iD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function oD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}nD([Yf(RC)],rD.prototype,"_configuration",2),nD([jf()],rD.prototype,"registerConfiguration",1),rD=nD([Gf()],rD);var aD=Object.defineProperty,lD=Object.getOwnPropertyDescriptor,uD=function(e,t,n,r){for(var i,o=r>1?void 0:r?lD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&aD(t,n,o),o},cD=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e,t,n=iD(this._abilityRegistry.getAbilities());try{for(n.s();!(t=n.n()).done;){var r=t.value;null==(e=r.init)||e.call(r)}}catch(e){n.e(e)}finally{n.f()}}}])}();uD([Yf(rD)],cD.prototype,"_abilityRegistry",2),cD=uD([Gf()],cD);var sD=Object.defineProperty,dD=Object.getOwnPropertyDescriptor,fD=function(e,t,n,r){for(var i,o=r>1?void 0:r?dD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&sD(t,n,o),o},hD=function(){return ox((function e(){rx(this,e)}),[{key:"isReadonly",value:function(e){var t=this._abilityRegistry.getAbility(Qj.TABLE);if(!t.read()||t.update()&&e===Qj.TABLE)return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!!n.read.apply(n,i)&&!n.update.apply(n,i)}},{key:"can",value:function(e,t){for(var n,r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e===Zj.CREATE)return this.canCreate.apply(this,[t].concat(o));if(e===Zj.DELETE)return this.canDelete.apply(this,[t].concat(o));if(e===Zj.READ)return this.canRead.apply(this,[t].concat(o));if(e===Zj.UPDATE)return this.canUpdate.apply(this,[t].concat(o));if(!t)return!1;var l=this._abilityRegistry.getAbility(t);return!!l&&!!(null==(r=l[e])?void 0:(n=r).call.apply(n,[l].concat(o)))}},{key:"canCreate",value:function(e){var t=this._abilityRegistry.getAbility(Qj.TABLE);if(!e||e===Qj.TABLE)return t.create();if(!t.create()||!t.update())return!1;if((e===Qj.RECORD||e===Qj.FIELD)&&!this._abilityRegistry.getAbility(Qj.VIEW).update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!!n.create.apply(n,i)}},{key:"canDelete",value:function(e){var t=this._abilityRegistry.getAbility(Qj.TABLE);if(!e||e===Qj.TABLE)return t.delete();if(!t.delete()||!t.update())return!1;if((e===Qj.RECORD||e===Qj.FIELD)&&!this._abilityRegistry.getAbility(Qj.VIEW).update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!!n.delete.apply(n,i)}},{key:"canRead",value:function(e){var t=this._abilityRegistry.getAbility(Qj.TABLE);if(!e||e===Qj.TABLE)return t.read();if(!t.read())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!!n.read.apply(n,i)}},{key:"canUpdate",value:function(e){var t=this._abilityRegistry.getAbility(Qj.TABLE);if(!e||e===Qj.TABLE)return t.update();if(!t.update())return!1;if((e===Qj.RECORD||e===Qj.FIELD)&&!this._abilityRegistry.getAbility(Qj.VIEW).update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return!!n.update.apply(n,i)}}])}();fD([Yf(rD)],hD.prototype,"_abilityRegistry",2),hD=fD([Gf()],hD);var pD=Object.defineProperty,vD=Object.getOwnPropertyDescriptor,gD=function(e,t,n,r){for(var i,o=r>1?void 0:r?vD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&pD(t,n,o),o},mD=function(){return ox((function e(){rx(this,e),this.id=Qj.FIELD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.field",type:"object",title:"field表权限",properties:{create:{type:"boolean",description:"字段新增权限"},delete:{type:"boolean",description:"字段删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除字段列表"},read:{type:"boolean",description:"字段可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读字段列表"},update:{type:"boolean",description:"字段更新权限，控制能否修改字段名称、新增字段选项"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新字段列表"},transform:{type:"boolean",description:"字段类型转换权限"},transformAllowList:{type:"array",items:{type:"string"},description:"可类型转换字段列表"},edit:{type:"boolean",description:"字段内容编辑权限"},editAllowList:{type:"boolean",description:"可编辑字段列表"}}}),this._configuration.registerDefaultValue({"ability.field.create":!0,"ability.field.delete":!0,"ability.field.read":!0,"ability.field.update":!0,"ability.field.transform":!0,"ability.field.edit":!0,"ability.field.readAllowList":["*"],"ability.field.editAllowList":["*"],"ability.field.updateAllowList":["*"],"ability.field.deleteAllowList":["*"],"ability.field.transformAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(e){if(e&&this._fieldRegistry.getValueField(e.get("type")).createDisable)return!1;return this._configuration.getValue("ability.field.create")}},{key:"delete",value:function(e){if(e&&this._fieldRegistry.getValueField(e.get("type")).deleteDisable)return!1;var t=this._configuration.getValue("ability.field.delete"),n=this._configuration.getValue("ability.field.deleteAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.field.read"),n=this._configuration.getValue("ability.field.readAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.field.update"),n=this._configuration.getValue("ability.field.updateAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"transform",value:function(e){if(e){var t=this._fieldRegistry.getValueField(e.get("type"));if(null==t?void 0:t.transformDisable)return!1}var n=this._configuration.getValue("ability.field.transform"),r=this._configuration.getValue("ability.field.transformAllowList");return!0===n&&e?this.isAllow(e.get("uuid"),r):n}},{key:"edit",value:function(e){if(e&&this._fieldRegistry.getValueField(e.get("type")).editDisable)return!1;var t=this._configuration.getValue("ability.field.edit"),n=this._configuration.getValue("ability.field.editAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}}])}();gD([Yf(cM)],mD.prototype,"_fieldRegistry",2),gD([Yf(RC)],mD.prototype,"_configuration",2),gD([jf()],mD.prototype,"registerConfiguration",1),mD=gD([Gf()],mD);var yD=Object.defineProperty,bD=Object.getOwnPropertyDescriptor,wD=function(e,t,n,r){for(var i,o=r>1?void 0:r?bD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&yD(t,n,o),o},_D=function(){return ox((function e(){rx(this,e),this.id=Qj.RECORD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.record",type:"object",title:"record表权限",properties:{create:{type:"boolean",description:"记录新增权限"},delete:{type:"boolean",description:"记录删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除记录列表"},read:{type:"boolean",description:"记录可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读记录列表"},update:{type:"boolean",description:"记录更新权限，控制能否修改记录描述"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新记录列表"},edit:{type:"boolean",description:"记录内容编辑权限"},editAllowList:{type:"array",items:{type:"string"},description:"可编辑记录列表"}}}),this._configuration.registerDefaultValue({"ability.record.create":!0,"ability.record.delete":!0,"ability.record.read":!0,"ability.record.update":!0,"ability.record.edit":!0,"ability.record.readAllowList":["*"],"ability.record.editAllowList":["*"],"ability.record.updateAllowList":["*"],"ability.record.deleteAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(){return this._configuration.getValue("ability.record.create")}},{key:"delete",value:function(e){var t=this._configuration.getValue("ability.record.delete"),n=this._configuration.getValue("ability.record.deleteAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.record.read"),n=this._configuration.getValue("ability.record.readAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.record.update"),n=this._configuration.getValue("ability.record.updateAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}},{key:"edit",value:function(e){var t=this._configuration.getValue("ability.record.edit"),n=this._configuration.getValue("ability.record.editAllowList");return!0===t&&e?this.isAllow(e.get("uuid"),n):t}}])}();wD([Yf(RC)],_D.prototype,"_configuration",2),wD([jf()],_D.prototype,"registerConfiguration",1),_D=wD([Gf()],_D);var xD=Object.defineProperty,kD=Object.getOwnPropertyDescriptor,CD=function(e,t,n,r){for(var i,o=r>1?void 0:r?kD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xD(t,n,o),o},SD=function(){return ox((function e(){rx(this,e),this.id=Qj.TABLE}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.table",type:"object",title:"table表权限",properties:{create:{type:"boolean",description:"新增权限，控制能否新增字段或记录"},delete:{type:"boolean",description:"删除权限，控制能否删除字段或记录"},read:{type:"boolean",description:"可读权限，控制字段或记录是否可读"},update:{type:"boolean",description:"更新权限，控制能否更新字段或记录，能否新增、删除、复制、拖拽视图，能否拖拽记录、字段"}}}),this._configuration.registerDefaultValue({"ability.table.create":!0,"ability.table.delete":!0,"ability.table.read":!0,"ability.table.update":!0})}},{key:"init",value:function(){}},{key:"getAbilities",value:function(){return this._configuration.getValue("ability.table")}},{key:"create",value:function(){return this._configuration.getValue("ability.table.create")}},{key:"delete",value:function(){return this._configuration.getValue("ability.table.delete")}},{key:"read",value:function(){return this._configuration.getValue("ability.table.read")}},{key:"update",value:function(){return this._configuration.getValue("ability.table.update")}}])}();CD([Yf(RC)],SD.prototype,"_configuration",2),CD([jf()],SD.prototype,"registerConfiguration",1),SD=CD([Gf()],SD);var OD=Object.defineProperty,ED=Object.getOwnPropertyDescriptor,ID=function(e,t,n,r){for(var i,o=r>1?void 0:r?ED(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&OD(t,n,o),o},PD=function(){return ox((function e(){rx(this,e),this.id=Qj.VIEW}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.view",type:"object",title:"视图表权限",properties:{delete:{type:"boolean",description:"视图删除权限"},update:{type:"boolean",description:"视图更新权限"},enableCreatorLock:{type:"boolean",description:"启用视图创建者锁定"}}}),this._configuration.registerDefaultValue({"ability.view.delete":!0,"ability.view.update":!0,"ability.view.enableCreatorLock":!1})}},{key:"init",value:function(){var e=this;this.enableCreatorLock=this._configuration.getValue("ability.view.enableCreatorLock"),this._configuration.onValueChange((function(t){"ability.view.enableCreatorLock"===t.path&&(e.enableCreatorLock=t.cur)}))}},{key:"create",value:function(){return this._configuration.getValue("ability.table.create")}},{key:"read",value:function(){return this._configuration.getValue("ability.table.read")}},{key:"delete",value:function(e){var t,n=this._configuration.getValue("ability.view.delete"),r=this._configuration.getValue("ability.table.update");return!r||(r&&this.enableCreatorLock&&(e||(e=this._viewService.getActiveView()),e)?Number(null==(t=this._contextService.currentUser)?void 0:t.uid)===Number(e.get("creator_id")):n)}},{key:"update",value:function(e){var t,n=this._configuration.getValue("ability.view.update"),r=this._configuration.getValue("ability.table.update");return!r||(r&&this.enableCreatorLock&&(e||(e=this._viewService.getActiveView()),e)?Number(null==(t=this._contextService.currentUser)?void 0:t.uid)===Number(e.get("creator_id")):n)}}])}();ID([Yf(RC)],PD.prototype,"_configuration",2),ID([Yf(eM)],PD.prototype,"_contextService",2),ID([Yf(CA)],PD.prototype,"_viewService",2),ID([jf()],PD.prototype,"registerConfiguration",1),PD=ID([Gf()],PD);var MD=ch().register(cD).register(SD).register(mD).register(_D).register(PD).register(rD).register(hD),RD=Rf.defineToken("ProcessKernelPluginContribution"),AD="lakex-table",jD=function(e,t){return AD+":"+e+":"+t},DD=function(){return ox((function e(){rx(this,e)}),null,[{key:"enable",value:function(e,t){var n=jD(e,t);(function(e){var t=localStorage.debug;return"*"===t||t==="".concat(AD,":*")||t==="".concat(AD,":").concat(e,":*")})(e)||K_.enable(n)}},{key:"Infra",value:function(e){var t=jD("infra",e);return K_(t)}},{key:"Plugin",value:function(e){return K_(jD("plugin",e))}}])}(),TD=Object.defineProperty,FD=Object.getOwnPropertyDescriptor,ND=function(e,t,n,r){for(var i,o=r>1?void 0:r?FD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&TD(t,n,o),o},LD=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e,t=this.processProvider.getContributions()||[],n=t[t.length-1];return null==(e=null==n?void 0:n.registerProcess)?void 0:e.call(n)}},{key:"getTableMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessTableMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getUsersMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessUsersMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getRecordsMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessRecordsMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}();function BD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BD(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zD(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function HD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ND([gh(RD)],LD.prototype,"processProvider",2),LD=ND([Gf()],LD);var WD=Object.defineProperty,UD=Object.getOwnPropertyDescriptor,GD=function(e,t,n,r){for(var i,o=r>1?void 0:r?UD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WD(t,n,o),o},YD=function(){return ox((function e(){rx(this,e)}),[{key:"toValue",value:function(e){var t=this,n=this._readService.getField(e.fieldId),r=e.value||"";if(Array.isArray(r))(null==n?void 0:n.get("type"))===xO.MENTION&&(r=null==r?void 0:r.map((function(e){var n=t._readService.getUser(e.uid);return{id:(null==n?void 0:n.get("uid"))||e.uid,name:(null==n?void 0:n.get("name"))||e.name,login:(null==n?void 0:n.get("login"))||e.login,avatar_url:(null==n?void 0:n.get("icon"))||e.icon,work_id:(null==n?void 0:n.get("work_id"))||e.work_id}})));else if((null==n?void 0:n.get("type"))===xO.LINK)return(null==r?void 0:r.src)?{value:{src:(null==r?void 0:r.src)||"",name:(null==r?void 0:r.name)||"",icon:(null==r?void 0:r.icon)||""}}:{value:null};return(null==n?void 0:n.get("type"))===xO.DATE?{value:{time:r}}:{value:r}}},{key:"toColumn",value:function(e){var t={id:e.get("uuid"),name:e.get("name"),type:e.get("type"),color:e.get("color"),config:e.get("config")},n=this._readService.getFieldOptions(e.get("uuid"));return n&&(t.options=OC(n,(function(e){return{id:e.get("uuid"),color:e.get("color"),value:e.get("name")}}))),t}},{key:"toRecord",value:function(e,t){var n,r,i={userId:e.get("creator_id"),modifierId:e.get("modifier_id")},o=zD(this._readService.getRecordCells(e.get("uuid")));try{for(o.s();!(r=o.n()).done;){var a=r.value;a&&(t&&a.fieldId!==t||null==a.value&&null===(null==(n=a.value)?void 0:n.name)||Array.isArray(a.value)&&0===a.value.length||(i[a.fieldId]=this.toValue(a)))}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"toView",value:function(e){var t=this,n=e.view,r=e.sort,i=e.stats,o=e.viewGroup,a=e.filter,l=e.groupViewRecords,u=e.viewConfig,c=this._readService.getAllViewFields(n.get("uuid")),s=this._readService.getOriginViewRecords(n.get("uuid")),d=n.get("type"),f=VD(VD({id:n.get("uuid"),type:d,name:n.get("name"),colCount:(null==c?void 0:c.length)||0,columns:OC(c,(function(e){return{id:e.get("field_uuid"),size:e.get("size"),hidden:e.get("hidden")}})),data:{},filter:this.toFilter(a),sort:this.toSort(r,u),stats:this.toStats(i)},(null==o?void 0:o.group)?this.toGroup(o.group,l):{}),{},{frozenCol:0,index:0,rowCount:s.length,rows:OC(s,(function(e){return{id:e.get("record_uuid")}})),rowHeight:this.toRowHeight(u),scrollX:0,scrollY:0,selections:{},tableId:"",creatorId:n.get("creator_id"),modifierId:n.get("modifier_id")});if(d===WO.GRID){var h=null==u?void 0:u.get("highlight_same_fields");h&&(f.data.highlightSameFields=h);var p=null==u?void 0:u.get("text_colors");p&&(f.data.textColors=p)}if(d===WO.CARD&&u&&(f.cover={show:!!u.get("cover_field_uuid"),id:u.get("cover_field_uuid"),display:u.get("cover_display")}),d!==WO.KANBAN&&d!==WO.CARD||(f.showField=null==u?void 0:u.get("show_field_name")),d===WO.FORM){var v=OC(kC(c,(function(e){return!e.get("hidden")&&(!!e.get("field")&&!YO.isSystemType(e.get("field").get("type")))})),(function(e){var n={columnId:e.get("field_uuid"),columnName:e.get("field").get("name")||"",type:e.get("field").get("type")||xO.TEXT,title:e.get("name")||e.get("field").get("name"),display:e.get("display_type")};if(YO.isSelectLike(e.get("field").get("type"))){var r=t.toColumn(e.get("field"));n.options=r.options}return e.get("required")?n.validations=[{required:!0}]:n.validations=[{required:!1}],n}));return{id:n.get("uuid"),type:n.get("type"),name:n.get("name"),desc:n.get("desc"),fields:v,viewId:n.get("uuid"),createdAt:n.get("created_at")}}return d===WO.CALENDAR&&u&&(f.date={startId:u.get("start_date_field_uuid")||"",endId:u.get("end_date_field_uuid")||"",activeDate:u.get("active_date")||"",titleId:u.get("date_title_field_uuid")||"",showLunar:u.get("show_lunar")||!1,sundayAtFirst:u.get("sunday_at_first")||!1,colorType:u.get("date_color_type")||FO.CUSTOM,colorId:u.get("date_color")||""}),d===WO.TODO&&u&&(f.data={todoTitleId:u.get("todo_title_field_uuid")||"",todoRemarkId:u.get("todo_remark_field_uuid")||"",todoPriorityId:u.get("todo_priority_field_uuid")||"",todoDoneId:u.get("todo_done_field_uuid")||"",todoDayId:u.get("todo_day_field_uuid")||"",todoTimeId:u.get("todo_time_field_uuid")||""}),d===WO.CHART&&u&&(f.data={charts:u.get("charts")}),f}},{key:"toFilter",value:function(e){return e}},{key:"toSort",value:function(e,t){if(!e)return null;var n={};return(null==t?void 0:t.get("keep_sort"))&&(n.auto=!0),n.options=[{id:e.get("field_uuid"),type:e.get("type")}],n}},{key:"toStats",value:function(e){var t={};return e&&e.length>0&&e.forEach((function(e){t[e.get("field_uuid")]=e.get("type")})),t}},{key:"toGroup",value:function(e,t){var n={};if(!e)return n;var r={id:e.get("field_uuid"),type:e.get("type")};return n.groupData=t.map((function(e){var t,n,i,o,a={value:(null==(t=e.option)?void 0:t.name)||"",titleValue:(null==(n=e.option)?void 0:n.value)?[null==(i=e.option)?void 0:i.value]:""};return a.rows=(null==(o=e.viewRecords)?void 0:o.map((function(e){return e.get("record_uuid")})))||[],a.groupBy=r.id,a.key=e.key,a.collapse=e.collapse,a})),n.group=[r],n}},{key:"toRowHeight",value:function(e){return(null==e?void 0:e.get("record_height"))?{low:{type:TO.LOW,name:"低",value:36},middle:{type:TO.MIDDLE,name:"中",value:58},high:{type:TO.HIGH,name:"高",value:146}}[e.get("record_height")]:{type:TO.LOW,name:"低",value:36}}},{key:"toTable",value:function(){var e,t=this,n=this._readService.getTable(),r=this._readService.getOriginViewRecords(),i=this._readService.getAllFields(),o=this._readService.getViews(),a={format:"laketable",type:"Table"};a.version=n.get("version"),a.larkJson=!0;var l={};l.rowIds=OC(r,(function(e){return e.get("record_uuid")})),l.rowCount=r.length,l.columns=OC(i,(function(e){var n=t._readService.getFieldOptions(e.get("uuid")),r={id:e.get("uuid"),name:e.get("name"),type:e.get("type")};return null!=e.get("color")&&(r.color=e.get("color")),null!=e.get("config")&&(r.config=e.get("config")),n&&n.length>0&&(r.options=OC(n,(function(e){var t={id:e.get("uuid"),value:e.get("name")};return e.get("color")&&(t.color=e.get("color")),t}))),r})),l.colCount=i.length,l.activeView=n.get("active_view_uuid"),l.id=n.get("uuid"),l.views={};var u,c=zD(o);try{for(c.s();!(u=c.n()).done;){var s=u.value,d={};d.view=this._readService.getView(s.get("uuid")),d.sort=this._readService.getViewSort(s.get("uuid")),d.stats=this._readService.getViewStats(s.get("uuid")),d.viewGroup=this._readService.getViewGroup(s.get("uuid")),d.filter=this._readService.getViewFilter(s.get("uuid"),{notIncludeField:!0}),d.groupViewRecords=(null==(e=d.viewGroup)?void 0:e.group)?this._readService.getGroupViewRecords(s.get("uuid")):null,d.viewConfig=this._readService.getViewConfig(s.get("uuid"));var f=this.toView(d);l.views[f.id]=f}}catch(e){c.e(e)}finally{c.f()}return a.sheet=[l],a}}])}();function $D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qD(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function qD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}GD([Yf(XA)],YD.prototype,"_readService",2),YD=GD([Gf()],YD);var KD=Object.defineProperty,XD=Object.getOwnPropertyDescriptor,JD=function(e,t,n,r){for(var i,o=r>1?void 0:r?XD(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&KD(t,n,o),o},ZD=DD.Plugin("process"),QD=function(){return ox((function e(){rx(this,e)}),[{key:"toModel",value:function(e,t){var n,r,i;if(i="string"==typeof e?JSON.parse(e):e,ZD("服务端数据",i),i.version){if("string"==typeof i.sheet?i.sheet=JSON.parse(B_.inflate(i.sheet,{to:"string"}))[0]:i.sheet=null==(n=i.sheet)?void 0:n[0],!i.sheet)return;try{var o=this._processRegistry.getTableMiddlewares();if(o&&o.length>0){var a,l=$D(o);try{for(l.s();!(a=l.n()).done;){var u=a.value;i=u?u(i,t):i}}catch(e){l.e(e)}finally{l.f()}}}catch(e){ZD("process table error:",e)}var c=i.sheet;ZD("处理前数据",c);var s=c.activeView||c.defaultView,d=c.views[s];d&&(null==(r=this._configuration.getValue("viewerManage.viewTypes"))?void 0:r.includes(d.type))||(s=Object.keys(c.views)[0]),t.setData("table",[{uuid:c.id,version:"1.4",active_view_uuid:s}]),this._columnToModel(t,c.columns),i.records&&("string"==typeof i.records&&(i.records=JSON.parse(B_.inflate(i.records,{to:"string"}))),this._recordToModel(t,i.records)),i.users&&("string"==typeof i.users&&(i.users=JSON.parse(B_.inflate(i.users,{to:"string"}))),this._userToModel(t,i.users)),this._viewsToModel(t,c.views,c.columns)}}},{key:"toRecordModel",value:function(e,t){"string"==typeof e.records&&(e=JSON.parse(B_.inflate(e,{to:"string"})));try{var n=this._processRegistry.getRecordsMiddlewares();if(n&&n.length>0){var r,i=$D(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e=o?o({records:e},t).records:e}}catch(e){i.e(e)}finally{i.f()}}}catch(e){ZD("process records error:",e)}this._recordToModel(t,e)}},{key:"toUserModel",value:function(e,t){try{var n=this._processRegistry.getUsersMiddlewares();if(n&&n.length>0){var r,i=$D(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;e=o?o({users:e},t).users:e}}catch(e){i.e(e)}finally{i.f()}}}catch(e){ZD("process users error:",e)}this._userToModel(t,e)}},{key:"_columnToModel",value:function(e,t){if(t){var n,r=$D(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("input"!==i.type&&"textarea"!==i.type||(i.type="text"),Object.values(xO).includes(i.type)||(i.type="text"),i.uuid=i.uuid||i.id,i.options){var o,a=$D(i.options);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.name=l.name||l.value,l.uuid=l.uuid||l.id}}catch(e){a.e(e)}finally{a.f()}}YO.isMultiple(i.type)&&(i.multiple=!0),i.color&&"string"==typeof i.color&&(i.color=i.color.replace("yuque-",""))}}catch(e){r.e(e)}finally{r.f()}e.setData("field",t);var u,c=[],s=$D(t);try{for(s.s();!(u=s.n()).done;){var d=u.value;if(d.options){var f,h=$D(d.options);try{for(h.s();!(f=h.n()).done;){var p=f.value;c.push({uuid:p.uuid,field_uuid:d.uuid,name:p.name,color:p.color})}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){s.e(e)}finally{s.f()}e.setData("field_option",c)}}},{key:"_getField",value:function(e,t){var n=e.query("field").toJSON().find((function(e){return e.uuid===t}));if(n){if("select"===n.type||"multiSelect"===n.type){var r=e.query("field_option").toJSON();n.options=r.filter((function(e){return e.field_uuid===n.uuid}))}return n}}},{key:"_userToModel",value:function(e,t){var n,r=e.query("user").toJSON()||[],i=$D(t);try{var o=function(){var e=n.value;if(!e)return 0;var t=String(e.id||e.uid);if(r.some((function(e){return e.uid===t})))return 0;r.push({uuid:Cx(32),uid:t,login:e.login,name:e.name,icon:e.avatar_url||e.icon,work_id:e.work_id,created_at:+new Date,updated_at:+new Date})};for(i.s();!(n=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}e.setData("user",r)}},{key:"_recordToModel",value:function(e,t){var n,r,i,o=(null==(n=e.query("record"))?void 0:n.toJSON())||[],a=[],l=$D(t);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(o.push({id:u.id,uuid:u.uuid,creator_id:u.user_id,modifier_id:u.modifier_id,created_at:+new Date(u.created_at),updated_at:+new Date(u.updated_at)}),u.data)for(var c=JSON.parse(u.data),s=0,d=Object.keys(c);s<d.length;s++){var f=d[s],h=this._getField(e,f);if(h){var p=h.type,v=c[f],g=null==(r=this._processRegistry.getProvider())?void 0:r.processFieldModel,m=void 0;if(null!=(m=g?g(h,v.value):null==v?void 0:v.value)){if(YO.isUri(p)){if(!m)continue;m&&"string"==typeof m&&(m={src:m,name:m,icon:""})}if(Array.isArray(m)){var y,b=$D(m);try{for(b.s();!(y=b.n()).done;){var w=y.value;YO.isMention(p)&&(w.uid=w.id,w.icon=w.avatar_url),a.push({fieldType:p,field_uuid:f,record_uuid:u.uuid,value:w})}}catch(e){b.e(e)}finally{b.f()}}else YO.isDate(p)&&(null!=m.time?m=m.time:null!=m.seconds&&(m=Ck(m.seconds))),YO.isNumberLike(p)&&m&&"string"==typeof m&&(m=m.replace(/0+$/,"").replace(/\.$/,"")),a.push({fieldType:p,field_uuid:f,record_uuid:u.uuid,value:m})}}}}}catch(e){l.e(e)}finally{l.f()}e.setData("record",o),this._createValues(e,a)}},{key:"_createValues",value:function(e,t){var n={field_boolean:[],field_date:[],field_number:[],field_select:[],field_string:[],field_uri:[],user:{}};t.forEach((function(e){var t,r,i,o,a,l,u,c=e.fieldType;if(delete e.fieldType,YO.isBoolean(c))n.field_boolean.push(e);else if(YO.isDate(c))n.field_date.push(e);else if(YO.isNumberLike(c))n.field_number.push(e);else if(YO.isSelectLike(c))n.field_select.push(e);else if(YO.isString(c))n.field_string.push(e);else if(YO.isUri(c)){if(n.field_uri.push({field_uuid:e.field_uuid,record_uuid:e.record_uuid,uid:null==(t=e.value)?void 0:t.uid,src:null==(r=e.value)?void 0:r.src,icon:null==(i=e.value)?void 0:i.icon,name:null==(o=e.value)?void 0:o.name,size:null==(a=e.value)?void 0:a.size,width:null==(l=e.value)?void 0:l.width,height:null==(u=e.value)?void 0:u.height}),YO.isMention(c)){if(!e.value)return;n.user[e.value.uid]={uid:String(e.value.uid),name:e.value.name,icon:e.value.icon,login:e.value.login,work_id:e.value.work_id}}}else if(YO.isSystemUser(c)){if(!e.value)return;n.user[e.value.id]={uid:String(e.value.id),name:e.value.name,icon:e.value.avatar_url,login:e.value.login,work_id:e.value.work_id}}})),n.user=Object.values(n.user);for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];if("user"===o){var a=e.query("user").toJSON(),l=Jc([].concat(Q_(a),Q_(Object.values(n[o]))),"uid");return void e.setData("user",l)}e.setData(o,n[o])}}},{key:"_viewsToModel",value:function(e,t,n){for(var r=[],i=0,o=Object.values(t);i<o.length;i++){var a=o[i];r.push({id:a.iid,uuid:a.id,name:a.name,type:a.type,desc:a.desc,creator_id:a.creatorId,modifier_id:a.modifierId}),this._viewToModel(e,a,n)}e.setData("view",r)}},{key:"_viewToModel",value:function(e,t,n){var r,i,o,l,u,c,s,d,f,h,p,v,g,m,y,b,w,_,x,k,C,S,O,E,I,P,M=e.query("view_config").toJSON()||[],R=e.query("view_field").toJSON()||[],A=e.query("view_record").toJSON()||[],j=e.query("group").toJSON()||[],D=e.query("group_item").toJSON()||[],T=e.query("filter_thing").toJSON()||[],F=e.query("filter_packet").toJSON()||[],N=e.query("sort").toJSON()||[],L=e.query("stat").toJSON()||[],B=n.reduce((function(e,t){return e[t.id]=t,e}),{});if(null==(r=t.data)?void 0:r.charts){var V,z=JSON.parse(null==(i=t.data)?void 0:i.charts),H=$D(z);try{for(H.s();!(V=H.n()).done;){var W=V.value;if(Array.isArray(W.filter)){var U=(new Date).getTime();if(0===W.filter.length){delete W.filter;continue}var G,Y={uuid:Cx(),type:"packet",view_uuid:t.id,operator:W.filter[0].operator,filters:[],parent_uuid:null,root_uuid:null,created_at:U,updated_at:U},$=$D(W.filter);try{for($.s();!(G=$.n()).done;){var q=G.value;Y.filters.push({packet_uuid:Y.uuid,uuid:q.uuid,view_uuid:t.id,field_uuid:q.field_uuid,func:q.func,expected:q.expected,created_at:U,updated_at:U})}}catch(e){$.e(e)}finally{$.f()}W.filter=Y}}}catch(e){H.e(e)}finally{H.f()}t.data.charts=JSON.stringify(z)}if(M.push({view_uuid:t.id,cover_field_uuid:(null==(o=t.cover)?void 0:o.show)?null==(l=t.cover)?void 0:l.id:"",cover_display:null==(u=t.cover)?void 0:u.display,show_field_name:t.showField,keep_sort:null==(c=t.sort)?void 0:c.auto,frozen_field:t.frozenCol,record_height:null==(s=t.rowHeight)?void 0:s.type,start_date_field_uuid:null==(d=t.date)?void 0:d.startId,end_date_field_uuid:null==(f=t.date)?void 0:f.endId,active_date:null==(h=t.date)?void 0:h.activeDate,date_title_field_uuid:null==(p=t.date)?void 0:p.titleId,show_lunar:null==(v=t.date)?void 0:v.showLunar,sunday_at_first:null==(g=t.date)?void 0:g.sundayAtFirst,date_color_type:null==(m=t.date)?void 0:m.colorType,date_color:null==(y=t.date)?void 0:y.colorId,charts:null==(b=t.data)?void 0:b.charts,highlight_same_fields:null==(w=t.data)?void 0:w.highlightSameFields,text_colors:null==(_=t.data)?void 0:_.textColors,todo_title_field_uuid:null==(x=t.data)?void 0:x.todoTitleId,todo_remark_field_uuid:null==(k=t.data)?void 0:k.todoRemarkId,todo_priority_field_uuid:null==(C=t.data)?void 0:C.todoPriorityId,todo_done_field_uuid:null==(S=t.data)?void 0:S.todoDoneId,todo_day_field_uuid:null==(O=t.data)?void 0:O.todoDayId,todo_time_field_uuid:null==(E=t.data)?void 0:E.todoTimeId}),t.type===WO.FORM){if(t.fields){var K,X=$D(t.fields);try{for(X.s();!(K=X.n()).done;){var J=K.value;B[J.columnId]&&R.push({view_uuid:t.id,field_uuid:J.columnId,name:J.title||J.columnName,display_type:J.display,required:(null==(P=null==(I=J.validations)?void 0:I[0])?void 0:P.required)||!1})}}catch(e){X.e(e)}finally{X.f()}}}else{var Z,Q=$D(t.columns);try{for(Q.s();!(Z=Q.n()).done;){var ee=Z.value;B[ee.id]&&(("rate"===ee.type||"progress"===ee.type)&&ee.size<134&&(ee.size=134),R.push({view_uuid:t.id,field_uuid:ee.id,size:ee.size,hidden:ee.hidden}))}}catch(e){Q.e(e)}finally{Q.f()}}if(t.rows){var te={};t.group&&t.groupData&&t.groupData.forEach((function(e){if(null!=e.key&&t.group.length>0){var r,i=t.group[0],o=n.find((function(e){return e.id===i.id}));if(o)r=e.key.includes(":")?e.key:e.key?(null==o?void 0:o.id)+":"+e.key:GO,D.push({view_uuid:t.id,field_uuid:null==o?void 0:o.id,key:r,collapse:!!e.collapse})}e.rows.forEach((function(t){Array.isArray(e.titleValue)?"string"==typeof e.titleValue[0]?te[t]=e.titleValue[0]:te[t]=e.titleValue.map((function(e){return e.uid})).join(","):te[t]=e.titleValue}))}));var ne,re=$D(t.rows);try{for(re.s();!(ne=re.n()).done;){var ie=ne.value,oe={view_uuid:t.id,record_uuid:ie.id};if(t.group){var ae=t.group[0],le=te[ie.id],ue=GO;le&&le.id&&(ue=String(le.id).includes(":")?String(le.id):ae.id+":"+String(le.id)),oe.group_item_key=ue}oe.group_item_key||(oe.group_item_key=GO),A.push(oe)}}catch(e){re.e(e)}finally{re.f()}}if(t.filter)if(t.filter.options){var ce=Cx(),se=(new Date).getTime();F.push({uuid:ce,type:"packet",view_uuid:t.id,parent_uuid:null,root_uuid:null,created_at:se,updated_at:se,operator:t.filter.operator||AO.And});var de,fe=$D(t.filter.options);try{var he=function(){var e=de.value;if(!R.find((function(t){return t.field_uuid===e.id})))return 1;var n=e.func,r=Array.isArray(e.expected)?e.expected.join(","):e.expected;["today","tomorrow","yesterday","thisWeek","lastWeek","nextWeek","lastMonth","thisMonth","nextMonth","last7days"].includes(n)&&(r=n,n="equalTo"),T.push({uuid:Cx(),packet_uuid:ce,view_uuid:t.id,field_uuid:e.id,func:n,expected:r,created_at:se,updated_at:se})};for(fe.s();!(de=fe.n()).done;)he()}catch(e){fe.e(e)}finally{fe.f()}}else{var pe=function(e){if(F.push({uuid:e.uuid,type:"packet",view_uuid:e.view_uuid,operator:e.operator,parent_uuid:e.parent_uuid,root_uuid:e.root_uuid,updated_at:e.updated_at,created_at:e.created_at}),e.filters&&e.filters.length>0){var t,n=$D(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;"packet"===r.type?pe(r):T.push({uuid:r.uuid,packet_uuid:r.packet_uuid,view_uuid:r.view_uuid,field_uuid:r.field_uuid,func:r.func,expected:r.expected,updated_at:r.updated_at,created_at:r.created_at})}}catch(e){n.e(e)}finally{n.f()}}};pe(t.filter)}if(t.group&&t.group.length>0){var ve=t.group[0],ge=n.find((function(e){return e.id===ve.id}));ge&&R.some((function(e){return e.field_uuid===ge.id}))&&j.push({view_uuid:t.id,field_uuid:ge.id,type:ve.type})}if(t.sort&&t.sort.options){var me,ye=$D(t.sort.options);try{var be=function(){var e=me.value;if(!R.some((function(t){return t.field_uuid===e.id})))return 1;N.push({view_uuid:t.id,field_uuid:e.id,type:e.type})};for(ye.s();!(me=ye.n()).done;)be()}catch(e){ye.e(e)}finally{ye.f()}}if(t.stats)for(var we=0,_e=Object.keys(t.stats);we<_e.length;we++){var xe=_e[we];L.push({view_uuid:t.id,field_uuid:xe,type:t.stats[xe]})}e.setData("view_config",M),e.setData("view_field",R),e.setData("view_record",A),e.setData("group",j),e.setData("group_item",D),e.setData("filter_thing",T.sort((function(e,t){return a()(e.created_at).unix()-a()(t.created_at).unix()}))),e.setData("filter_packet",F.sort((function(e,t){return a()(e.created_at).unix()-a()(t.created_at).unix()}))),e.setData("sort",N),e.setData("stat",L)}},{key:"toData",value:function(e){var t,n=this,r=null==(t=e.query("record"))?void 0:t.toJSON(),i=this._toProcess.toTable();return i.records=r.map((function(e){var t=n._readService.getOriginRecord(e.uuid);return{id:e.id,uuid:e.uuid,user_id:e.creator_id,modifier_id:e.modifier_id,sheet_id:i.sheet[0].id,data:JSON.stringify(n._toProcess.toRecord(t)),updated_at:+new Date(e.updated_at),created_at:+new Date(e.created_at)}})).filter((function(e){return!!e})),i}}])}();function eT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function rT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iT(e,t,n){return t=DC(t),jC(e,oT()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function oT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oT=function(){return!!e})()}JD([Yf(YD)],QD.prototype,"_toProcess",2),JD([Yf(LD)],QD.prototype,"_processRegistry",2),JD([Yf(RC)],QD.prototype,"_configuration",2),JD([Yf(XA)],QD.prototype,"_readService",2),QD=JD([Gf()],QD);var aT=Object.defineProperty,lT=Object.getOwnPropertyDescriptor,uT=function(e,t,n,r){for(var i,o=r>1?void 0:r?lT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&aT(t,n,o),o},cT=function(e){function t(){var e;return rx(this,t),(e=iT(this,t,arguments))._onDataLoaded=e._register(new dS),e.onDataLoaded=e._onDataLoaded.event,e._onDataChanged=e._register(new dS),e.onDataChanged=e._onDataChanged.event,e._onCollabUsersChange=e._register(new dS),e.onCollabUsersChange=e._onCollabUsersChange.event,e._isFirstLoad=!0,e._isRecordFirstLoad=!0,e.hooks={init:new eO,destroy:new tO},e}return NC(t,e),ox(t,[{key:"init",value:(n=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,this.registerAbility(this._tableAbility),this.registerAbility(this._fieldAbility),this.registerAbility(this._recordAbility),this.registerAbility(this._viewAbility),n.get(cD).init(),this._listenEvent(),this._initPlugins(),e.next=10,this.hooks.init.promise();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initCommandHooks",value:function(e){var t,n=nT(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._commandService.registerCommandHook(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"emitLoaded",value:function(){this._onDataLoaded.emit("loadedData")}},{key:"emitRecordLoaded",value:function(){this._onDataLoaded.emit("loadedRecords")}},{key:"_initPlugins",value:function(){var e=this;this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)})),this._commandService.seal()}},{key:"_listenEvent",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(){e._onDataChanged.emit("command-execute")})),this._database.stack.onUndo((function(){e._onDataChanged.emit("stack-undo")})),this._database.stack.onRedo((function(){e._onDataChanged.emit("stack-redo")})),this._refreshEventService.onAfterRefresh((function(){e._onDataChanged.emit("refresh-event")})),this._configuration.onValueChange((function(t){var n;(null==(n=t.path)?void 0:n.startsWith("ability"))&&e._onDataChanged.emit("refresh-event")}))}},{key:"registerField",value:function(e){this._fieldRegistry.registerField(e)}},{key:"registerAbility",value:function(e){this._abilityRegistry.registerAbility(e)}},{key:"setContent",value:function(e,t,n){var r=this;e&&(t&&Array.isArray(e)&&(e=function(e,t){var n,r=Cx(32),i={},o=[],a=eT(e);try{for(a.s();!(n=a.n()).done;){for(var l=n.value,u=Object.keys(l),c={},s=function(){var e=f[d];if(!t[e])return 0;var n=l[e];if(!n)return 0;var r=t[e].name,o=t[e].type;if(i[r]||(i[r]={name:r,type:o,id:Cx(32)},o===xO.SELECT&&(i[r].options=[])),o===xO.SELECT){var a,u=i[r].options.find((function(e){return e.value===n}));u?a=u.id:(a=Cx(6),i[r].options.push({id:a,value:n})),c[i[r].id]={value:a}}else c[i[r].id]={value:n}},d=0,f=u;d<f.length;d++)s();o.push({uuid:Cx(32),data:JSON.stringify(c)})}}catch(e){a.e(e)}finally{a.f()}var h=Cx(32);return{format:"laketable",type:"Table",version:1.4,larkJson:!0,sheet:[{id:r,columns:Object.keys(i).map((function(e){return i[e]})),defaultView:h,activeView:h,views:nx({},h,{id:h,name:"表格视图",type:WO.GRID,columns:[]})}],sheetId:r,records:o}}(e,t)),!n&&this._lifeService.status<cx.WorkbenchInited?this._lifeService.when(cx.WorkbenchInited,(function(){r._loadData(e)})):this._loadData(e))}},{key:"_loadData",value:function(e){this._isFirstLoad&&(this._lifeService.status=cx.Starting);var t=(e="string"==typeof e?JSON.parse(e):Object.assign({},e)).records,n=(null==t?void 0:t.map((function(e){return e.content?{recordId:e.uuid,content:e.content}:null})).filter((function(e){return!!e})))||[];delete e.records,n.length>0&&(e.contents=n),this._kernelModel.initData(e),this._isFirstLoad&&(this._lifeService.status=cx.Ready,this._logger.log({type:YS.kernel,action:"dataReady"})),this.emitLoaded(),t&&this.setRecords(t),this._isFirstLoad=!1}},{key:"setRecords",value:function(e){var t=this;e&&(this._lifeService.status<cx.Ready?this._lifeService.when(cx.Ready,(function(){t._loadRecords(e)})):this._loadRecords(e))}},{key:"_loadRecords",value:function(e){this._isRecordFirstLoad?(this._lifeService.status=cx.RecordInit,this._kernelModel.initRecords(e),this._lifeService.status=cx.RecordReady,this._isRecordFirstLoad=!1,this._logger.log({type:YS.kernel,action:"recordReady",data:[]})):this._kernelModel.initRecords(e),this.emitRecordLoaded()}},{key:"setUsers",value:function(e){e&&this._kernelModel.initUsers(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this.hooks.destroy.call()}}]);var n}(HC);function sT(e,t,n){return t=DC(t),jC(e,dT()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function dT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dT=function(){return!!e})()}uT([gh(mj)],cT.prototype,"kernelPluginProvider",2),uT([Yf(Lj)],cT.prototype,"_commandService",2),uT([Yf(RC)],cT.prototype,"_configuration",2),uT([Yf(sC)],cT.prototype,"_database",2),uT([Yf(UA)],cT.prototype,"_kernelModel",2),uT([Yf(rj)],cT.prototype,"_refreshEventService",2),uT([Yf(sx)],cT.prototype,"_lifeService",2),uT([Yf(cM)],cT.prototype,"_fieldRegistry",2),uT([Yf(rD)],cT.prototype,"_abilityRegistry",2),uT([Yf(SD)],cT.prototype,"_tableAbility",2),uT([Yf(mD)],cT.prototype,"_fieldAbility",2),uT([Yf(_D)],cT.prototype,"_recordAbility",2),uT([Yf(PD)],cT.prototype,"_viewAbility",2),uT([Yf($S)],cT.prototype,"_logger",2),uT([Df()],cT.prototype,"destroy",1),cT=uT([Gf()],cT);var fT=Object.defineProperty,hT=Object.getOwnPropertyDescriptor,pT=function(e){function t(){var e;return rx(this,t),(e=sT(this,t,arguments))._onError=e._register(new dS),e.onError=e._onError.event,e}return NC(t,e),ox(t,[{key:"error",value:function(e){this._onError.emit(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function vT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function gT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mT(e,t,n){return t=DC(t),jC(e,yT()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function yT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yT=function(){return!!e})()}pT=function(e,t,n,r){for(var i,o=r>1?void 0:r?hT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fT(t,n,o),o}([Gf()],pT),hh.config({lifecycle:Rf.Lifecycle.singleton});var bT=function(e){function t(e){var n;return rx(this,t),(n=mT(this,t))._onFinishExecuteCommand=n._register(new dS),n.onFinishExecuteCommand=n._onFinishExecuteCommand.event,n._options=e,n.container=e.container||new hh,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:YS.kernel,action:"kernelInited",data:{body:e.data,settings:e.settings}}),n}return NC(t,e),ox(t,[{key:"onDataLoaded",get:function(){return this.kernelService.onDataLoaded}},{key:"start",value:function(){this._options.data&&this.kernelService.setContent(this._options.data)}},{key:"init",value:function(){var e=this;this.container.get(UA).init();var t=this.container.get(Oj).getCurrentUser();t&&this.container.get(eM).setCurrentUser(t),this.kernelService.init({container:this.container}),this._options.commandHooks&&this.kernelService.initCommandHooks(this._options.commandHooks),this.container.get(Lj).onFinishExecuteCommand((function(t){e._onFinishExecuteCommand.emit(t)})),this._lifeService.status=cx.Inited}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this.kernelService.destroy(),this.logService.destroy(),this.unregisterPlugins(this.container)}},{key:"_logger",get:function(){return this.container.get($S)}},{key:"_loadCoreServices",value:function(){var e=this;this._lifeService=this.container.get(sx),this.container.get($O),this.container.get(CA),this.kernelService=this.container.get(cT),this.logService=this.container.get(pT),this.logService.onError((function(t){var n,r;null==(r=(n=e._options).onError)||r.call(n,t)}))}},{key:"getContent",value:function(){return this.container.get(IA).getContent()}},{key:"setContent",value:function(e,t){this.kernelService.setContent(e,t)}},{key:"setRecords",value:function(e){this.kernelService.setRecords(e)}},{key:"setUsers",value:function(e){this.kernelService.setUsers(e)}},{key:"_registerContribs",value:function(e){if(e){var t,n=vT(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(iO),wT=ch().contribution(mj).register(cT).register(pT),_T=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e.WAITING="waiting",e}(_T||{});function xT(e,t,n){return t=DC(t),jC(e,kT()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function kT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kT=function(){return!!e})()}var CT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rx(this,t),(e=xT(this,t))._retryCount=0,e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new dS),e.onDidStatusChange=e._onDidStatusChange.event,e.name=n.name,e._interval=n.interval||1e3,e._maxRetries=n.maxRetries||3,e}return NC(t,e),ox(t,[{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this._job=null,this._retryCount=null,this._isRuning=null,this._lastRunAt=null,this._isStop=null,clearTimeout(this._timer),this._timer=null}},{key:"addJob",value:function(e){this._job=e}},{key:"hasRuningJob",value:function(){return!this._isStop}},{key:"run",value:(n=aO(QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isStop&&this._job){e.next=2;break}return e.abrupt("return");case 2:if(!(this._retryCount>=this._maxRetries)){e.next=4;break}return e.abrupt("return");case 4:if(!this._isRuning){e.next=6;break}return e.abrupt("return");case 6:if(t=+new Date,!(this._lastRunAt&&t-this._lastRunAt<this._interval)){e.next=9;break}return e.abrupt("return");case 9:return this._isRuning=!0,this._onDidStatusChange.emit(_T.RUNNING),e.prev=11,e.next=14,this._job();case 14:e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(11),console.error(e.t0),this._retryCount++,e.next=22,this.run();case 22:return e.abrupt("return");case 23:this._isRuning=!1,this._retryCount=0,this._lastRunAt=+new Date;case 26:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(){return n.apply(this,arguments)})},{key:"start",value:function(){var e=this;this.run().then((function(){e._timer=setTimeout(aO(QC.mark((function t(){return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.start();case 1:case"end":return t.stop()}}),t)}))),e._interval)}))}},{key:"stop",value:function(){this._isStop=!0,clearTimeout(this._timer),this._onDidStatusChange.emit(_T.ABORTED)}},{key:"resume",value:function(){this._isStop=!1,this.start()}}]);var n}(HC);function ST(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return OT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function OT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ET(e,t,n){return t=DC(t),jC(e,IT()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function IT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IT=function(){return!!e})()}var PT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rx(this,t),(e=ET(this,t))._jobs=[],e._penddingJobs=[],e._runingJobs=[],e._successJobs=[],e._errorJobs=[],e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new dS),e.onDidStatusChange=e._onDidStatusChange.event,e.stop=function(){e._isStop=!0,e._onDidStatusChange.emit({status:_T.ABORTED})},e.resume=function(){e._isStop&&(e._isStop=!1,e.start())},e.name=n.name,e._parallel=n.parallel||5,e}return NC(t,e),ox(t,[{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this._jobs=[],this._penddingJobs=[],this._runingJobs=[],this._successJobs=[],this._errorJobs=[],this._isRuning=!1,this._isStop=!1}},{key:"getJob",value:function(e){return this._jobs.find((function(t){return t.id===e}))}},{key:"getSuccessJobs",value:function(){var e=this;return this._successJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"getRunningJobs",value:function(){var e=this;return this._runingJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"hasRuningJob",value:function(){return!this._isStop&&!!this._runingJobs.length}},{key:"hasPenddingJob",value:function(){return!!this._penddingJobs.length}},{key:"runJob",value:function(e){var t=this,n=this._jobs.find((function(t){return t.id===e}));if(n&&!this._runingJobs.find((function(t){return t===e}))&&!this._successJobs.find((function(t){return t===e}))){this._errorJobs.find((function(t){return t===e}))&&Hc(this._errorJobs,(function(t){return t===e})),Hc(this._penddingJobs,(function(t){return t===e})),this._runingJobs.push(e),n.runAt=new Date;var r=function(){n.endAt=new Date,n.spend=Number(n.endAt)-Number(n.runAt),n.runCount=n.runCount?n.runCount+1:1,Hc(t._runingJobs,(function(t){return t===e})),t._run()};try{n.handler({jobId:e,onSuccess:function(){n.status=_T.SUCCESS,t._onDidStatusChange.emit({status:_T.SUCCESS,jobId:n.id}),t._successJobs.push(n.id),r()},onError:function(){n.status=_T.ERROR,t._errorJobs.push(n.id),r()},onProcess:function(e){n.percent=e,t._onDidStatusChange.emit({status:_T.RUNNING,jobId:n.id,percent:e})}})}catch(e){console.error(e)}}}},{key:"_run",value:function(){if(!this._isStop){var e=this._runingJobs.length;if(e<this._parallel){var t=(o=this._penddingJobs,a=0,l=this._parallel-e,(u=null==o?0:o.length)?(l&&"number"!=typeof l&&Fi(o,a,l)?(a=0,l=u):(a=null==a?0:zr(a),l=void 0===l?u:zr(l)),qo(o,a,l)):[]);if(0===t.length)return this._isRuning=!1,void this._onDidStatusChange.emit({status:_T.WAITING});var n,r=ST(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._isRuning=!0,this.runJob(i)}}catch(e){r.e(e)}finally{r.f()}}else{var o,a,l,u;0===e&&(this._isRuning=!1,this._onDidStatusChange.emit({status:_T.WAITING}))}}}},{key:"start",value:function(){this._onDidStatusChange.emit({status:_T.PENDING}),this._run()}},{key:"addJob",value:function(e,t){1===arguments.length?(t=e,e=Cx(16)):"string"==typeof e&&(Hc(this._jobs,(function(t){return t===e})),Hc(this._penddingJobs,(function(t){return t===e})));var n={id:e,status:_T.PENDING,handler:t};return this._jobs.push(n),this._penddingJobs.push(n.id),this._isRuning||this._isStop||this.start(),n}},{key:"removeSuccessJob",value:function(e){Hc(this._successJobs,(function(t){return t===e}))}}])}(HC);function MT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return RT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RT(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function RT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var AT=Object.defineProperty,jT=Object.getOwnPropertyDescriptor,DT=function(e,t,n,r){for(var i,o=r>1?void 0:r?jT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&AT(t,n,o),o},TT=function(){return ox((function e(){rx(this,e),this._queueTasks=[]}),[{key:"init",value:function(){var e=this;this.beforeUnload=wO.onBeforeUnLoad((function(t){var n,r=MT(e._queueTasks);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.hasRuningJob())return t.preventDefault(),t.returnValue="",wx("还有 ".concat(i.name," 正在运行中，确认要离开页面吗."))}}catch(e){r.e(e)}finally{r.f()}}))}},{key:"createRepeatTask",value:function(e){return new CT(e)}},{key:"createQueueTask",value:function(e){var t=new PT(e);return this._queueTasks.push(t),t}},{key:"destroy",value:function(){var e;null==(e=this.beforeUnload)||e.destroy()}}])}();DT([jf()],TT.prototype,"init",1),DT([Df()],TT.prototype,"destroy",1),TT=DT([Gf()],TT);var FT=ch().register(TT),NT=Rf.defineToken("LinkDetailContribution"),LT=Object.defineProperty,BT=Object.getOwnPropertyDescriptor,VT=function(e,t,n,r){for(var i,o=r>1?void 0:r?BT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&LT(t,n,o),o},zT=function(){return ox((function e(){rx(this,e)}),[{key:"getLinkDetailProvider",value:function(){var e=this.linkDetailProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerLinkDetail()}}])}();VT([gh(NT)],zT.prototype,"linkDetailProvider",2),zT=VT([Gf()],zT);var HT=Object.defineProperty,WT=Object.getOwnPropertyDescriptor,UT=function(e,t,n,r){for(var i,o=r>1?void 0:r?WT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&HT(t,n,o),o},GT=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._queueTask=new PT({name:"获取连接详情任务队列",parallel:1}),this.timerId=setInterval((function(){var t;null==(t=e._queueTask)||t.resume()}),1e3)}},{key:"addUpdateLinkDetailJob",value:function(e){var t;null==(t=this._queueTask)||t.addJob(function(){var t=aO(QC.mark((function t(n){return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",n.onError(t.t0));case 9:n.onSuccess();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"getLinkDetail",value:(e=aO(QC.mark((function e(t){var n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=null==(r=null==(n=this._linkRegistry.getLinkDetailProvider())?void 0:n.getLinkDetail)?void 0:r.call(n,t),e.abrupt("return",i);case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(t){return e.apply(this,arguments)})},{key:"getIconByDetail",value:function(e){var t=(null==e?void 0:e.image)||"";return e.target_type&&(t="yuqueicon:".concat(e.target_type,":").concat(e.type)),t}},{key:"destroy",value:function(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}}]);var e}();function YT(e,t,n){return t=DC(t),jC(e,$T()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($T=function(){return!!e})()}UT([Yf(zT)],GT.prototype,"_linkRegistry",2),UT([jf()],GT.prototype,"init",1),UT([Df()],GT.prototype,"destroy",1),GT=UT([Gf()],GT);var qT=Object.defineProperty,KT=Object.getOwnPropertyDescriptor,XT=function(e,t,n,r){for(var i,o=r>1?void 0:r?KT(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qT(t,n,o),o},JT=function(e){function t(){return rx(this,t),YT(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return JT.type}},{key:"baseType",get:function(){return JT.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return!(!Ax(t)&&null!=t)||jk(t.src||t)},errorMsg:wx("输入格式有误")}]}},{key:"validate",value:function(e){if(!e)return!0;var t=e.name,n=e.src;return!(!t||!n)&&((null==t?void 0:t.length)>JT.MAX_LENGTH&&(e.name=t.substring(0,JT.MAX_LENGTH)),!!lC(n))}},{key:"transform",value:function(e){var t;if(!e)return null;if("string"==typeof e){if(lC(e))return{value:{name:e,src:e}};var n;try{n=new URL(e)}catch(r){try{n=new URL("http://"+e)}catch(n){return{value:{name:e,src:(null==(t=globalThis.location)?void 0:t.href)||"https://www.yuque.com"}}}}var r=n.host.split(".");return 1===r.length&&(n.host=r[0]+".com"),{value:{name:e,src:n.toString().replace(/\/$/gi,"")}}}return{value:{name:e.name||"",src:e.src||""}}}},{key:"formatted",value:function(e){return null==e?"":e.name||e.src||""}},{key:"keyValue",value:function(e){return e&&e.name&&e.src?"".concat(e.name,"|").concat(e.src):""}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r={name:(null==n?void 0:n.get("name"))||"",src:(null==n?void 0:n.get("src"))||"",icon:(null==n?void 0:n.get("icon"))||""},i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),verify:i.get("verify"),errorMessage:i.get("verify_message"),updated_at:i.get("updated_at"),value:r,by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"_asyncUpdateLinkDetail",value:function(e,t,n){var r=this;n.icon||this._linkService.addUpdateLinkDetailJob(aO(QC.mark((function i(){var o,a,l,u,c;return QC.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r._linkService.getLinkDetail(n.src);case 2:if((a=i.sent)&&a.title){i.next=6;break}return r._database.stack.transact((function(){r.model.upsert({field_uuid:e,record_uuid:t},{icon:null})})),i.abrupt("return");case 6:if(l=r.getCell(e,t)){i.next=9;break}return i.abrupt("return");case 9:if((null==(o=l.value)?void 0:o.src)===n.src){i.next=11;break}return i.abrupt("return");case 11:if(a.target_type||!n.name){i.next=13;break}return i.abrupt("return");case 13:u=a.title,n.name&&n.name!==n.src&&(u=n.name),c=r._linkService.getIconByDetail(a),r._database.stack.transact((function(){r.model.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,name:u,icon:c}),r._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:r.formatted({name:u,src:n.src,icon:n.icon})})})),r._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:r.getCell(e,t)});case 18:case"end":return i.stop()}}),i)}))))}},{key:"upsertModelCell",value:function(e,t,n,r){var i=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),i.verify,i.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,name:n.value.name||n.value.src,src:n.value.src,icon:n.value.icon}),this.upsertModelCell(e,t,n.value),this._asyncUpdateLinkDetail(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r,i,o,a;return t.upsertModelCell(n,e.recordId,e.value),t._asyncUpdateLinkDetail(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,name:(null==(r=e.value)?void 0:r.name)||(null==(i=e.value)?void 0:i.src),src:null==(o=e.value)?void 0:o.src,icon:null==(a=e.value)?void 0:a.icon}})))}}])}(gj);function ZT(e){return(ZT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}JT.type=xO.LINK,JT.baseType=kO.URI,JT.MAX_LENGTH=128,XT([Yf(GT)],JT.prototype,"_linkService",2),XT([Yf(aM)],JT.prototype,"_eventService",2),XT([Yf(sC)],JT.prototype,"_database",2),JT=XT([Gf()],JT);var QT=/^\s+/,eF=/\s+$/;function tF(e,t){if(t=t||{},(e=e||"")instanceof tF)return e;if(!(this instanceof tF))return new tF(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,l=!1;"string"==typeof e&&(e=function(e){e=e.replace(QT,"").replace(eF,"").toLowerCase();var t,n=!1;if(yF[e])e=yF[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=RF.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=RF.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=RF.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=RF.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=RF.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=RF.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=RF.hex8.exec(e))return{r:kF(t[1]),g:kF(t[2]),b:kF(t[3]),a:EF(t[4]),format:n?"name":"hex8"};if(t=RF.hex6.exec(e))return{r:kF(t[1]),g:kF(t[2]),b:kF(t[3]),format:n?"name":"hex"};if(t=RF.hex4.exec(e))return{r:kF(t[1]+""+t[1]),g:kF(t[2]+""+t[2]),b:kF(t[3]+""+t[3]),a:EF(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=RF.hex3.exec(e))return{r:kF(t[1]+""+t[1]),g:kF(t[2]+""+t[2]),b:kF(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==ZT(e)&&(AF(e.r)&&AF(e.g)&&AF(e.b)?(u=e.r,c=e.g,s=e.b,t={r:255*_F(u,255),g:255*_F(c,255),b:255*_F(s,255)},a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):AF(e.h)&&AF(e.s)&&AF(e.v)?(r=SF(e.s),i=SF(e.v),t=function(e,t,n){e=6*_F(e,360),t=_F(t,100),n=_F(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),u=r%6,c=[n,a,o,o,l,n][u],s=[l,n,n,a,o,o][u],d=[o,o,l,n,n,a][u];return{r:255*c,g:255*s,b:255*d}}(e.h,r,i),a=!0,l="hsv"):AF(e.h)&&AF(e.s)&&AF(e.l)&&(r=SF(e.s),o=SF(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=_F(e,360),t=_F(t,100),n=_F(n,100),0===t)r=i=o=n;else{var l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;r=a(u,l,e+1/3),i=a(u,l,e),o=a(u,l,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a));var u,c,s;return n=wF(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function nF(e,t,n){e=_F(e,255),t=_F(t,255),n=_F(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),l=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=l>.5?u/(2-o-a):u/(o+a),o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:l}}function rF(e,t,n){e=_F(e,255),t=_F(t,255),n=_F(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),l=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:l}}function iF(e,t,n,r){var i=[CF(Math.round(e).toString(16)),CF(Math.round(t).toString(16)),CF(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function oF(e,t,n,r){return[CF(OF(r)),CF(Math.round(e).toString(16)),CF(Math.round(t).toString(16)),CF(Math.round(n).toString(16))].join("")}function aF(e,t){t=0===t?0:t||10;var n=tF(e).toHsl();return n.s-=t/100,n.s=xF(n.s),tF(n)}function lF(e,t){t=0===t?0:t||10;var n=tF(e).toHsl();return n.s+=t/100,n.s=xF(n.s),tF(n)}function uF(e){return tF(e).desaturate(100)}function cF(e,t){t=0===t?0:t||10;var n=tF(e).toHsl();return n.l+=t/100,n.l=xF(n.l),tF(n)}function sF(e,t){t=0===t?0:t||10;var n=tF(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),tF(n)}function dF(e,t){t=0===t?0:t||10;var n=tF(e).toHsl();return n.l-=t/100,n.l=xF(n.l),tF(n)}function fF(e,t){var n=tF(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,tF(n)}function hF(e){var t=tF(e).toHsl();return t.h=(t.h+180)%360,tF(t)}function pF(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=tF(e).toHsl(),r=[tF(e)],i=360/t,o=1;o<t;o++)r.push(tF({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function vF(e){var t=tF(e).toHsl(),n=t.h;return[tF(e),tF({h:(n+72)%360,s:t.s,l:t.l}),tF({h:(n+216)%360,s:t.s,l:t.l})]}function gF(e,t,n){t=t||6,n=n||30;var r=tF(e).toHsl(),i=360/n,o=[tF(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(tF(r));return o}function mF(e,t){t=t||6;for(var n=tF(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],l=1/t;t--;)a.push(tF({h:r,s:i,v:o})),o=(o+l)%1;return a}tF.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=wF(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=rF(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=rF(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=nF(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=nF(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return iF(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[CF(Math.round(e).toString(16)),CF(Math.round(t).toString(16)),CF(Math.round(n).toString(16)),CF(OF(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*_F(this._r,255))+"%",g:Math.round(100*_F(this._g,255))+"%",b:Math.round(100*_F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*_F(this._r,255))+"%, "+Math.round(100*_F(this._g,255))+"%, "+Math.round(100*_F(this._b,255))+"%)":"rgba("+Math.round(100*_F(this._r,255))+"%, "+Math.round(100*_F(this._g,255))+"%, "+Math.round(100*_F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(bF[iF(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+oF(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=tF(e);n="#"+oF(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return tF(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(cF,arguments)},brighten:function(){return this._applyModification(sF,arguments)},darken:function(){return this._applyModification(dF,arguments)},desaturate:function(){return this._applyModification(aF,arguments)},saturate:function(){return this._applyModification(lF,arguments)},greyscale:function(){return this._applyModification(uF,arguments)},spin:function(){return this._applyModification(fF,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(gF,arguments)},complement:function(){return this._applyCombination(hF,arguments)},monochromatic:function(){return this._applyCombination(mF,arguments)},splitcomplement:function(){return this._applyCombination(vF,arguments)},triad:function(){return this._applyCombination(pF,[3])},tetrad:function(){return this._applyCombination(pF,[4])}},tF.fromRatio=function(e,t){if("object"==ZT(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:SF(e[r]));e=n}return tF(e,t)},tF.equals=function(e,t){return!(!e||!t)&&tF(e).toRgbString()==tF(t).toRgbString()},tF.random=function(){return tF.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tF.mix=function(e,t,n){n=0===n?0:n||50;var r=tF(e).toRgb(),i=tF(t).toRgb(),o=n/100;return tF({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},tF.readability=function(e,t){var n=tF(e),r=tF(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},tF.isReadable=function(e,t,n){var r,i,o=tF.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},tF.mostReadable=function(e,t,n){var r,i,o,a,l=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=tF.readability(e,t[c]))>u&&(u=r,l=tF(t[c]));return tF.isReadable(e,l,{level:o,size:a})||!i?l:(n.includeFallbackColors=!1,tF.mostReadable(e,["#fff","#000"],n))};var yF=tF.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bF=tF.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(yF);function wF(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function _F(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function xF(e){return Math.min(1,Math.max(0,e))}function kF(e){return parseInt(e,16)}function CF(e){return 1==e.length?"0"+e:""+e}function SF(e){return e<=1&&(e=100*e+"%"),e}function OF(e){return Math.round(255*parseFloat(e)).toString(16)}function EF(e){return kF(e)/255}var IF,PF,MF,RF=(PF="[\\s|\\(]+("+(IF="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+IF+")[,|\\s]+("+IF+")\\s*\\)?",MF="[\\s|\\(]+("+IF+")[,|\\s]+("+IF+")[,|\\s]+("+IF+")[,|\\s]+("+IF+")\\s*\\)?",{CSS_UNIT:new RegExp(IF),rgb:new RegExp("rgb"+PF),rgba:new RegExp("rgba"+MF),hsl:new RegExp("hsl"+PF),hsla:new RegExp("hsla"+MF),hsv:new RegExp("hsv"+PF),hsva:new RegExp("hsva"+MF),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function AF(e){return!!RF.CSS_UNIT.exec(e)}function jF(e,t){return ax(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||Z_(e,t)||lx()}var DF={white:"255, 255, 255",black:"0, 0, 0","grey-1":"250, 250, 250","grey-2":"244, 245, 245","grey-3":"239, 240, 240","grey-4":"231, 233, 232","grey-5":"216, 218, 217","grey-6":"190, 192, 191","grey-7":"138, 143, 141","grey-8":"88, 90, 90","grey-9":"38, 38, 38","green-1":"218, 246, 234","green-2":"199, 240, 223","green-3":"130, 237, 192","green-4":"69, 222, 157","green-5":"11, 208, 125","green-6":"0, 185, 107","green-7":"0, 148, 86","green-8":"0, 102, 59","green-9":"0, 61, 35","cyan-1":"206, 245, 247","cyan-2":"181, 239, 242","cyan-3":"129, 223, 228","cyan-4":"94, 211, 217","cyan-5":"29, 192, 201","cyan-6":"1, 178, 188","cyan-7":"7, 139, 146","cyan-8":"7, 120, 126","cyan-9":"0, 67, 71","blue-1":"217, 234, 252","blue-2":"192, 221, 252","blue-3":"129, 187, 248","blue-4":"95, 168, 246","blue-5":"47, 142, 244","blue-6":"17, 124, 238","blue-7":"12, 104, 202","blue-8":"7, 74, 146","blue-9":"0, 52, 107","orange-1":"253, 230, 211","orange-2":"248, 214, 185","orange-3":"248, 184, 129","orange-4":"246, 160, 85","orange-5":"243, 143, 57","orange-6":"237, 116, 12","orange-7":"199, 92, 0","orange-8":"148, 68, 0","orange-9":"102, 48, 0","purple-1":"230, 220, 249","purple-2":"217, 201, 248","purple-3":"186, 155, 242","purple-4":"154, 110, 237","purple-5":"126, 69, 232","purple-6":"96, 27, 222","purple-7":"76, 22, 177","purple-8":"57, 16, 132","purple-9":"39, 0, 112","brown-1":"240, 231, 214","brown-2":"231, 215, 187","brown-3":"219, 195, 154","brown-4":"210, 182, 132","brown-5":"197, 159, 94","brown-6":"177, 135, 63","brown-7":"146, 112, 53","brown-8":"116, 89, 42","brown-9":"82, 63, 30","pea-green-1":"232, 247, 207","pea-green-2":"219, 241, 183","pea-green-3":"193, 231, 126","pea-green-4":"167, 221, 75","pea-green-5":"140, 207, 23","pea-green-6":"116, 182, 2","pea-green-7":"92, 141, 7","pea-green-8":"64, 97, 5","pea-green-9":"42, 66, 0","sea-blue-1":"217, 223, 252","sea-blue-2":"192, 202, 252","sea-blue-3":"150, 167, 253","sea-blue-4":"110, 133, 247","sea-blue-5":"72, 97, 224","sea-blue-6":"47, 75, 218","sea-blue-7":"33, 59, 192","sea-blue-8":"22, 40, 131","sea-blue-9":"16, 30, 96","red-1":"251, 228, 231","red-2":"248, 206, 211","red-3":"241, 162, 171","red-4":"234, 117, 131","red-5":"228, 73, 91","red-6":"223, 42, 63","red-7":"173, 26, 43","red-8":"143, 5, 21","red-9":"112, 0, 13","yellow-1":"249, 239, 205","yellow-2":"246, 225, 172","yellow-3":"245, 212, 128","yellow-4":"245, 203, 97","yellow-5":"243, 187, 47","yellow-6":"236, 170, 4","yellow-7":"201, 145, 3","yellow-8":"143, 102, 0","yellow-9":"102, 73, 0","magenta-1":"251, 223, 239","magenta-2":"247, 196, 226","magenta-3":"242, 151, 204","magenta-4":"236, 106, 182","magenta-5":"231, 70, 164","magenta-6":"210, 45, 141","magenta-7":"174, 20, 110","magenta-8":"128, 15, 81","magenta-9":"92, 0, 54"},TF=Rf.defineToken("ThemeToken"),FF=function(e){return e.default="default",e.dark="dark",e}(FF||{}),NF=Rf.defineToken("ThemeContribution"),LF={white:"0, 0, 0",black:"255, 255, 255","grey-1":"20, 20, 20","grey-2":"31, 31, 31","grey-3":"41, 41, 41","grey-4":"51, 51, 51","grey-5":"66, 66, 66","grey-6":"80, 80, 80","grey-7":"132, 132, 132","grey-8":"179, 179, 179","grey-9":"226, 226, 226","green-1":"14, 47, 34","green-2":"37, 86, 65","green-3":"24, 119, 79","green-4":"41, 142, 100","green-5":"41, 173, 118","green-6":"81, 184, 141","green-7":"107, 209, 166","green-8":"151, 216, 188","green-9":"188, 230, 213","cyan-1":"18, 52, 54","cyan-2":"37, 83, 86","cyan-3":"26, 112, 116","cyan-4":"39, 139, 144","cyan-5":"34, 168, 175","cyan-6":"78, 182, 188","cyan-7":"118, 194, 198","cyan-8":"149, 215, 219","cyan-9":"191, 225, 227","blue-1":"25, 48, 72","blue-2":"37, 60, 86","blue-3":"29, 70, 114","blue-4":"36, 90, 148","blue-5":"43, 107, 177","blue-6":"59, 130, 206","blue-7":"104, 159, 217","blue-8":"141, 181, 226","blue-9":"181, 208, 237","orange-1":"56, 42, 30","orange-2":"94, 59, 29","orange-3":"119, 68, 24","orange-4":"157, 87, 27","orange-5":"188, 104, 32","orange-6":"211, 127, 54","orange-7":"222, 159, 104","orange-8":"224, 175, 133","orange-9":"233, 207, 185","purple-1":"44, 28, 74","purple-2":"53, 34, 89","purple-3":"58, 28, 115","purple-4":"81, 42, 152","purple-5":"90, 44, 175","purple-6":"117, 81, 184","purple-7":"150, 119, 207","purple-8":"176, 153, 219","purple-9":"202, 188, 231","brown-1":"52, 42, 24","brown-2":"84, 67, 39","brown-3":"98, 78, 45","brown-4":"126, 101, 58","brown-5":"150, 120, 69","brown-6":"178, 145, 88","brown-7":"194, 168, 122","brown-8":"210, 191, 157","brown-9":"226, 214, 192","pea-green-1":"36, 47, 20","pea-green-2":"68, 86, 37","pea-green-3":"85, 121, 21","pea-green-4":"106, 146, 38","pea-green-5":"122, 173, 34","pea-green-6":"148, 188, 78","pea-green-7":"174, 214, 102","pea-green-8":"194, 223, 144","pea-green-9":"213, 225, 193","sea-blue-1":"28, 38, 84","sea-blue-2":"37, 45, 86","sea-blue-3":"27, 42, 116","sea-blue-4":"36, 54, 148","sea-blue-5":"43, 65, 177","sea-blue-6":"59, 84, 206","sea-blue-7":"104, 123, 217","sea-blue-8":"141, 155, 226","sea-blue-9":"181, 190, 237","red-1":"64, 33, 37","red-2":"91, 32, 39","red-3":"116, 27, 37","red-4":"152, 31, 45","red-5":"182, 37, 54","red-6":"202, 63, 79","red-7":"204, 123, 132","red-8":"212, 145, 153","red-9":"230, 188, 193","yellow-1":"53, 45, 23","yellow-2":"86, 72, 37","yellow-3":"119, 92, 24","yellow-4":"156, 120, 28","yellow-5":"194, 146, 25","yellow-6":"210, 166, 56","yellow-7":"232, 190, 84","yellow-8":"239, 207, 129","yellow-9":"238, 222, 180","magenta-1":"78, 24, 55","magenta-2":"91, 31, 66","magenta-3":"112, 31, 78","magenta-4":"148, 36, 101","magenta-5":"164, 55, 118","magenta-6":"190, 75, 142","magenta-7":"206, 120, 170","magenta-8":"217, 150, 189","magenta-9":"230, 188, 213"};function BF(e,t,n){return t=DC(t),jC(e,VF()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function VF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VF=function(){return!!e})()}var zF=Object.defineProperty,HF=Object.getOwnPropertyDescriptor,WF=function(e,t,n,r){for(var i,o=r>1?void 0:r?HF(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zF(t,n,o),o},UF=function(e){function t(){var e;return rx(this,t),(e=BF(this,t,arguments)).prefix="lt",e}return NC(t,e),ox(t,[{key:"sizeId",get:function(){return"lt-theme-size-style"}},{key:"zindexId",get:function(){return"lt-theme-zindex-style"}},{key:"baseLightColorId",get:function(){return"lt-theme-base-light-color-style"}},{key:"baseDarkColorId",get:function(){return"lt-theme-base-dark-color-style"}},{key:"ligthColorId",get:function(){return"lt-theme-light-color-style"}},{key:"darkColorId",get:function(){return"lt-theme-dark-color-style"}},{key:"init",value:function(){this.injectBaseLightColorCss(),this.injectBaseDarkColorCss(),this.injectSizeCss(),this.injectZindexCss(),this.injectLightColorCss(),this.injectDarkColorCss()}},{key:"useStyle",value:function(e){this.addHtmlThemeTag(e)}},{key:"addHtmlThemeTag",value:function(e){document.documentElement.setAttribute("data-lt-theme","dark"===e?"dark":"default")}},{key:"injectSizeCss",value:function(){var e=this,t=this._configuration.getValue("sizeTheme"),n=[];Object.keys(t).forEach((function(r){var i="--".concat(e.prefix,"-size-")+jc(r),o=t[r];n.push("".concat(i,": ").concat(o))}));var r=n.join(";\n");this.sizeEl=this._injectStyle(this.sizeId,":root { ".concat(r," }"))}},{key:"injectZindexCss",value:function(){var e=this,t=this._configuration.getValue("zindexTheme"),n=[];Object.keys(t).forEach((function(r){var i="--".concat(e.prefix,"-zindex-")+jc(r),o=t[r];n.push("".concat(i,": ").concat(o))}));var r=n.join(";\n");this.sizeEl=this._injectStyle(this.sizeId,":root { ".concat(r," }"))}},{key:"injectBaseLightColorCss",value:function(){var e=this,t=[];Object.keys(DF).forEach((function(n){var r="--".concat(e.prefix,"-base-")+jc(n),i=DF[n];t.push("".concat(r,": ").concat(i))}));var n=t.join(";\n");this.baseLightColorEl=this._injectStyle(this.baseLightColorId,":root { ".concat(n," }"))}},{key:"injectBaseDarkColorCss",value:function(){var e=this,t=[];Object.keys(LF).forEach((function(n){var r="--".concat(e.prefix,"-base-")+jc(n),i=LF[n];t.push("".concat(r,": ").concat(i))}));var n=t.join(";\n");this.baseDarkColorEl=this._injectStyle(this.baseDarkColorId,'html[data-lt-theme="dark"] { '.concat(n," }"))}},{key:"injectLightColorCss",value:function(){var e=this,t=[],n=this._configuration.getValue("colorTheme");Object.keys(n).forEach((function(r){var i="--".concat(e.prefix,"-color-")+jc(r),o=n[r];t.push("".concat(i,": ").concat(e._toCssValue(o)))}));var r=t.join(";\n");this.lightColorEl=this._injectStyle(this.ligthColorId,":root { ".concat(r," }"))}},{key:"injectDarkColorCss",value:function(){var e=this,t=[],n=this._configuration.getValue("colorDarkTheme");Object.keys(n).forEach((function(r){var i="--".concat(e.prefix,"-color-")+jc(r),o=n[r];t.push("".concat(i,": ").concat(e._toCssValue(o)))}));var r=t.join(";\n");this.darkColorEl=this._injectStyle(this.darkColorId,'html[data-lt-theme="dark"] { '.concat(r," }"))}},{key:"_injectStyle",value:function(e,t){var n=document.createElement("style");return n.textContent=t,n.id=e,document.head.appendChild(n),n}},{key:"_toCssValue",value:function(e){return["white","black","grey-","green-","cyan-","blue-","orange-","purple-","yellow-","sea-blue-","brown-","pea-green-","red-","magenta-"].some((function(t){return e.startsWith(t)}))?"rgba(var(--lt-base-".concat(e,"))"):e}},{key:"destroy",value:function(){var e,t,n,r,i,o;this.sizeEl&&(null==(e=this.sizeEl.parentNode)||e.removeChild(this.sizeEl),this.sizeEl=null),this.zindexEl&&(null==(t=this.zindexEl.parentNode)||t.removeChild(this.zindexEl),this.zindexEl=null),this.baseLightColorEl&&(null==(n=this.baseLightColorEl.parentNode)||n.removeChild(this.baseLightColorEl),this.baseLightColorEl=null),this.baseDarkColorEl&&(null==(r=this.baseDarkColorEl.parentNode)||r.removeChild(this.baseDarkColorEl),this.baseDarkColorEl=null),this.lightColorEl&&(null==(i=this.lightColorEl.parentNode)||i.removeChild(this.lightColorEl),this.lightColorEl=null),this.darkColorEl&&(null==(o=this.darkColorEl.parentNode)||o.removeChild(this.darkColorEl),this.darkColorEl=null)}}])}(HC);function GF(e,t){return"string"==typeof t&&t.endsWith("%")&&(t=parseInt(t,10)/100),["white","black","grey-","green-","cyan-","blue-","orange-","purple-","yellow-","sea-blue-","brown-","pea-green-","red-","magenta-"].some((function(t){return e.startsWith(t)}))?"rgba(var(--lt-base-".concat(e,"), ").concat(t,")"):(e=tF(e)).setAlpha(t).toRgbString()}function YF(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=tF(e).toHsl();return"white"===tF(r).toName()||"black"===tF(r).toName()?"#000000":(r.l-=n/100,r.l=(t=r.l,Math.min(1,Math.max(0,t))),tF(r).toRgbString())}WF([Yf(RC)],UF.prototype,"_configuration",2),WF([Df()],UF.prototype,"destroy",1),UF=WF([Gf()],UF);var $F={theme:"green-6",primary:"green-6",primaryHover:"green-7",primaryActive:"green-7",bgPrimary:"white",bgPrimaryHover:"grey-3",bgPrimaryHoverLight:"grey-4",bgSecondary:"grey-1",bgTertiary:"grey-2",bgForeground:"white",iconPrimary:"grey-9",iconSecondary:"grey-8",iconCaption:"grey-7",iconDisable:"grey-6",iconHover:"grey-5",iconColorbg:"rgba(0, 0, 0, 0.45)",textPrimary:"grey-9",textDisable:"grey-6",textLink:"blue-6",textLinkHover:"blue-4",textCaption:"grey-7",textBody:"grey-8",borderPrimary:"grey-4",borderPrimaryHover:"grey-6",borderPrimaryActive:"green-6",borderLight:"grey-2",borderLightHover:"grey-4",borderHeavy:"grey-3",cardborderHover:"blue-3",cardborderSelected:"blue-5",toolbarBackground:"grey-1",gridCellSelectedBorder:"blue-5",gridBorder:"grey-2",gridCellBorderRight:"grey-2",gridHeaderBorderRight:"grey-2",gridHeaderIndexBorderRight:"transparent",gridRowIndexBorderRight:"transparent",gridCellSelectedBackground:GF("cyan-4",.1),gridFooterBackground:"grey-1",gridDelPossibleBackground:"red-1",calendarCellBorder:"grey-2",recordBorderHover:"grey-6",scrollbar:"grey-6",viewBackground:"grey-1",viewContentBackground:"white",viewContentBackgroundHover:"grey-1",viewHighlightBackground:GF("yellow-4",.45),toolbarTabsBackground:"white",functionSuccess:"green-6",functionError:"red-6",functionInfo:"blue-6",functionWarning:"yellow-6",sheetborder:"rgba(0, 0, 0, 0.1)",dropdownBgHover:"grey-3",shadowPopover:"rgba(0, 0, 0, 0.04)",shadowHover:"0 1px 2px -2px rgba(0,0,0,0.08), 0 2px 6px 0 rgba(0,0,0,0.04), 0 4px 8px 1px rgba(0,0,0,0.02)",shadowBasic:"0 1px 4px -2px rgba(0,0,0,0.13), 0 2px 8px 0 rgba(0,0,0,0.08), 0 8px 16px 4px rgba(0,0,0,0.04)",shadowDialog:"0 4px 8px -4px rgba(0,0,0,0.13), 0 6px 16px 0 rgba(0,0,0,0.08), 0 12px 24px 16px rgba(0,0,0,0.04)",shadowLeft:"1px 0 2px -2px rgba(0,0,0,0.08), 2px 0 6px 0 rgba(0,0,0,0.04), 4px 0 8px 1px rgba(0,0,0,0.02)",shadowRight:"-1px 0 2px -2px rgba(0,0,0,0.08), -2px 0 6px 0 rgba(0,0,0,0.04), -4px 0 8px 1px rgba(0,0,0,0.02)"},qF={bgPrimary:"grey-1",viewBackground:"grey-3",gridFooterBackground:"grey-3",viewContentBackground:"grey-1",viewContentBackgroundHover:"grey-2",borderLight:"rgba(255, 255, 255, 0.04)",toolbarBackground:"grey-3",toolbarTabsBackground:"grey-1"},KF={fontSize:"14px",fontSizeLg:"16px",fontSizeSm:"12px",iconSize:"16px",borderRadius:"6px",borderRadiusSmall:"4px",borderRadiusMedium:"8px",gridRowHeight:"36px",gridAddRowHeight:"40px",gridIndexColWidth:"80px",gridColMinWidth:"80px",gridColDefaultWidth:"180px",gridGroupRowGap:"14px",gridGroupBorderRadius:"6px",gridGroupGap:"20px",gridCellPaddingW:"8px",gridCellPaddingH:"7px",gridCellSelectedBorderWidth:"2px",gridHeaderBorderRightHeight:"35px",cardFieldNameHeight:"19px",cardFieldNameMargin:"4px",cardFieldHeight:"28px",cardFieldTextHeight:"22px",cardContentPadding:"20px",cardFieldMargin:"12px",cardGridGap:"12px",scrollbarWidth:"6px",scrollbarHeight:"8px",boxPadding:"8px",boxPaddingSm:"2px",boxPaddingLg:"10px",iconGap:"5px",menuHeight:"34px",menuHeightSm:"28px"},XF={toolbar:400,menubar:500,gridHeader:5,gridStickyContent:3,gridStickyCol:2,gridOverlook:2},JF=Object.defineProperty,ZF=Object.getOwnPropertyDescriptor,QF=function(e,t,n,r){for(var i,o=r>1?void 0:r?ZF(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&JF(t,n,o),o},eN=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this._initTheme(),this._initColorTheme(),this._initSizeTheme(),this._initZIndexTheme()}},{key:"_initTheme",value:function(){this.configuration.registerConfiguration({id:"theme",type:"object",title:"Theme",properties:{current:{type:"string",description:"当前主题"}}}),this.configuration.registerDefaultValue({"theme.current":FF.default})}},{key:"_initColorTheme",value:function(){var e={theme:{type:"string"},primary:{type:"string"},primaryHover:{type:"string"},bgPrimary:{type:"string"},bgPrimaryHover:{type:"string"},bgPrimaryHoverLight:{type:"string"},bgSecondary:{type:"string"},bgForeground:{type:"string"},bgTertiary:{type:"string"},iconPrimary:{type:"string"},iconSecondary:{type:"string"},iconCaption:{type:"string"},iconDisable:{type:"string"},iconHover:{type:"string"},iconColorbg:{type:"string"},textPrimary:{type:"string"},textDisable:{type:"string"},textCaption:{type:"string"},textBody:{type:"string"},textLink:{type:"string",description:"文本链接"},textLinkHover:{type:"string",description:"文本链接hover"},borderPrimary:{type:"string"},borderPrimaryHover:{type:"string"},borderPrimaryActive:{type:"string"},borderLight:{type:"string"},borderLightHover:{type:"string"},borderHeavy:{type:"string"},cardborderHover:{type:"string"},cardborderSelected:{type:"string"},gridCellSelectedBorder:{type:"string"},gridHeaderBorderRight:{type:"string"},gridRowIndexBorderRight:{type:"string"},gridBorder:{type:"string"},gridCellBorderRight:{type:"string"},gridCellSelectedBackground:{type:"string"},gridFooterBackground:{type:"string"},gridDelPossibleBackground:{type:"string"},calendarCellBoarder:{type:"string"},recordBorderHover:{type:"string"},scrollbar:{type:"string"},viewBackground:{type:"string"},viewContentBackground:{type:"string"},viewContentBackgroundHover:{type:"string"},viewHighlightBackground:{type:"string"},toolbarTabsBackground:{type:"string"},functionSuccess:{type:"string"},functionError:{type:"string"},functionInfo:{type:"string"},functionWarning:{type:"string"},sheetborder:{type:"string"},shadowPopover:{type:"string"},shadowHover:{type:"string"},shadowBasic:{type:"string"},shadowDialog:{type:"string"},shadowLeft:{type:"string"},shadowRight:{type:"string"}};this.configuration.registerConfiguration({id:"colorTheme",type:"object",title:"Theme-Color-Light",properties:e}),this.configuration.registerConfiguration({id:"colorDarkTheme",type:"object",title:"Theme-Color-Dark",properties:e}),this.configuration.registerDefaultValue(this._getDefaultValue("colorTheme",$F)),this.configuration.registerDefaultValue(this._getDefaultValue("colorDarkTheme",qF))}},{key:"_initSizeTheme",value:function(){this.configuration.registerConfiguration({id:"sizeTheme",type:"object",title:"Theme-Size",properties:{fontSize:{type:"string",description:"正常字体大小"},borderRadius:{type:"string"},borderRadiusSmall:{type:"string"},borderRadiusMedium:{type:"string"},gridIndexColWidth:{type:"string",description:"索引列宽度"},gridColMinWidth:{type:"string",description:"列最小宽度"},gridColDefaultWidth:{type:"string",description:"默认列宽"},gridGroupRowGap:{type:"string",description:"分组与视图左边缘的间隔"},gridGroupBorderRadius:{type:"string",description:"分组圆角"},gridGroupGap:{type:"string",description:"分组之间间隙高度"},gridCellPaddingW:{type:"string",description:"单元格左右 padding"},gridCellPaddingH:{type:"string",description:"单元格上下 padding"},gridCellSelectedBorderWidth:{type:"string",description:"选中态单元格边框宽度"},gridHeaderBorderRightHeight:{type:"string",description:"列头右侧 border right 高度"},gridRowIndexBorderRightHeight:{type:"string"},cardFieldNameHeight:{type:"string"},cardFieldNameMargin:{type:"string"},cardFieldHeight:{type:"string"},cardFieldTextHeight:{type:"string"},cardContentPadding:{type:"string"},cardFieldMargin:{type:"string"},cardGridGap:{type:"string"},scrollbarWidth:{type:"string"},scrollbarHeight:{type:"string"},boxPadding:{type:"string"},boxPaddingSm:{type:"string"},boxPaddingLg:{type:"string"},iconGap:{type:"string"},menuHeight:{type:"string"}}}),this.configuration.registerDefaultValue(this._getDefaultValue("sizeTheme",KF))}},{key:"_initZIndexTheme",value:function(){this.configuration.registerConfiguration({id:"zindexTheme",type:"object",title:"Theme-ZIndex",properties:{toolbar:{type:"number",description:"工具栏 zindex"},gridHeader:{type:"number",description:""},gridStickyContent:{type:"number",description:""},gridStickyCol:{type:"number",description:""},gridOverlook:{type:"number",description:""}}}),this.configuration.registerDefaultValue(this._getDefaultValue("zindexTheme",XF))}},{key:"_getDefaultValue",value:function(e,t){return Object.keys(t).map((function(n){return{name:"".concat(e,".").concat(n),value:t[n]}})).reduce((function(e,t){return e[t.name]=t.value,e}),{})}}])}();QF([Yf(RC)],eN.prototype,"configuration",2),QF([jf()],eN.prototype,"init",1),eN=QF([Gf()],eN);var tN=Object.defineProperty,nN=Object.getOwnPropertyDescriptor,rN=function(e,t,n,r){for(var i,o=r>1?void 0:r?nN(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tN(t,n,o),o},iN=function(){return ox((function e(){rx(this,e),this.hasInited=!1,this._onChange=new dS,this.onChange=this._onChange.event}),[{key:"initConfiguration",value:function(){this._themeConfiguration.init()}},{key:"initStyle",value:function(){this.hasInited=!0,this._themeStyle.init()}},{key:"setTheme",value:function(e){this.hasInited||this.initStyle(),this._themeStyle.useStyle(e),this._theme=e,this._onChange.emit(e)}},{key:"getCurrent",value:function(){return this._theme}},{key:"toColor",value:function(e){return["white","black","grey-","green-","cyan-","blue-","orange-","purple-","yellow-","sea-blue-","brown-","pea-green-","red-","magenta-"].some((function(t){return e.startsWith(t)}))?"rgba(var(--lt-base-".concat(e,"))"):e.startsWith("#")?this._theme===FF.dark?YF(e):e:"var(--lt-color-".concat(e,")")}},{key:"toRenderColor",value:function(e){var t=this;if(!e)return e;var n=e.split(",");return 1===n.length?this.toColor(e):(n=n.map((function(e){return t.toColor(e)})),this._getColorLinear(n))}},{key:"_getColorLinear",value:function(e){if(1===e.length)return e[0];if(2===e.length)return"linear-gradient(52deg, ".concat(e[0]," 0%, ").concat(e[1]," 100%)");var t=100/e.length,n=[];return e.forEach((function(e,r){n.push("".concat(e," ").concat(t*r,"%")),n.push("".concat(e," ").concat(t*(r+1),"%"))})),"linear-gradient(to right, ".concat(n.join(","),")")}},{key:"isDark",value:function(){return this.getCurrent()===FF.dark}}])}();rN([Yf(UF)],iN.prototype,"_themeStyle",2),rN([Yf(eN)],iN.prototype,"_themeConfiguration",2),iN=rN([Gf({token:TF})],iN);var oN=ch().contribution(NF).register(iN).register(eN).register(UF),aN={"#FFA39E":"#FBD3D0","#FFEC3D":"#F7E9BC","#91D5FF":"#C4E4F5","#FFADD2":"#E4F7D2","#FFD591":"#E8D5CB","#87E8DE":"#C0EBE5","#D3ADF7":"#DBCEF5","#FFBB96":"#E8E8E8","#B7EB8F":"#E5EDCA","#ADC6FF":"#C2CDF0"},lN=["#F1A2AB","#F5D480","#C1E77E","#82EDC0","#81DFE4","#81BBF8","#96A7FD","#BA9BF2","#DBC39A","#BEC0BF"],uN=[["$label-back-color:0-0","$label-back-color:0-1","$label-back-color:0-2","$label-back-color:0-3","$label-back-color:0-4"],["$label-back-color:1-0","$label-back-color:1-1","$label-back-color:1-2","$label-back-color:1-3","$label-back-color:1-4"],["$label-back-color:2-0","$label-back-color:2-1","$label-back-color:2-2","$label-back-color:2-3","$label-back-color:2-4"],["$label-back-color:3-0","$label-back-color:3-1","$label-back-color:3-2","$label-back-color:3-3","$label-back-color:3-4"]],cN={labelColor:[["green-1","yellow-1","blue-1","grey-3","red-1"],["brown-1","cyan-1","purple-1","pea-green-1","sea-blue-1"],["red-3","yellow-3","pea-green-3","green-3","cyan-3"],["blue-3","sea-blue-3","purple-3","brown-3","grey-6"]],labelTextColor:[["green-9","yellow-9","blue-9","grey-9","red-9"],["brown-9","cyan-9","purple-9","pea-green-9","sea-blue-9"],["red-9","yellow-9","pea-green-9","green-9","cyan-9"],["blue-9","sea-blue-9","purple-9","brown-9","grey-9"]],labelPureTextColor:[["green-6","yellow-6","blue-6","grey-6","red-6"],["brown-6","cyan-6","purple-6","pea-green-6","sea-blue-6"],["red-6","yellow-6","pea-green-6","green-6","cyan-6"],["blue-6","sea-blue-6","purple-6","brown-6","grey-6"]]},sN="$label-back-color:",dN=Object.defineProperty,fN=Object.getOwnPropertyDescriptor,hN=function(e,t,n,r){for(var i,o=r>1?void 0:r?fN(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dN(t,n,o),o},pN={},vN=function(e){if(null!=pN[e])return pN[e];var t=tF(e).getBrightness()<200;return pN[e]=t,t},gN=new Map,mN=function(){return ox((function e(){rx(this,e)}),[{key:"getLabelColorTokenByBackColorId",value:function(e){var t="bg-primary";if(!e.startsWith(sN))return this._themeService.toColor(t);var n=jF(mN.getIndexesByBackColorId(e),2),r=n[0],i=n[1];return cN.labelColor[r][i]||t}},{key:"getColorByBackColorId",value:function(e){var t=this.getLabelColorTokenByBackColorId(e);return this._themeService.toColor(t)}},{key:"getTextColorByBackColorId",value:function(e){var t="text-primary";if(!e.startsWith(sN))return this._themeService.toColor(t);var n=jF(mN.getIndexesByBackColorId(e),2),r=n[0],i=n[1],o=cN.labelTextColor[r][i]||t;return this._themeService.toColor(o)}},{key:"getPureTextColorByBackColorId",value:function(e){var t="text-primary";if(!e.startsWith(sN))return this._themeService.toColor(t);var n=jF(mN.getIndexesByBackColorId(e),2),r=n[0],i=n[1],o=cN.labelPureTextColor[r][i]||t;return this._themeService.toColor(o)}},{key:"getPureTextColorToken",value:function(e){var t=jF(mN.getIndexesByBackColorId(e),2),n=t[0],r=t[1];return cN.labelPureTextColor[n][r]||"text-primary"}},{key:"getByIndex",value:function(e){var t=Bo(uN);return t[e%t.length]}},{key:"getRenderColor",value:function(e){var t="labelColor:".concat(this._themeService.getCurrent(),":").concat(e),n=gN.get(t);if(n)return n;var r=mN.getColor(e),i="";return i=mN.isLabelColorId(r)?this.getColorByBackColorId(r):this._themeService.toColor(r),gN.set(t,i),i}},{key:"getRenderTextColor",value:function(e){var t="labelTextColor:".concat(this._themeService.getCurrent(),":").concat(e),n=gN.get(t);if(n)return n;var r="";return r=e?mN.isLabelColorId(e)?this.getTextColorByBackColorId(e):vN(e)&&!lN.includes(e)?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.65)":this._themeService.toColor("text-primary"),gN.set(t,r),r}},{key:"getRenderPureTextColor",value:function(e){var t="labelPureTextColor:".concat(this._themeService.getCurrent(),":").concat(e),n=gN.get(t);if(n)return n;var r="";return r=e?mN.isLabelColorId(e)?this.getPureTextColorByBackColorId(e):vN(e)&&!lN.includes(e)?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.65)":this._themeService.toColor("text-primary"),gN.set(t,r),r}}],[{key:"isLabelColorId",value:function(e){return Px(e)&&e.startsWith(sN)}},{key:"getColor",value:function(e){return Px(e)?mN.isLabelColorId(e)?e:aN[e.toUpperCase()]||e:""}},{key:"getNextColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=mN.getColor(e),n=Bo(uN),r=n.indexOf(t);return r>=0?n[(r+1)%n.length]:n[0]}},{key:"getIndexesByBackColorId",value:function(e){if(e.startsWith(sN)){var t=jF(e.split(sN),2);t[0];var n=jF(t[1].split("-"),2),r=n[0],i=n[1],o=[Number(r),Number(i)];return[o[0],o[1]]}return[0,0]}}])}();hN([Yf(TF)],mN.prototype,"_themeService",2),mN=hN([Gf()],mN);var yN=ch().register(mN),bN=ch().register(px);function wN(e,t,n){return t=DC(t),jC(e,_N()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function _N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_N=function(){return!!e})()}var xN=function(e){function t(){return rx(this,t),wN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.sourceFieldId,n=e.direction,r=void 0===n?"after":n;return this.writeService.createField({viewId:e.viewId,field:e.field,sourceFieldId:t,direction:r}),!0}}])}(Ij);function kN(e,t,n){return t=DC(t),jC(e,CN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function CN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CN=function(){return!!e})()}xN.commandName="addField";var SN=function(e){function t(){return rx(this,t),kN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=e.field,r=e.newFieldProperty,i=null==n?void 0:n.get("type"),o=null==n?void 0:n.get("name"),a=null==n?void 0:n.get("color"),l=null==n?void 0:n.get("config"),u=n.get("uuid"),c=!Ax(r.type)&&i!==r.type,s=!Ax(r.name)&&o!==r.name,d=!Ax(r.color)&&a!==r.color,f=!Ax(r.config)&&l!==r.config;if(c&&this.writeService.changeFieldType(u,i,r.type),s&&this.writeService.updateFieldName(u,r.name),d&&this.writeService.updateFieldColor(u,r.color),f&&this.writeService.updateFieldConfig(u,r.config),!c&&YO.isSelectLike(i)||YO.isSelectLike(r.type)){var h=null==(t=r.options)?void 0:t.map((function(e){return e.name=e.name.trim(),e})),p=!Ax(r.color)&&r.color!==(null==n?void 0:n.get("color")),v=this.readService.getFieldOptions(n.get("uuid")).toJSON(),g=!Ax(h)&&h!==v,m={uuid:u};if(p&&(m.color=!!r.color),g){var y=Kc(h,"name");m.options=y}if(p||g){var b=c?this.readService.getFieldCells(u).filter((function(e){return!!e.value})):[];if(this.writeService.updateFieldProperty(m),c){var w=b.map((function(e){var t,n,r=e.fieldType,i=null==(n=null==(t=m.options)?void 0:t.find((function(t){var n;return(null==(n=null==t?void 0:t.name)?void 0:n.slice(0,dI.MAX_LENGTH))===e.formatValue})))?void 0:n.uuid,o=Ax(i)?null:r===xO.MULTI_SELECT?[i]:i;return{recordId:e.recordId,fieldId:e.fieldId,value:o,cellId:e.uuid,fieldType:r,uuid:e.uuid}}));this.writeService.bulkSetCell(w)}}}return!0}}])}(Ij);function ON(e,t,n){return t=DC(t),jC(e,EN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function EN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EN=function(){return!!e})()}SN.commandName="updateField";var IN=function(e){function t(){return rx(this,t),ON(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeField(e.fieldId),!0}}])}(Ij);function PN(e,t,n){return t=DC(t),jC(e,MN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function MN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MN=function(){return!!e})()}IN.commandName="removeField";var RN=function(e){function t(){return rx(this,t),PN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.copyField({viewId:this.readService.getActiveViewId(),uuid:Cx(32),sourceFieldId:e.fieldId}),!0}}])}(Ij);RN.commandName="copyField";var AN=Object.defineProperty,jN=Object.getOwnPropertyDescriptor,DN=function(e,t,n,r){for(var i,o=r>1?void 0:r?jN(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&AN(t,n,o),o},TN=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(RN.commandName,RN),this.commandService.registerCommand(xN.commandName,xN),this.commandService.registerCommand(SN.commandName,SN),this.commandService.registerCommand(IN.commandName,IN)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function FN(e,t,n){return t=DC(t),jC(e,NN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function NN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NN=function(){return!!e})()}TN.pluginName="kernel-add-field",DN([Yf(Lj)],TN.prototype,"commandService",2),TN=DN([Gf({contrib:mj})],TN);var LN=function(e){function t(){return rx(this,t),FN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t,n=null==(t=this.readService.getActiveView())?void 0:t.get("uuid");if(this.readService.getViewFilter(n),e||(e={direction:"after"}),e.uuid||(e.uuid=Cx(32)),e.recordCount>1){e.uuid=[];for(var r=0;r<e.recordCount;r++)e.uuid.push(Cx(32))}return e.viewId||(e.viewId=n),e}},{key:"execute",value:function(e){return this.writeService.createEmptyRecord(e)}},{key:"afterExecute",value:function(e,t,n){var r,i=this,o=e.viewId,a=this.readService.getViewFilter(o)&&!e.filter&&n.isNeedRefreshFilter(e.viewId,null,t[0].uuid,null,!0),l=!!(null==(r=this.readService.getViewConfig(o))?void 0:r.get("keep_sort"));if(a||l){var u=a?nj.FILTER:nj.SORT;setTimeout((function(){null==n||n.emitBeforeRefresh(u,"addEmptyRecord",{uuid:e.uuid},aO(QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.writeService.refreshView(o),n.emitAfterRefresh(u),null==(t=i.context)||t.destroy();case 3:case"end":return e.stop()}}),e)}))))}),300)}}}])}(Ij);function BN(e,t,n){return t=DC(t),jC(e,VN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function VN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VN=function(){return!!e})()}LN.commandName="addEmptyRecord";var zN=function(e){function t(){return rx(this,t),BN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.uuid||(e.uuid=Cx(32)),e}},{key:"execute",value:function(e){var t=e.uuid,n=e.sourceRecordId,r=e.modifierId,i=this.readService.getActiveView();return!i||(this.writeService.copyRecord({uuid:t,viewId:null==i?void 0:i.get("uuid"),sourceRecordId:n,modifierId:r}),!0)}}])}(Ij);function HN(e,t,n){return t=DC(t),jC(e,WN()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function WN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WN=function(){return!!e})()}zN.commandName="copyRecord";var UN=function(e){function t(){return rx(this,t),HN(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveView();if(!t)return!0;var n=e.recordIds||[];return e.all||!1?this.writeService.removeAllRecords(t.get("uuid")):this.writeService.removeRecord(n),!0}}])}(Ij);UN.commandName="removeRecords";var GN=Object.defineProperty,YN=Object.getOwnPropertyDescriptor,$N=function(e,t,n,r){for(var i,o=r>1?void 0:r?YN(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&GN(t,n,o),o},qN=100,KN=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(LN.commandName,LN),this.commandService.registerCommand(zN.commandName,zN),this.commandService.registerCommand(UN.commandName,UN)}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"record",type:"object",title:"记录",properties:{maxCount:{type:"number",description:"最大记录数量"}}}),e.registerDefaultValue({"record.maxCount":qN})}}])}();function XN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XN(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZN(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return QN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QN(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function QN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eL(e,t,n){return t=DC(t),jC(e,tL()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function tL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tL=function(){return!!e})()}KN.pluginName="kernel-add-record",$N([Yf(Lj)],KN.prototype,"commandService",2),KN=$N([Gf({contrib:mj})],KN);var nL=function(e){function t(){var e;return rx(this,t),(e=eL(this,t,arguments))._bulkSetCellMap=new Map,e._targetRecordIndexCache=new Map,e._targetFieldIndexCache=new Map,e}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n,r=this,i=e.pasteData,o=e.selection,a=e.colCount,l=i.cells,u=i.tableId,c=o.startRowIndex,s=o.startColIndex,d=o.rowCount,f=o.colCount,h=d*f,p=l.length,v=l[0].length,g=p*v,m=1===g,y=m&&h>1,b=y?d:p,w=y?f:v,_=[],x=[],k=(null==(t=this.readService.getActiveView())?void 0:t.get("uuid"))||"";try{if(m&&!y){var C=l[0][0],S=this.readService.getCellByIndexes(c,s);if(x.push(null==S?void 0:S.recordId),!C||!S)return{code:-1,message:"fromCell, targetCell不存在 never"};if(YO.isSystemType(S.fieldType))return{code:1,message:wx("系统字段不支持粘贴修改")};var O=this._getPasteCellDataToUpdate(C,S.fieldType,S.fieldId,S.recordId,c,u);this._setCell(S.recordId,S.fieldId,O,!1)}else{var E=this.readService.getViewGroup(),I=this._getRecordByIndex(c),P=(null==I?void 0:I.get("group_item_key"))||"",M=0,R="",A=Number.MAX_SAFE_INTEGER;if(E){var j=CC(E.options,(function(e){return r.readService.groupValue(e)===P}));-1===j&&(j=E.options.length),A=this.readService.getGroupViewRecords().slice(0,j+1).map((function(e){return e.viewRecords.length})).reduce((function(e,t){return e+t}),0)-1}for(var D=0;D<b;D++){var T=D+c,F=this._getRecordByIndex(T),N=null==F?void 0:F.get("record_uuid");!N||T>A?M+=1:(x.push(N),R=N)}if(M>0){for(var L=0;L<M;L++)_.push(Cx(32));this.writeService.createEmptyRecord({uuid:_,viewId:k,groupItemKey:P,sourceRecordId:R}),this._updateRecordIndexCache()}for(var B=0,V=0;V<b;V++){var z=V+c,H=this._getRecordByIndex(z);if(H)for(var W=H.get("record_uuid"),U=0;U<w;U++){var G=U+s;if(!(G>=a)){var Y=y?l[0][0]:null==(n=null==l?void 0:l[V])?void 0:n[U];if(Y){var $=this._getFieldByIndex(G);if(!$)throw new Error("targetField不存在 never");if(YO.isSystemType($.get("type")))B++;else{var q=$.get("uuid");if((null==E?void 0:E.field.get("uuid"))!==q){var K=this._getPasteCellDataToUpdate(Y,$.get("type"),q,W,z,u);this._setCell(W,q,K,!0)}}}}}}var X=Q_(this._bulkSetCellMap.keys());if(X.length>0){var J,Z=ZN(X);try{for(Z.s();!(J=Z.n()).done;){var Q=J.value,ee=this._bulkSetCellMap.get(Q);ee&&this.writeService.bulkSetCell(ee)}}catch(e){Z.e(e)}finally{Z.f()}}if(B===g)return{code:1,message:wx("系统字段不支持粘贴修改")}}}catch(e){var te="";return e instanceof Error?(te=e.message,console.error(e.stack)):te="string"==typeof e?e:"Unknown error",{code:-1,message:te}}finally{this._bulkSetCellMap.clear(),this._targetRecordIndexCache.clear(),this._targetFieldIndexCache.clear()}return{code:0,message:wx("粘贴成功"),data:{createRecordIds:_,updateRecordIds:x}}}},{key:"_setCell",value:function(e,t,n,r){var i=this.readService.getCell(t,e);if(!i)throw new Error("oldCell 不存在 never");var o=this.readService.getTable().get("uuid"),a=JN(JN({},i),{},{value:n.cellValue,formatValue:n.cellFormatValue||""}),l=n.fromTableId&&n.fromTableId!==o;if(n.fromFieldId!==n.toFieldId||l)n.fromFieldType&&this.writeService.safeSetCell(a,n.fromFieldType,n.toFieldType,n.fromFieldId,n.toFieldId);else if(r){var u=this._bulkSetCellMap.get(n.toFieldId)||[];u=u.concat(a),this._bulkSetCellMap.set(n.toFieldId,u)}else this.writeService.setCell(a)}},{key:"_getPasteCellDataToUpdate",value:function(e,t,n,r,i,o){return{cellValue:e.value,cellFormatValue:e.formatValue,toFieldType:t,toFieldId:n,toRecordId:r,toRecordIndex:i,fromFieldType:e.fieldType,fromFieldId:e.fieldId,fromTableId:o}}},{key:"_updateRecordIndexCache",value:function(){var e=this;return OC(this.readService.getFlatViewRecords(),(function(t,n){e._targetRecordIndexCache.set(n,t)})),this._targetRecordIndexCache}},{key:"_getRecordByIndex",value:function(e){var t=this._targetRecordIndexCache.get(e);return t||(this._updateRecordIndexCache(),this._targetRecordIndexCache.get(e)||null)}},{key:"_getFieldByIndex",value:function(e){var t=this._targetFieldIndexCache.get(e);if(t)return t;var n=this.readService.getFieldByIndex(e);return n?(this._targetFieldIndexCache.set(e,n),n):null}}])}(Ij);nL.commandName="pasteUpdateRecords";var rL=Object.defineProperty,iL=Object.getOwnPropertyDescriptor,oL=function(e,t,n,r){for(var i,o=r>1?void 0:r?iL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rL(t,n,o),o},aL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this._commandService.registerCommand(nL.commandName,nL)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();aL.pluginName="kernel-clipboard",oL([Yf(Lj)],aL.prototype,"_commandService",2),aL=oL([Gf({contrib:mj})],aL);var lL=Object.defineProperty,uL=Object.getOwnPropertyDescriptor,cL=function(e,t,n,r){for(var i,o=r>1?void 0:r?uL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lL(t,n,o),o},sL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function dL(e,t,n){return t=DC(t),jC(e,fL()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fL=function(){return!!e})()}sL.pluginName="kernel-expand-record",cL([Yf(Lj)],sL.prototype,"commandService",2),sL=cL([Gf({contrib:mj})],sL);var hL=Object.defineProperty,pL=Object.getOwnPropertyDescriptor,vL=function(e){function t(){return rx(this,t),dL(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldBooleanModel}},{key:"type",get:function(){return vL.type}},{key:"baseType",get:function(){return vL.baseType}},{key:"validate",value:function(e){return Sc(e)}},{key:"transform",value:function(e){return e&&("1"===e||"是"===e||"true"===e||"yes"===e.toLowerCase()||"✅"===e)?{value:!0}:null}},{key:"formatted",value:function(e){return null==e?"false":e?"true":"false"}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=(null==n?void 0:n.get("value"))||!1,i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),value:(null==n?void 0:n.get("value"))||!1,updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){n&&(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value))}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(gj);vL.type=xO.CHECKBOX,vL.baseType=kO.BOOLEAN,vL=function(e,t,n,r){for(var i,o=r>1?void 0:r?pL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hL(t,n,o),o}([Gf()],vL);var gL=Object.defineProperty,mL=Object.getOwnPropertyDescriptor,yL=function(e,t,n,r){for(var i,o=r>1?void 0:r?mL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gL(t,n,o),o},bL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._checkboxField)}}],[{key:"pluginModule",value:function(){return ch().register(vL).register(this)}}])}();function wL(e,t,n){return t=DC(t),jC(e,_L()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function _L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_L=function(){return!!e})()}bL.pluginName="kernel-field-checkbox",yL([Yf(vL)],bL.prototype,"_checkboxField",2),bL=yL([Gf({contrib:mj})],bL);var xL=Object.defineProperty,kL=Object.getOwnPropertyDescriptor,CL=function(e){function t(){var e;return rx(this,t),(e=wL(this,t,arguments)).editDisable=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return CL.type}},{key:"baseType",get:function(){return CL.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e,t,n){return null==e?"":(Fk(e)&&(e=new Date(Number(e))),a()(e).format((null==n?void 0:n.date_format)||CL.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return a()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.formatted(r.value)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this._model.recordModel.findOne({uuid:t}),i=null==r?void 0:r.get("created_at");return{uuid:null==r?void 0:r.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:i,formatValue:this.formatted(i,void 0,n),keyValue:this.keyValue(i),updated_at:null==r?void 0:r.get("updated_at")}}}])}(gj);CL.type=xO.CREATED_AT,CL.baseType=kO.SYSTEM,CL.format="YYYY-MM-DD HH:mm:ss",CL=function(e,t,n,r){for(var i,o=r>1?void 0:r?kL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xL(t,n,o),o}([Gf()],CL);var SL=Object.defineProperty,OL=Object.getOwnPropertyDescriptor,EL=function(e,t,n,r){for(var i,o=r>1?void 0:r?OL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&SL(t,n,o),o},IL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._createdAtField)}}],[{key:"pluginModule",value:function(){return ch().register(CL).register(this)}}])}();function PL(e,t,n){return t=DC(t),jC(e,ML()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ML=function(){return!!e})()}IL.pluginName="kernel-field-created-at",EL([Yf(CL)],IL.prototype,"_createdAtField",2),IL=EL([Gf({contrib:mj})],IL);var RL=Object.defineProperty,AL=Object.getOwnPropertyDescriptor,jL=function(e){function t(){return rx(this,t),PL(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldDateModel}},{key:"type",get:function(){return jL.type}},{key:"baseType",get:function(){return jL.baseType}},{key:"validate",value:function(e){return!!e&&!!uC(e)}},{key:"transform",value:function(e){try{return{value:a()(e).toString()}}catch(e){return null}}},{key:"formatted",value:function(e,t,n){return null==e||""===e?"":Fk(e)?13===String(e).length?a()(Number(e)).format((null==n?void 0:n.date_format)||jL.format):a.a.unix(Number(e)).format((null==n?void 0:n.date_format)||jL.format):a()(e).format((null==n?void 0:n.date_format)||jL.format)}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return a()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t);return this.formatted(r.value,void 0,n)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this.model.findOne({field_uuid:e,record_uuid:t}),i=null==r?void 0:r.get("value"),o=this._safeGetCell(e,t,i,n);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),value:null==r?void 0:r.get("value"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n,r){var i=this.getModelCell(e,t);return i||(this.upsertModelCell(e,t,n,!0,r),i=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),i||new bC}},{key:"upsertModelCell",value:function(e,t,n,r,i){this.updateModelCell(e,t,this.formatted(n,void 0,i),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n,r){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value,void 0,r);if(this.validate(n.value)&&n){var i=Rx(n.value)?n.value.getTime():n.value;this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:i}),this.upsertModelCell(e,t,i,void 0,r)}}}},{key:"bulkSetCell",value:function(e,t){var n=this,r=e[0].fieldId,i=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:r,record_uuid:i}),this.model.bulkCreate(e.map((function(e){if(!n.validate(e.value||""))return null;var i=Rx(e.value)?e.value.getTime():e.value;return n.upsertModelCell(r,e.recordId,i,void 0,t),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:i}})).filter((function(e){return!!e})))}}])}(gj);jL.type=xO.DATE,jL.baseType=kO.DATE,jL.format="YYYY-MM-DD",jL=function(e,t,n,r){for(var i,o=r>1?void 0:r?AL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&RL(t,n,o),o}([Gf()],jL);var DL=Object.defineProperty,TL=Object.getOwnPropertyDescriptor,FL=function(e,t,n,r){for(var i,o=r>1?void 0:r?TL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DL(t,n,o),o},NL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._dateField)}}],[{key:"pluginModule",value:function(){return ch().register(jL).register(this)}}])}();function LL(e,t,n){return t=DC(t),jC(e,BL()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BL=function(){return!!e})()}NL.pluginName="kernel-field-date",FL([Yf(jL)],NL.prototype,"_dateField",2),NL=FL([Gf({contrib:mj})],NL);var VL=Object.defineProperty,zL=Object.getOwnPropertyDescriptor,HL=function(e){function t(){return rx(this,t),LL(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return HL.type}},{key:"baseType",get:function(){return HL.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||jx(t)},errorMsg:wx("请输入有效邮箱")}]}},{key:"validate",value:function(e){if(null!=e)return!((null==e?void 0:e.length)>HL.MAX_LENGTH)&&!("string"==typeof e&&!tC(e))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e?"":e}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),value:null==n?void 0:n.get("value"),verify:i.get("verify"),errorMessage:i.get("verify_message"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){var i=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),i.verify,i.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(gj);HL.type=xO.EMAIL,HL.baseType=kO.STRING,HL.MAX_LENGTH=128,HL=function(e,t,n,r){for(var i,o=r>1?void 0:r?zL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&VL(t,n,o),o}([Gf()],HL);var WL=Object.defineProperty,UL=Object.getOwnPropertyDescriptor,GL=function(e,t,n,r){for(var i,o=r>1?void 0:r?UL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WL(t,n,o),o},YL=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._emailField)}}],[{key:"pluginModule",value:function(){return ch().register(HL).register(this)}}])}();function $L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qL(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qL(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function qL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function KL(e,t,n){return t=DC(t),jC(e,XL()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function XL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XL=function(){return!!e})()}YL.pluginName="kernel-field-email",GL([Yf(HL)],YL.prototype,"_emailField",2),YL=GL([Gf({contrib:mj})],YL);var JL=Object.defineProperty,ZL=Object.getOwnPropertyDescriptor,QL=function(e){function t(){return rx(this,t),KL(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return QL.type}},{key:"baseType",get:function(){return QL.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=$L(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size)return!1;var i=r.name;if(i.length>QL.MAX_LENGTH&&(r.name=i.substring(0,QL.MAX_LENGTH)),!lC(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e)return null;if("string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n))return null;if(0===n.length)return null}else if(Mx(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return"string"==typeof e||null==e.name||null==e.src||null==e.size?null:{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(","):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=OC(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var i=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(i),this.upsertModelCell(e,t,i)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var i=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];i=i.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(i)}}])}(gj);QL.type=xO.FILE,QL.baseType=kO.URI,QL.MAX_LENGTH=128,QL=function(e,t,n,r){for(var i,o=r>1?void 0:r?ZL(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&JL(t,n,o),o}([Gf()],QL);var eB=Object.defineProperty,tB=Object.getOwnPropertyDescriptor,nB=function(e,t,n,r){for(var i,o=r>1?void 0:r?tB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&eB(t,n,o),o},rB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._fileField)}}],[{key:"pluginModule",value:function(){return ch().register(QL).register(this)}}])}();function iB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oB(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function oB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aB(e,t,n){return t=DC(t),jC(e,lB()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function lB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lB=function(){return!!e})()}rB.pluginName="kernel-field-file",nB([Yf(QL)],rB.prototype,"_fileField",2),rB=nB([Gf({contrib:mj})],rB);var uB=Object.defineProperty,cB=Object.getOwnPropertyDescriptor,sB=function(e){function t(){return rx(this,t),aB(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return sB.type}},{key:"baseType",get:function(){return sB.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=iB(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size||null==r.width||null==r.height)return!1;var i=r.name;if(i.length>sB.MAX_LENGTH&&(r.name=i.substring(0,sB.MAX_LENGTH)),!lC(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e)return null;if("string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n))return null}else if(Mx(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return e?"string"==typeof e||null==e.name||null==e.src||null==e.size||null==e.width||null==e.height?null:{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}:null}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return null==e?null:e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(",")}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=OC(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon"),width:e.get("width"),height:e.get("height")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var i=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(i),this.upsertModelCell(e,t,i)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var i=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];i=i.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(i)}}])}(gj);sB.type=xO.IMAGE,sB.baseType=kO.URI,sB.MAX_LENGTH=128,sB=function(e,t,n,r){for(var i,o=r>1?void 0:r?cB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uB(t,n,o),o}([Gf()],sB);var dB=Object.defineProperty,fB=Object.getOwnPropertyDescriptor,hB=function(e,t,n,r){for(var i,o=r>1?void 0:r?fB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dB(t,n,o),o},pB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._imageField)}}],[{key:"pluginModule",value:function(){return ch().register(sB).register(this)}}])}();pB.pluginName="kernel-field-image",hB([Yf(sB)],pB.prototype,"_imageField",2),pB=hB([Gf({contrib:mj})],pB);var vB=Object.defineProperty,gB=Object.getOwnPropertyDescriptor,mB=function(e,t,n,r){for(var i,o=r>1?void 0:r?gB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vB(t,n,o),o},yB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._linkField)}}],[{key:"pluginModule",value:function(){return ch().contribution(NT).register(JT).register(zT).register(GT).register(this)}}])}();function bB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wB(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function wB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _B(e,t,n){return t=DC(t),jC(e,xB()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function xB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xB=function(){return!!e})()}yB.pluginName="kernel-field-link",mB([Yf(JT)],yB.prototype,"_linkField",2),yB=mB([Gf({contrib:mj})],yB);var kB=Object.defineProperty,CB=Object.getOwnPropertyDescriptor,SB=function(e){function t(){return rx(this,t),_B(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return SB.type}},{key:"baseType",get:function(){return SB.baseType}},{key:"validate",value:function(e){return!!e&&!(null==e?void 0:e.some((function(e){return null==(null==e?void 0:e.uid)||null==(null==e?void 0:e.name)||null==(null==e?void 0:e.login)})))}},{key:"transform",value:function(e){if("string"==typeof e)return null;var t=[];if(Array.isArray(e)){var n,r=bB(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.uid&&i.name&&i.login&&i.icon&&t.push({uid:i.uid,name:i.name,icon:i.icon,login:i.login})}}catch(e){r.e(e)}finally{r.f()}}return 0===t.length?null:{value:t}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?(e instanceof yC&&(e=e.toJSON()),Array.isArray(e)?e.filter((function(e){return!!e.uid&&"null"!==e.uid})).map((function(e){return"".concat(e.uid)})).join(","):null):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this,r=OC(this.model.find({field_uuid:e,record_uuid:t}),(function(e){var t=n._model.userModel.findOne({uid:String(e.get("uid"))});if(t)return{uuid:e.get("uuid"),uid:e.get("uid"),name:t.get("name")||e.get("name"),login:t.get("login"),icon:t.get("icon")||e.get("icon")}})).filter((function(e){return!!e})),i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),value:r,by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){var r=this;if(n){var i=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),i&&0!==i.length){var o=i.map((function(n){var i=String(n.uid),o=r._model.userModel.findOne({uid:i}),a=null;return o||(a=r._model.userModel.create({uid:i,name:n.name,icon:n.icon,login:n.login})),{uuid:n.uuid||(null==a?void 0:a.uuid),field_uuid:e,record_uuid:t,uid:i,name:n.name,icon:n.icon||(null==o?void 0:o.get("icon")),login:n.login||(null==o?void 0:o.get("login"))}}));o=Jc(o,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(o),this.upsertModelCell(e,t,o)}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var i=[];e.forEach((function(e){var r=e.value?e.value.map((function(r){var i=String(r.uid),o=null;return t._model.userModel.findOne({uid:i})||(o=t._model.userModel.create({uid:i,name:r.name,icon:r.icon,login:r.login})),{uuid:r.uuid||(null==o?void 0:o.uuid),field_uuid:n,record_uuid:e.recordId,uid:i,name:r.name,icon:r.icon,login:r.login}})):[];i=i.concat(r),t.upsertModelCell(n,e.recordId,r)})),i=Jc(i,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(i)}}])}(gj);SB.type=xO.MENTION,SB.baseType=kO.URI,SB.MAX_LENGTH=128,SB=function(e,t,n,r){for(var i,o=r>1?void 0:r?CB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kB(t,n,o),o}([Gf()],SB);var OB=Object.defineProperty,EB=Object.getOwnPropertyDescriptor,IB=function(e,t,n,r){for(var i,o=r>1?void 0:r?EB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&OB(t,n,o),o},PB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._mentionField)}}],[{key:"pluginModule",value:function(){return ch().register(SB).register(this)}}])}();function MB(e,t,n){return t=DC(t),jC(e,RB()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function RB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RB=function(){return!!e})()}PB.pluginName="kernel-field-mention",IB([Yf(SB)],PB.prototype,"_mentionField",2),PB=IB([Gf({contrib:mj})],PB);var AB=Object.defineProperty,jB=Object.getOwnPropertyDescriptor,DB=function(e){function t(){var e;return rx(this,t),(e=MB(this,t,arguments)).editDisable=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return DB.type}},{key:"baseType",get:function(){return DB.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("modifier_id"))}),i=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),login:r.get("login"),uid:r.get("uid")}:null;return{uuid:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:i,formatValue:i?this.formatted(i):"",updated_at:n.get("updated_at")}}}])}(gj);DB.type=xO.MODIFIER_ID,DB.baseType=kO.SYSTEM,DB=function(e,t,n,r){for(var i,o=r>1?void 0:r?jB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&AB(t,n,o),o}([Gf()],DB);var TB=Object.defineProperty,FB=Object.getOwnPropertyDescriptor,NB=function(e,t,n,r){for(var i,o=r>1?void 0:r?FB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&TB(t,n,o),o},LB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._modifierIdField)}}],[{key:"pluginModule",value:function(){return ch().register(DB).register(this)}}])}();function BB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return VB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VB(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function VB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function zB(e,t,n){return t=DC(t),jC(e,HB()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function HB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HB=function(){return!!e})()}LB.pluginName="kernel-field-modifier-id",NB([Yf(DB)],LB.prototype,"_modifierIdField",2),LB=NB([Gf({contrib:mj})],LB);var WB=Object.defineProperty,UB=Object.getOwnPropertyDescriptor,GB=function(e){function t(){return rx(this,t),zB(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return GB.type}},{key:"baseType",get:function(){return GB.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?mN.getNextColor(e.color):"":mN.getNextColor()}},{key:"validate",value:function(e){return!0}},{key:"transform",value:function(e,t){var n=this;if(t){var r=this._model.fieldOptionModel.find({field_uuid:t});if(Array.isArray(e)){var i,o=[],a=BB(e);try{var l=function(){var e=i.value,a=CC(r,(function(t){return t.get("name")===e}));if(a>=0)o.push({value:r.get(a).get("uuid")});else{var l=Cx(6),u=r.get(r.length-1),c={uuid:l,field_uuid:t,name:(null==e?void 0:e.slice(0,dI.MAX_LENGTH))||"",color:n._getNewOptionColor(null==u?void 0:u.toJSON())};n._model.fieldOptionModel.create(c),o.push({value:c.uuid})}};for(a.s();!(i=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}return{value:o}}var u,c=BB(r);try{for(c.s();!(u=c.n()).done;){var s=u.value;if(s.get("name")===e||s.get("uuid")===e)return{value:[s.get("uuid")]}}}catch(e){c.e(e)}finally{c.f()}var d=Cx(6),f=r.get(r.length-1),h={uuid:d,field_uuid:t,name:(null==e?void 0:e.slice(0,dI.MAX_LENGTH))||"",color:this._getNewOptionColor(null==f?void 0:f.toJSON())};return this._model.fieldOptionModel.create(h),{value:[d]}}return{value:[e]}}},{key:"formatted",value:function(e,t,n){if(null==e)return"";if(n){var r,i=[],o=BB(n);try{for(o.s();!(r=o.n()).done;){var a,l=r.value,u=BB(e);try{for(u.s();!(a=u.n()).done;){var c=a.value;l.uuid===c&&i.push(l.name)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return i.join(",")}return t?OC(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})).join(","):Array.isArray(e)?e.join(","):""}},{key:"getFieldOptionName",value:function(e,t){return null==e?[]:t?OC(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})):[]}},{key:"keyValue",value:function(e){return Array.isArray(e)?e.join(","):e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.find({field_uuid:e,record_uuid:t}),r=null;if(n.length>0){r=[];var i,o=BB(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.get("value")&&r.push(a.get("value"))}}catch(e){o.e(e)}finally{o.f()}}var l=this._safeGetCell(e,t,r);return{uuid:l.get("uuid"),fieldId:l.get("field_uuid"),recordId:l.get("record_uuid"),fieldType:l.get("field_type"),updated_at:l.get("updated_at"),formatValue:l.get("format_value"),keyValue:l.get("key_value"),value:r,by_system:l.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),r){var i=r.map((function(n){var r=Ax(n)?null:"string"==typeof n?n:n.value;return{field_uuid:e,record_uuid:t,value:r}}));this.model.bulkCreate(i),this.upsertModelCell(e,t,i.map((function(e){return e.value})))}else this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var i=[];e.forEach((function(e){var r=(e.value||[]).map((function(t){var r=Ax(t)?null:"string"==typeof t?t:t.value;return{field_uuid:n,record_uuid:e.recordId,value:r}}));i=i.concat(r),t.upsertModelCell(n,e.recordId,r.map((function(e){return e.value})))})),this.model.bulkCreate(i)}}])}(gj);GB.type=xO.MULTI_SELECT,GB.baseType=kO.SELECT,GB=function(e,t,n,r){for(var i,o=r>1?void 0:r?UB(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WB(t,n,o),o}([Gf()],GB);var YB=Object.defineProperty,$B=Object.getOwnPropertyDescriptor,qB=function(e,t,n,r){for(var i,o=r>1?void 0:r?$B(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&YB(t,n,o),o},KB=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._multiSelectField)}}],[{key:"pluginModule",value:function(){return ch().register(GB).register(this)}}])}();KB.pluginName="kernel-field-multi-select",qB([Yf(GB)],KB.prototype,"_multiSelectField",2),KB=qB([Gf({contrib:mj})],KB);var XB=["number","numberWithCommas","percent"],JB={number:wx("数字"),numberWithCommas:wx("带千分分隔符的数字"),percent:wx("百分比")},ZB=["dollar","australian_dollar","canadian_dollar","singapore_dollar","euro","pound","yen","ruble","rupee","won","yuan","real","lira","rupiah","franc","hong_kong_dollar","new_zealand_dollar","krona","norwegian_krone","mexican_peso","rand","new_taiwan_dollar","danish_krone","zloty","baht","forint","koruna","shekel","chilean_peso","philippine_peso","dirham","colombian_peso","riyal","ringgit","leu","argentine_peso","uruguayan_peso","peruvian_sol"],QB={dollar:wx("美元"),australian_dollar:wx("澳元"),canadian_dollar:wx("加元"),singapore_dollar:wx("新加坡元"),euro:wx("欧元"),pound:wx("英镑"),yen:wx("日元"),ruble:wx("卢布"),rupee:wx("卢比"),won:wx("韩元"),yuan:wx("人民币"),real:wx("巴西雷亚尔"),lira:wx("里拉"),rupiah:wx("印尼盾"),franc:wx("法郎"),hong_kong_dollar:wx("港元"),new_zealand_dollar:wx("新西兰元"),krona:wx("瑞典克朗"),norwegian_krone:wx("挪威克朗"),mexican_peso:wx("墨西哥比索"),rand:wx("兰特"),new_taiwan_dollar:wx("新台币"),danish_krone:wx("丹麦克朗"),zloty:wx("兹罗提"),baht:wx("铢"),forint:wx("福林"),koruna:wx("捷克克朗"),shekel:wx("谢克尔"),chilean_peso:wx("智利比索"),philippine_peso:wx("菲律宾比索"),dirham:wx("迪拉姆"),colombian_peso:wx("哥伦比亚比索"),riyal:wx("里亚尔"),ringgit:wx("林吉特"),leu:wx("列伊"),argentine_peso:wx("阿根廷比索"),uruguayan_peso:wx("乌拉圭比索"),peruvian_sol:wx("秘鲁索尔")},eV={dollar:"USD",australian_dollar:"AUD",canadian_dollar:"CAD",singapore_dollar:"SGD",euro:"EUR",pound:"GBP",yen:"JPY",ruble:"RUB",rupee:"INR",won:"KRW",yuan:"CNY",real:"BRL",lira:"TRY",rupiah:"IDR",franc:"CHF",hong_kong_dollar:"HKD",new_zealand_dollar:"NZD",krona:"SEK",norwegian_krone:"NOK",mexican_peso:"MXN",rand:"ZAR",new_taiwan_dollar:"TWD",danish_krone:"DKK",zloty:"PLN",baht:"THB",forint:"HUF",koruna:"CZK",shekel:"ILS",chilean_peso:"CLP",philippine_peso:"PHP",dirham:"AED",colombian_peso:"COP",riyal:"SAR",ringgit:"MYR",leu:"RON",argentine_peso:"ARS",uruguayan_peso:"UYU",peruvian_sol:"PEN"},tV=function(){return ox((function e(){rx(this,e),this._currencyCache={}}),[{key:"getFormatter",value:function(e,t){return"numberWithCommas"===e?this._getCommasFormatter(t):"percent"===e?this._getPercentFormatter(t):ZB.includes(e)?this._getCurrencyFormatter(e,t):t}},{key:"_getCurrency",value:function(e){if(this._currencyCache[e])return this._currencyCache[e];var t=Intl.NumberFormat("zh-CN",{currency:eV[e],style:"currency"}).formatToParts(0).find((function(e){return"currency"===e.type})),n=t?t.value:"";return this._currencyCache[e]=n,n}},{key:"_getCommasFormatter",value:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"_getPercentFormatter",value:function(e){return"".concat(e,"%")}},{key:"_getCurrencyFormatter",value:function(e,t){if(!eV[e])return t;var n=this._getCurrency(e);return"".concat(n," ").concat(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"getParser",value:function(e,t){return"numberWithCommas"===e?this._getCommasParser(t):"percent"===e?this._getPercentParser(t):ZB.includes(e)?this._getCurrencyParser(e,t):t}},{key:"_getCommasParser",value:function(e){return e.replace(/\$\s?|(,*)/g,"")}},{key:"_getPercentParser",value:function(e){return e.replace("%","")}},{key:"_getCurrencyParser",value:function(e,t){if(!eV[e])return t;var n=this._getCurrency(e),r=new RegExp("\\".concat(n,"\\s?|(,*)"),"gi");return t.replace(r,"")}}])}(),nV=new tV;function rV(e,t,n){return t=DC(t),jC(e,iV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function iV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iV=function(){return!!e})()}var oV=Object.defineProperty,aV=Object.getOwnPropertyDescriptor,lV=function(e){function t(){var e;return rx(this,t),(e=rV(this,t,arguments)).strict=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return lV.type}},{key:"baseType",get:function(){return lV.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||Fk(t)},errorMsg:wx("数字类型只能输入数字")}]}},{key:"validate",value:function(e){return null==e||cC(String(e),{precision:lV.DECIMAL_PRECISION,scale:lV.DECIMAL_SCALE})}},{key:"transform",value:function(e){return cC(e,{precision:lV.DECIMAL_PRECISION,scale:lV.DECIMAL_SCALE})?{value:e}:null}},{key:"formatted",value:function(e,t){if(null==e)return"";var n=String(e);return(null==t?void 0:t.format)?nV.getFormatter(t.format,n):n}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t);return this.formatted(null==r?void 0:r.value,n)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this.model.findOne({field_uuid:e,record_uuid:t}),i=null==r?void 0:r.get("value"),o=this._safeGetCell(e,t,i,n);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==r?void 0:r.get("value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n,r){var i=this.getModelCell(e,t);return i||(this.upsertModelCell(e,t,n,!0,r),i=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),i||new bC}},{key:"upsertModelCell",value:function(e,t,n,r,i){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n,i),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n,r){if(n)return n.value?void(this.strict&&!this.getVerify(n.value).verify||(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value,void 0,r))):(this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value,r))}},{key:"bulkSetCell",value:function(e,t){var n=this,r=e[0].fieldId,i=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:r,record_uuid:i}),this.model.bulkCreate(e.map((function(e){return n.upsertModelCell(r,e.recordId,e.value,void 0,t),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(gj);lV.type=xO.NUMBER,lV.baseType=kO.NUMBER,lV.DECIMAL_PRECISION=27,lV.DECIMAL_SCALE=9,lV=function(e,t,n,r){for(var i,o=r>1?void 0:r?aV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oV(t,n,o),o}([Gf()],lV);var uV=Object.defineProperty,cV=Object.getOwnPropertyDescriptor,sV=function(e,t,n,r){for(var i,o=r>1?void 0:r?cV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uV(t,n,o),o},dV=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._numberField)}}],[{key:"pluginModule",value:function(){return ch().register(lV).register(this)}}])}();function fV(e,t,n){return t=DC(t),jC(e,hV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function hV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hV=function(){return!!e})()}dV.pluginName="kernel-field-number",sV([Yf(lV)],dV.prototype,"_numberField",2),dV=sV([Gf({contrib:mj})],dV);var pV=Object.defineProperty,vV=Object.getOwnPropertyDescriptor,gV=function(e){function t(){return rx(this,t),fV(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return gV.type}},{key:"baseType",get:function(){return gV.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||/^([0-9]|\+|-)+$/gi.test(t)},errorMsg:wx("请输入有效手机号")}]}},{key:"validate",value:function(e){return null==e||!(e.length>gV.MAX_LENGTH)}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e?"":e}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),value:r,verify:i.get("verify"),errorMessage:i.get("verify_message"),updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){var i=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),i.verify,i.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(gj);gV.type=xO.PHONE,gV.baseType=kO.STRING,gV.MAX_LENGTH=128,gV=function(e,t,n,r){for(var i,o=r>1?void 0:r?vV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&pV(t,n,o),o}([Gf()],gV);var mV=Object.defineProperty,yV=Object.getOwnPropertyDescriptor,bV=function(e,t,n,r){for(var i,o=r>1?void 0:r?yV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mV(t,n,o),o},wV=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._phoneField)}}],[{key:"pluginModule",value:function(){return ch().register(gV).register(this)}}])}();function _V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xV(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xV(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function xV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function kV(e,t,n){return t=DC(t),jC(e,CV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function CV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CV=function(){return!!e})()}wV.pluginName="kernel-field-phone",bV([Yf(gV)],wV.prototype,"_phoneField",2),wV=bV([Gf({contrib:mj})],wV);var SV=Object.defineProperty,OV=Object.getOwnPropertyDescriptor,EV=function(e){function t(){return rx(this,t),kV(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return EV.type}},{key:"baseType",get:function(){return EV.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?mN.getNextColor(e.color):"":mN.getNextColor()}},{key:"validate",value:function(e){return!!e}},{key:"transform",value:function(e,t){if(t){var n,r=this._model.fieldOptionModel.find({field_uuid:t}),i=_V(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.get("name")===e||o.get("uuid")===e)return{value:o.get("uuid")}}}catch(e){i.e(e)}finally{i.f()}var a=Cx(6),l=r.get(r.length-1),u={uuid:a,field_uuid:t,name:e.slice(0,dI.MAX_LENGTH),color:l&&this._getNewOptionColor(l.toJSON())};return this._model.fieldOptionModel.create(u),{value:a}}return{value:e}}},{key:"formatted",value:function(e,t,n){if(!e)return"";if(n){var r,i=_V(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.uuid===e)return o.name||""}}catch(e){i.e(e)}finally{i.f()}}if(!t)return Cc(e)?e:"";var a=this._getOptionValue(t,e);return(null==a?void 0:a.get("name"))||""}},{key:"_getOptionValue",value:function(e,t){var n,r=_V(this._model.fieldOptionModel.find({field_uuid:e}));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.get("uuid")===t)return i}}catch(e){r.e(e)}finally{r.f()}}},{key:"keyValue",value:function(e){return e||null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null;n&&(r=n.get("value"));var i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),value:r,by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,value:e.value}})))}}])}(gj);EV.type=xO.SELECT,EV.baseType=kO.SELECT,EV=function(e,t,n,r){for(var i,o=r>1?void 0:r?OV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&SV(t,n,o),o}([Gf()],EV);var IV=Object.defineProperty,PV=Object.getOwnPropertyDescriptor,MV=function(e,t,n,r){for(var i,o=r>1?void 0:r?PV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&IV(t,n,o),o},RV=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._selectField)}}],[{key:"pluginModule",value:function(){return ch().register(EV).register(this)}}])}();function AV(e,t,n){return t=DC(t),jC(e,jV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function jV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jV=function(){return!!e})()}RV.pluginName="kernel-field-select",MV([Yf(EV)],RV.prototype,"_selectField",2),RV=MV([Gf({contrib:mj})],RV);var DV=Object.defineProperty,TV=Object.getOwnPropertyDescriptor,FV=function(e){function t(){return rx(this,t),AV(this,t,arguments)}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return FV.type}},{key:"baseType",get:function(){return FV.baseType}},{key:"validate",value:function(e){return null==e||(!((null==e?void 0:e.length)>FV.MAX_LENGTH)||(e=e.substring(0,FV.MAX_LENGTH),!1))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e?"":"string"!=typeof e?String(e):e.replace(/[\n\t\r]/gi,"").trim()}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),value:null==n?void 0:n.get("value"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(gj);FV.type=xO.TEXT,FV.baseType=kO.STRING,FV.MAX_LENGTH=5e3,FV=function(e,t,n,r){for(var i,o=r>1?void 0:r?TV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DV(t,n,o),o}([Gf()],FV);var NV=Object.defineProperty,LV=Object.getOwnPropertyDescriptor,BV=function(e,t,n,r){for(var i,o=r>1?void 0:r?LV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&NV(t,n,o),o},VV=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._textField)}}],[{key:"pluginModule",value:function(){return ch().register(FV).register(this)}}])}();function zV(e,t,n){return t=DC(t),jC(e,HV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function HV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HV=function(){return!!e})()}VV.pluginName="kernel-field-text",BV([Yf(FV)],VV.prototype,"_textField",2),VV=BV([Gf({contrib:mj})],VV);var WV=Object.defineProperty,UV=Object.getOwnPropertyDescriptor,GV=function(e){function t(){var e;return rx(this,t),(e=zV(this,t,arguments)).editDisable=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return GV.type}},{key:"baseType",get:function(){return GV.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e,t,n){return null==e?"":(Fk(e)&&(e=new Date(Number(e))),a()(e).format((null==n?void 0:n.date_format)||GV.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return a()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.formatted(null==r?void 0:r.value)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this._model.recordModel.findOne({uuid:t}),i=r.get("updated_at");return{uuid:null==r?void 0:r.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:i,value:i,formatValue:this.formatted(i,void 0,n),keyValue:this.keyValue(i)}}}])}(gj);GV.type=xO.UPDATED_AT,GV.baseType=kO.SYSTEM,GV.format="YYYY-MM-DD HH:mm:ss",GV=function(e,t,n,r){for(var i,o=r>1?void 0:r?UV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WV(t,n,o),o}([Gf()],GV);var YV=Object.defineProperty,$V=Object.getOwnPropertyDescriptor,qV=function(e,t,n,r){for(var i,o=r>1?void 0:r?$V(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&YV(t,n,o),o},KV=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._updatedAtField)}}],[{key:"pluginModule",value:function(){return ch().register(GV).register(this)}}])}();function XV(e,t,n){return t=DC(t),jC(e,JV()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function JV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JV=function(){return!!e})()}KV.pluginName="kernel-field-updated-at",qV([Yf(GV)],KV.prototype,"_updatedAtField",2),KV=qV([Gf({contrib:mj})],KV);var ZV=Object.defineProperty,QV=Object.getOwnPropertyDescriptor,ez=function(e){function t(){var e;return rx(this,t),(e=XV(this,t,arguments)).editDisable=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return ez.type}},{key:"baseType",get:function(){return ez.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("creator_id"))}),i=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),uid:r.get("uid"),login:r.get("login")}:null;return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:null==n?void 0:n.get("updated_at"),value:i,formatValue:i?this.formatted(i):""}}}])}(gj);ez.type=xO.USER_ID,ez.baseType=kO.SYSTEM,ez=function(e,t,n,r){for(var i,o=r>1?void 0:r?QV(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ZV(t,n,o),o}([Gf()],ez);var tz=Object.defineProperty,nz=Object.getOwnPropertyDescriptor,rz=function(e,t,n,r){for(var i,o=r>1?void 0:r?nz(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tz(t,n,o),o},iz=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._userIdField)}}],[{key:"pluginModule",value:function(){return ch().register(ez).register(this)}}])}();function oz(e,t,n){return t=DC(t),jC(e,az()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function az(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(az=function(){return!!e})()}iz.pluginName="kernel-field-user-id",rz([Yf(ez)],iz.prototype,"_userIdField",2),iz=rz([Gf({contrib:mj})],iz);var lz=function(e){function t(){return rx(this,t),oz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.packet,n=e.thingId;return this.writeService.createFilterPacket(t,n),!0}}])}(Ij);function uz(e,t,n){return t=DC(t),jC(e,cz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function cz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cz=function(){return!!e})()}lz.commandName="createFilterPacket";var sz=function(e){function t(){return rx(this,t),uz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeFilterPacket(e.packetId,e.viewId,e.isAll),!0}}])}(Ij);function dz(e,t,n){return t=DC(t),jC(e,fz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fz=function(){return!!e})()}sz.commandName="removeFilterPacket";var hz=function(e){function t(){return rx(this,t),dz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFilterPacket(e),!0}}])}(Ij);function pz(e,t,n){return t=DC(t),jC(e,vz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vz=function(){return!!e})()}hz.commandName="updateFilterPacket";var gz=function(e){function t(){return rx(this,t),pz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createFilterThing(e),!0}}])}(Ij);function mz(e,t,n){return t=DC(t),jC(e,yz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yz=function(){return!!e})()}gz.commandName="createFilterThing";var bz=function(e){function t(){return rx(this,t),mz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeFilterThing(e),!0}}])}(Ij);function wz(e,t,n){return t=DC(t),jC(e,_z()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function _z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_z=function(){return!!e})()}bz.commandName="removeFilterThing";var xz=function(e){function t(){return rx(this,t),wz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFilterThing(e),!0}}])}(Ij);xz.commandName="updateFilterThing";var kz=Object.defineProperty,Cz=Object.getOwnPropertyDescriptor,Sz=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cz(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kz(t,n,o),o},Oz=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(lz.commandName,lz),this.commandService.registerCommand(sz.commandName,sz),this.commandService.registerCommand(hz.commandName,hz),this.commandService.registerCommand(gz.commandName,gz),this.commandService.registerCommand(bz.commandName,bz),this.commandService.registerCommand(xz.commandName,xz)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function Ez(e,t,n){return t=DC(t),jC(e,Iz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Iz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iz=function(){return!!e})()}Oz.pluginName="kernel-filter",Sz([Yf(Lj)],Oz.prototype,"commandService",2),Oz=Sz([Gf({contrib:mj})],Oz);var Pz=function(e){function t(){return rx(this,t),Ez(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.removeFieldOption(e.optionId),!0}}])}(Ij);function Mz(e,t,n){return t=DC(t),jC(e,Rz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rz=function(){return!!e})()}Pz.commandName="removeFieldOption";var Az=function(e){function t(){return rx(this,t),Mz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=this.readService.getFieldOptions(e.fieldId)||[],r=null==(t=n.get(n.length-1))?void 0:t.get("uuid");return this.writeService.createFieldOption(e.fieldId,e.fieldOption,r),!0}}])}(Ij);function jz(e,t,n){return t=DC(t),jC(e,Dz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dz=function(){return!!e})()}Az.commandName="createFieldOption";var Tz=function(e){function t(){return rx(this,t),jz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.updateFieldOption(e.optionId,e.fieldOption),!0}}])}(Ij);Tz.commandName="updateFieldOption";var Fz=Object.defineProperty,Nz=Object.getOwnPropertyDescriptor,Lz=function(e,t,n,r){for(var i,o=r>1?void 0:r?Nz(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Fz(t,n,o),o},Bz=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Az.commandName,Az),this.commandService.registerCommand(Tz.commandName,Tz),this.commandService.registerCommand(Pz.commandName,Pz)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function Vz(e,t,n){return t=DC(t),jC(e,zz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zz=function(){return!!e})()}Bz.pluginName="kernel-group",Lz([Yf(Lj)],Bz.prototype,"commandService",2),Bz=Lz([Gf({contrib:mj})],Bz);var Hz=function(e){function t(){return rx(this,t),Vz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceRecordId,r=e.targetRecordId,i=e.targetGroupItem,o=e.direction;return this.writeService.updateRecordOrder(t,n,r,i,o),!0}}])}(Ij);function Wz(e,t,n){return t=DC(t),jC(e,Uz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uz=function(){return!!e})()}Hz.commandName="changeRecordOrder";var Gz=function(e){function t(){return rx(this,t),Wz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceFieldId,r=e.targetFieldId;return this.writeService.updateFieldOrder(t,n,r),!0}}])}(Ij);function Yz(e,t,n){return t=DC(t),jC(e,$z()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($z=function(){return!!e})()}Gz.commandName="changeFieldOrder";var qz=function(e){function t(){return rx(this,t),Yz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.fieldId,n=e.sourceFieldOptionId,r=e.targetFieldOptionId;return this.writeService.updateFieldOptionOrder(t,n,r),!0}}])}(Ij);function Kz(e,t,n){return t=DC(t),jC(e,Xz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xz=function(){return!!e})()}qz.commandName="changeFieldOptionOrder";var Jz=function(e){function t(){return rx(this,t),Kz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.sourceViewId,n=e.targetViewId;return this.writeService.updateViewOrder(t,n),!0}}])}(Ij);function Zz(e,t,n){return t=DC(t),jC(e,Qz()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qz=function(){return!!e})()}Jz.commandName="changeViewOrder";var eH=function(e){function t(){return rx(this,t),Zz(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateValueOrder({fieldId:e.fieldId,fieldType:e.fieldType,recordId:e.recordId,sourceValueId:e.sourceValueId,targetValueId:e.targetValueId}),!0}}])}(Ij);eH.commandName="updateValueOrder";var tH=Object.defineProperty,nH=Object.getOwnPropertyDescriptor,rH=function(e,t,n,r){for(var i,o=r>1?void 0:r?nH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tH(t,n,o),o},iH=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Hz.commandName,Hz),this.commandService.registerCommand(Gz.commandName,Gz),this.commandService.registerCommand(qz.commandName,qz),this.commandService.registerCommand(Jz.commandName,Jz),this.commandService.registerCommand(eH.commandName,eH)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();iH.pluginName="kernel-order",rH([Yf(Lj)],iH.prototype,"commandService",2),iH=rH([Gf({contrib:mj})],iH);var oH=Object.defineProperty,aH=Object.getOwnPropertyDescriptor,lH=function(e,t,n,r){for(var i,o=r>1?void 0:r?aH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oH(t,n,o),o},uH=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this._contentService.setProcessor(this._processor)}}],[{key:"pluginModule",value:function(){return ch().contribution(RD).register(LD).register(YD).register(QD).register(this)}}])}();function cH(e,t,n){return t=DC(t),jC(e,sH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function sH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sH=function(){return!!e})()}uH.pluginName="kernel-process",lH([Yf(IA)],uH.prototype,"_contentService",2),lH([Yf(QD)],uH.prototype,"_processor",2),uH=lH([Gf({contrib:mj})],uH);var dH=function(e){function t(){return rx(this,t),cH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this,n=this.plugin.getFillCells(e);return Object.values(kc(n,(function(e){return e.fieldId}))).forEach((function(e){t.writeService.bulkSetCell(e)})),!0}}])}(Ij);dH.commandName="autofillCells";var fH=Rf.defineToken("SelectionKernelPluginContribution"),hH=function(e){return e.NONE="none",e.CARET="caret",e.RANGE="range",e}(hH||{}),pH=function(){function e(t,n,r,i){rx(this,e),this._row=t,this._column=n,this._rowCount=r,this._columnCount=i}return ox(e,[{key:"row",get:function(){return this._row}},{key:"column",get:function(){return this._column}},{key:"rowCount",get:function(){return this._rowCount}},{key:"columnCount",get:function(){return this._columnCount}},{key:"isAtRowStart",get:function(){return 0===this._row}},{key:"isAtRowEnd",get:function(){return this._row===this._rowCount-1}},{key:"isAtColumnStart",get:function(){return 0===this._column}},{key:"isAtColumnEnd",get:function(){return this._column===this._columnCount-1}},{key:"isAtStart",get:function(){return this.isAtRowStart&&this.isAtColumnStart}},{key:"isAtEnd",get:function(){return this.isAtRowEnd&&this.isAtColumnEnd}},{key:"clone",value:function(){return new e(this._row,this._column,this._rowCount,this._columnCount)}}],[{key:"equal",value:function(e,t){return e===t||e._row===t._row&&e._column===t._column}}])}();function vH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vH(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mH(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yH(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function yH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var bH=Object.defineProperty,wH=Object.getOwnPropertyDescriptor,_H=function(e,t,n,r){for(var i,o=r>1?void 0:r?wH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&bH(t,n,o),o},xH=function(){return ox((function e(){rx(this,e)}),[{key:"isSupportMultiValue",value:function(e){return!!e&&(YO.isNumberLike(e)||YO.isDate(e))}},{key:"getValues",value:function(e,t,n){for(var r,i=[],o=e[0].length,a=0;a<o;a++){if(e.length>1){var l=null==(r=e[0][a])?void 0:r.fieldType,u=e[e.length-2][a],c=e[e.length-1][a];if(this.isSupportMultiValue(l)&&""!==(null==u?void 0:u.formatValue)&&""!==(null==c?void 0:c.formatValue)){var s=this.getValuesByMultiValue(u,c,t,n);i=i.concat(s);continue}}var d=e[e.length-1][a],f=this.getValuesBySingleValue(d,t);i=i.concat(f)}return i}},{key:"getValuesBySingleValue",value:function(e,t){var n,r=[],i=mH(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.readService.getCell(e.fieldId,o);a&&r.push(gH(gH({},a),{},{value:e.value,formatValue:e.formatValue||""}))}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"getValuesByMultiValue",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"down",i=[];if(YO.isNumberLike(e.fieldType)){var o,l=Number(t.value)-Number(e.value),u=Number("down"===r?t.value:e.value),c=mH(n);try{for(c.s();!(o=c.n()).done;){var s=o.value,d=this.readService.getCell(e.fieldId,s);d&&("down"===r?u+=l:u-=l,i.push(gH(gH({},d),{},{value:u})))}}catch(e){c.e(e)}finally{c.f()}}else if(YO.isDate(e.fieldType)){var f,h,p=this.readService.getField(e.fieldId).get("config");if("HH:mm"===(null==p?void 0:p.date_format)){var v=a()().format("YYYY-MM-DD");f=a()(v+" "+t.formatValue).diff(a()(v+" "+e.formatValue)),h="down"===r?a()(v+" "+t.formatValue):a()(v+" "+e.formatValue)}else f=a()(t.formatValue).diff(e.formatValue),h="down"===r?a()(t.formatValue):a()(e.formatValue);var g,m=mH(n);try{for(m.s();!(g=m.n()).done;){var y=g.value,b=this.readService.getCell(e.fieldId,y);b&&(h="down"===r?h.add(f):h.add(-f),i.push(gH(gH({},b),{},{value:h.toDate()})))}}catch(e){m.e(e)}finally{m.f()}}return i}}])}();function kH(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return CH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CH(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function CH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function SH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SH(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_H([Yf(XA)],xH.prototype,"readService",2),xH=_H([Gf()],xH);var EH=Object.defineProperty,IH=Object.getOwnPropertyDescriptor,PH=function(e,t,n,r){for(var i,o=r>1?void 0:r?IH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&EH(t,n,o),o},MH=function(){return ox((function e(){rx(this,e)}),[{key:"getCellsByRange",value:function(e,t,n,r){for(var i=e.start,o=e.end,a=o.row-i.row+1,l=o.column-i.column+1,u=Array.from({length:a}).fill(null).map((function(){return Array.from({length:l}).fill(null)})),c=[],s=0;s<l;s++){var d=t.get(s+i.column).get("field"),f=(null==d?void 0:d.get("uuid"))||"";if((null==r?void 0:r.field.get("uuid"))===f)break;if(YO.isSystemType(null==d?void 0:d.get("type")))break;d&&c.push(OH({},d.toJSON()));for(var h=0;h<a;h++){var p=n.get(h+i.row).get("record_uuid"),v=this.readService.getCell(f,p);v&&(u[h][s]=v)}}return{fields:c,cells:u}}},{key:"getCellsBySelection",value:function(e,t,n,r){if(!e)return null;var i,o=[],a=kH(e.ranges);try{for(a.s();!(i=a.n()).done;){var l=i.value,u=this.getCellsByRange(l,t,n,r);o=[].concat(Q_(o),Q_(u.cells))}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"getFillCells",value:function(e){var t=e.preSelection,n=e.newSelection,r=this.readService.getActiveView(),i=this.readService.getViewGroup(),o=this.readService.getViewFields(null==r?void 0:r.get("uuid"))||[],a=this.readService.getFlatViewRecords(null==r?void 0:r.get("uuid"))||[],l=this.getCellsBySelection(t,o,a,i)||[],u=[],c=t.getRangeAt(0).start,s=t.getRangeAt(t.rangeCount-1).end,d=n.getRangeAt(0).start,f=n.getRangeAt(n.rangeCount-1).end;if(f.row>s.row){for(var h=f.row-s.row,p=[],v=0;v<h;v++){var g=a.get(v+s.row+1).get("record_uuid");p.push(g)}var m=this.autofillValueService.getValues(l,p,"down");u=u.concat(m)}else if(d.row<c.row){for(var y=c.row-d.row,b=[],w=0;w<y;w++){var _=a.get(c.row-w-1).get("record_uuid");b.push(_)}var x=this.autofillValueService.getValues(l,b,"up");u=u.concat(x)}return u}}])}();PH([Yf(XA)],MH.prototype,"readService",2),PH([Yf(xH)],MH.prototype,"autofillValueService",2),MH=PH([Gf()],MH);var RH=Object.defineProperty,AH=Object.getOwnPropertyDescriptor,jH=function(e,t,n,r){for(var i,o=r>1?void 0:r?AH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&RH(t,n,o),o},DH=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(dH.commandName,dH,this.autofillService)}}],[{key:"pluginModule",value:function(){return ch().contribution(fH).register(this).register(MH).register(xH).register(pH)}}])}();function TH(e,t,n){return t=DC(t),jC(e,FH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function FH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FH=function(){return!!e})()}DH.pluginName="kernel-selection",jH([Yf(Lj)],DH.prototype,"commandService",2),jH([Yf(MH)],DH.prototype,"autofillService",2),DH=jH([Gf({contrib:mj})],DH);var NH=function(e){function t(){return rx(this,t),TH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createSort(e.viewId,e.sort,!1),!0}}])}(Ij);function LH(e,t,n){return t=DC(t),jC(e,BH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function BH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BH=function(){return!!e})()}NH.commandName="createSort";var VH=function(e){function t(){return rx(this,t),LH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeSort(e.viewId),!0}}])}(Ij);function zH(e,t,n){return t=DC(t),jC(e,HH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function HH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HH=function(){return!!e})()}VH.commandName="removeSort";var WH=function(e){function t(){return rx(this,t),zH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateSort(e.viewId,e.sort,e.auto),!0}}])}(Ij);WH.commandName="updateSort";var UH=Object.defineProperty,GH=Object.getOwnPropertyDescriptor,YH=function(e,t,n,r){for(var i,o=r>1?void 0:r?GH(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&UH(t,n,o),o},$H=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(NH.commandName,NH),this.commandService.registerCommand(VH.commandName,VH),this.commandService.registerCommand(WH.commandName,WH)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function qH(e,t,n){return t=DC(t),jC(e,KH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function KH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KH=function(){return!!e})()}$H.pluginName="kernel-sort",YH([Yf(Lj)],$H.prototype,"commandService",2),$H=YH([Gf({contrib:mj})],$H);var XH=function(e){function t(){return rx(this,t),qH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.upsertStat(e.viewId,e.fieldId,e.type),!0}}])}(Ij);function JH(e,t,n){return t=DC(t),jC(e,ZH()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ZH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZH=function(){return!!e})()}XH.commandName="updateStat";var QH=function(e){function t(){return rx(this,t),JH(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeStat(e.viewId,e.fieldId),!0}}])}(Ij);QH.commandName="removeStat";var eW=Object.defineProperty,tW=Object.getOwnPropertyDescriptor,nW=function(e,t,n,r){for(var i,o=r>1?void 0:r?tW(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&eW(t,n,o),o},rW=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(XH.commandName,XH),this.commandService.registerCommand(QH.commandName,QH)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();rW.pluginName="kernel-statistics",nW([Yf(Lj)],rW.prototype,"commandService",2),rW=nW([Gf({contrib:mj})],rW);var iW=Object.defineProperty,oW=Object.getOwnPropertyDescriptor,aW=function(e,t,n,r){for(var i,o=r>1?void 0:r?oW(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&iW(t,n,o),o},lW=function(){return ox((function e(){rx(this,e),this.viewType=WO.CARD}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function uW(e,t,n){return t=DC(t),jC(e,cW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function cW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cW=function(){return!!e})()}lW.pluginName="kernel-viewer-card",aW([Yf(Lj)],lW.prototype,"commandService",2),lW=aW([Gf({contrib:mj})],lW);var sW=function(e){function t(){return rx(this,t),uW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_display:e.coverDisplay}),!0}}])}(Ij);function dW(e,t,n){return t=DC(t),jC(e,fW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fW=function(){return!!e})()}sW.commandName="updateCoverDisplay";var hW=function(e){function t(){return rx(this,t),dW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_field_name:e.showFieldName}),!0}}])}(Ij);function pW(e,t,n){return t=DC(t),jC(e,vW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function vW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vW=function(){return!!e})()}hW.commandName="updateShowFieldName";var gW=function(e){function t(){return rx(this,t),pW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_field_uuid:e.coverFieldId}),!0}}])}(Ij);function mW(e,t,n){return t=DC(t),jC(e,yW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function yW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yW=function(){return!!e})()}gW.commandName="updateCoverSource";var bW=function(e){function t(){return rx(this,t),mW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFieldHidden(e.viewId,e.fieldId,e.hidden),!0}}])}(Ij);bW.commandName="updateFieldHidden";var wW=Object.defineProperty,_W=Object.getOwnPropertyDescriptor,xW=function(e,t,n,r){for(var i,o=r>1?void 0:r?_W(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wW(t,n,o),o},kW=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(sW.commandName,sW),this.commandService.registerCommand(hW.commandName,hW),this.commandService.registerCommand(gW.commandName,gW),this.commandService.registerCommand(bW.commandName,bW)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function CW(e,t,n){return t=DC(t),jC(e,SW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function SW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SW=function(){return!!e})()}kW.pluginName="kernel-viewer-field-setting",xW([Yf(Lj)],kW.prototype,"commandService",2),kW=xW([Gf({contrib:mj})],kW);var OW=function(e){function t(){return rx(this,t),CW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeCells(e.cells,!1),!0}},{key:"afterExecute",value:function(e,n,r){var i,o=this,a=e.cells,l=a[0],u=this.readService.getActiveView(),c=this.readService.getViewGroup(u.get("uuid")),s=a.map((function(e){return e.fieldId})),d=r.isNeedRefreshSort(u.get("uuid"),s),f=r.isNeedRefreshGroup(u.get("uuid"),s);if(l&&(i=r.isNeedRefreshFilter(u.get("uuid"),l.fieldId,l.recordId,l.value)),d||f||i){var h=d?nj.SORT:f?nj.GROUP:nj.FILTER;d&&this.writeService.refreshSort(u.get("uuid")),f&&this.writeService.refreshGroup(u.get("uuid"),null==c?void 0:c.group.toJSON()),i&&this.writeService.refreshFilter(u.get("uuid")),null==r||r.emitBeforeRefresh(h,t.commandName,e,aO(QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(h),null==(t=o.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}(Ij);OW.commandName="removeCells";var EW=OW;function IW(e,t,n){return t=DC(t),jC(e,PW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function PW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PW=function(){return!!e})()}var MW=function(e){function t(){return rx(this,t),IW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setCell(e,!1),!0}},{key:"afterExecute",value:function(e,n,r){var i=this,o=this.readService.getActiveView(),a=this.readService.getViewGroup(o.get("uuid")),l=r.isNeedRefreshSort(o.get("uuid"),e.fieldId),u=r.isNeedRefreshGroup(o.get("uuid"),e.fieldId),c=r.isNeedRefreshFilter(o.get("uuid"),e.fieldId,e.recordId,e.value);if(l||u||c){var s=l?nj.SORT:u?nj.GROUP:nj.FILTER;l&&this.writeService.refreshSort(o.get("uuid")),u&&this.writeService.refreshGroup(o.get("uuid"),null==a?void 0:a.group.toJSON()),c&&this.writeService.refreshFilter(o.get("uuid")),null==r||r.emitBeforeRefresh(s,t.commandName,e,aO(QC.mark((function e(){var t;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(s),null==(t=i.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}(Ij);MW.commandName="setCell";var RW=MW,AW=Object.defineProperty,jW=Object.getOwnPropertyDescriptor,DW=function(e,t,n,r){for(var i,o=r>1?void 0:r?jW(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&AW(t,n,o),o},TW=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(EW.commandName,EW),this.commandService.registerCommand(RW.commandName,RW)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function FW(e,t,n){return t=DC(t),jC(e,NW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function NW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NW=function(){return!!e})()}TW.pluginName="kernel-viewer-grid-cell-editor",DW([Yf(Lj)],TW.prototype,"commandService",2),TW=DW([Gf({contrib:mj})],TW);var LW=function(e){function t(){return rx(this,t),FW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createGroup(e.viewId,e.group),!0}}])}(Ij);function BW(e,t,n){return t=DC(t),jC(e,VW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function VW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VW=function(){return!!e})()}LW.commandName="createGridGroup";var zW=function(e){function t(){return rx(this,t),BW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeGroup(e.viewId),!0}}])}(Ij);function HW(e,t,n){return t=DC(t),jC(e,WW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function WW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WW=function(){return!!e})()}zW.commandName="removeGridGroup";var UW=function(e){function t(){return rx(this,t),HW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}(Ij);function GW(e,t,n){return t=DC(t),jC(e,YW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function YW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YW=function(){return!!e})()}UW.commandName="updateGridGroup";var $W=function(e){function t(){return rx(this,t),GW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setGroupItemCollapse(e.viewId,e.fieldId,e.groupId,e.value),!0}}])}(Ij);$W.commandName="updateGridGroupFold";var qW=Object.defineProperty,KW=Object.getOwnPropertyDescriptor,XW=function(e,t,n,r){for(var i,o=r>1?void 0:r?KW(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qW(t,n,o),o},JW=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(LW.commandName,LW),this.commandService.registerCommand(zW.commandName,zW),this.commandService.registerCommand(UW.commandName,UW),this.commandService.registerCommand($W.commandName,$W)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function ZW(e,t,n){return t=DC(t),jC(e,QW()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function QW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QW=function(){return!!e})()}JW.pluginName="kernel-viewer-grid-group",XW([Yf(Lj)],JW.prototype,"commandService",2),JW=XW([Gf({contrib:mj})],JW);var eU=function(e){function t(){return rx(this,t),ZW(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{record_height:e.recordHeight}),!0}}])}(Ij),tU=Object.defineProperty,nU=Object.getOwnPropertyDescriptor,rU=function(e,t,n,r){for(var i,o=r>1?void 0:r?nU(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tU(t,n,o),o},iU=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand("updateGridRecordHeight",eU)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function oU(e,t,n){return t=DC(t),jC(e,aU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function aU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aU=function(){return!!e})()}iU.pluginName="kernel-viewer-grid-record-height",rU([Yf(Lj)],iU.prototype,"commandService",2),iU=rU([Gf({contrib:mj})],iU);var lU=function(e){function t(){return rx(this,t),oU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.fieldId,r=e.size;return this.writeService.updateFieldSize(t,n,r),!0}}])}(Ij);lU.commandName="changeColWidth";var uU=Object.defineProperty,cU=Object.getOwnPropertyDescriptor,sU=function(e,t,n,r){for(var i,o=r>1?void 0:r?cU(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uU(t,n,o),o},dU=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(lU.commandName,lU)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function fU(e,t,n){return t=DC(t),jC(e,hU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function hU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hU=function(){return!!e})()}dU.pluginName="kernel-viewer-grid",sU([Yf(Lj)],dU.prototype,"commandService",2),dU=sU([Gf({contrib:mj})],dU);var pU=function(e){function t(){return rx(this,t),fU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}(Ij);function vU(e,t,n){return t=DC(t),jC(e,gU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function gU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gU=function(){return!!e})()}pU.commandName="updateKanbanGroup";var mU=function(e){function t(){return rx(this,t),vU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId||this.readService.getActiveViewId();return this.writeService.setGroupItemCollapse(t,e.fieldId,e.groupId,e.value),!0}}])}(Ij);mU.commandName="updateKanbanGroupCollapse";var yU=Object.defineProperty,bU=Object.getOwnPropertyDescriptor,wU=function(e,t,n,r){for(var i,o=r>1?void 0:r?bU(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&yU(t,n,o),o},_U=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(pU.commandName,pU),this.commandService.registerCommand(mU.commandName,mU)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function xU(e,t,n){return t=DC(t),jC(e,kU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function kU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kU=function(){return!!e})()}_U.pluginName="kernel-viewer-kanban",wU([Yf(Lj)],_U.prototype,"commandService",2),_U=wU([Gf({contrib:mj})],_U);var CU=function(e){function t(){return rx(this,t),xU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.writeService.createViewByType(e.uuid,e.type||WO.GRID);return!t||e.noSwitchView||this.context.isRemote||this.writeService.setActiveView(t.get("uuid")),!0}}])}(Ij);function SU(e,t,n){return t=DC(t),jC(e,OU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function OU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OU=function(){return!!e})()}CU.commandName="addView";var EU=function(e){function t(){return rx(this,t),SU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setActiveView(e.viewId),!0}}])}(Ij);function IU(e,t,n){return t=DC(t),jC(e,PU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function PU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PU=function(){return!!e})()}EU.commandName="switchView";var MU=function(e){function t(){return rx(this,t),IU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeView(e.viewId),!0}}])}(Ij);function RU(e,t,n){return t=DC(t),jC(e,AU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function AU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AU=function(){return!!e})()}MU.commandName="removeView";var jU=function(e){function t(){return rx(this,t),RU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.targetViewId=Cx(32),e}},{key:"execute",value:function(e){var t=this.writeService.copyView(e.targetViewId,e.viewId);return t&&this.writeService.setActiveView(t.get("uuid")),!0}}])}(Ij);function DU(e,t,n){return t=DC(t),jC(e,TU()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function TU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TU=function(){return!!e})()}jU.commandName="copyView";var FU=function(e){function t(){return rx(this,t),DU(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateView(e.viewId,{name:e.name}),!0}}])}(Ij);FU.commandName="updateViewName";var NU=Object.defineProperty,LU=Object.getOwnPropertyDescriptor,BU=function(e,t,n,r){for(var i,o=r>1?void 0:r?LU(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&NU(t,n,o),o},VU=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(CU.commandName,CU),this.commandService.registerCommand(EU.commandName,EU),this.commandService.registerCommand(MU.commandName,MU),this.commandService.registerCommand(jU.commandName,jU),this.commandService.registerCommand(FU.commandName,FU)}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{maxCount:{type:"number",description:"最大视图数量"}}})}}])}();VU.pluginName="kernel-viewer-manage",BU([Yf(Lj)],VU.prototype,"commandService",2),VU=BU([Gf({contrib:mj})],VU);var zU={exports:{}};!function(e,t){var n;e.exports=(n=function(e,t,n,r){var i={features:null,bind:function(e,t,n,r){var i=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[i](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var e=i.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&o.length>0&&(o=parseInt(o[1],10))>=1&&o<8&&(n.isOldIOSPhone=!0)}var a=r.match(/Android\s([0-9\.]*)/),l=a?a[1]:0;(l=parseFloat(l))>=1&&(l<4.4&&(n.isOldAndroid=!0),n.androidVersion=l),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var u,c,s=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],f=0;f<4;f++){t=d[f];for(var h=0;h<3;h++)u=s[h],c=t+(t?u.charAt(0).toUpperCase()+u.slice(1):u),!n[u]&&c in e&&(n[u]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var p=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-p)),r=window.setTimeout((function(){e(t+n)}),n);return p=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=n,n}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,r){t=t.split(" ");for(var i,o=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(i=t[l])if("object"===lr(n)&&n.handleEvent){if(r){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=a;e[o]("on"+i,n["oldIE"+i])}else e[o]("on"+i,n)});var o=this,a=25,l=3,u={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};i.extend(u,r);var c,s,d,f,h,p,v,g,m,y,b,w,_,x,k,C,S,O,E,I,P,M,R,A,j,D,T,F,N,L,B,V,z,H,W,U,G,Y,$,q,K,X,J,Z,Q,ee,te,ne,re,ie,oe,ae,le,ue,ce,se,de=function(){return{x:0,y:0}},fe=de(),he=de(),pe=de(),ve={},ge=0,me={},ye=de(),be=0,we=!0,_e=[],xe={},ke=!1,Ce=function(e,t){i.extend(o,t.publicMethods),_e.push(e)},Se=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},Oe={},Ee=function(e,t){return Oe[e]||(Oe[e]=[]),Oe[e].push(t)},Ie=function(e){var t=Oe[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(o,n)}},Pe=function(){return(new Date).getTime()},Me=function(e){ue=e,o.bg.style.opacity=e*u.bgOpacity},Re=function(e,t,n,r,i){(!ke||i&&i!==o.currItem)&&(r/=i?i.fitRatio:o.currItem.fitRatio),e[M]=w+t+"px, "+n+"px"+_+" scale("+r+")"},Ae=function(e){re&&(e&&(y>o.currItem.fitRatio?ke||(dn(o.currItem,!1,!0),ke=!0):ke&&(dn(o.currItem),ke=!1)),Re(re,pe.x,pe.y,y))},je=function(e){e.container&&Re(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},De=function(e,t){t[M]=w+e+"px, 0px"+_},Te=function(e,t){if(!u.loop&&t){var n=f+(ye.x*ge-e)/ye.x,r=Math.round(e-yt.x);(n<0&&r>0||n>=Qt()-1&&r<0)&&(e=yt.x+r*u.mainScrollEndFriction)}yt.x=e,De(e,h)},Fe=function(e,t){var n=bt[e]-me[e];return he[e]+fe[e]+n-n*(t/b)},Ne=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Le=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Be=null,Ve=function(){Be&&(i.unbind(document,"mousemove",Ve),i.addClass(e,"pswp--has_mouse"),u.mouseUsed=!0,Ie("mouseUsed")),Be=setTimeout((function(){Be=null}),100)},ze=function(){i.bind(document,"keydown",o),B.transform&&i.bind(o.scrollWrap,"click",o),u.mouseUsed||i.bind(document,"mousemove",Ve),i.bind(window,"resize scroll orientationchange",o),Ie("bindEvents")},He=function(){i.unbind(window,"resize scroll orientationchange",o),i.unbind(window,"scroll",m.scroll),i.unbind(document,"keydown",o),i.unbind(document,"mousemove",Ve),B.transform&&i.unbind(o.scrollWrap,"click",o),$&&i.unbind(window,v,o),clearTimeout(V),Ie("unbindEvents")},We=function(e,t){var n=ln(o.currItem,ve,e);return t&&(ne=n),n},Ue=function(e){return e||(e=o.currItem),e.initialZoomLevel},Ge=function(e){return e||(e=o.currItem),e.w>0?u.maxSpreadZoom:1},Ye=function(e,t,n,r){return r===o.currItem.initialZoomLevel?(n[e]=o.currItem.initialPosition[e],!0):(n[e]=Fe(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},$e=function(){if(M){var t=B.perspective&&!A;return w="translate"+(t?"3d(":"("),void(_=B.perspective?", 0px)":")")}M="left",i.addClass(e,"pswp--ie"),De=function(e,t){t.left=e+"px"},je=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,i=t*e.h;n.width=r+"px",n.height=i+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Ae=function(){if(re){var e=re,t=o.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,i=n*t.h;e.width=r+"px",e.height=i+"px",e.left=pe.x+"px",e.top=pe.y+"px"}}},qe=function(e){var t="";u.escKey&&27===e.keyCode?t="close":u.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,o[t]()))},Ke=function(e){e&&(X||K||ie||G)&&(e.preventDefault(),e.stopPropagation())},Xe=function(){o.setScrollOffset(0,i.getScrollY())},Je={},Ze=0,Qe=function(e){Je[e]&&(Je[e].raf&&D(Je[e].raf),Ze--,delete Je[e])},et=function(e){Je[e]&&Qe(e),Je[e]||(Ze++,Je[e]={})},tt=function(){for(var e in Je)Je.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,r,i,o,a){var l,u=Pe();et(e);var c=function(){if(Je[e]){if((l=Pe()-u)>=r)return Qe(e),o(n),void(a&&a());o((n-t)*i(l/r)+t),Je[e].raf=j(c)}};c()},rt={shout:Ie,listen:Ee,viewportSize:ve,options:u,isMainScrollAnimating:function(){return ie},getZoomLevel:function(){return y},getCurrentIndex:function(){return f},isDragging:function(){return $},isZooming:function(){return ee},setScrollOffset:function(e,t){me.x=e,L=me.y=t,Ie("updateScrollOffset",me)},applyZoomPan:function(e,t,n,r){pe.x=t,pe.y=n,y=e,Ae(r)},init:function(){if(!c&&!s){var n;o.framework=i,o.template=e,o.bg=i.getChildByClass(e,"pswp__bg"),T=e.className,c=!0,B=i.detectFeatures(),j=B.raf,D=B.caf,M=B.transform,N=B.oldIE,o.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),o.container=i.getChildByClass(o.scrollWrap,"pswp__container"),h=o.container.style,o.itemHolders=C=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],C[0].el.style.display=C[2].el.style.display="none",$e(),m={resize:o.updateSize,orientationchange:function(){clearTimeout(V),V=setTimeout((function(){ve.x!==o.scrollWrap.clientWidth&&o.updateSize()}),500)},scroll:Xe,keydown:qe,click:Ke};var r=B.isOldIOSPhone||B.isOldAndroid||B.isMobileOpera;for(B.animationName&&B.transform&&!r||(u.showAnimationDuration=u.hideAnimationDuration=0),n=0;n<_e.length;n++)o["init"+_e[n]]();t&&(o.ui=new t(o,i)).init(),Ie("firstUpdate"),f=f||u.index||0,(isNaN(f)||f<0||f>=Qt())&&(f=0),o.currItem=Zt(f),(B.isOldIOSPhone||B.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),u.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),void 0===L&&(Ie("initialLayout"),L=F=i.getScrollY());var a="pswp--open ";for(u.mainClass&&(a+=u.mainClass+" "),u.showHideOpacity&&(a+="pswp--animate_opacity "),a+=A?"pswp--touch":"pswp--notouch",a+=B.animationName?" pswp--css_animation":"",a+=B.svg?" pswp--svg":"",i.addClass(e,a),o.updateSize(),p=-1,be=null,n=0;n<l;n++)De((n+p)*ye.x,C[n].el.style);N||i.bind(o.scrollWrap,g,o),Ee("initialZoomInEnd",(function(){o.setContent(C[0],f-1),o.setContent(C[2],f+1),C[0].el.style.display=C[2].el.style.display="block",u.focus&&e.focus(),ze()})),o.setContent(C[1],f),o.updateCurrItem(),Ie("afterInit"),we||(x=setInterval((function(){Ze||$||ee||y!==o.currItem.initialZoomLevel||o.updateSize()}),1e3)),i.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,s=!0,Ie("close"),He(),en(o.currItem,null,!0,o.destroy))},destroy:function(){Ie("destroy"),qt&&clearTimeout(qt),e.setAttribute("aria-hidden","true"),e.className=T,x&&clearInterval(x),i.unbind(o.scrollWrap,g,o),i.unbind(window,"scroll",o),Ct(),tt(),Oe=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),pe.x=e,pe.y=t,Ae()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=Se(e))-f;be=t,f=e,o.currItem=Zt(f),ge-=t,Te(ye.x*ge),tt(),ie=!1,o.updateCurrItem()},next:function(){o.goTo(f+1)},prev:function(){o.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&Ie("beforeChange",0),C[1].el.children.length){var t=C[1].el.children[0];re=i.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=o.currItem.bounds,b=y=o.currItem.initialZoomLevel,pe.x=ne.center.x,pe.y=ne.center.y,e&&Ie("afterChange")},invalidateCurrItems:function(){k=!0;for(var e=0;e<l;e++)C[e].item&&(C[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&n<2)){o.currItem=Zt(f),ke=!1,Ie("beforeChange",be),n>=l&&(p+=be+(be>0?-3:l),n=l);for(var r=0;r<n;r++)be>0?(t=C.shift(),C[l-1]=t,p++,De((p+2)*ye.x,t.el.style),o.setContent(t,f-n+r+1+1)):(t=C.pop(),C.unshift(t),p--,De(p*ye.x,t.el.style),o.setContent(t,f+n-r-1-1));if(re&&1===Math.abs(be)){var i=Zt(S);i.initialZoomLevel!==y&&(ln(i,ve),dn(i),je(i))}be=0,o.updateCurrZoomItem(),S=f,Ie("afterChange")}}},updateSize:function(t){if(!we&&u.modal){var n=i.getScrollY();if(L!==n&&(e.style.top=n+"px",L=n),!t&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,e.style.height=xe.y+"px"}if(ve.x=o.scrollWrap.clientWidth,ve.y=o.scrollWrap.clientHeight,Xe(),ye.x=ve.x+Math.round(ve.x*u.spacing),ye.y=ve.y,Te(ye.x*ge),Ie("beforeResize"),void 0!==p){for(var r,a,c,s=0;s<l;s++)r=C[s],De((s+p)*ye.x,r.el.style),c=f+s-1,u.loop&&Qt()>2&&(c=Se(c)),(a=Zt(c))&&(k||a.needsUpdate||!a.bounds)?(o.cleanSlide(a),o.setContent(r,c),1===s&&(o.currItem=a,o.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&o.setContent(r,c),a&&a.container&&(ln(a,ve),dn(a),je(a));k=!1}b=y=o.currItem.initialZoomLevel,(ne=o.currItem.bounds)&&(pe.x=ne.center.x,pe.y=ne.center.y,Ae(!0)),Ie("resize")},zoomTo:function(e,t,n,r,o){t&&(b=y,bt.x=Math.abs(t.x)-pe.x,bt.y=Math.abs(t.y)-pe.y,Ne(he,pe));var a=We(e,!1),l={};Ye("x",a,l,e),Ye("y",a,l,e);var u=y,c={x:pe.x,y:pe.y};Le(l);var s=function(t){1===t?(y=e,pe.x=l.x,pe.y=l.y):(y=(e-u)*t+u,pe.x=(l.x-c.x)*t+c.x,pe.y=(l.y-c.y)*t+c.y),o&&o(t),Ae(1===t)};n?nt("customZoomTo",0,1,n,r||i.easing.sine.inOut,s):s(1)}},it=30,ot=10,at={},lt={},ut={},ct={},st={},dt=[],ft={},ht=[],pt={},vt=0,gt=de(),mt=0,yt=de(),bt=de(),wt=de(),_t=function(e,t){return e.x===t.x&&e.y===t.y},xt=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},kt=function(e,t){return pt.x=Math.abs(e.x-t.x),pt.y=Math.abs(e.y-t.y),Math.sqrt(pt.x*pt.x+pt.y*pt.y)},Ct=function(){J&&(D(J),J=null)},St=function(){$&&(J=j(St),zt())},Ot=function(){return!("fit"===u.scaleMode&&y===o.currItem.initialZoomLevel)},Et=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Et(e.parentNode,t))},It={},Pt=function(e,t){return It.prevent=!Et(e.target,u.isClickableElement),Ie("preventDragEvent",e,t,It),It.prevent},Mt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},At=function(e,t,n){if(e-H>50){var r=ht.length>2?ht.shift():{};r.x=t,r.y=n,ht.push(r),H=e}},jt=function(){var e=pe.y-o.currItem.initialPosition.y;return 1-Math.abs(e/(ve.y/2))},Dt={},Tt={},Ft=[],Nt=function(e){for(;Ft.length>0;)Ft.pop();return R?(se=0,dt.forEach((function(e){0===se?Ft[0]=e:1===se&&(Ft[1]=e),se++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Ft[0]=Mt(e.touches[0],Dt),e.touches.length>1&&(Ft[1]=Mt(e.touches[1],Tt))):(Dt.x=e.pageX,Dt.y=e.pageY,Dt.id="",Ft[0]=Dt),Ft},Lt=function(e,t){var n,r,i,a,l=pe[e]+t[e],c=t[e]>0,s=yt.x+t.x,d=yt.x-ft.x;if(n=l>ne.min[e]||l<ne.max[e]?u.panEndFriction:1,l=pe[e]+t[e]*n,(u.allowPanToNext||y===o.currItem.initialZoomLevel)&&(re?"h"!==oe||"x"!==e||K||(c?(l>ne.min[e]&&(n=u.panEndFriction,ne.min[e],r=ne.min[e]-he[e]),(r<=0||d<0)&&Qt()>1?(a=s,d<0&&s>ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(i=l)):(l<ne.max[e]&&(n=u.panEndFriction,ne.max[e],r=he[e]-ne.max[e]),(r<=0||d>0)&&Qt()>1?(a=s,d>0&&s<ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(i=l))):a=s,"x"===e))return void 0!==a&&(Te(a,!0),Z=a!==ft.x),ne.min.x!==ne.max.x&&(void 0!==i?pe.x=i:Z||(pe.x+=t.x*n)),void 0!==a;ie||Z||y>o.currItem.fitRatio&&(pe[e]+=t[e]*n)},Bt=function(e){if(!("mousedown"===e.type&&e.button>0))if(Jt)e.preventDefault();else if(!Y||"mousedown"!==e.type){if(Pt(e,!0)&&e.preventDefault(),Ie("pointerDown"),R){var t=i.arraySearch(dt,e.pointerId,"id");t<0&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Nt(e),r=n.length;Q=null,tt(),$&&1!==r||($=ae=!0,i.bind(window,v,o),U=ce=le=G=Z=X=q=K=!1,oe=null,Ie("firstTouchStart",n),Ne(he,pe),fe.x=fe.y=0,Ne(ct,n[0]),Ne(st,ct),ft.x=ye.x*ge,ht=[{x:ct.x,y:ct.y}],H=z=Pe(),We(y,!0),Ct(),St()),!ee&&r>1&&!ie&&!Z&&(b=y,K=!1,ee=q=!0,fe.y=fe.x=0,Ne(he,pe),Ne(at,n[0]),Ne(lt,n[1]),Rt(at,lt,wt),bt.x=Math.abs(wt.x)-pe.x,bt.y=Math.abs(wt.y)-pe.y,te=kt(at,lt))}},Vt=function(e){if(e.preventDefault(),R){var t=i.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if($){var r=Nt(e);if(oe||X||ee)Q=r;else if(yt.x!==ye.x*ge)oe="h";else{var o=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(o)>=ot&&(oe=o>0?"h":"v",Q=r)}}},zt=function(){if(Q){var e=Q.length;if(0!==e)if(Ne(at,Q[0]),ut.x=at.x-ct.x,ut.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!ut.x&&!ut.y&&_t(Q[1],lt))return;Ne(lt,Q[1]),K||(K=!0,Ie("zoomGestureStarted"));var t=kt(at,lt),n=Yt(t);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ce=!0);var r=1,i=Ue(),a=Ge();if(n<i)if(u.pinchToClose&&!ce&&b<=o.currItem.initialZoomLevel){var l=1-(i-n)/(i/1.2);Me(l),Ie("onPinchClose",l),le=!0}else(r=(i-n)/i)>1&&(r=1),n=i-r*(i/3);else n>a&&((r=(n-a)/(6*i))>1&&(r=1),n=a+r*i);r<0&&(r=0),Rt(at,lt,gt),fe.x+=gt.x-wt.x,fe.y+=gt.y-wt.y,Ne(wt,gt),pe.x=Fe("x",n),pe.y=Fe("y",n),U=n>y,y=n,Ae()}else{if(!oe)return;if(ae&&(ae=!1,Math.abs(ut.x)>=ot&&(ut.x-=Q[0].x-st.x),Math.abs(ut.y)>=ot&&(ut.y-=Q[0].y-st.y)),ct.x=at.x,ct.y=at.y,0===ut.x&&0===ut.y)return;if("v"===oe&&u.closeOnVerticalDrag&&!Ot()){fe.y+=ut.y,pe.y+=ut.y;var c=jt();return G=!0,Ie("onVerticalDrag",c),Me(c),void Ae()}At(Pe(),at.x,at.y),X=!0,ne=o.currItem.bounds,Lt("x",ut)||(Lt("y",ut),Le(pe),Ae())}}},Ht=function(e){if(B.isOldAndroid){if(Y&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(Y),Y=setTimeout((function(){Y=0}),600))}var t;if(Ie("pointerUp"),Pt(e,!1)&&e.preventDefault(),R){var n=i.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,l=Nt(e),c=l.length;if("mouseup"===e.type&&(c=0),2===c)return Q=null,!0;1===c&&Ne(st,l[0]),0!==c||oe||ie||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ie("touchRelease",e,t));var s=-1;if(0===c&&($=!1,i.unbind(window,v,o),Ct(),ee?s=0:-1!==mt&&(s=Pe()-mt)),mt=1===c?Pe():-1,a=-1!==s&&s<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(a="zoomPointerUp"),Ie("zoomGestureEnded")),Q=null,X||K||ie||G)if(tt(),W||(W=Wt()),W.calculateSwipeSpeed("x"),G)if(jt()<u.verticalDragRange)o.close();else{var d=pe.y,f=ue;nt("verticalDrag",0,1,300,i.easing.cubic.out,(function(e){pe.y=(o.currItem.initialPosition.y-d)*e+d,Me((1-f)*e+f),Ae()})),Ie("onVerticalDrag",1)}else{if((Z||ie)&&0===c){if(Gt(a,W))return;a="zoomPointerUp"}ie||("swipe"===a?!Z&&y>o.currItem.fitRatio&&Ut(W):$t())}},Wt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){ht.length>1?(e=Pe()-H+50,t=ht[ht.length-2][r]):(e=Pe()-z,t=st[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(pe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:pe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,pe[e],n.backAnimDestination[e],t||300,i.easing.sine.out,(function(t){pe[e]=t,Ae()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,pe[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Je.zoomPan&&(Je.zoomPan.raf=j(n.panAnimLoop),n.now=Pe(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Ae(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return pe.x=Math.round(pe.x),pe.y=Math.round(pe.y),Ae(),void Qe("zoomPan")}};return n},Ut=function(e){if(e.calculateSwipeSpeed("y"),ne=o.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=Pe(),e.panAnimLoop()},Gt=function(e,t){var n,r,a;if(ie||(vt=f),"swipe"===e){var l=ct.x-st.x,c=t.lastFlickDist.x<10;l>it&&(c||t.lastFlickOffset.x>20)?r=-1:l<-30&&(c||t.lastFlickOffset.x<-20)&&(r=1)}r&&((f+=r)<0?(f=u.loop?Qt()-1:0,a=!0):f>=Qt()&&(f=u.loop?0:Qt()-1,a=!0),a&&!u.loop||(be+=r,ge-=r,n=!0));var s,d=ye.x*ge,h=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(s=Math.abs(t.lastFlickSpeed.x)>0?h/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),s=Math.max(s,250)):s=333,vt===f&&(n=!1),ie=!0,Ie("mainScrollAnimStart"),nt("mainScroll",yt.x,d,s,i.easing.cubic.out,Te,(function(){tt(),ie=!1,vt=-1,(n||vt!==f)&&o.updateCurrItem(),Ie("mainScrollAnimComplete")})),n&&o.updateCurrItem(!0),n},Yt=function(e){return 1/te*e*b},$t=function(){var e=y,t=Ue(),n=Ge();y<t?e=t:y>n&&(e=n);var r,a=1,l=ue;return le&&!U&&!ce&&y<t?(o.close(),!0):(le&&(r=function(e){Me((a-l)*e+l)}),o.zoomTo(e,0,200,i.easing.cubic.out,r),!0)};Ce("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,i){O=e+t,E=e+n,I=e+r,P=i?e+i:""};(R=B.pointerEvent)&&B.touch&&(B.touch=!1),R?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):B.touch?(e("touch","start","move","end","cancel"),A=!0):e("mouse","down","move","up"),v=E+" "+I+" "+P,g=O,R&&!A&&(A=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=A,m[O]=Bt,m[E]=Vt,m[I]=Ht,P&&(m[P]=m[I]),B.touch&&(g+=" mousedown",v+=" mousemove mouseup",m.mousedown=m[O],m.mousemove=m[E],m.mouseup=m[I]),A||(u.allowPanToNext=!1)}}});var qt,Kt,Xt,Jt,Zt,Qt,en=function(t,n,r,a){var l;qt&&clearTimeout(qt),Jt=!0,Xt=!0,t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=u.getThumbBoundsFn&&u.getThumbBoundsFn(f);var c,s,h=r?u.hideAnimationDuration:u.showAnimationDuration,p=function(){Qe("initialZoom"),r?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(Me(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),Ie("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Jt=!1};if(!h||!l||void 0===l.x)return Ie("initialZoom"+(r?"Out":"In")),y=t.initialZoomLevel,Ne(pe,t.initialPosition),Ae(),e.style.opacity=r?0:1,Me(1),void(h?setTimeout((function(){p()}),h):p());c=d,s=!o.currItem.src||o.currItem.loadError||u.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(y=l.w/t.w,pe.x=l.x,pe.y=l.y-F,o[s?"template":"bg"].style.opacity=.001,Ae()),et("initialZoom"),r&&!c&&i.removeClass(e,"pswp--animated-in"),s&&(r?i[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){i.addClass(e,"pswp--animate_opacity")}),30)),qt=setTimeout((function(){if(Ie("initialZoom"+(r?"Out":"In")),r){var n=l.w/t.w,o={x:pe.x,y:pe.y},a=y,u=ue,d=function(t){1===t?(y=n,pe.x=l.x,pe.y=l.y-L):(y=(n-a)*t+a,pe.x=(l.x-o.x)*t+o.x,pe.y=(l.y-L-o.y)*t+o.y),Ae(),s?e.style.opacity=1-t:Me(u-t*u)};c?nt("initialZoom",0,1,h,i.easing.cubic.out,d,p):(d(1),qt=setTimeout(p,h+20))}else y=t.initialZoomLevel,Ne(pe,t.initialPosition),Ae(),Me(1),s?e.style.opacity=1:Me(1),qt=setTimeout(p,h+20)}),r?25:90)},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Kt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),Ie("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var i=tn.x/e.w,o=tn.y/e.h;e.fitRatio=i<o?i:o;var a=u.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}if(!n)return;return an(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},un=function(e,t,n,r,i,a){t.loadError||r&&(t.imageAppended=!0,dn(t,r,t===o.currItem&&ke),n.appendChild(r),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=i.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},sn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=u.errorMsg.replace("%url%",e.src),!0},dn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),i=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=i+"px"),t.style.width=r+"px",t.style.height=i+"px"}},fn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&un(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Ce("Controller",{publicMethods:{lazyLoadItem:function(e){e=Se(e);var t=Zt(e);t&&(!t.loaded&&!t.loading||k)&&(Ie("gettingData",e,t),t.src&&cn(t))},initController:function(){i.extend(u,rn,!0),o.items=Kt=n,Zt=o.getItemAt,Qt=u.getNumItemsFn,u.loop,Qt()<3&&(u.loop=!1),Ee("beforeChange",(function(e){var t,n=u.preload,r=null===e||e>=0,i=Math.min(n[0],Qt()),a=Math.min(n[1],Qt());for(t=1;t<=(r?a:i);t++)o.lazyLoadItem(f+t);for(t=1;t<=(r?i:a);t++)o.lazyLoadItem(f-t)})),Ee("initialLayout",(function(){o.currItem.initialLayout=u.getThumbBoundsFn&&u.getThumbBoundsFn(f)})),Ee("mainScrollAnimComplete",fn),Ee("initialZoomInEnd",fn),Ee("destroy",(function(){for(var e,t=0;t<Kt.length;t++)(e=Kt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==Kt[e]&&Kt[e]},allowProgressiveImg:function(){return u.forceProgressiveLoading||!A||u.mouseUsed||screen.width>1200},setContent:function(e,t){u.loop&&(t=Se(t));var n=o.getItemAt(e.index);n&&(n.container=null);var r,a=o.getItemAt(t);if(a){Ie("gettingData",t,a),e.index=t,e.item=a;var l=a.container=i.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?l.appendChild(a.html):l.innerHTML=a.html),sn(a),ln(a,ve),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((r=i.createEl("pswp__img","img")).style.opacity=1,r.src=a.src,dn(a,r),un(t,a,l,r));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(sn(n,!0))return n.loadComplete=n.img=null,ln(n,ve),je(n),void(e.index===f&&o.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):B.transform&&(ie||Jt)?nn.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):un(t,n,l,n.img,ie||Jt,!0)}n.loadComplete=null,n.img=null,Ie("imageLoadComplete",t,n)}},i.features.transform){var s="pswp__img pswp__img--placeholder";s+=a.msrc?"":" pswp__img--placeholder--blank";var d=i.createEl(s,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),dn(a,d),l.appendChild(d),a.placeholder=d}a.loading||cn(a),o.allowProgressiveImg()&&(!Xt&&B.transform?nn.push({item:a,baseDiv:l,img:a.img,index:t,holder:e}):un(t,a,l,a.img,!0,!0))}Xt||t!==f?je(a):(re=l.style,en(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(l)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,pn,vn={},gn=function(e,t,n){var r=document.createEvent("CustomEvent"),i={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,i),e.target.dispatchEvent(r)};Ce("Tap",{publicMethods:{initTap:function(){Ee("firstTouchStart",o.onTapStart),Ee("touchRelease",o.onTapRelease),Ee("destroy",(function(){vn={},hn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!X&&!q&&!Ze){var n=t;if(hn&&(clearTimeout(hn),hn=null,xt(n,vn)))return void Ie("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||i.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);Ne(vn,n),hn=setTimeout((function(){gn(e,t),hn=null}),300)}}}}),Ce("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(A?Ee("mouseUsed",(function(){o.setupDesktopZoom()})):o.setupDesktopZoom(!0))},setupDesktopZoom:function(t){pn={};var n="wheel mousewheel DOMMouseScroll";Ee("bindEvents",(function(){i.bind(e,n,o.handleMouseWheel)})),Ee("unbindEvents",(function(){pn&&i.unbind(e,n,o.handleMouseWheel)})),o.mouseZoomedIn=!1;var r,a=function(){o.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),o.mouseZoomedIn=!1),y<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),l()},l=function(){r&&(i.removeClass(e,"pswp--dragging"),r=!1)};Ee("resize",a),Ee("afterChange",a),Ee("pointerDown",(function(){o.mouseZoomedIn&&(r=!0,i.addClass(e,"pswp--dragging"))})),Ee("pointerUp",l),t||a()},handleMouseWheel:function(e){if(y<=o.currItem.fitRatio)return u.modal&&(!u.closeOnScroll||Ze||$?e.preventDefault():M&&Math.abs(e.deltaY)>2&&(d=!0,o.close())),!0;if(e.stopPropagation(),pn.x=0,"deltaX"in e)1===e.deltaMode?(pn.x=18*e.deltaX,pn.y=18*e.deltaY):(pn.x=e.deltaX,pn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(pn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?pn.y=-.16*e.wheelDeltaY:pn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;pn.y=e.detail}We(y,!0);var t=pe.x-pn.x,n=pe.y-pn.y;(u.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),o.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ve.x/2+me.x,y:ve.y/2+me.y};var n=u.getDoubleTapZoom(!0,o.currItem),r=y===n;o.mouseZoomedIn=!r,o.zoomTo(r?o.currItem.initialZoomLevel:n,t,333),i[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,yn,bn,wn,_n,xn,kn,Cn,Sn,On,En,In,Pn={history:!0,galleryUID:1},Mn=function(){return En.hash.substring(1)},Rn=function(){mn&&clearTimeout(mn),bn&&clearTimeout(bn)},An=function(){var e=Mn(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var i=r[n].split("=");i.length<2||(t[i[0]]=i[1])}if(u.galleryPIDs){var o=t.pid;for(t.pid=0,n=0;n<Kt.length;n++)if(Kt[n].pid===o){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},jn=function(){if(bn&&clearTimeout(bn),Ze||$)bn=setTimeout(jn,500);else{wn?clearTimeout(yn):wn=!0;var e=f+1,t=Zt(f);t.hasOwnProperty("pid")&&(e=t.pid);var n=kn+"&gid="+u.galleryUID+"&pid="+e;Cn||-1===En.hash.indexOf(n)&&(On=!0);var r=En.href.split("#")[0]+"#"+n;In?"#"+n!==window.location.hash&&history[Cn?"replaceState":"pushState"]("",document.title,r):Cn?En.replace(r):En.hash=n,Cn=!0,yn=setTimeout((function(){wn=!1}),60)}};Ce("History",{publicMethods:{initHistory:function(){if(i.extend(u,Pn,!0),u.history){En=window.location,On=!1,Sn=!1,Cn=!1,kn=Mn(),In="pushState"in history,kn.indexOf("gid=")>-1&&(kn=(kn=kn.split("&gid=")[0]).split("?gid=")[0]),Ee("afterChange",o.updateURL),Ee("unbindEvents",(function(){i.unbind(window,"hashchange",o.onHashChange)}));var e=function(){xn=!0,Sn||(On?history.back():kn?En.hash=kn:In?history.pushState("",document.title,En.pathname+En.search):En.hash=""),Rn()};Ee("unbindEvents",(function(){d&&e()})),Ee("destroy",(function(){xn||e()})),Ee("firstUpdate",(function(){f=An().pid}));var t=kn.indexOf("pid=");t>-1&&"&"===(kn=kn.substring(0,t)).slice(-1)&&(kn=kn.slice(0,-1)),setTimeout((function(){c&&i.bind(window,"hashchange",o.onHashChange)}),40)}},onHashChange:function(){if(Mn()===kn)return Sn=!0,void o.close();wn||(_n=!0,o.goTo(An().pid),_n=!1)},updateURL:function(){Rn(),_n||(Cn?mn=setTimeout(jn,800):jn())}}}),i.extend(o,rt)},n)}(zU);const HU=Un(zU.exports);var WU={exports:{}},UU={},GU="function"==typeof Symbol&&Symbol.for,YU=GU?Symbol.for("react.element"):60103,$U=GU?Symbol.for("react.portal"):60106,qU=GU?Symbol.for("react.fragment"):60107,KU=GU?Symbol.for("react.strict_mode"):60108,XU=GU?Symbol.for("react.profiler"):60114,JU=GU?Symbol.for("react.provider"):60109,ZU=GU?Symbol.for("react.context"):60110,QU=GU?Symbol.for("react.async_mode"):60111,eG=GU?Symbol.for("react.concurrent_mode"):60111,tG=GU?Symbol.for("react.forward_ref"):60112,nG=GU?Symbol.for("react.suspense"):60113,rG=GU?Symbol.for("react.suspense_list"):60120,iG=GU?Symbol.for("react.memo"):60115,oG=GU?Symbol.for("react.lazy"):60116,aG=GU?Symbol.for("react.block"):60121,lG=GU?Symbol.for("react.fundamental"):60117,uG=GU?Symbol.for("react.responder"):60118,cG=GU?Symbol.for("react.scope"):60119;function sG(e){if("object"===lr(e)&&null!==e){var t=e.$$typeof;switch(t){case YU:switch(e=e.type){case QU:case eG:case qU:case XU:case KU:case nG:return e;default:switch(e=e&&e.$$typeof){case ZU:case tG:case oG:case iG:case JU:return e;default:return t}}case $U:return t}}}function dG(e){return sG(e)===eG}UU.AsyncMode=QU,UU.ConcurrentMode=eG,UU.ContextConsumer=ZU,UU.ContextProvider=JU,UU.Element=YU,UU.ForwardRef=tG,UU.Fragment=qU,UU.Lazy=oG,UU.Memo=iG,UU.Portal=$U,UU.Profiler=XU,UU.StrictMode=KU,UU.Suspense=nG,UU.isAsyncMode=function(e){return dG(e)||sG(e)===QU},UU.isConcurrentMode=dG,UU.isContextConsumer=function(e){return sG(e)===ZU},UU.isContextProvider=function(e){return sG(e)===JU},UU.isElement=function(e){return"object"===lr(e)&&null!==e&&e.$$typeof===YU},UU.isForwardRef=function(e){return sG(e)===tG},UU.isFragment=function(e){return sG(e)===qU},UU.isLazy=function(e){return sG(e)===oG},UU.isMemo=function(e){return sG(e)===iG},UU.isPortal=function(e){return sG(e)===$U},UU.isProfiler=function(e){return sG(e)===XU},UU.isStrictMode=function(e){return sG(e)===KU},UU.isSuspense=function(e){return sG(e)===nG},UU.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===qU||e===eG||e===XU||e===KU||e===nG||e===rG||"object"===lr(e)&&null!==e&&(e.$$typeof===oG||e.$$typeof===iG||e.$$typeof===JU||e.$$typeof===ZU||e.$$typeof===tG||e.$$typeof===lG||e.$$typeof===uG||e.$$typeof===cG||e.$$typeof===aG)},UU.typeOf=sG,WU.exports=UU;var fG=WU.exports,hG={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vG={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gG={};function mG(e){return fG.isMemo(e)?vG:gG[e.$$typeof]||hG}gG[fG.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gG[fG.Memo]=vG;var yG=Object.defineProperty,bG=Object.getOwnPropertyNames,wG=Object.getOwnPropertySymbols,_G=Object.getOwnPropertyDescriptor,xG=Object.getPrototypeOf,kG=Object.prototype;var CG=function e(t,n,r){if("string"!=typeof n){if(kG){var i=xG(n);i&&i!==kG&&e(t,i,r)}var o=bG(n);wG&&(o=o.concat(wG(n)));for(var a=mG(t),l=mG(n),u=0;u<o.length;++u){var c=o[u];if(!(pG[c]||r&&r[c]||l&&l[c]||a&&a[c])){var s=_G(n,c);try{yG(t,c,s)}catch(e){}}}}return t};const SG=Un(CG);var OG={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,TAB:9,BACKSPACE:8,DELETE:46,DEL:46,END:35,SPACE:32},EG=function(e){return e.ESC="Escape",e.LEFT="ArrowLeft",e.UP="ArrowUp",e.RIGHT="ArrowRight",e.DOWN="ArrowDown",e.ENTER="Enter",e.TAB="Tab",e.SPACE=" ",e.DEL="Backspace",e.BACKSPACE="Backspace",e}(EG||{});function IG(e){var t=e.metaKey,n=e.ctrlKey,r=e.keyCode;return!t&&!n&&32!==r&&(r>=65&&r<=90||r>=48&&r<=57||r>=96&&r<=105||r>=186&&r<=192||r>=219&&r<=222||r>=106&&r<=111||32===r||61===r||173===r||(229===r||0===r)&&"Shift"!==e.key)}function PG(e,t,n){for(var r=0,i=t>0?1:-1;Math.abs(r)<Math.abs(t)&&!1!==n(e+r);)r+=i}function MG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||AG(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RG(e){return function(e){if(Array.isArray(e))return jG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||AG(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AG(e,t){if(e){if("string"==typeof e)return jG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jG(e,t):void 0}}function jG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var DG=u.a.createContext(null);function TG(e,t){var n={rafId:null,timeoutId:null};return n.rafId=window.requestAnimationFrame((function(){n.timeoutId=setTimeout(e,t)})),n}function FG(e){var t=e.timeoutId,n=e.rafId;window.clearTimeout(t),window.cancelAnimationFrame(n)}function NG(e,t){return function(n){var r=u.a.useContext(DG),i=(null==r?void 0:r.register)||TG,o=null==r?void 0:r.next,a=(null==r?void 0:r.cleanUp)||FG,l=MG(u.a.useState(!1),2),c=l[0],s=l[1];return u.a.useEffect((function(){var e=i((function(){return s(!0)}));return function(){return a(e)}}),[]),u.a.useEffect((function(){c&&"function"==typeof o&&o()}),[c]),c?u.a.createElement(e,n):(null==t?void 0:t.fallback)||null}}function LG(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function BG(e,t){return e(t={exports:{}},t.exports),t.exports}var VG=BG((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,s=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===lr(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case d:case o:case l:case a:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===d}t.typeOf=w,t.AsyncMode=s,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=l,t.StrictMode=a,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===l||e===a||e===h||e===p||"object"===lr(e)&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===m||e.$$typeof===y||e.$$typeof===b)},t.isAsyncMode=function(e){return _(e)||w(e)===s},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===lr(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===l},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===h}}));LG(VG),VG.typeOf,VG.AsyncMode,VG.ConcurrentMode,VG.ContextConsumer,VG.ContextProvider,VG.Element,VG.ForwardRef,VG.Fragment,VG.Lazy,VG.Memo,VG.Portal,VG.Profiler,VG.StrictMode,VG.Suspense,VG.isValidElementType,VG.isAsyncMode,VG.isConcurrentMode,VG.isContextConsumer,VG.isContextProvider,VG.isElement,VG.isForwardRef,VG.isFragment,VG.isLazy,VG.isMemo,VG.isPortal,VG.isProfiler,VG.isStrictMode,VG.isSuspense;var zG=BG((function(e,t){}));LG(zG),zG.typeOf,zG.AsyncMode,zG.ConcurrentMode,zG.ContextConsumer,zG.ContextProvider,zG.Element,zG.ForwardRef,zG.Fragment,zG.Lazy,zG.Memo,zG.Portal,zG.Profiler,zG.StrictMode,zG.Suspense,zG.isValidElementType,zG.isAsyncMode,zG.isConcurrentMode,zG.isContextConsumer,zG.isContextProvider,zG.isElement,zG.isForwardRef,zG.isFragment,zG.isLazy,zG.isMemo,zG.isPortal,zG.isProfiler,zG.isStrictMode,zG.isSuspense,BG((function(e){e.exports=VG}));Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()||Object.assign;function HG(){}function WG(){}Function.call.bind(Object.prototype.hasOwnProperty),WG.resetWarningCache=HG;var UG=BG((function(e){e.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WG,resetWarningCache:HG};return n.PropTypes=n,n}()})),GG=0,YG=1,$G=2,qG="sequential",KG="sync",XG="async-concurrent";function JG(e){var t=e.delay,n=void 0===t?0:t,r=e.batchSize,i=e.mode,o=void 0===i?qG:i,a=e.children,l=u.a.useRef(GG),c=u.a.useRef(0),s=u.a.useRef([]),d=u.a.useRef([]),f=u.a.useRef(n);f.current!==n&&(f.current=n);var h=u.a.useRef(o);h.current!==o&&(h.current=o);var p=u.a.useRef(r);function v(e){s.current=s.current.filter((function(t){return t.index!==e.index})),d.current=d.current.filter((function(t){return t.index!==e.index})),0===d.current.length&&l.current!==YG&&(l.current=GG,b())}function g(e){e.work(),e.done=!0,v(e)}function m(){l.current!==YG&&(l.current=$G,d.current.forEach((function(e){e.rafId=window.requestAnimationFrame((function(){e.timeoutId=setTimeout((function(){return g(e)}),f.current)}))})))}function y(){l.current!==YG&&(l.current=$G,d.current.forEach(g))}function b(){l.current===GG&&s.current.length>0&&function(){if(0!==s.current.length)if(l.current=$G,h.current===qG){if(0===d.current.length){var e=s.current[0];e.ready=!0,d.current.push(e)}m()}else if(h.current===KG){if(0===d.current.length){var t,n=s.current.slice(0,p.current||s.current.length);(t=d.current).push.apply(t,RG(n)),d.current.forEach((function(e){e.ready=!0}))}setTimeout(y,f.current)}else if(h.current===XG){if(0===d.current.length){var r,i=s.current.slice(0,p.current||s.current.length);(r=d.current).push.apply(r,RG(i)),d.current.forEach((function(e){e.ready=!0}))}m()}}()}return p.current!==r&&(p.current=r),u.a.useEffect((function(){b()})),u.a.createElement(DG.Provider,{value:{next:b,pause:function(){l.current=YG},resume:function(){l.current=GG,b()},cleanUp:function(e){var t=d.current.find((function(t){return t.index===e}));t&&t.ready&&!t.done&&(window.cancelAnimationFrame(null==t?void 0:t.rafId),clearTimeout(null==t?void 0:t.timeoutId)),v({index:e})},register:function(e){var t=function(e,t){return{work:e,index:t,ready:!1,done:!1,timeoutId:null,rafId:null}}(e,++c.current);return s.current.push(t),1===s.current.length&&setTimeout(b),t.index}}},a)}function ZG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QG(){return QG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ch(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},QG.apply(null,arguments)}function eY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eY=function(){return!!e})()}function tY(e){var t="function"==typeof Map?new Map:void 0;return tY=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(eY())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Sh(i,n.prototype),i}(e,arguments,Ch(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Sh(n,e)},tY(e)}function nY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||es(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}JG.propTypes={children:UG.any,delay:UG.number,batchSize:UG.number,mode:UG.oneOf(["sequential","sync","async-concurrent"])};var iY="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function oY(e){var t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function aY(e){return"nodeType"in e}function lY(e){var t,n;return e?oY(e)?e:aY(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function uY(e){return e instanceof lY(e).Document}function cY(e){return!oY(e)&&e instanceof lY(e).HTMLElement}function sY(e){return e instanceof lY(e).SVGElement}function dY(e){return e?oY(e)?e.document:aY(e)?uY(e)?e:cY(e)||sY(e)?e.ownerDocument:document:document:document}var fY=iY?l.useLayoutEffect:l.useEffect;function hY(e){var t=Object(l.useRef)(e);return fY((function(){t.current=e})),Object(l.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current.apply(t,n)}),[])}function pY(e,t){void 0===t&&(t=[e]);var n=Object(l.useRef)(e);return fY((function(){n.current!==e&&(n.current=e)}),t),n}function vY(e,t){var n=Object(l.useRef)();return Object(l.useMemo)((function(){var t=e(n.current);return n.current=t,t}),ts(t))}function gY(e){var t=hY(e),n=Object(l.useRef)(null),r=Object(l.useCallback)((function(e){e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function mY(e){var t=Object(l.useRef)();return Object(l.useEffect)((function(){t.current=e}),[e]),t.current}var yY={};function bY(e,t){return Object(l.useMemo)((function(){if(t)return t;var n=null==yY[e]?0:yY[e]+1;return yY[e]=n,e+"-"+n}),[e,t])}function wY(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((function(t,n){for(var r=0,i=Object.entries(n);r<i.length;r++){var o=nY(i[r],2),a=o[0],l=o[1],u=t[a];null!=u&&(t[a]=u+e*l)}return t}),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rY(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}}var _Y=wY(1),xY=wY(-1);function kY(e){if(!e)return!1;var t=lY(e.target).KeyboardEvent;return t&&e instanceof t}function CY(e){if(function(e){if(!e)return!1;var t=lY(e.target).TouchEvent;return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){var t=e.touches[0];return{x:t.clientX,y:t.clientY}}if(e.changedTouches&&e.changedTouches.length){var n=e.changedTouches[0];return{x:n.clientX,y:n.clientY}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}var SY=Object.freeze({Translate:{toString:function(e){if(e){var t=e.x,n=e.y;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}}},Scale:{toString:function(e){if(e)return"scaleX("+e.scaleX+") scaleY("+e.scaleY+")"}},Transform:{toString:function(e){if(e)return[SY.Translate.toString(e),SY.Scale.toString(e)].join(" ")}},Transition:{toString:function(e){return e.property+" "+e.duration+"ms "+e.easing}}}),OY="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EY(e){return e.matches(OY)?e:e.querySelector(OY)}var IY={display:"none"};function PY(e){var t=e.id,n=e.value;return u.a.createElement("div",{id:t,style:IY},n)}function MY(e){var t=e.id,n=e.announcement,r=e.ariaLiveType,i=void 0===r?"assertive":r;return u.a.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},n)}var RY=["transform"],AY=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],jY=["active","dragOverlay","transform"];function DY(e,t,n){return t=Ch(t),kh(e,TY()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function TY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TY=function(){return!!e})()}function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FY(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LY(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return BY(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BY(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function BY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var VY=Object(l.createContext)(null);var zY,HY,WY={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},UY={onDragStart:function(e){return"Picked up draggable item "+e.active.id+"."},onDragOver:function(e){var t=e.active,n=e.over;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd:function(e){var t=e.active,n=e.over;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel:function(e){return"Dragging was cancelled. Draggable item "+e.active.id+" was dropped."}};function GY(e){var t,n,r=e.announcements,i=void 0===r?UY:r,o=e.container,a=e.hiddenTextDescribedById,s=e.screenReaderInstructions,d=void 0===s?WY:s,f=function(){var e=nY(Object(l.useState)(""),2),t=e[0],n=e[1],r=Object(l.useCallback)((function(e){null!=e&&n(e)}),[]);return{announce:r,announcement:t}}(),h=f.announce,p=f.announcement,v=bY("DndLiveRegion"),g=nY(Object(l.useState)(!1),2),m=g[0],y=g[1];if(Object(l.useEffect)((function(){y(!0)}),[]),t=Object(l.useMemo)((function(){return{onDragStart:function(e){var t=e.active;h(i.onDragStart({active:t}))},onDragMove:function(e){var t=e.active,n=e.over;i.onDragMove&&h(i.onDragMove({active:t,over:n}))},onDragOver:function(e){var t=e.active,n=e.over;h(i.onDragOver({active:t,over:n}))},onDragEnd:function(e){var t=e.active,n=e.over;h(i.onDragEnd({active:t,over:n}))},onDragCancel:function(e){var t=e.active,n=e.over;h(i.onDragCancel({active:t,over:n}))}}}),[h,i]),n=Object(l.useContext)(VY),Object(l.useEffect)((function(){if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(t)}),[t,n]),!m)return null;var b=u.a.createElement(u.a.Fragment,null,u.a.createElement(PY,{id:a,value:d.draggable}),u.a.createElement(MY,{id:v,announcement:p}));return o?Object(c.createPortal)(b,o):b}function YY(){}function $Y(e,t){return Object(l.useMemo)((function(){return{sensor:e,options:null!=t?t:{}}}),[e,t])}function qY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(l.useMemo)((function(){return[].concat(t).filter((function(e){return null!=e}))}),[].concat(t))}(HY=zY||(zY={})).DragStart="dragStart",HY.DragMove="dragMove",HY.DragEnd="dragEnd",HY.DragCancel="dragCancel",HY.DragOver="dragOver",HY.RegisterDroppable="registerDroppable",HY.SetDroppableDisabled="setDroppableDisabled",HY.UnregisterDroppable="unregisterDroppable";var KY=Object.freeze({x:0,y:0});function XY(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JY(e,t){var n=CY(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function ZY(e,t){return e.data.value-t.data.value}function QY(e,t){var n=e.data.value;return t.data.value-n}function e$(e,t){return e&&0!==e.length?nY(e,1)[0][t]:null}function t$(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}var n$=function(e){var t,n=e.collisionRect,r=e.droppableRects,i=e.droppableContainers,o=t$(n,n.left,n.top),a=[],l=LY(i);try{for(l.s();!(t=l.n()).done;){var u=t.value,c=u.id,s=r.get(c);if(s){var d=XY(t$(s),o);a.push({id:c,data:{droppableContainer:u,value:d}})}}}catch(e){l.e(e)}finally{l.f()}return a.sort(ZY)};function r$(e,t){var n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=o-n;if(r<i&&n<o){var u=t.width*t.height,c=e.width*e.height,s=a*l;return Number((s/(u+c-s)).toFixed(4))}return 0}var i$=function(e){var t,n=e.collisionRect,r=e.droppableRects,i=[],o=LY(e.droppableContainers);try{for(o.s();!(t=o.n()).done;){var a=t.value,l=a.id,u=r.get(l);if(u){var c=r$(u,n);c>0&&i.push({id:l,data:{droppableContainer:a,value:c}})}}}catch(e){o.e(e)}finally{o.f()}return i.sort(QY)};function o$(e,t){var n=t.top,r=t.left,i=t.bottom,o=t.right;return n<=e.y&&e.y<=i&&r<=e.x&&e.x<=o}function a$(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:KY}function l$(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((function(t,n){return NY(NY({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})}),NY({},t))}}var u$=l$(1);function c$(e){if(e.startsWith("matrix3d(")){var t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){var n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}var s$,d$,f$={ignoreTransform:!1};function h$(e,t){void 0===t&&(t=f$);var n=e.getBoundingClientRect();if(t.ignoreTransform){var r=lY(e).getComputedStyle(e),i=r.transform,o=r.transformOrigin;i&&(n=function(e,t,n){var r=c$(t);if(!r)return e;var i=r.scaleX,o=r.scaleY,a=r.x,l=r.y,u=e.left-a-(1-i)*parseFloat(n),c=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),s=i?e.width/i:e.width,d=o?e.height/o:e.height;return{width:s,height:d,top:c,right:u+s,bottom:c+d,left:u}}(n,i,o))}var a=n;return{top:a.top,left:a.left,width:a.width,height:a.height,bottom:a.bottom,right:a.right}}function p$(e){return h$(e,{ignoreTransform:!0})}function v$(e,t){var n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(uY(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!cY(i)||sY(i))return n;if(n.includes(i))return n;var o=lY(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=lY(e).getComputedStyle(e));var n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((function(e){var r=t[e];return"string"==typeof r&&n.test(r)}))}(i,o)&&n.push(i),function(e,t){return void 0===t&&(t=lY(e).getComputedStyle(e)),"fixed"===t.position}(i,o)?n:r(i.parentNode)}(e):n}function g$(e){var t=nY(v$(e,1),1)[0];return null!=t?t:null}function m$(e){return iY&&e?oY(e)?e:aY(e)?uY(e)||e===dY(e).scrollingElement?window:cY(e)?e:null:null:null}function y$(e){return oY(e)?e.scrollX:e.scrollLeft}function b$(e){return oY(e)?e.scrollY:e.scrollTop}function w$(e){return{x:y$(e),y:b$(e)}}function _$(e){return!(!iY||!e)&&e===document.scrollingElement}function x$(e){var t={x:0,y:0},n=_$(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(d$=s$||(s$={}))[d$.Forward=1]="Forward",d$[d$.Backward=-1]="Backward";var k$={x:.2,y:.2};function C$(e,t,n,r,i){var o=n.top,a=n.left,l=n.right,u=n.bottom;void 0===r&&(r=10),void 0===i&&(i=k$);var c=x$(e),s=c.isTop,d=c.isBottom,f=c.isLeft,h=c.isRight,p={x:0,y:0},v={x:0,y:0},g=t.height*i.y,m=t.width*i.x;return!s&&o<=t.top+g?(p.y=s$.Backward,v.y=r*Math.abs((t.top+g-o)/g)):!d&&u>=t.bottom-g&&(p.y=s$.Forward,v.y=r*Math.abs((t.bottom-g-u)/g)),!h&&l>=t.right-m?(p.x=s$.Forward,v.x=r*Math.abs((t.right-m-l)/m)):!f&&a<=t.left+m&&(p.x=s$.Backward,v.x=r*Math.abs((t.left+m-a)/m)),{direction:p,speed:v}}function S$(e){if(e===document.scrollingElement){var t=window,n=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}var i=e.getBoundingClientRect();return{top:i.top,left:i.left,right:i.right,bottom:i.bottom,width:e.clientWidth,height:e.clientHeight}}function O$(e){return e.reduce((function(e,t){return _Y(e,w$(t))}),KY)}function E$(e,t){if(void 0===t&&(t=h$),e){var n=t(e),r=n.top,i=n.left,o=n.bottom,a=n.right;g$(e)&&(o<=0||a<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}}var I$,P$,M$,R$,A$=[["x",["left","right"],function(e){return e.reduce((function(e,t){return e+y$(t)}),0)}],["y",["top","bottom"],function(e){return e.reduce((function(e,t){return e+b$(t)}),0)}]],j$=ls((function e(t,n){var r=this;us(this,e),this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;var i=v$(n),o=O$(i);this.rect=NY({},t),this.width=t.width,this.height=t.height;for(var a=function(){var e,t=nY(u[l],3),n=t[0],a=t[1],c=t[2],s=LY(a);try{var d=function(){var t=e.value;Object.defineProperty(r,t,{get:function(){var e=c(i),a=o[n]-e;return r.rect[t]+a},enumerable:!0})};for(s.s();!(e=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}},l=0,u=A$;l<u.length;l++)a();Object.defineProperty(this,"rect",{enumerable:!1})})),D$=function(){return ls((function e(t){var n=this;us(this,e),this.target=void 0,this.listeners=[],this.removeAll=function(){n.listeners.forEach((function(e){var t,r;return null==(r=n.target)?void 0:(t=r).removeEventListener.apply(t,ts(e))}))},this.target=t}),[{key:"add",value:function(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}])}();function T$(e,t){var n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(Math.pow(n,2)+Math.pow(r,2))>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function F$(e){e.preventDefault()}function N$(e){e.stopPropagation()}(P$=I$||(I$={})).Click="click",P$.DragStart="dragstart",P$.Keydown="keydown",P$.ContextMenu="contextmenu",P$.Resize="resize",P$.SelectionChange="selectionchange",P$.VisibilityChange="visibilitychange",(R$=M$||(M$={})).Space="Space",R$.Down="ArrowDown",R$.Right="ArrowRight",R$.Left="ArrowLeft",R$.Up="ArrowUp",R$.Esc="Escape",R$.Enter="Enter",R$.Tab="Tab";var L$={start:[M$.Space,M$.Enter],cancel:[M$.Esc],end:[M$.Space,M$.Enter,M$.Tab]},B$=function(e,t){var n=t.currentCoordinates;switch(e.code){case M$.Right:return NY(NY({},n),{},{x:n.x+25});case M$.Left:return NY(NY({},n),{},{x:n.x-25});case M$.Down:return NY(NY({},n),{},{y:n.y+25});case M$.Up:return NY(NY({},n),{},{y:n.y-25})}},V$=function(){return ls((function e(t){us(this,e),this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;var n=t.event.target;this.props=t,this.listeners=new D$(dY(n)),this.windowListeners=new D$(lY(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}),[{key:"attach",value:function(){var e=this;this.handleStart(),this.windowListeners.add(I$.Resize,this.handleCancel),this.windowListeners.add(I$.VisibilityChange,this.handleCancel),setTimeout((function(){return e.listeners.add(I$.Keydown,e.handleKeyDown)}))}},{key:"handleStart",value:function(){var e=this.props,t=e.activeNode,n=e.onStart,r=t.node.current;r&&E$(r),n(KY)}},{key:"handleKeyDown",value:function(e){if(kY(e)){var t=this.props,n=t.active,r=t.context,i=t.options,o=i.keyboardCodes,a=void 0===o?L$:o,l=i.coordinateGetter,u=void 0===l?B$:l,c=i.scrollBehavior,s=void 0===c?"smooth":c,d=e.code;if(a.end.includes(d))return void this.handleEnd(e);if(a.cancel.includes(d))return void this.handleCancel(e);var f=r.current.collisionRect,h=f?{x:f.left,y:f.top}:KY;this.referenceCoordinates||(this.referenceCoordinates=h);var p=u(e,{active:n,context:r.current,currentCoordinates:h});if(p){var v,g=xY(p,h),m={x:0,y:0},y=LY(r.current.scrollableAncestors);try{for(y.s();!(v=y.n()).done;){var b=v.value,w=e.code,_=x$(b),x=_.isTop,k=_.isRight,C=_.isLeft,S=_.isBottom,O=_.maxScroll,E=_.minScroll,I=S$(b),P={x:Math.min(w===M$.Right?I.right-I.width/2:I.right,Math.max(w===M$.Right?I.left:I.left+I.width/2,p.x)),y:Math.min(w===M$.Down?I.bottom-I.height/2:I.bottom,Math.max(w===M$.Down?I.top:I.top+I.height/2,p.y))},M=w===M$.Right&&!k||w===M$.Left&&!C,R=w===M$.Down&&!S||w===M$.Up&&!x;if(M&&P.x!==p.x){var A=b.scrollLeft+g.x,j=w===M$.Right&&A<=O.x||w===M$.Left&&A>=E.x;if(j&&!g.y)return void b.scrollTo({left:A,behavior:s});m.x=j?b.scrollLeft-A:w===M$.Right?b.scrollLeft-O.x:b.scrollLeft-E.x,m.x&&b.scrollBy({left:-m.x,behavior:s});break}if(R&&P.y!==p.y){var D=b.scrollTop+g.y,T=w===M$.Down&&D<=O.y||w===M$.Up&&D>=E.y;if(T&&!g.x)return void b.scrollTo({top:D,behavior:s});m.y=T?b.scrollTop-D:w===M$.Down?b.scrollTop-O.y:b.scrollTop-E.y,m.y&&b.scrollBy({top:-m.y,behavior:s});break}}}catch(e){y.e(e)}finally{y.f()}this.handleMove(e,_Y(xY(p,this.referenceCoordinates),m))}}}},{key:"handleMove",value:function(e,t){var n=this.props.onMove;e.preventDefault(),n(t)}},{key:"handleEnd",value:function(e){var t=this.props.onEnd;e.preventDefault(),this.detach(),t()}},{key:"handleCancel",value:function(e){var t=this.props.onCancel;e.preventDefault(),this.detach(),t()}},{key:"detach",value:function(){this.listeners.removeAll(),this.windowListeners.removeAll()}}])}();function z$(e){return Boolean(e&&"distance"in e)}function H$(e){return Boolean(e&&"delay"in e)}V$.activators=[{eventName:"onKeyDown",handler:function(e,t,n){var r=t.keyboardCodes,i=void 0===r?L$:r,o=t.onActivation,a=n.active,l=e.nativeEvent.code;if(i.start.includes(l)){var u=a.activatorNode.current;return(!u||e.target===u)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];var W$=function(){return ls((function e(t,n,r){var i;us(this,e),void 0===r&&(r=function(e){return e instanceof lY(e).EventTarget?e:dY(e)}(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;var o=t.event,a=o.target;this.props=t,this.events=n,this.document=dY(a),this.documentListeners=new D$(this.document),this.listeners=new D$(r),this.windowListeners=new D$(lY(a)),this.initialCoordinates=null!=(i=CY(o))?i:KY,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}),[{key:"attach",value:function(){var e=this.events,t=this.props.options,n=t.activationConstraint,r=t.bypassActivationConstraint;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(I$.Resize,this.handleCancel),this.windowListeners.add(I$.DragStart,F$),this.windowListeners.add(I$.VisibilityChange,this.handleCancel),this.windowListeners.add(I$.ContextMenu,F$),this.documentListeners.add(I$.Keydown,this.handleKeydown),n){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(H$(n))return this.timeoutId=setTimeout(this.handleStart,n.delay),void this.handlePending(n);if(z$(n))return void this.handlePending(n)}this.handleStart()}},{key:"detach",value:function(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"handlePending",value:function(e,t){var n=this.props,r=n.active;(0,n.onPending)(r,e,this.initialCoordinates,t)}},{key:"handleStart",value:function(){var e=this.initialCoordinates,t=this.props.onStart;e&&(this.activated=!0,this.documentListeners.add(I$.Click,N$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(I$.SelectionChange,this.removeTextSelection),t(e))}},{key:"handleMove",value:function(e){var t,n=this.activated,r=this.initialCoordinates,i=this.props,o=i.onMove,a=i.options.activationConstraint;if(r){var l=null!=(t=CY(e))?t:KY,u=xY(r,l);if(!n&&a){if(z$(a)){if(null!=a.tolerance&&T$(u,a.tolerance))return this.handleCancel();if(T$(u,a.distance))return this.handleStart()}return H$(a)&&T$(u,a.tolerance)?this.handleCancel():void this.handlePending(a,u)}e.cancelable&&e.preventDefault(),o(l)}}},{key:"handleEnd",value:function(){var e=this.props,t=e.onAbort,n=e.onEnd;this.detach(),this.activated||t(this.props.active),n()}},{key:"handleCancel",value:function(){var e=this.props,t=e.onAbort,n=e.onCancel;this.detach(),this.activated||t(this.props.active),n()}},{key:"handleKeydown",value:function(e){e.code===M$.Esc&&this.handleCancel()}},{key:"removeTextSelection",value:function(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}])}(),U$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},G$=function(e){function t(e){us(this,t);var n=dY(e.event.target);return DY(this,t,[e,U$,n])}return Oh(t,e),ls(t)}(W$);G$.activators=[{eventName:"onPointerDown",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];var Y$,$$,q$={move:{name:"mousemove"},end:{name:"mouseup"}};($$=Y$||(Y$={}))[$$.RightClick=2]="RightClick";var K$=function(e){function t(e){return us(this,t),DY(this,t,[e,q$,dY(e.event.target)])}return Oh(t,e),ls(t)}(W$);K$.activators=[{eventName:"onMouseDown",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return n.button!==Y$.RightClick&&(null==r||r({event:n}),!0)}}];var X$,J$,Z$,Q$,eq={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};function tq(e){var t,n=e.acceleration,r=e.activator,i=void 0===r?X$.Pointer:r,o=e.canScroll,a=e.draggingRect,u=e.enabled,c=e.interval,s=void 0===c?5:c,d=e.order,f=void 0===d?Z$.TreeOrder:d,h=e.pointerCoordinates,p=e.scrollableAncestors,v=e.scrollableAncestorRects,g=e.delta,m=e.threshold,y=function(e){var t=e.delta,n=e.disabled,r=mY(t);return vY((function(e){if(n||!r||!e)return oq;var i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:os(os({},s$.Backward,e.x[s$.Backward]||-1===i.x),s$.Forward,e.x[s$.Forward]||1===i.x),y:os(os({},s$.Backward,e.y[s$.Backward]||-1===i.y),s$.Forward,e.y[s$.Forward]||1===i.y)}}),[n,t,r])}({delta:g,disabled:!u}),b=nY((t=Object(l.useRef)(null),[Object(l.useCallback)((function(e,n){t.current=setInterval(e,n)}),[]),Object(l.useCallback)((function(){null!==t.current&&(clearInterval(t.current),t.current=null)}),[])]),2),w=b[0],_=b[1],x=Object(l.useRef)({x:0,y:0}),k=Object(l.useRef)({x:0,y:0}),C=Object(l.useMemo)((function(){switch(i){case X$.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case X$.DraggableRect:return a}}),[i,a,h]),S=Object(l.useRef)(null),O=Object(l.useCallback)((function(){var e=S.current;if(e){var t=x.current.x*k.current.x,n=x.current.y*k.current.y;e.scrollBy(t,n)}}),[]),E=Object(l.useMemo)((function(){return f===Z$.TreeOrder?ts(p).reverse():p}),[f,p]);Object(l.useEffect)((function(){if(u&&p.length&&C){var e,t=LY(E);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!1!==(null==o?void 0:o(r))){var i=p.indexOf(r),a=v[i];if(a){for(var l=C$(r,a,C,n,m),c=l.direction,d=l.speed,f=0,h=["x","y"];f<h.length;f++){var g=h[f];y[g][c[g]]||(d[g]=0,c[g]=0)}if(d.x>0||d.y>0)return _(),S.current=r,w(O,s),x.current=d,void(k.current=c)}}}}catch(e){t.e(e)}finally{t.f()}x.current={x:0,y:0},k.current={x:0,y:0},_()}else _()}),[n,O,o,_,u,s,JSON.stringify(C),JSON.stringify(y),w,p,E,v,JSON.stringify(m)])}(function(e){function t(e){return us(this,t),DY(this,t,[e,eq])}return Oh(t,e),ls(t,null,[{key:"setup",value:function(){return window.addEventListener(eq.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eq.move.name,e)};function e(){}}}])}(W$)).activators=[{eventName:"onTouchStart",handler:function(e,t){var n=e.nativeEvent,r=t.onActivation;return!(n.touches.length>1)&&(null==r||r({event:n}),!0)}}],(J$=X$||(X$={}))[J$.Pointer=0]="Pointer",J$[J$.DraggableRect=1]="DraggableRect",(Q$=Z$||(Z$={}))[Q$.TreeOrder=0]="TreeOrder",Q$[Q$.ReversedTreeOrder=1]="ReversedTreeOrder";var nq,rq,iq,oq={x:os(os({},s$.Backward,!1),s$.Forward,!1),y:os(os({},s$.Backward,!1),s$.Forward,!1)};(rq=nq||(nq={}))[rq.Always=0]="Always",rq[rq.BeforeDragging=1]="BeforeDragging",rq[rq.WhileDragging=2]="WhileDragging",(iq||(iq={})).Optimized="optimized";var aq=new Map;function lq(e,t){return vY((function(n){return e?n||("function"==typeof t?t(e):e):null}),[t,e])}function uq(e){var t=e.callback,n=e.disabled,r=hY(t),i=Object(l.useMemo)((function(){if(!n&&"undefined"!=typeof window&&void 0!==window.ResizeObserver)return new(0,window.ResizeObserver)(r)}),[n]);return Object(l.useEffect)((function(){return function(){return null==i?void 0:i.disconnect()}}),[i]),i}function cq(e){return new j$(h$(e),e)}function sq(e,t,n){void 0===t&&(t=cq);var r=nY(Object(l.useState)(null),2),i=r[0],o=r[1];function a(){o((function(r){if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;var o=t(e);return JSON.stringify(r)===JSON.stringify(o)?r:o}))}var u=function(e){var t=e.callback,n=e.disabled,r=hY(t),i=Object(l.useMemo)((function(){if(!n&&"undefined"!=typeof window&&void 0!==window.MutationObserver)return new(0,window.MutationObserver)(r)}),[r,n]);return Object(l.useEffect)((function(){return function(){return null==i?void 0:i.disconnect()}}),[i]),i}({callback:function(t){if(e){var n,r=LY(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.type,l=i.target;if("childList"===o&&l instanceof HTMLElement&&l.contains(e)){a();break}}}catch(e){r.e(e)}finally{r.f()}}}}),c=uq({callback:a});return fY((function(){a(),e?(null==c||c.observe(e),null==u||u.observe(document.body,{childList:!0,subtree:!0})):(null==c||c.disconnect(),null==u||u.disconnect())}),[e]),i}var dq=[];function fq(e,t){void 0===t&&(t=[]);var n=Object(l.useRef)(null);return Object(l.useEffect)((function(){n.current=null}),t),Object(l.useEffect)((function(){var t=e!==KY;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?xY(e,n.current):KY}function hq(e){return Object(l.useMemo)((function(){return e?function(e){var t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null}),[e])}var pq=[];function vq(e){if(!e)return null;if(e.children.length>1)return e;var t=e.children[0];return cY(t)?t:e}var gq=[{sensor:G$,options:{}},{sensor:V$,options:{}}],mq={current:{}},yq={draggable:{measure:p$},droppable:{measure:p$,strategy:nq.WhileDragging,frequency:iq.Optimized},dragOverlay:{measure:h$}},bq=function(e){function t(){return us(this,t),DY(this,t,arguments)}return Oh(t,e),ls(t,[{key:"get",value:function(e){var n;return null!=e&&null!=(n=function(e,t,n,r){var i=QG(Ch(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"get",this,3)([e]))?n:void 0}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"getEnabled",value:function(){return this.toArray().filter((function(e){return!e.disabled}))}},{key:"getNodeFor",value:function(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}])}(tY(Map)),wq={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new bq,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:YY},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yq,measureDroppableContainers:YY,windowRect:null,measuringScheduled:!1},_q={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:YY,draggableNodes:new Map,over:null,measureDroppableContainers:YY},xq=Object(l.createContext)(_q),kq=Object(l.createContext)(wq);function Cq(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new bq}}}function Sq(e,t){switch(t.type){case zY.DragStart:return NY(NY({},e),{},{draggable:NY(NY({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case zY.DragMove:return null==e.draggable.active?e:NY(NY({},e),{},{draggable:NY(NY({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case zY.DragEnd:case zY.DragCancel:return NY(NY({},e),{},{draggable:NY(NY({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case zY.RegisterDroppable:var n=t.element,r=n.id,i=new bq(e.droppable.containers);return i.set(r,n),NY(NY({},e),{},{droppable:NY(NY({},e.droppable),{},{containers:i})});case zY.SetDroppableDisabled:var o=t.id,a=t.key,l=t.disabled,u=e.droppable.containers.get(o);if(!u||a!==u.key)return e;var c=new bq(e.droppable.containers);return c.set(o,NY(NY({},u),{},{disabled:l})),NY(NY({},e),{},{droppable:NY(NY({},e.droppable),{},{containers:c})});case zY.UnregisterDroppable:var s=t.id,d=t.key,f=e.droppable.containers.get(s);if(!f||d!==f.key)return e;var h=new bq(e.droppable.containers);return h.delete(s),NY(NY({},e),{},{droppable:NY(NY({},e.droppable),{},{containers:h})});default:return e}}function Oq(e){var t=e.disabled,n=Object(l.useContext)(xq),r=n.active,i=n.activatorEvent,o=n.draggableNodes,a=mY(i),u=mY(null==r?void 0:r.id);return Object(l.useEffect)((function(){if(!t&&!i&&a&&null!=u){if(!kY(a))return;if(document.activeElement===a.target)return;var e=o.get(u);if(!e)return;var n=e.activatorNode,r=e.node;if(!n.current&&!r.current)return;requestAnimationFrame((function(){for(var e=0,t=[n.current,r.current];e<t.length;e++){var i=t[e];if(i){var o=EY(i);if(o){o.focus();break}}}}))}}),[i,t,o,u,a]),null}function Eq(e,t){var n=t.transform,r=ZG(t,RY);return null!=e&&e.length?e.reduce((function(e,t){return t(NY({transform:e},r))}),n):n}var Iq,Pq,Mq=Object(l.createContext)(NY(NY({},KY),{},{scaleX:1,scaleY:1}));(Pq=Iq||(Iq={}))[Pq.Uninitialized=0]="Uninitialized",Pq[Pq.Initializing=1]="Initializing",Pq[Pq.Initialized=2]="Initialized";var Rq=Object(l.memo)((function(e){var t,n,r,i,o,a,s,d=e.id,f=e.accessibility,h=e.autoScroll,p=void 0===h||h,v=e.children,g=e.sensors,m=void 0===g?gq:g,y=e.collisionDetection,b=void 0===y?i$:y,w=e.measuring,_=e.modifiers,x=ZG(e,AY),k=nY(Object(l.useReducer)(Sq,void 0,Cq),2),C=k[0],S=k[1],O=(o=nY(Object(l.useState)((function(){return new Set})),1)[0],a=Object(l.useCallback)((function(e){return o.add(e),function(){return o.delete(e)}}),[o]),[Object(l.useCallback)((function(e){var t=e.type,n=e.event;o.forEach((function(e){var r;return null==(r=e[t])?void 0:r.call(e,n)}))}),[o]),a]),E=nY(O,2),I=E[0],P=E[1],M=nY(Object(l.useState)(Iq.Uninitialized),2),R=M[0],A=M[1],j=R===Iq.Initialized,D=C.draggable,T=D.active,F=D.nodes,N=D.translate,L=C.droppable.containers,B=null!=T?F.get(T):null,V=Object(l.useRef)({initial:null,translated:null}),z=Object(l.useMemo)((function(){var e;return null!=T?{id:T,data:null!=(e=null==B?void 0:B.data)?e:mq,rect:V}:null}),[T,B]),H=Object(l.useRef)(null),W=nY(Object(l.useState)(null),2),U=W[0],G=W[1],Y=nY(Object(l.useState)(null),2),$=Y[0],q=Y[1],K=pY(x,Object.values(x)),X=bY("DndDescribedBy",d),J=Object(l.useMemo)((function(){return L.getEnabled()}),[L]),Z=(s=w,Object(l.useMemo)((function(){return{draggable:NY(NY({},yq.draggable),null==s?void 0:s.draggable),droppable:NY(NY({},yq.droppable),null==s?void 0:s.droppable),dragOverlay:NY(NY({},yq.dragOverlay),null==s?void 0:s.dragOverlay)}}),[null==s?void 0:s.draggable,null==s?void 0:s.droppable,null==s?void 0:s.dragOverlay])),Q=function(e,t){var n=t.dragging,r=t.dependencies,i=t.config,o=nY(Object(l.useState)(null),2),a=o[0],u=o[1],c=i.frequency,s=i.measure,d=i.strategy,f=Object(l.useRef)(e),h=function(){switch(d){case nq.Always:return!1;case nq.BeforeDragging:return n;default:return!n}}(),p=pY(h),v=Object(l.useCallback)((function(e){void 0===e&&(e=[]),p.current||u((function(t){return null===t?e:t.concat(e.filter((function(e){return!t.includes(e)})))}))}),[p]),g=Object(l.useRef)(null),m=vY((function(t){if(h&&!n)return aq;if(!t||t===aq||f.current!==e||null!=a){var r,i=new Map,o=LY(e);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l)if(a&&a.length>0&&!a.includes(l.id)&&l.rect.current)i.set(l.id,l.rect.current);else{var u=l.node.current,c=u?new j$(s(u),u):null;l.rect.current=c,c&&i.set(l.id,c)}}}catch(e){o.e(e)}finally{o.f()}return i}return t}),[e,a,n,h,s]);return Object(l.useEffect)((function(){f.current=e}),[e]),Object(l.useEffect)((function(){h||v()}),[n,h]),Object(l.useEffect)((function(){a&&a.length>0&&u(null)}),[JSON.stringify(a)]),Object(l.useEffect)((function(){h||"number"!=typeof c||null!==g.current||(g.current=setTimeout((function(){v(),g.current=null}),c))}),[c,h,v].concat(ts(r))),{droppableRects:m,measureDroppableContainers:v,measuringScheduled:null!=a}}(J,{dragging:j,dependencies:[N.x,N.y],config:Z.droppable}),ee=Q.droppableRects,te=Q.measureDroppableContainers,ne=Q.measuringScheduled,re=function(e,t){var n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return vY((function(e){var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(F,T),ie=Object(l.useMemo)((function(){return $?CY($):null}),[$]),oe=function(){var e=!1===(null==U?void 0:U.autoScrollEnabled),t="object"===lr(p)?!1===p.enabled:!1===p,n=j&&!e&&!t;if("object"===lr(p))return NY(NY({},p),{},{enabled:n});return{enabled:n}}(),ae=function(e,t){return lq(e,t)}(re,Z.draggable.measure);!function(e){var t=e.activeNode,n=e.measure,r=e.initialRect,i=e.config,o=void 0===i||i,a=Object(l.useRef)(!1),u="boolean"==typeof o?{x:o,y:o}:o,c=u.x,s=u.y;fY((function(){if((c||s)&&t){if(!a.current&&r){var e=null==t?void 0:t.node.current;if(e&&!1!==e.isConnected){var i=a$(n(e),r);if(c||(i.x=0),s||(i.y=0),a.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){var o=g$(e);o&&o.scrollBy({top:i.y,left:i.x})}}}}else a.current=!1}),[t,c,s,r,n])}({activeNode:null!=T?F.get(T):null,config:oe.layoutShiftCompensation,initialRect:ae,measure:Z.draggable.measure});var le,ue,ce,se,de,fe,he,pe=sq(re,Z.draggable.measure,ae),ve=sq(re?re.parentElement:null),ge=Object(l.useRef)({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=L.getNodeFor(null==(t=ge.current.over)?void 0:t.id),ye=function(e){var t=e.measure,n=nY(Object(l.useState)(null),2),r=n[0],i=n[1],o=uq({callback:Object(l.useCallback)((function(e){var n,r=LY(e);try{var o=function(){var e=n.value.target;if(cY(e))return i((function(n){var r=t(e);return n?NY(NY({},n),{},{width:r.width,height:r.height}):r})),1};for(r.s();!(n=r.n()).done&&!o(););}catch(e){r.e(e)}finally{r.f()}}),[t])}),a=nY(gY(Object(l.useCallback)((function(e){var n=vq(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),i(n?t(n):null)}),[t,o])),2),u=a[0],c=a[1];return Object(l.useMemo)((function(){return{nodeRef:u,rect:r,setRef:c}}),[r,u,c])}({measure:Z.dragOverlay.measure}),be=null!=(n=ye.nodeRef.current)?n:re,we=j?null!=(r=ye.rect)?r:pe:null,_e=Boolean(ye.nodeRef.current&&ye.rect),xe=a$(le=_e?null:pe,lq(le)),ke=hq(be?lY(be):null),Ce=function(e){var t=Object(l.useRef)(e),n=vY((function(n){return e?n&&n!==dq&&e&&t.current&&e.parentNode===t.current.parentNode?n:v$(e):dq}),[e]);return Object(l.useEffect)((function(){t.current=e}),[e]),n}(j?null!=me?me:re:null),Se=function(e,t){void 0===t&&(t=h$);var n=nY(e,1)[0],r=hq(n?lY(n):null),i=nY(Object(l.useState)(pq),2),o=i[0],a=i[1];function u(){a((function(){return e.length?e.map((function(e){return _$(e)?r:new j$(t(e),e)})):pq}))}var c=uq({callback:u});return fY((function(){null==c||c.disconnect(),u(),e.forEach((function(e){return null==c?void 0:c.observe(e)}))}),[e]),o}(Ce),Oe=Eq(_,{transform:{x:N.x-xe.x,y:N.y-xe.y,scaleX:1,scaleY:1},activatorEvent:$,active:z,activeNodeRect:pe,containerNodeRect:ve,draggingNodeRect:we,over:ge.current.over,overlayNodeRect:ye.rect,scrollableAncestors:Ce,scrollableAncestorRects:Se,windowRect:ke}),Ee=ie?_Y(ie,N):null,Ie=(ue=Ce,ce=nY(Object(l.useState)(null),2),se=ce[0],de=ce[1],fe=Object(l.useRef)(ue),he=Object(l.useCallback)((function(e){var t=m$(e.target);t&&de((function(e){return e?(e.set(t,w$(t)),new Map(e)):null}))}),[]),Object(l.useEffect)((function(){var e=fe.current;if(ue!==e){n(e);var t=ue.map((function(e){var t=m$(e);return t?(t.addEventListener("scroll",he,{passive:!0}),[t,w$(t)]):null})).filter((function(e){return null!=e}));de(t.length?new Map(t):null),fe.current=ue}return function(){n(ue),n(e)};function n(e){e.forEach((function(e){var t=m$(e);null==t||t.removeEventListener("scroll",he)}))}}),[he,ue]),Object(l.useMemo)((function(){return ue.length?se?Array.from(se.values()).reduce((function(e,t){return _Y(e,t)}),KY):O$(ue):KY}),[ue,se])),Pe=fq(Ie),Me=fq(Ie,[pe]),Re=_Y(Oe,Pe),Ae=we?u$(we,Oe):null,je=z&&Ae?b({active:z,collisionRect:Ae,droppableRects:ee,droppableContainers:J,pointerCoordinates:Ee}):null,De=e$(je,"id"),Te=nY(Object(l.useState)(null),2),Fe=Te[0],Ne=Te[1],Le=function(e,t,n){return NY(NY({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(_e?Oe:_Y(Oe,Me),null!=(i=null==Fe?void 0:Fe.rect)?i:null,pe),Be=Object(l.useRef)(null),Ve=Object(l.useCallback)((function(e,t){var n=t.sensor,r=t.options;if(null!=H.current){var i=F.get(H.current);if(i){var o=e.nativeEvent,a=new n({active:H.current,activeNode:i,event:o,options:r,context:ge,onAbort:function(e){if(F.get(e)){var t=K.current.onDragAbort,n={id:e};null==t||t(n),I({type:"onDragAbort",event:n})}},onPending:function(e,t,n,r){if(F.get(e)){var i=K.current.onDragPending,o={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(o),I({type:"onDragPending",event:o})}},onStart:function(e){var t=H.current;if(null!=t){var n=F.get(t);if(n){var r=K.current.onDragStart,i={activatorEvent:o,active:{id:t,data:n.data,rect:V}};Object(c.unstable_batchedUpdates)((function(){null==r||r(i),A(Iq.Initializing),S({type:zY.DragStart,initialCoordinates:e,active:t}),I({type:"onDragStart",event:i}),G(Be.current),q(o)}))}}},onMove:function(e){S({type:zY.DragMove,coordinates:e})},onEnd:l(zY.DragEnd),onCancel:l(zY.DragCancel)});Be.current=a}}function l(e){return function(){var t=rs(ps.mark((function t(){var n,r,i,a,l,u,s;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=ge.current,r=n.active,i=n.collisions,a=n.over,l=n.scrollAdjustedTranslate,u=null,!r||!l){t.next=10;break}if(s=K.current.cancelDrop,u={activatorEvent:o,active:r,collisions:i,delta:l,over:a},e!==zY.DragEnd||"function"!=typeof s){t.next=10;break}return t.next=8,Promise.resolve(s(u));case 8:t.sent&&(e=zY.DragCancel);case 10:H.current=null,Object(c.unstable_batchedUpdates)((function(){S({type:e}),A(Iq.Uninitialized),Ne(null),G(null),q(null),Be.current=null;var t=e===zY.DragEnd?"onDragEnd":"onDragCancel";if(u){var n=K.current[t];null==n||n(u),I({type:t,event:u})}}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}),[F]),ze=function(e,t){return Object(l.useMemo)((function(){return e.reduce((function(e,n){var r=n.sensor.activators.map((function(e){return{eventName:e.eventName,handler:t(e.handler,n)}}));return[].concat(ts(e),ts(r))}),[])}),[e,t])}(m,Object(l.useCallback)((function(e,t){return function(n,r){var i=n.nativeEvent,o=F.get(r);if(null===H.current&&o&&!i.dndKit&&!i.defaultPrevented){var a={active:o};!0===e(n,t.options,a)&&(i.dndKit={capturedBy:t.sensor},H.current=r,Ve(n,t))}}}),[F,Ve]));!function(e){Object(l.useEffect)((function(){if(iY){var t=e.map((function(e){var t=e.sensor;return null==t.setup?void 0:t.setup()}));return function(){var e,n=LY(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;null==r||r()}}catch(e){n.e(e)}finally{n.f()}}}}),e.map((function(e){return e.sensor})))}(m),fY((function(){pe&&R===Iq.Initializing&&A(Iq.Initialized)}),[pe,R]),Object(l.useEffect)((function(){var e=K.current.onDragMove,t=ge.current,n=t.active,r=t.activatorEvent,i=t.collisions,o=t.over;if(n&&r){var a={active:n,activatorEvent:r,collisions:i,delta:{x:Re.x,y:Re.y},over:o};Object(c.unstable_batchedUpdates)((function(){null==e||e(a),I({type:"onDragMove",event:a})}))}}),[Re.x,Re.y]),Object(l.useEffect)((function(){var e=ge.current,t=e.active,n=e.activatorEvent,r=e.collisions,i=e.droppableContainers,o=e.scrollAdjustedTranslate;if(t&&null!=H.current&&n&&o){var a=K.current.onDragOver,l=i.get(De),u=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,s={active:t,activatorEvent:n,collisions:r,delta:{x:o.x,y:o.y},over:u};Object(c.unstable_batchedUpdates)((function(){Ne(u),null==a||a(s),I({type:"onDragOver",event:s})}))}}),[De]),fY((function(){ge.current={activatorEvent:$,active:z,activeNode:re,collisionRect:Ae,collisions:je,droppableRects:ee,draggableNodes:F,draggingNode:be,draggingNodeRect:we,droppableContainers:L,over:Fe,scrollableAncestors:Ce,scrollAdjustedTranslate:Re},V.current={initial:we,translated:Ae}}),[z,re,je,Ae,F,be,we,ee,L,Fe,Ce,Re]),tq(NY(NY({},oe),{},{delta:N,draggingRect:Ae,pointerCoordinates:Ee,scrollableAncestors:Ce,scrollableAncestorRects:Se}));var He=Object(l.useMemo)((function(){return{active:z,activeNode:re,activeNodeRect:pe,activatorEvent:$,collisions:je,containerNodeRect:ve,dragOverlay:ye,draggableNodes:F,droppableContainers:L,droppableRects:ee,over:Fe,measureDroppableContainers:te,scrollableAncestors:Ce,scrollableAncestorRects:Se,measuringConfiguration:Z,measuringScheduled:ne,windowRect:ke}}),[z,re,pe,$,je,ve,ye,F,L,ee,Fe,te,Ce,Se,Z,ne,ke]),We=Object(l.useMemo)((function(){return{activatorEvent:$,activators:ze,active:z,activeNodeRect:pe,ariaDescribedById:{draggable:X},dispatch:S,draggableNodes:F,over:Fe,measureDroppableContainers:te}}),[$,ze,z,pe,S,X,F,Fe,te]);return u.a.createElement(VY.Provider,{value:P},u.a.createElement(xq.Provider,{value:We},u.a.createElement(kq.Provider,{value:He},u.a.createElement(Mq.Provider,{value:Le},v)),u.a.createElement(Oq,{disabled:!1===(null==f?void 0:f.restoreFocus)})),u.a.createElement(GY,NY(NY({},f),{},{hiddenTextDescribedById:X})))})),Aq=Object(l.createContext)(null),jq="button",Dq="Draggable";function Tq(e){var t=e.id,n=e.data,r=e.disabled,i=void 0!==r&&r,o=e.attributes,a=bY(Dq),u=Object(l.useContext)(xq),c=u.activators,s=u.activatorEvent,d=u.active,f=u.activeNodeRect,h=u.ariaDescribedById,p=u.draggableNodes,v=u.over,g=null!=o?o:{},m=g.role,y=void 0===m?jq:m,b=g.roleDescription,w=void 0===b?"draggable":b,_=g.tabIndex,x=void 0===_?0:_,k=(null==d?void 0:d.id)===t,C=Object(l.useContext)(k?Mq:Aq),S=nY(gY(),2),O=S[0],E=S[1],I=nY(gY(),2),P=I[0],M=I[1],R=function(e,t){return Object(l.useMemo)((function(){return e.reduce((function(e,n){var r=n.eventName,i=n.handler;return e[r]=function(e){i(e,t)},e}),{})}),[e,t])}(c,t),A=pY(n);return fY((function(){return p.set(t,{id:t,key:a,node:O,activatorNode:P,data:A}),function(){var e=p.get(t);e&&e.key===a&&p.delete(t)}}),[p,t]),{active:d,activatorEvent:s,activeNodeRect:f,attributes:Object(l.useMemo)((function(){return{role:y,tabIndex:x,"aria-disabled":i,"aria-pressed":!(!k||y!==jq)||void 0,"aria-roledescription":w,"aria-describedby":h.draggable}}),[i,y,x,k,w,h.draggable]),isDragging:k,listeners:i?void 0:R,node:O,over:v,setNodeRef:E,setActivatorNodeRef:M,transform:C}}function Fq(){return Object(l.useContext)(kq)}var Nq="Droppable",Lq={timeout:25};function Bq(e){var t=e.animation,n=e.children,r=nY(Object(l.useState)(null),2),i=r[0],o=r[1],a=nY(Object(l.useState)(null),2),c=a[0],s=a[1],d=mY(n);return n||i||!d||o(d),fY((function(){if(c){var e=null==i?void 0:i.key,n=null==i?void 0:i.props.id;null!=e&&null!=n?Promise.resolve(t(n,c)).then((function(){o(null)})):o(null)}}),[t,i,c]),u.a.createElement(u.a.Fragment,null,n,i?Object(l.cloneElement)(i,{ref:s}):null)}var Vq={x:0,y:0,scaleX:1,scaleY:1};function zq(e){var t=e.children;return u.a.createElement(xq.Provider,{value:_q},u.a.createElement(Mq.Provider,{value:Vq},t))}var Hq={position:"fixed",touchAction:"none"},Wq=function(e){return kY(e)?"transform 250ms ease":void 0},Uq=Object(l.forwardRef)((function(e,t){var n=e.as,r=e.activatorEvent,i=e.adjustScale,o=e.children,a=e.className,l=e.rect,c=e.style,s=e.transform,d=e.transition,f=void 0===d?Wq:d;if(!l)return null;var h=i?s:NY(NY({},s),{},{scaleX:1,scaleY:1}),p=NY(NY({},Hq),{},{width:l.width,height:l.height,top:l.top,left:l.left,transform:SY.Transform.toString(h),transformOrigin:i&&r?JY(r,l):void 0,transition:"function"==typeof f?f(r):f},c);return u.a.createElement(n,{className:a,style:p,ref:t},o)})),Gq=function(e){return function(t){var n=t.active,r=t.dragOverlay,i={},o=e.styles,a=e.className;if(null!=o&&o.active)for(var l=0,u=Object.entries(o.active);l<u.length;l++){var c=nY(u[l],2),s=c[0],d=c[1];void 0!==d&&(i[s]=n.node.style.getPropertyValue(s),n.node.style.setProperty(s,d))}if(null!=o&&o.dragOverlay)for(var f=0,h=Object.entries(o.dragOverlay);f<h.length;f++){var p=nY(h[f],2),v=p[0],g=p[1];void 0!==g&&r.node.style.setProperty(v,g)}return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(var e=0,t=Object.entries(i);e<t.length;e++){var r=nY(t[e],2),o=r[0],l=r[1];n.node.style.setProperty(o,l)}null!=a&&a.active&&n.node.classList.remove(a.active)}}},Yq={duration:250,easing:"ease",keyframes:function(e){var t=e.transform,n=t.initial,r=t.final;return[{transform:SY.Transform.toString(n)},{transform:SY.Transform.toString(r)}]},sideEffects:Gq({styles:{active:{opacity:"0"}}})};function $q(e){var t=e.config,n=e.draggableNodes,r=e.droppableContainers,i=e.measuringConfiguration;return hY((function(e,o){if(null!==t){var a=n.get(e);if(a){var l=a.node.current;if(l){var u=vq(o);if(u){var c=c$(lY(o).getComputedStyle(o).transform);if(c){var s="function"==typeof t?t:function(e){var t=NY(NY({},Yq),e),n=t.duration,r=t.easing,i=t.sideEffects,o=t.keyframes;return function(e){var t=e.active,a=e.dragOverlay,l=e.transform,u=ZG(e,jY);if(n){var c={x:a.rect.left-t.rect.left,y:a.rect.top-t.rect.top},s={scaleX:1!==l.scaleX?t.rect.width*l.scaleX/a.rect.width:1,scaleY:1!==l.scaleY?t.rect.height*l.scaleY/a.rect.height:1},d=NY({x:l.x-c.x,y:l.y-c.y},s),f=o(NY(NY({},u),{},{active:t,dragOverlay:a,transform:{initial:l,final:d}})),h=nY(f,1)[0],p=f[f.length-1];if(JSON.stringify(h)!==JSON.stringify(p)){var v=null==i?void 0:i(NY({active:t,dragOverlay:a},u)),g=a.node.animate(f,{duration:n,easing:r,fill:"forwards"});return new Promise((function(e){g.onfinish=function(){null==v||v(),e()}}))}}}}(t);return E$(l,i.draggable.measure),s({active:{id:e,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:i,transform:c})}}}}}}))}var qq=0;var Kq=u.a.memo((function(e){var t,n=e.adjustScale,r=void 0!==n&&n,i=e.children,o=e.dropAnimation,a=e.style,c=e.transition,s=e.modifiers,d=e.wrapperElement,f=void 0===d?"div":d,h=e.className,p=e.zIndex,v=void 0===p?999:p,g=Fq(),m=g.activatorEvent,y=g.active,b=g.activeNodeRect,w=g.containerNodeRect,_=g.draggableNodes,x=g.droppableContainers,k=g.dragOverlay,C=g.over,S=g.measuringConfiguration,O=g.scrollableAncestors,E=g.scrollableAncestorRects,I=g.windowRect,P=Object(l.useContext)(Mq),M=(t=null==y?void 0:y.id,Object(l.useMemo)((function(){if(null!=t)return++qq}),[t])),R=Eq(s,{activatorEvent:m,active:y,activeNodeRect:b,containerNodeRect:w,draggingNodeRect:k.rect,over:C,overlayNodeRect:k.rect,scrollableAncestors:O,scrollableAncestorRects:E,transform:P,windowRect:I}),A=lq(b),j=$q({config:o,draggableNodes:_,droppableContainers:x,measuringConfiguration:S}),D=A?k.setRef:void 0;return u.a.createElement(zq,null,u.a.createElement(Bq,{animation:j},y&&M?u.a.createElement(Uq,{key:M,id:y.id,ref:D,as:f,activatorEvent:m,adjustScale:r,className:h,transition:c,rect:A,style:NY({zIndex:v},a),transform:R},i):null))}));function Xq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xq(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zq(e,t,n){var r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Qq(e,t){return e.reduce((function(e,n,r){var i=t.get(n);return i&&(e[r]=i),e}),Array(e.length))}function eK(e){return null!==e&&e>=0}var tK={scaleX:1,scaleY:1},nK=function(e){var t,n=e.rects,r=e.activeNodeRect,i=e.activeIndex,o=e.overIndex,a=e.index,l=null!=(t=n[i])?t:r;if(!l)return null;var u=function(e,t,n){var r=e[t],i=e[t-1],o=e[t+1];if(!r||!i&&!o)return 0;if(n<t)return i?r.left-(i.left+i.width):o.left-(r.left+r.width);return o?o.left-(r.left+r.width):r.left-(i.left+i.width)}(n,a,i);if(a===i){var c=n[o];return c?Jq({x:i<o?c.left+c.width-(l.left+l.width):c.left-l.left,y:0},tK):null}return Jq(a>i&&a<=o?{x:-l.width-u,y:0}:a<i&&a>=o?{x:l.width+u,y:0}:{x:0,y:0},tK)};var rK=function(e){var t=e.rects,n=e.activeIndex,r=e.overIndex,i=e.index,o=Zq(t,r,n),a=t[i],l=o[i];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},iK={scaleX:1,scaleY:1},oK=function(e){var t,n=e.activeIndex,r=e.activeNodeRect,i=e.index,o=e.rects,a=e.overIndex,l=null!=(t=o[n])?t:r;if(!l)return null;if(i===n){var u=o[a];return u?Jq({x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top},iK):null}var c=function(e,t,n){var r=e[t],i=e[t-1],o=e[t+1];if(!r)return 0;if(n<t)return i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0;return o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0}(o,i,n);return Jq(i>n&&i<=a?{x:0,y:-l.height-c}:i<n&&i>=a?{x:0,y:l.height+c}:{x:0,y:0},iK)};var aK="Sortable",lK=u.a.createContext({activeIndex:-1,containerId:aK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rK,disabled:{draggable:!1,droppable:!1}});function uK(e){var t=e.children,n=e.id,r=e.items,i=e.strategy,o=void 0===i?rK:i,a=e.disabled,c=void 0!==a&&a,s=Fq(),d=s.active,f=s.dragOverlay,h=s.droppableRects,p=s.over,v=s.measureDroppableContainers,g=bY(aK,n),m=Boolean(null!==f.rect),y=Object(l.useMemo)((function(){return r.map((function(e){return"object"===lr(e)&&"id"in e?e.id:e}))}),[r]),b=null!=d,w=d?y.indexOf(d.id):-1,_=p?y.indexOf(p.id):-1,x=Object(l.useRef)(y),k=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(y,x.current),C=-1!==_&&-1===w||k,S=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(c);fY((function(){k&&b&&v(y)}),[k,y,b,v]),Object(l.useEffect)((function(){x.current=y}),[y]);var O=Object(l.useMemo)((function(){return{activeIndex:w,containerId:g,disabled:S,disableTransforms:C,items:y,overIndex:_,useDragOverlay:m,sortedRects:Qq(y,h),strategy:o}}),[w,g,S.draggable,S.droppable,C,y,_,h,m,o]);return u.a.createElement(lK.Provider,{value:O},t)}var cK=function(e){var t=e.id;return Zq(e.items,e.activeIndex,e.overIndex).indexOf(t)},sK=function(e){var t=e.containerId,n=e.isSorting,r=e.wasDragging,i=e.index,o=e.items,a=e.newIndex,l=e.previousItems,u=e.previousContainerId;return!(!e.transition||!r)&&((l===o||i!==a)&&(!!n||a!==i&&t===u))},dK={duration:200,easing:"ease"},fK="transform",hK=SY.Transition.toString({property:fK,duration:0,easing:"linear"}),pK={roleDescription:"sortable"};function vK(e){var t=e.animateLayoutChanges,n=void 0===t?sK:t,r=e.attributes,i=e.disabled,o=e.data,a=e.getNewIndex,u=void 0===a?cK:a,c=e.id,s=e.strategy,d=e.resizeObserverConfig,f=e.transition,h=void 0===f?dK:f,p=Object(l.useContext)(lK),v=p.items,g=p.containerId,m=p.activeIndex,y=p.disabled,b=p.disableTransforms,w=p.sortedRects,_=p.overIndex,x=p.useDragOverlay,k=p.strategy,C=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(i,y),S=v.indexOf(c),O=Object(l.useMemo)((function(){return Jq({sortable:{containerId:g,index:S,items:v}},o)}),[g,o,S,v]),E=Object(l.useMemo)((function(){return v.slice(v.indexOf(c))}),[v,c]),I=function(e){var t=e.data,n=e.disabled,r=void 0!==n&&n,i=e.id,o=e.resizeObserverConfig,a=bY(Nq),u=Object(l.useContext)(xq),c=u.active,s=u.dispatch,d=u.over,f=u.measureDroppableContainers,h=Object(l.useRef)({disabled:r}),p=Object(l.useRef)(!1),v=Object(l.useRef)(null),g=Object(l.useRef)(null),m=NY(NY({},Lq),o),y=m.disabled,b=m.updateMeasurementsFor,w=m.timeout,_=pY(null!=b?b:i),x=uq({callback:Object(l.useCallback)((function(){p.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout((function(){f(Array.isArray(_.current)?_.current:[_.current]),g.current=null}),w)):p.current=!0}),[w]),disabled:y||!c}),k=nY(gY(Object(l.useCallback)((function(e,t){x&&(t&&(x.unobserve(t),p.current=!1),e&&x.observe(e))}),[x])),2),C=k[0],S=k[1],O=pY(t);return Object(l.useEffect)((function(){x&&C.current&&(x.disconnect(),p.current=!1,x.observe(C.current))}),[C,x]),Object(l.useEffect)((function(){return s({type:zY.RegisterDroppable,element:{id:i,key:a,disabled:r,node:C,rect:v,data:O}}),function(){return s({type:zY.UnregisterDroppable,key:a,id:i})}}),[i]),Object(l.useEffect)((function(){r!==h.current.disabled&&(s({type:zY.SetDroppableDisabled,id:i,key:a,disabled:r}),h.current.disabled=r)}),[i,a,r,s]),{active:c,rect:v,isOver:(null==d?void 0:d.id)===i,node:C,over:d,setNodeRef:S}}({id:c,data:O,disabled:C.droppable,resizeObserverConfig:Jq({updateMeasurementsFor:E},d)}),P=I.rect,M=I.node,R=I.isOver,A=I.setNodeRef,j=Tq({id:c,data:O,attributes:Jq(Jq({},pK),r),disabled:C.draggable}),D=j.active,T=j.activatorEvent,F=j.activeNodeRect,N=j.attributes,L=j.setNodeRef,B=j.listeners,V=j.isDragging,z=j.over,H=j.setActivatorNodeRef,W=j.transform,U=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(l.useMemo)((function(){return function(e){t.forEach((function(t){return t(e)}))}}),t)}(A,L),G=Boolean(D),Y=G&&!b&&eK(m)&&eK(_),$=!x&&V,q=$&&Y?W:null,K=Y?null!=q?q:(null!=s?s:k)({rects:w,activeNodeRect:F,activeIndex:m,overIndex:_,index:S}):null,X=eK(m)&&eK(_)?u({id:c,items:v,activeIndex:m,overIndex:_}):S,J=null==D?void 0:D.id,Z=Object(l.useRef)({activeId:J,items:v,newIndex:X,containerId:g}),Q=v!==Z.current.items,ee=n({active:D,containerId:g,isDragging:V,isSorting:G,id:c,index:S,items:v,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:h,wasDragging:null!=Z.current.activeId}),te=function(e){var t=e.disabled,n=e.index,r=e.node,i=e.rect,o=nY(Object(l.useState)(null),2),a=o[0],u=o[1],c=Object(l.useRef)(n);return fY((function(){if(!t&&n!==c.current&&r.current){var e=i.current;if(e){var o=h$(r.current,{ignoreTransform:!0}),a={x:e.left-o.left,y:e.top-o.top,scaleX:e.width/o.width,scaleY:e.height/o.height};(a.x||a.y)&&u(a)}}n!==c.current&&(c.current=n)}),[t,n,r,i]),Object(l.useEffect)((function(){a&&u(null)}),[a]),a}({disabled:!ee,index:S,node:M,rect:P});return Object(l.useEffect)((function(){G&&Z.current.newIndex!==X&&(Z.current.newIndex=X),g!==Z.current.containerId&&(Z.current.containerId=g),v!==Z.current.items&&(Z.current.items=v)}),[G,X,g,v]),Object(l.useEffect)((function(){if(J!==Z.current.activeId){if(!J||Z.current.activeId){var e=setTimeout((function(){Z.current.activeId=J}),50);return function(){return clearTimeout(e)}}Z.current.activeId=J}}),[J]),{active:D,activeIndex:m,attributes:N,data:O,rect:P,index:S,newIndex:X,items:v,isOver:R,isSorting:G,isDragging:V,listeners:B,node:M,overIndex:_,over:z,setNodeRef:U,setActivatorNodeRef:H,setDroppableNodeRef:A,setDraggableNodeRef:L,transform:null!=te?te:K,transition:function(){if(te||Q&&Z.current.newIndex===S)return hK;if($&&!kY(T)||!h)return;if(G||ee)return SY.Transition.toString(Jq(Jq({},h),{},{property:fK}));return}()}}function gK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gK(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}M$.Down,M$.Right,M$.Up,M$.Left;var yK=function(e){return mK(mK({},e.transform),{},{y:0})};function bK(e,t,n){var r=mK({},e);return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}var wK=function(e){var t=e.containerNodeRect,n=e.draggingNodeRect,r=e.transform;return n&&t?bK(r,n,t):r},_K=function(e){var t=e.draggingNodeRect,n=e.transform,r=e.scrollableAncestorRects[0];return t&&r?bK(n,t,r):n},xK=function(e){return mK(mK({},e.transform),{},{x:0})};function kK(e){var t=l.useRef();t.current=e;var n=l.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function CK(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var SK=CK()?l.useLayoutEffect:l.useEffect,OK=function(e,t){var n=l.useRef(!0);SK((function(){return e(n.current)}),t),SK((function(){return n.current=!1,function(){n.current=!0}}),[])},EK=function(e,t){OK((function(t){if(!t)return e()}),t)};function IK(e){var t=l.useRef(!1),n=nY(l.useState(e),2),r=n[0],i=n[1];return l.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||i(e)}]}function PK(e){return void 0!==e}function MK(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,l=nY(IK((function(){return PK(i)?i:PK(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),u=l[0],c=l[1],s=void 0!==i?i:u,d=a?a(s):s,f=kK(o),h=nY(IK([s]),2),p=h[0],v=h[1];return EK((function(){var e=p[0];u!==e&&f(u,e)}),[p]),EK((function(){PK(i)||c(i)}),[i]),[d,kK((function(e,t){c(e,t),v([s],t)}))]}var RK,AK={exports:{}},jK={},DK=Symbol.for("react.element"),TK=Symbol.for("react.portal"),FK=Symbol.for("react.fragment"),NK=Symbol.for("react.strict_mode"),LK=Symbol.for("react.profiler"),BK=Symbol.for("react.provider"),VK=Symbol.for("react.context"),zK=Symbol.for("react.server_context"),HK=Symbol.for("react.forward_ref"),WK=Symbol.for("react.suspense"),UK=Symbol.for("react.suspense_list"),GK=Symbol.for("react.memo"),YK=Symbol.for("react.lazy"),$K=Symbol.for("react.offscreen");function qK(e){if("object"===lr(e)&&null!==e){var t=e.$$typeof;switch(t){case DK:switch(e=e.type){case FK:case LK:case NK:case WK:case UK:return e;default:switch(e=e&&e.$$typeof){case zK:case VK:case HK:case YK:case GK:case BK:return e;default:return t}}case TK:return t}}}RK=Symbol.for("react.module.reference"),jK.ContextConsumer=VK,jK.ContextProvider=BK,jK.Element=DK,jK.ForwardRef=HK,jK.Fragment=FK,jK.Lazy=YK,jK.Memo=GK,jK.Portal=TK,jK.Profiler=LK,jK.StrictMode=NK,jK.Suspense=WK,jK.SuspenseList=UK,jK.isAsyncMode=function(){return!1},jK.isConcurrentMode=function(){return!1},jK.isContextConsumer=function(e){return qK(e)===VK},jK.isContextProvider=function(e){return qK(e)===BK},jK.isElement=function(e){return"object"===lr(e)&&null!==e&&e.$$typeof===DK},jK.isForwardRef=function(e){return qK(e)===HK},jK.isFragment=function(e){return qK(e)===FK},jK.isLazy=function(e){return qK(e)===YK},jK.isMemo=function(e){return qK(e)===GK},jK.isPortal=function(e){return qK(e)===TK},jK.isProfiler=function(e){return qK(e)===LK},jK.isStrictMode=function(e){return qK(e)===NK},jK.isSuspense=function(e){return qK(e)===WK},jK.isSuspenseList=function(e){return qK(e)===UK},jK.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===FK||e===LK||e===NK||e===WK||e===UK||e===$K||"object"===lr(e)&&null!==e&&(e.$$typeof===YK||e.$$typeof===GK||e.$$typeof===BK||e.$$typeof===VK||e.$$typeof===HK||e.$$typeof===RK||void 0!==e.getModuleId)},jK.typeOf=qK,AK.exports=jK;var KK=AK.exports;function XK(e,t,n){var r=l.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}var JK=Symbol.for("react.element"),ZK=Symbol.for("react.transitional.element"),QK=Symbol.for("react.fragment");function eX(e){return e&&"object"===lr(e)&&(e.$$typeof===JK||e.$$typeof===ZK)&&e.type===QK}var tX=function(e,t){"function"==typeof e?e(t):"object"===lr(e)&&e&&"current"in e&&(e.current=t)},nX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){tX(t,e)}))}},rX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return XK((function(){return nX.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},iX=function(e){var t,n;if(!e)return!1;if(oX(e)&&e.props.propertyIsEnumerable("ref"))return!0;var r=KK.isMemo(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===KK.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===KK.ForwardRef)};function oX(e){return Object(l.isValidElement)(e)&&!eX(e)}var aX=function(e){if(e&&oX(e)){var t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null};function lX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lX(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cX={};function sX(e,t){}function dX(e,t){}function fX(e,t,n){t||cX[n]||(e(!1,n),cX[n]=!0)}function hX(e,t){fX(sX,e,t)}function pX(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vX(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vX(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function vX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gX(e,t){return e.toString(2).padStart(t,"0")}function mX(e,t){var n=e%t;return n>=0?n:t+n}function yX(e,t){return new Array(e).fill(t)}function bX(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=Math.max(e,a.length)}for(var l=[],u=0;u<e;u++){var c,s=pX(n);try{for(s.s();!(c=s.n()).done;){var d=c.value;u>=d.length||l.push(d[u])}}catch(e){s.e(e)}finally{s.f()}}return new Uint8Array(l)}function wX(e,t,n){if(n<0||n+t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function _X(e){return{has:function(t){return e.includes(t)},decode:function(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((function(t){if("string"!=typeof t)throw new Error("alphabet.decode: not string element=".concat(t));var n=e.indexOf(t);if(-1===n)throw new Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return n}))},encode:function(t){if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((function(t){if(function(e){if(!Number.isSafeInteger(e))throw new Error("Wrong integer: ".concat(e))}(t),t<0||t>=e.length)throw new Error("Digit index outside alphabet: ".concat(t," (alphabet: ").concat(e.length,")"));return e[t]}))}}}hX.preMessage=function(e){},hX.resetWarned=function(){cX={}},hX.noteOnce=function(e,t){fX(dX,e,t)};var xX=function(){function e(t,n){us(this,e);var r=e.size(t),i=r.height,o=r.width;this.data=n||Array.from({length:i},(function(){return yX(o,void 0)})),this.height=i,this.width=o}return ls(e,[{key:"point",value:function(e){return this.data[e.y][e.x]}},{key:"isInside",value:function(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}},{key:"size",value:function(e){if(!e)return{height:this.height,width:this.width};var t=this.xy(e),n=t.x,r=t.y;return{height:this.height-r,width:this.width-n}}},{key:"xy",value:function(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error("Bitmap: wrong x=".concat(e.x));if(!Number.isSafeInteger(e.y))throw new Error("Bitmap: wrong y=".concat(e.y));return e.x=mX(e.x,this.width),e.y=mX(e.y,this.height),e}},{key:"rect",value:function(t,n,r){for(var i=this.xy(t),o=i.x,a=i.y,l=e.size(n,this.size({x:o,y:a})),u=l.height,c=l.width,s=0;s<u;s++)for(var d=0;d<c;d++)this.data[a+s][o+d]="function"==typeof r?r({x:d,y:s},this.data[a+s][o+d]):r;return this}},{key:"rectRead",value:function(e,t,n){return this.rect(e,t,(function(e,t){return n(e,t),t}))}},{key:"hLine",value:function(e,t,n){return this.rect(e,{width:t,height:1},n)}},{key:"vLine",value:function(e,t,n){return this.rect(e,{width:1,height:t},n)}},{key:"border",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1?arguments[1]:void 0,r=this.height+2*t,i=this.width+2*t,o=yX(t,n),a=Array.from({length:t},(function(){return yX(i,n)}));return new e({height:r,width:i},[].concat(a,ts(this.data.map((function(e){return[].concat(ts(o),ts(e),ts(o))}))),a))}},{key:"embed",value:function(e,t){return this.rect(e,t.size(),(function(e){var n=e.x,r=e.y;return t.data[r][n]}))}},{key:"rectSlice",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size(),r=new e(e.size(n,this.size(this.xy(t))));return this.rect(t,n,(function(e,t){var n=e.x,i=e.y;return r.data[i][n]=t})),r}},{key:"inverse",value:function(){var t=this,n=this.height;return new e({height:this.width,width:n}).rect({x:0,y:0},1/0,(function(e){var n=e.x,r=e.y;return t.data[n][r]}))}},{key:"scale",value:function(t){var n=this;if(!Number.isSafeInteger(t)||t>1024)throw new Error("Wrong scale factor: ".concat(t));var r=this.height,i=this.width;return new e({height:t*r,width:t*i}).rect({x:0,y:0},1/0,(function(e){var r=e.x,i=e.y;return n.data[Math.floor(i/t)][Math.floor(r/t)]}))}},{key:"clone",value:function(){var t=this;return new e(this.size()).rect({x:0,y:0},this.size(),(function(e){var n=e.x,r=e.y;return t.data[r][n]}))}},{key:"assertDrawn",value:function(){this.rectRead(0,1/0,(function(e,t){if("boolean"!=typeof t)throw new Error("Invalid color type=".concat(lr(t)))}))}},{key:"toString",value:function(){return this.data.map((function(e){return e.map((function(e){return void 0===e?"?":e?"X":" "})).join("")})).join("\n")}},{key:"toASCII",value:function(){for(var e=this.height,t=this.width,n=this.data,r="",i=0;i<e;i+=2){for(var o=0;o<t;o++){var a=n[i][o],l=i+1>=e||n[i+1][o];a||l?!a&&l?r+="▀":a&&!l?r+="▄":a&&l&&(r+=" "):r+="█"}r+="\n"}return r}},{key:"toTerm",value:function(){var e="[0m",t="[1;47m  ".concat(e),n="[40m  ".concat(e);return this.data.map((function(e){return e.map((function(e){return e?n:t})).join("")})).join("\n")}},{key:"toSVG",value:function(){var e='<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(this.width," ").concat(this.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg">');return this.rectRead(0,1/0,(function(t,n){var r=t.x,i=t.y;n&&(e+='<rect x="'.concat(r,'" y="').concat(i,'" width="1" height="1" />'))})),e+="</svg>"}},{key:"toGIF",value:function(){var e=function(e){return[255&e,e>>>8&255]},t=[].concat(ts(e(this.width)),ts(e(this.height))),n=[];this.rectRead(0,1/0,(function(e,t){return n.push(+(!0===t))}));for(var r=126,i=[71,73,70,56,55,97].concat(ts(t),[246,0,0,255,255,255],ts(yX(381,0)),[44,0,0,0,0],ts(t),[0,7]),o=Math.floor(n.length/r),a=0;a<o;a++)i.push.apply(i,[127,128].concat(ts(n.slice(r*a,r*(a+1)).map((function(e){return+e})))));return i.push.apply(i,[n.length%r+1,128].concat(ts(n.slice(o*r).map((function(e){return+e}))))),i.push(1,129,0,59),new Uint8Array(i)}},{key:"toImage",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.size(),n=t.height,r=t.width,i=new Uint8Array(n*r*(e?3:4)),o=0,a=0;a<n;a++)for(var l=0;l<r;l++){var u=this.data[a][l]?0:255;i[o++]=u,i[o++]=u,i[o++]=u,e||(i[o++]=255)}return{height:n,width:r,data:i}}}],[{key:"size",value:function(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error("Bitmap: wrong height=".concat(e.height," (").concat(lr(e.height),")"));if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error("Bitmap: wrong width=".concat(e.width," (").concat(lr(e.width),")"));return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}},{key:"fromString",value:function(t){var n,r,i=(t=t.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),o=i.length,a=new Array(o),l=pX(i);try{for(l.s();!(r=l.n()).done;){var u=r.value.split("").map((function(e){if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw new Error("Bitmap.fromString: unknown symbol=".concat(e))}));if(n&&u.length!==n)throw new Error("Bitmap.fromString different row sizes: width=".concat(n," cur=").concat(u.length));n=u.length,a.push(u)}}catch(e){l.e(e)}finally{l.f()}return n||(n=0),new e({height:o,width:n},a)}}])}(),kX=["low","medium","quartile","high"],CX=["numeric","alphanumeric","byte","kanji","eci"],SX=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],OX={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},EX={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},IX={size:{encode:function(e){return 21+4*(e-1)},decode:function(e){return(e-17)/4}},sizeType:function(e){return Math.floor((e+7)/17)},alignmentPatterns:function(e){if(1===e)return[];var t=IX.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28),i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);for(var o=[6],a=1;a<r;a++)o.push(t-(r-a)*i);return o.push(t),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits:function(e,t){for(var n=IX.ECCode[e]<<3|t,r=n,i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^IX.formatMask},versionBits:function(e){for(var t=e,n=0;n<12;n++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:_X("0123456789"),alphanumerc:_X("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:function(e,t){return{numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][IX.sizeType(e)]},modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity:function(e,t){var n=SX[e-1],r=OX[t][e-1],i=EX[t][e-1],o=Math.floor(n/i)-r,a=i-n%i;return{words:r,numBlocks:i,shortBlocks:a,blockLen:o,capacity:8*(n-r*i),total:(r+o)*i+i-a}}},PX=[function(e,t){return(e+t)%2==0},function(e,t){return t%2==0},function(e,t){return e%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return((e+t)%2+e*t%3)%2==0}],MX={tables:function(e){for(var t=yX(256,0),n=yX(256,0),r=0,i=1;r<256;r++)t[r]=i,n[i]=r,256&(i<<=1)&&(i^=285);return{exp:t,log:n}}(),exp:function(e){return MX.tables.exp[e]},log:function(e){if(0===e)throw new Error("GF.log: wrong arg=".concat(e));return MX.tables.log[e]%255},mul:function(e,t){return 0===e||0===t?0:MX.tables.exp[(MX.tables.log[e]+MX.tables.log[t])%255]},add:function(e,t){return e^t},pow:function(e,t){return MX.tables.exp[MX.tables.log[e]*t%255]},inv:function(e){if(0===e)throw new Error("GF.inverse: wrong arg=".concat(e));return MX.tables.exp[255-MX.tables.log[e]]},polynomial:function(e){if(0==e.length)throw new Error("GF.polymomial: wrong length");if(0!==e[0])return e;for(var t=0;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial:function(e,t){if(e<0)throw new Error("GF.monomial: wrong degree=".concat(e));if(0==t)return[0];var n=yX(e+1,0);return n[0]=t,MX.polynomial(n)},degree:function(e){return e.length-1},coefficient:function(e,t){return e[MX.degree(e)-t]},mulPoly:function(e,t){if(0===e[0]||0===t[0])return[0];for(var n=yX(e.length+t.length-1,0),r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n[r+i]=MX.add(n[r+i],MX.mul(e[r],t[i]));return MX.polynomial(n)},mulPolyScalar:function(e,t){if(0==t)return[0];if(1==t)return e;for(var n=yX(e.length,0),r=0;r<e.length;r++)n[r]=MX.mul(e[r],t);return MX.polynomial(n)},mulPolyMonomial:function(e,t,n){if(t<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(0==n)return[0];for(var r=yX(e.length+t,0),i=0;i<e.length;i++)r[i]=MX.mul(e[i],n);return MX.polynomial(r)},addPoly:function(e,t){if(0===e[0])return t;if(0===t[0])return e;var n=e,r=t;if(n.length>r.length){var i=[r,n];n=i[0],r=i[1]}for(var o=yX(r.length,0),a=r.length-n.length,l=r.slice(0,a),u=0;u<l.length;u++)o[u]=l[u];for(var c=a;c<r.length;c++)o[c]=MX.add(n[c-a],r[c]);return MX.polynomial(o)},remainderPoly:function(e,t){for(var n=Array.from(e),r=0;r<e.length-t.length+1;r++){var i=n[r];if(0!==i)for(var o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=MX.add(n[r+o],MX.mul(t[o],i)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly:function(e){for(var t=[1],n=0;n<e;n++)t=MX.mulPoly(t,[1,MX.pow(2,n)]);return t},evalPoly:function(e,t){if(0==t)return MX.coefficient(e,0);for(var n=e[0],r=1;r<e.length;r++)n=MX.add(MX.mul(t,n),e[r]);return n},euclidian:function(e,t,n){if(MX.degree(e)<MX.degree(t)){var r=[t,e];e=r[0],t=r[1]}for(var i=e,o=t,a=[0],l=[1];2*MX.degree(o)>=n;){var u=i,c=a;if(a=l,0===(i=o)[0])throw new Error("rLast[0] === 0");o=u;for(var s=[0],d=MX.inv(i[0]);MX.degree(o)>=MX.degree(i)&&0!==o[0];){var f=MX.degree(o)-MX.degree(i),h=MX.mul(o[0],d);s=MX.addPoly(s,MX.monomial(f,h)),o=MX.addPoly(o,MX.mulPolyMonomial(i,f,h))}if(s=MX.mulPoly(s,a),l=MX.addPoly(s,c),MX.degree(o)>=MX.degree(i))throw new Error("Division failed r: ".concat(o,", rLast: ").concat(i))}var p=MX.coefficient(l,0);if(0==p)throw new Error("sigmaTilde(0) was zero");var v=MX.inv(p);return[MX.mulPolyScalar(l,v),MX.mulPolyScalar(o,v)]}};function RX(e,t){var n,r=IX.capacity(e,t),i=r.words,o=r.shortBlocks,a=r.numBlocks,l=r.blockLen,u=r.total,c=(n=i,{encode:function(e){var t=MX.divisorPoly(n),r=Array.from(e);return r.push.apply(r,ts(t.slice(0,-1).fill(0))),Uint8Array.from(MX.remainderPoly(r,t))},decode:function(e){for(var t=e.slice(),r=MX.polynomial(Array.from(e)),i=yX(n,0),o=!1,a=0;a<n;a++){var l=MX.evalPoly(r,MX.exp(a));i[i.length-1-a]=l,0!==l&&(o=!0)}if(!o)return t;i=MX.polynomial(i);for(var u=MX.monomial(n,1),c=nY(MX.euclidian(u,i,n),2),s=c[0],d=c[1],f=yX(MX.degree(s),0),h=0,p=1;p<256&&h<f.length;p++)0===MX.evalPoly(s,p)&&(f[h++]=MX.inv(p));if(h!==f.length)throw new Error("RS.decode: wrong errors number");for(var v=0;v<f.length;v++){var g=t.length-1-MX.log(f[v]);if(g<0)throw new Error("RS.decode: wrong error location");for(var m=MX.inv(f[v]),y=1,b=0;b<f.length;b++)v!==b&&(y=MX.mul(y,MX.add(1,MX.mul(f[b],m))));t[g]=MX.add(t[g],MX.mul(MX.evalPoly(d,m),MX.inv(y)))}return t}});return{encode:function(e){for(var t=[],n=[],r=0;r<a;r++){var i=l+(r<o?0:1);t.push(e.subarray(0,i)),n.push(c.encode(e.subarray(0,i))),e=e.subarray(i)}var u=bX.apply(void 0,t),s=bX.apply(void 0,n),d=new Uint8Array(u.length+s.length);return d.set(u),d.set(s,u.length),d},decode:function(e){if(e.length!==u)throw new Error("interleave.decode: len(data)=".concat(e.length,", total=").concat(u));for(var t=[],n=0;n<a;n++){var r=n<o;t.push(new Uint8Array(i+l+(r?0:1)))}for(var s=0,d=0;d<l;d++)for(var f=0;f<a;f++)t[f][d]=e[s++];for(var h=o;h<a;h++)t[h][l]=e[s++];for(var p=l;p<l+i;p++)for(var v=0;v<a;v++){var g=v<o;t[v][p+(g?0:1)]=e[s++]}for(var m=[],y=0,b=t;y<b.length;y++){var w=b[y];m.push.apply(m,ts(Array.from(c.decode(w)).slice(0,-i)))}return Uint8Array.from(m)}}}function AX(e,t,n,r){var i,o="",a=n.length;if("numeric"===r){for(var l=IX.alphabet.numeric.decode(n.split("")),u=l.length,c=0;c<u-2;c+=3)o+=gX(100*l[c]+10*l[c+1]+l[c+2],10);u%3==1?o+=gX(l[u-1],4):u%3==2&&(o+=gX(10*l[u-2]+l[u-1],7))}else if("alphanumeric"===r){for(var s=IX.alphabet.alphanumerc.decode(n.split("")),d=s.length,f=0;f<d-1;f+=2)o+=gX(45*s[f]+s[f+1],11);d%2==1&&(o+=gX(s[d-1],6))}else{if("byte"!==r)throw new Error("encode: unsupported type");var h=(i=n,(new TextEncoder).encode(i));a=h.length,o=Array.from(h).map((function(e){return gX(e,8)})).join("")}var p=IX.capacity(e,t).capacity,v=gX(a,IX.lengthBits(e,r)),g=IX.modeBits[r]+v+o;if(g.length>p)throw new Error("Capacity overflow");(g+="0".repeat(Math.min(4,Math.max(0,p-g.length)))).length%8&&(g+="0".repeat(8-g.length%8));for(var m="1110110000010001",y=0;g.length!==p;y++)g+=m[y%16];var b=Uint8Array.from(g.match(/(.{8})/g).map((function(e){return Number("0b".concat(e))})));return RX(e,t).encode(b)}function jX(e,t,n,r){var i=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=IX.size.encode(e),o=new xX(i+2),a=new xX(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);o=(o=o.embed(0,a).embed({x:-a.width,y:0},a).embed({x:0,y:-a.height},a)).rectSlice(1,i);var l,u=new xX(1).rect(0,1,!0).border(1,!1).border(1,!0),c=IX.alignmentPatterns(e),s=pX(c);try{for(s.s();!(l=s.n()).done;){var d,f=l.value,h=pX(c);try{for(h.s();!(d=h.n()).done;){var p=d.value;void 0===o.data[f][p]&&o.embed({x:p-2,y:f-2},u)}}catch(e){h.e(e)}finally{h.f()}}}catch(e){s.e(e)}finally{s.f()}o=o.hLine({x:0,y:6},1/0,(function(e,t){var n=e.x;return e.y,void 0===t?n%2==0:t})).vLine({x:6,y:0},1/0,(function(e,t){e.x;var n=e.y;return void 0===t?n%2==0:t}));for(var v=IX.formatBits(t,n),g=function(e){return!r&&1==(v>>e&1)},m=0;m<6;m++)o.data[m][8]=g(m);for(var y=6;y<8;y++)o.data[y+1][8]=g(y);for(var b=8;b<15;b++)o.data[i-15+b][8]=g(b);for(var w=0;w<8;w++)o.data[8][i-w-1]=g(w);for(var _=8;_<9;_++)o.data[8][15-_-1+1]=g(_);for(var x=9;x<15;x++)o.data[8][15-x-1]=g(x);if(o.data[i-8][8]=!r,e>=7)for(var k=IX.versionBits(e),C=0;C<18;C+=1){var S=!r&&1==(k>>C&1),O=Math.floor(C/3),E=C%3+i-8-3;o.data[O][E]=S,o.data[E][O]=S}return o}(e,t,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),o=0,a=8*n.length;if(function(e,t,n){for(var r=e.height,i=PX[t],o=-1,a=r-1,l=r-1;l>0;l-=2){for(6==l&&(l=5);;a+=o){for(var u=0;u<2;u+=1){var c=l-u;void 0===e.data[a][c]&&n(c,a,i(c,a))}if(a+o<0||a+o>=r)break}o=-o}}(i,r,(function(e,t,r){var l=!1;o<a&&(l=0!=(n[o>>>3]>>(7-o&7)&1),o++),i.data[t][e]=l!==r})),o!==a)throw new Error("QR: bytes left after draw");return i}function DX(e){var t=e.inverse(),n=function(e){for(var t=0,n=0,r=1,i=void 0;n<e.length;n++)i===e[n]&&(r++,n!==e.length-1)||(r>=5&&(t+=r-5+3),i=e[n],r=1);return t},r=0;e.data.forEach((function(e){return r+=n(e)})),t.data.forEach((function(e){return r+=n(e)}));for(var i=0,o=e.data,a=e.width-1,l=e.height-1,u=0;u<a;u++)for(var c=0;c<l;c++){var s=u+1,d=c+1;o[u][c]===o[s][c]&&o[s][c]===o[u][d]&&o[s][c]===o[s][d]&&(i+=3)}var f,h=function(e){for(var t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[].concat(t,n),i=[].concat(n,t),o=0,a=0;a<e.length;a++)wX(e,r,a)&&(o+=40),wX(e,i,a)&&(o+=40);return o},p=0,v=pX(e.data);try{for(v.s();!(f=v.n()).done;){p+=h(f.value)}}catch(e){v.e(e)}finally{v.f()}var g,m=pX(t.data);try{for(m.s();!(g=m.n()).done;){p+=h(g.value)}}catch(e){m.e(e)}finally{m.f()}var y=0;e.rectRead(0,1/0,(function(e,t){return y+=t?1:0}));var b=y/(e.height*e.width)*100,w=10*Math.floor(Math.abs(b-50)/5);return r+i+p+w}function TX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0!==n.ecc?n.ecc:"medium";!function(e){if(!kX.includes(e))throw new Error("Invalid error correction mode=".concat(e,". Expected: ").concat(kX))}(r);var i=void 0!==n.encoding?n.encoding:function(e){var t,n="numeric",r=pX(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!IX.alphabet.numeric.has(i)&&(n="alphanumeric",!IX.alphabet.alphanumerc.has(i)))return"byte"}}catch(e){r.e(e)}finally{r.f()}return n}(e);!function(e){if(!CX.includes(e))throw new Error("Encoding: invalid mode=".concat(e,". Expected: ").concat(CX));if("kanji"===e||"eci"===e)throw new Error("Encoding: ".concat(e," is not supported (yet?)."))}(i),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!PX[e])throw new Error("Invalid mask=".concat(e,". Expected number [0..7]"))}(n.mask);var o,a=n.version,l=new Error("Unknown error");if(void 0!==a)!function(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw new Error("Invalid version=".concat(e,". Expected number [1..40]"))}(a),o=AX(a,r,e,i);else for(var u=1;u<=40;u++)try{o=AX(u,r,e,i),a=u;break}catch(e){l=e}if(!a||!o)throw l;var c=function(e,t,n,r){if(void 0===r){for(var i=(l=1/0,{add:function(e,t){e>=l||(a=t,l=e)},get:function(){return a},score:function(){return l}}),o=0;o<PX.length;o++)i.add(DX(jX(e,t,n,o,!0)),o);r=i.get()}var a,l;if(void 0===r)throw new Error("Cannot find mask");return jX(e,t,n,r)}(a,r,o,n.mask);c.assertDrawn();var s=void 0===n.border?2:n.border;if(!Number.isSafeInteger(s))throw new Error("Wrong border type=".concat(lr(s)));if(c=c.border(s,!1),void 0!==n.scale&&(c=c.scale(n.scale)),"raw"===t)return c.data;if("ascii"===t)return c.toASCII();if("svg"===t)return c.toSVG();if("gif"===t)return c.toGIF();if("term"===t)return c.toTerm();throw new Error("Unknown output: ".concat(t))}var FX,NX={exports:{}},LX={};NX.exports=function(){if(FX)return LX;FX=1;var e=u.a,t=60103;if(LX.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;t=n("react.element"),LX.Fragment=n("react.fragment")}var r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,a){var l,u={},c=null,s=null;for(l in void 0!==a&&(c=""+a),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(s=n.ref),n)i.call(n,l)&&!o.hasOwnProperty(l)&&(u[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===u[l]&&(u[l]=n[l]);return{$$typeof:t,type:e,key:c,ref:s,props:u,_owner:r.current}}return LX.jsx=a,LX.jsxs=a,LX}();var BX=NX.exports;const VX=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var zX=(e=>(e[e.DATA=0]="DATA",e[e.POS_CENTER=1]="POS_CENTER",e[e.POS_OTHER=2]="POS_OTHER",e[e.ALIGN_CENTER=3]="ALIGN_CENTER",e[e.ALIGN_OTHER=4]="ALIGN_OTHER",e[e.TIMING=5]="TIMING",e[e.FORMAT=6]="FORMAT",e[e.VERSION=7]="VERSION",e))(zX||{});const HX="M32.048565,-1.29480038e-15 L67.951435,1.29480038e-15 C79.0954192,-7.52316311e-16 83.1364972,1.16032014 87.2105713,3.3391588 C91.2846454,5.51799746 94.4820025,8.71535463 96.6608412,12.7894287 C98.8396799,16.8635028 100,20.9045808 100,32.048565 L100,67.951435 C100,79.0954192 98.8396799,83.1364972 96.6608412,87.2105713 C94.4820025,91.2846454 91.2846454,94.4820025 87.2105713,96.6608412 C83.1364972,98.8396799 79.0954192,100 67.951435,100 L32.048565,100 C20.9045808,100 16.8635028,98.8396799 12.7894287,96.6608412 C8.71535463,94.4820025 5.51799746,91.2846454 3.3391588,87.2105713 C1.16032014,83.1364972 5.01544207e-16,79.0954192 -8.63200256e-16,67.951435 L8.63200256e-16,32.048565 C-5.01544207e-16,20.9045808 1.16032014,16.8635028 3.3391588,12.7894287 C5.51799746,8.71535463 8.71535463,5.51799746 12.7894287,3.3391588 C16.8635028,1.16032014 20.9045808,7.52316311e-16 32.048565,-1.29480038e-15 Z";let WX=0;function UX(e,t){return WX=(9301*WX+49297)%233280,e+WX/233280*(t-e)}function GX(e){const[t,n]=Object(l.useMemo)((()=>function(e,t){const n=TX(e,"raw",{border:0,scale:1,...t}),r=n.length,i=VX[(r-17)/4-1],o=[[3,3],[3,r-4],[r-4,3]];let a=new Array(r);for(let e=0;e<r;e++)a[e]=new Array(r).fill(0);for(let e=8;e<r-7;e++)a[e][6]=a[6][e]=5;for(let e=0;e<o.length;e++){a[o[e][0]][o[e][1]]=1;for(let t=-4;t<=4;t++)for(let n=-4;n<=4;n++)o[e][0]+t>=0&&o[e][0]+t<r&&o[e][1]+n>=0&&o[e][1]+n<r&&(0===t&&0===n||(a[o[e][0]+t][o[e][1]+n]=2))}for(let e=0;e<i.length;e++)for(let t=0;t<i.length;t++)if(0==a[i[e]][i[t]]){a[i[e]][i[t]]=3;for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)0===n&&0===r||0!=a[i[e]+n][i[t]+r]||(a[i[e]+n][i[t]+r]=4)}for(let e=0;e<=8;e++)6!==e&&(a[e][8]=a[8][e]=6),e<7&&(a[r-e-1][8]=6),e<8&&(a[8][r-e-1]=6);for(let e=r-11;e<=r-9;e++)for(let t=0;t<=5;t++)a[e][t]=a[t][e]=7;return[n,a]}(e.url,{ecc:e.correct_level})),[e.url,e.correct_level]),r=Object(l.useMemo)((()=>{const r=[],i=1.01*e.content_point_scale,o=i/2,a=(1-i)/2;let l=0;const u=[3,-3],c=[3,-3];for(let s=0;s<t.length;s++)for(let d=0;d<t.length;d++)if(t[d][s])switch(n[d][s]){case zX.POS_CENTER:if("square"===e.positioning_point_type)r.push(BX.jsx("rect",{fill:e.positioning_point_color,x:d+.5-1.5,y:s+.5-1.5,width:3,height:3},l++)),r.push(BX.jsx("rect",{fill:"none",strokeWidth:"1",stroke:e.positioning_point_color,x:d+.5-3,y:s+.5-3,width:6,height:6},l++));else if("circle"===e.positioning_point_type)r.push(BX.jsx("circle",{fill:e.positioning_point_color,cx:d+.5,cy:s+.5,r:1.5},l++)),r.push(BX.jsx("circle",{fill:"none",strokeWidth:"1",stroke:e.positioning_point_color,cx:d+.5,cy:s+.5,r:3},l++));else if("planet"===e.positioning_point_type){r.push(BX.jsx("circle",{fill:e.positioning_point_color,cx:d+.5,cy:s+.5,r:1.5},l++)),r.push(BX.jsx("circle",{fill:"none",strokeWidth:"0.15",strokeDasharray:"0.5,0.5",stroke:e.positioning_point_color,cx:d+.5,cy:s+.5,r:3},l++));for(let t=0;t<u.length;t++)r.push(BX.jsx("circle",{fill:e.positioning_point_color,cx:d+u[t]+.5,cy:s+.5,r:.5},l++));for(let t=0;t<c.length;t++)r.push(BX.jsx("circle",{fill:e.positioning_point_color,cx:d+.5,cy:s+c[t]+.5,r:.5},l++))}else"rounded"===e.positioning_point_type&&(r.push(BX.jsx("circle",{fill:e.positioning_point_color,cx:d+.5,cy:s+.5,r:1.5},l++)),r.push(BX.jsx("path",{d:HX,stroke:e.positioning_point_color,strokeWidth:100/6*(1-.75*(1-i)),fill:"none",transform:"translate("+String(d-2.5)+","+String(s-2.5)+") scale("+String(.06)+","+String(.06)+")"},l++)));break;case zX.POS_OTHER:break;case zX.ALIGN_CENTER:case zX.ALIGN_OTHER:case zX.TIMING:default:const t=i>0;if("square"===e.content_point_type){const n=t?i:UX(.3,1),o=t?a:(1-n)/2;r.push(BX.jsx("rect",{opacity:e.content_point_opacity,width:n,height:n,fill:e.content_point_color,x:d+o,y:s+o},l++))}else{const n=t?o:UX(.3,1)/2;r.push(BX.jsx("circle",{opacity:e.content_point_opacity,r:n,fill:e.content_point_color,cx:d+.5,cy:s+.5},l++))}}return r}),[e.content_point_scale,e.positioning_point_type,e.content_point_type,e.positioning_point_color,e.content_point_opacity,e.content_point_color,t,n]),i=e.viewBox||`${-t.length/5} ${-t.length/5} ${7*t.length/5} ${7*t.length/5}`;return BX.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:i,...e,children:r})}function YX(){return YX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YX.apply(null,arguments)}function $X(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var qX="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),KX="aria-",XX="data-";function JX(e,t){return 0===e.indexOf(t)}function ZX(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:uX({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||JX(n,KX))||t.data&&JX(n,XX)||t.attr&&qX.includes(n))&&(r[n]=e[n])})),r}var QX=l.createContext(null),eJ=[];var tJ="data-rc-order",nJ="data-rc-priority",rJ="rc-util-key",iJ=new Map;function oJ(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):rJ}function aJ(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function lJ(e){return Array.from((iJ.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function uJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!CK())return null;var n=t.csp,r=t.prepend,i=t.priority,o=void 0===i?0:i,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),l="prependQueue"===a,u=document.createElement("style");u.setAttribute(tJ,a),l&&o&&u.setAttribute(nJ,"".concat(o)),null!=n&&n.nonce&&(u.nonce=null==n?void 0:n.nonce),u.innerHTML=e;var c=aJ(t),s=c.firstChild;if(r){if(l){var d=(t.styles||lJ(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(tJ)))return!1;var t=Number(e.getAttribute(nJ)||0);return o>=t}));if(d.length)return c.insertBefore(u,d[d.length-1].nextSibling),u}c.insertBefore(u,s)}else c.appendChild(u);return u}function cJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=aJ(t);return(t.styles||lJ(n)).find((function(n){return n.getAttribute(oJ(t))===e}))}function sJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=cJ(e,t);n&&aJ(t).removeChild(n)}function dJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=aJ(n),i=lJ(r),o=uX(uX({},n),{},{styles:i});!function(e,t){var n=iJ.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=uJ("",t),i=r.parentNode;iJ.set(e,i),e.removeChild(r)}}(r,o);var a=cJ(t,o);if(a){var l,u,c;if(null!==(l=o.csp)&&void 0!==l&&l.nonce&&a.nonce!==(null===(u=o.csp)||void 0===u?void 0:u.nonce))a.nonce=null===(c=o.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=uJ(e,o);return s.setAttribute(oJ(o),t),s}function fJ(e){return"undefined"!=typeof document&&e&&e instanceof Element?function(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,i,o=n.style;if(o.position="absolute",o.left="0",o.top="0",o.width="100px",o.height="100px",o.overflow="scroll",e){var a=getComputedStyle(e);o.scrollbarColor=a.scrollbarColor,o.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(e,"::-webkit-scrollbar"),u=parseInt(l.width,10),c=parseInt(l.height,10);try{var s=u?"width: ".concat(l.width,";"):"",d=c?"height: ".concat(l.height,";"):"";dJ("\n#".concat(t,"::-webkit-scrollbar {\n").concat(s,"\n").concat(d,"\n}"),t)}catch(e){console.error(e),r=u,i=c}}document.body.appendChild(n);var f=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,h=e&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),sJ(t),{width:f,height:h}}(e):{width:0,height:0}}var hJ="rc-util-locker-".concat(Date.now()),pJ=0;function vJ(e){var t=!!e,n=nY(l.useState((function(){return pJ+=1,"".concat(hJ,"_").concat(pJ)})),1)[0];OK((function(){if(t){var e=fJ(document.body).width,r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;dJ("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else sJ(n);return function(){sJ(n)}}),[t,n])}var gJ=function(e){return!1!==e&&(CK()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},mJ=l.forwardRef((function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer;e.debug;var o=e.autoDestroy,a=void 0===o||o,u=e.children,s=nY(l.useState(n),2),d=s[0],f=s[1],h=d||n;l.useEffect((function(){(a||n)&&f(n)}),[n,a]);var p=nY(l.useState((function(){return gJ(i)})),2),v=p[0],g=p[1];l.useEffect((function(){var e=gJ(i);g(null!=e?e:null)}));var m=function(e,t){var n=nY(l.useState((function(){return CK()?document.createElement("div"):null})),1)[0],r=l.useRef(!1),i=l.useContext(QX),o=nY(l.useState(eJ),2),a=o[0],u=o[1],c=i||(r.current?void 0:function(e){u((function(t){return[e].concat(ts(t))}))});function s(){n.parentElement||document.body.appendChild(n),r.current=!0}function d(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return OK((function(){return e?i?i(s):s():d(),d}),[e]),OK((function(){a.length&&(a.forEach((function(e){return e()})),u(eJ))}),[a]),[n,c]}(h&&!v),y=nY(m,2),b=y[0],w=y[1],_=null!=v?v:b;vJ(r&&n&&CK()&&(_===b||_===document.body));var x=null;u&&iX(u)&&t&&(x=u.ref);var k=rX(x,t);if(!h||!CK()||void 0===v)return null;var C=!1===_||!1,S=u;return t&&(S=l.cloneElement(u,{ref:k})),l.createElement(QX.Provider,{value:w},C?S:Object(c.createPortal)(S,_))}));function yJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return u.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(yJ(e)):eX(e)&&e.props?n=n.concat(yJ(e.props.children,t)):n.push(e))})),n}function bJ(e){return e instanceof HTMLElement||e instanceof SVGElement}function wJ(e){var t,n=function(e){return e&&"object"===lr(e)&&bJ(e.nativeElement)?e.nativeElement:bJ(e)?e:null}(e);return n||(e instanceof u.a.Component?null===(t=s.a.findDOMNode)||void 0===t?void 0:t.call(s.a,e):null)}var _J=l.createContext(null);var xJ=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),kJ="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,CJ=void 0!==Hn&&Hn.Math===Math?Hn:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),SJ="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(CJ):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var OJ=["top","right","bottom","left","width","height","size","weight"],EJ="undefined"!=typeof MutationObserver,IJ=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function a(){SJ(o)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){kJ&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),EJ?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){kJ&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;OJ.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),PJ=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},MJ=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||CJ},RJ=NJ(0,0,0,0);function AJ(e){return parseFloat(e)||0}function jJ(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+AJ(e["border-"+n+"-width"])}),0)}function DJ(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return RJ;var r=MJ(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=AJ(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,l=AJ(r.width),u=AJ(r.height);if("border-box"===r.boxSizing&&(Math.round(l+o)!==t&&(l-=jJ(r,"left","right")+o),Math.round(u+a)!==n&&(u-=jJ(r,"top","bottom")+a)),!function(e){return e===MJ(e).document.documentElement}(e)){var c=Math.round(l+o)-t,s=Math.round(u+a)-n;1!==Math.abs(c)&&(l-=c),1!==Math.abs(s)&&(u-=s)}return NJ(i.left,i.top,l,u)}var TJ="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof MJ(e).SVGGraphicsElement}:function(e){return e instanceof MJ(e).SVGElement&&"function"==typeof e.getBBox};function FJ(e){return kJ?TJ(e)?function(e){var t=e.getBBox();return NJ(0,0,t.width,t.height)}(e):DJ(e):RJ}function NJ(e,t,n,r){return{x:e,y:t,width:n,height:r}}var LJ=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=NJ(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=FJ(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),BJ=function(){return function(e,t){var n,r,i,o,a,l,u,c=(r=(n=t).x,i=n.y,o=n.width,a=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(l.prototype),PJ(u,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),u);PJ(this,{target:e,contentRect:c})}}(),VJ=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new xJ,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof MJ(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new LJ(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof MJ(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new BJ(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),zJ="undefined"!=typeof WeakMap?new WeakMap:new xJ,HJ=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=IJ.getInstance(),r=new VJ(t,n,this);zJ.set(this,r)}}();["observe","unobserve","disconnect"].forEach((function(e){HJ.prototype[e]=function(){var t;return(t=zJ.get(this))[e].apply(t,arguments)}}));var WJ=void 0!==CJ.ResizeObserver?CJ.ResizeObserver:HJ,UJ=new Map;var GJ=new WJ((function(e){e.forEach((function(e){var t,n=e.target;null===(t=UJ.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));function YJ(e){var t=eY();return function(){var n,r=Ch(e);if(t){var i=Ch(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kh(this,n)}}var $J=function(e){Oh(n,e);var t=YJ(n);function n(){return us(this,n),t.apply(this,arguments)}return ls(n,[{key:"render",value:function(){return this.props.children}}]),n}(l.Component);function qJ(e,t){var n=e.children,r=e.disabled,i=l.useRef(null),o=l.useRef(null),a=l.useContext(_J),u="function"==typeof n,c=u?n(i):n,s=l.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!u&&l.isValidElement(c)&&iX(c),f=d?aX(c):null,h=rX(f,i),p=function(){var e;return wJ(i.current)||(i.current&&"object"===lr(i.current)?wJ(null===(e=i.current)||void 0===e?void 0:e.nativeElement):null)||wJ(o.current)};l.useImperativeHandle(t,(function(){return p()}));var v=l.useRef(e);v.current=e;var g=l.useCallback((function(e){var t=v.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,l=i.height,u=e.offsetWidth,c=e.offsetHeight,d=Math.floor(o),f=Math.floor(l);if(s.current.width!==d||s.current.height!==f||s.current.offsetWidth!==u||s.current.offsetHeight!==c){var h={width:d,height:f,offsetWidth:u,offsetHeight:c};s.current=h;var p=u===Math.round(o)?o:u,g=c===Math.round(l)?l:c,m=uX(uX({},h),{},{offsetWidth:p,offsetHeight:g});null==a||a(m,e,r),n&&Promise.resolve().then((function(){n(m,e)}))}}),[]);return l.useEffect((function(){var e=p();return e&&!r&&function(e,t){UJ.has(e)||(UJ.set(e,new Set),GJ.observe(e)),UJ.get(e).add(t)}(e,g),function(){return function(e,t){UJ.has(e)&&(UJ.get(e).delete(t),UJ.get(e).size||(GJ.unobserve(e),UJ.delete(e)))}(e,g)}}),[i.current,r]),l.createElement($J,{ref:o},d?l.cloneElement(c,{ref:h}):c)}var KJ=l.forwardRef(qJ);function XJ(e,t){var n=e.children;return("function"==typeof n?[n]:yJ(n)).map((function(n,r){var i=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return l.createElement(KJ,YX({},e,{key:i,ref:0===r?t:void 0}),n)}))}var JJ=l.forwardRef(XJ);function ZJ(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function QJ(e){return function(e){return ZJ(e)instanceof ShadowRoot}(e)?ZJ(e):null}JJ.Collection=function(e){var t=e.children,n=e.onBatchResize,r=l.useRef(0),i=l.useRef([]),o=l.useContext(_J),a=l.useCallback((function(e,t,a){r.current+=1;var l=r.current;i.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){l===r.current&&(null==n||n(i.current),i.current=[])})),null==o||o(e,t,a)}),[n,o]);return l.createElement(_J.Provider,{value:a},t)};var eZ=0,tZ=uX({},l).useId;const nZ=tZ?function(e){var t=tZ();return e||t}:function(e){var t=nY(l.useState("ssr-id"),2),n=t[0],r=t[1];return l.useEffect((function(){var e=eZ;eZ+=1,r("rc_unique_".concat(e))}),[]),e||n},rZ=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};var iZ=l.createContext({}),oZ=function(e){Oh(n,e);var t=YJ(n);function n(){return us(this,n),t.apply(this,arguments)}return ls(n,[{key:"render",value:function(){return this.props.children}}]),n}(l.Component);var aZ="none",lZ="appear",uZ="enter",cZ="leave",sZ="none",dZ="prepare",fZ="start",hZ="active",pZ="end",vZ="prepared";function gZ(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var mZ,yZ,bZ,wZ=(mZ=CK(),yZ="undefined"!=typeof window?window:{},bZ={animationend:gZ("Animation","AnimationEnd"),transitionend:gZ("Transition","TransitionEnd")},mZ&&("AnimationEvent"in yZ||delete bZ.animationend.animation,"TransitionEvent"in yZ||delete bZ.transitionend.transition),bZ),_Z={};if(CK()){var xZ=document.createElement("div");_Z=xZ.style}var kZ={};function CZ(e){if(kZ[e])return kZ[e];var t=wZ[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in _Z)return kZ[e]=t[o],kZ[e]}return""}var SZ=CZ("animationend"),OZ=CZ("transitionend"),EZ=!(!SZ||!OZ),IZ=SZ||"animationend",PZ=OZ||"transitionend";function MZ(e,t){return e?"object"===lr(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const RZ=function(e){var t=Object(l.useRef)();function n(t){t&&(t.removeEventListener(PZ,e),t.removeEventListener(IZ,e))}return l.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(PZ,e),r.addEventListener(IZ,e),t.current=r)},n]};var AZ=CK()?l.useLayoutEffect:l.useEffect,jZ=function(e){return+setTimeout(e,16)},DZ=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(jZ=function(e){return window.requestAnimationFrame(e)},DZ=function(e){return window.cancelAnimationFrame(e)});var TZ=0,FZ=new Map;function NZ(e){FZ.delete(e)}var LZ=function(e){var t=TZ+=1;return function n(r){if(0===r)NZ(t),e();else{var i=jZ((function(){n(r-1)}));FZ.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};LZ.cancel=function(e){var t=FZ.get(e);return NZ(e),DZ(t)};var BZ=[dZ,fZ,hZ,pZ],VZ=[dZ,vZ],zZ=!1,HZ=!0;function WZ(e){return e===hZ||e===pZ}const UZ=function(e,t,n){var r=nY(IK(sZ),2),i=r[0],o=r[1],a=function(){var e=l.useRef(null);function t(){LZ.cancel(e.current)}return l.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=LZ((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),u=nY(a,2),c=u[0],s=u[1];var d=t?VZ:BZ;return AZ((function(){if(i!==sZ&&i!==pZ){var e=d.indexOf(i),t=d[e+1],r=n(i);r===zZ?o(t,!0):t&&c((function(e){function n(){e.isCanceled()||o(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,i]),l.useEffect((function(){return function(){s()}}),[]),[function(){o(dZ,!0)},i]};function GZ(e,t,n,r){var i,o,a,u=r.motionEnter,c=void 0===u||u,s=r.motionAppear,d=void 0===s||s,f=r.motionLeave,h=void 0===f||f,p=r.motionDeadline,v=r.motionLeaveImmediately,g=r.onAppearPrepare,m=r.onEnterPrepare,y=r.onLeavePrepare,b=r.onAppearStart,w=r.onEnterStart,_=r.onLeaveStart,x=r.onAppearActive,k=r.onEnterActive,C=r.onLeaveActive,S=r.onAppearEnd,O=r.onEnterEnd,E=r.onLeaveEnd,I=r.onVisibleChanged,P=nY(IK(),2),M=P[0],R=P[1],A=(i=aZ,o=nY(l.useReducer((function(e){return e+1}),0),2)[1],a=l.useRef(i),[kK((function(){return a.current})),kK((function(e){a.current="function"==typeof e?e(a.current):e,o()}))]),j=nY(A,2),D=j[0],T=j[1],F=nY(IK(null),2),N=F[0],L=F[1],B=D(),V=Object(l.useRef)(!1),z=Object(l.useRef)(null);function H(){return n()}var W=Object(l.useRef)(!1);function U(){T(aZ),L(null,!0)}var G=kK((function(e){var t=D();if(t!==aZ){var n=H();if(!e||e.deadline||e.target===n){var r,i=W.current;t===lZ&&i?r=null==S?void 0:S(n,e):t===uZ&&i?r=null==O?void 0:O(n,e):t===cZ&&i&&(r=null==E?void 0:E(n,e)),i&&!1!==r&&U()}}})),Y=nY(RZ(G),1)[0],$=function(e){switch(e){case lZ:return os(os(os({},dZ,g),fZ,b),hZ,x);case uZ:return os(os(os({},dZ,m),fZ,w),hZ,k);case cZ:return os(os(os({},dZ,y),fZ,_),hZ,C);default:return{}}},q=l.useMemo((function(){return $(B)}),[B]),K=nY(UZ(B,!e,(function(e){if(e===dZ){var t=q[dZ];return t?t(H()):zZ}var n;J in q&&L((null===(n=q[J])||void 0===n?void 0:n.call(q,H(),null))||null);return J===hZ&&B!==aZ&&(Y(H()),p>0&&(clearTimeout(z.current),z.current=setTimeout((function(){G({deadline:!0})}),p))),J===vZ&&U(),HZ})),2),X=K[0],J=K[1],Z=WZ(J);W.current=Z;var Q=Object(l.useRef)(null);AZ((function(){if(!V.current||Q.current!==t){R(t);var n,r=V.current;V.current=!0,!r&&t&&d&&(n=lZ),r&&t&&c&&(n=uZ),(r&&!t&&h||!r&&v&&!t&&h)&&(n=cZ);var i=$(n);n&&(e||i[dZ])?(T(n),X()):T(aZ),Q.current=t}}),[t]),Object(l.useEffect)((function(){(B===lZ&&!d||B===uZ&&!c||B===cZ&&!h)&&T(aZ)}),[d,c,h]),Object(l.useEffect)((function(){return function(){V.current=!1,clearTimeout(z.current)}}),[]);var ee=l.useRef(!1);Object(l.useEffect)((function(){M&&(ee.current=!0),void 0!==M&&B===aZ&&((ee.current||M)&&(null==I||I(M)),ee.current=!0)}),[M,B]);var te=N;return q[dZ]&&J===fZ&&(te=uX({transition:"none"},te)),[B,J,te,null!=M?M:t]}const YZ=function(e){var t=e;"object"===lr(e)&&(t=e.transitionSupport);var n=l.forwardRef((function(e,n){var r=e.visible,i=void 0===r||r,o=e.removeOnLeave,a=void 0===o||o,u=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,h=function(e,n){return!(!e.motionName||!t||!1===n)}(e,l.useContext(iZ).motion),p=Object(l.useRef)(),v=Object(l.useRef)();var g=nY(GZ(h,i,(function(){try{return p.current instanceof HTMLElement?p.current:wJ(v.current)}catch(e){return null}}),e),4),m=g[0],y=g[1],b=g[2],w=g[3],_=l.useRef(w);w&&(_.current=!0);var x,k=l.useCallback((function(e){p.current=e,tX(n,e)}),[n]),C=uX(uX({},f),{},{visible:i});if(c)if(m===aZ)x=w?c(uX({},C),k):!a&&_.current&&d?c(uX(uX({},C),{},{className:d}),k):u||!a&&!d?c(uX(uX({},C),{},{style:{display:"none"}}),k):null;else{var S;y===dZ?S="prepare":WZ(y)?S="active":y===fZ&&(S="start");var O=MZ(s,"".concat(m,"-").concat(S));x=c(uX(uX({},C),{},{className:F()(MZ(s,m),os(os({},O,O&&S),s,"string"==typeof s)),style:b}),k)}else x=null;l.isValidElement(x)&&iX(x)&&(aX(x)||(x=l.cloneElement(x,{ref:k})));return l.createElement(oZ,{ref:v},x)}));return n.displayName="CSSMotion",n}(EZ);var $Z="add",qZ="keep",KZ="remove",XZ="removed";function JZ(e){var t;return uX(uX({},t=e&&"object"===lr(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function ZZ(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(JZ)}var QZ=["component","children","onVisibleChanged","onAllRemoved"],eQ=["status"],tQ=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function nQ(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=e.arrowPos,o=r||{},a=o.className,u=o.content,c=i.x,s=void 0===c?0:c,d=i.y,f=void 0===d?0:d,h=l.useRef();if(!n||!n.points)return null;var p={position:"absolute"};if(!1!==n.autoArrow){var v=n.points[0],g=n.points[1],m=v[0],y=v[1],b=g[0],w=g[1];m!==b&&["t","b"].includes(m)?"t"===m?p.top=0:p.bottom=0:p.top=f,y!==w&&["l","r"].includes(y)?"l"===y?p.left=0:p.right=0:p.left=s}return l.createElement("div",{ref:h,className:F()("".concat(t,"-arrow"),a),style:p},u)}function rQ(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?l.createElement(YZ,YX({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return l.createElement("div",{style:{zIndex:r},className:F()("".concat(t,"-mask"),n)})})):null}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YZ,n=function(e){Oh(r,e);var n=YJ(r);function r(){var e;us(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return os(xh(e=n.call.apply(n,[this].concat(i))),"state",{keyEntities:[]}),os(xh(e),"removeKey",(function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:uX(uX({},e),{},{status:XZ})}))}}),(function(){0===e.state.keyEntities.filter((function(e){return e.status!==XZ})).length&&e.props.onAllRemoved&&e.props.onAllRemoved()}))})),e}return ls(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged;r.onAllRemoved;var u=ZG(r,QZ),c=i||l.Fragment,s={};return tQ.forEach((function(e){s[e]=u[e],delete u[e]})),delete u.keys,l.createElement(c,u,n.map((function(n,r){var i=n.status,u=ZG(n,eQ),c=i===$Z||i===qZ;return l.createElement(t,YX({},s,{key:u.key,visible:c,eventProps:u,onVisibleChanged:function(t){null==a||a(t,{key:u.key}),t||e.removeKey(u.key)}}),(function(e,t){return o(uX(uX({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=ZZ(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=ZZ(e),a=ZZ(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var l=a[o];if(l.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return uX(uX({},e),{},{status:$Z})}))),r=o),n.push(uX(uX({},l),{},{status:qZ})),r+=1,t=!0;break}}t||n.push(uX(uX({},e),{},{status:KZ}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return uX(uX({},e),{},{status:$Z})}))));var l={};return n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1})),Object.keys(l).filter((function(e){return l[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==KZ}))).forEach((function(t){t.key===e&&(t.status=qZ)}))})),n}(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==XZ||e.status!==KZ}))}}}]),r}(l.Component);os(n,"defaultProps",{component:"div"})}(EZ);var iQ=l.memo((function(e){return e.children}),(function(e,t){return t.cache})),oQ=l.forwardRef((function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,a=e.target,u=e.onVisibleChanged,c=e.open,s=e.keepDom,d=e.fresh,f=e.onClick,h=e.mask,p=e.arrow,v=e.arrowPos,g=e.align,m=e.motion,y=e.maskMotion,b=e.forceRender,w=e.getPopupContainer,_=e.autoDestroy,x=e.portal,k=e.zIndex,C=e.onMouseEnter,S=e.onMouseLeave,O=e.onPointerEnter,E=e.onPointerDownCapture,I=e.ready,P=e.offsetX,M=e.offsetY,R=e.offsetR,A=e.offsetB,j=e.onAlign,D=e.onPrepare,T=e.stretch,N=e.targetWidth,L=e.targetHeight,B="function"==typeof n?n():n,V=c||s,z=(null==w?void 0:w.length)>0,H=nY(l.useState(!w||!z),2),W=H[0],U=H[1];if(OK((function(){!W&&z&&a&&U(!0)}),[W,z,a]),!W)return null;var G="auto",Y={left:"-1000vw",top:"-1000vh",right:G,bottom:G};if(I||!c){var $,q=g.points,K=g.dynamicInset||(null===($=g._experimental)||void 0===$?void 0:$.dynamicInset),X=K&&"r"===q[0][1],J=K&&"b"===q[0][0];X?(Y.right=R,Y.left=G):(Y.left=P,Y.right=G),J?(Y.bottom=A,Y.top=G):(Y.top=M,Y.bottom=G)}var Z={};return T&&(T.includes("height")&&L?Z.height=L:T.includes("minHeight")&&L&&(Z.minHeight=L),T.includes("width")&&N?Z.width=N:T.includes("minWidth")&&N&&(Z.minWidth=N)),c||(Z.pointerEvents="none"),l.createElement(x,{open:b||V,getContainer:w&&function(){return w(a)},autoDestroy:_},l.createElement(rQ,{prefixCls:i,open:c,zIndex:k,mask:h,motion:y}),l.createElement(JJ,{onResize:j,disabled:!c},(function(e){return l.createElement(YZ,YX({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(i,"-hidden")},m,{onAppearPrepare:D,onEnterPrepare:D,visible:c,onVisibleChanged:function(e){var t;null==m||null===(t=m.onVisibleChanged)||void 0===t||t.call(m,e),u(e)}}),(function(n,a){var u=n.className,s=n.style,h=F()(i,u,r);return l.createElement("div",{ref:nX(e,t,a),className:h,style:uX(uX(uX(uX({"--arrow-x":"".concat(v.x||0,"px"),"--arrow-y":"".concat(v.y||0,"px")},Y),Z),s),{},{boxSizing:"border-box",zIndex:k},o),onMouseEnter:C,onMouseLeave:S,onPointerEnter:O,onClick:f,onPointerDownCapture:E},p&&l.createElement(nQ,{prefixCls:i,arrow:p,arrowPos:v,align:g}),l.createElement(iQ,{cache:!c&&!d},B))}))})))})),aQ=l.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=iX(n),o=l.useCallback((function(e){tX(t,r?r(e):e)}),[r]),a=rX(o,aX(n));return i?l.cloneElement(n,{ref:a}):n})),lQ=l.createContext(null);function uQ(e){return e?Array.isArray(e)?e:[e]:[]}const cQ=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};function sQ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function dQ(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function fQ(e){return e.ownerDocument.defaultView}function hQ(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=fQ(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function pQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function vQ(e){return pQ(parseFloat(e),0)}function gQ(e,t){var n=uX({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=fQ(e).getComputedStyle(e),r=t.overflow,i=t.overflowClipMargin,o=t.borderTopWidth,a=t.borderBottomWidth,l=t.borderLeftWidth,u=t.borderRightWidth,c=e.getBoundingClientRect(),s=e.offsetHeight,d=e.clientHeight,f=e.offsetWidth,h=e.clientWidth,p=vQ(o),v=vQ(a),g=vQ(l),m=vQ(u),y=pQ(Math.round(c.width/f*1e3)/1e3),b=pQ(Math.round(c.height/s*1e3)/1e3),w=(f-h-g-m)*y,_=(s-d-p-v)*b,x=p*b,k=v*b,C=g*y,S=m*y,O=0,E=0;if("clip"===r){var I=vQ(i);O=I*y,E=I*b}var P=c.x+C-O,M=c.y+x-E,R=P+c.width+2*O-C-S-w,A=M+c.height+2*E-x-k-_;n.left=Math.max(n.left,P),n.top=Math.max(n.top,M),n.right=Math.min(n.right,R),n.bottom=Math.min(n.bottom,A)}})),n}function mQ(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function yQ(e,t){var n=nY(t||[],2),r=n[0],i=n[1];return[mQ(e.width,r),mQ(e.height,i)]}function bQ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function wQ(e,t){var n,r=t[0],i=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===i?e.x:"r"===i?e.x+e.width:e.x+e.width/2,y:n}}function _Q(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var xQ=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const kQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mJ,t=l.forwardRef((function(t,n){var r=t.prefixCls,i=void 0===r?"rc-trigger-popup":r,o=t.children,a=t.action,u=void 0===a?"hover":a,c=t.showAction,s=t.hideAction,d=t.popupVisible,f=t.defaultPopupVisible,h=t.onPopupVisibleChange,p=t.afterPopupVisibleChange,v=t.mouseEnterDelay,g=t.mouseLeaveDelay,m=void 0===g?.1:g,y=t.focusDelay,b=t.blurDelay,w=t.mask,_=t.maskClosable,x=void 0===_||_,k=t.getPopupContainer,C=t.forceRender,S=t.autoDestroy,O=t.destroyPopupOnHide,E=t.popup,I=t.popupClassName,P=t.popupStyle,M=t.popupPlacement,R=t.builtinPlacements,A=void 0===R?{}:R,j=t.popupAlign,D=t.zIndex,T=t.stretch,N=t.getPopupClassNameFromAlign,L=t.fresh,B=t.alignPoint,V=t.onPopupClick,z=t.onPopupAlign,H=t.arrow,W=t.popupMotion,U=t.maskMotion,G=t.popupTransitionName,Y=t.popupAnimation,$=t.maskTransitionName,q=t.maskAnimation,K=t.className,X=t.getTriggerDOMNode,J=ZG(t,xQ),Z=S||O||!1,Q=nY(l.useState(!1),2),ee=Q[0],te=Q[1];OK((function(){te(rZ())}),[]);var ne=l.useRef({}),re=l.useContext(lQ),ie=l.useMemo((function(){return{registerSubPopup:function(e,t){ne.current[e]=t,null==re||re.registerSubPopup(e,t)}}}),[re]),oe=nZ(),ae=nY(l.useState(null),2),le=ae[0],ue=ae[1],ce=l.useRef(null),se=kK((function(e){ce.current=e,bJ(e)&&le!==e&&ue(e),null==re||re.registerSubPopup(oe,e)})),de=nY(l.useState(null),2),fe=de[0],he=de[1],pe=l.useRef(null),ve=kK((function(e){bJ(e)&&fe!==e&&(he(e),pe.current=e)})),ge=l.Children.only(o),me=(null==ge?void 0:ge.props)||{},ye={},be=kK((function(e){var t,n,r=fe;return(null==r?void 0:r.contains(e))||(null===(t=QJ(r))||void 0===t?void 0:t.host)===e||e===r||(null==le?void 0:le.contains(e))||(null===(n=QJ(le))||void 0===n?void 0:n.host)===e||e===le||Object.values(ne.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),we=dQ(i,W,Y,G),_e=dQ(i,U,q,$),xe=nY(l.useState(f||!1),2),ke=xe[0],Ce=xe[1],Se=null!=d?d:ke,Oe=kK((function(e){void 0===d&&Ce(e)}));OK((function(){Ce(d||!1)}),[d]);var Ee=l.useRef(Se);Ee.current=Se;var Ie=l.useRef([]);Ie.current=[];var Pe=kK((function(e){var t;Oe(e),(null!==(t=Ie.current[Ie.current.length-1])&&void 0!==t?t:Se)!==e&&(Ie.current.push(e),null==h||h(e))})),Me=l.useRef(),Re=function(){clearTimeout(Me.current)},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Re(),0===t?Pe(e):Me.current=setTimeout((function(){Pe(e)}),1e3*t)};l.useEffect((function(){return Re}),[]);var je=nY(l.useState(!1),2),De=je[0],Te=je[1];OK((function(e){e&&!Se||Te(!0)}),[Se]);var Fe=nY(l.useState(null),2),Ne=Fe[0],Le=Fe[1],Be=nY(l.useState(null),2),Ve=Be[0],ze=Be[1],He=function(e){ze([e.clientX,e.clientY])},We=function(e,t,n,r,i,o,a){var u=nY(l.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),2),c=u[0],s=u[1],d=l.useRef(0),f=l.useMemo((function(){return t?hQ(t):[]}),[t]),h=l.useRef({});e||(h.current={});var p=kK((function(){if(t&&n&&e){var l,u,c,d,p,v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q,r=j.x+e,i=j.y+t,o=r+H,a=i+z,l=Math.max(r,n.left),u=Math.max(i,n.top),c=Math.min(o,n.right),s=Math.min(a,n.bottom);return Math.max(0,(c-l)*(s-u))},g=function(){fe=j.y+Ce,he=fe+z,pe=j.x+ke,ve=pe+H},m=t,y=m.ownerDocument,b=fQ(m).getComputedStyle(m),w=b.width,_=b.height,x=b.position,k=m.style.left,C=m.style.top,S=m.style.right,O=m.style.bottom,E=m.style.overflow,I=uX(uX({},i[r]),o),P=y.createElement("div");if(null===(l=m.parentElement)||void 0===l||l.appendChild(P),P.style.left="".concat(m.offsetLeft,"px"),P.style.top="".concat(m.offsetTop,"px"),P.style.position=x,P.style.height="".concat(m.offsetHeight,"px"),P.style.width="".concat(m.offsetWidth,"px"),m.style.left="0",m.style.top="0",m.style.right="auto",m.style.bottom="auto",m.style.overflow="hidden",Array.isArray(n))p={x:n[0],y:n[1],width:0,height:0};else{var M,R,A=n.getBoundingClientRect();A.x=null!==(M=A.x)&&void 0!==M?M:A.left,A.y=null!==(R=A.y)&&void 0!==R?R:A.top,p={x:A.x,y:A.y,width:A.width,height:A.height}}var j=m.getBoundingClientRect();j.x=null!==(u=j.x)&&void 0!==u?u:j.left,j.y=null!==(c=j.y)&&void 0!==c?c:j.top;var D=y.documentElement,T=D.clientWidth,F=D.clientHeight,N=D.scrollWidth,L=D.scrollHeight,B=D.scrollTop,V=D.scrollLeft,z=j.height,H=j.width,W=p.height,U=p.width,G={left:0,top:0,right:T,bottom:F},Y={left:-V,top:-B,right:N-V,bottom:L-B},$=I.htmlRegion,q="visible",K="visibleFirst";"scroll"!==$&&$!==K&&($=q);var X=$===K,J=gQ(Y,f),Z=gQ(G,f),Q=$===q?Z:J,ee=X?Z:Q;m.style.left="auto",m.style.top="auto",m.style.right="0",m.style.bottom="0";var te=m.getBoundingClientRect();m.style.left=k,m.style.top=C,m.style.right=S,m.style.bottom=O,m.style.overflow=E,null===(d=m.parentElement)||void 0===d||d.removeChild(P);var ne=pQ(Math.round(H/parseFloat(w)*1e3)/1e3),re=pQ(Math.round(z/parseFloat(_)*1e3)/1e3);if(0===ne||0===re||bJ(n)&&!cQ(n))return;var ie=I.offset,oe=I.targetOffset,ae=nY(yQ(j,ie),2),le=ae[0],ue=ae[1],ce=nY(yQ(p,oe),2),se=ce[0],de=ce[1];p.x-=se,p.y-=de;var fe,he,pe,ve,ge=nY(I.points||[],2),me=ge[0],ye=bQ(ge[1]),be=bQ(me),we=wQ(p,ye),_e=wQ(j,be),xe=uX({},I),ke=we.x-_e.x+le,Ce=we.y-_e.y+ue,Se=v(ke,Ce),Oe=v(ke,Ce,Z),Ee=wQ(p,["t","l"]),Ie=wQ(j,["t","l"]),Pe=wQ(p,["b","r"]),Me=wQ(j,["b","r"]),Re=I.overflow||{},Ae=Re.adjustX,je=Re.adjustY,De=Re.shiftX,Te=Re.shiftY,Fe=function(e){return"boolean"==typeof e?e:e>=0};g();var Ne=Fe(je),Le=be[0]===ye[0];if(Ne&&"t"===be[0]&&(he>ee.bottom||h.current.bt)){var Be=Ce;Le?Be-=z-W:Be=Ee.y-Me.y-ue;var Ve=v(ke,Be),ze=v(ke,Be,Z);Ve>Se||Ve===Se&&(!X||ze>=Oe)?(h.current.bt=!0,Ce=Be,ue=-ue,xe.points=[_Q(be,0),_Q(ye,0)]):h.current.bt=!1}if(Ne&&"b"===be[0]&&(fe<ee.top||h.current.tb)){var He=Ce;Le?He+=z-W:He=Pe.y-Ie.y-ue;var We=v(ke,He),Ue=v(ke,He,Z);We>Se||We===Se&&(!X||Ue>=Oe)?(h.current.tb=!0,Ce=He,ue=-ue,xe.points=[_Q(be,0),_Q(ye,0)]):h.current.tb=!1}var Ge=Fe(Ae),Ye=be[1]===ye[1];if(Ge&&"l"===be[1]&&(ve>ee.right||h.current.rl)){var $e=ke;Ye?$e-=H-U:$e=Ee.x-Me.x-le;var qe=v($e,Ce),Ke=v($e,Ce,Z);qe>Se||qe===Se&&(!X||Ke>=Oe)?(h.current.rl=!0,ke=$e,le=-le,xe.points=[_Q(be,1),_Q(ye,1)]):h.current.rl=!1}if(Ge&&"r"===be[1]&&(pe<ee.left||h.current.lr)){var Xe=ke;Ye?Xe+=H-U:Xe=Pe.x-Ie.x-le;var Je=v(Xe,Ce),Ze=v(Xe,Ce,Z);Je>Se||Je===Se&&(!X||Ze>=Oe)?(h.current.lr=!0,ke=Xe,le=-le,xe.points=[_Q(be,1),_Q(ye,1)]):h.current.lr=!1}g();var Qe=!0===De?0:De;"number"==typeof Qe&&(pe<Z.left&&(ke-=pe-Z.left-le,p.x+U<Z.left+Qe&&(ke+=p.x-Z.left+U-Qe)),ve>Z.right&&(ke-=ve-Z.right-le,p.x>Z.right-Qe&&(ke+=p.x-Z.right+Qe)));var et=!0===Te?0:Te;"number"==typeof et&&(fe<Z.top&&(Ce-=fe-Z.top-ue,p.y+W<Z.top+et&&(Ce+=p.y-Z.top+W-et)),he>Z.bottom&&(Ce-=he-Z.bottom-ue,p.y>Z.bottom-et&&(Ce+=p.y-Z.bottom+et)));var tt=j.x+ke,nt=tt+H,rt=j.y+Ce,it=rt+z,ot=p.x,at=ot+U,lt=p.y,ut=lt+W,ct=(Math.max(tt,ot)+Math.min(nt,at))/2-tt,st=(Math.max(rt,lt)+Math.min(it,ut))/2-rt;null==a||a(t,xe);var dt=te.right-j.x-(ke+j.width),ft=te.bottom-j.y-(Ce+j.height);1===ne&&(ke=Math.round(ke),dt=Math.round(dt)),1===re&&(Ce=Math.round(Ce),ft=Math.round(ft)),s({ready:!0,offsetX:ke/ne,offsetY:Ce/re,offsetR:dt/ne,offsetB:ft/re,arrowX:ct/ne,arrowY:st/re,scaleX:ne,scaleY:re,align:xe})}})),v=function(){s((function(e){return uX(uX({},e),{},{ready:!1})}))};return OK(v,[r]),OK((function(){e||v()}),[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,function(){d.current+=1;var e=d.current;Promise.resolve().then((function(){d.current===e&&p()}))}]}(Se,le,B&&null!==Ve?Ve:fe,M,A,j,z),Ue=nY(We,11),Ge=Ue[0],Ye=Ue[1],$e=Ue[2],qe=Ue[3],Ke=Ue[4],Xe=Ue[5],Je=Ue[6],Ze=Ue[7],Qe=Ue[8],et=Ue[9],tt=Ue[10],nt=function(e,t,n,r){return l.useMemo((function(){var i=uQ(null!=n?n:t),o=uQ(null!=r?r:t),a=new Set(i),l=new Set(o);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]}),[e,t,n,r])}(ee,u,c,s),rt=nY(nt,2),it=rt[0],ot=rt[1],at=it.has("click"),lt=ot.has("click")||ot.has("contextMenu"),ut=kK((function(){De||tt()}));!function(e,t,n,r,i){OK((function(){if(e&&t&&n){var o=function(){r(),i()},a=n,l=hQ(t),u=hQ(a),c=fQ(a),s=new Set([c].concat(ts(l),ts(u)));return s.forEach((function(e){e.addEventListener("scroll",o,{passive:!0})})),c.addEventListener("resize",o,{passive:!0}),r(),function(){s.forEach((function(e){e.removeEventListener("scroll",o),c.removeEventListener("resize",o)}))}}}),[e,t,n])}(Se,fe,le,ut,(function(){Ee.current&&B&&lt&&Ae(!1)})),OK((function(){ut()}),[Ve,M]),OK((function(){!Se||null!=A&&A[M]||ut()}),[JSON.stringify(j)]);var ct=l.useMemo((function(){var e=function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var l,u=o[a];if(sQ(null===(l=e[u])||void 0===l?void 0:l.points,i,r))return"".concat(t,"-placement-").concat(u)}return""}(A,i,et,B);return F()(e,null==N?void 0:N(et))}),[et,N,A,i,B]);l.useImperativeHandle(n,(function(){return{nativeElement:pe.current,popupElement:ce.current,forceAlign:ut}}));var st=nY(l.useState(0),2),dt=st[0],ft=st[1],ht=nY(l.useState(0),2),pt=ht[0],vt=ht[1],gt=function(){if(T&&fe){var e=fe.getBoundingClientRect();ft(e.width),vt(e.height)}};function mt(e,t,n,r){ye[e]=function(i){var o;null==r||r(i),Ae(t,n);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];null===(o=me[e])||void 0===o||o.call.apply(o,[me,i].concat(l))}}OK((function(){Ne&&(tt(),Ne(),Le(null))}),[Ne]),(at||lt)&&(ye.onClick=function(e){var t;Ee.current&&lt?Ae(!1):!Ee.current&&at&&(He(e),Ae(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=me.onClick)||void 0===t||t.call.apply(t,[me,e].concat(r))});var yt,bt,wt=function(e,t,n,r,i,o,a,u){var c=l.useRef(e);c.current=e;var s=l.useRef(!1);return l.useEffect((function(){if(t&&r&&(!i||o)){var e=function(){s.current=!1},l=function(e){var t;!c.current||a((null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target)||s.current||u(!1)},d=fQ(r);d.addEventListener("pointerdown",e,!0),d.addEventListener("mousedown",l,!0),d.addEventListener("contextmenu",l,!0);var f=QJ(n);return f&&(f.addEventListener("mousedown",l,!0),f.addEventListener("contextmenu",l,!0)),function(){d.removeEventListener("pointerdown",e,!0),d.removeEventListener("mousedown",l,!0),d.removeEventListener("contextmenu",l,!0),f&&(f.removeEventListener("mousedown",l,!0),f.removeEventListener("contextmenu",l,!0))}}}),[t,n,r,i,o]),function(){s.current=!0}}(Se,lt,fe,le,w,x,be,Ae),_t=it.has("hover"),xt=ot.has("hover");_t&&(mt("onMouseEnter",!0,v,(function(e){He(e)})),mt("onPointerEnter",!0,v,(function(e){He(e)})),yt=function(e){(Se||De)&&null!=le&&le.contains(e.target)&&Ae(!0,v)},B&&(ye.onMouseMove=function(e){var t;null===(t=me.onMouseMove)||void 0===t||t.call(me,e)})),xt&&(mt("onMouseLeave",!1,m),mt("onPointerLeave",!1,m),bt=function(){Ae(!1,m)}),it.has("focus")&&mt("onFocus",!0,y),ot.has("focus")&&mt("onBlur",!1,b),it.has("contextMenu")&&(ye.onContextMenu=function(e){var t;Ee.current&&ot.has("contextMenu")?Ae(!1):(He(e),Ae(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=me.onContextMenu)||void 0===t||t.call.apply(t,[me,e].concat(r))}),K&&(ye.className=F()(me.className,K));var kt=uX(uX({},me),ye),Ct={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){J[e]&&(Ct[e]=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=kt[e])||void 0===t||t.call.apply(t,[kt].concat(r)),J[e].apply(J,r)})}));var St=l.cloneElement(ge,uX(uX({},kt),Ct)),Ot={x:Xe,y:Je},Et=H?uX({},!0!==H?H:{}):null;return l.createElement(l.Fragment,null,l.createElement(JJ,{disabled:!Se,ref:ve,onResize:function(){gt(),ut()}},l.createElement(aQ,{getTriggerDOMNode:X},St)),l.createElement(lQ.Provider,{value:ie},l.createElement(oQ,{portal:e,ref:se,prefixCls:i,popup:E,className:F()(I,ct),style:P,target:fe,onMouseEnter:yt,onMouseLeave:bt,onPointerEnter:yt,zIndex:D,open:Se,keepDom:De,fresh:L,onClick:V,onPointerDownCapture:wt,mask:w,motion:we,maskMotion:_e,onVisibleChanged:function(e){Te(!1),tt(),null==p||p(e)},onPrepare:function(){return new Promise((function(e){gt(),Le((function(){return e}))}))},forceRender:C,autoDestroy:Z,getPopupContainer:k,align:et,arrow:Et,arrowPos:Ot,ready:Ge,offsetX:Ye,offsetY:$e,offsetR:qe,offsetB:Ke,onAlign:ut,stretch:T,targetWidth:dt/Ze,targetHeight:pt/Qe})))}));return t}(mJ);var CQ={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=CQ.F1&&t<=CQ.F12)return!1;switch(t){case CQ.ALT:case CQ.CAPS_LOCK:case CQ.CONTEXT_MENU:case CQ.CTRL:case CQ.DOWN:case CQ.END:case CQ.ESC:case CQ.HOME:case CQ.INSERT:case CQ.LEFT:case CQ.MAC_FF_META:case CQ.META:case CQ.NUMLOCK:case CQ.NUM_CENTER:case CQ.PAGE_DOWN:case CQ.PAGE_UP:case CQ.PAUSE:case CQ.PRINT_SCREEN:case CQ.RIGHT:case CQ.SHIFT:case CQ.UP:case CQ.WIN_KEY:case CQ.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=CQ.ZERO&&e<=CQ.NINE)return!0;if(e>=CQ.NUM_ZERO&&e<=CQ.NUM_MULTIPLY)return!0;if(e>=CQ.A&&e<=CQ.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case CQ.SPACE:case CQ.QUESTION_MARK:case CQ.NUM_PLUS:case CQ.NUM_MINUS:case CQ.NUM_PERIOD:case CQ.NUM_DIVISION:case CQ.SEMICOLON:case CQ.DASH:case CQ.EQUALS:case CQ.COMMA:case CQ.PERIOD:case CQ.SLASH:case CQ.APOSTROPHE:case CQ.SINGLE_QUOTE:case CQ.OPEN_SQUARE_BRACKET:case CQ.BACKSLASH:case CQ.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function SQ(e,t){return void 0!==e?e:t?"bottomRight":"bottomLeft"}function OQ(e,t){var n=SQ(e,t),r=(null==n?void 0:n.toLowerCase().endsWith("right"))?"insetInlineEnd":"insetInlineStart";return t&&(r=["insetInlineStart","insetInlineEnd"].find((function(e){return e!==r}))),r}var EQ=l.createContext(null),IQ={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function PQ(e){var t=e.popupElement,n=e.popupStyle,r=e.popupClassName,i=e.popupAlign,o=e.transitionName,a=e.getPopupContainer,u=e.children,c=e.range,s=e.placement,d=e.builtinPlacements,f=void 0===d?IQ:d,h=e.direction,p=e.visible,v=e.onClose,g=l.useContext(EQ).prefixCls,m="".concat(g,"-dropdown"),y=SQ(s,"rtl"===h);return l.createElement(kQ,{showAction:[],hideAction:["click"],popupPlacement:y,builtinPlacements:f,prefixCls:m,popupTransitionName:o,popup:t,popupAlign:i,popupVisible:p,popupClassName:F()(r,os(os({},"".concat(m,"-range"),c),"".concat(m,"-rtl"),"rtl"===h)),popupStyle:n,stretch:"minWidth",getPopupContainer:a,onPopupVisibleChange:function(e){e||v()}},u)}function MQ(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(r);return r}function RQ(e){return null==e?[]:Array.isArray(e)?e:[e]}function AQ(e,t,n){var r=ts(e);return r[t]=n,r}function jQ(e,t){var n={};return(t||Object.keys(e)).forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}function DQ(e,t,n){if(n)return n;switch(e){case"time":return t.fieldTimeFormat;case"datetime":return t.fieldDateTimeFormat;case"month":return t.fieldMonthFormat;case"year":return t.fieldYearFormat;case"quarter":return t.fieldQuarterFormat;case"week":return t.fieldWeekFormat;default:return t.fieldDateFormat}}function TQ(e,t,n){var r=void 0!==n?n:t[t.length-1],i=t.find((function(t){return e[t]}));return r!==i?e[i]:void 0}function FQ(e){return jQ(e,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function NQ(e,t,n,r){var i=l.useMemo((function(){return e||function(e,r){var i=e;return t&&"date"===r.type?t(i,r.today):n&&"month"===r.type?n(i,r.locale):r.originNode}}),[e,n,t]);return l.useCallback((function(e,t){return i(e,uX(uX({},t),{},{range:r}))}),[i,r])}function LQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=nY(l.useState([!1,!1]),2),i=r[0],o=r[1];return[l.useMemo((function(){return i.map((function(r,i){if(r)return!0;var o=e[i];return!!o&&(!n[i]&&!o||!(!o||!t(o,{activeIndex:i})))}))}),[e,i,t,n]),function(e,t){o((function(n){return AQ(n,t,e)}))}]}function BQ(e,t,n,r,i){var o="",a=[];return e&&a.push(i?"hh":"HH"),t&&a.push("mm"),n&&a.push("ss"),o=a.join(":"),r&&(o+=".SSS"),i&&(o+=" A"),o}function VQ(e,t){var n=t.showHour,r=t.showMinute,i=t.showSecond,o=t.showMillisecond,a=t.use12Hours;return u.a.useMemo((function(){return function(e,t,n,r,i,o){var a=e.fieldDateTimeFormat,l=e.fieldDateFormat,u=e.fieldTimeFormat,c=e.fieldMonthFormat,s=e.fieldYearFormat,d=e.fieldWeekFormat,f=e.fieldQuarterFormat,h=e.yearFormat,p=e.cellYearFormat,v=e.cellQuarterFormat,g=e.dayFormat,m=e.cellDateFormat,y=BQ(t,n,r,i,o);return uX(uX({},e),{},{fieldDateTimeFormat:a||"YYYY-MM-DD ".concat(y),fieldDateFormat:l||"YYYY-MM-DD",fieldTimeFormat:u||y,fieldMonthFormat:c||"YYYY-MM",fieldYearFormat:s||"YYYY",fieldWeekFormat:d||"gggg-wo",fieldQuarterFormat:f||"YYYY-[Q]Q",yearFormat:h||"YYYY",cellYearFormat:p||"YYYY",cellQuarterFormat:v||"[Q]Q",cellDateFormat:m||g||"D"})}(e,n,r,i,o,a)}),[e,n,r,i,o,a])}function zQ(e,t,n){return null!=n?n:t.some((function(t){return e.includes(t)}))}var HQ=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function WQ(e){return e&&"string"==typeof e}function UQ(e,t,n,r){return[e,t,n,r].some((function(e){return void 0!==e}))}function GQ(e,t,n,r,i){var o=t,a=n,l=r;if(e||o||a||l||i){if(e){var u,c,s,d=[o,a,l].some((function(e){return!1===e})),f=[o,a,l].some((function(e){return!0===e})),h=!!d||!f;o=null!==(u=o)&&void 0!==u?u:h,a=null!==(c=a)&&void 0!==c?c:h,l=null!==(s=l)&&void 0!==s?s:h}}else o=!0,a=!0,l=!0;return[o,a,l,i]}function YQ(e){var t=e.showTime,n=function(e){var t=jQ(e,HQ),n=e.format,r=e.picker,i=null;return n&&(i=n,Array.isArray(i)&&(i=i[0]),i="object"===lr(i)?i.format:i),"time"===r&&(t.format=i),[t,i]}(e),r=nY(n,2),i=r[0],o=r[1],a=t&&"object"===lr(t)?t:{},l=uX(uX({defaultOpenValue:a.defaultOpenValue||a.defaultValue},i),a),u=l.showMillisecond,c=l.showHour,s=l.showMinute,d=l.showSecond,f=nY(GQ(UQ(c,s,d,u),c,s,d,u),3);return c=f[0],s=f[1],d=f[2],[l,uX(uX({},l),{},{showHour:c,showMinute:s,showSecond:d,showMillisecond:u}),l.format,o]}function $Q(e,t,n,r,i){if("datetime"===e||"time"===e){for(var o=r,a=DQ(e,i,null),l=[t,n],u=0;u<l.length;u+=1){var c=RQ(l[u])[0];if(WQ(c)){a=c;break}}var s=o.showHour,d=o.showMinute,f=o.showSecond,h=o.showMillisecond,p=zQ(a,["a","A","LT","LLL","LTS"],o.use12Hours),v=UQ(s,d,f,h);v||(s=zQ(a,["H","h","k","LT","LLL"]),d=zQ(a,["m","LT","LLL"]),f=zQ(a,["s","LTS"]),h=zQ(a,["SSS"]));var g=nY(GQ(v,s,d,f,h),3);s=g[0],d=g[1],f=g[2];var m=t||BQ(s,d,f,h,p);return uX(uX({},o),{},{format:m,showHour:s,showMinute:d,showSecond:f,showMillisecond:h,use12Hours:p})}return null}function qQ(e,t,n){return!1===t?null:(t&&"object"===lr(t)?t:{}).clearIcon||n||l.createElement("span",{className:"".concat(e,"-clear-btn")})}var KQ=7;function XQ(e,t,n){return!e&&!t||e===t||!(!e||!t)&&n()}function JQ(e,t,n){return XQ(t,n,(function(){return Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(n)/10)}))}function ZQ(e,t,n){return XQ(t,n,(function(){return e.getYear(t)===e.getYear(n)}))}function QQ(e,t){return Math.floor(e.getMonth(t)/3)+1}function e0(e,t,n){return XQ(t,n,(function(){return ZQ(e,t,n)&&e.getMonth(t)===e.getMonth(n)}))}function t0(e,t,n){return XQ(t,n,(function(){return ZQ(e,t,n)&&e0(e,t,n)&&e.getDate(t)===e.getDate(n)}))}function n0(e,t,n){return XQ(t,n,(function(){return e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)}))}function r0(e,t,n){return XQ(t,n,(function(){return t0(e,t,n)&&n0(e,t,n)&&e.getMillisecond(t)===e.getMillisecond(n)}))}function i0(e,t,n,r){return XQ(n,r,(function(){var i=e.locale.getWeekFirstDate(t,n),o=e.locale.getWeekFirstDate(t,r);return ZQ(e,i,o)&&e.locale.getWeek(t,n)===e.locale.getWeek(t,r)}))}function o0(e,t,n,r,i){switch(i){case"date":return t0(e,n,r);case"week":return i0(e,t.locale,n,r);case"month":return e0(e,n,r);case"quarter":return function(e,t,n){return XQ(t,n,(function(){return ZQ(e,t,n)&&QQ(e,t)===QQ(e,n)}))}(e,n,r);case"year":return ZQ(e,n,r);case"decade":return JQ(e,n,r);case"time":return n0(e,n,r);default:return r0(e,n,r)}}function a0(e,t,n,r){return!!(t&&n&&r)&&(e.isAfter(r,t)&&e.isAfter(n,r))}function l0(e,t,n,r,i){return!!o0(e,t,n,r,i)||e.isAfter(n,r)}function u0(e,t){var n=t.generateConfig,r=t.locale,i=t.format;return e?"function"==typeof i?i(e):n.locale.format(r.locale,e,i):""}function c0(e,t,n){var r=t,i=["getHour","getMinute","getSecond","getMillisecond"];return["setHour","setMinute","setSecond","setMillisecond"].forEach((function(t,o){r=n?e[t](r,e[i[o]](n)):e[t](r,0)})),r}function s0(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.useMemo((function(){var n=e?RQ(e):e;return t&&n&&(n[1]=n[1]||n[0]),n}),[e,t])}function d0(e,t){var n=e.generateConfig,r=e.locale,i=e.picker,o=void 0===i?"date":i,a=e.prefixCls,u=void 0===a?"rc-picker":a,c=e.styles,s=void 0===c?{}:c,d=e.classNames,f=void 0===d?{}:d,h=e.order,p=void 0===h||h,v=e.components,g=void 0===v?{}:v,m=e.inputRender,y=e.allowClear,b=e.clearIcon,w=e.needConfirm,_=e.multiple,x=e.format,k=e.inputReadOnly,C=e.disabledDate,S=e.minDate,O=e.maxDate,E=e.showTime,I=e.value,P=e.defaultValue,M=e.pickerValue,R=e.defaultPickerValue,A=s0(I),j=s0(P),D=s0(M),T=s0(R),F="date"===o&&E?"datetime":o,N="time"===F||"datetime"===F,L=N||_,B=null!=w?w:N,V=nY(YQ(e),4),z=V[0],H=V[1],W=V[2],U=V[3],G=VQ(r,H),Y=l.useMemo((function(){return $Q(F,W,U,z,G)}),[F,W,U,z,G]),$=l.useMemo((function(){return uX(uX({},e),{},{prefixCls:u,locale:G,picker:o,styles:s,classNames:f,order:p,components:uX({input:m},g),clearIcon:qQ(u,y,b),showTime:Y,value:A,defaultValue:j,pickerValue:D,defaultPickerValue:T},null==t?void 0:t())}),[e]),q=function(e,t,n){return l.useMemo((function(){var r=RQ(DQ(e,t,n)),i=r[0],o="object"===lr(i)&&"mask"===i.type?i.format:null;return[r.map((function(e){return"string"==typeof e||"function"==typeof e?e:e.format})),o]}),[e,t,n])}(F,G,x),K=nY(q,2),X=K[0],J=K[1],Z=function(e,t,n){return!("function"!=typeof e[0]&&!n)||t}(X,k,_),Q=function(e,t,n,r,i){return kK((function(o,a){return!(!n||!n(o,a))||!(!r||!e.isAfter(r,o)||o0(e,t,r,o,a.type))||!(!i||!e.isAfter(o,i)||o0(e,t,i,o,a.type))}))}(n,r,C,S,O),ee=function(e,t,n,r){return kK((function(i,o){var a=uX({type:t},o);if(delete a.activeIndex,!e.isValidate(i)||n&&n(i,a))return!0;if(("date"===t||"time"===t)&&r){var l,u=o&&1===o.activeIndex?"end":"start",c=(null===(l=r.disabledTime)||void 0===l?void 0:l.call(r,i,u,{from:a.from}))||{},s=c.disabledHours,d=c.disabledMinutes,f=c.disabledSeconds,h=c.disabledMilliseconds,p=r.disabledHours,v=r.disabledMinutes,g=r.disabledSeconds,m=s||p,y=d||v,b=f||g,w=e.getHour(i),_=e.getMinute(i),x=e.getSecond(i),k=e.getMillisecond(i);if(m&&m().includes(w))return!0;if(y&&y(w).includes(_))return!0;if(b&&b(w,_).includes(x))return!0;if(h&&h(w,_,x).includes(k))return!0}return!1}))}(n,o,Q,Y);return[l.useMemo((function(){return uX(uX({},$),{},{needConfirm:B,inputReadOnly:Z,disabledDate:Q})}),[$,B,Z,Q]),F,L,X,J,ee]}function f0(e,t){var n=arguments.length>3?arguments[3]:void 0,r=function(e,t,n){var r=nY(MK(t,{value:e}),2),i=r[0],o=r[1],a=u.a.useRef(e),l=u.a.useRef(),c=function(){LZ.cancel(l.current)},s=kK((function(){o(a.current),n&&i!==a.current&&n(a.current)})),d=kK((function(e,t){c(),a.current=e,e||t?s():l.current=LZ(s)}));return u.a.useEffect((function(){return c}),[]),[i,d]}(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).every((function(e){return e}))&&e,t||!1,n),i=nY(r,2),o=i[0],a=i[1];return[o,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.inherit&&!o||a(e,t.force)}]}function h0(e){var t=l.useRef();return l.useImperativeHandle(e,(function(){var e;return{nativeElement:null===(e=t.current)||void 0===e?void 0:e.nativeElement,focus:function(e){var n;null===(n=t.current)||void 0===n||n.focus(e)},blur:function(){var e;null===(e=t.current)||void 0===e||e.blur()}}})),t}function p0(e,t){return l.useMemo((function(){return e||(t?(hX(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(t).map((function(e){var t=nY(e,2);return{label:t[0],value:t[1]}}))):[])}),[e,t])}function v0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=l.useRef(t);r.current=t,EK((function(){if(!e){var t=LZ((function(){r.current(e)}),n);return function(){LZ.cancel(t)}}r.current(e)}),[e])}function g0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=nY(l.useState(0),2),i=r[0],o=r[1],a=nY(l.useState(!1),2),u=a[0],c=a[1],s=l.useRef([]),d=l.useRef(null),f=l.useRef(null),h=function(e){d.current=e};return v0(u||n,(function(){u||(s.current=[],h(null))})),l.useEffect((function(){u&&s.current.push(i)}),[u,i]),[u,function(e){c(e)},function(e){return e&&(f.current=e),f.current},i,o,function(n){var r=s.current,i=new Set(r.filter((function(e){return n[e]||t[e]}))),o=0===r[r.length-1]?1:0;return i.size>=2||e[o]?null:o},s.current,h,function(e){return d.current===e}]}function m0(e,t,n,r){switch(t){case"date":case"week":return e.addMonth(n,r);case"month":case"quarter":return e.addYear(n,r);case"year":return e.addYear(n,10*r);case"decade":return e.addYear(n,100*r);default:return n}}var y0=[];function b0(e,t,n,r,i,o,a,u){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:y0,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:y0,d=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,h=arguments.length>13?arguments[13]:void 0,p="time"===a,v=o||0,g=function(t){var r=e.getNow();return p&&(r=c0(e,r)),c[t]||n[t]||r},m=nY(arguments.length>9&&void 0!==arguments[9]?arguments[9]:y0,2),y=m[0],b=m[1],w=nY(MK((function(){return g(0)}),{value:y}),2),_=w[0],x=w[1],k=nY(MK((function(){return g(1)}),{value:b}),2),C=k[0],S=k[1],O=l.useMemo((function(){var t=[_,C][v];return p?t:c0(e,t,s[v])}),[p,_,C,v,e,s]),E=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panel";(0,[x,S][v])(n);var o=[_,C];o[v]=n,!d||o0(e,t,_,o[0],a)&&o0(e,t,C,o[1],a)||d(o,{source:i,range:1===v?"end":"start",mode:r})},I=l.useRef(null);return OK((function(){if(i&&!c[v]){var r=p?null:e.getNow();if(null!==I.current&&I.current!==v?r=[_,C][1^v]:n[v]?r=0===v?n[0]:function(n,r){if(u){var i={date:"month",week:"month",month:"year",quarter:"year"}[a];if(i&&!o0(e,t,n,r,i))return m0(e,a,r,-1);if("year"===a&&n&&Math.floor(e.getYear(n)/10)!==Math.floor(e.getYear(r)/10))return m0(e,a,r,-1)}return r}(n[0],n[1]):n[1^v]&&(r=n[1^v]),r){f&&e.isAfter(f,r)&&(r=f);var o=u?m0(e,a,r,1):r;h&&e.isAfter(o,h)&&(r=u?m0(e,a,h,-1):h),E(r,"reset")}}}),[i,v,n[v]]),l.useEffect((function(){I.current=i?v:null}),[i,v]),OK((function(){i&&c&&c[v]&&E(c[v],"reset")}),[i,v]),[O,E]}function w0(e,t){var n=l.useRef(e),r=nY(l.useState({}),2)[1],i=function(e){return e&&void 0!==t?t:n.current};return[i,function(e){n.current=e,r({})},i(!0)]}var _0=[];function x0(e,t,n){return[function(r){return r.map((function(r){return u0(r,{generateConfig:e,locale:t,format:n[0]})}))},function(t,n){for(var r=Math.max(t.length,n.length),i=-1,o=0;o<r;o+=1){var a=t[o]||null,l=n[o]||null;if(a!==l&&!r0(e,a,l)){i=o;break}}return[i<0,0!==i]}]}function k0(e,t){return ts(e).sort((function(e,n){return t.isAfter(e,n)?1:-1}))}function C0(e,t,n,r,i,o,a,u,c){var s=nY(MK(o,{value:a}),2),d=s[0],f=s[1],h=d||_0,p=function(e){var t=nY(w0(e),2),n=t[0],r=t[1],i=kK((function(){r(e)}));return l.useEffect((function(){i()}),[e]),[n,r]}(h),v=nY(p,2),g=v[0],m=v[1],y=nY(x0(e,t,n),2),b=y[0],w=y[1],_=kK((function(t){var n=ts(t);if(r)for(var o=0;o<2;o+=1)n[o]=n[o]||null;else i&&(n=k0(n.filter((function(e){return e})),e));var a=nY(w(g(),n),2),l=a[0],c=a[1];if(!l&&(m(n),u)){var s=b(n);u(n,s,{range:c?"end":"start"})}}));return[h,f,g,_,function(){c&&c(g())}]}function S0(e,t,n,r,i,o,a,u,c,s){var d=e.generateConfig,f=e.locale,h=e.picker,p=e.onChange,v=e.allowEmpty,g=e.order,m=!o.some((function(e){return e}))&&g,y=nY(x0(d,f,a),2),b=y[0],w=y[1],_=nY(w0(t),2),x=_[0],k=_[1],C=kK((function(){k(t)}));l.useEffect((function(){C()}),[t]);var S=kK((function(e){var r=null===e,a=ts(e||x());if(r)for(var l=Math.max(o.length,a.length),u=0;u<l;u+=1)o[u]||(a[u]=null);m&&a[0]&&a[1]&&(a=k0(a,d)),i(a);var c=nY(a,2),y=c[0],_=c[1],k=!y,C=!_,S=!v||(!k||v[0])&&(!C||v[1]),O=!g||k||C||o0(d,f,y,_,h)||d.isAfter(_,y),E=(o[0]||!y||!s(y,{activeIndex:0}))&&(o[1]||!_||!s(_,{from:y,activeIndex:1})),I=r||S&&O&&E;if(I){n(a);var P=nY(w(a,t),1)[0];p&&!P&&p(r&&a.every((function(e){return!e}))?null:a,b(a))}return I})),O=kK((function(e,t){var n=AQ(x(),e,r()[e]);k(n),t&&S()})),E=!u&&!c;return v0(!E,(function(){E&&(S(),i(t),C())}),2),[O,S]}function O0(e,t,n,r,i){return("date"===t||"time"===t)&&(void 0!==n?n:void 0!==r?r:!i&&("date"===e||"time"===e))}function E0(){return[]}function I0(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=[],l=n>=1?0|n:1,u=e;u<=t;u+=l){var c=i.includes(u);c&&r||a.push({label:MQ(u,o),value:u,disabled:c})}return a}function P0(e){var t=arguments.length>2?arguments[2]:void 0,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})||{},r=n.use12Hours,i=n.hourStep,o=void 0===i?1:i,a=n.minuteStep,u=void 0===a?1:a,c=n.secondStep,s=void 0===c?1:c,d=n.millisecondStep,f=void 0===d?100:d,h=n.hideDisabledOptions,p=n.disabledTime,v=n.disabledHours,g=n.disabledMinutes,m=n.disabledSeconds,y=l.useMemo((function(){return t||e.getNow()}),[t,e]),b=l.useCallback((function(e){var t=(null==p?void 0:p(e))||{};return[t.disabledHours||v||E0,t.disabledMinutes||g||E0,t.disabledSeconds||m||E0,t.disabledMilliseconds||E0]}),[p,v,g,m]),w=nY(l.useMemo((function(){return b(y)}),[y,b]),4),_=w[0],x=w[1],k=w[2],C=w[3],S=l.useCallback((function(e,t,n,i){var a=I0(0,23,o,h,e());return[r?a.map((function(e){return uX(uX({},e),{},{label:MQ(e.value%12||12,2)})})):a,function(e){return I0(0,59,u,h,t(e))},function(e,t){return I0(0,59,s,h,n(e,t))},function(e,t,n){return I0(0,999,f,h,i(e,t,n),3)}]}),[h,o,r,f,u,s]),O=nY(l.useMemo((function(){return S(_,x,k,C)}),[S,_,x,k,C]),4),E=O[0],I=O[1],P=O[2],M=O[3];return[function(t,n){var r=function(){return E},i=I,o=P,a=M;if(n){var l=nY(b(n),4),u=l[0],c=l[1],s=l[2],d=l[3],f=nY(S(u,c,s,d),4),h=f[0];r=function(){return h},i=f[1],o=f[2],a=f[3]}var p=function(e,t,n,r,i,o){var a=e;function l(e,t,n){var r=o[e](a),i=n.find((function(e){return e.value===r}));if(!i||i.disabled){var l=n.filter((function(e){return!e.disabled})),u=ts(l).reverse().find((function(e){return e.value<=r}))||l[0];u&&(r=u.value,a=o[t](a,r))}return r}var u=l("getHour","setHour",t()),c=l("getMinute","setMinute",n(u)),s=l("getSecond","setSecond",r(u,c));return l("getMillisecond","setMillisecond",i(u,c,s)),a}(t,r,i,o,a,e);return p},E,I,P,M]}function M0(e){var t=e.mode,n=e.internalMode,r=e.renderExtraFooter,i=e.showNow,o=e.showTime,a=e.onSubmit,u=e.onNow,c=e.invalid,s=e.needConfirm,d=e.generateConfig,f=e.disabledDate,h=l.useContext(EQ),p=h.prefixCls,v=h.locale,g=h.button,m=void 0===g?"button":g,y=d.getNow(),b=nY(P0(d,o,y),1)[0],w=null==r?void 0:r(t),_=f(y,{type:t}),x="".concat(p,"-now"),k="".concat(x,"-btn"),C=i&&l.createElement("li",{className:x},l.createElement("a",{className:F()(k,_&&"".concat(k,"-disabled")),"aria-disabled":_,onClick:function(){if(!_){var e=b(y);u(e)}}},"date"===n?v.today:v.now)),S=s&&l.createElement("li",{className:"".concat(p,"-ok")},l.createElement(m,{disabled:c,onClick:a},v.ok)),O=(C||S)&&l.createElement("ul",{className:"".concat(p,"-ranges")},C,S);return w||O?l.createElement("div",{className:"".concat(p,"-footer")},w&&l.createElement("div",{className:"".concat(p,"-footer-extra")},w),O):null}function R0(e,t,n){return function(r,i){var o=r.findIndex((function(r){return o0(e,t,r,i,n)}));if(-1===o)return[].concat(ts(r),[i]);var a=ts(r);return a.splice(o,1),a}}var A0=l.createContext(null);function j0(){return l.useContext(A0)}function D0(e,t){var n=e.prefixCls,r=e.generateConfig,i=e.locale,o=e.disabledDate,a=e.minDate,l=e.maxDate,u=e.cellRender,c=e.hoverValue,s=e.hoverRangeValue,d=e.onHover,f=e.values,h=e.pickerValue,p=e.onSelect,v=e.prevIcon,g=e.nextIcon,m=e.superPrevIcon,y=e.superNextIcon,b=r.getNow();return[{now:b,values:f,pickerValue:h,prefixCls:n,disabledDate:o,minDate:a,maxDate:l,cellRender:u,hoverValue:c,hoverRangeValue:s,onHover:d,locale:i,generateConfig:r,onSelect:p,panelType:t,prevIcon:v,nextIcon:g,superPrevIcon:m,superNextIcon:y},b]}var T0=l.createContext({});function F0(e){for(var t=e.rowNum,n=e.colNum,r=e.baseDate,i=e.getCellDate,o=e.prefixColumn,a=e.rowClassName,u=e.titleFormat,c=e.getCellText,s=e.getCellClassName,d=e.headerCells,f=e.cellSelection,h=void 0===f||f,p=e.disabledDate,v=j0(),g=v.prefixCls,m=v.panelType,y=v.now,b=v.disabledDate,w=v.cellRender,_=v.onHover,x=v.hoverValue,k=v.hoverRangeValue,C=v.generateConfig,S=v.values,O=v.locale,E=v.onSelect,I=p||b,P="".concat(g,"-cell"),M=l.useContext(T0).onCellDblClick,R=[],A=0;A<t;A+=1){for(var j=[],D=void 0,T=function(){var e=i(r,A*n+N),t=null==I?void 0:I(e,{type:m});0===N&&(D=e,o&&j.push(o(D)));var a=!1,d=!1,f=!1;if(h&&k){var p=nY(k,2),v=p[0],b=p[1];a=a0(C,v,b,e),d=o0(C,O,e,v,m),f=o0(C,O,e,b,m)}var R,T=u?u0(e,{locale:O,format:u,generateConfig:C}):void 0,L=l.createElement("div",{className:"".concat(P,"-inner")},c(e));j.push(l.createElement("td",{key:N,title:T,className:F()(P,uX(os(os(os(os(os(os({},"".concat(P,"-disabled"),t),"".concat(P,"-hover"),(x||[]).some((function(t){return o0(C,O,e,t,m)}))),"".concat(P,"-in-range"),a&&!d&&!f),"".concat(P,"-range-start"),d),"".concat(P,"-range-end"),f),"".concat(g,"-cell-selected"),!k&&"week"!==m&&(R=e,S.some((function(e){return e&&o0(C,O,R,e,m)})))),s(e))),onClick:function(){t||E(e)},onDoubleClick:function(){!t&&M&&M()},onMouseEnter:function(){t||null==_||_(e)},onMouseLeave:function(){t||null==_||_(null)}},w?w(e,{prefixCls:g,originNode:L,today:y,type:m,locale:O}):L))},N=0;N<n;N+=1)T();R.push(l.createElement("tr",{key:A,className:null==a?void 0:a(D)},j))}return l.createElement("div",{className:"".concat(g,"-body")},l.createElement("table",{className:"".concat(g,"-content")},d&&l.createElement("thead",null,l.createElement("tr",null,d)),l.createElement("tbody",null,R)))}var N0={visibility:"hidden"};function L0(e){var t=e.offset,n=e.superOffset,r=e.onChange,i=e.getStart,o=e.getEnd,a=e.children,u=j0(),c=u.prefixCls,s=u.prevIcon,d=void 0===s?"‹":s,f=u.nextIcon,h=void 0===f?"›":f,p=u.superPrevIcon,v=void 0===p?"«":p,g=u.superNextIcon,m=void 0===g?"»":g,y=u.minDate,b=u.maxDate,w=u.generateConfig,_=u.locale,x=u.pickerValue,k=u.panelType,C="".concat(c,"-header"),S=l.useContext(T0),O=S.hidePrev,E=S.hideNext,I=S.hideHeader,P=l.useMemo((function(){if(!y||!t||!o)return!1;var e=o(t(-1,x));return!l0(w,_,e,y,k)}),[y,t,x,o,w,_,k]),M=l.useMemo((function(){if(!y||!n||!o)return!1;var e=o(n(-1,x));return!l0(w,_,e,y,k)}),[y,n,x,o,w,_,k]),R=l.useMemo((function(){if(!b||!t||!i)return!1;var e=i(t(1,x));return!l0(w,_,b,e,k)}),[b,t,x,i,w,_,k]),A=l.useMemo((function(){if(!b||!n||!i)return!1;var e=i(n(1,x));return!l0(w,_,b,e,k)}),[b,n,x,i,w,_,k]),j=function(e){t&&r(t(e,x))},D=function(e){n&&r(n(e,x))};if(I)return null;var T="".concat(C,"-prev-btn"),N="".concat(C,"-next-btn"),L="".concat(C,"-super-prev-btn"),B="".concat(C,"-super-next-btn");return l.createElement("div",{className:C},n&&l.createElement("button",{type:"button","aria-label":"super-prev-year",onClick:function(){return D(-1)},tabIndex:-1,className:F()(L,M&&"".concat(L,"-disabled")),disabled:M,style:O?N0:{}},v),t&&l.createElement("button",{type:"button","aria-label":"prev-year",onClick:function(){return j(-1)},tabIndex:-1,className:F()(T,P&&"".concat(T,"-disabled")),disabled:P,style:O?N0:{}},d),l.createElement("div",{className:"".concat(C,"-view")},a),t&&l.createElement("button",{type:"button","aria-label":"next-year",onClick:function(){return j(1)},tabIndex:-1,className:F()(N,R&&"".concat(N,"-disabled")),disabled:R,style:E?N0:{}},h),n&&l.createElement("button",{type:"button","aria-label":"super-next-year",onClick:function(){return D(1)},tabIndex:-1,className:F()(B,A&&"".concat(B,"-disabled")),disabled:A,style:E?N0:{}},m))}function B0(e){var t=e.prefixCls,n=e.panelName,r=void 0===n?"date":n,i=e.locale,o=e.generateConfig,a=e.pickerValue,u=e.onPickerValueChange,c=e.onModeChange,s=e.mode,d=void 0===s?"date":s,f=e.disabledDate,h=e.onSelect,p=e.onHover,v=e.showWeek,g="".concat(t,"-").concat(r,"-panel"),m="".concat(t,"-cell"),y="week"===d,b=nY(D0(e,d),2),w=b[0],_=b[1],x=o.locale.getWeekFirstDay(i.locale),k=o.setDate(a,1),C=function(e,t,n){var r=t.locale.getWeekFirstDay(e),i=t.setDate(n,1),o=t.getWeekDay(i),a=t.addDate(i,r-o);return t.getMonth(a)===t.getMonth(n)&&t.getDate(a)>1&&(a=t.addDate(a,-7)),a}(i.locale,o,k),S=o.getMonth(a),O=(void 0===v?y:v)?function(e){var t=null==f?void 0:f(e,{type:"week"});return l.createElement("td",{key:"week",className:F()(m,"".concat(m,"-week"),os({},"".concat(m,"-disabled"),t)),onClick:function(){t||h(e)},onMouseEnter:function(){t||null==p||p(e)},onMouseLeave:function(){t||null==p||p(null)}},l.createElement("div",{className:"".concat(m,"-inner")},o.locale.getWeek(i.locale,e)))}:null,E=[],I=i.shortWeekDays||(o.locale.getShortWeekDays?o.locale.getShortWeekDays(i.locale):[]);O&&E.push(l.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var P=0;P<KQ;P+=1)E.push(l.createElement("th",{key:P},I[(P+x)%KQ]));var M=i.shortMonths||(o.locale.getShortMonths?o.locale.getShortMonths(i.locale):[]),R=l.createElement("button",{type:"button","aria-label":"year panel",key:"year",onClick:function(){c("year",a)},tabIndex:-1,className:"".concat(t,"-year-btn")},u0(a,{locale:i,format:i.yearFormat,generateConfig:o})),A=l.createElement("button",{type:"button","aria-label":"month panel",key:"month",onClick:function(){c("month",a)},tabIndex:-1,className:"".concat(t,"-month-btn")},i.monthFormat?u0(a,{locale:i,format:i.monthFormat,generateConfig:o}):M[S]),j=i.monthBeforeYear?[A,R]:[R,A];return l.createElement(A0.Provider,{value:w},l.createElement("div",{className:F()(g,v&&"".concat(g,"-show-week"))},l.createElement(L0,{offset:function(e){return o.addMonth(a,e)},superOffset:function(e){return o.addYear(a,e)},onChange:u,getStart:function(e){return o.setDate(e,1)},getEnd:function(e){var t=o.setDate(e,1);return t=o.addMonth(t,1),o.addDate(t,-1)}},j),l.createElement(F0,YX({titleFormat:i.fieldDateFormat},e,{colNum:KQ,rowNum:6,baseDate:C,headerCells:E,getCellDate:function(e,t){return o.addDate(e,t)},getCellText:function(e){return u0(e,{locale:i,format:i.cellDateFormat,generateConfig:o})},getCellClassName:function(e){return os(os({},"".concat(t,"-cell-in-view"),e0(o,e,a)),"".concat(t,"-cell-today"),t0(o,e,_))},prefixColumn:O,cellSelection:!y}))))}var V0=1/3;var z0=300;function H0(e){return e.map((function(e){return[e.value,e.label,e.disabled].join(",")})).join(";")}function W0(e){var t=e.units,n=e.value,r=e.optionalValue,i=e.type,o=e.onChange,a=e.onHover,u=e.onDblClick,c=e.changeOnScroll,s=j0(),d=s.prefixCls,f=s.cellRender,h=s.now,p=s.locale,v="".concat(d,"-time-panel"),g="".concat(d,"-time-panel-cell"),m=l.useRef(null),y=l.useRef(),b=function(){clearTimeout(y.current)},w=function(e,t){var n=l.useRef(!1),r=l.useRef(null),i=l.useRef(null),o=function(){LZ.cancel(r.current),n.current=!1},a=l.useRef();return[kK((function(){var l=e.current;if(i.current=null,a.current=0,l){var u=l.querySelector('[data-value="'.concat(t,'"]')),c=l.querySelector("li");u&&c&&function e(){o(),n.current=!0,a.current+=1;var t=l.scrollTop,s=c.offsetTop,d=u.offsetTop,f=d-s;if(0===d&&u!==c||!cQ(l))a.current<=5&&(r.current=LZ(e));else{var h=t+(f-t)*V0,p=Math.abs(f-h);if(null!==i.current&&i.current<p)o();else{if(i.current=p,p<=1)return l.scrollTop=f,void o();l.scrollTop=h,r.current=LZ(e)}}}()}})),o,function(){return n.current}]}(m,null!=n?n:r),_=nY(w,3),x=_[0],k=_[1],C=_[2];OK((function(){return x(),b(),function(){k(),b()}}),[n,r,H0(t)]);var S="".concat(v,"-column");return l.createElement("ul",{className:S,ref:m,"data-type":i,onScroll:function(e){b();var n=e.target;!C()&&c&&(y.current=setTimeout((function(){var e=m.current,r=e.querySelector("li").offsetTop,i=Array.from(e.querySelectorAll("li")).map((function(e){return e.offsetTop-r})).map((function(e,r){return t[r].disabled?Number.MAX_SAFE_INTEGER:Math.abs(e-n.scrollTop)})),a=Math.min.apply(Math,ts(i)),l=i.findIndex((function(e){return e===a})),u=t[l];u&&!u.disabled&&o(u.value)}),z0))}},t.map((function(e){var t=e.label,r=e.value,c=e.disabled,s=l.createElement("div",{className:"".concat(g,"-inner")},t);return l.createElement("li",{key:r,className:F()(g,os(os({},"".concat(g,"-selected"),n===r),"".concat(g,"-disabled"),c)),onClick:function(){c||o(r)},onDoubleClick:function(){!c&&u&&u()},onMouseEnter:function(){a(r)},onMouseLeave:function(){a(null)},"data-value":r},f?f(r,{prefixCls:d,originNode:s,today:h,type:"time",subType:i,locale:p}):s)})))}function U0(e){return e<12}function G0(e){var t=e.showHour,n=e.showMinute,r=e.showSecond,i=e.showMillisecond,o=e.use12Hours,a=e.changeOnScroll,u=j0(),c=u.prefixCls,s=u.values,d=u.generateConfig,f=u.locale,h=u.onSelect,p=u.onHover,v=void 0===p?function(){}:p,g=u.pickerValue,m=(null==s?void 0:s[0])||null,y=l.useContext(T0).onCellDblClick,b=nY(P0(d,e,m),5),w=b[0],_=b[1],x=b[2],k=b[3],C=b[4],S=function(e){return[m&&d[e](m),g&&d[e](g)]},O=nY(S("getHour"),2),E=O[0],I=O[1],P=nY(S("getMinute"),2),M=P[0],R=P[1],A=nY(S("getSecond"),2),j=A[0],D=A[1],T=nY(S("getMillisecond"),2),F=T[0],N=T[1],L=null===E?null:U0(E)?"am":"pm",B=l.useMemo((function(){return o?U0(E)?_.filter((function(e){return U0(e.value)})):_.filter((function(e){return!U0(e.value)})):_}),[E,_,o]),V=function(e,t){var n,r=e.filter((function(e){return!e.disabled}));return null!=t?t:null==r||null===(n=r[0])||void 0===n?void 0:n.value},z=V(_,E),H=l.useMemo((function(){return x(z)}),[x,z]),W=V(H,M),U=l.useMemo((function(){return k(z,W)}),[k,z,W]),G=V(U,j),Y=l.useMemo((function(){return C(z,W,G)}),[C,z,W,G]),$=V(Y,F),q=l.useMemo((function(){if(!o)return[];var e=d.getNow(),t=d.setHour(e,6),n=d.setHour(e,18),r=function(e,t){var n=f.cellMeridiemFormat;return n?u0(e,{generateConfig:d,locale:f,format:n}):t};return[{label:r(t,"AM"),value:"am",disabled:_.every((function(e){return e.disabled||!U0(e.value)}))},{label:r(n,"PM"),value:"pm",disabled:_.every((function(e){return e.disabled||U0(e.value)}))}]}),[_,o,d,f]),K=function(e){var t=w(e);h(t)},X=l.useMemo((function(){var e=m||g||d.getNow(),t=function(e){return null!=e};return t(E)?(e=d.setHour(e,E),e=d.setMinute(e,M),e=d.setSecond(e,j),e=d.setMillisecond(e,F)):t(I)?(e=d.setHour(e,I),e=d.setMinute(e,R),e=d.setSecond(e,D),e=d.setMillisecond(e,N)):t(z)&&(e=d.setHour(e,z),e=d.setMinute(e,W),e=d.setSecond(e,G),e=d.setMillisecond(e,$)),e}),[m,g,E,M,j,F,z,W,G,$,I,R,D,N,d]),J=function(e,t){return null===e?null:d[t](X,e)},Z=function(e){return J(e,"setHour")},Q=function(e){return J(e,"setMinute")},ee=function(e){return J(e,"setSecond")},te=function(e){return J(e,"setMillisecond")},ne=function(e){return null===e?null:"am"!==e||U0(E)?"pm"===e&&U0(E)?d.setHour(X,E+12):X:d.setHour(X,E-12)},re={onDblClick:y,changeOnScroll:a};return l.createElement("div",{className:"".concat(c,"-content")},t&&l.createElement(W0,YX({units:B,value:E,optionalValue:I,type:"hour",onChange:function(e){K(Z(e))},onHover:function(e){v(Z(e))}},re)),n&&l.createElement(W0,YX({units:H,value:M,optionalValue:R,type:"minute",onChange:function(e){K(Q(e))},onHover:function(e){v(Q(e))}},re)),r&&l.createElement(W0,YX({units:U,value:j,optionalValue:D,type:"second",onChange:function(e){K(ee(e))},onHover:function(e){v(ee(e))}},re)),i&&l.createElement(W0,YX({units:Y,value:F,optionalValue:N,type:"millisecond",onChange:function(e){K(te(e))},onHover:function(e){v(te(e))}},re)),o&&l.createElement(W0,YX({units:q,value:L,type:"meridiem",onChange:function(e){K(ne(e))},onHover:function(e){v(ne(e))}},re)))}function Y0(e){var t=e.prefixCls,n=e.value,r=e.locale,i=e.generateConfig,o=e.showTime,a=(o||{}).format,u="".concat(t,"-time-panel"),c=nY(D0(e,"time"),1)[0];return l.createElement(A0.Provider,{value:c},l.createElement("div",{className:F()(u)},l.createElement(L0,null,n?u0(n,{locale:r,format:a,generateConfig:i}):" "),l.createElement(G0,o)))}var $0={date:B0,datetime:function(e){var t=e.prefixCls,n=e.generateConfig,r=e.showTime,i=e.onSelect,o=e.value,a=e.pickerValue,u=e.onHover,c="".concat(t,"-datetime-panel"),s=nY(P0(n,r),1)[0],d=function(e){return c0(n,e,o||a)};return l.createElement("div",{className:c},l.createElement(B0,YX({},e,{onSelect:function(e){var t=d(e);i(s(t,t))},onHover:function(e){null==u||u(e?d(e):e)}})),l.createElement(Y0,e))},week:function(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,i=e.value,o=e.hoverValue,a=e.hoverRangeValue,u=r.locale,c="".concat(t,"-week-panel-row");return l.createElement(B0,YX({},e,{mode:"week",panelName:"week",rowClassName:function(e){var t={};if(a){var r=nY(a,2),l=r[0],s=r[1],d=i0(n,u,l,e),f=i0(n,u,s,e);t["".concat(c,"-range-start")]=d,t["".concat(c,"-range-end")]=f,t["".concat(c,"-range-hover")]=!d&&!f&&a0(n,l,s,e)}return o&&(t["".concat(c,"-hover")]=o.some((function(t){return i0(n,u,e,t)}))),F()(c,os({},"".concat(c,"-selected"),!a&&i0(n,u,i,e)),t)}}))},month:function(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,i=e.pickerValue,o=e.disabledDate,a=e.onPickerValueChange,u=e.onModeChange,c="".concat(t,"-month-panel"),s=nY(D0(e,"month"),1)[0],d=r.setMonth(i,0),f=n.shortMonths||(r.locale.getShortMonths?r.locale.getShortMonths(n.locale):[]),h=o?function(e,t){var n=r.setDate(e,1),i=r.setMonth(n,r.getMonth(n)+1),a=r.addDate(i,-1);return o(n,t)&&o(a,t)}:null,p=l.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){u("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},u0(i,{locale:n,format:n.yearFormat,generateConfig:r}));return l.createElement(A0.Provider,{value:s},l.createElement("div",{className:c},l.createElement(L0,{superOffset:function(e){return r.addYear(i,e)},onChange:a,getStart:function(e){return r.setMonth(e,0)},getEnd:function(e){return r.setMonth(e,11)}},p),l.createElement(F0,YX({},e,{disabledDate:h,titleFormat:n.fieldMonthFormat,colNum:3,rowNum:4,baseDate:d,getCellDate:function(e,t){return r.addMonth(e,t)},getCellText:function(e){var t=r.getMonth(e);return n.monthFormat?u0(e,{locale:n,format:n.monthFormat,generateConfig:r}):f[t]},getCellClassName:function(){return os({},"".concat(t,"-cell-in-view"),!0)}}))))},quarter:function(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,i=e.pickerValue,o=e.onPickerValueChange,a=e.onModeChange,u="".concat(t,"-quarter-panel"),c=nY(D0(e,"quarter"),1)[0],s=r.setMonth(i,0),d=l.createElement("button",{type:"button",key:"year","aria-label":"year panel",onClick:function(){a("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},u0(i,{locale:n,format:n.yearFormat,generateConfig:r}));return l.createElement(A0.Provider,{value:c},l.createElement("div",{className:u},l.createElement(L0,{superOffset:function(e){return r.addYear(i,e)},onChange:o,getStart:function(e){return r.setMonth(e,0)},getEnd:function(e){return r.setMonth(e,11)}},d),l.createElement(F0,YX({},e,{titleFormat:n.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:s,getCellDate:function(e,t){return r.addMonth(e,3*t)},getCellText:function(e){return u0(e,{locale:n,format:n.cellQuarterFormat,generateConfig:r})},getCellClassName:function(){return os({},"".concat(t,"-cell-in-view"),!0)}}))))},year:function(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,i=e.pickerValue,o=e.disabledDate,a=e.onPickerValueChange,u=e.onModeChange,c="".concat(t,"-year-panel"),s=nY(D0(e,"year"),1)[0],d=function(e){var t=10*Math.floor(r.getYear(e)/10);return r.setYear(e,t)},f=function(e){var t=d(e);return r.addYear(t,9)},h=d(i),p=f(i),v=r.addYear(h,-1),g=o?function(e,t){var n=r.setMonth(e,0),i=r.setDate(n,1),a=r.addYear(i,1),l=r.addDate(a,-1);return o(i,t)&&o(l,t)}:null,m=l.createElement("button",{type:"button",key:"decade","aria-label":"decade panel",onClick:function(){u("decade")},tabIndex:-1,className:"".concat(t,"-decade-btn")},u0(h,{locale:n,format:n.yearFormat,generateConfig:r}),"-",u0(p,{locale:n,format:n.yearFormat,generateConfig:r}));return l.createElement(A0.Provider,{value:s},l.createElement("div",{className:c},l.createElement(L0,{superOffset:function(e){return r.addYear(i,10*e)},onChange:a,getStart:d,getEnd:f},m),l.createElement(F0,YX({},e,{disabledDate:g,titleFormat:n.fieldYearFormat,colNum:3,rowNum:4,baseDate:v,getCellDate:function(e,t){return r.addYear(e,t)},getCellText:function(e){return u0(e,{locale:n,format:n.cellYearFormat,generateConfig:r})},getCellClassName:function(e){return os({},"".concat(t,"-cell-in-view"),ZQ(r,e,h)||ZQ(r,e,p)||a0(r,h,p,e))}}))))},decade:function(e){var t=e.prefixCls,n=e.locale,r=e.generateConfig,i=e.pickerValue,o=e.disabledDate,a=e.onPickerValueChange,u="".concat(t,"-decade-panel"),c=nY(D0(e,"decade"),1)[0],s=function(e){var t=100*Math.floor(r.getYear(e)/100);return r.setYear(e,t)},d=function(e){var t=s(e);return r.addYear(t,99)},f=s(i),h=d(i),p=r.addYear(f,-10),v=o?function(e,t){var n=r.setDate(e,1),i=r.setMonth(n,0),a=r.setYear(i,10*Math.floor(r.getYear(i)/10)),l=r.addYear(a,10),u=r.addDate(l,-1);return o(a,t)&&o(u,t)}:null,g="".concat(u0(f,{locale:n,format:n.yearFormat,generateConfig:r}),"-").concat(u0(h,{locale:n,format:n.yearFormat,generateConfig:r}));return l.createElement(A0.Provider,{value:c},l.createElement("div",{className:u},l.createElement(L0,{superOffset:function(e){return r.addYear(i,100*e)},onChange:a,getStart:s,getEnd:d},g),l.createElement(F0,YX({},e,{disabledDate:v,colNum:3,rowNum:4,baseDate:p,getCellDate:function(e,t){return r.addYear(e,10*t)},getCellText:function(e){var t=n.cellYearFormat,i=u0(e,{locale:n,format:t,generateConfig:r}),o=u0(r.addYear(e,9),{locale:n,format:t,generateConfig:r});return"".concat(i,"-").concat(o)},getCellClassName:function(e){return os({},"".concat(t,"-cell-in-view"),JQ(r,e,f)||JQ(r,e,h)||a0(r,f,h,e))}}))))},time:Y0};function q0(e,t){var n,r=e.locale,i=e.generateConfig,o=e.direction,a=e.prefixCls,u=e.tabIndex,c=void 0===u?0:u,s=e.multiple,d=e.defaultValue,f=e.value,h=e.onChange,p=e.onSelect,v=e.defaultPickerValue,g=e.pickerValue,m=e.onPickerValueChange,y=e.mode,b=e.onPanelChange,w=e.picker,_=void 0===w?"date":w,x=e.showTime,k=e.hoverValue,C=e.hoverRangeValue,S=e.cellRender,O=e.dateRender,E=e.monthCellRender,I=e.components,P=void 0===I?{}:I,M=e.hideHeader,R=(null===(n=l.useContext(EQ))||void 0===n?void 0:n.prefixCls)||a||"rc-picker",A=l.useRef();l.useImperativeHandle(t,(function(){return{nativeElement:A.current}}));var j=nY(YQ(e),4),D=j[0],T=j[1],N=j[2],L=j[3],B=VQ(r,T),V="date"===_&&x?"datetime":_,z=l.useMemo((function(){return $Q(V,N,L,D,B)}),[V,N,L,D,B]),H=i.getNow(),W=nY(MK(_,{value:y,postState:function(e){return e||"date"}}),2),U=W[0],G=W[1],Y="date"===U&&z?"datetime":U,$=R0(i,r,V),q=nY(MK(d,{value:f}),2),K=q[0],X=q[1],J=l.useMemo((function(){var e=RQ(K).filter((function(e){return e}));return s?e:e.slice(0,1)}),[K,s]),Z=kK((function(e){X(e),h&&(null===e||J.length!==e.length||J.some((function(t,n){return!o0(i,r,t,e[n],V)})))&&(null==h||h(s?e:e[0]))})),Q=kK((function(e){if(null==p||p(e),U===_){var t=s?$(J,e):[e];Z(t)}})),ee=nY(MK(v||J[0]||H,{value:g}),2),te=ee[0],ne=ee[1];l.useEffect((function(){J[0]&&!g&&ne(J[0])}),[J[0]]);var re=function(e,t){null==b||b(e||g,t||U)},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne(e),null==m||m(e),t&&re(e)},oe=function(e,t){G(e),t&&ie(t),re(t,e)},ae=l.useMemo((function(){var e,t;if(Array.isArray(C)){var n=nY(C,2);e=n[0],t=n[1]}else e=C;return e||t?(e=e||t,t=t||e,i.isAfter(e,t)?[t,e]:[e,t]):null}),[C,i]),le=NQ(S,O,E),ue=P[Y]||$0[Y]||B0,ce=l.useContext(T0),se=l.useMemo((function(){return uX(uX({},ce),{},{hideHeader:M})}),[ce,M]),de="".concat(R,"-panel"),fe=jQ(e,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return l.createElement(T0.Provider,{value:se},l.createElement("div",{ref:A,tabIndex:c,className:F()(de,os({},"".concat(de,"-rtl"),"rtl"===o))},l.createElement(ue,YX({},fe,{showTime:z,prefixCls:R,locale:B,generateConfig:i,onModeChange:oe,pickerValue:te,onPickerValueChange:function(e){ie(e,!0)},value:J[0],onSelect:function(e){if(Q(e),ie(e),U!==_){var t=["decade","year"],n=[].concat(t,["month"]),r={quarter:[].concat(t,["quarter"]),week:[].concat(ts(n),["week"]),date:[].concat(ts(n),["date"])}[_]||n,i=r.indexOf(U),o=r[i+1];o&&oe(o,e)}},values:J,cellRender:le,hoverRangeValue:ae,hoverValue:k}))))}var K0=l.memo(l.forwardRef(q0));function X0(e){var t=e.picker,n=e.multiplePanel,r=e.pickerValue,i=e.onPickerValueChange,o=e.needConfirm,a=e.onSubmit,u=e.range,c=e.hoverValue,s=l.useContext(EQ),d=s.prefixCls,f=s.generateConfig,h=l.useCallback((function(e,n){return m0(f,t,e,n)}),[f,t]),p=l.useMemo((function(){return h(r,1)}),[r,h]),v={onCellDblClick:function(){o&&a()}},g="time"===t,m=uX(uX({},e),{},{hoverValue:null,hoverRangeValue:null,hideHeader:g});return u?m.hoverRangeValue=c:m.hoverValue=c,n?l.createElement("div",{className:"".concat(d,"-panels")},l.createElement(T0.Provider,{value:uX(uX({},v),{},{hideNext:!0})},l.createElement(K0,m)),l.createElement(T0.Provider,{value:uX(uX({},v),{},{hidePrev:!0})},l.createElement(K0,YX({},m,{pickerValue:p,onPickerValueChange:function(e){i(h(e,-1))}})))):l.createElement(T0.Provider,{value:uX({},v)},l.createElement(K0,m))}function J0(e){return"function"==typeof e?e():e}function Z0(e){var t=e.prefixCls,n=e.presets,r=e.onClick,i=e.onHover;return n.length?l.createElement("div",{className:"".concat(t,"-presets")},l.createElement("ul",null,n.map((function(e,t){var n=e.label,o=e.value;return l.createElement("li",{key:t,onClick:function(){r(J0(o))},onMouseEnter:function(){i(J0(o))},onMouseLeave:function(){i(null)}},n)})))):null}function Q0(e){var t=e.panelRender,n=e.internalMode,r=e.picker,i=e.showNow,o=e.range,a=e.multiple,u=e.activeOffset,c=void 0===u?0:u,s=e.placement,d=e.presets,f=e.onPresetHover,h=e.onPresetSubmit,p=e.onFocus,v=e.onBlur,g=e.onPanelMouseDown,m=e.direction,y=e.value,b=e.onSelect,w=e.isInvalid,_=e.defaultOpenValue,x=e.onOk,k=e.onSubmit,C=l.useContext(EQ).prefixCls,S="".concat(C,"-panel"),O="rtl"===m,E=l.useRef(null),I=l.useRef(null),P=nY(l.useState(0),2),M=P[0],R=P[1],A=nY(l.useState(0),2),j=A[0],D=A[1];function T(e){return e.filter((function(e){return e}))}l.useEffect((function(){if(o){var e,t=(null===(e=E.current)||void 0===e?void 0:e.offsetWidth)||0;D(c<=M-t?0:c+t-M)}}),[M,c,o]);var N=l.useMemo((function(){return T(RQ(y))}),[y]),L="time"===r&&!N.length,B=l.useMemo((function(){return L?T([_]):N}),[L,N,_]),V=L?_:N,z=l.useMemo((function(){return!B.length||B.some((function(e){return w(e)}))}),[B,w]),H=l.createElement("div",{className:"".concat(C,"-panel-layout")},l.createElement(Z0,{prefixCls:C,presets:d,onClick:h,onHover:f}),l.createElement("div",null,l.createElement(X0,YX({},e,{value:V})),l.createElement(M0,YX({},e,{showNow:!a&&i,invalid:z,onSubmit:function(){L&&b(_),x(),k()}}))));t&&(H=t(H));var W="".concat(S,"-container"),U="marginLeft",G="marginRight",Y=l.createElement("div",{onMouseDown:g,tabIndex:-1,className:F()(W,"".concat(C,"-").concat(n,"-panel-container")),style:os(os({},O?G:U,j),O?U:G,"auto"),onFocus:p,onBlur:v},H);if(o){var $=OQ(SQ(s,O),O);Y=l.createElement("div",{onMouseDown:g,ref:I,className:F()("".concat(C,"-range-wrapper"),"".concat(C,"-").concat(r,"-range-wrapper"))},l.createElement("div",{ref:E,className:"".concat(C,"-range-arrow"),style:os({},$,c)}),l.createElement(JJ,{onResize:function(e){e.offsetWidth&&R(e.offsetWidth)}},Y))}return Y}function e1(e,t){var n=e.format,r=e.maskFormat,i=e.generateConfig,o=e.locale,a=e.preserveInvalidOnBlur,u=e.inputReadOnly,c=e.required,s=e["aria-required"],d=e.onSubmit,f=e.onFocus,h=e.onBlur,p=e.onInputChange,v=e.onInvalid,g=e.open,m=e.onOpenChange,y=e.onKeyDown,b=e.onChange,w=e.activeHelp,_=e.name,x=e.autoComplete,k=e.id,C=e.value,S=e.invalid,O=e.placeholder,E=e.disabled,I=e.activeIndex,P=e.allHelp,M=e.picker,R=function(e,t){var n=i.locale.parse(o.locale,e,[t]);return n&&i.isValidate(n)?n:null},A=n[0],j=l.useCallback((function(e){return u0(e,{locale:o,format:A,generateConfig:i})}),[o,i,A]),D=l.useMemo((function(){return C.map(j)}),[C,j]),T=l.useMemo((function(){var e="time"===M?8:10,t="function"==typeof A?A(i.getNow()).length:A.length;return Math.max(e,t)+2}),[A,M,i]),F=function(e){for(var t=0;t<n.length;t+=1){var r=n[t];if("string"==typeof r){var i=R(e,r);if(i)return i}}return!1};return[function(n){function i(e){return void 0!==n?e[n]:e}var o=uX(uX({},ZX(e,{aria:!0,data:!0})),{},{format:r,validateFormat:function(e){return!!F(e)},preserveInvalidOnBlur:a,readOnly:u,required:c,"aria-required":s,name:_,autoComplete:x,size:T,id:i(k),value:i(D)||"",invalid:i(S),placeholder:i(O),active:I===n,helped:P||w&&I===n,disabled:i(E),onFocus:function(e){f(e,n)},onBlur:function(e){h(e,n)},onSubmit:d,onChange:function(e){p();var t=F(e);if(t)return v(!1,n),void b(t,n);v(!!e,n)},onHelp:function(){m(!0,{index:n})},onKeyDown:function(e){var t=!1;if(null==y||y(e,(function(){t=!0})),!e.defaultPrevented&&!t)switch(e.key){case"Escape":m(!1,{index:n});break;case"Enter":g||m(!0)}}},null==t?void 0:t({valueTexts:D}));return Object.keys(o).forEach((function(e){void 0===o[e]&&delete o[e]})),o},j]}var t1=["onMouseEnter","onMouseLeave"];function n1(e){return l.useMemo((function(){return jQ(e,t1)}),[e])}var r1=["icon","type"],i1=["onClear"];function o1(e){var t=e.icon,n=e.type,r=ZG(e,r1),i=l.useContext(EQ).prefixCls;return t?l.createElement("span",YX({className:"".concat(i,"-").concat(n)},r),t):null}function a1(e){var t=e.onClear,n=ZG(e,i1);return l.createElement(o1,YX({},n,{type:"clear",role:"button",onMouseDown:function(e){e.preventDefault()},onClick:function(e){e.stopPropagation(),t()}}))}var l1=["YYYY","MM","DD","HH","mm","ss","SSS"],u1=function(){function e(t){us(this,e),os(this,"format",void 0),os(this,"maskFormat",void 0),os(this,"cells",void 0),os(this,"maskCells",void 0),this.format=t;var n=l1.map((function(e){return"(".concat(e,")")})).join("|"),r=new RegExp(n,"g");this.maskFormat=t.replace(r,(function(e){return"顧".repeat(e.length)}));var i=new RegExp("(".concat(l1.join("|"),")")),o=(t.split(i)||[]).filter((function(e){return e})),a=0;this.cells=o.map((function(e){var t=l1.includes(e),n=a,r=a+e.length;return a=r,{text:e,mask:t,start:n,end:r}})),this.maskCells=this.cells.filter((function(e){return e.mask}))}return ls(e,[{key:"getSelection",value:function(e){var t=this.maskCells[e]||{};return[t.start||0,t.end||0]}},{key:"match",value:function(e){for(var t=0;t<this.maskFormat.length;t+=1){var n=this.maskFormat[t],r=e[t];if(!r||"顧"!==n&&n!==r)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,r=0;r<this.maskCells.length;r+=1){var i=this.maskCells[r],o=i.start,a=i.end;if(e>=o&&e<=a)return r;var l=Math.min(Math.abs(e-o),Math.abs(e-a));l<t&&(t=l,n=r)}return n}}]),e}();var c1=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],s1=l.forwardRef((function(e,t){var n=e.active,r=e.showActiveCls,i=void 0===r||r,o=e.suffixIcon,a=e.format,u=e.validateFormat,c=e.onChange;e.onInput;var s=e.helped,d=e.onHelp,f=e.onSubmit,h=e.onKeyDown,p=e.preserveInvalidOnBlur,v=void 0!==p&&p,g=e.invalid,m=e.clearIcon,y=ZG(e,c1),b=e.value,w=e.onFocus,_=e.onBlur,x=e.onMouseUp,k=l.useContext(EQ),C=k.prefixCls,S=k.input,O=void 0===S?"input":S,E="".concat(C,"-input"),I=nY(l.useState(!1),2),P=I[0],M=I[1],R=nY(l.useState(b),2),A=R[0],j=R[1],D=nY(l.useState(""),2),T=D[0],N=D[1],L=nY(l.useState(null),2),B=L[0],V=L[1],z=nY(l.useState(null),2),H=z[0],W=z[1],U=A||"";l.useEffect((function(){j(b)}),[b]);var G=l.useRef(),Y=l.useRef();l.useImperativeHandle(t,(function(){return{nativeElement:G.current,inputElement:Y.current,focus:function(e){Y.current.focus(e)},blur:function(){Y.current.blur()}}}));var $=l.useMemo((function(){return new u1(a||"")}),[a]),q=nY(l.useMemo((function(){return s?[0,0]:$.getSelection(B)}),[$,B,s]),2),K=q[0],X=q[1],J=function(e){e&&e!==a&&e!==b&&d()},Z=kK((function(e){u(e)&&c(e),j(e),J(e)})),Q=l.useRef(!1),ee=function(e){_(e)};v0(n,(function(){n||v||j(b)}));var te=function(e){"Enter"===e.key&&u(U)&&f(),null==h||h(e)},ne=l.useRef();OK((function(){if(P&&a&&!Q.current){if($.match(U))return Y.current.setSelectionRange(K,X),ne.current=LZ((function(){Y.current.setSelectionRange(K,X)})),function(){LZ.cancel(ne.current)};Z(a)}}),[$,a,P,U,B,K,X,H,Z]);var re=a?{onFocus:function(e){M(!0),V(0),N(""),w(e)},onBlur:function(e){M(!1),ee(e)},onKeyDown:function(e){te(e);var t=e.key,n=null,r=null,i=X-K,o=a.slice(K,X),l=function(e){V((function(t){var n=t+e;return n=Math.max(n,0),n=Math.min(n,$.size()-1)}))},u=function(e){var t=function(e){return{YYYY:[0,9999,(new Date).getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]}[e]}(o),n=nY(t,3),r=n[0],i=n[1],a=n[2],l=U.slice(K,X),u=Number(l);if(isNaN(u))return String(a||(e>0?r:i));var c=i-r+1;return String(r+(c+(u+e)-r)%c)};switch(t){case"Backspace":case"Delete":n="",r=o;break;case"ArrowLeft":n="",l(-1);break;case"ArrowRight":n="",l(1);break;case"ArrowUp":n="",r=u(1);break;case"ArrowDown":n="",r=u(-1);break;default:isNaN(Number(t))||(r=n=T+t)}if(null!==n&&(N(n),n.length>=i&&(l(1),N(""))),null!==r){var c=U.slice(0,K)+MQ(r,i)+U.slice(X);Z(c.slice(0,a.length))}W({})},onMouseDown:function(){Q.current=!0},onMouseUp:function(e){var t=e.target.selectionStart,n=$.getMaskCellIndex(t);V(n),W({}),null==x||x(e),Q.current=!1},onPaste:function(e){var t=e.clipboardData.getData("text");u(t)&&Z(t)}}:{};return l.createElement("div",{ref:G,className:F()(E,os(os({},"".concat(E,"-active"),n&&i),"".concat(E,"-placeholder"),s))},l.createElement(O,YX({ref:Y,"aria-invalid":g,autoComplete:"off"},y,{onKeyDown:te,onBlur:ee},re,{value:U,onChange:function(e){if(!a){var t=e.target.value;J(t),j(t),c(t)}}})),l.createElement(o1,{type:"suffix",icon:o}),m)})),d1=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],f1=["index"],h1=["insetInlineStart","insetInlineEnd"];function p1(e,t){var n=e.id,r=e.prefix,i=e.clearIcon,o=e.suffixIcon,a=e.separator,u=void 0===a?"~":a,c=e.activeIndex;e.activeHelp,e.allHelp;var s=e.focused;e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig;var d=e.placeholder,f=e.className,h=e.style,p=e.onClick,v=e.onClear,g=e.value;e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var m=e.disabled,y=e.invalid;e.inputReadOnly;var b=e.direction;e.onOpenChange;var w=e.onActiveOffset,_=e.placement,x=e.onMouseDown;e.required,e["aria-required"];var k=e.autoFocus,C=e.tabIndex,S=ZG(e,d1),O="rtl"===b,E=l.useContext(EQ).prefixCls,I=l.useMemo((function(){if("string"==typeof n)return[n];var e=n||{};return[e.start,e.end]}),[n]),P=l.useRef(),M=l.useRef(),R=l.useRef(),A=function(e){var t;return null===(t=[M,R][e])||void 0===t?void 0:t.current};l.useImperativeHandle(t,(function(){return{nativeElement:P.current,focus:function(e){if("object"===lr(e)){var t,n=e||{},r=n.index,i=void 0===r?0:r,o=ZG(n,f1);null===(t=A(i))||void 0===t||t.focus(o)}else{var a;null===(a=A(null!=e?e:0))||void 0===a||a.focus()}},blur:function(){var e,t;null===(e=A(0))||void 0===e||e.blur(),null===(t=A(1))||void 0===t||t.blur()}}}));var j=n1(S),D=l.useMemo((function(){return Array.isArray(d)?d:[d,d]}),[d]),T=nY(e1(uX(uX({},e),{},{id:I,placeholder:D})),1)[0],N=SQ(_,O),L=OQ(N,O),B=null==N?void 0:N.toLowerCase().endsWith("right"),V=nY(l.useState({position:"absolute",width:0}),2),z=V[0],H=V[1],W=kK((function(){var e=A(c);if(e){var t=e.nativeElement,n=t.offsetWidth,r=t.offsetLeft,i=t.offsetParent,o=(null==i?void 0:i.offsetWidth)||0,a=B?o-n-r:r;H((function(e){return e.insetInlineStart,e.insetInlineEnd,uX(uX({},ZG(e,h1)),{},os({width:n},L,a))})),w(a)}}));l.useEffect((function(){W()}),[c]);var U=i&&(g[0]&&!m[0]||g[1]&&!m[1]),G=k&&!m[0],Y=k&&!G&&!m[1];return l.createElement(JJ,{onResize:W},l.createElement("div",YX({},j,{className:F()(E,"".concat(E,"-range"),os(os(os(os({},"".concat(E,"-focused"),s),"".concat(E,"-disabled"),m.every((function(e){return e}))),"".concat(E,"-invalid"),y.some((function(e){return e}))),"".concat(E,"-rtl"),O),f),style:h,ref:P,onClick:p,onMouseDown:function(e){var t=e.target;t!==M.current.inputElement&&t!==R.current.inputElement&&e.preventDefault(),null==x||x(e)}}),r&&l.createElement("div",{className:"".concat(E,"-prefix")},r),l.createElement(s1,YX({ref:M},T(0),{autoFocus:G,tabIndex:C,"date-range":"start"})),l.createElement("div",{className:"".concat(E,"-range-separator")},u),l.createElement(s1,YX({ref:R},T(1),{autoFocus:Y,tabIndex:C,"date-range":"end"})),l.createElement("div",{className:"".concat(E,"-active-bar"),style:z}),l.createElement(o1,{type:"suffix",icon:o}),U&&l.createElement(a1,{icon:i,onClear:v})))}var v1=l.forwardRef(p1);function g1(e,t){var n=null!=e?e:t;return Array.isArray(n)?n:[n,n]}function m1(e){return 1===e?"end":"start"}function y1(e,t){var n=nY(d0(e,(function(){var t=e.disabled,n=e.allowEmpty;return{disabled:g1(t,!1),allowEmpty:g1(n,!1)}})),6),r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],s=r.prefixCls,d=r.styles,f=r.classNames,h=r.placement,p=r.defaultValue,v=r.value,g=r.needConfirm,m=r.onKeyDown,y=r.disabled,b=r.allowEmpty,w=r.disabledDate,_=r.minDate,x=r.maxDate,k=r.defaultOpen,C=r.open,S=r.onOpenChange,O=r.locale,E=r.generateConfig,I=r.picker,P=r.showNow,M=r.showToday,R=r.showTime,A=r.mode,j=r.onPanelChange,D=r.onCalendarChange,T=r.onOk,F=r.defaultPickerValue,N=r.pickerValue,L=r.onPickerValueChange,B=r.inputReadOnly,V=r.suffixIcon,z=r.onFocus,H=r.onBlur,W=r.presets,U=r.ranges,G=r.components,Y=r.cellRender,$=r.dateRender,q=r.monthCellRender,K=r.onClick,X=h0(t),J=nY(f0(C,k,y,S),2),Z=J[0],Q=J[1],ee=function(e,t){!y.some((function(e){return!e}))&&e||Q(e,t)},te=nY(C0(E,O,a,!0,!1,p,v,D,T),5),ne=te[0],re=te[1],ie=te[2],oe=te[3],ae=te[4],le=ie(),ue=nY(g0(y,b,Z),9),ce=ue[0],se=ue[1],de=ue[2],fe=ue[3],he=ue[4],pe=ue[5],ve=ue[6],ge=ue[7],me=ue[8],ye=function(e,t){se(!0),null==z||z(e,{range:m1(null!=t?t:fe)})},be=function(e,t){se(!1),null==H||H(e,{range:m1(null!=t?t:fe)})},we=l.useMemo((function(){if(!R)return null;var e=R.disabledTime,t=e?function(t){var n=m1(fe),r=TQ(le,ve,fe);return e(t,n,{from:r})}:void 0;return uX(uX({},R),{},{disabledTime:t})}),[R,fe,le,ve]),_e=nY(MK([I,I],{value:A}),2),xe=_e[0],ke=_e[1],Ce=xe[fe]||I,Se="date"===Ce&&we?"datetime":Ce,Oe=Se===I&&"time"!==Se,Ee=O0(I,Ce,P,M,!0),Ie=nY(S0(r,ne,re,ie,oe,y,a,ce,Z,c),2),Pe=Ie[0],Me=Ie[1],Re=function(e,t,n,r,i,o){var a=n[n.length-1];return function(l,u){var c=nY(e,2),s=c[0],d=c[1],f=uX(uX({},u),{},{from:TQ(e,n)});return!(1!==a||!t[0]||!s||o0(r,i,s,l,f.type)||!r.isAfter(s,l))||!(0!==a||!t[1]||!d||o0(r,i,d,l,f.type)||!r.isAfter(l,d))||(null==o?void 0:o(l,f))}}(le,y,ve,E,O,w),Ae=nY(LQ(le,c,b),2),je=Ae[0],De=Ae[1],Te=nY(b0(E,O,le,xe,Z,fe,i,Oe,F,N,null==we?void 0:we.defaultOpenValue,L,_,x),2),Fe=Te[0],Ne=Te[1],Le=kK((function(e,t,n){var r=AQ(xe,fe,t);if(r[0]===xe[0]&&r[1]===xe[1]||ke(r),j&&!1!==n){var i=ts(le);e&&(i[fe]=e),j(i,r)}})),Be=function(e,t){return AQ(le,t,e)},Ve=function(e,t){var n=le;e&&(n=Be(e,fe)),ge(fe);var r=pe(n);oe(n),Pe(fe,null===r),null===r?ee(!1,{force:!0}):t||X.current.focus({index:r})},ze=nY(l.useState(null),2),He=ze[0],We=ze[1],Ue=nY(l.useState(null),2),Ge=Ue[0],Ye=Ue[1],$e=l.useMemo((function(){return Ge||le}),[le,Ge]);l.useEffect((function(){Z||Ye(null)}),[Z]);var qe=nY(l.useState(0),2),Ke=qe[0],Xe=qe[1],Je=p0(W,U),Ze=NQ(Y,$,q,m1(fe)),Qe=le[fe]||null,et=kK((function(e){return c(e,{activeIndex:fe})})),tt=l.useMemo((function(){var e=ZX(r,!1);return $X(r,[].concat(ts(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]))}),[r]),nt=l.createElement(Q0,YX({},tt,{showNow:Ee,showTime:we,range:!0,multiplePanel:Oe,activeOffset:Ke,placement:h,disabledDate:Re,onFocus:function(e){ee(!0),ye(e)},onBlur:be,onPanelMouseDown:function(){de("panel")},picker:I,mode:Ce,internalMode:Se,onPanelChange:Le,format:u,value:Qe,isInvalid:et,onChange:null,onSelect:function(e){var t=AQ(le,fe,e);oe(t),g||o||i!==Se||Ve(e)},pickerValue:Fe,defaultOpenValue:RQ(null==R?void 0:R.defaultOpenValue)[fe],onPickerValueChange:Ne,hoverValue:$e,onHover:function(e){Ye(e?Be(e,fe):null),We("cell")},needConfirm:g,onSubmit:Ve,onOk:ae,presets:Je,onPresetHover:function(e){Ye(e),We("preset")},onPresetSubmit:function(e){Me(e)&&ee(!1,{force:!0})},onNow:function(e){Ve(e)},cellRender:Ze})),rt=l.useMemo((function(){return{prefixCls:s,locale:O,generateConfig:E,button:G.button,input:G.input}}),[s,O,E,G.button,G.input]);return OK((function(){Z&&void 0!==fe&&Le(null,I,!1)}),[Z,fe,I]),OK((function(){var e=de();Z||"input"!==e||(ee(!1),Ve(null,!0)),Z||!o||g||"panel"!==e||(ee(!0),Ve())}),[Z]),l.createElement(EQ.Provider,{value:rt},l.createElement(PQ,YX({},FQ(r),{popupElement:nt,popupStyle:d.popup,popupClassName:f.popup,visible:Z,onClose:function(){ee(!1)},range:!0}),l.createElement(v1,YX({},r,{ref:X,suffixIcon:V,activeIndex:ce||Z?fe:null,activeHelp:!!Ge,allHelp:!!Ge&&"preset"===He,focused:ce,onFocus:function(e,t){var n=ve.length,r=ve[n-1];n&&r!==t&&g&&!b[r]&&!me(r)&&le[r]?X.current.focus({index:r}):(de("input"),ee(!0,{inherit:!0}),fe!==t&&Z&&!g&&o&&Ve(null,!0),he(t),ye(e,t))},onBlur:function(e,t){if(ee(!1),!g&&"input"===de()){var n=pe(le);Pe(fe,null===n)}be(e,t)},onKeyDown:function(e,t){"Tab"===e.key&&Ve(null,!0),null==m||m(e,t)},onSubmit:Ve,value:$e,maskFormat:u,onChange:function(e,t){var n=Be(e,t);oe(n)},onInputChange:function(){de("input")},format:a,inputReadOnly:B,disabled:y,open:Z,onOpenChange:ee,onClick:function(e){var t,n=e.target.getRootNode();if(!X.current.nativeElement.contains(null!==(t=n.activeElement)&&void 0!==t?t:document.activeElement)){var r=y.findIndex((function(e){return!e}));r>=0&&X.current.focus({index:r})}ee(!0),null==K||K(e)},onClear:function(){Me(null),ee(!1,{force:!0})},invalid:je,onInvalid:De,onActiveOffset:Xe}))))}var b1=l.forwardRef(y1),w1=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],_1=void 0;function x1(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,a=e.responsive,u=e.responsiveDisabled,c=e.registerSize,s=e.itemKey,d=e.className,f=e.style,h=e.children,p=e.display,v=e.order,g=e.component,m=void 0===g?"div":g,y=ZG(e,w1),b=a&&!p;function w(e){c(s,e)}l.useEffect((function(){return function(){w(null)}}),[]);var _,x=o&&i!==_1?o(i,{index:v}):h;r||(_={opacity:b?0:1,height:b?0:_1,overflowY:b?"hidden":_1,order:a?v:_1,pointerEvents:b?"none":_1,position:b?"absolute":_1});var k={};b&&(k["aria-hidden"]=!0);var C=l.createElement(m,YX({className:F()(!r&&n,d),style:uX(uX({},_),f)},k,y,{ref:t}),x);return a&&(C=l.createElement(JJ,{onResize:function(e){w(e.offsetWidth)},disabled:u},C)),C}var k1=l.forwardRef(x1);function C1(){var e=l.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"==typeof MessageChannel)LZ(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){Object(c.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function S1(e,t){var n=nY(l.useState(t),2),r=n[0],i=n[1];return[r,kK((function(t){e((function(){i(t)}))}))]}k1.displayName="Item";var O1=u.a.createContext(null),E1=["component"],I1=["className"],P1=["className"],M1=function(e,t){var n=l.useContext(O1);if(!n){var r=e.component,i=void 0===r?"div":r,o=ZG(e,E1);return l.createElement(i,YX({},o,{ref:t}))}var a=n.className,u=ZG(n,I1),c=e.className,s=ZG(e,P1);return l.createElement(O1.Provider,{value:null},l.createElement(k1,YX({ref:t,className:F()(a,c)},u,s)))},R1=l.forwardRef(M1);R1.displayName="RawItem";var A1=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],j1="responsive",D1="invalidate";function T1(e){return"+ ".concat(e.length," ...")}function F1(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,i=e.data,o=void 0===i?[]:i,a=e.renderItem,u=e.renderRawItem,c=e.itemKey,s=e.itemWidth,d=void 0===s?10:s,f=e.ssr,h=e.style,p=e.className,v=e.maxCount,g=e.renderRest,m=e.renderRawRest,y=e.suffix,b=e.component,w=void 0===b?"div":b,_=e.itemComponent,x=e.onVisibleChange,k=ZG(e,A1),C="full"===f,S=C1(),O=nY(S1(S,null),2),E=O[0],I=O[1],P=E||0,M=nY(S1(S,new Map),2),R=M[0],A=M[1],j=nY(S1(S,0),2),D=j[0],T=j[1],N=nY(S1(S,0),2),L=N[0],B=N[1],V=nY(S1(S,0),2),z=V[0],H=V[1],W=nY(Object(l.useState)(null),2),U=W[0],G=W[1],Y=nY(Object(l.useState)(null),2),$=Y[0],q=Y[1],K=l.useMemo((function(){return null===$&&C?Number.MAX_SAFE_INTEGER:$||0}),[$,E]),X=nY(Object(l.useState)(!1),2),J=X[0],Z=X[1],Q="".concat(r,"-item"),ee=Math.max(D,L),te=v===j1,ne=o.length&&te,re=v===D1,ie=ne||"number"==typeof v&&o.length>v,oe=Object(l.useMemo)((function(){var e=o;return ne?e=null===E&&C?o:o.slice(0,Math.min(o.length,P/d)):"number"==typeof v&&(e=o.slice(0,v)),e}),[o,d,E,v,ne]),ae=Object(l.useMemo)((function(){return ne?o.slice(K+1):o.slice(oe.length)}),[o,oe,ne,K]),le=Object(l.useCallback)((function(e,t){var n;return"function"==typeof c?c(e):null!==(n=c&&(null==e?void 0:e[c]))&&void 0!==n?n:t}),[c]),ue=Object(l.useCallback)(a||function(e){return e},[a]);function ce(e,t,n){($!==e||void 0!==t&&t!==U)&&(q(e),n||(Z(e<o.length-1),null==x||x(e)),void 0!==t&&G(t))}function se(e,t){A((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return R.get(le(oe[e],e))}OK((function(){if(P&&"number"==typeof ee&&oe){var e=z,t=oe.length,n=t-1;if(!t)return void ce(0,null);for(var r=0;r<t;r+=1){var i=de(r);if(C&&(i=i||0),void 0===i){ce(r-1,void 0,!0);break}if(e+=i,0===n&&e<=P||r===n-1&&e+de(n)<=P){ce(n,null);break}if(e+ee>P){ce(r-1,e-i-z+L);break}}y&&de(0)+z>P&&G(null)}}),[P,R,L,z,le,oe]);var fe=J&&!!ae.length,he={};null!==U&&ne&&(he={position:"absolute",left:U,top:0});var pe={prefixCls:Q,responsive:ne,component:_,invalidate:re},ve=u?function(e,t){var n=le(e,t);return l.createElement(O1.Provider,{key:n,value:uX(uX({},pe),{},{order:t,item:e,itemKey:n,registerSize:se,display:t<=K})},u(e,t))}:function(e,t){var n=le(e,t);return l.createElement(k1,YX({},pe,{order:t,key:n,item:e,renderItem:ue,itemKey:n,registerSize:se,display:t<=K}))},ge={order:fe?K:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){B(t),T(L)},display:fe},me=g||T1,ye=m?l.createElement(O1.Provider,{value:uX(uX({},pe),ge)},m(ae)):l.createElement(k1,YX({},pe,ge),"function"==typeof me?me(ae):me),be=l.createElement(w,YX({className:F()(!re&&r,p),style:h,ref:t},k),oe.map(ve),ie?ye:null,y&&l.createElement(k1,YX({},pe,{responsive:te,responsiveDisabled:!ne,order:K,className:"".concat(Q,"-suffix"),registerSize:function(e,t){H(t)},display:!0,style:he}),y));return te?l.createElement(JJ,{onResize:function(e,t){I(t.clientWidth)},disabled:!ne},be):be}var N1=l.forwardRef(F1);function L1(e){var t=e.prefixCls,n=e.value,r=e.onRemove,i=e.removeIcon,o=void 0===i?"×":i,a=e.formatDate,u=e.disabled,c=e.maxTagCount,s=e.placeholder,d="".concat(t,"-selector"),f="".concat(t,"-selection"),h="".concat(f,"-overflow");function p(e,t){return l.createElement("span",{className:F()("".concat(f,"-item")),title:"string"==typeof e?e:null},l.createElement("span",{className:"".concat(f,"-item-content")},e),!u&&t&&l.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:t,className:"".concat(f,"-item-remove")},o))}return l.createElement("div",{className:d},l.createElement(N1,{prefixCls:h,data:n,renderItem:function(e){return p(a(e),(function(t){t&&t.stopPropagation(),r(e)}))},renderRest:function(e){return p("+ ".concat(e.length," ..."))},itemKey:function(e){return a(e)},maxCount:c}),!n.length&&l.createElement("span",{className:"".concat(t,"-selection-placeholder")},s))}N1.displayName="Overflow",N1.Item=R1,N1.RESPONSIVE=j1,N1.INVALIDATE=D1;var B1=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function V1(e,t){e.id;var n=e.open,r=e.prefix,i=e.clearIcon,o=e.suffixIcon;e.activeHelp,e.allHelp;var a=e.focused;e.onFocus,e.onBlur,e.onKeyDown;var u=e.locale,c=e.generateConfig,s=e.placeholder,d=e.className,f=e.style,h=e.onClick,p=e.onClear,v=e.internalPicker,g=e.value,m=e.onChange,y=e.onSubmit;e.onInputChange;var b=e.multiple,w=e.maxTagCount;e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var _=e.disabled,x=e.invalid;e.inputReadOnly;var k=e.direction;e.onOpenChange;var C=e.onMouseDown;e.required,e["aria-required"];var S=e.autoFocus,O=e.tabIndex,E=e.removeIcon,I=ZG(e,B1),P="rtl"===k,M=l.useContext(EQ).prefixCls,R=l.useRef(),A=l.useRef();l.useImperativeHandle(t,(function(){return{nativeElement:R.current,focus:function(e){var t;null===(t=A.current)||void 0===t||t.focus(e)},blur:function(){var e;null===(e=A.current)||void 0===e||e.blur()}}}));var j=n1(I),D=nY(e1(uX(uX({},e),{},{onChange:function(e){m([e])}}),(function(e){return{value:e.valueTexts[0]||"",active:a}})),2),T=D[0],N=D[1],L=!(!i||!g.length||_),B=b?l.createElement(l.Fragment,null,l.createElement(L1,{prefixCls:M,value:g,onRemove:function(e){var t=g.filter((function(t){return t&&!o0(c,u,t,e,v)}));m(t),n||y()},formatDate:N,maxTagCount:w,disabled:_,removeIcon:E,placeholder:s}),l.createElement("input",{className:"".concat(M,"-multiple-input"),value:g.map(N).join(","),ref:A,readOnly:!0,autoFocus:S,tabIndex:O}),l.createElement(o1,{type:"suffix",icon:o}),L&&l.createElement(a1,{icon:i,onClear:p})):l.createElement(s1,YX({ref:A},T(),{autoFocus:S,tabIndex:O,suffixIcon:o,clearIcon:L&&l.createElement(a1,{icon:i,onClear:p}),showActiveCls:!1}));return l.createElement("div",YX({},j,{className:F()(M,os(os(os(os(os({},"".concat(M,"-multiple"),b),"".concat(M,"-focused"),a),"".concat(M,"-disabled"),_),"".concat(M,"-invalid"),x),"".concat(M,"-rtl"),P),d),style:f,ref:R,onClick:h,onMouseDown:function(e){var t;e.target!==(null===(t=A.current)||void 0===t?void 0:t.inputElement)&&e.preventDefault(),null==C||C(e)}}),r&&l.createElement("div",{className:"".concat(M,"-prefix")},r),B)}var z1=l.forwardRef(V1);function H1(e,t){var n=nY(d0(e),6),r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],s=r,d=s.prefixCls,f=s.styles,h=s.classNames,p=s.order,v=s.defaultValue,g=s.value,m=s.needConfirm,y=s.onChange,b=s.onKeyDown,w=s.disabled,_=s.disabledDate,x=s.minDate,k=s.maxDate,C=s.defaultOpen,S=s.open,O=s.onOpenChange,E=s.locale,I=s.generateConfig,P=s.picker,M=s.showNow,R=s.showToday,A=s.showTime,j=s.mode,D=s.onPanelChange,T=s.onCalendarChange,F=s.onOk,N=s.multiple,L=s.defaultPickerValue,B=s.pickerValue,V=s.onPickerValueChange,z=s.inputReadOnly,H=s.suffixIcon,W=s.removeIcon,U=s.onFocus,G=s.onBlur,Y=s.presets,$=s.components,q=s.cellRender,K=s.dateRender,X=s.monthCellRender,J=s.onClick,Z=h0(t);function Q(e){return null===e?null:N?e:e[0]}var ee=R0(I,E,i),te=nY(f0(S,C,[w],O),2),ne=te[0],re=te[1],ie=nY(C0(I,E,a,!1,p,v,g,(function(e,t,n){if(T){var r=uX({},n);delete r.range,T(Q(e),Q(t),r)}}),(function(e){null==F||F(Q(e))})),5),oe=ie[0],ae=ie[1],le=ie[2],ue=ie[3],ce=ie[4],se=le(),de=nY(g0([w]),4),fe=de[0],he=de[1],pe=de[2],ve=de[3],ge=function(e){he(!0),null==U||U(e,{})},me=function(e){he(!1),null==G||G(e,{})},ye=nY(MK(P,{value:j}),2),be=ye[0],we=ye[1],_e="date"===be&&A?"datetime":be,xe=O0(P,be,M,R),ke=y&&function(e,t){y(Q(e),Q(t))},Ce=nY(S0(uX(uX({},r),{},{onChange:ke}),oe,ae,le,ue,[],a,fe,ne,c),2)[1],Se=nY(LQ(se,c),2),Oe=Se[0],Ee=Se[1],Ie=l.useMemo((function(){return Oe.some((function(e){return e}))}),[Oe]),Pe=nY(b0(I,E,se,[be],ne,ve,i,!1,L,B,RQ(null==A?void 0:A.defaultOpenValue),(function(e,t){if(V){var n=uX(uX({},t),{},{mode:t.mode[0]});delete n.range,V(e[0],n)}}),x,k),2),Me=Pe[0],Re=Pe[1],Ae=kK((function(e,t,n){if(we(t),D&&!1!==n){var r=e||se[se.length-1];D(r,t)}})),je=function(){Ce(le()),re(!1,{force:!0})},De=nY(l.useState(null),2),Te=De[0],Fe=De[1],Ne=nY(l.useState(null),2),Le=Ne[0],Be=Ne[1],Ve=l.useMemo((function(){var e=[Le].concat(ts(se)).filter((function(e){return e}));return N?e:e.slice(0,1)}),[se,Le,N]),ze=l.useMemo((function(){return!N&&Le?[Le]:se.filter((function(e){return e}))}),[se,Le,N]);l.useEffect((function(){ne||Be(null)}),[ne]);var He=p0(Y),We=function(e){var t=N?ee(le(),e):[e];Ce(t)&&!N&&re(!1,{force:!0})},Ue=NQ(q,K,X),Ge=l.useMemo((function(){var e=ZX(r,!1);return uX(uX({},$X(r,[].concat(ts(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange"]))),{},{multiple:r.multiple})}),[r]),Ye=l.createElement(Q0,YX({},Ge,{showNow:xe,showTime:A,disabledDate:_,onFocus:function(e){re(!0),ge(e)},onBlur:me,picker:P,mode:be,internalMode:_e,onPanelChange:Ae,format:u,value:se,isInvalid:c,onChange:null,onSelect:function(e){if(pe("panel"),!N||_e===P){var t=N?ee(le(),e):[e];ue(t),m||o||i!==_e||je()}},pickerValue:Me,defaultOpenValue:null==A?void 0:A.defaultOpenValue,onPickerValueChange:Re,hoverValue:Ve,onHover:function(e){Be(e),Fe("cell")},needConfirm:m,onSubmit:je,onOk:ce,presets:He,onPresetHover:function(e){Be(e),Fe("preset")},onPresetSubmit:We,onNow:function(e){We(e)},cellRender:Ue})),$e=l.useMemo((function(){return{prefixCls:d,locale:E,generateConfig:I,button:$.button,input:$.input}}),[d,E,I,$.button,$.input]);return OK((function(){ne&&void 0!==ve&&Ae(null,P,!1)}),[ne,ve,P]),OK((function(){var e=pe();ne||"input"!==e||(re(!1),je()),ne||!o||m||"panel"!==e||(re(!0),je())}),[ne]),l.createElement(EQ.Provider,{value:$e},l.createElement(PQ,YX({},FQ(r),{popupElement:Ye,popupStyle:f.popup,popupClassName:h.popup,visible:ne,onClose:function(){re(!1)}}),l.createElement(z1,YX({},r,{ref:Z,suffixIcon:H,removeIcon:W,activeHelp:!!Le,allHelp:!!Le&&"preset"===Te,focused:fe,onFocus:function(e){pe("input"),re(!0,{inherit:!0}),ge(e)},onBlur:function(e){re(!1),me(e)},onKeyDown:function(e,t){"Tab"===e.key&&je(),null==b||b(e,t)},onSubmit:je,value:ze,maskFormat:u,onChange:function(e){ue(e)},onInputChange:function(){pe("input")},internalPicker:i,format:a,inputReadOnly:z,disabled:w,open:ne,onOpenChange:re,onClick:function(e){w||Z.current.nativeElement.contains(document.activeElement)||Z.current.focus(),re(!0),null==J||J(e)},onClear:function(){Ce(null),re(!1,{force:!0})},invalid:Ie,onInvalid:function(e){Ee(e,0)}}))))}var W1=l.forwardRef(H1),U1=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function G1(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||U1(r)&&U1(i)))return!1;var r,i;return!0}function Y1(e,t){var n;void 0===t&&(t=G1);var r,i=[],o=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&n===this&&t(a,i)||(r=e.apply(this,a),o=!0,n=this,i=a),r}}const $1=Object(l.createContext)(null);var q1={width:0,height:0,left:0,top:0};function K1(e,t){var n=l.useRef(e),r=nY(l.useState({}),2)[1];return[n.current,function(e){var i="function"==typeof e?e(n.current):e;i!==n.current&&t(i,n.current),n.current=i,r({})}]}var X1=Math.pow(.995,20);function J1(e){var t=nY(Object(l.useState)(0),2),n=t[0],r=t[1],i=Object(l.useRef)(0),o=Object(l.useRef)();return o.current=e,EK((function(){var e;null===(e=o.current)||void 0===e||e.call(o)}),[n]),function(){i.current===n&&(i.current+=1,r(i.current))}}var Z1={width:0,height:0,left:0,top:0,right:0};function Q1(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}function e2(e){return String(e).replace(/"/g,"TABS_DQ")}function t2(e,t,n,r){return!(!n||r||!1===e||void 0===e&&(!1===t||null===t))}var n2=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.editable,i=e.locale,o=e.style;return r&&!1!==r.showAdd?l.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(null==i?void 0:i.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null})),r2=l.forwardRef((function(e,t){var n,r=e.position,i=e.prefixCls,o=e.extra;if(!o)return null;var a={};return"object"!==lr(o)||l.isValidElement(o)?a.right=o:a=o,"right"===r&&(n=a.right),"left"===r&&(n=a.left),n?l.createElement("div",{className:"".concat(i,"-extra-content"),ref:t},n):null})),i2=CQ.ESC,o2=CQ.TAB;var a2=Object(l.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,i=e.prefixCls,o=Object(l.useMemo)((function(){return"function"==typeof n?n():n}),[n]),a=nX(t,aX(o));return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement("div",{className:"".concat(i,"-arrow")}),u.a.cloneElement(o,{ref:iX(o)?a:void 0}))})),l2={adjustX:1,adjustY:1},u2=[0,0],c2={topLeft:{points:["bl","tl"],overflow:l2,offset:[0,-4],targetOffset:u2},top:{points:["bc","tc"],overflow:l2,offset:[0,-4],targetOffset:u2},topRight:{points:["br","tr"],overflow:l2,offset:[0,-4],targetOffset:u2},bottomLeft:{points:["tl","bl"],overflow:l2,offset:[0,4],targetOffset:u2},bottom:{points:["tc","bc"],overflow:l2,offset:[0,4],targetOffset:u2},bottomRight:{points:["tr","br"],overflow:l2,offset:[0,4],targetOffset:u2}},s2=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function d2(e,t){var n,r=e.arrow,i=void 0!==r&&r,o=e.prefixCls,a=void 0===o?"rc-dropdown":o,c=e.transitionName,s=e.animation,d=e.align,f=e.placement,h=void 0===f?"bottomLeft":f,p=e.placements,v=void 0===p?c2:p,g=e.getPopupContainer,m=e.showAction,y=e.hideAction,b=e.overlayClassName,w=e.overlayStyle,_=e.visible,x=e.trigger,k=void 0===x?["hover"]:x,C=e.autoFocus,S=e.overlay,O=e.children,E=e.onVisibleChange,I=ZG(e,s2),P=nY(u.a.useState(),2),M=P[0],R=P[1],A="visible"in e?_:M,j=u.a.useRef(null),D=u.a.useRef(null),T=u.a.useRef(null);u.a.useImperativeHandle(t,(function(){return j.current}));var N=function(e){R(e),null==E||E(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,i=e.autoFocus,o=e.overlayRef,a=l.useRef(!1),u=function(){var e,i;t&&(null===(e=n.current)||void 0===e||null===(i=e.focus)||void 0===i||i.call(e),null==r||r(!1))},c=function(){var e;return!(null===(e=o.current)||void 0===e||!e.focus||(o.current.focus(),a.current=!0,0))},s=function(e){switch(e.keyCode){case i2:u();break;case o2:var t=!1;a.current||(t=c()),t?e.preventDefault():u()}};l.useEffect((function(){return t?(window.addEventListener("keydown",s),i&&LZ(c,3),function(){window.removeEventListener("keydown",s),a.current=!1}):function(){a.current=!1}}),[t])}({visible:A,triggerRef:T,onVisibleChange:N,autoFocus:C,overlayRef:D});var L,B,V,z=function(){return u.a.createElement(a2,{ref:D,overlay:S,prefixCls:a,arrow:i})},H=u.a.cloneElement(O,{className:F()(null===(n=O.props)||void 0===n?void 0:n.className,A&&(L=e.openClassName,void 0!==L?L:"".concat(a,"-open"))),ref:iX(O)?nX(T,aX(O)):void 0}),W=y;return W||-1===k.indexOf("contextMenu")||(W=["click"]),u.a.createElement(kQ,YX({builtinPlacements:v},I,{prefixCls:a,ref:j,popupClassName:F()(b,os({},"".concat(a,"-show-arrow"),i)),popupStyle:w,action:k,showAction:m,hideAction:W,popupPlacement:h,popupAlign:d,popupTransitionName:c,popupAnimation:s,popupVisible:A,stretch:(B=e.minOverlayWidthMatchTrigger,V=e.alignPoint,("minOverlayWidthMatchTrigger"in e?B:!V)?"minWidth":""),popup:"function"==typeof S?z:z(),onPopupVisibleChange:N,onPopupClick:function(t){var n=e.onOverlayClick;R(!1),n&&n(t)},getPopupContainer:g}),H)}const f2=u.a.forwardRef(d2);function h2(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(hX(!a,"Warning: There may be circular references"),a)return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var l=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u],l))return!1;return!0}if(t&&i&&"object"===lr(t)&&"object"===lr(i)){var c=Object.keys(t);return c.length===Object.keys(i).length&&c.every((function(n){return e(t[n],i[n],l)}))}return!1}(e,t)}var p2=l.createContext(null);function v2(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function g2(e){return v2(l.useContext(p2),e)}var m2=["children","locked"],y2=l.createContext(null);function b2(e){var t=e.children,n=e.locked,r=ZG(e,m2),i=l.useContext(y2),o=XK((function(){return e=r,t=uX({},i),Object.keys(e).forEach((function(n){var r=e[n];void 0!==r&&(t[n]=r)})),t;var e,t}),[i,r],(function(e,t){return!(n||e[0]===t[0]&&h2(e[1],t[1],!0))}));return l.createElement(y2.Provider,{value:o},t)}var w2=[],_2=l.createContext(null);function x2(){return l.useContext(_2)}var k2=l.createContext(w2);function C2(e){var t=l.useContext(k2);return l.useMemo((function(){return void 0!==e?[].concat(ts(t),[e]):t}),[t,e])}var S2=l.createContext(null),O2=l.createContext({});function E2(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(cQ(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}var I2=CQ.LEFT,P2=CQ.RIGHT,M2=CQ.UP,R2=CQ.DOWN,A2=CQ.ENTER,j2=CQ.ESC,D2=CQ.HOME,T2=CQ.END,F2=[M2,R2,I2,P2];function N2(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ts(e.querySelectorAll("*")).filter((function(e){return E2(e,t)}));return E2(e,t)&&n.unshift(e),n}(e,!0);return n.filter((function(e){return t.has(e)}))}function L2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=N2(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}var B2=function(e,t){var n=new Set,r=new Map,i=new Map;return e.forEach((function(e){var o=document.querySelector("[data-menu-id='".concat(v2(t,e),"']"));o&&(n.add(o),i.set(o,e),r.set(e,o))})),{elements:n,key2element:r,element2key:i}};function V2(e,t,n,r,i,o,a,u,c,s){var d=l.useRef(),f=l.useRef();f.current=t;var h=function(){LZ.cancel(d.current)};return l.useEffect((function(){return function(){h()}}),[]),function(l){var p=l.which;if([].concat(F2,[A2,j2,D2,T2]).includes(p)){var v=o(),g=B2(v,r),m=g,y=m.elements,b=m.key2element,w=m.element2key,_=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),y),x=w.get(_),k=function(e,t,n,r){var i,o="prev",a="next",l="children",u="parent";if("inline"===e&&r===A2)return{inlineTrigger:!0};var c=os(os({},M2,o),R2,a),s=os(os(os(os({},I2,n?a:o),P2,n?o:a),R2,l),A2,l),d=os(os(os(os(os(os({},M2,o),R2,a),A2,l),j2,u),I2,n?l:u),P2,n?u:l);switch(null===(i={inline:c,horizontal:s,vertical:d,inlineSub:c,horizontalSub:d,verticalSub:d}["".concat(e).concat(t?"":"Sub")])||void 0===i?void 0:i[r]){case o:return{offset:-1,sibling:!0};case a:return{offset:1,sibling:!0};case u:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}(e,1===a(x,!0).length,n,p);if(!k&&p!==D2&&p!==T2)return;(F2.includes(p)||[D2,T2].includes(p))&&l.preventDefault();var C=function(e){if(e){var t=e,n=e.querySelector("a");null!=n&&n.getAttribute("href")&&(t=n);var r=w.get(e);u(r),h(),d.current=LZ((function(){f.current===r&&t.focus()}))}};if([D2,T2].includes(p)||k.sibling||!_){var S,O,E=N2(S=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):i.current,y);O=p===D2?E[0]:p===T2?E[E.length-1]:L2(S,y,_,k.offset),C(O)}else if(k.inlineTrigger)c(x);else if(k.offset>0)c(x,!0),h(),d.current=LZ((function(){g=B2(v,r);var e=_.getAttribute("aria-controls"),t=L2(document.getElementById(e),g.elements);C(t)}),5);else if(k.offset<0){var I=a(x,!0),P=I[I.length-2],M=b.get(P);c(P,!1),C(M)}}null==s||s(l)}}var z2="__RC_UTIL_PATH_SPLIT__",H2=function(e){return e.join(z2)},W2="rc-menu-more";function U2(){var e=nY(l.useState({}),2)[1],t=Object(l.useRef)(new Map),n=Object(l.useRef)(new Map),r=nY(l.useState([]),2),i=r[0],o=r[1],a=Object(l.useRef)(0),u=Object(l.useRef)(!1),c=Object(l.useCallback)((function(r,i){var o=H2(i);n.current.set(o,r),t.current.set(r,o),a.current+=1;var l=a.current;!function(e){Promise.resolve().then(e)}((function(){l===a.current&&(u.current||e({}))}))}),[]),s=Object(l.useCallback)((function(e,r){var i=H2(r);n.current.delete(i),t.current.delete(e)}),[]),d=Object(l.useCallback)((function(e){o(e)}),[]),f=Object(l.useCallback)((function(e,n){var r=t.current.get(e)||"",o=r.split(z2);return n&&i.includes(o[0])&&o.unshift(W2),o}),[i]),h=Object(l.useCallback)((function(e,t){return e.filter((function(e){return void 0!==e})).some((function(e){return f(e,!0).includes(t)}))}),[f]),p=Object(l.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(z2),i=new Set;return ts(n.current.keys()).forEach((function(e){e.startsWith(r)&&i.add(n.current.get(e))})),i}),[]);return l.useEffect((function(){return function(){u.current=!0}}),[]),{registerPath:c,unregisterPath:s,refreshOverflowKeys:d,isSubPathKey:h,getKeyPath:f,getKeys:function(){var e=ts(t.current.keys());return i.length&&e.push(W2),e},getSubPathKeys:p}}function G2(e){var t=l.useRef(e);t.current=e;var n=l.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var Y2=Math.random().toFixed(5).toString().slice(2),$2=0;function q2(e,t,n,r){var i=l.useContext(y2),o=i.activeKey,a=i.onActive,u=i.onInactive,c={active:o===e};return t||(c.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),a(e)},c.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),u(e)}),c}function K2(e){var t=l.useContext(y2),n=t.mode,r=t.rtl,i=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*i}:{paddingLeft:e*i}}function X2(e){var t,n=e.icon,r=e.props,i=e.children;return null===n||!1===n?null:("function"==typeof n?t=l.createElement(n,uX({},r)):"boolean"!=typeof n&&(t=n),t||i||null)}var J2=["item"];function Z2(e){var t=e.item,n=ZG(e,J2);return Object.defineProperty(n,"item",{get:function(){return hX(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var Q2=["title","attribute","elementRef"],e5=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],t5=["active"],n5=function(e){Oh(n,e);var t=YJ(n);function n(){return us(this,n),t.apply(this,arguments)}return ls(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,i=$X(ZG(e,Q2),["eventKey","popupClassName","popupOffset","onTitleClick"]);return hX(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),l.createElement(N1.Item,YX({},n,{title:"string"==typeof t?t:void 0},i,{ref:r}))}}]),n}(l.Component),r5=l.forwardRef((function(e,t){var n=e.style,r=e.className,i=e.eventKey;e.warnKey;var o=e.disabled,a=e.itemIcon,u=e.children,c=e.role,s=e.onMouseEnter,d=e.onMouseLeave,f=e.onClick,h=e.onKeyDown,p=e.onFocus,v=ZG(e,e5),g=g2(i),m=l.useContext(y2),y=m.prefixCls,b=m.onItemClick,w=m.disabled,_=m.overflowDisabled,x=m.itemIcon,k=m.selectedKeys,C=m.onActive,S=l.useContext(O2)._internalRenderMenuItem,O="".concat(y,"-item"),E=l.useRef(),I=l.useRef(),P=w||o,M=rX(t,I),R=C2(i),A=function(e){return{key:i,keyPath:ts(R).reverse(),item:E.current,domEvent:e}},j=a||x,D=q2(i,P,s,d),T=D.active,N=ZG(D,t5),L=k.includes(i),B=K2(R.length),V={};"option"===e.role&&(V["aria-selected"]=L);var z=l.createElement(n5,YX({ref:E,elementRef:M,role:null===c?"none":c||"menuitem",tabIndex:o?null:-1,"data-menu-id":_&&g?null:g},$X(v,["extra"]),N,V,{component:"li","aria-disabled":o,style:uX(uX({},B),n),className:F()(O,os(os(os({},"".concat(O,"-active"),T),"".concat(O,"-selected"),L),"".concat(O,"-disabled"),P),r),onClick:function(e){if(!P){var t=A(e);null==f||f(Z2(t)),b(t)}},onKeyDown:function(e){if(null==h||h(e),e.which===CQ.ENTER){var t=A(e);null==f||f(Z2(t)),b(t)}},onFocus:function(e){C(i),null==p||p(e)}}),u,l.createElement(X2,{props:uX(uX({},e),{},{isSelected:L}),icon:j}));return S&&(z=S(z,e,{selected:L})),z}));function i5(e,t){var n=e.eventKey,r=x2(),i=C2(n);return l.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:l.createElement(r5,YX({},e,{ref:t}))}const o5=l.forwardRef(i5);var a5=["className","children"],l5=function(e,t){var n=e.className,r=e.children,i=ZG(e,a5),o=l.useContext(y2),a=o.prefixCls,u=o.mode,c=o.rtl;return l.createElement("ul",YX({className:F()(a,c&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat("inline"===u?"inline":"vertical"),n),role:"menu"},i,{"data-menu-list":!0,ref:t}),r)},u5=l.forwardRef(l5);function c5(e,t){return yJ(e).map((function(e,n){if(l.isValidElement(e)){var r,i,o=e.key,a=null!==(r=null===(i=e.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:o;null==a&&(a="tmp_key-".concat([].concat(ts(t),[n]).join("-")));var u={key:a,eventKey:a};return l.cloneElement(e,u)}return e}))}u5.displayName="SubMenuList";var s5={adjustX:1,adjustY:1},d5={topLeft:{points:["bl","tl"],overflow:s5},topRight:{points:["br","tr"],overflow:s5},bottomLeft:{points:["tl","bl"],overflow:s5},bottomRight:{points:["tr","br"],overflow:s5},leftTop:{points:["tr","tl"],overflow:s5},leftBottom:{points:["br","bl"],overflow:s5},rightTop:{points:["tl","tr"],overflow:s5},rightBottom:{points:["bl","br"],overflow:s5}},f5={topLeft:{points:["bl","tl"],overflow:s5},topRight:{points:["br","tr"],overflow:s5},bottomLeft:{points:["tl","bl"],overflow:s5},bottomRight:{points:["tr","br"],overflow:s5},rightTop:{points:["tr","tl"],overflow:s5},rightBottom:{points:["br","bl"],overflow:s5},leftTop:{points:["tl","tr"],overflow:s5},leftBottom:{points:["bl","br"],overflow:s5}};function h5(e,t,n){return t||(n?n[e]||n.other:void 0)}var p5={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function v5(e){var t=e.prefixCls,n=e.visible,r=e.children,i=e.popup,o=e.popupStyle,a=e.popupClassName,u=e.popupOffset,c=e.disabled,s=e.mode,d=e.onVisibleChange,f=l.useContext(y2),h=f.getPopupContainer,p=f.rtl,v=f.subMenuOpenDelay,g=f.subMenuCloseDelay,m=f.builtinPlacements,y=f.triggerSubMenuAction,b=f.forceSubMenuRender,w=f.rootClassName,_=f.motion,x=f.defaultMotions,k=nY(l.useState(!1),2),C=k[0],S=k[1],O=uX(uX({},p?f5:d5),m),E=p5[s],I=h5(s,_,x),P=l.useRef(I);"inline"!==s&&(P.current=I);var M=uX(uX({},P.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=l.useRef();return l.useEffect((function(){return R.current=LZ((function(){S(n)})),function(){LZ.cancel(R.current)}}),[n]),l.createElement(kQ,{prefixCls:t,popupClassName:F()("".concat(t,"-popup"),os({},"".concat(t,"-rtl"),p),a,w),stretch:"horizontal"===s?"minWidth":null,getPopupContainer:h,builtinPlacements:O,popupPlacement:E,popupVisible:C,popup:i,popupStyle:o,popupAlign:u&&{offset:u},action:c?[]:[y],mouseEnterDelay:v,mouseLeaveDelay:g,onPopupVisibleChange:d,forceRender:b,popupMotion:M,fresh:!0},r)}function g5(e){var t=e.id,n=e.open,r=e.keyPath,i=e.children,o="inline",a=l.useContext(y2),u=a.prefixCls,c=a.forceSubMenuRender,s=a.motion,d=a.defaultMotions,f=a.mode,h=l.useRef(!1);h.current=f===o;var p=nY(l.useState(!h.current),2),v=p[0],g=p[1],m=!!h.current&&n;l.useEffect((function(){h.current&&g(!1)}),[f]);var y=uX({},h5(o,s,d));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return h.current||e||g(!0),null==b?void 0:b(e)},v?null:l.createElement(b2,{mode:o,locked:!h.current},l.createElement(YZ,YX({visible:m},y,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(u,"-hidden")}),(function(e){var n=e.className,r=e.style;return l.createElement(u5,{id:t,className:n,style:r},i)})))}var m5=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],y5=["active"],b5=l.forwardRef((function(e,t){var n=e.style,r=e.className,i=e.title,o=e.eventKey;e.warnKey;var a=e.disabled,u=e.internalPopupClose,c=e.children,s=e.itemIcon,d=e.expandIcon,f=e.popupClassName,h=e.popupOffset,p=e.popupStyle,v=e.onClick,g=e.onMouseEnter,m=e.onMouseLeave,y=e.onTitleClick,b=e.onTitleMouseEnter,w=e.onTitleMouseLeave,_=ZG(e,m5),x=g2(o),k=l.useContext(y2),C=k.prefixCls,S=k.mode,O=k.openKeys,E=k.disabled,I=k.overflowDisabled,P=k.activeKey,M=k.selectedKeys,R=k.itemIcon,A=k.expandIcon,j=k.onItemClick,D=k.onOpenChange,T=k.onActive,N=l.useContext(O2)._internalRenderSubMenuItem,L=l.useContext(S2).isSubPathKey,B=C2(),V="".concat(C,"-submenu"),z=E||a,H=l.useRef(),W=l.useRef(),U=null!=s?s:R,G=null!=d?d:A,Y=O.includes(o),$=!I&&Y,q=L(M,o),K=q2(o,z,b,w),X=K.active,J=ZG(K,y5),Z=nY(l.useState(!1),2),Q=Z[0],ee=Z[1],te=function(e){z||ee(e)},ne=l.useMemo((function(){return X||"inline"!==S&&(Q||L([P],o))}),[S,X,P,Q,o,L]),re=K2(B.length),ie=G2((function(e){null==v||v(Z2(e)),j(e)})),oe=x&&"".concat(x,"-popup"),ae=l.createElement("div",YX({role:"menuitem",style:re,className:"".concat(V,"-title"),tabIndex:z?null:-1,ref:H,title:"string"==typeof i?i:null,"data-menu-id":I&&x?null:x,"aria-expanded":$,"aria-haspopup":!0,"aria-controls":oe,"aria-disabled":z,onClick:function(e){z||(null==y||y({key:o,domEvent:e}),"inline"===S&&D(o,!Y))},onFocus:function(){T(o)}},J),i,l.createElement(X2,{icon:"horizontal"!==S?G:void 0,props:uX(uX({},e),{},{isOpen:$,isSubMenu:!0})},l.createElement("i",{className:"".concat(V,"-arrow")}))),le=l.useRef(S);if("inline"!==S&&B.length>1?le.current="vertical":le.current=S,!I){var ue=le.current;ae=l.createElement(v5,{mode:ue,prefixCls:V,visible:!u&&$&&"inline"!==S,popupClassName:f,popupOffset:h,popupStyle:p,popup:l.createElement(b2,{mode:"horizontal"===ue?"vertical":ue},l.createElement(u5,{id:oe,ref:W},c)),disabled:z,onVisibleChange:function(e){"inline"!==S&&D(o,e)}},ae)}var ce=l.createElement(N1.Item,YX({ref:t,role:"none"},_,{component:"li",style:n,className:F()(V,"".concat(V,"-").concat(S),r,os(os(os(os({},"".concat(V,"-open"),$),"".concat(V,"-active"),ne),"".concat(V,"-selected"),q),"".concat(V,"-disabled"),z)),onMouseEnter:function(e){te(!0),null==g||g({key:o,domEvent:e})},onMouseLeave:function(e){te(!1),null==m||m({key:o,domEvent:e})}}),ae,!I&&l.createElement(g5,{id:oe,open:$,keyPath:B},c));return N&&(ce=N(ce,e,{selected:q,active:ne,open:$,disabled:z})),l.createElement(b2,{onItemClick:ie,mode:"horizontal"===S?"vertical":S,itemIcon:U,expandIcon:G},ce)})),w5=l.forwardRef((function(e,t){var n,r=e.eventKey,i=e.children,o=C2(r),a=c5(i,o),u=x2();return l.useEffect((function(){if(u)return u.registerPath(r,o),function(){u.unregisterPath(r,o)}}),[o]),n=u?a:l.createElement(b5,YX({ref:t},e),a),l.createElement(k2.Provider,{value:o},n)}));function _5(e){var t=e.className,n=e.style,r=l.useContext(y2).prefixCls;return x2()?null:l.createElement("li",{role:"separator",className:F()("".concat(r,"-item-divider"),t),style:n})}var x5=["className","title","eventKey","children"],k5=l.forwardRef((function(e,t){var n=e.className,r=e.title;e.eventKey;var i=e.children,o=ZG(e,x5),a=l.useContext(y2).prefixCls,u="".concat(a,"-item-group");return l.createElement("li",YX({ref:t,role:"presentation"},o,{onClick:function(e){return e.stopPropagation()},className:F()(u,n)}),l.createElement("div",{role:"presentation",className:"".concat(u,"-title"),title:"string"==typeof r?r:void 0},r),l.createElement("ul",{role:"group",className:"".concat(u,"-list")},i))})),C5=l.forwardRef((function(e,t){var n=e.eventKey,r=c5(e.children,C2(n));return x2()?r:l.createElement(k5,YX({ref:t},$X(e,["warnKey"])),r)})),S5=["label","children","key","type","extra"];function O5(e,t,n){var r=t.item,i=t.group,o=t.submenu,a=t.divider;return(e||[]).map((function(e,u){if(e&&"object"===lr(e)){var c=e,s=c.label,d=c.children,f=c.key,h=c.type,p=c.extra,v=ZG(c,S5),g=null!=f?f:"tmp-".concat(u);return d||"group"===h?"group"===h?l.createElement(i,YX({key:g},v,{title:s}),O5(d,t,n)):l.createElement(o,YX({key:g},v,{title:s}),O5(d,t,n)):"divider"===h?l.createElement(a,YX({key:g},v)):l.createElement(r,YX({key:g},v,{extra:p}),s,(!!p||0===p)&&l.createElement("span",{className:"".concat(n,"-item-extra")},p))}return null})).filter((function(e){return e}))}function E5(e,t,n,r,i){var o=e,a=uX({divider:_5,item:o5,group:C5,submenu:w5},r);return t&&(o=O5(t,a,i)),c5(o,n)}var I5=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],P5=[],M5=l.forwardRef((function(e,t){var n,r=e,i=r.prefixCls,o=void 0===i?"rc-menu":i,a=r.rootClassName,u=r.style,s=r.className,d=r.tabIndex,f=void 0===d?0:d,h=r.items,p=r.children,v=r.direction,g=r.id,m=r.mode,y=void 0===m?"vertical":m,b=r.inlineCollapsed,w=r.disabled,_=r.disabledOverflow,x=r.subMenuOpenDelay,k=void 0===x?.1:x,C=r.subMenuCloseDelay,S=void 0===C?.1:C,O=r.forceSubMenuRender,E=r.defaultOpenKeys,I=r.openKeys,P=r.activeKey,M=r.defaultActiveFirst,R=r.selectable,A=void 0===R||R,j=r.multiple,D=void 0!==j&&j,T=r.defaultSelectedKeys,N=r.selectedKeys,L=r.onSelect,B=r.onDeselect,V=r.inlineIndent,z=void 0===V?24:V,H=r.motion,W=r.defaultMotions,U=r.triggerSubMenuAction,G=void 0===U?"hover":U,Y=r.builtinPlacements,$=r.itemIcon,q=r.expandIcon,K=r.overflowedIndicator,X=void 0===K?"...":K,J=r.overflowedIndicatorPopupClassName,Z=r.getPopupContainer,Q=r.onClick,ee=r.onOpenChange,te=r.onKeyDown;r.openAnimation,r.openTransitionName;var ne=r._internalRenderMenuItem,re=r._internalRenderSubMenuItem,ie=r._internalComponents,oe=ZG(r,I5),ae=nY(l.useMemo((function(){return[E5(p,h,P5,ie,o),E5(p,h,P5,{},o)]}),[p,h,ie]),2),le=ae[0],ue=ae[1],ce=nY(l.useState(!1),2),se=ce[0],de=ce[1],fe=l.useRef(),he=function(e){var t=nY(MK(e,{value:e}),2),n=t[0],r=t[1];return l.useEffect((function(){$2+=1;var e="".concat(Y2,"-").concat($2);r("rc-menu-uuid-".concat(e))}),[]),n}(g),pe="rtl"===v,ve=nY(MK(E,{value:I,postState:function(e){return e||P5}}),2),ge=ve[0],me=ve[1],ye=function(e){function t(){me(e),null==ee||ee(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object(c.flushSync)(t):t()},be=nY(l.useState(ge),2),we=be[0],_e=be[1],xe=l.useRef(!1),ke=nY(l.useMemo((function(){return"inline"!==y&&"vertical"!==y||!b?[y,!1]:["vertical",b]}),[y,b]),2),Ce=ke[0],Se=ke[1],Oe="inline"===Ce,Ee=nY(l.useState(Ce),2),Ie=Ee[0],Pe=Ee[1],Me=nY(l.useState(Se),2),Re=Me[0],Ae=Me[1];l.useEffect((function(){Pe(Ce),Ae(Se),xe.current&&(Oe?me(we):ye(P5))}),[Ce,Se]);var je=nY(l.useState(0),2),De=je[0],Te=je[1],Fe=De>=le.length-1||"horizontal"!==Ie||_;l.useEffect((function(){Oe&&_e(ge)}),[ge]),l.useEffect((function(){return xe.current=!0,function(){xe.current=!1}}),[]);var Ne=U2(),Le=Ne.registerPath,Be=Ne.unregisterPath,Ve=Ne.refreshOverflowKeys,ze=Ne.isSubPathKey,He=Ne.getKeyPath,We=Ne.getKeys,Ue=Ne.getSubPathKeys,Ge=l.useMemo((function(){return{registerPath:Le,unregisterPath:Be}}),[Le,Be]),Ye=l.useMemo((function(){return{isSubPathKey:ze}}),[ze]);l.useEffect((function(){Ve(Fe?P5:le.slice(De+1).map((function(e){return e.key})))}),[De,Fe]);var $e=nY(MK(P||M&&(null===(n=le[0])||void 0===n?void 0:n.key),{value:P}),2),qe=$e[0],Ke=$e[1],Xe=G2((function(e){Ke(e)})),Je=G2((function(){Ke(void 0)}));Object(l.useImperativeHandle)(t,(function(){return{list:fe.current,focus:function(e){var t,n,r=We(),i=B2(r,he),o=i.elements,a=i.key2element,l=i.element2key,u=N2(fe.current,o),c=null!=qe?qe:u[0]?l.get(u[0]):null===(t=le.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key,s=a.get(c);c&&s&&(null==s||null===(n=s.focus)||void 0===n||n.call(s,e))}}}));var Ze=nY(MK(T||[],{value:N,postState:function(e){return Array.isArray(e)?e:null==e?P5:[e]}}),2),Qe=Ze[0],et=Ze[1],tt=G2((function(e){null==Q||Q(Z2(e)),function(e){if(A){var t,n=e.key,r=Qe.includes(n);t=D?r?Qe.filter((function(e){return e!==n})):[].concat(ts(Qe),[n]):[n],et(t);var i=uX(uX({},e),{},{selectedKeys:t});r?null==B||B(i):null==L||L(i)}!D&&ge.length&&"inline"!==Ie&&ye(P5)}(e)})),nt=G2((function(e,t){var n=ge.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Ie){var r=Ue(e);n=n.filter((function(e){return!r.has(e)}))}h2(ge,n,!0)||ye(n,!0)})),rt=V2(Ie,qe,pe,he,fe,We,He,Ke,(function(e,t){var n=null!=t?t:!ge.includes(e);nt(e,n)}),te);l.useEffect((function(){de(!0)}),[]);var it=l.useMemo((function(){return{_internalRenderMenuItem:ne,_internalRenderSubMenuItem:re}}),[ne,re]),ot="horizontal"!==Ie||_?le:le.map((function(e,t){return l.createElement(b2,{key:e.key,overflowDisabled:t>De},e)})),at=l.createElement(N1,YX({id:g,ref:fe,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:o5,className:F()(o,"".concat(o,"-root"),"".concat(o,"-").concat(Ie),s,os(os({},"".concat(o,"-inline-collapsed"),Re),"".concat(o,"-rtl"),pe),a),dir:v,style:u,role:"menu",tabIndex:f,data:ot,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?le.slice(-t):null;return l.createElement(w5,{eventKey:W2,title:X,disabled:Fe,internalPopupClose:0===t,popupClassName:J},n)},maxCount:"horizontal"!==Ie||_?N1.INVALIDATE:N1.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Te(e)},onKeyDown:rt},oe));return l.createElement(O2.Provider,{value:it},l.createElement(p2.Provider,{value:he},l.createElement(b2,{prefixCls:o,rootClassName:a,mode:Ie,openKeys:ge,rtl:pe,disabled:w,motion:se?H:null,defaultMotions:se?W:null,activeKey:qe,onActive:Xe,onInactive:Je,selectedKeys:Qe,inlineIndent:z,subMenuOpenDelay:k,subMenuCloseDelay:S,forceSubMenuRender:O,builtinPlacements:Y,triggerSubMenuAction:G,getPopupContainer:Z,itemIcon:$,expandIcon:q,onItemClick:tt,onOpenChange:nt},l.createElement(S2.Provider,{value:Ye},at),l.createElement("div",{style:{display:"none"},"aria-hidden":!0},l.createElement(_2.Provider,{value:Ge},ue)))))})),R5=M5;R5.Item=o5,R5.SubMenu=w5,R5.ItemGroup=C5,R5.Divider=_5;var A5=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.id,i=e.tabs,o=e.locale,a=e.mobile,u=e.more,c=void 0===u?{}:u,s=e.style,d=e.className,f=e.editable,h=e.tabBarGutter,p=e.rtl,v=e.removeAriaLabel,g=e.onTabClick,m=e.getPopupContainer,y=e.popupClassName,b=nY(Object(l.useState)(!1),2),w=b[0],_=b[1],x=nY(Object(l.useState)(null),2),k=x[0],C=x[1],S=c.icon,O=void 0===S?"More":S,E="".concat(r,"-more-popup"),I="".concat(n,"-dropdown"),P=null!==k?"".concat(E,"-").concat(k):null,M=null==o?void 0:o.dropdownAriaLabel;var R=l.createElement(R5,{onClick:function(e){var t=e.key,n=e.domEvent;g(t,n),_(!1)},prefixCls:"".concat(I,"-menu"),id:E,tabIndex:-1,role:"listbox","aria-activedescendant":P,selectedKeys:[k],"aria-label":void 0!==M?M:"expanded dropdown"},i.map((function(e){var t=e.closable,n=e.disabled,i=e.closeIcon,o=e.key,a=e.label,u=t2(t,i,f,n);return l.createElement(o5,{key:o,id:"".concat(E,"-").concat(o),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(o),disabled:n},l.createElement("span",null,a),u&&l.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(I,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),f.onEdit("remove",{key:t,event:e})}(e,o)}},i||f.removeIcon||"×"))})));function A(e){for(var t=i.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===k}))||0,r=t.length,o=0;o<r;o+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void C(a.key)}}Object(l.useEffect)((function(){var e=document.getElementById(P);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[k]),Object(l.useEffect)((function(){w||C(null)}),[w]);var j=os({},p?"marginRight":"marginLeft",h);i.length||(j.visibility="hidden",j.order=1);var D=F()(os({},"".concat(I,"-rtl"),p)),T=a?null:l.createElement(f2,YX({prefixCls:I,overlay:R,visible:!!i.length&&w,onVisibleChange:_,overlayClassName:F()(D,y),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:m},c),l.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:j,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":E,id:"".concat(r,"-more"),"aria-expanded":w,onKeyDown:function(e){var t=e.which;if(w)switch(t){case CQ.UP:A(-1),e.preventDefault();break;case CQ.DOWN:A(1),e.preventDefault();break;case CQ.ESC:_(!1);break;case CQ.SPACE:case CQ.ENTER:null!==k&&g(k,e)}else[CQ.DOWN,CQ.SPACE,CQ.ENTER].includes(t)&&(_(!0),e.preventDefault())}},O));return l.createElement("div",{className:F()("".concat(n,"-nav-operations"),d),style:s,ref:t},T,l.createElement(n2,{prefixCls:n,locale:o,editable:f}))}));const j5=l.memo(A5,(function(e,t){return t.tabMoving}));var D5=function(e){var t=e.prefixCls,n=e.id,r=e.active,i=e.tab,o=i.key,a=i.label,u=i.disabled,c=i.closeIcon,s=i.icon,d=e.closable,f=e.renderWrapper,h=e.removeAriaLabel,p=e.editable,v=e.onClick,g=e.onFocus,m=e.style,y="".concat(t,"-tab"),b=t2(d,c,p,u);function w(e){u||v(e)}var _=l.useMemo((function(){return s&&"string"==typeof a?l.createElement("span",null,a):a}),[a,s]),x=l.createElement("div",{key:o,"data-node-key":e2(o),className:F()(y,os(os(os({},"".concat(y,"-with-remove"),b),"".concat(y,"-active"),r),"".concat(y,"-disabled"),u)),style:m,onClick:w},l.createElement("div",{role:"tab","aria-selected":r,id:n&&"".concat(n,"-tab-").concat(o),className:"".concat(y,"-btn"),"aria-controls":n&&"".concat(n,"-panel-").concat(o),"aria-disabled":u,tabIndex:u?null:0,onClick:function(e){e.stopPropagation(),w(e)},onKeyDown:function(e){[CQ.SPACE,CQ.ENTER].includes(e.which)&&(e.preventDefault(),w(e))},onFocus:g},s&&l.createElement("span",{className:"".concat(y,"-icon")},s),a&&_),b&&l.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:0,className:"".concat(y,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),p.onEdit("remove",{key:o,event:t})}},c||p.removeIcon||"×"));return f?f(x):x},T5=function(e){var t=e.current||{},n=t.offsetWidth,r=void 0===n?0:n,i=t.offsetHeight,o=void 0===i?0:i;if(e.current){var a=e.current.getBoundingClientRect(),l=a.width,u=a.height;if(Math.abs(l-r)<1)return[l,u]}return[r,o]},F5=function(e,t){return e[t?0:1]},N5=l.forwardRef((function(e,t){var n,r,i,o,a,c=e.className,s=e.style,d=e.id,f=e.animated,h=e.activeKey,p=e.rtl,v=e.extra,g=e.editable,m=e.locale,y=e.tabPosition,b=e.tabBarGutter,w=e.children,_=e.onTabClick,x=e.onTabScroll,k=e.indicator,C=l.useContext($1),S=C.prefixCls,O=C.tabs,E=Object(l.useRef)(null),I=Object(l.useRef)(null),P=Object(l.useRef)(null),M=Object(l.useRef)(null),R=Object(l.useRef)(null),A=Object(l.useRef)(null),j=Object(l.useRef)(null),D="top"===y||"bottom"===y,T=nY(K1(0,(function(e,t){D&&x&&x({direction:e>t?"left":"right"})})),2),N=T[0],L=T[1],B=nY(K1(0,(function(e,t){!D&&x&&x({direction:e>t?"top":"bottom"})})),2),V=B[0],z=B[1],H=nY(Object(l.useState)([0,0]),2),W=H[0],U=H[1],G=nY(Object(l.useState)([0,0]),2),Y=G[0],$=G[1],q=nY(Object(l.useState)([0,0]),2),K=q[0],X=q[1],J=nY(Object(l.useState)([0,0]),2),Z=J[0],Q=J[1],ee=(n=new Map,r=Object(l.useRef)([]),i=nY(Object(l.useState)({}),2)[1],o=Object(l.useRef)("function"==typeof n?n():n),a=J1((function(){var e=o.current;r.current.forEach((function(t){e=t(e)})),r.current=[],o.current=e,i({})})),[o.current,function(e){r.current.push(e),a()}]),te=nY(ee,2),ne=te[0],re=te[1],ie=function(e,t,n){return Object(l.useMemo)((function(){for(var n,r=new Map,i=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||q1,o=i.left+i.width,a=0;a<e.length;a+=1){var l,u=e[a].key,c=t.get(u);c||(c=t.get(null===(l=e[a-1])||void 0===l?void 0:l.key)||q1);var s=r.get(u)||uX({},c);s.right=o-s.left-s.width,r.set(u,s)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(O,ne,Y[0]),oe=F5(W,D),ae=F5(Y,D),le=F5(K,D),ue=F5(Z,D),ce=Math.floor(oe)<Math.floor(ae+le),se=ce?oe-ue:oe-le,de="".concat(S,"-nav-operations-hidden"),fe=0,he=0;function pe(e){return e<fe?fe:e>he?he:e}D&&p?(fe=0,he=Math.max(0,ae-se)):(fe=Math.min(0,se-ae),he=0);var ve=Object(l.useRef)(null),ge=nY(Object(l.useState)(),2),me=ge[0],ye=ge[1];function be(){ye(Date.now())}function we(){ve.current&&clearTimeout(ve.current)}!function(e,t){var n=nY(Object(l.useState)(),2),r=n[0],i=n[1],o=nY(Object(l.useState)(0),2),a=o[0],u=o[1],c=nY(Object(l.useState)(0),2),s=c[0],d=c[1],f=nY(Object(l.useState)(),2),h=f[0],p=f[1],v=Object(l.useRef)(),g=Object(l.useRef)(),m=Object(l.useRef)(null);m.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;i({x:n,y:r}),window.clearInterval(v.current)},onTouchMove:function(e){if(r){var n=e.touches[0],o=n.screenX,l=n.screenY;i({x:o,y:l});var c=o-r.x,s=l-r.y;t(c,s);var f=Date.now();u(f),d(f-a),p({x:c,y:s})}},onTouchEnd:function(){if(r&&(i(null),p(null),h)){var e=h.x/s,n=h.y/s,o=Math.abs(e),a=Math.abs(n);if(Math.max(o,a)<.1)return;var l=e,u=n;v.current=window.setInterval((function(){Math.abs(l)<.01&&Math.abs(u)<.01?window.clearInterval(v.current):t(20*(l*=X1),20*(u*=X1))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,i=0,o=Math.abs(n),a=Math.abs(r);o===a?i="x"===g.current?n:r:o>a?(i=n,g.current="x"):(i=r,g.current="y"),t(-i,-i)&&e.preventDefault()}},l.useEffect((function(){function t(e){m.current.onTouchMove(e)}function n(e){m.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!0}),e.current.addEventListener("touchstart",(function(e){m.current.onTouchStart(e)}),{passive:!0}),e.current.addEventListener("wheel",(function(e){m.current.onWheel(e)}),{passive:!1}),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(M,(function(e,t){function n(e,t){e((function(e){return pe(e+t)}))}return!!ce&&(D?n(L,e):n(z,t),we(),be(),!0)})),Object(l.useEffect)((function(){return we(),me&&(ve.current=setTimeout((function(){ye(0)}),100)),we}),[me]);var _e=function(e,t,n,r,i,o,a){var u,c,s,d=a.tabs,f=a.tabPosition,h=a.rtl;return["top","bottom"].includes(f)?(u="width",c=h?"right":"left",s=Math.abs(n)):(u="height",c="top",s=-n),Object(l.useMemo)((function(){if(!d.length)return[0,0];for(var n=d.length,r=n,i=0;i<n;i+=1){var o=e.get(d[i].key)||Z1;if(Math.floor(o[c]+o[u])>Math.floor(s+t)){r=i-1;break}}for(var a=0,l=n-1;l>=0;l-=1)if((e.get(d[l].key)||Z1)[c]<s){a=l+1;break}return a>=r?[0,0]:[a,r]}),[e,t,r,i,o,s,f,d.map((function(e){return e.key})).join("_"),h])}(ie,se,D?N:V,ae,le,ue,uX(uX({},e),{},{tabs:O})),xe=nY(_e,2),ke=xe[0],Ce=xe[1],Se=kK((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=ie.get(e)||{width:0,height:0,left:0,right:0,top:0};if(D){var n=N;p?t.right<N?n=t.right:t.right+t.width>N+se&&(n=t.right+t.width-se):t.left<-N?n=-t.left:t.left+t.width>-N+se&&(n=-(t.left+t.width-se)),z(0),L(pe(n))}else{var r=V;t.top<-V?r=-t.top:t.top+t.height>-V+se&&(r=-(t.top+t.height-se)),L(0),z(pe(r))}})),Oe={};"top"===y||"bottom"===y?Oe[p?"marginRight":"marginLeft"]=b:Oe.marginTop=b;var Ee=O.map((function(e,t){var n=e.key;return l.createElement(D5,{id:d,prefixCls:S,key:n,tab:e,style:0===t?void 0:Oe,closable:e.closable,editable:g,active:n===h,renderWrapper:w,removeAriaLabel:null==m?void 0:m.removeAriaLabel,onClick:function(e){_(n,e)},onFocus:function(){Se(n),be(),M.current&&(p||(M.current.scrollLeft=0),M.current.scrollTop=0)}})})),Ie=function(){return re((function(){var e,t=new Map,n=null===(e=R.current)||void 0===e?void 0:e.getBoundingClientRect();return O.forEach((function(e){var r,i=e.key,o=null===(r=R.current)||void 0===r?void 0:r.querySelector('[data-node-key="'.concat(e2(i),'"]'));if(o){var a=function(e,t){var n=e.offsetWidth,r=e.offsetHeight,i=e.offsetTop,o=e.offsetLeft,a=e.getBoundingClientRect(),l=a.width,u=a.height,c=a.left,s=a.top;return Math.abs(l-n)<1?[l,u,c-t.left,s-t.top]:[n,r,o,i]}(o,n),l=nY(a,4),u=l[0],c=l[1],s=l[2],d=l[3];t.set(i,{width:u,height:c,left:s,top:d})}})),t}))};Object(l.useEffect)((function(){Ie()}),[O.map((function(e){return e.key})).join("_")]);var Pe=J1((function(){var e=T5(E),t=T5(I),n=T5(P);U([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var r=T5(j);X(r);var i=T5(A);Q(i);var o=T5(R);$([o[0]-r[0],o[1]-r[1]]),Ie()})),Me=O.slice(0,ke),Re=O.slice(Ce+1),Ae=[].concat(ts(Me),ts(Re)),je=ie.get(h),De=function(e){var t=e.activeTabOffset,n=e.horizontal,r=e.rtl,i=e.indicator,o=void 0===i?{}:i,a=o.size,c=o.align,s=void 0===c?"center":c,d=nY(Object(l.useState)(),2),f=d[0],h=d[1],p=Object(l.useRef)(),v=u.a.useCallback((function(e){return"function"==typeof a?a(e):"number"==typeof a?a:e}),[a]);function g(){LZ.cancel(p.current)}return Object(l.useEffect)((function(){var e={};if(t)if(n){e.width=v(t.width);var i=r?"right":"left";"start"===s&&(e[i]=t[i]),"center"===s&&(e[i]=t[i]+t.width/2,e.transform=r?"translateX(50%)":"translateX(-50%)"),"end"===s&&(e[i]=t[i]+t.width,e.transform="translateX(-100%)")}else e.height=v(t.height),"start"===s&&(e.top=t.top),"center"===s&&(e.top=t.top+t.height/2,e.transform="translateY(-50%)"),"end"===s&&(e.top=t.top+t.height,e.transform="translateY(-100%)");return g(),p.current=LZ((function(){h(e)})),g}),[t,n,r,s,v]),{style:f}}({activeTabOffset:je,horizontal:D,indicator:k,rtl:p}),Te=De.style;Object(l.useEffect)((function(){Se()}),[h,fe,he,Q1(je),Q1(ie),D]),Object(l.useEffect)((function(){Pe()}),[p]);var Fe,Ne,Le,Be,Ve=!!Ae.length,ze="".concat(S,"-nav-wrap");return D?p?(Ne=N>0,Fe=N!==he):(Fe=N<0,Ne=N!==fe):(Le=V<0,Be=V!==fe),l.createElement(JJ,{onResize:Pe},l.createElement("div",{ref:rX(t,E),role:"tablist",className:F()("".concat(S,"-nav"),c),style:s,onKeyDown:function(){be()}},l.createElement(r2,{ref:I,position:"left",extra:v,prefixCls:S}),l.createElement(JJ,{onResize:Pe},l.createElement("div",{className:F()(ze,os(os(os(os({},"".concat(ze,"-ping-left"),Fe),"".concat(ze,"-ping-right"),Ne),"".concat(ze,"-ping-top"),Le),"".concat(ze,"-ping-bottom"),Be)),ref:M},l.createElement(JJ,{onResize:Pe},l.createElement("div",{ref:R,className:"".concat(S,"-nav-list"),style:{transform:"translate(".concat(N,"px, ").concat(V,"px)"),transition:me?"none":void 0}},Ee,l.createElement(n2,{ref:j,prefixCls:S,locale:m,editable:g,style:uX(uX({},0===Ee.length?void 0:Oe),{},{visibility:Ve?"hidden":null})}),l.createElement("div",{className:F()("".concat(S,"-ink-bar"),os({},"".concat(S,"-ink-bar-animated"),f.inkBar)),style:Te}))))),l.createElement(j5,YX({},e,{removeAriaLabel:null==m?void 0:m.removeAriaLabel,ref:A,prefixCls:S,tabs:Ae,className:!Ve&&de,tabMoving:!!me})),l.createElement(r2,{ref:P,position:"right",extra:v,prefixCls:S})))})),L5=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.id,a=e.active,u=e.tabKey,c=e.children;return l.createElement("div",{id:o&&"".concat(o,"-panel-").concat(u),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(u),"aria-hidden":!a,style:i,className:F()(n,a&&"".concat(n,"-active"),r),ref:t},c)})),B5=["renderTabBar"],V5=["label","key"],z5=function(e){var t=e.renderTabBar,n=ZG(e,B5),r=l.useContext($1).tabs;return t?t(uX(uX({},n),{},{panes:r.map((function(e){var t=e.label,n=e.key,r=ZG(e,V5);return l.createElement(L5,YX({tab:t,key:n,tabKey:n},r))}))}),N5):l.createElement(N5,n)},H5=["key","forceRender","style","className","destroyInactiveTabPane"],W5=function(e){var t=e.id,n=e.activeKey,r=e.animated,i=e.tabPosition,o=e.destroyInactiveTabPane,a=l.useContext($1),u=a.prefixCls,c=a.tabs,s=r.tabPane,d="".concat(u,"-tabpane");return l.createElement("div",{className:F()("".concat(u,"-content-holder"))},l.createElement("div",{className:F()("".concat(u,"-content"),"".concat(u,"-content-").concat(i),os({},"".concat(u,"-content-animated"),s))},c.map((function(e){var i=e.key,a=e.forceRender,u=e.style,c=e.className,f=e.destroyInactiveTabPane,h=ZG(e,H5),p=i===n;return l.createElement(YZ,YX({key:i,visible:p,forceRender:a,removeOnLeave:!(!o&&!f),leavedClassName:"".concat(d,"-hidden")},r.tabPaneMotion),(function(e,n){var r=e.style,o=e.className;return l.createElement(L5,YX({},h,{prefixCls:d,id:t,tabKey:i,animated:s,active:p,style:uX(uX({},u),r),className:F()(c,o),ref:n}))}))}))))};var U5=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],G5=0,Y5=l.forwardRef((function(e,t){var n=e.id,r=e.prefixCls,i=void 0===r?"rc-tabs":r,o=e.className,a=e.items,u=e.direction,c=e.activeKey,s=e.defaultActiveKey,d=e.editable,f=e.animated,h=e.tabPosition,p=void 0===h?"top":h,v=e.tabBarGutter,g=e.tabBarStyle,m=e.tabBarExtraContent,y=e.locale,b=e.more,w=e.destroyInactiveTabPane,_=e.renderTabBar,x=e.onChange,k=e.onTabClick,C=e.onTabScroll,S=e.getPopupContainer,O=e.popupClassName,E=e.indicator,I=ZG(e,U5),P=l.useMemo((function(){return(a||[]).filter((function(e){return e&&"object"===lr(e)&&"key"in e}))}),[a]),M="rtl"===u,R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:uX({inkBar:!0},"object"===lr(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(f),A=nY(Object(l.useState)(!1),2),j=A[0],D=A[1];Object(l.useEffect)((function(){D(rZ())}),[]);var T=nY(MK((function(){var e;return null===(e=P[0])||void 0===e?void 0:e.key}),{value:c,defaultValue:s}),2),N=T[0],L=T[1],B=nY(Object(l.useState)((function(){return P.findIndex((function(e){return e.key===N}))})),2),V=B[0],z=B[1];Object(l.useEffect)((function(){var e,t=P.findIndex((function(e){return e.key===N}));-1===t&&(t=Math.max(0,Math.min(V,P.length-1)),L(null===(e=P[t])||void 0===e?void 0:e.key));z(t)}),[P.map((function(e){return e.key})).join("_"),N,V]);var H=nY(MK(null,{value:n}),2),W=H[0],U=H[1];Object(l.useEffect)((function(){n||(U("rc-tabs-".concat(G5)),G5+=1)}),[]);var G={id:W,activeKey:N,animated:R,tabPosition:p,rtl:M,mobile:j},Y=uX(uX({},G),{},{editable:d,locale:y,more:b,tabBarGutter:v,onTabClick:function(e,t){null==k||k(e,t);var n=e!==N;L(e),n&&(null==x||x(e))},onTabScroll:C,extra:m,style:g,panes:null,getPopupContainer:S,popupClassName:O,indicator:E});return l.createElement($1.Provider,{value:{tabs:P,prefixCls:i}},l.createElement("div",YX({ref:t,id:n,className:F()(i,"".concat(i,"-").concat(p),os(os(os({},"".concat(i,"-mobile"),j),"".concat(i,"-editable"),d),"".concat(i,"-rtl"),M),o)},I),l.createElement(z5,YX({},Y,{renderTabBar:_})),l.createElement(W5,YX({destroyInactiveTabPane:w},G,{animated:R}))))})),$5={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],l]:e._events[u].push(l):(e._events[u]=l,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,i,o,a){var l=n?n+e:e;if(!this._events[l])return!1;var u,c,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,i),!0;case 5:return s.fn.call(s.context,t,r,i,o),!0;case 6:return s.fn.call(s.context,t,r,i,o,a),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];s.fn.apply(s.context,u)}else{var f,h=s.length;for(c=0;c<h;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),d){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,r);break;case 4:s[c].fn.call(s[c].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];s[c].fn.apply(s[c].context,u)}}return!0},l.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var l=this._events[o];if(l.fn)l.fn!==t||i&&!l.once||r&&l.context!==r||a(this,o);else{for(var u=0,c=[],s=l.length;u<s;u++)(l[u].fn!==t||i&&!l[u].once||r&&l[u].context!==r)&&c.push(l[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}($5);const q5=Un($5.exports);var K5=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X5=function(){return X5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},X5.apply(this,arguments)},J5={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Z5={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Q5={width:"20px",height:"20px",position:"absolute"},e3={top:X5(X5({},J5),{top:"-5px"}),right:X5(X5({},Z5),{left:void 0,right:"-5px"}),bottom:X5(X5({},J5),{top:void 0,bottom:"-5px"}),left:X5(X5({},Z5),{left:"-5px"}),topRight:X5(X5({},Q5),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:X5(X5({},Q5),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:X5(X5({},Q5),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:X5(X5({},Q5),{left:"-10px",top:"-10px",cursor:"nw-resize"})},t3=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return K5(t,e),t.prototype.render=function(){return l.createElement("div",{className:this.props.className||"",style:X5(X5({position:"absolute",userSelect:"none"},e3[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(l.PureComponent),n3=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),r3=function(){return r3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r3.apply(this,arguments)},i3={width:"auto",height:"auto"},o3=function(e,t,n){return Math.max(Math.min(e,n),t)},a3=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},l3=function(e,t){return new RegExp(e,"i").test(t)},u3=function(e){return Boolean(e.touches&&e.touches.length)},c3=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,i){return Math.abs(r-e)<Math.abs(t[n]-e)?i:n}),0),i=Math.abs(t[r]-e);return 0===n||i<n?t[r]:e},s3=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},d3=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},f3=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],h3="__resizable_base__",p3=function(e){function t(t){var n,r,i,o,a=e.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.appendBase=function(){if(!a.resizable||!a.window)return null;var e=a.parentNode;if(!e)return null;var t=a.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(h3):t.className+=h3,e.appendChild(t),t},a.removeBase=function(e){var t=a.parentNode;t&&t.removeChild(e)},a.state={isResizing:!1,width:null!==(r=null===(n=a.propsSize)||void 0===n?void 0:n.width)&&void 0!==r?r:"auto",height:null!==(o=null===(i=a.propsSize)||void 0===i?void 0:i.height)&&void 0!==o?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return n3(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||i3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){var n;if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null===(n=e.propsSize[t])||void 0===n?void 0:n.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var r=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/r[t]*100+"%"}return s3(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?s3(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?s3(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,i=this.props.boundsByDirection,o=this.state.direction,a=i&&l3("left",o),l=i&&l3("top",o);if("parent"===this.props.bounds){var u=this.parentNode;u&&(n=a?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),r=l?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n,r=this.props.scale||1,i=(n=this.props.resizeRatio||1,Array.isArray(n)?n:[n,n]),o=i[0],a=i[1],l=this.state,u=l.direction,c=l.original,s=this.props,d=s.lockAspectRatio,f=s.lockAspectRatioExtraHeight,h=s.lockAspectRatioExtraWidth,p=c.width,v=c.height,g=f||0,m=h||0;return l3("right",u)&&(p=c.width+(e-c.x)*o/r,d&&(v=(p-m)/this.ratio+g)),l3("left",u)&&(p=c.width-(e-c.x)*o/r,d&&(v=(p-m)/this.ratio+g)),l3("bottom",u)&&(v=c.height+(t-c.y)*a/r,d&&(p=(v-g)*this.ratio+m)),l3("top",u)&&(v=c.height-(t-c.y)*a/r,d&&(p=(v-g)*this.ratio+m)),{newWidth:p,newHeight:v}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var i=this.props,o=i.lockAspectRatio,a=i.lockAspectRatioExtraHeight,l=i.lockAspectRatioExtraWidth,u=void 0===r.width?10:r.width,c=void 0===n.width||n.width<0?e:n.width,s=void 0===r.height?10:r.height,d=void 0===n.height||n.height<0?t:n.height,f=a||0,h=l||0;if(o){var p=(s-f)*this.ratio+h,v=(d-f)*this.ratio+h,g=(u-h)/this.ratio+f,m=(c-h)/this.ratio+f,y=Math.max(u,p),b=Math.min(c,v),w=Math.max(s,g),_=Math.min(d,m);e=o3(e,y,b),t=o3(t,w,_)}else e=o3(e,u,c),t=o3(t,s,d);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if("parent"===this.props.bounds){var t=this.parentNode;if(t){var n=t.getBoundingClientRect();this.parentLeft=n.left*e,this.parentTop=n.top*e}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left*e,this.targetTop=r.top*e}if(this.resizable){var i=this.resizable.getBoundingClientRect(),o=i.left,a=i.top,l=i.right,u=i.bottom;this.resizableLeft=o*e,this.resizableRight=l*e,this.resizableTop=a*e,this.resizableBottom=u*e}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n,r=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(r=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&u3(e.nativeEvent)&&(r=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart)if(this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var o=this.window.getComputedStyle(this.resizable);if("auto"!==o.flexBasis){var a=this.parentNode;if(a){var l=this.window.getComputedStyle(a).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",n=o.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:r,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:r3(r3({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:n};this.setState(u)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&u3(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var n=this.props,r=n.maxWidth,i=n.maxHeight,o=n.minWidth,a=n.minHeight,l=u3(e)?e.touches[0].clientX:e.clientX,u=u3(e)?e.touches[0].clientY:e.clientY,s=this.state,d=s.direction,f=s.original,h=s.width,p=s.height,v=this.getParentSize(),g=function(e,t,n,r,i,o,a){return r=d3(r,e.width,t,n),i=d3(i,e.height,t,n),o=d3(o,e.width,t,n),a=d3(a,e.height,t,n),{maxWidth:void 0===r?void 0:Number(r),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===o?void 0:Number(o),minHeight:void 0===a?void 0:Number(a)}}(v,this.window.innerWidth,this.window.innerHeight,r,i,o,a);r=g.maxWidth,i=g.maxHeight,o=g.minWidth,a=g.minHeight;var m=this.calculateNewSizeFromDirection(l,u),y=m.newHeight,b=m.newWidth,w=this.calculateNewMaxFromBoundary(r,i);this.props.snap&&this.props.snap.x&&(b=c3(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=c3(y,this.props.snap.y,this.props.snapGap));var _=this.calculateNewSizeFromAspectRatio(b,y,{width:w.maxWidth,height:w.maxHeight},{width:o,height:a});if(b=_.newWidth,y=_.newHeight,this.props.grid){var x=a3(b,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),k=a3(y,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0;b=0===C||Math.abs(x-b)<=C?x:b,y=0===C||Math.abs(k-y)<=C?k:y}var S={width:b-f.width,height:y-f.height};if(h&&"string"==typeof h)if(h.endsWith("%"))b=b/v.width*100+"%";else if(h.endsWith("vw")){b=b/this.window.innerWidth*100+"vw"}else if(h.endsWith("vh")){b=b/this.window.innerHeight*100+"vh"}if(p&&"string"==typeof p)if(p.endsWith("%"))y=y/v.height*100+"%";else if(p.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var O={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?O.flexBasis=O.width:"column"===this.flexDir&&(O.flexBasis=O.height);var E=this.state.width!==O.width,I=this.state.height!==O.height,P=this.state.flexBasis!==O.flexBasis,M=E||I||P;M&&Object(c.flushSync)((function(){t.setState(O)})),this.props.onResize&&M&&this.props.onResize(e,d,this.resizable,S)}},t.prototype.onMouseUp=function(e){var t,n,r=this.state,i=r.isResizing,o=r.direction,a=r.original;if(i&&this.resizable){var l={width:this.size.width-a.width,height:this.size.height-a.height};this.props.onResizeStop&&this.props.onResizeStop(e,o,this.resizable,l),this.props.size&&this.setState({width:null!==(t=this.props.size.width)&&void 0!==t?t:"auto",height:null!==(n=this.props.size.height)&&void 0!==n?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:r3(r3({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){var t,n;this.setState({width:null!==(t=e.width)&&void 0!==t?t:"auto",height:null!==(n=e.height)&&void 0!==n?n:"auto"})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,i=t.handleClasses,o=t.handleWrapperStyle,a=t.handleWrapperClass,u=t.handleComponent;if(!n)return null;var c=Object.keys(n).map((function(t){return!1!==n[t]?l.createElement(t3,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:i&&i[t]},u&&u[t]?u[t]:null):null}));return l.createElement("div",{className:a,style:o},c)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==f3.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=r3(r3(r3({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return l.createElement(r,r3({style:n,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)}}),this.state.isResizing&&l.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(l.PureComponent),v3="object"==lr(Wn)&&Wn&&Wn.Object===Object&&Wn,g3=v3,m3="object"==("undefined"==typeof self?"undefined":lr(self))&&self&&self.Object===Object&&self,y3=g3||m3||Function("return this")(),b3=y3.Symbol,w3=b3,_3=Object.prototype,x3=_3.hasOwnProperty,k3=_3.toString,C3=w3?w3.toStringTag:void 0;var S3=function(e){var t=x3.call(e,C3),n=e[C3];try{e[C3]=void 0;var r=!0}catch(e){}var i=k3.call(e);return r&&(t?e[C3]=n:delete e[C3]),i},O3=Object.prototype.toString;var E3=function(e){return O3.call(e)},I3=S3,P3=E3,M3=b3?b3.toStringTag:void 0;var R3=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M3&&M3 in Object(e)?I3(e):P3(e)};var A3=function(e){return null!=e&&"object"==lr(e)},j3=R3,D3=A3;var T3=function(e){return"symbol"==lr(e)||D3(e)&&"[object Symbol]"==j3(e)},F3=T3;var N3=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===l?a==a&&!F3(a):n(a,l)))var l=a,u=o}return u};var L3=function(e,t){return e>t};var B3=function(e){return e},V3=N3,z3=L3,H3=B3;const W3=Un((function(e){return e&&e.length?V3(e,H3,z3):void 0}));var U3=function(e){var t=lr(e);return null!=e&&("object"==t||"function"==t)},G3=R3,Y3=U3;var $3=function(e){if(!Y3(e))return!1;var t=G3(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},q3=y3["__core-js_shared__"],K3=function(){var e=/[^.]+$/.exec(q3&&q3.keys&&q3.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var X3=function(e){return!!K3&&K3 in e},J3=Function.prototype.toString;var Z3=function(e){if(null!=e){try{return J3.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Q3=$3,e6=X3,t6=U3,n6=Z3,r6=/^\[object .+?Constructor\]$/,i6=Function.prototype,o6=Object.prototype,a6=i6.toString,l6=o6.hasOwnProperty,u6=RegExp("^"+a6.call(l6).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var c6=function(e){return!(!t6(e)||e6(e))&&(Q3(e)?u6:r6).test(n6(e))};var s6=function(e,t){return null==e?void 0:e[t]},d6=c6,f6=s6;var h6=function(e,t){var n=f6(e,t);return d6(n)?n:void 0},p6=h6,v6=function(){try{var e=p6(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),g6=v6,m6=g6;var y6=function(e,t,n){"__proto__"==t&&m6?m6(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var b6=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r};var w6=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),l=a.length;l--;){var u=a[e?l:++i];if(!1===n(o[u],u,o))break}return t}},_6=w6();var x6=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},k6=R3,C6=A3;var S6=function(e){return C6(e)&&"[object Arguments]"==k6(e)},O6=S6,E6=A3,I6=Object.prototype,P6=I6.hasOwnProperty,M6=I6.propertyIsEnumerable,R6=O6(function(){return arguments}())?O6:function(e){return E6(e)&&P6.call(e,"callee")&&!M6.call(e,"callee")},A6=R6,j6=Array.isArray,D6={exports:{}};var T6=function(){return!1};!function(e,t){var n=y3,r=T6,i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;e.exports=l}(D6,D6.exports);var F6=D6.exports,N6=/^(?:0|[1-9]\d*)$/;var L6=function(e,t){var n=lr(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&N6.test(e))&&e>-1&&e%1==0&&e<t};var B6=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},V6=R3,z6=B6,H6=A3,W6={};W6["[object Float32Array]"]=W6["[object Float64Array]"]=W6["[object Int8Array]"]=W6["[object Int16Array]"]=W6["[object Int32Array]"]=W6["[object Uint8Array]"]=W6["[object Uint8ClampedArray]"]=W6["[object Uint16Array]"]=W6["[object Uint32Array]"]=!0,W6["[object Arguments]"]=W6["[object Array]"]=W6["[object ArrayBuffer]"]=W6["[object Boolean]"]=W6["[object DataView]"]=W6["[object Date]"]=W6["[object Error]"]=W6["[object Function]"]=W6["[object Map]"]=W6["[object Number]"]=W6["[object Object]"]=W6["[object RegExp]"]=W6["[object Set]"]=W6["[object String]"]=W6["[object WeakMap]"]=!1;var U6=function(e){return H6(e)&&z6(e.length)&&!!W6[V6(e)]};var G6=function(e){return function(t){return e(t)}},Y6={exports:{}};!function(e,t){var n=v3,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}(Y6,Y6.exports);var $6=Y6.exports,q6=U6,K6=G6,X6=$6&&$6.isTypedArray,J6=X6?K6(X6):q6,Z6=x6,Q6=A6,e4=j6,t4=F6,n4=L6,r4=J6,i4=Object.prototype.hasOwnProperty;var o4=function(e,t){var n=e4(e),r=!n&&Q6(e),i=!n&&!r&&t4(e),o=!n&&!r&&!i&&r4(e),a=n||r||i||o,l=a?Z6(e.length,String):[],u=l.length;for(var c in e)!t&&!i4.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||n4(c,u))||l.push(c);return l},a4=Object.prototype;var l4=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||a4)};var u4=function(e,t){return function(n){return e(t(n))}},c4=u4(Object.keys,Object),s4=l4,d4=c4,f4=Object.prototype.hasOwnProperty;var h4=function(e){if(!s4(e))return d4(e);var t=[];for(var n in Object(e))f4.call(e,n)&&"constructor"!=n&&t.push(n);return t},p4=$3,v4=B6;var g4=function(e){return null!=e&&v4(e.length)&&!p4(e)},m4=o4,y4=h4,b4=g4;var w4=function(e){return b4(e)?m4(e):y4(e)},_4=_6,x4=w4;var k4=function(e,t){return e&&_4(e,t,x4)},C4=g4;var S4=function(e,t){return function(n,r){if(null==n)return n;if(!C4(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}},O4=S4(k4),E4=O4;var I4=function(e,t,n,r){return E4(e,(function(e,i,o){t(r,e,n(e),o)})),r};var P4=function(){this.__data__=[],this.size=0};var M4=function(e,t){return e===t||e!=e&&t!=t},R4=M4;var A4=function(e,t){for(var n=e.length;n--;)if(R4(e[n][0],t))return n;return-1},j4=A4,D4=Array.prototype.splice;var T4=A4;var F4=A4;var N4=A4;var L4=function(e,t){var n=this.__data__,r=N4(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},B4=P4,V4=function(e){var t=this.__data__,n=j4(t,e);return!(n<0)&&(n==t.length-1?t.pop():D4.call(t,n,1),--this.size,!0)},z4=function(e){var t=this.__data__,n=T4(t,e);return n<0?void 0:t[n][1]},H4=function(e){return F4(this.__data__,e)>-1},W4=L4;function U4(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}U4.prototype.clear=B4,U4.prototype.delete=V4,U4.prototype.get=z4,U4.prototype.has=H4,U4.prototype.set=W4;var G4=U4,Y4=G4;var $4=function(){this.__data__=new Y4,this.size=0};var q4=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var K4=function(e){return this.__data__.get(e)};var X4=function(e){return this.__data__.has(e)},J4=h6(y3,"Map"),Z4=h6(Object,"create"),Q4=Z4;var e8=function(){this.__data__=Q4?Q4(null):{},this.size=0};var t8=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},n8=Z4,r8=Object.prototype.hasOwnProperty;var i8=function(e){var t=this.__data__;if(n8){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r8.call(t,e)?t[e]:void 0},o8=Z4,a8=Object.prototype.hasOwnProperty;var l8=Z4;var u8=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=l8&&void 0===t?"__lodash_hash_undefined__":t,this},c8=e8,s8=t8,d8=i8,f8=function(e){var t=this.__data__;return o8?void 0!==t[e]:a8.call(t,e)},h8=u8;function p8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}p8.prototype.clear=c8,p8.prototype.delete=s8,p8.prototype.get=d8,p8.prototype.has=f8,p8.prototype.set=h8;var v8=p8,g8=G4,m8=J4;var y8=function(e){var t=lr(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},b8=y8;var w8=function(e,t){var n=e.__data__;return b8(t)?n["string"==typeof t?"string":"hash"]:n.map},_8=w8;var x8=w8;var k8=w8;var C8=w8;var S8=function(e,t){var n=C8(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},O8=function(){this.size=0,this.__data__={hash:new v8,map:new(m8||g8),string:new v8}},E8=function(e){var t=_8(this,e).delete(e);return this.size-=t?1:0,t},I8=function(e){return x8(this,e).get(e)},P8=function(e){return k8(this,e).has(e)},M8=S8;function R8(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}R8.prototype.clear=O8,R8.prototype.delete=E8,R8.prototype.get=I8,R8.prototype.has=P8,R8.prototype.set=M8;var A8=R8,j8=G4,D8=J4,T8=A8;var F8=function(e,t){var n=this.__data__;if(n instanceof j8){var r=n.__data__;if(!D8||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new T8(r)}return n.set(e,t),this.size=n.size,this},N8=G4,L8=$4,B8=q4,V8=K4,z8=X4,H8=F8;function W8(e){var t=this.__data__=new N8(e);this.size=t.size}W8.prototype.clear=L8,W8.prototype.delete=B8,W8.prototype.get=V8,W8.prototype.has=z8,W8.prototype.set=H8;var U8=W8;var G8=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Y8=function(e){return this.__data__.has(e)},$8=A8,q8=G8,K8=Y8;function X8(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $8;++t<n;)this.add(e[t])}X8.prototype.add=X8.prototype.push=q8,X8.prototype.has=K8;var J8=X8,Z8=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Q8=function(e,t){return e.has(t)};var e9=function(e,t,n,r,i,o){var a=1&n,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=o.get(e),s=o.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,h=2&n?new J8:void 0;for(o.set(e,t),o.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,o):r(p,v,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!Z8(t,(function(e,t){if(!Q8(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var t9=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var n9=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},r9=y3.Uint8Array,i9=M4,o9=e9,a9=t9,l9=n9,u9=b3?b3.prototype:void 0,c9=u9?u9.valueOf:void 0;var s9=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new r9(e),new r9(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i9(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=a9;case"[object Set]":var u=1&r;if(l||(l=l9),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var s=o9(l(e),l(t),r,i,o,a);return a.delete(e),s;case"[object Symbol]":if(c9)return c9.call(e)==c9.call(t)}return!1};var d9=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},f9=d9,h9=j6;var p9=function(e,t,n){var r=t(e);return h9(e)?r:f9(r,n(e))};var v9=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var g9=v9,m9=function(){return[]},y9=Object.prototype.propertyIsEnumerable,b9=Object.getOwnPropertySymbols,w9=b9?function(e){return null==e?[]:(e=Object(e),g9(b9(e),(function(t){return y9.call(e,t)})))}:m9,_9=p9,x9=w9,k9=w4;var C9=function(e){return _9(e,k9,x9)},S9=C9,O9=Object.prototype.hasOwnProperty;var E9=function(e,t,n,r,i,o){var a=1&n,l=S9(e),u=l.length;if(u!=S9(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:O9.call(t,s)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var v=e[s=l[c]],g=t[s];if(r)var m=a?r(g,v,s,t,e,o):r(v,g,s,e,t,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){h=!1;break}p||(p="constructor"==s)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(e),o.delete(t),h},I9=h6(y3,"DataView"),P9=J4,M9=h6(y3,"Promise"),R9=h6(y3,"Set"),A9=h6(y3,"WeakMap"),j9=R3,D9=Z3,T9="[object Map]",F9="[object Promise]",N9="[object Set]",L9="[object WeakMap]",B9="[object DataView]",V9=D9(I9),z9=D9(P9),H9=D9(M9),W9=D9(R9),U9=D9(A9),G9=j9;(I9&&G9(new I9(new ArrayBuffer(1)))!=B9||P9&&G9(new P9)!=T9||M9&&G9(M9.resolve())!=F9||R9&&G9(new R9)!=N9||A9&&G9(new A9)!=L9)&&(G9=function(e){var t=j9(e),n="[object Object]"==t?e.constructor:void 0,r=n?D9(n):"";if(r)switch(r){case V9:return B9;case z9:return T9;case H9:return F9;case W9:return N9;case U9:return L9}return t});var Y9=U8,$9=e9,q9=s9,K9=E9,X9=G9,J9=j6,Z9=F6,Q9=J6,e7="[object Arguments]",t7="[object Array]",n7="[object Object]",r7=Object.prototype.hasOwnProperty;var i7=function(e,t,n,r,i,o){var a=J9(e),l=J9(t),u=a?t7:X9(e),c=l?t7:X9(t),s=(u=u==e7?n7:u)==n7,d=(c=c==e7?n7:c)==n7,f=u==c;if(f&&Z9(e)){if(!Z9(t))return!1;a=!0,s=!1}if(f&&!s)return o||(o=new Y9),a||Q9(e)?$9(e,t,n,r,i,o):q9(e,t,u,n,r,i,o);if(!(1&n)){var h=s&&r7.call(e,"__wrapped__"),p=d&&r7.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return o||(o=new Y9),i(v,g,n,r,o)}}return!!f&&(o||(o=new Y9),K9(e,t,n,r,i,o))},o7=i7,a7=A3;var l7=function e(t,n,r,i,o){return t===n||(null==t||null==n||!a7(t)&&!a7(n)?t!=t&&n!=n:o7(t,n,r,i,e,o))},u7=U8,c7=l7;var s7=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var u=(l=n[i])[0],c=e[u],s=l[1];if(a&&l[2]){if(void 0===c&&!(u in e))return!1}else{var d=new u7;if(r)var f=r(c,s,u,e,t,d);if(!(void 0===f?c7(s,c,3,r,d):f))return!1}}return!0},d7=U3;var f7=function(e){return e==e&&!d7(e)},h7=f7,p7=w4;var v7=function(e){for(var t=p7(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,h7(i)]}return t};var g7=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},m7=s7,y7=v7,b7=g7;var w7=function(e){var t=y7(e);return 1==t.length&&t[0][2]?b7(t[0][0],t[0][1]):function(n){return n===e||m7(n,e,t)}},_7=j6,x7=T3,k7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C7=/^\w*$/;var S7=function(e,t){if(_7(e))return!1;var n=lr(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!x7(e))||(C7.test(e)||!k7.test(e)||null!=t&&e in Object(t))},O7=A8;function E7(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(E7.Cache||O7),n}E7.Cache=O7;var I7=E7;var P7=function(e){var t=I7(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},M7=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R7=/\\(\\)?/g,A7=P7((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(M7,(function(e,n,r,i){t.push(r?i.replace(R7,"$1"):n||e)})),t}));var j7=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},D7=j7,T7=j6,F7=T3,N7=b3?b3.prototype:void 0,L7=N7?N7.toString:void 0;var B7=function e(t){if("string"==typeof t)return t;if(T7(t))return D7(t,e)+"";if(F7(t))return L7?L7.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},V7=B7;var z7=function(e){return null==e?"":V7(e)},H7=j6,W7=S7,U7=A7,G7=z7;var Y7=function(e,t){return H7(e)?e:W7(e,t)?[e]:U7(G7(e))},$7=T3;var q7=function(e){if("string"==typeof e||$7(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},K7=Y7,X7=q7;var J7=function(e,t){for(var n=0,r=(t=K7(t,e)).length;null!=e&&n<r;)e=e[X7(t[n++])];return n&&n==r?e:void 0},Z7=J7;var Q7=function(e,t,n){var r=null==e?void 0:Z7(e,t);return void 0===r?n:r};var eee=function(e,t){return null!=e&&t in Object(e)},tee=Y7,nee=A6,ree=j6,iee=L6,oee=B6,aee=q7;var lee=function(e,t,n){for(var r=-1,i=(t=tee(t,e)).length,o=!1;++r<i;){var a=aee(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&oee(i)&&iee(a,i)&&(ree(e)||nee(e))},uee=eee,cee=lee;var see=function(e,t){return null!=e&&cee(e,t,uee)},dee=l7,fee=Q7,hee=see,pee=S7,vee=f7,gee=g7,mee=q7;var yee=function(e,t){return pee(e)&&vee(t)?gee(mee(e),t):function(n){var r=fee(n,e);return void 0===r&&r===t?hee(n,e):dee(t,r,3)}};var bee=function(e){return function(t){return null==t?void 0:t[e]}},wee=J7;var _ee=function(e){return function(t){return wee(t,e)}},xee=bee,kee=_ee,Cee=S7,See=q7;var Oee=w7,Eee=yee,Iee=B3,Pee=j6,Mee=function(e){return Cee(e)?xee(See(e)):kee(e)};var Ree=function(e){return"function"==typeof e?e:null==e?Iee:"object"==lr(e)?Pee(e)?Eee(e[0],e[1]):Oee(e):Mee(e)},Aee=b6,jee=I4,Dee=Ree,Tee=j6;var Fee=function(e,t){return function(n,r){var i=Tee(n)?Aee:jee,o=t?t():{};return i(n,e,Dee(r),o)}},Nee=y6,Lee=Fee((function(e,t,n){Nee(e,n,t)}));const Bee=Un(Lee);var Vee=A6,zee=j6,Hee=b3?b3.isConcatSpreadable:void 0;var Wee=function(e){return zee(e)||Vee(e)||!!(Hee&&e&&e[Hee])},Uee=d9,Gee=Wee;var Yee=function e(t,n,r,i,o){var a=-1,l=t.length;for(r||(r=Gee),o||(o=[]);++a<l;){var u=t[a];n>0&&r(u)?n>1?e(u,n-1,r,i,o):Uee(o,u):i||(o[o.length]=u)}return o},$ee=O4,qee=g4;var Kee=function(e,t){var n=-1,r=qee(e)?Array(e.length):[];return $ee(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};var Xee=T3;var Jee=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xee(e),a=void 0!==t,l=null===t,u=t==t,c=Xee(t);if(!l&&!c&&!o&&e>t||o&&a&&u&&!l&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!u)return-1}return 0},Zee=Jee;var Qee=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=n.length;++r<a;){var u=Zee(i[r],o[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return e.index-t.index},ete=j7,tte=J7,nte=Ree,rte=Kee,ite=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},ote=G6,ate=Qee,lte=B3,ute=j6;var cte=function(e,t,n){t=t.length?ete(t,(function(e){return ute(e)?function(t){return tte(t,1===e.length?e[0]:e)}:e})):[lte];var r=-1;t=ete(t,ote(nte));var i=rte(e,(function(e,n,i){return{criteria:ete(t,(function(t){return t(e)})),index:++r,value:e}}));return ite(i,(function(e,t){return ate(e,t,n)}))};var ste=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},dte=ste,fte=Math.max;var hte=function(e,t,n){return t=fte(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=fte(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),dte(e,this,l)}};var pte=function(e){return function(){return e}},vte=pte,gte=g6,mte=gte?function(e,t){return gte(e,"toString",{configurable:!0,enumerable:!1,value:vte(t),writable:!0})}:B3,yte=mte,bte=Date.now;var wte=function(e){var t=0,n=0;return function(){var r=bte(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},_te=wte(yte),xte=B3,kte=hte,Cte=_te;var Ste=function(e,t){return Cte(kte(e,t,xte),e+"")},Ote=M4,Ete=g4,Ite=L6,Pte=U3;var Mte=function(e,t,n){if(!Pte(n))return!1;var r=lr(t);return!!("number"==r?Ete(n)&&Ite(t,n.length):"string"==r&&t in n)&&Ote(n[t],e)},Rte=Yee,Ate=cte,jte=Mte;const Dte=Un(Ste((function(e,t){if(null==e)return[];var n=t.length;return n>1&&jte(e,t[0],t[1])?t=[]:n>2&&jte(t[0],t[1],t[2])&&(t=[t[0]]),Ate(e,Rte(t,1),[])})));var Tte=/\s/;var Fte=function(e){for(var t=e.length;t--&&Tte.test(e.charAt(t)););return t},Nte=/^\s+/;var Lte=function(e){return e?e.slice(0,Fte(e)+1).replace(Nte,""):e},Bte=U3,Vte=T3,zte=/^[-+]0x[0-9a-f]+$/i,Hte=/^0b[01]+$/i,Wte=/^0o[0-7]+$/i,Ute=parseInt;var Gte=function(e){if("number"==typeof e)return e;if(Vte(e))return NaN;if(Bte(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Bte(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Lte(e);var n=Hte.test(e);return n||Wte.test(e)?Ute(e.slice(2),n?2:8):zte.test(e)?NaN:+e},Yte=Gte;var $te=function(e){return e?Infinity===(e=Yte(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},qte=$te;var Kte=function(e){var t=qte(e),n=t%1;return t==t?n?t-n:t:0},Xte=Kte;var Jte=function(e){return"number"==typeof e&&e==Xte(e)};const Zte=Un(Jte);function Qte(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}!function(e,t){e.exports=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,o={},a=0,l={};function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new h(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){var o=this._config.newline;o||(a=this._config.quoteChar||'"',o=this._handle.guessLineEndings(e,a)),e=ts(e.split(o).slice(r)).join(o)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,i)n.postMessage({results:a,workerId:l.WORKER_ID,finished:r});else if(_(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!_(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):i&&this._config.error&&n.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=l.RemoteChunkSize),u.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(e=(e=t).getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function s(e){(e=e||{}).chunkSize||(e.chunkSize=l.LocalChunkSize),u.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,i=(this._config.chunkSize&&(i=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,i)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;u.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function f(e){u.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function h(e){var t,n,r,i,o=Math.pow(2,53),a=-o,u=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,s=this,d=0,f=0,h=!1,g=!1,m=[],y={data:[],errors:[],meta:{}};function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function x(){if(y&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(y.data=y.data.filter((function(e){return!w(e)}))),k()){var t=function(t,n){_(e.transformHeader)&&(t=e.transformHeader(t,n)),m.push(t)};if(y)if(Array.isArray(y.data[0])){for(var n=0;k()&&n<y.data.length;n++)y.data[n].forEach(t);y.data.splice(0,1)}else y.data.forEach(t)}function i(t,n){for(var r=e.header?{}:[],i=0;i<t.length;i++){var l=i,s=t[i];d=l=e.header?i>=m.length?"__parsed_extra":m[i]:l,h=s=e.transform?e.transform(s,l):s,p=void 0,p=d,e.dynamicTypingFunction&&void 0===e.dynamicTyping[p]&&(e.dynamicTyping[p]=e.dynamicTypingFunction(p)),s=!0===(e.dynamicTyping[p]||e.dynamicTyping)?"true"===h||"TRUE"===h||"false"!==h&&"FALSE"!==h&&(function(e){if(u.test(e)&&(e=parseFloat(e),a<e&&e<o))return 1}(h)?parseFloat(h):c.test(h)?new Date(h):""===h?null:h):h,"__parsed_extra"===l?(r[l]=r[l]||[],r[l].push(s)):r[l]=s}var d,h,p;return e.header&&(i>m.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,f+n):i<m.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,f+n)),r}var s;y&&(e.header||e.dynamicTyping||e.transform)&&(s=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(i),s=y.data.length):y.data=i(y.data,0),e.header&&y.meta&&(y.meta.fields=m),f+=s)}function k(){return e.header&&0===m.length}function C(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),y.errors.push(e)}_(e.step)&&(i=e.step,e.step=function(t){y=t,k()?x():(x(),0!==y.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(y.data=y.data[0],i(y,s))))}),this.parse=function(i,o,a){var u=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(i,u)),r=!1,e.delimiter?_(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter):((u=function(t,n,r,i,o){var a,u,c,s;o=o||[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var d=0;d<o.length;d++){for(var f,h=o[d],p=0,g=0,m=0,y=(c=void 0,new v({comments:i,delimiter:h,newline:n,preview:10}).parse(t)),b=0;b<y.data.length;b++)r&&w(y.data[b])?m++:(g+=f=y.data[b].length,void 0===c?c=f:0<f&&(p+=Math.abs(f-c),c=f));0<y.data.length&&(g/=y.data.length-m),(void 0===u||p<=u)&&(void 0===s||s<g)&&1.99<g&&(u=p,a=h,s=g)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=u.bestDelimiter:(r=!0,e.delimiter=l.DefaultDelimiter),y.meta.delimiter=e.delimiter),u=b(e),e.preview&&e.header&&u.preview++,t=i,n=new v(u),y=n.parse(t,o,a),x(),h?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),t=_(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){s.streamer._halted?(h=!1,s.streamer.parseChunk(t,!0)):setTimeout(s.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(p(t)+"([^]*?)"+p(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,i=0;i<n.length;i++)"\n"===n[i][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,a=e.fastMode,u=null,c=null==e.quoteChar?'"':e.quoteChar,s=c;if(void 0!==e.escapeChar&&(s=e.escapeChar),("string"!=typeof t||-1<l.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<l.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,f=!1;this.parse=function(l,h,v){if("string"!=typeof l)throw new Error("Input must be a string");var g=l.length,m=t.length,y=n.length,b=r.length,w=_(i),x=[],k=[],C=[],S=d=0;if(!l)return N();if(a||!1!==a&&-1===l.indexOf(c)){for(var O=l.split(n),E=0;E<O.length;E++){if(C=O[E],d+=C.length,E!==O.length-1)d+=n.length;else if(v)return N();if(!r||C.substring(0,b)!==r){if(w){if(x=[],j(C.split(t)),L(),f)return N()}else j(C.split(t));if(o&&o<=E)return x=x.slice(0,o),N(!0)}}return N()}for(var I=l.indexOf(t,d),P=l.indexOf(n,d),M=new RegExp(p(s)+p(c),"g"),R=l.indexOf(c,d);;)if(l[d]===c)for(R=d,d++;;){if(-1===(R=l.indexOf(c,R+1)))return v||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:d}),T();if(R===g-1)return T(l.substring(d,R).replace(M,c));if(c===s&&l[R+1]===s)R++;else if(c===s||0===R||l[R-1]!==s){-1!==I&&I<R+1&&(I=l.indexOf(t,R+1));var A=D(-1===(P=-1!==P&&P<R+1?l.indexOf(n,R+1):P)?I:Math.min(I,P));if(l.substr(R+1+A,m)===t){C.push(l.substring(d,R).replace(M,c)),l[d=R+1+A+m]!==c&&(R=l.indexOf(c,d)),I=l.indexOf(t,d),P=l.indexOf(n,d);break}if(A=D(P),l.substring(R+1+A,R+1+A+y)===n){if(C.push(l.substring(d,R).replace(M,c)),F(R+1+A+y),I=l.indexOf(t,d),R=l.indexOf(c,d),w&&(L(),f))return N();if(o&&x.length>=o)return N(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:d}),R++}}else if(r&&0===C.length&&l.substring(d,d+b)===r){if(-1===P)return N();d=P+y,P=l.indexOf(n,d),I=l.indexOf(t,d)}else if(-1!==I&&(I<P||-1===P))C.push(l.substring(d,I)),d=I+m,I=l.indexOf(t,d);else{if(-1===P)break;if(C.push(l.substring(d,P)),F(P+y),w&&(L(),f))return N();if(o&&x.length>=o)return N(!0)}return T();function j(e){x.push(e),S=d}function D(e){var t=0;return-1!==e&&(e=l.substring(R+1,e))&&""===e.trim()?e.length:t}function T(e){return v||(void 0===e&&(e=l.substring(d)),C.push(e),d=g,j(C),w&&L()),N()}function F(e){d=e,j(C),C=[],P=l.indexOf(n,d)}function N(r){if(e.header&&!h&&x.length){for(var i=x[0],o={},a=new Set(i),l=!1,c=0;c<i.length;c++){var s=i[c];if(o[s=_(e.transformHeader)?e.transformHeader(s,c):s]){for(var d=void 0,p=o[s];d=s+"_"+p,p++,a.has(d););a.add(d),i[c]=d,o[s]++,l=!0,(u=null===u?{}:u)[d]=s}else o[s]=1,i[c]=s;a.add(s)}l&&console.warn("Duplicate headers found and renamed.")}return{data:x,errors:k,meta:{delimiter:t,linebreak:n,aborted:f,truncated:!!r,cursor:S+(h||0),renamedHeaders:u}}}function L(){i(N()),x=[],k=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return d}}function g(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(_(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!r);a++);delete t.results}else _(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var n=o[e];_(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function y(){throw new Error("Not implemented.")}function b(e){if("object"!=lr(e)||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return l.parse=function(t,r){var i,u=(r=r||{}).dynamicTyping||!1;if(_(u)&&(r.dynamicTypingFunction=u,u={}),r.dynamicTyping=u,r.transform=!!_(r.transform)&&r.transform,!r.worker||!l.WORKERS_SUPPORTED)return u=null,l.NODE_STREAM_INPUT,"string"==typeof t?(t=65279!==(i=t).charCodeAt(0)?i:i.slice(1),u=new(r.download?c:d)(r)):!0===t.readable&&_(t.read)&&_(t.on)?u=new f(r):(n.File&&t instanceof File||t instanceof Object)&&(u=new s(r)),u.stream(t);(u=function(){var t,r,i;return!!l.WORKERS_SUPPORTED&&(r=n.URL||n.webkitURL||null,i=e.toString(),t=l.BLOB_URL||(l.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"}))),(t=new n.Worker(t)).onmessage=g,t.id=a++,o[t.id]=t)}()).userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=_(r.step),r.chunk=_(r.chunk),r.complete=_(r.complete),r.error=_(r.error),delete r.worker,u.postMessage({input:t,config:r,workerId:u.id})},l.unparse=function(e,t){var n=!1,r=!0,i=",",o="\r\n",a='"',u=a+a,c=!1,s=null,d=!1,f=(function(){if("object"==lr(t)){if("string"!=typeof t.delimiter||l.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(u=t.escapeChar+a),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}}(),new RegExp(p(a),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,c);if("object"==lr(e[0]))return h(s||Object.keys(e[0]),e,c)}else if("object"==lr(e))return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==lr(e.data[0])?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==lr(e.data[0])||(e.data=[e.data])),h(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function h(e,t,n){var a="",l=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),u=!Array.isArray(t[0]);if(l&&r){for(var c=0;c<e.length;c++)0<c&&(a+=i),a+=v(e[c],c);0<t.length&&(a+=o)}for(var s=0;s<t.length;s++){var d=(l?e:t[s]).length,f=!1,h=l?0===Object.keys(t[s]).length:0===t[s].length;if(n&&!l&&(f="greedy"===n?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===n&&l){for(var p=[],g=0;g<d;g++){var m=u?e[g]:g;p.push(t[s][m])}f=""===p.join("").trim()}if(!f){for(var y=0;y<d;y++){0<y&&!h&&(a+=i);var b=l&&u?e[y]:y;a+=v(t[s][b],y)}s<t.length-1&&(!n||0<d&&!h)&&(a+=o)}}return a}function v(e,t){var r,o;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(o=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,o=!0),r=e.toString().replace(f,u),(o=o||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,l.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?a+r+a:r)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!n.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=v,l.ParserHandle=h,l.NetworkStreamer=c,l.FileStreamer=s,l.StringStreamer=d,l.ReadableStreamStreamer=f,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},i=[];return this.each((function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)i.push({file:this.files[o],inputElem:this,instanceConfig:t.extend({},r)})})),o(),this;function o(){if(0===i.length)_(e.complete)&&e.complete();else{var n,r,o,u,c=i[0];if(_(e.before)){var s=e.before(c.file,c.inputElem);if("object"==lr(s)){if("abort"===s.action)return n="AbortError",r=c.file,o=c.inputElem,u=s.reason,void(_(e.error)&&e.error({name:n},r,o,u));if("skip"===s.action)return void a();"object"==lr(s.config)&&(c.instanceConfig=t.extend(c.instanceConfig,s.config))}else if("skip"===s)return void a()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){_(d)&&d(e,c.file,c.inputElem),a()},l.parse(c.file,c.instanceConfig)}}function a(){i.splice(0,1),o()}}),i&&(n.onmessage=function(e){e=e.data,void 0===l.WORKER_ID&&e&&(l.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=l.parse(e.input,e.config))&&n.postMessage({workerId:l.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(u.prototype)).constructor=c,(s.prototype=Object.create(u.prototype)).constructor=s,(d.prototype=Object.create(d.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,l}()}({exports:{}});var ene=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,tne=/^#+$/,nne=/^\d\.\d+[Ee]\+\d+$/,rne=String.fromCharCode(165),ine=String.fromCharCode(36),one=String.fromCharCode(8364),ane=String.fromCharCode(163);function lne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e=function(e){return e.replace(/\\0022/g,"")}(e=function(e,t,n){var r=e.match(/<col[^>]*>/g),i=0;if(r){var o=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);o&&(i=parseInt(o[1],10))}if(i>n){var a=e.split("</tr>");e=(a=a.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(i-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var l=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(l&&l.length>t){var u=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!u)return"<table><tr><td></td></tr></table>";var c=u[u.length-1],s=e.lastIndexOf(c),d=e.slice(0,s+c.length);e=e.slice(s+c.length);var f={};l.forEach((function(e){f[e]=f[e]||{content:e,count:0},f[e].count+=1}));for(var h=Object.values(f),p=(h=Dte(h,"count")).length-1;h[p];){var v=h[p];if(v.count>t){var g=v.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(g,"g"),"")}p--}e=d+e}return e}(e,200,200));var o=(new DOMParser).parseFromString(e,"text/html"),a=o.body,l=function(e,t){for(var n=e.length,r=[],i=0;i<n;i++)t(e[i])&&r.push(e[i]);return r}(o.all,(function(e){return"STYLE"===e.tagName}));if(!a)return null;for(var u,c=a.firstChild,s=[],d=[],f={},h={},p=[],v={},g=!1;c;)if(dne(c)){var m=kne(c,s.length,l,i);m.mergeCells&&(d=d.concat(m.mergeCells)),m.startCell&&(u=m.startCell),m.selectOptions&&Object.assign(v,m.selectOptions),Object.assign(h,m.rows),m.columns&&Object.assign(f,m.columns),s=s.concat(m.table),m.cellsNeedFix&&(p=p.concat(m.cellsNeedFix)),c=xne(c),g=!1}else if(mne(c))vne(c)&&(c.innerHTML=""),fne(c)&&(c.innerHTML=c.innerHTML.replace(/\n/g,"<br/>")),c=c.firstChild||xne(c),g=!1;else if(pne(c)){var y=c.innerText.trim(),b=c.getAttribute("href");cne(s,s.length,y,b),g=!1,c=xne(c)}else if(hne(c)){var w=c.getAttribute("src");sne(s,s.length,w,i),g=!1,c=xne(c)}else if(bne(c))c=c.firstChild||xne(c);else if(wne(c))g=!1,c=xne(c);else if(_ne(c)){var _=c.data;if(""!==_.trim()||!mne(c.parentNode))une(s,g?s.length-1:s.length,_),g=!0;c=xne(c)}else c=xne(c);var x=function(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}(s);d=Bee(d,(function(e){return"".concat(e.row,":").concat(e.col)}));var k=W3(s.map((function(e){return e.length})))||20,C={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(s.length,r.rowCount):s.length,colCount:r?Math.max(k,r.colCount):k,data:x,mergeCells:d,rows:h,columns:f,filter:{},index:t,defaults:{}};return u&&(C.startCell=u),Object.keys(v).length>0&&(C.selectOptions=v),p.length>0&&(C.cellsNeedFix=p),C}function une(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function cne(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function sne(e,t,n,r){n=n.replace(/\?x-oss-process=image\/resize.+/,""),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function dne(e){return"TABLE"===e.tagName}function fne(e){return"PRE"===e.tagName}function hne(e){return"IMG"===e.tagName}function pne(e){return"A"===e.tagName}function vne(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var gne=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function mne(e){return 1===e.nodeType&&gne.includes(e.tagName)}var yne=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function bne(e){return 1===e.nodeType&&yne.includes(e.tagName)}function wne(e){return"BR"===e.tagName}function _ne(e){return 3===e.nodeType}function xne(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function kne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=e.cloneNode(!0);document.body.appendChild(i);var o=function(e,t){return function(e){for(var t,n=e.rows,r=n.length,i=[],o=[],a=0,l=0,u=0,c=0;c<r;c++){for(var s=n[c].cells,d=0,f=0;f<s.length;f++){var h=s[f],p=h.rowSpan,v=h.colSpan;a+=p*v,d+=v,p>1&&(l+=(p-1)*v)}o[c]=d,0===c&&(t=d),u=Math.max(d,u)}if(Zte(a/t)&&t===u){var g=0;if(o.forEach((function(e){g+=u-e})),g!==l){var m=l-g;if(m&&Zte(m/u)){for(var y=[],b=0;b<r;b++){for(var w=n[b].cells;i[b+y.length]===u;)y.push(b+y.length);for(var _=b+y.length,x=0;x<w.length;x++){var k=w[x],C=k.rowSpan,S=k.colSpan;if(C>1)for(var O=1;O<C;O++)i[_+O]=(i[_+O]||0)+S}}y.forEach((function(t){e.insertRow(t)}))}}}}(e),0===(r=(n=e).rows[0]).cells.length&&r.remove(),n.rows.length>1&&1===r.cells.length&&""===r.cells[0].innerText.trim()&&0===r.cells[0].getElementsByTagName("img").length&&1===r.cells[0].colSpan&&1===r.cells[0].rowSpan&&r.remove(),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var i=parseInt(n[1]);r=parseInt(r)/i||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var i=t.colSpan;t.setAttribute("colSpan",1);for(var o=1;o<i;o++){var a=t.cloneNode();e.insertBefore(a,t.nextSibling)}}})),n){var o=parseInt(n[1]);if(o<1e6)for(var a=1;a<o;a++){var l=e.cloneNode();e.parentNode.insertBefore(l,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,i=r.length,o=100,a=0;a<i;a++){var l=r[a].cells,u=l.length;n[a]=n[a]||[];for(var c=u>16300,s=0;s<u;s++){var d=l[s];if(c&&s>o&&""===d.innerHTML&&Qte(d))break;o=Math.max(o,s);for(var f=d.rowSpan,h=void 0===f?1:f,p=d.colSpan,v=void 0===p?1:p,g=h>1||v>1,m=s;n[a][m];)m++;if(n[a][m]={rowSpan:h,colSpan:v,isMulti:g,element:d},g)for(var y=h;y>0;){for(var b=v;b>0;){if(1!==b||1!==y){var w=a+y-1,_=m+b-1;n[w]=n[w]||[],n[w][_]={isEmpty:!0,parent:{row:a,col:m}}}b--}y--}}}var x=n.map((function(e){return e.length})),k=Math.max.apply(Math,ts(x));return n.forEach((function(e,n){if(e.length<k)for(var r=k-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var i=0;i<k;i++)e[i]||(e[i]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:k,table:n}}(e,t);var n,r}(i,r),a={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(a,function(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n,i=e.match(t);if(i){var o=i[1].trim(),a=i[2];if(o.startsWith(".")){var l=a.match(/mso-number-format:(.+);(\n|$)/);l&&(r[o.substr(1)]=-1!==(n=(n=l[1]).replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==n.indexOf("Time")?"time":n.endsWith("%")?"percentage":-1!==n.indexOf(ane)?{name:"currency",symbol:ane}:-1!==n.indexOf(one)?{name:"currency",symbol:one}:-1!==n.indexOf(rne)?{name:"currency",symbol:rne}:n.match(/^@$/)?"text":-1!==n.indexOf("General")||-1!==n.indexOf("Standard")||-1!==n.indexOf("Fixed")?"auto":n.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?n.match(/(时|分|秒|s|h)/)?"datetime":n.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==n.indexOf(ine)?{name:"currency",symbol:ine}:"number")}}})),0===Object.keys(r).length?null:r}(e.innerHTML))}));var l={table:[]},u=i.querySelectorAll("col");if(u.length>0){var c={},s=0;u.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&s<o.cols;)c[s]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},s+=1,r+=1})),l.columns=c}var d=Array.from(i.rows);l.rows={},d.forEach((function(e,n){if(0===e.offsetHeight&&n!==d.length-1)l.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,i={size:r};24!==r&&(i.customSize=r),l.rows[n+t]=i}}));var f=i.getAttribute("data-startCell");if(f){var h=f.split(":");l.startCell={row:parseInt(h[0])||0,col:parseInt(h[1])||0}}var p=i.getAttribute("data-selectOptions");if(p)try{l.selectOptions=JSON.parse(decodeURIComponent(p))}catch(e){console.log(e)}return o.table.forEach((function(e,n){l.table[n]=[],e.forEach((function(e,i){if(e.element){var o=function(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if((i=r).class&&("link"===i.class?i.text&&i.url:"file"===i.class||"image"===i.class?i.name&&i.src:"checkbox"===i.class?void 0!==i.value:"select"===i.class?i.value&&(i.options||i.optionId):"mention"===i.class?i.value&&i.value[0].id&&i.value[0].login:"formula"===i.class&&void 0!==i.formula))return r}catch(i){console.log(i)}var i;for(var o=e.querySelectorAll("img"),a=o.length,l=0;l<a;l++){var u=o[l].getAttribute("src");if(u)return t?{class:"image",src:u,name:"image"}:{class:"image",status:"needUpload",originSrc:u,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n[ ]?/g,"").replace(/<br>\s*/g,"\n");var c,s=e.innerHTML.replace(/<[^>]+>/g,"").trim();s="string"!=typeof(c=s)?c:c.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var d=e.querySelector("a");return d&&d.getAttribute("href")?{class:"link",text:s.replace(/\n/g,""),url:d.getAttribute("href")}:(s.endsWith(" %")&&(s=s.replace(/ %$/,"%")),s)}(e.element,r),u=function(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),Sne[t])return t;var r=Object.keys(Sne).map((function(e){return parseInt(e,10)}));r.sort();for(var i=0;r[i];){if(r[i]>t)return r[i];i++}return r[i-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)","rgb(89, 89, 89)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=Cne[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=Cne[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch(e){return null}}(e.element),c=function(e){var t=e.getAttribute("data-note");if(t)try{var n=JSON.parse(decodeURIComponent(t));if(n.text)return n}catch(e){console.log(e)}}(e.element),s={name:"auto"},d=!1,f=e.element.classList&&e.element.classList[0];a[f]&&("object"===lr(a[f])?Object.assign(s,a[f]):s.name=a[f],["currency","number","percentage"].includes(s.name)&&(s.decimal=2),l.table[n][i]=l.table[n][i]||{},l.table[n][i].type=s,["text","auto"].includes(s.name)||(d=!0)),u&&(l.table[n][i]=l.table[n][i]||{},l.table[n][i].style=u),c&&(l.table[n][i]=l.table[n][i]||{},l.table[n][i].note=c),void 0!==o&&""!==o?(l.table[n][i]=l.table[n][i]||{},l.table[n][i].type=s,l.table[n][i].value=o,"string"==typeof o&&((tne.test(o)||nne.test(o))&&(d=!0),ene.test(o)&&"auto"===s.name&&(d=!0,l.table[n][i].type.name="currency",l.table[n][i].type.symbol=rne,l.table[n][i].type.decimal=2))):""===o&&l.columns&&l.columns[i]&&l.columns[i].size<=15&&l.columns[i].size>=0&&(d=!0),d&&r&&(l.cellsNeedFix=l.cellsNeedFix||[],l.cellsNeedFix.push({row:n+t,col:i})),e.isMulti&&(l.mergeCells=l.mergeCells||[],l.mergeCells.push({row:n+t,col:i,rowCount:e.rowSpan,colCount:e.colSpan}),u&&(l.table[n+e.rowSpan-1]=l.table[n+e.rowSpan-1]||[],l.table[n+e.rowSpan-1][i+e.colSpan-1]=l.table[n+e.rowSpan-1][i+e.colSpan-1]||{},l.table[n+e.rowSpan-1][i+e.colSpan-1].style=u))}}))})),i.remove(),n&&n.forEach((function(e){e.remove()})),l}var Cne={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};var Sne={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};const One=0,Ene=1,Ine=2,Pne=4;function Mne(e,t){return n=>e(t(n))}function Rne(e,t){return t(e)}function Ane(e,t){return n=>e(t,n)}function jne(e,t){return()=>e(t)}function Dne(e,t){return t(e),e}function Tne(...e){return e}function Fne(e){e()}function Nne(e){return()=>e}function Lne(e){return void 0!==e}function Bne(){}function Vne(e,t){return e(Ene,t)}function zne(e,t){e(One,t)}function Hne(e){e(Ine)}function Wne(e){return e(Pne)}function Une(e,t){return Vne(e,Ane(t,One))}function Gne(e,t){const n=e(Ene,(e=>{n(),t(e)}));return n}function Yne(){const e=[];return(t,n)=>{switch(t){case Ine:return void e.splice(0,e.length);case Ene:return e.push(n),()=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)};case One:return void e.slice().forEach((e=>{e(n)}));default:throw new Error(`unrecognized action ${t}`)}}}function $ne(e){let t=e;const n=Yne();return(e,r)=>{switch(e){case Ene:r(t);break;case One:t=r;break;case Pne:return t}return n(e,r)}}function qne(e){return Dne(Yne(),(t=>Une(e,t)))}function Kne(e,t){return Dne($ne(t),(t=>Une(e,t)))}function Xne(e,...t){const n=function(...e){return t=>e.reduceRight(Rne,t)}(...t);return(t,r)=>{switch(t){case Ene:return Vne(e,n(r));case Ine:return void Hne(e)}}}function Jne(e,t){return e===t}function Zne(e=Jne){let t;return n=>r=>{e(t,r)||(t=r,n(r))}}function Qne(e){return t=>n=>{e(n)&&t(n)}}function ere(e){return t=>Mne(t,e)}function tre(e){return t=>()=>t(e)}function nre(e,t){return n=>r=>n(t=e(t,r))}function rre(e){return t=>n=>{e>0?e--:t(n)}}function ire(e){let t,n=null;return r=>i=>{n=i,t||(t=setTimeout((()=>{t=void 0,r(n)}),e))}}function ore(e){let t,n;return r=>i=>{t=i,n&&clearTimeout(n),n=setTimeout((()=>{r(t)}),e)}}function are(...e){const t=new Array(e.length);let n=0,r=null;const i=Math.pow(2,e.length)-1;return e.forEach(((e,o)=>{const a=Math.pow(2,o);Vne(e,(e=>{const l=n;n|=a,t[o]=e,l!==i&&n===i&&r&&(r(),r=null)}))})),e=>o=>{const a=()=>e([o].concat(t));n===i?a():r=a}}function lre(...e){return function(t,n){switch(t){case Ene:return function(...e){return()=>{e.map(Fne)}}(...e.map((e=>Vne(e,n))));case Ine:return;default:throw new Error(`unrecognized action ${t}`)}}}function ure(e,t=Jne){return Xne(e,Zne(t))}function cre(...e){const t=Yne(),n=new Array(e.length);let r=0;const i=Math.pow(2,e.length)-1;return e.forEach(((e,o)=>{const a=Math.pow(2,o);Vne(e,(e=>{n[o]=e,r|=a,r===i&&zne(t,n)}))})),function(e,o){switch(e){case Ene:return r===i&&o(n),Vne(t,o);case Ine:return Hne(t);default:throw new Error(`unrecognized action ${e}`)}}}function sre(e,t=[],{singleton:n}={singleton:!0}){return{id:dre(),constructor:e,dependencies:t,singleton:n}}const dre=()=>Symbol();const fre="undefined"!=typeof document?u.a.useLayoutEffect:u.a.useEffect;function hre(e,t,n){const r=Object.keys(t.required||{}),i=Object.keys(t.optional||{}),o=Object.keys(t.methods||{}),a=Object.keys(t.events||{}),l=u.a.createContext({});function c(e,n){e.propsReady&&zne(e.propsReady,!1);for(const i of r){zne(e[t.required[i]],n[i])}for(const r of i)if(r in n){zne(e[t.optional[r]],n[r])}e.propsReady&&zne(e.propsReady,!0)}function s(e){return a.reduce(((n,r)=>(n[r]=function(e){let t,n;const r=()=>t&&t();return function(i,o){switch(i){case Ene:if(o){if(n===o)return;return r(),n=o,t=Vne(e,o),t}return r(),Bne;case Ine:return r(),void(n=null);default:throw new Error(`unrecognized action ${i}`)}}}(e[t.events[r]]),n)),{})}const d=u.a.forwardRef(((d,f)=>{const{children:h,...p}=d,[v]=u.a.useState((()=>Dne(function(e){const t=new Map,n=({id:e,constructor:r,dependencies:i,singleton:o})=>{if(o&&t.has(e))return t.get(e);const a=r(i.map((e=>n(e))));return o&&t.set(e,a),a};return n(e)}(e),(e=>c(e,p))))),[g]=u.a.useState(jne(s,v));return fre((()=>{for(const e of a)e in p&&Vne(g[e],p[e]);return()=>{Object.values(g).map(Hne)}}),[p,g,v]),fre((()=>{c(v,p)})),u.a.useImperativeHandle(f,Nne(function(e){return o.reduce(((n,r)=>(n[r]=n=>{zne(e[t.methods[r]],n)},n)),{})}(v))),u.a.createElement(l.Provider,{value:v},n?u.a.createElement(n,function(e,t){const n={},r={};let i=0;const o=e.length;for(;i<o;)r[e[i]]=1,i+=1;for(const e in t)r.hasOwnProperty(e)||(n[e]=t[e]);return n}([...r,...i,...a],p),h):h)})),f=u.a.version.startsWith("18")?e=>{const t=u.a.useContext(l)[e],n=u.a.useCallback((e=>Vne(t,e)),[t]);return u.a.useSyncExternalStore(n,(()=>Wne(t)),(()=>Wne(t)))}:e=>{const t=u.a.useContext(l)[e],[n,r]=u.a.useState(jne(Wne,t));return fre((()=>Vne(t,(e=>{e!==n&&r(Nne(e))}))),[t,n]),n};return{Component:d,usePublisher:e=>u.a.useCallback(Ane(zne,u.a.useContext(l)[e]),[e]),useEmitterValue:f,useEmitter:(e,t)=>{const n=u.a.useContext(l)[e];fre((()=>Vne(n,t)),[t,n])}}}const pre="undefined"!=typeof document?u.a.useLayoutEffect:u.a.useEffect;var vre=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(vre||{});const gre={0:"debug",1:"log",2:"warn",3:"error"},mre=sre((()=>{const e=$ne(3);return{log:$ne(((t,n,r=1)=>{var i;r>=(null!=(i=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?i:Wne(e))&&console[gre[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function yre(e,t,n){const r=u.a.useRef(null);let i=e=>{};if("undefined"!=typeof ResizeObserver){const o=u.a.useMemo((()=>new ResizeObserver((t=>{const r=()=>{const n=t[0].target;null!==n.offsetParent&&e(n)};n?r():requestAnimationFrame(r)}))),[e]);i=e=>{e&&t?(o.observe(e),r.current=e):(r.current&&o.unobserve(r.current),r.current=null)}}return{ref:r,callbackRef:i}}function bre(e,t,n){return yre(e,t,n).callbackRef}function wre(e,t,n,r,i,o,a,l,c){const s=u.a.useCallback((n=>{const u=function(e,t,n,r){const i=e.length;if(0===i)return null;const o=[];for(let a=0;a<i;a++){const i=e.item(a);if(!i||void 0===i.dataset.index)continue;const l=parseInt(i.dataset.index),u=parseFloat(i.dataset.knownSize),c=t(i,n);if(0===c&&r("Zero-sized element, this should not happen",{child:i},vre.ERROR),c===u)continue;const s=o[o.length-1];0===o.length||s.size!==c||s.endIndex!==l-1?o.push({startIndex:l,endIndex:l,size:c}):o[o.length-1].endIndex++}return o}(n.children,t,l?"offsetWidth":"offsetHeight",i);let c=n.parentElement;for(;!c.dataset.virtuosoScroller;)c=c.parentElement;const s="window"===c.lastElementChild.dataset.viewportType,d=a?l?a.scrollLeft:a.scrollTop:s?l?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:l?c.scrollLeft:c.scrollTop,f=a?l?a.scrollWidth:a.scrollHeight:s?l?document.documentElement.scrollWidth:document.documentElement.scrollHeight:l?c.scrollWidth:c.scrollHeight,h=a?l?a.offsetWidth:a.offsetHeight:s?l?window.innerWidth:window.innerHeight:l?c.offsetWidth:c.offsetHeight;r({scrollTop:Math.max(d,0),scrollHeight:f,viewportHeight:h}),null==o||o(l?_re("column-gap",getComputedStyle(n).columnGap,i):_re("row-gap",getComputedStyle(n).rowGap,i)),null!==u&&e(u)}),[e,t,i,o,a,r]);return yre(s,n,c)}function _re(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,vre.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}function xre(e,t){return Math.round(e.getBoundingClientRect()[t])}function kre(e,t){return Math.abs(e-t)<1.01}function Cre(e,t,n,r=Bne,i,o){const a=u.a.useRef(null),l=u.a.useRef(null),c=u.a.useRef(null),d=u.a.useCallback((n=>{const r=n.target,i=r===window||r===document,a=o?i?window.pageXOffset||document.documentElement.scrollLeft:r.scrollLeft:i?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,u=o?i?document.documentElement.scrollWidth:r.scrollWidth:i?document.documentElement.scrollHeight:r.scrollHeight,d=o?i?window.innerWidth:r.offsetWidth:i?window.innerHeight:r.offsetHeight,f=()=>{e({scrollTop:Math.max(a,0),scrollHeight:u,viewportHeight:d})};n.suppressFlushSync?f():s.a.flushSync(f),null!==l.current&&(a===l.current||a<=0||a===u-d)&&(l.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))}),[e,t]);return u.a.useEffect((()=>{const e=i||a.current;return r(i||a.current),d({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",d,{passive:!0}),()=>{r(null),e.removeEventListener("scroll",d)}}),[a,d,n,r,i]),{scrollerRef:a,scrollByCallback:function(e){o&&(e={left:e.top,behavior:e.behavior}),a.current.scrollBy(e)},scrollToCallback:function(n){const r=a.current;if(!r||(o?"offsetWidth"in r&&0===r.offsetWidth:"offsetHeight"in r&&0===r.offsetHeight))return;const i="smooth"===n.behavior;let u,s,d;r===window?(s=Math.max(xre(document.documentElement,o?"width":"height"),o?document.documentElement.scrollWidth:document.documentElement.scrollHeight),u=o?window.innerWidth:window.innerHeight,d=o?document.documentElement.scrollLeft:document.documentElement.scrollTop):(s=r[o?"scrollWidth":"scrollHeight"],u=xre(r,o?"width":"height"),d=r[o?"scrollLeft":"scrollTop"]);const f=s-u;if(n.top=Math.ceil(Math.max(Math.min(f,n.top),0)),kre(u,s)||n.top===d)return e({scrollTop:d,scrollHeight:s,viewportHeight:u}),void(i&&t(!0));i?(l.current=n.top,c.current&&clearTimeout(c.current),c.current=setTimeout((()=>{c.current=null,l.current=null,t(!0)}),1e3)):l.current=null,o&&(n={left:n.top,behavior:n.behavior}),r.scrollTo(n)}}}const Sre=sre((()=>{const e=Yne(),t=Yne(),n=$ne(0),r=Yne(),i=$ne(0),o=Yne(),a=Yne(),l=$ne(0),u=$ne(0),c=$ne(0),s=$ne(0),d=Yne(),f=Yne(),h=$ne(!1),p=$ne(!1),v=$ne(!1);return Une(Xne(e,ere((({scrollTop:e})=>e))),t),Une(Xne(e,ere((({scrollHeight:e})=>e))),a),Une(t,i),{scrollContainerState:e,scrollTop:t,viewportHeight:o,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:c,footerHeight:s,scrollHeight:a,smoothScrollTargetReached:r,horizontalDirection:p,skipAnimationFrameInResizeObserver:v,scrollTo:d,scrollBy:f,statefulScrollTop:i,deviation:n,scrollingInProgress:h}}),[],{singleton:!0}),Ore={lvl:0};function Ere(e,t,n,r=Ore,i=Ore){return{k:e,v:t,lvl:n,l:r,r:i}}function Ire(e){return e===Ore}function Pre(){return Ore}function Mre(e,t){if(Ire(e))return Ore;const{k:n,l:r,r:i}=e;if(t===n){if(Ire(r))return i;if(Ire(i))return r;{const[t,n]=Fre(r);return zre(Lre(e,{k:t,v:n,l:Nre(r)}))}}return zre(Lre(e,t<n?{l:Mre(r,t)}:{r:Mre(i,t)}))}function Rre(e,t){if(!Ire(e))return t===e.k?e.v:t<e.k?Rre(e.l,t):Rre(e.r,t)}function Are(e,t,n="k"){if(Ire(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const r=Are(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return Are(e.l,t,n)}function jre(e,t,n){return Ire(e)?Ere(t,n,1):t===e.k?Lre(e,{k:t,v:n}):t<e.k?Vre(Lre(e,{l:jre(e.l,t,n)})):Vre(Lre(e,{r:jre(e.r,t,n)}))}function Dre(e,t,n){if(Ire(e))return[];const{k:r,v:i,l:o,r:a}=e;let l=[];return r>t&&(l=l.concat(Dre(o,t,n))),r>=t&&r<=n&&l.push({k:r,v:i}),r<=n&&(l=l.concat(Dre(a,t,n))),l}function Tre(e){return Ire(e)?[]:[...Tre(e.l),{k:e.k,v:e.v},...Tre(e.r)]}function Fre(e){return Ire(e.r)?[e.k,e.v]:Fre(e.r)}function Nre(e){return Ire(e.r)?e.l:zre(Lre(e,{r:Nre(e.r)}))}function Lre(e,t){return Ere(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function Bre(e){return Ire(e)||e.lvl>e.r.lvl}function Vre(e){return Ure(Gre(e))}function zre(e){const{l:t,r:n,lvl:r}=e;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(Bre(t))return Gre(Lre(e,{lvl:r-1}));if(Ire(t)||Ire(t.r))throw new Error("Unexpected empty nodes");return Lre(t.r,{l:Lre(t,{r:t.r.l}),r:Lre(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(Bre(e))return Ure(Lre(e,{lvl:r-1}));if(Ire(n)||Ire(n.l))throw new Error("Unexpected empty nodes");{const t=n.l,i=Bre(t)?n.lvl-1:n.lvl;return Lre(t,{l:Lre(e,{r:t.l,lvl:r-1}),r:Ure(Lre(n,{l:t.r,lvl:i})),lvl:t.lvl+1})}}function Hre(e,t,n){if(Ire(e))return[];const r=Are(e,t)[0];return Wre(Dre(e,r,n),(({k:e,v:t})=>({index:e,value:t})))}function Wre(e,t){const n=e.length;if(0===n)return[];let{index:r,value:i}=t(e[0]);const o=[];for(let a=1;a<n;a++){const{index:n,value:l}=t(e[a]);o.push({start:r,end:n-1,value:i}),r=n,i=l}return o.push({start:r,end:1/0,value:i}),o}function Ure(e){const{r:t,lvl:n}=e;return Ire(t)||Ire(t.r)||t.lvl!==n||t.r.lvl!==n?e:Lre(t,{l:Lre(e,{r:t.l}),lvl:n+1})}function Gre(e){const{l:t}=e;return Ire(t)||t.lvl!==e.lvl?e:Lre(t,{r:Lre(e,{l:t.r})})}function Yre(e,t,n,r=0){let i=e.length-1;for(;r<=i;){const o=Math.floor((r+i)/2),a=n(e[o],t);if(0===a)return o;if(-1===a){if(i-r<2)return o-1;i=o-1}else{if(i===r)return o;r=o+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function $re(e,t,n){return e[Yre(e,t,n)]}const qre=sre((()=>({recalcInProgress:$ne(!1)})),[],{singleton:!0});function Kre(e){const{size:t,startIndex:n,endIndex:r}=e;return e=>e.start===n&&(e.end===r||e.end===1/0)&&e.value===t}function Xre(e,t){let n=0,r=0;for(;n<e;)n+=t[r+1]-t[r]-1,r++;return r-(n===e?0:1)}function Jre({index:e},t){return t===e?0:t<e?-1:1}function Zre({offset:e},t){return t===e?0:t<e?-1:1}function Qre(e){return{index:e.index,value:e}}function eie(e,t,n,r=0){return r>0&&(t=Math.max(t,$re(e,r,Jre).offset)),Wre(function(e,t,n,r){const i=Yre(e,t,r),o=Yre(e,n,r,i);return e.slice(i,o+1)}(e,t,n,Zre),Qre)}function tie(e,t,n,r){let i=e,o=0,a=0,l=0,u=0;if(0!==t){u=Yre(i,t-1,Jre);l=i[u].offset;const e=Are(n,t-1);o=e[0],a=e[1],i.length&&i[u].size===Are(n,t)[1]&&(u-=1),i=i.slice(0,u+1)}else i=[];for(const{start:e,value:u}of Hre(n,t,1/0)){const t=e-o,n=t*a+l+t*r;i.push({offset:n,size:u,index:e}),o=e,l=n,a=u}return{offsetTree:i,lastIndex:o,lastOffset:l,lastSize:a}}function nie(e,[t,n,r,i]){t.length>0&&r("received item sizes",t,vre.DEBUG);const o=e.sizeTree;let a=o,l=0;if(n.length>0&&Ire(o)&&2===t.length){const e=t[0].size,r=t[1].size;a=n.reduce(((t,n)=>jre(jre(t,n,e),n+1,r)),a)}else[a,l]=function(e,t){let n=Ire(e)?0:1/0;for(const r of t){const{size:t,startIndex:i,endIndex:o}=r;if(n=Math.min(n,i),Ire(e)){e=jre(e,0,t);continue}const a=Hre(e,i-1,o+1);if(a.some(Kre(r)))continue;let l=!1,u=!1;for(const{start:n,end:r,value:i}of a)l?(o>=n||t===i)&&(e=Mre(e,n)):(u=i!==t,l=!0),r>o&&o>=n&&i!==t&&(e=jre(e,o+1,i));u&&(e=jre(e,i,t))}return[e,n]}(a,t);if(a===o)return e;const{offsetTree:u,lastIndex:c,lastSize:s,lastOffset:d}=tie(e.offsetTree,l,a,i);return{sizeTree:a,offsetTree:u,lastIndex:c,lastOffset:d,lastSize:s,groupOffsetTree:n.reduce(((e,t)=>jre(e,t,rie(t,u,i))),Pre()),groupIndices:n}}function rie(e,t,n){if(0===t.length)return 0;const{offset:r,index:i,size:o}=$re(t,e,Jre),a=e-i,l=o*a+(a-1)*n+r;return l>0?l+n:l}function iie(e,t,n){if(function(e){return void 0!==e.groupIndex}(e))return t.groupIndices[e.groupIndex]+1;{let r=oie("LAST"===e.index?n:e.index,t);return r=Math.max(0,r,Math.min(n,r)),r}}function oie(e,t){if(!aie(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function aie(e){return!Ire(e.groupOffsetTree)}const lie={offsetHeight:"height",offsetWidth:"width"},uie=sre((([{log:e},{recalcInProgress:t}])=>{const n=Yne(),r=Yne(),i=Kne(r,0),o=Yne(),a=Yne(),l=$ne(0),u=$ne([]),c=$ne(void 0),s=$ne(void 0),d=$ne(((e,t)=>xre(e,lie[t]))),f=$ne(void 0),h=$ne(0),p={offsetTree:[],sizeTree:Pre(),groupOffsetTree:Pre(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},v=Kne(Xne(n,are(u,e,h),nre(nie,p),Zne()),p),g=Kne(Xne(u,Zne(),nre(((e,t)=>({prev:e.current,current:t})),{prev:[],current:[]}),ere((({prev:e})=>e))),[]);Une(Xne(u,Qne((e=>e.length>0)),are(v,h),ere((([e,t,n])=>{const r=e.reduce(((e,r,i)=>jre(e,r,rie(r,t.offsetTree,n)||i)),Pre());return{...t,groupIndices:e,groupOffsetTree:r}}))),v),Une(Xne(r,are(v),Qne((([e,{lastIndex:t}])=>e<t)),ere((([e,{lastIndex:t,lastSize:n}])=>[{startIndex:e,endIndex:t,size:n}]))),n),Une(c,s);const m=Kne(Xne(c,ere((e=>void 0===e))),!0);Une(Xne(s,Qne((e=>void 0!==e&&Ire(Wne(v).sizeTree))),ere((e=>[{startIndex:0,endIndex:0,size:e}]))),n);const y=qne(Xne(n,are(v),nre((({sizes:e},[t,n])=>({changed:n!==e,sizes:n})),{changed:!1,sizes:p}),ere((e=>e.changed))));Vne(Xne(l,nre(((e,t)=>({diff:e.prev-t,prev:t})),{diff:0,prev:0}),ere((e=>e.diff))),(e=>{const{groupIndices:n}=Wne(v);if(e>0)zne(t,!0),zne(o,e+Xre(e,n));else if(e<0){const t=Wne(g);t.length>0&&(e-=Xre(-e,t)),zne(a,e)}})),Vne(Xne(l,are(e)),(([e,t])=>{e<0&&t("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},vre.ERROR)}));const b=qne(o);Une(Xne(o,are(v),ere((([e,t])=>{const n=t.groupIndices.length>0,r=[],i=t.lastSize;if(n){const n=Rre(t.sizeTree,0);let o=0,a=0;for(;o<e;){const e=t.groupIndices[a],l=t.groupIndices.length===a+1?1/0:t.groupIndices[a+1]-e-1;r.push({startIndex:e,endIndex:e,size:n}),r.push({startIndex:e+1,endIndex:e+1+l-1,size:i}),a++,o+=l+1}const l=Tre(t.sizeTree);return o!==e&&l.shift(),l.reduce(((t,{k:n,v:r})=>{let i=t.ranges;return 0!==t.prevSize&&(i=[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}]),{ranges:i,prevIndex:n+e,prevSize:r}}),{ranges:r,prevIndex:e,prevSize:0}).ranges}return Tre(t.sizeTree).reduce(((t,{k:n,v:r})=>({ranges:[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}],prevIndex:n+e,prevSize:r})),{ranges:[],prevIndex:0,prevSize:i}).ranges}))),n);const w=qne(Xne(a,are(v,h),ere((([e,{offsetTree:t},n])=>rie(-e,t,n)))));return Une(Xne(a,are(v,h),ere((([e,t,n])=>{if(t.groupIndices.length>0){if(Ire(t.sizeTree))return t;let r=Pre();const i=Wne(g);let o=0,a=0,l=0;for(;o<-e;){l=i[a];const e=i[a+1]-l-1;a++,o+=e+1}r=Tre(t.sizeTree).reduce(((t,{k:n,v:r})=>jre(t,Math.max(0,n+e),r)),r);if(o!==-e){r=jre(r,0,Rre(t.sizeTree,l));r=jre(r,1,Are(t.sizeTree,1-e)[1])}return{...t,sizeTree:r,...tie(t.offsetTree,0,r,n)}}{const r=Tre(t.sizeTree).reduce(((t,{k:n,v:r})=>jre(t,Math.max(0,n+e),r)),Pre());return{...t,sizeTree:r,...tie(t.offsetTree,0,r,n)}}}))),v),{data:f,totalCount:r,sizeRanges:n,groupIndices:u,defaultItemSize:s,fixedItemSize:c,unshiftWith:o,shiftWith:a,shiftWithOffset:w,beforeUnshiftWith:b,firstItemIndex:l,gap:h,sizes:v,listRefresh:y,statefulTotalCount:i,trackItemSizes:m,itemSize:d}}),Tne(mre,qre),{singleton:!0}),cie="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function sie(e){const t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&cie||(t.behavior="auto"),t.offset||(t.offset=0),t}const die=sre((([{sizes:e,totalCount:t,listRefresh:n,gap:r},{scrollingInProgress:i,viewportHeight:o,scrollTo:a,smoothScrollTargetReached:l,headerHeight:u,footerHeight:c,fixedHeaderHeight:s,fixedFooterHeight:d},{log:f}])=>{const h=Yne(),p=Yne(),v=$ne(0);let g=null,m=null,y=null;function b(){g&&(g(),g=null),y&&(y(),y=null),m&&(clearTimeout(m),m=null),zne(i,!1)}return Une(Xne(h,are(e,o,t,v,u,c,f),are(r,s,d),ere((([[e,t,r,o,a,u,c,s],d,f,v])=>{const w=sie(e),{align:_,behavior:x,offset:k}=w,C=o-1,S=iie(w,t,C);let O=rie(S,t.offsetTree,d)+u;"end"===_?(O+=f+Are(t.sizeTree,S)[1]-r+v,S===C&&(O+=c)):"center"===_?O+=(f+Are(t.sizeTree,S)[1]-r+v)/2:O-=a,k&&(O+=k);const E=t=>{b(),t?(s("retrying to scroll to",{location:e},vre.DEBUG),zne(h,e)):(zne(p,!0),s("list did not change, scroll successful",{},vre.DEBUG))};if(b(),"smooth"===x){let e=!1;y=Vne(n,(t=>{e=e||t})),g=Gne(l,(()=>{E(e)}))}else g=Gne(Xne(n,(I=150,e=>{const t=setTimeout((()=>{e(!1)}),I);return n=>{n&&(e(!0),clearTimeout(t))}})),E);var I;return m=setTimeout((()=>{b()}),1200),zne(i,!0),s("scrolling from index to",{index:S,top:O,behavior:x},vre.DEBUG),{top:O,behavior:x}}))),a),{scrollToIndex:h,scrollTargetReached:p,topListHeight:v}}),Tne(uie,Sre,mre),{singleton:!0});const fie="up",hie="down",pie={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},vie=sre((([{scrollContainerState:e,scrollTop:t,viewportHeight:n,headerHeight:r,footerHeight:i,scrollBy:o}])=>{const a=$ne(!1),l=$ne(!0),u=Yne(),c=Yne(),s=$ne(4),d=$ne(0),f=Kne(Xne(lre(Xne(ure(t),rre(1),tre(!0)),Xne(ure(t),rre(1),tre(!1),ore(100))),Zne()),!1),h=Kne(Xne(lre(Xne(o,tre(!0)),Xne(o,tre(!1),ore(200))),Zne()),!1);Une(Xne(cre(ure(t),ure(d)),ere((([e,t])=>e<=t)),Zne()),l),Une(Xne(l,ire(50)),c);const p=qne(Xne(cre(e,ure(n),ure(r),ure(i),ure(s)),nre(((e,[{scrollTop:t,scrollHeight:n},r,i,o,a])=>{const l={viewportHeight:r,scrollTop:t,scrollHeight:n};if(t+r-n>-a){let n,r;return t>e.state.scrollTop?(n="SCROLLED_DOWN",r=e.state.scrollTop-t):(n="SIZE_DECREASED",r=e.state.scrollTop-t||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:n,scrollTopDelta:r}}let u;return u=l.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":t<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:u,state:l}}),pie),Zne(((e,t)=>e&&e.atBottom===t.atBottom)))),v=Kne(Xne(e,nre(((e,{scrollTop:t,scrollHeight:n,viewportHeight:r})=>{if(kre(e.scrollHeight,n))return{scrollTop:t,scrollHeight:n,jump:0,changed:!1};{const i=n-(t+r)<1;return e.scrollTop!==t&&i?{scrollHeight:n,scrollTop:t,jump:e.scrollTop-t,changed:!0}:{scrollHeight:n,scrollTop:t,jump:0,changed:!0}}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Qne((e=>e.changed)),ere((e=>e.jump))),0);Une(Xne(p,ere((e=>e.atBottom))),a),Une(Xne(a,ire(50)),u);const g=$ne(hie);Une(Xne(e,ere((({scrollTop:e})=>e)),Zne(),nre(((e,t)=>Wne(h)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?fie:hie,prevScrollTop:t}),{direction:hie,prevScrollTop:0}),ere((e=>e.direction))),g),Une(Xne(e,ire(50),tre("none")),g);const m=$ne(0);return Une(Xne(f,Qne((e=>!e)),tre(0)),m),Une(Xne(t,ire(100),are(f),Qne((([e,t])=>!!t)),nre((([e,t],[n])=>[t,n]),[0,0]),ere((([e,t])=>t-e))),m),{isScrolling:f,isAtTop:l,isAtBottom:a,atBottomState:p,atTopStateChange:c,atBottomStateChange:u,scrollDirection:g,atBottomThreshold:s,atTopThreshold:d,scrollVelocity:m,lastJumpDueToItemResize:v}}),Tne(Sre)),gie=sre((([{log:e}])=>{const t=$ne(!1),n=qne(Xne(t,Qne((e=>e)),Zne()));return Vne(t,(t=>{t&&Wne(e)("props updated",{},vre.DEBUG)})),{propsReady:t,didMount:n}}),Tne(mre),{singleton:!0});function mie(e,t){0==e?t():requestAnimationFrame((()=>mie(e-1,t)))}function yie(e,t){const n=t-1;return"number"==typeof e?e:"LAST"===e.index?n:e.index}const bie=sre((([{sizes:e,listRefresh:t,defaultItemSize:n},{scrollTop:r},{scrollToIndex:i,scrollTargetReached:o},{didMount:a}])=>{const l=$ne(!0),u=$ne(0),c=$ne(!0);return Une(Xne(a,are(u),Qne((([e,t])=>!!t)),tre(!1)),l),Une(Xne(a,are(u),Qne((([e,t])=>!!t)),tre(!1)),c),Vne(Xne(cre(t,a),are(l,e,n,c),Qne((([[,e],t,{sizeTree:n},r,i])=>e&&(!Ire(n)||Lne(r))&&!t&&!i)),are(u)),(([,e])=>{Gne(o,(()=>{zne(c,!0)})),mie(4,(()=>{Gne(r,(()=>{zne(l,!0)})),zne(i,e)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:u,initialItemFinalLocationReached:c}}),Tne(uie,Sre,die,gie),{singleton:!0});function wie(e){return!!e&&("smooth"===e?"smooth":"auto")}const _ie=sre((([{totalCount:e,listRefresh:t},{isAtBottom:n,atBottomState:r},{scrollToIndex:i},{scrolledToInitialItem:o},{propsReady:a,didMount:l},{log:u},{scrollingInProgress:c}])=>{const s=$ne(!1),d=Yne();let f=null;function h(e){zne(i,{index:"LAST",align:"end",behavior:e})}function p(e){const t=Gne(r,(t=>{!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||f||(Wne(u)("scrolling to bottom due to increased size",{},vre.DEBUG),h("auto"))}));setTimeout(t,100)}return Vne(Xne(cre(Xne(ure(e),rre(1)),l),are(ure(s),n,o,c),ere((([[e,t],n,r,i,o])=>{let a=t&&i,l="auto";return a&&(l=((e,t)=>"function"==typeof e?wie(e(t)):t&&wie(e))(n,r||o),a=a&&!!l),{totalCount:e,shouldFollow:a,followOutputBehavior:l}})),Qne((({shouldFollow:e})=>e))),(({totalCount:e,followOutputBehavior:n})=>{f&&(f(),f=null),f=Gne(t,(()=>{Wne(u)("following output to ",{totalCount:e},vre.DEBUG),h(n),f=null}))})),Vne(Xne(cre(ure(s),e,a),Qne((([e,,t])=>e&&t)),nre((({value:e},[,t])=>({refreshed:e===t,value:t})),{refreshed:!1,value:0}),Qne((({refreshed:e})=>e)),are(s,e)),(([,e])=>{Wne(o)&&p(!1!==e)})),Vne(d,(()=>{p(!1!==Wne(s))})),Vne(cre(ure(s),r),(([e,t])=>{e&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&h("auto")})),{followOutput:s,autoscrollToBottom:d}}),Tne(uie,vie,die,bie,gie,mre,Sre));function xie(e){return e.reduce(((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e)),{totalCount:0,groupIndices:[]})}const kie=sre((([{totalCount:e,groupIndices:t,sizes:n},{scrollTop:r,headerHeight:i}])=>{const o=Yne(),a=Yne(),l=qne(Xne(o,ere(xie)));return Une(Xne(l,ere((e=>e.totalCount))),e),Une(Xne(l,ere((e=>e.groupIndices))),t),Une(Xne(cre(r,n,i),Qne((([e,t])=>aie(t))),ere((([e,t,n])=>Are(t.groupOffsetTree,Math.max(e-n,0),"v")[0])),Zne(),ere((e=>[e]))),a),{groupCounts:o,topItemsIndexes:a}}),Tne(uie,Sre));function Cie(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function Sie(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}const Oie="top",Eie="bottom",Iie="none";function Pie(e,t,n){return"number"==typeof e?n===fie&&t===Oie||n===hie&&t===Eie?e:0:n===fie?t===Oie?e.main:e.reverse:t===Eie?e.main:e.reverse}function Mie(e,t){return"number"==typeof e?e:e[t]||0}const Rie=sre((([{scrollTop:e,viewportHeight:t,deviation:n,headerHeight:r,fixedHeaderHeight:i}])=>{const o=Yne(),a=$ne(0),l=$ne(0),u=$ne(0),c=Kne(Xne(cre(ure(e),ure(t),ure(r),ure(o,Cie),ure(u),ure(a),ure(i),ure(n),ure(l)),ere((([e,t,n,[r,i],o,a,l,u,c])=>{const s=e-u,d=a+l,f=Math.max(n-s,0);let h=Iie;const p=Mie(c,Oie),v=Mie(c,Eie);return r-=u,i+=n+l,(r+=n+l)>e+d-p&&(h=fie),(i-=u)<e-f+t+v&&(h=hie),h!==Iie?[Math.max(s-n-Pie(o,Oie,h)-p,0),s-f-l+t+Pie(o,Eie,h)+v]:null})),Qne((e=>null!=e)),Zne(Cie)),[0,0]);return{listBoundary:o,overscan:u,topListHeight:a,increaseViewportBy:l,visibleRange:c}}),Tne(Sre),{singleton:!0});const Aie={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function jie(e,t,n){if(0===e.length)return[];if(!aie(t))return e.map((e=>({...e,index:e.index+n,originalIndex:e.index})));const r=e[0].index,i=e[e.length-1].index,o=[],a=Hre(t.groupOffsetTree,r,i);let l,u=0;for(const r of e){let e;(!l||l.end<r.index)&&(l=a.shift(),u=t.groupIndices.indexOf(l.start)),e=r.index===l.start?{type:"group",index:u}:{index:r.index-(u+1)+n,groupIndex:u},o.push({...e,size:r.size,offset:r.offset,originalIndex:r.index,data:r.data})}return o}function Die(e,t,n,r,i,o){const{lastSize:a,lastOffset:l,lastIndex:u}=i;let c=0,s=0;if(e.length>0){c=e[0].offset;const t=e[e.length-1];s=t.offset+t.size}const d=n-u,f=c,h=l+d*a+(d-1)*r-s;return{items:jie(e,i,o),topItems:jie(t,i,o),topListHeight:t.reduce(((e,t)=>t.size+e),0),offsetTop:c,offsetBottom:h,top:f,bottom:s,totalCount:n,firstItemIndex:o}}function Tie(e,t,n,r,i,o){let a=0;if(n.groupIndices.length>0)for(const t of n.groupIndices){if(t-a>=e)break;a++}const l=e+a,u=yie(t,l);return Die(Array.from({length:l}).map(((e,t)=>({index:t+u,size:0,offset:0,data:o[t+u]}))),[],l,i,n,r)}const Fie=sre((([{sizes:e,totalCount:t,data:n,firstItemIndex:r,gap:i},o,{visibleRange:a,listBoundary:l,topListHeight:u},{scrolledToInitialItem:c,initialTopMostItemIndex:s},{topListHeight:d},f,{didMount:h},{recalcInProgress:p}])=>{const v=$ne([]),g=$ne(0),m=Yne();Une(o.topItemsIndexes,v);const y=Kne(Xne(cre(h,p,ure(a,Cie),ure(t),ure(e),ure(s),c,ure(v),ure(r),ure(i),n),Qne((([e,t,,n,,,,,,,r])=>{const i=r&&r.length!==n;return e&&!t&&!i})),ere((([,,[e,t],n,r,i,o,a,l,u,c])=>{const s=r,{sizeTree:d,offsetTree:f}=s,h=Wne(g);if(0===n)return{...Aie,totalCount:n};if(0===e&&0===t)return 0===h?{...Aie,totalCount:n}:Tie(h,i,r,l,u,c||[]);if(Ire(d)){if(h>0)return null;const e=Die(function(e,t,n){if(aie(t)){const r=oie(e,t);return[{index:Are(t.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(yie(i,n),s,c),[],n,u,s,l);return e}const p=[];if(a.length>0){const e=a[0],t=a[a.length-1];let n=0;for(const r of Hre(d,e,t)){const i=r.value,o=Math.max(r.start,e),a=Math.min(r.end,t);for(let e=o;e<=a;e++)p.push({index:e,size:i,offset:n,data:c&&c[e]}),n+=i}}if(!o)return Die([],p,n,u,s,l);const v=a.length>0?a[a.length-1]+1:0,m=eie(f,e,t,v);if(0===m.length)return null;const y=n-1,b=Dne([],(n=>{for(const r of m){const i=r.value;let o=i.offset,a=r.start;const l=i.size;if(i.offset<e){a+=Math.floor((e-i.offset+u)/(l+u));const t=a-r.start;o+=t*l+t*u}a<v&&(o+=(v-a)*l,a=v);const s=Math.min(r.end,y);for(let e=a;e<=s&&!(o>=t);e++)n.push({index:e,size:l,offset:o,data:c&&c[e]}),o+=l+u}}));return Die(b,p,n,u,s,l)})),Qne((e=>null!==e)),Zne()),Aie);Une(Xne(n,Qne(Lne),ere((e=>null==e?void 0:e.length))),t),Une(Xne(y,ere((e=>e.topListHeight))),d),Une(d,u),Une(Xne(y,ere((e=>[e.top,e.bottom]))),l),Une(Xne(y,ere((e=>e.items))),m);const b=qne(Xne(y,Qne((({items:e})=>e.length>0)),are(t,n),Qne((([{items:e},t])=>e[e.length-1].originalIndex===t-1)),ere((([,e,t])=>[e-1,t])),Zne(Cie),ere((([e])=>e))));return{listState:y,topItemsIndexes:v,endReached:b,startReached:qne(Xne(y,ire(200),Qne((({items:e,topItems:t})=>e.length>0&&e[0].originalIndex===t.length)),ere((({items:e})=>e[0].index)),Zne())),rangeChanged:qne(Xne(y,Qne((({items:e})=>e.length>0)),ere((({items:e})=>{let t=0,n=e.length-1;for(;"group"===e[t].type&&t<n;)t++;for(;"group"===e[n].type&&n>t;)n--;return{startIndex:e[t].index,endIndex:e[n].index}})),Zne(Sie))),itemsRendered:m,initialItemCount:g,...f}}),Tne(uie,kie,Rie,bie,die,vie,gie,qre),{singleton:!0}),Nie=sre((([{sizes:e,firstItemIndex:t,data:n,gap:r},{initialTopMostItemIndex:i},{initialItemCount:o,listState:a},{didMount:l}])=>(Une(Xne(l,are(o),Qne((([,e])=>0!==e)),are(i,e,t,r,n),ere((([[,e],t,n,r,i,o=[]])=>Tie(e,t,n,r,i,o)))),a),{})),Tne(uie,bie,Fie,gie),{singleton:!0}),Lie=sre((([{scrollVelocity:e}])=>{const t=$ne(!1),n=Yne(),r=$ne(!1);return Une(Xne(e,are(r,t,n),Qne((([e,t])=>!!t)),ere((([e,t,n,r])=>{const{exit:i,enter:o}=t;if(n){if(i(e,r))return!1}else if(o(e,r))return!0;return n})),Zne()),t),Vne(Xne(cre(t,e,n),are(r)),(([[e,t,n],r])=>e&&r&&r.change&&r.change(t,n))),{isSeeking:t,scrollSeekConfiguration:r,scrollVelocity:e,scrollSeekRangeChanged:n}}),Tne(vie),{singleton:!0}),Bie=sre((([{topItemsIndexes:e}])=>{const t=$ne(0);return Une(Xne(t,Qne((e=>e>0)),ere((e=>Array.from({length:e}).map(((e,t)=>t))))),e),{topItemCount:t}}),Tne(Fie)),Vie=sre((([{footerHeight:e,headerHeight:t,fixedHeaderHeight:n,fixedFooterHeight:r},{listState:i}])=>{const o=Yne(),a=Kne(Xne(cre(e,r,t,n,i),ere((([e,t,n,r,i])=>e+t+n+r+i.offsetBottom+i.bottom))),0);return Une(ure(a),o),{totalListHeight:a,totalListHeightChanged:o}}),Tne(Sre,Fie),{singleton:!0});function zie(e){let t,n=!1;return()=>(n||(n=!0,t=e()),t)}const Hie=zie((()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))),Wie=sre((([{scrollBy:e,scrollTop:t,deviation:n,scrollingInProgress:r},{isScrolling:i,isAtBottom:o,scrollDirection:a,lastJumpDueToItemResize:l},{listState:u},{beforeUnshiftWith:c,shiftWithOffset:s,sizes:d,gap:f},{log:h},{recalcInProgress:p}])=>{const v=qne(Xne(u,are(l),nre((([,e,t,n],[{items:r,totalCount:i,bottom:o,offsetBottom:a},l])=>{const u=o+a;let c=0;if(t===i&&e.length>0&&r.length>0){0===r[0].originalIndex&&0===e[0].originalIndex||(c=u-n,0!==c&&(c+=l))}return[c,r,i,u]}),[0,[],0,0]),Qne((([e])=>0!==e)),are(t,a,r,o,h,p),Qne((([,e,t,n,,,r])=>!r&&!n&&0!==e&&t===fie)),ere((([[e],,,,,t])=>(t("Upward scrolling compensation",{amount:e},vre.DEBUG),e)))));function g(t){t>0?(zne(e,{top:-t,behavior:"auto"}),zne(n,0)):(zne(n,0),zne(e,{top:-t,behavior:"auto"}))}return Vne(Xne(v,are(n,i)),(([e,t,r])=>{r&&Hie()?zne(n,t-e):g(-e)})),Vne(Xne(cre(Kne(i,!1),n,p),Qne((([e,t,n])=>!e&&!n&&0!==t)),ere((([e,t])=>t)),ire(1)),g),Une(Xne(s,ere((e=>({top:-e})))),e),Vne(Xne(c,are(d,f),ere((([e,{lastSize:t,groupIndices:n,sizeTree:r},i])=>{function o(e){return e*(t+i)}if(0===n.length)return o(e);{let t=0;const i=Rre(r,0);let a=0,l=0;for(;a<e;){a++,t+=i;let r=n.length===l+1?1/0:n[l+1]-n[l]-1;a+r>e&&(t-=i,r=e-a+1),a+=r,t+=o(r),l++}return t}}))),(t=>{zne(n,t),requestAnimationFrame((()=>{zne(e,{top:t}),requestAnimationFrame((()=>{zne(n,0),zne(p,!1)}))}))})),{deviation:n}}),Tne(Sre,vie,Fie,uie,mre,qre)),Uie=sre((([{didMount:e},{scrollTo:t},{listState:n}])=>{const r=$ne(0);return Vne(Xne(e,are(r),Qne((([,e])=>0!==e)),ere((([,e])=>({top:e})))),(e=>{Gne(Xne(n,rre(1),Qne((e=>e.items.length>1))),(()=>{requestAnimationFrame((()=>{zne(t,e)}))}))})),{initialScrollTop:r}}),Tne(gie,Sre,Fie),{singleton:!0}),Gie=sre((([{viewportHeight:e},{totalListHeight:t}])=>{const n=$ne(!1);return{alignToBottom:n,paddingTopAddition:Kne(Xne(cre(n,e,t),Qne((([e])=>e)),ere((([,e,t])=>Math.max(0,e-t))),ire(0),Zne()),0)}}),Tne(Sre,Vie),{singleton:!0}),Yie=sre((([{scrollTo:e,scrollContainerState:t}])=>{const n=Yne(),r=Yne(),i=Yne(),o=$ne(!1),a=$ne(void 0);return Une(Xne(cre(n,r),ere((([{viewportHeight:e,scrollTop:t,scrollHeight:n},{offsetTop:r}])=>({scrollTop:Math.max(0,t-r),scrollHeight:n,viewportHeight:e})))),t),Une(Xne(e,are(r),ere((([e,{offsetTop:t}])=>({...e,top:e.top+t})))),i),{useWindowScroll:o,customScrollParent:a,windowScrollContainerState:n,windowViewportRect:r,windowScrollTo:i}}),Tne(Sre)),$ie=({itemTop:e,itemBottom:t,viewportTop:n,viewportBottom:r,locationParams:{behavior:i,align:o,...a}})=>e<n?{...a,behavior:i,align:null!=o?o:"start"}:t>r?{...a,behavior:i,align:null!=o?o:"end"}:null,qie=sre((([{sizes:e,totalCount:t,gap:n},{scrollTop:r,viewportHeight:i,headerHeight:o,fixedHeaderHeight:a,fixedFooterHeight:l,scrollingInProgress:u},{scrollToIndex:c}])=>{const s=Yne();return Une(Xne(s,are(e,i,t,o,a,l,r),are(n),ere((([[e,t,n,r,i,o,a,l],c])=>{const{done:s,behavior:d,align:f,calculateViewLocation:h=$ie,...p}=e,v=iie(e,t,r-1),g=rie(v,t.offsetTree,c)+i+o,m=h({itemTop:g,itemBottom:g+Are(t.sizeTree,v)[1],viewportTop:l+o,viewportBottom:l+n-a,locationParams:{behavior:d,align:f,...p}});return m?s&&Gne(Xne(u,Qne((e=>!1===e)),rre(Wne(u)?1:2)),s):s&&s(),m})),Qne((e=>null!==e))),c),{scrollIntoView:s}}),Tne(uie,Sre,die,Fie,mre),{singleton:!0}),Kie=sre((([{sizes:e,sizeRanges:t},{scrollTop:n,headerHeight:r},{initialTopMostItemIndex:i},{didMount:o},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:u}])=>{const c=Yne(),s=$ne(void 0),d=$ne(null),f=$ne(null);return Une(l,d),Une(u,f),Vne(Xne(c,are(e,n,a,d,f,r)),(([e,t,n,r,i,o,a])=>{const l=Tre(t.sizeTree).map((({k:e,v:t},n,r)=>{const i=r[n+1];return{startIndex:e,endIndex:i?i.k-1:1/0,size:t}}));r&&null!==i&&null!==o&&(n=i.scrollTop-o.offsetTop),e({ranges:l,scrollTop:n-=a})})),Une(Xne(s,Qne(Lne),ere(Xie)),i),Une(Xne(o,are(s),Qne((([,e])=>void 0!==e)),Zne(),ere((([,e])=>e.ranges))),t),{getState:c,restoreStateFrom:s}}),Tne(uie,Sre,bie,gie,Yie));function Xie(e){return{offset:e.scrollTop,index:0,align:"start"}}const Jie=sre((([e,t,n,r,i,o,a,l,u,c])=>({...e,...t,...n,...r,...i,...o,...a,...l,...u,...c})),Tne(Rie,Nie,gie,Lie,Vie,Uie,Gie,Yie,qie,mre)),Zie=sre((([{totalCount:e,sizeRanges:t,fixedItemSize:n,defaultItemSize:r,trackItemSizes:i,itemSize:o,data:a,firstItemIndex:l,groupIndices:u,statefulTotalCount:c,gap:s,sizes:d},{initialTopMostItemIndex:f,scrolledToInitialItem:h,initialItemFinalLocationReached:p},v,g,m,{listState:y,topItemsIndexes:b,...w},{scrollToIndex:_},x,{topItemCount:k},{groupCounts:C},S])=>(Une(w.rangeChanged,S.scrollSeekRangeChanged),Une(Xne(S.windowViewportRect,ere((e=>e.visibleHeight))),v.viewportHeight),{totalCount:e,data:a,firstItemIndex:l,sizeRanges:t,initialTopMostItemIndex:f,scrolledToInitialItem:h,initialItemFinalLocationReached:p,topItemsIndexes:b,topItemCount:k,groupCounts:C,fixedItemHeight:n,defaultItemHeight:r,gap:s,...m,statefulTotalCount:c,listState:y,scrollToIndex:_,trackItemSizes:i,itemSize:o,groupIndices:u,...w,...S,...v,sizes:d,...g})),Tne(uie,bie,Sre,Kie,_ie,Fie,die,Wie,Bie,kie,Jie)),Qie="-webkit-sticky",eoe="sticky",toe=zie((()=>{if("undefined"==typeof document)return eoe;const e=document.createElement("div");return e.style.position=Qie,e.style.position===Qie?Qie:eoe}));function noe(e,t,n){const r=u.a.useRef(null),i=u.a.useCallback((n=>{if(null===n||!n.offsetParent)return;const i=n.getBoundingClientRect(),o=i.width;let a,l;if(t){const e=t.getBoundingClientRect(),n=i.top-e.top;a=e.height-Math.max(0,n),l=n+t.scrollTop}else a=window.innerHeight-Math.max(0,i.top),l=i.top+window.pageYOffset;r.current={offsetTop:l,visibleHeight:a,visibleWidth:o},e(r.current)}),[e,t]),{callbackRef:o,ref:a}=yre(i,!0,n),l=u.a.useCallback((()=>{i(a.current)}),[i,a]);return u.a.useEffect((()=>{if(t){t.addEventListener("scroll",l);const e=new ResizeObserver((()=>{requestAnimationFrame(l)}));return e.observe(t),()=>{t.removeEventListener("scroll",l),e.unobserve(t)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}}),[l,t]),o}const roe=u.a.createContext(void 0),ioe=u.a.createContext(void 0);function ooe(e){return e}const aoe=sre((([e,t])=>({...e,...t})),Tne(Zie,sre((()=>{const e=$ne((e=>`Item ${e}`)),t=$ne(null),n=$ne((e=>`Group ${e}`)),r=$ne({}),i=$ne(ooe),o=$ne("div"),a=$ne(Bne),l=(e,t=null)=>Kne(Xne(r,ere((t=>t[e])),Zne()),t);return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:i,headerFooterTag:o,scrollerRef:a,FooterComponent:l("Footer"),HeaderComponent:l("Header"),TopItemListComponent:l("TopItemList"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),GroupComponent:l("Group","div"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder")}})))),loe=({height:e})=>u.a.createElement("div",{style:{height:e}}),uoe={position:toe(),zIndex:1,overflowAnchor:"none"},coe={overflowAnchor:"none"},soe={...coe,display:"inline-block",height:"100%"},doe=u.a.memo((function({showTopList:e=!1}){const t=Ioe("listState"),n=Eoe("sizeRanges"),r=Ioe("useWindowScroll"),i=Ioe("customScrollParent"),o=Eoe("windowScrollContainerState"),a=Eoe("scrollContainerState"),l=i||r?o:a,c=Ioe("itemContent"),s=Ioe("context"),d=Ioe("groupContent"),f=Ioe("trackItemSizes"),h=Ioe("itemSize"),p=Ioe("log"),v=Eoe("gap"),g=Ioe("horizontalDirection"),{callbackRef:m}=wre(n,h,f,e?Bne:l,p,v,i,g,Ioe("skipAnimationFrameInResizeObserver")),[y,b]=u.a.useState(0);Poe("deviation",(e=>{y!==e&&b(e)}));const w=Ioe("EmptyPlaceholder"),_=Ioe("ScrollSeekPlaceholder")||loe,x=Ioe("ListComponent"),k=Ioe("ItemComponent"),C=Ioe("GroupComponent"),S=Ioe("computeItemKey"),O=Ioe("isSeeking"),E=Ioe("groupIndices").length>0,I=Ioe("alignToBottom"),P=Ioe("initialItemFinalLocationReached"),M=e?{}:{boxSizing:"border-box",...g?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:0!==y?y:I?"auto":0}:{marginTop:0!==y?y:I?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...P?{}:{visibility:"hidden"}};return!e&&0===t.totalCount&&w?u.a.createElement(w,goe(w,s)):u.a.createElement(x,{...goe(x,s),ref:m,style:M,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list"},(e?t.topItems:t.items).map((e=>{const n=e.originalIndex,r=S(n+t.firstItemIndex,e.data,s);return O?u.a.createElement(_,{...goe(_,s),key:r,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?u.a.createElement(C,{...goe(C,s),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:uoe},d(e.index,s)):u.a.createElement(k,{...goe(k,s),...moe(k,e.data),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:g?soe:coe},E?c(e.index,e.groupIndex,e.data,s):c(e.index,e.data,s))})))})),foe={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},hoe={outline:"none",overflowX:"auto",position:"relative"},poe=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),voe={width:"100%",position:toe(),top:0,zIndex:1};function goe(e,t){if("string"!=typeof e)return{context:t}}function moe(e,t){return{item:"string"==typeof e?void 0:t}}const yoe=u.a.memo((function(){const e=Ioe("HeaderComponent"),t=Eoe("headerHeight"),n=Ioe("headerFooterTag"),r=bre(u.a.useMemo((()=>e=>t(xre(e,"height"))),[t]),!0,Ioe("skipAnimationFrameInResizeObserver")),i=Ioe("context");return e?u.a.createElement(n,{ref:r},u.a.createElement(e,goe(e,i))):null})),boe=u.a.memo((function(){const e=Ioe("FooterComponent"),t=Eoe("footerHeight"),n=Ioe("headerFooterTag"),r=bre(u.a.useMemo((()=>e=>t(xre(e,"height"))),[t]),!0,Ioe("skipAnimationFrameInResizeObserver")),i=Ioe("context");return e?u.a.createElement(n,{ref:r},u.a.createElement(e,goe(e,i))):null}));function woe({usePublisher:e,useEmitter:t,useEmitterValue:n}){return u.a.memo((function({style:r,children:i,...o}){const a=e("scrollContainerState"),l=n("ScrollerComponent"),c=e("smoothScrollTargetReached"),s=n("scrollerRef"),d=n("context"),f=n("horizontalDirection")||!1,{scrollerRef:h,scrollByCallback:p,scrollToCallback:v}=Cre(a,c,l,s,void 0,f);t("scrollTo",v),t("scrollBy",p);const g=f?hoe:foe;return u.a.createElement(l,{ref:h,style:{...g,...r},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...o,...goe(l,d)},i)}))}function _oe({usePublisher:e,useEmitter:t,useEmitterValue:n}){return u.a.memo((function({style:r,children:i,...o}){const a=e("windowScrollContainerState"),l=n("ScrollerComponent"),c=e("smoothScrollTargetReached"),s=n("totalListHeight"),d=n("deviation"),f=n("customScrollParent"),h=n("context"),{scrollerRef:p,scrollByCallback:v,scrollToCallback:g}=Cre(a,c,l,Bne,f);return pre((()=>(p.current=f||window,()=>{p.current=null})),[p,f]),t("windowScrollTo",g),t("scrollBy",v),u.a.createElement(l,{style:{position:"relative",...r,...0!==s?{height:s+d}:{}},"data-virtuoso-scroller":!0,...o,...goe(l,h)},i)}))}const xoe=({children:e})=>{const t=u.a.useContext(roe),n=Eoe("viewportHeight"),r=Eoe("fixedItemHeight"),i=Ioe("alignToBottom"),o=Ioe("horizontalDirection"),a=bre(u.a.useMemo((()=>Mne(n,(e=>xre(e,o?"width":"height")))),[n,o]),!0,Ioe("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),u.a.createElement("div",{style:poe(i),ref:a,"data-viewport-type":"element"},e)},koe=({children:e})=>{const t=u.a.useContext(roe),n=Eoe("windowViewportRect"),r=Eoe("fixedItemHeight"),i=Ioe("customScrollParent"),o=noe(n,i,Ioe("skipAnimationFrameInResizeObserver")),a=Ioe("alignToBottom");return u.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),u.a.createElement("div",{ref:o,style:poe(a),"data-viewport-type":"window"},e)},Coe=({children:e})=>{const t=Ioe("TopItemListComponent")||"div",n=Ioe("headerHeight"),r={...voe,marginTop:`${n}px`},i=Ioe("context");return u.a.createElement(t,{style:r,...goe(t,i)},e)},Soe=u.a.memo((function(e){const t=Ioe("useWindowScroll"),n=Ioe("topItemsIndexes").length>0,r=Ioe("customScrollParent"),i=r||t?Roe:Moe,o=r||t?koe:xoe;return u.a.createElement(i,{...e},n&&u.a.createElement(Coe,null,u.a.createElement(doe,{showTopList:!0})),u.a.createElement(o,null,u.a.createElement(yoe,null),u.a.createElement(doe,null),u.a.createElement(boe,null)))})),{Component:Ooe,usePublisher:Eoe,useEmitterValue:Ioe,useEmitter:Poe}=hre(aoe,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Soe),Moe=woe({usePublisher:Eoe,useEmitterValue:Ioe,useEmitter:Poe}),Roe=_oe({usePublisher:Eoe,useEmitterValue:Ioe,useEmitter:Poe}),Aoe=Ooe,joe={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Doe={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:Toe,ceil:Foe,floor:Noe,min:Loe,max:Boe}=Math;function Voe(e,t,n){return Array.from({length:t-e+1}).map(((t,r)=>{const i=null===n?null:n[r+e];return{index:r+e,data:i}}))}function zoe(e,t){return e&&e.column===t.column&&e.row===t.row}function Hoe(e,t){return e&&e.width===t.width&&e.height===t.height}const Woe=sre((([{overscan:e,visibleRange:t,listBoundary:n},{scrollTop:r,viewportHeight:i,scrollBy:o,scrollTo:a,smoothScrollTargetReached:l,scrollContainerState:u,footerHeight:c,headerHeight:s},d,f,{propsReady:h,didMount:p},{windowViewportRect:v,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,windowScrollTo:b},w])=>{const _=$ne(0),x=$ne(0),k=$ne(joe),C=$ne({height:0,width:0}),S=$ne({height:0,width:0}),O=Yne(),E=Yne(),I=$ne(0),P=$ne(null),M=$ne({row:0,column:0}),R=Yne(),A=Yne(),j=$ne(!1),D=$ne(0),T=$ne(!0),F=$ne(!1),N=$ne(!1);Vne(Xne(p,are(D),Qne((([e,t])=>!!t))),(()=>{zne(T,!1),zne(x,0)})),Vne(Xne(cre(p,T,S,C,D,F),Qne((([e,t,n,r,,i])=>e&&!t&&0!==n.height&&0!==r.height&&!i))),(([,,,,e])=>{zne(F,!0),mie(1,(()=>{zne(O,e)})),Gne(Xne(r),(()=>{zne(n,[0,0]),zne(T,!0)}))})),Une(Xne(A,Qne((e=>null!=e&&e.scrollTop>0)),tre(0)),x),Vne(Xne(p,are(A),Qne((([,e])=>null!=e))),(([,e])=>{e&&(zne(C,e.viewport),zne(S,null==e?void 0:e.item),zne(M,e.gap),e.scrollTop>0&&(zne(j,!0),Gne(Xne(r,rre(1)),(e=>{zne(j,!1)})),zne(a,{top:e.scrollTop})))})),Une(Xne(C,ere((({height:e})=>e))),i),Une(Xne(cre(ure(C,Hoe),ure(S,Hoe),ure(M,((e,t)=>e&&e.column===t.column&&e.row===t.row)),ure(r)),ere((([e,t,n,r])=>({viewport:e,item:t,gap:n,scrollTop:r})))),R),Une(Xne(cre(ure(_),t,ure(M,zoe),ure(S,Hoe),ure(C,Hoe),ure(P),ure(x),ure(j),ure(T),ure(D)),Qne((([,,,,,,,e])=>!e)),ere((([e,[t,n],r,i,o,a,l,,u,c])=>{const{row:s,column:d}=r,{height:f,width:h}=i,{width:p}=o;if(0===l&&(0===e||0===p))return joe;if(0===h){const t=yie(c,e);return function(e){return{...Doe,items:e}}(Voe(t,0===t?Math.max(l-1,0):t,a))}const v=Yoe(p,h,d);let g,m;u?0===t&&0===n&&l>0?(g=0,m=l-1):(g=v*Noe((t+s)/(f+s)),m=v*Foe((n+s)/(f+s))-1,m=Loe(e-1,Boe(m,v-1)),g=Loe(m,Boe(0,g))):(g=0,m=-1);const y=Voe(g,m,a),{top:b,bottom:w}=Uoe(o,r,i,y),_=Foe(e/v);return{items:y,offsetTop:b,offsetBottom:_*f+(_-1)*s-w,top:b,bottom:w,itemHeight:f,itemWidth:h}}))),k),Une(Xne(P,Qne((e=>null!==e)),ere((e=>e.length))),_),Une(Xne(cre(C,S,k,M),Qne((([e,t,{items:n}])=>n.length>0&&0!==t.height&&0!==e.height)),ere((([e,t,{items:n},r])=>{const{top:i,bottom:o}=Uoe(e,r,t,n);return[i,o]})),Zne(Cie)),n);const L=$ne(!1);Une(Xne(r,are(L),ere((([e,t])=>t||0!==e))),L);const B=qne(Xne(ure(k),Qne((({items:e})=>e.length>0)),are(_,L),Qne((([{items:e},t,n])=>n&&e[e.length-1].index===t-1)),ere((([,e])=>e-1)),Zne())),V=qne(Xne(ure(k),Qne((({items:e})=>e.length>0&&0===e[0].index)),tre(0),Zne())),z=qne(Xne(ure(k),are(j),Qne((([{items:e},t])=>e.length>0&&!t)),ere((([{items:e}])=>({startIndex:e[0].index,endIndex:e[e.length-1].index}))),Zne(Sie),ire(0)));Une(z,f.scrollSeekRangeChanged),Une(Xne(O,are(C,S,_,M),ere((([e,t,n,r,i])=>{const o=sie(e),{align:a,behavior:l,offset:u}=o;let c=o.index;"LAST"===c&&(c=r-1),c=Boe(0,c,Loe(r-1,c));let s=Goe(t,i,n,c);return"end"===a?s=Toe(s-t.height+n.height):"center"===a&&(s=Toe(s-t.height/2+n.height/2)),u&&(s+=u),{top:s,behavior:l}}))),a);const H=Kne(Xne(k,ere((e=>e.offsetBottom+e.bottom))),0);return Une(Xne(v,ere((e=>({width:e.visibleWidth,height:e.visibleHeight})))),C),{data:P,totalCount:_,viewportDimensions:C,itemDimensions:S,scrollTop:r,scrollHeight:E,overscan:e,scrollBy:o,scrollTo:a,scrollToIndex:O,smoothScrollTargetReached:l,windowViewportRect:v,windowScrollTo:b,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,deviation:I,scrollContainerState:u,footerHeight:c,headerHeight:s,initialItemCount:x,gap:M,restoreStateFrom:A,...f,initialTopMostItemIndex:D,horizontalDirection:N,gridState:k,totalListHeight:H,...d,startReached:V,endReached:B,rangeChanged:z,stateChanged:R,propsReady:h,stateRestoreInProgress:j,...w}}),Tne(Rie,Sre,vie,Lie,gie,Yie,mre));function Uoe(e,t,n,r){const{height:i}=n;if(void 0===i||0===r.length)return{top:0,bottom:0};return{top:Goe(e,t,n,r[0].index),bottom:Goe(e,t,n,r[r.length-1].index)+i}}function Goe(e,t,n,r){const i=Yoe(e.width,n.width,t.column),o=Noe(r/i),a=o*n.height+Boe(0,o-1)*t.row;return a>0?a+t.row:a}function Yoe(e,t,n){return Boe(1,Noe((e+n)/(Noe(t)+n)))}const $oe=sre((([e,t])=>({...e,...t})),Tne(Woe,sre((()=>{const e=$ne((e=>`Item ${e}`)),t=$ne({}),n=$ne(null),r=$ne("virtuoso-grid-item"),i=$ne("virtuoso-grid-list"),o=$ne(ooe),a=$ne("div"),l=$ne(Bne),u=(e,n=null)=>Kne(Xne(t,ere((t=>t[e])),Zne()),n),c=$ne(!1),s=$ne(!1);return Une(ure(s),c),{readyStateChanged:c,reportReadyState:s,context:n,itemContent:e,components:t,computeItemKey:o,itemClassName:r,listClassName:i,headerFooterTag:a,scrollerRef:l,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}})))),qoe=u.a.memo((function(){const e=nae("gridState"),t=nae("listClassName"),n=nae("itemClassName"),r=nae("itemContent"),i=nae("computeItemKey"),o=nae("isSeeking"),a=tae("scrollHeight"),l=nae("ItemComponent"),c=nae("ListComponent"),s=nae("ScrollSeekPlaceholder"),d=nae("context"),f=tae("itemDimensions"),h=tae("gap"),p=nae("log"),v=nae("stateRestoreInProgress"),g=tae("reportReadyState"),m=bre(u.a.useMemo((()=>e=>{const t=e.parentElement.parentElement.scrollHeight;a(t);const n=e.firstChild;if(n){const{width:e,height:t}=n.getBoundingClientRect();f({width:e,height:t})}h({row:aae("row-gap",getComputedStyle(e).rowGap,p),column:aae("column-gap",getComputedStyle(e).columnGap,p)})}),[a,f,h,p]),!0,!1);return v?null:(pre((()=>{e.itemHeight>0&&e.itemWidth>0&&g(!0)}),[e]),u.a.createElement(c,{ref:m,className:t,...goe(c,d),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list"},e.items.map((t=>{const a=i(t.index,t.data,d);return o?u.a.createElement(s,{key:a,...goe(s,d),index:t.index,height:e.itemHeight,width:e.itemWidth}):u.a.createElement(l,{...goe(l,d),className:n,"data-index":t.index,key:a},r(t.index,t.data,d))}))))})),Koe=u.a.memo((function(){const e=nae("HeaderComponent"),t=tae("headerHeight"),n=nae("headerFooterTag"),r=bre(u.a.useMemo((()=>e=>t(xre(e,"height"))),[t]),!0,!1),i=nae("context");return e?u.a.createElement(n,{ref:r},u.a.createElement(e,goe(e,i))):null})),Xoe=u.a.memo((function(){const e=nae("FooterComponent"),t=tae("footerHeight"),n=nae("headerFooterTag"),r=bre(u.a.useMemo((()=>e=>t(xre(e,"height"))),[t]),!0,!1),i=nae("context");return e?u.a.createElement(n,{ref:r},u.a.createElement(e,goe(e,i))):null})),Joe=({children:e})=>{const t=u.a.useContext(ioe),n=tae("itemDimensions"),r=tae("viewportDimensions"),i=bre(u.a.useMemo((()=>e=>{r(e.getBoundingClientRect())}),[r]),!0,!1);return u.a.useEffect((()=>{t&&(r({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))}),[t,r,n]),u.a.createElement("div",{style:poe(!1),ref:i},e)},Zoe=({children:e})=>{const t=u.a.useContext(ioe),n=tae("windowViewportRect"),r=tae("itemDimensions"),i=nae("customScrollParent"),o=noe(n,i,!1);return u.a.useEffect((()=>{t&&(r({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))}),[t,n,r]),u.a.createElement("div",{ref:o,style:poe(!1)},e)},Qoe=u.a.memo((function({...e}){const t=nae("useWindowScroll"),n=nae("customScrollParent"),r=n||t?oae:iae,i=n||t?Zoe:Joe;return u.a.createElement(r,{...e},u.a.createElement(i,null,u.a.createElement(Koe,null),u.a.createElement(qoe,null),u.a.createElement(Xoe,null)))})),{Component:eae,usePublisher:tae,useEmitterValue:nae,useEmitter:rae}=hre($oe,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},Qoe),iae=woe({usePublisher:tae,useEmitterValue:nae,useEmitter:rae}),oae=_oe({usePublisher:tae,useEmitterValue:nae,useEmitter:rae});function aae(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,vre.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}const lae=eae,uae=sre((([e,t])=>({...e,...t})),Tne(Zie,sre((()=>{const e=$ne((e=>u.a.createElement("td",null,"Item $",e))),t=$ne(null),n=$ne(null),r=$ne(null),i=$ne({}),o=$ne(ooe),a=$ne(Bne),l=(e,t=null)=>Kne(Xne(i,ere((t=>t[e])),Zne()),t);return{context:t,itemContent:e,fixedHeaderContent:n,fixedFooterContent:r,components:i,computeItemKey:o,scrollerRef:a,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableFooterComponent:l("TableFoot","tfoot"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}})))),cae=({height:e})=>u.a.createElement("tr",null,u.a.createElement("td",{style:{height:e}})),sae=({height:e})=>u.a.createElement("tr",null,u.a.createElement("td",{style:{height:e,padding:0,border:0}})),dae={overflowAnchor:"none"},fae=u.a.memo((function(){const e=yae("listState"),t=mae("sizeRanges"),n=yae("useWindowScroll"),r=yae("customScrollParent"),i=mae("windowScrollContainerState"),o=mae("scrollContainerState"),a=r||n?i:o,l=yae("itemContent"),c=yae("trackItemSizes"),s=yae("itemSize"),d=yae("log"),{callbackRef:f,ref:h}=wre(t,s,c,a,d,void 0,r,!1,yae("skipAnimationFrameInResizeObserver")),[p,v]=u.a.useState(0);bae("deviation",(e=>{p!==e&&(h.current.style.marginTop=`${e}px`,v(e))}));const g=yae("EmptyPlaceholder"),m=yae("ScrollSeekPlaceholder")||cae,y=yae("FillerRow")||sae,b=yae("TableBodyComponent"),w=yae("TableRowComponent"),_=yae("computeItemKey"),x=yae("isSeeking"),k=yae("paddingTopAddition"),C=yae("firstItemIndex"),S=yae("statefulTotalCount"),O=yae("context");if(0===S&&g)return u.a.createElement(g,goe(g,O));const E=e.offsetTop+k+p,I=e.offsetBottom,P=E>0?u.a.createElement(y,{height:E,key:"padding-top",context:O}):null,M=I>0?u.a.createElement(y,{height:I,key:"padding-bottom",context:O}):null,R=e.items.map((e=>{const t=e.originalIndex,n=_(t+C,e.data,O);return x?u.a.createElement(m,{...goe(m,O),key:n,index:e.index,height:e.size,type:e.type||"item"}):u.a.createElement(w,{...goe(w,O),...moe(w,e.data),key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:dae},l(e.index,e.data,O))}));return u.a.createElement(b,{ref:f,"data-testid":"virtuoso-item-list",...goe(b,O)},[P,...R,M])})),hae=({children:e})=>{const t=u.a.useContext(roe),n=mae("viewportHeight"),r=mae("fixedItemHeight"),i=bre(u.a.useMemo((()=>Mne(n,(e=>xre(e,"height")))),[n]),!0,yae("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),u.a.createElement("div",{style:poe(!1),ref:i,"data-viewport-type":"element"},e)},pae=({children:e})=>{const t=u.a.useContext(roe),n=mae("windowViewportRect"),r=mae("fixedItemHeight"),i=yae("customScrollParent"),o=noe(n,i,yae("skipAnimationFrameInResizeObserver"));return u.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),u.a.createElement("div",{ref:o,style:poe(!1),"data-viewport-type":"window"},e)},vae=u.a.memo((function(e){const t=yae("useWindowScroll"),n=yae("customScrollParent"),r=mae("fixedHeaderHeight"),i=mae("fixedFooterHeight"),o=yae("fixedHeaderContent"),a=yae("fixedFooterContent"),l=yae("context"),c=bre(u.a.useMemo((()=>Mne(r,(e=>xre(e,"height")))),[r]),!0,yae("skipAnimationFrameInResizeObserver")),s=bre(u.a.useMemo((()=>Mne(i,(e=>xre(e,"height")))),[i]),!0,yae("skipAnimationFrameInResizeObserver")),d=n||t?_ae:wae,f=n||t?pae:hae,h=yae("TableComponent"),p=yae("TableHeadComponent"),v=yae("TableFooterComponent"),g=o?u.a.createElement(p,{key:"TableHead",style:{zIndex:2,position:"sticky",top:0},ref:c,...goe(p,l)},o()):null,m=a?u.a.createElement(v,{key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:s,...goe(v,l)},a()):null;return u.a.createElement(d,{...e},u.a.createElement(f,null,u.a.createElement(h,{style:{borderSpacing:0,overflowAnchor:"none"},...goe(h,l)},[g,u.a.createElement(fae,{key:"TableBody"}),m])))})),{Component:gae,usePublisher:mae,useEmitterValue:yae,useEmitter:bae}=hre(uae,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},vae),wae=woe({usePublisher:mae,useEmitterValue:yae,useEmitter:bae}),_ae=_oe({usePublisher:mae,useEmitterValue:yae,useEmitter:bae}),xae=gae;var kae=function(e,t){return(kae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Cae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}kae(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Sae=function(){return Sae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Sae.apply(this,arguments)};function Oae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Eae(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))}function Iae(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}function Pae(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mae(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Rae(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)r[i]=o[a];return r}function Aae(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var jae=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},Dae=function(e,t){return!!jae(e)&&e.indexOf(t)>-1},Tae=function(e,t){if(!jae(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Fae={}.toString,Nae=function(e,t){return Fae.call(e)==="[object "+t+"]"};const Lae=function(e){return Nae(e,"Function")};var Bae=function(e){return null==e};const Vae=function(e){return Array.isArray?Array.isArray(e):Nae(e,"Array")},zae=function(e){var t=lr(e);return null!==e&&"object"===t||"function"===t};function Hae(e,t){if(e)if(Vae(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(zae(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var Wae=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Hae(e,(function(n,r){Lae(e)&&"prototype"===r||t.push(r)})),t};function Uae(e,t){var n=Wae(t),r=n.length;if(Bae(e))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(t[o]!==e[o]||!(o in e))return!1}return!0}var Gae=function(e){return"object"===lr(e)&&null!==e},Yae=function(e){if(!Gae(e)||!Nae(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function $ae(e,t){if(!Vae(e))return null;var n;if(Lae(t)&&(n=t),Yae(t)&&(n=function(e){return Uae(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function qae(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var Kae=function(e){if(!Vae(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t};const Xae=function(e){if(Vae(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},Jae=function(e){if(Vae(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])};var Zae=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(Vae(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=Xae(t);return{min:Jae(t),max:i}},Qae=Array.prototype.splice,ele=function(e,t,n){if(!Vae(e)&&!Yae(e))return e;var r=n;return Hae(e,(function(e,n){r=t(r,e,n)})),r},tle=function(e,t){var n=[];if(!jae(e))return n;for(var r=-1,i=[],o=e.length;++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return function(e,t){if(!jae(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,o=t[n];n!==r&&o===i||(i=o,Qae.call(e,o,1))}}(e,i),n};const nle=function(e){return Nae(e,"String")};function rle(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];t.has(o)||(n.push(o),t.set(o,!0))}return n}const ile=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i][t];if(!Bae(o)){Vae(o)||(o=[o]);for(var a=0;a<o.length;a++){var l=o[a];r[l]||(n.push(l),r[l]=!0)}}}return n};function ole(e){if(jae(e))return e[0]}function ale(e){if(jae(e)){return e[e.length-1]}}var lle=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},ule=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},cle=Object.prototype.hasOwnProperty;function sle(e,t){if(!t||!Vae(e))return{};for(var n,r={},i=Lae(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var a=e[o];n=i(a),cle.call(r,n)?r[n].push(a):r[n]=[a]}return r}function dle(e,t){if(!t)return{0:e};if(!Lae(t)){var n=Vae(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return sle(e,t)}var fle=function(e,t,n){return e<t?t:e>n?n:e},hle=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},ple=function(e){return Nae(e,"Number")},vle=1e-5;function gle(e,t,n){return void 0===n&&(n=vle),Math.abs(e-t)<n}const mle=function(e,t){if(Vae(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=Lae(t)?t(o):o[t];a>r&&(n=o,r=a)}return n}};var yle=function(e,t){return(e%t+t)%t},ble=Math.PI/180,wle=function(e){return ble*e};const _le=function(e,t){return e.hasOwnProperty(t)};var xle=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Hae(e,(function(n,r){Lae(e)&&"prototype"===r||t.push(n)})),t};const kle=function(e){return Bae(e)?"":e.toString()};var Cle=function(e){return kle(e).toLowerCase()};function Sle(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var Ole=function(e){var t=kle(e);return t.charAt(0).toUpperCase()+t.substring(1)},Ele={}.toString,Ile=function(e){return Ele.call(e).replace(/^\[object /,"").replace(/]$/,"")},Ple=function(e){return Nae(e,"Boolean")},Mle=function(e){return Nae(e,"Date")},Rle=function(e){return null===e},Ale=Object.prototype,jle=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ale)},Dle=function(e){return void 0===e},Tle=function(e){return e instanceof Element||e instanceof HTMLDocument};function Fle(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function Nle(e,t,n,r){return t&&Fle(e,t),n&&Fle(e,n),r&&Fle(e,r),e}var Lle=function(e){if("object"!==lr(e)||null===e)return e;var t;if(Vae(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"===lr(e[n])&&null!=e[n]?t[n]=Lle(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"===lr(e[i])&&null!=e[i]?t[i]=Lle(e[i]):t[i]=e[i];return t};function Ble(e,t,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,o)}),t),a&&e.apply(i,o)}}const Vle=function(e,t){if(!Lae(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var l=e.apply(this,r);return a.set(o,l),l};return n.cache=new Map,n};function zle(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var o=t[i];null!==o&&Yae(o)?(Yae(e[i])||(e[i]={}),n<r?zle(e[i],o,n+1,r):e[i]=t[i]):Vae(o)?(e[i]=[],e[i]=e[i].concat(o)):void 0!==o&&(e[i]=o)}}var Hle=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)zle(e,t[r]);return e},Wle=function(e,t){if(!jae(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},Ule=Object.prototype.hasOwnProperty;function Gle(e){if(Bae(e))return!0;if(jae(e))return!e.length;var t=Ile(e);if("Map"===t||"Set"===t)return!e.size;if(jle(e))return!Object.keys(e).length;for(var n in e)if(Ule.call(e,n))return!1;return!0}var Yle=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(nle(e)||nle(t))return!1;if(jae(e)||jae(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Yle(e[r],t[r]));r++);return n}if(Gae(e)||Gae(t)){var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=Yle(e[i[r]],t[i[r]]));r++);return n}return!1},$le=function(e,t){if(!jae(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},qle=function(e){return e};const Kle=function(e,t,n){for(var r=0,i=nle(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},Xle=function(e,t,n){var r=e,i=nle(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(zae(r[e])||(r[e]=ple(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e};var Jle=Object.prototype.hasOwnProperty;const Zle=function(e,t){if(null===e||!Yae(e))return{};var n={};return Hae(t,(function(t){Jle.call(e,t)&&(n[t]=e[t])})),n},Qle=function(e,t){return ele(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},eue=function(e,t,n){var r,i,o,a,l=0;n||(n={});var u=function(){l=!1===n.leading?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();l||!1!==n.leading||(l=c);var s=t-(c-l);return i=this,o=arguments,s<=0||s>t?(r&&(clearTimeout(r),r=null),l=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,s)),a};return c.cancel=function(){clearTimeout(r),l=0,r=i=o=null},c},tue=function(e){return jae(e)?Array.prototype.slice.call(e):[]};var nue={};const rue=function(e){return nue[e=e||"g"]?nue[e]+=1:nue[e]=1,e+nue[e]},iue=function(){};function oue(e){return Bae(e)?0:jae(e)?e.length:Object.keys(e).length}var aue;const lue=Vle((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,o=t.fontStyle,a=t.fontVariant;return aue||(aue=document.createElement("canvas").getContext("2d")),aue.font=[o,a,i,n+"px",r].join(" "),aue.measureText(nle(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Rae([e],xle(t)).join("")})),uue=function(e,t,n,r){var i,o,a=lue(r,n),l=nle(e)?e:kle(e),u=t,c=[];if(lue(e,n)<=t)return e;for(;i=l.substr(0,16),!((o=lue(i,n))+a>u&&o>u);)if(c.push(i),u-=o,!(l=l.substr(16)))return c.join("");for(;i=l.substr(0,1),!((o=lue(i,n))+a>u);)if(c.push(i),u-=o,!(l=l.substr(1)))return c.join("");return""+c.join("")+r};var cue,sue,due,fue,hue,pue,vue=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();(sue=cue||(cue={})).FORE="fore",sue.MID="mid",sue.BG="bg",(fue=due||(due={})).TOP="top",fue.TOP_LEFT="top-left",fue.TOP_RIGHT="top-right",fue.RIGHT="right",fue.RIGHT_TOP="right-top",fue.RIGHT_BOTTOM="right-bottom",fue.LEFT="left",fue.LEFT_TOP="left-top",fue.LEFT_BOTTOM="left-bottom",fue.BOTTOM="bottom",fue.BOTTOM_LEFT="bottom-left",fue.BOTTOM_RIGHT="bottom-right",fue.RADIUS="radius",fue.CIRCLE="circle",fue.NONE="none",(pue=hue||(hue={})).AXIS="axis",pue.GRID="grid",pue.LEGEND="legend",pue.TOOLTIP="tooltip",pue.ANNOTATION="annotation",pue.SLIDER="slider",pue.SCROLLBAR="scrollbar",pue.OTHER="other";var gue,mue,yue,bue,wue,_ue,xue,kue,Cue=3,Sue=2,Oue=1;(mue=gue||(gue={})).BEFORE_RENDER="beforerender",mue.AFTER_RENDER="afterrender",mue.BEFORE_PAINT="beforepaint",mue.AFTER_PAINT="afterpaint",mue.BEFORE_CHANGE_DATA="beforechangedata",mue.AFTER_CHANGE_DATA="afterchangedata",mue.BEFORE_CLEAR="beforeclear",mue.AFTER_CLEAR="afterclear",mue.BEFORE_DESTROY="beforedestroy",mue.BEFORE_CHANGE_SIZE="beforechangesize",mue.AFTER_CHANGE_SIZE="afterchangesize",(bue=yue||(yue={})).BEFORE_DRAW_ANIMATE="beforeanimate",bue.AFTER_DRAW_ANIMATE="afteranimate",bue.BEFORE_RENDER_LABEL="beforerenderlabel",bue.AFTER_RENDER_LABEL="afterrenderlabel",(_ue=wue||(wue={})).MOUSE_ENTER="plot:mouseenter",_ue.MOUSE_DOWN="plot:mousedown",_ue.MOUSE_MOVE="plot:mousemove",_ue.MOUSE_UP="plot:mouseup",_ue.MOUSE_LEAVE="plot:mouseleave",_ue.TOUCH_START="plot:touchstart",_ue.TOUCH_MOVE="plot:touchmove",_ue.TOUCH_END="plot:touchend",_ue.TOUCH_CANCEL="plot:touchcancel",_ue.CLICK="plot:click",_ue.DBLCLICK="plot:dblclick",_ue.CONTEXTMENU="plot:contextmenu",_ue.LEAVE="plot:leave",_ue.ENTER="plot:enter",(kue=xue||(xue={})).ACTIVE="active",kue.INACTIVE="inactive",kue.SELECTED="selected",kue.DEFAULT="default";var Eue,Iue,Pue,Mue,Rue=["color","shape","size"],Aue="_origin",jue={};function Due(e,t){jue[e]=t}function Tue(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}function Fue(e){Eue||(Eue=document.createElement("table"),Iue=document.createElement("tr"),Pue=/^\s*<(\w+|!)[^>]*>/,Mue={tr:document.createElement("tbody"),tbody:Eue,thead:Eue,tfoot:Eue,td:Iue,th:Iue,"*":document.createElement("div")});var t=Pue.test(e)&&RegExp.$1;t&&t in Mue||(t="*");var n=Mue[t];e="string"==typeof e?e.replace(/(^\s*)|(\s*$)/g,""):e,n.innerHTML=""+e;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function Nue(e,t,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(e){}finally{r=void 0===r?n:r}return r}function Lue(e,t){var n=function(e,t){var n=Nue(e,"height",t);return"auto"===n&&(n=e.offsetHeight),parseFloat(n)}(e,t),r=parseFloat(Nue(e,"borderTopWidth"))||0,i=parseFloat(Nue(e,"paddingTop"))||0,o=parseFloat(Nue(e,"paddingBottom"))||0;return n+r+(parseFloat(Nue(e,"borderBottomWidth"))||0)+i+o+(parseFloat(Nue(e,"marginTop"))||0)+(parseFloat(Nue(e,"marginBottom"))||0)}function Bue(e,t){var n=function(e,t){var n=Nue(e,"width",t);return"auto"===n&&(n=e.offsetWidth),parseFloat(n)}(e,t),r=parseFloat(Nue(e,"borderLeftWidth"))||0,i=parseFloat(Nue(e,"paddingLeft"))||0,o=parseFloat(Nue(e,"paddingRight"))||0,a=parseFloat(Nue(e,"borderRightWidth"))||0,l=parseFloat(Nue(e,"marginRight"))||0;return n+r+a+i+o+(parseFloat(Nue(e,"marginLeft"))||0)+l}function Vue(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}function zue(e){return"number"==typeof e&&!isNaN(e)}function Hue(e,t,n,r){var i=n,o=r;if(t){var a=function(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}(e);i=a.width?a.width:i,o=a.height?a.height:o}return{width:Math.max(zue(i)?i:1,1),height:Math.max(zue(o)?o:1,1)}}var Wue=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],l=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete t._events[e],i--,o--),l.apply(t,n)}};a(i),a(o)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),Uue=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=t.visible,i=void 0===r||r;return n.visible=i,n}return Cae(t,e),t.prototype.show=function(){this.visible||this.changeVisible(!0)},t.prototype.hide=function(){this.visible&&this.changeVisible(!1)},t.prototype.destroy=function(){this.off(),this.destroyed=!0},t.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},t}(Wue),Gue="\t\n\v\f\r   ᠎             　\u2028\u2029",Yue=new RegExp("([a-z])["+Gue+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Gue+"]*,?["+Gue+"]*)+)","ig"),$ue=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Gue+"]*,?["+Gue+"]*","ig"),que=function(e){if(!e)return null;if(Vae(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Yue,(function(r,i,o){var a=[],l=i.toLowerCase();if(o.replace($ue,(function(e,t){t&&a.push(+t)})),"m"===l&&a.length>2&&(n.push([i].concat(a.splice(0,2))),l="l",i="m"===i?"l":"L"),"o"===l&&1===a.length&&n.push([i,a[0]]),"r"===l)n.push([i].concat(a));else for(;a.length>=t[l]&&(n.push([i].concat(a.splice(0,t[l]))),t[l]););return e})),n},Kue=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Xue=function(e,t,n,r,i){var o=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var a=Math.PI/180,l=e+n*Math.cos(-r*a),u=e+n*Math.cos(-i*a);o=[["M",l,t+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,u,t+n*Math.sin(-i*a)]]}else o=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},Jue=function(e){if(!(e=que(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,o=0,a=0,l=0,u=0;"M"===e[0][0]&&(a=i=+e[0][1],l=o=+e[0][2],u++,r[0]=["M",i,o]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),s=void 0,d=void 0,f=u,h=e.length;f<h;f++){if(r.push(s=[]),(t=(d=e[f])[0])!==t.toUpperCase())switch(s[0]=t.toUpperCase(),s[0]){case"A":s[1]=d[1],s[2]=d[2],s[3]=d[3],s[4]=d[4],s[5]=d[5],s[6]=+d[6]+i,s[7]=+d[7]+o;break;case"V":s[1]=+d[1]+o;break;case"H":s[1]=+d[1]+i;break;case"R":for(var p=2,v=(n=[i,o].concat(d.slice(1))).length;p<v;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(Kue(n,c));break;case"O":r.pop(),(n=Xue(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Xue(i,o,d[1],d[2],d[3])),s=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+d[1]+i,l=+d[2]+o;break;default:for(p=1,v=d.length;p<v;p++)s[p]=+d[p]+(p%2?i:o)}else if("R"===t)n=[i,o].concat(d.slice(1)),r.pop(),r=r.concat(Kue(n,c)),s=["R"].concat(d.slice(-2));else if("O"===t)r.pop(),(n=Xue(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(Xue(i,o,d[1],d[2],d[3])),s=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,m=d.length;g<m;g++)s[g]=d[g];if("O"!==(t=t.toUpperCase()))switch(s[0]){case"Z":i=+a,o=+l;break;case"H":i=s[1];break;case"V":o=s[1];break;case"M":a=s[s.length-2],l=s[s.length-1];break;default:i=s[s.length-2],o=s[s.length-1]}}return r},Zue=function(e,t,n,r){return[e,t,n,r,n,r]},Que=function(e,t,n,r,i,o){var a=1/3,l=2/3;return[a*e+l*n,a*t+l*r,a*i+l*n,a*o+l*r,i,o]},ece=function(e,t,n,r,i,o,a,l,u,c){n===r&&(n+=1);var s,d,f,h,p,v=120*Math.PI/180,g=Math.PI/180*(+i||0),m=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)d=c[0],f=c[1],h=c[2],p=c[3];else{e=(s=y(e,t,-g)).x,t=s.y,l=(s=y(l,u,-g)).x,u=s.y,e===l&&t===u&&(l+=1,u+=1);var b=(e-l)/2,w=(t-u)/2,_=b*b/(n*n)+w*w/(r*r);_>1&&(n*=_=Math.sqrt(_),r*=_);var x=n*n,k=r*r,C=(o===a?-1:1)*Math.sqrt(Math.abs((x*k-x*w*w-k*b*b)/(x*w*w+k*b*b)));h=C*n*w/r+(e+l)/2,p=C*-r*b/n+(t+u)/2,d=Math.asin(((t-p)/r).toFixed(9)),f=Math.asin(((u-p)/r).toFixed(9)),d=e<h?Math.PI-d:d,f=l<h?Math.PI-f:f,d<0&&(d=2*Math.PI+d),f<0&&(f=2*Math.PI+f),a&&d>f&&(d-=2*Math.PI),!a&&f>d&&(f-=2*Math.PI)}var S=f-d;if(Math.abs(S)>v){var O=f,E=l,I=u;f=d+v*(a&&f>d?1:-1),l=h+n*Math.cos(f),u=p+r*Math.sin(f),m=ece(l,u,n,r,i,0,a,E,I,[f,O,h,p])}S=f-d;var P=Math.cos(d),M=Math.sin(d),R=Math.cos(f),A=Math.sin(f),j=Math.tan(S/4),D=4/3*n*j,T=4/3*r*j,F=[e,t],N=[e+D*M,t-T*P],L=[l+D*A,u-T*R],B=[l,u];if(N[0]=2*F[0]-N[0],N[1]=2*F[1]-N[1],c)return[N,L,B].concat(m);for(var V=[],z=0,H=(m=[N,L,B].concat(m).join().split(",")).length;z<H;z++)V[z]=z%2?y(m[z-1],m[z],g).y:y(m[z],m[z+1],g).x;return V},tce=function(e,t){var n,r=Jue(e),i=t&&Jue(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],u=[],c="",s="",d=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(ece.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(Que(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(Que(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(Zue(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(Zue(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(Zue(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(Zue(t.x,t.y,t.X,t.Y))}return e},f=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)l[t]="A",i&&(u[t]="A"),e.splice(t++,0,["C"].concat(o.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},h=function(e,t,o,a,l){e&&t&&"M"===e[l][0]&&"M"!==t[l][0]&&(t.splice(l,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=e[l][1],o.y=e[l][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(c=r[p][0]),"C"!==c&&(l[p]=c,p&&(s=l[p-1])),r[p]=d(r[p],o,s),"A"!==l[p]&&"C"===c&&(l[p]="C"),f(r,p),i&&(i[p]&&(c=i[p][0]),"C"!==c&&(u[p]=c,p&&(s=u[p-1])),i[p]=d(i[p],a,s),"A"!==u[p]&&"C"===c&&(u[p]="C"),f(i,p)),h(r,i,o,a,p),h(i,r,a,o,p);var v=r[p],g=i&&i[p],m=v.length,y=i&&g.length;o.x=v[m-2],o.y=v[m-1],o.bx=parseFloat(v[m-4])||o.x,o.by=parseFloat(v[m-3])||o.y,a.bx=i&&(parseFloat(g[y-4])||a.x),a.by=i&&(parseFloat(g[y-3])||a.y),a.x=i&&g[y-2],a.y=i&&g[y-1]}return i?[r,i]:r},nce=/,?([a-z]),?/gi,rce=function(e){return e.join(",").replace(nce,"$1")},ice=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},oce=function(e,t,n,r,i,o,a,l,u){null===u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,s=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,h=0;h<12;h++){var p=c*s[h]+c,v=ice(p,e,n,i,a),g=ice(p,t,r,o,l),m=v*v+g*g;f+=d[h]*Math.sqrt(m)}return c*f},ace=function(e,t,n,r,i,o,a,l){for(var u,c,s,d,f=[],h=[[],[]],p=0;p<2;++p)if(0===p?(c=6*e-12*n+6*i,u=-3*e+9*n-9*i+3*a,s=3*n-3*e):(c=6*t-12*r+6*o,u=-3*t+9*r-9*o+3*l,s=3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;(d=-s/c)>0&&d<1&&f.push(d)}else{var v=c*c-4*s*u,g=Math.sqrt(v);if(!(v<0)){var m=(-c+g)/(2*u);m>0&&m<1&&f.push(m);var y=(-c-g)/(2*u);y>0&&y<1&&f.push(y)}}for(var b,w=f.length,_=w;w--;)b=1-(d=f[w]),h[0][w]=b*b*b*e+3*b*b*d*n+3*b*d*d*i+d*d*d*a,h[1][w]=b*b*b*t+3*b*b*d*r+3*b*d*d*o+d*d*d*l;return h[0][_]=e,h[1][_]=t,h[0][_+1]=a,h[1][_+1]=l,h[0].length=h[1].length=_+2,{min:{x:Math.min.apply(0,h[0]),y:Math.min.apply(0,h[1])},max:{x:Math.max.apply(0,h[0]),y:Math.max.apply(0,h[1])}}},lce=function(e,t,n,r,i,o,a,l){if(!(Math.max(e,n)<Math.min(i,a)||Math.min(e,n)>Math.max(i,a)||Math.max(t,r)<Math.min(o,l)||Math.min(t,r)>Math.max(o,l))){var u=(e-n)*(o-l)-(t-r)*(i-a);if(u){var c=((e*r-t*n)*(i-a)-(e-n)*(i*l-o*a))/u,s=((e*r-t*n)*(o-l)-(t-r)*(i*l-o*a))/u,d=+c.toFixed(2),f=+s.toFixed(2);if(!(d<+Math.min(e,n).toFixed(2)||d>+Math.max(e,n).toFixed(2)||d<+Math.min(i,a).toFixed(2)||d>+Math.max(i,a).toFixed(2)||f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(o,l).toFixed(2)||f>+Math.max(o,l).toFixed(2)))return{x:c,y:s}}}},uce=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},cce=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=rce,o},sce=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:cce(e,t,n,r),vb:[e,t,n,r].join(" ")}},dce=function(e,t,n,r,i,o,a,l){Vae(e)||(e=[e,t,n,r,i,o,a,l]);var u=ace.apply(null,e);return sce(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},fce=function(e,t,n,r,i,o,a,l,u){var c=1-u,s=Math.pow(c,3),d=Math.pow(c,2),f=u*u,h=f*u,p=e+2*u*(n-e)+f*(i-2*n+e),v=t+2*u*(r-t)+f*(o-2*r+t),g=n+2*u*(i-n)+f*(a-2*i+n),m=r+2*u*(o-r)+f*(l-2*o+r);return{x:s*e+3*d*u*n+3*c*u*u*i+h*a,y:s*t+3*d*u*r+3*c*u*u*o+h*l,m:{x:p,y:v},n:{x:g,y:m},start:{x:c*e+u*n,y:c*t+u*r},end:{x:c*i+u*a,y:c*o+u*l},alpha:90-180*Math.atan2(p-g,v-m)/Math.PI}},hce=function(e,t,n){if(!function(e,t){return e=sce(e),t=sce(t),uce(t,e.x,e.y)||uce(t,e.x2,e.y)||uce(t,e.x,e.y2)||uce(t,e.x2,e.y2)||uce(e,t.x,t.y)||uce(e,t.x2,t.y)||uce(e,t.x,t.y2)||uce(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(dce(e),dce(t)))return n?0:[];for(var r=~~(oce.apply(0,e)/8),i=~~(oce.apply(0,t)/8),o=[],a=[],l={},u=n?0:[],c=0;c<r+1;c++){var s=fce.apply(0,e.concat(c/r));o.push({x:s.x,y:s.y,t:c/r})}for(c=0;c<i+1;c++){s=fce.apply(0,t.concat(c/i));a.push({x:s.x,y:s.y,t:c/i})}for(c=0;c<r;c++)for(var d=0;d<i;d++){var f=o[c],h=o[c+1],p=a[d],v=a[d+1],g=Math.abs(h.x-f.x)<.001?"y":"x",m=Math.abs(v.x-p.x)<.001?"y":"x",y=lce(f.x,f.y,h.x,h.y,p.x,p.y,v.x,v.y);if(y){if(l[y.x.toFixed(4)]===y.y.toFixed(4))continue;l[y.x.toFixed(4)]=y.y.toFixed(4);var b=f.t+Math.abs((y[g]-f[g])/(h[g]-f[g]))*(h.t-f.t),w=p.t+Math.abs((y[m]-p[m])/(v[m]-p[m]))*(v.t-p.t);b>=0&&b<=1&&w>=0&&w<=1&&(n?u+=1:u.push({x:y.x,y:y.y,t1:b,t2:w}))}}return u};function pce(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var o=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),o[a]=[(1-i)*t[a][0]+i*t[a+1][0],(1-i)*t[a][1]+i*t[a+1][1]];e(o,i)}}(e,t),{left:n,right:r.reverse()}}var vce=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var o=r,a=1/n,l=0;l<n-1;l++){var u=pce(o,a/(1-a*l));i.push(u.left),o=u.right}return i.push(o),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},gce=function(e,t){if(e.length!==t.length)return!1;var n=!0;return Hae(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function mce(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var yce=function(e,t){var n=function(e,t){var n,r,i=e.length,o=t.length,a=0;if(0===i||0===o)return null;for(var l=[],u=0;u<=i;u++)l[u]=[],l[u][0]={min:u};for(var c=0;c<=o;c++)l[0][c]={min:c};for(u=1;u<=i;u++)for(n=e[u-1],c=1;c<=o;c++){r=t[c-1],a=gce(n,r)?0:1;var s=l[u-1][c].min+1,d=l[u][c-1].min+1,f=l[u-1][c-1].min+a;l[u][c]=mce(s,d,f)}return l}(e,t),r=e.length,i=t.length,o=[],a=1,l=1;if(n[r][i].min!==r){for(var u=1;u<=r;u++){var c=n[u][u].min;l=u;for(var s=a;s<=i;s++)n[u][s].min<c&&(c=n[u][s].min,l=s);a=l,n[u][a].type&&o.push({index:u-1,type:n[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var d=i-(r=e.length);if(r<i)for(u=0;u<d;u++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function bce(e,t,n){for(var r,i=[].concat(e),o=1/(n+1),a=wce(t)[0],l=1;l<=n;l++)o*=l,0===(r=Math.floor(e.length*o))?i.unshift([a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]);return i}function wce(e){var t=[];switch(e[0]){case"M":case"L":case"T":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var _ce=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=wce(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=bce(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=bce(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=bce(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e};const xce=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:Kue,fillPath:function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,o=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<r-n;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var l=Math.floor(i*a);o[l]=(o[l]||0)+1}var u=o.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(vce(e[i],e[i+1],r))}),[]);return u.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||u.push("Z"),u},fillPathByDiff:yce,formatPath:_ce,intersection:function(e,t){return function(e,t,n){var r,i,o,a,l,u,c,s,d,f;e=tce(e),t=tce(t);for(var h=n?0:[],p=0,v=e.length;p<v;p++){var g=e[p];if("M"===g[0])r=l=g[1],i=u=g[2];else{"C"===g[0]?(d=[r,i].concat(g.slice(1)),r=d[6],i=d[7]):(d=[r,i,r,i,l,u,l,u],r=l,i=u);for(var m=0,y=t.length;m<y;m++){var b=t[m];if("M"===b[0])o=c=b[1],a=s=b[2];else{"C"===b[0]?(f=[o,a].concat(b.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,c,s,c,s],o=c,a=s);var w=hce(d,f,n);if(n)h+=w;else{for(var _=0,x=w.length;_<x;_++)w[_].segment1=p,w[_].segment2=m,w[_].bez1=d,w[_].bez2=f;h=h.concat(w)}}}}}return h}(e,t)},parsePathArray:rce,parsePathString:que,pathToAbsolute:Jue,pathToCurve:tce,rectPath:cce},Symbol.toStringTag,{value:"Module"}));var kce=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function Cce(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var Sce="undefined"!=typeof window&&void 0!==window.document;function Oce(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function Ece(e){return e.cfg.visible&&e.cfg.capture}var Ice=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=Nle(r,t),n}return Cae(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(Wue),Pce=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Mce=function(){return function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}}(),Rce=function(){return function(e){this.version=e,this.type="node",this.name="node",this.os=ar.platform}}(),Ace=function(){return function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"}}(),jce=function(){return function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}(),Dce=function(){return function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}(),Tce=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Fce=3,Nce=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Lce=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bce(e){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Dce:"undefined"!=typeof navigator?function(e){var t=function(e){return""!==e&&Nce.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new jce;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Fce&&(i=Pce(Pce([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(Fce-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=Lce.length;t<n;t++){var r=Lce[t],i=r[0];if(r[1].exec(e))return i}return null}(e),l=Tce.exec(e);if(l&&l[1])return new Ace(n,o,a,l[1]);return new Mce(n,o,a)}(navigator.userAgent):void 0!==ar&&ar.version?new Rce(ar.version.slice(1)):null}var Vce,zce="undefined"!=typeof Float32Array?Float32Array:Array;function Hce(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5],c=t[6],s=t[7],d=t[8],f=n[0],h=n[1],p=n[2],v=n[3],g=n[4],m=n[5],y=n[6],b=n[7],w=n[8];return e[0]=f*r+h*a+p*c,e[1]=f*i+h*l+p*s,e[2]=f*o+h*u+p*d,e[3]=v*r+g*a+m*c,e[4]=v*i+g*l+m*s,e[5]=v*o+g*u+m*d,e[6]=y*r+b*a+w*c,e[7]=y*i+b*l+w*s,e[8]=y*o+b*u+w*d,e}function Wce(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function Uce(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Gce(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Yce(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function $ce(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function qce(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Kce(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Xce(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function Jce(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Zce(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),l=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(l,-1),1))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),Vce=new zce(3),zce!=Float32Array&&(Vce[0]=0,Vce[1]=0,Vce[2]=0);var Qce=Gce;function ese(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(r,n),Hce(e,r,t)}function tse(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Hce(e,r,t)}function nse(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(r,n),Hce(e,r,t)}function rse(e,t,n){return Hce(e,n,t)}function ise(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":ese(n,n,[o[1],o[2]]);break;case"s":nse(n,n,[o[1],o[2]]);break;case"r":tse(n,n,o[1]);break;case"m":rse(n,n,o[1])}}return n}function ose(e,t,n){var r=Zce(e,t),i=function(e,t){return e[0]*t[1]-t[0]*e[1]}(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function ase(e,t){var n=[],r=e[0],i=e[1],o=e[2],a=e[3],l=e[4],u=e[5],c=e[6],s=e[7],d=e[8],f=t[0],h=t[1],p=t[2],v=t[3],g=t[4],m=t[5],y=t[6],b=t[7],w=t[8];return n[0]=f*r+h*a+p*c,n[1]=f*i+h*l+p*s,n[2]=f*o+h*u+p*d,n[3]=v*r+g*a+m*c,n[4]=v*i+g*l+m*s,n[5]=v*o+g*u+m*d,n[6]=y*r+b*a+w*c,n[7]=y*i+b*l+w*s,n[8]=y*o+b*u+w*d,n}function lse(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function use(e){var t=[],n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],s=e[8],d=s*a-l*c,f=-s*o+l*u,h=c*o-a*u,p=n*d+r*f+i*h;return p?(p=1/p,t[0]=d*p,t[1]=(-s*r+i*c)*p,t[2]=(l*r-i*a)*p,t[3]=f*p,t[4]=(s*n-i*u)*p,t[5]=(-l*n+i*o)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}!function(){var e=function(){var e=new zce(2);return zce!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var cse=ise,sse="matrix",dse=["zIndex","capture","visible","type"],fse=["repeat"];function hse(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}var pse=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return Nle(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Cae(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(zae(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(Cce(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(sse,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(sse)},t.prototype.setMatrix=function(e){this.attr(sse,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?ase(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?ase(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?lse(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=use(t);if(n)return lse(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[Ole(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};Hae(t,(function(e,r){Vae(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)Vae(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return Hae(dse,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,l,u,c=e[0],s=e[1],d=e[2],f=void 0===d?"easeLinear":d,h=e[3],p=void 0===h?iue:h,v=e[4],g=void 0===v?0:v;Lae(c)?(i=c,c={}):zae(c)&&c.onFrame&&(i=c.onFrame,o=c.repeat),zae(s)?(s=(u=s).duration,f=u.easing||"easeLinear",g=u.delay||0,o=u.repeat||o||!1,p=u.callback||iue,a=u.pauseCallback||iue,l=u.resumeCallback||iue):(ple(p)&&(g=p,p=null),Lae(f)?(p=f,f="easeLinear"):f=f||"easeLinear");var m=function(e,t){var n={},r=t.attr();return Hae(e,(function(e,t){-1!==fse.indexOf(t)||Yle(r[t],e)||(n[t]=e)})),n}(c,this),y={fromAttrs:hse(m,this),toAttrs:m,duration:s,easing:f,repeat:o,callback:p,pauseCallback:a,resumeCallback:l,delay:g,startTime:n.getTime(),id:rue(),onFrame:i,pathFormatted:!1};r.length>0?r=function(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,o=Object.prototype.hasOwnProperty;return Hae(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&Hae(t.toAttrs,(function(t,n){o.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),Hae(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return Hae(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return Hae(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var o=function(e){var o=i[e],l=o.get("name");if(l){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&Oce(o,n))return"break";Vae(l)?Hae(l,(function(e){r.emitDelegateEvent(o,e,t)})):a.emitDelegateEvent(o,l,t)}},a=this,l=0;l<i.length;l++){if("break"===o(l))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=cse(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=cse(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=cse(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),o=cse(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(o),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=cse(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(Ice),vse={},gse="_INDEX";function mse(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){mse(e,t)}))}}function yse(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){yse(e,t)}))}}var bse,wse,_se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return i.length>0?Hae(i,(function(i){var o=i.getBBox(),a=o.minX,l=o.maxX,u=o.minY,c=o.maxY;a<e&&(e=a),l>t&&(t=l),u<n&&(n=u),c>r&&(r=c)})):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return i.length>0?Hae(i,(function(i){var o=i.getCanvasBBox(),a=o.minX,l=o.maxX,u=o.minY,c=o.maxY;a<e&&(e=a),l>t&&(t=l),u<n&&(n=u),c>r&&(r=c)})):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){Hae(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];zae(n)?r=n:r.type=n;var i=vse[r.type];i||(i=Ole(r.type),vse[r.type]=i);var o=new(this.getShapeBase()[i])(r);return this.add(o),o},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(Lae(r))n=new r(i||{parent:this});else{var o=r||{};n=new(this.getGroupBase())(o)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!Ece(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var o=[e,t,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,o=e.length-1;o>=0;o--){var a=e[o];if(Ece(a)&&(a.isGroup()?i=a.getShape(t,n,r):a.isHit(t,n)&&(i=a)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){t.set("parent",null),t.set("canvas",null),Cce(e.getChildren(),t)}(i,e),e.set("parent",this),t&&mse(e,t),r&&yse(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")||[]},t.prototype.sort=function(){var e,t=this.getChildren();Hae(t,(function(e,t){return e[gse]=t,e})),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,n){var r=e(t,n);return 0===r?t[gse]-n[gse]:r})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return Hae(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return Hae(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(pse),xse=0,kse=0,Cse=0,Sse=1e3,Ose=0,Ese=0,Ise=0,Pse="object"===("undefined"==typeof performance?"undefined":lr(performance))&&performance.now?performance:Date,Mse="object"===("undefined"==typeof window?"undefined":lr(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rse(){return Ese||(Mse(Ase),Ese=Pse.now()+Ise)}function Ase(){Ese=0}function jse(){this._call=this._time=this._next=null}function Dse(e,t,n){var r=new jse;return r.restart(e,t,n),r}function Tse(){Ese=(Ose=Pse.now())+Ise,xse=kse=0;try{!function(){Rse(),++xse;for(var e,t=bse;t;)(e=Ese-t._time)>=0&&t._call.call(null,e),t=t._next;--xse}()}finally{xse=0,function(){var e,t,n=bse,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:bse=t);wse=e,Nse(r)}(),Ese=0}}function Fse(){var e=Pse.now(),t=e-Ose;t>Sse&&(Ise-=t,Ose=e)}function Nse(e){xse||(kse&&(kse=clearTimeout(kse)),e-Ese>24?(e<1/0&&(kse=setTimeout(Tse,e-Pse.now()-Ise)),Cse&&(Cse=clearInterval(Cse))):(Cse||(Ose=Pse.now(),Cse=setInterval(Fse,Sse)),xse=1,Mse(Tse)))}function Lse(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bse(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vse(){}jse.prototype=Dse.prototype={constructor:jse,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Rse():+n)+(null==t?0:+t),this._next||wse===this||(wse?wse._next=this:bse=this,wse=this),this._call=e,this._time=n,Nse()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nse())}};var zse=.7,Hse=1/zse,Wse="\\s*([+-]?\\d+)\\s*",Use="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gse="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yse=/^#([0-9a-f]{3,8})$/,$se=new RegExp("^rgb\\(".concat(Wse,",").concat(Wse,",").concat(Wse,"\\)$")),qse=new RegExp("^rgb\\(".concat(Gse,",").concat(Gse,",").concat(Gse,"\\)$")),Kse=new RegExp("^rgba\\(".concat(Wse,",").concat(Wse,",").concat(Wse,",").concat(Use,"\\)$")),Xse=new RegExp("^rgba\\(".concat(Gse,",").concat(Gse,",").concat(Gse,",").concat(Use,"\\)$")),Jse=new RegExp("^hsl\\(".concat(Use,",").concat(Gse,",").concat(Gse,"\\)$")),Zse=new RegExp("^hsla\\(".concat(Use,",").concat(Gse,",").concat(Gse,",").concat(Use,"\\)$")),Qse={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ede(){return this.rgb().formatHex()}function tde(){return this.rgb().formatRgb()}function nde(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Yse.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rde(t):3===n?new ade(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ide(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ide(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=$se.exec(e))?new ade(t[1],t[2],t[3],1):(t=qse.exec(e))?new ade(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kse.exec(e))?ide(t[1],t[2],t[3],t[4]):(t=Xse.exec(e))?ide(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Jse.exec(e))?fde(t[1],t[2]/100,t[3]/100,1):(t=Zse.exec(e))?fde(t[1],t[2]/100,t[3]/100,t[4]):Qse.hasOwnProperty(e)?rde(Qse[e]):"transparent"===e?new ade(NaN,NaN,NaN,0):null}function rde(e){return new ade(e>>16&255,e>>8&255,255&e,1)}function ide(e,t,n,r){return r<=0&&(e=t=n=NaN),new ade(e,t,n,r)}function ode(e,t,n,r){return 1===arguments.length?((i=e)instanceof Vse||(i=nde(i)),i?new ade((i=i.rgb()).r,i.g,i.b,i.opacity):new ade):new ade(e,t,n,null==r?1:r);var i}function ade(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function lde(){return"#".concat(dde(this.r)).concat(dde(this.g)).concat(dde(this.b))}function ude(){var e=cde(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(sde(this.r),", ").concat(sde(this.g),", ").concat(sde(this.b)).concat(1===e?")":", ".concat(e,")"))}function cde(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sde(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dde(e){return((e=sde(e))<16?"0":"")+e.toString(16)}function fde(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pde(e,t,n,r)}function hde(e){if(e instanceof pde)return new pde(e.h,e.s,e.l,e.opacity);if(e instanceof Vse||(e=nde(e)),!e)return new pde;if(e instanceof pde)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,u=(o+i)/2;return l?(a=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=u<.5?o+i:2-o-i,a*=60):l=u>0&&u<1?0:a,new pde(a,l,u,e.opacity)}function pde(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function vde(e){return(e=(e||0)%360)<0?e+360:e}function gde(e){return Math.max(0,Math.min(1,e||0))}function mde(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Lse(Vse,nde,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ede,formatHex:ede,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hde(this).formatHsl()},formatRgb:tde,toString:tde}),Lse(ade,ode,Bse(Vse,{brighter:function(e){return e=null==e?Hse:Math.pow(Hse,e),new ade(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?zse:Math.pow(zse,e),new ade(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new ade(sde(this.r),sde(this.g),sde(this.b),cde(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lde,formatHex:lde,formatHex8:function(){return"#".concat(dde(this.r)).concat(dde(this.g)).concat(dde(this.b)).concat(dde(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:ude,toString:ude})),Lse(pde,(function(e,t,n,r){return 1===arguments.length?hde(e):new pde(e,t,n,null==r?1:r)}),Bse(Vse,{brighter:function(e){return e=null==e?Hse:Math.pow(Hse,e),new pde(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?zse:Math.pow(zse,e),new pde(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ade(mde(e>=240?e-240:e+120,i,r),mde(e,i,r),mde(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new pde(vde(this.h),gde(this.s),gde(this.l),cde(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=cde(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(vde(this.h),", ").concat(100*gde(this.s),"%, ").concat(100*gde(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const yde=function(e){return function(){return e}};function bde(e){return 1==(e=+e)?wde:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):yde(isNaN(t)?n:t)}}function wde(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):yde(isNaN(e)?t:e)}const _de=function e(t){var n=bde(t);function r(e,t){var r=n((e=ode(e)).r,(t=ode(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=wde(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function xde(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function kde(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cde(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Rde(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Sde(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ode(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ede(e,t){var n,r={},i={};for(n in null!==e&&"object"===lr(e)||(e={}),null!==t&&"object"===lr(t)||(t={}),t)n in e?r[n]=Rde(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Ide=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pde=new RegExp(Ide.source,"g");function Mde(e,t){var n,r,i,o=Ide.lastIndex=Pde.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Ide.exec(e))&&(r=Pde.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,u.push({i:a,x:Ode(n,r)})),o=Pde.lastIndex;return o<t.length&&(i=t.slice(o),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)l[(n=u[r]).i]=n.x(e);return l.join("")})}function Rde(e,t){var n,r=lr(t);return null==t||"boolean"===r?yde(t):("number"===r?Ode:"string"===r?(n=nde(t))?(t=n,_de):Mde:t instanceof nde?_de:t instanceof Date?Sde:kde(t)?xde:Array.isArray(t)?Cde:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ede:Ode)(e,t)}function Ade(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function jde(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dde=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Tde=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Fde=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Nde=Math.PI,Lde=Nde/2;function Bde(e){return(1-Math.cos(Nde*e))/2}function Vde(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function zde(e){return((e*=2)<=1?Vde(1-e):2-Vde(e-1))/2}function Hde(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Wde=4/11,Ude=6/11,Gde=8/11,Yde=3/4,$de=9/11,qde=10/11,Kde=15/16,Xde=21/22,Jde=63/64,Zde=1/Wde/Wde;function Qde(e){return(e=+e)<Wde?Zde*e*e:e<Gde?Zde*(e-=Ude)*e+Yde:e<qde?Zde*(e-=$de)*e+Kde:Zde*(e-=Xde)*e+Jde}var efe=1.70158,tfe=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(efe),nfe=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(efe),rfe=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(efe),ife=2*Math.PI,ofe=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ife);function i(e){return t*Vde(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*ife)},i.period=function(n){return e(t,n)},i}(1,.3),afe=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ife);function i(e){return 1-t*Vde(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*ife)},i.period=function(n){return e(t,n)},i}(1,.3),lfe=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ife);function i(e){return((e=2*e-1)<0?t*Vde(-e)*Math.sin((r-e)/n):2-t*Vde(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*ife)},i.period=function(n){return e(t,n)},i}(1,.3);const ufe=Object.freeze(Object.defineProperty({__proto__:null,easeBack:rfe,easeBackIn:tfe,easeBackInOut:rfe,easeBackOut:nfe,easeBounce:Qde,easeBounceIn:function(e){return 1-Qde(1-e)},easeBounceInOut:function(e){return((e*=2)<=1?1-Qde(1-e):Qde(e-1)+1)/2},easeBounceOut:Qde,easeCircle:Hde,easeCircleIn:function(e){return 1-Math.sqrt(1-e*e)},easeCircleInOut:Hde,easeCircleOut:function(e){return Math.sqrt(1- --e*e)},easeCubic:jde,easeCubicIn:function(e){return e*e*e},easeCubicInOut:jde,easeCubicOut:function(e){return--e*e*e+1},easeElastic:afe,easeElasticIn:ofe,easeElasticInOut:lfe,easeElasticOut:afe,easeExp:zde,easeExpIn:function(e){return Vde(1-+e)},easeExpInOut:zde,easeExpOut:function(e){return 1-Vde(e)},easeLinear:function(e){return+e},easePoly:Fde,easePolyIn:Dde,easePolyInOut:Fde,easePolyOut:Tde,easeQuad:Ade,easeQuadIn:function(e){return e*e},easeQuadInOut:Ade,easeQuadOut:function(e){return e*(2-e)},easeSin:Bde,easeSinIn:function(e){return 1==+e?1:1-Math.cos(e*Lde)},easeSinInOut:Bde,easeSinOut:function(e){return Math.sin(e*Lde)}},Symbol.toStringTag,{value:"Module"}));var cfe={};function sfe(e,t){cfe[e.toLowerCase()]=t}var dfe=function(e){return["fill","stroke","fillStyle","strokeStyle"].includes(e)},ffe=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)},hfe=[1,0,0,0,1,0,0,0,1];function pfe(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var o,a=t.duration,l=t.easing,u=cfe[(o=l).toLowerCase()]||ufe[o];if(n=n-i-t.delay,t.repeat)r=u(r=n%a/a);else{if(!((r=n/a)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=u(r)}if(t.onFrame){var c=t.onFrame(r);e.attr(c)}else!function(e,t,n){var r={},i=t.fromAttrs,o=t.toAttrs;if(!e.destroyed){var a,l,u;for(var c in o)if(!Yle(i[c],o[c]))if("path"===c){var s=o[c],d=i[c];s.length>d.length?(s=que(o[c]),d=que(i[c]),d=yce(d,s),d=_ce(d,s),t.fromAttrs.path=d,t.toAttrs.path=s):t.pathFormatted||(s=que(o[c]),d=que(i[c]),d=_ce(d,s),t.fromAttrs.path=d,t.toAttrs.path=s,t.pathFormatted=!0),r[c]=[];for(var f=0;f<s.length;f++){for(var h=s[f],p=d[f],v=[],g=0;g<h.length;g++)ple(h[g])&&p&&ple(p[g])?(a=Rde(p[g],h[g]),v.push(a(n))):v.push(h[g]);r[c].push(v)}}else if("matrix"===c){var m=(l=i[c]||hfe,(kde(u=o[c]||hfe)?xde:Cde)(l,u))(n);r[c]=m}else dfe(c)&&ffe(o[c])?r[c]=o[c]:Lae(o[c])||(a=Rde(i[c],o[c]),r[c]=a(n));e.attr(r)}}(e,t,r);return!1}var vfe=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=Dse((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((e=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)n=t[a],pfe(e,n,i)&&(t.splice(a,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),gfe=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function mfe(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function yfe(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&Oce(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var bfe=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");Hae(gfe,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");Hae(gfe,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,o){var a=new kce(e,t);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],o=!1;if(i)i.call(this,n,r,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(o=!0,a&&this._emitEvent(e,t,n,a,a,null),this._emitEvent(e,t,n,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var l=this.canvas;l.get("el").style.cursor=r.attr("cursor")||l.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,o);else{var a=this.mousedownPoint;if(a){var l=this.mousedownShape,u=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-e.clientX,s=a.clientY-e.clientY;u>120||c*c+s*s>40?l&&l.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!l&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,o){var a=this._getEventObj(e,t,n,r,i,o);if(r){a.shape=r,mfe(r,e,a);for(var l=r.getParent();l;)l.emitDelegation(e,a),a.propagationStopped||yfe(l,e,a),a.propagationPath.push(l),l=l.getParent()}else{mfe(this.canvas,e,a)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),wfe=Bce(),_fe=wfe&&"firefox"===wfe.name,xfe=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");nle(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new bfe({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new vfe(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");Sce&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");Sce&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(_fe&&!Bae(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!Bae(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(_se),kfe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(_se),Cfe=function(e){function t(t){return e.call(this,t)||this}return Cae(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;if(t){var a=lse(t,[e.minX,e.minY]),l=lse(t,[e.maxX,e.minY]),u=lse(t,[e.minX,e.maxY]),c=lse(t,[e.maxX,e.maxY]);n=Math.min(a[0],l[0],u[0],c[0]),i=Math.max(a[0],l[0],u[0],c[0]),r=Math.min(a[1],l[1],u[1],c[1]),o=Math.max(a[1],l[1],u[1],c[1])}var s=this.attrs;if(s.shadowColor){var d=s.shadowBlur,f=void 0===d?0:d,h=s.shadowOffsetX,p=void 0===h?0:h,v=s.shadowOffsetY,g=void 0===v?0:v,m=n-f+p,y=i+f+p,b=r-f+g,w=o+f+g;n=Math.min(n,m),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,w)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],l=this._isInBBox(o,a);if(this.isOnlyHitBox())return l;if(l&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},t}(pse),Sfe=new Map;function Ofe(e,t){Sfe.set(e,t)}function Efe(e){return Sfe.get(e)}function Ife(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Pfe(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Mfe(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function Rfe(e,t){return Math.abs(e-t)<.001}function Afe(e,t){var n=Jae(e),r=Jae(t);return{x:n,y:r,width:Xae(e)-n,height:Xae(t)-r}}function jfe(e){return(e+2*Math.PI)%(2*Math.PI)}const Dfe={box:function(e,t,n,r){return Afe([e,n],[t,r])},length:function(e,t,n,r){return Mfe(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,o){var a=(n-e)*(i-e)+(r-t)*(o-t);return a<0?Mfe(e,t,i,o):a>(n-e)*(n-e)+(r-t)*(r-t)?Mfe(n,r,i,o):this.pointToLine(e,t,n,r,i,o)},pointToLine:function(e,t,n,r,i,o){var a=[n-e,r-t];if(function(e,t){return e[0]===t[0]&&e[1]===t[1]}(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));var l=[-a[1],a[0]];Jce(l,l);var u=[i-e,o-t];return Math.abs(function(e,t){return e[0]*t[0]+e[1]*t[1]}(u,l))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function Tfe(e,t,n,r,i,o){var a,l=1/0,u=[n,r],c=20;o&&o>200&&(c=o/10);for(var s=1/c,d=s/10,f=0;f<=c;f++){var h=f*s,p=[i.apply(null,e.concat([h])),i.apply(null,t.concat([h]))];(y=Mfe(u[0],u[1],p[0],p[1]))<l&&(a=h,l=y)}if(0===a)return{x:e[0],y:t[0]};if(1===a){var v=e.length;return{x:e[v-1],y:t[v-1]}}l=1/0;for(f=0;f<32&&!(d<1e-4);f++){var g=a-d,m=a+d,y=(p=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],Mfe(u[0],u[1],p[0],p[1]));if(g>=0&&y<l)a=g,l=y;else{var b=[i.apply(null,e.concat([m])),i.apply(null,t.concat([m]))],w=Mfe(u[0],u[1],b[0],b[1]);m<=1&&w<l?(a=m,l=w):d*=.5}}return{x:i.apply(null,e.concat([a])),y:i.apply(null,t.concat([a]))}}function Ffe(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Nfe(e,t,n){var r=e+n-2*t;if(Rfe(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function Lfe(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function Bfe(e,t,n,r,i,o,a){var l=Ffe(e,n,i,a),u=Ffe(t,r,o,a),c=Dfe.pointAt(e,t,n,r,a),s=Dfe.pointAt(n,r,i,o,a);return[[e,t,c.x,c.y,l,u],[l,u,s.x,s.y,i,o]]}function Vfe(e,t,n,r,i,o,a){if(0===a)return(Mfe(e,t,n,r)+Mfe(n,r,i,o)+Mfe(e,t,i,o))/2;var l=Bfe(e,t,n,r,i,o,.5),u=l[0],c=l[1];return u.push(a-1),c.push(a-1),Vfe.apply(null,u)+Vfe.apply(null,c)}const zfe={box:function(e,t,n,r,i,o){var a=Nfe(e,n,i)[0],l=Nfe(t,r,o)[0],u=[e,i],c=[t,o];return void 0!==a&&u.push(Ffe(e,n,i,a)),void 0!==l&&c.push(Ffe(t,r,o,l)),Afe(u,c)},length:function(e,t,n,r,i,o){return Vfe(e,t,n,r,i,o,3)},nearestPoint:function(e,t,n,r,i,o,a,l){return Tfe([e,n,i],[t,r,o],a,l,Ffe)},pointDistance:function(e,t,n,r,i,o,a,l){var u=this.nearestPoint(e,t,n,r,i,o,a,l);return Mfe(u.x,u.y,a,l)},interpolationAt:Ffe,pointAt:function(e,t,n,r,i,o,a){return{x:Ffe(e,n,i,a),y:Ffe(t,r,o,a)}},divide:function(e,t,n,r,i,o,a){return Bfe(e,t,n,r,i,o,a)},tangentAngle:function(e,t,n,r,i,o,a){var l=Lfe(e,n,i,a),u=Lfe(t,r,o,a);return jfe(Math.atan2(u,l))}};function Hfe(e,t,n,r,i){var o=1-i;return o*o*o*e+3*t*i*o*o+3*n*i*i*o+r*i*i*i}function Wfe(e,t,n,r,i){var o=1-i;return 3*(o*o*(t-e)+2*o*i*(n-t)+i*i*(r-n))}function Ufe(e,t,n,r){var i,o,a,l=-3*e+9*t-9*n+3*r,u=6*e-12*t+6*n,c=3*t-3*e,s=[];if(Rfe(l,0))Rfe(u,0)||(i=-c/u)>=0&&i<=1&&s.push(i);else{var d=u*u-4*l*c;Rfe(d,0)?s.push(-u/(2*l)):d>0&&(o=(-u-(a=Math.sqrt(d)))/(2*l),(i=(-u+a)/(2*l))>=0&&i<=1&&s.push(i),o>=0&&o<=1&&s.push(o))}return s}function Gfe(e,t,n,r,i,o,a,l,u){var c=Hfe(e,n,i,a,u),s=Hfe(t,r,o,l,u),d=Dfe.pointAt(e,t,n,r,u),f=Dfe.pointAt(n,r,i,o,u),h=Dfe.pointAt(i,o,a,l,u),p=Dfe.pointAt(d.x,d.y,f.x,f.y,u),v=Dfe.pointAt(f.x,f.y,h.x,h.y,u);return[[e,t,d.x,d.y,p.x,p.y,c,s],[c,s,v.x,v.y,h.x,h.y,a,l]]}function Yfe(e,t,n,r,i,o,a,l,u){if(0===u)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=Mfe(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,a],[t,r,o,l]);var c=Gfe(e,t,n,r,i,o,a,l,.5),s=c[0],d=c[1];return s.push(u-1),d.push(u-1),Yfe.apply(null,s)+Yfe.apply(null,d)}const $fe={extrema:Ufe,box:function(e,t,n,r,i,o,a,l){for(var u=[e,a],c=[t,l],s=Ufe(e,n,i,a),d=Ufe(t,r,o,l),f=0;f<s.length;f++)u.push(Hfe(e,n,i,a,s[f]));for(f=0;f<d.length;f++)c.push(Hfe(t,r,o,l,d[f]));return Afe(u,c)},length:function(e,t,n,r,i,o,a,l){return Yfe(e,t,n,r,i,o,a,l,3)},nearestPoint:function(e,t,n,r,i,o,a,l,u,c,s){return Tfe([e,n,i,a],[t,r,o,l],u,c,Hfe,s)},pointDistance:function(e,t,n,r,i,o,a,l,u,c,s){var d=this.nearestPoint(e,t,n,r,i,o,a,l,u,c,s);return Mfe(d.x,d.y,u,c)},interpolationAt:Hfe,pointAt:function(e,t,n,r,i,o,a,l,u){return{x:Hfe(e,n,i,a,u),y:Hfe(t,r,o,l,u)}},divide:function(e,t,n,r,i,o,a,l,u){return Gfe(e,t,n,r,i,o,a,l,u)},tangentAngle:function(e,t,n,r,i,o,a,l,u){var c=Wfe(e,n,i,a,u),s=Wfe(t,r,o,l,u);return jfe(Math.atan2(s,c))}};function qfe(e,t){var n=Math.abs(e);return t>0?n:-1*n}const Kfe=function(e,t,n,r,i,o){var a=n,l=r;if(0===a||0===l)return{x:e,y:t};for(var u,c,s=i-e,d=o-t,f=Math.abs(s),h=Math.abs(d),p=a*a,v=l*l,g=Math.PI/4,m=0;m<4;m++){u=a*Math.cos(g),c=l*Math.sin(g);var y=(p-v)*Math.pow(Math.cos(g),3)/a,b=(v-p)*Math.pow(Math.sin(g),3)/l,w=u-y,_=c-b,x=f-y,k=h-b,C=Math.hypot(_,w),S=Math.hypot(k,x);g+=C*Math.asin((w*k-_*x)/(C*S))/Math.sqrt(p+v-u*u-c*c),g=Math.min(Math.PI/2,Math.max(0,g))}return{x:e+qfe(u,s),y:t+qfe(c,d)}};function Xfe(e,t,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+e}function Jfe(e,t,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+t}function Zfe(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function Qfe(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}const ehe={box:function(e,t,n,r,i,o,a){for(var l=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),u=1/0,c=-1/0,s=[o,a],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var f=l+d;o<a?o<f&&f<a&&s.push(f):a<f&&f<o&&s.push(f)}for(d=0;d<s.length;d++){var h=Xfe(e,0,n,r,i,s[d]);h<u&&(u=h),h>c&&(c=h)}var p=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,m=[o,a];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var y=p+d;o<a?o<y&&y<a&&m.push(y):a<y&&y<o&&m.push(y)}for(d=0;d<m.length;d++){var b=Jfe(0,t,n,r,i,m[d]);b<v&&(v=b),b>g&&(g=b)}return{x:u,y:v,width:c-u,height:g-v}},length:function(e,t,n,r,i,o,a){},nearestPoint:function(e,t,n,r,i,o,a,l,u){var c=Qfe(l-e,u-t,-i),s=c[0],d=c[1],f=Kfe(0,0,n,r,s,d),h=function(e,t,n,r){return(Math.atan2(r*e,n*t)+2*Math.PI)%(2*Math.PI)}(n,r,f.x,f.y);h<o?f=Zfe(n,r,o):h>a&&(f=Zfe(n,r,a));var p=Qfe(f.x,f.y,i);return{x:p[0]+e,y:p[1]+t}},pointDistance:function(e,t,n,r,i,o,a,l,u){var c=this.nearestPoint(e,t,n,r,l,u);return Mfe(c.x,c.y,l,u)},pointAt:function(e,t,n,r,i,o,a,l){var u=(a-o)*l+o;return{x:Xfe(e,0,n,r,i,u),y:Jfe(0,t,n,r,i,u)}},tangentAngle:function(e,t,n,r,i,o,a,l){var u=(a-o)*l+o,c=function(e,t,n,r,i,o,a,l){return-1*n*Math.cos(i)*Math.sin(l)-r*Math.sin(i)*Math.cos(l)}(0,0,n,r,i,0,0,u),s=function(e,t,n,r,i,o,a,l){return-1*n*Math.sin(i)*Math.sin(l)+r*Math.cos(i)*Math.cos(l)}(0,0,n,r,i,0,0,u);return jfe(Math.atan2(s,c))}};const the=function(e){return function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Mfe(r[0],r[1],i[0],i[1])}return t}(e)};function nhe(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function rhe(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=nhe(t,n.getCanvasBBox())),r&&(t=nhe(t,r.getCanvasBBox())),t}var ihe=null;function ohe(){if(!ihe){var e=document.createElement("canvas");e.width=1,e.height=1,ihe=e.getContext("2d")}return ihe}function ahe(e,t,n){var r=1;if(nle(e)&&(r=e.split("\n").length),r>1){var i=function(e,t){return t?t-e:.14*e}(t,n);return t*r+i*(r-1)}return t}function lhe(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var uhe=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,che=/[^\s\,]+/gi;function she(e,t,n){void 0===n&&(n=[[0,0],[1,1]]);for(var r=[],i=0,o=e.length;i<o;i+=2)r.push([e[i],e[i+1]]);var a,l,u,c=function(e,t,n,r){var i,o,a,l,u,c,s,d=[],f=!!r;if(f){a=r[0],l=r[1];for(var h=0,p=e.length;h<p;h+=1)a=Yce([0,0],a,g=e[h]),l=$ce([0,0],l,g)}h=0;for(var v=e.length;h<v;h+=1){var g=e[h];if(0===h)s=g;else if(h===v-1)c=g,d.push(s),d.push(c);else{i=e[h-1],o=e[h+1];var m=[0,0];m=qce(m=Qce(m,o,i),m,t);var y=Kce(g,i),b=Kce(g,o),w=y+b;0!==w&&(y/=w,b/=w);var _=qce([0,0],m,-y),x=qce([0,0],m,b);c=Uce([0,0],g,_),u=Yce([0,0],u=Uce([0,0],g,x),$ce([0,0],o,g)),u=$ce([0,0],u,Yce([0,0],o,g)),c=Yce([0,0],c=Uce([0,0],g,_=qce([0,0],_=Qce([0,0],u,g),-y/b)),$ce([0,0],i,g)),c=$ce([0,0],c,Yce([0,0],i,g)),u=Uce([0,0],g,x=qce([0,0],x=Qce([0,0],g,c),b/y)),f&&(c=Yce([0,0],c=$ce([0,0],c,a),l),u=Yce([0,0],u=$ce([0,0],u,a),l)),d.push(s),d.push(c),s=u}}return d}(r,.4,0,n),s=r.length,d=[];for(i=0;i<s-1;i+=1)a=c[2*i],l=c[2*i+1],u=r[i+1],d.push(["C",a[0],a[1],l[0],l[1],u[0],u[1]]);return d}var dhe="\t\n\v\f\r   ᠎             　\u2028\u2029",fhe=new RegExp("([a-z])["+dhe+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+dhe+"]*,?["+dhe+"]*)+)","ig"),hhe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+dhe+"]*,?["+dhe+"]*","ig");function phe(e){if(!e)return null;if(Vae(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(fhe,(function(e,r,i){var o=[],a=r.toLowerCase();if(i.replace(hhe,(function(e,t){t&&o.push(+t)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=t[a]&&(n.push([r].concat(o.splice(0,t[a]))),t[a]););return""})),n}var vhe=/[a-z]/;function ghe(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function mhe(e){var t=phe(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(vhe.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var o=[],a=0,l=0,u=0,c=0,s=0,d=t[0];"M"!==d[0]&&"m"!==d[0]||(u=a=+d[1],c=l=+d[2],s++,o[0]=["M",a,l]);r=s;for(var f=t.length;r<f;r++){var h=t[r],p=o[r-1],v=[],g=(i=h[0]).toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=+h[6]+a,v[7]=+h[7]+l;break;case"V":v[1]=+h[1]+l;break;case"H":v[1]=+h[1]+a;break;case"M":u=+h[1]+a,c=+h[2]+l,v[1]=u,v[2]=c;break;default:for(var m=1,y=h.length;m<y;m++)v[m]=+h[m]+(m%2?a:l)}else v=t[r];switch(g){case"Z":a=+u,l=+c;break;case"H":v=["L",a=v[1],l];break;case"V":v=["L",a,l=v[1]];break;case"T":a=v[1],l=v[2];var b=ghe([p[1],p[2]],[p[3],p[4]]);v=["Q",b[0],b[1],a,l];break;case"S":a=v[v.length-2],l=v[v.length-1];var w=p.length,_=ghe([p[w-4],p[w-3]],[p[w-2],p[w-1]]);v=["C",_[0],_[1],v[1],v[2],a,l];break;case"M":u=v[v.length-2],c=v[v.length-1];break;default:a=v[v.length-2],l=v[v.length-1]}o.push(v)}return o}function yhe(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function bhe(e,t){return yhe(e)*yhe(t)?(e[0]*t[0]+e[1]*t[1])/(yhe(e)*yhe(t)):1}function whe(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(bhe(e,t))}function _he(e,t){return e[0]===t[0]&&e[1]===t[1]}function xhe(e,t){var n=t[1],r=t[2],i=yle(wle(t[3]),2*Math.PI),o=t[4],a=t[5],l=e[0],u=e[1],c=t[6],s=t[7],d=Math.cos(i)*(l-c)/2+Math.sin(i)*(u-s)/2,f=-1*Math.sin(i)*(l-c)/2+Math.cos(i)*(u-s)/2,h=d*d/(n*n)+f*f/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(f*f)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*f/r:0,m=n?v*-r*d/n:0,y=(l+c)/2+Math.cos(i)*g-Math.sin(i)*m,b=(u+s)/2+Math.sin(i)*g+Math.cos(i)*m,w=[(d-g)/n,(f-m)/r],_=[(-1*d-g)/n,(-1*f-m)/r],x=whe([1,0],w),k=whe(w,_);return bhe(w,_)<=-1&&(k=Math.PI),bhe(w,_)>=1&&(k=0),0===a&&k>0&&(k-=2*Math.PI),1===a&&k<0&&(k+=2*Math.PI),{cx:y,cy:b,rx:_he(e,[c,s])?0:n,ry:_he(e,[c,s])?0:r,startAngle:x,endAngle:x+k,xRotation:i,arcFlag:o,sweepFlag:a}}function khe(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Che(e){e=function(e){var t=e||[];return Vae(t)?t:nle(t)?(Hae(t=t.match(uhe),(function(e,n){if((e=e.match(che))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}Hae(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}(e);for(var t=[],n=null,r=null,i=null,o=0,a=e.length,l=0;l<a;l++){var u=e[l];r=e[l+1];var c=u[0],s={command:c,prePoint:n,params:u,startTangent:null,endTangent:null};switch(c){case"M":i=[u[1],u[2]],o=l;break;case"A":var d=xhe(n,u);s.arcParams=d}if("Z"===c)n=i,r=e[o+1];else{var f=u.length;n=[u[f-2],u[f-1]]}r&&"Z"===r[0]&&(r=e[o],t[o]&&(t[o].prePoint=n)),s.currentPoint=n,t[o]&&_he(n,t[o].currentPoint)&&(t[o].prePoint=s.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;s.nextPoint=h;var p=s.prePoint;if(["L","H","V"].includes(c))s.startTangent=[p[0]-n[0],p[1]-n[1]],s.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===c){var v=[u[1],u[2]];s.startTangent=[p[0]-v[0],p[1]-v[1]],s.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===c){v=khe((y=t[l-1]).currentPoint,p);"Q"===y.command?(s.command="Q",s.startTangent=[p[0]-v[0],p[1]-v[1]],s.endTangent=[n[0]-v[0],n[1]-v[1]]):(s.command="TL",s.startTangent=[p[0]-n[0],p[1]-n[1]],s.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===c){var g=[u[1],u[2]],m=[u[3],u[4]];s.startTangent=[p[0]-g[0],p[1]-g[1]],s.endTangent=[n[0]-m[0],n[1]-m[1]],0===s.startTangent[0]&&0===s.startTangent[1]&&(s.startTangent=[g[0]-m[0],g[1]-m[1]]),0===s.endTangent[0]&&0===s.endTangent[1]&&(s.endTangent=[m[0]-g[0],m[1]-g[1]])}else if("S"===c){var y;g=khe((y=t[l-1]).currentPoint,p),m=[u[1],u[2]];"C"===y.command?(s.command="C",s.startTangent=[p[0]-g[0],p[1]-g[1]],s.endTangent=[n[0]-m[0],n[1]-m[1]]):(s.command="SQ",s.startTangent=[p[0]-m[0],p[1]-m[1]],s.endTangent=[n[0]-m[0],n[1]-m[1]])}else if("A"===c){var b=.001,w=s.arcParams||{},_=w.cx,x=void 0===_?0:_,k=w.cy,C=void 0===k?0:k,S=w.rx,O=void 0===S?0:S,E=w.ry,I=void 0===E?0:E,P=w.sweepFlag,M=void 0===P?0:P,R=w.startAngle,A=void 0===R?0:R,j=w.endAngle,D=void 0===j?0:j;0===M&&(b*=-1);var T=O*Math.cos(A-b)+x,F=I*Math.sin(A-b)+C;s.startTangent=[T-i[0],F-i[1]];var N=O*Math.cos(A+D+b)+x,L=I*Math.sin(A+D-b)+C;s.endTangent=[p[0]-N,p[1]-L]}t.push(s)}return t}var She=function(e,t,n){return e>=t&&e<=n};var Ohe=1e-6;function Ehe(e){return Math.abs(e)<Ohe?0:e<0?-1:1}function Ihe(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Phe(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],l=e[(o+1)%i];if(Ihe(a,l,[t,n]))return!0;Ehe(a[1]-n)>0!=Ehe(l[1]-n)>0&&Ehe(t-(n-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(r=!r)}return r}function Mhe(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],o=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(t.length>1){var a=e[0],l=e[n-1];t.push({from:{x:l[0],y:l[1]},to:{x:a[0],y:a[1]}})}return t}function Rhe(e,t){var n=!1;return Hae(e,(function(e){if(function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=t.x-e.x,l=t.y-e.y,u=r.x-n.x,c=r.y-n.y,s=a*c-l*u,d=null;if(s*s>.001*(a*a+l*l)*(u*u+c*c)){var f=(i*c-o*u)/s,h=(i*l-o*a)/s;She(f,0,1)&&She(h,0,1)&&(d={x:e.x+f*a,y:e.y+f*l})}return d}(e.from,e.to,t.from,t.to))return n=!0,!1})),n}function Ahe(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function jhe(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),l=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((o+a-l)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||gle(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),s=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,s=s>Math.PI/2?Math.PI-s:s,{xExtra:Math.cos(u/2-c)*(t/2*(1/Math.sin(u/2)))-t/2||0,yExtra:Math.cos(s-u/2)*(t/2*(1/Math.sin(u/2)))-t/2||0}}Ofe("rect",Ife),Ofe("image",Ife),Ofe("circle",Pfe),Ofe("marker",Pfe),Ofe("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}var a=Afe(n,r),l=a.x,u=a.y,c={minX:l,minY:u,maxX:l+a.width,maxY:u+a.height};return{x:(c=rhe(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),Ofe("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}return Afe(n,r)})),Ofe("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,o=t.fontSize,a=t.lineHeight,l=t.font;l||(l=lhe(t));var u,c=function(e,t){var n=ohe(),r=0;return Bae(e)||""===e||(n.save(),n.font=t,nle(e)&&e.includes("\n")?Hae(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width,n.restore()),r}(i,l);if(c){var s=t.textAlign,d=t.textBaseline,f=ahe(i,o,a),h={x:n,y:r-f};s&&("end"===s||"right"===s?h.x-=c:"center"===s&&(h.x-=c/2)),d&&("top"===d?h.y+=f:"middle"===d&&(h.y+=f/2)),u={x:h.x,y:h.y,width:c,height:f}}else u={x:n,y:r,width:0,height:0};return u})),Ofe("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],o=0;o<e.length;o++){var a=(v=e[o]).currentPoint,l=v.params,u=v.prePoint,c=void 0;switch(v.command){case"Q":c=zfe.box(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=$fe.box(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var s=v.arcParams;c=ehe.box(s.cx,s.cy,s.rx,s.ry,s.xRotation,s.startAngle,s.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(v.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===v.command||"M"===v.command)&&v.prePoint&&v.nextPoint&&i.push(v)}n=n.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0})),r=r.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}));var d=Jae(n),f=Jae(r),h=Xae(n),p=Xae(r);if(0===i.length)return{x:d,y:f,width:h-d,height:p-f};for(o=0;o<i.length;o++){var v;(a=(v=i[o]).currentPoint)[0]===d?d-=jhe(v,t).xExtra:a[0]===h&&(h+=jhe(v,t).xExtra),a[1]===f?f-=jhe(v,t).yExtra:a[1]===p&&(p+=jhe(v,t).yExtra)}return{x:d,y:f,width:h-d,height:p-f}}(e.get("segments")||Che(n),r),o=i.x,a=i.y,l={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(l=rhe(e,l)).minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}})),Ofe("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=rhe(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Ofe("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Dhe=function(){function e(e){var t=e.xField,n=e.yField,r=e.adjustNames,i=void 0===r?["x","y"]:r,o=e.dimValuesMap;this.adjustNames=i,this.xField=t,this.yField=n,this.dimValuesMap=o}return e.prototype.isAdjust=function(e){return this.adjustNames.indexOf(e)>=0},e.prototype.getAdjustRange=function(e,t,n){var r,i,o=this.yField,a=n.indexOf(t),l=n.length;return!o&&this.isAdjust("y")?(r=0,i=1):l>1?(r=n[0===a?0:a-1],i=n[a===l-1?l-1:a+1],0!==a?r+=(t-r)/2:r-=(i-t)/2,a!==l-1?i-=(i-t)/2:i+=(t-n[l-2])/2):(r=0===t?0:t-.5,i=0===t?1:t+.5),{pre:r,next:i}},e.prototype.adjustData=function(e,t){var n=this,r=this.getDimValues(t);Hae(e,(function(e,t){Hae(r,(function(r,i){n.adjustDim(i,r,e,t)}))}))},e.prototype.groupData=function(e,t){return Hae(e,(function(e){void 0===e[t]&&(e[t]=0)})),sle(e,t)},e.prototype.adjustDim=function(e,t,n,r){},e.prototype.getDimValues=function(e){var t=this.xField,n=this.yField,r=Nle({},this.dimValuesMap),i=[];if(t&&this.isAdjust("x")&&i.push(t),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(t){r&&r[t]||(r[t]=ile(e,t).sort((function(e,t){return e-t})))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},e}(),The={},Fhe=function(e){return The[e.toLowerCase()]},Nhe=function(e,t){if(Fhe(e))throw new Error("Adjust type '"+e+"' existed.");The[e.toLowerCase()]=t},Lhe=function(e,t){return(Lhe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Bhe(e,t){function n(){this.constructor=e}Lhe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Vhe=function(){return Vhe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vhe.apply(this,arguments)},zhe=function(e){function t(t){var n=e.call(this,t)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=t.marginRatio,i=void 0===r?.5:r,o=t.dodgeRatio,a=void 0===o?.5:o,l=t.dodgeBy,u=t.intervalPadding,c=t.dodgePadding,s=t.xDimensionLength,d=t.groupNum,f=t.defaultSize,h=t.maxColumnWidth,p=t.minColumnWidth,v=t.columnWidthRatio,g=t.customOffset;return n.marginRatio=i,n.dodgeRatio=a,n.dodgeBy=l,n.intervalPadding=u,n.dodgePadding=c,n.xDimensionLegenth=s,n.groupNum=d,n.defaultSize=f,n.maxColumnWidth=h,n.minColumnWidth=p,n.columnWidthRatio=v,n.customOffset=g,n}return Bhe(t,e),t.prototype.process=function(e){var t=Lle(e),n=Kae(t),r=this.dodgeBy,i=r?function(e,t){if(!t)return[e];var n=dle(e,t),r=[];for(var i in n)r.push(n[i]);return r}(n,r):t;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],t},t.prototype.adjustDim=function(e,t,n,r){var i=this,o=this.customOffset,a=this.getDistribution(e);return Hae(this.groupData(n,e),(function(n,l){var u;u=1===t.length?{pre:t[0]-1,next:t[0]+1}:i.getAdjustRange(e,parseFloat(l),t),Hae(n,(function(t){var n=t[e],l=a[n],c=l.indexOf(r);if(Bae(o))t[e]=i.getDodgeOffset(u,c,l.length);else{var s=u.pre,d=u.next;t[e]=Lae(o)?o(t,u):(s+d)/2+o}}))})),[]},t.prototype.getDodgeOffset=function(e,t,n){var r,i=this,o=i.dodgeRatio,a=i.marginRatio,l=i.intervalPadding,u=i.dodgePadding,c=e.pre,s=e.next,d=s-c;if(!Bae(l)&&Bae(u)&&l>=0)r=c+this.getIntervalOnlyOffset(n,t);else if(!Bae(u)&&Bae(l)&&u>=0){r=c+this.getDodgeOnlyOffset(n,t)}else if(!Bae(l)&&!Bae(u)&&l>=0&&u>=0){r=c+this.getIntervalAndDodgeOffset(n,t)}else{var f=d*o/n,h=a*f;r=(c+s)/2+(.5*(d-n*f-(n-1)*h)+((t+1)*f+t*h)-.5*f-.5*d)}return r},t.prototype.getIntervalOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.intervalPadding,o=n.xDimensionLegenth,a=n.groupNum,l=n.dodgeRatio,u=n.maxColumnWidth,c=n.minColumnWidth,s=n.columnWidthRatio,d=i/o,f=(1-(a-1)*d)/a*l/(e-1),h=((1-d*(a-1))/a-f*(e-1))/e;if(h=Bae(s)?h:1/a/e*s,!Bae(u)){var p=u/o;h=Math.min(h,p)}if(!Bae(c)){var v=c/o;h=Math.max(h,v)}return((.5+t)*(h=r?r/o:h)+t*(f=((1-(a-1)*d)/a-e*h)/(e-1))+.5*d)*a-d/2},t.prototype.getDodgeOnlyOffset=function(e,t){var n=this,r=n.defaultSize,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,l=n.marginRatio,u=n.maxColumnWidth,c=n.minColumnWidth,s=n.columnWidthRatio,d=i/o,f=1*l/(a-1),h=((1-f*(a-1))/a-d*(e-1))/e;if(h=s?1/a/e*s:h,!Bae(u)){var p=u/o;h=Math.min(h,p)}if(!Bae(c)){var v=c/o;h=Math.max(h,v)}return((.5+t)*(h=r?r/o:h)+t*d+.5*(f=(1-(h*e+d*(e-1))*a)/(a-1)))*a-f/2},t.prototype.getIntervalAndDodgeOffset=function(e,t){var n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,l=r/o,u=i/o;return((.5+t)*(((1-l*(a-1))/a-u*(e-1))/e)+t*u+.5*l)*a-l/2},t.prototype.getDistribution=function(e){var t=this.adjustDataArray,n=this.cacheMap,r=n[e];return r||(r={},Hae(t,(function(t,n){var i=ile(t,e);i.length||i.push(0),Hae(i,(function(e){r[e]||(r[e]=[]),r[e].push(n)}))})),n[e]=r),r},t}(Dhe);var Hhe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bhe(t,e),t.prototype.process=function(e){var t=Lle(e),n=Kae(t);return this.adjustData(t,n),t},t.prototype.adjustDim=function(e,t,n){var r=this;return Hae(this.groupData(n,e),(function(n,i){return r.adjustGroup(n,e,parseFloat(i),t)}))},t.prototype.getAdjustOffset=function(e){var t,n=e.pre,r=e.next,i=.05*(r-n);return(r-i-(t=n+i))*Math.random()+t},t.prototype.adjustGroup=function(e,t,n,r){var i=this,o=this.getAdjustRange(t,n,r);return Hae(e,(function(e){e[t]=i.getAdjustOffset(o)})),e},t}(Dhe),Whe=vue,Uhe=function(e){function t(t){var n=e.call(this,t)||this,r=t.adjustNames,i=void 0===r?["y"]:r,o=t.height,a=void 0===o?NaN:o,l=t.size,u=void 0===l?10:l,c=t.reverseOrder,s=void 0!==c&&c;return n.adjustNames=i,n.height=a,n.size=u,n.reverseOrder=s,n}return Bhe(t,e),t.prototype.process=function(e){var t=this.yField,n=this.reverseOrder,r=t?this.processStack(e):this.processOneDimStack(e);return n?this.reverse(r):r},t.prototype.reverse=function(e){return e.slice(0).reverse()},t.prototype.processStack=function(e){var t=this,n=t.xField,r=t.yField,i=t.reverseOrder?this.reverse(e):e,o=new Whe,a=new Whe;return i.map((function(e){return e.map((function(e){var t,i=Kle(e,n,0),l=Kle(e,[r]),u=i.toString();if(l=Vae(l)?l[1]:l,!Bae(l)){var c=l>=0?o:a;c.has(u)||c.set(u,0);var s=c.get(u),d=l+s;return c.set(u,d),Vhe(Vhe({},e),((t={})[r]=[s,d],t))}return e}))}))},t.prototype.processOneDimStack=function(e){var t=this,n=this,r=n.xField,i=n.height,o=n.reverseOrder,a=o?this.reverse(e):e,l=new Whe;return a.map((function(e){return e.map((function(e){var n,o=t.size,a=e[r],u=2*o/i;l.has(a)||l.set(a,u/2);var c=l.get(a);return l.set(a,c+u),Vhe(Vhe({},e),((n={}).y=c,n))}))}))},t}(Dhe),Ghe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Bhe(t,e),t.prototype.process=function(e){var t=Kae(e),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(t),o=Math.max.apply(Math,Object.keys(i).map((function(e){return i[e]})));return $le(e,(function(e){return $le(e,(function(e){var t,a,l=e[r],u=e[n];if(Vae(l)){var c=(o-i[u])/2;return Vhe(Vhe({},e),((t={})[r]=$le(l,(function(e){return c+e})),t))}var s=(o-l)/2;return Vhe(Vhe({},e),((a={})[r]=[s,l+s],a))}))}))},t.prototype.getXValuesMaxMap=function(e){var t=this,n=this.xField,r=this.yField;return function(e,t){void 0===t&&(t=qle);var n={};return zae(e)&&!Bae(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}(sle(e,(function(e){return e[n]})),(function(e){return t.getDimMaxValue(e,r)}))},t.prototype.getDimMaxValue=function(e,t){var n=$le(e,(function(e){return Kle(e,t,[])})),r=Kae(n);return Math.max.apply(Math,r)},t}(Dhe);Nhe("Dodge",zhe),Nhe("Jitter",Hhe),Nhe("Stack",Uhe),Nhe("Symmetric",Ghe);var Yhe=function(e,t){return nle(t)?t:e.invert(e.scale(t))},$he=function(){function e(e){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(e)}return e.prototype.mapping=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.map((function(t,n){return e._toOriginParam(t,e.scales[n])}));return this.callback.apply(this,r)},e.prototype.getLinearValue=function(e){var t=this.values.length-1,n=Math.floor(t*e),r=t*e-n,i=this.values[n];return i+((n===t?i:this.values[n+1])-i)*r},e.prototype.getNames=function(){for(var e=this.scales,t=this.names,n=Math.min(e.length,t.length),r=[],i=0;i<n;i+=1)r.push(t[i]);return r},e.prototype.getFields=function(){return this.scales.map((function(e){return e.field}))},e.prototype.getScale=function(e){return this.scales[this.names.indexOf(e)]},e.prototype.defaultCallback=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this.values:t.map((function(t,n){var r=e.scales[n];return"identity"===r.type?r.values[0]:e._getAttributeValue(r,t)}))},e.prototype._parseCfg=function(e){var t=this,n=e.type,r=void 0===n?"base":n,i=e.names,o=void 0===i?[]:i,a=e.scales,l=void 0===a?[]:a,u=e.values,c=void 0===u?[]:u,s=e.callback;this.type=r,this.scales=l,this.values=c,this.names=o,this.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(s){var r=s.apply(void 0,e);if(!Bae(r))return[r]}return t.defaultCallback.apply(t,e)}},e.prototype._getAttributeValue=function(e,t){if(e.isCategory&&!this.linear){var n=e.translate(t);return this.values[n%this.values.length]}var r=e.scale(t);return this.getLinearValue(r)},e.prototype._toOriginParam=function(e,t){return t.isLinear?e:Vae(e)?e.map((function(e){return Yhe(t,e)})):Yhe(t,e)},e}(),qhe=/rgba?\(([\s.,0-9]+)\)/,Khe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Xhe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Jhe=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,Zhe=function(e,t,n,r){return e[r]+(t[r]-e[r])*n};function Qhe(e){return"#"+npe(e[0])+npe(e[1])+npe(e[2])}var epe,tpe=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},npe=function(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t},rpe=function(e){if("#"===e[0]&&7===e.length)return e;epe||(epe=function(){var e=document.createElement("i");return e.title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),e}()),epe.style.color=e;var t=document.defaultView.getComputedStyle(epe,"").getPropertyValue("color");return t=Qhe(qhe.exec(t)[1].split(/\s*,\s*/).map((function(e){return Number(e)})))};const ipe={rgb2arr:tpe,gradient:function(e){var t=nle(e)?e.split("-"):e,n=$le(t,(function(e){return tpe(-1===e.indexOf("#")?rpe(e):e)}));return function(e){return function(e,t){var n=isNaN(Number(t))||t<0?0:t>1?1:Number(t),r=e.length-1,i=Math.floor(r*n),o=r*n-i,a=e[i],l=i===r?a:e[i+1];return Qhe([Zhe(a,l,o,0),Zhe(a,l,o,1),Zhe(a,l,o,2)])}(n,e)}},toRGB:Vle(rpe),toCSSGradient:function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,n=void 0;if("l"===e[0]){var r=+(i=Khe.exec(e))[1]+90;n=i[2],t="linear-gradient("+r+"deg, "}else if("r"===e[0]){var i;t="radial-gradient(",n=(i=Xhe.exec(e))[4]}var o=n.match(Jhe);return Hae(o,(function(e,n){var r=e.split(":");t+=r[1]+" "+100*r[0]+"%",n!==o.length-1&&(t+=", ")})),t+=")"}return e}};var ope=function(e){function t(t){var n=e.call(this,t)||this;return n.type="color",n.names=["color"],nle(n.values)&&(n.linear=!0),n.gradient=ipe.gradient(n.values),n}return Cae(t,e),t.prototype.getLinearValue=function(e){return this.gradient(e)},t}($he),ape=function(e){function t(t){var n=e.call(this,t)||this;return n.type="opacity",n.names=["opacity"],n}return Cae(t,e),t}($he),lpe=function(e){function t(t){var n=e.call(this,t)||this;return n.names=["x","y"],n.type="position",n}return Cae(t,e),t.prototype.mapping=function(e,t){var n=this.scales,r=n[0],i=n[1];return Bae(e)||Bae(t)?[]:[Vae(e)?e.map((function(e){return r.scale(e)})):r.scale(e),Vae(t)?t.map((function(e){return i.scale(e)})):i.scale(t)]},t}($he),upe=function(e){function t(t){var n=e.call(this,t)||this;return n.type="shape",n.names=["shape"],n}return Cae(t,e),t.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},t}($he),cpe=function(e){function t(t){var n=e.call(this,t)||this;return n.type="size",n.names=["size"],n}return Cae(t,e),t}($he),spe={};function dpe(e,t){spe[e]=t}var fpe=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){Nle(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return $le(this.ticks,(function(t,n){return zae(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return Bae(r)||!Lae(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){Nle(this,this.__cfg__),this.setDomain(),Gle(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(nle(e)){var n=spe[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else Lae(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return ple(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),hpe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return Cae(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=ple(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return ple(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,Rae([i],n))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Bae(this.getConfig("min"))&&(this.min=0),Bae(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(fpe),ppe=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vpe="\\d\\d?",gpe="\\d\\d",mpe="[^\\s]+",ype=/\[([^]*?)\]/gm;function bpe(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var wpe=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function _pe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var xpe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kpe=["January","February","March","April","May","June","July","August","September","October","November","December"],Cpe=bpe(kpe,3),Spe={dayNamesShort:bpe(xpe,3),dayNames:xpe,monthNamesShort:Cpe,monthNames:kpe,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},Ope=_pe({},Spe),Epe=function(e){return Ope=_pe(Ope,e)},Ipe=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ppe=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},Mpe={D:function(e){return String(e.getDate())},DD:function(e){return Ppe(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Ppe(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Ppe(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Ppe(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Ppe(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Ppe(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Ppe(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Ppe(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Ppe(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Ppe(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Ppe(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ppe(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Ppe(Math.floor(Math.abs(t)/60),2)+":"+Ppe(Math.abs(t)%60,2)}},Rpe=function(e){return+e-1},Ape=[null,vpe],jpe=[null,mpe],Dpe=["isPm",mpe,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],Tpe=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],Fpe={D:["day",vpe],DD:["day",gpe],Do:["day",vpe+mpe,function(e){return parseInt(e,10)}],M:["month",vpe,Rpe],MM:["month",gpe,Rpe],YY:["year",gpe,function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour",vpe,void 0,"isPm"],hh:["hour",gpe,void 0,"isPm"],H:["hour",vpe],HH:["hour",gpe],m:["minute",vpe],mm:["minute",gpe],s:["second",vpe],ss:["second",gpe],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",gpe,function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:Ape,dd:Ape,ddd:jpe,dddd:jpe,MMM:["month",mpe,wpe("monthNamesShort")],MMMM:["month",mpe,wpe("monthNames")],a:Dpe,A:Dpe,ZZ:Tpe,Z:Tpe},Npe={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Lpe=function(e){return _pe(Npe,e)},Bpe=function(e,t,n){if(void 0===t&&(t=Npe.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Npe[t]||t).replace(ype,(function(e,t){return r.push(t),"@@@"}));var i=_pe(_pe({},Ope),n);return(t=t.replace(ppe,(function(t){return Mpe[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function Vpe(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=Npe[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=t.replace(ype,(function(e,t){return o.push(Ipe(t)),"@@@"})),l={},u={};a=Ipe(a).replace(ppe,(function(e){var t=Fpe[e],n=t[0],r=t[1],o=t[3];if(l[n])throw new Error("Invalid format. "+n+" specified twice in format");return l[n]=!0,o&&(u[o]=!0),i.push(t),"("+r+")"})),Object.keys(u).forEach((function(e){if(!l[e])throw new Error("Invalid format. "+e+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var c=e.match(new RegExp(a,"i"));if(!c)return null;for(var s,d=_pe(_pe({},Ope),n),f=1;f<c.length;f++){var h=i[f-1],p=h[0],v=h[2],g=v?v(c[f],d):+c[f];if(null==g)return null;r[p]=g}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){s=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var m=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(f=0,m.length);f<y;f++)if(l[m[f][0]]&&r[m[f][0]]!==s[m[f][1]]())return null}else if(s=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return s}var zpe={format:Bpe,parse:Vpe,defaultI18n:Spe,setGlobalDateI18n:Epe,setGlobalDateMasks:Lpe};const Hpe=Object.freeze(Object.defineProperty({__proto__:null,assign:_pe,default:zpe,defaultI18n:Spe,format:Bpe,parse:Vpe,setGlobalDateI18n:Epe,setGlobalDateMasks:Lpe},Symbol.toStringTag,{value:"Module"}));var Wpe="format";function Upe(e,t){return(Hpe[Wpe]||zpe[Wpe])(e,t)}function Gpe(e){return nle(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),Mle(e)&&(e=e.getTime()),e}var Ype=1e3,$pe=6e4,qpe=36e5,Kpe=24*qpe,Xpe=31*Kpe,Jpe=365*Kpe,Zpe=[["HH:mm:ss",Ype],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",$pe],["HH:mm",6e5],["HH:mm",18e5],["HH",qpe],["HH",6*qpe],["HH",12*qpe],["YYYY-MM-DD",Kpe],["YYYY-MM-DD",4*Kpe],["YYYY-WW",7*Kpe],["YYYY-MM",Xpe],["YYYY-MM",4*Xpe],["YYYY-MM",6*Xpe],["YYYY",380*Kpe]];function Qpe(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var o=Bae(n)?0:n,a=Bae(i)?e.length:i;o<a;){var l=o+a>>>1;r(e[l])>t?a=l:o=l+1}return o})(Zpe,(t-e)/n)-1,o=Zpe[i];return i<0?o=Zpe[0]:i>=Zpe.length&&(o=ale(Zpe)),o}var eve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return Cae(t,e),t.prototype.translate=function(e){e=Gpe(e);var t=this.values.indexOf(e);return-1===t&&(t=ple(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):Upe(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;Hae(t,(function(e,n){t[n]=Gpe(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(hpe),tve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return Cae(t,e),t.prototype.scale=function(e){if(Bae(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=ole(t),r=ale(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),Bae(this.minLimit)||(this.min=n),Bae(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=Zae(this.values),t=e.min,n=e.max;Bae(this.min)&&(this.min=t),Bae(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=Tae(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(fpe),nve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return Cae(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(tve);function rve(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function ive(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function ove(e,t,n){Bae(n)&&(n=Math.max.apply(null,e));var r=n;return Hae(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var ave=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return Cae(t,e),t.prototype.invert=function(e){var t,n=this.base,r=ive(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===e)return 0;var l=1/(r-(t=ive(n,a/n)))*o;if(e<l)return e/l*a}else t=ive(n,this.min);var u=(e-i)/o*(r-t)+t;return Math.pow(n,u)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=ove(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(ive(r,t)-ive(r,n)):(ive(r,e)-ive(r,n))/(ive(r,t)-ive(r,n))},t}(tve),lve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return Cae(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=rve(n,this.max),i=rve(n,this.min),o=t*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(rve(r,e)-rve(r,n))/(rve(r,t)-rve(r,n))},t}(tve),uve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return Cae(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):Upe(n,this.mask)},t.prototype.scale=function(t){var n=t;return(nle(n)||Mle(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return Gpe(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(Bae(t)&&ple(t)||(this.min=this.translate(this.min)),Bae(n)&&ple(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,o=i,a=0;Hae(e,(function(e){var t=Gpe(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(o=i,i=t):o>t&&(o=t),a<t&&(a=t),r.push(t)})),e.length>1&&(this.minTickInterval=o-i),Bae(t)&&(this.min=i),Bae(n)&&(this.max=a)}},t}(nve),cve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return Cae(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return ale(t);if(i<0)return ole(t);var o=t[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(t[i+1]-o)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(ale(t)!==this.max&&t.push(this.max),ole(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<ole(t))return 0;if(e>ale(t))return 1;var n=0;return Hae(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(tve),sve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return Cae(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(cve),dve={};function fve(e){return dve[e]}function hve(e,t){if(fve(e))throw new Error("type '"+e+"' existed.");dve[e]=t}var pve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return Cae(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&ple(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(fpe);function vve(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=e.showLast;if(ple(n)){var o=Tae(t,(function(e,t){return t%n==0})),a=ale(t);return i&&ale(o)!==a&&o.push(a),o}var l=t.length,u=e.min,c=e.max;if(Bae(u)&&(u=0),Bae(c)&&(c=t.length-1),!ple(r)||r>=l)return t.slice(u,c+1);if(r<=0||c<=0)return[];for(var s=1===r?l:Math.floor(l/(r-1)),d=[],f=u,h=0;h<r&&!(f>=c);h++)f=Math.min(u+h*s,c),h===r-1&&i?d.push(t[c]):d.push(t[f]);return d}var gve=Math.sqrt(50),mve=Math.sqrt(10),yve=Math.sqrt(2),bve=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,l=this._domain[o],u=this._domain[a];return u<l&&(l=(t=[u,l])[0],u=t[1],o=(n=[a,o])[0],a=n[1]),(r=wve(l,u,e))>0?r=wve(l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r,e):r<0&&(r=wve(l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r,e)),r>0?(i[o]=Math.floor(l/r)*r,i[a]=Math.ceil(u/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(l*r)/r,i[a]=Math.floor(u*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,o,a,l=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(a=wve(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++l<i;)o[l]=(e+l)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++l<i;)o[l]=(e-l)/a;r&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function wve(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=gve?10:o>=mve?5:o>=yve?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=gve?10:o>=mve?5:o>=yve?2:1)}function _ve(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function xve(e,t,n){var r=_ve(e,n,"floor"),i=_ve(t,n,"ceil");r=hle(r,n),i=hle(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),l=r;l<=i;l+=a){var u=hle(l,a);o.push(u)}return{min:r,max:i,ticks:o}}function kve(e,t,n){var r,i=e.minLimit,o=e.maxLimit,a=e.min,l=e.max,u=e.tickCount,c=void 0===u?5:u,s=Bae(i)?Bae(t)?a:t:i,d=Bae(o)?Bae(n)?l:n:o;if(s>d&&(d=(r=[s,d])[0],s=r[1]),c<=2)return[s,d];for(var f=(d-s)/(c-1),h=[],p=0;p<c;p++)h.push(s+f*p);return h}function Cve(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var Sve=[1,5,2,2.5,4,3],Ove=100*Number.EPSILON;function Eve(e,t,n,r,i,o){var a=oue(t),l=Wle(t,e),u=0,c=function(e,t){return(e%t+t)%t}(r,o);return(c<Ove||o-c<Ove)&&r<=0&&i>=0&&(u=1),1-l/(a-1)-n+u}function Ive(e,t,n){var r=oue(t);return 1-Wle(t,e)/(r-1)-n+1}function Pve(e,t,n,r,i,o){var a=(e-1)/(o-i),l=(t-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/l,l/a)}function Mve(e,t){return e>=t?2-(e-1)/(t-1):1}function Rve(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function Ave(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function jve(e,t,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=Sve),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!a)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===a)return{min:e,max:t,ticks:[e]};if(t-e>1e148){var l=(t-e)/(_=n||5);return{min:e,max:t,ticks:Array(_).fill(null).map((function(t,n){return Cve(e+l*n)}))}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var s=0;s<i.length;s+=1){var d=i[s],f=Ive(d,i,c);if(o[0]*f+o[1]+o[2]+o[3]<u.score){c=1/0;break}for(var h=2;h<1/0;){var p=Mve(h,a);if(o[0]*f+o[1]+o[2]*p+o[3]<u.score)break;for(var v=(t-e)/(h+1)/c/d,g=Math.ceil(Math.log10(v));g<1/0;){var m=c*d*Math.pow(10,g),y=Ave(e,t,m*(h-1));if(o[0]*f+o[1]*y+o[2]*p+o[3]<u.score)break;var b=Math.floor(t/m)*c-(h-1)*c,w=Math.ceil(e/m)*c;if(b<=w)for(var _=w-b,x=0;x<=_;x+=1){var k=(b+x)*(m/c),C=k+m*(h-1),S=m,O=Eve(d,i,c,k,C,S),E=Rve(e,t,k,C),I=Pve(h,a,e,t,k,C),P=o[0]*O+o[1]*E+o[2]*I+1*o[3];P>u.score&&(!r||k<=e&&C>=t)&&(u.lmin=k,u.lmax=C,u.lstep=S,u.score=P)}g+=1}h+=1}}c+=1}var M=Cve(u.lmax),R=Cve(u.lmin),A=Cve(u.lstep),j=Math.floor(function(e){return Math.round(1e12*e)/1e12}((M-R)/A))+1,D=new Array(j);D[0]=Cve(R);for(s=1;s<j;s++)D[s]=Cve(D[s-1]+A);return{min:Math.min(e,ole(D)),max:Math.max(t,ale(D)),ticks:D}}function Dve(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var l=Math.ceil(t/a),u=Math.floor(e/a),c=Math.max(l*a,t),s=Math.min(u*a,e),d=Math.floor((c-s)/a)+1,f=new Array(d),h=0;h<d;h++)f[h]=Cve(s+h*a);return{min:s,max:c,ticks:f}}function Tve(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function Fve(e){return new Date(e).getFullYear()}function Nve(e){return new Date(e,0,1).getTime()}function Lve(e){return new Date(e).getMonth()}function Bve(e,t){return new Date(e,t,1).getTime()}dpe("cat",vve),dpe("time-cat",(function(e){return vve(Sae({showLast:!0},e))})),dpe("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,o=e.tickInterval,a=e.minLimit,l=e.maxLimit,u=jve(t,n,r,i).ticks;return Bae(a)&&Bae(l)?o?xve(t,n,o).ticks:u:kve(e,ole(u),ale(u))})),dpe("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,o=e.minLimit,a=e.maxLimit,l=Dve(t,n,r).ticks;return Bae(o)&&Bae(a)?i?xve(t,n,i).ticks:l:kve(e,ole(l),ale(l))})),dpe("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,o=e.tickCount;if(i)o=Math.ceil((n-t)/i);else{var a=(n-t)/(i=Qpe(t,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-t)/(Math.pow(2,12)-1)),i);for(var l=[],u=t;u<n+i;u+=i)l.push(u);return l})),dpe("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,o=e.tickInterval,a=[];o||(o=(n-t)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-t)/(Math.pow(2,12)-1)),o);var l=Fve(t);if(o>Jpe)for(var u=Fve(n),c=Math.ceil(o/Jpe),s=l;s<=u+c;s+=c)a.push(Nve(s));else if(o>Xpe){var d=Math.ceil(o/Xpe),f=Lve(t),h=function(e,t){var n=Fve(e),r=Fve(t),i=Lve(e);return 12*(r-n)+(Lve(t)-i)%12}(t,n);for(s=0;s<=h+d;s+=d)a.push(Bve(l,s+f))}else if(o>Kpe){var p=(b=new Date(t)).getFullYear(),v=b.getMonth(),g=b.getDate(),m=Math.ceil(o/Kpe),y=function(e,t){return Math.ceil((t-e)/Kpe)}(t,n);for(s=0;s<y+m;s+=m)a.push(new Date(p,v,g+s).getTime())}else if(o>qpe){p=(b=new Date(t)).getFullYear(),v=b.getMonth(),m=b.getDate();var b,w=b.getHours(),_=Math.ceil(o/qpe),x=function(e,t){return Math.ceil((t-e)/qpe)}(t,n);for(s=0;s<=x+_;s+=_)a.push(new Date(p,v,m,w+s).getTime())}else if(o>$pe){var k=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),C=Math.ceil(o/$pe);for(s=0;s<=k+C;s+=C)a.push(t+s*$pe)}else{var S=o;S<Ype&&(S=Ype);var O=Math.floor(t/Ype)*Ype,E=Math.ceil((n-t)/Ype),I=Math.ceil(S/Ype);for(s=0;s<E+I;s+=I)a.push(O+s*Ype)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),dpe("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,o=e.max,a=e.values,l=ive(n,o);if(i>0)t=Math.floor(ive(n,i));else{var u=ove(a,n,o);t=Math.floor(ive(n,u))}for(var c=l-t,s=Math.ceil(c/r),d=[],f=t;f<l+s;f+=s)d.push(Math.pow(n,f));return i<=0&&d.unshift(0),d})),dpe("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(rve(t,e.max));return Dve(Math.floor(rve(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),dpe("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],o=0;o<t;o++){var a=o/(t-1);i.push(Tve(r,a))}return i})),dpe("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,o=e.maxLimit,a=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,o=new bve;return o.domain([t,n]),r&&o.nice(i),o.ticks(i)}(e);return Bae(i)&&Bae(o)?r?xve(t,n,r).ticks:a:kve(e,ole(a),ale(a))})),hve("cat",hpe),hve("category",hpe),hve("identity",pve),hve("linear",nve),hve("log",ave),hve("pow",lve),hve("time",uve),hve("timeCat",eve),hve("quantize",cve),hve("quantile",sve);var Vve={},zve=function(e){return Vve[e.toLowerCase()]},Hve=function(e,t){if(zve(e))throw new Error("Attribute type '".concat(e,"' existed."));Vve[e.toLowerCase()]=t};Hve("Color",ope),Hve("Opacity",ape),Hve("Position",lpe),Hve("Shape",upe),Hve("Size",cpe);var Wve=function(){function e(e){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=e.start,n=e.end,r=e.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,o=e.isTransposed,a=void 0!==o&&o;this.start=t,this.end=n,this.matrix=i,this.originalMatrix=Aae([],i),this.isTransposed=a}return e.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},e.prototype.update=function(e){Nle(this,e),this.initial()},e.prototype.convertDim=function(e,t){var n,r=this[t],i=r.start,o=r.end;return this.isReflect(t)&&(i=(n=[o,i])[0],o=n[1]),i+e*(o-i)},e.prototype.invertDim=function(e,t){var n,r=this[t],i=r.start,o=r.end;return this.isReflect(t)&&(i=(n=[o,i])[0],o=n[1]),(e-i)/(o-i)},e.prototype.applyMatrix=function(e,t,n){void 0===n&&(n=0);var r=[e,t,n];return Wce(r,r,this.matrix),r},e.prototype.invertMatrix=function(e,t,n){void 0===n&&(n=0);var r=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],s=t[8],d=s*a-l*c,f=-s*o+l*u,h=c*o-a*u,p=n*d+r*f+i*h;return p?(p=1/p,e[0]=d*p,e[1]=(-s*r+i*c)*p,e[2]=(l*r-i*a)*p,e[3]=f*p,e[4]=(s*n-i*u)*p,e[5]=(-l*n+i*o)*p,e[6]=h*p,e[7]=(-c*n+r*u)*p,e[8]=(a*n-r*o)*p,e):null}([0,0,0,0,0,0,0,0,0],this.matrix),i=[e,t,n];return r&&Wce(i,i,r),i},e.prototype.convert=function(e){var t=this.convertPoint(e),n=t.x,r=t.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},e.prototype.invert=function(e){var t=this.invertMatrix(e.x,e.y,1);return this.invertPoint({x:t[0],y:t[1]})},e.prototype.rotate=function(e){var t=this.matrix,n=this.center;return ese(t,t,[-n.x,-n.y]),tse(t,t,e),ese(t,t,[n.x,n.y]),this},e.prototype.reflect=function(e){return"x"===e?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},e.prototype.scale=function(e,t){var n=this.matrix,r=this.center;return ese(n,n,[-r.x,-r.y]),nse(n,n,[e,t]),ese(n,n,[r.x,r.y]),this},e.prototype.translate=function(e,t){var n=this.matrix;return ese(n,n,[e,t]),this},e.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},e.prototype.getCenter=function(){return this.center},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRadius=function(){return this.radius},e.prototype.isReflect=function(e){return"x"===e?this.isReflectX:this.isReflectY},e.prototype.resetMatrix=function(e){this.matrix=e||Aae([],this.originalMatrix)},e}(),Uve=function(e){function t(t){var n=e.call(this,t)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return Cae(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,n=this.end;this.x={start:t.x,end:n.x},this.y={start:t.y,end:n.y}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},t.prototype.invertPoint=function(e){var t,n=this.invertDim(e.x,"x"),r=this.invertDim(e.y,"y");return this.isTransposed&&(n=(t=[r,n])[0],r=t[1]),{x:n,y:r}},t}(Wve),Gve=function(e){function t(t){var n=e.call(this,t)||this;n.isHelix=!0,n.type="helix";var r=t.startAngle,i=void 0===r?1.25*Math.PI:r,o=t.endAngle,a=void 0===o?7.25*Math.PI:o,l=t.innerRadius,u=void 0===l?0:l,c=t.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=u,n.radius=c,n.initial(),n}return Cae(t,e),t.prototype.initial=function(){e.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},t.prototype.convertPoint=function(e){var t,n=e.x,r=e.y;this.isTransposed&&(n=(t=[r,n])[0],r=t[1]);var i=this.convertDim(n,"x"),o=this.a*i,a=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(o+a),y:this.center.y+Math.sin(i)*(o+a)}},t.prototype.invertPoint=function(e){var t,n=this.d+this.y.start,r=Gce([0,0],[e.x,e.y],[this.center.x,this.center.y]),i=ose(r,[1,0],!0),o=i*this.a;Xce(r)<o&&(o=Xce(r)),i=2*Math.floor((Xce(r)-o)/n)*Math.PI+i;var a=this.a*i,l=Xce(r)-a;l=gle(l,0)?0:l;var u=this.invertDim(i,"x"),c=this.invertDim(l,"y");return u=gle(u,0)?0:u,c=gle(c,0)?0:c,this.isTransposed&&(u=(t=[c,u])[0],c=t[1]),{x:u,y:c}},t}(Wve),Yve=function(e){function t(t){var n=e.call(this,t)||this;n.isPolar=!0,n.type="polar";var r=t.startAngle,i=void 0===r?-Math.PI/2:r,o=t.endAngle,a=void 0===o?3*Math.PI/2:o,l=t.innerRadius,u=void 0===l?0:l,c=t.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=u,n.radius=c,n.initial(),n}return Cae(t,e),t.prototype.initial=function(){for(e.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,o=Math.abs(n.minX)/r,a=Math.abs(n.minY)/i;this.height/i>this.width/r?(t=this.width/r,this.circleCenter={x:this.center.x-(.5-o)*this.width,y:this.center.y-(.5-a)*t*i}):(t=this.height/i,this.circleCenter={x:this.center.x-(.5-o)*t*r,y:this.center.y-(.5-a)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},t.prototype.getRadius=function(){return this.polarRadius},t.prototype.convertPoint=function(e){var t,n=this.getCenter(),r=e.x,i=e.y;return this.isTransposed&&(r=(t=[i,r])[0],i=t[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},t.prototype.invertPoint=function(e){var t,n=this.getCenter(),r=[e.x-n.x,e.y-n.y],i=this.startAngle,o=this.endAngle;this.isReflect("x")&&(i=(t=[o,i])[0],o=t[1]);var a=[1,0,0,0,1,0,0,0,1];tse(a,a,i);var l=[1,0,0];Wce(l,l,a);var u=ose([l[0],l[1]],r,o<i);gle(u,2*Math.PI)&&(u=0);var c=Xce(r),s=u/(o-i);s=o-i>0?s:-s;var d=this.invertDim(c,"y"),f={x:0,y:0};return f.x=this.isTransposed?d:s,f.y=this.isTransposed?s:d,f},t.prototype.getCenter=function(){return this.circleCenter},t.prototype.getOneBox=function(){var e=this.startAngle,t=this.endAngle;if(Math.abs(t-e)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(e),Math.cos(t)],r=[0,Math.sin(e),Math.sin(t)],i=Math.min(e,t);i<Math.max(e,t);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},t}(Wve),$ve={},qve=function(e,t){$ve[e.toLowerCase()]=t};function Kve(e,t,n){var r=new kce(t,n);r.target=e,r.propagationPath.push(e),e.emitDelegation(t,r);for(var i=e.getParent();i;)i.emitDelegation(t,r),r.propagationPath.push(i),i=i.getParent()}qve("rect",Uve),qve("cartesian",Uve),qve("polar",Yve),qve("helix",Gve);var Xve=[1,0,0,0,1,0,0,0,1];function Jve(e,t,n){return void 0===n&&(n=Xve),t?ise(n,[["t",-e.x,-e.y],["r",t],["t",e.x,e.y]]):null}function Zve(e,t){return e.x||e.y?ise(Xve,[["t",e.x,e.y]]):null}function Qve(e,t){var n=[0,0];return function(e,t,n){var r=t[0],i=t[1];e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7]}(n,t,e),n}function ege(e,t,n,r){if(t){var i=Jve({x:n,y:r},t,e.getMatrix());e.setMatrix(i)}}function tge(e,t,n){var r=Zve({x:t,y:n});e.attr("matrix",r)}function nge(e){var t=0,n=0,r=0,i=0;return ple(e)?t=n=r=i=e:Vae(e)&&(t=e[0],r=Bae(e[1])?e[0]:e[1],i=Bae(e[2])?e[0]:e[2],n=Bae(e[3])?r:e[3]),[t,r,i,n]}function rge(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n])}function ige(e){var t=e.start,n=e.end,r=Math.min(t.x,n.x),i=Math.min(t.y,n.y),o=Math.max(t.x,n.x),a=Math.max(t.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}function oge(e,t,n,r){var i=e+n,o=t+r;return{x:e,y:t,width:n,height:r,minX:e,minY:t,maxX:isNaN(i)?0:i,maxY:isNaN(o)?0:o}}function age(e,t,n){return(1-n)*e+t*n}function lge(e,t,n){return{x:e.x+Math.cos(n)*t,y:e.y+Math.sin(n)*t}}var uge=function(e,t,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[e,t].includes(1/0)?Math.abs(e)===Math.abs(t):Math.abs(e-t)<n};function cge(e){var t,n,r,i,o,a=e.getClip(),l=a&&a.getBBox();if(e.isGroup()){var u=1/0,c=-1/0,s=1/0,d=-1/0,f=e.getChildren();f.length>0?Hae(f,(function(e){if(e.get("visible")){if(e.isGroup()&&0===e.get("children").length)return!0;var t=cge(e),n=e.applyToMatrix([t.minX,t.minY,1]),r=e.applyToMatrix([t.minX,t.maxY,1]),i=e.applyToMatrix([t.maxX,t.minY,1]),o=e.applyToMatrix([t.maxX,t.maxY,1]),a=Math.min(n[0],r[0],i[0],o[0]),l=Math.max(n[0],r[0],i[0],o[0]),f=Math.min(n[1],r[1],i[1],o[1]),h=Math.max(n[1],r[1],i[1],o[1]);a<u&&(u=a),l>c&&(c=l),f<s&&(s=f),h>d&&(d=h)}})):(u=0,c=0,s=0,d=0),t=oge(u,s,c-u,d-s)}else t=e.getBBox();return l?(n=t,r=l,i=Math.max(n.minX,r.minX),o=Math.max(n.minY,r.minY),oge(i,o,Math.min(n.maxX,r.maxX)-i,Math.min(n.maxY,r.maxY)-o)):t}function sge(e){return e+"px"}function dge(e,t,n,r){var i,o,a,l,u=r/(i=e,a=(o=t).x-i.x,l=o.y-i.y,Math.sqrt(a*a+l*l)),c=0;return"start"===n?c=0-u:"end"===n&&(c=1+u),{x:age(e.x,t.x,c),y:age(e.y,t.y,c)}}var fge={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},hge=function(e){function t(t){var n=e.call(this,t)||this;return n.initCfg(),n}return Cae(t,e),t.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},t.prototype.clear=function(){},t.prototype.update=function(e){var t=this,n=this.get("defaultCfg")||{};Hae(e,(function(e,r){var i=e;t.get(r)!==e&&(zae(e)&&n[r]&&(i=Hle({},n[r],e)),t.set(r,i))})),this.updateInner(e),this.afterUpdate(e)},t.prototype.updateInner=function(e){},t.prototype.afterUpdate=function(e){_le(e,"visible")&&(e.visible?this.show():this.hide()),_le(e,"capture")&&this.setCapture(e.capture)},t.prototype.getLayoutBBox=function(){return this.getBBox()},t.prototype.getLocationType=function(){return this.get("locationType")},t.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},t.prototype.setOffset=function(e,t){this.update({offsetX:e,offsetY:t})},t.prototype.setLocation=function(e){var t=Sae({},e);this.update(t)},t.prototype.getLocation=function(){var e=this,t={},n=this.get("locationType");return Hae(fge[n],(function(n){t[n]=e.get(n)})),t},t.prototype.isList=function(){return!1},t.prototype.isSlider=function(){return!1},t.prototype.init=function(){},t.prototype.initCfg=function(){var e=this;Hae(this.get("defaultCfg"),(function(t,n){var r=e.get(n);if(zae(r)){var i=Hle({},t,r);e.set(n,i)}}))},t}(Ice),pge="update_status",vge=["visible","tip","delegateObject"],gge=["container","group","shapesMap","isRegister","isUpdating","destroyed"],mge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},t.prototype.remove=function(){this.clear(),this.get("group").remove()},t.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},t.prototype.getChildComponentById=function(e){var t=this.getElementById(e);return t&&t.get("component")},t.prototype.getElementById=function(e){return this.get("shapesMap")[e]},t.prototype.getElementByLocalId=function(e){var t=this.getElementId(e);return this.getElementById(t)},t.prototype.getElementsByName=function(e){var t=[];return Hae(this.get("shapesMap"),(function(n){n.get("name")===e&&t.push(n)})),t},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateInner=function(e){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},t.prototype.render=function(){var e=this.get("offScreenGroup");e||(e=this.offScreenRender());var t=this.get("group");this.updateElements(e,t),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},t.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},t.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},t.prototype.setCapture=function(e){this.get("group").set("capture",e),this.set("capture",e)},t.prototype.destroy=function(){this.removeEvent(),this.remove(),e.prototype.destroy.call(this)},t.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},t.prototype.getLayoutBBox=function(){var e=this.get("group"),t=this.getInnerLayoutBBox(),n=e.getTotalMatrix();return n&&(t=function(e,t){var n=Qve(e,[t.minX,t.minY]),r=Qve(e,[t.maxX,t.minY]),i=Qve(e,[t.minX,t.maxY]),o=Qve(e,[t.maxX,t.maxY]),a=Math.min(n[0],r[0],i[0],o[0]),l=Math.max(n[0],r[0],i[0],o[0]),u=Math.min(n[1],r[1],i[1],o[1]),c=Math.max(n[1],r[1],i[1],o[1]);return{x:a,y:u,minX:a,minY:u,maxX:l,maxY:c,width:l-a,height:c-u}}(n,t)),t},t.prototype.on=function(e,t,n){return this.get("group").on(e,t,n),this},t.prototype.off=function(e,t){var n=this.get("group");return n&&n.off(e,t),this},t.prototype.emit=function(e,t){this.get("group").emit(e,t)},t.prototype.init=function(){e.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},t.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},t.prototype.delegateEmit=function(e,t){var n=this.get("group");t.target=n,n.emit(e,t),Kve(n,e,t)},t.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},t.prototype.applyOffset=function(){var e=this.get("offsetX"),t=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e,y:t})},t.prototype.initGroup=function(){var e=this.get("container");this.set("group",e.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},t.prototype.offScreenRender=function(){this.clearOffScreenCache();var e=this.createOffScreenGroup();return this.renderInner(e),this.set("offScreenGroup",e),this.set("offScreenBBox",cge(e)),e},t.prototype.addGroup=function(e,t){this.appendDelegateObject(e,t);var n=e.addGroup(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addShape=function(e,t){this.appendDelegateObject(e,t);var n=e.addShape(t);return this.get("isRegister")&&this.registerElement(n),n},t.prototype.addComponent=function(e,t){var n=t.id,r=t.component,i=Oae(t,["id","component"]),o=new r(Sae(Sae({},i),{id:n,container:e,updateAutoRender:this.get("updateAutoRender")}));return o.init(),o.render(),this.get("isRegister")&&this.registerElement(o.get("group")),o},t.prototype.initEvent=function(){},t.prototype.removeEvent=function(){this.get("group").off()},t.prototype.getElementId=function(e){return this.get("id")+"-"+this.get("name")+"-"+e},t.prototype.registerElement=function(e){var t=e.get("id");this.get("shapesMap")[t]=e},t.prototype.unregisterElement=function(e){var t=e.get("id");delete this.get("shapesMap")[t]},t.prototype.moveElementTo=function(e,t){var n=Zve(t);e.attr("matrix",n)},t.prototype.addAnimation=function(e,t,n){var r=t.attr("opacity");Bae(r)&&(r=1),t.attr("opacity",0),t.animate({opacity:r},n)},t.prototype.removeAnimation=function(e,t,n){t.animate({opacity:0},n)},t.prototype.updateAnimation=function(e,t,n,r){t.animate(n,r)},t.prototype.updateElements=function(e,t){var n,r=this,i=this.get("animate"),o=this.get("animateOption");Hae(e.getChildren().slice(0),(function(e){var a,l,u=e.get("id"),c=r.getElementById(u),s=e.get("name");if(c)if(e.get("isComponent")){var d=e.get("component"),f=c.get("component"),h=Zle(d.cfg,(a=Wae(d.cfg),void 0===(l=gge)&&(l=[]),Tae(a,(function(e){return!Dae(l,e)}))));f.update(h),c.set(pge,"update")}else{var p=r.getReplaceAttrs(c,e);i&&o.update?r.updateAnimation(s,c,p,o.update):c.attr(p),e.isGroup()&&r.updateElements(e,c),Hae(vge,(function(t){c.set(t,e.get(t))})),function(e,t){if(e.getClip()||t.getClip()){var n=t.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};e.setClip(r)}else e.setClip(null)}}(c,e),n=c,c.set(pge,"update")}else{t.add(e);var v=t.getChildren();if(v.splice(v.length-1,1),n){var g=v.indexOf(n);v.splice(g+1,0,e)}else v.unshift(e);if(r.registerElement(e),e.set(pge,"add"),e.get("isComponent"))(d=e.get("component")).set("container",t);else e.isGroup()&&r.registerNewGroup(e);if(n=e,i){var m=r.get("isInit")?o.appear:o.enter;m&&r.addAnimation(s,e,m)}}}))},t.prototype.clearUpdateStatus=function(e){Hae(e.getChildren(),(function(e){e.set(pge,null)}))},t.prototype.clearOffScreenCache=function(){var e=this.get("offScreenGroup");e&&e.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},t.prototype.getDelegateObject=function(){var e;return(e={})[this.get("name")]=this,e.component=this,e},t.prototype.appendDelegateObject=function(e,t){var n=e.get("delegateObject");t.delegateObject||(t.delegateObject={}),Nle(t.delegateObject,n)},t.prototype.getReplaceAttrs=function(e,t){var n=e.attr(),r=t.attr();return Hae(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r},t.prototype.registerNewGroup=function(e){var t=this;Hae(e.getChildren(),(function(e){t.registerElement(e),e.set(pge,"add"),e.isGroup()&&t.registerNewGroup(e)}))},t.prototype.deleteElements=function(){var e=this,t=this.get("shapesMap"),n=[];Hae(t,(function(e,t){!e.get(pge)||e.destroyed?n.push([t,e]):e.set(pge,null)}));var r=this.get("animate"),i=this.get("animateOption");Hae(n,(function(n){var o=n[0],a=n[1];if(!a.destroyed){var l=a.get("name");if(r&&i.leave){var u=Nle({callback:function(){e.removeElement(a)}},i.leave);e.removeAnimation(l,a,u)}else e.removeElement(a)}delete t[o]}))},t.prototype.removeElement=function(e){if(e.get("isGroup")){var t=e.get("component");t&&t.destroy()}e.remove()},t}(hge),yge="…";function bge(e,t){return e.charCodeAt(t)>0&&e.charCodeAt(t)<128?1:2}var wge="…",_ge=2,xge=400;function kge(e){if(e.length>xge)return function(e){for(var t=e.map((function(e){var t=e.attr("text");return Bae(t)?"":""+t})),n=0,r=0,i=0;i<t.length;i+=1){for(var o=0,a=0;a<=t[i].length;a+=1){var l=t[i].charCodeAt(a);o+=l>=19968&&l<=40869?2:1}o>n&&(n=o,r=i)}return e[r].getBBox().width}(e);var t=0;return Hae(e,(function(e){var n=e.getBBox().width;t<n&&(t=n)})),t}function Cge(e,t,n,r){var i;void 0===r&&(r="tail");var o=null!==(i=t.attr("text"))&&void 0!==i?i:"";if("tail"===r){var a=Zle(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),l=uue(o,n,a,"…");return o!==l?(t.attr("text",l),t.set("tip",o),!0):(t.set("tip",null),!1)}var u=function(e,t){var n=t.getCanvasBBox();return e?n.width:n.height}(e,t),c=function(e){for(var t=0,n=0;n<e.length;n++)t+=bge(e,n);return t}(o),s=!1;if(n<u){var d=Math.floor(n/u*c)-_ge,f=void 0;f=d>=0?function(e,t,n){void 0===n&&(n="tail");var r=e.length,i="";if("tail"===n){for(var o=0,a=0;o<t&&o+bge(e,a)<=t;)i+=e[a],o+=bge(e,a),a++;i+=yge}else if("head"===n){for(o=0,a=r-1;o<t&&o+bge(e,a)<=t;)i+=e[a],o+=bge(e,a),a--;i=yge+i}else{for(var l="",u="",c=(o=0,0),s=r-1;o<t;){var d=bge(e,c),f=!1;d+o<=t&&(l+=e[c],c++,o+=d,f=!0);var h=bge(e,s);if(h+o<=t&&(u=e[s]+u,o+=h,s--,f=!0),!f)break}i=l+yge+u}return i}(o,d,r):wge,f&&(t.attr("text",f),s=!0)}return s?t.set("tip",o):t.set("tip",null),s}function Sge(e,t){var n=t.x,r=t.y,i=t.content,o=t.style,a=t.id,l=t.name,u=t.rotate,c=t.maxLength,s=t.autoEllipsis,d=t.isVertical,f=t.ellipsisPosition,h=t.background,p=e.addGroup({id:a+"-group",name:l+"-group",attrs:{x:n,y:r}}),v=p.addShape({type:"text",id:a,name:l,attrs:Sae({x:0,y:0,text:i},o)}),g=nge(Kle(h,"padding",0));c&&s&&Cge(!d,v,c-(g[1]+g[3]),f);if(h){var m=Kle(h,"style",{}),y=v.getCanvasBBox(),b=y.minX,w=y.minY,_=y.width,x=y.height;p.addShape("rect",{id:a+"-bg",name:a+"-bg",attrs:Sae({x:b-g[3],y:w-g[0],width:_+g[1]+g[3],height:x+g[0]+g[2]},m)}).toBack()}tge(p,n,r),ege(p,u,n,r)}const Oge={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"};var Ege=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Oge.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Oge.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Oge.lineColor,lineWidth:1}}}})},t.prototype.renderInner=function(e){this.renderLine(e),this.get("text")&&this.renderLabel(e)},t.prototype.renderLine=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Sae({x1:t.x,y1:t.y,x2:n.x,y2:n.y},r)})},t.prototype.getLabelPoint=function(e,t,n){var r;return((r="start"===n?0:"center"===n?.5:nle(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:ple(n)?n:1)>1||r<0)&&(r=1),{x:age(e.x,t.x,r),y:age(e.y,t.y,r)}},t.prototype.renderLabel=function(e){var t=this.get("text"),n=this.get("start"),r=this.get("end"),i=t.position,o=t.content,a=t.style,l=t.offsetX,u=t.offsetY,c=t.autoRotate,s=t.maxLength,d=t.autoEllipsis,f=t.ellipsisPosition,h=t.background,p=t.isVertical,v=void 0!==p&&p,g=this.getLabelPoint(n,r,i),m=g.x+l,y=g.y+u,b={id:this.getElementId("line-text"),name:"annotation-line-text",x:m,y:y,content:o,style:a,maxLength:s,autoEllipsis:d,ellipsisPosition:f,background:h,isVertical:v};if(c){var w=[r.x-n.x,r.y-n.y];b.rotate=Math.atan2(w[1],w[0])}Sge(e,b)},t}(mge),Ige=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Oge.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Oge.fontFamily}}})},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.renderInner=function(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("content"),o=this.get("style");Sge(e,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:o,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},t.prototype.resetLocation=function(){var e=this.getElementByLocalId("text-group");if(e){var t=this.getLocation(),n=t.x,r=t.y,i=this.get("rotate");tge(e,n,r),ege(e,i,n,r)}},t}(mge),Pge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},t.prototype.renderInner=function(e){this.renderArc(e)},t.prototype.getArcPath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,o=lge(t,n,r),a=lge(t,n,i),l=i-r>Math.PI?1:0,u=[["M",o.x,o.y]];if(i-r==2*Math.PI){var c=lge(t,n,r+Math.PI);u.push(["A",n,n,0,l,1,c.x,c.y]),u.push(["A",n,n,0,l,1,a.x,a.y])}else u.push(["A",n,n,0,l,1,a.x,a.y]);return u},t.prototype.renderArc=function(e){var t=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Sae({path:t},n)})},t}(mge),Mge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Oge.regionColor,opacity:.4}}})},t.prototype.renderInner=function(e){this.renderRegion(e)},t.prototype.renderRegion=function(e){var t=this.get("start"),n=this.get("end"),r=this.get("style"),i=ige({start:t,end:n});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Sae({x:i.x,y:i.y,width:i.width,height:i.height},r)})},t}(mge),Rge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},t.prototype.renderInner=function(e){this.renderImage(e)},t.prototype.getImageAttrs=function(){var e=this.get("start"),t=this.get("end"),n=this.get("style"),r=ige({start:e,end:t}),i=this.get("src");return Sae({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},t.prototype.renderImage=function(e){this.addShape(e,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},t}(mge),Age=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Oge.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Oge.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Oge.fontFamily}}}})},t.prototype.renderInner=function(e){Kle(this.get("line"),"display")&&this.renderLine(e),Kle(this.get("text"),"display")&&this.renderText(e),Kle(this.get("point"),"display")&&this.renderPoint(e),this.get("autoAdjust")&&this.autoAdjust(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},t.prototype.renderPoint=function(e){var t=this.getShapeAttrs().point;this.addShape(e,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:t})},t.prototype.renderLine=function(e){var t=this.getShapeAttrs().line;this.addShape(e,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:t})},t.prototype.renderText=function(e){var t=this.getShapeAttrs().text,n=t.x,r=t.y,i=t.text,o=Oae(t,["x","y","text"]),a=this.get("text"),l=a.background,u=a.maxLength,c=a.autoEllipsis,s=a.isVertival,d=a.ellipsisPosition;Sge(e,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:o,background:l,maxLength:u,autoEllipsis:c,isVertival:s,ellipsisPosition:d})},t.prototype.autoAdjust=function(e){var t=this.get("direction"),n=this.get("x"),r=this.get("y"),i=Kle(this.get("line"),"length",0),o=this.get("coordinateBBox"),a=e.getBBox(),l=a.minX,u=a.maxX,c=a.minY,s=a.maxY,d=e.findById(this.getElementId("text-group")),f=e.findById(this.getElementId("text")),h=e.findById(this.getElementId("line"));if(o&&d){var p=d.attr("x"),v=d.attr("y"),g=f.getCanvasBBox(),m=g.width,y=g.height,b=0,w=0;if(n+l<=o.minX)if("leftward"===t)b=1;else{var _=o.minX-(n+l);p=d.attr("x")+_}else if(n+u>=o.maxX)if("rightward"===t)b=-1;else{_=n+u-o.maxX;p=d.attr("x")-_}if(b&&(h&&h.attr("path",[["M",0,0],["L",i*b,0]]),p=(i+2+m)*b),r+c<=o.minY)if("upward"===t)w=1;else{_=o.minY-(r+c);v=d.attr("y")+_}else if(r+s>=o.maxY)if("downward"===t)w=-1;else{_=r+s-o.maxY;v=d.attr("y")-_}w&&(h&&h.attr("path",[["M",0,0],["L",0,i*w]]),v=(i+2+y)*w),p===d.attr("x")&&v===d.attr("y")||tge(d,p,v)}},t.prototype.getShapeAttrs=function(){var e=Kle(this.get("line"),"display"),t=Kle(this.get("point"),"style",{}),n=Kle(this.get("line"),"style",{}),r=Kle(this.get("text"),"style",{}),i=this.get("direction"),o=e?Kle(this.get("line"),"length",0):0,a=0,l=0,u="top",c="start";switch(i){case"upward":l=-1,u="bottom";break;case"downward":l=1,u="top";break;case"leftward":a=-1,c="end";break;case"rightward":a=1,c="start"}return{point:Sae({x:0,y:0},t),line:Sae({path:[["M",0,0],["L",o*a,o*l]]},n),text:Sae({x:(o+2)*a,y:(o+2)*l,text:Kle(this.get("text"),"content",""),textBaseline:u,textAlign:c},r)}},t}(mge),jge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Oge.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Oge.textColor,fontFamily:Oge.fontFamily}}}})},t.prototype.renderInner=function(e){var t=Kle(this.get("region"),"style",{});Kle(this.get("text"),"style",{});var n=this.get("lineLength")||0,r=this.get("points");if(r.length){var i=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),o=Math.max.apply(Math,t),a=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}(r),o=[];o.push(["M",r[0].x,i.minY-n]),r.forEach((function(e){o.push(["L",e.x,e.y])})),o.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(e,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Sae({path:o},t)}),Sge(e,Sae({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},t}(mge),Dge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},t.prototype.renderInner=function(e){var t=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(e,{id:this.getElementId("region-filter"),capture:!1});Hae(this.get("shapes"),(function(e,n){var r=e.get("type"),o=Lle(e.attr());t.adjustShapeAttrs(o),t.addShape(i,{id:t.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:o})}));var o=ige({start:n,end:r});i.setClip({type:"rect",attrs:{x:o.minX,y:o.minY,width:o.width,height:o.height}})},t.prototype.adjustShapeAttrs=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},t}(mge),Tge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"shape",draw:iue})},t.prototype.renderInner=function(e){var t=this.get("render");Lae(t)&&t(e)},t}(mge),Fge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},t.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},t.prototype.setCapture=function(e){var t=e?"auto":"none";this.getContainer().style.pointerEvents=t,this.set("capture",e)},t.prototype.getBBox=function(){var e=this.getContainer();return oge(parseFloat(e.style.left)||0,parseFloat(e.style.top)||0,e.clientWidth,e.clientHeight)},t.prototype.clear=function(){rge(this.get("container"))},t.prototype.destroy=function(){this.removeEvent(),this.removeDom(),e.prototype.destroy.call(this)},t.prototype.init=function(){e.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},t.prototype.initCapture=function(){this.setCapture(this.get("capture"))},t.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},t.prototype.initDom=function(){},t.prototype.initContainer=function(){var e=this.get("container");if(Bae(e)){e=this.createDom();var t=this.get("parent");nle(t)&&(t=document.getElementById(t),this.set("parent",t)),t.appendChild(e),this.get("containerId")&&e.setAttribute("id",this.get("containerId")),this.set("container",e)}else nle(e)&&(e=document.getElementById(e),this.set("container",e));this.get("parent")||this.set("parent",e.parentNode)},t.prototype.resetStyles=function(){var e=this.get("domStyles"),t=this.get("defaultStyles");e=e?Hle({},t,e):t,this.set("domStyles",e)},t.prototype.applyStyles=function(){var e=this.get("domStyles");if(e){var t=this.getContainer();this.applyChildrenStyles(t,e);var n,r=this.get("containerClassName");if(r&&(n=r,t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))Vue(t,e[r])}},t.prototype.applyChildrenStyles=function(e,t){Hae(t,(function(t,n){Hae(e.getElementsByClassName(n),(function(e){Vue(e,t)}))}))},t.prototype.applyStyle=function(e,t){Vue(t,this.get("domStyles")[e])},t.prototype.createDom=function(){return Fue(this.get("containerTpl"))},t.prototype.initEvent=function(){},t.prototype.removeDom=function(){var e=this.get("container");e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.removeEvent=function(){},t.prototype.updateInner=function(e){_le(e,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},t.prototype.resetPosition=function(){},t}(hge),Nge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},t.prototype.render=function(){var e=this.getContainer(),t=this.get("html");rge(e);var n=Lae(t)?t(e):t;if(Tle(n))e.appendChild(n);else if(nle(n)||ple(n)){var r=Fue(""+n);r&&e.appendChild(r)}this.resetPosition()},t.prototype.resetPosition=function(){var e=this.getContainer(),t=this.getLocation(),n=t.x,r=t.y,i=this.get("alignX"),o=this.get("alignY"),a=this.get("offsetX"),l=this.get("offsetY"),u=Bue(e),c=Lue(e),s={x:n,y:r};"middle"===i?s.x-=Math.round(u/2):"right"===i&&(s.x-=Math.round(u)),"middle"===o?s.y-=Math.round(c/2):"bottom"===o&&(s.y-=Math.round(c)),a&&(s.x+=a),l&&(s.y+=l),Vue(e,{position:"absolute",left:s.x+"px",top:s.y+"px",zIndex:this.get("zIndex")})},t}(Fge);const Lge=Object.freeze(Object.defineProperty({__proto__:null,Arc:Pge,DataMarker:Age,DataRegion:jge,Html:Nge,Image:Rge,Line:Ege,Region:Mge,RegionFilter:Dge,Shape:Tge,Text:Ige},Symbol.toStringTag,{value:"Module"}));function Bge(e,t,n){var r=t+"Style",i=null;return Hae(n,(function(t,n){e[n]&&t[r]&&(i||(i={}),Nle(i,t[r]))})),i}var Vge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Oge.lineColor}},tickLine:{style:{lineWidth:1,stroke:Oge.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Oge.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Oge.textColor,fontFamily:Oge.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Oge.textColor,textBaseline:"middle",fontFamily:Oge.fontFamily,textAlign:"center"},iconStyle:{fill:Oge.descriptionIconFill,stroke:Oge.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Oge.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},t.prototype.renderInner=function(e){this.get("line")&&this.drawLine(e),this.drawTicks(e),this.get("title")&&this.drawTitle(e)},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("ticks")},t.prototype.setItems=function(e){this.update({ticks:e})},t.prototype.updateItem=function(e,t){Nle(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("label-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n,this.updateTickStates(e)},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("tickStates"),n=[];return Hae(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Hae(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Tae(n,(function(n){return t.hasState(n,e)}))},t.prototype.getSidePoint=function(e,t){var n=this.getSideVector(t,e);return{x:e.x+n[0],y:e.y+n[1]}},t.prototype.getTextAnchor=function(e){var t;return gle(e[0],0)?t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t},t.prototype.getTextBaseline=function(e){var t;return gle(e[1],0)?t="middle":e[1]>0?t="top":e[1]<0&&(t="bottom"),t},t.prototype.processOverlap=function(e){},t.prototype.drawLine=function(e){var t=this.getLinePath(),n=this.get("line");this.addShape(e,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Nle({path:t},n.style)})},t.prototype.getTickLineItems=function(e){var t=this,n=[],r=this.get("tickLine"),i=r.alignTick,o=r.length,a=1;return e.length>=2&&(a=e[1].value-e[0].value),Hae(e,(function(e){var r=e.point;i||(r=t.getTickPoint(e.value-a/2));var l=t.getSidePoint(r,o);n.push({startPoint:r,tickValue:e.value,endPoint:l,tickId:e.id,id:"tickline-"+e.id})})),n},t.prototype.getSubTickLineItems=function(e){var t=[],n=this.get("subTickLine"),r=n.count,i=e.length;if(i>=2)for(var o=0;o<i-1;o++)for(var a=e[o],l=e[o+1],u=0;u<r;u++){var c=(u+1)/(r+1),s=(1-c)*a.tickValue+c*l.tickValue,d=this.getTickPoint(s),f=this.getSidePoint(d,n.length);t.push({startPoint:d,endPoint:f,tickValue:s,id:"sub-"+a.id+"-"+u})}return t},t.prototype.getTickLineAttrs=function(e,t,n,r){var i=this.get(t).style,o={points:[e.startPoint,e.endPoint]},a=Kle(this.get("theme"),["tickLine","style"],{});i=Lae(i)?Nle({},a,i(o,n,r)):i;var l=e.startPoint,u=e.endPoint;return Sae({x1:l.x,y1:l.y,x2:u.x,y2:u.y},i)},t.prototype.drawTick=function(e,t,n,r,i){this.addShape(t,{type:"line",id:this.getElementId(e.id),name:"axis-"+n,attrs:this.getTickLineAttrs(e,n,r,i)})},t.prototype.drawTickLines=function(e){var t=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),o=this.addGroup(e,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),a=this.get("tickLine");if(Hae(i,(function(n,r){if(a.displayWithLabel){var l=t.getElementId("label-"+n.tickId);e.findById(l)&&t.drawTick(n,o,"tickLine",r,i)}else t.drawTick(n,o,"tickLine",r,i)})),r){var l=this.getSubTickLineItems(i);Hae(l,(function(e,n){t.drawTick(e,o,"subTickLine",n,l)}))}},t.prototype.processTicks=function(){var e=this;Hae(this.get("ticks"),(function(t){t.point=e.getTickPoint(t.value),Bae(t.id)&&(t.id=t.name)}))},t.prototype.drawTicks=function(e){var t=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(e),this.get("tickLine")&&this.drawTickLines(e),Hae(this.get("ticks"),(function(n){t.applyTickStates(n,e)}))},t.prototype.optimizeTicks=function(){var e=this.get("optimize"),t=this.get("ticks");if(e&&e.enable&&e.threshold>0){var n=oue(t);if(n>e.threshold){var r=Math.ceil(n/e.threshold),i=t.filter((function(e,t){return t%r==0}));this.set("ticks",i),this.set("originalTicks",t)}}},t.prototype.getLabelAttrs=function(e,t,n){var r=this.get("label"),i=r.offset,o=r.offsetX,a=r.offsetY,l=r.rotate,u=r.formatter,c=this.getSidePoint(e.point,i),s=this.getSideVector(i,c),d=u?u(e.name,e,t):e.name,f=r.style;f=Lae(f)?Kle(this.get("theme"),["label","style"],{}):f;var h=Nle({x:c.x+o,y:c.y+a,text:d,textAlign:this.getTextAnchor(s),textBaseline:this.getTextBaseline(s)},f);return l&&(h.matrix=Jve(c,l)),h},t.prototype.drawLabels=function(e){var t=this,n=this.get("ticks"),r=this.addGroup(e,{name:"axis-label-group",id:this.getElementId("label-group")});Hae(n,(function(e,i){t.addShape(r,{type:"text",name:"axis-label",id:t.getElementId("label-"+e.id),attrs:t.getLabelAttrs(e,i,n),delegateObject:{tick:e,item:e,index:i}})})),this.processOverlap(r);var i=r.getChildren(),o=Kle(this.get("theme"),["label","style"],{}),a=this.get("label"),l=a.style,u=a.formatter;if(Lae(l)){var c=i.map((function(e){return Kle(e.get("delegateObject"),"tick")}));Hae(i,(function(e,t){var n=e.get("delegateObject").tick,r=u?u(n.name,n,t):n.name,i=Nle({},o,l(r,t,c));e.attr(i)}))}},t.prototype.getTitleAttrs=function(){var e=this.get("title"),t=e.style,n=e.position,r=e.offset,i=e.spacing,o=void 0===i?0:i,a=e.autoRotate,l=t.fontSize,u=.5;"start"===n?u=0:"end"===n&&(u=1);var c=this.getTickPoint(u),s=this.getSidePoint(c,r||o+l/2),d=Nle({x:s.x,y:s.y,text:e.text},t),f=e.rotate,h=f;if(Bae(f)&&a){h=ose(this.getAxisVector(c),[1,0],!0)}if(h){var p=Jve(s,h);d.matrix=p}return d},t.prototype.drawTitle=function(e){var t,n=this.getTitleAttrs(),r=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:n});(null===(t=this.get("title"))||void 0===t?void 0:t.description)&&this.drawDescriptionIcon(e,r,n.matrix)},t.prototype.drawDescriptionIcon=function(e,t,n){var r=this.addGroup(e,{name:"axis-description",id:this.getElementById("description")}),i=t.getBBox(),o=i.maxX,a=i.maxY,l=i.height,u=this.get("title").iconStyle,c=l/2,s=c/6,d=o+4,f=a-l/2,h=[d+c,f-c],p=h[0],v=h[1],g=[p+c,v+c],m=g[0],y=g[1],b=[p,y+c],w=b[0],_=b[1],x=[d,v+c],k=x[0],C=x[1],S=[d+c,f-l/4],O=S[0],E=S[1],I=[O,E+s],P=I[0],M=I[1],R=[P,M+s],A=R[0],j=R[1],D=[A,j+3*c/4],T=D[0],F=D[1];this.addShape(r,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:Sae({path:[["M",p,v],["A",c,c,0,0,1,m,y],["A",c,c,0,0,1,w,_],["A",c,c,0,0,1,k,C],["A",c,c,0,0,1,p,v],["M",O,E],["L",P,M],["M",A,j],["L",T,F]],lineWidth:s,matrix:n},u)}),this.addShape(r,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:d,y:f-l/2,width:l,height:l,stroke:"#000",fill:"#000",opacity:0,matrix:n,cursor:"pointer"}})},t.prototype.applyTickStates=function(e,t){if(this.getItemStates(e).length){var n=this.get("tickStates"),r=this.getElementId("label-"+e.id),i=t.findById(r);if(i){var o=Bge(e,"label",n);o&&i.attr(o)}var a=this.getElementId("tickline-"+e.id),l=t.findById(a);if(l){var u=Bge(e,"tickLine",n);u&&l.attr(u)}}},t.prototype.updateTickStates=function(e){var t=this.getItemStates(e),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+e.id),o=this.get("tickLine"),a=this.getElementByLocalId("tickline-"+e.id);if(t.length){if(i){var l=Bge(e,"label",n);l&&i.attr(l)}if(a){var u=Bge(e,"tickLine",n);u&&a.attr(u)}}else i&&i.attr(r.style),a&&a.attr(o.style)},t}(mge);function zge(e,t,n,r){var i=t.getChildren(),o=!1;return Hae(i,(function(t){var i=Cge(e,t,n,r);o=o||i})),o}function Hge(e,t,n){return zge(e,t,n,"tail")}const Wge=Object.freeze(Object.defineProperty({__proto__:null,ellipsisHead:function(e,t,n){return zge(e,t,n,"head")},ellipsisMiddle:function(e,t,n){return zge(e,t,n,"middle")},ellipsisTail:Hge,getDefault:function(){return Hge}},Symbol.toStringTag,{value:"Module"}));function Uge(e){var t=function(e){var t=e.attr("matrix");return t&&1!==t[0]}(e)?function(e){var t=[0,0,0];return Wce(t,[1,0,0],e),Math.atan2(t[1],t[0])}(e.attr("matrix")):0;return t%360}function Gge(e,t,n,r){var i=!1,o=Uge(t),a=e?Math.abs(n.attr("y")-t.attr("y")):Math.abs(n.attr("x")-t.attr("x")),l=(e?n.attr("y")>t.attr("y"):n.attr("x")>t.attr("x"))?t.getBBox():n.getBBox();if(e){var u=Math.abs(Math.cos(o));i=uge(u,0,Math.PI/180)?l.width+r>a:l.height/u+r>a}else{u=Math.abs(Math.sin(o));i=uge(u,0,Math.PI/180)?l.width+r>a:l.height/u+r>a}return i}function Yge(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,o=t.getChildren().slice().filter((function(e){return e.get("visible")}));if(!o.length)return!1;var a=!1;n&&o.reverse();for(var l=o.length,u=o[0],c=1;c<l;c++){var s=o[c];s.getBBox(),Gge(e,u,s,i)?(s.hide(),a=!0):u=s}return a}function $ge(e,t,n){var r=(null==n?void 0:n.minGap)||0,i=t.getChildren().slice();if(i.length<2)return!1;var o=!1,a=i[0],l=a.getBBox(),u=i[1],c=i.length,s=Uge(a),d=e?Math.abs(u.attr("y")-a.attr("y")):Math.abs(u.attr("x")-a.attr("x")),f=0;if(e){var h=Math.abs(Math.cos(s));if(uge(h,0,Math.PI/180))f=(kge(i)+r)/d;else f=(l.height/h+r)/d}else{h=Math.abs(Math.sin(s));if(uge(h,0,Math.PI/180))f=(kge(i)+r)/d;else f=(l.height/h+r)/d}if(f>1){f=Math.ceil(f);for(var p=0;p<c;p++)p%f!=0&&(i[p].hide(),o=!0)}return o}function qge(e,t,n,r){var i=$ge(e,t,r);return Yge(e,t,!1)&&(i=!0),i}const Kge=Object.freeze(Object.defineProperty({__proto__:null,equidistance:qge,equidistanceWithReverseBoth:function(e,t,n,r){var i=t.getChildren().slice(),o=$ge(e,t,r);if(i.length>2){var a=i[0],l=i[i.length-1];a.get("visible")||(a.show(),Yge(e,t,!1,r)&&(o=!0)),l.get("visible")||(l.show(),Yge(e,t,!0,r)&&(o=!0))}return o},getDefault:function(){return qge},reserveBoth:function(e,t,n,r){var i=(null==r?void 0:r.minGap)||0,o=t.getChildren().slice();if(o.length<=2)return!1;for(var a=!1,l=o.length,u=o[0],c=o[l-1],s=u,d=1;d<l-1;d++){var f=o[d];f.getBBox(),Gge(e,s,f,i)?(f.hide(),a=!0):s=f}return Gge(e,s,c,i)&&(s.hide(),a=!0),a},reserveFirst:function(e,t,n,r){return Yge(e,t,!1,r)},reserveLast:function(e,t,n,r){return Yge(e,t,!0,r)}},Symbol.toStringTag,{value:"Module"}));function Xge(e,t,n,r){var i=t.getChildren();if(!i.length)return!1;if(!e&&i.length<2)return!1;var o=kge(i),a=!1;e?a=!!n&&o>n:a=o>Math.abs(i[1].attr("x")-i[0].attr("x"));a&&function(e,t){Hae(e,(function(e){var n=Jve({x:e.attr("x"),y:e.attr("y")},t);e.attr("matrix",n)}))}(i,r(n,o));return a}function Jge(e,t,n,r){return Xge(e,t,n,(function(){return ple(r)?r:e?Oge.verticalAxisRotate:Oge.horizontalAxisRotate}))}const Zge=Object.freeze(Object.defineProperty({__proto__:null,fixedAngle:Jge,getDefault:function(){return Jge},unfixedAngle:function(e,t,n){return Xge(e,t,n,(function(t,n){if(!t)return e?Oge.verticalAxisRotate:Oge.horizontalAxisRotate;if(e)return-Math.acos(t/n);var r=0;return(t>n||(r=Math.asin(t/n))>Math.PI/4)&&(r=Math.PI/4),r}))}},Symbol.toStringTag,{value:"Module"})),Qge=Object.freeze(Object.defineProperty({__proto__:null,autoEllipsis:Wge,autoHide:Kge,autoRotate:Zge},Symbol.toStringTag,{value:"Module"}));var eme,tme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getLinePath=function(){var e=this.get("start"),t=this.get("end"),n=[];return n.push(["M",e.x,e.y]),n.push(["L",t.x,t.y]),n},t.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),n=this.get("end"),r=e.prototype.getInnerLayoutBBox.call(this),i=Math.min(t.x,n.x,r.x),o=Math.min(t.y,n.y,r.y),a=Math.max(t.x,n.x,r.maxX),l=Math.max(t.y,n.y,r.maxY);return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:l,width:a-i,height:l-o}},t.prototype.isVertical=function(){var e=this.get("start"),t=this.get("end");return gle(e.x,t.x)},t.prototype.isHorizontal=function(){var e=this.get("start"),t=this.get("end");return gle(e.y,t.y)},t.prototype.getTickPoint=function(e){var t=this.get("start"),n=this.get("end"),r=n.x-t.x,i=n.y-t.y;return{x:t.x+r*e,y:t.y+i*e}},t.prototype.getSideVector=function(e){var t=Jce([0,0],this.getAxisVector()),n=this.get("verticalFactor");return qce([0,0],[t[1],-1*t[0]],e*n)},t.prototype.getAxisVector=function(){var e=this.get("start"),t=this.get("end");return[t.x-e.x,t.y-e.y]},t.prototype.processOverlap=function(e){var t=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),o=this.get("title"),a=this.get("verticalLimitLength"),l=i.offset,u=a,c=0,s=0;if(o&&(c=o.style.fontSize,s=o.spacing),u&&(u=u-l-s-c),Hae(this.get("overlapOrder"),(function(n){i[n]&&t.canProcessOverlap(n)&&t.autoProcessOverlap(n,i[n],e,u)})),o&&Bae(o.offset)){var d=e.getCanvasBBox(),f=n?d.width:d.height;o.offset=l+f+s+c/2}}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Bae(t.rotate)},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,o=this.isVertical(),a=!1,l=Qge[e];if(!0===t)this.get("label"),a=l.getDefault()(o,n,r);else if(Lae(t))a=t(o,n,r);else if(zae(t)){var u=t;l[u.type]&&(a=l[u.type](o,n,r,u.cfg))}else l[t]&&(a=l[t](o,n,r));if("autoRotate"===e){if(a){var c=n.getChildren(),s=this.get("verticalFactor");Hae(c,(function(e){if("center"===e.attr("textAlign")){var t=s>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Hae(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(Vge),nme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getLinePath=function(){var e=this.get("center"),t=e.x,n=e.y,r=this.get("radius"),i=r,o=this.get("startAngle"),a=this.get("endAngle"),l=[];if(Math.abs(a-o)===2*Math.PI)l=[["M",t,n-i],["A",r,i,0,1,1,t,n+i],["A",r,i,0,1,1,t,n-i],["Z"]];else{var u=this.getCirclePoint(o),c=this.getCirclePoint(a),s=Math.abs(a-o)>Math.PI?1:0,d=o>a?0:1;l=[["M",t,n],["L",u.x,u.y],["A",r,i,0,s,d,c.x,c.y],["L",t,n]]}return l},t.prototype.getTickPoint=function(e){var t=this.get("startAngle"),n=t+(this.get("endAngle")-t)*e;return this.getCirclePoint(n)},t.prototype.getSideVector=function(e,t){var n=this.get("center"),r=[t.x-n.x,t.y-n.y];return qce(r,r,this.get("verticalFactor")*e/Xce(r)),r},t.prototype.getAxisVector=function(e){var t=this.get("center"),n=[e.x-t.x,e.y-t.y];return[n[1],-1*n[0]]},t.prototype.getCirclePoint=function(e,t){var n=this.get("center");return t=t||this.get("radius"),{x:n.x+Math.cos(e)*t,y:n.y+Math.sin(e)*t}},t.prototype.canProcessOverlap=function(e){var t=this.get("label");return"autoRotate"!==e||Bae(t.rotate)},t.prototype.processOverlap=function(e){var t=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),o=n.offset,a=i,l=0,u=0;if(r&&(l=r.style.fontSize,u=r.spacing),a&&(a=a-o-u-l),Hae(this.get("overlapOrder"),(function(r){n[r]&&t.canProcessOverlap(r)&&t.autoProcessOverlap(r,n[r],e,a)})),r&&Bae(r.offset)){var c=e.getCanvasBBox().height;r.offset=o+c+u+l/2}},t.prototype.autoProcessOverlap=function(e,t,n,r){var i=this,o=!1,a=Qge[e];if(r>0)if(!0===t)o=a.getDefault()(!1,n,r);else if(Lae(t))o=t(!1,n,r);else if(zae(t)){var l=t;a[l.type]&&(o=a[l.type](!1,n,r,l.cfg))}else a[t]&&(o=a[t](!1,n,r));if("autoRotate"===e){if(o){var u=n.getChildren(),c=this.get("verticalFactor");Hae(u,(function(e){if("center"===e.attr("textAlign")){var t=c>0?"end":"start";e.attr("textAlign",t)}}))}}else if("autoHide"===e){Hae(n.getChildren().slice(0),(function(e){e.get("visible")||(i.get("isRegister")&&i.unregisterElement(e),e.remove())}))}},t}(Vge),rme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Oge.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Oge.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Oge.fontFamily}},textBackground:{padding:5,style:{stroke:Oge.lineColor}}}})},t.prototype.renderInner=function(e){this.get("line")&&this.renderLine(e),this.get("text")&&(this.renderText(e),this.renderBackground(e))},t.prototype.renderText=function(e){var t=this.get("text"),n=t.style,r=t.autoRotate,i=t.content;if(!Bae(i)){var o=this.getTextPoint(),a=null;if(r)a=Jve(o,this.getRotateAngle());this.addShape(e,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Sae(Sae(Sae({},o),{text:i,matrix:a}),n)})}},t.prototype.renderLine=function(e){var t=this.getLinePath(),n=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Sae({path:t},n)})},t.prototype.renderBackground=function(e){var t=this.getElementId("text"),n=e.findById(t),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),o=nge(r.padding),a=r.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Sae({x:i.x-o[3],y:i.y-o[0],width:i.width+o[1]+o[3],height:i.height+o[0]+o[2],matrix:n.attr("matrix")},a)}).toBack()}},t}(mge),ime=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"line",locationType:"region",start:null,end:null})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text").position,i=Math.atan2(n.y-t.y,n.x-t.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return dge(t,n,r.position,r.offset)},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.start,n=e.end;return[["M",t.x,t.y],["L",n.x,n.y]]},t}(rme),ome=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},t.prototype.getRotateAngle=function(){var e=this.getLocation(),t=e.startAngle,n=e.endAngle;return"start"===this.get("text").position?t+Math.PI/2:n-Math.PI/2},t.prototype.getTextPoint=function(){var e=this.get("text"),t=e.position,n=e.offset,r=this.getLocation(),i=r.center,o=r.radius,a=r.startAngle,l=r.endAngle,u="start"===t?a:l,c=this.getRotateAngle()-Math.PI,s=lge(i,o,u),d=Math.cos(c)*n,f=Math.sin(c)*n;return{x:s.x+d,y:s.y+f}},t.prototype.getLinePath=function(){var e=this.getLocation(),t=e.center,n=e.radius,r=e.startAngle,i=e.endAngle,o=null;if(i-r==2*Math.PI){var a=t.x,l=t.y;o=[["M",a,l-n],["A",n,n,0,1,1,a,l+n],["A",n,n,0,1,1,a,l-n],["Z"]]}else{var u=lge(t,n,r),c=lge(t,n,i),s=Math.abs(i-r)>Math.PI?1:0,d=r>i?0:1;o=[["M",u.x,u.y],["A",n,n,0,s,d,c.x,c.y]]}return o},t}(rme),ame="g2-crosshair",lme=ame+"-line",ume=ame+"-text";const cme=((eme={})[""+ame]={position:"relative"},eme[""+lme]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},eme[""+ume]={position:"absolute",color:Oge.textColor,fontFamily:Oge.fontFamily},eme);var sme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+ame+'"></div>',crosshairTpl:'<div class="'+lme+'"></div>',textTpl:'<span class="'+ume+'">{content}</span>',domStyles:null,containerClassName:ame,defaultStyles:cme,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},t.prototype.render=function(){this.resetText(),this.resetPosition()},t.prototype.initCrossHair=function(){var e=this.getContainer(),t=Fue(this.get("crosshairTpl"));e.appendChild(t),this.applyStyle(lme,t),this.set("crosshairEl",t)},t.prototype.getTextPoint=function(){var e=this.getLocation(),t=e.start,n=e.end,r=this.get("text");return dge(t,n,r.position,r.offset)},t.prototype.resetText=function(){var e=this.get("text"),t=this.get("textEl");if(e){var n=e.content;if(!t){var r=this.getContainer();t=Fue(Sle(this.get("textTpl"),e)),r.appendChild(t),this.applyStyle(ume,t),this.set("textEl",t)}t.innerHTML=n}else t&&t.remove()},t.prototype.isVertical=function(e,t){return e.x===t.x},t.prototype.resetPosition=function(){var e=this.get("crosshairEl");e||(this.initCrossHair(),e=this.get("crosshairEl"));var t=this.get("start"),n=this.get("end"),r=Math.min(t.x,n.x),i=Math.min(t.y,n.y);this.isVertical(t,n)?Vue(e,{width:"1px",height:sge(Math.abs(n.y-t.y))}):Vue(e,{height:"1px",width:sge(Math.abs(n.x-t.x))}),Vue(e,{top:sge(i),left:sge(r)}),this.alignText()},t.prototype.alignText=function(){var e=this.get("textEl");if(e){var t=this.get("text").align,n=e.clientWidth,r=this.getTextPoint();switch(t){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}Vue(e,{top:sge(r.y),left:sge(r.x)})}},t.prototype.updateInner=function(t){_le(t,"text")&&this.resetText(),e.prototype.updateInner.call(this,t)},t}(Fge);const dme=Object.freeze(Object.defineProperty({__proto__:null,Base:rme,Circle:ome,Html:sme,Line:ime},Symbol.toStringTag,{value:"Module"}));var fme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Oge.lineColor}}}})},t.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},t.prototype.renderInner=function(e){this.drawGrid(e)},t.prototype.getAlternatePath=function(e,t){var n=this.getGridPath(e),r=t.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},t.prototype.getPathStyle=function(){return this.get("line").style},t.prototype.drawGrid=function(e){var t=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),o=null;Hae(r,(function(a,l){var u=a.id||l;if(n){var c=t.getPathStyle();c=Lae(c)?c(a,l,r):c;var s=t.getElementId("line-"+u),d=t.getGridPath(a.points);t.addShape(e,{type:"path",name:"grid-line",id:s,attrs:Nle({path:d},c)})}if(i&&l>0){var f=t.getElementId("region-"+u),h=l%2==0;if(nle(i))h&&t.drawAlternateRegion(f,e,o.points,a.points,i);else{var p=h?i[1]:i[0];t.drawAlternateRegion(f,e,o.points,a.points,p)}}o=a}))},t.prototype.drawAlternateRegion=function(e,t,n,r,i){var o=this.getAlternatePath(n,r);this.addShape(t,{type:"path",id:e,name:"grid-region",attrs:{path:o,fill:i}})},t}(mge);var hme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"circle",center:null,closed:!0})},t.prototype.getGridPath=function(e,t){var n,r,i,o,a,l,u=this.getLineType(),c=this.get("closed"),s=[];if(e.length)if("circle"===u){var d=this.get("center"),f=e[0],h=(n=d.x,r=d.y,i=f.x,o=f.y,a=i-n,l=o-r,Math.sqrt(a*a+l*l)),p=t?0:1;c?(s.push(["M",d.x,d.y-h]),s.push(["A",h,h,0,0,p,d.x,d.y+h]),s.push(["A",h,h,0,0,p,d.x,d.y-h]),s.push(["Z"])):Hae(e,(function(e,t){0===t?s.push(["M",e.x,e.y]):s.push(["A",h,h,0,0,p,e.x,e.y])}))}else Hae(e,(function(e,t){0===t?s.push(["M",e.x,e.y]):s.push(["L",e.x,e.y])})),c&&s.push(["Z"]);return s},t}(fme),pme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"line"})},t.prototype.getGridPath=function(e){var t=[];return Hae(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t}(fme),vme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},t.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=t.width,o=t.height;return n&&(i=Math.min(i,n)),r&&(o=Math.min(o,r)),oge(t.minX,t.minY,i,o)},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetLocation()},t.prototype.resetLocation=function(){var e=this.get("x"),t=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:e+n,y:t+r})},t.prototype.applyOffset=function(){this.resetLocation()},t.prototype.getDrawPoint=function(){return this.get("currentPoint")},t.prototype.setDrawPoint=function(e){return this.set("currentPoint",e)},t.prototype.renderInner=function(e){this.resetDraw(),this.get("title")&&this.drawTitle(e),this.drawLegendContent(e),this.get("background")&&this.drawBackground(e)},t.prototype.drawBackground=function(e){var t=this.get("background"),n=e.getBBox(),r=nge(t.padding),i=Sae({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},t.prototype.drawTitle=function(e){var t=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,o=n.text,a=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Sae({text:o,x:t.x,y:t.y},i)}).getBBox();this.set("currentPoint",{x:t.x,y:a.maxY+r})},t.prototype.resetDraw=function(){var e=this.get("background"),t={x:0,y:0};if(e){var n=nge(e.padding);t.x=n[3],t.y=n[0]}this.set("currentPoint",t)},t}(mge),gme={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},mme={fill:Oge.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Oge.fontFamily,fontWeight:"normal",lineHeight:12},yme="navigation-arrow-right",bme="navigation-arrow-left",wme={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},_me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var n=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:n},100):e.attr({matrix:n})}},t}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Oge.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Oge.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:gme,itemName:{spacing:16,style:mme},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:mme,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Oge.uncheckedColor},markerStyle:{fill:Oge.uncheckedColor,stroke:Oge.uncheckedColor}},inactive:{nameStyle:{fill:Oge.uncheckedColor},markerStyle:{opacity:.2}}}}})},t.prototype.isList=function(){return!0},t.prototype.getItems=function(){return this.get("items")},t.prototype.setItems=function(e){this.update({items:e})},t.prototype.updateItem=function(e,t){Nle(e,t),this.clear(),this.render()},t.prototype.clearItems=function(){var e=this.getElementByLocalId("item-group");e&&e.clear()},t.prototype.setItemState=function(e,t,n){e[t]=n;var r=this.getElementByLocalId("item-"+e.id);if(r){var i=this.getItems().indexOf(e),o=this.createOffScreenGroup(),a=this.drawItem(e,i,this.getItemHeight(),o);this.updateElements(a,r),this.clearUpdateStatus(r)}},t.prototype.hasState=function(e,t){return!!e[t]},t.prototype.getItemStates=function(e){var t=this.get("itemStates"),n=[];return Hae(t,(function(t,r){e[r]&&n.push(r)})),n},t.prototype.clearItemsState=function(e){var t=this;Hae(this.getItemsByState(e),(function(n){t.setItemState(n,e,!1)}))},t.prototype.getItemsByState=function(e){var t=this,n=this.getItems();return Tae(n,(function(n){return t.hasState(n,e)}))},t.prototype.drawLegendContent=function(e){this.processItems(),this.drawItems(e)},t.prototype.processItems=function(){Hae(this.get("items"),(function(e){e.id||(e.id=e.name)}))},t.prototype.drawItems=function(e){var t=this,n=this.addGroup(e,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),o=this.get("itemWidth"),a=this.get("itemSpacing"),l=this.get("itemMarginBottom"),u=this.get("currentPoint"),c=u.x,s=u.y,d=this.get("layout"),f=this.get("items"),h=!1,p=0,v=this.get("maxWidth"),g=this.get("maxHeight");Hae(f,(function(e,n){var f=t.drawItem(e,n,i,r),m=f.getBBox(),y=o||m.width;y>p&&(p=y),"horizontal"===d?(v&&v<u.x+y-c&&(h=!0,u.x=c,u.y+=i+l),t.moveElementTo(f,u),u.x+=y+a):(g&&g<u.y+i+l-s&&(h=!0,u.x+=p+a,u.y=s,p=0),t.moveElementTo(f,u),u.y+=i+l)})),h&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=s,this.adjustNavigation(e,r))},t.prototype.getItemHeight=function(){var e=this.get("itemHeight");if(!e){var t=(this.get("itemName")||{}).style;if(Lae(t)){var n=this.getItems();n.forEach((function(r,i){var o=Sae(Sae({},mme),t(r,i,n)).fontSize;e<o&&(e=o)}))}else t&&(e=t.fontSize)}return e},t.prototype.drawMarker=function(e,t,n,r){var i=Sae(Sae(Sae({x:0,y:r/2},t.style),{symbol:Kle(n.marker,"symbol","circle")}),Kle(n.marker,"style",{})),o=this.addShape(e,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),a=o.getBBox();o.attr("x",a.width/2);var l=o.attr(),u=l.stroke,c=l.fill;return u&&o.set("isStroke",!0),c&&o.set("isFill",!0),o},t.prototype.drawItemText=function(e,t,n,r,i,o,a){var l=n.formatter,u=n.style,c=Sae(Sae({x:o,y:i/2,text:l?l(r[t],r,a):r[t]},mme),Lae(u)?u(r,a,this.getItems()):u);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+t),name:"legend-item-"+t,attrs:c})},t.prototype.drawRadio=function(e,t,n,r,i){var o,a,l=t.style||{},u=null!==(o=l.r)&&void 0!==o?o:r/2,c=3.6*u/8,s=[i+u,r/2-u],d=s[0],f=s[1],h=[d+u,f+u],p=h[0],v=h[1],g=[d,v+u],m=g[0],y=g[1],b=[i,f+u],w=b[0],_=b[1],x=n.showRadio,k=Sae(Sae({path:[["M",d,f],["A",u,u,0,0,1,p,v],["L",p-c,v],["L",p,v],["A",u,u,0,0,1,m,y],["L",m,y-c],["L",m,y],["A",u,u,0,0,1,w,_],["L",w+c,_],["L",w,_],["A",u,u,0,0,1,d,f],["L",d,f+c]],stroke:"#000000",fill:"#ffffff"},l),{opacity:x?null!==(a=null==l?void 0:l.opacity)&&void 0!==a?a:.45:0}),C=this.addShape(e,{type:"path",id:this.getElementId("item-"+n.id+"-radio"),name:"legend-item-radio",attrs:k});return C.set("tip",t.tip),C},t.prototype.drawItem=function(e,t,n,r){var i="item-"+e.id,o=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:e,index:t}}),a=this.addGroup(o,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:e,index:t}}),l=this.get("marker"),u=this.get("itemName"),c=this.get("itemValue"),s=this.get("itemBackground"),d=this.get("radio"),f=this.getLimitItemWidth(),h=0;if(l){var p=this.drawMarker(a,l,e,n),v=l.spacing,g=Kle(e,["marker","spacing"]);ple(g)&&(v=g),h=p.getBBox().maxX+v}if(u){var m=this.drawItemText(a,"name",u,e,n,h,t);f&&Cge(!0,m,fle(f-h,0,f)),h=m.getBBox().maxX+u.spacing}if(c){var y=this.drawItemText(a,"value",c,e,n,h,t);f&&(c.alignRight?(y.attr({textAlign:"right",x:f}),Cge(!0,y,fle(f-h,0,f),"head")):Cge(!0,y,fle(f-h,0,f))),h=y.getBBox().maxX+c.spacing}if(d&&this.drawRadio(a,d,e,n,h),s){var b=a.getBBox();this.addShape(a,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:Sae({x:0,y:0,width:b.width,height:n},s.style)}).toBack()}return this.applyItemStates(e,a),a},t.prototype.adjustNavigation=function(e,t){var n=this,r=this.startX,i=this.startY,o=this.get("layout"),a=t.findAll((function(e){return"legend-item"===e.get("name")})),l=this.get("maxWidth"),u=this.get("maxHeight"),c=this.get("itemWidth"),s=this.get("itemSpacing"),d=this.getItemHeight(),f=Hle({},gme,this.get("pageNavigator")),h=this.drawNavigation(e,o,"00/00",f),p=h.getBBox(),v={x:r,y:i},g=1,m=0,y=0,b=0,w=this.get("itemMarginBottom");if("horizontal"===o){var _=this.get("maxRow")||1,x=d+(1===_?0:w),k=l-s-p.width-p.minX;this.pageHeight=x*_,this.pageWidth=k,Hae(a,(function(e){var t=e.getBBox(),i=c||t.width;(m&&m<v.x+i+s||function(e,t){var n=e.getBBox(),r=c||n.width;return t.x+r+s+p.width>l}(e,v))&&(1===g&&(m=v.x+s,n.moveElementTo(h,{x:k,y:v.y+d/2-p.height/2-p.minY})),g+=1,v.x=r,v.y+=x),n.moveElementTo(e,v),e.getParent().setClip({type:"rect",attrs:{x:v.x,y:v.y,width:i+s,height:d}}),v.x+=i+s}))}else{Hae(a,(function(e){var t=e.getBBox();t.width>y&&(y=t.width)})),b=y,y+=s,l&&(y=Math.min(l,y),b=Math.min(l,b)),this.pageWidth=y,this.pageHeight=u-Math.max(p.height,d+w);var C=Math.floor(this.pageHeight/(d+w));Hae(a,(function(e,t){0!==t&&t%C==0&&(g+=1,v.x+=y,v.y=i),n.moveElementTo(e,v),e.getParent().setClip({type:"rect",attrs:{x:v.x,y:v.y,width:y,height:d}}),v.y+=d+w})),this.totalPagesCnt=g,this.moveElementTo(h,{x:r+b/2-p.width/2-p.minX,y:u-p.height-p.minY})}this.pageHeight&&this.pageWidth&&t.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===o&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(g/this.get("maxRow")):this.totalPagesCnt=g,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(h),t.attr("matrix",this.getCurrentNavigationMatrix())},t.prototype.drawNavigation=function(e,t,n,r){var i={x:0,y:0},o=this.addGroup(e,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),a=Kle(r.marker,"style",{}),l=a.size,u=void 0===l?12:l,c=Oae(a,["size"]),s=this.drawArrow(o,i,bme,"horizontal"===t?"up":"left",u,c);s.on("click",this.onNavigationBack);var d=s.getBBox();i.x+=d.width+2;var f=this.addShape(o,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:Sae({x:i.x,y:i.y+u/2,text:n,textBaseline:"middle"},Kle(r.text,"style"))}).getBBox();return i.x+=f.width+2,this.drawArrow(o,i,yme,"horizontal"===t?"down":"right",u,c).on("click",this.onNavigationAfter),o},t.prototype.updateNavigation=function(e){var t=Hle({},gme,this.get("pageNavigator")).marker.style,n=t.fill,r=t.opacity,i=t.inactiveFill,o=t.inactiveOpacity,a=this.currentPageIndex+"/"+this.totalPagesCnt,l=e?e.getChildren()[1]:this.getElementByLocalId("navigation-text"),u=e?e.findById(this.getElementId(bme)):this.getElementByLocalId(bme),c=e?e.findById(this.getElementId(yme)):this.getElementByLocalId(yme);l.attr("text",a),u.attr("opacity",1===this.currentPageIndex?o:r),u.attr("fill",1===this.currentPageIndex?i:n),u.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?o:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var s=u.getBBox().maxX+2;l.attr("x",s),s+=l.getBBox().width+2,this.updateArrowPath(c,{x:s,y:0})},t.prototype.drawArrow=function(e,t,n,r,i,o){var a=t.x,l=t.y,u=this.addShape(e,{type:"path",id:this.getElementId(n),name:n,attrs:Sae({size:i,direction:r,path:[["M",a+i/2,l],["L",a,l+i],["L",a+i,l+i],["Z"]],cursor:"pointer"},o)});return u.attr("matrix",Jve({x:a+i/2,y:l+i/2},wme[r])),u},t.prototype.updateArrowPath=function(e,t){var n=t.x,r=t.y,i=e.attr(),o=i.size,a=i.direction,l=Jve({x:n+o/2,y:r+o/2},wme[a]);e.attr("path",[["M",n+o/2,r],["L",n,r+o],["L",n+o,r+o],["Z"]]),e.attr("matrix",l)},t.prototype.getCurrentNavigationMatrix=function(){var e=this,t=e.currentPageIndex,n=e.pageWidth,r=e.pageHeight;return Zve("horizontal"===this.get("layout")?{x:0,y:r*(1-t)}:{x:n*(1-t),y:0})},t.prototype.applyItemStates=function(e,t){if(this.getItemStates(e).length>0){var n=t.getChildren(),r=this.get("itemStates");Hae(n,(function(t){var n=t.get("name").split("-")[2],i=Bge(e,n,r);i&&(t.attr(i),"marker"!==n||t.get("isStroke")&&t.get("isFill")||(t.get("isStroke")&&t.attr("fill",null),t.get("isFill")&&t.attr("stroke",null)))}))}},t.prototype.getLimitItemWidth=function(){var e=this.get("itemWidth"),t=this.get("maxItemWidth");return t?e&&(t=e<=t?e:t):e&&(t=e),t},t}(vme),xme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Oge.textColor,textBaseline:"middle",fontFamily:Oge.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Oge.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},t.prototype.isSlider=function(){return!0},t.prototype.getValue=function(){return this.getCurrentValue()},t.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},t.prototype.setRange=function(e,t){this.update({min:e,max:t})},t.prototype.setValue=function(e){var t=this.getValue();this.set("value",e);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:t,value:e})},t.prototype.initEvent=function(){var e=this.get("group");this.bindSliderEvent(e),this.bindRailEvent(e),this.bindTrackEvent(e)},t.prototype.drawLegendContent=function(e){this.drawRail(e),this.drawLabels(e),this.fixedElements(e),this.resetTrack(e),this.resetTrackClip(e),this.get("slidable")&&this.resetHandlers(e)},t.prototype.bindSliderEvent=function(e){this.bindHandlersEvent(e)},t.prototype.bindHandlersEvent=function(e){var t=this;e.on("legend-handler-min:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[1];r<n&&(r=n),t.setValue([n,r])})),e.on("legend-handler-max:drag",(function(e){var n=t.getValueByCanvasPoint(e.x,e.y),r=t.getCurrentValue()[0];r>n&&(r=n),t.setValue([r,n])}))},t.prototype.bindRailEvent=function(e){},t.prototype.bindTrackEvent=function(e){var t=this,n=null;e.on("legend-track:dragstart",(function(e){n={x:e.x,y:e.y}})),e.on("legend-track:drag",(function(e){if(n){var r=t.getValueByCanvasPoint(n.x,n.y),i=t.getValueByCanvasPoint(e.x,e.y),o=t.getCurrentValue(),a=o[1]-o[0],l=t.getRange(),u=i-r;u<0?o[0]+u>l.min?t.setValue([o[0]+u,o[1]+u]):t.setValue([l.min,l.min+a]):u>0&&(u>0&&o[1]+u<l.max?t.setValue([o[0]+u,o[1]+u]):t.setValue([l.max-a,l.max])),n={x:e.x,y:e.y}}})),e.on("legend-track:dragend",(function(e){n=null}))},t.prototype.drawLabels=function(e){this.drawLabel("min",e),this.drawLabel("max",e)},t.prototype.drawLabel=function(e,t){var n=this.get("label"),r=n.style,i=n.align,o=n.formatter,a=this.get(e),l=this.getLabelAlignAttrs(e,i),u="label-"+e;this.addShape(t,{type:"text",id:this.getElementId(u),name:"legend-label-"+e,attrs:Sae(Sae({x:0,y:0,text:Lae(o)?o(a):a},r),l)})},t.prototype.getLabelAlignAttrs=function(e,t){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==t?"min"===e?"top":"bottom":"top"):"rail"!==t?(r="top",n="min"===e?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},t.prototype.getRailPath=function(e,t,n,r){var i=this.get("rail"),o=i.size,a=i.defaultLength,l=i.type,u=this.isVertical(),c=n,s=r;c||(c=u?o:a),s||(s=u?a:o);var d=[];return"color"===l?(d.push(["M",e,t]),d.push(["L",e+c,t]),d.push(["L",e+c,t+s]),d.push(["L",e,t+s]),d.push(["Z"])):(d.push(["M",e+c,t]),d.push(["L",e+c,t+s]),d.push(["L",e,t+s]),d.push(["Z"])),d},t.prototype.drawRail=function(e){var t=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Sae({path:this.getRailPath(0,0)},t)})},t.prototype.getTrackColor=function(e){var t,n=e.length;if(!n)return null;if(1===n)return e[0];t=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){t+=" "+r/(n-1)+":"+e[r]}return t},t.prototype.getTrackPath=function(e){var t=this.getRailShape(e).attr("path");return Lle(t)},t.prototype.getClipTrackAttrs=function(e){var t,n,r,i,o=this.getCurrentValue(),a=o[0],l=o[1],u=this.getRailBBox(e),c=this.getPointByValue(a,e),s=this.getPointByValue(l,e);return this.isVertical()?(t=u.minX,n=c.y,r=u.width,i=s.y-c.y):(t=c.x,n=u.minY,r=s.x-c.x,i=u.height),{x:t,y:n,width:r,height:i}},t.prototype.getTrackAttrs=function(e){var t=this.get("track"),n=this.get("colors");return Nle({path:this.getTrackPath(e),fill:this.getTrackColor(n)},t.style)},t.prototype.resetTrackClip=function(e){var t=e||this.get("group"),n=this.getElementId("track"),r=t.findById(n),i=r.getClip(),o=this.getClipTrackAttrs(e);i?i.attr(o):r.setClip({type:"rect",attrs:o})},t.prototype.resetTrack=function(e){var t=this.getElementId("track"),n=e.findById(t),r=this.getTrackAttrs(e);n?n.attr(r):this.addShape(e,{type:"path",id:t,draggable:this.get("slidable"),name:"legend-track",attrs:r})},t.prototype.getPointByValue=function(e,t){var n=this.getRange(),r=n.min,i=(e-r)/(n.max-r),o=this.getRailBBox(t),a={x:0,y:0};return this.isVertical()?(a.x=o.minX+o.width/2,a.y=age(o.minY,o.maxY,i)):(a.x=age(o.minX,o.maxX,i),a.y=o.minY+o.height/2),a},t.prototype.getRailShape=function(e){return(e||this.get("group")).findById(this.getElementId("rail"))},t.prototype.getRailBBox=function(e){return this.getRailShape(e).getBBox()},t.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},t.prototype.isVertical=function(){return"vertical"===this.get("layout")},t.prototype.getValueByCanvasPoint=function(e,t){var n=this.getRange(),r=n.min,i=n.max,o=this.getRailCanvasBBox(),a=this.isVertical(),l=this.get("step"),u=age(r,i,a?(t-o.minY)/o.height:(e-o.minX)/o.width);l&&(u=r+Math.round((u-r)/l)*l);return u>i&&(u=i),u<r&&(u=r),u},t.prototype.getCurrentValue=function(){var e=this.get("value");if(!e){var t=this.get("values");return t?[Math.max(Math.min.apply(Math,Rae(t,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,Rae(t,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return e},t.prototype.resetHandlers=function(e){var t=this.getCurrentValue(),n=t[0],r=t[1];this.resetHandler(e,"min",n),this.resetHandler(e,"max",r)},t.prototype.getHandlerPath=function(e,t){var n=this.isVertical(),r=[],i=e.size,o=t.x,a=t.y,l=1.4*i,u=i/2,c=i/6;if(n){var s=o+.4*l;r.push(["M",o,a]),r.push(["L",s,a+u]),r.push(["L",o+l,a+u]),r.push(["L",o+l,a-u]),r.push(["L",s,a-u]),r.push(["Z"]),r.push(["M",s,a+c]),r.push(["L",o+l-2,a+c]),r.push(["M",s,a-c]),r.push(["L",o+l-2,a-c])}else{var d=a+.4*l;r.push(["M",o,a]),r.push(["L",o-u,d]),r.push(["L",o-u,a+l]),r.push(["L",o+u,a+l]),r.push(["L",o+u,d]),r.push(["Z"]),r.push(["M",o-c,d]),r.push(["L",o-c,a+l-2]),r.push(["M",o+c,d]),r.push(["L",o+c,a+l-2])}return r},t.prototype.resetHandler=function(e,t,n){var r=this.getPointByValue(n,e),i=this.get("handler"),o=this.getHandlerPath(i,r),a=this.getElementId("handler-"+t),l=e.findById(a),u=this.isVertical();l?l.attr("path",o):this.addShape(e,{type:"path",name:"legend-handler-"+t,draggable:!0,id:a,attrs:Sae(Sae({path:o},i.style),{cursor:u?"ns-resize":"ew-resize"})})},t.prototype.fixedElements=function(e){var t=e.findById(this.getElementId("rail")),n=e.findById(this.getElementId("label-min")),r=e.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,t,i):this.fixedHorizontal(n,r,t,i)},t.prototype.fitRailLength=function(e,t,n,r){var i=this.isVertical()?"height":"width",o=this.get("label"),a=o.align,l=o.spacing,u=this.get("max"+Ole(i));if(u){var c=("rail"===a?n[i]+e[i]+t[i]+2*l:n[i])-u;c>0&&this.changeRailLength(r,i,n[i]-c)}},t.prototype.changeRailLength=function(e,t,n){var r,i=e.getBBox();r="height"===t?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),e.attr("path",r)},t.prototype.changeRailPosition=function(e,t,n){var r=e.getBBox(),i=this.getRailPath(t,n,r.width,r.height);e.attr("path",i)},t.prototype.fixedHorizontal=function(e,t,n,r){var i=this.get("label"),o=i.align,a=i.spacing,l=n.getBBox(),u=e.getBBox(),c=t.getBBox(),s=l.height;this.fitRailLength(u,c,l,n),l=n.getBBox(),"rail"===o?(e.attr({x:r.x,y:r.y+s/2}),this.changeRailPosition(n,r.x+u.width+a,r.y),t.attr({x:r.x+u.width+l.width+2*a,y:r.y+s/2})):"top"===o?(e.attr({x:r.x,y:r.y}),t.attr({x:r.x+l.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+u.height+a)):(this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x,y:r.y+l.height+a}),t.attr({x:r.x+l.width,y:r.y+l.height+a}))},t.prototype.fixedVertail=function(e,t,n,r){var i=this.get("label"),o=i.align,a=i.spacing,l=n.getBBox(),u=e.getBBox(),c=t.getBBox();if(this.fitRailLength(u,c,l,n),l=n.getBBox(),"rail"===o)e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+u.height+a),t.attr({x:r.x,y:r.y+u.height+l.height+2*a});else if("right"===o)e.attr({x:r.x+l.width+a,y:r.y}),this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x+l.width+a,y:r.y+l.height});else{var s=Math.max(u.width,c.width);e.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+s+a,r.y),t.attr({x:r.x,y:r.y+l.height})}},t}(vme),kme="g2-tooltip",Cme="g2-tooltip-title",Sme="g2-tooltip-list",Ome="g2-tooltip-list-item",Eme="g2-tooltip-marker",Ime="g2-tooltip-value",Pme="g2-tooltip-name",Mme="g2-tooltip-crosshair-x",Rme="g2-tooltip-crosshair-y";const Ame=Object.freeze(Object.defineProperty({__proto__:null,CONTAINER_CLASS:kme,CROSSHAIR_X:Mme,CROSSHAIR_Y:Rme,LIST_CLASS:Sme,LIST_ITEM_CLASS:Ome,MARKER_CLASS:Eme,NAME_CLASS:Pme,TITLE_CLASS:Cme,VALUE_CLASS:Ime},Symbol.toStringTag,{value:"Module"}));var jme;const Dme=((jme={})[""+kme]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Oge.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},jme[""+Cme]={marginBottom:"4px"},jme[""+Sme]={margin:"0px",listStyleType:"none",padding:"0px"},jme[""+Ome]={listStyleType:"none",marginBottom:"4px"},jme[""+Eme]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},jme[""+Ime]={display:"inline-block",float:"right",marginLeft:"30px"},jme[""+Mme]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},jme[""+Rme]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},jme);var Tme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+kme+'"><div class="'+Cme+'"></div><ul class="'+Sme+'"></ul></div>',itemTpl:'<li class="'+Ome+'" data-index={index}>\n          <span class="'+Eme+'" style="background:{color}"></span>\n          <span class="'+Pme+'">{name}</span>:\n          <span class="'+Ime+'">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+Mme+'"></div>',yCrosshairTpl:'<div class="'+Rme+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:kme,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:Dme})},t.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},t.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},t.prototype.show=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!0),Vue(e,{visibility:"visible"}),this.setCrossHairsVisible(!0))},t.prototype.hide=function(){var e=this.getContainer();e&&!this.destroyed&&(this.set("visible",!1),Vue(e,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},t.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},t.prototype.setLocation=function(e){this.set("x",e.x),this.set("y",e.y),this.resetPosition()},t.prototype.setCrossHairsVisible=function(e){var t=e?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&Vue(n,{display:t}),r&&Vue(r,{display:t})},t.prototype.initContainer=function(){if(e.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},t.prototype.updateInner=function(t){var n,r;this.get("customContent")?this.renderCustomContent():(n=t,r=!1,Hae(["title","showTitle"],(function(e){if(_le(n,e))return r=!0,!1})),r&&this.resetTitle(),_le(t,"items")&&this.renderItems()),e.prototype.updateInner.call(this,t)},t.prototype.initDom=function(){this.cacheDoms()},t.prototype.removeDom=function(){e.prototype.removeDom.call(this),this.clearCrosshairs()},t.prototype.resetPosition=function(){var e,t=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),o=i.offsetX,a=i.offsetY,l=this.get("position"),u=this.get("region"),c=this.getContainer(),s=this.getBBox(),d=s.width,f=s.height;u&&(e=ige(u));var h=function(e,t,n,r,i,o,a){var l=function(e,t,n,r,i,o){var a=e,l=t;switch(o){case"left":a=e-r-n,l=t-i/2;break;case"right":a=e+n,l=t-i/2;break;case"top":a=e-r/2,l=t-i-n;break;case"bottom":a=e-r/2,l=t+n;break;default:a=e+n,l=t-i-n}return{x:a,y:l}}(e,t,n,r,i,o);if(a){var u=function(e,t,n,r,i){return{left:e<i.x,right:e+n>i.x+i.width,top:t<i.y,bottom:t+r>i.y+i.height}}(l.x,l.y,r,i,a);"auto"===o?(u.right&&(l.x=Math.max(0,e-r-n)),u.top&&(l.y=Math.max(0,t-i-n))):"top"===o||"bottom"===o?(u.left&&(l.x=a.x),u.right&&(l.x=a.x+a.width-r),"top"===o&&u.top&&(l.y=t+n),"bottom"===o&&u.bottom&&(l.y=t-i-n)):(u.top&&(l.y=a.y),u.bottom&&(l.y=a.y+a.height-i),"left"===o&&u.left&&(l.x=e+n),"right"===o&&u.right&&(l.x=e-r-n))}return l}(t,n,r,d,f,l,e);Vue(c,{left:sge(h.x+o),top:sge(h.y+a)}),this.resetCrosshairs()},t.prototype.renderCustomContent=function(){var e=this.getHtmlContentNode(),t=this.get("parent"),n=this.get("container");n&&n.parentNode===t?t.replaceChild(e,n):t.appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()},t.prototype.getHtmlContentNode=function(){var e,t=this.get("customContent");if(t){var n=t(this.get("title"),this.get("items"));e=Tle(n)?n:Fue(n)}return e},t.prototype.cacheDoms=function(){var e=this.getContainer(),t=e.getElementsByClassName(Cme)[0],n=e.getElementsByClassName(Sme)[0];this.set("titleDom",t),this.set("listDom",n)},t.prototype.resetTitle=function(){var e=this.get("title");this.get("showTitle")&&e?this.setTitle(e):this.setTitle("")},t.prototype.setTitle=function(e){var t=this.get("titleDom");t&&(t.innerText=e)},t.prototype.resetCrosshairs=function(){var e=this.get("crosshairsRegion"),t=this.get("crosshairs");if(e&&t){var n=ige(e),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===t?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===t?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},t.prototype.resetCrosshair=function(e,t){var n=this.checkCrosshair(e),r=this.get(e);Vue(n,"x"===e?{left:sge(r),top:sge(t.y),height:sge(t.height)}:{top:sge(r),left:sge(t.x),width:sge(t.width)})},t.prototype.checkCrosshair=function(e){var t=e+"CrosshairDom",n=e+"CrosshairTpl",r="CROSSHAIR_"+e.toUpperCase(),i=Ame[r],o=this.get(t),a=this.get("parent");return o||(o=Fue(this.get(n)),this.applyStyle(i,o),a.appendChild(o),this.set(t,o)),o},t.prototype.renderItems=function(){this.clearItemDoms();var e=this.get("items"),t=this.get("itemTpl"),n=this.get("listDom");n&&(Hae(e,(function(e){var r=ipe.toCSSGradient(e.color),i=Sae(Sae({},e),{color:r}),o=Fue(Sle(t,i));n.appendChild(o)})),this.applyChildrenStyles(n,this.get("domStyles")))},t.prototype.clearItemDoms=function(){this.get("listDom")&&rge(this.get("listDom"))},t.prototype.clearCrosshairs=function(){var e=this.get("xCrosshairDom"),t=this.get("yCrosshairDom");e&&e.remove(),t&&t.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},t}(Fge),Fme={opacity:0},Nme={stroke:"#C5C5C5",strokeOpacity:.85},Lme={fill:"#CACED4",opacity:.85};function Bme(e){return function(e){return $le(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function Vme(e,t,n,r){void 0===r&&(r=!0);var i=new nve({values:e}),o=new hpe({values:$le(e,(function(e,t){return t}))}),a=$le(e,(function(e,r){return[o.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return Bme(e);var t=[];Hae(e,(function(e){Yle(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=she(t),r=ole(e),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):Bme(a)}function zme(e,t,n,r){var i=Rae(e),o=function(e,t){var n=new nve({values:e}),r=n.max<0?n.max:Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,o]),i.push(["L",0,o]),i.push(["Z"]),i}var Hme=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Fme,lineStyle:Nme,areaStyle:Lme})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.data,o=t.smooth,a=t.isArea,l=t.backgroundStyle,u=t.lineStyle,c=t.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Sae({x:0,y:0,width:n,height:r},l)});var s=Vme(i,n,r,o);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:Sae({path:s},u)}),a){var d=zme(s,n,r,i);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:Sae({path:d},c)})}},t.prototype.applyOffset=function(){var e=this.cfg,t=e.x,n=e.y;this.moveElementTo(this.get("group"),{x:t,y:n})},t}(mge),Wme={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Ume=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Wme})},t.prototype.renderInner=function(e){var t=this.cfg,n=t.width,r=t.height,i=t.style,o=i.fill,a=i.stroke,l=i.radius,u=i.opacity,c=i.cursor;this.addShape(e,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:o,stroke:a,radius:l,opacity:u,cursor:c}});var s=1/3*n,d=2/3*n,f=1/4*r,h=3/4*r;this.addShape(e,{id:this.getElementId("line-left"),type:"line",attrs:{x1:s,y1:f,x2:s,y2:h,stroke:a,cursor:c}}),this.addShape(e,{id:this.getElementId("line-right"),type:"line",attrs:{x1:d,y1:f,x2:d,y2:h,stroke:a,cursor:c}})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.bindEvents=function(){var e=this;this.get("group").on("mouseenter",(function(){var t=e.get("style").highLightFill;e.getElementByLocalId("background").attr("fill",t),e.draw()})),this.get("group").on("mouseleave",(function(){var t=e.get("style").fill;e.getElementByLocalId("background").attr("fill",t),e.draw()}))},t.prototype.draw=function(){var e=this.get("container").get("canvas");e&&e.draw()},t}(mge),Gme={fill:"#416180",opacity:.05},Yme={fill:"#5B8FF9",opacity:.15,cursor:"move"},$me={width:10,height:24},qme={textBaseline:"middle",fill:"#000",opacity:.45},Kme=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){return function(n){t.currentTarget=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=Kle(r,"touches.0.pageX",r.pageX),t.prevY=Kle(r,"touches.0.pageY",r.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(e){var n=t.cfg.width,r=[t.get("start"),t.get("end")];e.stopPropagation(),e.preventDefault();var i=Kle(e,"touches.0.pageX",e.pageX),o=Kle(e,"touches.0.pageY",e.pageY),a=i-t.prevX,l=t.adjustOffsetRange(a/n);t.updateStartEnd(l),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=i,t.prevY=o,t.draw(),t.emit("sliderchange",[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:r,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return Cae(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.get("start"),r=this.get("end"),i=fle(n,e,t),o=fle(r,e,t);this.get("isInit")||n===i&&r===o||this.setValue([i,o])},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange();if(Vae(e)&&2===e.length){var n=[this.get("start"),this.get("end")];this.update({start:fle(e[0],t.min,t.max),end:fle(e[1],t.min,t.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:e})}},t.prototype.getValue=function(){return[this.get("start"),this.get("end")]},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:Gme,foregroundStyle:Yme,handlerStyle:$me,textStyle:qme}})},t.prototype.update=function(t){var n=t.start,r=t.end,i=Sae({},t);Bae(n)||(i.start=fle(n,0,1)),Bae(r)||(i.end=fle(r,0,1)),e.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},t.prototype.init=function(){this.set("start",fle(this.get("start"),0,1)),this.set("end",fle(this.get("end"),0,1)),e.prototype.init.call(this)},t.prototype.render=function(){e.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},t.prototype.renderInner=function(e){var t=this.cfg;t.start,t.end;var n=t.width,r=t.height,i=t.trendCfg,o=void 0===i?{}:i,a=t.minText,l=t.maxText,u=t.backgroundStyle,c=void 0===u?{}:u,s=t.foregroundStyle,d=void 0===s?{}:s,f=t.textStyle,h=void 0===f?{}:f,p=Hle({},Wme,this.cfg.handlerStyle);oue(Kle(o,"data"))&&(this.trend=this.addComponent(e,Sae({component:Hme,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},o))),this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:Sae({x:0,y:0,width:n,height:r},c)}),this.addShape(e,{id:this.getElementId("minText"),type:"text",attrs:Sae({y:r/2,textAlign:"right",text:a,silent:!1},h)}),this.addShape(e,{id:this.getElementId("maxText"),type:"text",attrs:Sae({y:r/2,textAlign:"left",text:l,silent:!1},h)}),this.addShape(e,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Sae({y:0,height:r},d)});var v=Kle(p,"width",10),g=Kle(p,"height",24);this.minHandler=this.addComponent(e,{component:Ume,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-g)/2,width:v,height:g,cursor:"ew-resize",style:p}),this.maxHandler=this.addComponent(e,{component:Ume,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-g)/2,width:v,height:g,cursor:"ew-resize",style:p})},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.updateUI=function(e,t,n){var r=this.cfg,i=r.start,o=r.end,a=r.width,l=r.minText,u=r.maxText,c=r.handlerStyle,s=r.height,d=i*a,f=o*a;this.trend&&(this.trend.update({width:a,height:s}),this.get("updateAutoRender")||this.trend.render()),e.attr("x",d),e.attr("width",f-d);var h=Kle(c,"width",10);t.attr("text",l),n.attr("text",u);var p=this._dodgeText([d,f],t,n),v=p[0],g=p[1];this.minHandler&&(this.minHandler.update({x:d-h/2}),this.get("updateAutoRender")||this.minHandler.render()),Hae(v,(function(e,n){return t.attr(n,e)})),this.maxHandler&&(this.maxHandler.update({x:f-h/2}),this.get("updateAutoRender")||this.maxHandler.render()),Hae(g,(function(e,t){return n.attr(t,e)}))},t.prototype.bindEvents=function(){var e=this.get("group");e.on("handler-min:mousedown",this.onMouseDown("minHandler")),e.on("handler-min:touchstart",this.onMouseDown("minHandler")),e.on("handler-max:mousedown",this.onMouseDown("maxHandler")),e.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var t=e.findById(this.getElementId("foreground"));t.on("mousedown",this.onMouseDown("foreground")),t.on("touchstart",this.onMouseDown("foreground"))},t.prototype.adjustOffsetRange=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":var i=0-n,o=1-n;return Math.min(o,Math.max(i,e));case"maxHandler":i=0-r,o=1-r;return Math.min(o,Math.max(i,e));case"foreground":i=0-n,o=1-r;return Math.min(o,Math.max(i,e))}},t.prototype.updateStartEnd=function(e){var t=this.cfg,n=t.start,r=t.end;switch(this.currentTarget){case"minHandler":n+=e;break;case"maxHandler":r+=e;break;case"foreground":n+=e,r+=e}this.set("start",n),this.set("end",r)},t.prototype._dodgeText=function(e,t,n){var r,i,o=this.cfg,a=o.handlerStyle,l=o.width,u=Kle(a,"width",10),c=e[0],s=e[1],d=!1;c>s&&(c=(r=[s,c])[0],s=r[1],t=(i=[n,t])[0],n=i[1],d=!0);var f=t.getBBox(),h=n.getBBox(),p=f.width>c-2?{x:c+u/2+2,textAlign:"left"}:{x:c-u/2-2,textAlign:"right"},v=h.width>l-s-2?{x:s-u/2-2,textAlign:"right"}:{x:s+u/2+2,textAlign:"left"};return d?[v,p]:[p,v]},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t}(mge),Xme={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},Jme=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearEvents=iue,t.onStartEvent=function(e){return function(n){t.isMobile=e,n.originalEvent.preventDefault();var r=e?Kle(n.originalEvent,"touches.0.clientX"):n.clientX,i=e?Kle(n.originalEvent,"touches.0.clientY"):n.clientY;t.startPos=t.cfg.isHorizontal?r:i,t.bindLaterEvent()}},t.bindLaterEvent=function(){var e=t.getContainerDOM(),n=[];n=t.isMobile?[Tue(e,"touchmove",t.onMouseMove),Tue(e,"touchend",t.onMouseUp),Tue(e,"touchcancel",t.onMouseUp)]:[Tue(e,"mousemove",t.onMouseMove),Tue(e,"mouseup",t.onMouseUp),Tue(e,"mouseleave",t.onMouseUp)],t.clearEvents=function(){n.forEach((function(e){e.remove()}))}},t.onMouseMove=function(e){var n=t.cfg,r=n.isHorizontal,i=n.thumbOffset;e.preventDefault();var o=t.isMobile?Kle(e,"touches.0.clientX"):e.clientX,a=t.isMobile?Kle(e,"touches.0.clientY"):e.clientY,l=r?o:a,u=l-t.startPos;t.startPos=l,t.updateThumbOffset(i+u)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,r=n.isHorizontal,i=n.x,o=n.y,a=n.thumbLen,l=t.getContainerDOM().getBoundingClientRect(),u=e.clientX,c=e.clientY,s=r?u-l.left-i-a/2:c-l.top-o-a/2,d=t.validateRange(s);t.updateThumbOffset(d)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return Cae(t,e),t.prototype.setRange=function(e,t){this.set("minLimit",e),this.set("maxLimit",t);var n=this.getValue(),r=fle(n,e,t);n===r||this.get("isInit")||this.setValue(r)},t.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},t.prototype.setValue=function(e){var t=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*fle(e,t.min,t.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},t.prototype.getValue=function(){return fle(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return Sae(Sae({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Xme})},t.prototype.renderInner=function(e){this.renderTrackShape(e),this.renderThumbShape(e)},t.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},t.prototype.initEvent=function(){this.bindEvents()},t.prototype.renderTrackShape=function(e){var t=this.cfg,n=t.trackLen,r=t.theme,i=Hle({},Xme,void 0===r?{default:{}}:r).default,o=i.lineCap,a=i.trackColor,l=i.size,u=Kle(this.cfg,"size",l),c=this.get("isHorizontal")?{x1:0+u/2,y1:u/2,x2:n-u/2,y2:u/2,lineWidth:u,stroke:a,lineCap:o}:{x1:u/2,y1:0+u/2,x2:u/2,y2:n-u/2,lineWidth:u,stroke:a,lineCap:o};return this.addShape(e,{id:this.getElementId("track"),name:"track",type:"line",attrs:c})},t.prototype.renderThumbShape=function(e){var t=this.cfg,n=t.thumbOffset,r=t.thumbLen,i=t.theme,o=Hle({},Xme,i).default,a=o.size,l=o.lineCap,u=o.thumbColor,c=Kle(this.cfg,"size",a),s=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:u,lineCap:l,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:u,lineCap:l,cursor:"default"};return this.addShape(e,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:s})},t.prototype.bindEvents=function(){var e=this.get("group");e.on("mousedown",this.onStartEvent(!1)),e.on("mouseup",this.onMouseUp),e.on("touchstart",this.onStartEvent(!0)),e.on("touchend",this.onMouseUp),e.findById(this.getElementId("track")).on("click",this.onTrackClick);var t=e.findById(this.getElementId("thumb"));t.on("mouseover",this.onThumbMouseOver),t.on("mouseout",this.onThumbMouseOut)},t.prototype.getContainerDOM=function(){var e=this.get("container"),t=e&&e.get("canvas");return t&&t.get("container")},t.prototype.validateRange=function(e){var t=this.cfg,n=t.thumbLen,r=t.trackLen,i=e;return e+n>r?i=r-n:e+n<n&&(i=0),i},t.prototype.draw=function(){var e=this.get("container"),t=e&&e.get("canvas");t&&t.draw()},t.prototype.updateThumbOffset=function(e){var t=this.cfg,n=t.thumbOffset,r=t.isHorizontal,i=t.thumbLen,o=t.size,a=this.validateRange(e);if(a!==n){var l=this.getElementByLocalId("thumb");r?l.attr({x1:a+o/2,x2:a+i-o/2}):l.attr({y1:a+o/2,y2:a+i-o/2}),this.emitOffsetChange(a)}},t.prototype.emitOffsetChange=function(e){var t=this.cfg,n=t.thumbOffset,r=t.trackLen,i=t.thumbLen;this.cfg.thumbOffset=e,this.emit("scrollchange",{thumbOffset:e,ratio:fle(e/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:e})},t}(mge),Zme=tme,Qme=nme,eye=pme,tye=hme,nye=_me,rye=xme,iye=Tme;function oye(e){return 1===Array.from(new Set(e)).length}function aye(e){return(Jae(e)+Xae(e))/2}function lye(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function uye(e,t,n,r,i,o){void 0===o&&(o=0);var a=lye(e,t,n,r),l=lye(e,t,n,i),u=lye(e,t,o,r),c=lye(e,t,o,i);if(i-r==2*Math.PI){var s=lye(e,t,n,r+Math.PI),d=lye(e,t,o,r+Math.PI),f=[["M",a.x,a.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,l.x,l.y],["M",u.x,u.y]];return o&&(f.push(["A",o,o,0,1,0,d.x,d.y]),f.push(["A",o,o,0,1,0,c.x,c.y])),f.push(["M",a.x,a.y]),f.push(["Z"]),f}var h=i-r<=Math.PI?0:1,p=[["M",a.x,a.y],["A",n,n,0,h,1,l.x,l.y],["L",c.x,c.y]];return o&&p.push(["A",o,o,0,h,0,u.x,u.y]),p.push(["L",a.x,a.y]),p.push(["Z"]),p}function cye(e,t,n,r,i){var o=lye(e,t,n,r),a=lye(e,t,n,i);if(gle(i-r,2*Math.PI)){var l=lye(e,t,n,r+Math.PI);return[["M",o.x,o.y],["A",n,n,0,1,1,l.x,l.y],["A",n,n,0,1,1,o.x,o.y],["A",n,n,0,1,0,l.x,l.y],["A",n,n,0,1,0,o.x,o.y],["Z"]]}var u=i-r<=Math.PI?0:1;return[["M",o.x,o.y],["A",n,n,0,u,1,a.x,a.y]]}function sye(e,t){var n,r,i=function(e){if(Gle(e))return null;var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return Hae(e,(function(e){t=t>e.x?e.x:t,n=n<e.x?e.x:n,r=r>e.y?e.y:r,i=i<e.y?e.y:i})),{minX:t,maxX:n,minY:r,maxY:i,centerX:(t+n)/2,centerY:(r+i)/2}}(e.points),o=t.startAngle,a=t.endAngle-o;return t.isTransposed?(n=i.maxY*a,r=i.minY*a):(n=i.maxX*a,r=i.minX*a),{startAngle:r+=o,endAngle:n+=o}}function dye(e,t){var n=e.attr(),r=t.attr();return Hae(n,(function(e,t){void 0===r[t]&&(r[t]=void 0)})),r}function fye(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}function hye(e,t){return"object"===lr(e)&&t.forEach((function(t){delete e[t]})),e}function pye(e,t,n){var r,i;void 0===t&&(t=[]),void 0===n&&(n=new Map);try{for(var o=Pae(e),a=o.next();!a.done;a=o.next()){var l=a.value;n.has(l)||(t.push(l),n.set(l,!0))}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t}var vye=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.height=r,this.width=n}return e.fromRange=function(t,n,r,i){return new e(t,n,r-t,i-n)},e.fromObject=function(t){return new e(t.minX,t.minY,t.width,t.height)},Object.defineProperty(e.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.contains=function(e){return e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Hae(e,(function(e){n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.width=Math.max(e.maxX,n.maxX)-n.x,n.height=Math.max(e.maxY,n.maxY)-n.y})),n},e.prototype.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.clone();return Hae(e,(function(e){n.x=Math.max(e.x,n.x),n.y=Math.max(e.y,n.y),n.width=Math.min(e.maxX,n.maxX)-n.x,n.height=Math.min(e.maxY,n.maxY)-n.y})),n},e.prototype.cut=function(t,n){var r=t.width,i=t.height;switch(n){case due.TOP:case due.TOP_LEFT:case due.TOP_RIGHT:return e.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case due.RIGHT:case due.RIGHT_TOP:case due.RIGHT_BOTTOM:return e.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case due.BOTTOM:case due.BOTTOM_LEFT:case due.BOTTOM_RIGHT:return e.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case due.LEFT:case due.LEFT_TOP:case due.LEFT_BOTTOM:return e.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},e.prototype.shrink=function(t){var n=Mae(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return new e(this.x+a,this.y+r,this.width-a-i,this.height-r-o)},e.prototype.expand=function(t){var n=Mae(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return new e(this.x-a,this.y-r,this.width+a+i,this.height+r+o)},e.prototype.exceed=function(e){return[Math.max(-this.minY+e.minY,0),Math.max(this.maxX-e.maxX,0),Math.max(this.maxY-e.maxY,0),Math.max(-this.minX+e.minX,0)]},e.prototype.collide=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},e.prototype.size=function(){return this.width*this.height},e.prototype.isPointIn=function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY},e}();function gye(e){if(e.isPolar&&!e.isTransposed)return(e.endAngle-e.startAngle)*e.getRadius();var t=e.convert({x:0,y:0}),n=e.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function mye(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function yye(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)}function bye(e,t){void 0===t&&(t=0);var n,r=e.start,i=e.end,o=e.getWidth(),a=e.getHeight();if(e.isPolar){var l=e.startAngle,u=e.endAngle,c=e.getCenter(),s=e.getRadius();return{type:"path",startState:{path:uye(c.x,c.y,s+t,l,l)},endState:function(e){var n=(u-l)*e+l;return{path:uye(c.x,c.y,s+t,l,n)}},attrs:{path:uye(c.x,c.y,s+t,l,u)}}}return n=e.isTransposed?{height:a+2*t}:{width:o+2*t},{type:"rect",startState:{x:r.x-t,y:i.y-t,width:e.isTransposed?o+2*t:0,height:e.isTransposed?0:a+2*t},endState:n,attrs:{x:r.x-t,y:i.y-t,width:o+2*t,height:a+2*t}}}var wye=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function _ye(e,t,n,r){return void 0===t&&(t={}),t.type?t.type:"identity"!==e.type&&Rue.includes(n)&&["interval"].includes(r)||e.isCategory?"cat":e.type}function xye(e,t,n){var r=t||[];if(ple(e)||Bae(function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!Bae(i)){n=Vae(i)?i[0]:i;break}}return n}(r,e))&&Gle(n))return new(fve("identity"))({field:e.toString(),values:[e]});var i=ile(r,e),o=Kle(n,"type",function(e){var t="linear";return wye.test(e)?t="timeCat":nle(e)&&(t="cat"),t}(i[0]));return new(fve(o))(Sae({field:e,values:i},n))}function kye(e){return e.alias||e.field}function Cye(e,t,n){var r,i=e.values.length;if(1===i)r=[.5,1];else{var o=0;r=function(e){if(e.isPolar){var t=e.startAngle;return e.endAngle-t==2*Math.PI}return!1}(t)?t.isTransposed?[(o=1/i*Kle(n,"widthRatio.multiplePie",1/1.3))/2,1-o/2]:[0,1-1/i]:[o=1/i/2,1-o]}return r}function Sye(e,t){var n={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?n=function(e){var t,n;switch(e){case due.TOP:t={x:0,y:1},n={x:1,y:1};break;case due.RIGHT:t={x:1,y:0},n={x:1,y:1};break;case due.BOTTOM:t={x:0,y:0},n={x:1,y:0};break;case due.LEFT:t={x:0,y:0},n={x:0,y:1};break;default:t=n={x:0,y:0}}return{start:t,end:n}}(t):e.isPolar&&(n=function(e){var t,n;return e.isTransposed?(t={x:0,y:0},n={x:1,y:0}):(t={x:0,y:0},n={x:0,y:1}),{start:t,end:n}}(e));var r=n.start,i=n.end;return{start:e.convert(r),end:e.convert(i)}}function Oye(e){var t=e.start,n=e.end;return t.x===n.x}function Eye(e,t){var n=e.start,r=e.end;return Oye(e)?(n.y-r.y)*(t.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-t.y)>0?-1:1}function Iye(e,t){var n=Kle(e,["components","axis"],{});return Hle({},Kle(n,["common"],{}),Hle({},Kle(n,[t],{})))}function Pye(e,t,n){var r=Kle(e,["components","axis"],{});return Hle({},Kle(r,["common","title"],{}),Hle({},Kle(r,[t,"title"],{})),n)}function Mye(e){var t=e.x,n=e.y,r=e.circleCenter,i=n.start>n.end,o=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),a=[o.x-r.x,o.y-r.y],l=[1,0],u=o.y>r.y?Zce(a,l):-1*Zce(a,l),c=u+(t.end-t.start);return{center:r,radius:Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),startAngle:u,endAngle:c}}function Rye(e,t){return Ple(e)?!1!==e&&{}:Kle(e,[t])}function Aye(e,t){return Kle(e,"position",t)}function jye(e,t){return Kle(t,["title","text"],kye(e))}var Dye=function(){function e(e,t){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=Hle({},this.getDefaultCfg(),t)}return e.prototype.init=function(){this.container||(this.container=this.createContainer());var e=this.view.getData();this.facets=this.generateFacets(e)},e.prototype.render=function(){this.renderViews()},e.prototype.update=function(){},e.prototype.clear=function(){this.clearFacetViews()},e.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},e.prototype.facetToView=function(e){var t=e.region,n=e.data,r=e.padding,i=void 0===r?this.cfg.padding:r,o=this.view.createView({region:t,padding:i});o.data(n||[]),e.view=o,this.beforeEachView(o,e);var a=this.cfg.eachView;return a&&a(o,e),this.afterEachView(o,e),o},e.prototype.createContainer=function(){return this.view.getLayer(cue.FORE).addGroup()},e.prototype.renderViews=function(){this.createFacetViews()},e.prototype.createFacetViews=function(){var e=this;return this.facets.map((function(t){return e.facetToView(t)}))},e.prototype.clearFacetViews=function(){var e=this;Hae(this.facets,(function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)}))},e.prototype.parseSpacing=function(){var e=this.view.viewBBox,t=e.width,n=e.height;return this.cfg.spacing.map((function(e,r){return ple(e)?e/(0===r?t:n):parseFloat(e)/100}))},e.prototype.getFieldValues=function(e,t){var n=[],r={};return Hae(e,(function(e){var i=e[t];Bae(i)||r[i]||(n.push(i),r[i]=!0)})),n},e.prototype.getRegion=function(e,t,n,r){var i=Mae(this.parseSpacing(),2),o=i[0],a=i[1],l=(1+o)/(0===t?1:t)-o,u=(1+a)/(0===e?1:e)-a,c={x:(l+o)*n,y:(u+a)*r};return{start:c,end:{x:c.x+l,y:c.y+u}}},e.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},e.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},e.prototype.processAxis=function(e,t){var n=e.getOptions(),r=n.coordinate,i=e.geometries;if("rect"===Kle(r,"type","rect")&&i.length){Bae(n.axes)&&(n.axes={});var o=n.axes,a=Mae(i[0].getXYFields(),2),l=a[0],u=a[1],c=Rye(o,l),s=Rye(o,u);!1!==c&&(n.axes[l]=this.getXAxisOption(l,o,c,t)),!1!==s&&(n.axes[u]=this.getYAxisOption(u,o,s,t))}},e.prototype.getFacetDataFilter=function(e){return function(t){return lle(e,(function(e){var n=e.field,r=e.value;return!(!Bae(r)&&n)||t[n]===r}))}},e}(),Tye={},Fye=function(e,t){Tye[Cle(e)]=t},Nye=function(){function e(e,t){this.context=e,this.cfg=t,e.addAction(this)}return e.prototype.applyCfg=function(e){Nle(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),Lye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.execute=function(){this.callback&&this.callback(this.context)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},t}(Nye),Bye={};function Vye(e){var t=Bye[e];return Kle(t,"ActionClass")}function zye(e,t,n){Bye[e]={ActionClass:t,cfg:n}}function Hye(e,t){var n=new Lye(t);return n.callback=e,n.name="callback",n}function Wye(e,t){for(var n=[e[0]],r=1,i=e.length;r<i;r+=2){var o=t.convert({x:e[r],y:e[r+1]});n.push(o.x,o.y)}return n}function Uye(e,t){var n=t.isTransposed,r=e[1],i=e[6],o=e[7],a=t.convert({x:i,y:o});return["A",r,r,0,0,n?0:1,a.x,a.y]}var Gye=function(e,t,n,r){var i,o,a,l,u,c,s,d,f=[],h=!!r;if(h){l=(i=Mae(r,2))[0],u=i[1];for(var p=0,v=e.length;p<v;p++){l=Yce([0,0],l,m=e[p]),u=$ce([0,0],u,m)}}p=0;for(var g=e.length;p<g;p++){var m=e[p];if(0!==p||n)if(p!==g-1||n){o=e[n?p?p-1:g-1:p-1],a=e[n?(p+1)%g:p+1];var y=[0,0];y=qce(y=Qce(y,a,o),y,t);var b=Kce(m,o),w=Kce(m,a),_=b+w;0!==_&&(b/=_,w/=_);var x=qce([0,0],y,-b),k=qce([0,0],y,w);s=Uce([0,0],m,x),c=Yce([0,0],c=Uce([0,0],m,k),$ce([0,0],a,m)),c=$ce([0,0],c,Yce([0,0],a,m)),s=Yce([0,0],s=Uce([0,0],m,x=qce([0,0],x=Qce([0,0],c,m),-b/w)),$ce([0,0],o,m)),s=$ce([0,0],s,Yce([0,0],o,m)),c=Uce([0,0],m,k=qce([0,0],k=Qce([0,0],m,s),w/b)),h&&(s=Yce([0,0],s=$ce([0,0],s,l),u),c=Yce([0,0],c=$ce([0,0],c,l),u)),f.push(d),f.push(s),d=c}else s=m,f.push(d),f.push(s);else d=m}return n&&f.push(f.shift()),f};function Yye(e,t,n){for(var r=!!t,i=[],o=0,a=e.length;o<a;o+=2)i.push([e[o],e[o+1]]);var l,u,c,s=Gye(i,.4,r,n),d=i.length,f=[];for(o=0;o<d-1;o++)l=s[2*o],u=s[2*o+1],c=i[o+1],f.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]]);return r&&(l=s[d],u=s[d+1],c=i[0],f.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]])),f}function $ye(e,t){return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var o=e[r];n.push(["L",o.x,o.y])}t&&n.push(["Z"])}return n}(e,t)}function qye(e,t,n){var r=[],i=e[0],o=null;if(e.length<=2)return $ye(e,t);for(var a=0,l=e.length;a<l;a++){var u=e[a];o&&o.x===u.x&&o.y===u.y||(r.push(u.x),r.push(u.y),o=u)}var c=Yye(r,t,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function Kye(e,t){var n,r,i,o=[];return Hae(t,(function(a,l){switch(a[0].toLowerCase()){case"m":case"c":case"q":o.push(Wye(a,e));break;case"l":n=t[l-1],r=a,i=e.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?o=o.concat(function(e,t,n){var r=n.isTransposed,i=n.startAngle,o=n.endAngle,a="a"===e[0].toLowerCase()?{x:e[6],y:e[7]}:{x:e[1],y:e[2]},l={x:t[1],y:t[2]},u=[],c=r?"y":"x",s=Math.abs(l[c]-a[c])*(o-i),d=l[c]>=a[c]?1:0,f=s>Math.PI?1:0,h=n.convert(l),p=mye(n,h);if(p>=.5)if(s===2*Math.PI){var v={x:(l.x+a.x)/2,y:(l.y+a.y)/2},g=n.convert(v);u.push(["A",p,p,0,f,d,g.x,g.y]),u.push(["A",p,p,0,f,d,h.x,h.y])}else u.push(["A",p,p,0,f,d,h.x,h.y]);return u}(n,r,e)):o.push(Wye(a,e));break;case"a":o.push(Uye(a,e));break;default:o.push(a)}})),function(e){Hae(e,(function(t,n){if("a"===t[0].toLowerCase()){var r=e[n-1],i=e[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(o),o}function Xye(e,t){return Zye(e.event.target,t)}function Jye(e,t){var n=e.getCanvasBBox(),r=n.width,i=n.height;return r>0&&i>0&&(r>=t||i>=t)}function Zye(e,t){var n=e.getCanvasBBox();return Jye(e,t)?n:null}function Qye(e,t){return e.event.maskShapes.map((function(e){return Zye(e,t)})).filter((function(e){return!!e}))}function ebe(e,t){return Jye(e,t)?e.attr("path"):null}function tbe(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function nbe(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function rbe(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function ibe(e){return e&&e.component&&e.component.isList()}function obe(e){return e&&e.component&&e.component.isSlider()}function abe(e){var t=e.event.target;return t&&"mask"===(null==t?void 0:t.get("name"))||lbe(e)}function lbe(e){var t;return"multi-mask"===(null===(t=e.event.target)||void 0===t?void 0:t.get("name"))}function ube(e,t){var n=e.event.target;if(lbe(e))return function(e,t){var n=e.event.target;if("path"===n.get("type")){var r=function(e,t){return e.event.maskShapes.map((function(e){return ebe(e,t)}))}(e,t);return r.length>0?r.flatMap((function(t){return gbe(e.view,t)})):null}var i=Qye(e,t);if(i.length>0)return i.flatMap((function(t){return pbe(e.view,t)}));return null}(e,t);if("path"===n.get("type")){var r=function(e,t){return ebe(e.event.target,t)}(e,t);if(!r)return;return gbe(e.view,r)}var i=Xye(e,t);return i?pbe(e.view,i):null}function cbe(e,t,n){if(lbe(e))return function(e,t,n){var r=Qye(e,n);if(r.length>0)return r.flatMap((function(n){return sbe(n,e,t)}));return null}(e,t,n);var r=Xye(e,n);return r?sbe(r,e,t):null}function sbe(e,t,n){var r=t.view,i=_be(r,n,{x:e.x,y:e.y}),o=_be(r,n,{x:e.maxX,y:e.maxY});return pbe(n,{minX:i.x,minY:i.y,maxX:o.x,maxY:o.y})}function dbe(e){var t=e.geometries,n=[];return Hae(t,(function(e){var t=e.elements;n=n.concat(t)})),e.views&&e.views.length&&Hae(e.views,(function(e){n=n.concat(dbe(e))})),n}function fbe(e,t){var n=e.geometries,r=[];return Hae(n,(function(e){var n=e.getElementsBy((function(e){return e.hasState(t)}));r=r.concat(n)})),r}function hbe(e,t){var n=e.getModel().data;return Vae(n)?n[0][t]:n[t]}function pbe(e,t){var n=dbe(e),r=[];return Hae(n,(function(e){var n,i,o=e.shape.getCanvasBBox();n=t,(i=o).minX>n.maxX||i.maxX<n.minX||i.minY>n.maxY||i.maxY<n.minY||r.push(e)})),r}function vbe(e){var t=[];return Hae(e,(function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t}function gbe(e,t){var n=dbe(e),r=vbe(t),i=n.filter((function(e){var t,n,i=e.shape;if("path"===i.get("type"))t=vbe(i.attr("path"));else{var o=i.getCanvasBBox();t=[[(n=o).minX,n.minY],[n.maxX,n.minY],[n.maxX,n.maxY],[n.minX,n.maxY]]}return function(e,t){if(e.length<2||t.length<2)return!1;var n,r,i=Ahe(e),o=Ahe(t);if(n=i,(r=o).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var a=!1;if(Hae(t,(function(t){if(Phe(e,t[0],t[1]))return a=!0,!1})),a)return!0;if(Hae(e,(function(e){if(Phe(t,e[0],e[1]))return a=!0,!1})),a)return!0;var l=Mhe(e),u=Mhe(t),c=!1;return Hae(u,(function(e){if(Rhe(l,e))return c=!0,!1})),c}(r,t)}));return i}function mbe(e){return e.getComponents().map((function(e){return e.component}))}function ybe(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function bbe(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function wbe(e){var t=e.parent,n=null;return t&&(n=t.views.filter((function(t){return t!==e}))),n}function _be(e,t,n){var r=function(e,t){return e.getCoordinate().invert(t)}(e,n);return t.getCoordinate().convert(r)}function xbe(e,t,n,r){var i=!1;return Hae(e,(function(e){if(e[n]===t[n]&&e[r]===t[r])return i=!0,!1})),i}function kbe(e,t){var n=e.getScaleByField(t);return!n&&e.views&&Hae(e.views,(function(e){if(n=kbe(e,t))return!1})),n}var Cbe=function(){function e(e){this.actions=[],this.event=null,this.cacheMap={},this.view=e}return e.prototype.cache=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)return this.cacheMap[e[0]];2===e.length&&(this.cacheMap[e[0]]=e[1])},e.prototype.getAction=function(e){return this.actions.find((function(t){return t.name===e}))},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.removeAction=function(e){var t=this.actions,n=this.actions.indexOf(e);n>=0&&t.splice(n,1)},e.prototype.getCurrentPoint=function(){var e=this.event;return e?e.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(e.clientX,e.clientY):{x:e.x,y:e.y}:null},e.prototype.getCurrentShape=function(){return Kle(this.event,["gEvent","shape"])},e.prototype.isInPlot=function(){var e=this.getCurrentPoint();return!!e&&this.view.isPointInPlot(e)},e.prototype.isInShape=function(e){var t=this.getCurrentShape();return!!t&&t.get("name")===e},e.prototype.isInComponent=function(e){var t=mbe(this.view),n=this.getCurrentPoint();return!!n&&!!t.find((function(t){var r=t.getBBox();return e?t.get("name")===e&&bbe(r,n):bbe(r,n)}))},e.prototype.destroy=function(){Hae(this.actions.slice(),(function(e){e.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},e}(),Sbe=function(){function e(e,t){this.view=e,this.cfg=t}return e.prototype.init=function(){this.initEvents()},e.prototype.initEvents=function(){},e.prototype.clearEvents=function(){},e.prototype.destroy=function(){this.clearEvents()},e}();function Obe(e,t,n){var r=e.split(":"),i=r[0],o=t.getAction(i)||function(e,t){var n=Bye[e],r=null;return n&&((r=new(0,n.ActionClass)(t,n.cfg)).name=e,r.init()),r}(i,t);if(!o)throw new Error("There is no action named ".concat(i));return{action:o,methodName:r[1],arg:n}}function Ebe(e){var t=e.action,n=e.methodName,r=e.arg;if(!t[n])throw new Error("Action(".concat(t.name,") doesn't have a method called ").concat(n));t[n](r)}var Ibe="start",Pbe="showEnable",Mbe="end",Rbe="rollback",Abe="processing",jbe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return Cae(t,e),t.prototype.init=function(){this.initContext(),e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},t.prototype.initEvents=function(){var e=this;Hae(this.steps,(function(t,n){Hae(t,(function(t){var r=e.getActionCallback(n,t);r&&e.bindEvent(t.trigger,r)}))}))},t.prototype.clearEvents=function(){var e=this;Hae(this.steps,(function(t,n){Hae(t,(function(t){var r=e.getActionCallback(n,t);r&&e.offEvent(t.trigger,r)}))}))},t.prototype.initContext=function(){var e=this.view,t=new Cbe(e);this.context=t,Hae(this.steps,(function(e){Hae(e,(function(e){if(Lae(e.action))e.actionObject={action:Hye(e.action,t),methodName:"execute"};else if(nle(e.action))e.actionObject=Obe(e.action,t,e.arg);else if(Vae(e.action)){var n=e.action,r=Vae(e.arg)?e.arg:[e.arg];e.actionObject=[],Hae(n,(function(n,i){e.actionObject.push(Obe(n,t,r[i]))}))}}))}))},t.prototype.isAllowStep=function(e){var t=this.currentStepName,n=this.steps;if(t===e)return!0;if(e===Pbe)return!0;if(e===Abe)return t===Ibe;if(e===Ibe)return t!==Abe;if(e===Mbe)return t===Abe||t===Ibe;if(e===Rbe){if(n[Mbe])return t===Mbe;if(t===Ibe)return!0}return!1},t.prototype.isAllowExecute=function(e,t){if(this.isAllowStep(e)){var n=this.getKey(e,t);return(!t.once||!this.emitCaches[n])&&(!t.isEnable||t.isEnable(this.context))}return!1},t.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},t.prototype.afterExecute=function(e,t){e!==Pbe&&this.currentStepName!==e&&this.enterStep(e);var n=this.getKey(e,t);this.emitCaches[n]=!0},t.prototype.getKey=function(e,t){return e+t.trigger+t.action},t.prototype.getActionCallback=function(e,t){var n=this,r=this.context,i=this.callbackCaches,o=t.actionObject;if(t.action&&o){var a=this.getKey(e,t);if(!i[a]){var l=function(i){r.event=i,n.isAllowExecute(e,t)?(Vae(o)?Hae(o,(function(e){r.event=i,Ebe(e)})):(r.event=i,Ebe(o)),n.afterExecute(e,t),t.callback&&(r.event=i,t.callback(r))):r.event=null};t.debounce?i[a]=Ble(l,t.debounce.wait,t.debounce.immediate):t.throttle?i[a]=eue(l,t.throttle.wait,{leading:t.throttle.leading,trailing:t.throttle.trailing}):i[a]=l}return i[a]}return null},t.prototype.bindEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.addEventListener(n[1],t):"document"===n[0]?document.addEventListener(n[1],t):this.view.on(e,t)},t.prototype.offEvent=function(e,t){var n=e.split(":");"window"===n[0]?window.removeEventListener(n[1],t):"document"===n[0]?document.removeEventListener(n[1],t):this.view.off(e,t)},t}(Sbe),Dbe={};function Tbe(e,t){Dbe[Cle(e)]=t}function Fbe(e,t,n){var r=function(e){return Dbe[Cle(e)]}(e);if(!r)return null;if(Yae(r)){var i=Nle(Lle(r),n);return new jbe(t,i)}return new r(t,n)}function Nbe(e){var t,n={point:{default:{fill:e.pointFillColor,r:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{stroke:e.pointActiveBorderColor,lineWidth:e.pointActiveBorder},selected:{stroke:e.pointSelectedBorderColor,lineWidth:e.pointSelectedBorder},inactive:{fillOpacity:e.pointInactiveFillOpacity,strokeOpacity:e.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:e.hollowPointFillColor,lineWidth:e.hollowPointBorder,stroke:e.hollowPointBorderColor,strokeOpacity:e.hollowPointBorderOpacity,r:e.hollowPointSize},active:{stroke:e.hollowPointActiveBorderColor,strokeOpacity:e.hollowPointActiveBorderOpacity},selected:{lineWidth:e.hollowPointSelectedBorder,stroke:e.hollowPointSelectedBorderColor,strokeOpacity:e.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:e.hollowPointInactiveBorderOpacity}},area:{default:{fill:e.areaFillColor,fillOpacity:e.areaFillOpacity,stroke:null},active:{fillOpacity:e.areaActiveFillOpacity},selected:{fillOpacity:e.areaSelectedFillOpacity},inactive:{fillOpacity:e.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:e.hollowAreaBorderColor,lineWidth:e.hollowAreaBorder,strokeOpacity:e.hollowAreaBorderOpacity},active:{fill:null,lineWidth:e.hollowAreaActiveBorder},selected:{fill:null,lineWidth:e.hollowAreaSelectedBorder},inactive:{strokeOpacity:e.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:e.intervalFillColor,fillOpacity:e.intervalFillOpacity},active:{stroke:e.intervalActiveBorderColor,lineWidth:e.intervalActiveBorder},selected:{stroke:e.intervalSelectedBorderColor,lineWidth:e.intervalSelectedBorder},inactive:{fillOpacity:e.intervalInactiveFillOpacity,strokeOpacity:e.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:e.hollowIntervalFillColor,stroke:e.hollowIntervalBorderColor,lineWidth:e.hollowIntervalBorder,strokeOpacity:e.hollowIntervalBorderOpacity},active:{stroke:e.hollowIntervalActiveBorderColor,lineWidth:e.hollowIntervalActiveBorder,strokeOpacity:e.hollowIntervalActiveBorderOpacity},selected:{stroke:e.hollowIntervalSelectedBorderColor,lineWidth:e.hollowIntervalSelectedBorder,strokeOpacity:e.hollowIntervalSelectedBorderOpacity},inactive:{stroke:e.hollowIntervalInactiveBorderColor,lineWidth:e.hollowIntervalInactiveBorder,strokeOpacity:e.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:e.lineBorderColor,lineWidth:e.lineBorder,strokeOpacity:e.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:e.lineActiveBorder},selected:{lineWidth:e.lineSelectedBorder},inactive:{strokeOpacity:e.lineInactiveBorderOpacity}}},r=function(e){return{title:{autoRotate:!0,position:"center",spacing:e.axisTitleSpacing,style:{fill:e.axisTitleTextFillColor,fontSize:e.axisTitleTextFontSize,lineHeight:e.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily},iconStyle:{fill:e.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:e.axisLabelOffset,style:{fill:e.axisLabelFillColor,fontSize:e.axisLabelFontSize,lineHeight:e.axisLabelLineHeight,fontFamily:e.fontFamily}},line:{style:{lineWidth:e.axisLineBorder,stroke:e.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:e.axisGridBorderColor,lineWidth:e.axisGridBorder,lineDash:e.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:e.axisTickLineBorder,stroke:e.axisTickLineBorderColor},alignTick:!0,length:e.axisTickLineLength},subTickLine:null,animate:!0}}(e),i=function(e){return{title:null,marker:{symbol:"circle",spacing:e.legendMarkerSpacing,style:{r:e.legendCircleMarkerSize,fill:e.legendMarkerColor}},itemName:{spacing:5,style:{fill:e.legendItemNameFillColor,fontFamily:e.fontFamily,fontSize:e.legendItemNameFontSize,lineHeight:e.legendItemNameLineHeight,fontWeight:e.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:e.legendPageNavigatorMarkerSize,inactiveFill:e.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:e.legendPageNavigatorMarkerInactiveFillOpacity,fill:e.legendPageNavigatorMarkerFillColor,opacity:e.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:e.legendPageNavigatorTextFillColor,fontSize:e.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:e.legendItemSpacing,itemMarginBottom:e.legendItemMarginBottom,padding:e.legendPadding}}(e);return{background:e.backgroundColor,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,padding:"auto",fontFamily:e.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var r=sye(e.getModel(),t),i=(r.startAngle+r.endAngle)/2;return{matrix:ise(null,[["t",7.5*Math.cos(i),7.5*Math.sin(i)]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:Sae(Sae({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Sae(Sae({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Sae(Sae({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Sae(Sae({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Sae(Sae({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Sae(Sae({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Sae(Sae({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Sae(Sae({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:Hle({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:Hle({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:e.legendVerticalPadding},left:{layout:"vertical",padding:e.legendVerticalPadding},top:{layout:"horizontal",padding:e.legendHorizontalPadding},bottom:{layout:"horizontal",padding:e.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:e.sliderRailHeight,defaultLength:e.sliderRailWidth,style:{fill:e.sliderRailFillColor,stroke:e.sliderRailBorderColor,lineWidth:e.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:e.sliderLabelTextFillColor,fontSize:e.sliderLabelTextFontSize,lineHeight:e.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:e.fontFamily}},handler:{size:e.sliderHandlerWidth,style:{fill:e.sliderHandlerFillColor,stroke:e.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:e.tooltipCrosshairsBorderColor,lineWidth:e.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(t={},t["".concat(kme)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:e.tooltipContainerFillColor,opacity:e.tooltipContainerFillOpacity,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:"".concat(e.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},t["".concat(Cme)]={marginBottom:"12px",marginTop:"12px"},t["".concat(Sme)]={margin:0,listStyleType:"none",padding:0},t["".concat(Ome)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},t["".concat(Eme)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t["".concat(Ime)]={display:"inline-block",float:"right",marginLeft:"30px"},t)},annotation:{arc:{style:{stroke:e.annotationArcBorderColor,lineWidth:e.annotationArcBorder},animate:!0},line:{style:{stroke:e.annotationLineBorderColor,lineDash:e.annotationLineDash,lineWidth:e.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textAlign:"start",fontFamily:e.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:e.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:e.annotationRegionBorder,stroke:e.annotationRegionBorderColor,fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:e.brandColor,lineWidth:2}},line:{style:{stroke:e.annotationLineBorderColor,lineWidth:e.annotationLineBorder},length:e.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:e.annotationRegionFillColor,fillOpacity:e.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:e.annotationTextFillColor,stroke:e.annotationTextBorderColor,lineWidth:e.annotationTextBorder,fontSize:e.annotationTextFontSize,fontFamily:e.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:e.cSliderBackgroundFillColor,opacity:e.cSliderBackgroundFillOpacity},foregroundStyle:{fill:e.cSliderForegroundFillColor,opacity:e.cSliderForegroundFillOpacity},handlerStyle:{width:e.cSliderHandlerWidth,height:e.cSliderHandlerHeight,fill:e.cSliderHandlerFillColor,opacity:e.cSliderHandlerFillOpacity,stroke:e.cSliderHandlerBorderColor,lineWidth:e.cSliderHandlerBorder,radius:e.cSliderHandlerBorderRadius,highLightFill:e.cSliderHandlerHighlightFillColor},textStyle:{fill:e.cSliderTextFillColor,opacity:e.cSliderTextFillOpacity,fontSize:e.cSliderTextFontSize,lineHeight:e.cSliderTextLineHeight,fontWeight:e.cSliderTextFontWeight,stroke:e.cSliderTextBorderColor,lineWidth:e.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:e.scrollbarTrackFillColor,thumbColor:e.scrollbarThumbFillColor}},hover:{style:{thumbColor:e.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,stroke:e.labelBorderColor,lineWidth:e.labelBorder},fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:e.innerLabelFillColor,fontSize:e.innerLabelFontSize,fontFamily:e.fontFamily,stroke:e.innerLabelBorderColor,lineWidth:e.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:e.overflowLabelFillColor,fontSize:e.overflowLabelFontSize,fontFamily:e.fontFamily,stroke:e.overflowLabelBorderColor,lineWidth:e.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:e.labelLineBorder}},autoRotate:!0}}}var Lbe="#000",Bbe="#595959",Vbe="#8C8C8C",zbe="#BFBFBF",Hbe="#D9D9D9",Wbe="#F0F0F0",Ube="#FFFFFF",Gbe="#D9D9D9",Ybe=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],$be=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],qbe=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],Kbe=function(e){void 0===e&&(e={});var t=e.paletteQualitative10,n=void 0===t?Ybe:t,r=e.paletteQualitative20,i=void 0===r?$be:r,o=e.brandColor,a=void 0===o?n[0]:o;return Sae(Sae({},{backgroundColor:"transparent",brandColor:a,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:qbe,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:zbe,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Bbe,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Gbe,axisTickLineBorderColor:zbe,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Hbe,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Vbe,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Hbe,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Vbe,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:a,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Bbe,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Lbe,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Lbe,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Vbe,legendPageNavigatorTextFontSize:12,sliderRailFillColor:Hbe,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Vbe,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Wbe,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:zbe,annotationArcBorderColor:Hbe,annotationArcBorder:1,annotationLineBorderColor:zbe,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Bbe,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Lbe,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:zbe,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Bbe,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Bbe,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ube,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Bbe,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ube,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:zbe,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:a,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ube,pointBorderOpacity:1,pointActiveBorderColor:Lbe,pointSelectedBorder:2,pointSelectedBorderColor:Lbe,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:a,hollowPointBorderOpacity:.95,hollowPointFillColor:Ube,hollowPointActiveBorder:1,hollowPointActiveBorderColor:Lbe,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Lbe,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:a,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:a,areaFillOpacity:.25,areaActiveFillColor:a,areaActiveFillOpacity:.5,areaSelectedFillColor:a,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:a,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Lbe,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Lbe,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:a,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Lbe,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Lbe,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:a,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ube,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Lbe,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Lbe,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}),e)};function Xbe(e){var t=e.styleSheet,n=void 0===t?{}:t,r=Oae(e,["styleSheet"]),i=Kbe(n);return Hle({},Nbe(i),r)}Kbe();var Jbe={default:Xbe({})};function Zbe(e){return Kle(Jbe,Cle(e),Jbe.default)}function Qbe(e,t,n){return gle(n.translate(e),n.translate(t))}function ewe(e,t,n){var r=n.coordinate,i=n.getYScale(),o=i.field,a=r.invert(t),l=i.invert(a.y);return $ae(e,(function(e){var t=e[Aue];return t[o][0]<=l&&t[o][1]>=l}))||e[e.length-1]}var twe=Vle((function(e){if(e.isCategory)return 1;for(var t=e.values,n=t.length,r=e.translate(t[0]),i=r,o=0;o<n;o++){var a=t[o],l=e.translate(a);l<r&&(r=l),l>i&&(i=l)}return(i-r)/(n-1)}));function nwe(e){var t,n,r,i=function(e){var t=xle(e.attributes);return Tae(t,(function(e){return Dae(Rue,e.type)}))}(e);try{for(var o=Pae(i),a=o.next();!a.done;a=o.next()){var l=a.value,u=l.getScale(l.type);if(u&&u.isLinear)if("cat"!==_ye(u,Kle(e.scaleDefs,u.field),l.type,e.type)){r=u;break}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}var c=e.getXScale(),s=e.getYScale();return r||s||c}function rwe(e,t,n){if(0===t.length)return null;var r=n.type,i=n.getXScale(),o=n.getYScale(),a=i.field,l=o.field,u=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(e),s=i.invert(c.x),d=o.invert(c.y),f=1/0,h=0;h<t.length;h++){var p=t[h],v=p[Aue],g=Math.pow(v[a]-s,2)+Math.pow(v[l]-d,2);g<f&&(f=g,u=p)}return u}var m=t[0],y=t[t.length-1],b=function(e,t){var n=t.coordinate,r=t.getXScale(),i=r.range,o=i[i.length-1],a=i[0],l=n.invert(e).x;return n.isPolar&&l>(1+o)/2&&(l=a),r.translate(r.invert(l))}(e,n),w=m[Aue][a],_=m[Aue][l],x=y[Aue][a],k=o.isLinear&&Vae(_);if(Vae(w)){for(h=0;h<t.length;h++){v=(P=t[h])[Aue];if(i.translate(v[a][0])<=b&&i.translate(v[a][1])>=b){if(!k){u=P;break}Vae(u)||(u=[]),u.push(P)}}Vae(u)&&(u=ewe(u,e,n))}else{var C=void 0;if(i.isLinear||"timeCat"===i.type){if((b>i.translate(x)||b<i.translate(w))&&(b>i.max||b<i.min))return null;for(var S=0,O=t.length-1,E=void 0;S<=O;){var I=t[E=Math.floor((S+O)/2)][Aue][a];if(Qbe(I,b,i))return t[E];i.translate(I)<=i.translate(b)?(S=E+1,y=t[E],C=t[E+1]):(0===O&&(y=t[0]),O=E-1)}}else{for(h=0;h<t.length;h++){var P;if(Qbe((v=(P=t[h])[Aue])[a],b,i)){if(!k){u=P;break}Vae(u)||(u=[]),u.push(P)}else i.translate(v[a])<=b&&(y=P,C=t[h+1])}Vae(u)&&(u=ewe(u,e,n))}y&&C&&Math.abs(i.translate(y[Aue][a])-b)>Math.abs(i.translate(C[Aue][a])-b)&&(y=C)}var M=twe(n.getXScale());return!u&&Math.abs(i.translate(y[Aue][a])-b)<=M/2&&(u=y),u}function iwe(e,t,n,r){var i,o;void 0===n&&(n=""),void 0===r&&(r=!1);var a,l,u=e[Aue],c=function(e,t,n){var r=t.getAttribute("position").getFields(),i=t.scales,o=Lae(n)||!n?r[0]:n,a=i[o],l=a?a.getText(e[o]):e[o]||o;return Lae(n)?n(l,e):l}(u,t,n),s=t.tooltipOption,d=t.theme.defaultColor,f=[];function h(t,n){if(r||!Bae(n)&&""!==n){var i={title:c,data:u,mappingData:e,name:t,value:n,color:e.color||d,marker:!0};f.push(i)}}if(zae(s)){var p=s.fields,v=s.callback;if(v){var g=p.map((function(t){return e[Aue][t]})),m=v.apply(void 0,Aae([],Mae(g),!1)),y=Sae({data:e[Aue],mappingData:e,title:c,color:e.color||d,marker:!0},m);f.push(y)}else{var b=t.scales;try{for(var w=Pae(p),_=w.next();!_.done;_=w.next()){var x=_.value;if(!Bae(u[x])){var k=b[x];h(a=kye(k),l=k.getText(u[x]))}}}catch(e){i={error:e}}finally{try{_&&!_.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}}}else{var C=nwe(t);l=function(e,t){var n=e[t.field];return Vae(n)?n.map((function(e){return t.getText(e)})).join("-"):t.getText(n)}(u,C),a=function(e,t){var n,r=t.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(e[i])}return kye(nwe(t))}(u,t),h(a,l)}return f}function owe(e,t,n,r){var i,o,a=r.showNil,l=[],u=e.dataArray;if(!Gle(u)){e.sort(u);try{for(var c=Pae(u),s=c.next();!s.done;s=c.next()){var d=rwe(t,s.value,e);if(d){var f=e.getElementId(d),h=e.elementsMap[f];if("heatmap"===e.type||h.visible){var p=iwe(d,e,n,a);p.length&&l.push(p)}}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}return l}function awe(e,t,n,r){var i=r.showNil,o=[],a=e.container.getShape(t.x,t.y);if(a&&a.get("visible")&&a.get("origin")){var l=iwe(a.get("origin").mappingData,e,n,i);l.length&&o.push(l)}return o}function lwe(e,t,n){var r,i,o=[],a=e.geometries,l=n.shared,u=n.title,c=n.reversed;try{for(var s=Pae(a),d=s.next();!d.done;d=s.next()){var f=d.value;if(f.visible&&!1!==f.tooltipOption){var h=f.type,p=void 0;(p=["point","edge","polygon"].includes(h)?awe(f,t,u,n):["area","line","path","heatmap"].includes(h)||!1!==l?owe(f,t,u,n):awe(f,t,u,n)).length&&(c&&p.reverse(),o.push(p))}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}function uwe(e){void 0===e&&(e=0);var t=Vae(e)?e:[e];switch(t.length){case 0:t=[0,0,0,0];break;case 1:t=new Array(4).fill(t[0]);break;case 2:t=Aae(Aae([],Mae(t),!1),Mae(t),!1);break;case 3:t=Aae(Aae([],Mae(t),!1),[t[1]],!1);break;default:t=t.slice(0,4)}return t}var cwe={};function swe(e,t){cwe[e]=t}var dwe=function(){function e(e){this.option=this.wrapperOption(e)}return e.prototype.update=function(e){return this.option=this.wrapperOption(e),this},e.prototype.hasAction=function(e){var t=this.option.actions;return ule(t,(function(t){return t[0]===e}))},e.prototype.create=function(e,t){var n=this.option,r=n.type,i=n.cfg,o="theta"===r,a=Sae({start:e,end:t},i),l=function(e){return $ve[e.toLowerCase()]}(o?"polar":r);return this.coordinate=new l(a),this.coordinate.type=r,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},e.prototype.adjust=function(e,t){return this.coordinate.update({start:e,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},e.prototype.rotate=function(e){return this.option.actions.push(["rotate",e]),this},e.prototype.reflect=function(e){return this.option.actions.push(["reflect",e]),this},e.prototype.scale=function(e,t){return this.option.actions.push(["scale",e,t]),this},e.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},e.prototype.getOption=function(){return this.option},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.wrapperOption=function(e){return Sae({type:"rect",actions:[],cfg:{}},e)},e.prototype.execActions=function(e){var t=this;Hae(this.option.actions,(function(n){var r,i=Mae(n),o=i[0],a=i.slice(1);(!!Bae(e)||e.includes(o))&&(r=t.coordinate)[o].apply(r,Aae([],Mae(a),!1))}))},e}(),fwe=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return e.fromData=function(t,n,r){return new e(t,new kce(n,{}),r)},Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}();function hwe(e){var t=e.getController("axis"),n=e.getController("legend"),r=e.getController("annotation");[t,e.getController("slider"),e.getController("scrollbar"),n,r].forEach((function(e){e&&e.layout()}))}var pwe=function(){function e(){this.scales=new Map,this.syncScales=new Map}return e.prototype.createScale=function(e,t,n,r){var i=n,o=this.getScaleMeta(r);if(0===t.length&&o){var a=o.scale,l={type:a.type};a.isCategory&&(l.values=a.values),i=Hle(l,o.scaleDef,n)}var u=xye(e,t,i);return this.cacheScale(u,n,r),u},e.prototype.sync=function(e,t){var n=this;this.syncScales.forEach((function(r,i){var o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,l=[];Hae(r,(function(e){var t=n.getScale(e);a=ple(t.max)?Math.max(a,t.max):a,o=ple(t.min)?Math.min(o,t.min):o,Hae(t.values,(function(e){l.includes(e)||l.push(e)}))})),Hae(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:o,max:a,values:l});else if(i.isCategory){var u=i.range,c=n.getScaleMeta(r);Kle(c,["scaleDef","range"])||(u=Cye(Hle({},i,{values:l}),e,t)),i.change({values:l,range:u})}}))}))},e.prototype.cacheScale=function(e,t,n){var r=this.getScaleMeta(n);r&&r.scale.type===e.type?(!function(e,t){if("identity"!==e.type&&"identity"!==t.type){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);e.change(n)}}(r.scale,e),r.scaleDef=t):(r={key:n,scale:e,scaleDef:t},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var o=this.syncScales.get(i);o||(o=[],this.syncScales.set(i,o)),o.push(n)}},e.prototype.getScale=function(e){var t=this.getScaleMeta(e);if(!t){var n=ale(e.split("-")),r=this.syncScales.get(n);r&&r.length&&(t=this.getScaleMeta(r[0]))}return t&&t.scale},e.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var n=t.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}this.scales.delete(e)},e.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},e.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(e);if(-1!==i)return n.splice(i,1),0===n.length&&t.syncScales.delete(r),!1}))},e.prototype.getSyncKey=function(e){var t=e.scale,n=e.scaleDef,r=t.field,i=Kle(n,["sync"]);return!0===i?r:!1===i?void 0:i},e.prototype.getScaleMeta=function(e){return this.scales.get(e)},e}(),vwe=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=e,this.right=t,this.bottom=n,this.left=r}return e.instance=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.max=function(e){var t=Mae(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return this.top=Math.max(this.top,n),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,o),this},e.prototype.shrink=function(e){var t=Mae(e,4),n=t[0],r=t[1],i=t[2],o=t[3];return this.top+=n,this.right+=r,this.bottom+=i,this.left+=o,this},e.prototype.inc=function(e,t){var n=e.width,r=e.height;switch(t){case due.TOP:case due.TOP_LEFT:case due.TOP_RIGHT:this.top+=r;break;case due.RIGHT:case due.RIGHT_TOP:case due.RIGHT_BOTTOM:this.right+=n;break;case due.BOTTOM:case due.BOTTOM_LEFT:case due.BOTTOM_RIGHT:this.bottom+=r;break;case due.LEFT:case due.LEFT_TOP:case due.LEFT_BOTTOM:this.left+=n}return this},e.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},e.prototype.clone=function(){return new(e.bind.apply(e,Aae([void 0],Mae(this.getPadding()),!1)))},e}();function gwe(e){var t=e.padding;if(!function(e){return!ple(e)&&!Vae(e)}(t))return new(vwe.bind.apply(vwe,Aae([void 0],Mae(uwe(t)),!1)));var n=e.viewBBox,r=new vwe,i=[],o=[],a=[];return Hae(e.getComponents(),(function(e){var t=e.type;t===hue.AXIS?i.push(e):[hue.LEGEND,hue.SLIDER,hue.SCROLLBAR].includes(t)?o.push(e):t!==hue.GRID&&t!==hue.TOOLTIP&&a.push(e)})),Hae(i,(function(e){var t=e.component.getLayoutBBox(),i=new vye(t.x,t.y,t.width,t.height).exceed(n);r.max(i)})),Hae(o,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),o=t.get("padding"),a=new vye(i.x,i.y,i.width,i.height).expand(o);r.inc(a,n)})),Hae(a,(function(e){var t=e.component,n=e.direction,i=t.getLayoutBBox(),o=new vye(i.x,i.y,i.width,i.height);r.inc(o,n)})),r}function mwe(e,t,n){var r=n.instance();t.forEach((function(e){e.autoPadding=r.max(e.autoPadding.getPadding())}))}var ywe=function(e){function t(t){var n=e.call(this,{visible:t.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(cwe),n.scalePool=new pwe,n.layoutFunc=hwe,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(e){var t=e.name;if(!t.includes(":")){var r=n.createViewEvent(e);n.doPlotEvent(r),n.emit(t,r)}},n.onDelegateEvents=function(e){var t=e.name;if(t.includes(":")){var r=n.createViewEvent(e);n.emit(t,r)}};var r=t.id,i=void 0===r?rue("view"):r,o=t.parent,a=t.canvas,l=t.backgroundGroup,u=t.middleGroup,c=t.foregroundGroup,s=t.region,d=void 0===s?{start:{x:0,y:0},end:{x:1,y:1}}:s,f=t.padding,h=t.appendPadding,p=t.theme,v=t.options,g=t.limitInPlot,m=t.syncViewPadding;return n.parent=o,n.canvas=a,n.backgroundGroup=l,n.middleGroup=u,n.foregroundGroup=c,n.region=d,n.padding=f,n.appendPadding=h,n.options=Sae(Sae({},n.options),v),n.limitInPlot=g,n.id=i,n.syncViewPadding=m,n.themeObject=zae(p)?Hle({},Zbe("default"),Xbe(p)):Zbe(p),n.init(),n}return Cae(t,e),t.prototype.setLayout=function(e){this.layoutFunc=e},t.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},t.prototype.render=function(e,t){void 0===e&&(e=!1),this.emit(gue.BEFORE_RENDER,fwe.fromData(this,gue.BEFORE_RENDER,t)),this.paint(e),this.emit(gue.AFTER_RENDER,fwe.fromData(this,gue.AFTER_RENDER,t)),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this;this.emit(gue.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var t=this.geometries,n=0;n<t.length;n++)t[n].clear(),t[n].container.remove(!0),t[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(t,n){e.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(gue.AFTER_CLEAR)},t.prototype.destroy=function(){this.emit(gue.BEFORE_DESTROY),Hae(this.interactions,(function(e){e&&e.destroy()})),this.clear();for(var t=this.controllers,n=0,r=t.length;n<r;n++){t[n].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}var o=this.controllers;for(r=0,i=o.length;r<i;r++){o[r].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},t.prototype.data=function(e){return Xle(this.options,"data",e),this.isDataChanged=!0,this},t.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},t.prototype.filter=function(e,t){return Lae(t)?(Xle(this.options,["filters",e],t),this):(!t&&Kle(this.options,["filters",e])&&delete this.options.filters[e],this)},t.prototype.axis=function(e,t){return Ple(e)?Xle(this.options,["axes"],e):Xle(this.options,["axes",e],t),this},t.prototype.legend=function(e,t){return Ple(e)?Xle(this.options,["legends"],e):nle(e)?(Xle(this.options,["legends",e],t),Yae(t)&&(null==t?void 0:t.selected)&&Xle(this.options,["filters",e],(function(e){var n;return null===(n=null==t?void 0:t.selected[e])||void 0===n||n}))):Xle(this.options,["legends"],e),this},t.prototype.scale=function(e,t){var n=this;return nle(e)?Xle(this.options,["scales",e],t):zae(e)&&Hae(e,(function(e,t){Xle(n.options,["scales",t],e)})),this},t.prototype.tooltip=function(e){return Xle(this.options,"tooltip",e),this},t.prototype.annotation=function(){return this.getController("annotation")},t.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},t.prototype.coordinate=function(e,t){return nle(e)?Xle(this.options,"coordinate",{type:e,cfg:t}):Xle(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},t.prototype.coord=function(e,t){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,t)},t.prototype.facet=function(e,t){this.facetInstance&&this.facetInstance.destroy();var n=function(e){return Tye[Cle(e)]}(e);if(!n)throw new Error("facet '".concat(e,"' is not exist!"));return this.facetInstance=new n(this,Sae(Sae({},t),{type:e})),this},t.prototype.animate=function(e){return Xle(this.options,"animate",e),this},t.prototype.updateOptions=function(e){return this.clear(),Nle(this.options,e),this.views.forEach((function(e){return e.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},t.prototype.option=function(e,n){if(t.prototype[e])throw new Error("Can't use built in variable name \"".concat(e,'", please change another one.'));return Xle(this.options,e,n),this},t.prototype.theme=function(e){return this.themeObject=zae(e)?Hle({},this.themeObject,Xbe(e)):Zbe(e),this},t.prototype.interaction=function(e,t){var n=this.interactions[e];n&&n.destroy();var r=Fbe(e,this,t);return r&&(r.init(),this.interactions[e]=r),this},t.prototype.removeInteraction=function(e){var t=this.interactions[e];t&&(t.destroy(),this.interactions[e]=void 0)},t.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this,gue.BEFORE_CHANGE_DATA,null)),this.data(e),this.paint(!0);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].changeData(e)}this.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this,gue.AFTER_CHANGE_DATA,null))},t.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:Lle(this.options.scales),axes:Lle(this.options.axes),coordinate:Lle(this.coordinateController.getOption()),tooltip:Lle(this.options.tooltip),legends:Lle(this.options.legends),animate:this.options.animate,visible:this.visible},r=new t(Sae(Sae({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:Oue}),middleGroup:this.middleGroup.addGroup({zIndex:Sue}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:Cue}),theme:this.themeObject,padding:this.padding},e),{options:Sae(Sae({},n),Kle(e,"options",{}))}));return this.views.push(r),r},t.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},t.prototype.removeView=function(e){var t=tle(this.views,(function(t){return t===e}))[0];return t&&t.destroy(),t},t.prototype.getCoordinate=function(){return this.coordinateInstance},t.prototype.getTheme=function(){return this.themeObject},t.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},t.prototype.getYScales=function(){var e={},t=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;e[i]||(e[i]=!0,t.push(r))})),t},t.prototype.getScalesByDim=function(e){for(var t=this.geometries,n={},r=0,i=t.length;r<i;r++){var o=t[r],a="x"===e?o.getXScale():o.getYScale();a&&!n[a.field]&&(n[a.field]=a)}return n},t.prototype.getScale=function(e,t){var n=t||this.getScaleKey(e);return this.getRootView().scalePool.getScale(n)},t.prototype.getScaleByField=function(e,t){return this.getScale(e,t)},t.prototype.getOptions=function(){return this.options},t.prototype.getData=function(){return this.filteredData},t.prototype.getOriginalData=function(){return this.options.data},t.prototype.getPadding=function(){return this.autoPadding.getPadding()},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getElements=function(){return ele(this.geometries,(function(e,t){return e.concat(t.getElements())}),[])},t.prototype.getElementsBy=function(e){return this.getElements().filter((function(t){return e(t)}))},t.prototype.getLayer=function(e){return e===cue.BG?this.backgroundGroup:e===cue.MID?this.middleGroup:(cue.FORE,this.foregroundGroup)},t.prototype.isPointInPlot=function(e){return function(e,t){var n=!1;if(e)if("theta"===e.type){var r=e.start,i=e.end;n=fye(t.x,r.x,i.x)&&fye(t.y,r.y,i.y)}else{var o=e.invert(t);n=fye(o.x,0,1)&&fye(o.y,0,1)}return n}(this.getCoordinate(),e)},t.prototype.getLegendAttributes=function(){return Kae(this.geometries.map((function(e){return e.getGroupAttributes()})))},t.prototype.getGroupScales=function(){var e=this.geometries.map((function(e){return e.getGroupScales()}));return pye(Kae(e))},t.prototype.getCanvas=function(){return this.getRootView().canvas},t.prototype.getRootView=function(){for(var e=this;e.parent;)e=e.parent;return e},t.prototype.getXY=function(e){var t,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),o=this.getScalesByDim("y");if(Hae(e,(function(e,r){i[r]&&(t=i[r].scale(e)),o[r]&&(n=o[r].scale(e))})),!Bae(t)&&!Bae(n))return r.convert({x:t,y:n})},t.prototype.getController=function(e){return $ae(this.controllers,(function(t){return t.name===e}))},t.prototype.showTooltip=function(e){var t=this.getController("tooltip");return t&&t.showTooltip(e),this},t.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},t.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},t.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},t.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},t.prototype.getTooltipItems=function(e){var t=this.getController("tooltip");return t?t.getTooltipItems(e):[]},t.prototype.getSnapRecords=function(e){for(var t=this.geometries,n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=o.dataArray;o.sort(a);for(var l=void 0,u=0,c=a.length;u<c;u++){(l=rwe(e,a[u],o))&&n.push(l)}}var s=this.views;for(r=0,i=s.length;r<i;r++){var d=s[r].getSnapRecords(e);n=n.concat(d)}return n},t.prototype.getComponents=function(){for(var e=[],t=this.controllers,n=0,r=t.length;n<r;n++){var i=t[n];e=e.concat(i.getComponents())}return e},t.prototype.filterData=function(e){var t=this.options.filters;return 0===oue(t)?e:Tae(e,(function(e,n){return Object.keys(t).every((function(r){return(0,t[r])(e[r],e,n)}))}))},t.prototype.filterFieldData=function(e,t){var n=this.options.filters,r=Kle(n,e);return Dle(r)?t:t.filter((function(t,n){return r(t[e],t,n)}))},t.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),t=e.start,n=e.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;Yle(t,r)&&Yle(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},t.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(gue.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(gue.AFTER_PAINT),this.isDataChanged=!1},t.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=Kle(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var t=this.viewBBox,n=t.x,r=t.y,i=t.width,o=t.height;this.backgroundStyleRectShape.attr({fill:e,x:n,y:r,width:i,height:o})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},t.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=gwe(this).shrink(uwe(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate(),this.controllers.find((function(e){return"tooltip"===e.name})).update();for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderPaddingRecursive(e)}},t.prototype.renderLayoutRecursive=function(e){var t=!0===this.syncViewPadding?mwe:Lae(this.syncViewPadding)?this.syncViewPadding:void 0;t&&(t(this,this.views,vwe),this.views.forEach((function(e){e.coordinateBBox=e.viewBBox.shrink(e.autoPadding.getPadding()),e.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(e)}},t.prototype.renderPaintRecursive=function(e){var t=this.middleGroup;if(this.limitInPlot){var n=bye(this.coordinateInstance),r=n.type,i=n.attrs;t.setClip({type:r,attrs:i})}else t.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var o=this.views,a=0,l=o.length;a<l;a++){o[a].renderPaintRecursive(e)}},t.prototype.createScale=function(e,t,n,r){var i=Kle(this.options.scales,[e]),o=Sae(Sae({},i),n);return this.parent?this.parent.createScale(e,t,o,r):this.scalePool.createScale(e,t,o,r)},t.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var t=this.views,n=0,r=t.length;n<r;n++){t[n].renderDataRecursive(e)}},t.prototype.calculateViewBBox=function(){var e,t,n,r;if(this.parent){var i=this.parent.coordinateBBox;e=i.x,t=i.y,n=i.width,r=i.height}else e=0,t=0,n=this.canvas.get("width"),r=this.canvas.get("height");var o=this.region,a=o.start,l=o.end,u=new vye(e+n*a.x,t+r*a.y,n*(l.x-a.x),r*(l.y-a.y));this.viewBBox&&this.viewBBox.isEqual(u)||(this.viewBBox=new vye(e+n*a.x,t+r*a.y,n*(l.x-a.x),r*(l.y-a.y))),this.coordinateBBox=this.viewBBox},t.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},t.prototype.initComponentController=function(){for(var e=this.usedControllers,t=0,n=e.length;t<n;t++){var r=e[t],i=cwe[r];i&&this.controllers.push(new i(this))}},t.prototype.createViewEvent=function(e){var t=e.shape,n=e.name,r=t?t.get("origin"):null,i=new fwe(this,e,r);return i.type=n,i},t.prototype.doPlotEvent=function(e){var t=e.type,n={x:e.x,y:e.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(t)){var r=this.isPointInPlot(n),i=e.clone();if(r){var o="plot:".concat(t);i.type=o,this.emit(o,i),"mouseleave"!==t&&"touchend"!==t||(this.isPreMouseInPlot=!1)}"mousemove"===t||"touchmove"===t?(this.isPreMouseInPlot&&!r?("mousemove"===t&&(i.type=wue.MOUSE_LEAVE,this.emit(wue.MOUSE_LEAVE,i)),i.type=wue.LEAVE,this.emit(wue.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===t&&(i.type=wue.MOUSE_ENTER,this.emit(wue.MOUSE_ENTER,i)),i.type=wue.ENTER,this.emit(wue.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==t&&"touchend"!==t||this.isPreMouseInPlot&&("mouseleave"===t&&(i.type=wue.MOUSE_LEAVE,this.emit(wue.MOUSE_LEAVE,i)),i.type=wue.LEAVE,this.emit(wue.LEAVE,i),this.isPreMouseInPlot=!1)}},t.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},t.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var t=this.getCoordinate(),n=Kle(this.options,"scales",{}),r=this.geometries,i=0,o=r.length;i<o;i++){var a=r[i];a.scales=this.getGeometryScales();var l={coordinate:t,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?a.update(l):a.init(l)}this.adjustScales()},t.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),t=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,o=void 0===i?{}:i,a=this.filteredData,l=0,u=e.length;l<u;l++){var c=e[l],s=o[c],d=this.getScaleKey(c);this.createScale(c,t.includes(c)?r:a,s,d),this.createdScaleKeys.set(d,!0)}},t.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},t.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),t={},n=0;n<e.length;n++){var r=e[n];t[r]=this.getScaleByField(r)}return t},t.prototype.getScaleFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){pye(n[r].getScaleFields(),e,t)}return e},t.prototype.getGroupedFields=function(){for(var e=[],t=new Map,n=this.geometries,r=0;r<n.length;r++){pye(n[r].getGroupFields(),e,t)}return e},t.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},t.prototype.adjustCategoryScaleRange=function(){var e=this,t=Aae([this.getXScale()],Mae(this.getYScales()),!1).filter((function(e){return!!e})),n=this.getCoordinate(),r=this.options.scales;Hae(t,(function(t){var i=t.field,o=t.values,a=t.isCategory,l=t.isIdentity;(a||l)&&o&&!Kle(r,[i,"range"])&&(t.range=Cye(t,n,e.theme))}))},t.prototype.initComponents=function(e){for(var t=this.controllers,n=0;n<t.length;n++){var r=t[n];e?r.update():(r.clear(),r.render())}},t.prototype.doLayout=function(){this.layoutFunc(this)},t.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,t=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,t)},t.prototype.paintGeometries=function(e){for(var t=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,o=0;o<i.length;o++){var a=i[o];a.coordinate=n,a.canvasRegion=r,t||a.animate(!1),a.paint(e)}},t.prototype.renderComponents=function(e){for(var t=this.getComponents(),n=0;n<t.length;n++){t[n].component.render()}},t.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},t.prototype.initOptions=function(){var e=this,t=this.options,n=t.geometries,r=void 0===n?[]:n,i=t.interactions,o=void 0===i?[]:i,a=t.views,l=void 0===a?[]:a,u=t.annotations,c=void 0===u?[]:u,s=t.coordinate,d=t.events,f=t.facets;this.coordinateController?s&&this.coordinateController.update(s):this.coordinateController=new dwe(s);for(var h=0;h<r.length;h++){var p=r[h];this.createGeometry(p)}for(var v=0;v<o.length;v++){var g=o[v],m=g.type,y=g.cfg;this.interaction(m,y)}for(var b=0;b<l.length;b++){var w=l[b];this.createView(w)}for(var _=this.getController("annotation"),x=0;x<c.length;x++){var k=c[x];_.annotation(k)}d&&Hae(d,(function(t,n){e.on(n,t)})),f&&Hae(f,(function(t){var n=t.type,r=Oae(t,["type"]);e.facet(n,r)}))},t.prototype.createGeometry=function(e){var t=e.type,n=e.cfg,r=void 0===n?{}:n;if(this[t]){var i=this[t](r);Hae(e,(function(e,t){Lae(i[t])&&i[t](e)}))}},t.prototype.getScaleKey=function(e){return"".concat(this.id,"-").concat(e)},t}(Uue);function bwe(e,t){ywe.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var n=Sae({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),r=new t(n);return this.geometries.push(r),r}}var wwe=function(e){function t(t){var n=this,r=t.container,i=t.width,o=t.height,a=t.autoFit,l=void 0!==a&&a,u=t.padding,c=t.appendPadding,s=t.renderer,d=void 0===s?"canvas":s,f=t.pixelRatio,h=t.localRefresh,p=void 0===h||h,v=t.visible,g=void 0===v||v,m=t.supportCSSTransform,y=void 0!==m&&m,b=t.defaultInteractions,w=void 0===b?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:b,_=t.options,x=t.limitInPlot,k=t.theme,C=t.syncViewPadding,S=nle(r)?document.getElementById(r):r,O=Fue('<div style="position:relative;"></div>');S.appendChild(O);var E=Hue(S,l,i,o),I=new(function(e){var t=jue[e];if(!t)throw new Error("G engine '".concat(e,"' is not exist, please register it at first."));return t}(d).Canvas)(Sae({container:O,pixelRatio:f,localRefresh:p,supportCSSTransform:y},E));return(n=e.call(this,{parent:null,canvas:I,backgroundGroup:I.addGroup({zIndex:Oue}),middleGroup:I.addGroup({zIndex:Sue}),foregroundGroup:I.addGroup({zIndex:Cue}),padding:u,appendPadding:c,visible:g,options:_,limitInPlot:x,theme:k,syncViewPadding:C})||this).onResize=Ble((function(){n.forceFit()}),300),n.ele=S,n.canvas=I,n.width=E.width,n.height=E.height,n.autoFit=l,n.localRefresh=p,n.renderer=d,n.wrapperElement=O,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(w),n}return Cae(t,e),t.prototype.initDefaultInteractions=function(e){var t=this;Hae(e,(function(e){t.interaction(e)}))},t.prototype.aria=function(e){var t="aria-label";!1===e?this.ele.removeAttribute(t):this.ele.setAttribute(t,e.label)},t.prototype.changeSize=function(e,t){return this.width===e&&this.height===t||(this.emit(gue.BEFORE_CHANGE_SIZE),this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this.emit(gue.AFTER_CHANGE_SIZE)),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.aria(!1)},t.prototype.destroy=function(){var t,n;e.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),t=this.wrapperElement,(n=t.parentNode)&&n.removeChild(t),this.wrapperElement=null},t.prototype.changeVisible=function(t){return e.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},t.prototype.forceFit=function(){if(!this.destroyed){var e=Hue(this.ele,!0,this.width,this.height),t=e.width,n=e.height;this.changeSize(t,n)}},t.prototype.updateCanvasStyle=function(){Vue(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},t.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},t.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},t}(ywe),_we=function(){function e(e){this.visible=!0,this.components=[],this.view=e}return e.prototype.clear=function(e){Hae(this.components,(function(e){e.component.destroy()})),this.components=[]},e.prototype.destroy=function(){this.clear()},e.prototype.getComponents=function(){return this.components},e.prototype.changeVisible=function(e){this.visible!==e&&(this.components.forEach((function(t){e?t.component.show():t.component.hide()})),this.visible=e)},e}();var xwe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLocked=!1,t}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},t.prototype.render=function(){},t.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var t=this.view,n=this.getTooltipItems(e);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};t.emit("tooltip:show",fwe.fromData(t,"tooltip:show",Sae({items:n,title:r},e)));var o=this.getTooltipCfg(),a=o.follow,l=o.showMarkers,u=o.showCrosshairs,c=o.showContent,s=o.marker,d=this.items,f=this.title;if(Yle(f,r)&&Yle(d,n)?(this.tooltip&&a&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(t.emit("tooltip:change",fwe.fromData(t,"tooltip:change",Sae({items:n,title:r},e))),(Lae(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Nle({},o,{items:this.getItemsAfterProcess(n),title:r},a?e:{})),this.tooltip.show()),l&&this.renderTooltipMarkers(n,s)),this.items=n,this.title=r,u){var h=Kle(o,["crosshairs","follow"],!1);this.renderCrosshairs(h?e:i,o)}}else this.hideTooltip()}},t.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var e=this.tooltipMarkersGroup;e&&e.hide();var t=this.xCrosshair,n=this.yCrosshair;t&&t.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",fwe.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},t.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},t.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},t.prototype.isTooltipLocked=function(){return this.isLocked},t.prototype.clear=function(){var e=this,t=e.tooltip,n=e.xCrosshair,r=e.yCrosshair,i=e.tooltipMarkersGroup;t&&(t.hide(),t.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null==t?void 0:t.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},t.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},t.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},t.prototype.changeVisible=function(e){if(this.visible!==e){var t=this,n=t.tooltip,r=t.tooltipMarkersGroup,i=t.xCrosshair,o=t.yCrosshair;e?(n&&n.show(),r&&r.show(),i&&i.show(),o&&o.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),o&&o.hide()),this.visible=e}},t.prototype.getTooltipItems=function(e){var t,n,r,i,o,a,l=this.findItemsFromView(this.view,e);if(l.length){l=Kae(l);try{for(var u=Pae(l),c=u.next();!c.done;c=u.next()){var s=c.value;try{for(var d=(r=void 0,Pae(s)),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.mappingData,v=p.x,g=p.y;h.x=Vae(v)?v[v.length-1]:v,h.y=Vae(g)?g[g.length-1]:g}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(!1===this.getTooltipCfg().shared&&l.length>1){var m=l[0],y=Math.abs(e.y-m[0].y);try{for(var b=Pae(l),w=b.next();!w.done;w=b.next()){var _=w.value,x=Math.abs(e.y-_[0].y);x<=y&&(m=_,y=x)}}catch(e){o={error:e}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}l=[m]}return function(e){for(var t=[],n=function(n){var r=e[n];$ae(t,(function(e){return e.color===r.color&&e.name===r.name&&e.value===r.value&&e.title===r.title}))||t.push(r)},r=0;r<e.length;r++)n(r);return t}(Kae(l))}return[]},t.prototype.layout=function(){},t.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},t.prototype.isCursorEntered=function(e){if(this.tooltip){var t=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(t&&n){var r=t.getBoundingClientRect(),i=r.x,o=r.y,a=r.width,l=r.height;return new vye(i,o,a,l).isPointIn(e)}}return!1},t.prototype.getTooltipCfg=function(){var e=this.view,t=e.getOptions().tooltip,n=this.processCustomContent(t),r=e.getTheme(),i=Kle(r,["components","tooltip"],{}),o=Kle(n,"enterable",i.enterable);return Hle({},i,n,{capture:!(!o&&!this.isLocked)})},t.prototype.processCustomContent=function(e){if(Ple(e)||!Kle(e,"customContent"))return e;var t=e.customContent;return Sae(Sae({},e),{customContent:function(e,n){var r=t(e,n)||"";return nle(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},t.prototype.getTitle=function(e){var t=e[0].title||e[0].name;return this.title=t,t},t.prototype.renderTooltip=function(){var e=this.view.getCanvas(),t={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},n=this.getTooltipCfg(),r=new iye(Sae(Sae({parent:e.get("el").parentNode,region:t},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},t.prototype.renderTooltipMarkers=function(e,t){var n,r,i=this.getTooltipMarkersGroup(),o=this.view.getRootView(),a=o.limitInPlot;try{for(var l=Pae(e),u=l.next();!u.done;u=l.next()){var c=u.value,s=c.x,d=c.y;if(a||(null==i?void 0:i.getClip())){var f=bye(o.getCoordinate()),h=f.type,p=f.attrs;null==i||i.setClip({type:h,attrs:p})}else null==i||i.setClip(void 0);var v=this.view.getTheme(),g=Kle(v,["components","tooltip","marker"],{}),m=Sae(Sae({fill:c.color,symbol:"circle",shadowColor:c.color},Lae(t)?Sae(Sae({},g),t(c)):t),{x:s,y:d});i.addShape("marker",{attrs:m})}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}},t.prototype.renderCrosshairs=function(e,t){var n=Kle(t,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,t)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,t)):"xy"===n&&(this.renderXCrosshairs(e,t),this.renderYCrosshairs(e,t))},t.prototype.renderXCrosshairs=function(e,t){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect)i.isTransposed?(n={x:i.start.x,y:e.y},r={x:i.end.x,y:e.y}):(n={x:e.x,y:i.end.y},r={x:e.x,y:i.start.y});else{var o=yye(i,e),a=i.getCenter(),l=i.getRadius();r=lye(a.x,a.y,l,o),n=a}var u=Hle({start:n,end:r,container:this.getTooltipCrosshairsGroup()},Kle(t,"crosshairs",{}),this.getCrosshairsText("x",e,t));delete u.type;var c=this.xCrosshair;c?c.update(u):(c=new ime(u)).init(),c.render(),c.show(),this.xCrosshair=c},t.prototype.renderYCrosshairs=function(e,t){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect){var o=void 0,a=void 0;i.isTransposed?(o={x:e.x,y:i.end.y},a={x:e.x,y:i.start.y}):(o={x:i.start.x,y:e.y},a={x:i.end.x,y:e.y}),n={start:o,end:a},r="Line"}else n={center:i.getCenter(),radius:mye(i,e),startAngle:i.startAngle,endAngle:i.endAngle},r="Circle";delete(n=Hle({container:this.getTooltipCrosshairsGroup()},n,Kle(t,"crosshairs",{}),this.getCrosshairsText("y",e,t))).type;var l=this.yCrosshair;l?i.isRect&&"circle"===l.get("type")||!i.isRect&&"line"===l.get("type")?(l=new dme[r](n)).init():l.update(n):(l=new dme[r](n)).init(),l.render(),l.show(),this.yCrosshair=l},t.prototype.getCrosshairsText=function(e,t,n){var r=Kle(n,["crosshairs","text"]),i=Kle(n,["crosshairs","follow"]),o=this.items;if(r){var a=this.getViewWithGeometry(this.view),l=o[0],u=a.getXScale(),c=a.getYScales()[0],s=void 0,d=void 0;if(i){var f=this.view.getCoordinate().invert(t);s=u.invert(f.x),d=c.invert(f.y)}else s=l.data[u.field],d=l.data[c.field];var h="x"===e?s:d;return Lae(r)?r=r(e,h,o,t):r.content=h,{text:r}}},t.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},t.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):((e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=e),e},t.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||((e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=e),e},t.prototype.findItemsFromView=function(e,t){var n,r;if(!1===e.getOptions().tooltip)return[];var i=lwe(e,t,this.getTooltipCfg());try{for(var o=Pae(e.views),a=o.next();!a.done;a=o.next()){var l=a.value;i=i.concat(this.findItemsFromView(l,t))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.prototype.getViewWithGeometry=function(e){var t=this;return e.geometries.length?e:$ae(e.views,(function(e){return t.getViewWithGeometry(e)}))},t.prototype.getItemsAfterProcess=function(e){var t=this.getTooltipCfg().customItems;return(t||function(e){return e})(e)},t}(_we),kwe={};function Cwe(e){return kwe[e.toLowerCase()]}function Swe(e,t){kwe[e.toLowerCase()]=t}var Owe={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Ewe={interval:function(e){return{enter:{animation:e.isRect?e.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:e.isPolar&&e.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Iwe={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(e){var t;return e.isRect?t=e.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",e.isPolar&&e.isTransposed&&(t="wave-in")),{animation:t}},schema:function(e){return{animation:e.isRect?e.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Pwe(e,t,n){var r=Ewe[e];return r&&(Lae(r)&&(r=r(t)),r=Hle({},Owe,r)),r}function Mwe(e,t,n){var r=Kle(e.get("origin"),"data",Aue),i=t.animation,o=function(e,t){return{delay:Lae(e.delay)?e.delay(t):e.delay,easing:Lae(e.easing)?e.easing(t):e.easing,duration:Lae(e.duration)?e.duration(t):e.duration,callback:e.callback,repeat:e.repeat}}(t,r);if(i){var a=Cwe(i);a&&a(e,o,n)}else e.animate(n.toAttrs,o)}var Rwe="element-background",Awe=function(e){function t(t){var n=e.call(this,t)||this;n.labelShape=[],n.states=[];var r=t.shapeFactory,i=t.container,o=t.offscreenGroup,a=t.elementIndex,l=t.visible,u=void 0===l||l;return n.shapeFactory=r,n.container=i,n.offscreenGroup=o,n.visible=u,n.elementIndex=a,n}return Cae(t,e),t.prototype.draw=function(e,t){void 0===t&&(t=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,t),!1===this.visible&&this.changeVisible(!1)},t.prototype.update=function(e){var t=this.shapeFactory,n=this.shape;if(n){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(n,e);var r=this.getOffscreenGroup(),i=t.drawShape(this.shapeType,e,r);i.cfg.data=this.data,i.cfg.origin=e,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},t.prototype.destroy=function(){var t=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?Mwe(n,r,{coordinate:t.coordinate,toAttrs:Sae({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,e.prototype.destroy.call(this)},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(e){e.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(e){e.hide()})))},t.prototype.setState=function(e,t){var n=this,r=n.states,i=n.shapeFactory,o=n.model,a=n.shape,l=n.shapeType,u=r.indexOf(e);if(t){if(u>-1)return;r.push(e),"active"!==e&&"selected"!==e||null==a||a.toFront()}else{if(-1===u)return;if(r.splice(u,1),"active"===e||"selected"===e){var c=this.geometry,s=c.sortZIndex,d=c.zIndexReversed?this.geometry.elements.length-this.elementIndex:this.elementIndex;s?a.setZIndex(d):a.set("zIndex",d)}}var f=i.drawShape(l,o,this.getOffscreenGroup());r.length?this.syncShapeStyle(a,f,r,null):this.syncShapeStyle(a,f,["reset"],null),f.remove(!0);var h={state:e,stateStatus:t,element:this,target:this.container};this.container.emit("statechange",h),Kve(this.shape,"statechange",h)},t.prototype.clearStates=function(){var e=this;Hae(this.states,(function(t){e.setState(t,!1)})),this.states=[]},t.prototype.hasState=function(e){return this.states.includes(e)},t.prototype.getStates=function(){return this.states},t.prototype.getData=function(){return this.data},t.prototype.getModel=function(){return this.model},t.prototype.getBBox=function(){var e=this.shape,t=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),t&&t.forEach((function(e){var t=e.getCanvasBBox();n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.minX=Math.min(t.minX,n.minX),n.minY=Math.min(t.minY,n.minY),n.maxX=Math.max(t.maxX,n.maxX),n.maxY=Math.max(t.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},t.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,t=e.shapeType,n=e.geometry,r=e.shapeFactory,i=n.stateOption,o=r.defaultShapeType,a=r.theme[t]||r.theme[o];this.statesStyle=Hle({},a,i)}return this.statesStyle},t.prototype.getStateStyle=function(e,t){var n=this.getStatesStyle(),r=Kle(n,[e,"style"],{}),i=r[t]||r;return Lae(i)?i(this):i},t.prototype.getAnimateCfg=function(e){var t=this,n=this.animate;if(n){var r=n[e];return r?Sae(Sae({},r),{callback:function(){var e;Lae(r.callback)&&r.callback(),null===(e=t.geometry)||void 0===e||e.emit(yue.AFTER_DRAW_ANIMATE)}}):r}return null},t.prototype.drawShape=function(e,t){var n;void 0===t&&(t=!1);var r=this,i=r.shapeFactory,o=r.container,a=r.shapeType;if(this.shape=i.drawShape(a,e,o),this.shape){this.setShapeInfo(this.shape,e);var l=this.shape.cfg.name;l?nle(l)&&(this.shape.cfg.name=["element",l]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=t?"enter":"appear",c=this.getAnimateCfg(u);c&&(null===(n=this.geometry)||void 0===n||n.emit(yue.BEFORE_DRAW_ANIMATE),Mwe(this.shape,c,{coordinate:i.coordinate,toAttrs:Sae({},this.shape.attr())}))}},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.setShapeInfo=function(e,t){var n=this;(e.cfg.origin=t,e.cfg.element=this,e.isGroup())&&e.get("children").forEach((function(e){n.setShapeInfo(e,t)}))},t.prototype.syncShapeStyle=function(e,t,n,r,i){var o,a=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),e&&t){var l=e.get("clipShape"),u=t.get("clipShape");if(this.syncShapeStyle(l,u,n,r),e.isGroup())for(var c=e.get("children"),s=t.get("children"),d=0;d<c.length;d++)this.syncShapeStyle(c[d],s[d],n,r,i+d);else{if(!Gle(n)&&!Yle(n,["reset"])){var f=e.get("name");Vae(f)&&(f=f[1]),Hae(n,(function(e){if(t.get("name")!==Rwe){var n=a.getStateStyle(e,f||i);t.attr(n)}}))}var h=dye(e,t);this.animate?r?(null===(o=this.geometry)||void 0===o||o.emit(yue.BEFORE_DRAW_ANIMATE),Mwe(e,r,{coordinate:this.shapeFactory.coordinate,toAttrs:h,shapeModel:this.model})):Gle(n)?e.attr(h):(e.stopAnimate(),e.animate(h,{duration:300})):e.attr(h)}}},t.prototype.getShapeType=function(e){var t=Kle(e,"shape");return Vae(t)?t[0]:t},t}(Uue),jwe={},Dwe={};function Twe(e,t){jwe[e.toLowerCase()]=t}function Fwe(e,t){Dwe[e.toLowerCase()]=t}var Nwe={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(e,t){var n=this.getShape(e);return n.getPoints?n.getPoints(t):this.getDefaultPoints(t)},getShape:function(e){var t=this[e]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(e){return Kle(e,[this.defaultShapeType,"default","style"],{})},getMarker:function(e,t){var n=this.getShape(e);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,o=Kle(i,[e,"default"],{}),a=n.getMarker(t);return Hle({},o,a)},drawShape:function(e,t,n){return this.getShape(e).draw(t,n)}},Lwe={coordinate:null,parsePath:function(e){var t=this.coordinate,n=phe(e);return n=t.isPolar?Kye(t,n):function(e,t){var n=[];return Hae(t,(function(t){switch(t[0].toLowerCase()){case"m":case"l":case"c":n.push(Wye(t,e));break;case"a":n.push(Uye(t,e));break;default:n.push(t)}})),n}(t,n),n},parsePoint:function(e){return this.coordinate.convert(e)},parsePoints:function(e){var t=this.coordinate;return e.map((function(e){return t.convert(e)}))},draw:function(e,t){}},Bwe={};function Vwe(e,t){var n=Ole(e),r=Sae(Sae(Sae({},Nwe),t),{geometryType:e});return Bwe[n]=r,r}function zwe(e,t,n){var r=Ole(e),i=Bwe[r],o=Sae(Sae({},Lwe),n);return i[t]=o,o}function Hwe(e){var t=Ole(e);return Bwe[t]}function Wwe(e,t){return ule(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!Yle(e[n],t[n])}))}function Uwe(e){return Vae(e)?e:e.split("*")}function Gwe(e,t){for(var n=[],r=[],i=[],o=new Map,a=0;a<t.length;a++){var l=t[a];e[l]?r.push(l):n.push(l),o.set(l,!0)}return Object.keys(e).forEach((function(e){o.has(e)||i.push(e)})),{added:n,updated:r,removed:i}}var Ywe=function(e){function t(t){var n=e.call(this,t)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=t.container,i=t.labelsContainer,o=t.coordinate,a=t.data,l=t.sortable,u=void 0!==l&&l,c=t.visible,s=void 0===c||c,d=t.theme,f=t.scales,h=void 0===f?{}:f,p=t.scaleDefs,v=void 0===p?{}:p,g=t.intervalPadding,m=t.dodgePadding,y=t.maxColumnWidth,b=t.minColumnWidth,w=t.columnWidthRatio,_=t.roseWidthRatio,x=t.multiplePieWidthRatio,k=t.zIndexReversed,C=t.sortZIndex,S=t.useDeferredLabel;return n.container=r,n.labelsContainer=i,n.coordinate=o,n.data=a,n.sortable=u,n.visible=s,n.userTheme=d,n.scales=h,n.scaleDefs=v,n.intervalPadding=g,n.dodgePadding=m,n.maxColumnWidth=y,n.minColumnWidth=b,n.columnWidthRatio=w,n.roseWidthRatio=_,n.multiplePieWidthRatio=x,n.zIndexReversed=k,n.sortZIndex=C,n.useDeferredLabel=S?"number"==typeof S?S:1/0:null,n}return Cae(t,e),t.prototype.position=function(e){var t=e;Yae(e)||(t={fields:Uwe(e)});var n=Kle(t,"fields");return 1===n.length&&(n.unshift("1"),Xle(t,"fields",n)),Xle(this.attributeOption,"position",t),this},t.prototype.color=function(e,t){return this.createAttrOption("color",e,t),this},t.prototype.shape=function(e,t){return this.createAttrOption("shape",e,t),this},t.prototype.size=function(e,t){return this.createAttrOption("size",e,t),this},t.prototype.adjust=function(e){var t=e;return(nle(e)||Yae(e))&&(t=[e]),Hae(t,(function(e,n){zae(e)||(t[n]={type:e})})),this.adjustOption=t,this},t.prototype.style=function(e,t){if(nle(e)){var n=Uwe(e);this.styleOption={fields:n,callback:t}}else{var r=e,i=(n=r.fields,r.callback),o=r.cfg;this.styleOption=n||i||o?e:{cfg:e}}return this},t.prototype.tooltip=function(e,t){if(nle(e)){var n=Uwe(e);this.tooltipOption={fields:n,callback:t}}else this.tooltipOption=e;return this},t.prototype.animate=function(e){return this.animateOption=e,this},t.prototype.label=function(e,t,n){if(nle(e)){var r={},i=Uwe(e);r.fields=i,Lae(t)?r.callback=t:Yae(t)&&(r.cfg=t),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=e;return this},t.prototype.state=function(e){return this.stateOption=e,this},t.prototype.customInfo=function(e){return this.customOption=e,this},t.prototype.init=function(e){void 0===e&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},t.prototype.update=function(e){void 0===e&&(e={});var t=e.data,n=e.isDataChanged,r=e.isCoordinateChanged,i=this.attributeOption,o=this.lastAttributeOption;Yle(i,o)?!t||!n&&Yle(t,this.data)?this.setCfg(e):(this.setCfg(e),this.initAttributes(),this.processData(t)):this.init(e),this.adjustScale(),this.isCoordinateChanged=r},t.prototype.paint=function(e){var t=this;void 0===e&&(e=!1),this.animateOption&&(this.animateOption=Hle({},Pwe(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var n=this.beforeMappingData,r=this.beforeMapping(n);this.dataArray=new Array(r.length);for(var i=0;i<r.length;i++){var o=r[i];this.dataArray[i]=this.mapping(o)}if(this.updateElements(this.dataArray,e),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(e)){var a=this.container,l=this.type,u=this.coordinate,c=Kle(this.animateOption,"appear"),s=this.getYScale(),d=u.convert({x:0,y:s.scale(this.getYMinValue())});!function(e,t,n,r,i){if(Iwe[n]){var o=Iwe[n](r),a=Cwe(Kle(o,"animation",""));if(a){var l=Sae(Sae(Sae({},Owe.appear),o),t);e.stopAnimate(),a(e,l,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,c,l,u,d)}if(this.labelOption){var f=this.useDeferredLabel,h=function(){return t.renderLabels(Kae(t.dataArray),e)}.bind(this);if("number"==typeof f){var p="number"==typeof f&&f!==1/0?f:0;if(window.requestIdleCallback){var v=p&&p!==1/0?{timeout:p}:void 0;window.requestIdleCallback(h,v)}else setTimeout(h,p)}else h()}this.lastAttributeOption=Sae({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},t.prototype.clear=function(){var e=this,t=e.container,n=e.geometryLabel,r=e.offscreenGroup;t&&t.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},t.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,e.prototype.destroy.call(this)},t.prototype.getGroupScales=function(){return this.groupScales},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},t.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},t.prototype.getGroupAttributes=function(){var e=[];return Hae(this.attributes,(function(t){Rue.includes(t.type)&&e.push(t)})),e},t.prototype.getDefaultValue=function(e){var t,n=this.getAttribute(e);return n&&Gle(n.scales)&&(t=n.values[0]),t},t.prototype.getAttributeValues=function(e,t){for(var n=[],r=e.scales,i=0,o=r.length;i<o;i++){var a=r[i],l=a.field;a.isIdentity?n.push(a.values):n.push(t[l])}return e.mapping.apply(e,Aae([],Mae(n),!1))},t.prototype.getAdjust=function(e){return this.adjusts[e]},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.getData=function(){return this.data},t.prototype.getShapeMarker=function(e,t){return this.getShapeFactory().getMarker(e,t)},t.prototype.getElementsBy=function(e){return this.elements.filter((function(t){return e(t)}))},t.prototype.getElements=function(){return this.elements},t.prototype.getElementId=function(e){var t=(e=Vae(e)?e[0]:e)[Aue];if(this.idFields.length){for(var n=t[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+t[this.idFields[r]];return n}var i,o,a=this.type,l=this.getXScale(),u=this.getYScale(),c=l.field||"x",s=t[u.field||"y"];i="identity"===l.type?l.values[0]:t[c],o="interval"===a||"schema"===a?"".concat(i):"line"===a||"area"===a||"path"===a?a:"".concat(i,"-").concat(s);for(var d=this.groupScales,f=(r=0,d.length);r<f;r++){var h=d[r].field;o="".concat(o,"-").concat(t[h])}var p=this.getAdjust("dodge");if(p){var v=p.dodgeBy;v&&(o="".concat(o,"-").concat(t[v]))}return this.getAdjust("jitter")&&(o="".concat(o,"-").concat(e.x,"-").concat(e.y)),o},t.prototype.getScaleFields=function(){var e=[],t=new Map,n=this,r=n.attributeOption,i=n.labelOption,o=n.tooltipOption;for(var a in r)if(r.hasOwnProperty(a)){var l=r[a];l.fields?pye(l.fields,e,t):l.values&&pye(l.values,e,t)}return i&&i.fields&&pye(i.fields,e,t),zae(o)&&o.fields&&pye(o.fields,e,t),e},t.prototype.changeVisible=function(t){e.prototype.changeVisible.call(this,t);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},t.prototype.getFields=function(){var e=new Map,t=[];return Object.values(this.attributeOption).forEach((function(n){((null==n?void 0:n.fields)||[]).forEach((function(n){e.has(n)||t.push(n),e.set(n,!0)}))}),[]),t},t.prototype.getGroupFields=function(){for(var e=[],t=new Map,n=0,r=Rue.length;n<r;n++){var i=Rue[n],o=this.attributeOption[i];o&&o.fields&&pye(o.fields,e,t)}return e},t.prototype.getXYFields=function(){var e=Mae(this.attributeOption.position.fields,2);return[e[0],e[1]]},t.prototype.getXField=function(){return Kle(this.getXYFields(),[0])},t.prototype.getYField=function(){return Kle(this.getXYFields(),[1])},t.prototype.getShapes=function(){return this.elements.map((function(e){return e.shape}))},t.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},t.prototype.sort=function(e){if(!this.hasSorted)for(var t=this.getXScale(),n=t.field,r=0;r<e.length;r++){e[r].sort((function(e,r){return t.translate(e[Aue][n])-t.translate(r[Aue][n])}))}this.hasSorted=!0},t.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},t.prototype.getShapeFactory=function(){var e=this.shapeType;if(Hwe(e))return this.shapeFactory||(this.shapeFactory=Lle(Hwe(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},t.prototype.createShapePointsCfg=function(e){var t=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(e[t.field],t),y:n?this.normalizeValues(e[n.field],n):e.y?e.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},t.prototype.createElement=function(e,t,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(e),o=this.getShapeFactory(),a=new Awe({shapeFactory:o,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:t});return a.animate=this.animateOption,a.geometry=this,a.draw(i,n),a},t.prototype.getDrawCfg=function(e){var t=e[Aue],n={mappingData:e,data:t,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=e.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=Kle(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var o=this.styleOption;return o&&(n.style=this.getStyleCfg(o,t)),this.generatePoints&&(n.points=e.points,n.nextPoints=e.nextPoints),n},t.prototype.updateElements=function(e,t){var n,r,i,o,a,l;void 0===t&&(t=!1);for(var u=new Map,c=[],s=new Map,d=0,f=0;f<e.length;f++)for(var h=e[f],p=0;p<h.length;p++){var v=h[p],g=this.getElementId(v),m=u.has(g)?"".concat(g,"-").concat(f,"-").concat(p):g;c.push(m),u.set(m,v),s.set(m,d),d++}this.elements=new Array(d);var y=Gwe(this.lastElementsMap,c),b=y.added,w=y.updated,_=y.removed;try{for(var x=Pae(b),k=x.next();!k.done;k=x.next()){g=k.value,v=u.get(g),f=s.get(g);var C=this.createElement(v,f,t);this.elements[f]=C,this.elementsMap[g]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-f:f)}}catch(e){n={error:e}}finally{try{k&&!k.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}try{for(var S=Pae(w),O=S.next();!O.done;O=S.next()){g=O.value,C=this.lastElementsMap[g],v=u.get(g);var E=this.getDrawCfg(v),I=C.getModel();f=s.get(g);(this.isCoordinateChanged||Wwe(E,I))&&(C.animate=this.animateOption,C.update(E)),this.elements[f]=C,this.elementsMap[g]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-f:f)}}catch(e){i={error:e}}finally{try{O&&!O.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}this.container&&this.container.sort();try{for(var P=Pae(_),M=P.next();!M.done;M=P.next()){g=M.value;(C=this.lastElementsMap[g]).animate=this.animateOption,C.destroy()}}catch(e){a={error:e}}finally{try{M&&!M.done&&(l=P.return)&&l.call(P)}finally{if(a)throw a.error}}},t.prototype.getLabelType=function(){var e=this,t=e.labelOption,n=e.coordinate,r=e.type,i=n.type,o=n.isTransposed,a=Kle(t,["cfg","type"]);return a||(a="polar"===i?o?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),a},t.prototype.getYMinValue=function(){var e=this.getYScale(),t=e.min,n=e.max;return t>=0?t:n<=0?n:0},t.prototype.createAttrOption=function(e,t,n){if(Bae(t)||zae(t))zae(t)&&Yle(Object.keys(t),["values"])?Xle(this.attributeOption,e,{fields:t.values}):Xle(this.attributeOption,e,t);else{var r={};ple(t)?r.values=[t]:r.fields=Uwe(t),n&&(Lae(n)?r.callback=n:r.values=n),Xle(this.attributeOption,e,r)}},t.prototype.initAttributes=function(){var e=this,t=this,n=t.attributes,r=t.attributeOption,i=t.theme,o=t.shapeType;this.groupScales=[];var a={},l=function(t){if(r.hasOwnProperty(t)){var l=r[t];if(!l)return{value:void 0};var u=Sae({},l),c=u.callback,s=u.values,d=u.fields,f=(void 0===d?[]:d).map((function(n){var r=e.scales[n];!a[n]&&Rue.includes(t)&&("cat"===_ye(r,Kle(e.scaleDefs,n),t,e.type)&&(e.groupScales.push(r),a[n]=!0));return r}));u.scales=f,"position"!==t&&1===f.length&&"identity"===f[0].type?u.values=f[0].values:c||s||("size"===t?u.values=i.sizes:"shape"===t?u.values=i.shapes[o]||[]:"color"===t&&(f.length?u.values=f[0].values.length<=10?i.colors10:i.colors20:u.values=i.colors10));var h=zve(t);n[t]=new h(u)}};for(var u in r){var c=l(u);if("object"===lr(c))return c.value}},t.prototype.processData=function(e){var t,n;this.hasSorted=!1;for(var r=this.getAttribute("position").scales.filter((function(e){return e.isCategory})),i=this.groupData(e),o=[],a=0,l=i.length;a<l;a++){for(var u=i[a],c=[],s=0,d=u.length;s<d;s++){var f=u[s],h={};for(var p in f)h[p]=f[p];h[Aue]=f;try{for(var v=(t=void 0,Pae(r)),g=v.next();!g.done;g=v.next()){var m=g.value,y=m.field;h[y]=m.translate(h[y])}}catch(e){t={error:e}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(t)throw t.error}}c.push(h)}o.push(c)}var b=this.adjustData(o);return this.beforeMappingData=b,b},t.prototype.adjustData=function(e){var t=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.theme,a=this.maxColumnWidth||o.maxColumnWidth,l=this.minColumnWidth||o.minColumnWidth,u=this.columnWidthRatio||o.columnWidthRatio,c=e;if(t){var s=this.getXScale(),d=this.getYScale(),f=s.field,h=d?d.field:null,p=gye(this.coordinate),v=s.values.length,g=this.getAttribute("size"),m=void 0;g&&(m=g.values[0]);for(var y=0,b=t.length;y<b;y++){var w=t[y],_=Sae({xField:f,yField:h,intervalPadding:r,dodgePadding:i,xDimensionLength:p,groupNum:v,defaultSize:m,maxColumnWidth:a,minColumnWidth:l,columnWidthRatio:u},w),x=w.type;if("dodge"===x){var k=[];if(s.isCategory||"identity"===s.type)k.push("x");else{if(d)throw new Error("dodge is not support linear attribute, please use category attribute!");k.push("y")}_.adjustNames=k,_.dodgeRatio=u}else if("stack"===x){var C=this.coordinate;if(!d){_.height=C.getHeight();var S=this.getDefaultValue("size")||3;_.size=S}!C.isTransposed&&Bae(_.reverseOrder)&&(_.reverseOrder=!0)}var O=Fhe(x);_.dimValuesMap={},s&&s.values&&(_.dimValuesMap[s.field]=s.values.map((function(e){return s.translate(e)})));var E=new O(_);c=E.process(c),this.adjusts[x]=E}}return c},t.prototype.groupData=function(e){for(var t=this.getGroupScales(),n=this.scaleDefs,r={},i=[],o=0;o<t.length;o++){var a=t[o].field;i.push(a),Kle(n,[a,"values"])&&(r[a]=n[a].values)}return function(e,t,n){var r,i;if(void 0===n&&(n={}),!t)return[e];var o=dle(e,t),a=[];if(1===t.length&&n[t[0]]){var l=n[t[0]];try{for(var u=Pae(l),c=u.next();!c.done;c=u.next()){var s=c.value,d=o["_".concat(s)];d&&a.push(d)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}else for(var f in o)if(o.hasOwnProperty(f)){var h=o[f];a.push(h)}return a}(e,i,r)},t.prototype.updateStackRange=function(e,t){for(var n=Kae(t),r=e.field,i=e.min,o=e.max,a=0;a<n.length;a++){var l=n[a],u=Math.min.apply(null,l[r]),c=Math.max.apply(null,l[r]);u<i&&(i=u),c>o&&(o=c)}var s=this.scaleDefs,d={};i<e.min&&!Kle(s,[r,"min"])&&(d.min=i),o>e.max&&!Kle(s,[r,"max"])&&(d.max=o),e.change(d)},t.prototype.beforeMapping=function(e){var t=e;if(this.sortable&&this.sort(t),this.generatePoints)for(var n=0,r=t.length;n<r;n++){var i=t[n];this.generateShapePoints(i);var o=t[n+1];o&&(this.generateShapePoints(o),i[0].nextPoints=o[0].points)}return t},t.prototype.generateShapePoints=function(e){for(var t=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<e.length;r++){var i=e[r],o=this.createShapePointsCfg(i),a=n?this.getAttributeValues(n,i):null,l=t.getShapePoints(a,o);i.points=l}},t.prototype.normalizeValues=function(e,t){var n=[];if(Vae(e))for(var r=0;r<e.length;r++){var i=e[r];n.push(t.scale(i))}else n=t.scale(e);return n},t.prototype.mapping=function(e){for(var t=this.attributes,n=[],r=0;r<e.length;r++){var i=e[r],o={_origin:i[Aue],points:i.points,nextPoints:i.nextPoints};for(var a in t)if(t.hasOwnProperty(a)){var l=t[a],u=l.names,c=this.getAttributeValues(l,i);if(u.length>1)for(var s=0;s<c.length;s+=1){var d=c[s];o[u[s]]=Vae(d)&&1===d.length?d[0]:d}else o[u[0]]=1===c.length?c[0]:c}this.convertPoint(o),n.push(o)}return n},t.prototype.convertPoint=function(e){var t,n,r,i=e.x,o=e.y,a=this.coordinate;if(Vae(i)&&Vae(o)){t=[],n=[];for(var l=0,u=0,c=i.length,s=o.length;l<c&&u<s;l+=1,u+=1)r=a.convert({x:i[l],y:o[u]}),t.push(r.x),n.push(r.y)}else if(Vae(o)){n=[];for(var d=0;d<o.length;d++){var f=o[d];r=a.convert({x:i,y:f}),t&&t!==r.x?(Vae(t)||(t=[t]),t.push(r.x)):t=r.x,n.push(r.y)}}else if(Vae(i)){t=[];for(d=0;d<i.length;d++){var h=i[d];r=a.convert({x:h,y:o}),n&&n!==r.y?(Vae(n)||(n=[n]),n.push(r.y)):n=r.y,t.push(r.x)}}else{var p=a.convert({x:i,y:o});t=p.x,n=p.y}e.x=t,e.y=n},t.prototype.getStyleCfg=function(e,t){var n=e.fields,r=void 0===n?[]:n,i=e.callback,o=e.cfg;if(o)return o;var a=r.map((function(e){return t[e]}));return i.apply(void 0,Aae([],Mae(a),!1))},t.prototype.setCfg=function(e){var t=this,n=e.coordinate,r=e.data,i=e.theme,o=e.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),o&&(this.scaleDefs=o,this.idFields=[],Hae(o,(function(e,n){e&&e.key&&t.idFields.push(n)}))),i&&(this.theme=this.userTheme?Hle({},i,this.userTheme):i)},t.prototype.renderLabels=function(e,t){return void 0===t&&(t=!1),Eae(this,void 0,void 0,(function(){var n,r,i,o,a,l,u,c,s,d,f,h,p=this;return Iae(this,(function(v){switch(v.label){case 0:return n=this.geometryLabel,this.emit(yue.BEFORE_RENDER_LABEL),n||(r=this.getLabelType(),i=jwe[r.toLowerCase()],n=new i(this),this.geometryLabel=n),[4,n.render(e,t)];case 1:v.sent(),o=n.labelsRenderer.shapesMap,a=new Map,Hae(o,(function(e,t){for(var n=e.getChildren()||[],r=0;r<n.length;r++){var i=n[r],o=p.elementsMap[i.get("elementId")||t.split(" ")[0]];if(o){i.cfg.name=["element","label"],i.cfg.element=o;var l=a.get(o)||new Set;l.add(e),a.set(o,l)}}}));try{for(l=Pae(a.entries()),u=l.next();!u.done;u=l.next())c=Mae(u.value,2),s=c[0],d=c[1],s.labelShape=Aae([],Mae(d),!1)}catch(e){f={error:e}}finally{try{u&&!u.done&&(h=l.return)&&h.call(l)}finally{if(f)throw f.error}}return this.emit(yue.AFTER_RENDER_LABEL),[2]}}))}))},t.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(void 0===Kle(this.animateOption,"appear")||Kle(this.animateOption,"appear")&&void 0===Kle(this.animateOption,["appear","animation"]))},t}(Uue),$we=ise;function qwe(e,t,n){var r=$we(e.getMatrix(),[["t",t,n]]);e.setMatrix(r)}function Kwe(e,t){var n=function(e,t){var n=e.attr(),r=n.x,i=n.y;return $we(e.getMatrix(),[["t",-r,-i],["r",t],["t",r,i]])}(e,t);e.setMatrix(n)}function Xwe(e){return e.find((function(e){return"text"===e.get("type")}))}function Jwe(e,t,n){void 0===n&&(n=[0,0,0,0]);var r=e&&e.getChildren()[0];if(r){var i=r.clone();(null==t?void 0:t.rotate)&&Kwe(i,-t.rotate);var o=i.getCanvasBBox(),a=o.x,l=o.y,u=o.width,c=o.height;i.destroy();var s=n;return Bae(s)?s=[2,2,2,2]:ple(s)&&(s=new Array(4).fill(s)),{x:a-s[3],y:l-s[0],width:u+s[1]+s[3],height:c+s[0]+s[2],rotation:(null==t?void 0:t.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function Zwe(e,t){var n=e.getBBox();return ule(t,(function(e){var t,r,i,o=e.getBBox();return t=n,r=o,i=2,Math.max(0,Math.min(t.x+t.width+i,r.x+r.width+i)-Math.max(t.x-i,r.x-i))*Math.max(0,Math.min(t.y+t.height+i,r.y+r.height+i)-Math.max(t.y-i,r.y-i))>0}))}function Qwe(e,t,n){var r=n.data,i=n.origin,o=n.animateCfg,a=n.coordinate,l=Kle(o,"update");e.set("data",r),e.set("origin",i),e.set("animateCfg",o),e.set("coordinate",a),e.set("visible",t.get("visible")),(e.getChildren()||[]).forEach((function(u,c){var s=t.getChildByIndex(c);if(s){u.set("data",r),u.set("origin",i),u.set("animateCfg",o),u.set("coordinate",a);var d=dye(u,s);l?Mwe(u,l,{toAttrs:d,coordinate:a}):u.attr(d),s.isGroup()&&Qwe(u,s,n)}else e.removeChild(u),u.remove(!0)})),Hae(t.getChildren(),(function(t,n){Vae(e.getChildren())&&n>=e.getCount()&&(t.destroyed||e.add(t))}))}var e_e=function(){function e(e){this.shapesMap={};var t=e.layout,n=e.container;this.layout=t,this.container=n}return e.prototype.render=function(e,t,n){return void 0===n&&(n=!1),Eae(this,void 0,void 0,(function(){var r,i,o,a,l,u,c,s,d=this;return Iae(this,(function(f){switch(f.label){case 0:if(r={},i=this.createOffscreenGroup(),!e.length)return[3,2];try{for(o=Pae(e),a=o.next();!a.done;a=o.next())(l=a.value)&&(r[l.id]=this.renderLabel(l,i))}catch(e){c={error:e}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(c)throw c.error}}return[4,this.doLayout(e,t,r)];case 1:f.sent(),this.renderLabelLine(e,r),this.renderLabelBackground(e,r),this.adjustLabel(e,r),f.label=2;case 2:return u=this.shapesMap,Hae(r,(function(e,t){if(e.destroyed)delete r[t];else{if(u[t]){var i=e.get("data"),o=e.get("origin"),a=e.get("coordinate"),l=e.get("animateCfg"),c=u[t];Qwe(c,r[t],{data:i,origin:o,animateCfg:l,coordinate:a}),r[t]=c}else{if(d.container.destroyed)return;d.container.add(e);var s=Kle(e.get("animateCfg"),n?"enter":"appear");s&&Mwe(e,s,{toAttrs:Sae({},e.attr()),coordinate:e.get("coordinate")})}delete u[t]}})),Hae(u,(function(e){var t=Kle(e.get("animateCfg"),"leave");t?Mwe(e,t,{toAttrs:null,coordinate:e.get("coordinate")}):e.remove(!0)})),this.shapesMap=r,i.destroy(),[2]}}))}))},e.prototype.clear=function(){this.container.clear(),this.shapesMap={}},e.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},e.prototype.renderLabel=function(e,t){var n,r=e.id,i=e.elementId,o=e.data,a=e.mappingData,l=e.coordinate,u=e.animate,c=e.content,s={id:r,elementId:i,capture:e.capture,data:o,origin:Sae(Sae({},a),{data:a[Aue]}),coordinate:l},d=t.addGroup(Sae({name:"label",animateCfg:!1!==this.animate&&null!==u&&!1!==u&&Hle({},this.animate,u)},s));if(c.isGroup&&c.isGroup()||c.isShape&&c.isShape()){var f=c.getCanvasBBox(),h=f.width,p=f.height,v=Kle(e,"textAlign","left"),g=e.x;"center"===v?g-=h/2:"right"!==v&&"end"!==v||(g-=h),qwe(c,g,e.y-p/2),n=c,d.add(c)}else{var m=Kle(e,["style","fill"]);n=d.addShape("text",Sae({attrs:Sae(Sae({x:e.x,y:e.y,textAlign:e.textAlign,textBaseline:Kle(e,"textBaseline","middle"),text:e.content},e.style),{fill:Rle(m)?e.color:m})},s))}return e.rotate&&Kwe(n,e.rotate),d},e.prototype.doLayout=function(e,t,n){return Eae(this,void 0,void 0,(function(){var r,i=this;return Iae(this,(function(o){switch(o.label){case 0:return this.layout?(r=Vae(this.layout)?this.layout:[this.layout],[4,Promise.all(r.map((function(r){var o,a=(o=Kle(r,"type",""),Dwe[o.toLowerCase()]);if(a){var l=[],u=[];return Hae(n,(function(e,n){l.push(e),u.push(t[e.get("elementId")])})),a(e,l,u,i.region,r.cfg)}})))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},e.prototype.renderLabelLine=function(e,t){Hae(e,(function(e){var n=Kle(e,"coordinate");if(e&&n){var r=n.getCenter(),i=n.getRadius();if(e.labelLine){var o=Kle(e,"labelLine",{}),a=e.id,l=o.path;if(!l){var u=lye(r.x,r.y,i,e.angle);l=[["M",u.x,u.y],["L",e.x,e.y]]}var c=t[a];c.destroyed||c.addShape("path",{capture:!1,attrs:Sae({path:l,stroke:e.color?e.color:Kle(e,["style","fill"],"#000"),fill:null},o.style),id:a,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}}))},e.prototype.renderLabelBackground=function(e,t){Hae(e,(function(e){var n=Kle(e,"coordinate"),r=Kle(e,"background");if(r&&n){var i=e.id,o=t[i];if(!o.destroyed){var a=o.getChildren()[0];if(a){var l=Jwe(o,e,r.padding),u=l.rotation,c=Oae(l,["rotation"]),s=o.addShape("rect",{attrs:Sae(Sae({},c),r.style||{}),id:i,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(s.setZIndex(-1),u){var d=a.getMatrix();s.setMatrix(d)}}}}}))},e.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},e.prototype.adjustLabel=function(e,t){Hae(e,(function(e){if(e){var n=e.id,r=t[n];if(!r.destroyed)Hae(r.findAll((function(e){return"path"!==e.get("type")})),(function(t){t&&(e.offsetX&&t.attr("x",t.attr("x")+e.offsetX),e.offsetY&&t.attr("y",t.attr("y")+e.offsetY))}))}}))},e}();function t_e(e){var t=0;return Hae(e,(function(e){t+=e})),t/e.length}var n_e=function(){function e(e){this.geometry=e}return e.prototype.getLabelItems=function(e){var t=this,n=[],r=this.getLabelCfgs(e);return Hae(e,(function(e,i){var o=r[i];if(!o||Bae(e.x)||Bae(e.y))n.push(null);else{var a=Vae(o.content)?o.content:[o.content];o.content=a;var l=a.length;Hae(a,(function(r,i){if(Bae(r)||""===r)n.push(null);else{var a=Sae(Sae({},o),t.getLabelPoint(o,e,i));a.textAlign||(a.textAlign=t.getLabelAlign(a,i,l)),a.offset<=0&&(a.labelLine=null),n.push(a)}}))}})),n},e.prototype.render=function(e,t){return void 0===t&&(t=!1),Eae(this,void 0,void 0,(function(){var n,r,i;return Iae(this,(function(o){switch(o.label){case 0:return n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes(),[4,r.render(n,i,t)];case 1:return o.sent(),[2]}}))}))},e.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},e.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},e.prototype.getCoordinate=function(){return this.geometry.coordinate},e.prototype.getDefaultLabelCfg=function(e,t){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===t||e<0&&!["line","point","path"].includes(r)?Kle(i,"innerLabels",{}):Kle(i,"labels",{})},e.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.type,i=t.theme;return"polygon"===r||e.offset<0&&!["line","point","path"].includes(r)?Hle({},n,i.innerLabels,e):Hle({},n,i.labels,e)},e.prototype.setLabelPosition=function(e,t,n,r){},e.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},e.prototype.getLabelOffsetPoint=function(e,t,n){var r=e.offset,i=this.getCoordinate().isTransposed,o=i?"x":"y",a=i?1:-1,l={x:0,y:0};return l[o]=t>0||1===n?r*a:r*a*-1,l},e.prototype.getLabelPoint=function(e,t,n){var r=this.getCoordinate(),i=e.content.length;function o(t,n,r){void 0===r&&(r=!1);var i=t;return Vae(i)&&(i=1===e.content.length?r?t_e(i):i.length<=2?i[t.length-1]:t_e(i):i[n]),i}var a={content:e.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=Vae(t.shape)?t.shape[0]:t.shape,u="funnel"===l||"pyramid"===l;if("polygon"===this.geometry.type){var c=function(e,t){if(ple(e)&&ple(t))return[e,t];if(oye(e)||oye(t))return[aye(e),aye(t)];for(var n,r,i=-1,o=0,a=0,l=e.length-1,u=0;++i<e.length;)n=l,l=i,u+=r=e[n]*t[l]-e[l]*t[n],o+=(e[n]+e[l])*r,a+=(t[n]+t[l])*r;return[o/(u*=3),a/u]}(t.x,t.y);a.x=c[0],a.y=c[1]}else"interval"!==this.geometry.type||u?(a.x=o(t.x,n),a.y=o(t.y,n)):(a.x=o(t.x,n,!0),a.y=o(t.y,n));if(u){var s=Kle(t,"nextPoints"),d=Kle(t,"points");if(s){var f=r.convert(d[1]),h=r.convert(s[1]);a.x=(f.x+h.x)/2,a.y=(f.y+h.y)/2}else if("pyramid"===l){f=r.convert(d[1]),h=r.convert(d[2]);a.x=(f.x+h.x)/2,a.y=(f.y+h.y)/2}}e.position&&this.setLabelPosition(a,t,n,e.position);var p=this.getLabelOffsetPoint(e,n,i);return a.start={x:a.x,y:a.y},a.x+=p.x,a.y+=p.y,a.color=t.color,a},e.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=e.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},e.prototype.getLabelId=function(e){var t=this.geometry,n=t.type,r=t.getXScale(),i=t.getYScale(),o=e[Aue],a=t.getElementId(e);return"line"===n||"area"===n?a+=" ".concat(o[r.field]):"path"===n&&(a+=" ".concat(o[r.field],"-").concat(o[i.field])),a},e.prototype.getLabelsRenderer=function(){var e=this.geometry,t=e.labelsContainer,n=e.labelOption,r=e.canvasRegion,i=e.animateOption,o=this.geometry.coordinate,a=this.labelsRenderer;return a||(a=new e_e({container:t,layout:Kle(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=a),a.region=r,a.animate=!!i&&Pwe("label",o),a},e.prototype.getLabelCfgs=function(e){var t=this,n=this.geometry,r=n.labelOption,i=n.scales,o=n.coordinate,a=r,l=a.fields,u=a.callback,c=a.cfg,s=l.map((function(e){return i[e]})),d=[];return Hae(e,(function(e,n){var r,i=e[Aue],a=t.getLabelText(i,s);if(u){var f=l.map((function(e){return i[e]}));if(r=u.apply(void 0,Aae([],Mae(f),!1)),Bae(r))return void d.push(null)}var h=Sae(Sae({id:t.getLabelId(e),elementId:t.geometry.getElementId(e),data:i,mappingData:e,coordinate:o},c),r);Lae(h.position)&&(h.position=h.position(i,e,n));var p=t.getLabelOffset(h.offset||0),v=t.getDefaultLabelCfg(p,h.position);(h=Hle({},v,h)).offset=t.getLabelOffset(h.offset||0);var g=h.content;Lae(g)?h.content=g(i,e,n):Dle(g)&&(h.content=a[0]),d.push(h)})),d},e.prototype.getLabelText=function(e,t){var n=[];return Hae(t,(function(t){var r=e[t.field];r=Vae(r)?r.map((function(e){return t.getText(e)})):t.getText(r),Bae(r)||""===r?n.push(null):n.push(r)})),n},e.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate(),n=0;return ple(e)&&(n=e),t.isTransposed?t.applyMatrix(n,0):t.applyMatrix(0,n)},e.prototype.getGeometryShapes=function(){var e=this.geometry,t={};return Hae(e.elementsMap,(function(e,n){t[n]=e.shape})),Hae(e.getOffscreenGroup().getChildren(),(function(n){var r=e.getElementId(n.get("origin").mappingData);t[r]=n})),t},e}();function r_e(e,t,n){if(!e)return n;var r;if(e.callback&&e.callback.length>1){var i=Array(e.callback.length-1).fill("");r=e.mapping.apply(e,Aae([t],Mae(i),!1)).join("")}else r=e.mapping(t).join("");return r||n}var i_e={hexagon:function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},bowtie:function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},cross:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},tick:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},plus:function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},hyphen:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},line:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]}},o_e=["line","cross","tick","plus","hyphen"];function a_e(e){var t=e.symbol;nle(t)&&i_e[t]&&(e.symbol=i_e[t])}function l_e(e){return e.startsWith(due.LEFT)||e.startsWith(due.RIGHT)?"vertical":"horizontal"}function u_e(e,t,n,r,i){var o=n.getScale(n.type);if(o.isCategory){var a=o.field,l=t.getAttribute("color"),u=t.getAttribute("shape"),c=e.getTheme().defaultColor,s=t.coordinate.isPolar;return o.getTicks().map((function(n,d){var f,h=n.text,p=n.value,v=h,g=o.invert(p),m=0===e.filterFieldData(a,[(f={},f[a]=g,f)]).length;Hae(e.views,(function(e){var t;e.filterFieldData(a,[(t={},t[a]=g,t)]).length||(m=!0)}));var y,b,w=r_e(l,g,c),_=r_e(u,g,"point"),x=t.getShapeMarker(_,{color:w,isInPolar:s}),k=i;return Lae(k)&&(k=k(v,d,Sae({name:v,value:g},Hle({},r,x)))),function(e,t){var n=e.symbol;if(nle(n)&&-1!==o_e.indexOf(n)){var r=Kle(e,"style",{}),i=Kle(r,"lineWidth",1),o=r.stroke||r.fill||t;e.style=Hle({},e.style,{lineWidth:i,stroke:o,fill:null})}}(x=Hle({},r,x,hye(Sae({},k),["style"])),w),k&&k.style&&(x.style=(y=x.style,b=k.style,Lae(b)?b(y):Hle({},y,b))),a_e(x),{id:g,name:v,value:g,marker:x,unchecked:m}}))}return[]}function c_e(e,t){var n=Kle(e,["components","legend"],{});return Hle({},Kle(n,["common"],{}),Hle({},Kle(n,[t],{})))}function s_e(e){return!e&&(null==e||isNaN(e))}function d_e(e){if(Vae(e))return s_e(e[1].y);var t=e.y;return Vae(t)?s_e(t[0]):s_e(t)}function f_e(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!e.length||1===e.length&&!n)return[];if(t){for(var r=[],i=0,o=e.length;i<o;i++){d_e(u=e[i])||r.push(u)}return[r]}var a=[],l=[];for(i=0,o=e.length;i<o;i++){var u;d_e(u=e[i])?l.length&&((1!==l.length||n)&&a.push(l),l=[]):l.push(u)}return l.length&&a.push(l),a}function h_e(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var o=e[0];return o&&(t.push(["L",o.x,o.y]),t.push(["z"])),t}function p_e(e){for(var t=e.length/2,n=[],r=[],i=0;i<e.length;i++)i<t?n.push(e[i]):r.push(e[i]);var o=qye(n,!1),a=qye(r,!1);r.length&&o.push(["L",r[0].x,r[0].y]),a.shift();var l=o.concat(a);return n.length&&l.push(["L",n[0].x,n[0].y]),l.push(["z"]),l}function v_e(e,t,n,r){void 0===r&&(r="");var i=e.style,o=void 0===i?{}:i,a=e.defaultStyle,l=e.color,u=e.size,c=Sae(Sae({},a),o);return l&&(t&&(o.stroke||(c.stroke=l)),n&&(o.fill||(c.fill=l))),r&&Bae(o[r])&&!Bae(u)&&(c[r]=u),c}function g_e(e){return Hle({},{fill:"#CCD6EC",fillOpacity:.3},Kle(e,["background","style"]))}function m_e(e){var t=e.x;return(Vae(e.y)?e.y:[e.y]).map((function(e,n){return{x:Vae(t)?t[n]:t,y:e}}))}var y_e={line:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dot:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},dash:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},smooth:function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},hv:function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},vh:function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},hvh:function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]},vhv:function(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}};function b_e(e,t){var n=e.color;return{symbol:y_e[t],style:{lineWidth:2,r:6,stroke:n}}}function w_e(e,t,n,r,i){return 1===e.length?[["M",e[0].x,e[0].y-i.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+i.lineWidth/2]]:(n?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),o=qye(e,!1,r)):(o=$ye(e,!1),t&&o.push(["Z"])),o);var o}function __e(e,t,n,r,i,o){if(e.length){var a=e[0];return Vae(a.y)?function(e,t,n,r,i,o){var a=[],l=[];Hae(e,(function(e){var t=m_e(e);a.push(t[1]),l.push(t[0])}));var u=w_e(a,t,r,i,o),c=w_e(l,t,r,i,o);return n?u:u.concat(c)}(e,t,n,r,i,o):w_e(e,t,r,i,o)}return[]}Vwe("line",{defaultShapeType:"line"}),Hae(["line","dot","dash","smooth"],(function(e){zwe("line",e,{draw:function(t,n){var r,i="smooth"===e;if(i){var o=this.coordinate,a=o.start,l=o.end;r=[[a.x,l.y],[l.x,a.y]]}var u=function(e,t,n){for(var r=e.isStack,i=e.connectNulls,o=e.isInCircle,a=e.showSinglePoint,l=v_e(e,!0,!1,"lineWidth"),u=f_e(e.points,i,a),c=[],s=0,d=u.length;s<d;s++){var f=u[s];c=c.concat(__e(f,o,r,t,n,l))}return l.path=c,l}(t,i,r);return n.addShape({type:"path",attrs:u,name:"line",capture:!i})},getMarker:function(t){return b_e(t,e)}})}));var x_e={getLegendItems:u_e,translate:qwe,rotate:Kwe,zoom:function(e,t){var n=e.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;e.applyToMatrix([r,i,1]);var o=$we(e.getMatrix(),[["t",-r,-i],["s",t,t],["t",r,i]]);e.setMatrix(o)},transform:$we,getAngle:sye,getSectorPath:uye,polarToCartesian:lye,getDelegationObject:nbe,getTooltipItems:iwe,getMappingValue:r_e,getPath:__e,getPathPoints:f_e},k_e="#000",C_e="#262626",S_e="#BFBFBF",O_e="#F0F0F0",E_e="#FFFFFF",I_e="#A6A6A6",P_e="#737373",M_e="#404040",R_e="#262626",A_e=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],j_e=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],D_e=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],T_e=function(e){void 0===e&&(e={});var t=e.paletteQualitative10,n=void 0===t?A_e:t,r=e.paletteQualitative20,i=void 0===r?j_e:r,o=e.brandColor,a=void 0===o?n[0]:o;return Sae(Sae({},{backgroundColor:"#141414",brandColor:a,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:D_e,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:M_e,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:I_e,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:C_e,axisTickLineBorderColor:M_e,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:R_e,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:P_e,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:R_e,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:P_e,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:A_e[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:I_e,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:P_e,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:P_e,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:I_e,legendPageNavigatorTextFontSize:12,sliderRailFillColor:R_e,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:P_e,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:O_e,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:S_e,annotationArcBorderColor:R_e,annotationArcBorder:1,annotationLineBorderColor:M_e,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:I_e,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:E_e,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:M_e,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:I_e,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:I_e,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:k_e,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:I_e,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:k_e,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:M_e,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:A_e[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:k_e,pointBorderOpacity:1,pointActiveBorderColor:E_e,pointSelectedBorder:2,pointSelectedBorderColor:E_e,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:A_e[0],hollowPointBorderOpacity:.95,hollowPointFillColor:k_e,hollowPointActiveBorder:1,hollowPointActiveBorderColor:E_e,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:E_e,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:A_e[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:A_e[0],areaFillOpacity:.25,areaActiveFillColor:A_e[0],areaActiveFillOpacity:.5,areaSelectedFillColor:A_e[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:A_e[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:E_e,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:E_e,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:A_e[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:E_e,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:E_e,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:A_e[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:k_e,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:E_e,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:E_e,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}),e)}();function F_e(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function N_e(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}function L_e(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function B_e(e,t){return e[0]===t[0]&&e[1]===t[1]}var V_e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,z_e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,H_e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,W_e=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function U_e(e,t){Hae(e.match(W_e),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function G_e(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(nle(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,o=V_e.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),l=o[2],u=t.getBBox();a>=0&&a<.5*Math.PI?(r={x:u.minX,y:u.minY},i={x:u.maxX,y:u.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:u.maxX,y:u.minY},i={x:u.minX,y:u.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:u.maxX,y:u.maxY},i={x:u.minX,y:u.minY}):(r={x:u.minX,y:u.maxY},i={x:u.maxX,y:u.minY});var c=Math.tan(a),s=c*c,d=(i.x-r.x+c*(i.y-r.y))/(s+1)+r.x,f=c*(i.x-r.x+c*(i.y-r.y))/(s+1)+r.y,h=e.createLinearGradient(r.x,r.y,d,f);return U_e(l,h),h}(e,t,n);if("r"===n[0])return function(e,t,n){var r=z_e.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),l=r[4];if(0===a){var u=l.match(W_e);return u[u.length-1].split(":")[1]}var c=t.getBBox(),s=c.maxX-c.minX,d=c.maxY-c.minY,f=Math.sqrt(s*s+d*d)/2,h=e.createRadialGradient(c.minX+s*i,c.minY+d*o,0,c.minX+s/2,c.minY+d/2,a*f);return U_e(l,h),h}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,o=H_e.exec(n),a=o[1],l=o[2];function u(){r=e.createPattern(i,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,l.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=l,i.complete?u():(i.onload=u,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function Y_e(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function $_e(e,t){return Y_e(e)*Y_e(t)?(e[0]*t[0]+e[1]*t[1])/(Y_e(e)*Y_e(t)):1}function q_e(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos($_e(e,t))}function K_e(e,t){var n=t[1],r=t[2],i=yle(wle(t[3]),2*Math.PI),o=t[4],a=t[5],l=e[0],u=e[1],c=t[6],s=t[7],d=Math.cos(i)*(l-c)/2+Math.sin(i)*(u-s)/2,f=-1*Math.sin(i)*(l-c)/2+Math.cos(i)*(u-s)/2,h=d*d/(n*n)+f*f/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(f*f)+r*r*(d*d),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*f/r:0,m=n?v*-r*d/n:0,y=(l+c)/2+Math.cos(i)*g-Math.sin(i)*m,b=(u+s)/2+Math.sin(i)*g+Math.cos(i)*m,w=[(d-g)/n,(f-m)/r],_=[(-1*d-g)/n,(-1*f-m)/r],x=q_e([1,0],w),k=q_e(w,_);return $_e(w,_)<=-1&&(k=Math.PI),$_e(w,_)>=1&&(k=0),0===a&&k>0&&(k-=2*Math.PI),1===a&&k<0&&(k+=2*Math.PI),{cx:y,cy:b,rx:B_e(e,[c,s])?0:n,ry:B_e(e,[c,s])?0:r,startAngle:x,endAngle:x+k,xRotation:i,arcFlag:o,sweepFlag:a}}var X_e=Math.sin,J_e=Math.cos,Z_e=Math.atan2,Q_e=Math.PI;function exe(e,t,n,r,i,o,a){var l=t.stroke,u=t.lineWidth,c=Z_e(r-o,n-i),s=new Fxe({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*J_e(Q_e/6)+","+10*X_e(Q_e/6)+" L0,0 L"+10*J_e(Q_e/6)+",-"+10*X_e(Q_e/6),stroke:l,lineWidth:u}});s.translate(i,o),s.rotateAtPoint(i,o,c),e.set(a?"startArrowShape":"endArrowShape",s)}function txe(e,t,n,r,i,o,a){var l=t.startArrow,u=t.endArrow,c=t.stroke,s=t.lineWidth,d=a?l:u,f=d.d,h=d.fill,p=d.stroke,v=d.lineWidth,g=Oae(d,["d","fill","stroke","lineWidth"]),m=Z_e(r-o,n-i);f&&(i-=J_e(m)*f,o-=X_e(m)*f);var y=new Fxe({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:Sae(Sae({},g),{stroke:p||c,lineWidth:v||s,fill:h})});y.translate(i,o),y.rotateAtPoint(i,o,m),e.set(a?"startArrowShape":"endArrowShape",y)}function nxe(e,t,n,r,i){var o=Z_e(r-t,n-e);return{dx:J_e(o)*i,dy:X_e(o)*i}}function rxe(e,t,n,r,i,o){"object"===lr(t.startArrow)?txe(e,t,n,r,i,o,!0):t.startArrow?exe(e,t,n,r,i,o,!0):e.set("startArrowShape",null)}function ixe(e,t,n,r,i,o){"object"===lr(t.endArrow)?txe(e,t,n,r,i,o,!1):t.endArrow?exe(e,t,n,r,i,o,!1):e.set("startArrowShape",null)}var oxe={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function axe(e,t){var n=t.attr();for(var r in n){var i=n[r],o=oxe[r]?oxe[r]:r;"matrix"===o&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&e.setLineDash?Vae(i)&&e.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=G_e(e,t,i):"globalAlpha"===o&&(i*=e.globalAlpha),e[o]=i)}}function lxe(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function uxe(e,t,n){var r=e.get("refreshElements");Hae(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?dxe(t):cxe(t,n)}function cxe(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&dxe(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&cxe(r.cfg.children,t);else{var i=fxe(r,t);r.cfg.refresh=i,i&&r.isGroup()&&cxe(r.cfg.children,t)}}}function sxe(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&sxe(n.cfg.children)}}function dxe(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&dxe(r.get("children")))}}function fxe(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&L_e(n,t)}function hxe(e,t,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var l=[0,0],u=[0,0],c={dx:0,dy:0};t.beginPath();for(var s=0;s<i.length;s++){var d=i[s],f=d[0];if(0===s&&o&&o.d)c=nxe((h=e.getStartTangent())[0][0],h[0][1],h[1][0],h[1][1],o.d);else if(s===i.length-2&&"Z"===i[s+1][0]&&a&&a.d){if("Z"===i[s+1][0])c=nxe((h=e.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d)}else if(s===i.length-1&&a&&a.d){var h;if("Z"!==i[0])c=nxe((h=e.getEndTangent())[0][0],h[0][1],h[1][0],h[1][1],a.d)}var p=c.dx,v=c.dy;switch(f){case"M":t.moveTo(d[1]-p,d[2]-v),u=[d[1],d[2]];break;case"L":t.lineTo(d[1]-p,d[2]-v);break;case"Q":t.quadraticCurveTo(d[1],d[2],d[3]-p,d[4]-v);break;case"C":t.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-p,d[6]-v);break;case"A":var g=void 0;r?(g=r[s])||(g=K_e(l,d),r[s]=g):g=K_e(l,d);var m=g.cx,y=g.cy,b=g.rx,w=g.ry,_=g.startAngle,x=g.endAngle,k=g.xRotation,C=g.sweepFlag;if(t.ellipse)t.ellipse(m,y,b,w,k,_,x,1-C);else{var S=b>w?b:w,O=b>w?1:b/w,E=b>w?w/b:1;t.translate(m,y),t.rotate(k),t.scale(O,E),t.arc(0,0,S,_,x,1-C),t.scale(1/O,1/E),t.rotate(-k),t.translate(-m,-y)}break;case"Z":t.closePath()}if("Z"===f)l=u;else{var I=d.length;l=[d[I-2],d[I-1]]}}}}function pxe(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function vxe(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=e.getCanvasBBox(),l=a&&!(!a.width||!a.height);o&&l?(r=a,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?t=i:l&&(t=a)}return t}var gxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.onCanvasChange=function(e){pxe(this,e)},t.prototype.getShapeBase=function(){return Vn},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),axe(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];Hae(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=Jae(t),o=Xae(t),a=Jae(n),l=Xae(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:l,width:o-i,height:l-a};var u=this.cfg.canvas;if(u){var c=u.getViewRange();this.set("isInView",L_e(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),axe(e,this),this._applyClip(e,this.getClip()),lxe(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(kfe),mxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Vn},t.prototype.getGroupBase=function(){return gxe},t.prototype.onCanvasChange=function(e){pxe(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=Efe(e)(this),r=t/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,l=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+t,height:n.height+t,maxX:a,maxY:l}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),axe(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!L_e(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),axe(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=L_e(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isFill()&&(Bae(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(Bae(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(Cfe),yxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,l=o.y,u=o.r,c=i/2,s=F_e(a,l,e,t);return r&&n?s<=u+c:r?s<=u:!!n&&(s>=u-c&&s<=u+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(mxe);function bxe(e,t,n,r){return e/(n*n)+t/(r*r)}var wxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=i/2,l=o.x,u=o.y,c=o.rx,s=o.ry,d=(e-l)*(e-l),f=(t-u)*(t-u);return r&&n?bxe(d,f,c+a,s+a)<=1:r?bxe(d,f,c,s)<=1:!!n&&(bxe(d,f,c-a,s-a)>=1&&bxe(d,f,c+a,s+a)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,l=i>o?1:i/o,u=i>o?o/i:1;e.save(),e.translate(n,r),e.scale(l,u),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(mxe);function _xe(e){return e instanceof HTMLElement&&nle(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var xxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(nle(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):_xe(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.sx,l=t.sy,u=t.swidth,c=t.sheight,s=t.img;(s instanceof Image||_xe(s))&&(Bae(a)||Bae(l)||Bae(u)||Bae(c)?e.drawImage(s,n,r,i,o):e.drawImage(s,a,l,u,c,n,r,i,o))},t}(mxe);function kxe(e,t,n,r,i,o,a){var l=Math.min(e,n),u=Math.max(e,n),c=Math.min(t,r),s=Math.max(t,r),d=i/2;return o>=l-d&&o<=u+d&&a>=c-d&&a<=s+d&&Dfe.pointToLine(e,t,n,r,o,a)<=i/2}var Cxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,o=e.startArrow,a=e.endArrow;o&&rxe(this,e,r,i,t,n),a&&ixe(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var o=this.attr();return kxe(o.x1,o.y1,o.x2,o.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.startArrow,l=t.endArrow,u={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(u=nxe(n,r,i,o,t.startArrow.d)),l&&l.d&&(c=nxe(n,r,i,o,t.endArrow.d)),e.beginPath(),e.moveTo(n+u.dx,r+u.dy),e.lineTo(i-c.dx,o-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Dfe.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return Dfe.pointAt(n,r,i,o,e)},t}(mxe),Sxe={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Oxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return Bae(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",l=this._getR(r);if(Lae(a))n=mhe(n=(e=a)(i,o,l));else{if(!(e=t.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=e(i,o,l)}return n},t.prototype.createPath=function(e){hxe(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=Sxe,t}(mxe);function Exe(e,t,n){var r=ohe();return e.createPath(r),r.isPointInPath(t,n)}var Ixe=1e-6;function Pxe(e){return Math.abs(e)<Ixe?0:e<0?-1:1}function Mxe(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Rxe(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],l=e[(o+1)%i];if(Mxe(a,l,[t,n]))return!0;Pxe(a[1]-n)>0!=Pxe(l[1]-n)>0&&Pxe(t-(n-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(r=!r)}return r}function Axe(e,t,n,r,i,o,a,l){var u=(Math.atan2(l-t,a-e)+2*Math.PI)%(2*Math.PI);if(u<r||u>i)return!1;var c={x:e+n*Math.cos(u),y:t+n*Math.sin(u)};return F_e(c.x,c.y,a,l)<=o/2}var jxe=ise;const Dxe=Sae({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],o=0;o<t;o++){var a=e[o],l=a[0];"M"===l?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===l?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var o=!1,a=t/2,l=0;l<e.length;l++){var u=e[l],c=u.currentPoint,s=u.params,d=u.prePoint,f=u.box;if(!f||N_e(f.x-a,f.y-a,f.width+t,f.height+t,n,r)){switch(u.command){case"L":case"Z":o=kxe(d[0],d[1],c[0],c[1],t,n,r);break;case"Q":o=zfe.pointDistance(d[0],d[1],s[1],s[2],s[3],s[4],n,r)<=t/2;break;case"C":o=$fe.pointDistance(d[0],d[1],s[1],s[2],s[3],s[4],s[5],s[6],n,r,i)<=t/2;break;case"A":var h=u.arcParams,p=h.cx,v=h.cy,g=h.rx,m=h.ry,y=h.startAngle,b=h.endAngle,w=h.xRotation,_=[n,r,1],x=g>m?g:m;Wce(_,_,jxe(null,[["t",-p,-v],["r",-w],["s",1/(g>m?1:g/m),1/(g>m?m/g:1)]])),o=Axe(0,0,x,y,b,t,_[0],_[1])}if(o)break}}return o}},xce);function Txe(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=Rxe(e[i],t,n))break}return r}var Fxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=mhe(e);var t=Dxe.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Che(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&rxe(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&ixe(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),l=!1;if(n){var u=this.getTotalLength();l=Dxe.isPointInStroke(o,i,e,t,u)}if(!l&&r)if(a)l=Exe(this,e,t);else{var c=this.attr("path"),s=Dxe.extractPolygons(c);l=Txe(s.polygons,e,t)||Txe(s.polylines,e,t)}return l},t.prototype.createPath=function(e){hxe(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return Bae(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;Hae(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(Bae(o)||Bae(n))return null;var a=o.length,l=i[n+1];return $fe.pointAt(o[a-2],o[a-1],l[1],l[2],l[3],l[4],l[5],l[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Dxe.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,o=0,a=[],l=this.get("curve");l&&(Hae(l,(function(e,t){n=l[t+1],r=e.length,n&&(i+=$fe.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(Hae(l,(function(u,c){n=l[c+1],r=u.length,n&&((e=[])[0]=o/i,t=$fe.length(u[r-2],u[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=t||0,e[1]=o/i,a.push(e))})),this.set("tCache",a)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,o=t[n-1].endTangent;e=[],o?(e.push([i[0]-o[0],i[1]-o[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(mxe);function Nxe(e,t,n,r,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(kxe(e[a][0],e[a][1],e[a+1][0],e[a+1][1],t,n,r))return!0}if(i){var l=e[0],u=e[o-1];if(kxe(l[0],l[1],u[0],u[1],t,n,r))return!0}return!1}var Lxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Nxe(o,i,e,t,!0)),!a&&r&&(a=Rxe(o,e,t)),a},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(mxe),Bxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,o=n.length,a=n[0][0],l=n[0][1],u=n[o-1][0],c=n[o-1][1];r&&rxe(this,e,n[1][0],n[1][1],a,l),i&&ixe(this,e,n[o-2][0],n[o-2][1],u,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&Nxe(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,o=n.length;if(!(n.length<2)){var a,l=n[0][0],u=n[0][1],c=n[o-1][0],s=n[o-1][1];if(r&&r.d)l+=(a=nxe(l,u,n[1][0],n[1][1],r.d)).dx,u+=a.dy;if(i&&i.d)c-=(a=nxe(n[o-2][0],n[o-2][1],c,s,i.d)).dx,s-=a.dy;e.beginPath(),e.moveTo(l,u);for(var d=0;d<o-1;d++){var f=n[d];e.lineTo(f[0],f[1])}e.lineTo(c,s)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Bae(t)?(this.set("totalLength",the(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Hae(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Dfe.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];Hae(e,(function(a,l){e[l+1]&&((n=[])[0]=i/t,r=Dfe.length(a[0],a[1],e[l+1][0],e[l+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(mxe);var Vxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,l=o.y,u=o.width,c=o.height,s=o.radius;if(s){var d=!1;return n&&(d=function(e,t,n,r,i,o,a,l){return kxe(e+i,t,e+n-i,t,o,a,l)||kxe(e+n,t+i,e+n,t+r-i,o,a,l)||kxe(e+n-i,t+r,e+i,t+r,o,a,l)||kxe(e,t+r-i,e,t+i,o,a,l)||Axe(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,o,a,l)||Axe(e+n-i,t+r-i,i,0,.5*Math.PI,o,a,l)||Axe(e+i,t+r-i,i,.5*Math.PI,Math.PI,o,a,l)||Axe(e+i,t+i,i,Math.PI,1.5*Math.PI,o,a,l)}(a,l,u,c,s,i,e,t)),!d&&r&&(d=Exe(this,e,t)),d}var f=i/2;return r&&n?N_e(a-f,l-f,u+f,c+f,e,t):r?N_e(a,l,u,c,e,t):n?function(e,t,n,r,i,o,a){var l=i/2;return N_e(e-l,t-l,n,i,o,a)||N_e(e+n-l,t-l,i,r,o,a)||N_e(e+l,t+r-l,n,i,o,a)||N_e(e-l,t+l,i,r,o,a)}(a,l,u,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius;if(e.beginPath(),0===a)e.rect(n,r,i,o);else{var l=function(e){var t=0,n=0,r=0,i=0;return Vae(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(a),u=l[0],c=l[1],s=l[2],d=l[3];e.moveTo(n+u,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+o-s),0!==s&&e.arc(n+i-s,r+o-s,s,0,Math.PI/2),e.lineTo(n+d,r+o),0!==d&&e.arc(n+d,r+o-d,d,Math.PI/2,Math.PI),e.lineTo(n,r+u),0!==u&&e.arc(n+u,r+u,u,Math.PI,1.5*Math.PI),e.closePath()}},t}(mxe),zxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=lhe(e)},t.prototype._setText=function(e){var t=null;nle(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,l=i.y,u=1*i.fontSize,c=this._getSpaceingY(),s=ahe(i.text,i.fontSize,i.lineHeight);Hae(t,(function(t,i){r=l+i*(c+u)-s+u,"middle"===o&&(r+=s-u-(s-u)/2),"top"===o&&(r+=s-u),Bae(t)||(n?e.fillText(t,a,r):e.strokeText(t,a,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(e,o,t);else{var a=n.text;Bae(a)||(t?e.fillText(a,r,i):e.strokeText(a,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isStroke()&&n>0&&(Bae(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(Bae(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(mxe);function Hxe(e,t,n){var r,i,o=e.getTotalMatrix();if(o){var a=(r=[t,n,1],(i=o)?lse(use(i),r):r);return[a[0],a[1]]}return[t,n]}function Wxe(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!Ece(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=Hxe(e,t,n),i=r[0],o=r[1];if(e.isClipped(i,o))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=a.minX&&t<=a.maxX&&n>=a.minY&&n<=a.maxY}function Uxe(e,t,n){if(!Wxe(e,t,n))return null;for(var r=null,i=e.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=Uxe(a,t,n);else if(Wxe(a,t,n)){var l=a,u=Hxe(a,t,n),c=u[0],s=u[1];l.isInShape(c,s)&&(r=a)}if(r)break}return r}var Gxe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return Vn},t.prototype.getGroupBase=function(){return gxe},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*n,o>1&&r.scale(o,o)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?Uxe(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return Hae(e,(function(e){var o=vxe(e);o&&(t.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:Jae(t),minY:Jae(n),maxX:Xae(r),maxY:Xae(i)}}(t),e&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&L_e(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n))));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e,t=this.get("drawFrame");t&&(e=t,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),axe(e,this),lxe(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),axe(e,this),uxe(this,n,r),lxe(e,n,r),e.restore()):t.length&&sxe(t),Hae(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e,t=this,n=this.get("drawFrame"),r=this.get("drawFrameCallback");n||(e=function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),r&&r()},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e),this.set("drawFrame",n))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(xfe);const Yxe=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:xfe,AbstractGroup:kfe,AbstractShape:Cfe,Base:Ice,Canvas:Gxe,Event:kce,Group:gxe,PathUtil:xce,Shape:Vn,assembleFont:lhe,getArcParams:K_e,getBBoxMethod:Efe,getOffScreenContext:ohe,getTextHeight:ahe,invert:use,isAllowCapture:Ece,multiplyVec2:lse,registerBBox:Ofe,registerEasing:sfe,version:"0.5.12"},Symbol.toStringTag,{value:"Module"}));var $xe={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},qxe={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Kxe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Xxe(e){var t=$xe[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=Kxe(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function Jxe(e,t){var n=e.get("el"),r=tue(n.children).sort(t),i=document.createDocumentFragment();r.forEach((function(e){i.appendChild(e)})),n.appendChild(i)}function Zxe(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function Qxe(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){Xxe(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function eke(e,t){t.forEach((function(t){t.draw(e)}))}function tke(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),o=i?i.getChildren():[n],a=e.get("el");if("remove"===t)if(e.get("isClipShape")){var l=a&&a.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===t)a.setAttribute("visibility","visible");else if("hide"===t)a.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],o=r.indexOf(e);if(i){if(o>t)n.insertBefore(e,i);else if(o<t){var a=r[t+1];a?n.insertBefore(e,a):n.appendChild(e)}}else n.appendChild(e)}(a,o.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&Jxe(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?a&&(a.innerHTML=""):"matrix"===t?Zxe(e):"clip"===t?Qxe(e,r):"attr"===t||"add"===t&&e.draw(r)}}var nke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=Kxe("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){tke(this,e)},t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Qxe(this,e),this.createPath(e),t.length&&eke(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(e,t){qxe[t]&&r.setAttribute(qxe[t],e)})),Zxe(this)},t}(kfe),rke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return nke},t.prototype.onCanvasChange=function(e){tke(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=Efe(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,o=t.width,a=t.height,l=this.getHitLineWidth(),u=l/2,c=r-u,s=i-u;return{x:c,y:s,minX:c,minY:s,maxX:r+o+u,maxY:i+a+u,width:o+l,height:a+l}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Xxe(this),Qxe(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,l=n.fillOpacity,u=n.strokeOpacity,c=n.lineWidth,s=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),l&&s.setAttribute(qxe.fillOpacity,l)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",o):"strokeStyle"in n&&this._setColor(e,"stroke",a):this._setColor(e,"stroke",o||a),u&&s.setAttribute(qxe.strokeOpacity,u),c&&s.setAttribute(qxe.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(qxe[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(qxe[t],"url(#"+i+")")}else r.setAttribute(qxe[t],n);else r.setAttribute(qxe[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,l=r.shadowColor;(i||o||a||l)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=t.find("filter",i);o||(o=t.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&Zxe(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,o=t+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(Cfe),ike=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):qxe[t]&&r.setAttribute(qxe[t],e)}))},t}(rke),oke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return Cae(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(Hae(t||n,(function(e,t){qxe[t]&&r.setAttribute(qxe[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(rke),ake=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):qxe[t]&&r.setAttribute(qxe[t],e)}))},t}(rke),lke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Hae(t||r,(function(e,t){"img"===t?n._setImage(r.img):qxe[t]&&i.setAttribute(qxe[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(nle(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&nle(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(rke),uke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var o=zae(t)?e.addArrow(n,qxe[i]):e.getDefaultArrow(n,qxe[i]);r.setAttribute(qxe[i],"url(#"+o+")")}else r.removeAttribute(qxe[i]);else qxe[i]&&r.setAttribute(qxe[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Dfe.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return Dfe.pointAt(n,r,i,o,e)},t}(rke),cke={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}};const ske={get:function(e){return cke[e]},register:function(e,t){cke[e]=t},remove:function(e){delete cke[e]},getAll:function(){return cke}};var dke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return Vae(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,o=t.symbol||"circle";return(e=Lae(o)?o:ske.get(o))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=ske,t}(rke),fke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");Hae(t||r,(function(t,o){if("path"===o&&Vae(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===o||"endArrow"===o)if(t){var a=zae(t)?e.addArrow(r,qxe[o]):e.getDefaultArrow(r,qxe[o]);i.setAttribute(qxe[o],"url(#"+a+")")}else i.removeAttribute(qxe[o]);else qxe[o]&&i.setAttribute(qxe[o],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(rke),hke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(e,t){"points"===t&&Vae(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):qxe[t]&&r.setAttribute(qxe[t],e)}))},t}(rke),pke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");Hae(t||n,(function(e,t){"points"===t&&Vae(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):qxe[t]&&r.setAttribute(qxe[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return Bae(t)?(this.set("totalLength",the(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),Hae(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Dfe.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];Hae(e,(function(a,l){e[l+1]&&((n=[])[0]=i/t,r=Dfe.length(a[0],a[1],e[l+1][0],e[l+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(rke);var vke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];Hae(t||r,(function(e,t){-1===a.indexOf(t)||o?-1===a.indexOf(t)&&qxe[t]&&i.setAttribute(qxe[t],e):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.radius;if(!o)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(e){var t=0,n=0,r=0,i=0;return Vae(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(o);return Vae(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(t+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},t}(rke),gke={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},mke={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},yke={left:"left",start:"left",center:"middle",right:"end",end:"end"},bke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return Cae(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Sae(Sae({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),Hae(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?Zxe(n):qxe[t]&&i.setAttribute(qxe[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=Bce();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",mke[n]||"alphabetic"):e.setAttribute("alignment-baseline",gke[n]||"baseline"),e.setAttribute("text-anchor",yke[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var a=e.split("\n"),l=a.length-1,u="";Hae(a,(function(e,t){0===t?"alphabetic"===o?u+='<tspan x="'+r+'" dy="'+-l+'em">'+e+"</tspan>":"top"===o?u+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===o?u+='<tspan x="'+r+'" dy="'+-(l-1)/2+'em">'+e+"</tspan>":"bottom"===o?u+='<tspan x="'+r+'" dy="-'+(l+.3)+'em">'+e+"</tspan>":"hanging"===o&&(u+='<tspan x="'+r+'" dy="'+(-(l-1)-.3)+'em">'+e+"</tspan>"):u+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=u}else t.innerHTML=e;else t.innerHTML=""},t}(rke),wke=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,_ke=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,xke=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function kke(e){var t=e.match(xke);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),Hae(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var Cke=function(){function e(e){this.cfg={};var t,n,r,i,o,a,l,u=null,c=rue("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=wke.exec(e),o=yle(wle(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var l=Math.tan(o),u=l*l,c=(r.x-n.x+l*(r.y-n.y))/(u+1)+n.x,s=l*(r.x-n.x+l*(r.y-n.y))/(u+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",s),t.innerHTML=kke(a)}(e,u=Kxe("linearGradient")):(u=Kxe("radialGradient"),t=e,n=u,r=_ke.exec(t),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),l=r[4],n.setAttribute("cx",i),n.setAttribute("cy",o),n.setAttribute("r",a),n.innerHTML=kke(l)),u.setAttribute("id",c),this.el=u,this.id=c,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),Ske={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Oke={x:"-40%",y:"-40%",width:"200%",height:"200%"},Eke=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=Kxe("filter");return Hae(Oke,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=rue("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return Hae(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[Ske[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),Ike=function(){function e(e,t){this.cfg={};var n=Kxe("marker"),r=rue("marker_");n.setAttribute("id",r);var i=Kxe("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===o?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;Vae(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),Pke=function(){function e(e){this.type="clip",this.cfg={};var t=Kxe("clipPath");this.el=t,this.id=rue("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),Mke=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Rke=function(){function e(e){this.cfg={};var t=Kxe("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=Kxe("image");t.appendChild(n);var r=rue("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=Mke.exec(e)[2];n.setAttribute("href",i);var o=new Image;function a(){t.setAttribute("width",""+o.width),t.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),Ake=function(){function e(e){var t=Kxe("defs"),n=rue("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new Ike(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new Cke(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new Ike(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new Eke(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new Rke(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new Pke(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),jke=function(e){function t(t){return e.call(this,Sae(Sae({},t),{autoDraw:!0,renderer:"svg"}))||this}return Cae(t,e),t.prototype.getShapeBase=function(){return zn},t.prototype.getGroupBase=function(){return nke},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!$xe[r.tagName]){for(var i=r.parentNode;i&&!$xe[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=Kxe("svg"),t=new Ake(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&Jxe(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?Zxe(this):"clip"===e?Qxe(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();Qxe(this,e),t.length&&eke(e,t)},t}(xfe);const Dke=Object.freeze(Object.defineProperty({__proto__:null,AbstractCanvas:xfe,AbstractGroup:kfe,AbstractShape:Cfe,Base:Ice,Canvas:jke,Event:kce,Group:nke,PathUtil:xce,Shape:zn,assembleFont:lhe,getBBoxMethod:Efe,getOffScreenContext:ohe,getTextHeight:ahe,invert:use,isAllowCapture:Ece,multiplyVec2:lse,registerBBox:Ofe,registerEasing:sfe,version:"0.5.6"},Symbol.toStringTag,{value:"Module"}));var Tke=function(e){function t(t){var n=e.call(this,t)||this;n.type="path",n.shapeType="line";var r=t.connectNulls,i=void 0!==r&&r,o=t.showSinglePoint,a=void 0===o||o;return n.connectNulls=i,n.showSinglePoint=a,n}return Cae(t,e),t.prototype.updateElements=function(e,t){var n,r,i,o,a,l;void 0===t&&(t=!1);for(var u=new Map,c=new Map,s=[],d=0,f=0;f<e.length;f++){var h=e[f],p=this.getElementId(h);s.push(p),u.set(p,h),c.set(p,d),d++}this.elements=new Array(d);var v=Gwe(this.lastElementsMap,s),g=v.added,m=v.updated,y=v.removed;try{for(var b=Pae(g),w=b.next();!w.done;w=b.next()){p=w.value,h=u.get(p);var _=this.getShapeFactory(),x=this.getShapeInfo(h);f=c.get(p);(S=new Awe({shapeFactory:_,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:f})).geometry=this,S.animate=this.animateOption,S.draw(x,t),this.elementsMap[p]=S,this.elements[f]=S}}catch(e){n={error:e}}finally{try{w&&!w.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}try{for(var k=Pae(m),C=k.next();!C.done;C=k.next()){p=C.value,h=u.get(p);var S=this.lastElementsMap[p],O=(f=c.get(p),x=this.getShapeInfo(h),S.getModel());(this.isCoordinateChanged||Wwe(O,x))&&(S.animate=this.animateOption,S.update(x)),this.elementsMap[p]=S,this.elements[f]=S}}catch(e){i={error:e}}finally{try{C&&!C.done&&(o=k.return)&&o.call(k)}finally{if(i)throw i.error}}try{for(var E=Pae(y),I=E.next();!I.done;I=E.next()){p=I.value;(S=this.lastElementsMap[p]).animate=this.animateOption,S.destroy()}}catch(e){a={error:e}}finally{try{I&&!I.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}},t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var o=e[r];t.push({x:o.x,y:o.y}),n.push(o[Aue])}return{points:t,data:n}},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),r=n.points,i=n.data;return t.mappingData=e,t.data=i,t.isStack=!!this.getAdjust("stack"),t.points=r,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},t}(Ywe);function Fke(e,t,n,r,i){var o=[];if(e.length){for(var a=[],l=[],u=0,c=e.length;u<c;u++){var s=e[u];a.push(s[1]),l.push(s[0])}l=l.reverse(),Hae([a,l],(function(e,u){var c=[],s=r.parsePoints(e),d=s[0];1===a.length&&1===l.length?c=0===u?[["M",d.x-.5,d.y],["L",d.x+.5,d.y]]:[["L",d.x+.5,d.y],["L",d.x-.5,d.y]]:(t&&s.push({x:d.x,y:d.y}),c=n?qye(s,!1,i):$ye(s,!1),u>0&&(c[0][0]="L")),o=o.concat(c)})),o.push(["Z"])}return o}function Nke(e,t,n,r,i){for(var o=v_e(e,t,!t,"lineWidth"),a=e.connectNulls,l=e.isInCircle,u=f_e(e.points,a,e.showSinglePoint),c=[],s=0,d=u.length;s<d;s++){var f=u[s];c=c.concat(Fke(f,l,n,r,i))}return o.path=c,o}function Lke(e){var t=e.start,n=e.end;return[[t.x,n.y],[n.x,t.y]]}Vwe("area",{defaultShapeType:"area",getDefaultPoints:function(e){var t=e.x,n=e.y0;return(Vae(e.y)?e.y:[n,e.y]).map((function(e){return{x:t,y:e}}))}}),zwe("area","area",{draw:function(e,t){var n=Nke(e,!1,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color,fillOpacity:1}}}});var Bke=function(e){function t(t){var n=e.call(this,t)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=t.startOnZero,i=void 0===r||r,o=t.sortable,a=void 0!==o&&o,l=t.showSinglePoint,u=void 0!==l&&l;return n.startOnZero=i,n.sortable=a,n.showSinglePoint=u,n}return Cae(t,e),t.prototype.getPointsAndData=function(e){for(var t=[],n=[],r=0,i=e.length;r<i;r++){var o=e[r];t.push(o.points),n.push(o[Aue])}return{points:t,data:n}},t.prototype.getYMinValue=function(){return this.startOnZero?e.prototype.getYMinValue.call(this):this.getYScale().min},t}(Tke);Vwe("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return m_e(e)}}),zwe("edge","line",{draw:function(e,t){var n=v_e(e,!0,!1,"lineWidth"),r=$ye(this.parsePoints(e.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Sae(Sae({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var Vke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return Cae(t,e),t}(Ywe),zke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return Cae(t,e),t.prototype.updateElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.prepareRange(r),o=this.prepareSize(),a=Kle(this.styleOption,["cfg","shadowBlur"]);ple(a)||(a=o/2),this.prepareGreyScaleBlurredCircle(o,a),this.drawWithRange(r,i,o,a)}},t.prototype.color=function(e,t){return this.createAttrOption("color",e,"function"!=typeof t?t:""),this},t.prototype.clear=function(){e.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},t.prototype.prepareRange=function(e){var t=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return e.forEach((function(e){var i=e[Aue][t];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},t.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return ple(e)||(e=this.getDefaultSize()),e},t.prototype.prepareGreyScaleBlurredCircle=function(e,t){var n=this.getGrayScaleBlurredCanvas(),r=e+t,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,e,0,2*Math.PI,!0),i.closePath(),i.fill()},t.prototype.drawWithRange=function(e,t,n,r){var i,o,a=this.coordinate,l=a.start,u=a.end,c=this.coordinate.getWidth(),s=this.coordinate.getHeight(),d=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var f=this.getShadowCanvasCtx();t&&(e=e.filter((function(e){return e[Aue][d]<=t[1]&&e[Aue][d]>=t[0]})));var h=this.scales[d];try{for(var p=Pae(e),v=p.next();!v.done;v=p.next()){var g=v.value,m=this.getDrawCfg(g),y=m.x,b=m.y,w=h.scale(g[Aue][d]);this.drawGrayScaleBlurredCircle(y-l.x,b-u.y,n+r,w,f)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var _=f.getImageData(0,0,c,s);this.clearShadowCanvasCtx(),this.colorize(_),f.putImageData(_,0,0);var x=this.getImageShape();x.attr("x",l.x),x.attr("y",u.y),x.attr("width",c),x.attr("height",s),x.attr("img",f.canvas),x.set("origin",this.getShapeInfo(e))},t.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),t=this.coordinate;return Math.min(t.getWidth()/(4*e.scales[0].ticks.length),t.getHeight()/(4*e.scales[1].ticks.length))},t.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},t.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},t.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},t.prototype.drawGrayScaleBlurredCircle=function(e,t,n,r,i){var o=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(o,e-n,t-n)},t.prototype.colorize=function(e){for(var t=this.getAttribute("color"),n=e.data,r=this.paletteCache,i=3;i<n.length;i+=4){var o=n[i];if(ple(o)){var a=r[o]?r[o]:ipe.rgb2arr(t.gradient(o/256));n[i-3]=a[0],n[i-2]=a[1],n[i-1]=a[2],n[i]=o}}},t.prototype.getImageShape=function(){var e=this.imageShape;return e||(e=this.container.addShape({type:"image",attrs:{}}),this.imageShape=e,e)},t.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=e.map((function(e){return e[Aue]}));return Sae(Sae({},t),{mappingData:e,data:n})},t}(Ywe);function Hke(e){var t,n,r,i,o,a,l=e.x,u=e.y,c=e.y0,s=e.size;Vae(u)?(r=(t=Mae(u,2))[0],i=t[1]):(r=c,i=u),Vae(l)?(o=(n=Mae(l,2))[0],a=n[1]):(o=l-s/2,a=l+s/2);var d=[{x:o,y:r},{x:o,y:i}];return d.push({x:a,y:i},{x:a,y:r}),d}function Wke(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,o=e.length;i<o;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function Uke(e,t){var n=0,r=0,i=0,o=0;return Vae(e)?1===e.length?n=r=i=o=e[0]:2===e.length?(n=i=e[0],r=o=e[1]):3===e.length?(n=e[0],r=o=e[1],i=e[2]):(n=e[0],r=e[1],i=e[2],o=e[3]):n=r=i=o=e,n+r>t&&(r=t-(n=n?t/(1+r/n):0)),i+o>t&&(o=t-(i=i?t/(1+o/i):0)),[n||0,r||0,i||0,o||0]}function Gke(e,t,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:t[0].y}:{x:t[0].x,y:n.start.y},o=n.isTransposed?{x:n.end.x,y:t[2].y}:{x:t[3].x,y:n.end.y},a=Kle(e,["background","style","radius"]);if(a){var l=n.isTransposed?Math.abs(t[0].y-t[2].y):t[2].x-t[1].x,u=n.isTransposed?n.getWidth():n.getHeight(),c=Mae(Uke(a,Math.min(l,u)),4),s=c[0],d=c[1],f=c[2],h=c[3],p=n.isTransposed&&n.isReflect("y"),v=p?0:1,g=function(e){return p?-e:e};r.push(["M",i.x,o.y+g(s)]),0!==s&&r.push(["A",s,s,0,0,v,i.x+s,o.y]),r.push(["L",o.x-d,o.y]),0!==d&&r.push(["A",d,d,0,0,v,o.x,o.y+g(d)]),r.push(["L",o.x,i.y-g(f)]),0!==f&&r.push(["A",f,f,0,0,v,o.x-f,i.y]),r.push(["L",i.x+h,i.y]),0!==h&&r.push(["A",h,h,0,0,v,i.x,i.y-g(h)])}else r.push(["M",i.x,i.y]),r.push(["L",o.x,i.y]),r.push(["L",o.x,o.y]),r.push(["L",i.x,o.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var m=n.getCenter(),y=sye(e,n),b=y.startAngle,w=y.endAngle;if("theta"===n.type||n.isTransposed){var _=function(e){return Math.pow(e,2)};s=Math.sqrt(_(m.x-t[0].x)+_(m.y-t[0].y)),d=Math.sqrt(_(m.x-t[2].x)+_(m.y-t[2].y));r=uye(m.x,m.y,s,n.startAngle,n.endAngle,d)}else r=uye(m.x,m.y,n.getRadius(),b,w)}return r}function Yke(e,t,n){var r=[];return Bae(t)?n?r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",(e[2].x+e[3].x)/2,(e[2].y+e[3].y)/2],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):r.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),r}function $ke(e,t){return[t,e]}function qke(e){var t=e.theme,n=e.coordinate,r=e.getXScale(),i=r.values,o=e.beforeMappingData,a=i.length,l=gye(e.coordinate),u=e.intervalPadding,c=e.dodgePadding,s=e.maxColumnWidth||t.maxColumnWidth,d=e.minColumnWidth||t.minColumnWidth,f=e.columnWidthRatio||t.columnWidthRatio,h=e.multiplePieWidthRatio||t.multiplePieWidthRatio,p=e.roseWidthRatio||t.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var v=function(e,t){var n=e.length,r=e;nle(r[0])&&(r=e.map((function(e){return t.translate(e)})));for(var i=r[1]-r[0],o=2;o<n;o++){var a=r[o]-r[o-1];i>a&&(i=a)}return i}(i,r);a=(r.max-r.min)/v,i.length>a&&(a=i.length)}var g=r.range,m=1/a,y=1;(n.isPolar?y=n.isTransposed&&a>1?h:p:(r.isLinear&&(m*=g[1]-g[0]),y=f),!Bae(u)&&u>=0)?m=(1-(a-1)*(u/l))/a:m*=y;if(e.getAdjust("dodge")){var b=function(e,t){if(t){var n=Kae(e);return ile(n,t).length}return e.length}(o,e.getAdjust("dodge").dodgeBy);if(!Bae(c)&&c>=0)m=(m-c/l*(b-1))/b;else!Bae(u)&&u>=0?(m*=y,m/=b):m/=b;m=m>=0?m:0}if(!Bae(s)&&s>=0){var w=s/l;m>w&&(m=w)}if(!Bae(d)&&d>=0){var _=d/l;m<_&&(m=_)}return m}Vwe("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return Hke(e)}}),zwe("interval","rect",{draw:function(e,t){var n,r=v_e(e,!1,!0),i=t,o=null==e?void 0:e.background;if(o){i=t.addGroup({name:"interval-group"});var a=g_e(e),l=Gke(e,this.parsePoints(e.points),this.coordinate);i.addShape("path",{attrs:Sae(Sae({},a),{path:l}),capture:!1,zIndex:-1,name:Rwe})}n=r.radius&&this.coordinate.isRect?function(e,t,n){var r,i,o,a,l,u,c,s=Mae(Aae([],Mae(e),!1),4),d=s[0],f=s[1],h=s[2],p=s[3],v=Mae("number"==typeof n?Array(4).fill(n):n,4),g=v[0],m=v[1],y=v[2],b=v[3];t.isTransposed&&(f=(r=Mae($ke(f,p),2))[0],p=r[1]),t.isReflect("y")&&(d=(i=Mae($ke(d,f),2))[0],f=i[1],h=(o=Mae($ke(h,p),2))[0],p=o[1]),t.isReflect("x")&&(d=(a=Mae($ke(d,p),2))[0],p=a[1],f=(l=Mae($ke(f,h),2))[0],h=l[1]);var w=[],_=function(e){return Math.abs(e)};return g=(u=Mae(Uke([g,m,y,b],Math.min(_(p.x-d.x),_(f.y-d.y))).map((function(e){return _(e)})),4))[0],m=u[1],y=u[2],b=u[3],t.isTransposed&&(g=(c=Mae([b,g,m,y],4))[0],m=c[1],y=c[2],b=c[3]),d.y<f.y?(w.push(["M",p.x,p.y+y]),0!==y&&w.push(["A",y,y,0,0,0,p.x-y,p.y]),w.push(["L",d.x+b,d.y]),0!==b&&w.push(["A",b,b,0,0,0,d.x,d.y+b]),w.push(["L",f.x,f.y-g]),0!==g&&w.push(["A",g,g,0,0,0,f.x+g,f.y]),w.push(["L",h.x-m,h.y]),0!==m&&w.push(["A",m,m,0,0,0,h.x,h.y-m]),w.push(["L",p.x,p.y+y]),w.push(["z"])):p.x<d.x?(w.push(["M",h.x+m,h.y]),0!==m&&w.push(["A",m,m,0,0,0,h.x,h.y+m]),w.push(["L",p.x,p.y-y]),0!==y&&w.push(["A",y,y,0,0,0,p.x+y,p.y]),w.push(["L",d.x-b,d.y]),0!==b&&w.push(["A",b,b,0,0,0,d.x,d.y-b]),w.push(["L",f.x,f.y+g]),0!==g&&w.push(["A",g,g,0,0,0,f.x-g,f.y]),w.push(["L",h.x+m,h.y]),w.push(["z"])):(w.push(["M",f.x,f.y+g]),0!==g&&w.push(["A",g,g,0,0,1,f.x+g,f.y]),w.push(["L",h.x-m,h.y]),0!==m&&w.push(["A",m,m,0,0,1,h.x,h.y+m]),w.push(["L",p.x,p.y-y]),0!==y&&w.push(["A",y,y,0,0,1,p.x-y,p.y]),w.push(["L",d.x+b,d.y]),0!==b&&w.push(["A",b,b,0,0,1,d.x,d.y-b]),w.push(["L",f.x,f.y+g]),w.push(["z"])),w}(this.parsePoints(e.points),this.coordinate,r.radius):this.parsePath(function(e,t,n){var r=n.getWidth(),i=n.getHeight(),o="rect"===n.type,a=[],l=(e[2].x-e[1].x)/2,u=n.isTransposed?l*i/r:l*r/i;return"round"===t?(o?(a.push(["M",e[0].x,e[0].y+u]),a.push(["L",e[1].x,e[1].y-u]),a.push(["A",l,l,0,0,1,e[2].x,e[2].y-u]),a.push(["L",e[3].x,e[3].y+u]),a.push(["A",l,l,0,0,1,e[0].x,e[0].y+u])):(a.push(["M",e[0].x,e[0].y]),a.push(["L",e[1].x,e[1].y]),a.push(["A",l,l,0,0,1,e[2].x,e[2].y]),a.push(["L",e[3].x,e[3].y]),a.push(["A",l,l,0,0,1,e[0].x,e[0].y])),a.push(["z"])):a=Wke(e),a}(e.points,r.lineCap,this.coordinate));var u=i.addShape("path",{attrs:Sae(Sae({},r),{path:n}),name:"interval"});return o?i:u},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var Kke=function(e){function t(t){var n=e.call(this,t)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=t.background;return n.background=r,n}return Cae(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=gye(this.coordinate)):(this.defaultSize||(this.defaultSize=qke(this)),n=this.defaultSize);return r.size=n,r},t.prototype.adjustScale=function(){e.prototype.adjustScale.call(this);var t,n,r=this.getYScale();if("theta"===this.coordinate.type)r.change({nice:!1,min:0,max:(t=r,n=t.values.filter((function(e){return!Bae(e)&&!isNaN(e)})),Math.max.apply(Math,Aae(Aae([],Mae(n),!1),[Bae(t.max)?-1/0:t.max],!1)))});else{var i=this.scaleDefs,o=r.field,a=r.min,l=r.max;"time"!==r.type&&(a>0&&!Kle(i,[o,"min"])&&r.change({min:0}),l<=0&&!Kle(i,[o,"max"])&&r.change({max:0}))}},t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return n.background=this.background,n},t}(Ywe),Xke=function(e){function t(t){var n=e.call(this,t)||this;n.type="line";var r=t.sortable,i=void 0!==r&&r;return n.sortable=i,n}return Cae(t,e),t}(Tke),Jke=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function Zke(e,t,n,r,i){var o,a,l=v_e(t,i,!i,"r"),u=e.parsePoints(t.points),c=u[0];if(t.isStack)c=u[1];else if(u.length>1){var s=n.addGroup();try{for(var d=Pae(u),f=d.next();!f.done;f=d.next()){var h=f.value;s.addShape({type:"marker",attrs:Sae(Sae(Sae({},l),{symbol:i_e[r]||r}),h)})}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return s}return n.addShape({type:"marker",attrs:Sae(Sae(Sae({},l),{symbol:i_e[r]||r}),c)})}Vwe("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return m_e(e)}}),Hae(Jke,(function(e){zwe("point","hollow-".concat(e),{draw:function(t,n){return Zke(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:i_e[e]||e,style:{r:4.5,stroke:n,fill:null}}}})}));var Qke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return Cae(t,e),t.prototype.getDrawCfg=function(t){var n=e.prototype.getDrawCfg.call(this,t);return Sae(Sae({},n),{isStack:!!this.getAdjust("stack")})},t}(Ywe);Vwe("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var t=[];return Hae(e.x,(function(n,r){var i=e.y[r];t.push({x:n,y:i})})),t}}),zwe("polygon","polygon",{draw:function(e,t){if(!Gle(e.points)){var n=v_e(e,!0,!0),r=this.parsePath(function(e){for(var t=e[0],n=1,r=[["M",t.x,t.y]];n<e.length;){var i=e[n];i.x===e[n-1].x&&i.y===e[n-1].y||(r.push(["L",i.x,i.y]),i.x===t.x&&i.y===t.y&&n<e.length-1&&(t=e[n+1],r.push(["Z"]),r.push(["M",t.x,t.y]),n++)),n++}return Yle(ale(r),t)||r.push(["L",t.x,t.y]),r.push(["Z"]),r}(e.points));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var eCe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return Cae(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=r.x,o=r.y;if(!Vae(i)||!Vae(o)){var a=this.getXScale(),l=this.getYScale(),u=.5/a.values.length,c=.5/l.values.length;a.isCategory&&l.isCategory?(i=[i-u,i-u,i+u,i+u],o=[o-c,o+c,o+c,o-c]):Vae(i)?(i=[(n=i)[0],n[0],n[1],n[1]],o=[o-c/2,o+c/2,o+c/2,o-c/2]):Vae(o)&&(o=[(n=o)[0],n[1],n[1],n[0]],i=[i-u/2,i-u/2,i+u/2,i+u/2]),r.x=i,r.y=o}return r},t}(Ywe);Vwe("schema",{defaultShapeType:""});var tCe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return Cae(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=gye(this.coordinate)):(this.defaultSize||(this.defaultSize=qke(this)),n=this.defaultSize);return r.size=n,r},t}(Ywe);Vwe("violin",{defaultShapeType:"violin",getDefaultPoints:function(e){var t=e.size/2,n=[],r=function(e){if(!Vae(e))return[];var t=Xae(e);return $le(e,(function(e){return e/t}))}(e._size);return Hae(e.y,(function(i,o){var a=r[o]*t,l=0===o,u=o===e.y.length-1;n.push({isMin:l,isMax:u,x:e.x-a,y:i}),n.unshift({isMin:l,isMax:u,x:e.x+a,y:i})})),n}}),zwe("violin","violin",{draw:function(e,t){var n=v_e(e,!0,!0),r=this.parsePath(h_e(e.points));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r}),name:"violin"})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:e.color}}}});var nCe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return Cae(t,e),t.prototype.createShapePointsCfg=function(t){var n,r=e.prototype.createShapePointsCfg.call(this,t),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,t)[0],n/=gye(this.coordinate)):(this.defaultSize||(this.defaultSize=qke(this)),n=this.defaultSize);return r.size=n,r._size=Kle(t[Aue],[this._sizeField]),r},t.prototype.initAttributes=function(){var t=this.attributeOption,n=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete t.size,e.prototype.initAttributes.call(this)},t}(Ywe);function rCe(e,t){return["C",1*e.x/2+1*t.x/2,e.y,1*e.x/2+1*t.x/2,t.y,t.x,t.y]}function iCe(e,t){var n=[];n.push({x:t.x,y:t.y}),n.push(e);var r=["Q"];return Hae(n,(function(e){r.push(e.x,e.y)})),r}zwe("area","line",{draw:function(e,t){var n=Nke(e,!0,!1,this);return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),zwe("area","smooth",{draw:function(e,t){var n=Nke(e,!1,!0,this,Lke(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,fill:e.color,fillOpacity:1}}}}),zwe("area","smooth-line",{draw:function(e,t){var n=Nke(e,!0,!0,this,Lke(this.coordinate));return t.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(e){return{symbol:function(e,t,n){return void 0===n&&(n=5.5),[["M",e-n,t-4],["L",e+n,t-4],["L",e+n,t+4],["L",e-n,t+4],["Z"]]},style:{r:5,stroke:e.color,fill:null}}}}),zwe("edge","arc",{draw:function(e,t){var n,r=v_e(e,!0,!1,"lineWidth"),i=e.points,o=i.length>2?"weight":"normal";if(e.isInCircle){var a={x:0,y:1};return"normal"===o?n=function(e,t,n){var r=iCe(t,n),i=[["M",e.x,e.y]];return i.push(r),i}(i[0],i[1],a):(r.fill=r.stroke,n=function(e,t){var n=iCe(e[1],t),r=iCe(e[3],t),i=[["M",e[0].x,e[0].y]];return i.push(r),i.push(["L",e[3].x,e[3].y]),i.push(["L",e[2].x,e[2].y]),i.push(n),i.push(["L",e[1].x,e[1].y]),i.push(["L",e[0].x,e[0].y]),i.push(["Z"]),i}(i,a)),n=this.parsePath(n),t.addShape("path",{attrs:Sae(Sae({},r),{path:n})})}if("normal"===o)return n=cye(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),t.addShape("path",{attrs:Sae(Sae({},r),{path:n})});var l=rCe(i[1],i[3]),u=rCe(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],l,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],u,["Z"]],n=this.parsePath(n),r.fill=r.stroke,t.addShape("path",{attrs:Sae(Sae({},r),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),zwe("edge","smooth",{draw:function(e,t){var n=v_e(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=rCe(e,t),r=[["M",e.x,e.y]];return r.push(n),r}(r[0],r[1]));return t.addShape("path",{attrs:Sae(Sae({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var oCe=1/3;zwe("edge","vhv",{draw:function(e,t){var n=v_e(e,!0,!1,"lineWidth"),r=e.points,i=this.parsePath(function(e,t){var n=[];n.push({x:e.x,y:e.y*(1-oCe)+t.y*oCe}),n.push({x:t.x,y:e.y*(1-oCe)+t.y*oCe}),n.push(t);var r=[["M",e.x,e.y]];return Hae(n,(function(e){r.push(["L",e.x,e.y])})),r}(r[0],r[1]));return t.addShape("path",{attrs:Sae(Sae({},n),{path:i})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),zwe("interval","funnel",{getPoints:function(e){return e.size=2*e.size,Hke(e)},draw:function(e,t){var n=v_e(e,!1,!0),r=this.parsePath(Yke(e.points,e.nextPoints,!1));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),zwe("interval","hollow-rect",{draw:function(e,t){var n=v_e(e,!0,!1),r=t,i=null==e?void 0:e.background;if(i){r=t.addGroup();var o=g_e(e),a=Gke(e,this.parsePoints(e.points),this.coordinate);r.addShape("path",{attrs:Sae(Sae({},o),{path:a}),capture:!1,zIndex:-1,name:Rwe})}var l=this.parsePath(Wke(e.points)),u=r.addShape("path",{attrs:Sae(Sae({},n),{path:l}),name:"interval"});return i?r:u},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}}),zwe("interval","line",{getPoints:function(e){return n=(t=e).x,r=t.y,i=t.y0,Vae(r)?r.map((function(e,t){return{x:Vae(n)?n[t]:n,y:e}})):[{x:n,y:i},{x:n,y:r}];var t,n,r,i},draw:function(e,t){var n=v_e(e,!0,!1,"lineWidth"),r=hye(Sae({},n),["fill"]),i=this.parsePath(Wke(e.points,!1));return t.addShape("path",{attrs:Sae(Sae({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e,t-n],["L",e,t+n]]},style:{r:5,stroke:e.color}}}}),zwe("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,Hke(e)},draw:function(e,t){var n=v_e(e,!1,!0),r=this.parsePath(Yke(e.points,e.nextPoints,!0));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),zwe("interval","tick",{getPoints:function(e){return function(e){var t,n,r,i=e.x,o=e.y,a=e.y0,l=e.size;Vae(o)?(n=(t=Mae(o,2))[0],r=t[1]):(n=a,r=o);var u=i+l/2,c=i-l/2;return[{x:i,y:n},{x:i,y:r},{x:c,y:n},{x:u,y:n},{x:c,y:r},{x:u,y:r}]}(e)},draw:function(e,t){var n,r=v_e(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y]]);return t.addShape("path",{attrs:Sae(Sae({},r),{path:i}),name:"interval"})},getMarker:function(e){return{symbol:function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},style:{r:5,stroke:e.color}}}});var aCe=function(e,t,n){var r,i=e.x,o=e.y,a=t.x,l=t.y;switch(n){case"hv":r=[{x:a,y:o}];break;case"vh":r=[{x:i,y:l}];break;case"hvh":var u=(a+i)/2;r=[{x:u,y:o},{x:u,y:l}];break;case"vhv":var c=(o+l)/2;r=[{x:i,y:c},{x:a,y:c}]}return r};function lCe(e,t){var n=f_e(e.points,e.connectNulls,e.showSinglePoint),r=[];return Hae(n,(function(e){var n=function(e,t){var n=[];return Hae(e,(function(r,i){var o=e[i+1];if(n.push(r),o){var a=aCe(r,o,t);n=n.concat(a)}})),n}(e,t);r=r.concat(function(e){return e.map((function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]}))}(n))})),Sae(Sae({},v_e(e,!0,!1,"lineWidth")),{path:r})}function uCe(e){var t=Vae(e)?e:[e],n=t[0],r=t[t.length-1],i=t.length>1?t[1]:n;return{min:n,max:r,min1:i,max1:t.length>3?t[3]:r,median:t.length>2?t[2]:i}}function cCe(e,t,n){var r,i=n/2;if(Vae(t)){var o=uCe(t),a=o.min,l=o.max,u=o.median,c=o.min1,s=e-i,d=e+i;r=[[s,l],[d,l],[e,l],[e,f=o.max1],[s,c],[s,f],[d,f],[d,c],[e,c],[e,a],[s,a],[d,a],[s,u],[d,u]]}else{t=Bae(t)?.5:t;var f,h=uCe(e),p=(a=h.min,l=h.max,u=h.median,t-i),v=t+i;r=[[a,p],[a,v],[a,t],[c=h.min1,t],[c,p],[c,v],[f=h.max1,v],[f,p],[f,t],[l,t],[l,p],[l,v],[u,p],[u,v]]}return r.map((function(e){return{x:e[0],y:e[1]}}))}function sCe(e){var t=(Vae(e)?e:[e]).sort((function(e,t){return t-e}));return function(e,t,n){if(nle(e))return e.padEnd(t,n);if(Vae(e)){var r=e.length;if(r<t)for(var i=t-r,o=0;o<i;o++)e.push(n)}return e}(t,4,t[t.length-1])}function dCe(e,t,n){var r=sCe(t);return[{x:e,y:r[0]},{x:e,y:r[1]},{x:e-n/2,y:r[2]},{x:e-n/2,y:r[1]},{x:e+n/2,y:r[1]},{x:e+n/2,y:r[2]},{x:e,y:r[2]},{x:e,y:r[3]}]}function fCe(e,t){var n=Math.abs(e[0].x-e[2].x),r=Math.abs(e[0].y-e[2].y),i=Math.min(n,r);return t&&(i=fle(t,0,Math.min(n,r))),i/=2,{x:(e[0].x+e[2].x)/2-i,y:(e[0].y+e[2].y)/2-i,width:2*i,height:2*i}}Hae(["hv","vh","hvh","vhv"],(function(e){zwe("line",e,{draw:function(t,n){var r=lCe(t,e);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(t){return b_e(t,e)}})})),Hae(["cross","tick","plus","hyphen","line"],(function(e){zwe("point",e,{draw:function(t,n){return Zke(this,t,n,e,!0)},getMarker:function(t){var n=t.color;return{symbol:i_e[e],style:{r:4.5,stroke:n,fill:null}}}})})),zwe("point","image",{draw:function(e,t){var n,r,i=v_e(e,!1,!1,"r").r,o=this.parsePoints(e.points),a=o[0];if(e.isStack)a=o[1];else if(o.length>1){var l=t.addGroup();try{for(var u=Pae(o),c=u.next();!c.done;c=u.next()){var s=c.value;l.addShape("image",{attrs:{x:s.x-i/2,y:s.y-i,width:i,height:i,img:e.shape[1]}})}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return l}return t.addShape("image",{attrs:{x:a.x-i/2,y:a.y-i,width:i,height:i,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}}),Hae(Jke,(function(e){zwe("point",e,{draw:function(t,n){return Zke(this,t,n,e,!1)},getMarker:function(t){var n=t.color;return{symbol:i_e[e]||e,style:{r:4.5,fill:n}}}})})),zwe("schema","box",{getPoints:function(e){return cCe(e.x,e.y,e.size)},draw:function(e,t){var n,r=v_e(e,!0,!1),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["M",n[4].x,n[4].y],["L",n[5].x,n[5].y],["L",n[6].x,n[6].y],["L",n[7].x,n[7].y],["L",n[4].x,n[4].y],["Z"],["M",n[8].x,n[8].y],["L",n[9].x,n[9].y],["M",n[10].x,n[10].y],["L",n[11].x,n[11].y],["M",n[12].x,n[12].y],["L",n[13].x,n[13].y]]);return t.addShape("path",{attrs:Sae(Sae({},r),{path:i,name:"schema"})})},getMarker:function(e){return{symbol:function(e,t,n){var r=cCe(e,[t-6,t-3,t,t+3,t+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}}),zwe("schema","candle",{getPoints:function(e){return dCe(e.x,e.y,e.size)},draw:function(e,t){var n,r=v_e(e,!0,!0),i=this.parsePath([["M",(n=e.points)[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]);return t.addShape("path",{attrs:Sae(Sae({},r),{path:i,name:"schema"})})},getMarker:function(e){var t=e.color;return{symbol:function(e,t,n){var r=dCe(e,[t+7.5,t+3,t-3,t-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}}),zwe("polygon","square",{draw:function(e,t){if(!Gle(e.points)){var n=v_e(e,!0,!0),r=this.parsePoints(e.points);return t.addShape("rect",{attrs:Sae(Sae({},n),fCe(r,e.size)),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}}),zwe("violin","smooth",{draw:function(e,t){var n=v_e(e,!0,!0),r=this.parsePath(p_e(e.points));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{stroke:null,r:4,fill:e.color}}}}),zwe("violin","hollow",{draw:function(e,t){var n=v_e(e,!0,!1),r=this.parsePath(h_e(e.points));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}}),zwe("violin","hollow-smooth",{draw:function(e,t){var n=v_e(e,!0,!1),r=this.parsePath(p_e(e.points));return t.addShape("path",{attrs:Sae(Sae({},n),{path:r})})},getMarker:function(e){return{symbol:"circle",style:{r:4,fill:null,stroke:e.color}}}});var hCe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getLabelValueDir=function(e){var t=e.points;return t[0].y<=t[2].y?1:-1},t.prototype.getLabelOffsetPoint=function(t,n,r,i){var o,a=e.prototype.getLabelOffsetPoint.call(this,t,n,r),l=this.getCoordinate(),u=l.isTransposed?"x":"y",c=this.getLabelValueDir(t.mappingData);return a=Sae(Sae({},a),((o={})[u]=a[u]*c,o)),l.isReflect("x")&&(a=Sae(Sae({},a),{x:-1*a.x})),l.isReflect("y")&&(a=Sae(Sae({},a),{y:-1*a.y})),a},t.prototype.getThemedLabelCfg=function(e){var t=this.geometry,n=this.getDefaultLabelCfg(),r=t.theme;return Hle({},n,r.labels,"middle"===e.position?{offset:0}:{},e)},t.prototype.setLabelPosition=function(e,t,n,r){var i,o,a,l,u=this.getCoordinate(),c=u.isTransposed,s=t.points,d=u.convert(s[0]),f=u.convert(s[2]),h=this.getLabelValueDir(t),p=Vae(t.shape)?t.shape[0]:t.shape;if("funnel"===p||"pyramid"===p){var v=Kle(t,"nextPoints"),g=Kle(t,"points");if(v){var m=u.convert(g[0]),y=u.convert(g[1]),b=u.convert(v[0]),w=u.convert(v[1]);c?(i=Math.min(b.y,m.y),a=Math.max(b.y,m.y),o=(y.x+w.x)/2,l=(m.x+b.x)/2):(i=Math.min((y.y+w.y)/2,(m.y+b.y)/2),a=Math.max((y.y+w.y)/2,(m.y+b.y)/2),o=w.x,l=m.x)}else i=Math.min(f.y,d.y),a=Math.max(f.y,d.y),o=f.x,l=d.x}else i=Math.min(f.y,d.y),a=Math.max(f.y,d.y),o=f.x,l=d.x;switch(r){case"right":e.x=o,e.y=(i+a)/2,e.textAlign=Kle(e,"textAlign",h>0?"left":"right");break;case"left":e.x=l,e.y=(i+a)/2,e.textAlign=Kle(e,"textAlign",h>0?"left":"right");break;case"bottom":c&&(e.x=(o+l)/2),e.y=a,e.textAlign=Kle(e,"textAlign","center"),e.textBaseline=Kle(e,"textBaseline",h>0?"bottom":"top");break;case"middle":c&&(e.x=(o+l)/2),e.y=(i+a)/2,e.textAlign=Kle(e,"textAlign","center"),e.textBaseline=Kle(e,"textBaseline","middle");break;case"top":c&&(e.x=(o+l)/2),e.y=i,e.textAlign=Kle(e,"textAlign","center"),e.textBaseline=Kle(e,"textBaseline",h>0?"bottom":"top")}},t}(n_e),pCe=Math.PI/2,vCe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getLabelOffset=function(e){var t=this.getCoordinate(),n=0;if(ple(e))n=e;else if(nle(e)&&-1!==e.indexOf("%")){var r=t.getRadius();t.innerRadius>0&&(r*=1-t.innerRadius),n=.01*parseFloat(e)*r}return n},t.prototype.getLabelItems=function(t){var n=e.prototype.getLabelItems.call(this,t),r=this.geometry.getYScale();return $le(n,(function(e){if(e&&r){var t=r.scale(Kle(e.data,r.field));return Sae(Sae({},e),{percent:t})}return e}))},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate();if(e.labelEmit)t=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=e.offset;t=Math.abs(e.x-r.x)<1?"center":e.angle>Math.PI||e.angle<=0?i>0?"left":"right":i>0?"right":"left"}else t="center";return t},t.prototype.getLabelPoint=function(e,t,n){var r,i=1,o=e.content[n];this.isToMiddle(t)?r=this.getMiddlePoint(t.points):(1===e.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(t,n));var a=e.offset*i,l=this.getPointAngle(r),u=e.labelEmit,c=this.getCirclePoint(l,a,r,u);return 0===c.r?c.content="":(c.content=o,c.angle=l,c.color=t.color),c.rotate=e.autoRotate?this.getLabelRotate(l,a,u):e.rotate,c.start={x:r.x,y:r.y},c},t.prototype.getArcPoint=function(e,t){return void 0===t&&(t=0),Vae(e.x)||Vae(e.y)?{x:Vae(e.x)?e.x[t]:e.x,y:Vae(e.y)?e.y[t]:e.y}:{x:e.x,y:e.y}},t.prototype.getPointAngle=function(e){return yye(this.getCoordinate(),e)},t.prototype.getCirclePoint=function(e,t,n,r){var i=this.getCoordinate(),o=i.getCenter(),a=mye(i,n);if(0===a)return Sae(Sae({},o),{r:a});var l=e;i.isTransposed&&a>t&&!r?l=e+2*Math.asin(t/(2*a)):a+=t;return{x:o.x+a*Math.cos(l),y:o.y+a*Math.sin(l),r:a}},t.prototype.getLabelRotate=function(e,t,n){var r=e+pCe;return n&&(r-=pCe),r&&(r>pCe?r-=Math.PI:r<-pCe&&(r+=Math.PI)),r},t.prototype.getMiddlePoint=function(e){var t=this.getCoordinate(),n=e.length,r={x:0,y:0};return Hae(e,(function(e){r.x+=e.x,r.y+=e.y})),r.x/=n,r.y/=n,r=t.convert(r)},t.prototype.isToMiddle=function(e){return e.x.length>2},t}(n_e),gCe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return Cae(t,e),t.prototype.getDefaultLabelCfg=function(t,n){var r=e.prototype.getDefaultLabelCfg.call(this,t,n);return Hle({},r,Kle(this.geometry.theme,"pieLabels",{}))},t.prototype.getLabelOffset=function(t){return e.prototype.getLabelOffset.call(this,t)||0},t.prototype.getLabelRotate=function(e,t,n){var r;return t<0&&((r=e)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},t.prototype.getLabelAlign=function(e){var t,n=this.getCoordinate().getCenter();return t=e.angle<=Math.PI/2&&e.x>=n.x?"left":"right",e.offset<=0&&(t="right"===t?"left":"right"),t},t.prototype.getArcPoint=function(e){return e},t.prototype.getPointAngle=function(e){var t,n=this.getCoordinate(),r={x:Vae(e.x)?e.x[0]:e.x,y:e.y[0]},i={x:Vae(e.x)?e.x[1]:e.x,y:e.y[1]},o=yye(n,r);if(e.points&&e.points[0].y===e.points[1].y)t=o;else{var a=yye(n,i);o>=a&&(a+=2*Math.PI),t=o+(a-o)/2}return t},t.prototype.getCirclePoint=function(e,t){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+t;return Sae(Sae({},lye(r.x,r.y,i,e)),{angle:e,r:i})},t}(vCe);function mCe(e,t,n){var r=e.filter((function(e){return!e.invisible}));r.sort((function(e,t){return e.y-t.y}));var i,o=!0,a=n.minY,l=n.maxY,u=Math.abs(a-l),c=0,s=Number.MIN_VALUE,d=r.map((function(e){return e.y>c&&(c=e.y),e.y<s&&(s=e.y),{content:e.content,size:t,targets:[e.y-a],pos:null}}));for(s-=a,c-a>u&&(u=c-a);o;)for(d.forEach((function(e){var t=(Math.min.apply(s,e.targets)+Math.max.apply(s,e.targets))/2;e.pos=Math.min(Math.max(s,t-e.size/2),u-e.size),e.pos=Math.max(0,e.pos)})),o=!1,i=d.length;i--;)if(i>0){var f=d[i-1],h=d[i];f.pos+f.size>h.pos&&(f.size+=h.size,f.targets=f.targets.concat(h.targets),f.pos+f.size>u&&(f.pos=u-f.size),d.splice(i,1),o=!0)}i=0,d.forEach((function(e){var n=a+t/2;e.targets.forEach((function(){r[i].y=e.pos+n,n+=t,i++}))}))}var yCe=4;var bCe=4,wCe=4;var _Ce=100,xCe=function(){function e(e){void 0===e&&(e={}),this.bitmap={};var t=e.xGap,n=void 0===t?1:t,r=e.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return e.prototype.hasGap=function(e){for(var t=!0,n=this.bitmap,r=Math.round(e.minX),i=Math.round(e.maxX),o=Math.round(e.minY),a=Math.round(e.maxY),l=r;l<=i;l+=1)if(n[l]){if(l===r||l===i){for(var u=o;u<=a;u++)if(n[l][u]){t=!1;break}}else if(n[l][o]||n[l][a]){t=!1;break}}else n[l]={};return t},e.prototype.fillGap=function(e){for(var t=this.bitmap,n=Math.round(e.minX),r=Math.round(e.maxX),i=Math.round(e.minY),o=Math.round(e.maxY),a=n;a<=r;a+=1)t[a]||(t[a]={});for(a=n;a<=r;a+=this.xGap){for(var l=i;l<=o;l+=this.yGap)t[a][l]=!0;t[a][o]=!0}if(1!==this.yGap)for(a=i;a<=o;a+=1)t[n][a]=!0,t[r][a]=!0;if(1!==this.xGap)for(a=n;a<=r;a+=1)t[a][i]=!0,t[a][o]=!0},e.prototype.destroy=function(){this.bitmap={}},e}();function kCe(e,t,n,r){var i=e.getCanvasBBox(),o=i.width,a=i.height,l={x:t,y:n,textAlign:"center"};switch(r){case 0:l.y-=a+1,l.x+=1,l.textAlign="left";break;case 1:l.y-=a+1,l.x-=1,l.textAlign="right";break;case 2:l.y+=a+1,l.x-=1,l.textAlign="right";break;case 3:l.y+=a+1,l.x+=1,l.textAlign="left";break;case 5:l.y-=2*a+2;break;case 6:l.y+=2*a+2;break;case 7:l.x+=o+1,l.textAlign="left";break;case 8:l.x-=o+1,l.textAlign="right"}return e.attr(l),e.getCanvasBBox()}function CCe(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function SCe(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function OCe(e){var t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=e.rotation;return n?[SCe(t[0],n,t[0]),SCe(t[1],n,t[0]),SCe(t[2],n,t[0]),SCe(t[3],n,t[0])]:t}function ECe(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){var r,i;n.push((r=[e.x,e.y],i=t,(r[0]||0)*(i[0]||0)+(r[1]||0)*(i[1]||0)+0*(i[2]||0)))})),{min:Math.min.apply(Math,Aae([],Mae(n),!1)),max:Math.max.apply(Math,Aae([],Mae(n),!1))}}function ICe(e,t){return e.max>t.min&&e.min<t.max}function PCe(e){return["x","y","width","height"].every((function(t){return"number"==typeof(n=e[t])&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0;var n}))}function MCe(e,t,n){if(void 0===n&&(n=0),!PCe(e)||!PCe(t))return!1;if(!e.rotation&&!t.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(e,t,n);for(var r=OCe(e),i=OCe(t),o=CCe(r).concat(CCe(i)),a=0;a<o.length;a++){var l=o[a];if(!ICe(ECe(r,l),ECe(i,l)))return!1}return!0}var RCe=function(){function e(e){var t=this;this.queue=[],this.worker=new Worker(e),this.worker.onmessage=function(e){var n;null===(n=t.queue.shift())||void 0===n||n.resolve(e)},this.worker.onmessageerror=function(e){var n;console.warn("[AntV G2] Web worker is not available"),null===(n=t.queue.shift())||void 0===n||n.reject(e)}}return e.prototype.post=function(e,t){var n=this;return new Promise((function(r,i){n.queue.push({resolve:r,reject:i});try{n.worker.postMessage(e)}catch(e){console.warn("[AntV G2] Web worker is not available"),Lae(t)&&t()}}))},e.prototype.destroy=function(){this.worker.terminate()},e}();var ACe="\n   self.onmessage = ".concat(function(e){var t=function(){function e(e){if(e.length>4)return[];var t=function(e,t){return[t.x-e.x,t.y-e.y]};return[t(e[0],e[1]),t(e[1],e[2])]}function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n={x:0,y:0});var r=e.x,i=e.y;return{x:(r-n.x)*Math.cos(-t)+(i-n.y)*Math.sin(-t)+n.x,y:(n.x-r)*Math.sin(-t)+(i-n.y)*Math.cos(-t)+n.y}}function n(e){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],r=e.rotation;return r?[t(n[0],r,n[0]),t(n[1],r,n[0]),t(n[2],r,n[0]),t(n[3],r,n[0])]:n}function r(e,t){if(e.length>4)return{min:0,max:0};var n=[];return e.forEach((function(e){var r,i;n.push((r=[e.x,e.y],i=t,(r[0]||0)*(i[0]||0)+(r[1]||0)*(i[1]||0)+0*(i[2]||0)))})),{min:Math.min.apply(null,n),max:Math.max.apply(null,n)}}function i(e,t){return e.max>t.min&&e.min<t.max}function o(e){return["x","y","width","height"].every((function(t){return"number"==typeof(n=e[t])&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0;var n}))}return{intersect:function(t,a,l){if(void 0===l&&(l=0),!o(t)||!o(a))return!1;if(!t.rotation&&!a.rotation)return function(e,t,n){return void 0===n&&(n=0),!(t.x>e.x+e.width+n||t.x+t.width<e.x-n||t.y>e.y+e.height+n||t.y+t.height<e.y-n)}(t,a,l);for(var u=n(t),c=n(a),s=e(u).concat(e(c)),d=0;d<s.length;d++){var f=s[d];if(!i(r(u,f),r(c,f)))return!1}return!0}}}().intersect;var n={"hide-overlap":function(e){for(var n=e.slice(),r=0;r<n.length;r++){var i=n[r];if(i.visible)for(var o=r+1;o<n.length;o++){var a=n[o];i!==a&&a.visible&&t(i,a)&&(a.visible=!1)}}return n}};try{var r=JSON.parse(e.data);if(!r||!r.type||!n[r.type])return;var i=r.type,o=r.items,a=n[i](o);self.postMessage(a)}catch(e){throw e}}.toString(),"\n"),jCe=function(e){for(var t=e.slice(),n=0;n<t.length;n++){var r=t[n];if(r.visible)for(var i=n+1;i<t.length;i++){var o=t[i];r!==o&&o.visible&&MCe(r,o)&&(o.visible=!1)}}return t},DCe=new Map,TCe=function(e){if("undefined"!=typeof window){var t;try{t=new Blob([e.toString()],{type:"application/javascript"})}catch(n){(t=new window.BlobBuilder).append(e.toString()),t=t.getBlob()}return new RCe(URL.createObjectURL(t))}}(ACe);var FCe,NCe={"#5B8FF9":!0};function LCe(e,t,n){return!!e.getAdjust("stack")||t.every((function(t,r){var i=n[r];return function(e,t,n){var r=e.coordinate,i=Xwe(t),o=vye.fromObject(i.getCanvasBBox()),a=vye.fromObject(n.getBBox());return r.isTransposed?a.height>=o.height:a.width>=o.width}(e,t,i)}))}function BCe(e,t,n){return e.some((function(e){return n(e,t)}))}function VCe(e,t){return BCe(e,t,(function(e,t){var n,r,i,o=Xwe(e),a=Xwe(t);return n=o.getCanvasBBox(),r=a.getCanvasBBox(),i=2,Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}function zCe(e,t,n){return e.some((function(e){return n(e,t)}))}function HCe(e,t){return zCe(e,t,(function(e,t){var n,r,i,o=Xwe(e),a=Xwe(t);return n=o.getCanvasBBox(),r=a.getCanvasBBox(),i=2,Math.max(0,Math.min(n.x+n.width+i,r.x+r.width+i)-Math.max(n.x-i,r.x-i))*Math.max(0,Math.min(n.y+n.height+i,r.y+r.height+i)-Math.max(n.y-i,r.y-i))>0}))}var WCe=Vle((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,o=t.fontStyle,a=t.fontVariant,l=(FCe||(FCe=document.createElement("canvas").getContext("2d")),FCe);return l.font=[o,a,i,"".concat(n,"px"),r].join(" "),l.measureText(nle(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Aae([e],Mae(xle(t)),!1).join("")}));function UCe(e,t,n,r,i){var o,a,l=n.start,u=n.end,c=n.getWidth(),s=n.getHeight();"y"===i?(o=l.x+c/2,a=r.y<l.y?r.y:l.y):"x"===i?(o=r.x>l.x?r.x:l.x,a=l.y+s/2):"xy"===i&&(n.isPolar?(o=n.getCenter().x,a=n.getCenter().y):(o=(l.x+u.x)/2,a=(l.y+u.y)/2));var d=function(e,t,n){var r,i=Mae(t,2),o=i[0],a=i[1];return e.applyToMatrix([o,a,1]),"x"===n?(e.setMatrix(ise(e.getMatrix(),[["t",-o,-a],["s",.01,1],["t",o,a]])),r=ise(e.getMatrix(),[["t",-o,-a],["s",100,1],["t",o,a]])):"y"===n?(e.setMatrix(ise(e.getMatrix(),[["t",-o,-a],["s",1,.01],["t",o,a]])),r=ise(e.getMatrix(),[["t",-o,-a],["s",1,100],["t",o,a]])):"xy"===n&&(e.setMatrix(ise(e.getMatrix(),[["t",-o,-a],["s",.01,.01],["t",o,a]])),r=ise(e.getMatrix(),[["t",-o,-a],["s",100,100],["t",o,a]])),r}(e,[o,a],i);e.animate({matrix:d},t)}function GCe(e,t){var n,r=K_e(e,t),i=r.startAngle,o=r.endAngle;return!gle(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!gle(o,.5*-Math.PI)&&o<.5*-Math.PI&&(o+=2*Math.PI),0===t[5]&&(i=(n=Mae([o,i],2))[0],o=n[1]),gle(i,1.5*Math.PI)&&(i=-.5*Math.PI),gle(o,-.5*Math.PI)&&!gle(i,o)&&(o=1.5*Math.PI),{startAngle:i,endAngle:o}}function YCe(e){var t;return"M"===e[0]||"L"===e[0]?t=[e[1],e[2]]:"a"!==e[0]&&"A"!==e[0]&&"C"!==e[0]||(t=[e[e.length-2],e[e.length-1]]),t}function $Ce(e){var t,n,r,i=e.filter((function(e){return"A"===e[0]||"a"===e[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var o=i[0],a=i.length>1?i[1]:i[0],l=e.indexOf(o),u=e.indexOf(a),c=YCe(e[l-1]),s=YCe(e[u-1]),d=GCe(c,o),f=d.startAngle,h=d.endAngle,p=GCe(s,a),v=p.startAngle,g=p.endAngle;gle(f,v)&&gle(h,g)?(n=f,r=h):(n=Math.min(f,v),r=Math.max(h,g));var m=o[1],y=i[i.length-1][1];return m<y?(m=(t=Mae([y,m],2))[0],y=t[1]):m===y&&(y=0),{startAngle:n,endAngle:r,radius:m,innerRadius:y}}function qCe(e,t,n){if(e.isGroup())Hae(e.getChildren(),(function(e){qCe(e,t,n)}));else{var r=e.getBBox(),i=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2;if(e.applyToMatrix([i,o,1]),"zoomIn"===n){var a=ise(e.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]]);e.setMatrix(a),e.animate({matrix:ise(e.getMatrix(),[["t",-i,-o],["s",100,100],["t",i,o]])},t)}else e.animate({matrix:ise(e.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]])},Sae(Sae({},t),{callback:function(){e.remove(!0),Lae(t.callback)&&t.callback()}}))}}function KCe(e){return[due.TOP,due.BOTTOM].includes(e)?{offsetX:0,offsetY:e===due.TOP?-8:8,style:{textAlign:"center",textBaseline:e===due.TOP?"bottom":"top"}}:[due.LEFT,due.RIGHT].includes(e)?{offsetX:e===due.LEFT?-8:8,offsetY:0,style:{textAlign:e===due.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function XCe(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}var JCe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.getRegion=function(e,t){var n=2*Math.PI/e,r=-1*Math.PI/2+n*t,i=.5/(1+1/Math.sin(n/2)),o=XCe({x:.5,y:.5},.5-i,r),a=5*Math.PI/4,l=1*Math.PI/4;return{start:XCe(o,i,a),end:XCe(o,i,l)}},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg,r=n.fields,i=n.type,o=Mae(r,1)[0];if(!o)throw new Error("No `fields` specified!");var a=this.getFieldValues(e,o),l=a.length,u=[];return a.forEach((function(n,r){var c=[{field:o,value:n,values:a}],s=Tae(e,t.getFacetDataFilter(c)),d={type:i,data:s,region:t.getRegion(l,r),columnValue:n,columnField:o,columnIndex:r,columnValuesLength:l,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};u.push(d)})),u},t.prototype.getXAxisOption=function(e,t,n,r){return n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Kle(e.cfg.title,"formatter"),o=Hle({position:["50%","0%"],content:i?i(n):n},KCe(due.TOP),e.cfg.title);r.annotation().text(o)}))},t}(Dye),ZCe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){var t=this,n=this.cfg.fields,r=this.cfg.cols,i=Mae(n,1)[0];if(!i)throw new Error("No `fields` specified!");var o=this.getFieldValues(e,i),a=o.length;r=r||a;var l=this.getPageCount(a,r),u=[];return o.forEach((function(n,c){var s=t.getRowCol(c,r),d=s.row,f=s.col,h=[{field:i,value:n,values:o}],p=Tae(e,t.getFacetDataFilter(h)),v={type:t.cfg.type,data:p,region:t.getRegion(l,r,f,d),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:f,rowIndex:d,columnValuesLength:r,rowValuesLength:l,total:a};u.push(v)})),u},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?Sae(Sae({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Sae(Sae({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Kle(e.cfg.title,"formatter"),o=Hle({position:["50%","0%"],content:i?i(n):n},KCe(due.TOP),e.cfg.title);r.annotation().text(o)}))},t.prototype.getPageCount=function(e,t){return Math.floor((e+t-1)/t)},t.prototype.getRowCol=function(e,t){return{row:Math.floor(e/t),col:e%t}},t}(Dye),QCe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Sae({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Sae({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.generateFacets=function(e){for(var t=this.cfg,n=t.fields,r=t.type,i=n.length,o=i,a=[],l=0;l<o;l++)for(var u=n[l],c=0;c<i;c++){var s=n[c],d={type:r,data:e,region:this.getRegion(i,o,l,c),columnValue:u,rowValue:s,columnField:u,rowField:s,columnIndex:l,rowIndex:c,columnValuesLength:o,rowValuesLength:i};a.push(d)}return a},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Sae(Sae({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Sae(Sae({},n),{title:null,label:null}):n},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,o=t.columnValuesLength;t.rowValuesLength;var a=t.columnValue,l=t.rowValue,u=t.view;if(0===i){var c=Kle(e.cfg.columnTitle,"formatter"),s=Hle({position:["50%","0%"],content:c?c(a):a},KCe(due.TOP),e.cfg.columnTitle);u.annotation().text(s)}if(r===o-1){c=Kle(e.cfg.rowTitle,"formatter"),s=Hle({position:["100%","50%"],content:c?c(l):l},KCe(due.RIGHT),e.cfg.rowTitle);u.annotation().text(s)}}))},t}(Dye),eSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this),transpose:!1})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.generateFacets=function(e){var t,n,r=this,i=Mae(this.cfg.fields,1)[0],o=[],a=1,l=1,u=[""],c=[""];return this.cfg.transpose?(t=i,u=this.getFieldValues(e,t).slice(0,2),a=u.length):(n=i,c=this.getFieldValues(e,n).slice(0,2),l=c.length),u.forEach((function(i,s){c.forEach((function(d,f){var h=[{field:t,value:i,values:u},{field:n,value:d,values:c}],p=Tae(e,r.getFacetDataFilter(h)),v={type:r.cfg.type,data:p,region:r.getRegion(l,a,s,f),columnValue:i,rowValue:d,columnField:t,rowField:n,columnIndex:s,rowIndex:f,columnValuesLength:a,rowValuesLength:l};o.push(v)}))})),o},t.prototype.getXAxisOption=function(e,t,n,r){return 1===r.columnIndex||1===r.rowIndex?Sae(Sae({},n),{label:null,title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return n},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t,n){var r=t.columnValue,i=t.rowValue,o=t.view,a=Kle(e.cfg.title,"formatter");if(e.cfg.transpose){var l=Hle({position:["50%","0%"],content:a?a(r):r},KCe(due.TOP),e.cfg.title);o.annotation().text(l)}else{l=Hle({position:["100%","50%"],content:a?a(i):i},KCe(due.RIGHT),e.cfg.title);o.annotation().text(l)}}))},t}(Dye),tSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Sae({},e.prototype.getDefaultTitleCfg.call(this)),rowTitle:Sae({},e.prototype.getDefaultTitleCfg.call(this))})},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.generateFacets=function(e){var t=this,n=Mae(this.cfg.fields,2),r=n[0],i=n[1],o=[],a=1,l=1,u=[""],c=[""];return r&&(u=this.getFieldValues(e,r),a=u.length),i&&(c=this.getFieldValues(e,i),l=c.length),u.forEach((function(n,s){c.forEach((function(d,f){var h=[{field:r,value:n,values:u},{field:i,value:d,values:c}],p=Tae(e,t.getFacetDataFilter(h)),v={type:t.cfg.type,data:p,region:t.getRegion(l,a,s,f),columnValue:n,rowValue:d,columnField:r,rowField:i,columnIndex:s,rowIndex:f,columnValuesLength:a,rowValuesLength:l};o.push(v)}))})),o},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t,n){var r=t.columnIndex,i=t.rowIndex,o=t.columnValuesLength,a=t.columnValue,l=t.rowValue,u=t.view;if(0===i){var c=Kle(e.cfg.columnTitle,"formatter"),s=Hle({position:["50%","0%"],content:c?c(a):a},KCe(due.TOP),e.cfg.columnTitle);u.annotation().text(s)}if(r===o-1){c=Kle(e.cfg.rowTitle,"formatter"),s=Hle({position:["100%","50%"],content:c?c(l):l},KCe(due.RIGHT),e.cfg.rowTitle);u.annotation().text(s)}}))},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Sae(Sae({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?Sae(Sae({},n),{title:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.columnIndex?Sae(Sae({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?Sae(Sae({},n),{title:null}):n},t}(Dye),nSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return Cae(t,e),t.prototype.afterEachView=function(e,t){this.processAxis(e,t)},t.prototype.beforeEachView=function(e,t){},t.prototype.init=function(){e.prototype.init.call(this),this.view.on(gue.AFTER_RENDER,this.afterChartRender)},t.prototype.getDefaultCfg=function(){return Hle({},e.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:e.prototype.getDefaultTitleCfg.call(this)})},t.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},t.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach((function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)}))},t.prototype.getRegion=function(e,t,n,r){var i=1/t,o=1/e,a={x:i*n,y:o*r};return{start:a,end:{x:a.x+i,y:a.y+2*o/3}}},t.prototype.forceColIndex=function(e){var t,n,r=this,i=[],o=0;e.forEach((function(e){r.isLeaf(e)&&(i.push(e),e.columnIndex=o,o++)})),i.forEach((function(e){e.columnValuesLength=i.length}));for(var a=this.cfg.fields.length-1;a>=0;a--){var l=this.getFacetsByLevel(e,a);try{for(var u=(t=void 0,Pae(l)),c=u.next();!c.done;c=u.next()){var s=c.value;this.isLeaf(s)||(s.originColIndex=s.columnIndex,s.columnIndex=this.getRegionIndex(s.children),s.columnValuesLength=i.length)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}},t.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach((function(e){e.rowIndex===t&&n.push(e)})),n},t.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},t.prototype.isLeaf=function(e){return!e.children||!e.children.length},t.prototype.getRows=function(){return this.cfg.fields.length+1},t.prototype.getChildFacets=function(e,t,n){var r=this,i=this.cfg.fields;if(!(i.length<t)){var o=[],a=i[t-1],l=this.getFieldValues(e,a);return l.forEach((function(i,u){var c=[{field:a,value:i,values:l}],s=e.filter(r.getFacetDataFilter(c));if(s.length){var d={type:r.cfg.type,data:s,region:null,columnValue:i,rowValue:"",columnField:a,rowField:"",columnIndex:u,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:t,children:r.getChildFacets(s,t+1,n)};o.push(d),n.push(d)}})),o}},t.prototype.render=function(){e.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},t.prototype.renderTitle=function(){var e=this;Hae(this.facets,(function(t){var n=t.columnValue,r=t.view,i=Kle(e.cfg.title,"formatter"),o=Hle({position:["50%","0%"],content:i?i(n):n},KCe(due.TOP),e.cfg.title);r.annotation().text(o)}))},t.prototype.drawLines=function(e){var t=this;e.forEach((function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}}))},t.prototype.addFacetLines=function(e,t){var n=this,r=e.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};t.forEach((function(e){var t=e.view.coordinateBBox,r={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},o={x:i.x,y:i.y+(r.y-i.y)/2},a={x:r.x,y:o.y};n.drawLine([i,o,a,r])}))},t.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},t.prototype.drawLine=function(e){var t=this.getPath(e),n=this.cfg.line.style;this.container.addShape("path",{attrs:Nle({path:t},n)})},t.prototype.getXAxisOption=function(e,t,n,r){return r.rowIndex!==r.rowValuesLength-1?Sae(Sae({},n),{title:null,label:null}):n},t.prototype.getYAxisOption=function(e,t,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?Sae(Sae({},n),{title:null,label:null}):n},t}(Dye);function rSe(e){var t=Aae([],Mae(e),!1);t.sort((function(e,t){return e-t}));var n=t.length;return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2}function iSe(e,t){if(!t)return null;var n,r,i;switch(e){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=t.isCategory?rSe(t.values.map((function(e,t){return t}))):rSe(t.values);break;case"mean":n=t.isCategory?(t.values.length-1)/2:(r=t.values,i=ele(r,(function(e,t){return e+(isNaN(t)||!ple(t)?0:t)}),0),0===r.length?0:i/r.length);break;case"min":n=t.isCategory?0:t[e];break;case"max":n=t.isCategory?t.values.length-1:t[e];break;default:n=e}return t.scale(n)}var oSe=["regionFilter","shape"],aSe=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(cue.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(cue.BG).addGroup(),n.option=[],n}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.layout=function(){this.update()},t.prototype.render=function(){},t.prototype.update=function(){var e=this;this.onAfterRender((function(){var t=new Map;Hae(e.option,(function(n){if(Dae(oSe,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),e.cache=e.syncCache(t)}));var t=new Map;Hae(this.option,(function(n){if(!Dae(oSe,n.type)){var r=e.updateOrCreate(n);r&&t.set(e.getCacheKey(n),r)}})),this.cache=this.syncCache(t)},t.prototype.clear=function(t){void 0===t&&(t=!1),e.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},t.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.clearComponents=function(){this.getComponents().forEach((function(e){e.component.destroy()})),this.cache.clear()},t.prototype.onAfterRender=function(e){var t=!1;this.view.getOptions().animate&&this.view.geometries.forEach((function(n){n.animateOption&&(n.once(yue.AFTER_DRAW_ANIMATE,(function(){e()})),t=!0)})),t||this.view.getRootView().once(gue.AFTER_RENDER,(function(){e()}))},t.prototype.createAnnotation=function(e){var t=e.type,n=Lge[Ole(t)];if(n){var r=this.getAnnotationTheme(t),i=this.getAnnotationCfg(t,e,r);return i?{component:new n(i),layer:this.isTop(i)?cue.FORE:cue.BG,direction:due.NONE,type:hue.ANNOTATION,extra:e}:null}},t.prototype.annotation=function(e){this.option.push(e)},t.prototype.arc=function(e){return this.annotation(Sae({type:"arc"},e)),this},t.prototype.image=function(e){return this.annotation(Sae({type:"image"},e)),this},t.prototype.line=function(e){return this.annotation(Sae({type:"line"},e)),this},t.prototype.region=function(e){return this.annotation(Sae({type:"region"},e)),this},t.prototype.text=function(e){return this.annotation(Sae({type:"text"},e)),this},t.prototype.dataMarker=function(e){return this.annotation(Sae({type:"dataMarker"},e)),this},t.prototype.dataRegion=function(e){this.annotation(Sae({type:"dataRegion"},e))},t.prototype.regionFilter=function(e){this.annotation(Sae({type:"regionFilter"},e))},t.prototype.shape=function(e){this.annotation(Sae({type:"shape"},e))},t.prototype.html=function(e){this.annotation(Sae({type:"html"},e))},t.prototype.parsePosition=function(e){var t,n,r=this.view.getXScale(),i=this.view.getScalesByDim("y"),o=Lae(e)?e.call(null,r,i):e,a=0,l=0;if(Vae(o)){var u=Mae(o,2),c=u[0],s=u[1];if(nle(c)&&-1!==c.indexOf("%")&&!isNaN(c.slice(0,-1)))return this.parsePercentPosition(o);a=iSe(c,r),l=iSe(s,Object.values(i)[0])}else if(!Bae(o))try{for(var d=Pae(Wae(o)),f=d.next();!f.done;f=d.next()){var h=f.value,p=o[h];h===r.field&&(a=iSe(p,r)),i[h]&&(l=iSe(p,i[h]))}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return isNaN(a)||isNaN(l)?null:this.view.getCoordinate().convert({x:a,y:l})},t.prototype.getRegionPoints=function(e,t){var n,r=this,i=this.view.getXScale(),o=this.view.getScalesByDim("y"),a=Object.values(o)[0],l=i.field,u=this.view.getData(),c=Vae(e)?e[0]:e[l],s=Vae(t)?t[0]:t[l],d=[];return Hae(u,(function(e,t){if(e[l]===c&&(n=t),t>=n){var i=r.parsePosition([e[l],e[a.field]]);i&&d.push(i)}if(e[l]===s)return!1})),d},t.prototype.parsePercentPosition=function(e){var t=parseFloat(e[0])/100,n=parseFloat(e[1])/100,r=this.view.getCoordinate(),i=r.start,o=r.end,a=Math.min(i.x,o.x),l=Math.min(i.y,o.y);return{x:r.getWidth()*t+a,y:r.getHeight()*n+l}},t.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),t=e.start,n=e.end,r=e.getWidth(),i=e.getHeight(),o={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y)};return{x:o.x,y:o.y,minX:o.x,minY:o.y,maxX:o.x+r,maxY:o.y+i,width:r,height:i}},t.prototype.getAnnotationCfg=function(e,t,n){var r=this,i=this.view.getCoordinate(),o=this.view.getCanvas(),a={};if(Bae(t))return null;var l=t.start,u=t.end,c=t.position,s=this.parsePosition(l),d=this.parsePosition(u),f=this.parsePosition(c);if(!(!["arc","image","line","region","regionFilter"].includes(e)||s&&d))return null;if(["text","dataMarker","html"].includes(e)&&!f)return null;if("arc"===e){var h=t;h.start,h.end;var p=Oae(h,["start","end"]),v=yye(i,s),g=yye(i,d);v>g&&(g=2*Math.PI+g),a=Sae(Sae({},p),{center:i.getCenter(),radius:mye(i,s),startAngle:v,endAngle:g})}else if("image"===e){var m=t;m.start,m.end;p=Oae(m,["start","end"]);a=Sae(Sae({},p),{start:s,end:d,src:t.src})}else if("line"===e){var y=t;y.start,y.end;p=Oae(y,["start","end"]);a=Sae(Sae({},p),{start:s,end:d,text:Kle(t,"text",null)})}else if("region"===e){var b=t;b.start,b.end;p=Oae(b,["start","end"]);a=Sae(Sae({},p),{start:s,end:d})}else if("text"===e){var w=this.view.getData(),_=t;_.position;var x=_.content,k=(p=Oae(_,["position","content"]),x);Lae(x)&&(k=x(w)),a=Sae(Sae(Sae({},f),p),{content:k})}else if("dataMarker"===e){var C=t;C.position;var S=C.point,O=C.line,E=C.text,I=C.autoAdjust,P=C.direction;p=Oae(C,["position","point","line","text","autoAdjust","direction"]);a=Sae(Sae(Sae({},p),f),{coordinateBBox:this.getCoordinateBBox(),point:S,line:O,text:E,autoAdjust:I,direction:P})}else if("dataRegion"===e){var M=t,R=M.start,A=M.end,j=M.region,D=(E=M.text,M.lineLength);p=Oae(M,["start","end","region","text","lineLength"]);a=Sae(Sae({},p),{points:this.getRegionPoints(R,A),region:j,text:E,lineLength:D})}else if("regionFilter"===e){var T=t;T.start,T.end;var F=T.apply,N=T.color,L=(p=Oae(T,["start","end","apply","color"]),this.view.geometries),B=[],V=function(e){e&&(e.isGroup()?e.getChildren().forEach((function(e){return V(e)})):B.push(e))};Hae(L,(function(e){F?Dae(F,e.type)&&Hae(e.elements,(function(e){V(e.shape)})):Hae(e.elements,(function(e){V(e.shape)}))})),a=Sae(Sae({},p),{color:N,shapes:B,start:s,end:d})}else if("shape"===e){var z=t,H=z.render,W=Oae(z,["render"]);a=Sae(Sae({},W),{render:function(e){if(Lae(t.render))return H(e,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===e){var U=t,G=U.html;U.position;W=Oae(U,["html","position"]);a=Sae(Sae(Sae({},W),f),{parent:o.get("el").parentNode,html:function(e){return Lae(G)?G(e,r.view):G}})}var Y=Hle({},n,Sae(Sae({},a),{top:t.top,style:t.style,offsetX:t.offsetX,offsetY:t.offsetY}));return"html"!==e&&(Y.container=this.getComponentContainer(Y)),Y.animate=this.view.getOptions().animate&&Y.animate&&Kle(t,"animate",Y.animate),Y.animateOption=Hle({},Owe,Y.animateOption,t.animateOption),Y},t.prototype.isTop=function(e){return Kle(e,"top",!0)},t.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},t.prototype.getAnnotationTheme=function(e){return Kle(this.view.getTheme(),["components","annotation",e],{})},t.prototype.updateOrCreate=function(e){var t=this.cache.get(this.getCacheKey(e));if(t){var n=e.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,e,r);i&&hye(i,["container"]),t.component.update(Sae(Sae({},i||{}),{visible:!!i})),Dae(oSe,e.type)&&t.component.render()}else(t=this.createAnnotation(e))&&(t.component.init(),Dae(oSe,e.type)&&t.component.render());return t},t.prototype.syncCache=function(e){var t=this,n=new Map(this.cache);return e.forEach((function(e,t){n.set(t,e)})),n.forEach((function(e,r){$ae(t.option,(function(e){return r===t.getCacheKey(e)}))||(e.component.destroy(),n.delete(r))})),n},t.prototype.getCacheKey=function(e){return e},t}(_we);function lSe(e,t){var n=Hle({},Kle(e,["components","axis","common"]),Kle(e,["components","axis",t]));return Kle(n,["grid"],{})}function uSe(e,t,n,r){var i=[],o=t.getTicks();return e.isPolar&&o.push({value:1,text:"",tickValue:""}),o.reduce((function(t,o,a){var l=o.value;if(r)i.push({points:[e.convert("y"===n?{x:0,y:l}:{x:l,y:0}),e.convert("y"===n?{x:1,y:l}:{x:l,y:1})]});else if(a){var u=(t.value+l)/2;i.push({points:[e.convert("y"===n?{x:0,y:u}:{x:u,y:0}),e.convert("y"===n?{x:1,y:u}:{x:u,y:1})]})}return o}),o[0]),i}function cSe(e,t,n,r,i){var o=t.values.length,a=[],l=n.getTicks();return l.reduce((function(t,n){var l=t?t.value:n.value,u=n.value,c=(l+u)/2;return"x"===i?a.push({points:[e.convert({x:r?u:c,y:0}),e.convert({x:r?u:c,y:1})]}):a.push({points:$le(Array(o+1),(function(t,n){return e.convert({x:n/o,y:r?u:c})}))}),n}),l[0]),a}function sSe(e,t){var n=Kle(t,"grid");if(null===n)return!1;var r=Kle(e,"grid");return!(void 0===n&&null===r)}var dSe=["container"],fSe=Sae(Sae({},Owe),{appear:null}),hSe=function(e){function t(t){var n=e.call(this,t)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(cue.BG).addGroup(),n.gridForeContainer=n.view.getLayer(cue.FORE).addGroup(),n.axisContainer=n.view.getLayer(cue.BG).addGroup(),n.axisForeContainer=n.view.getLayer(cue.FORE).addGroup(),n}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this,t=this.view.getCoordinate();Hae(this.getComponents(),(function(n){var r,i=n.component,o=n.direction,a=n.type,l=n.extra,u=l.dim,c=l.scale,s=l.alignTick;if(a===hue.AXIS)t.isPolar?"x"===u?r=t.isTransposed?Sye(t,o):Mye(t):"y"===u&&(r=t.isTransposed?Mye(t):Sye(t,o)):r=Sye(t,o);else if(a===hue.GRID)if(t.isPolar){r={items:t.isTransposed?"x"===u?cSe(t,e.view.getYScales()[0],c,s,u):uSe(t,c,u,s):"x"===u?uSe(t,c,u,s):cSe(t,e.view.getXScale(),c,s,u),center:e.view.getCoordinate().getCenter()}}else r={items:uSe(t,c,u,s)};i.update(r)}))},t.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach((function(n,r){e.has(r)?t.set(r,n):n.component.destroy()})),this.cache=t},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},t.prototype.getComponents=function(){var e=[];return this.cache.forEach((function(t){e.push(t)})),e},t.prototype.updateXAxes=function(e){var t=this.view.getXScale();if(t&&!t.isIdentity){var n=Rye(this.option,t.field);if(!1!==n){var r=Aye(n,due.BOTTOM),i=cue.BG,o="x",a=this.view.getCoordinate(),l=this.getId("axis",t.field),u=this.getId("grid",t.field);if(a.isRect){if(c=this.cache.get(l))hye(d=this.getLineAxisCfg(t,n,r),dSe),c.component.update(d),e.set(l,c);else c=this.createLineAxis(t,n,i,r,o),this.cache.set(l,c),e.set(l,c);if(s=this.cache.get(u))hye(d=this.getLineGridCfg(t,n,r,o),dSe),s.component.update(d),e.set(u,s);else(s=this.createLineGrid(t,n,i,r,o))&&(this.cache.set(u,s),e.set(u,s))}else if(a.isPolar){var c,s;if(c=this.cache.get(l)){hye(d=a.isTransposed?this.getLineAxisCfg(t,n,due.RADIUS):this.getCircleAxisCfg(t,n,r),dSe),c.component.update(d),e.set(l,c)}else{if(a.isTransposed){if(Dle(n))return;c=this.createLineAxis(t,n,i,due.RADIUS,o)}else c=this.createCircleAxis(t,n,i,r,o);this.cache.set(l,c),e.set(l,c)}if(s=this.cache.get(u)){var d;hye(d=a.isTransposed?this.getCircleGridCfg(t,n,due.RADIUS,o):this.getLineGridCfg(t,n,due.CIRCLE,o),dSe),s.component.update(d),e.set(u,s)}else{if(a.isTransposed){if(Dle(n))return;s=this.createCircleGrid(t,n,i,due.RADIUS,o)}else s=this.createLineGrid(t,n,i,due.CIRCLE,o);s&&(this.cache.set(u,s),e.set(u,s))}}}}},t.prototype.updateYAxes=function(e){var t=this;Hae(this.view.getYScales(),(function(n,r){if(n&&!n.isIdentity){var i=n.field,o=Rye(t.option,i);if(!1!==o){var a=cue.BG,l="y",u=t.getId("axis",i),c=t.getId("grid",i),s=t.view.getCoordinate();if(s.isRect){var d=Aye(o,0===r?due.LEFT:due.RIGHT);if(f=t.cache.get(u))hye(p=t.getLineAxisCfg(n,o,d),dSe),f.component.update(p),e.set(u,f);else f=t.createLineAxis(n,o,a,d,l),t.cache.set(u,f),e.set(u,f);if(h=t.cache.get(c))hye(p=t.getLineGridCfg(n,o,d,l),dSe),h.component.update(p),e.set(c,h);else(h=t.createLineGrid(n,o,a,d,l))&&(t.cache.set(c,h),e.set(c,h))}else if(s.isPolar){var f,h;if(f=t.cache.get(u)){hye(p=s.isTransposed?t.getCircleAxisCfg(n,o,due.CIRCLE):t.getLineAxisCfg(n,o,due.RADIUS),dSe),f.component.update(p),e.set(u,f)}else{if(s.isTransposed){if(Dle(o))return;f=t.createCircleAxis(n,o,a,due.CIRCLE,l)}else f=t.createLineAxis(n,o,a,due.RADIUS,l);t.cache.set(u,f),e.set(u,f)}if(h=t.cache.get(c)){var p;hye(p=s.isTransposed?t.getLineGridCfg(n,o,due.CIRCLE,l):t.getCircleGridCfg(n,o,due.RADIUS,l),dSe),h.component.update(p),e.set(c,h)}else{if(s.isTransposed){if(Dle(o))return;h=t.createLineGrid(n,o,a,due.CIRCLE,l)}else h=t.createCircleGrid(n,o,a,due.RADIUS,l);h&&(t.cache.set(c,h),e.set(c,h))}}}}}))},t.prototype.createLineAxis=function(e,t,n,r,i){var o={component:new Zme(this.getLineAxisCfg(e,t,r)),layer:n,direction:r===due.RADIUS?due.NONE:r,type:hue.AXIS,extra:{dim:i,scale:e}};return o.component.set("field",e.field),o.component.init(),o},t.prototype.createLineGrid=function(e,t,n,r,i){var o=this.getLineGridCfg(e,t,r,i);if(o){var a={component:new eye(o),layer:n,direction:due.NONE,type:hue.GRID,extra:{dim:i,scale:e,alignTick:Kle(o,"alignTick",!0)}};return a.component.init(),a}},t.prototype.createCircleAxis=function(e,t,n,r,i){var o={component:new Qme(this.getCircleAxisCfg(e,t,r)),layer:n,direction:r,type:hue.AXIS,extra:{dim:i,scale:e}};return o.component.set("field",e.field),o.component.init(),o},t.prototype.createCircleGrid=function(e,t,n,r,i){var o=this.getCircleGridCfg(e,t,r,i);if(o){var a={component:new tye(o),layer:n,direction:due.NONE,type:hue.GRID,extra:{dim:i,scale:e,alignTick:Kle(o,"alignTick",!0)}};return a.component.init(),a}},t.prototype.getLineAxisCfg=function(e,t,n){var r=Kle(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=Sye(i,n),a=jye(e,t),l=Iye(this.view.getTheme(),n),u=Kle(t,["title"])?Hle({title:{style:{text:a}}},{title:Pye(this.view.getTheme(),n,t.title)},t):t,c=Hle(Sae(Sae({container:r},o),{ticks:e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}})),verticalFactor:i.isPolar?-1*Eye(o,i.getCenter()):Eye(o,i.getCenter()),theme:l}),l,u),s=this.getAnimateCfg(c),d=s.animate,f=s.animateOption;c.animateOption=f,c.animate=d;var h=Oye(o),p=Kle(c,"verticalLimitLength",h?1/3:.5);if(p<=1){var v=this.view.getCanvas().get("width"),g=this.view.getCanvas().get("height");c.verticalLimitLength=p*(h?v:g)}return c},t.prototype.getLineGridCfg=function(e,t,n,r){if(sSe(Iye(this.view.getTheme(),n),t)){var i=lSe(this.view.getTheme(),n),o=Hle({container:Kle(t,["top"])?this.gridForeContainer:this.gridContainer},i,Kle(t,"grid"),this.getAnimateCfg(t));return o.items=uSe(this.view.getCoordinate(),e,r,Kle(o,"alignTick",!0)),o}},t.prototype.getCircleAxisCfg=function(e,t,n){var r=Kle(t,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=e.getTicks().map((function(e){return{id:"".concat(e.tickValue),name:e.text,value:e.value}}));e.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||o.length&&(o[o.length-1].name="");var a=jye(e,t),l=Iye(this.view.getTheme(),due.CIRCLE),u=Kle(t,["title"])?Hle({title:{style:{text:a}}},{title:Pye(this.view.getTheme(),n,t.title)},t):t,c=Hle(Sae(Sae({container:r},Mye(this.view.getCoordinate())),{ticks:o,verticalFactor:1,theme:l}),l,u),s=this.getAnimateCfg(c),d=s.animate,f=s.animateOption;return c.animate=d,c.animateOption=f,c},t.prototype.getCircleGridCfg=function(e,t,n,r){if(sSe(Iye(this.view.getTheme(),n),t)){var i=lSe(this.view.getTheme(),due.RADIUS),o=Hle({container:Kle(t,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,Kle(t,"grid"),this.getAnimateCfg(t)),a=Kle(o,"alignTick",!0),l="x"===r?this.view.getYScales()[0]:this.view.getXScale();return o.items=cSe(this.view.getCoordinate(),l,e,a,r),o}},t.prototype.getId=function(e,t){var n=this.view.getCoordinate();return"".concat(e,"-").concat(t,"-").concat(n.type)},t.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&Kle(e,"animate"),animateOption:e&&e.animateOption?Hle({},fSe,e.animateOption):fSe}},t}(_we);function pSe(e,t,n){return n===due.TOP?[e.minX+e.width/2-t.width/2,e.minY]:n===due.BOTTOM?[e.minX+e.width/2-t.width/2,e.maxY-t.height]:n===due.LEFT?[e.minX,e.minY+e.height/2-t.height/2]:n===due.RIGHT?[e.maxX-t.width,e.minY+e.height/2-t.height/2]:n===due.TOP_LEFT||n===due.LEFT_TOP?[e.tl.x,e.tl.y]:n===due.TOP_RIGHT||n===due.RIGHT_TOP?[e.tr.x-t.width,e.tr.y]:n===due.BOTTOM_LEFT||n===due.LEFT_BOTTOM?[e.bl.x,e.bl.y-t.height]:n===due.BOTTOM_RIGHT||n===due.RIGHT_BOTTOM?[e.br.x-t.width,e.br.y-t.height]:[0,0]}function vSe(e,t){return Ple(e)?!1!==e&&{}:Kle(e,[t],e)}function gSe(e){return Kle(e,"position",due.BOTTOM)}var mSe=function(e){function t(t){var n=e.call(this,t)||this;return n.container=n.view.getLayer(cue.FORE).addGroup(),n}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.render=function(){this.update()},t.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,Hae(this.components,(function(t){var n=t.component,r=t.direction,i=l_e(r),o=n.get("maxWidthRatio"),a=n.get("maxHeightRatio"),l=e.getCategoryLegendSizeCfg(i,o,a),u=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(l.maxWidth,u||0),maxHeight:Math.min(l.maxHeight,c||0)});var s=n.get("padding"),d=n.getLayoutBBox(),f=new vye(d.x,d.y,d.width,d.height).expand(s),h=Mae(pSe(e.view.viewBBox,f,r),2),p=h[0],v=h[1],g=Mae(pSe(e.layoutBBox,f,r),2),m=g[0],y=g[1],b=0,w=0;r.startsWith("top")||r.startsWith("bottom")?(b=p,w=y):(b=m,w=v),n.setLocation({x:b+s[3],y:w+s[0]}),e.layoutBBox=e.layoutBBox.cut(f,r)}))},t.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var t={};if(Kle(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);hye(i,["container"]),r.component.update(i),t[n]=!0}else{var o=this.createCustomLegend(void 0,void 0,void 0,this.option);if(o){o.init();var a=cue.FORE,l=gSe(this.option);this.components.push({id:n,component:o,layer:a,direction:l,type:hue.LEGEND,extra:void 0}),t[n]=!0}}}else this.loopLegends((function(n,r,i){var o=e.getId(i.field),a=e.getComponentById(o);if(a){var l=void 0,u=vSe(e.option,i.field);!1!==u&&(Kle(u,"custom")?l=e.getCategoryCfg(n,r,i,u,!0):i.isLinear?l=e.getContinuousCfg(n,r,i,u):i.isCategory&&(l=e.getCategoryCfg(n,r,i,u))),l&&(hye(l,["container"]),a.direction=gSe(u),a.component.update(l),t[o]=!0)}else{var c=e.createFieldLegend(n,r,i);c&&(c.component.init(),e.components.push(c),t[o]=!0)}}));var u=[];Hae(this.getComponents(),(function(e){t[e.id]?u.push(e):e.component.destroy()})),this.components=u},t.prototype.clear=function(){e.prototype.clear.call(this),this.container.clear()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.container.remove(!0)},t.prototype.getGeometries=function(e){var t=this,n=e.geometries;return Hae(e.views,(function(e){n=n.concat(t.getGeometries(e))})),n},t.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var t=this.getGeometries(this.view),n={};Hae(t,(function(t){Hae(t.getGroupAttributes(),(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(e(t,r,i),n[i.field]=!0)}))}))}},t.prototype.createFieldLegend=function(e,t,n){var r,i=vSe(this.option,n.field),o=cue.FORE,a=gSe(i);if(!1!==i&&(Kle(i,"custom")?r=this.createCustomLegend(e,t,n,i):n.isLinear?r=this.createContinuousLegend(e,t,n,i):n.isCategory&&(r=this.createCategoryLegend(e,t,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:o,direction:a,type:hue.LEGEND,extra:{scale:n}}},t.prototype.createCustomLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r,!0);return new nye(i)},t.prototype.createContinuousLegend=function(e,t,n,r){var i=this.getContinuousCfg(e,t,n,hye(r,["value"]));return new rye(i)},t.prototype.createCategoryLegend=function(e,t,n,r){var i=this.getCategoryCfg(e,t,n,r);return new nye(i)},t.prototype.getContinuousCfg=function(e,t,n,r){var i=n.getTicks(),o=$ae(i,(function(e){return 0===e.value})),a=$ae(i,(function(e){return 1===e.value})),l=i.map((function(e){var r=e.value,i=e.tickValue,o=t.mapping(n.invert(r)).join("");return{value:i,attrValue:o,color:o,scaleValue:r}}));o||l.push({value:n.min,attrValue:t.mapping(n.invert(0)).join(""),color:t.mapping(n.invert(0)).join(""),scaleValue:0}),a||l.push({value:n.max,attrValue:t.mapping(n.invert(1)).join(""),color:t.mapping(n.invert(1)).join(""),scaleValue:1}),l.sort((function(e,t){return e.value-t.value}));var u={min:ole(l).value,max:ale(l).value,colors:[],rail:{type:t.type},track:{}};"size"===t.type&&(u.track={style:{fill:"size"===t.type?this.view.getTheme().defaultColor:void 0}}),"color"===t.type&&(u.colors=l.map((function(e){return e.attrValue})));var c=this.container,s=l_e(gSe(r)),d=Kle(r,"title");return d&&(d=Hle({text:kye(n)},d)),u.container=c,u.layout=s,u.title=d,u.animateOption=Owe,this.mergeLegendCfg(u,r,"continuous")},t.prototype.getCategoryCfg=function(e,t,n,r,i){var o=this.container,a=Kle(r,"position",due.BOTTOM),l=c_e(this.view.getTheme(),a),u=Kle(l,["marker"]),c=Kle(r,"marker"),s=l_e(a),d=Kle(l,["pageNavigator"]),f=Kle(r,"pageNavigator"),h=i?function(e,t,n){return n.map((function(n,r){var i=t;Lae(i)&&(i=i(n.name,r,Hle({},e,n)));var o=Lae(n.marker)?n.marker(n.name,r,Hle({},e,n)):n.marker,a=Hle({},e,i,o);return a_e(a),n.marker=a,n}))}(u,c,r.items):u_e(this.view,e,t,u,c),p=Kle(r,"title");p&&(p=Hle({text:n?kye(n):""},p));var v=Kle(r,"maxWidthRatio"),g=Kle(r,"maxHeightRatio"),m=this.getCategoryLegendSizeCfg(s,v,g);m.container=o,m.layout=s,m.items=h,m.title=p,m.animateOption=Owe,m.pageNavigator=Hle({},d,f);var y=this.mergeLegendCfg(m,r,a);y.reversed&&y.items.reverse();var b=Kle(y,"maxItemWidth");return b&&b<=1&&(y.maxItemWidth=this.view.viewBBox.width*b),y},t.prototype.mergeLegendCfg=function(e,t,n){var r=n.split("-")[0],i=c_e(this.view.getTheme(),r);return Hle({},i,e,t)},t.prototype.getId=function(e){return"".concat(this.name,"-").concat(e)},t.prototype.getComponentById=function(e){return $ae(this.components,(function(t){return t.id===e}))},t.prototype.getCategoryLegendSizeCfg=function(e,t,n){void 0===t&&(t=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,o=r.height;return"vertical"===e?{maxWidth:i*t,maxHeight:o}:{maxWidth:i,maxHeight:o*n}},t}(_we),ySe=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=iue,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=Mae(e,2),r=t[0],i=t[1];n.start=r,n.end=i,n.changeViewData(r,i)},n.container=n.view.getLayer(cue.FORE).addGroup(),n.onChangeFn=eue(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(gue.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(gue.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(gue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(gue.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),t=e.start,n=e.end;Bae(this.start)&&(this.start=t,this.end=n);var r=this.view.getOptions().data;this.option&&!Gle(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.start,e.end)}),0)),this.slider){var t=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=Mae(n,4),i=r[0];r[1],r[2];var o=r[3],a=this.slider.component.getLayoutBBox(),l=new vye(a.x,a.y,Math.min(a.width,t),a.height).expand(n),u=this.getMinMaxText(this.start,this.end),c=u.minText,s=u.maxText,d=Mae(pSe(this.view.viewBBox,l,due.BOTTOM),2);d[0];var f=d[1],h=Mae(pSe(this.view.coordinateBBox,l,due.BOTTOM),2),p=h[0];h[1],this.slider.component.update(Sae(Sae({},this.getSliderCfg()),{x:p+o,y:f+i,width:this.width,start:this.start,end:this.end,minText:c,maxText:s})),this.view.viewBBox=this.view.viewBBox.cut(l,due.BOTTOM)}},t.prototype.update=function(){this.render()},t.prototype.createSlider=function(){var e=this.getSliderCfg(),t=new Kme(Sae({container:this.container},e));return t.init(),{component:t,layer:cue.FORE,direction:due.BOTTOM,type:hue.SLIDER}},t.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var t=this.getMinMaxText(this.start,this.end),n=t.minText,r=t.maxText;e=Sae(Sae({},e),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(e),this.slider},t.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},t.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(zae(this.option)){var t=Sae({data:this.getData()},Kle(this.option,"trendCfg",{}));e=Hle({},e,this.getThemeOptions(),this.option),e=Sae(Sae({},e),{trendCfg:t})}return e.start=fle(Math.min(Bae(e.start)?0:e.start,Bae(e.end)?1:e.end),0,1),e.end=fle(Math.max(Bae(e.start)?0:e.start,Bae(e.end)?1:e.end),0,1),e},t.prototype.getData=function(){var e=this.view.getOptions().data,t=Mae(this.view.getYScales(),1)[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,o=r.ticks;return e.reduce((function(e,n){return n[i]===o[0]&&e.push(n[t.field]),e}),[])}return e.map((function(e){return e[t.field]||0}))},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Kle(e,["components","slider","common"],{})},t.prototype.getMinMaxText=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=ile(n,r.field);r.isLinear&&(i=i.sort());var o=i,a=oue(n);if(!r||!a)return{};var l=oue(o),u=Math.round(e*(l-1)),c=Math.round(t*(l-1)),s=Kle(o,[u]),d=Kle(o,[c]),f=this.getSliderCfg().formatter;return f&&(s=f(s,n[u],u),d=f(d,n[c],c)),{minText:s,maxText:d}},t.prototype.changeViewData=function(e,t){var n=this.view.getOptions().data,r=this.view.getXScale(),i=oue(n);if(r&&i){var o=ile(n,r.field),a=this.view.getXScale().isLinear?o.sort((function(e,t){return Number(e)-Number(t)})):o,l=oue(a),u=Math.round(e*(l-1)),c=Math.round(t*(l-1));this.view.filter(r.field,(function(e,t){var n=a.indexOf(e);return!(n>-1)||fye(n,u,c)})),this.view.render(!0)}},t.prototype.getComponents=function(){return this.slider?[this.slider]:[]},t.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},t}(_we),bSe=function(e){function t(t){var n=e.call(this,t)||this;return n.onChangeFn=iue,n.resetMeasure=function(){n.clear()},n.onValueChange=function(e){var t=e.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=fle(t,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(cue.FORE).addGroup(),n.onChangeFn=eue(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(gue.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(gue.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.view.off(gue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(gue.BEFORE_CHANGE_SIZE,this.resetMeasure)},t.prototype.init=function(){},t.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},t.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)}))),this.scrollbar){var t=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new vye(r.x,r.y,Math.min(r.width,t),r.height).expand(n),o=this.getScrollbarComponentCfg(),a=void 0,l=void 0;if(o.isHorizontal){var u=Mae(pSe(this.view.viewBBox,i,due.BOTTOM),2);u[0];var c=u[1],s=Mae(pSe(this.view.coordinateBBox,i,due.BOTTOM),2),d=s[0];s[1],a=d,l=c}else{var f=Mae(pSe(this.view.viewBBox,i,due.RIGHT),2);f[0];c=f[1];var h=Mae(pSe(this.view.viewBBox,i,due.RIGHT),2);d=h[0];h[1],a=d,l=c}a+=n[3],l+=n[0],this.trackLen?this.scrollbar.component.update(Sae(Sae({},o),{x:a,y:l,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Sae(Sae({},o),{x:a,y:l})),this.view.viewBBox=this.view.viewBBox.cut(i,o.isHorizontal?due.BOTTOM:due.RIGHT)}},t.prototype.update=function(){this.render()},t.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},t.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},t.prototype.setValue=function(e){this.onValueChange({ratio:e})},t.prototype.getValue=function(){return this.ratio},t.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Kle(e,["components","scrollbar","common"],{})},t.prototype.getScrollbarTheme=function(e){var t=Kle(this.view.getTheme(),["components","scrollbar"]),n=e||{},r=n.thumbHighlightColor,i=Oae(n,["thumbHighlightColor"]);return{default:Hle({},Kle(t,["default","style"],{}),i),hover:Hle({},Kle(t,["hover","style"],{}),{thumbColor:r})}},t.prototype.measureScrollbar=function(){var e=this.view.getXScale(),t=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=t},t.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*fle(this.ratio,0,1));return[e,Math.min(e+this.step-1,this.cnt-1)]},t.prototype.changeViewData=function(e,t){var n=this,r=Mae(e,2),i=r[0],o=r[1],a="vertical"!==this.getValidScrollbarCfg().type,l=ile(this.data,this.xScaleCfg.field),u=this.view.getXScale().isLinear?l.sort((function(e,t){return Number(e)-Number(t)})):l,c=a?u:u.reverse();this.yScalesCfg.forEach((function(e){n.view.scale(e.field,{formatter:e.formatter,type:e.type,min:e.min,max:e.max,tickMethod:e.tickMethod})})),this.view.filter(this.xScaleCfg.field,(function(e){var t=c.indexOf(e);return!(t>-1)||fye(t,i,o)})),this.view.render(!0)},t.prototype.createScrollbar=function(){var e="vertical"!==this.getValidScrollbarCfg().type,t=new Jme(Sae(Sae({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return t.init(),{component:t,layer:cue.FORE,direction:e?due.BOTTOM:due.RIGHT,type:hue.SCROLLBAR}},t.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),t=this.trackLen?Sae(Sae({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Sae({},e);return this.scrollbar.component.update(t),this.scrollbar},t.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,t=this.getValidScrollbarCfg(),n=t.type,r=t.categorySize,i="vertical"!==n;return Math.floor((i?e.width:e.height)/r)},t.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),t=this.getScrollbarData();return oue(ile(t,e.field))},t.prototype.getScrollbarComponentCfg=function(){var e=this.view,t=e.coordinateBBox,n=e.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,o=r.padding,a=r.width,l=r.height,u=r.style,c="vertical"!==i,s=Mae(o,4),d=s[0],f=s[1],h=s[2],p=s[3],v=c?{x:t.minX+p,y:n.maxY-l-h}:{x:n.maxX-a-f,y:t.minY+d},g=this.getStep(),m=this.getCnt(),y=c?t.width-p-f:t.height-d-h,b=Math.max(y*fle(g/m,0,1),20);return Sae(Sae({},this.getThemeOptions()),{x:v.x,y:v.y,size:c?l:a,isHorizontal:c,trackLen:y,thumbLen:b,thumbOffset:0,theme:this.getScrollbarTheme(u)})},t.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return zae(this.option)&&(e=Sae(Sae({},e),this.option)),zae(this.option)&&this.option.padding||(e.padding=(e.type,[0,0,0,0])),e},t.prototype.getScrollbarData=function(){var e=this.view.getCoordinate(),t=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return e.isReflect("y")&&"vertical"===t.type&&(n=Aae([],Mae(n),!1).reverse()),n},t}(_we),wSe={fill:"#CCD6EC",opacity:.3};function _Se(e,t,n){var r,i,o,a,l,u,c=function(e,t,n){var r,i,o=lwe(e,t,n);try{for(var a=Pae(e.views),l=a.next();!l.done;l=a.next()){var u=l.value;o=o.concat(lwe(u,t,n))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}(e,t,n);if(c.length){c=Kae(c);try{for(var s=Pae(c),d=s.next();!d.done;d=s.next()){var f=d.value;try{for(var h=(o=void 0,Pae(f)),p=h.next();!p.done;p=h.next()){var v=p.value,g=v.mappingData,m=g.x,y=g.y;v.x=Vae(m)?m[m.length-1]:m,v.y=Vae(y)?y[y.length-1]:y}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}if(!1===n.shared&&c.length>1){var b=c[0],w=Math.abs(t.y-b[0].y);try{for(var _=Pae(c),x=_.next();!x.done;x=_.next()){var k=x.value,C=Math.abs(t.y-k[0].y);C<=w&&(b=k,w=C)}}catch(e){l={error:e}}finally{try{x&&!x.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}c=[b]}return rle(Kae(c))}return[]}var xSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.show=function(e){var t=this.context.view,n=this.context.event,r=t.getController("tooltip").getTooltipCfg(),i=_Se(t,{x:n.x,y:n.y},r);if(!Yle(i,this.items)&&(this.items=i,i.length)){var o=t.getXScale().field,a=i[0].data[o],l=[];if(Hae(t.geometries,(function(e){if("interval"===e.type||"schema"===e.type){var t=e.getElementsBy((function(e){return e.getData()[o]===a}));l=l.concat(t)}})),l.length){var u=t.getCoordinate(),c=l[0].shape.getCanvasBBox(),s=l[0].shape.getCanvasBBox(),d=c;Hae(l,(function(e){var t=e.shape.getCanvasBBox();u.isTransposed?(t.minY<c.minY&&(c=t),t.maxY>s.maxY&&(s=t)):(t.minX<c.minX&&(c=t),t.maxX>s.maxX&&(s=t)),d.x=Math.min(t.minX,d.minX),d.y=Math.min(t.minY,d.minY),d.width=Math.max(t.maxX,d.maxX)-d.x,d.height=Math.max(t.maxY,d.maxY)-d.y}));var f=t.backgroundGroup,h=t.coordinateBBox,p=void 0;if(u.isRect){var v=t.getXScale(),g=e||{},m=g.appendRatio,y=g.appendWidth;Bae(y)&&(m=Bae(m)?v.isLinear?0:.25:m,y=u.isTransposed?m*s.height:m*c.width);var b=void 0,w=void 0,_=void 0,x=void 0;u.isTransposed?(b=h.minX,w=Math.min(s.minY,c.minY)-y,_=h.width,x=d.height+2*y):(b=Math.min(c.minX,s.minX)-y,w=h.minY,_=d.width+2*y,x=h.height),p=[["M",b,w],["L",b+_,w],["L",b+_,w+x],["L",b,w+x],["Z"]]}else{var k=ole(l),C=ale(l),S=sye(k.getModel(),u).startAngle,O=sye(C.getModel(),u).endAngle,E=u.getCenter(),I=u.getRadius(),P=u.innerRadius*I;p=uye(E.x,E.y,I,S,O,P)}if(this.regionPath)this.regionPath.attr("path",p),this.regionPath.show();else{var M=Kle(e,"style",wSe);this.regionPath=f.addShape({type:"path",name:"active-region",capture:!1,attrs:Sae(Sae({},M),{path:p})})}}}},t.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},t.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),e.prototype.destroy.call(this)},t}(Nye),kSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Cae(t,e),t.prototype.show=function(){var e=this.context,t=e.event,n=e.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>Kle(e.view.getOptions(),"tooltip.showDelay",16)){var o=this.location,a={x:t.x,y:t.y};o&&Yle(o,a)||this.showTooltip(n,a),this.timeStamp=i,this.location=a}}},t.prototype.hide=function(){var e=this.context.view,t=e.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;t.isCursorEntered({x:r,y:i})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},t.prototype.showTooltip=function(e,t){e.showTooltip(t)},t.prototype.hideTooltip=function(e){e.hideTooltip()},t}(Nye),CSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.showTooltip=function(e,t){Hae(wbe(e),(function(n){var r=_be(e,n,t);n.showTooltip(r)}))},t.prototype.hideTooltip=function(e){Hae(wbe(e),(function(e){e.hideTooltip()}))},t}(kSe),SSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Cae(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.show=function(){var e=this.context.event,t=this.timeStamp,n=+new Date;if(n-t>16){var r=this.location,i={x:e.x,y:e.y};r&&Yle(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},t.prototype.hide=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context,n=t.event.target;if(n&&n.get("tip")){if(this.tooltip){var r=t.view.canvas,i={start:{x:0,y:0},end:{x:r.get("width"),y:r.get("height")}};this.tooltip.set("region",i)}else this.renderTooltip();var o=n.get("tip");this.tooltip.update(Sae({title:o},e)),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view,n=t.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=t.getTheme(),o=Kle(i,["components","tooltip","domStyles"],{}),a=new iye({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:Sae({},Hle({},o,(e={},e[kme]={"max-width":"50%"},e[Cme]={"word-break":"break-all"},e)))});a.init(),a.setCapture(!1),this.tooltip=a},t}(Nye),OSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t}return Cae(t,e),t.prototype.hasState=function(e){return e.hasState(this.stateName)},t.prototype.setElementState=function(e,t){e.setState(this.stateName,t)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},t.prototype.clearViewState=function(e){var t=this;Hae(fbe(e,this.stateName),(function(e){t.setElementState(e,!1)}))},t}(Nye);function ESe(e){return Kle(e.get("delegateObject"),"item")}var ISe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return Cae(t,e),t.prototype.isItemIgnore=function(e,t){return!!this.ignoreListItemStates.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByComponent=function(e,t,n){var r=this.context.view,i=e.get("field"),o=dbe(r);this.setElementsStateByItem(o,i,t,n)},t.prototype.setStateByElement=function(e,t){this.setElementState(e,t)},t.prototype.isMathItem=function(e,t,n){var r=kbe(this.context.view,t),i=hbe(e,t);return!Bae(i)&&n.name===r.getText(i)},t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;Hae(e,(function(e){i.isMathItem(e,t,n)&&e.setState(i.stateName,r)}))},t.prototype.setStateEnable=function(e){var t=tbe(this.context);if(t)rbe(this.context)&&this.setStateByElement(t,e);else{var n=nbe(this.context);if(ibe(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var o=this.context.event.gEvent;if(o&&o.fromShape&&o.toShape&&ESe(o.fromShape)===ESe(o.toShape))return;this.setStateByComponent(i,r,e)}}}},t.prototype.toggle=function(){var e=tbe(this.context);if(e){var t=e.hasState(this.stateName);this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(OSe),PSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.active=function(){this.setState()},t}(ISe),MSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return Cae(t,e),t.prototype.getColorScale=function(e,t){var n=t.geometry.getAttribute("color");return n?e.getScaleByField(n.getFields()[0]):null},t.prototype.getLinkPath=function(e,t){var n=this.context.view.getCoordinate().isTransposed,r=e.shape.getCanvasBBox(),i=t.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},t.prototype.addLinkShape=function(e,t,n,r){var i={opacity:.4,fill:t.shape.attr("fill")};e.addShape({type:"path",attrs:Sae(Sae({},Hle({},i,Lae(r)?r(i,t):r)),{path:this.getLinkPath(t,n)})})},t.prototype.linkByElement=function(e,t){var n=this,r=this.context.view,i=this.getColorScale(r,e);if(i){var o=hbe(e,i.field);if(!this.cache[o]){var a=function(e,t,n){return dbe(e).filter((function(e){return hbe(e,t)===n}))}(r,i.field,o),l=this.linkGroup.addGroup();this.cache[o]=l;var u=a.length;Hae(a,(function(e,r){if(r<u-1){var i=a[r+1];n.addLinkShape(l,e,i,t)}}))}}},t.prototype.removeLink=function(e){var t=this.getColorScale(this.context.view,e);if(t){var n=hbe(e,t.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},t.prototype.link=function(e){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=tbe(t);n&&this.linkByElement(n,null==e?void 0:e.style)},t.prototype.unlink=function(){var e=tbe(this.context);e&&this.removeLink(e)},t.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},t}(Nye),RSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return Cae(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},t.prototype.getIntersectElements=function(){var e=null;if(abe(this.context))e=ube(this.context,10);else{var t=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!t||!n)return;var r={minX:Math.min(t.x,n.x),minY:Math.min(t.y,n.y),maxX:Math.max(t.x,n.x),maxY:Math.max(t.y,n.y)};e=pbe(this.context.view,r)}return e},t.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var t=dbe(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,e):this.setElementsState(n,e,t):this.clear()}},t.prototype.setSiblingsStateByRecord=function(e,t){var n=this,r=this.context.view,i=wbe(r),o=e.map((function(e){return e.getModel().data})),a=r.getXScale().field,l=r.getYScales()[0].field;Hae(i,(function(e){var r=dbe(e),i=r.filter((function(e){var t=e.getModel().data;return xbe(o,t,a,l)}));n.setElementsState(i,t,r)}))},t.prototype.setSiblingsState=function(e){var t=this,n=wbe(this.context.view);abe(this.context)&&Hae(n,(function(n){var r=dbe(n),i=cbe(t.context,n,10);i&&i.length?t.setElementsState(i,e,r):t.clearViewState(n)}))},t.prototype.setElementsState=function(e,t,n){var r=this;Hae(n,(function(n){e.includes(n)?r.setElementState(n,t):r.setElementState(n,!1)}))},t.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},t.prototype.clear=function(){var e=this,t=this.context.view;this.effectSiblings?Hae(wbe(t),(function(t){e.clearViewState(t)})):this.clearViewState(t)},t}(OSe),ASe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.active=function(){this.setState()},t}(RSe),jSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.setStateEnable=function(e){var t=tbe(this.context);if(t){if(!rbe(this.context))return;e?(this.clear(),this.setElementState(t,!0)):this.hasState(t)&&this.setElementState(t,!1)}},t.prototype.toggle=function(){var e=tbe(this.context);if(e){var t=this.hasState(e);t||this.clear(),this.setElementState(e,!t)}},t.prototype.reset=function(){this.setStateEnable(!1)},t}(OSe),DSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.active=function(){this.setState()},t}(jSe),TSe="inactive",FSe="active";function NSe(e){Hae(dbe(e),(function(e){e.hasState(FSe)&&e.setState(FSe,!1),e.hasState(TSe)&&e.setState(TSe,!1)}))}function LSe(e,t,n){Hae(e,(function(e){t(e)?(e.hasState(TSe)&&e.setState(TSe,!1),e.setState(FSe,n)):(e.hasState(FSe)&&e.setState(FSe,!1),e.setState(TSe,n))}))}var BSe,VSe,zSe=xue.INACTIVE,HSe=xue.ACTIVE,WSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=HSe,t}return Cae(t,e),t.prototype.setElementsStateByItem=function(e,t,n,r){var i=this;this.setHighlightBy(e,(function(e){return i.isMathItem(e,t,n)}),r)},t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(zSe)&&e.setState(zSe,!1),e.setState(HSe,!0)):e.hasState(HSe)||e.setState(zSe,!0)},t.prototype.setHighlightBy=function(e,t,n){var r=this;if(n)Hae(e,(function(e){r.setElementHighlight(e,t)}));else{var i=fbe(this.context.view,HSe),o=!0;Hae(i,(function(e){if(!t(e))return o=!1,!1})),o?this.clear():Hae(e,(function(e){t(e)&&(e.hasState(HSe)&&e.setState(HSe,!1),e.setState(zSe,!0))}))}},t.prototype.setElementState=function(e,t){var n=dbe(this.context.view);this.setHighlightBy(n,(function(t){return e===t}),t)},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){NSe(this.context.view)},t}(ISe),USe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=e.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),o=hbe(e,i.field),a=dbe(n),l=a.filter((function(e){return hbe(e,i.field)===o}));this.setHighlightBy(a,(function(e){return l.includes(e)}),t)}},t}(WSe),GSe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.setElementHighlight=function(e,t){t(e)?(e.hasState(zSe)&&e.setState(zSe,!1),e.setState(HSe,!0)):(e.setState(zSe,!0),e.hasState(HSe)&&e.setState(HSe,!1))},t.prototype.setStateByElement=function(e,t){var n=this.context.view,r=n.getXScale(),i=hbe(e,r.field),o=dbe(n),a=o.filter((function(e){return hbe(e,r.field)===i}));this.setHighlightBy(o,(function(e){return a.includes(e)}),t)},t.prototype.toggle=function(){var e=tbe(this.context);if(e){var t=e.hasState(this.stateName);this.setStateByElement(e,!t)}},t}(WSe);(VSe=BSe||(BSe={})).BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",VSe.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",VSe.BEFORE_CLEAR="element-range-highlight:beforeclear",VSe.AFTER_CLEAR="element-range-highlight:afterclear";var YSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.clearViewState=function(e){NSe(e)},t.prototype.highlight=function(){var e=this.context,t=e.view,n={view:t,event:e.event,highlightElements:this.getIntersectElements()};t.emit(BSe.BEFORE_HIGHLIGHT,fwe.fromData(t,BSe.BEFORE_HIGHLIGHT,n)),this.setState(),t.emit(BSe.AFTER_HIGHLIGHT,fwe.fromData(t,BSe.AFTER_HIGHLIGHT,n))},t.prototype.clear=function(){var t=this.context.view;t.emit(BSe.BEFORE_CLEAR,fwe.fromData(t,BSe.BEFORE_CLEAR,{})),e.prototype.clear.call(this),t.emit(BSe.AFTER_CLEAR,fwe.fromData(t,BSe.AFTER_CLEAR,{}))},t.prototype.setElementsState=function(e,t,n){LSe(n,(function(t){return e.indexOf(t)>=0}),t)},t}(RSe),$Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.highlight=function(){this.setState()},t.prototype.setElementState=function(e,t){LSe(dbe(this.context.view),(function(t){return e===t}),t)},t.prototype.clear=function(){NSe(this.context.view)},t}(jSe),qSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Cae(t,e),t.prototype.selected=function(){this.setState()},t}(RSe),KSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Cae(t,e),t.prototype.selected=function(){this.setState()},t}(ISe),XSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Cae(t,e),t.prototype.selected=function(){this.setState()},t}(jSe),JSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return Cae(t,e),t.prototype.getTriggerListInfo=function(){var e=nbe(this.context),t=null;return ibe(e)&&(t={item:e.item,list:e.component}),t},t.prototype.getAllowComponents=function(){var e=this,t=mbe(this.context.view),n=[];return Hae(t,(function(t){t.isList()&&e.allowSetStateByElement(t)&&n.push(t)})),n},t.prototype.hasState=function(e,t){return e.hasState(t,this.stateName)},t.prototype.clearAllComponentsState=function(){var e=this;Hae(this.getAllowComponents(),(function(t){t.clearItemsState(e.stateName)}))},t.prototype.allowSetStateByElement=function(e){var t=e.get("field");if(!t)return!1;if(this.cfg&&this.cfg.componentNames){var n=e.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=kbe(this.context.view,t);return r&&r.isCategory},t.prototype.allowSetStateByItem=function(e,t){var n=this.ignoreItemStates;return!n.length||0===n.filter((function(n){return t.hasState(e,n)})).length},t.prototype.setStateByElement=function(e,t,n){var r=e.get("field"),i=kbe(this.context.view,r),o=hbe(t,r),a=i.getText(o);this.setItemsState(e,a,n)},t.prototype.setStateEnable=function(e){var t=this,n=tbe(this.context);if(n){Hae(this.getAllowComponents(),(function(r){t.setStateByElement(r,n,e)}))}else{var r=nbe(this.context);if(ibe(r)){var i=r.item,o=r.component;this.allowSetStateByElement(o)&&this.allowSetStateByItem(i,o)&&this.setItemState(o,i,e)}}},t.prototype.setItemsState=function(e,t,n){var r=this;Hae(e.getItems(),(function(i){i.name===t&&r.setItemState(e,i,n)}))},t.prototype.setItemState=function(e,t,n){e.setItemState(t,this.stateName,n)},t.prototype.setState=function(){this.setStateEnable(!0)},t.prototype.reset=function(){this.setStateEnable(!1)},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item,r=this.hasState(t,n);this.setItemState(t,n,!r)}},t.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},t}(Nye),ZSe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return Cae(t,e),t.prototype.active=function(){this.setState()},t}(JSe),QSe="inactive",eOe="active";var tOe="inactive",nOe="active",rOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=nOe,t.ignoreItemStates=["unchecked"],t}return Cae(t,e),t.prototype.setItemsState=function(e,t,n){this.setHighlightBy(e,(function(e){return e.name===t}),n)},t.prototype.setItemState=function(e,t,n){e.getItems(),this.setHighlightBy(e,(function(e){return e===t}),n)},t.prototype.setHighlightBy=function(e,t,n){var r=e.getItems();if(n)Hae(r,(function(n){t(n)?(e.hasState(n,tOe)&&e.setItemState(n,tOe,!1),e.setItemState(n,nOe,!0)):e.hasState(n,nOe)||e.setItemState(n,tOe,!0)}));else{var i=e.getItemsByState(nOe),o=!0;Hae(i,(function(e){if(!t(e))return o=!1,!1})),o?this.clear():Hae(r,(function(n){t(n)&&(e.hasState(n,nOe)&&e.setItemState(n,nOe,!1),e.setItemState(n,tOe,!0))}))}},t.prototype.highlight=function(){this.setState()},t.prototype.clear=function(){var e,t=this.getTriggerListInfo();t?Hae((e=t.list).getItems(),(function(t){e.hasState(t,eOe)&&e.setItemState(t,eOe,!1),e.hasState(t,QSe)&&e.setItemState(t,QSe,!1)})):Hae(this.getAllowComponents(),(function(e){e.clearItemsState(nOe),e.clearItemsState(tOe)}))},t}(JSe),iOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="selected",t}return Cae(t,e),t.prototype.selected=function(){this.setState()},t}(JSe),oOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="unchecked",t}return Cae(t,e),t.prototype.unchecked=function(){this.setState()},t}(JSe),aOe="unchecked",lOe="checked",uOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName=lOe,t}return Cae(t,e),t.prototype.setItemState=function(e,t,n){this.setCheckedBy(e,(function(e){return e===t}),n)},t.prototype.setCheckedBy=function(e,t,n){var r=e.getItems();n&&Hae(r,(function(n){t(n)?(e.hasState(n,aOe)&&e.setItemState(n,aOe,!1),e.setItemState(n,lOe,!0)):e.hasState(n,lOe)||e.setItemState(n,aOe,!0)}))},t.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var t=e.list,n=e.item;!ule(t.getItems(),(function(e){return t.hasState(e,aOe)}))||t.hasState(n,aOe)?this.setItemState(t,n,!0):this.reset()}},t.prototype.checked=function(){this.setState()},t.prototype.reset=function(){Hae(this.getAllowComponents(),(function(e){e.clearItemsState(lOe),e.clearItemsState(aOe)}))},t}(JSe),cOe="unchecked",sOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.toggle=function(){var e,t,n,r,i,o,a,l,u=this.getTriggerListInfo();if(null==u?void 0:u.item){var c=u.list,s=u.item,d=c.getItems(),f=d.filter((function(e){return!c.hasState(e,cOe)})),h=d.filter((function(e){return c.hasState(e,cOe)})),p=f[0];if(d.length===f.length)try{for(var v=Pae(d),g=v.next();!g.done;g=v.next()){var m=g.value;c.setItemState(m,cOe,m.id!==s.id)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(t=v.return)&&t.call(v)}finally{if(e)throw e.error}}else if(d.length-h.length==1)if(p.id===s.id)try{for(var y=Pae(d),b=y.next();!b.done;b=y.next()){m=b.value;c.setItemState(m,cOe,!1)}}catch(e){n={error:e}}finally{try{b&&!b.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}else try{for(var w=Pae(d),_=w.next();!_.done;_=w.next()){m=_.value;c.setItemState(m,cOe,m.id!==s.id)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}else try{for(var x=Pae(d),k=x.next();!k.done;k=x.next()){m=k.value;c.setItemState(m,cOe,m.id!==s.id)}}catch(e){a={error:e}}finally{try{k&&!k.done&&(l=x.return)&&l.call(x)}finally{if(a)throw a.error}}}},t}(JSe),dOe="showRadio",fOe="legend-radio-tip",hOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeStamp=0,t}return Cae(t,e),t.prototype.show=function(){var e=this.getTriggerListInfo();if(null==e?void 0:e.item){var t=e.list,n=e.item;t.setItemState(n,dOe,!0)}},t.prototype.hide=function(){var e=this.getTriggerListInfo();if(null==e?void 0:e.item){var t=e.list,n=e.item;t.setItemState(n,dOe,!1)}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.showTip=function(){var e=this.context.event,t=this.timeStamp,n=+new Date,r=this.context.event.target;if(n-t>16&&"legend-item-radio"===r.get("name")){var i=this.location,o={x:e.x,y:e.y};this.timeStamp=n,this.location=o,i&&Yle(i,o)||this.showTooltip(o)}},t.prototype.hideTip=function(){this.hideTooltip(),this.location=null},t.prototype.showTooltip=function(e){var t=this.context,n=t.event.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var r=t.view.getCanvas().get("el").getBoundingClientRect(),i=r.x,o=r.y;this.tooltip.update(Sae(Sae({title:n.get("tip")},e),{x:e.x+i,y:e.y+o})),this.tooltip.show()}},t.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=((e={})[kme]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},e[Cme]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},e);document.getElementById(fOe)&&document.body.removeChild(document.getElementById(fOe));var n=new iye({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:t,containerId:fOe});n.init(),n.setCapture(!1),this.tooltip=n},t}(JSe),pOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return Cae(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="mask:".concat(e),n=this.context.view,r=this.context.event;n.emit(t,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},t.prototype.createMask=function(){var e=this.context.view,t=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Sae({fill:"#C5D4EB",opacity:.3},t)})},t.prototype.getMaskPath=function(){return[]},t.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},t.prototype.start=function(e){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},t.prototype.move=function(){if(this.moving&&this.maskShape){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y;Hae(this.points,(function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},t.prototype.updateMask=function(e){var t=Hle({},this.getMaskAttrs(),e);this.maskShape.attr(t)},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},t.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},t.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},t.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,e.prototype.destroy.call(this)},t}(Nye);function vOe(e){var t=ale(e),n=0,r=0,i=0;if(e.length){var o=e[0];n=ybe(o,t)/2,r=(t.x+o.x)/2,i=(t.y+o.y)/2}return{x:r,y:i,r:n}}var gOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t}return Cae(t,e),t.prototype.getMaskAttrs=function(){return vOe(this.points)},t}(pOe);function mOe(e){return{start:ole(e),end:ale(e)}}function yOe(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}}var bOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return Cae(t,e),t.prototype.getRegion=function(){return mOe(this.points)},t.prototype.getMaskAttrs=function(){var e=this.getRegion();return yOe(e.start,e.end)},t}(pOe);function wOe(e){e.x=fle(e.x,0,1),e.y=fle(e.y,0,1)}function _Oe(e,t,n,r){var i=null,o=null,a=r.invert(ole(e)),l=r.invert(ale(e));return n&&(wOe(a),wOe(l)),"x"===t?(i=r.convert({x:a.x,y:0}),o=r.convert({x:l.x,y:1})):(i=r.convert({x:0,y:a.y}),o=r.convert({x:1,y:l.y})),{start:i,end:o}}var xOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return Cae(t,e),t.prototype.getRegion=function(){var e=this.context.view.getCoordinate();return _Oe(this.points,this.dim,this.inPlot,e)},t}(bOe);function kOe(e){var t=[];return e.length&&(Hae(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t}function COe(e){return{path:kOe(e)}}var SOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getMaskPath=function(){return kOe(this.points)},t.prototype.getMaskAttrs=function(){return COe(this.points)},t.prototype.addPoint=function(){this.resize()},t}(pOe);function OOe(e){return function(e,t){if(e.length<=2)return $ye(e,!1);var n=e[0],r=[];Hae(e,(function(e){r.push(e.x),r.push(e.y)}));var i=Yye(r,t,null);return i.unshift(["M",n.x,n.y]),i}(e,!0)}function EOe(e){return{path:OOe(e)}}var IOe,POe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getMaskPath=function(){return OOe(this.points)},t.prototype.getMaskAttrs=function(){return EOe(this.points)},t}(SOe),MOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return Cae(t,e),t.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},t.prototype.emitEvent=function(e){var t="".concat(this.maskType,":").concat(e),n=this.context.view,r=this.context.event,i={type:this.shapeType,name:this.maskType,get:function(e){return i.hasOwnProperty(e)?i[e]:void 0}};n.emit(t,{target:i,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:r.x,y:r.y})},t.prototype.createMask=function(e){var t=this.context.view,n=this.recordPoints[e],r=this.getMaskAttrs(n),i=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Sae({fill:"#C5D4EB",opacity:.3},r)});this.maskShapes.push(i)},t.prototype.getMaskPath=function(e){return[]},t.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(e){return e.show()})),this.emitEvent("show"))},t.prototype.start=function(e){this.recordPointStart(),this.starting=!0,this.moving=!1;var t=this.recordPoints.length-1;this.createMask(t),this.updateShapesCapture(!1),this.updateMask(null==e?void 0:e.maskStyle),this.emitEvent("start")},t.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},t.prototype.move=function(){if(this.moving&&0!==this.maskShapes.length){var e=this.getCurrentPoint(),t=this.preMovePoint,n=e.x-t.x,r=e.y-t.y,i=this.getCurMaskShapeIndex();i>-1&&(this.recordPoints[i].forEach((function(e){e.x+=n,e.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e)}},t.prototype.updateMask=function(e){var t=this;this.recordPoints.forEach((function(n,r){var i=Hle({},t.getMaskAttrs(n),e);t.maskShapes[r].attr(i)}))},t.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},t.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},t.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},t.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(e){return e.hide()})),this.emitEvent("hide"))},t.prototype.remove=function(){var e=this.getCurMaskShapeIndex();e>-1&&(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},t.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach((function(e){return e.remove()})),this.maskShapes=[],this.preMovePoint=null},t.prototype.clear=function(){var e=this.getCurMaskShapeIndex();-1===e?(this.recordPointClear(),this.maskShapes.forEach((function(e){return e.remove()})),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(e,1),this.maskShapes[e].remove(),this.maskShapes.splice(e,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},t.prototype.destroy=function(){this.clear(),e.prototype.destroy.call(this)},t.prototype.getRecordPoints=function(){var e;return Aae([],Mae(null!==(e=this.recordPoints)&&void 0!==e?e:[]),!1)},t.prototype.recordPointStart=function(){var e=this.getRecordPoints(),t=this.getCurrentPoint();this.recordPoints=Aae(Aae([],Mae(e),!1),[[t]],!1)},t.prototype.recordPointContinue=function(){var e=this.getRecordPoints(),t=this.getCurrentPoint(),n=e.splice(-1,1)[0]||[];n.push(t),this.recordPoints=Aae(Aae([],Mae(e),!1),[n],!1)},t.prototype.recordPointClear=function(){this.recordPoints=[]},t.prototype.updateShapesCapture=function(e){this.maskShapes.forEach((function(t){return t.set("capture",e)}))},t.prototype.getCurMaskShapeIndex=function(){var e=this.getCurrentPoint();return this.maskShapes.findIndex((function(t){var n=t.attrs,r=n.width,i=n.height,o=n.r;return!(0===r||0===i||0===o)&&t.isHit(e.x,e.y)}))},t}(Nye),ROe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="rect",t}return Cae(t,e),t.prototype.getRegion=function(e){return mOe(e)},t.prototype.getMaskAttrs=function(e){var t=this.getRegion(e);return yOe(t.start,t.end)},t}(MOe),AOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return Cae(t,e),t.prototype.getRegion=function(e){var t=this.context.view.getCoordinate();return _Oe(e,this.dim,this.inPlot,t)},t}(ROe),jOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=vOe,t}return Cae(t,e),t}(MOe),DOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getMaskPath=kOe,t.getMaskAttrs=COe,t}return Cae(t,e),t.prototype.addPoint=function(){this.resize()},t}(MOe),TOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getMaskPath=OOe,t.getMaskAttrs=EOe,t}return Cae(t,e),t}(DOe),FOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},t.prototype.default=function(){this.setCursor("default")},t.prototype.pointer=function(){this.setCursor("pointer")},t.prototype.move=function(){this.setCursor("move")},t.prototype.crosshair=function(){this.setCursor("crosshair")},t.prototype.wait=function(){this.setCursor("wait")},t.prototype.help=function(){this.setCursor("help")},t.prototype.text=function(){this.setCursor("text")},t.prototype.eResize=function(){this.setCursor("e-resize")},t.prototype.wResize=function(){this.setCursor("w-resize")},t.prototype.nResize=function(){this.setCursor("n-resize")},t.prototype.sResize=function(){this.setCursor("s-resize")},t.prototype.neResize=function(){this.setCursor("ne-resize")},t.prototype.nwResize=function(){this.setCursor("nw-resize")},t.prototype.seResize=function(){this.setCursor("se-resize")},t.prototype.swResize=function(){this.setCursor("sw-resize")},t.prototype.nsResize=function(){this.setCursor("ns-resize")},t.prototype.ewResize=function(){this.setCursor("ew-resize")},t.prototype.zoomIn=function(){this.setCursor("zoom-in")},t.prototype.zoomOut=function(){this.setCursor("zoom-out")},t}(Nye),NOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.filterView=function(e,t,n){var r=this;e.getScaleByField(t)&&e.filter(t,n),e.views&&e.views.length&&Hae(e.views,(function(e){r.filterView(e,t,n)}))},t.prototype.filter=function(){var e=nbe(this.context);if(e){var t=this.context.view,n=e.component,r=n.get("field");if(ibe(e)){if(r){var i=n.getItemsByState("unchecked"),o=kbe(t,r),a=i.map((function(e){return e.name}));a.length?this.filterView(t,r,(function(e){var t=o.getText(e);return!a.includes(t)})):this.filterView(t,r,null),t.render(!0)}}else if(obe(e)){var l=Mae(n.getValue(),2),u=l[0],c=l[1];this.filterView(t,r,(function(e){return e>=u&&e<=c})),t.render(!0)}}},t}(Nye);function LOe(e,t,n,r){var i=Math.min(n[t],r[t]),o=Math.max(n[t],r[t]),a=Mae(e.range,2),l=a[0],u=a[1];if(i<l&&(i=l),o>u&&(o=u),i===u&&o===u)return null;var c=e.invert(i),s=e.invert(o);if(e.isCategory){var d=e.values.indexOf(c),f=e.values.indexOf(s),h=e.values.slice(d,f+1);return function(e){return h.includes(e)}}return function(e){return e>=c&&e<=s}}!function(e){e.FILTER="brush-filter-processing",e.RESET="brush-filter-reset",e.BEFORE_FILTER="brush-filter:beforefilter",e.AFTER_FILTER="brush-filter:afterfilter",e.BEFORE_RESET="brush-filter:beforereset",e.AFTER_RESET="brush-filter:afterreset"}(IOe||(IOe={}));var BOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return Cae(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},t.prototype.filter=function(){var e,t;if(abe(this.context)){var n=this.context.event.target.getCanvasBBox();e={x:n.x,y:n.y},t={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;e=this.startPoint,t=this.context.getCurrentPoint()}if(!(Math.abs(e.x-t.x)<5||Math.abs(e.x-t.y)<5)){var r=this.context,i=r.view,o={view:i,event:r.event,dims:this.dims};i.emit(IOe.BEFORE_FILTER,fwe.fromData(i,IOe.BEFORE_FILTER,o));var a=i.getCoordinate(),l=a.invert(t),u=a.invert(e);if(this.hasDim("x")){var c=i.getXScale(),s=LOe(c,"x",l,u);this.filterView(i,c.field,s)}if(this.hasDim("y")){var d=i.getYScales()[0];s=LOe(d,"y",l,u);this.filterView(i,d.field,s)}this.reRender(i,{source:IOe.FILTER}),i.emit(IOe.AFTER_FILTER,fwe.fromData(i,IOe.AFTER_FILTER,o))}},t.prototype.end=function(){this.isStarted=!1},t.prototype.reset=function(){var e=this.context.view;if(e.emit(IOe.BEFORE_RESET,fwe.fromData(e,IOe.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var t=e.getXScale();this.filterView(e,t.field,null)}if(this.hasDim("y")){var n=e.getYScales()[0];this.filterView(e,n.field,null)}this.reRender(e,{source:IOe.RESET}),e.emit(IOe.AFTER_RESET,fwe.fromData(e,IOe.AFTER_RESET,{}))},t.prototype.filterView=function(e,t,n){e.filter(t,n)},t.prototype.reRender=function(e,t){e.render(!0,t)},t}(Nye),VOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.filterView=function(e,t,n){Hae(wbe(e),(function(e){e.filter(t,n)}))},t.prototype.reRender=function(e){Hae(wbe(e),(function(e){e.render(!0)}))},t}(BOe),zOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.filter=function(){var e=nbe(this.context),t=this.context.view,n=dbe(t);if(abe(this.context)){var r=ube(this.context,10);r&&Hae(n,(function(e){r.includes(e)?e.show():e.hide()}))}else if(e){var i=e.component,o=i.get("field");if(ibe(e)){if(o){var a=i.getItemsByState("unchecked"),l=kbe(t,o),u=a.map((function(e){return e.name}));Hae(n,(function(e){var t=hbe(e,o),n=l.getText(t);u.indexOf(n)>=0?e.hide():e.show()}))}}else if(obe(e)){var c=Mae(i.getValue(),2),s=c[0],d=c[1];Hae(n,(function(e){var t=hbe(e,o);t>=s&&t<=d?e.show():e.hide()}))}}},t.prototype.clear=function(){Hae(dbe(this.context.view),(function(e){e.show()}))},t.prototype.reset=function(){this.clear()},t}(Nye),HOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.byRecord=!1,t}return Cae(t,e),t.prototype.filter=function(){abe(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},t.prototype.filterByRecord=function(){var e=this.context.view,t=ube(this.context,10);if(t){var n=e.getXScale().field,r=e.getYScales()[0].field,i=t.map((function(e){return e.getModel().data}));Hae(wbe(e),(function(e){Hae(dbe(e),(function(e){var t=e.getModel().data;xbe(i,t,n,r)?e.show():e.hide()}))}))}},t.prototype.filterByBBox=function(){var e=this;Hae(wbe(this.context.view),(function(t){var n=cbe(e.context,t,10),r=dbe(t);n&&Hae(r,(function(e){n.includes(e)?e.show():e.hide()}))}))},t.prototype.reset=function(){Hae(wbe(this.context.view),(function(e){Hae(dbe(e),(function(e){e.show()}))}))},t}(Nye),WOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return Cae(t,e),t.prototype.getButtonCfg=function(){return Hle(this.buttonCfg,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=t.addShape({type:"text",name:"button-text",attrs:Sae({text:e.text},e.textStyle)}).getBBox(),r=uwe(e.padding),i=t.addShape({type:"rect",name:"button-rect",attrs:Sae({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style)});i.toBack(),t.on("mouseenter",(function(){i.attr(e.activeStyle)})),t.on("mouseleave",(function(){i.attr(e.style)})),this.buttonGroup=t},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=ise(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(Nye),UOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return Cae(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},t.prototype.drag=function(){if(this.startPoint){var e=this.context.getCurrentPoint(),t=this.context.view,n=this.context.event;this.dragStart?t.emit("drag",{target:n.target,x:n.x,y:n.y}):ybe(e,this.startPoint)>4&&(t.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},t.prototype.end=function(){if(this.dragStart){var e=this.context.view,t=this.context.event;e.emit("dragend",{target:t.target,x:t.x,y:t.y})}this.starting=!1,this.dragStart=!1},t}(Nye),GOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return Cae(t,e),t.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},t.prototype.move=function(){if(this.starting){var e=this.startPoint,t=this.context.getCurrentPoint();if(ybe(e,t)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=ise(this.startMatrix,[["t",t.x-e.x,t.y-e.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},t.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},t.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},t}(Nye),YOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return Cae(t,e),t.prototype.hasDim=function(e){return this.dims.includes(e)},t.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},t.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var n=this.getScale(e);t.scale(n.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},t.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},t}(Nye),$Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return Cae(t,e),t.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0,Hae(this.dims,(function(t){var n=e.getScale(t),r=n.min,i=n.max,o=n.values;e.startCache[t]={min:r,max:i,values:o}}))},t.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},t.prototype.translate=function(){var e=this;if(this.starting){var t=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(t),o=n.invert(r),a=o.x-i.x,l=o.y-i.y,u=this.context.view;Hae(this.dims,(function(t){e.translateDim(t,{x:-1*a,y:-1*l})})),u.render(!0)}},t.prototype.translateDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.translateLinear(e,n,t)}},t.prototype.translateLinear=function(e,t,n){var r=this.context.view,i=this.startCache[e],o=i.min,a=i.max,l=a-o,u=n[e]*l;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:o,max:a}),r.scale(t.field,{nice:!1,min:o+u,max:a+u})},t.prototype.reset=function(){e.prototype.reset.call(this),this.startPoint=null,this.starting=!1},t}(YOe),qOe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatio=.05,t}return Cae(t,e),t.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},t.prototype.zoom=function(e){var t=this;Hae(this.dims,(function(n){t.zoomDim(n,e)})),this.context.view.render(!0)},t.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},t.prototype.zoomDim=function(e,t){if(this.hasDim(e)){var n=this.getScale(e);n.isLinear&&this.zoomLinear(e,n,t)}},t.prototype.zoomLinear=function(e,t,n){var r=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:t.nice,min:t.min,max:t.max});var i=this.cacheScaleDefs[e],o=i.max-i.min,a=t.min,l=t.max,u=n*o,c=a-u,s=l+u,d=(s-c)/o;s>c&&d<100&&d>.01&&r.scale(t.field,{nice:!1,min:a-u,max:l+u})},t}(YOe);var KOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.scroll=function(e){var t=this.context,n=t.view,r=t.event;if(n.getOptions().scrollbar){var i=(null==e?void 0:e.wheelDelta)||1,o=n.getController("scrollbar"),a=n.getXScale(),l=n.getOptions().data,u=oue(ile(l,a.field)),c=oue(a.values),s=o.getValue(),d=Math.floor((u-c)*s)+(function(e){return e.gEvent.originalEvent.deltaY>0}(r)?i:-i),f=fle(d/(u-c)+i/(u-c)/1e4,0,1);o.setValue(f)}},t}(Nye),XOe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.show=function(){var e=this.context,t=nbe(e).axis.cfg.title,n=t.description,r=t.text,i=t.descriptionTooltipStyle,o=e.event,a=o.x,l=o.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:r||"",customContent:function(){return'\n          <div class="'.concat(kme,'" style={').concat(i,'}>\n            <div class="').concat(Cme,'">\n              字段说明：').concat(n,"\n            </div>\n          </div>\n        ")},x:a,y:l}),this.tooltip.show()},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},t.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},t.prototype.renderTooltip=function(){var e,t=this.context.view.canvas,n={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},r=new iye({parent:t.get("el").parentNode,region:n,visible:!1,containerId:"aixs-description-tooltip",domStyles:Sae({},Hle({},(e={},e[kme]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},e[Cme]={"word-break":"break-all","margin-bottom":"3px"},e)))});r.init(),r.setCapture(!1),this.tooltip=r},t}(Nye);function JOe(e){return e.isInPlot()}function ZOe(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}!function(e,t){Jbe[Cle(e)]=Xbe(t)}("dark",Nbe(T_e)),Due("canvas",Yxe),Due("svg",Dke),bwe("Polygon",eCe),bwe("Interval",Kke),bwe("Schema",tCe),bwe("Path",Tke),bwe("Point",Qke),bwe("Line",Xke),bwe("Area",Bke),bwe("Edge",Vke),bwe("Heatmap",zke),bwe("Violin",nCe),Twe("base",n_e),Twe("interval",hCe),Twe("pie",gCe),Twe("polar",vCe),Fwe("overlap",(function(e,t,n,r){var i=new xCe;Hae(t,(function(e){for(var t=e.find((function(e){return"text"===e.get("type")})),n=t.attr(),r=n.x,o=n.y,a=!1,l=0;l<=8;l++){var u=kCe(t,r,o,l);if(i.hasGap(u)){i.fillGap(u),a=!0;break}}a||e.remove(!0)})),i.destroy()})),Fwe("distribute",(function(e,t,n,r){if(e.length&&t.length){var i=e[0]?e[0].offset:0,o=t[0].get("coordinate"),a=o.getRadius(),l=o.getCenter();if(i>0){var u=2*(a+i)+28,c={start:o.start,end:o.end},s=[[],[]];e.forEach((function(e){e&&("right"===e.textAlign?s[0].push(e):s[1].push(e))})),s.forEach((function(e,n){var r=u/14;e.length>r&&(e.sort((function(e,t){return t["..percent"]-e["..percent"]})),e.splice(r,e.length-r)),e.sort((function(e,t){return e.y-t.y})),function(e,t,n,r,i,o){var a,l,u,c=!0,s=r.start,d=r.end,f=Math.min(s.y,d.y),h=Math.abs(s.y-d.y),p=0,v=Number.MIN_VALUE,g=t.map((function(e){return e.y>p&&(p=e.y),e.y<v&&(v=e.y),{size:n,targets:[e.y-f]}}));for(v-=f,p-f>h&&(h=p-f);c;)for(g.forEach((function(e){var t=(Math.min.apply(v,e.targets)+Math.max.apply(v,e.targets))/2;e.pos=Math.min(Math.max(v,t-e.size/2),h-e.size)})),c=!1,u=g.length;u--;)if(u>0){var m=g[u-1],y=g[u];m.pos+m.size>y.pos&&(m.size+=y.size,m.targets=m.targets.concat(y.targets),m.pos+m.size>h&&(m.pos=h-m.size),g.splice(u,1),c=!0)}u=0,g.forEach((function(e){var r=f+n/2;e.targets.forEach((function(){t[u].y=e.pos+r,r+=n,u++}))}));var b={};try{for(var w=Pae(e),_=w.next();!_.done;_=w.next()){var x=_.value;b[x.get("id")]=x}}catch(e){a={error:e}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(a)throw a.error}}t.forEach((function(e){var t=e.r*e.r,n=Math.pow(Math.abs(e.y-i.y),2);if(t<n)e.x=i.x;else{var r=Math.sqrt(t-n);e.x=o?i.x+r:i.x-r}var a=b[e.id];a.attr("x",e.x),a.attr("y",e.y);var l=$ae(a.getChildren(),(function(e){return"text"===e.get("type")}));l&&(l.attr("y",e.y),l.attr("x",e.x))}))}(t,e,14,c,l,n)}))}Hae(e,(function(e){if(e&&e.labelLine){var t=e.offset,n=e.angle,r=lye(l.x,l.y,a,n),i=lye(l.x,l.y,a+t/2,n),o=e.x+Kle(e,"offsetX",0),u=e.y+Kle(e,"offsetY",0),c={x:o-4*Math.cos(n),y:u-4*Math.sin(n)};zae(e.labelLine)||(e.labelLine={}),e.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),Fwe("fixed-overlap",(function(e,t,n,r){var i=new xCe;Hae(t,(function(e){(function(e,t,n){void 0===n&&(n=_Ce);var r,i=e.attr(),o=i.x,a=i.y,l=e.getCanvasBBox(),u=Math.sqrt(l.width*l.width+l.height*l.height),c=1,s=0,d=0;if(t.hasGap(l))return t.fillGap(l),!0;for(var f,h,p=!1,v=0,g={};Math.min(Math.abs(s),Math.abs(d))<u&&v<n;)if(f=c+=-1,h=void 0,d=~~(r=[(h=.1*f)*Math.cos(h),h*Math.sin(h)])[1],((s=~~r[0])||d)&&!g["".concat(s,"-").concat(d)]&&(e.attr({x:o+s,y:a+d}),s+d<0&&e.attr("textAlign","right"),v++,t.hasGap(e.getCanvasBBox()))){t.fillGap(e.getCanvasBBox()),p=!0,g["".concat(s,"-").concat(d)]=!0;break}return p})(e.find((function(e){return"text"===e.get("type")})),i)||e.remove(!0)})),i.destroy()})),Fwe("hide-overlap",(function(e,t,n,r){return Eae(this,void 0,void 0,(function(){var n,r,i,o,a,l;return Iae(this,(function(u){switch(u.label){case 0:return n=t.map((function(t,n){return Sae(Sae({},Jwe(t,e[n],Kle(e[n],"background.padding"))),{visible:!0})})),r=JSON.stringify(n),i=function(e){return DCe.set(r,e),Hae(e,(function(e,n){var r=e.visible,i=t[n];r?null==i||i.show():null==i||i.hide()})),e},DCe.get(r)?(i(DCe.get(r)),[3,7]):[3,1];case 1:if(!TCe)return[3,6];u.label=2;case 2:return u.trys.push([2,4,,5]),o=JSON.stringify({type:"hide-overlap",items:n}),[4,TCe.post(o,(function(){return i(jCe(n))}))];case 3:return a=u.sent(),i(Array.isArray(a.data)?a.data:[]),[3,5];case 4:return l=u.sent(),console.error(l),i(jCe(n)),[3,5];case 5:return[3,7];case 6:i(jCe(n)),u.label=7;case 7:return[2]}}))}))})),Fwe("limit-in-shape",(function(e,t,n,r){Hae(t,(function(e,t){var r=e.getCanvasBBox(),i=n[t].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&e.remove(!0)}))})),Fwe("limit-in-canvas",(function(e,t,n,r){Hae(t,(function(e){var t=r.minX,n=r.minY,i=r.maxX,o=r.maxY,a=e.getCanvasBBox(),l=a.minX,u=a.minY,c=a.maxX,s=a.maxY,d=a.x,f=a.y,h=a.width,p=a.height,v=d,g=f;(l<t||c<t)&&(v=t),(u<n||s<n)&&(g=n),l>i?v=i-h:c>i&&(v-=c-i),u>o?g=o-p:s>o&&(g-=s-o),v===d&&g===f||qwe(e,v-d,g-f)}))})),Fwe("limit-in-plot",(function(e,t,n,r,i){if(!(t.length<=0)){var o=(null==i?void 0:i.direction)||["top","right","bottom","left"],a=(null==i?void 0:i.action)||"translate",l=(null==i?void 0:i.margin)||0,u=t[0].get("coordinate");if(u){var c=function(e,t){void 0===t&&(t=0);var n=e.start,r=e.end,i=e.getWidth(),o=e.getHeight(),a=Math.min(n.x,r.x),l=Math.min(n.y,r.y);return vye.fromRange(a-t,l-t,a+i+t,l+o+t)}(u,l),s=c.minX,d=c.minY,f=c.maxX,h=c.maxY;Hae(t,(function(e){var t=e.getCanvasBBox(),n=t.minX,r=t.minY,i=t.maxX,l=t.maxY,u=t.x,c=t.y,p=t.width,v=t.height,g=u,m=c;if(o.indexOf("left")>=0&&(n<s||i<s)&&(g=s),o.indexOf("top")>=0&&(r<d||l<d)&&(m=d),o.indexOf("right")>=0&&(n>f?g=f-p:i>f&&(g-=i-f)),o.indexOf("bottom")>=0&&(r>h?m=h-v:l>h&&(m-=l-h)),g!==u||m!==c){var y=g-u;if("translate"===a)qwe(e,y,m-c);else if("ellipsis"===a){e.findAll((function(e){return"text"===e.get("type")})).forEach((function(e){var t=Zle(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=e.getCanvasBBox(),r=function(e,t,n){var r,i=WCe("...",n);r=nle(e)?e:kle(e);var o,a,l=t,u=[];if(WCe(e,n)<=t)return e;for(;o=r.substr(0,16),!((a=WCe(o,n))+i>l&&a>l);)if(u.push(o),l-=a,!(r=r.substr(16)))return u.join("");for(;o=r.substr(0,1),!((a=WCe(o,n))+i>l);)if(u.push(o),l-=a,!(r=r.substr(1)))return u.join("");return"".concat(u.join(""),"...")}(e.attr("text"),n.width-Math.abs(y),t);e.attr("text",r)}))}else e.hide()}}))}}})),Fwe("pie-outer",(function(e,t,n,r){var i,o,a=Tae(e,(function(e){return!Bae(e)})),l=t[0]&&t[0].get("coordinate");if(l){var u=l.getCenter(),c=l.getRadius(),s={};try{for(var d=Pae(t),f=d.next();!f.done;f=d.next()){var h=f.value;s[h.get("id")]=h}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var p=Kle(a[0],"labelHeight",14),v=Kle(a[0],"offset",0);if(!(v<=0)){var g="right",m=sle(a,(function(e){return e.x<u.x?"left":g})),y=l.start,b=l.end,w=Math.min(2*(c+v+p),l.getHeight()),_=w/2,x={minX:y.x,maxX:b.x,minY:u.y-_,maxY:u.y+_};Hae(m,(function(e,t){var n=Math.floor(w/p);e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Hae(e,(function(e,t){t+1>n&&(s[e.id].set("visible",!1),e.invisible=!0)}))),mCe(e,p,x)})),Hae(m,(function(e,t){Hae(e,(function(e){var n=t===g,r=s[e.id].getChildByIndex(0);if(r){var i=c+v,o=e.y-u.y,a=Math.pow(i,2),d=Math.pow(o,2),f=a-d>0?a-d:0,h=Math.sqrt(f),p=Math.abs(Math.cos(e.angle)*i);e.x=n?u.x+Math.max(h,p):u.x-Math.max(h,p)}r&&(r.attr("y",e.y),r.attr("x",e.x)),function(e,t){var n=t.getCenter(),r=t.getRadius();if(e&&e.labelLine){var i=e.angle,o=e.offset,a=lye(n.x,n.y,r,i),l=e.x+Kle(e,"offsetX",0)*(Math.cos(i)>0?1:-1),u=e.y+Kle(e,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:l-Math.cos(i)*yCe,y:u-Math.sin(i)*yCe},s=e.labelLine.smooth,d=[],f=c.x-n.x,h=c.y-n.y,p=Math.atan(h/f);if(f<0&&(p+=Math.PI),!1===s){zae(e.labelLine)||(e.labelLine={});var v=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>a.y&&(v=1),i>=0&&i<Math.PI/2&&c.y>a.y&&(v=1),i>=Math.PI/2&&i<Math.PI&&a.y>c.y&&(v=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&a.y>c.y&&(v=1);var g=o/2>4?4:Math.max(o/2-1,0),m=lye(n.x,n.y,r+g,i),y=lye(n.x,n.y,r+o/2,p);d.push("M ".concat(a.x," ").concat(a.y)),d.push("L ".concat(m.x," ").concat(m.y)),d.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(v," ").concat(y.x," ").concat(y.y)),d.push("L ".concat(c.x," ").concat(c.y))}else{m=lye(n.x,n.y,r+(o/2>4?4:Math.max(o/2-1,0)),i);var b=a.x<n.x?1:-1;d.push("M ".concat(c.x," ").concat(c.y));var w=(a.y-n.y)/(a.x-n.x),_=(c.y-n.y)/(c.x-n.x);Math.abs(w-_)>Math.pow(Math.E,-16)&&d.push.apply(d,["C",c.x+4*b,c.y,2*m.x-a.x,2*m.y-a.y,a.x,a.y]),d.push("L ".concat(a.x," ").concat(a.y))}e.labelLine.path=d.join(" ")}}(e,l)}))}))}}})),Fwe("adjust-color",(function(e,t,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},o=i.fillColorLight,a=i.fillColorDark;n.forEach((function(e,n){var i=t[n].find((function(e){return"text"===e.get("type")})),l=vye.fromObject(e.getBBox()),u=vye.fromObject(i.getCanvasBBox()),c=!l.contains(u),s=function(e){var t=ipe.toRGB(e).toUpperCase();if(NCe[t])return NCe[t];var n=Mae(ipe.rgb2arr(t),3);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(e.attr("fill"));c?i.attr(r.overflowLabels.style):s?o&&i.attr("fill",o):a&&i.attr("fill",a)}))}})),Fwe("interval-adjust-position",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null==i?void 0:i.geometry;if(o&&"interval"===o.type)LCe(o,t,n)&&n.forEach((function(e,n){var r=t[n];!function(e,t,n){var r=e.coordinate,i=vye.fromObject(n.getBBox()),o=Xwe(t);r.isTransposed?o.attr({x:i.minX+i.width/2,textAlign:"center"}):o.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(o,r,e)}))}})),Fwe("interval-hide-overlap",(function(e,t,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null==i?void 0:i.geometry;if(o&&"interval"===o.type){var a,l=function(e){var t=[],n=Math.max(Math.floor(e.length/500),1);return Hae(e,(function(e,r){r%n==0?t.push(e):e.set("visible",!1)})),t}(t),u=Mae(o.getXYFields(),1)[0],c=[],s=[],d=sle(l,(function(e){return e.get("data")[u]})),f=rle($le(l,(function(e){return e.get("data")[u]})));l.forEach((function(e){e.set("visible",!0)}));var h=function(e){e&&(e.length&&s.push(e.pop()),s.push.apply(s,Aae([],Mae(e),!1)))};for(oue(f)>0&&(a=f.shift(),h(d[a])),oue(f)>0&&(a=f.pop(),h(d[a])),Hae(f.reverse(),(function(e){h(d[e])}));s.length>0;){var p=s.shift();p.get("visible")&&(Zwe(p,c)?p.set("visible",!1):c.push(p))}}}})),Fwe("point-adjust-position",(function(e,t,n,r,i){var o,a;if(0!==n.length){var l=null===(o=n[0])||void 0===o?void 0:o.get("element"),u=null==l?void 0:l.geometry;if(u&&"point"===u.type){var c=Mae(u.getXYFields(),2),s=c[0],d=c[1],f=sle(t,(function(e){return e.get("data")[s]})),h=[],p=i&&i.offset||(null===(a=e[0])||void 0===a?void 0:a.offset)||12;$le(Wae(f).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,Aae([],Mae(i),!1)),r}(u,f[e]);t.length;){var n=t.shift(),r=Xwe(n);if(BCe(h,n,(function(e,t){return e.get("data")[s]===t.get("data")[s]&&e.get("data")[d]===t.get("data")[d]})))r.set("visible",!1);else{var i=!1;VCe(h,n)&&(r.attr("y",r.attr("y")+2*p),i=VCe(h,n)),i?r.set("visible",!1):h.push(n)}}}))}}})),Fwe("pie-spider",(function(e,t,n,r){var i,o,a=t[0]&&t[0].get("coordinate");if(a){var l=a.getCenter(),u=a.getRadius(),c={};try{for(var s=Pae(t),d=s.next();!d.done;d=s.next()){var f=d.value;c[f.get("id")]=f}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}var h=Kle(e[0],"labelHeight",14),p=Math.max(Kle(e[0],"offset",0),bCe);Hae(e,(function(e){if(e&&Kle(c,[e.id])){var t=e.x>l.x||e.x===l.x&&e.y>l.y,n=Bae(e.offsetX)?4:e.offsetX,r=lye(l.x,l.y,u+bCe,e.angle),i=p+n;e.x=l.x+(t?1:-1)*(u+i),e.y=r.y}}));var v=a.start,g=a.end,m="right",y=sle(e,(function(e){return e.x<l.x?"left":m})),b=2*(u+p)+h;Hae(y,(function(e){var t=e.length*h;t>b&&(b=Math.min(t,Math.abs(v.y-g.y)))}));var w={minX:v.x,maxX:g.x,minY:l.y-b/2,maxY:l.y+b/2};Hae(y,(function(e,t){var n=b/h;e.length>n&&(e.sort((function(e,t){return t.percent-e.percent})),Hae(e,(function(e,t){t>n&&(c[e.id].set("visible",!1),e.invisible=!0)}))),mCe(e,h,w)}));var _=w.minY,x=w.maxY;Hae(y,(function(e,t){var n=t===m;Hae(e,(function(e){var t=Kle(c,e&&[e.id]);if(t)if(e.y<_||e.y>x)t.set("visible",!1);else{var r=t.getChildByIndex(0),i=r.getCanvasBBox(),o=n?i.x:i.maxX,l=i.y+i.height/2;qwe(r,e.x-o,e.y-l),e.labelLine&&function(e,t,n){var r,i=t.getCenter(),o=t.getRadius(),a={x:e.x-(n?wCe:-4),y:e.y},l=lye(i.x,i.y,o+bCe,e.angle),u={x:a.x,y:a.y},c={x:l.x,y:l.y},s=lye(i.x,i.y,o,e.angle);if(a.y!==l.y){var d=n?4:-4;u.y=a.y,e.angle<0&&e.angle>=-Math.PI/2&&(u.x=Math.max(l.x,a.x-d),a.y<l.y?c.y=u.y:(c.y=l.y,c.x=Math.max(c.x,u.x-d))),e.angle>0&&e.angle<Math.PI/2&&(u.x=Math.max(l.x,a.x-d),a.y>l.y?c.y=u.y:(c.y=l.y,c.x=Math.max(c.x,u.x-d))),e.angle>Math.PI/2&&(u.x=Math.min(l.x,a.x-d),a.y>l.y?c.y=u.y:(c.y=l.y,c.x=Math.min(c.x,u.x-d))),e.angle<-Math.PI/2&&(u.x=Math.min(l.x,a.x-d),a.y<l.y?c.y=u.y:(c.y=l.y,c.x=Math.min(c.x,u.x-d)))}r=["M ".concat(a.x,",").concat(a.y),"L ".concat(u.x,",").concat(u.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(s.x,",").concat(s.y)].join(" "),e.labelLine=Hle({},e.labelLine,{path:r})}(e,a,n)}}))}))}})),Fwe("path-adjust-position",(function(e,t,n,r,i){var o,a;if(0!==n.length){var l=null===(o=n[0])||void 0===o?void 0:o.get("element"),u=null==l?void 0:l.geometry;if(u&&!(["path","line","area"].indexOf(u.type)<0)){var c=Mae(u.getXYFields(),2),s=c[0],d=c[1],f=sle(t,(function(e){return e.get("data")[s]})),h=[],p=i&&i.offset||(null===(a=e[0])||void 0===a?void 0:a.offset)||12;$le(Wae(f).reverse(),(function(e){for(var t=function(e,t){var n=e.getXYFields()[1],r=[],i=t.sort((function(e,t){return e.get("data")[n]-e.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,Aae([],Mae(i),!1)),r}(u,f[e]);t.length;){var n=t.shift(),r=Xwe(n);if(zCe(h,n,(function(e,t){return e.get("data")[s]===t.get("data")[s]&&e.get("data")[d]===t.get("data")[d]})))r.set("visible",!1);else{var i=!1;HCe(h,n)&&(r.attr("y",r.attr("y")+2*p),i=HCe(h,n)),i?r.set("visible",!1):h.push(n)}}}))}}})),Swe("fade-in",(function(e,t,n){var r={fillOpacity:Bae(e.attr("fillOpacity"))?1:e.attr("fillOpacity"),strokeOpacity:Bae(e.attr("strokeOpacity"))?1:e.attr("strokeOpacity"),opacity:Bae(e.attr("opacity"))?1:e.attr("opacity")};e.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),e.animate(r,t)})),Swe("fade-out",(function(e,t,n){var r=t.easing,i=t.duration,o=t.delay;e.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){e.remove(!0)}),o)})),Swe("grow-in-x",(function(e,t,n){UCe(e,t,n.coordinate,n.minYPoint,"x")})),Swe("grow-in-xy",(function(e,t,n){UCe(e,t,n.coordinate,n.minYPoint,"xy")})),Swe("grow-in-y",(function(e,t,n){UCe(e,t,n.coordinate,n.minYPoint,"y")})),Swe("scale-in-x",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData.points,o=i[0].y-i[1].y>0?r.maxX:r.minX,a=(r.minY+r.maxY)/2;e.applyToMatrix([o,a,1]);var l=ise(e.getMatrix(),[["t",-o,-a],["s",.01,1],["t",o,a]]);e.setMatrix(l),e.animate({matrix:ise(e.getMatrix(),[["t",-o,-a],["s",100,1],["t",o,a]])},t)})),Swe("scale-in-y",(function(e,t,n){var r=e.getBBox(),i=e.get("origin").mappingData,o=(r.minX+r.maxX)/2,a=i.points,l=a[0].y-a[1].y<=0?r.maxY:r.minY;e.applyToMatrix([o,l,1]);var u=ise(e.getMatrix(),[["t",-o,-l],["s",1,.01],["t",o,l]]);e.setMatrix(u),e.animate({matrix:ise(e.getMatrix(),[["t",-o,-l],["s",1,100],["t",o,l]])},t)})),Swe("wave-in",(function(e,t,n){var r=bye(n.coordinate,20),i=r.type,o=r.startState,a=r.endState,l=e.setClip({type:i,attrs:o});n.toAttrs&&e.attr(n.toAttrs),l.animate(a,Sae(Sae({},t),{callback:function(){e&&!e.get("destroyed")&&e.set("clipShape",null),l.remove(!0),Lae(t.callback)&&t.callback()}}))})),Swe("zoom-in",(function(e,t,n){qCe(e,t,"zoomIn")})),Swe("zoom-out",(function(e,t,n){qCe(e,t,"zoomOut")})),Swe("position-update",(function(e,t,n){var r=n.toAttrs,i=r.x,o=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:i,y:o},t)})),Swe("sector-path-update",(function(e,t,n){var r=n.toAttrs,i=n.coordinate,o=r.path||[],a=o.map((function(e){return e[0]}));if(!(o.length<1)){var l=$Ce(o),u=l.startAngle,c=l.endAngle,s=l.radius,d=l.innerRadius,f=$Ce(e.attr("path")),h=f.startAngle,p=f.endAngle,v=i.getCenter(),g=u-h,m=c-p;0!==g||0!==m?e.animate((function(e){var t=h+e*g,n=p+e*m;return Sae(Sae({},r),{path:Yle(a,["M","A","A","Z"])?cye(v.x,v.y,s,t,n):uye(v.x,v.y,s,t,n,d)})}),Sae(Sae({},t),{callback:function(){e.attr("path",o),Lae(t.callback)&&t.callback()}})):e.attr(r)}})),Swe("path-in",(function(e,t,n){var r=e.getTotalLength();e.attr("lineDash",[r]),e.animate((function(e){return{lineDashOffset:(1-e)*r}}),t)})),Fye("rect",tSe),Fye("mirror",eSe),Fye("list",ZCe),Fye("matrix",QCe),Fye("circle",JCe),Fye("tree",nSe),swe("axis",hSe),swe("legend",mSe),swe("tooltip",xwe),swe("annotation",aSe),swe("slider",ySe),swe("scrollbar",bSe),zye("tooltip",kSe),zye("sibling-tooltip",CSe),zye("ellipsis-text",SSe),zye("element-active",PSe),zye("element-single-active",DSe),zye("element-range-active",ASe),zye("element-highlight",WSe),zye("element-highlight-by-x",GSe),zye("element-highlight-by-color",USe),zye("element-single-highlight",$Se),zye("element-range-highlight",YSe),zye("element-sibling-highlight",YSe,{effectSiblings:!0,effectByRecord:!0}),zye("element-selected",KSe),zye("element-single-selected",XSe),zye("element-range-selected",qSe),zye("element-link-by-color",MSe),zye("active-region",xSe),zye("list-active",ZSe),zye("list-selected",iOe),zye("list-highlight",rOe),zye("list-unchecked",oOe),zye("list-checked",uOe),zye("list-focus",sOe),zye("list-radio",hOe),zye("legend-item-highlight",rOe,{componentNames:["legend"]}),zye("axis-label-highlight",rOe,{componentNames:["axis"]}),zye("axis-description",XOe),zye("rect-mask",bOe),zye("x-rect-mask",xOe,{dim:"x"}),zye("y-rect-mask",xOe,{dim:"y"}),zye("circle-mask",gOe),zye("path-mask",SOe),zye("smooth-path-mask",POe),zye("rect-multi-mask",ROe),zye("x-rect-multi-mask",AOe,{dim:"x"}),zye("y-rect-multi-mask",AOe,{dim:"y"}),zye("circle-multi-mask",jOe),zye("path-multi-mask",DOe),zye("smooth-path-multi-mask",TOe),zye("cursor",FOe),zye("data-filter",NOe),zye("brush",BOe),zye("brush-x",BOe,{dims:["x"]}),zye("brush-y",BOe,{dims:["y"]}),zye("sibling-filter",VOe),zye("sibling-x-filter",VOe,{dims:"x"}),zye("sibling-y-filter",VOe,{dims:"y"}),zye("element-filter",zOe),zye("element-sibling-filter",HOe),zye("element-sibling-filter-record",HOe,{byRecord:!0}),zye("view-drag",UOe),zye("view-move",GOe),zye("scale-translate",$Oe),zye("scale-zoom",qOe),zye("reset-button",WOe,{name:"reset-button",text:"reset"}),zye("mousewheel-scroll",KOe),Tbe("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Tbe("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Tbe("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Tbe("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Tbe("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Tbe("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Tbe("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Tbe("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Tbe("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Tbe("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Tbe("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Tbe("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Tbe("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:JOe,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:JOe,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:JOe,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Tbe("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Tbe("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:JOe,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:JOe,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:JOe,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Tbe("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:JOe,action:"path-mask:start"},{trigger:"mousedown",isEnable:JOe,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Tbe("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:JOe,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(e){return!lbe(e)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),Tbe("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Tbe("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(e){return!e.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),Tbe("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Tbe("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Tbe("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),Tbe("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Tbe("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]}),Tbe("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return ZOe(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!ZOe(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Tbe("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Tbe("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var QOe,eEe,tEe=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];(eEe=QOe||(QOe={})).ERROR="error",eEe.WARN="warn",eEe.INFO="log";var nEe="AntV/G2Plot";function rEe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=0;return"".concat(nEe,": ").concat(e.replace(/%s/g,(function(){return"".concat(t[r++])})))}function iEe(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t||console[e](rEe.apply(void 0,Aae([n],r,!1)))}function oEe(e,t){var n={};return null!==e&&"object"===lr(e)&&t.forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function aEe(e,t){if(!e)return{};var n=e.filter((function(e){var n=Kle(e,[t]);return ple(n)&&!isNaN(n)})),r=n.every((function(e){return Kle(e,[t])>=0})),i=n.every((function(e){return Kle(e,[t])<=0}));return r?{min:0}:i?{max:0}:{}}function lEe(e,t,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(e))return{nodes:[],links:[]};var o=[],a={},l=-1;return e.forEach((function(e){var u=e[t],c=e[n],s=e[r],d=oEe(e,i);a[u]||(a[u]=Sae({id:++l,name:u},d)),a[c]||(a[c]=Sae({id:++l,name:c},d)),o.push(Sae({source:a[u].id,target:a[c].id,value:s},d))})),{nodes:Object.values(a).sort((function(e,t){return e.id-t.id})),links:o}}function uEe(e,t){var n=Tae(e,(function(e){var n=e[t];return null===n||"number"==typeof n&&!isNaN(n)}));return iEe(QOe.WARN,n.length===e.length,"illegal data existed in chart data."),n}var cEe,sEe={}.toString,dEe=function(e,t){return sEe.call(e)==="[object "+t+"]"},fEe=function(e){return dEe(e,"Array")},hEe=function(e){if(!function(e){return"object"===lr(e)&&null!==e}(e)||!dEe(e,"Object"))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},pEe=function(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i];o?hEe(o)?(hEe(e[i])||(e[i]={}),n<r?pEe(e[i],o,n+1,r):e[i]=t[i]):fEe(o)?(e[i]=[],e[i]=e[i].concat(o)):e[i]=o:e[i]=o}},vEe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)pEe(e,t[r]);return e};function gEe(e){if(!e)return{width:0,height:0};var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function mEe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}function yEe(e,t){return e.geometries.find((function(e){return e.type===t}))}function bEe(e){return ele(e.geometries,(function(e,t){return e.concat(t.elements)}),[])}function wEe(e){return Kle(e,["views","length"],0)<=0?bEe(e):ele(e.views,(function(e,t){return e.concat(wEe(t))}),bEe(e))}function _Ee(e){return e?e.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(e){return e.toLowerCase()})).join("-"):e}function xEe(e){if(!Nae(e,"Object"))return e;var t=Sae({},e);return t.formatter&&!t.content&&(t.content=t.formatter),t}function kEe(e){return"number"==typeof e&&!isNaN(e)}function CEe(e){if(ple(e))return[e,e,e,e];if(Vae(e)){var t=e.length;if(1===t)return[e[0],e[0],e[0],e[0]];if(2===t)return[e[0],e[1],e[0],e[1]];if(3===t)return[e[0],e[1],e[2],e[1]];if(4===t)return e}return[0,0,0,0]}function SEe(e,t,n){void 0===t&&(t="bottom"),void 0===n&&(n=25);var r=CEe(e),i=[t.startsWith("top")?n:0,t.startsWith("right")?n:0,t.startsWith("bottom")?n:0,t.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function OEe(e){var t=e.map((function(e){return CEe(e)})),n=[0,0,0,0];return t.length>0&&(n=n.map((function(e,n){return t.forEach((function(r,i){e+=t[i][n]})),e}))),n}Vle((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=t.fontWeight,a=t.fontStyle,l=t.fontVariant,u=(cEe||(cEe=document.createElement("canvas").getContext("2d")),cEe);return u.font=[a,o,l,"".concat(n,"px"),i].join(" "),u.measureText(nle(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),Aae([e],xle(t),!0).join("")}));var EEe=function(e,t,n,r){var i,o,a,l,u=[],c=!!r;if(c){a=[1/0,1/0],l=[-1/0,-1/0];for(var s=0,d=e.length;s<d;s++){a=Yce([0,0],a,h=e[s]),l=$ce([0,0],l,h)}a=Yce([0,0],a,r[0]),l=$ce([0,0],l,r[1])}s=0;for(var f=e.length;s<f;s++){var h=e[s];if(0!==s&&s!==f-1){i=e[s-1],o=e[s+1];var p=[0,0];p=qce(p=Qce(p,o,i),p,t);var v=Kce(h,i),g=Kce(h,o),m=v+g;0!==m&&(v/=m,g/=m);var y=qce([0,0],p,-v),b=qce([0,0],p,g),w=Uce([0,0],h,y),_=Uce([0,0],h,b);c&&(w=Yce([0,0],w=$ce([0,0],w,a),l),_=Yce([0,0],_=$ce([0,0],_,a),l)),u.push(w),u.push(_)}else u.push(h)}return u};function IEe(e,t,n){var r=[],i=e[0],o=null;if(e.length<=2)return function(e,t){var n=[];if(e.length){n.push(["M",e[0].x,e[0].y]);for(var r=1,i=e.length;r<i;r+=1){var o=e[r];n.push(["L",o.x,o.y])}}return n}(e);for(var a=0,l=e.length;a<l;a++){var u=e[a];o&&o.x===u.x&&o.y===u.y||(r.push(u.x),r.push(u.y),o=u)}var c=function(e,t,n){for(var r=[],i=0,o=e.length;i<o;i+=2)r.push([e[i],e[i+1]]);var a,l,u,c=EEe(r,.4,!1,n),s=r.length,d=[];for(i=0;i<s-1;i++)a=c[2*i],l=c[2*i+1],u=r[i+1],d.push(["C",a[0],a[1],l[0],l[1],u[0],u[1]]);return d}(r,0,[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function PEe(e){var t={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Kle(e,"fill")&&(t.color=e.fill);var r=oEe(e,n),i=r.shadowColor,o=r.shadowBlur,a=void 0===o?0:o,l=r.shadowOffsetX,u=void 0===l?0:l,c=r.shadowOffsetY,s=void 0===c?0:c;t["text-shadow"]="".concat([i,"".concat(u,"px"),"".concat(s,"px"),"".concat(a,"px")].join(" "));var d=oEe(e,n),f=d.stroke,h=d.lineWidth,p=void 0===h?0:h;return t["-webkit-text-stroke"]="".concat(["".concat(p,"px"),f].join(" ")),Hae(e,(function(e,r){["fontSize"].includes(r)&&ple(e)?t[_Ee(r)]="".concat(e,"px"):r&&!n.includes(r)&&(t[_Ee(r)]="".concat(e))})),t}function MEe(e,t){e.style["pointer-events"]="none",Hae(t,(function(t,n){n&&t&&(e.style[n]=t)}))}var REe=function(e,t,n){var r=t.statistic,i=t.plotType,o=r.title,a=r.content;[o,a].forEach((function(t,r){if(t){var l="";l=0===r?a?"translate(-50%, -100%)":"translate(-50%, -50%)":o?"translate(-50%, 0)":"translate(-50%, -50%)";var u=Lae(t.style)?t.style(n):t.style;e.annotation().html(Sae({position:["50%","50%"],html:function(e,r){var o=r.getCoordinate(),a=0;if("pie"===i||"ring-progress"===i)a=o.getRadius()*o.innerRadius*2;else if("liquid"===i){var c=Kle(r.geometries,[0,"elements",0,"shape"]);if(c)a=c.find((function(e){return"wrap"===e.get("name")})).getCanvasBBox().width}else a||(a=o.getWidth());MEe(e,Sae({width:"".concat(a,"px"),transform:l},PEe(u)));var s=r.getData();if(t.customHtml)return t.customHtml(e,r,n,s);var d=t.content;return t.formatter&&(d=t.formatter(n,s)),d?nle(d)?d:"".concat(d):"<div></div>"},key:"".concat(0===r?"top":"bottom","-statistic")},oEe(t,["offsetX","offsetY","rotate","style","formatter"])))}}))},AEe=function(e,t,n){var r=t.statistic;[r.title,r.content].forEach((function(t){if(t){var r=Lae(t.style)?t.style(n):t.style;e.annotation().html(Sae({position:["50%","100%"],html:function(e,i){var o=i.getCoordinate(),a=i.views[0].getCoordinate(),l=a.getCenter(),u=a.getRadius(),c=Math.max(Math.sin(a.startAngle),Math.sin(a.endAngle))*u,s=l.y+c-o.y.start-parseFloat(Kle(r,"fontSize",0)),d=o.getRadius()*o.innerRadius*2;MEe(e,Sae({width:"".concat(d,"px"),transform:"translate(-50%, ".concat(s,"px)")},PEe(r)));var f=i.getData();if(t.customHtml)return t.customHtml(e,i,n,f);var h=t.content;return t.formatter&&(h=t.formatter(n,f)),h?nle(h)?h:"".concat(h):"<div></div>"}},oEe(t,["offsetX","offsetY","rotate","style","formatter"])))}}))};function jEe(e,t){return t?ele(t,(function(e,t,n){return e.replace(new RegExp("{\\s*".concat(n,"\\s*}"),"g"),t)}),e):e}function DEe(e,t){return e.views.find((function(e){return e.id===t}))}function TEe(e){var t=e.parent;return t?t.views:[]}function FEe(e){return TEe(e).filter((function(t){return t!==e}))}function NEe(e,t,n){void 0===n&&(n=e.geometries),"boolean"==typeof t?e.animate(t):e.animate(!0),Hae(n,(function(e){var n;n=Lae(t)?t(e.type||e.shapeType,e)||!0:t,e.animate(n)}))}function LEe(){return"object"===("undefined"==typeof window?"undefined":lr(window))?null===window||void 0===window?void 0:window.devicePixelRatio:2}function BEe(e,t){void 0===t&&(t=e);var n=document.createElement("canvas"),r=LEe();return n.width=e*r,n.height=t*r,n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px"),n.getContext("2d").scale(r,r),n}function VEe(e,t,n,r){void 0===r&&(r=n);var i=t.backgroundColor,o=t.opacity;e.globalAlpha=o,e.fillStyle=i,e.beginPath(),e.fillRect(0,0,n,r),e.closePath()}function zEe(e,t,n){var r=e+t;return n?2*r:r}function HEe(e,t){return t?[[e*(1/4),e*(1/4)],[e*(3/4),e*(3/4)]]:[[.5*e,.5*e]]}function WEe(e,t){var n=t*Math.PI/180;return{a:Math.cos(n)*(1/e),b:Math.sin(n)*(1/e),c:-Math.sin(n)*(1/e),d:Math.cos(n)*(1/e),e:0,f:0}}var UEe={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function GEe(e,t,n,r){var i=t.size,o=t.fill,a=t.lineWidth,l=t.stroke,u=t.fillOpacity;e.beginPath(),e.globalAlpha=u,e.fillStyle=o,e.strokeStyle=l,e.lineWidth=a,e.arc(n,r,i/2,0,2*Math.PI,!1),e.fill(),a&&e.stroke(),e.closePath()}var YEe={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function $Ee(e){var t=vEe({},YEe,e),n=t.spacing,r=t.rotation,i=t.lineWidth,o=n+i||1,a=n+i||1,l="\n            M 0 0 L ".concat(o," 0\n            M 0 ").concat(a," L ").concat(o," ").concat(a,"\n            "),u=BEe(o,a),c=u.getContext("2d");VEe(c,t,o,a),function(e,t,n){var r=t.stroke,i=t.lineWidth,o=t.strokeOpacity,a=new Path2D(n);e.globalAlpha=o,e.lineCap="square",e.strokeStyle=i?r:"transparent",e.lineWidth=i,e.stroke(a)}(c,t,l);var s=c.createPattern(u,"repeat");if(s){var d=WEe(LEe(),r);s.setTransform(d)}return s}var qEe={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function KEe(e,t,n,r){var i=t.stroke,o=t.size,a=t.fill,l=t.lineWidth,u=t.fillOpacity;e.globalAlpha=u,e.strokeStyle=i,e.lineWidth=l,e.fillStyle=a,e.strokeRect(n-o/2,r-o/2,o,o),e.fillRect(n-o/2,r-o/2,o,o)}function XEe(e){var t,n=e.type,r=e.cfg;switch(n){case"dot":t=function(e){var t=vEe({},UEe,e),n=t.size,r=t.padding,i=t.isStagger,o=t.rotation,a=zEe(n,r,i),l=HEe(a,i),u=BEe(a,a),c=u.getContext("2d");VEe(c,t,a);for(var s=0,d=l;s<d.length;s++){var f=d[s];GEe(c,t,f[0],f[1])}var h=c.createPattern(u,"repeat");if(h){var p=WEe(LEe(),o);h.setTransform(p)}return h}(r);break;case"line":t=$Ee(r);break;case"square":t=function(e){var t=vEe({},qEe,e),n=t.size,r=t.padding,i=t.isStagger,o=t.rotation,a=zEe(n,r,i),l=HEe(a,i),u=BEe(a,a),c=u.getContext("2d");VEe(c,t,a);for(var s=0,d=l;s<d.length;s++){var f=d[s];KEe(c,t,f[0],f[1])}var h=c.createPattern(u,"repeat");if(h){var p=WEe(LEe(),o);h.setTransform(p)}return h}(r)}return t}function JEe(e){var t=this;return function(n){var r,i=n.options,o=n.chart,a=i.pattern;if(!a)return n;return vEe({},n,{options:(r={},r[e]=function(n){for(var r,l,u,c=[],s=1;s<arguments.length;s++)c[s-1]=arguments[s];var d=o.getTheme().defaultColor,f=d,h=null===(l=null===(r=o.geometries)||void 0===r?void 0:r[0])||void 0===l?void 0:l.getAttribute("color");if(h){var p=h.getFields()[0],v=Kle(n,p);f=x_e.getMappingValue(h,v,(null===(u=h.values)||void 0===u?void 0:u[0])||d)}var g=a;"function"==typeof a&&(g=a.call(t,n,f)),g instanceof CanvasPattern==!1&&(g=XEe(vEe({},{cfg:{backgroundColor:f}},g)));var m=i[e];return Sae(Sae({},"function"==typeof m?m.call.apply(m,Aae([t,n],c,!1)):m||{}),{fill:g||f})},r)})}}function ZEe(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,o=n.seriesField;return!1===r?t.legend(!1):(i||o)&&t.legend(i||o,r),e}function QEe(e){var t=e.chart,n=e.options.tooltip;return void 0!==n&&t.tooltip(n),e}function eIe(e){var t=e.chart;return Hae(e.options.interactions,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),e}function tIe(e){return NEe(e.chart,e.options.animation),e}function nIe(e){var t=e.chart,n=e.options.theme;return n&&t.theme(n),e}function rIe(e){var t=e.chart,n=e.options.state;return n&&Hae(t.geometries,(function(e){e.state(n)})),e}function iIe(e){var t=e.chart,n=e.options.slider;return t.option("slider",n),e}function oIe(e){var t=e.chart,n=e.options.scrollbar;return t.option("scrollbar",n),e}function aIe(e,t){return function(n){var r=n.chart,i=n.options,o={};return Hae(e,(function(e,t){o[t]=oEe(e,tEe)})),o=vEe({},t,i.meta,o),r.scale(o),n}}function lIe(e){return function(t){var n=t.chart,r=t.options,i=n.getController("annotation");return Hae(Aae(Aae([],r.annotations||[],!0),e||[],!0),(function(e){i.annotation(e)})),t}}function uIe(e){var t=e.chart,n=e.options,r=n.yAxis,i=n.limitInPlot,o=i;return zae(r)&&Bae(i)&&(o=!!Object.values(oEe(r,["min","max","minLimit","maxLimit"])).some((function(e){return!Bae(e)}))),t.limitInPlot=o,e}function cIe(e){return function(t){var n=t.chart,r=t.options.coordinate,i=Array.from(r||[]).map((function(e){return"reflectX"===e.type?["reflect","x"]:"reflectY"===e.type?["reflect","y"]:"transpose"===e.type?["transpose"]:null})).filter((function(e){return!!e}));return 0!==i.length&&n.coordinate({type:e,actions:i}),t}}var sIe={locale:"en-US"},dIe={};function fIe(e,t){dIe[e]=t}function hIe(e){return{get:function(t,n){return jEe(Kle(dIe[e],t)||Kle(dIe[sIe.locale],t)||Kle(dIe["en-US"],t)||t,n)}}}function pIe(e,t){if(!1===e)return{fields:!1};var n=Kle(e,"fields"),r=Kle(e,"formatter");return r&&!n&&(n=t),{fields:n,formatter:r}}function vIe(e,t){var n=e.type,r=e.xField,i=e.yField,o=e.colorField,a=e.shapeField,l=e.sizeField,u=e.styleField,c=e.rawFields,s=[];if(c=(Lae(c)?c(n,t):c)||[],"color"===t)s=Aae([o||r],c,!0);else if("shape"===t)s=Aae([a||r],c,!0);else if("size"===t)s=Aae([l||r],c,!0);else{s=Aae([r,i,o,a,l,u],c,!0);var d=["x","y","color","shape","size","style"].indexOf(t),f=s[d];s.splice(d,1),s.unshift(f)}var h=rle(s.filter((function(e){return!!e}))),p="line"===n&&[r,i].includes(h.join("*"))?"":h.join("*");return{mappingFields:h,tileMappingField:p}}function gIe(e,t){if(t)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return e.forEach((function(e,t){i[e]=n[t]})),delete i[void 0],t(i)}}function mIe(e){var t=e.chart,n=e.options,r=n.type,i=n.args,o=n.mapping,a=n.xField,l=n.yField,u=n.colorField,c=n.shapeField,s=n.sizeField,d=n.tooltipFields,f=n.label,h=n.state,p=n.customInfo;if(!o)return e;var v=o.color,g=o.shape,m=o.size,y=o.style,b=o.tooltip,w=t[r](i).position("".concat(a,"*").concat(l));if(nle(v))u?w.color(u,v):w.color(v);else if(Lae(v)){var _=vIe(n,"color"),x=_.mappingFields,k=_.tileMappingField;w.color(k,gIe(x,v))}else u&&w.color(u,v);if(nle(g))c?w.shape(c,[g]):w.shape(g);else if(Lae(g)){var C=vIe(n,"shape");x=C.mappingFields,k=C.tileMappingField;w.shape(k,gIe(x,g))}else c&&w.shape(c,g);if(ple(m))s?w.size(s,m):w.size(m);else if(Lae(m)){var S=vIe(n,"size");x=S.mappingFields,k=S.tileMappingField;w.size(k,gIe(x,m))}else s&&w.size(s,m);if(Lae(y)){var O=vIe(n,"style");x=O.mappingFields,k=O.tileMappingField;w.style(k,gIe(x,y))}else zae(y)&&w.style(y);if(!1===d?w.tooltip(!1):Gle(d)||w.tooltip(d.join("*"),gIe(d,b)),!1===f)w.label(!1);else if(f){var E=f.callback,I=f.fields,P=Oae(f,["callback","fields"]);w.label({fields:I||[l],callback:E,cfg:xEe(P)})}return h&&w.state(h),p&&w.customInfo(p),[a,l].filter((function(e){return e!==u})).forEach((function(e){t.legend(e,!1)})),Sae(Sae({},e),{ext:{geometry:w}})}function yIe(e){var t=e.options,n=t.area,r=t.xField,i=t.yField,o=t.seriesField,a=t.smooth,l=t.tooltip,u=t.useDeferredLabel,c=pIe(l,[r,i,o]),s=c.fields,d=c.formatter;return n?mIe(vEe({},e,{options:{type:"area",colorField:o,tooltipFields:s,mapping:Hle({shape:a?"smooth":"area",tooltip:d},n),args:{useDeferredLabel:u}}})):e}function bIe(e){var t=e.options,n=t.edge,r=t.xField,i=t.yField,o=t.seriesField,a=t.tooltip,l=t.useDeferredLabel,u=pIe(a,[r,i,o]),c=u.fields,s=u.formatter;return n?mIe(vEe({},e,{options:{type:"edge",colorField:o,tooltipFields:c,mapping:Sae({tooltip:s},n),args:{useDeferredLabel:l}}})):e}function wIe(e){var t=e.options,n=t.xField,r=t.yField,i=t.interval,o=t.seriesField,a=t.tooltip,l=t.minColumnWidth,u=t.maxColumnWidth,c=t.columnBackground,s=t.dodgePadding,d=t.intervalPadding,f=t.useDeferredLabel,h=pIe(a,[n,r,o]),p=h.fields,v=h.formatter,g=(i?mIe(vEe({},e,{options:{type:"interval",colorField:o,tooltipFields:p,mapping:Sae({tooltip:v},i),args:{dodgePadding:s,intervalPadding:d,minColumnWidth:l,maxColumnWidth:u,background:c,useDeferredLabel:f}}})):e).ext;return function(e){var t=e.chart,n=e.options,r=e.ext,i=n.seriesField,o=n.isGroup,a=n.isStack,l=n.marginRatio,u=n.widthRatio,c=n.groupField,s=n.theme,d=[];return i&&(o&&d.push({type:"dodge",dodgeBy:c||i,marginRatio:l}),a&&d.push({type:"stack",marginRatio:l})),d.length&&(null==r?void 0:r.geometry)&&(null==r?void 0:r.geometry).adjust(d),Bae(u)||t.theme(vEe({},zae(s)?s:Zbe(s),{columnWidthRatio:u})),e}(Sae(Sae({},e),{ext:g}))}function _Ie(e){var t=e.options,n=t.line,r=t.stepType,i=t.xField,o=t.yField,a=t.seriesField,l=t.smooth,u=t.connectNulls,c=t.tooltip,s=t.useDeferredLabel,d=pIe(c,[i,o,a]),f=d.fields,h=d.formatter;return n?mIe(vEe({},e,{options:{type:"line",colorField:a,tooltipFields:f,mapping:Hle({shape:r||(l?"smooth":"line"),tooltip:h},n),args:{connectNulls:u,useDeferredLabel:s}}})):e}function xIe(e){var t=e.options,n=t.point,r=t.xField,i=t.yField,o=t.seriesField,a=t.sizeField,l=t.shapeField,u=t.tooltip,c=t.useDeferredLabel,s=pIe(u,[r,i,o,a,l]),d=s.fields,f=s.formatter;return n?mIe(vEe({},e,{options:{type:"point",colorField:o,shapeField:l,tooltipFields:d,mapping:Sae({tooltip:f},n),args:{useDeferredLabel:c}}})):e}function kIe(e){var t=e.options,n=t.polygon,r=t.xField,i=t.yField,o=t.seriesField,a=t.tooltip,l=t.useDeferredLabel,u=pIe(a,[r,i,o]),c=u.fields,s=u.formatter;return n?mIe(vEe({},e,{options:{type:"polygon",colorField:o,tooltipFields:c,mapping:Sae({tooltip:s},n),args:{useDeferredLabel:l}}})):e}function CIe(e){var t=e.options,n=t.schema,r=t.xField,i=t.yField,o=t.seriesField,a=t.tooltip,l=t.useDeferredLabel,u=pIe(a,[r,i,o]),c=u.fields,s=u.formatter;return n?mIe(vEe({},e,{options:{type:"schema",colorField:o,tooltipFields:c,mapping:Sae({tooltip:s},n),args:{useDeferredLabel:l}}})):e}var SIe={},OIe={},EIe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=1;e.default=function(){return"".concat(t++)}}(EIe);var IIe={},PIe={},MIe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}}}(MIe);var RIe={};Object.defineProperty(RIe,"__esModule",{value:!0}),RIe.SizeSensorId=RIe.SensorTabIndex=RIe.SensorClassName=void 0;RIe.SizeSensorId="size-sensor-id";RIe.SensorClassName="size-sensor-object";RIe.SensorTabIndex="-1",Object.defineProperty(PIe,"__esModule",{value:!0}),PIe.createSensor=void 0;var AIe,jIe=(AIe=MIe).__esModule?AIe:{default:AIe},DIe=RIe;PIe.createSensor=function(e,t){var n=void 0,r=[],i=(0,jIe.default)((function(){r.forEach((function(t){t(e)}))})),o=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",i),n.parentNode.removeChild(n),e.removeAttribute(DIe.SizeSensorId),n=void 0,r=[],t&&t())};return{element:e,bind:function(t){n||(n=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",i),i()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("class",DIe.SensorClassName),t.setAttribute("tabindex",DIe.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===r.indexOf(t)&&r.push(t)},destroy:o,unbind:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1),0===r.length&&n&&o()}}};var TIe={};Object.defineProperty(TIe,"__esModule",{value:!0}),TIe.createSensor=void 0;var FIe=RIe,NIe=function(e){return e.__esModule?e:{default:e}}(MIe);TIe.createSensor=function(e,t){var n=void 0,r=[],i=(0,NIe.default)((function(){r.forEach((function(t){t(e)}))})),o=function(){n.disconnect(),r=[],n=void 0,e.removeAttribute(FIe.SizeSensorId),t&&t()};return{element:e,bind:function(t){var o;n||((o=new ResizeObserver(i)).observe(e),i(),n=o),-1===r.indexOf(t)&&r.push(t)},destroy:o,unbind:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1),0===r.length&&n&&o()}}},Object.defineProperty(IIe,"__esModule",{value:!0}),IIe.createSensor=void 0;var LIe=PIe,BIe="undefined"!=typeof ResizeObserver?TIe.createSensor:LIe.createSensor;IIe.createSensor=BIe,Object.defineProperty(OIe,"__esModule",{value:!0}),OIe.removeSensor=OIe.getSensor=OIe.Sensors=void 0;var VIe=function(e){return e.__esModule?e:{default:e}}(EIe),zIe=IIe,HIe=RIe;var WIe={};function UIe(e){e&&WIe[e]&&delete WIe[e]}OIe.Sensors=WIe;OIe.getSensor=function(e){var t=e.getAttribute(HIe.SizeSensorId);if(t&&WIe[t])return WIe[t];var n=(0,VIe.default)();e.setAttribute(HIe.SizeSensorId,n);var r=(0,zIe.createSensor)(e,(function(){return UIe(n)}));return WIe[n]=r,r};OIe.removeSensor=function(e){var t=e.element.getAttribute(HIe.SizeSensorId);e.destroy(),UIe(t)},Object.defineProperty(SIe,"__esModule",{value:!0}),SIe.ver=SIe.clear=YIe=SIe.bind=void 0;var GIe=OIe,YIe=SIe.bind=function(e,t){var n=(0,GIe.getSensor)(e);return n.bind(t),function(){n.unbind(t)}};SIe.clear=function(e){var t=(0,GIe.getSensor)(e);(0,GIe.removeSensor)(t)};SIe.ver="1.0.2";var $Ie="data-chart-source-type",qIe=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],KIe=function(e){function t(t,n){var r=e.call(this)||this;return r.container="string"==typeof t?document.getElementById(t):t,r.options=vEe({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return Cae(t,e),t.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},t.prototype.createG2=function(){var e=this.options,t=e.width,n=e.height,r=e.defaultInteractions;this.chart=new wwe(Sae(Sae(Sae(Sae({container:this.container,autoFit:!1},this.getChartSize(t,n)),{localRefresh:!1}),oEe(this.options,qIe)),{defaultInteractions:r})),this.container.setAttribute($Ie,"G2Plot")},t.prototype.getChartSize=function(e,t){var n=gEe(this.container);return{width:e||n.width||400,height:t||n.height||400}},t.prototype.bindEvents=function(){var e=this;this.chart&&this.chart.on("*",(function(t){(null==t?void 0:t.type)&&e.emit(t.type,t)}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},t.prototype.update=function(e){this.updateOption(e),this.render()},t.prototype.updateOption=function(e){this.options=vEe({},this.options,e)},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Hae(wEe(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=wEe(this.chart),t=[];return Hae(e,(function(e){var n=e.getData();Hae(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.prototype.changeData=function(e){this.update({data:e})},t.prototype.changeSize=function(e,t){this.chart.changeSize(e,t)},t.prototype.addAnnotations=function(e,t){t=t||this.chart;var n=Aae([],e,!0),r=t.getController("annotation"),i=r.getComponents().map((function(e){return e.extra}));r.clear(!0);for(var o=function(e){var t=i[e],o=n.findIndex((function(e){return e.id&&e.id===t.id}));-1!==o&&(t=vEe({},t,n[o]),n.splice(o,1)),r.annotation(t)},a=0;a<i.length;a++)o(a);n.forEach((function(e){return r.annotation(e)})),t.render(!0)},t.prototype.removeAnnotations=function(e){var t=this.chart.getController("annotation"),n=t.getComponents().map((function(e){return e.extra}));t.clear(!0);for(var r=function(r){var i=n[r];e.find((function(e){return e.id&&e.id===i.id}))||t.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},t.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute($Ie)},t.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor(),t=this.options,n=t.padding,r=t.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,e({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var e=this;if(!this.unbind){var t=this.options.autoFit;(void 0===t||t)&&(this.unbind=YIe(this.container,(function(){var t=gEe(e.container),n=t.width,r=t.height;n===e.chart.width&&r===e.chart.height||e.triggerResize()})))}},t.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},t}(Wue);function XIe(e,t,n,r){var i=ele(e,(function(e,r){var i=r[n],o=e.has(i)?e.get(i):0,a=r[t];return o=kEe(a)?o+a:o,e.set(i,o),e}),new Map);return $le(e,(function(e){var o,a=e[t],l=e[n],u=kEe(a)&&0!==i.get(l)?a/i.get(l):0;return Sae(Sae({},e),((o={})[r]=u,o))}))}function JIe(e,t,n,r,i){return i?XIe(e,t,n,r):e}function ZIe(e){var t=e.chart,n=e.options,r=n.data,i=n.color,o=n.lineStyle,a=n.lineShape,l=n.point,u=n.area,c=n.seriesField,s=null==l?void 0:l.state,d=null==u?void 0:u.state;t.data(r);var f=vEe({},e,{options:{shapeField:c,line:{color:i,style:o,shape:a},point:l&&Sae({color:i,shape:"circle"},l),area:u&&Sae({color:i},u),label:void 0}}),h=vEe({},f,{options:{tooltip:!1,state:s}}),p=vEe({},f,{options:{tooltip:!1,state:d}});return _Ie(f),xIe(h),yIe(p),e}function QIe(e){var t,n,r=e.options,i=r.xAxis,o=r.yAxis,a=r.xField,l=r.yField,u=r.data;return mEe(aIe(((t={})[a]=i,t[l]=o,t),((n={})[a]={type:"cat"},n[l]=aEe(u,l),n)))(e)}function ePe(e){var t=e.chart,n=e.options.reflect;if(n){var r=n;Vae(r)||(r=[r]);var i=r.map((function(e){return["reflect",e]}));t.coordinate({type:"rect",actions:i})}return e}function tPe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?t.axis(a,!1):t.axis(a,i),e}function nPe(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function rPe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=yEe(t,"line");if(r){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:Sae({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xEe(l))})}else o.label(!1);return e}function iPe(e){var t=e.chart;return e.options.isStack&&Hae(t.geometries,(function(e){e.adjust("stack")})),e}function oPe(e){return mEe(ZIe,QIe,iPe,nIe,ePe,tPe,nPe,QEe,rPe,iIe,oIe,eIe,tIe,lIe(),uIe)(e)}function aPe(e){var t=e.chart,n=e.options,r=n.data,i=n.areaStyle,o=n.areaShape,a=n.color,l=n.point,u=n.line,c=n.isPercent,s=n.xField,d=n.yField,f=n.tooltip,h=n.seriesField,p=n.startOnZero,v=null==l?void 0:l.state,g=JIe(r,d,s,d,c);t.data(g);var m=c?Sae({formatter:function(e){return{name:e[h]||e[s],value:(100*Number(e[d])).toFixed(2)+"%"}}},f):f,y=vEe({},e,{options:{area:{color:a,style:i,shape:o},point:l&&Sae({color:a},l),tooltip:m,label:void 0,args:{startOnZero:p}}}),b={chart:t,options:vEe({line:{size:2}},Qle(n,["state"]),{line:u&&Sae({color:a},u),sizeField:h,state:null==u?void 0:u.state,tooltip:!1,label:void 0,args:{startOnZero:p}})},w=vEe({},y,{options:{tooltip:!1,state:v}});return yIe(y),_Ie(b),xIe(w),e}function lPe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=yEe(t,"area");if(r){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:Sae({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xEe(l))})}else o.label(!1);return e}function uPe(e){var t=e.chart,n=e.options,r=n.isStack,i=n.isPercent,o=n.seriesField;return(i||r)&&o&&Hae(t.geometries,(function(e){e.adjust("stack")})),e}function cPe(e){return mEe(nIe,JEe("areaStyle"),cIe("rect"),aPe,QIe,uPe,tPe,nPe,QEe,lPe,iIe,lIe(),eIe,tIe,uIe)(e)}var sPe=vEe({},KIe.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),dPe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}return Cae(t,e),t.getDefaultOptions=function(){return sPe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.isPercent,r=t.xField,i=t.yField;QIe({chart:this.chart,options:this.options}),this.chart.changeData(JIe(e,i,r,i,n))},t.prototype.getSchemaAdaptor=function(){return cPe},t}(KIe),fPe={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},hPe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=Sae({name:"button"},fPe),t}return Cae(t,e),t.prototype.getButtonCfg=function(){var e=this.context.view,t=Kle(e,["interactions","filter-action","cfg","buttonConfig"]);return vEe(this.buttonCfg,t,this.cfg)},t.prototype.drawButton=function(){var e=this.getButtonCfg(),t=this.context.view.foregroundGroup.addGroup({name:e.name}),n=this.drawText(t);this.drawBackground(t,n.getBBox()),this.buttonGroup=t},t.prototype.drawText=function(e){var t,n=this.getButtonCfg();return e.addShape({type:"text",name:"button-text",attrs:Sae({text:n.text},null===(t=n.textStyle)||void 0===t?void 0:t.default)})},t.prototype.drawBackground=function(e,t){var n,r=this.getButtonCfg(),i=CEe(r.padding),o=e.addShape({type:"rect",name:"button-rect",attrs:Sae({x:t.x-i[3],y:t.y-i[0],width:t.width+i[1]+i[3],height:t.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return o.toBack(),e.on("mouseenter",(function(){var e;o.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.active)})),e.on("mouseleave",(function(){var e;o.attr(null===(e=r.buttonStyle)||void 0===e?void 0:e.default)})),o},t.prototype.resetPosition=function(){var e=this.context.view.getCoordinate().convert({x:1,y:1}),t=this.buttonGroup,n=t.getBBox(),r=x_e.transform(null,[["t",e.x-n.width-10,e.y+n.height+5]]);t.setMatrix(r)},t.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},t.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},t.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),e.prototype.destroy.call(this)},t}(Nye);function pPe(e){return e.isInPlot()}function vPe(e,t,n){var r=n||{},i=r.mask,o=r.isStartEnable,a=t||"rect";switch(e){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||pPe,action:["brush:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:pPe,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:pPe,action:["brush:filter","brush:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(e){return!!o&&!o(e)}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(e){return!e.isInShape("mask")},action:["".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(a,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(a,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(a,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(a,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(a,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(a,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||pPe,action:["brush-x:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:pPe,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:pPe,action:["brush-x:filter","brush-x:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(e){return!e.isInShape("mask")},action:["".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[{maskStyle:null==i?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(a,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(a,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(a,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(a,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(a,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(a,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||pPe,action:["brush-y:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null==i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:pPe,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:pPe,action:["brush-y:filter","brush-y:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};default:return{}}}zye("brush-reset-button",hPe,{name:"brush-reset-button"}),Tbe("filter-action",{}),Tbe("brush",vPe("brush")),Tbe("brush-highlight",vPe("brush-highlight")),Tbe("brush-x",vPe("brush-x","x-rect")),Tbe("brush-y",vPe("brush-y","y-rect")),Tbe("brush-x-highlight",vPe("brush-x-highlight","x-rect")),Tbe("brush-y-highlight",vPe("brush-y-highlight","y-rect"));var gPe=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function mPe(e){var t=e.options,n=t.brush,r=Tae(t.interactions||[],(function(e){return-1===gPe.indexOf(e.type)}));return(null==n?void 0:n.enabled)&&(gPe.forEach((function(e){var t=!1;switch(n.type){case"x-rect":t=e===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":t=e===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:t=e===("highlight"===n.action?"brush-highlight":"brush")}var i={type:e,enable:t};n&&(i.cfg=vPe(e,n.type,n)),r.push(i)})),"highlight"!==(null==n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),vEe({},e,{options:{interactions:r}})}var yPe={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},bPe=function(e,t){return"hover"===e?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:t}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:t}]}]};function wPe(e,t){return ple(e)&&ple(t)?0===e&&0===t?"-":e===t?"100%":0===e?"∞":"".concat((100*t/e).toFixed(2),"%"):"-"}function _Pe(e,t){return vEe({size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:!1!==e.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==e.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:wPe}},e)}function xPe(e,t){return $le(t.getModel().points,(function(t){return e.convertPoint(t)}))}function kPe(e,t,n){!function(e,t,n){var r=e.view,i=e.geometry,o=e.group,a=e.options,l=e.horizontal,u=a.offset,c=a.size,s=a.arrow,d=r.getCoordinate(),f=xPe(d,t)[3],h=xPe(d,n)[0],p=h.y-f.y,v=h.x-f.x;if("boolean"!=typeof s){var g,m=s.headSize,y=a.spacing;l?(v-m)/2<y?(y=Math.max(1,(v-m)/2),g=[[f.x+y,f.y-u],[f.x+y,f.y-u-c],[h.x-y,h.y-u-c/2]]):g=[[f.x+y,f.y-u],[f.x+y,f.y-u-c],[h.x-y-m,h.y-u-c],[h.x-y,h.y-u-c/2],[h.x-y-m,h.y-u]]:(p-m)/2<y?(y=Math.max(1,(p-m)/2),g=[[f.x+u,f.y+y],[f.x+u+c,f.y+y],[h.x+u+c/2,h.y-y]]):g=[[f.x+u,f.y+y],[f.x+u+c,f.y+y],[h.x+u+c,h.y-y-m],[h.x+u+c/2,h.y-y],[h.x+u,h.y-y-m]],o.addShape("polygon",{id:"".concat(r.id,"-conversion-tag-arrow-").concat(i.getElementId(t.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:t,nextElement:n},attrs:Sae(Sae({},s.style||{}),{points:g})})}}(e,t,n),function(e,t,n){var r,i,o,a=e.view,l=e.geometry,u=e.group,c=e.options,s=e.field,d=e.horizontal,f=c.offset,h=c.size;if("boolean"!=typeof c.text){var p=a.getCoordinate(),v=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(t.getData()[s],n.getData()[s])),g=xPe(p,t)[d?3:0],m=xPe(p,n)[d?0:3],y=u.addShape("text",{id:"".concat(a.id,"-conversion-tag-text-").concat(l.getElementId(t.getModel().mappingData)),name:"conversion-tag-text",origin:{element:t,nextElement:n},attrs:Sae(Sae({},(null===(o=c.text)||void 0===o?void 0:o.style)||{}),{text:v,x:d?(g.x+m.x)/2:g.x+f+h/2,y:d?g.y-f-h/2:(g.y+m.y)/2})});if(d){var b=m.x-g.x,w=y.getBBox().width;if(w>b){var _=w/v.length,x=Math.max(1,Math.ceil(b/_)-1),k="".concat(v.slice(0,x),"...");y.attr("text",k)}}}}(e,t,n)}function CPe(e){var t=e.options,n=t.legend,r=t.seriesField,i=t.isStack;return r?!1!==n&&(n=Sae({position:i?"right-top":"top-left"},n)):n=!1,e.options.legend=n,e}function SPe(e){var t=e.chart,n=e.options,r=n.data,i=n.columnStyle,o=n.color,a=n.columnWidthRatio,l=n.isPercent,u=n.isGroup,c=n.isStack,s=n.xField,d=n.yField,f=n.seriesField,h=n.groupField,p=n.tooltip,v=n.shape,g=l&&u&&c?function(e,t,n,r){var i=ele(e,(function(e,r){var i=ele(n,(function(e,t){return"".concat(e).concat(r[t])}),""),o=e.has(i)?e.get(i):0,a=r[t];return o=kEe(a)?o+a:o,e.set(i,o),e}),new Map);return $le(e,(function(e){var o,a=e[t],l=ele(n,(function(t,n){return"".concat(t).concat(e[n])}),""),u=kEe(a)&&0!==i.get(l)?a/i.get(l):0;return Sae(Sae({},e),((o={})[r]=u,o))}))}(r,d,[s,h],d):JIe(r,d,s,d,l),m=[];c&&f&&!u?g.forEach((function(e){var t=m.find((function(t){return t[s]===e[s]&&t[f]===e[f]}));t?t[d]+=e[d]||0:m.push(Sae({},e))})):m=g,t.data(m);var y=l?Sae({formatter:function(e){var t;return{name:u&&c?"".concat(e[f]," - ").concat(e[h]):null!==(t=e[f])&&void 0!==t?t:e[s],value:(100*Number(e[d])).toFixed(2)+"%"}}},p):p,b=vEe({},e,{options:{data:m,widthRatio:a,tooltip:y,interval:{shape:v,style:i,color:o}}});return wIe(b),b}function OPe(e){var t,n,r=e.options,i=r.xAxis,o=r.yAxis,a=r.xField,l=r.yField,u=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return mEe(aIe(((t={})[a]=i,t[l]=o,t),((n={})[a]={type:"cat"},n[l]=Sae(Sae({},aEe(u,l)),c),n)))(e)}function EPe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?t.axis(a,!1):t.axis(a,i),e}function IPe(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return r&&i?t.legend(i,r):!1===r&&t.legend(!1),e}function PPe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=n.isRange,a=yEe(t,"interval");if(r){var l=r.callback,u=Oae(r,["callback"]);a.label({fields:[i],callback:l,cfg:Sae({layout:(null==u?void 0:u.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},xEe(o?Sae({content:function(e){var t;return null===(t=e[i])||void 0===t?void 0:t.join("-")}},u):u))})}else a.label(!1);return e}function MPe(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.isGroup,o=n.isStack,a=n.groupField,l=n.data,u=n.xField,c=n.yField,s=n.seriesField;if(!1===r)t.tooltip(!1);else{var d=r;if(i&&o){var f=d.customItems,h=(null==d?void 0:d.formatter)||function(e){return{name:"".concat(e[s]," - ").concat(e[a]),value:e[c]}};d=Sae(Sae({},d),{customItems:function(e){var t=[];return Hae(e,(function(e){Tae(l,(function(t){return Uae(t,oEe(e.data,[u,s]))})).forEach((function(n){t.push(Sae(Sae(Sae({},e),{value:n[c],data:n,mappingData:{_origin:n}}),h(n)))}))})),f?f(t):t}})}t.tooltip(d)}return e}function RPe(e,t){void 0===t&&(t=!1);var n,r,i,o,a=e.options,l=a.seriesField;return mEe(CPe,nIe,JEe("columnStyle"),rIe,cIe("rect"),SPe,OPe,EPe,IPe,MPe,iIe,oIe,PPe,mPe,eIe,tIe,lIe(),(r=a.yField,void 0===(i=!t)&&(i=!0),void 0===(o=!!l)&&(o=!1),function(e){var t=e.options,n=e.chart,a=t.conversionTag,l=t.theme;return a&&!o&&(n.theme(vEe({},zae(l)?l:Zbe(l),{columnWidthRatio:1/3})),n.annotation().shape({render:function(e,t){var o=e.addGroup({id:"".concat(n.id,"-conversion-tag-group"),name:"conversion-tag-group"}),l=$ae(n.geometries,(function(e){return"interval"===e.type})),u={view:t,geometry:l,group:o,field:r,horizontal:i,options:_Pe(a,i)},c=l.elements;Hae(c,(function(e,t){t>0&&kPe(u,c[t-1],e)}))}})),e}),(void 0===(n=!a.isStack)&&(n=!1),function(e){var t=e.chart,r=e.options.connectedArea,i=function(){t.removeInteraction(yPe.hover),t.removeInteraction(yPe.click)};if(!n&&r){var o=r.trigger||"hover";i(),t.interaction(yPe[o],{start:bPe(o,r.style)})}else i();return e}),uIe)(e)}function APe(e){var t=e.options,n=t.xField,r=t.yField,i=t.xAxis,o=t.yAxis,a={left:"bottom",right:"top",top:"left",bottom:"right"},l=!1!==o&&Sae({position:a[(null==o?void 0:o.position)||"left"]},o),u=!1!==i&&Sae({position:a[(null==i?void 0:i.position)||"bottom"]},i);return Sae(Sae({},e),{options:Sae(Sae({},t),{xField:r,yField:n,xAxis:l,yAxis:u})})}function jPe(e){var t=e.options.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),vEe({},e,{options:{label:t}})}function DPe(e){var t=e.options,n=t.seriesField,r=t.isStack,i=t.legend;return n?!1!==i&&(i=Sae({position:r?"top-left":"right-top"},i||{})):i=!1,vEe({},e,{options:{legend:i}})}function TPe(e){var t=e.options,n=[{type:"transpose"},{type:"reflectY"}].concat(t.coordinate||[]);return vEe({},e,{options:{coordinate:n}})}function FPe(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.barWidthRatio,o=n.minBarWidth,a=n.maxBarWidth,l=n.barBackground;return RPe({chart:t,options:Sae(Sae({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:o,maxColumnWidth:a,columnBackground:l})},!0)}function NPe(e){return mEe(APe,jPe,DPe,QEe,TPe,FPe)(e)}Tbe(yPe.hover,{start:bPe(yPe.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Tbe(yPe.click,{start:bPe(yPe.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var LPe,BPe=vEe({},KIe.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),VPe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bar",t}return Cae(t,e),t.getDefaultOptions=function(){return BPe},t.prototype.changeData=function(e){var t,n;this.updateOption({data:e});var r=this.chart,i=this.options,o=i.isPercent,a=i.xField,l=i.yField,u=i.xAxis,c=i.yAxis;a=(t=[l,a])[0],l=t[1],u=(n=[c,u])[0],c=n[1],OPe({chart:r,options:Sae(Sae({},i),{xField:a,yField:l,yAxis:c,xAxis:u})}),r.changeData(JIe(e,a,l,a,o))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return NPe},t}(KIe),zPe=vEe({},KIe.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),HPe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="column",t}return Cae(t,e),t.getDefaultOptions=function(){return zPe},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.yField,r=t.xField,i=t.isPercent;OPe({chart:this.chart,options:this.options}),this.chart.changeData(JIe(e,n,r,n,i))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return RPe},t}(KIe),WPe="$$percentage$$",UPe="$$mappingValue$$",GPe="$$conversion$$",YPe="$$totalPercentage$$",$Pe="$$x$$",qPe="$$y$$",KPe={appendPadding:[0,80],minSize:0,maxSize:1,meta:(LPe={},LPe[UPe]={min:0,max:1,nice:!1},LPe),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},XPe="CONVERSION_TAG_NAME";function JPe(e,t,n){var r=n.yField,i=n.maxSize,o=n.minSize,a=Kle(mle(t,r),[r]),l=ple(i)?i:1,u=ple(o)?o:0;return $le(e,(function(t,n){var i=(t[r]||0)/a;return t[WPe]=i,t[UPe]=(l-u)*i+u,t[GPe]=[Kle(e,[n-1,r]),t[r]],t}))}function ZPe(e){return function(t){var n=t.chart,r=t.options,i=r.conversionTag,o=r.filteredData||n.getOptions().data;if(i){var a=i.formatter;o.forEach((function(t,r){if(!(r<=0||Number.isNaN(t[UPe]))){var l=e(t,r,o,{top:!0,name:XPe,text:{content:Lae(a)?a(t,o):a,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:Sae({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(l)}}))}return t}}function QPe(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,o=JPe(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return t.data(o),e}function eMe(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,l=n.label,u=n.shape,c=void 0===u?"funnel":u,s=n.funnelStyle,d=n.state,f=pIe(a,[r,i]),h=f.fields,p=f.formatter;return mIe({chart:t,options:{type:"interval",xField:r,yField:UPe,colorField:r,tooltipFields:Vae(h)&&h.concat([WPe,GPe]),mapping:{shape:c,tooltip:p,color:o,style:s},label:l,state:d}}),yEe(e.chart,"interval").adjust("symmetric"),e}function tMe(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),e}function nMe(e){var t=e.options,n=e.chart,r=t.maxSize,i=Kle(n,["geometries","0","dataArray"],[]),o=Kle(n,["options","data","length"]),a=$le(i,(function(e){return Kle(e,["0","nextPoints","0","x"])*o-.5}));return ZPe((function(e,t,n,i){var o=r-(r-e[UPe])/2;return Sae(Sae({},i),{start:[a[t-1]||t-.5,o],end:[a[t-1]||t-.5,o+.05]})}))(e),e}function rMe(e){return mEe(QPe,eMe,tMe,nMe)(e)}function iMe(e){var t,n=e.chart,r=e.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((t={})[a]={sync:!0},t)),e}function oMe(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,o=n.yField,a=n.color,l=n.compareField,u=n.isTransposed,c=n.tooltip,s=n.maxSize,d=n.minSize,f=n.label,h=n.funnelStyle,p=n.state,v=n.showFacetTitle;return t.facet("mirror",{fields:[l],transpose:!u,padding:u?0:[32,0,0,0],showTitle:v,eachView:function(e,t){var n=u?t.rowIndex:t.columnIndex;u||e.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var v=JPe(t.data,r,{yField:o,maxSize:s,minSize:d});e.data(v);var g=pIe(c,[i,o,l]),m=g.fields,y=g.formatter,b=u?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};mIe({chart:e,options:{type:"interval",xField:i,yField:UPe,colorField:i,tooltipFields:Vae(m)&&m.concat([WPe,GPe]),mapping:{shape:"funnel",tooltip:y,color:a,style:h},label:!1!==f&&vEe({},b,f),state:p}})}}),e}function aMe(e){var t=e.chart,n=e.index,r=e.options,i=r.conversionTag,o=r.isTransposed;(ple(n)?[t]:t.views).forEach((function(e,t){var a=Kle(e,["geometries","0","dataArray"],[]),l=Kle(e,["options","data","length"]),u=$le(a,(function(e){return Kle(e,["0","nextPoints","0","x"])*l-.5}));ZPe((function(e,r,a,l){var c=0===(n||t)?-1:1;return vEe({},l,{start:[u[r-1]||r-.5,e[UPe]],end:[u[r-1]||r-.5,e[UPe]+.05],text:o?{style:{textAlign:"start"}}:{offsetX:!1!==i?c*i.offsetX:0,style:{textAlign:0===(n||t)?"end":"start"}}})}))(vEe({},{chart:e,options:r}))}))}function lMe(e){return e.chart.once("beforepaint",(function(){return aMe(e)})),e}function uMe(e){var t=e.chart,n=e.options,r=n.data,i=void 0===r?[]:r,o=n.yField,a=ele(i,(function(e,t){return e+(t[o]||0)}),0),l=mle(i,o)[o],u=$le(i,(function(e,t){var n=[],r=[];if(e[YPe]=(e[o]||0)/a,t){var u=i[t-1][$Pe],c=i[t-1][qPe];n[0]=u[3],r[0]=c[3],n[1]=u[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-e[YPe],n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],e[$Pe]=n,e[qPe]=r,e[WPe]=(e[o]||0)/l,e[GPe]=[Kle(i,[t-1,o]),e[o]],e}));return t.data(u),e}function cMe(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,l=n.label,u=n.funnelStyle,c=n.state,s=pIe(a,[r,i]),d=s.fields,f=s.formatter;return mIe({chart:t,options:{type:"polygon",xField:$Pe,yField:qPe,colorField:r,tooltipFields:Vae(d)&&d.concat([WPe,GPe]),label:l,state:c,mapping:{tooltip:f,color:o,style:u}}}),e}function sMe(e){var t=e.chart,n=e.options.isTransposed;return t.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),e}function dMe(e){return ZPe((function(e,t,n,r){return Sae(Sae({},r),{start:[e[$Pe][1],e[qPe][1]],end:[e[$Pe][1]+.05,e[qPe][1]]})}))(e),e}function fMe(e){var t,n=e.chart,r=e.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((t={})[a]={sync:!0},t)),e}function hMe(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.isTransposed,o=n.showFacetTitle;return t.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:o,eachView:function(t,n){rMe(vEe({},e,{chart:t,options:{data:n.data}}))}}),e}var pMe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rendering=!1,t}return Cae(t,e),t.prototype.change=function(e){var t=this;if(!this.rendering){var n=e.seriesField,r=e.compareField,i=r?aMe:nMe,o=this.context.view,a=n||r?o.views:[o];$le(a,(function(n,r){var o=n.getController("annotation"),a=Tae(Kle(o,["option"],[]),(function(e){return e.name!==XPe}));o.clear(!0),Hae(a,(function(e){"object"===lr(e)&&n.annotation()[e.type](e)}));var l=Kle(n,["filteredData"],n.getOptions().data);i({chart:n,index:r,options:Sae(Sae({},e),{filteredData:JPe(l,l,e)})}),n.filterData(l),t.rendering=!0,n.render(!0)}))}this.rendering=!1},t}(Nye),vMe="funnel-conversion-tag",gMe="funnel-afterrender",mMe={trigger:"afterrender",action:"".concat(vMe,":change")};function yMe(e){var t,n=e.options,r=n.compareField,i=n.xField,o=n.yField,a=n.locale,l=n.funnelStyle,u=n.data,c=hIe(a);return(r||l)&&(t=function(e){return vEe({},r&&{lineWidth:1,stroke:"#fff"},Lae(l)?l(e):l)}),vEe({options:{label:r?{fields:[i,o,r,WPe,GPe],formatter:function(e){return"".concat(e[o])}}:{fields:[i,o,WPe,GPe],offset:0,position:"middle",formatter:function(e){return"".concat(e[i]," ").concat(e[o])}},tooltip:{title:i,formatter:function(e){return{name:e[i],value:e[o]}}},conversionTag:{formatter:function(e){return"".concat(c.get(["conversionTag","label"]),": ").concat(wPe.apply(void 0,e[GPe]))}}}},e,{options:{funnelStyle:t,data:Lle(u)}})}function bMe(e){var t=e.options,n=t.compareField,r=t.dynamicHeight;return t.seriesField?function(e){return mEe(fMe,hMe)(e)}(e):n?function(e){return mEe(iMe,oMe,lMe)(e)}(e):r?function(e){return mEe(uMe,cMe,sMe,dMe)(e)}(e):rMe(e)}function wMe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return mEe(aIe(((t={})[o]=r,t[a]=i,t)))(e)}function _Me(e){return e.chart.axis(!1),e}function xMe(e){var t=e.chart,n=e.options.legend;return!1===n?t.legend(!1):t.legend(n),e}function kMe(e){var t=e.chart,n=e.options,r=n.interactions,i=n.dynamicHeight;return Hae(r,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg||{})})),i?t.removeInteraction(gMe):t.interaction(gMe,{start:[Sae(Sae({},mMe),{arg:n})]}),e}function CMe(e){return mEe(yMe,bMe,wMe,_Me,QEe,kMe,xMe,tIe,nIe,lIe())(e)}zye(vMe,pMe),Tbe(gMe,{start:[mMe]});var SMe,OMe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="funnel",t}return Cae(t,e),t.getDefaultOptions=function(){return KPe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return CMe},t.prototype.setState=function(e,t,n){void 0===n&&(n=!0),Hae(wEe(this.chart),(function(r){t(r.getData())&&r.setState(e,n)}))},t.prototype.getStates=function(){var e=wEe(this.chart),t=[];return Hae(e,(function(e){var n=e.getData();Hae(e.getStates(),(function(r){t.push({data:n,state:r,geometry:e.geometry,element:e})}))})),t},t.CONVERSATION_FIELD=GPe,t.PERCENT_FIELD=WPe,t.TOTAL_PERCENT_FIELD=YPe,t}(KIe),EMe="range",IMe="type",PMe="percent",MMe="#f0f0f0",RMe="indicator-view",AMe="range-view",jMe={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(SMe={},SMe[EMe]={sync:"v"},SMe[PMe]={sync:"v",tickCount:5,tickInterval:.2},SMe),animation:!1};function DMe(e){var t;return[(t={},t[PMe]=fle(e,0,1),t)]}function TMe(e,t){var n=Kle(t,["ticks"],[]),r=oue(n)?rle(n):[0,fle(e,0,1),1];return r[0]||r.shift(),function(e,t){return e.map((function(n,r){var i;return(i={})[EMe]=n-(e[r-1]||0),i[IMe]="".concat(r),i[PMe]=t,i}))}(r,e)}function FMe(e){var t=e.chart,n=e.options,r=n.percent,i=n.range,o=n.radius,a=n.innerRadius,l=n.startAngle,u=n.endAngle,c=n.axis,s=n.indicator,d=n.gaugeStyle,f=n.type,h=n.meter,p=i.color,v=i.width;if(s){var g=DMe(r),m=t.createView({id:RMe});m.data(g),m.point().position("".concat(PMe,"*1")).shape(s.shape||"gauge-indicator").customInfo({defaultColor:t.getTheme().defaultColor,indicator:s}),m.coordinate("polar",{startAngle:l,endAngle:u,radius:a*o}),m.axis(PMe,c),m.scale(PMe,oEe(c,tEe))}var y=TMe(r,n.range),b=t.createView({id:AMe});b.data(y);var w=nle(p)?[p,MMe]:p;return wIe({chart:b,options:{xField:"1",yField:EMe,seriesField:IMe,rawFields:[PMe],isStack:!0,interval:{color:w,style:d,shape:"meter"===f?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:v,maxColumnWidth:v}}).ext.geometry.customInfo({meter:h}),b.coordinate("polar",{innerRadius:a,radius:o,startAngle:l,endAngle:u}).transpose(),e}function NMe(e){var t;return mEe(aIe(((t={range:{min:0,max:1,maxLimit:1,minLimit:0}})[PMe]={},t)))(e)}function LMe(e,t){var n=e.chart,r=e.options,i=r.statistic,o=r.percent;if(n.getController("annotation").clear(!0),i){var a=i.content,l=void 0;a&&(l=vEe({},{content:"".concat((100*o).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},a)),AEe(n,{statistic:Sae(Sae({},i),{content:l})},{percent:o})}return t&&n.render(!0),e}function BMe(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(vEe({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(e,t){var n=Kle(t,[0,"data",PMe],0);return"".concat((100*n).toFixed(2),"%")}},n)):t.tooltip(!1),e}function VMe(e){return e.chart.legend(!1),e}function zMe(e){return mEe(nIe,tIe,FMe,NMe,BMe,LMe,eIe,lIe(),VMe)(e)}zwe("point","gauge-indicator",{draw:function(e,t){var n=e.customInfo,r=n.indicator,i=n.defaultColor,o=r,a=o.pointer,l=o.pin,u=t.addGroup(),c=this.parsePoint({x:0,y:0});return a&&u.addShape("line",{name:"pointer",attrs:Sae({x1:c.x,y1:c.y,x2:e.x,y2:e.y,stroke:i},a.style)}),l&&u.addShape("circle",{name:"pin",attrs:Sae({x:c.x,y:c.y,stroke:i},l.style)}),u}}),zwe("interval","meter-gauge",{draw:function(e,t){var n=e.customInfo.meter,r=void 0===n?{}:n,i=r.steps,o=void 0===i?50:i,a=r.stepRatio,l=void 0===a?.5:a;o=o<1?1:o,l=fle(l,0,1);var u=this.coordinate,c=u.startAngle,s=u.endAngle,d=0;l>0&&l<1&&(d=(s-c)/o/(l/(1-l)+1-1/o));for(var f=d/(1-l)*l,h=t.addGroup(),p=this.coordinate.getCenter(),v=this.coordinate.getRadius(),g=x_e.getAngle(e,this.coordinate),m=g.startAngle,y=g.endAngle,b=m;b<y;){var w=void 0,_=(b-c)%(f+d);w=_<f?b+(f-_):(b+=f+d-_)+f;var x=x_e.getSectorPath(p.x,p.y,v,b,Math.min(w,y),v*this.coordinate.innerRadius);h.addShape("path",{name:"meter-gauge",attrs:{path:x,fill:e.color,stroke:e.color,lineWidth:.5}}),b=w+d}return h}});var HMe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t}return Cae(t,e),t.getDefaultOptions=function(){return jMe},t.prototype.changeData=function(e){this.chart.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this.chart,gue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e});var t=this.chart.views.find((function(e){return e.id===RMe}));t&&t.data(DMe(e));var n=this.chart.views.find((function(e){return e.id===AMe}));n&&n.data(TMe(e,this.options.range)),LMe({chart:this.chart,options:this.options},!0),this.chart.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this.chart,gue.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zMe},t}(KIe);function WMe(e,t,n){if(1===n)return[0,t];var r=Math.floor(e/t);return[t*r,t*(r+1)]}function UMe(e,t,n,r,i){var o=Lle(e);!function(e,t){var n;if(Lae(t))n=function(e,n){return t(e)-t(n)};else{var r=[];nle(t)?r.push(t):Vae(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}e.sort(n)}(o,t);var a=ile(o,t),l=Zae(a),u=l.max-l.min,c=n;if(!n&&r&&(c=r>1?u/(r-1):l.max),!n&&!r){var s=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}(a);c=u/s}var d={},f=sle(o,i);Gle(f)?Hae(o,(function(e){var n=WMe(e[t],c,r),i="".concat(n[0],"-").concat(n[1]);_le(d,i)||(d[i]={range:n,count:0}),d[i].count+=1})):Object.keys(f).forEach((function(e){Hae(f[e],(function(n){var o=WMe(n[t],c,r),a="".concat(o[0],"-").concat(o[1]),l="".concat(a,"-").concat(e);_le(d,l)||(d[l]={range:o,count:0},d[l][i]=e),d[l].count+=1}))}));var h=[];return Hae(d,(function(e){h.push(e)})),h}var GMe="range",YMe="count",$Me=vEe({},KIe.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function qMe(e){var t=e.chart,n=e.options,r=n.data,i=n.binField,o=n.binNumber,a=n.binWidth,l=n.color,u=n.stackField,c=n.legend,s=n.columnStyle,d=UMe(r,i,a,o,u);return t.data(d),wIe(vEe({},e,{options:{xField:GMe,yField:YMe,seriesField:u,isStack:!0,interval:{color:l,style:s}}})),c&&u?t.legend(u,c):t.legend(!1),e}function KMe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis;return mEe(aIe(((t={})[GMe]=r,t[YMe]=i,t)))(e)}function XMe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis;return!1===r?t.axis(GMe,!1):t.axis(GMe,r),!1===i?t.axis(YMe,!1):t.axis(YMe,i),e}function JMe(e){var t=e.chart,n=e.options.label,r=yEe(t,"interval");if(n){var i=n.callback,o=Oae(n,["callback"]);r.label({fields:[YMe],callback:i,cfg:xEe(o)})}else r.label(!1);return e}function ZMe(e){return mEe(nIe,JEe("columnStyle"),qMe,KMe,XMe,rIe,JMe,QEe,eIe,tIe)(e)}var QMe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="histogram",t}return Cae(t,e),t.getDefaultOptions=function(){return $Me},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options,n=t.binField,r=t.binNumber,i=t.binWidth,o=t.stackField;this.chart.changeData(UMe(e,n,i,r,o))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ZMe},t}(KIe),eRe=vEe({},KIe.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),tRe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.active=function(){var e=this.getView(),t=this.context.event;if(t.data){var n=t.data.items;Hae(e.geometries.filter((function(e){return"point"===e.type})),(function(e){Hae(e.elements,(function(e){var t=-1!==qae(n,(function(t){return t.data===e.data}));e.setState("active",t)}))}))}},t.prototype.reset=function(){Hae(this.getView().geometries.filter((function(e){return"point"===e.type})),(function(e){Hae(e.elements,(function(e){e.setState("active",!1)}))}))},t.prototype.getView=function(){return this.context.view},t}(Nye);zye("marker-active",tRe),Tbe("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var nRe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t}return Cae(t,e),t.getDefaultOptions=function(){return eRe},t.prototype.changeData=function(e){this.updateOption({data:e});QIe({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return oPe},t}(KIe),rRe=vEe({},KIe.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),iRe=[1,0,0,0,1,0,0,0,1];function oRe(e,t){var n=Aae([],iRe,!0);return x_e.transform(n,e)}var aRe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getActiveElements=function(){var e=x_e.getDelegationObject(this.context);if(e){var t=this.context.view,n=e.component,r=e.item,i=n.get("field");if(i)return t.geometries[0].elements.filter((function(e){return e.getModel().data[i]===r.value}))}return[]},t.prototype.getActiveElementLabels=function(){var e=this.context.view,t=this.getActiveElements();return e.geometries[0].labelsContainer.getChildren().filter((function(e){return t.find((function(t){return Yle(t.getData(),e.get("data"))}))}))},t.prototype.transfrom=function(e){void 0===e&&(e=7.5);var t=this.getActiveElements(),n=this.getActiveElementLabels();t.forEach((function(t,r){var i=n[r],o=t.geometry.coordinate;if(o.isPolar&&o.isTransposed){var a=x_e.getAngle(t.getModel(),o),l=(a.startAngle+a.endAngle)/2,u=e,c=u*Math.cos(l),s=u*Math.sin(l);t.shape.setMatrix(oRe([["t",c,s]])),i.setMatrix(oRe([["t",c,s]]))}}))},t.prototype.active=function(){this.transfrom()},t.prototype.reset=function(){this.transfrom(0)},t}(Nye);var lRe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getAnnotations=function(e){return(e||this.context.view).getController("annotation").option},t.prototype.getInitialAnnotation=function(){return this.initialAnnotation},t.prototype.init=function(){var e=this,t=this.context.view;t.removeInteraction("tooltip"),t.on("afterchangesize",(function(){var n=e.getAnnotations(t);e.initialAnnotation=n}))},t.prototype.change=function(e){var t=this.context,n=t.view,r=t.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=Kle(r,["data","data"]);if(r.type.match("legend-item")){var o=x_e.getDelegationObject(this.context),a=n.getGroupedFields()[0];if(o&&a){var l=o.item;i=n.getData().find((function(e){return e[a]===l.value}))}}if(i){var u=Kle(e,"annotations",[]),c=Kle(e,"statistic",{});n.getController("annotation").clear(!0),Hae(u,(function(e){"object"===lr(e)&&n.annotation()[e.type](e)})),REe(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var s,d,f,h=(s=this.context,(f=s.event.target)&&(d=f.get("element")),d);h&&h.shape.toFront()},t.prototype.reset=function(){var e=this.context.view;e.getController("annotation").clear(!0),Hae(this.getInitialAnnotation(),(function(t){e.annotation()[t.type](t)})),e.render(!0)},t}(Nye),uRe="pie-statistic";function cRe(e,t){var n;switch(e){case"inner":return n="-30%",nle(t)&&t.endsWith("%")?.01*parseFloat(t)>0?n:t:t<0?t:n;case"outer":return n=12,nle(t)&&t.endsWith("%")?.01*parseFloat(t)<0?n:t:t>0?t:n;default:return t}}function sRe(e,t){return lle(uEe(e,t),(function(e){return 0===e[t]}))}function dRe(e){var t=e.chart,n=e.options,r=n.data,i=n.angleField,o=n.colorField,a=n.color,l=n.pieStyle,u=n.shape,c=uEe(r,i);if(sRe(c,i)){var s="$$percentage$$";c=c.map((function(e){var t;return Sae(Sae({},e),((t={})[s]=1/c.length,t))})),t.data(c),wIe(vEe({},e,{options:{xField:"1",yField:s,seriesField:o,isStack:!0,interval:{color:a,shape:u,style:l},args:{zIndexReversed:!0,sortZIndex:!0}}}))}else{t.data(c),wIe(vEe({},e,{options:{xField:"1",yField:i,seriesField:o,isStack:!0,interval:{color:a,shape:u,style:l},args:{zIndexReversed:!0,sortZIndex:!0}}}))}return e}function fRe(e){var t,n=e.chart,r=e.options,i=r.meta,o=r.colorField,a=vEe({},i);return n.scale(a,((t={})[o]={type:"cat"},t)),e}function hRe(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return t.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),e}function pRe(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,o=n.angleField,a=t.geometries[0];if(r){var l=r.callback,u=xEe(Oae(r,["callback"]));if(u.content){var c=u.content;u.content=function(e,n,r){var a=e[i],l=e[o],u=t.getScaleByField(o),s=null==u?void 0:u.scale(l);return Lae(c)?c(Sae(Sae({},e),{percent:s}),n,r):nle(c)?jEe(c,{value:l,name:a,percentage:ple(s)&&!Bae(l)?"".concat((100*s).toFixed(2),"%"):null}):c}}var s=u.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[u.type]:"pie-outer",d=u.layout?Vae(u.layout)?u.layout:[u.layout]:[];u.layout=(s?[{type:s}]:[]).concat(d),a.label({fields:i?[o,i]:[o],callback:l,cfg:Sae(Sae({},u),{offset:cRe(u.type,u.offset),type:"pie"})})}else a.label(!1);return e}function vRe(e){var t=e.innerRadius,n=e.statistic,r=e.angleField,i=e.colorField,o=e.meta,a=hIe(e.locale);if(t&&n){var l=vEe({},rRe.statistic,n),u=l.title,c=l.content;return!1!==u&&(u=vEe({},{formatter:function(e){var t=e?e[i]:Bae(u.content)?a.get(["statistic","total"]):u.content;return(Kle(o,[i,"formatter"])||function(e){return e})(t)}},u)),!1!==c&&(c=vEe({},{formatter:function(e,t){var n=e?e[r]:function(e,t){var n=null;return Hae(e,(function(e){"number"==typeof e[t]&&(n+=e[t])})),n}(t,r),i=Kle(o,[r,"formatter"])||function(e){return e};return e||Bae(c.content)?i(n):c.content}},c)),vEe({},{statistic:{title:u,content:c}},e)}return e}function gRe(e){var t=e.chart,n=vRe(e.options),r=n.innerRadius,i=n.statistic;return t.getController("annotation").clear(!0),mEe(lIe())(e),r&&i&&REe(t,{statistic:i,plotType:"pie"}),e}function mRe(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.colorField,o=n.angleField,a=n.data;if(!1===r)t.tooltip(r);else if(t.tooltip(vEe({},r,{shared:!1})),sRe(a,o)){var l=Kle(r,"fields"),u=Kle(r,"formatter");Gle(Kle(r,"fields"))&&(l=[i,o],u=u||function(e){return{name:e[i],value:kle(e[o])}}),t.geometries[0].tooltip(l.join("*"),gIe(l,u))}return e}function yRe(e){var t=e.chart,n=vRe(e.options),r=n.interactions,i=n.statistic,o=n.annotations;return Hae(r,(function(e){var n,r;if(!1===e.enable)t.removeInteraction(e.type);else if("pie-statistic-active"===e.type){var a=[];(null===(n=e.cfg)||void 0===n?void 0:n.start)||(a=[{trigger:"element:mouseenter",action:"".concat(uRe,":change"),arg:{statistic:i,annotations:o}}]),Hae(null===(r=e.cfg)||void 0===r?void 0:r.start,(function(e){a.push(Sae(Sae({},e),{arg:{statistic:i,annotations:o}}))})),t.interaction(e.type,vEe({},e.cfg,{start:a}))}else t.interaction(e.type,e.cfg||{})})),e}function bRe(e){return mEe(JEe("pieStyle"),dRe,fRe,nIe,hRe,ZEe,mRe,pRe,rIe,gRe,yRe,tIe)(e)}zye(uRe,lRe),Tbe("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),zye("pie-legend",aRe),Tbe("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var wRe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pie",t}return Cae(t,e),t.getDefaultOptions=function(){return rRe},t.prototype.changeData=function(e){this.chart.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this.chart,gue.BEFORE_CHANGE_DATA,null));var t=this.options,n=this.options.angleField,r=uEe(t.data,n),i=uEe(e,n);sRe(r,n)||sRe(i,n)?this.update({data:e}):(this.updateOption({data:e}),this.chart.data(i),gRe({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this.chart,gue.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bRe},t}(KIe),_Re=["#FAAD14","#E8EDF3"],xRe={percent:.2,color:_Re,animation:{}};function kRe(e){var t=fle(kEe(e)?e:0,0,1);return[{current:"".concat(t),type:"current",percent:t},{current:"".concat(t),type:"target",percent:1}]}function CRe(e){var t=e.chart,n=e.options,r=n.percent,i=n.progressStyle,o=n.color,a=n.barWidthRatio;return t.data(kRe(r)),wIe(vEe({},e,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:a,interval:{style:i,color:nle(o)?[o,_Re[1]]:o},args:{zIndexReversed:!0,sortZIndex:!0}}})),t.tooltip(!1),t.axis(!1),t.legend(!1),e}function SRe(e){return e.chart.coordinate("rect").transpose(),e}function ORe(e){return mEe(CRe,aIe({}),SRe,tIe,nIe,lIe())(e)}var ERe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="process",t}return Cae(t,e),t.getDefaultOptions=function(){return xRe},t.prototype.changeData=function(e){this.updateOption({percent:e}),this.chart.changeData(kRe(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ORe},t}(KIe);function IRe(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius;return t.coordinate("theta",{innerRadius:r,radius:i}),e}function PRe(e,t){var n=e.chart,r=e.options,i=r.innerRadius,o=r.statistic,a=r.percent,l=r.meta;if(n.getController("annotation").clear(!0),i&&o){var u=Kle(l,["percent","formatter"])||function(e){return"".concat((100*e).toFixed(2),"%")},c=o.content;c&&(c=vEe({},c,{content:Bae(c.content)?u(a):c.content})),REe(n,{statistic:Sae(Sae({},o),{content:c}),plotType:"ring-progress"},{percent:a})}return t&&n.render(!0),e}function MRe(e){return mEe(CRe,aIe({}),IRe,PRe,tIe,nIe,lIe())(e)}var RRe={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},ARe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ring-process",t}return Cae(t,e),t.getDefaultOptions=function(){return RRe},t.prototype.changeData=function(e){this.chart.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this.chart,gue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(kRe(e)),PRe({chart:this.chart,options:this.options},!0),this.chart.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this.chart,gue.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return MRe},t}(KIe);function jRe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)}function DRe(e,t,n,r){e=e.filter((function(e,r){var i=t(e,r),o=n(e,r);return null!=i&&isFinite(i)&&null!=o&&isFinite(o)})),r&&e.sort((function(e,n){return t(e)-t(n)}));for(var i,o,a,l=e.length,u=new Float64Array(l),c=new Float64Array(l),s=0,d=0,f=0;f<l;)a=e[f],u[f]=i=+t(a,f,e),c[f]=o=+n(a,f,e),s+=(i-s)/++f,d+=(o-d)/f;for(var h=0;h<l;++h)u[h]-=s,c[h]-=d;return[u,c,s,d]}function TRe(e,t,n,r){for(var i=0,o=0,a=e.length;o<a;o++){var l=e[o],u=+t(l,o,e),c=+n(l,o,e);null!=u&&isFinite(u)&&null!=c&&isFinite(c)&&r(u,c,i++)}}function FRe(e,t,n,r,i){var o=0,a=0;return TRe(e,t,n,(function(e,t){var n=t-i(e),l=t-r;o+=n*n,a+=l*l})),1-o/a}function NRe(e){return 180*Math.atan2(e[1][1]-e[0][1],e[1][0]-e[0][0])/Math.PI}function LRe(e,t,n){for(var r=Math.log(t-e)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),o=[l(e),l(t)],a=0;u(o)&&a<1e4;);return o;function l(e){return[e,n(e)]}function u(e){a++;for(var t,n=e.length,r=!1,o=0;o<n-1;o++){var u=e[o],c=e[o+1],s=[((t=[u,c])[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],d=l(s[0]),f=NRe([u,s]),h=NRe([u,d]);Math.abs(f-h)>i&&(e.splice(o+1,0,d),r=!0)}return r}}function BRe(e,t,n,r){var i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function VRe(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,o=0,a=0,l=0,u=0,c=e?+e[0]:1/0,s=e?+e[1]:-1/0;TRe(r,t,n,(function(t,n){++i,o+=(t-o)/i,a+=(n-a)/i,l+=(t*n-l)/i,u+=(t*t-u)/i,e||(t<c&&(c=t),t>s&&(s=t))}));var d=jRe(BRe(o,a,l,u),2),f=d[0],h=d[1],p=function(e){return h*e+f},v=[[c,p(c)],[s,p(s)]];return v.a=h,v.b=f,v.predict=p,v.rSquared=FRe(r,t,n,a,p),v}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}function zRe(e){e.sort((function(e,t){return e-t}));var t=e.length/2;return t%1==0?(e[t-1]+e[t])/2:e[Math.floor(t)]}function HRe(e){return(e=1-e*e*e)*e*e}function WRe(e,t,n){var r=e[t],i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function URe(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i,o,a,l,u=jRe(DRe(r,t,n),4),c=u[0],s=u[1],d=u[2],f=u[3],h=c.length,p=0,v=0,g=0,m=0,y=0;for(i=0;i<h;)o=c[i],a=s[i++],p+=((l=o*o)-p)/i,v+=(l*o-v)/i,g+=(l*l-g)/i,m+=(o*a-m)/i,y+=(l*a-y)/i;var b=0,w=0,_=e?+e[0]:1/0,x=e?+e[1]:-1/0;TRe(r,t,n,(function(t,n){w++,b+=(n-b)/w,e||(t<_&&(_=t),t>x&&(x=t))}));var k=g-p*p,C=p*k-v*v,S=(y*p-m*v)/C,O=(m*k-y*v)/C,E=-S*p,I=function(e){return S*(e-=d)*e+O*e+E+f},P=LRe(_,x,I);return P.a=S,P.b=O-2*S*d,P.c=E-O*d+S*d*d+f,P.predict=I,P.rSquared=FRe(r,t,n,b,I),P}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r}var GRe={exp:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,o=0,a=0,l=0,u=0,c=0,s=e?+e[0]:1/0,d=e?+e[1]:-1/0;TRe(r,t,n,(function(t,n){var r=Math.log(n),f=t*n;++i,o+=(n-o)/i,l+=(f-l)/i,c+=(t*f-c)/i,a+=(n*r-a)/i,u+=(f*r-u)/i,e||(t<s&&(s=t),t>d&&(d=t))}));var f=jRe(BRe(l/o,a/o,u/o,c/o),2),h=f[0],p=f[1];h=Math.exp(h);var v=function(e){return h*Math.exp(p*e)},g=LRe(s,d,v);return g.a=h,g.b=p,g.predict=v,g.rSquared=FRe(r,t,n,o,v),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},linear:VRe,loess:function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=.3;function r(r){for(var i=jRe(DRe(r,e,t,!0),4),o=i[0],a=i[1],l=i[2],u=i[3],c=o.length,s=Math.max(2,~~(n*c)),d=new Float64Array(c),f=new Float64Array(c),h=new Float64Array(c).fill(1),p=-1;++p<=2;){for(var v=[0,s-1],g=0;g<c;++g){for(var m=o[g],y=v[0],b=v[1],w=m-o[y]>o[b]-m?y:b,_=0,x=0,k=0,C=0,S=0,O=1/Math.abs(o[w]-m||1),E=y;E<=b;++E){var I=o[E],P=a[E],M=HRe(Math.abs(m-I)*O)*h[E],R=I*M;_+=M,x+=R,k+=P*M,C+=P*R,S+=I*R}var A=jRe(BRe(x/_,k/_,C/_,S/_),2),j=A[0],D=A[1];d[g]=j+D*m,f[g]=Math.abs(a[g]-d[g]),WRe(o,g+1,v)}if(2===p)break;var T=zRe(f);if(Math.abs(T)<1e-12)break;for(var F,N,L=0;L<c;++L)F=f[L]/(6*T),h[L]=F>=1?1e-12:(N=1-F*F)*N}return function(e,t,n,r){for(var i,o=e.length,a=[],l=0,u=0,c=[];l<o;++l)i=e[l]+n,c[0]===i?c[1]+=(t[l]-c[1])/++u:(u=0,c[1]+=r,c=[i,t[l]],a.push(c));return c[1]+=r,a}(o,d,l,u)}return r.bandwidth=function(e){return arguments.length?(n=e,r):n},r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(e){return arguments.length?(t=e,r):t},r},log:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=Math.E;function i(i){var o=0,a=0,l=0,u=0,c=0,s=e?+e[0]:1/0,d=e?+e[1]:-1/0,f=Math.log(r);TRe(i,t,n,(function(t,n){var r=Math.log(t)/f;++o,a+=(r-a)/o,l+=(n-l)/o,u+=(r*n-u)/o,c+=(r*r-c)/o,e||(t<s&&(s=t),t>d&&(d=t))}));var h=jRe(BRe(a,l,u,c),2),p=h[0],v=h[1],g=function(e){return v*Math.log(e)/f+p},m=LRe(s,d,g);return m.a=v,m.b=p,m.predict=g,m.rSquared=FRe(i,t,n,l,g),m}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.base=function(e){return arguments.length?(r=e,i):r},i},poly:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]},r=3;function i(i){if(1===r){var o=VRe().x(t).y(n).domain(e)(i);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(2===r){var a=URe().x(t).y(n).domain(e)(i);return a.coefficients=[a.c,a.b,a.a],delete a.a,delete a.b,delete a.c,a}var l,u,c,s,d,f=jRe(DRe(i,t,n),4),h=f[0],p=f[1],v=f[2],g=f[3],m=h.length,y=[],b=[],w=r+1,_=0,x=0,k=e?+e[0]:1/0,C=e?+e[1]:-1/0;for(TRe(i,t,n,(function(t,n){++x,_+=(n-_)/x,e||(t<k&&(k=t),t>C&&(C=t))})),l=0;l<w;++l){for(c=0,s=0;c<m;++c)s+=Math.pow(h[c],l)*p[c];for(y.push(s),d=new Float64Array(w),u=0;u<w;++u){for(c=0,s=0;c<m;++c)s+=Math.pow(h[c],l+u);d[u]=s}b.push(d)}b.push(y);var S=function(e){var t,n,r,i,o,a=e.length-1,l=[];for(t=0;t<a;++t){for(i=t,n=t+1;n<a;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<a+1;++r)o=e[r][t],e[r][t]=e[r][i],e[r][i]=o;for(n=t+1;n<a;++n)for(r=a;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=a-1;n>=0;--n){for(o=0,r=n+1;r<a;++r)o+=e[r][n]*l[r];l[n]=(e[a][n]-o)/e[n][n]}return l}(b),O=function(e){e-=v;var t=g+S[0]+S[1]*e+S[2]*e*e;for(l=3;l<w;++l)t+=S[l]*Math.pow(e,l);return t},E=LRe(k,C,O);return E.coefficients=function(e,t,n,r){var i,o,a,l,u=Array(e);for(i=0;i<e;++i)u[i]=0;for(i=e-1;i>=0;--i)for(a=t[i],l=1,u[i]+=a,o=1;o<=i;++o)l*=(i+1-o)/o,u[i-o]+=a*Math.pow(n,o)*l;return u[0]+=r,u}(w,S,-v,g),E.predict=O,E.rSquared=FRe(i,t,n,_,O),E}return i.domain=function(t){return arguments.length?(e=t,i):e},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.order=function(e){return arguments.length?(r=e,i):r},i},pow:function(){var e,t=function(e){return e[0]},n=function(e){return e[1]};function r(r){var i=0,o=0,a=0,l=0,u=0,c=0,s=e?+e[0]:1/0,d=e?+e[1]:-1/0;TRe(r,t,n,(function(t,n){var r=Math.log(t),f=Math.log(n);++i,o+=(r-o)/i,a+=(f-a)/i,l+=(r*f-l)/i,u+=(r*r-u)/i,c+=(n-c)/i,e||(t<s&&(s=t),t>d&&(d=t))}));var f=jRe(BRe(o,a,l,u),2),h=f[0],p=f[1];h=Math.exp(h);var v=function(e){return h*Math.pow(e,p)},g=LRe(s,d,v);return g.a=h,g.b=p,g.predict=v,g.rSquared=FRe(r,t,n,c,v),g}return r.domain=function(t){return arguments.length?(e=t,r):e},r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},quad:URe};var YRe=function(e,t){var n=t.view,r=t.options,i=r.xField,o=r.yField,a=n.getScaleByField(i),l=n.getScaleByField(o);return IEe(e.map((function(e){return n.getCoordinate().convert({x:a.scale(e[0]),y:l.scale(e[1])})})))},$Re=function(e){var t,n=e.options,r=n.xField,i=n.yField,o=n.data,a=n.regressionLine,l=a.type,u=void 0===l?"linear":l,c=a.algorithm,s=a.equation,d=null;c?(t=Vae(c)?c:c(o),d=s):d=function(e,t){var n,r,i,o=function(e,t){return void 0===t&&(t=4),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},a=function(e){return Number.isFinite(e)?o(e):"?"};switch(e){case"linear":return"y = ".concat(a(t.a),"x + ").concat(a(t.b),", R^2 = ").concat(a(t.rSquared));case"exp":return"y = ".concat(a(t.a),"e^(").concat(a(t.b),"x), R^2 = ").concat(a(t.rSquared));case"log":return"y = ".concat(a(t.a),"ln(x) + ").concat(a(t.b),", R^2 = ").concat(a(t.rSquared));case"quad":return"y = ".concat(a(t.a),"x^2 + ").concat(a(t.b),"x + ").concat(a(t.c),", R^2 = ").concat(a(t.rSquared));case"poly":for(var l="y = ".concat(a(null===(n=t.coefficients)||void 0===n?void 0:n[0])," + ").concat(a(null===(r=t.coefficients)||void 0===r?void 0:r[1]),"x + ").concat(a(null===(i=t.coefficients)||void 0===i?void 0:i[2]),"x^2"),u=3;u<t.coefficients.length;++u)l+=" + ".concat(a(t.coefficients[u]),"x^").concat(u);return"".concat(l,", R^2 = ").concat(a(t.rSquared));case"pow":return"y = ".concat(a(t.a),"x^").concat(a(t.b),", R^2 = ").concat(a(t.rSquared))}return null}(u,t=GRe[u]().x((function(e){return e[r]})).y((function(e){return e[i]}))(o));return[YRe(t,e),d]},qRe=function(e){var t,n=e.meta,r=void 0===n?{}:n,i=e.xField,o=e.yField,a=e.data,l=a[0][i],u=a[0][o],c=l>0,s=u>0;function d(e,t){var n=Kle(r,[e]);function i(e){return Kle(n,e)}var o={};return"x"===t?(ple(l)&&(ple(i("min"))||(o.min=c?0:2*l),ple(i("max"))||(o.max=c?2*l:0)),o):(ple(u)&&(ple(i("min"))||(o.min=s?0:2*u),ple(i("max"))||(o.max=s?2*u:0)),o)}return Sae(Sae({},r),((t={})[i]=Sae(Sae({},r[i]),d(i,"x")),t[o]=Sae(Sae({},r[o]),d(o,"y")),t))};function KRe(e){var t=e.data,n=void 0===t?[]:t,r=e.xField,i=e.yField;if(n.length){for(var o=!0,a=!0,l=n[0],u=void 0,c=1;c<n.length&&(u=n[c],l[r]!==u[r]&&(o=!1),l[i]!==u[i]&&(a=!1),o||a);c++)l=u;var s=[];o&&s.push(r),a&&s.push(i);var d=oEe(qRe(e),s);return vEe({},e,{meta:d})}return e}function XRe(e){var t=e.chart,n=e.options,r=n.data,i=n.type,o=n.color,a=n.shape,l=n.pointStyle,u=n.shapeField,c=n.colorField,s=n.xField,d=n.yField,f=n.sizeField,h=n.size,p=n.tooltip;f&&(h||(h=[2,8]),ple(h)&&(h=[h,h])),p&&!p.fields&&(p=Sae(Sae({},p),{fields:[s,d,c,f,u]})),t.data(r),xIe(vEe({},e,{options:{seriesField:c,point:{color:o,shape:a,size:h,style:l},tooltip:p}}));var v=yEe(t,"point");return i&&v.adjust(i),e}function JRe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,l=KRe(n);return mEe(aIe(((t={})[o]=r,t[a]=i,t)))(vEe({},e,{options:l}))}function ZRe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return t.axis(o,r),t.axis(a,i),e}function QRe(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,o=n.shapeField,a=n.sizeField,l=n.shapeLegend,u=n.sizeLegend,c=!1!==r;return i&&t.legend(i,!!c&&r),o&&(l?t.legend(o,l):t.legend(o,!1!==l&&r)),a&&t.legend(a,u||!1),c||l||u||t.legend(!1),e}function eAe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=yEe(t,"point");if(r){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:xEe(l)})}else o.label(!1);return e}function tAe(e){var t=e.options.quadrant,n=[];if(t){var r=t.xBaseline,i=void 0===r?0:r,o=t.yBaseline,a=void 0===o?0:o,l=t.labels,u=t.regionStyle,c=t.lineStyle,s=function(e,t){return{regionStyle:[{position:{start:[e,"max"],end:["max",t]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[e,t]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",t],end:[e,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[e,t],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",t],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:10,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",t],offsetX:10,offsetY:10,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",t],offsetX:-10,offsetY:10,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,a);new Array(4).join(",").split(",").forEach((function(e,t){n.push(Sae(Sae({type:"region",top:!1},s.regionStyle[t].position),{style:vEe({},s.regionStyle[t].style,null==u?void 0:u[t])}),Sae({type:"text",top:!0},vEe({},s.labelStyle[t],null==l?void 0:l[t])))})),n.push({type:"line",top:!1,start:["min",a],end:["max",a],style:vEe({},s.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:vEe({},s.lineStyle,c)})}return mEe(lIe(n))(e)}function nAe(e){var t=e.options,n=e.chart,r=t.regressionLine;if(r){var i=r.style,o=r.equationStyle,a=void 0===o?{}:o,l=r.top,u=void 0!==l&&l,c=r.showEquation,s=void 0!==c&&c,d={stroke:"#9ba29a",lineWidth:2,opacity:.5},f={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};n.annotation().shape({top:u,render:function(e,r){var o=e.addGroup({id:"".concat(n.id,"-regression-line"),name:"regression-line-group"}),l=$Re({view:r,options:t}),u=l[0],c=l[1];o.addShape("path",{name:"regression-line",attrs:Sae(Sae({path:u},d),i)}),s&&o.addShape("text",{name:"regression-equation",attrs:Sae(Sae(Sae({},f),a),{text:c})})}})}return e}function rAe(e){var t=e.chart,n=e.options.tooltip;return n?t.tooltip(n):!1===n&&t.tooltip(!1),e}function iAe(e){return mEe(XRe,JRe,ZRe,QRe,rAe,eAe,mPe,iIe,oIe,eIe,tAe,tIe,nIe,nAe)(e)}var oAe=vEe({},KIe.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Tbe("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var aAe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="scatter",r.on(gue.BEFORE_RENDER,(function(e){var t,n,i=r,o=i.options,a=i.chart;if((null===(t=e.data)||void 0===t?void 0:t.source)===IOe.FILTER){var l=r.chart.filterData(r.chart.getData());JRe({chart:a,options:Sae(Sae({},o),{data:l})})}(null===(n=e.data)||void 0===n?void 0:n.source)===IOe.RESET&&JRe({chart:a,options:o})})),r}return Cae(t,e),t.getDefaultOptions=function(){return oAe},t.prototype.changeData=function(e){this.updateOption(KRe(vEe({},this.options,{data:e})));var t=this.options;JRe({chart:this.chart,options:t}),this.chart.changeData(e)},t.prototype.getSchemaAdaptor=function(){return iAe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t}(KIe),lAe="$$stock-range$$",uAe="trend",cAe="up",sAe="down",dAe=vEe({},KIe.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(e,t,n){var r;if("x"===e){var i=n[0];r=i?i.title:t}else r=t;return{position:"y"===e?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function fAe(e,t){return $le(e,(function(e){var n=e&&Sae({},e);if(Vae(t)&&n){var r=t[0],i=t[1],o=t[2],a=t[3];n[uAe]=n[r]<=n[i]?cAe:sAe,n[lAe]=[n[r],n[i],n[o],n[a]]}return n}))}function hAe(e){var t=e.chart,n=e.options,r=n.yField,i=n.data,o=n.risingFill,a=n.fallingFill,l=n.tooltip,u=n.stockStyle;t.data(fAe(i,r));var c=l;return!1!==c&&(c=vEe({},{fields:r},c)),CIe(vEe({},e,{options:{schema:{shape:"candle",color:[o,a],style:u},yField:lAe,seriesField:uAe,rawFields:r,tooltip:c}})),e}function pAe(e){var t,n,r=e.chart,i=e.options,o=i.meta,a=i.xAxis,l=i.yAxis,u=i.xField,c=((t={})[u]={type:"timeCat",tickCount:6},t[uAe]={values:[cAe,sAe]},t),s=vEe(c,o,((n={})[u]=oEe(a,tEe),n[lAe]=oEe(l,tEe),n));return r.scale(s),e}function vAe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?t.axis(lAe,!1):t.axis(lAe,i),e}function gAe(e){var t=e.chart,n=e.options.tooltip;return!1!==n?t.tooltip(n):t.tooltip(!1),e}function mAe(e){var t=e.chart,n=e.options.legend;return n?t.legend(uAe,n):!1===n&&t.legend(!1),e}function yAe(e){mEe(nIe,hAe,pAe,vAe,gAe,mAe,eIe,tIe,lIe(),iIe)(e)}var bAe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stock",t}return Cae(t,e),t.getDefaultOptions=function(){return dAe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return yAe},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField;this.chart.changeData(fAe(e,t))},t}(KIe);function wAe(e){return $le(e||[],(function(e,t){return{x:"".concat(t),y:e}}))}var _Ae="x",xAe="y",kAe={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return"".concat(Kle(t,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},CAe={appendPadding:2,tooltip:Sae({},kAe),animation:{}};function SAe(e){var t=e.chart,n=e.options,r=n.data,i=n.color,o=n.areaStyle,a=n.point,l=n.line,u=null==a?void 0:a.state,c=wAe(r);t.data(c);var s=vEe({},e,{options:{xField:_Ae,yField:xAe,area:{color:i,style:o},line:l,point:a}}),d=vEe({},s,{options:{tooltip:!1}}),f=vEe({},s,{options:{tooltip:!1,state:u}});return yIe(s),_Ie(d),xIe(f),t.axis(!1),t.legend(!1),e}function OAe(e){var t,n,r=e.options,i=r.xAxis,o=r.yAxis,a=wAe(r.data);return mEe(aIe(((t={})[_Ae]=i,t[xAe]=o,t),((n={})[_Ae]={type:"cat"},n[xAe]=aEe(a,xAe),n)))(e)}function EAe(e){return mEe(JEe("areaStyle"),SAe,OAe,QEe,nIe,tIe,lIe())(e)}var IAe={appendPadding:2,tooltip:Sae({},kAe),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},PAe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-area",t}return Cae(t,e),t.getDefaultOptions=function(){return IAe},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;OAe({chart:t,options:this.options}),t.changeData(wAe(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return EAe},t}(KIe);function MAe(e){var t=e.chart,n=e.options,r=n.data,i=n.color,o=n.columnStyle,a=n.columnWidthRatio,l=wAe(r);return t.data(l),wIe(vEe({},e,{options:{xField:_Ae,yField:xAe,widthRatio:a,interval:{style:o,color:i}}})),t.axis(!1),t.legend(!1),t.interaction("element-active"),e}function RAe(e){return mEe(nIe,JEe("columnStyle"),MAe,OAe,QEe,tIe,lIe())(e)}var AAe={appendPadding:2,tooltip:Sae({},{showTitle:!1,shared:!0,showMarkers:!1,customContent:function(e,t){return"".concat(Kle(t,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}}),animation:{}},jAe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-column",t}return Cae(t,e),t.getDefaultOptions=function(){return AAe},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;OAe({chart:t,options:this.options}),t.changeData(wAe(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return RAe},t}(KIe);function DAe(e){var t=e.chart,n=e.options,r=n.data,i=n.color,o=n.lineStyle,a=n.point,l=null==a?void 0:a.state,u=wAe(r);t.data(u);var c=vEe({},e,{options:{xField:_Ae,yField:xAe,line:{color:i,style:o},point:a}}),s=vEe({},c,{options:{tooltip:!1,state:l}});return _Ie(c),xIe(s),t.axis(!1),t.legend(!1),e}function TAe(e){return mEe(DAe,OAe,nIe,QEe,tIe,lIe())(e)}var FAe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="tiny-line",t}return Cae(t,e),t.getDefaultOptions=function(){return CAe},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.chart;OAe({chart:t,options:this.options}),t.changeData(wAe(e))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return TAe},t}(KIe),NAe={line:oPe,pie:bRe,column:RPe,bar:NPe,area:cPe,gauge:zMe,"tiny-line":TAe,"tiny-column":RAe,"tiny-area":EAe,"ring-progress":MRe,progress:ORe,scatter:iAe,histogram:ZMe,funnel:CMe,stock:yAe},LAe={line:nRe,pie:wRe,column:HPe,bar:VPe,area:dPe,gauge:HMe,"tiny-line":FAe,"tiny-column":jAe,"tiny-area":PAe,"ring-progress":ARe,progress:ERe,scatter:aAe,histogram:QMe,funnel:OMe,stock:bAe},BAe={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function VAe(e,t,n){var r=LAe[e];r?(0,NAe[e])({chart:t,options:vEe({},r.getDefaultOptions(),Kle(BAe,e,{}),n)}):console.error("could not find ".concat(e," plot"))}function zAe(e){var t=e.chart,n=e.options,r=n.views,i=n.legend;return Hae(r,(function(e){var n=e.region,r=e.data,i=e.meta,o=e.axes,a=e.coordinate,l=e.interactions,u=e.annotations,c=e.tooltip,s=e.geometries,d=t.createView({region:n});d.data(r);var f={};o&&Hae(o,(function(e,t){f[t]=oEe(e,tEe)})),f=vEe({},i,f),d.scale(f),o?Hae(o,(function(e,t){d.axis(t,e)})):d.axis(!1),d.coordinate(a),Hae(s,(function(e){var t=mIe({chart:d,options:e}).ext,n=e.adjust;n&&t.geometry.adjust(n)})),Hae(l,(function(e){!1===e.enable?d.removeInteraction(e.type):d.interaction(e.type,e.cfg)})),Hae(u,(function(e){d.annotation()[e.type](Sae({},e))})),"boolean"==typeof e.animation?d.animate(!1):(d.animate(!0),Hae(d.geometries,(function(t){t.animate(e.animation)}))),c&&(d.interaction("tooltip"),d.tooltip(c))})),i?Hae(i,(function(e,n){t.legend(n,e)})):t.legend(!1),t.tooltip(n.tooltip),e}function HAe(e){var t=e.chart,n=e.options,r=n.plots,i=n.data,o=void 0===i?[]:i;return Hae(r,(function(e){var n=e.type,r=e.region,i=e.options,a=void 0===i?{}:i,l=e.top,u=a.tooltip;if(l)VAe(n,t,Sae(Sae({},a),{data:o}));else{var c=t.createView(Sae({region:r},oEe(a,qIe)));u&&c.interaction("tooltip"),VAe(n,c,Sae({data:o},a))}})),e}function WAe(e){var t=e.chart,n=e.options;return t.option("slider",n.slider),e}function UAe(e){return mEe(tIe,zAe,HAe,eIe,tIe,nIe,QEe,WAe,lIe())(e)}var GAe,YAe,$Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getAssociationItems=function(e,t){var n,r=this.context.event,i=t||{},o=i.linkField,a=i.dim,l=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var u=r.data.data;Hae(e,(function(e){var t,n,r=o;if("x"===a?r=e.getXScale().field:"y"===a?r=null===(t=e.getYScales().find((function(e){return e.field===r})))||void 0===t?void 0:t.field:r||(r=null===(n=e.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=$le(bEe(e),(function(t){var n=!1,i=!1,o=Vae(u)?Kle(u[0],r):Kle(u,r);return function(e,t){var n=e.getModel().data;return Vae(n)?n[0][t]:n[t]}(t,r)===o?n=!0:i=!0,{element:t,view:e,active:n,inactive:i}}));l.push.apply(l,i)}}))}return l},t.prototype.showTooltip=function(e){var t=FEe(this.context.view);Hae(this.getAssociationItems(t,e),(function(e){if(e.active){var t=e.element.shape.getCanvasBBox();e.view.showTooltip({x:t.minX+t.width/2,y:t.minY+t.height/2})}}))},t.prototype.hideTooltip=function(){Hae(FEe(this.context.view),(function(e){e.hideTooltip()}))},t.prototype.active=function(e){var t=TEe(this.context.view);Hae(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("active",!0)}))},t.prototype.selected=function(e){var t=TEe(this.context.view);Hae(this.getAssociationItems(t,e),(function(e){var t=e.active,n=e.element;t&&n.setState("selected",!0)}))},t.prototype.highlight=function(e){var t=TEe(this.context.view);Hae(this.getAssociationItems(t,e),(function(e){var t=e.inactive,n=e.element;t&&n.setState("inactive",!0)}))},t.prototype.reset=function(){Hae(TEe(this.context.view),(function(e){Hae(bEe(e),(function(e){e.hasState("active")&&e.setState("active",!1),e.hasState("selected")&&e.setState("selected",!1),e.hasState("inactive")&&e.setState("inactive",!1)}))}))},t}(Nye);zye("association",$Ae),Tbe("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Tbe("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Tbe("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Tbe("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="mix",t}Cae(t,e),t.prototype.getSchemaAdaptor=function(){return UAe}}(KIe),(YAe=GAe||(GAe={})).DEV="DEV",YAe.BETA="BETA",YAe.STABLE="STABLE";var qAe,KAe="first-axes-view",XAe="second-axes-view",JAe="series-field-key";function ZAe(e,t,n,r,i){var o=[];t.forEach((function(t){r.forEach((function(r){var i,a=((i={})[e]=r[e],i[n]=t,i[t]=r[t],i);o.push(a)}))}));var a=Object.values(sle(o,n)),l=a[0],u=void 0===l?[]:l,c=a[1],s=void 0===c?[]:c;return i?[u.reverse(),s.reverse()]:[u,s]}function QAe(e){return"vertical"!==e}function eje(e,t,n){var r=t[0],i=t[1],o=r.autoPadding,a=i.autoPadding,l=e.__axisPosition,u=l.layout,c=l.position;if(QAe(u)&&"top"===c&&(r.autoPadding=n.instance(o.top,0,o.bottom,o.left),i.autoPadding=n.instance(a.top,o.left,a.bottom,0)),QAe(u)&&"bottom"===c&&(r.autoPadding=n.instance(o.top,o.right/2+5,o.bottom,o.left),i.autoPadding=n.instance(a.top,a.right,a.bottom,o.right/2+5)),!QAe(u)&&"bottom"===c){var s=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,o.bottom/2+5,s),i.autoPadding=n.instance(o.bottom/2+5,a.right,a.bottom,s)}if(!QAe(u)&&"top"===c){s=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,0,s),i.autoPadding=n.instance(0,a.right,o.top,s)}}function tje(e){var t,n,r=e.chart,i=e.options,o=i.data,a=i.xField,l=i.yField,u=i.color,c=i.barStyle,s=i.widthRatio,d=i.legend,f=i.layout,h=ZAe(a,l,JAe,o,QAe(f));d?r.legend(JAe,d):!1===d&&r.legend(!1);var p=h[0],v=h[1];return QAe(f)?((t=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:KAe})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:XAe})).coordinate().transpose(),t.data(p),n.data(v)):(t=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:KAe}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:XAe})).coordinate().reflect("y"),t.data(p),n.data(v)),wIe(vEe({},e,{chart:t,options:{widthRatio:s,xField:a,yField:l[0],seriesField:JAe,interval:{color:u,style:c}}})),wIe(vEe({},e,{chart:n,options:{xField:a,yField:l[1],seriesField:JAe,widthRatio:s,interval:{color:u,style:c}}})),e}function nje(e){var t,n,r,i=e.options,o=e.chart,a=i.xAxis,l=i.yAxis,u=i.xField,c=i.yField,s=DEe(o,KAe),d=DEe(o,XAe),f={};return Wae((null==i?void 0:i.meta)||{}).map((function(e){Kle(null==i?void 0:i.meta,[e,"alias"])&&(f[e]=i.meta[e].alias)})),o.scale(((t={})[JAe]={sync:!0,formatter:function(e){return Kle(f,e,e)}},t)),aIe(((n={})[u]=a,n[c[0]]=l[c[0]],n))(vEe({},e,{chart:s})),aIe(((r={})[u]=a,r[c[1]]=l[c[1]],r))(vEe({},e,{chart:d})),e}function rje(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,l=n.layout,u=DEe(t,KAe),c=DEe(t,XAe);return"bottom"===(null==r?void 0:r.position)?c.axis(o,Sae(Sae({},r),{label:{formatter:function(){return""}}})):c.axis(o,!1),!1===r?u.axis(o,!1):u.axis(o,Sae({position:QAe(l)?"top":"bottom"},r)),!1===i?(u.axis(a[0],!1),c.axis(a[1],!1)):(u.axis(a[0],i[a[0]]),c.axis(a[1],i[a[1]])),t.__axisPosition={position:u.getOptions().axes[o].position,layout:l},e}function ije(e){var t=e.chart;return eIe(vEe({},e,{chart:DEe(t,KAe)})),eIe(vEe({},e,{chart:DEe(t,XAe)})),e}function oje(e){var t=e.chart,n=e.options,r=n.yField,i=n.yAxis;return uIe(vEe({},e,{chart:DEe(t,KAe),options:{yAxis:i[r[0]]}})),uIe(vEe({},e,{chart:DEe(t,XAe),options:{yAxis:i[r[1]]}})),e}function aje(e){var t=e.chart;return nIe(vEe({},e,{chart:DEe(t,KAe)})),nIe(vEe({},e,{chart:DEe(t,XAe)})),nIe(e),e}function lje(e){var t=e.chart;return tIe(vEe({},e,{chart:DEe(t,KAe)})),tIe(vEe({},e,{chart:DEe(t,XAe)})),e}function uje(e){var t,n,r=this,i=e.chart,o=e.options,a=o.label,l=o.yField,u=o.layout,c=DEe(i,KAe),s=DEe(i,XAe),d=yEe(c,"interval"),f=yEe(s,"interval");if(a){var h=a.callback,p=Oae(a,["callback"]);p.position||(p.position="middle"),void 0===p.offset&&(p.offset=2);var v=Sae({},p);if(QAe(u)){var g=(null===(t=v.style)||void 0===t?void 0:t.textAlign)||("middle"===p.position?"center":"left");p.style=vEe({},p.style,{textAlign:g});v.style=vEe({},v.style,{textAlign:{left:"right",right:"left",center:"center"}[g]})}else{var m={top:"bottom",bottom:"top",middle:"middle"};"string"==typeof p.position?p.position=m[p.position]:"function"==typeof p.position&&(p.position=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m[p.position.apply(r,e)]});var y=(null===(n=v.style)||void 0===n?void 0:n.textBaseline)||"bottom";v.style=vEe({},v.style,{textBaseline:y});p.style=vEe({},p.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[y]})}d.label({fields:[l[0]],callback:h,cfg:xEe(v)}),f.label({fields:[l[1]],callback:h,cfg:xEe(p)})}else d.label(!1),f.label(!1);return e}function cje(e){return mEe(tje,nje,rje,oje,aje,uje,QEe,ije,lje)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bidirectional-bar",t}Cae(t,e),t.getDefaultOptions=function(){return vEe({},e.getDefaultOptions.call(this),{syncViewPadding:eje})},t.prototype.changeData=function(e){void 0===e&&(e=[]),this.chart.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this.chart,gue.BEFORE_CHANGE_DATA,null)),this.updateOption({data:e});var t=this.options,n=t.xField,r=t.yField,i=t.layout,o=ZAe(n,r,JAe,e,QAe(i)),a=o[0],l=o[1],u=DEe(this.chart,KAe),c=DEe(this.chart,XAe);u.data(a),c.data(l),this.chart.render(!0),this.chart.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this.chart,gue.AFTER_CHANGE_DATA,null))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return cje},t.SERIES_FIELD_KEY=JAe}(KIe);var sje="$$range$$",dje="$$y_outliers$$",fje="outliers_view",hje=vEe({},KIe.getDefaultOptions(),{meta:(qAe={},qAe[sje]={min:0,alias:"low-q1-median-q3-high"},qAe),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),pje=function(e,t){var n=e;if(Array.isArray(t)){var r=t[0],i=t[1],o=t[2],a=t[3],l=t[4];n=$le(e,(function(e){return e[sje]=[e[r],e[i],e[o],e[a],e[l]],e}))}return n};function vje(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,o=n.groupField,a=n.color,l=n.tooltip,u=n.boxStyle;t.data(pje(n.data,i));var c=Vae(i)?sje:i,s=i?Vae(i)?i:[i]:[],d=l;!1!==d&&(d=vEe({},{fields:Vae(i)?i:[]},d));var f=CIe(vEe({},e,{options:{xField:r,yField:c,seriesField:o,tooltip:d,rawFields:s,label:!1,schema:{shape:"box",color:a,style:u}}})).ext;return o&&f.geometry.adjust("dodge"),e}function gje(e){var t=e.chart,n=e.options,r=n.xField,i=n.data,o=n.outliersField,a=n.outliersStyle,l=n.padding,u=n.label;if(!o)return e;var c=t.createView({padding:l,id:fje}),s=i.reduce((function(e,t){return t[o].forEach((function(n){var r;return e.push(Sae(Sae({},t),((r={})[o]=n,r)))})),e}),[]);return c.data(s),xIe({chart:c,options:{xField:r,yField:o,point:{shape:"circle",style:a},label:u}}),c.axis(!1),e}function mje(e){var t,n,r=e.chart,i=e.options,o=i.meta,a=i.xAxis,l=i.yAxis,u=i.xField,c=i.yField,s=i.outliersField,d=Array.isArray(c)?sje:c,f={};if(s){var h=dje;(t={})[s]={sync:h,nice:!0},t[d]={sync:h,nice:!0},f=t}var p=vEe(f,o,((n={})[u]=oEe(a,tEe),n[d]=oEe(l,tEe),n));return r.scale(p),e}function yje(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,l=Array.isArray(a)?sje:a;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?t.axis(sje,!1):t.axis(l,i),e}function bje(e){var t=e.chart,n=e.options,r=n.legend,i=n.groupField;return i?r?t.legend(i,r):t.legend(i,{position:"bottom"}):t.legend(!1),e}function wje(e){return mEe(vje,gje,mje,yje,bje,QEe,lIe(),eIe,tIe,nIe)(e)}function _je(e,t,n){return e.length>1?"".concat(t,"_").concat(n):"".concat(t)}function xje(e){var t=e.data,n=e.xField,r=e.measureField,i=e.rangeField,o=e.targetField,a=e.layout,l=[],u=[];t.forEach((function(e,t){var a=[e[i]].flat();a.sort((function(e,t){return e-t})),a.forEach((function(r,o){var u,c=0===o?r:a[o]-a[o-1];l.push(((u={rKey:"".concat(i,"_").concat(o)})[n]=n?e[n]:String(t),u[i]=c,u))}));var c=[e[r]].flat();c.forEach((function(i,o){var a;l.push(((a={mKey:_je(c,r,o)})[n]=n?e[n]:String(t),a[r]=i,a))}));var s=[e[o]].flat();s.forEach((function(r,i){var a;l.push(((a={tKey:_je(s,o,i)})[n]=n?e[n]:String(t),a[o]=r,a))})),u.push(e[i],e[r],e[o])}));var c=Math.min.apply(Math,u.flat(1/0)),s=Math.max.apply(Math,u.flat(1/0));return c=c>0?0:c,"vertical"===a&&l.reverse(),{min:c,max:s,ds:l}}function kje(e){var t=e.chart,n=e.options,r=n.bulletStyle,i=n.targetField,o=n.rangeField,a=n.measureField,l=n.xField,u=n.color,c=n.layout,s=n.size,d=n.label,f=xje(n),h=f.min,p=f.max,v=f.ds;return t.data(v),wIe(vEe({},e,{options:{xField:l,yField:o,seriesField:"rKey",isStack:!0,label:Kle(d,"range"),interval:{color:Kle(u,"range"),style:Kle(r,"range"),size:Kle(s,"range")}}})),t.geometries[0].tooltip(!1),wIe(vEe({},e,{options:{xField:l,yField:a,seriesField:"mKey",isStack:!0,label:Kle(d,"measure"),interval:{color:Kle(u,"measure"),style:Kle(r,"measure"),size:Kle(s,"measure")}}})),xIe(vEe({},e,{options:{xField:l,yField:i,seriesField:"tKey",label:Kle(d,"target"),point:{color:Kle(u,"target"),style:Kle(r,"target"),size:Lae(Kle(s,"target"))?function(e){return Kle(s,"target")(e)/2}:Kle(s,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}})),"horizontal"===c&&t.coordinate().transpose(),Sae(Sae({},e),{ext:{data:{min:h,max:p}}})}function Cje(e){var t,n,r=e.options,i=e.ext,o=r.xAxis,a=r.yAxis,l=r.targetField,u=r.rangeField,c=r.measureField,s=r.xField,d=i.data;return mEe(aIe(((t={})[s]=o,t[c]=a,t),((n={})[c]={min:null==d?void 0:d.min,max:null==d?void 0:d.max,sync:!0},n[l]={sync:"".concat(c)},n[u]={sync:"".concat(c)},n)))(e)}function Sje(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.measureField,l=n.rangeField,u=n.targetField;return t.axis("".concat(l),!1),t.axis("".concat(u),!1),!1===r?t.axis("".concat(o),!1):t.axis("".concat(o),r),!1===i?t.axis("".concat(a),!1):t.axis("".concat(a),i),e}function Oje(e){var t=e.chart,n=e.options.legend;return t.removeInteraction("legend-filter"),t.legend(n),t.legend("rKey",!1),t.legend("mKey",!1),t.legend("tKey",!1),e}function Eje(e){var t=e.chart,n=e.options,r=n.label,i=n.measureField,o=n.targetField,a=n.rangeField,l=t.geometries,u=l[0],c=l[1],s=l[2];return Kle(r,"range")?u.label("".concat(a),Sae({layout:[{type:"limit-in-plot"}]},xEe(r.range))):u.label(!1),Kle(r,"measure")?c.label("".concat(i),Sae({layout:[{type:"limit-in-plot"}]},xEe(r.measure))):c.label(!1),Kle(r,"target")?s.label("".concat(o),Sae({layout:[{type:"limit-in-plot"}]},xEe(r.target))):s.label(!1),e}function Ije(e){mEe(kje,Cje,Sje,Oje,nIe,Eje,QEe,eIe,tIe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="box",t}Cae(t,e),t.getDefaultOptions=function(){return hje},t.prototype.changeData=function(e){this.updateOption({data:e});var t=this.options.yField,n=this.chart.views.find((function(e){return e.id===fje}));n&&n.data(e),this.chart.changeData(pje(e,t))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return wje}}(KIe);var Pje=vEe({},KIe.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="bullet",t}Cae(t,e),t.getDefaultOptions=function(){return Pje},t.prototype.changeData=function(e){this.updateOption({data:e});var t=xje(this.options),n=t.min,r=t.max,i=t.ds;Cje({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},t.prototype.getSchemaAdaptor=function(){return Ije},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(KIe);var Mje={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(e){return e.id},source:function(e){return e.source},target:function(e){return e.target},sourceWeight:function(e){return e.value||1},targetWeight:function(e){return e.value||1},sortBy:null};function Rje(e,t){var n=function(e){return Nle({},Mje,e)}(e),r={},i=t.nodes,o=t.links;i.forEach((function(e){var t=n.id(e);r[t]=e})),function(e,t,n){Hae(e,(function(e,r){e.inEdges=t.filter((function(e){return"".concat(n.target(e))==="".concat(r)})),e.outEdges=t.filter((function(e){return"".concat(n.source(e))==="".concat(r)})),e.edges=e.outEdges.concat(e.inEdges),e.frequency=e.edges.length,e.value=0,e.inEdges.forEach((function(t){e.value+=n.targetWeight(t)})),e.outEdges.forEach((function(t){e.value+=n.sourceWeight(t)}))}))}(r,o,n),function(e,t){var n={weight:function(e,t){return t.value-e.value},frequency:function(e,t){return t.frequency-e.frequency},id:function(e,n){return"".concat(t.id(e)).localeCompare("".concat(t.id(n)))}}[t.sortBy];!n&&Lae(t.sortBy)&&(n=t.sortBy),n&&e.sort(n)}(i,n);var a=function(e,t){var n=e.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(t.weight){var r=t.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),o=t.nodeWidthRatio;if(o<=0||o>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var a=0;e.forEach((function(e){a+=e.value})),e.forEach((function(e){e.weight=e.value/a,e.width=e.weight*(1-r),e.height=o})),e.forEach((function(n,r){for(var a=0,l=r-1;l>=0;l--)a+=e[l].width+2*i;var u=n.minX=i+a,c=n.maxX=n.minX+n.width,s=n.minY=t.y-o/2,d=n.maxY=s+o;n.x=[u,c,c,u],n.y=[s,s,d,d]}))}else{var l=1/n;e.forEach((function(e,n){e.x=(n+.5)*l,e.y=t.y}))}return e}(i,n),l=function(e,t,n){if(n.weight){var r={};Hae(e,(function(e,t){r[t]=e.value})),t.forEach((function(t){var i=n.source(t),o=n.target(t),a=e[i],l=e[o];if(a&&l){var u=r[i],c=n.sourceWeight(t),s=a.minX+(a.value-u)/a.value*a.width,d=s+c/a.value*a.width;r[i]-=c;var f=r[o],h=n.targetWeight(t),p=l.minX+(l.value-f)/l.value*l.width,v=p+h/l.value*l.width;r[o]-=h;var g=n.y;t.x=[s,d,p,v],t.y=[g,g,g,g],t.source=a,t.target=l}}))}else t.forEach((function(t){var r=e[n.source(t)],i=e[n.target(t)];r&&i&&(t.x=[r.x,i.x],t.y=[r.y,i.y],t.source=r,t.target=i)}));return t}(r,o,n);return{nodes:a,links:l}}var Aje="x",jje="y",Dje="name",Tje="source",Fje={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(e,t){return{offsetX:(e[0]+e[1])/2>.5?-4:4,content:t}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(e){return!Kle(e,[0,"data","isNode"])},formatter:function(e){var t=e.source,n=e.target,r=e.value;return{name:"".concat(t," -> ").concat(n),value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Nje(e){var t=e.options,n=t.data,r=t.sourceField,i=t.targetField,o=t.weightField,a=t.nodePaddingRatio,l=t.nodeWidthRatio,u=t.rawFields,c=void 0===u?[]:u,s=Rje({weight:!0,nodePaddingRatio:a,nodeWidthRatio:l},lEe(n,r,i,o)),d=s.nodes,f=s.links,h=d.map((function(e){return Sae(Sae({},oEe(e,Aae(["id","x","y","name"],c,!0))),{isNode:!0})})),p=f.map((function(e){return Sae(Sae({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},oEe(e,Aae(["x","y","value"],c,!0))),{isNode:!1})}));return Sae(Sae({},e),{ext:Sae(Sae({},e.ext),{chordData:{nodesData:h,edgesData:p}})})}function Lje(e){var t;return e.chart.scale(((t={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}})[Dje]={sync:"color"},t[Tje]={sync:"color"},t)),e}function Bje(e){return e.chart.axis(!1),e}function Vje(e){return e.chart.legend(!1),e}function zje(e){var t=e.chart,n=e.options.tooltip;return t.tooltip(n),e}function Hje(e){return e.chart.coordinate("polar").reflect("y"),e}function Wje(e){var t=e.chart,n=e.options,r=e.ext.chordData.nodesData,i=n.nodeStyle,o=n.label,a=n.tooltip,l=t.createView();return l.data(r),kIe({chart:l,options:{xField:Aje,yField:jje,seriesField:Dje,polygon:{style:i},label:o,tooltip:a}}),e}function Uje(e){var t=e.chart,n=e.options,r=e.ext.chordData.edgesData,i=n.edgeStyle,o=n.tooltip,a=t.createView();return a.data(r),bIe({chart:a,options:{xField:Aje,yField:jje,seriesField:Tje,edge:{style:i,shape:"arc"},tooltip:o}}),e}function Gje(e){var t,n=e.chart;return NEe(n,e.options.animation,Kle(t=n,["views","length"],0)<=0?t.geometries:ele(t.views,(function(e,t){return e.concat(t.geometries)}),t.geometries)),e}function Yje(e){return mEe(nIe,Nje,Hje,Lje,Bje,Vje,zje,Uje,Wje,eIe,rIe,Gje)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="chord",t}Cae(t,e),t.getDefaultOptions=function(){return Fje},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Yje}}(KIe);var $je=["x","y","r","name","value","path","depth"],qje={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},Kje="drilldown-bread-crumb",Xje={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Jje="hierarchy-data-transform-params",Zje=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=Xje,t}return Cae(t,e),t.prototype.click=function(){var e=Kle(this.context,["event","data","data"]);if(!e)return!1;this.drill(e),this.drawBreadCrumb()},t.prototype.resetPosition=function(){if(this.breadCrumbGroup){var e=this.context.view.getCoordinate(),t=this.breadCrumbGroup,n=t.getBBox(),r=this.getButtonCfg().position,i={x:e.start.x,y:e.end.y-(n.height+10)};e.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:e.start.x,y:e.start.y});var o=x_e.transform(null,[["t",i.x+0,i.y+n.height+5]]);t.setMatrix(o)}},t.prototype.back=function(){oue(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},t.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},t.prototype.drill=function(e){var t=this.context.view,n=Kle(t,["interactions","drill-down","cfg","transformData"],(function(e){return e})),r=n(Sae({data:e.data},e[Jje]));t.changeData(r);for(var i=[],o=e;o;){var a=o.data;i.unshift({id:"".concat(a.name,"_").concat(o.height,"_").concat(o.depth),name:a.name,children:n(Sae({data:a},e[Jje]))}),o=o.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},t.prototype.backTo=function(e){if(e&&!(e.length<=0)){var t=this.context.view,n=ale(e).children;t.changeData(n),e.length>1?(this.historyCache=e,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},t.prototype.getButtonCfg=function(){var e=this.context.view,t=Kle(e,["interactions","drill-down","cfg","drillDownConfig"]);return vEe(this.breadCrumbCfg,null==t?void 0:t.breadCrumb,this.cfg)},t.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},t.prototype.drawBreadCrumbGroup=function(){var e=this,t=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Kje});var r=0;n.forEach((function(i,o){var a=e.breadCrumbGroup.addShape({type:"text",id:i.id,name:"".concat(Kje,"_").concat(i.name,"_text"),attrs:Sae(Sae({text:0!==o||Bae(t.rootText)?i.name:t.rootText},t.textStyle),{x:r,y:0})}),l=a.getBBox();if(r+=l.width+4,a.on("click",(function(t){var r,i=t.target.get("id");if(i!==(null===(r=ale(n))||void 0===r?void 0:r.id)){var o=n.slice(0,n.findIndex((function(e){return e.id===i}))+1);e.backTo(o)}})),a.on("mouseenter",(function(e){var r;e.target.get("id")!==(null===(r=ale(n))||void 0===r?void 0:r.id)?a.attr(t.activeTextStyle):a.attr({cursor:"default"})})),a.on("mouseleave",(function(){a.attr(t.textStyle)})),o<n.length-1){var u=e.breadCrumbGroup.addShape({type:"text",name:"".concat(t.name,"_").concat(i.name,"_divider"),attrs:Sae(Sae({text:t.dividerText},t.textStyle),{x:r,y:0})}).getBBox();r+=u.width+4}}))},t.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},t.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),e.prototype.destroy.call(this)},t}(Nye);function Qje(e,t){return e.parent===t.parent?1:2}function eDe(e,t){return e+t.x}function tDe(e,t){return Math.max(e,t.y)}function nDe(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function rDe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iDe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iDe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function iDe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oDe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aDe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aDe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function aDe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lDe=ps.mark(uDe);function uDe(){var e,t,n,r,i,o;return ps.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=[e=this];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){a.next=8;break}return a.next=5,e;case 5:if(r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);a.next=2;break;case 8:if(n.length){a.next=1;break}case 9:case"end":return a.stop()}}),lDe,this)}function cDe(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=dDe)):void 0===t&&(t=sDe);for(var n,r,i,o,a,l=new pDe(e),u=[l];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new pDe(i[o])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(hDe)}function sDe(e){return e.children}function dDe(e){return Array.isArray(e)?e[1]:null}function fDe(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function hDe(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function pDe(e){this.data=e,this.depth=this.height=0,this.parent=null}function vDe(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&yDe(n,t)?++r:(n=wDe(o=gDe(o,t)),r=0);return n}function gDe(e,t){var n,r;if(bDe(t,e))return[t];for(n=0;n<e.length;++n)if(mDe(t,e[n])&&bDe(_De(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(mDe(_De(e[n],e[r]),t)&&mDe(_De(e[n],t),e[r])&&mDe(_De(e[r],t),e[n])&&bDe(xDe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function mDe(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function yDe(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bDe(e,t){for(var n=0;n<t.length;++n)if(!yDe(e,t[n]))return!1;return!0}function wDe(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return _De(e[0],e[1]);case 3:return xDe(e[0],e[1],e[2])}var t}function _De(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,l=t.r,u=o-n,c=a-r,s=l-i,d=Math.sqrt(u*u+c*c);return{x:(n+o+u/d*s)/2,y:(r+a+c/d*s)/2,r:(d+i+l)/2}}function xDe(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,l=t.y,u=t.r,c=n.x,s=n.y,d=n.r,f=r-a,h=r-c,p=i-l,v=i-s,g=u-o,m=d-o,y=r*r+i*i-o*o,b=y-a*a-l*l+u*u,w=y-c*c-s*s+d*d,_=h*p-f*v,x=(p*w-v*b)/(2*_)-r,k=(v*g-p*m)/_,C=(h*b-f*w)/(2*_)-i,S=(f*m-h*g)/_,O=k*k+S*S-1,E=2*(o+x*k+C*S),I=x*x+C*C-o*o,P=-(O?(E+Math.sqrt(E*E-4*O*I))/(2*O):I/E);return{x:r+x+k*P,y:i+C+S*P,r:P}}function kDe(e,t,n){var r,i,o,a,l=e.x-t.x,u=e.y-t.y,c=l*l+u*u;c?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=e.x-r*l-o*u,n.y=e.y-r*u+o*l):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*l-o*u,n.y=t.y+r*u+o*l)):(n.x=t.x+n.r,n.y=t.y)}function CDe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function SDe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function ODe(e){this._=e,this.next=null,this.previous=null}function EDe(e){if(!(o=(t=e,e="object"===lr(t)&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,l,u,c,s,d,f;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;kDe(r,n,i=e[2]),n=new ODe(n),r=new ODe(r),i=new ODe(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){kDe(n._,r._,i=e[u]),i=new ODe(i),c=r.next,s=n.previous,d=r._.r,f=n._.r;do{if(d<=f){if(CDe(c._,i._)){r=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.next}else{if(CDe(s._,i._)){(n=s).next=r,r.previous=n,--u;continue e}f+=s._.r,s=s.previous}}while(c!==s.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=SDe(n);(i=i.next)!==r;)(l=SDe(i))<a&&(n=i,a=l);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=vDe(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function IDe(e){if("function"!=typeof e)throw new Error;return e}function PDe(){return 0}function MDe(e){return function(){return e}}function RDe(e){return Math.sqrt(e.value)}function ADe(){var e=null,t=1,n=1,r=PDe;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(jDe(e)).eachAfter(DDe(r,.5)).eachBefore(TDe(1)):i.eachBefore(jDe(RDe)).eachAfter(DDe(PDe,1)).eachAfter(DDe(r,i.r/Math.min(t,n))).eachBefore(TDe(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=null==(n=t)?null:IDe(n),i):e;var n},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:MDe(+e),i):r},i}function jDe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function DDe(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,l=e(n)*t||0;if(l)for(i=0;i<a;++i)r[i].r+=l;if(o=EDe(r),l)for(i=0;i<a;++i)r[i].r-=l;n.r=o+l}}}function TDe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function FDe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function NDe(e,t,n,r,i){for(var o,a=e.children,l=-1,u=a.length,c=e.value&&(r-t)/e.value;++l<u;)(o=a[l]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*c}function LDe(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&NDe(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,l=r.y1-n;a<i&&(i=a=(i+a)/2),l<o&&(o=l=(o+l)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=l}}(t,o)),r&&i.eachBefore(FDe),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}pDe.prototype=cDe.prototype=os({constructor:pDe,count:function(){return this.eachAfter(nDe)},each:function(e,t){var n,r=-1,i=rDe(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.call(t,o,++r,this)}}catch(e){i.e(e)}finally{i.f()}return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],l=[],u=-1;o=a.pop();)if(l.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=l.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){var n,r=-1,i=oDe(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.call(t,o,++r,this))return o}}catch(e){i.e(e)}finally{i.f()}},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return cDe(this).eachBefore(fDe)}},Symbol.iterator,uDe);var BDe={depth:-1},VDe={};function zDe(e){return e.id}function HDe(e){return e.parentId}function WDe(e,t){return e.parent===t.parent?1:2}function UDe(e){var t=e.children;return t?t[0]:e.t}function GDe(e){var t=e.children;return t?t[t.length-1]:e.t}function YDe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function $De(e,t,n){return e.a.parent===t.parent?e.a:n}function qDe(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function KDe(e,t,n,r,i){for(var o,a=e.children,l=-1,u=a.length,c=e.value&&(i-n)/e.value;++l<u;)(o=a[l]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*c}qDe.prototype=Object.create(pDe.prototype);var XDe=(1+Math.sqrt(5))/2;function JDe(e,t,n,r,i,o){for(var a,l,u,c,s,d,f,h,p,v,g,m=[],y=t.children,b=0,w=0,_=y.length,x=t.value;b<_;){u=i-n,c=o-r;do{s=y[w++].value}while(!s&&w<_);for(d=f=s,g=s*s*(v=Math.max(c/u,u/c)/(x*e)),p=Math.max(f/g,g/d);w<_;++w){if(s+=l=y[w].value,l<d&&(d=l),l>f&&(f=l),g=s*s*v,(h=Math.max(f/g,g/d))>p){s-=l;break}p=h}m.push(a={value:s,dice:u<c,children:y.slice(b,w)}),a.dice?NDe(a,n,r,i,x?r+=c*s/x:o):KDe(a,n,r,x?n+=u*s/x:i,o),x-=s,b=w}return m}const ZDe=function e(t){function n(e,n,r,i,o){JDe(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(XDe);function QDe(){var e=ZDe,t=!1,n=1,r=1,i=[0],o=PDe,a=PDe,l=PDe,u=PDe,c=PDe;function s(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(FDe),e}function d(t){var n=i[t.depth],r=t.x0+n,s=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<s&&(s=f=(s+f)/2),t.x0=r,t.y0=s,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=o(t)/2,r+=c(t)-n,s+=a(t)-n,(d-=l(t)-n)<r&&(r=d=(r+d)/2),(f-=u(t)-n)<s&&(s=f=(s+f)/2),e(t,r,s,d,f))}return s.round=function(e){return arguments.length?(t=!!e,s):t},s.size=function(e){return arguments.length?(n=+e[0],r=+e[1],s):[n,r]},s.tile=function(t){return arguments.length?(e=IDe(t),s):e},s.padding=function(e){return arguments.length?s.paddingInner(e).paddingOuter(e):s.paddingInner()},s.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:MDe(+e),s):o},s.paddingOuter=function(e){return arguments.length?s.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):s.paddingTop()},s.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:MDe(+e),s):a},s.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:MDe(+e),s):l},s.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:MDe(+e),s):u},s.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:MDe(+e),s):c},s}const eTe=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,l,u,c,s,d=-1,f=a.length,h=e.value;++d<f;){for(u=(l=a[d]).children,c=l.value=0,s=u.length;c<s;++c)l.value+=u[c].value;l.dice?NDe(l,n,r,i,h?r+=(o-r)*l.value/h:o):KDe(l,n,r,h?n+=(i-n)*l.value/h:i,o),h-=l.value}else e._squarify=a=JDe(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(XDe),tTe=Object.freeze(Object.defineProperty({__proto__:null,cluster:function(){var e=Qje,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(eDe,0)/e.length}(n),t.y=function(e){return 1+e.reduce(tDe,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var l=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=l.x-e(l,u)/2,s=u.x+e(u,l)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(s-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},hierarchy:cDe,pack:ADe,packEnclose:vDe,packSiblings:function(e){return EDe(e),e},partition:LDe,stratify:function(){var e=zDe,t=HDe;function n(n){var r,i,o,a,l,u,c,s=Array.from(n),d=s.length,f=new Map;for(i=0;i<d;++i)r=s[i],l=s[i]=new pDe(r),null!=(u=e(r,i,n))&&(u+="")&&(c=l.id=u,f.set(c,f.has(c)?VDe:l)),null!=(u=t(r,i,n))&&(u+="")&&(l.parent=u);for(i=0;i<d;++i)if(u=(l=s[i]).parent){if(!(a=f.get(u)))throw new Error("missing: "+u);if(a===VDe)throw new Error("ambiguous: "+u);a.children?a.children.push(l):a.children=[l],l.parent=a}else{if(o)throw new Error("multiple roots");o=l}if(!o)throw new Error("no root");if(o.parent=BDe,o.eachBefore((function(e){e.depth=e.parent.depth+1,--d})).eachBefore(hDe),o.parent=null,d>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=IDe(t),n):e},n.parentId=function(e){return arguments.length?(t=IDe(e),n):t},n},tree:function(){var e=WDe,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new qDe(e,0),l=[a];t=l.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)l.push(n=t.children[i]=new qDe(r[i],i)),n.parent=t;return(a.parent=new qDe(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(l);else{var c=i,s=i,d=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>s.x&&(s=e),e.depth>d.depth&&(d=e)}));var f=c===s?1:e(c,s)/2,h=f-c.x,p=t/(s.x+f+h),v=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*v}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,l=n,u=o.parent.children[0],c=o.m,s=a.m,d=l.m,f=u.m;l=GDe(l),o=UDe(o),l&&o;)u=UDe(u),(a=GDe(a)).a=t,(i=l.z+d-o.z-c+e(l._,o._))>0&&(YDe($De(l,t,r),t,i),c+=i,s+=i),d+=l.m,c+=o.m,f+=u.m,s+=a.m;l&&!GDe(a)&&(a.t=l,a.m+=d-s),o&&!UDe(u)&&(u.t=o,u.m+=c-f,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},treemap:QDe,treemapBinary:function(e,t,n,r,i){var o,a,l=e.children,u=l.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=l[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var s=l[t];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=u)}var d=c[t],f=r/2+d,h=t+1,p=n-1;for(;h<p;){var v=h+p>>>1;c[v]<f?h=v+1:p=v}f-c[h-1]<c[h]-f&&t+1<h&&--h;var g=c[h]-d,m=r-g;if(a-i>u-o){var y=r?(i*m+a*g)/r:a;e(t,h,g,i,o,y,u),e(h,n,m,y,o,a,u)}else{var b=r?(o*m+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,m,i,b,a,u)}}(0,u,e.value,t,n,r,i)},treemapDice:NDe,treemapResquarify:eTe,treemapSlice:KDe,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?KDe:NDe)(e,t,n,r,i)},treemapSquarify:ZDe},Symbol.toStringTag,{value:"Module"}));var nTe="nodeIndex",rTe="childNodeCount",iTe="nodeAncestor",oTe="Invalid field: it must be a string!";function aTe(e,t){var n=e.field,r=e.fields;if(nle(n))return n;if(Vae(n))return console.warn(oTe),n[0];if(console.warn("".concat(oTe," will try to get fields instead.")),nle(r))return r;if(Vae(r)&&r.length)return r[0];throw new TypeError(oTe)}function lTe(e){var t,n,r=[];e&&e.each?e.each((function(e){var i,o;e.parent!==t?(t=e.parent,n=0):n+=1;var a=Tae(((null===(i=e.ancestors)||void 0===i?void 0:i.call(e))||[]).map((function(e){return r.find((function(t){return t.name===e.name}))||e})),(function(t){var n=t.depth;return n>0&&n<e.depth}));e[iTe]=a,e[rTe]=(null===(o=e.children)||void 0===o?void 0:o.length)||0,e[nTe]=n,r.push(e)})):e&&e.eachNode&&e.eachNode((function(e){r.push(e)}));return r}var uTe={field:"value",as:["x","y","r"],sort:function(e,t){return t.value-e.value}};function cTe(e){var t=e.data,n=e.hierarchyConfig,r=e.rawFields,i=void 0===r?[]:r,o=e.enableDrillDown,a=function(e,t){var n,r=(t=Nle({},uTe,t)).as;if(!Vae(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=aTe(t)}catch(e){console.warn(e)}var i,o=(i=e,ADe().size(t.size).padding(t.padding)(cDe(i).sum((function(e){return e[n]})).sort(t.sort))),a=r[0],l=r[1],u=r[2];return o.each((function(e){e[a]=e.x,e[l]=e.y,e[u]=e.r})),lTe(o)}(t,Sae(Sae({},n),{field:"value",as:["x","y","r"]})),l=[];return a.forEach((function(e){for(var t,r=e.data.name,a=Sae({},e);a.depth>1;)r="".concat(null===(t=a.parent.data)||void 0===t?void 0:t.name," / ").concat(r),a=a.parent;if(o&&e.depth>2)return null;var u=vEe({},e.data,Sae(Sae(Sae({},oEe(e.data,i)),{path:r}),e));u.ext=n,u[Jje]={hierarchyConfig:n,rawFields:i,enableDrillDown:o},l.push(u)})),l}function sTe(e,t,n){var r=OEe([e,t]),i=r[0],o=r[1],a=r[2],l=r[3],u=n.width-(l+o),c=n.height-(i+a),s=Math.min(u,c),d=(u-s)/2,f=(c-s)/2;return{finalPadding:[i+f,o+d,a+f,l+d],finalSize:s<0?0:s}}function dTe(e){var t=e.chart,n=Math.min(t.viewBBox.width,t.viewBBox.height);return vEe({options:{size:function(e){return e.r*n}}},e)}function fTe(e){var t=e.options,n=e.chart,r=n.viewBBox,i=t.padding,o=t.appendPadding,a=t.drilldown,l=o;(null==a?void 0:a.enabled)&&(l=OEe([SEe(n.appendPadding,Kle(a,["breadCrumb","position"])),o]));var u=sTe(i,l,r).finalPadding;return n.padding=u,n.appendPadding=0,e}function hTe(e){var t=e.chart,n=e.options,r=t.padding,i=t.appendPadding,o=n.color,a=n.colorField,l=n.pointStyle,u=n.hierarchyConfig,c=n.sizeField,s=n.rawFields,d=void 0===s?[]:s,f=n.drilldown,h=cTe({data:n.data,hierarchyConfig:u,enableDrillDown:null==f?void 0:f.enabled,rawFields:d});t.data(h);var p=sTe(r,i,t.viewBBox).finalSize,v=function(e){return e.r*p};return c&&(v=function(e){return e[c]*p}),xIe(vEe({},e,{options:{xField:"x",yField:"y",seriesField:a,sizeField:c,rawFields:Aae(Aae([],$je,!0),d,!0),point:{color:o,style:l,shape:"circle",size:v}}})),e}function pTe(e){return mEe(aIe({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(e)}function vTe(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Kle(n,"fields")||(r=vEe({},{customItems:function(e){return e.map((function(e){var n=Kle(t.getOptions(),"scales"),r=Kle(n,["name","formatter"],(function(e){return e})),i=Kle(n,["value","formatter"],(function(e){return e}));return Sae(Sae({},e),{name:r(e.data.name),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function gTe(e){return e.chart.axis(!1),e}function mTe(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?vEe({},e,{interactions:Aae(Aae([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:t,transformData:cTe,enableDrillDown:!0}}],!1)}):e}function yTe(e){return eIe({chart:e.chart,options:mTe(e.options)}),e}function bTe(e){return mEe(JEe("pointStyle"),dTe,fTe,nIe,pTe,hTe,gTe,ZEe,vTe,yTe,tIe,lIe())(e)}function wTe(e){var t=Kle(e,["event","data","data"],{});return Vae(t.children)&&t.children.length>0}function _Te(e){var t=e.view.getCoordinate(),n=t.innerRadius;if(n){var r=e.event,i=r.x,o=r.y,a=t.center,l=a.x,u=a.y,c=t.getRadius()*n;return Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))<c}return!1}zye("drill-down-action",Zje),Tbe("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:wTe},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:_Te}],start:[{trigger:"element:click",isEnable:wTe,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:_Te,action:["drill-down-action:back"]}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle-packing",t}Cae(t,e),t.getDefaultOptions=function(){return qje},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return bTe},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(KIe);var xTe,kTe,CTe,STe,OTe="left-axes-view",ETe="right-axes-view",ITe={nice:!0,label:{autoHide:!0,autoRotate:!1}},PTe=Sae(Sae({},ITe),{position:"left"}),MTe=Sae(Sae({},ITe),{position:"right",grid:null});function RTe(e){return Kle(e,"geometry")===CTe.Line}function ATe(e){return Kle(e,"geometry")===CTe.Column}function jTe(e,t,n){return ATe(n)?vEe({},{geometry:CTe.Column,label:n.label&&n.isRange?{content:function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.join("-")}}:void 0},n):Sae({geometry:CTe.Line},n)}function DTe(e,t){var n=e[0],r=e[1];return Vae(t)?[t[0],t[1]]:[Kle(t,n),Kle(t,r)]}function TTe(e,t){return t===xTe.Left?!1!==e&&vEe({},PTe,e):t===xTe.Right?!1!==e&&vEe({},MTe,e):e}function FTe(e){var t=e.view,n=e.geometryOption,r=e.yField,i=e.legend,o=Kle(i,"marker"),a=yEe(t,RTe(n)?"line":"interval");if(!n.seriesField){var l=Kle(t,"options.scales.".concat(r,".alias"))||r,u=a.getAttribute("color"),c=t.getTheme().defaultColor;return u&&(c=x_e.getMappingValue(u,l,Kle(u,["values",0],c))),[{value:r,name:l,marker:(Lae(o)?o:!Gle(o)&&vEe({},{style:{stroke:c,fill:c}},o))||(RTe(n)?{symbol:function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}}),isGeometry:!0,viewId:t.id}]}var s=a.getGroupAttributes();return ele(s,(function(e,n){var r=x_e.getLegendItems(t,a,n,t.getTheme(),o);return e.concat(r)}),[])}(kTe=xTe||(xTe={})).Left="Left",kTe.Right="Right",(STe=CTe||(CTe={})).Line="line",STe.Column="column";var NTe=function(e,t){var n=t[0],r=t[1],i=e.getOptions().data,o=e.getXScale(),a=oue(i);if(o&&a){var l=ile(i,o.field),u=oue(l),c=Math.floor(n*(u-1)),s=Math.floor(r*(u-1));e.filter(o.field,(function(e){var t=l.indexOf(e);return!(t>-1)||function(e,t,n){var r=Math.min(t,n),i=Math.max(t,n);return e>=r&&e<=i}(t,c,s)})),e.getRootView().render(!0)}};function LTe(e){var t,n=e.options,r=n.geometryOptions,i=void 0===r?[]:r,o=n.xField,a=n.yField,l=lle(i,(function(e){var t=e.geometry;return t===CTe.Line||void 0===t}));return vEe({},{options:{geometryOptions:[],meta:(t={},t[o]={type:"cat",sync:!0,range:l?[0,1]:void 0},t),tooltip:{showMarkers:l,showCrosshairs:l,shared:!0,crosshairs:{type:"x"}},interactions:l?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},e,{options:{yAxis:DTe(a,n.yAxis),geometryOptions:[jTe(0,a[0],i[0]),jTe(0,a[1],i[1])],annotations:DTe(a,n.annotations)}})}function BTe(e){var t,n,r=e.chart,i=e.options.geometryOptions,o={line:0,column:1};return[{type:null===(t=i[0])||void 0===t?void 0:t.geometry,id:OTe},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:ETe}].sort((function(e,t){return-o[e.type]+o[t.type]})).forEach((function(e){return r.createView({id:e.id})})),e}function VTe(e){var t=e.chart,n=e.options,r=n.xField,i=n.yField,o=n.geometryOptions,a=n.data,l=n.tooltip;return[Sae(Sae({},o[0]),{id:OTe,data:a[0],yField:i[0]}),Sae(Sae({},o[1]),{id:ETe,data:a[1],yField:i[1]})].forEach((function(e){var n=e.id,i=e.data,o=e.yField,a=ATe(e)&&e.isPercent,u=a?XIe(i,o,r,o):i,c=DEe(t,n).data(u),s=a?Sae({formatter:function(t){return{name:t[e.seriesField]||o,value:(100*Number(t[o])).toFixed(2)+"%"}}},l):l;!function(e){var t=e.options,n=e.chart,r=t.geometryOption,i=r.isStack,o=r.color,a=r.seriesField,l=r.groupField,u=r.isGroup,c=["xField","yField"];if(RTe(r)){_Ie(vEe({},e,{options:Sae(Sae(Sae({},oEe(t,c)),r),{line:{color:r.color,style:r.lineStyle}})})),xIe(vEe({},e,{options:Sae(Sae(Sae({},oEe(t,c)),r),{point:r.point&&Sae({color:o,shape:"circle"},r.point)})}));var s=[];u&&s.push({type:"dodge",dodgeBy:l||a,customOffset:0}),i&&s.push({type:"stack"}),s.length&&Hae(n.geometries,(function(e){e.adjust(s)}))}ATe(r)&&RPe(vEe({},e,{options:Sae(Sae(Sae({},oEe(t,c)),r),{widthRatio:r.columnWidthRatio,interval:Sae(Sae({},oEe(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:o,tooltip:s,geometryOption:e}})})),e}function zTe(e){var t,n=e.chart,r=e.options.geometryOptions,i=(null===(t=n.getTheme())||void 0===t?void 0:t.colors10)||[],o=0;return n.once("beforepaint",(function(){Hae(r,(function(e,t){var r=DEe(n,0===t?OTe:ETe);if(!e.color){var a=r.getGroupScales(),l=Kle(a,[0,"values","length"],1),u=i.slice(o,o+l).concat(0===t?[]:i);r.geometries.forEach((function(t){e.seriesField?t.color(e.seriesField,u):t.color(u[0])})),o+=l}})),n.render(!0)})),e}function HTe(e){var t,n,r=e.chart,i=e.options,o=i.xAxis,a=i.yAxis,l=i.xField,u=i.yField;return aIe(((t={})[l]=o,t[u[0]]=a[0],t))(vEe({},e,{chart:DEe(r,OTe)})),aIe(((n={})[l]=o,n[u[1]]=a[1],n))(vEe({},e,{chart:DEe(r,ETe)})),e}function WTe(e){var t=e.chart,n=e.options,r=DEe(t,OTe),i=DEe(t,ETe),o=n.xField,a=n.yField,l=n.xAxis,u=n.yAxis;return t.axis(o,!1),t.axis(a[0],!1),t.axis(a[1],!1),r.axis(o,l),r.axis(a[0],TTe(u[0],xTe.Left)),i.axis(o,!1),i.axis(a[1],TTe(u[1],xTe.Right)),e}function UTe(e){var t=e.chart,n=e.options.tooltip,r=DEe(t,OTe),i=DEe(t,ETe);return t.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),e}function GTe(e){var t=e.chart;return eIe(vEe({},e,{chart:DEe(t,OTe)})),eIe(vEe({},e,{chart:DEe(t,ETe)})),e}function YTe(e){var t=e.chart,n=e.options.annotations,r=Kle(n,[0]),i=Kle(n,[1]);return lIe(r)(vEe({},e,{chart:DEe(t,OTe),options:{annotations:r}})),lIe(i)(vEe({},e,{chart:DEe(t,ETe),options:{annotations:i}})),e}function $Te(e){var t=e.chart;return nIe(vEe({},e,{chart:DEe(t,OTe)})),nIe(vEe({},e,{chart:DEe(t,ETe)})),nIe(e),e}function qTe(e){var t=e.chart;return tIe(vEe({},e,{chart:DEe(t,OTe)})),tIe(vEe({},e,{chart:DEe(t,ETe)})),e}function KTe(e){var t=e.chart,n=e.options.yAxis;return uIe(vEe({},e,{chart:DEe(t,OTe),options:{yAxis:n[0]}})),uIe(vEe({},e,{chart:DEe(t,ETe),options:{yAxis:n[1]}})),e}function XTe(e){var t=e.chart,n=e.options,r=n.legend,i=n.geometryOptions,o=n.yField,a=n.data,l=DEe(t,OTe),u=DEe(t,ETe);if(!1===r)t.legend(!1);else if(zae(r)&&!0===r.custom)t.legend(r);else{var c=Kle(i,[0,"legend"],r),s=Kle(i,[1,"legend"],r);t.once("beforepaint",(function(){var e=a[0].length?FTe({view:l,geometryOption:i[0],yField:o[0],legend:c}):[],n=a[1].length?FTe({view:u,geometryOption:i[1],yField:o[1],legend:s}):[];t.legend(vEe({},r,{custom:!0,items:e.concat(n)}))})),i[0].seriesField&&l.legend(i[0].seriesField,c),i[1].seriesField&&u.legend(i[1].seriesField,s),t.on("legend-item:click",(function(e){var n=Kle(e,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,a=r.isGeometry,l=r.viewId;if(a){if(qae(o,(function(e){return e===i}))>-1)Hae(Kle(DEe(t,l),"geometries"),(function(e){e.changeVisible(!n.item.unchecked)}))}else{var u=Kle(t.getController("legend"),"option.items",[]);Hae(t.views,(function(e){Hae(e.getGroupScales(),(function(t){t.values&&t.values.indexOf(i)>-1&&e.filter(t.field,(function(e){return!$ae(u,(function(t){return t.value===e})).unchecked}))})),t.render(!0)}))}}}))}return e}function JTe(e){var t=e.chart,n=e.options.slider,r=DEe(t,OTe),i=DEe(t,ETe);return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(e){var t=e.event,n=t.value,r=t.originValue;Yle(n,r)||NTe(i,n)})),t.once("afterpaint",(function(){if(!Ple(n)){var e=n.start,t=n.end;(e||t)&&NTe(i,[e,t])}}))),e}function ZTe(e){return mEe(LTe,BTe,$Te,VTe,HTe,WTe,KTe,UTe,GTe,YTe,qTe,zTe,XTe,JTe)(e)}function QTe(e){var t=e.chart,n=e.options,r=n.type,i=n.data,o=n.fields,a=n.eachView,l=Qle(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return t.data(i),t.facet(r,Sae(Sae({},l),{fields:o,eachView:function(e,t){var n=a(e,t);if(n.geometries)!function(e,t){var n=t.data,r=t.coordinate,i=t.interactions,o=t.annotations,a=t.animation,l=t.tooltip,u=t.axes,c=t.meta,s=t.geometries;n&&e.data(n);var d={};u&&Hae(u,(function(e,t){d[t]=oEe(e,tEe)})),d=vEe({},c,d),e.scale(d),r&&e.coordinate(r),!1===u?e.axis(!1):Hae(u,(function(t,n){e.axis(n,t)})),Hae(s,(function(t){var n=mIe({chart:e,options:t}).ext,r=t.adjust;r&&n.geometry.adjust(r)})),Hae(i,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),Hae(o,(function(t){e.annotation()[t.type](Sae({},t))})),NEe(e,a),l?(e.interaction("tooltip"),e.tooltip(l)):!1===l&&e.removeInteraction("tooltip")}(e,n);else{var r=n,i=r.options;i.tooltip&&e.interaction("tooltip"),VAe(r.type,e,i)}}})),e}function eFe(e){var t=e.chart,n=e.options,r=n.axes,i=n.meta,o=n.tooltip,a=n.coordinate,l=n.theme,u=n.legend,c=n.interactions,s=n.annotations,d={};return r&&Hae(r,(function(e,t){d[t]=oEe(e,tEe)})),d=vEe({},i,d),t.scale(d),t.coordinate(a),r?Hae(r,(function(e,n){t.axis(n,e)})):t.axis(!1),o?(t.interaction("tooltip"),t.tooltip(o)):!1===o&&t.removeInteraction("tooltip"),t.legend(u),l&&t.theme(l),Hae(c,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),Hae(s,(function(e){t.annotation()[e.type](Sae({},e))})),e}function tFe(e){return mEe(nIe,QTe,eFe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dual-axes",t}Cae(t,e),t.prototype.getDefaultOptions=function(){return vEe({},e.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},t.prototype.getSchemaAdaptor=function(){return ZTe}}(KIe);var nFe={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};function rFe(e){var t=e.chart,n=e.options,r=n.data,i=n.type,o=n.xField,a=n.yField,l=n.colorField,u=n.sizeField,c=n.sizeRatio,s=n.shape,d=n.color,f=n.tooltip,h=n.heatmapStyle,p=n.meta;t.data(r);var v="polygon";"density"===i&&(v="heatmap");var g=pIe(f,[o,a,l]),m=g.fields,y=g.formatter,b=1;return(c||0===c)&&(s||u?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):b=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),mIe(vEe({},e,{options:{type:v,colorField:l,tooltipFields:m,shapeField:u||"",label:void 0,mapping:{tooltip:y,shape:s&&(u?function(e){var t=r.map((function(e){return e[u]})),n=(null==p?void 0:p[u])||{},i=n.min,o=n.max;return i=ple(i)?i:Math.min.apply(Math,t),o=ple(o)?o:Math.max.apply(Math,t),[s,(Kle(e,u)-i)/(o-i),b]}:function(){return[s,1,b]}),color:d||l&&t.getTheme().sequenceColors.join("-"),style:h}}})),e}function iFe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return mEe(aIe(((t={})[o]=r,t[a]=i,t)))(e)}function oFe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?t.axis(a,!1):t.axis(a,i),e}function aFe(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField,o=n.sizeField,a=n.sizeLegend,l=!1!==r;return i&&t.legend(i,!!l&&r),o&&t.legend(o,void 0===a?r:a),l||a||t.legend(!1),e}function lFe(e){var t=e.chart,n=e.options,r=n.label,i=n.colorField,o=yEe(t,"density"===n.type?"heatmap":"polygon");if(r){if(i){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:xEe(l)})}}else o.label(!1);return e}function uFe(e){var t,n,r=e.chart,i=e.options,o=i.coordinate,a=i.reflect,l=vEe({actions:[]},null!=o?o:{type:"rect"});return a&&(null===(n=null===(t=l.actions)||void 0===t?void 0:t.push)||void 0===n||n.call(t,["reflect",a])),r.coordinate(l),e}function cFe(e){return mEe(nIe,JEe("heatmapStyle"),iFe,uFe,rFe,oFe,aFe,QEe,lFe,lIe(),eIe,tIe,rIe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="area",t}Cae(t,e),t.getDefaultOptions=function(){return nFe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tFe}}(KIe);var sFe=vEe({},KIe.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});zwe("polygon","circle",{draw:function(e,t){var n,r,i=e.x,o=e.y,a=this.parsePoints(e.points),l=Math.abs(a[2].x-a[1].x),u=Math.abs(a[1].y-a[0].y),c=Math.min(l,u)/2,s=Number(e.shape[1]),d=Number(e.shape[2]),f=c*Math.sqrt(d)*Math.sqrt(s),h=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("circle",{attrs:Sae(Sae(Sae({x:i,y:o,r:f},e.defaultStyle),e.style),{fill:h})})}}),zwe("polygon","square",{draw:function(e,t){var n,r,i=e.x,o=e.y,a=this.parsePoints(e.points),l=Math.abs(a[2].x-a[1].x),u=Math.abs(a[1].y-a[0].y),c=Math.min(l,u),s=Number(e.shape[1]),d=Number(e.shape[2]),f=c*Math.sqrt(d)*Math.sqrt(s),h=(null===(n=e.style)||void 0===n?void 0:n.fill)||e.color||(null===(r=e.defaultStyle)||void 0===r?void 0:r.fill);return t.addShape("rect",{attrs:Sae(Sae(Sae({x:i-f/2,y:o-f/2,width:f,height:f},e.defaultStyle),e.style),{fill:h})})}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t}Cae(t,e),t.getDefaultOptions=function(){return sFe},t.prototype.getSchemaAdaptor=function(){return cFe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(KIe);var dFe="liquid";function fFe(e){return[{percent:e,type:dFe}]}function hFe(e){var t=e.chart,n=e.options,r=n.percent,i=n.liquidStyle,o=n.radius,a=n.outline,l=n.wave,u=n.shape,c=n.shapeStyle,s=n.animation;t.scale({percent:{min:0,max:1}}),t.data(fFe(r));var d=n.color||t.getTheme().defaultColor,f=wIe(vEe({},e,{options:{xField:"type",yField:"percent",widthRatio:o,interval:{color:d,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,h={percent:r,radius:o,outline:a,wave:l,shape:u,shapeStyle:c,background:t.getTheme().background,animation:s};return f.customInfo(h),t.legend(!1),t.axis(!1),t.tooltip(!1),e}function pFe(e,t){var n=e.chart,r=e.options,i=r.statistic,o=r.percent,a=r.meta;n.getController("annotation").clear(!0);var l=Kle(a,["percent","formatter"])||function(e){return"".concat((100*e).toFixed(2),"%")},u=i.content;return u&&(u=vEe({},u,{content:Bae(u.content)?l(o):u.content})),REe(n,{statistic:Sae(Sae({},i),{content:u}),plotType:"liquid"},{percent:o}),t&&n.render(!0),e}function vFe(e){return mEe(nIe,JEe("liquidStyle"),hFe,pFe,aIe({}),tIe,eIe)(e)}var gFe={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function mFe(e,t,n){return e+(t-e)*n}function yFe(e,t,n,r){return 0===t?[[e+.5*n/Math.PI/2,r/2],[e+.5*n/Math.PI,r],[e+n/4,r]]:1===t?[[e+.5*n/Math.PI/2*(Math.PI-2),r],[e+.5*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:2===t?[[e+.5*n/Math.PI/2,-r/2],[e+.5*n/Math.PI,-r],[e+n/4,-r]]:[[e+.5*n/Math.PI/2*(Math.PI-2),-r],[e+.5*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function bFe(e,t,n,r,i,o,a){for(var l=4*Math.ceil(2*e/n*4),u=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var s=o-e+(c=c/Math.PI/2*n)-2*e;u.push(["M",s,t]);for(var d=0,f=0;f<l;++f){var h=yFe(f*n/4,f%4,n,i);u.push(["C",h[0][0]+s,-h[0][1]+t,h[1][0]+s,-h[1][1]+t,h[2][0]+s,-h[2][1]+t]),f===l-1&&(d=h[2][0])}return u.push(["L",d+s,a+e]),u.push(["L",s,a+e]),u.push(["Z"]),u}var wFe={pin:function(e,t,n,r){var i=2*n/3,o=Math.max(i,r),a=i/2,l=e,u=a+t-o/2,c=Math.asin(a/(.85*(o-a))),s=Math.sin(c)*a,d=Math.cos(c)*a,f=l-d,h=u+s,p=e,v=u+a/Math.sin(c);return"\n      M ".concat(f," ").concat(h,"\n      A ").concat(a," ").concat(a," 0 1 1 ").concat(f+2*d," ").concat(h,"\n      Q ").concat(p," ").concat(v," ").concat(e," ").concat(t+o/2,"\n      Q ").concat(p," ").concat(v," ").concat(f," ").concat(h,"\n      Z \n    ")},circle:function(e,t,n,r){var i=n/2,o=r/2;return"\n      M ".concat(e," ").concat(t-o," \n      a ").concat(i," ").concat(o," 0 1 0 0 ").concat(2*o,"\n      a ").concat(i," ").concat(o," 0 1 0 0 ").concat(2*-o,"\n      Z\n    ")},diamond:function(e,t,n,r){var i=r/2,o=n/2;return"\n      M ".concat(e," ").concat(t-i,"\n      L ").concat(e+o," ").concat(t,"\n      L ").concat(e," ").concat(t+i,"\n      L ").concat(e-o," ").concat(t,"\n      Z\n    ")},triangle:function(e,t,n,r){var i=r/2,o=n/2;return"\n      M ".concat(e," ").concat(t-i,"\n      L ").concat(e+o," ").concat(t+i,"\n      L ").concat(e-o," ").concat(t+i,"\n      Z\n    ")},rect:function(e,t,n,r){var i=r/2,o=n/2*.618;return"\n      M ".concat(e-o," ").concat(t-i,"\n      L ").concat(e+o," ").concat(t-i,"\n      L ").concat(e+o," ").concat(t+i,"\n      L ").concat(e-o," ").concat(t+i,"\n      Z\n    ")}};function _Fe(e){var t=e.chart,n=e.options,r=n.data,i=n.lineStyle,o=n.color,a=n.point,l=n.area;t.data(r);var u=vEe({},e,{options:{line:{style:i,color:o},point:a?Sae({color:o},a):a,area:l?Sae({color:o},l):l,label:void 0}}),c=vEe({},u,{options:{tooltip:!1}}),s=(null==a?void 0:a.state)||n.state,d=vEe({},u,{options:{tooltip:!1,state:s}});return _Ie(u),xIe(d),yIe(c),e}function xFe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return mEe(aIe(((t={})[o]=r,t[a]=i,t)))(e)}function kFe(e){var t=e.chart,n=e.options,r=n.radius,i=n.startAngle,o=n.endAngle;return t.coordinate("polar",{radius:r,startAngle:i,endAngle:o}),e}function CFe(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis,o=n.yField,a=n.yAxis;return t.axis(r,i),t.axis(o,a),e}function SFe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=yEe(t,"line");if(r){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:xEe(l)})}else o.label(!1);return e}function OFe(e){return mEe(_Fe,xFe,nIe,kFe,CFe,ZEe,QEe,SFe,eIe,tIe,lIe())(e)}zwe("interval","liquid-fill-gauge",{draw:function(e,t){var n=e.customInfo,r=n,i=r.percent,o=r.radius,a=r.shape,l=r.shapeStyle,u=r.background,c=r.animation,s=n.outline,d=n.wave,f=s.border,h=s.distance,p=d.count,v=d.length,g=ele(e.points,(function(e,t){return Math.min(e,t.x)}),1/0),m=this.parsePoint({x:.5,y:.5}),y=this.parsePoint({x:g,y:.5}),b=m.x-y.x,w=Math.min(b,y.y*o),_=function(e){var t=Sae({opacity:1},e.style);return e.color&&!t.fill&&(t.fill=e.color),t}(e),x=function(e){var t=Nle({},{fill:"#fff",fillOpacity:0,lineWidth:4},e.style);return e.color&&!t.stroke&&(t.stroke=e.color),ple(e.opacity)&&(t.opacity=t.strokeOpacity=e.opacity),t}(Nle({},e,s)),k=w-f/2,C=("function"==typeof a?a:wFe[a]||wFe.circle)(m.x,m.y,2*k,2*k);if(l&&t.addShape("path",{name:"shape",attrs:Sae({path:C},l)}),i>0){var S=t.addGroup({name:"waves"}),O=S.setClip({type:"path",attrs:{path:C}});!function(e,t,n,r,i,o,a,l,u,c){for(var s=i.fill,d=i.opacity,f=a.getBBox(),h=f.maxX-f.minX,p=f.maxY-f.minY,v=0;v<r;v++){var g=r<=1?1:v/(r-1),m=o.addShape("path",{name:"waterwave-path",attrs:{path:bFe(l,f.minY+p*n,u,0,h/32,e,t),fill:s,opacity:mFe(.2,.9,g)*d}});try{if(!1===c)return;var y=oRe([["t",u,0]]);m.stopAnimate(),m.animate({matrix:y},{duration:mFe(2500,5e3,g),repeat:!0})}catch(e){console.warn("off-screen group animate error!")}}}(m.x,m.y,1-e.points[1].y,p,_,S,O,2*w,v,c)}return t.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:f+2*h,stroke:"transparent"===u?"#fff":u}}),t.addShape("path",{name:"wrap",attrs:Nle(x,{path:C,fill:"transparent",lineWidth:f})}),t}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="liquid",t}Cae(t,e),t.getDefaultOptions=function(){return gFe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.changeData=function(e){this.chart.emit(gue.BEFORE_CHANGE_DATA,fwe.fromData(this.chart,gue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:e}),this.chart.data(fFe(e)),pFe({chart:this.chart,options:this.options},!0),this.chart.emit(gue.AFTER_CHANGE_DATA,fwe.fromData(this.chart,gue.AFTER_CHANGE_DATA,null))},t.prototype.getSchemaAdaptor=function(){return vFe}}(KIe);var EFe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),t.prototype.getTooltipItems=function(t){var n=this.getTooltipCfg(),r=n.shared,i=n.title,o=e.prototype.getTooltipItems.call(this,t);if(o.length>0){var a=this.view.geometries[0],l=a.dataArray,u=o[0].name,c=[];return l.forEach((function(e){e.forEach((function(e){var t=x_e.getTooltipItems(e,a)[0];if(!r&&t&&t.name===u){var n=Bae(i)?u:i;c.push(Sae(Sae({},t),{name:t.title,title:n}))}else if(r&&t){n=Bae(i)?t.name||u:i;c.push(Sae(Sae({},t),{name:t.title,title:n}))}}))})),c}return[]},t}(xwe);swe("radar-tooltip",EFe);var IFe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.init=function(){this.context.view.removeInteraction("tooltip")},t.prototype.show=function(){var e=this.context.event;this.getTooltipController().showTooltip({x:e.x,y:e.y})},t.prototype.hide=function(){this.getTooltipController().hideTooltip()},t.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},t}(Nye);function PFe(e,t,n){var r=n.map((function(e){return e[t]})).filter((function(e){return void 0!==e})),i=r.length>0?Math.max.apply(Math,r):0,o=Math.abs(e)%360;return o?360*i/o:i}function MFe(e){var t=e.chart,n=e.options,r=n.barStyle,i=n.color,o=n.tooltip,a=n.colorField,l=n.type,u=n.xField,c=n.yField,s=n.data,d=n.shape,f=uEe(s,c);return t.data(f),wIe(vEe({},e,{options:{tooltip:o,seriesField:a,interval:{style:r,color:i,shape:d||("line"===l?"line":"intervel")},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===l&&xIe({chart:t,options:{xField:u,yField:c,seriesField:a,point:{shape:"circle",color:i}}}),e}function RFe(e){var t,n=e.options,r=n.yField,i=n.xField,o=n.data,a=n.isStack,l=n.isGroup,u=n.colorField,c=n.maxAngle,s=a&&!l&&u?function(e,t,n){var r=[];return e.forEach((function(e){var i=r.find((function(n){return n[t]===e[t]}));i?i[n]+=e[n]||null:r.push(Sae({},e))})),r}(o,i,r):o,d=uEe(s,r);return mEe(aIe(((t={})[r]={min:0,max:PFe(c,r,d)},t)))(e)}function AFe(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}).transpose(),e}function jFe(e){var t=e.chart,n=e.options,r=n.xField,i=n.xAxis;return t.axis(r,i),e}function DFe(e){var t=e.chart,n=e.options,r=n.label,i=n.yField,o=yEe(t,"interval");if(r){var a=r.callback,l=Oae(r,["callback"]);o.label({fields:[i],callback:a,cfg:Sae(Sae({},xEe(l)),{type:"polar"})})}else o.label(!1);return e}function TFe(e){return mEe(JEe("barStyle"),MFe,RFe,jFe,AFe,eIe,tIe,nIe,QEe,ZEe,lIe(),DFe)(e)}zye("radar-tooltip",IFe),Tbe("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radar",t}Cae(t,e),t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return vEe({},e.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},t.prototype.getSchemaAdaptor=function(){return OFe}}(KIe);var FFe=vEe({},KIe.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});function NFe(e){var t=e.chart,n=e.options,r=n.data,i=n.sectorStyle,o=n.shape,a=n.color;return t.data(r),mEe(wIe)(vEe({},e,{options:{marginRatio:1,interval:{style:i,color:a,shape:o}}})),e}function LFe(e){var t=e.chart,n=e.options,r=n.label,i=n.xField,o=yEe(t,"interval");if(!1===r)o.label(!1);else if(zae(r)){var a=r.callback,l=r.fields,u=Oae(r,["callback","fields"]),c=u.offset,s=u.layout;(void 0===c||c>=0)&&(s=s?Vae(s)?s:[s]:[],u.layout=Tae(s,(function(e){return"limit-in-shape"!==e.type})),u.layout.length||delete u.layout),o.label({fields:l||[i],callback:a,cfg:xEe(u)})}else iEe(QOe.WARN,null===r,"the label option must be an Object."),o.label({fields:[i]});return e}function BFe(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField;return!1===r?t.legend(!1):i&&t.legend(i,r),e}function VFe(e){var t=e.chart,n=e.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return t.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),e}function zFe(e){var t,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return mEe(aIe(((t={})[o]=r,t[a]=i,t)))(e)}function HFe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return r?t.axis(o,r):t.axis(o,!1),i?t.axis(a,i):t.axis(a,!1),e}function WFe(e){mEe(JEe("sectorStyle"),NFe,zFe,LFe,VFe,HFe,BFe,QEe,eIe,tIe,nIe,lIe(),rIe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="radial-bar",t}Cae(t,e),t.getDefaultOptions=function(){return FFe},t.prototype.changeData=function(e){this.updateOption({data:e}),RFe({chart:this.chart,options:this.options}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return TFe}}(KIe);var UFe=vEe({},KIe.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rose",t}Cae(t,e),t.getDefaultOptions=function(){return UFe},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(e)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return WFe}}(KIe);var GFe="x",YFe="y",$Fe="name",qFe="nodes",KFe="edges";function XFe(e,t,n){if(!Vae(e))return[];var r=[],i=function(e,t,n){var r=[];return e.forEach((function(e){var i=e[t],o=e[n];r.includes(i)||r.push(i),r.includes(o)||r.push(o)})),r}(e,t,n),o=function(e,t,n,r){var i={};return t.forEach((function(e){i[e]={},t.forEach((function(t){i[e][t]=0}))})),e.forEach((function(e){i[e[n]][e[r]]=1})),i}(e,i,t,n),a={};function l(e){a[e]=1,i.forEach((function(t){if(0!=o[e][t])if(1==a[t])r.push("".concat(e,"_").concat(t));else{if(-1==a[t])return;l(t)}})),a[e]=-1}return i.forEach((function(e){a[e]=0})),i.forEach((function(e){-1!=a[e]&&l(e)})),0!==r.length&&console.warn("sankey data contains circle, ".concat(r.length," records removed."),r),e.filter((function(e){return r.findIndex((function(r){return r==="".concat(e[t],"_").concat(e[n])}))<0}))}function JFe(e){return e.target.depth}function ZFe(e,t){return e.sourceLinks.length?e.depth:t-1}function QFe(e){return function(){return e}}function eNe(e,t){for(var n=0,r=0;r<e.length;r++)n+=t(e[r]);return n}function tNe(e,t){for(var n=-1/0,r=0;r<e.length;r++)n=Math.max(t(e[r]),n);return n}function nNe(e,t){return iNe(e.source,t.source)||e.index-t.index}function rNe(e,t){return iNe(e.target,t.target)||e.index-t.index}function iNe(e,t){return e.y0-t.y0}function oNe(e){return e.value}function aNe(e){return e.index}function lNe(e){return e.nodes}function uNe(e){return e.links}function cNe(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function sNe(e){for(var t=0,n=e.nodes;t<n.length;t++){for(var r=n[t],i=r.y0,o=i,a=0,l=r.sourceLinks;a<l.length;a++){(s=l[a]).y0=i+s.width/2,i+=s.width}for(var u=0,c=r.targetLinks;u<c.length;u++){var s;(s=c[u]).y1=o+s.width/2,o+=s.width}}}function dNe(){var e,t,n,r,i=0,o=0,a=1,l=1,u=24,c=8,s=aNe,d=ZFe,f=lNe,h=uNe,p=6;function v(v){var y={nodes:f(v),links:h(v)};return function(e){var t=e.nodes,n=e.links;t.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var i=new Map(t.map((function(e){return[s(e),e]})));if(n.forEach((function(e,t){e.index=t;var n=e.source,r=e.target;"object"!==lr(n)&&(n=e.source=cNe(i,n)),"object"!==lr(r)&&(r=e.target=cNe(i,r)),n.sourceLinks.push(e),r.targetLinks.push(e)})),null!=r)for(var o=0,a=t;o<a.length;o++){var l=a[o],u=l.sourceLinks,c=l.targetLinks;u.sort(r),c.sort(r)}}(y),function(e){for(var t=e.nodes,n=0,r=t;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(eNe(i.sourceLinks,oNe),eNe(i.targetLinks,oNe)):i.fixedValue}}(y),function(e){var n=e.nodes,r=n.length,i=new Set(n),o=new Set,a=0;for(;i.size;){if(i.forEach((function(e){e.depth=a;for(var t=0,n=e.sourceLinks;t<n.length;t++){var r=n[t].target;o.add(r)}})),++a>r)throw new Error("circular link");i=o,o=new Set}if(t)for(var l=Math.max(tNe(n,(function(e){return e.depth}))+1,0),u=void 0,c=0;c<n.length;c++)(u=n[c]).depth=t.call(null,u,l)}(y),function(e){var t=e.nodes,n=t.length,r=new Set(t),i=new Set,o=0;for(;r.size;){if(r.forEach((function(e){e.height=o;for(var t=0,n=e.targetLinks;t<n.length;t++){var r=n[t].source;i.add(r)}})),++o>n)throw new Error("circular link");r=i,i=new Set}}(y),function(t){var r=function(e){for(var t=e.nodes,r=Math.max(tNe(t,(function(e){return e.depth}))+1,0),o=(a-i-u)/(r-1),l=new Array(r).fill(0).map((function(){return[]})),c=0,s=t;c<s.length;c++){var f=s[c],h=Math.max(0,Math.min(r-1,Math.floor(d.call(null,f,r))));f.layer=h,f.x0=i+h*o,f.x1=f.x0+u,l[h]?l[h].push(f):l[h]=[f]}if(n)for(var p=0,v=l;p<v.length;p++){v[p].sort(n)}return l}(t);e=Math.min(c,(l-o)/(tNe(r,(function(e){return e.length}))-1)),function(t){for(var n=function(e,t){for(var n=1/0,r=0;r<e.length;r++)n=Math.min(t(e[r]),n);return n}(t,(function(t){return(l-o-(t.length-1)*e)/eNe(t,oNe)})),r=0,i=t;r<i.length;r++){for(var a=i[r],u=o,c=0,s=a;c<s.length;c++){(v=s[c]).y0=u,v.y1=u+v.value*n,u=v.y1+e;for(var d=0,f=v.sourceLinks;d<f.length;d++){var h=f[d];h.width=h.value*n}}u=(l-u+e)/(a.length+1);for(var p=0;p<a.length;++p){var v;(v=a[p]).y0+=u*(p+1),v.y1+=u*(p+1)}x(a)}}(r);for(var s=0;s<p;++s){var f=Math.pow(.99,s),h=Math.max(1-f,(s+1)/p);m(r,f,h),g(r,f,h)}}(y),sNe(y),y}function g(e,t,r){for(var i=1,o=e.length;i<o;++i){for(var a=e[i],l=0,u=a;l<u.length;l++){for(var c=u[l],s=0,d=0,f=0,h=c.targetLinks;f<h.length;f++){var p=h[f],v=p.source,g=p.value*(c.layer-v.layer);s+=k(v,c)*g,d+=g}if(d>0){var m=(s/d-c.y0)*t;c.y0+=m,c.y1+=m,_(c)}}void 0===n&&a.sort(iNe),a.length&&y(a,r)}}function m(e,t,r){for(var i=e.length-2;i>=0;--i){for(var o=e[i],a=0,l=o;a<l.length;a++){for(var u=l[a],c=0,s=0,d=0,f=u.sourceLinks;d<f.length;d++){var h=f[d],p=h.target,v=h.value*(p.layer-u.layer);c+=C(u,p)*v,s+=v}if(s>0){var g=(c/s-u.y0)*t;u.y0+=g,u.y1+=g,_(u)}}void 0===n&&o.sort(iNe),o.length&&y(o,r)}}function y(t,n){var r=t.length>>1,i=t[r];w(t,i.y0-e,r-1,n),b(t,i.y1+e,r+1,n),w(t,l,t.length-1,n),b(t,o,0,n)}function b(t,n,r,i){for(;r<t.length;++r){var o=t[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+e}}function w(t,n,r,i){for(;r>=0;--r){var o=t[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-e}}function _(e){var t=e.sourceLinks,n=e.targetLinks;if(void 0===r){for(var i=0,o=n;i<o.length;i++){o[i].source.sourceLinks.sort(rNe)}for(var a=0,l=t;a<l.length;a++){l[a].target.targetLinks.sort(nNe)}}}function x(e){if(void 0===r)for(var t=0,n=e;t<n.length;t++){var i=n[t],o=i.sourceLinks,a=i.targetLinks;o.sort(rNe),a.sort(nNe)}}function k(t,n){for(var r=t.y0-(t.sourceLinks.length-1)*e/2,i=0,o=t.sourceLinks;i<o.length;i++){var a=o[i],l=a.target,u=a.width;if(l===n)break;r+=u+e}for(var c=0,s=n.targetLinks;c<s.length;c++){var d=s[c];l=d.source,u=d.width;if(l===t)break;r-=u}return r}function C(t,n){for(var r=n.y0-(n.targetLinks.length-1)*e/2,i=0,o=n.targetLinks;i<o.length;i++){var a=o[i],l=a.source,u=a.width;if(l===t)break;r+=u+e}for(var c=0,s=t.sourceLinks;c<s.length;c++){var d=s[c];l=d.target,u=d.width;if(l===n)break;r-=u}return r}return v.update=function(e){return sNe(e),e},v.nodeId=function(e){return arguments.length?(s="function"==typeof e?e:QFe(e),v):s},v.nodeAlign=function(e){return arguments.length?(d="function"==typeof e?e:QFe(e),v):d},v.nodeDepth=function(e){return arguments.length?(t=e,v):t},v.nodeSort=function(e){return arguments.length?(n=e,v):n},v.nodeWidth=function(e){return arguments.length?(u=+e,v):u},v.nodePadding=function(t){return arguments.length?(c=e=+t,v):c},v.nodes=function(e){return arguments.length?(f="function"==typeof e?e:QFe(e),v):f},v.links=function(e){return arguments.length?(h="function"==typeof e?e:QFe(e),v):h},v.linkSort=function(e){return arguments.length?(r=e,v):r},v.size=function(e){return arguments.length?(i=o=0,a=+e[0],l=+e[1],v):[a-i,l-o]},v.extent=function(e){return arguments.length?(i=+e[0][0],a=+e[1][0],o=+e[0][1],l=+e[1][1],v):[[i,o],[a,l]]},v.iterations=function(e){return arguments.length?(p=+e,v):p},v}var fNe={left:function(e){return e.depth},right:function(e,t){return t-1-e.height},center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?function(e,t){if(Vae(e)){for(var n,r=1/0,i=0;i<e.length;i++){var o=e[i],a=Lae(t)?t(o):o[t];a<r&&(n=o,r=a)}return n}}(e.sourceLinks,JFe)-1:0},justify:ZFe},hNe={nodeId:function(e){return e.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function pNe(e,t){var n=function(e){return Nle({},hNe,e)}(e),r=n.nodeId,i=n.nodeSort,o=n.nodeAlign,a=n.nodeWidth,l=n.nodePadding,u=n.nodeDepth,c=dNe().nodeSort(i).nodeWidth(a).nodePadding(l).nodeDepth(u).nodeAlign(function(e){return(nle(e)?fNe[e]:Lae(e)?e:null)||ZFe}(o)).extent([[0,0],[1,1]]).nodeId(r),s=c(t);return{nodes:s.nodes.map((function(e){var t=e.x0,n=e.x1,r=e.y0,i=e.y1;return e.x=[t,n,n,t],e.y=[r,r,i,i],e})).filter((function(e){return null!==e.name})),links:s.links.map((function(e){var t=e.source,n=e.target,r=t.x1,i=n.x0;e.x=[r,r,i,i];var o=e.width/2;return e.y=[e.y0+o,e.y0-o,e.y1+o,e.y1-o],e})).filter((function(e){var t=e.source,n=e.target;return null!==t.name&&null!==n.name}))}}function vNe(e,t,n){return kEe(e)?e/n:t}function gNe(e,t,n){return kEe(e)?e/n:t}function mNe(e,t,n){var r,i=e.dataType,o=e.data,a=e.sourceField,l=e.targetField,u=e.weightField,c=e.nodeAlign,s=e.nodeSort,d=e.nodePadding,f=e.nodePaddingRatio,h=e.nodeWidth,p=e.nodeWidthRatio,v=e.nodeDepth,g=e.rawFields,m=void 0===g?[]:g;r=function(e){return"node-link"===e}(i)?o:lEe(XFe(o,a,l),a,l,u,m);var y=pNe({nodeAlign:c,nodePadding:gNe(d,f,n),nodeWidth:vNe(h,p,t),nodeSort:s,nodeDepth:v},r),b=y.nodes,w=y.links;return{nodes:b.map((function(e){return Sae(Sae({},oEe(e,Aae(["x","y","name"],m,!0))),{isNode:!0})})),edges:w.map((function(e){return Sae(Sae({source:e.source.name,target:e.target.name,name:e.source.name||e.target.name},oEe(e,Aae(["x","y","value"],m,!0))),{isNode:!1})}))}}function yNe(e){var t=e.options.rawFields,n=void 0===t?[]:t;return vEe({},{options:{tooltip:{fields:rle(Aae(["name","source","target","value","isNode"],n,!0))},label:{fields:rle(Aae(["x","name"],n,!0))}}},e)}function bNe(e){var t=e.chart,n=e.options,r=n.color,i=n.nodeStyle,o=n.edgeStyle,a=n.label,l=n.tooltip,u=n.nodeState,c=n.edgeState,s=n.rawFields,d=void 0===s?[]:s;t.legend(!1),t.tooltip(l),t.axis(!1),t.coordinate().reflect("y");var f=mNe(n,t.width,t.height),h=f.nodes,p=f.edges,v=t.createView({id:KFe});v.data(p),bIe({chart:v,options:{xField:GFe,yField:YFe,seriesField:$Fe,rawFields:Aae(["source","target"],d,!0),edge:{color:r,style:o,shape:"arc"},tooltip:l,state:c}});var g=t.createView({id:qFe});return g.data(h),kIe({chart:g,options:{xField:GFe,yField:YFe,seriesField:$Fe,polygon:{color:r,style:i},label:a,tooltip:l,state:u}}),t.interaction("element-active"),t.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),e}function wNe(e){var t=e.chart;return NEe(t,e.options.animation,Aae(Aae([],t.views[0].geometries,!0),t.views[1].geometries,!0)),e}function _Ne(e){var t=e.chart,n="sankey-node-draggable";return e.options.nodeDraggable?t.interaction(n):t.removeInteraction(n),e}function xNe(e){var t=e.chart,n=e.options,r=n.interactions,i=void 0===r?[]:r,o=[].concat(i,n.nodeInteractions||[]),a=[].concat(i,n.edgeInteractions||[]),l=DEe(t,qFe),u=DEe(t,KFe);return o.forEach((function(e){!1===(null==e?void 0:e.enable)?l.removeInteraction(e.type):l.interaction(e.type,e.cfg||{})})),a.forEach((function(e){!1===(null==e?void 0:e.enable)?u.removeInteraction(e.type):u.interaction(e.type,e.cfg||{})})),e}function kNe(e){return mEe(yNe,bNe,xNe,_Ne,wNe,nIe)(e)}var CNe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDragging=!1,t}return Cae(t,e),t.prototype.isNodeElement=function(){var e=Kle(this.context,"event.target");if(e){var t=e.get("element");return t&&t.getModel().data.isNode}return!1},t.prototype.getNodeView=function(){return DEe(this.context.view,qFe)},t.prototype.getEdgeView=function(){return DEe(this.context.view,KFe)},t.prototype.getCurrentDatumIdx=function(e){return this.getNodeView().geometries[0].elements.indexOf(e)},t.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:Kle(this.context,"event.x"),y:Kle(this.context,"event.y")};var e=this.context.event.target.get("element"),t=this.getCurrentDatumIdx(e);if(-1===t)return;this.currentElementIdx=t,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},t.prototype.translate=function(){if(this.isDragging){var e=this.context.view,t={x:Kle(this.context,"event.x"),y:Kle(this.context,"event.y")},n=t.x-this.prevPoint.x,r=t.y-this.prevPoint.y,i=this.getNodeView(),o=i.geometries[0].elements[this.currentElementIdx];if(o&&o.getModel()){var a=o.getModel().data,l=i.getOptions().data,u=i.getCoordinate(),c={x:n/u.getWidth(),y:r/u.getHeight()},s=Sae(Sae({},a),{x:a.x.map((function(e){return e+c.x})),y:a.y.map((function(e){return e+c.y}))}),d=Aae([],l,!0);d[this.currentElementIdx]=s,i.data(d);var f=a.name,h=this.getEdgeView(),p=h.getOptions().data;p.forEach((function(e){e.source===f&&(e.x[0]+=c.x,e.x[1]+=c.x,e.y[0]+=c.y,e.y[1]+=c.y),e.target===f&&(e.x[2]+=c.x,e.x[3]+=c.x,e.y[2]+=c.y,e.y[3]+=c.y)})),h.data(p),this.prevPoint=t,e.render(!0)}}},t.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},t}(Nye);zye("sankey-node-drag",CNe),Tbe("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(e){return e.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sankey",t}Cae(t,e),t.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(e){return e.name},callback:function(e){var t=1===e[1];return{style:{fill:"#545454",textAlign:t?"end":"start"},offsetX:t?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(e){return!Kle(e,[0,"data","isNode"])},formatter:function(e){return{name:e.source+" -> "+e.target,value:e.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},t.prototype.changeData=function(e){this.updateOption({data:e});var t=mNe(this.options,this.chart.width,this.chart.height),n=t.nodes,r=t.edges,i=DEe(this.chart,qFe),o=DEe(this.chart,KFe);i.changeData(n),o.changeData(r)},t.prototype.getSchemaAdaptor=function(){return kNe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(KIe);var SNe="ancestor-node",ONe="value",ENe="path",INe=[ENe,nTe,iTe,rTe,"name","depth","height"],PNe=vEe({},KIe.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),MNe={field:"value",size:[1,1],round:!1,padding:0,sort:function(e,t){return t.value-e.value},as:["x","y"],ignoreParentValue:!0};function RNe(e,t){var n,r=(t=Nle({},MNe,t)).as;if(!Vae(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=aTe(t)}catch(e){console.warn(e)}var i,o=(i=e,LDe().size(t.size).round(t.round).padding(t.padding)(cDe(i).sum((function(e){return oue(e.children)?t.ignoreParentValue?0:e[n]-ele(e.children,(function(e,t){return e+t[n]}),0):e[n]})).sort(t.sort))),a=r[0],l=r[1];return o.each((function(e){var t,n;e[a]=[e.x0,e.x1,e.x1,e.x0],e[l]=[e.y1,e.y1,e.y0,e.y0],e.name=e.name||(null===(t=e.data)||void 0===t?void 0:t.name)||(null===(n=e.data)||void 0===n?void 0:n.label),e.data.name=e.name,["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),lTe(o)}var ANe={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(e,t){return t.value-e.value},ratio:.5*(1+Math.sqrt(5))};function jNe(e,t){var n,r=(t=Nle({},ANe,t)).as;if(!Vae(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=aTe(t)}catch(e){console.warn(e)}var i,o,a,l=(i=t.tile,o=t.ratio,"treemapSquarify"===i?tTe[i].ratio(o):tTe[i]),u=(a=e,QDe().tile(l).size(t.size).round(t.round).padding(t.padding).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(cDe(a).sum((function(e){return t.ignoreParentValue&&e.children?0:e[n]})).sort(t.sort))),c=r[0],s=r[1];return u.each((function(e){e[c]=[e.x0,e.x1,e.x1,e.x0],e[s]=[e.y1,e.y1,e.y0,e.y0],["x0","x1","y0","y1"].forEach((function(t){-1===r.indexOf(t)&&delete e[t]}))})),lTe(u)}function DNe(e){var t=e.data,n=e.colorField,r=e.rawFields,i=e.hierarchyConfig,o=void 0===i?{}:i,a=o.activeDepth,l={partition:RNe,treemap:jNe},u=e.seriesField,c=e.type||"partition",s=l[c](t,Sae(Sae({field:u||"value"},Qle(o,["activeDepth"])),{type:"hierarchy.".concat(c),as:["x","y"]})),d=[];return s.forEach((function(e){var t,i,l,c,s,f;if(0===e.depth)return null;if(a>0&&e.depth>a)return null;for(var h=e.data.name,p=Sae({},e);p.depth>1;)h="".concat(null===(i=p.parent.data)||void 0===i?void 0:i.name," / ").concat(h),p=p.parent;var v=Sae(Sae(Sae({},oEe(e.data,Aae(Aae([],r||[],!0),[o.field],!1))),((t={})[ENe]=h,t[SNe]=p.data.name,t)),e);u&&(v[u]=e.data[u]||(null===(c=null===(l=e.parent)||void 0===l?void 0:l.data)||void 0===c?void 0:c[u])),n&&(v[n]=e.data[n]||(null===(f=null===(s=e.parent)||void 0===s?void 0:s.data)||void 0===f?void 0:f[n])),v.ext=o,v[Jje]={hierarchyConfig:o,colorField:n,rawFields:r},d.push(v)})),d}function TNe(e){var t,n=e.chart,r=e.options,i=r.color,o=r.colorField,a=void 0===o?SNe:o,l=r.sunburstStyle,u=r.rawFields,c=void 0===u?[]:u,s=r.shape,d=DNe(r);return n.data(d),l&&(t=function(e){return vEe({},{fillOpacity:Math.pow(.85,e.depth)},Lae(l)?l(e):l)}),kIe(vEe({},e,{options:{xField:"x",yField:"y",seriesField:a,rawFields:rle(Aae(Aae([],INe,!0),c,!0)),polygon:{color:i,style:t,shape:s}}})),e}function FNe(e){return e.chart.axis(!1),e}function NNe(e){var t=e.chart,n=e.options.label,r=yEe(t,"polygon");if(n){var i=n.fields,o=void 0===i?["name"]:i,a=n.callback,l=Oae(n,["fields","callback"]);r.label({fields:o,callback:a,cfg:xEe(l)})}else r.label(!1);return e}function LNe(e){var t=e.chart,n=e.options,r=n.innerRadius,i=n.radius,o=n.reflect,a=t.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return o&&a.reflect(o),e}function BNe(e){var t,n=e.options,r=n.hierarchyConfig,i=n.meta;return mEe(aIe({},((t={})[ONe]=Kle(i,Kle(r,["field"],"value")),t)))(e)}function VNe(e){var t=e.chart,n=e.options.tooltip;if(!1===n)t.tooltip(!1);else{var r=n;Kle(n,"fields")||(r=vEe({},{customItems:function(e){return e.map((function(e){var n=Kle(t.getOptions(),"scales"),r=Kle(n,[ENe,"formatter"],(function(e){return e})),i=Kle(n,[ONe,"formatter"],(function(e){return e}));return Sae(Sae({},e),{name:r(e.data[ENe]),value:i(e.data.value)})}))}},r)),t.tooltip(r)}return e}function zNe(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return(null==t?void 0:t.enabled)?vEe({},e,{interactions:Aae(Aae([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:t,transformData:DNe}}],!1)}):e}function HNe(e){var t=e.chart,n=e.options,r=n.drilldown;return eIe({chart:t,options:zNe(n)}),(null==r?void 0:r.enabled)&&(t.appendPadding=SEe(t.appendPadding,Kle(r,["breadCrumb","position"]))),e}function WNe(e){return mEe(nIe,JEe("sunburstStyle"),TNe,FNe,BNe,ZEe,LNe,VNe,NNe,HNe,tIe,lIe())(e)}function UNe(e,t){if(Vae(e))return e.find((function(e){return e.type===t}))}function GNe(e,t){var n=UNe(e,t);return n&&!1!==n.enable}function YNe(e){var t=e.interactions,n=e.drilldown;return Kle(n,"enabled")||GNe(t,"treemap-drill-down")}function $Ne(e){var t=e.data,n=e.colorField,r=e.enableDrillDown,i=e.hierarchyConfig,o=jNe(t,Sae(Sae({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),a=[];return o.forEach((function(e){if(0===e.depth)return null;if(r&&1!==e.depth)return null;if(!r&&e.children)return null;var o=e.ancestors().map((function(e){return{data:e.data,height:e.height,value:e.value}})),l=r&&Vae(t.path)?o.concat(t.path.slice(1)):o,u=Object.assign({},e.data,Sae({x:e.x,y:e.y,depth:e.depth,value:e.value,path:l},e));if(!e.data[n]&&e.parent){var c=e.ancestors().find((function(e){return e.data[n]}));u[n]=null==c?void 0:c.data[n]}else u[n]=e.data[n];u[Jje]={hierarchyConfig:i,colorField:n,enableDrillDown:r},a.push(u)})),a}function qNe(e){var t=e.options.colorField;return vEe({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(e){return{name:e.name,value:e.value}}}}},e)}function KNe(e){var t=e.chart,n=e.options,r=n.color,i=n.colorField,o=n.rectStyle,a=n.hierarchyConfig,l=n.rawFields,u=$Ne({data:n.data,colorField:n.colorField,enableDrillDown:YNe(n),hierarchyConfig:a});return t.data(u),kIe(vEe({},e,{options:{xField:"x",yField:"y",seriesField:i,rawFields:l,polygon:{color:r,style:o}}})),t.coordinate().reflect("y"),e}function XNe(e){return e.chart.axis(!1),e}function JNe(e){var t=e.drilldown,n=e.interactions,r=void 0===n?[]:n;return YNe(e)?vEe({},e,{interactions:Aae(Aae([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:t,transformData:$Ne}}],!1)}):e}function ZNe(e){var t=e.chart,n=e.options,r=n.interactions,i=n.drilldown;eIe({chart:t,options:JNe(n)});var o=UNe(r,"view-zoom");return o&&(!1!==o.enable?t.getCanvas().on("mousewheel",(function(e){e.preventDefault()})):t.getCanvas().off("mousewheel")),YNe(n)&&(t.appendPadding=SEe(t.appendPadding,Kle(i,["breadCrumb","position"]))),e}function QNe(e){return mEe(qNe,nIe,JEe("rectStyle"),KNe,XNe,ZEe,QEe,ZNe,tIe,lIe())(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="sunburst",t}Cae(t,e),t.getDefaultOptions=function(){return PNe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return WNe},t.SUNBURST_ANCESTOR_FIELD=SNe,t.SUNBURST_PATH_FIELD=ENe,t.NODE_ANCESTORS_FIELD=iTe}(KIe);var eLe={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="treemap",t}Cae(t,e),t.getDefaultOptions=function(){return eLe},t.prototype.changeData=function(e){var t=this.options,n=t.colorField,r=t.interactions,i=t.hierarchyConfig;this.updateOption({data:e});var o=$Ne({data:e,colorField:n,enableDrillDown:GNe(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(o),function(e){var t=e.interactions["drill-down"];if(t){var n=t.context.actions.find((function(e){return"drill-down-action"===e.name}));n.reset()}}(this.chart)},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return QNe}}(KIe);var tLe="id",nLe="path",rLe={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(e){return{name:e.id,value:e.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function iLe(e){e&&e.geometries[0].elements.forEach((function(e){e.shape.toFront()}))}var oLe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.syncElementsPos=function(){iLe(this.context.view)},t.prototype.active=function(){e.prototype.active.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(Vye("element-active")),aLe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.syncElementsPos=function(){iLe(this.context.view)},t.prototype.highlight=function(){e.prototype.highlight.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.clear=function(){e.prototype.clear.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(Vye("element-highlight")),lLe=Vye("element-selected"),uLe=Vye("element-single-selected"),cLe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.syncElementsPos=function(){iLe(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(lLe),sLe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.syncElementsPos=function(){iLe(this.context.view)},t.prototype.selected=function(){e.prototype.selected.call(this),this.syncElementsPos()},t.prototype.toggle=function(){e.prototype.toggle.call(this),this.syncElementsPos()},t.prototype.reset=function(){e.prototype.reset.call(this),this.syncElementsPos()},t}(uLe);zye("venn-element-active",oLe),zye("venn-element-highlight",aLe),zye("venn-element-selected",cLe),zye("venn-element-single-selected",sLe),Tbe("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Tbe("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Tbe("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Tbe("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Tbe("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Tbe("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var dLe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cae(t,e),t.prototype.getLabelPoint=function(e,t,n){var r=e.data,i=r.x,o=r.y,a=e.customLabelInfo,l=a.offsetX,u=a.offsetY;return{content:e.content[n],x:i+l,y:o+u}},t}(n_e);Twe("venn",dLe);var fLe="\t\n\v\f\r   ᠎             　\u2028\u2029",hLe=new RegExp("([a-z])["+fLe+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+fLe+"]*,?["+fLe+"]*)+)","ig"),pLe=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+fLe+"]*,?["+fLe+"]*","ig");zwe("schema","venn",{draw:function(e,t){var n=function(e){if(!e)return null;if(Sr(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(hLe,(function(e,r,i){var o=[],a=r.toLowerCase();if(i.replace(pLe,(function(e,t){t&&o.push(+t)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=t[a]&&(n.push([r].concat(o.splice(0,t[a]))),t[a]););return""})),n}(e.data[nLe]),r=function(e){return vEe({},e.defaultStyle,{fill:e.color},e.style)}(e),i=t.addGroup({name:"venn-shape"});i.addShape("path",{attrs:Sae(Sae({},r),{path:n}),name:"venn-path"});var o=e.customInfo,a=o.offsetX,l=o.offsetY,u=x_e.transform(null,[["t",a,l]]);return i.setMatrix(u),i},getMarker:function(e){var t=e.color;return{symbol:"circle",style:{lineWidth:0,stroke:t,fill:t,r:4}}}});var vLe={normal:function(e){return e},multiply:function(e,t){return e*t/255},screen:function(e,t){return 255*(1-(1-e/255)*(1-t/255))},overlay:function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},darken:function(e,t){return e>t?t:e},lighten:function(e,t){return e>t?e:t},dodge:function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},burn:function(e,t){return 255===t?255:0===e?0:255*(1-Math.min(1,(1-t/255)/(e/255)))}};function gLe(e,t,n){void 0===n&&(n="normal");var r,i=(r=function(e){if(!vLe[e])throw new Error("unknown blend mode "+e);return vLe[e]}(n),function(e,t){var n=[];return n[0]=r(e[0],t[0]),n[1]=r(e[1],t[1]),n[2]=r(e[2],t[2]),n})(mLe(e),mLe(t)),o=mLe(e),a=o[0],l=o[1],u=o[2],c=o[3],s=mLe(t),d=s[0],f=s[1],h=s[2],p=s[3],v=Number((c+p*(1-c)).toFixed(2)),g=Math.round((c*(1-p)*(a/255)+c*p*(i[0]/255)+(1-c)*p*(d/255))/v*255),m=Math.round((c*(1-p)*(l/255)+c*p*(i[1]/255)+(1-c)*p*(f/255))/v*255),y=Math.round((c*(1-p)*(u/255)+c*p*(i[2]/255)+(1-c)*p*(h/255))/v*255);return"rgba(".concat(g,", ").concat(m,", ").concat(y,", ").concat(v,")")}function mLe(e){var t,n=e.replace("/s+/g","");return"string"!=typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=ipe.rgb2arr(n).concat([1])),t.map((function(e,t){return 3===t?Number(e):0|e}))):ipe.rgb2arr(ipe.toRGB(n)).concat([1])}function yLe(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function bLe(e,t){return yLe(e).map((function(){return yLe(t)}))}function wLe(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function _Le(e){return Math.sqrt(wLe(e,e))}function xLe(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function kLe(e,t,n,r,i){for(var o=0;o<e.length;++o)e[o]=t*n[o]+r*i[o]}function CLe(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,o=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,s=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,h=t.length,p=new Array(h+1);p[0]=t,p[0].fx=e(t),p[0].id=0;for(var v=0;v<h;++v){var g=t.slice();g[v]=g[v]?g[v]*o:a,p[v+1]=g,p[v+1].fx=e(g),p[v+1].id=v+1}function m(e){for(var t=0;t<e.length;t++)p[h][t]=e[t];p[h].fx=e.fx}for(var y=function(e,t){return e.fx-t.fx},b=t.slice(),w=t.slice(),_=t.slice(),x=t.slice(),k=0;k<i;++k){if(p.sort(y),n.history){var C=p.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));C.sort((function(e,t){return e.id-t.id})),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:C})}for(r=0,v=0;v<h;++v)r=Math.max(r,Math.abs(p[0][v]-p[1][v]));if(Math.abs(p[0].fx-p[h].fx)<l&&r<u)break;for(v=0;v<h;++v){b[v]=0;for(var S=0;S<h;++S)b[v]+=p[S][v];b[v]/=h}var O=p[h];if(kLe(w,1+c,b,-c,O),w.fx=e(w),w.fx<p[0].fx)kLe(x,1+s,b,-s,O),x.fx=e(x),x.fx<w.fx?m(x):m(w);else if(w.fx>=p[h-1].fx){var E=!1;if(w.fx>O.fx?(kLe(_,1+d,b,-d,O),_.fx=e(_),_.fx<O.fx?m(_):E=!0):(kLe(_,1-d*c,b,d*c,O),_.fx=e(_),_.fx<w.fx?m(_):E=!0),E){if(f>=1)break;for(v=1;v<p.length;++v)kLe(p[v],1-f,p[0],f,p[v]),p[v].fx=e(p[v])}}else m(w)}return p.sort(y),{fx:p[0].fx,x:p[0]}}function SLe(e,t,n,r,i,o,a){var l=n.fx,u=wLe(n.fxprime,t),c=l,s=l,d=u,f=0;function h(s,f,h){for(var p=0;p<16;++p)if(i=(s+f)/2,kLe(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),d=wLe(r.fxprime,t),c>l+o*i*u||c>=h)f=i;else{if(Math.abs(d)<=-a*u)return i;d*(f-s)>=0&&(f=s),s=i,h=c}return 0}i=i||1,o=o||1e-6,a=a||.1;for(var p=0;p<10;++p){if(kLe(r.x,1,n.x,i,t),c=r.fx=e(r.x,r.fxprime),d=wLe(r.fxprime,t),c>l+o*i*u||p&&c>=s)return h(f,i,s);if(Math.abs(d)<=-a*u)return i;if(d>=0)return h(i,f,c);s=c,f=i,i*=2}return i}function OLe(e,t,n){var r,i,o,a={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},u=t.slice(),c=1;o=(n=n||{}).maxIterations||20*t.length,a.fx=e(a.x,a.fxprime),xLe(r=a.fxprime.slice(),a.fxprime,-1);for(var s=0;s<o;++s){if(c=SLe(e,r,a,l,c),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),c){kLe(u,1,l.fxprime,-1,a.fxprime);var d=wLe(a.fxprime,a.fxprime);kLe(r,Math.max(0,wLe(u,l.fxprime)/d),r,-1,l.fxprime),i=a,a=l,l=i}else xLe(r,a.fxprime,-1);if(_Le(a.fxprime)<=1e-5)break}return n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),alpha:c}),a}var ELe=1e-10;function ILe(e,t){var n,r=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var i=ALe(e[n],e[r]),o=0;o<i.length;++o){var a=i[o];a.parentIndex=[n,r],t.push(a)}return t}(e),i=r.filter((function(t){return function(e,t){for(var n=0;n<t.length;++n)if(MLe(e,t[n])>t[n].radius+ELe)return!1;return!0}(t,e)})),o=0,a=0,l=[];if(i.length>1){var u=jLe(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-u.x,c.y-u.y)}i.sort((function(e,t){return t.angle-e.angle}));var s=i[i.length-1];for(n=0;n<i.length;++n){var d=i[n];a+=(s.x+d.x)*(d.y-s.y);for(var f={x:(d.x+s.x)/2,y:(d.y+s.y)/2},h=null,p=0;p<d.parentIndex.length;++p)if(s.parentIndex.indexOf(d.parentIndex[p])>-1){var v=e[d.parentIndex[p]],g=Math.atan2(d.x-v.x,d.y-v.y),m=Math.atan2(s.x-v.x,s.y-v.y),y=m-g;y<0&&(y+=2*Math.PI);var b=m-y/2,w=MLe(f,{x:v.x+v.radius*Math.sin(b),y:v.y+v.radius*Math.cos(b)});w>2*v.radius&&(w=2*v.radius),(null===h||h.width>w)&&(h={circle:v,width:w,p1:d,p2:s})}null!==h&&(l.push(h),o+=PLe(h.circle.radius,h.width),s=d)}}else{var _=e[0];for(n=1;n<e.length;++n)e[n].radius<_.radius&&(_=e[n]);var x=!1;for(n=0;n<e.length;++n)if(MLe(e[n],_)>Math.abs(_.radius-e[n].radius)){x=!0;break}x?o=a=0:(o=_.radius*_.radius*Math.PI,l.push({circle:_,p1:{x:_.x,y:_.y+_.radius},p2:{x:_.x-ELe,y:_.y+_.radius},width:2*_.radius}))}return a/=2,t&&(t.area=o+a,t.arcArea=o,t.polygonArea=a,t.arcs=l,t.innerPoints=i,t.intersectionPoints=r),o+a}function PLe(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function MLe(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function RLe(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return PLe(e,e-(n*n-t*t+e*e)/(2*n))+PLe(t,r)}function ALe(e,t){var n=MLe(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),l=e.x+o*(t.x-e.x)/n,u=e.y+o*(t.y-e.y)/n,c=-(t.y-e.y)*(a/n),s=-(t.x-e.x)*(a/n);return[{x:l+c,y:u-s},{x:l-c,y:u+s}]}function jLe(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function DLe(e,t,n){var r,i,o=t[0].radius-MLe(t[0],e);for(r=1;r<t.length;++r)(i=t[r].radius-MLe(t[r],e))<=o&&(o=i);for(r=0;r<n.length;++r)(i=MLe(n[r],e)-n[r].radius)<=o&&(o=i);return o}function TLe(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var o=r[0],a=DLe(r[0],e,t);for(n=1;n<r.length;++n){var l=DLe(r[n],e,t);l>=a&&(o=r[n],a=l)}var u=CLe((function(n){return-1*DLe({x:n[0],y:n[1]},e,t)}),[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:u[0],y:u[1]},s=!0;for(n=0;n<e.length;++n)if(MLe(c,e[n])>e[n].radius){s=!1;break}for(n=0;n<t.length;++n)if(MLe(c,t[n])<t[n].radius){s=!1;break}if(!s)if(1==e.length)c={x:e[0].x,y:e[0].y};else{var d={};ILe(e,d),c=0===d.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==d.arcs.length?{x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:t.length?TLe(e,[]):jLe(d.arcs.map((function(e){return e.p1})))}return c}function FLe(e,t){for(var n={},r=function(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var i=0;i<n.length;i++)for(var o=e[n[i]],a=i+1;a<n.length;++a){var l=e[n[a]],u=MLe(o,l);u+l.radius<=o.radius+1e-10?t[n[a]].push(n[i]):u+o.radius<=l.radius+1e-10&&t[n[i]].push(n[a])}return t}(e),i=0;i<t.length;++i){for(var o=t[i].sets,a={},l={},u=0;u<o.length;++u){a[o[u]]=!0;for(var c=r[o[u]],s=0;s<c.length;++s)l[c[s]]=!0}var d=[],f=[];for(var h in e)h in a?d.push(e[h]):h in l||f.push(e[h]);var p=TLe(d,f);n[o]=p,p.disjoint&&t[i].size>0&&console.log("WARNING: area "+o+" not represented on screen")}return n}var NLe=1e-10;function LLe(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+NLe?Math.abs(e-t):function(e,t,n,r){var i=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,a=e(t),l=e(n),u=n-t;if(a*l>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===l)return n;for(var c=0;c<i;++c){var s=t+(u/=2),d=e(s);if(d*a>=0&&(t=s),Math.abs(u)<o||0===d)return s}return t+u}((function(r){return RLe(e,t,r)-n}),0,e+t)}function BLe(e,t){var n=function(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:VLe,i={},o={},a=0;a<e.length;++a){var l=e[a];1==l.sets.length&&(n=l.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:l.size,radius:Math.sqrt(l.size/Math.PI)},o[n]=[])}e=e.filter((function(e){return 2==e.sets.length}));for(a=0;a<e.length;++a){var u=e[a],c=u.hasOwnProperty("weight")?u.weight:1,s=u.sets[0],d=u.sets[1];u.size+NLe>=Math.min(i[s].size,i[d].size)&&(c=0),o[s].push({set:d,size:u.size,weight:c}),o[d].push({set:s,size:u.size,weight:c})}var f=[];for(n in o)if(o.hasOwnProperty(n)){var h=0;for(a=0;a<o[n].length;++a)h+=o[n][a].size*o[n][a].weight;f.push({set:n,size:h})}function p(e,t){return t.size-e.size}f.sort(p);var v={};function g(e){return e.set in v}function m(e,t){i[t].x=e.x,i[t].y=e.y,v[t]=!0}m({x:0,y:0},f[0].set);for(a=1;a<f.length;++a){var y=f[a].set,b=o[y].filter(g);if(n=i[y],b.sort(p),0===b.length)throw"ERROR: missing pairwise overlap information";for(var w=[],_=0;_<b.length;++_){var x=i[b[_].set],k=LLe(n.radius,x.radius,b[_].size);w.push({x:x.x+k,y:x.y}),w.push({x:x.x-k,y:x.y}),w.push({y:x.y+k,x:x.x}),w.push({y:x.y-k,x:x.x});for(var C=_+1;C<b.length;++C)for(var S=i[b[C].set],O=LLe(n.radius,S.radius,b[C].size),E=ALe({x:x.x,y:x.y,radius:k},{x:S.x,y:S.y,radius:O}),I=0;I<E.length;++I)w.push(E[I])}var P=1e50,M=w[0];for(_=0;_<w.length;++_){i[y].x=w[_].x,i[y].y=w[_].y;var R=r(i,e);R<P&&(P=R,M=w[_])}m(M,y)}return i}(e,t),r=t.lossFunction||VLe;if(e.length>=8){var i=function(e,t){t=t||{};var n,r=t.restarts||10,i=[],o={};for(n=0;n<e.length;++n){var a=e[n];1==a.sets.length&&(o[a.sets[0]]=i.length,i.push(a))}var l=function(e,t,n){var r=bLe(t.length,t.length),i=bLe(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var o=n[e.sets[0]],a=n[e.sets[1]],l=LLe(Math.sqrt(t[o].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);r[o][a]=r[a][o]=l;var u=0;e.size+1e-10>=Math.min(t[o].size,t[a].size)?u=1:e.size<=1e-10&&(u=-1),i[o][a]=i[a][o]=u})),{distances:r,constraints:i}}(e,i,o),u=l.distances,c=l.constraints,s=_Le(u.map(_Le))/u.length;u=u.map((function(e){return e.map((function(e){return e/s}))}));var d,f,h=function(e,t){return function(e,t,n,r){var i,o=0;for(i=0;i<t.length;++i)t[i]=0;for(i=0;i<n.length;++i)for(var a=e[2*i],l=e[2*i+1],u=i+1;u<n.length;++u){var c=e[2*u],s=e[2*u+1],d=n[i][u],f=r[i][u],h=(c-a)*(c-a)+(s-l)*(s-l),p=Math.sqrt(h),v=h-d*d;f>0&&p<=d||f<0&&p>=d||(o+=2*v*v,t[2*i]+=4*v*(a-c),t[2*i+1]+=4*v*(l-s),t[2*u]+=4*v*(c-a),t[2*u+1]+=4*v*(s-l))}return o}(e,t,u,c)};for(n=0;n<r;++n){f=OLe(h,yLe(2*u.length).map(Math.random),t),(!d||f.fx<d.fx)&&(d=f)}var p=d.x,v={};for(n=0;n<i.length;++n){var g=i[n];v[g.sets[0]]={x:p[2*n]*s,y:p[2*n+1]*s,radius:Math.sqrt(g.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)xLe(t.history[n].x,s);return v}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function VLe(e,t){var n=0;for(var r=0;r<t.length;++r){var i=t[r],o=void 0;if(1!=i.sets.length){if(2==i.sets.length){var a=e[i.sets[0]],l=e[i.sets[1]];o=RLe(a.radius,l.radius,MLe(a,l))}else o=ILe(i.sets.map((function(t){return e[t]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(o-i.size)*(o-i.size)}}return n}function zLe(e,t,n,r){var i=[],o=[];for(var a in e)e.hasOwnProperty(a)&&(o.push(a),i.push(e[a]));t-=2*r,n-=2*r;var l=function(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}(i),u=l.xRange,c=l.yRange;if(u.max==u.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),e;for(var s=t/(u.max-u.min),d=n/(c.max-c.min),f=Math.min(d,s),h=(t-(u.max-u.min)*f)/2,p=(n-(c.max-c.min)*f)/2,v={},g=0;g<i.length;++g){var m=i[g];v[o[g]]={radius:f*m.radius,x:r+h+(m.x-u.min)*f,y:r+p+(m.y-c.min)*f}}return v}var HLe=Vle((function(e,t,n,r){var i=new Map,o=e.length;return t.forEach((function(t,a){if(1===t[r].length)i.set(t[tLe],e[(a+o)%o]);else{var l=t[r].map((function(e){return i.get(e)}));i.set(t[tLe],l.slice(1).reduce((function(e,t){return gLe(e,t,n)}),l[0]))}})),i}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return JSON.stringify(e)}));function WLe(e,t,n,r){var i=e.data,o=e.setsField,a=e.sizeField;if(0===i.length)return iEe(QOe.WARN,!1,"warn: %s","数据不能为空"),[];var l=i.map((function(e){var t;return Sae(Sae({},e),((t={sets:e[o]||[],size:e[a]})[nLe]="",t[tLe]="",t))}));l.sort((function(e,t){return e.sets.length-t.sets.length}));var u=function(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n=t.initialLayout||BLe,r=t.lossFunction||VLe;e=function(e){e=e.slice();var t,n,r,i,o=[],a={};for(t=0;t<e.length;++t){var l=e[t];1==l.sets.length?o.push(l.sets[0]):2==l.sets.length&&(a[[r=l.sets[0],i=l.sets[1]]]=!0,a[[i,r]]=!0)}for(o.sort((function(e,t){return e>t?1:-1})),t=0;t<o.length;++t)for(r=o[t],n=t+1;n<o.length;++n)[r,i=o[n]]in a||e.push({sets:[r,i],size:0});return e}(e);var i,o=n(e,t),a=[],l=[];for(i in o)o.hasOwnProperty(i)&&(a.push(o[i].x),a.push(o[i].y),l.push(i));for(var u=CLe((function(t){for(var n={},i=0;i<l.length;++i){var a=l[i];n[a]={x:t[2*i],y:t[2*i+1],radius:o[a].radius}}return r(n,e)}),a,t).x,c=0;c<l.length;++c)i=l[c],o[i].x=u[2*c],o[i].y=u[2*c+1];return o}(l),c=zLe(u,t,n,r),s=FLe(c,l);return l.forEach((function(e){var t=e.sets,n=t.join(",");e[tLe]=n;var r=function(e){var t={};ILe(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(e,t,n){var r=[],i=e-n,o=t;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var a=n[o],l=a.circle.radius,u=a.width>l;i.push("\nA",l,l,0,u?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}(t.map((function(e){return c[e]})));/[zZ]$/.test(r)||(r+=" Z"),e[nLe]=r,Nle(e,s[n]||{x:0,y:0})})),l}var ULe=40;function GLe(e,t,n){var r=e.chart,i=e.options,o=i.blendMode,a=i.setsField,l=r.getTheme(),u=l.colors10,c=l.colors20,s=n;Vae(s)||(s=t.filter((function(e){return 1===e[a].length})).length<=10?u:c);var d=HLe(s,t,o,a);return function(e){return d.get(e)||s[0]}}function YLe(e){var t=e.chart,n=e.options,r=n.legend,i=n.appendPadding,o=n.padding,a=CEe(i);return!1!==r&&(a=SEe(i,Kle(r,"position"),ULe)),t.appendPadding=OEe([a,o]),e}function $Le(e){var t=e.options.data;t||(iEe(QOe.WARN,!1,"warn: %s","数据不能为空"),t=[]);var n=t.filter((function(e){return 1===e.sets.length})).map((function(e){return e.sets[0]})),r=t.filter((function(e){var t=e.sets;return function(e,t){for(var n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0}(n,t)}));return Yle(r,t)||iEe(QOe.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Hle({},e,{options:{data:r}})}function qLe(e){var t=e.chart,n=e.options,r=n.pointStyle,i=n.setsField,o=n.sizeField,a=CEe(t.appendPadding),l=a[0],u=a[1],c=a[2],s=a[3],d={offsetX:s,offsetY:l},f=t.viewBBox,h=f.width,p=f.height,v=WLe(n,Math.max(h-(u+s),0),Math.max(p-(l+c),0),0);t.data(v);var g=CIe(vEe({},e,{options:{xField:"x",yField:"y",sizeField:o,seriesField:tLe,rawFields:[i,o],schema:{shape:"venn",style:r}}})).ext.geometry;g.customInfo(d);var m=function(e,t){var n=e.options.color;if("function"!=typeof n){var r=GLe(e,t,"string"==typeof n?[n]:n);return function(e){return r(e[tLe])}}return n}(e,v);return"function"==typeof m&&g.color(tLe,(function(t){var n=v.find((function(e){return e[tLe]===t})),r=GLe(e,v)(t);return m(n,r)})),e}function KLe(e){var t=e.chart,n=e.options.label,r=CEe(t.appendPadding),i=r[0],o={offsetX:r[3],offsetY:i},a=yEe(t,"schema");if(n){var l=n.callback,u=Oae(n,["callback"]);a.label({fields:["id"],callback:l,cfg:Hle({},xEe(u),{type:"venn",customLabelInfo:o})})}else a.label(!1);return e}function XLe(e){var t=e.chart,n=e.options,r=n.legend,i=n.sizeField;return t.legend(tLe,r),t.legend(i,!1),e}function JLe(e){return e.chart.axis(!1),e}function ZLe(e){var t=e.options,n=e.chart,r=t.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};eIe(vEe({},e,{options:{interactions:r.map((function(e){return Sae(Sae({},e),{type:i[e.type]||e.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),e}function QLe(e){return mEe(YLe,nIe,$Le,qLe,KLe,aIe({}),XLe,JLe,QEe,ZLe,tIe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="venn",t}Cae(t,e),t.getDefaultOptions=function(){return rLe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return QLe},t.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(KIe);var eBe="x",tBe="violinY",nBe="violinSize",rBe="minMax",iBe="quantile",oBe="median",aBe="violin_view",lBe="min_max_view",uBe="quantile_view",cBe="median_view",sBe=vEe({},KIe.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),dBe={exports:{}},fBe={exports:{}};!function(e){var t=e.exports;e.exports.isNumber=function(e){return"number"==typeof e},e.exports.findMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},e.exports.findMax=function(e){if(0===e.length)return-1/0;for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},e.exports.findMinMulti=function(e){for(var n=t.findMin(e[0]),r=1;r<e.length;r++)n=Math.min(n,t.findMin(e[r]));return n},e.exports.findMaxMulti=function(e){for(var n=t.findMax(e[0]),r=1;r<e.length;r++)n=Math.max(n,t.findMax(e[r]));return n},e.exports.inside=function(e,t,n){return e<=n&&n<=t}}(fBe);var hBe=fBe.exports;!function(e){var t=Math.log(2),n=e.exports,r=hBe;function i(e){return 1-Math.abs(e)}e.exports.getUnifiedMinMax=function(e,t){return n.getUnifiedMinMaxMulti([e],t)},e.exports.getUnifiedMinMaxMulti=function(e,t){t=t||{};var n=!1,i=!1,o=r.isNumber(t.width)?t.width:2,a=r.isNumber(t.size)?t.size:50,l=r.isNumber(t.min)?t.min:(n=!0,r.findMinMulti(e)),u=r.isNumber(t.max)?t.max:(i=!0,r.findMaxMulti(e)),c=(u-l)/(a-1);return n&&(l-=2*o*c),i&&(u+=2*o*c),{min:l,max:u}},e.exports.create=function(e,t){if(t=t||{},!e||0===e.length)return[];var o=r.isNumber(t.size)?t.size:50,a=r.isNumber(t.width)?t.width:2,l=n.getUnifiedMinMax(e,{size:o,width:a,min:t.min,max:t.max}),u=l.min,c=l.max-u,s=c/(o-1);if(0===c)return[{x:u,y:1}];for(var d=[],f=0;f<o;f++)d.push({x:u+f*s,y:0});var h=function(e,t){for(var n={},r=0,i=-t;i<=t;i++)r+=e(i/t),n[i]=r;return n}(i,a),p=h[a],v=h[a-1]-h[a-2],g=0;e.forEach((function(e){var t=function(e){return Math.floor((e-u)/s)}(e);if(!(t+a<0||t-a>=d.length)){var n=Math.max(t-a,0),i=t,o=Math.min(t+a,d.length-1),l=n-(t-a),c=t+a-o,f=h[-a-1+l]||0,m=h[-a-1+c]||0,y=p/(p-f-m);l>0&&(g+=y*(l-1)*v);var b=Math.max(0,t-a+1);r.inside(0,d.length-1,b)&&(d[b].y+=1*y*v),r.inside(0,d.length-1,i+1)&&(d[i+1].y-=2*y*v),r.inside(0,d.length-1,o+1)&&(d[o+1].y+=1*y*v)}}));var m=g,y=0,b=0;return d.forEach((function(e){y+=e.y,m+=y,e.y=m,b+=m})),b>0&&d.forEach((function(e){e.y/=b})),d},e.exports.getExpectedValueFromPdf=function(e){if(e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e.x*e.y})),t}},e.exports.getXWithLeftTailArea=function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=0;i<e.length&&(r=i,!((n+=e[i].y)>=t));i++);return e[r].x}},e.exports.getPerplexity=function(e){if(e&&0!==e.length){var n=0;return e.forEach((function(e){var t=Math.log(e.y);isFinite(t)&&(n+=e.y*t)})),n=-n/t,Math.pow(2,n)}}}(dBe);const pBe=Un(dBe.exports);function vBe(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function gBe(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function mBe(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,a=Math.log(i),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(i-l)/i);o-i/2<0&&(u*=-1),mBe(e,t,Math.max(n,Math.floor(t-o*l/i+u)),Math.min(r,Math.floor(t+(i-o)*l/i+u)))}var c=e[t],s=n,d=r;for(gBe(e,n,t),e[r]>c&&gBe(e,n,r);s<d;){for(gBe(e,s,d),s++,d--;e[s]<c;)s++;for(;e[d]>c;)d--}e[n]===c?gBe(e,n,d):gBe(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function yBe(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(_Be(e.length,t[r]));n.push(e.length-1),n.sort(wBe);var i=[0,n.length-1];for(;i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var l=Math.floor((a+o)/2);bBe(e,n[l],Math.floor(n[a]),Math.ceil(n[o])),i.push(a,l,l,o)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=vBe(n,t[i]);return r}return bBe(n,_Be(n.length,t),0,n.length-1),vBe(n,t)}function bBe(e,t,n,r){t%1==0?mBe(e,t,n,r):(mBe(e,t=Math.floor(t),n,r),mBe(e,t+1,t+1,r))}function wBe(e,t){return e-t}function _Be(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}var xBe=function(e){return{low:Jae(e),high:Xae(e),q1:yBe(e,.25),q3:yBe(e,.75),median:yBe(e,[.5]),minMax:[Jae(e),Xae(e)],quantile:[yBe(e,.25),yBe(e,.75)]}},kBe=function(e,t){var n=pBe.create(e,t);return{violinSize:n.map((function(e){return e.y})),violinY:n.map((function(e){return e.x}))}},CBe=function(e){var t=e.xField,n=e.yField,r=e.seriesField,i=e.data,o=e.kde,a={min:o.min,max:o.max,size:o.sampleSize,width:o.width};if(!r){var l=sle(i,t);return Object.keys(l).map((function(e){var t=l[e].map((function(e){return e[n]}));return Sae(Sae({x:e},kBe(t,a)),xBe(t))}))}var u=[],c=sle(i,r);return Object.keys(c).forEach((function(e){var i=sle(c[e],t);return Object.keys(i).forEach((function(t){var o,l=i[t].map((function(e){return e[n]}));u.push(Sae(Sae(((o={x:t})[r]=e,o),kBe(l,a)),xBe(l)))}))})),u},SBe=["low","high","q1","q3","median"],OBe=[{type:"dodge",marginRatio:1/32}];function EBe(e){var t=e.chart,n=e.options;return t.data(CBe(n)),e}function IBe(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,o=n.shape,a=void 0===o?"violin":o,l=n.violinStyle,u=n.tooltip,c=n.state,s=t.createView({id:aBe});return function(e){var t=e.options,n=t.violin,r=t.xField,i=t.yField,o=t.seriesField,a=t.sizeField,l=pIe(t.tooltip,[r,i,o,a]),u=l.fields,c=l.formatter;n&&mIe(vEe({},e,{options:{type:"violin",colorField:o,tooltipFields:u,mapping:Sae({tooltip:c},n)}}))}({chart:s,options:{xField:eBe,yField:tBe,seriesField:r||eBe,sizeField:nBe,tooltip:Sae({fields:SBe},u),violin:{style:l,color:i,shape:a},state:c}}),s.geometries[0].adjust(OBe),e}function PBe(e){var t=e.chart,n=e.options,r=n.seriesField,i=n.color,o=n.tooltip,a=n.box;if(!1===a)return e;var l=t.createView({id:lBe});wIe({chart:l,options:{xField:eBe,yField:rBe,seriesField:r||eBe,tooltip:Sae({fields:SBe},o),state:"object"===lr(a)?a.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),l.geometries[0].adjust(OBe);var u=t.createView({id:uBe});wIe({chart:u,options:{xField:eBe,yField:iBe,seriesField:r||eBe,tooltip:Sae({fields:SBe},o),state:"object"===lr(a)?a.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),u.geometries[0].adjust(OBe);var c=t.createView({id:cBe});return xIe({chart:c,options:{xField:eBe,yField:oBe,seriesField:r||eBe,tooltip:Sae({fields:SBe},o),state:"object"===lr(a)?a.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(OBe),u.axis(!1),l.axis(!1),c.axis(!1),c.legend(!1),l.legend(!1),u.legend(!1),e}function MBe(e){var t,n=e.chart,r=e.options,i=r.meta,o=r.xAxis,a=r.yAxis,l=vEe({},i,((t={})[eBe]=Sae(Sae({sync:!0},oEe(o,tEe)),{type:"cat"}),t[tBe]=Sae({sync:!0},oEe(a,tEe)),t[rBe]=Sae({sync:tBe},oEe(a,tEe)),t[iBe]=Sae({sync:tBe},oEe(a,tEe)),t[oBe]=Sae({sync:tBe},oEe(a,tEe)),t));return n.scale(l),e}function RBe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=DEe(t,aBe);return!1===r?o.axis(eBe,!1):o.axis(eBe,r),!1===i?o.axis(tBe,!1):o.axis(tBe,i),t.axis(!1),e}function ABe(e){var t=e.chart,n=e.options,r=n.legend,i=n.seriesField,o=n.shape;if(!1===r)t.legend(!1);else{var a=i||eBe,l=Qle(r,["selected"]);o&&o.startsWith("hollow")||Kle(l,["marker","style","lineWidth"])||Xle(l,["marker","style","lineWidth"],0),t.legend(a,l),Kle(r,"selected")&&Hae(t.views,(function(e){return e.legend(a,r)}))}return e}function jBe(e){var t=DEe(e.chart,aBe);return lIe()(Sae(Sae({},e),{chart:t})),e}function DBe(e){var t=e.chart,n=e.options.animation;return Hae(t.views,(function(e){NEe(e,n)})),e}function TBe(e){return mEe(nIe,EBe,IBe,PBe,MBe,QEe,RBe,ABe,eIe,jBe,DBe)(e)}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="violin",t}Cae(t,e),t.getDefaultOptions=function(){return sBe},t.prototype.changeData=function(e){this.updateOption({data:e}),this.chart.changeData(CBe(this.options))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return TBe}}(KIe);var FBe="$$yField$$",NBe="$$diffField$$",LBe="$$absoluteField$$",BBe="$$isTotal$$",VBe={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function zBe(e,t,n,r){var i=function(e,t,n,r,i){var o,a=[];if(ele(e,(function(e,t){var i;iEe(QOe.WARN,ple(t[n]),"".concat(t[n]," is not a valid number"));var o=Dle(t[n])?null:t[n];return a.push(Sae(Sae({},t),((i={})[r]=[e,e+o],i))),e+o}),0),a.length&&i){var l=Kle(a,[[e.length-1],r,[1]]);a.push(((o={})[t]=i.label,o[n]=l,o[r]=[0,l],o))}return a}(e,t,n,FBe,r);return i.map((function(t,n){var r;return zae(t)?Sae(Sae({},t),((r={})[LBe]=t[FBe][1],r[NBe]=t[FBe][1]-t[FBe][0],r[BBe]=n===e.length,r)):t}))}function HBe(e){var t=e.options,n=t.locale,r=t.total,i=hIe(n).get(["waterfall","total"]);return r&&"string"!=typeof r.label&&i&&(e.options.total.label=i),e}function WBe(e){var t=e.chart,n=e.options,r=n.data,i=n.xField,o=n.yField,a=n.total,l=n.leaderLine,u=n.columnWidthRatio,c=n.waterfallStyle,s=n.risingFill,d=n.fallingFill,f=n.color,h=n.shape,p=n.customInfo;return t.data(zBe(r,i,o,a)),wIe(vEe({},e,{options:{xField:i,yField:FBe,seriesField:i,rawFields:[o,NBe,BBe,FBe],widthRatio:u,interval:{style:c,shape:h||"waterfall",color:f||function(e){return Kle(e,[BBe])?Kle(a,["style","fill"],""):Kle(e,[FBe,1])-Kle(e,[FBe,0])>0?s:d}}}})).ext.geometry.customInfo(Sae(Sae({},p),{leaderLine:l})),e}function UBe(e){var t,n,r=e.options,i=r.xAxis,o=r.yAxis,a=r.xField,l=r.yField,u=r.meta,c=vEe({},{alias:l},Kle(u,l));return mEe(aIe(((t={})[a]=i,t[l]=o,t[FBe]=o,t),vEe({},u,((n={})[FBe]=c,n[NBe]=c,n[LBe]=c,n))))(e)}function GBe(e){var t=e.chart,n=e.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?t.axis(o,!1):t.axis(o,r),!1===i?(t.axis(a,!1),t.axis(FBe,!1)):(t.axis(a,i),t.axis(FBe,i)),e}function YBe(e){var t=e.chart,n=e.options,r=n.legend,i=n.total,o=n.risingFill,a=n.fallingFill,l=hIe(n.locale);if(!1===r)t.legend(!1);else{var u=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:o}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:a}}}];i&&u.push({name:i.label||"",value:"total",marker:{symbol:"square",style:vEe({},{r:5},Kle(i,"style"))}}),t.legend(vEe({},{custom:!0,position:"top",items:u},r)),t.removeInteraction("legend-filter")}return e}function $Be(e){var t=e.chart,n=e.options,r=n.label,i=n.labelMode,o=n.xField,a=yEe(t,"interval");if(r){var l=r.callback,u=Oae(r,["callback"]);a.label({fields:"absolute"===i?[LBe,o]:[NBe,o],callback:l,cfg:xEe(u)})}else a.label(!1);return e}function qBe(e){var t=e.chart,n=e.options,r=n.tooltip,i=n.xField,o=n.yField;if(!1!==r){t.tooltip(Sae({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[o]},r));var a=t.geometries[0];(null==r?void 0:r.formatter)?a.tooltip("".concat(i,"*").concat(o),r.formatter):a.tooltip(o)}else t.tooltip(!1);return e}function KBe(e){return mEe(HBe,nIe,WBe,UBe,GBe,YBe,qBe,$Be,rIe,eIe,tIe,lIe())(e)}zwe("interval","waterfall",{draw:function(e,t){var n=e.customInfo,r=e.points,i=e.nextPoints,o=t.addGroup(),a=this.parsePath(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=0===n?"M":"L";t.push([i,r.x,r.y])}}var o=e[0];return t.push(["L",o.x,o.y]),t.push(["z"]),t}(r)),l=function(e){return vEe({},e.defaultStyle,e.style,{fill:e.color})}(e);o.addShape("path",{attrs:Sae(Sae({},l),{path:a})});var u=Kle(n,"leaderLine");if(u&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),o.addShape("path",{attrs:Sae({path:c},u.style||{})})}return o}}),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="waterfall",t}Cae(t,e),t.getDefaultOptions=function(){return VBe},t.prototype.changeData=function(e){var t=this.options,n=t.xField,r=t.yField,i=t.total;this.updateOption({data:e}),this.chart.changeData(zBe(e,n,r,i))},t.prototype.getSchemaAdaptor=function(){return KBe},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()}}(KIe);var XBe="color",JBe=vEe({},KIe.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",XBe],formatter:function(e){return{name:e.text,value:e.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),ZBe={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function QBe(e,t){return function(e,t){var n=function(){var e=[256,256],t=iVe,n=aVe,r=oVe,i=lVe,o=uVe,a=hVe,l=Math.random,u=[],c=1/0,s=rVe,d=oVe,f=vVe,h={};function p(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);e.width=(tVe<<5)/t,e.height=nVe/t;var n=e.getContext("2d",{willReadFrequently:!0});return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function v(t,n,r){for(var i,o,u,c=n.x,s=n.y,d=Math.sqrt(e[0]*e[0]+e[1]*e[1]),f=a(e),h=l()<.5?1:-1,p=-h;(i=f(p+=h))&&(o=~~i[0],u=~~i[1],!(Math.min(Math.abs(o),Math.abs(u))>=d));)if(n.x=c+o,n.y=s+u,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])&&(!r||!sVe(n,t,e[0]))&&(!r||fVe(n,r))){for(var v=n.sprite,g=n.width>>5,m=e[0]>>5,y=n.x-(g<<4),b=127&y,w=32-b,_=n.y1-n.y0,x=void 0,k=(n.y+n.y0)*m+(y>>5),C=0;C<_;C++){x=0;for(var S=0;S<=g;S++)t[k+S]|=x<<w|(S<g?(x=v[C*g+S])>>>b:0);k+=m}return delete n.sprite,!0}return!1}return h.start=function(){var a=e[0],g=e[1],m=p(f()),y=h.board?h.board:pVe((e[0]>>5)*e[1]),b=u.length,w=[],_=u.map((function(e,a,l){return e.text=s.call(this,e,a,l),e.font=t.call(this,e,a,l),e.style=d.call(this,e,a,l),e.weight=r.call(this,e,a,l),e.rotate=i.call(this,e,a,l),e.size=~~n.call(this,e,a,l),e.padding=o.call(this,e,a,l),e})).sort((function(e,t){return t.size-e.size})),x=-1,k=h.board?[{x:0,y:0},{x:a,y:g}]:null;function C(){for(var t=Date.now();Date.now()-t<c&&++x<b;){var n=_[x];n.x=a*(l()+.5)>>1,n.y=g*(l()+.5)>>1,cVe(m,n,_,x),n.hasText&&v(y,n,k)&&(w.push(n),k?h.hasImage||dVe(k,n):k=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}h._tags=w,h._bounds=k}return C(),h},h.createMask=function(t){var n=document.createElement("canvas"),r=e[0],i=e[1];if(r&&i){var o=r>>5,a=pVe((r>>5)*i);n.width=r,n.height=i;var l=n.getContext("2d");l.drawImage(t,0,0,t.width,t.height,0,0,r,i);for(var u=l.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var s=0;s<r;s++){var d=o*c+(s>>5),f=c*r+s<<2,p=u[f]>=250&&u[f+1]>=250&&u[f+2]>=250?1<<31-s%32:0;a[d]|=p}h.board=a,h.hasImage=!0}},h.timeInterval=function(e){c=null==e?1/0:e},h.words=function(e){u=e},h.size=function(t){e=[+t[0],+t[1]]},h.font=function(e){t=gVe(e)},h.fontWeight=function(e){r=gVe(e)},h.rotate=function(e){i=gVe(e)},h.spiral=function(e){a=mVe[e]||e},h.fontSize=function(e){n=gVe(e)},h.padding=function(e){o=gVe(e)},h.random=function(e){l=gVe(e)},h}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(e){Bae(t[e])||n[e](t[e])})),n.words(e),t.imageMask&&n.createMask(t.imageMask);var r=n.start()._tags;r.forEach((function(e){e.x+=t.size[0]/2,e.y+=t.size[1]/2}));var i=t.size,o=i[0],a=i[1];return r.push({text:"",value:0,x:0,y:0,opacity:0}),r.push({text:"",value:0,x:o,y:a,opacity:0}),r}(e,t=Nle({},ZBe,t))}var eVe=Math.PI/180,tVe=64,nVe=2048;function rVe(e){return e.text}function iVe(){return"serif"}function oVe(){return"normal"}function aVe(e){return e.value}function lVe(){return 90*~~(2*Math.random())}function uVe(){return 1}function cVe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(tVe<<5)/o,nVe/o);var a=0,l=0,u=0,c=n.length;for(--r;++r<c;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font;var s=i.measureText(t.text+"m").width*o,d=t.size<<1;if(t.rotate){var f=Math.sin(t.rotate*eVe),h=Math.cos(t.rotate*eVe),p=s*h,v=s*f,g=d*h,m=d*f;s=Math.max(Math.abs(p+m),Math.abs(p-m))+31>>5<<5,d=~~Math.max(Math.abs(v+g),Math.abs(v-g))}else s=s+31>>5<<5;if(d>u&&(u=d),a+s>=tVe<<5&&(a=0,l+=u,u=0),l+d>=nVe)break;i.translate((a+(s>>1))/o,(l+(d>>1))/o),t.rotate&&i.rotate(t.rotate*eVe),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=s,t.height=d,t.xoff=a,t.yoff=l,t.x1=s>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=s}for(var y=i.getImageData(0,0,(tVe<<5)/o,nVe/o).data,b=[];--r>=0;)if((t=n[r]).hasText){for(var w=(s=t.width)>>5,_=(d=t.y1-t.y0,0);_<d*w;_++)b[_]=0;if(null==(a=t.xoff))return;l=t.yoff;for(var x=0,k=-1,C=0;C<d;C++){for(_=0;_<s;_++){var S=w*C+(_>>5),O=y[(l+C)*(tVe<<5)+(a+_)<<2]?1<<31-_%32:0;b[S]|=O,x|=O}x?k=C:(t.y0++,d--,C--,l++)}t.y1=t.y0+k,t.sprite=b.slice(0,(t.y1-t.y0)*w)}}}function sVe(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),l=127&a,u=32-l,c=e.y1-e.y0,s=(e.y+e.y0)*n+(a>>5),d=0;d<c;d++){r=0;for(var f=0;f<=o;f++)if((r<<u|(f<o?(r=i[d*o+f])>>>l:0))&t[s+f])return!0;s+=n}return!1}function dVe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function fVe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function hVe(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function pVe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function vVe(){return document.createElement("canvas")}function gVe(e){return Lae(e)?e:function(){return e}}var mVe={archimedean:hVe,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};function yVe(e){var t=e.options,n=e.chart,r=n,i=r.width,o=r.height,a=r.padding,l=r.appendPadding,u=r.ele,c=t.data,s=t.imageMask,d=t.wordField,f=t.weightField,h=t.colorField,p=t.wordStyle,v=t.timeInterval,g=t.random,m=t.spiral,y=t.autoFit,b=void 0===y||y,w=t.placementStrategy;if(!c||!c.length)return[];var _,x=p.fontFamily,k=p.fontWeight,C=p.padding,S=p.fontSize,O=function(e,t){return e.map((function(e){return e[t]})).filter((function(e){return"number"==typeof e&&!isNaN(e)}))}(c,f),E=[(_=O,Math.min.apply(Math,_)),xVe(O)],I=c.map((function(e){return{text:e[d],value:e[f],color:e[h],datum:e}})),P={imageMask:s,font:x,fontSize:wVe(S,E),fontWeight:k,size:bVe({width:i,height:o,padding:a,appendPadding:l,autoFit:b,container:u}),padding:C,timeInterval:v,random:g,spiral:m,rotate:_Ve(t)};if(Lae(w)){var M=I.map((function(e,t,r){return Sae(Sae(Sae({},e),{hasText:!!e.text,font:gVe(P.font)(e,t,r),weight:gVe(P.fontWeight)(e,t,r),rotate:gVe(P.rotate)(e,t,r),size:gVe(P.fontSize)(e,t,r),style:"normal"}),w.call(n,e,t,r))}));return M.push({text:"",value:0,x:0,y:0,opacity:0}),M.push({text:"",value:0,x:P.size[0],y:P.size[1],opacity:0}),M}return QBe(I,P)}function bVe(e){var t=e.width,n=e.height,r=e.container,i=e.autoFit,o=e.padding,a=e.appendPadding;if(i){var l=gEe(r);t=l.width,n=l.height}t=t||400,n=n||400;var u=function(e){var t=CEe(e.padding),n=CEe(e.appendPadding),r=t[0]+n[0],i=t[1]+n[1],o=t[2]+n[2],a=t[3]+n[3];return[r,i,o,a]}({padding:o,appendPadding:a}),c=u[0],s=u[1],d=u[2];return[t-(u[3]+s),n-(c+d)]}function wVe(e,t){if(Lae(e))return e;if(Vae(e)){var n=e[0],r=e[1];if(!t)return function(){return(r+n)/2};var i=t[0],o=t[1];return o===i?function(){return(r+n)/2}:function(e){var t=e.value;return(r-n)/(o-i)*(t-i)+n}}return function(){return e}}function _Ve(e){var t=function(e){var t=e.wordStyle.rotationSteps;t<1&&(iEe(QOe.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),t=1);return{rotation:e.wordStyle.rotation,rotationSteps:t}}(e),n=t.rotation,r=t.rotationSteps;if(!Vae(n))return n;var i=n[0],o=n[1],a=1===r?0:(o-i)/(r-1);return function(){return o===i?o:Math.floor(Math.random()*r)*a}}function xVe(e){return Math.max.apply(Math,e)}function kVe(e){var t=e.chart,n=e.options,r=n.colorField,i=n.color,o=yVe(e);return t.data(o),xIe(vEe({},e,{options:{xField:"x",yField:"y",seriesField:r&&XBe,rawFields:Lae(i)&&Aae(Aae([],Kle(n,"rawFields",[]),!0),["datum"],!1),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),t.coordinate().reflect("y"),t.axis(!1),e}function CVe(e){return mEe(aIe({x:{nice:!1},y:{nice:!1}}))(e)}function SVe(e){var t=e.chart,n=e.options,r=n.legend,i=n.colorField;return!1===r?t.legend(!1):i&&t.legend(XBe,r),e}function OVe(e){mEe(kVe,CVe,QEe,SVe,eIe,tIe,nIe,rIe)(e)}function EVe(e){return{fontSize:e.data.size,text:e.data.text,textAlign:"center",fontFamily:e.data.font,fontWeight:e.data.weight,fill:e.color||e.defaultStyle.stroke,textBaseline:"alphabetic"}}zwe("point","word-cloud",{draw:function(e,t){var n=e.x,r=e.y,i=t.addShape("text",{attrs:Sae(Sae({},EVe(e)),{x:n,y:r})}),o=e.data.rotate;return"number"==typeof o&&x_e.rotate(i,o*Math.PI/180),i}});var IVe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="word-cloud",t}return Cae(t,e),t.getDefaultOptions=function(){return JBe},t.prototype.changeData=function(e){this.updateOption({data:e}),this.options.imageMask?this.render():this.chart.changeData(yVe({chart:this.chart,options:this.options}))},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.render=function(){var t=this;return new Promise((function(n){var r=t.options.imageMask;if(!r)return e.prototype.render.call(t),void n();var i,o=function(r){t.options=Sae(Sae({},t.options),{imageMask:r||null}),e.prototype.render.call(t),n()};(i=r,new Promise((function(e,t){if(i instanceof HTMLImageElement)e(i);else{if(nle(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){e(n)},void(n.onerror=function(){iEe(QOe.ERROR,!1,"image %s load failed !!!",i),t()})}iEe(QOe.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),t()}}))).then(o).catch(o)}))},t.prototype.getSchemaAdaptor=function(){return OVe},t.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){e.prototype.triggerResize.call(t)})))},t}(KIe);function PVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MVe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PVe(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){function t(t,n,r,i){var o=e.call(this,t,vEe({},i,n))||this;return o.type="g2-plot",o.defaultOptions=i,o.adaptor=r,o}Cae(t,e),t.prototype.getDefaultOptions=function(){return this.defaultOptions},t.prototype.getSchemaAdaptor=function(){return this.adaptor}}(KIe),fIe("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),fIe("zh-CN",{locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}});var RVe=function(){function e(){us(this,e)}return ls(e,null,[{key:"getElements",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if("string"==typeof e){var n="getElementById"in t?t:void 0;if(n&&!isNaN(+e[0])){var r=n.getElementById(e);return r?[r]:[]}var i=t.querySelectorAll(e);return i.length||"."===e[0]||"#"===e[0]||(i=t.querySelectorAll("."+e)).length||(i=t.querySelectorAll("#"+e)),Array.from(i)}return[e]}},{key:"getElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if("string"==typeof e){var n="getElementById"in t?t:void 0;if(!e.length)return null;if(n&&"#"===e[0])return n.getElementById(e.substring(1));if("#"===e[0]||"."===e[0]||"["===e[0])return t.querySelector(e);if(n&&!isNaN(+e[0]))return n.getElementById(e);var r=t.querySelector(e);return n&&!r&&(r=n.getElementById(e)),r||(r=t.querySelector("."+e)),r}return e}},{key:"shouldSizeToContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==e?void 0:e.grid)&&(t?!0===e.sizeToContent||!0===e.grid.opts.sizeToContent&&void 0===e.sizeToContent:!!e.sizeToContent||e.grid.opts.sizeToContent&&!1!==e.sizeToContent)}},{key:"isIntercepted",value:function(e,t){return!(e.y>=t.y+t.h||e.y+e.h<=t.y||e.x+e.w<=t.x||e.x>=t.x+t.w)}},{key:"isTouching",value:function(t,n){return e.isIntercepted(t,{x:n.x-.5,y:n.y-.5,w:n.w+1,h:n.h+1})}},{key:"areaIntercept",value:function(e,t){var n=e.x>t.x?e.x:t.x,r=e.x+e.w<t.x+t.w?e.x+e.w:t.x+t.w;if(r<=n)return 0;var i=e.y>t.y?e.y:t.y,o=e.y+e.h<t.y+t.h?e.y+e.h:t.y+t.h;return o<=i?0:(r-n)*(o-i)}},{key:"area",value:function(e){return e.w*e.h}},{key:"sort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=1e4;return e.sort((function(e,r){var i,o,a,l,u=t*((null!==(i=e.y)&&void 0!==i?i:n)-(null!==(o=r.y)&&void 0!==o?o:n));return 0===u?t*((null!==(a=e.x)&&void 0!==a?a:n)-(null!==(l=r.x)&&void 0!==l?l:n)):u}))}},{key:"find",value:function(e,t){return t?e.find((function(e){return e.id===t})):void 0}},{key:"createStylesheet",value:function(e,t,n){var r=document.createElement("style"),i=null==n?void 0:n.nonce;return i&&(r.nonce=i),r.setAttribute("type","text/css"),r.setAttribute("gs-style-id",e),r.styleSheet?r.styleSheet.cssText="":r.appendChild(document.createTextNode("")),t?t.insertBefore(r,t.firstChild):(t=document.getElementsByTagName("head")[0]).appendChild(r),r.sheet}},{key:"removeStylesheet",value:function(e,t){var n=(t||document).querySelector("STYLE[gs-style-id="+e+"]");n&&n.parentNode&&n.remove()}},{key:"addCSSRule",value:function(e,t,n){"function"==typeof e.addRule?e.addRule(t,n):"function"==typeof e.insertRule&&e.insertRule("".concat(t,"{").concat(n,"}"))}},{key:"toBool",value:function(e){return"boolean"==typeof e?e:"string"==typeof e?!(""===(e=e.toLowerCase())||"no"===e||"false"===e||"0"===e):Boolean(e)}},{key:"toNumber",value:function(e){return null===e||0===e.length?void 0:Number(e)}},{key:"parseHeight",value:function(e){var t,n="px";if("string"==typeof e)if("auto"===e||""===e)t=0;else{var r=e.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!r)throw new Error("Invalid height val = ".concat(e));n=r[2]||"px",t=parseFloat(r[1])}else t=e;return{h:t,unit:n}}},{key:"defaults",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(n){for(var r in n){if(!n.hasOwnProperty(r))return;null===e[r]||void 0===e[r]?e[r]=n[r]:"object"===lr(n[r])&&"object"===lr(e[r])&&t.defaults(e[r],n[r])}})),e}},{key:"same",value:function(e,t){if("object"!==lr(e))return e==t;if(lr(e)!==lr(t))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}},{key:"copyPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0!==t.x&&(e.x=t.x),void 0!==t.y&&(e.y=t.y),void 0!==t.w&&(e.w=t.w),void 0!==t.h&&(e.h=t.h),n&&(t.minW&&(e.minW=t.minW),t.minH&&(e.minH=t.minH),t.maxW&&(e.maxW=t.maxW),t.maxH&&(e.maxH=t.maxH)),e}},{key:"samePos",value:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&(e.w||1)===(t.w||1)&&(e.h||1)===(t.h||1)}},{key:"sanitizeMinMax",value:function(e){e.minW||delete e.minW,e.minH||delete e.minH,e.maxW||delete e.maxW,e.maxH||delete e.maxH}},{key:"removeInternalAndSame",value:function(t,n){if("object"===lr(t)&&"object"===lr(n))for(var r in t){var i=t[r],o=n[r];"_"===r[0]||i===o?delete t[r]:i&&"object"===lr(i)&&void 0!==o&&(e.removeInternalAndSame(i,o),Object.keys(i).length||delete t[r])}}},{key:"removeInternalForSave",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in e)"_"!==n[0]&&null!==e[n]&&void 0!==e[n]||delete e[n];delete e.grid,t&&delete e.el,e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,e.locked||delete e.locked,1!==e.w&&e.w!==e.minW||delete e.w,1!==e.h&&e.h!==e.minH||delete e.h}},{key:"throttle",value:function(e,t){var n=!1;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n||(n=!0,setTimeout((function(){e.apply(void 0,i),n=!1}),t))}}},{key:"removePositioningStyles",value:function(e){var t=e.style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")}},{key:"getScrollElement",value:function(e){if(!e)return document.scrollingElement||document.documentElement;var t=getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowY)?e:this.getScrollElement(e.parentElement)}},{key:"updateScrollPosition",value:function(e,t,n){var r=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight;if(r.top<0||r.bottom>i){var o=r.bottom-i,a=r.top,l=this.getScrollElement(e);if(null!==l){var u=l.scrollTop;r.top<0&&n<0?e.offsetHeight>i?l.scrollTop+=n:l.scrollTop+=Math.abs(a)>Math.abs(n)?n:a:n>0&&(e.offsetHeight>i?l.scrollTop+=n:l.scrollTop+=o>n?n:o),t.top+=l.scrollTop-u}}}},{key:"updateScrollResize",value:function(e,t,n){var r=this.getScrollElement(t),i=r.clientHeight,o=r===this.getScrollElement()?0:r.getBoundingClientRect().top,a=e.clientY-o,l=a>i-n;a<n?r.scrollBy({behavior:"smooth",top:a-n}):l&&r.scrollBy({behavior:"smooth",top:n-(i-a)})}},{key:"clone",value:function(e){return null==e||"object"!==lr(e)?e:e instanceof Array?ts(e):MVe({},e)}},{key:"cloneDeep",value:function(t){var n=["parentGrid","el","grid","subGrid","engine"],r=e.clone(t),i=function(i){r.hasOwnProperty(i)&&"object"===lr(r[i])&&"__"!==i.substring(0,2)&&!n.find((function(e){return e===i}))&&(r[i]=e.cloneDeep(t[i]))};for(var o in r)i(o);return r}},{key:"cloneNode",value:function(e){var t=e.cloneNode(!0);return t.removeAttribute("id"),t}},{key:"appendTo",value:function(t,n){var r;(r="string"==typeof n?e.getElement(n):n)&&r.appendChild(t)}},{key:"addElStyles",value:function(e,t){if(t instanceof Object){var n=function(n){t.hasOwnProperty(n)&&(Array.isArray(t[n])?t[n].forEach((function(t){e.style[n]=t})):e.style[n]=t[n])};for(var r in t)n(r)}}},{key:"initEvent",value:function(e,t){var n={type:t.type},r={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:t.target?t.target:e.target};return["altKey","ctrlKey","metaKey","shiftKey"].forEach((function(t){return n[t]=e[t]})),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach((function(t){return n[t]=e[t]})),MVe(MVe({},n),r)}},{key:"simulateMouseEvent",value:function(e,t,n){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,e.target),(n||e.target).dispatchEvent(r)}},{key:"getValuesFromTransformedElement",value:function(t){var n=document.createElement("div");e.addElStyles(n,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),t.appendChild(n);var r=n.getBoundingClientRect();return t.removeChild(n),n.remove(),{xScale:1/r.width,yScale:1/r.height,xOffset:r.left,yOffset:r.top}}},{key:"swap",value:function(e,t,n){if(e){var r=e[t];e[t]=e[n],e[n]=r}}},{key:"canBeRotated",value:function(e){var t;return!(!e||e.w===e.h||e.locked||e.noResize||null!==(t=e.grid)&&void 0!==t&&t.opts.disableResize||e.minW&&e.minW===e.maxW||e.minH&&e.minH===e.maxH)}}])}();function AVe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jVe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jVe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function jVe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function DVe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TVe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DVe(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DVe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FVe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};us(this,e),this.addedNodes=[],this.removedNodes=[],this.column=t.column||12,this.maxRow=t.maxRow,this._float=t.float,this.nodes=t.nodes||[],this.onChange=t.onChange}return ls(e,[{key:"batchUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!this.batchMode===e||(this.batchMode=e,e?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,t&&this._packNodes(),this._notify())),this}},{key:"_useEntireRowArea",value:function(e,t){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!e._moving||e._skipDown||t.y<=e.y)}},{key:"_fixCollisions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.sortNodes(-1),!(n=n||this.collide(e,t)))return!1;if(e._moving&&!r.nested&&!this.float&&this.swap(e,n))return!0;var i=t;!this._loading&&this._useEntireRowArea(e,t)&&(i={x:0,w:this.column,y:t.y,h:t.h},n=this.collide(e,i,r.skip));for(var o=!1,a={nested:!0,pack:!1};n=n||this.collide(e,i,r.skip);){var l=void 0;if(n.locked||this._loading||e._moving&&!e._skipDown&&t.y>e.y&&!this.float&&(!this.collide(n,TVe(TVe({},n),{},{y:e.y}),e)||!this.collide(n,TVe(TVe({},n),{},{y:t.y-n.h}),e))?(e._skipDown=e._skipDown||t.y>e.y,l=this.moveNode(e,TVe(TVe({},t),{},{y:n.y+n.h},a)),(n.locked||this._loading)&&l?RVe.copyPos(t,e):!n.locked&&l&&r.pack&&(this._packNodes(),t.y=n.y+n.h,RVe.copyPos(e,t)),o=o||l):l=this.moveNode(n,TVe(TVe({},n),{},{y:t.y+t.h,skip:e},a)),!l)return o;n=void 0}return o}},{key:"collide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=e._id,i=null==n?void 0:n._id;return this.nodes.find((function(e){return e._id!==r&&e._id!==i&&RVe.isIntercepted(e,t)}))}},{key:"collideAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=e._id,i=null==n?void 0:n._id;return this.nodes.filter((function(e){return e._id!==r&&e._id!==i&&RVe.isIntercepted(e,t)}))}},{key:"directionCollideCoverage",value:function(e,t,n){if(t.rect&&e._rect){var r,i=e._rect,o=TVe({},t.rect);o.y>i.y?(o.h+=o.y-i.y,o.y=i.y):o.h+=i.y-o.y,o.x>i.x?(o.w+=o.x-i.x,o.x=i.x):o.w+=i.x-o.x;var a,l=.5,u=AVe(n);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(c.locked||!c._rect)break;var s=c._rect,d=Number.MAX_VALUE,f=Number.MAX_VALUE;i.y<s.y?d=(o.y+o.h-s.y)/s.h:i.y+i.h>s.y+s.h&&(d=(s.y+s.h-o.y)/s.h),i.x<s.x?f=(o.x+o.w-s.x)/s.w:i.x+i.w>s.x+s.w&&(f=(s.x+s.w-o.x)/s.w);var h=Math.min(f,d);h>l&&(l=h,r=c)}}catch(e){u.e(e)}finally{u.f()}return t.collide=r,r}}},{key:"cacheRects",value:function(e,t,n,r,i,o){return this.nodes.forEach((function(a){return a._rect={y:a.y*t+n,x:a.x*e+o,w:a.w*e-o-r,h:a.h*t-n-i}})),this}},{key:"swap",value:function(e,t){if(!t||t.locked||!e||e.locked)return!1;function n(){var n=t.x,r=t.y;return t.x=e.x,t.y=e.y,e.h!=t.h?(e.x=n,e.y=t.y+t.h):e.w!=t.w?(e.x=t.x+t.w,e.y=r):(e.x=n,e.y=r),e._dirty=t._dirty=!0,!0}var r;if(e.w===t.w&&e.h===t.h&&(e.x===t.x||e.y===t.y)&&(r=RVe.isTouching(e,t)))return n();if(!1!==r){if(e.w===t.w&&e.x===t.x&&(r||(r=RVe.isTouching(e,t)))){if(t.y<e.y){var i=e;e=t,t=i}return n()}if(!1!==r){if(e.h===t.h&&e.y===t.y&&(r||(r=RVe.isTouching(e,t)))){if(t.x<e.x){var o=e;e=t,t=o}return n()}return!1}}}},{key:"isAreaEmpty",value:function(e,t,n,r){var i={x:e||0,y:t||0,w:n||1,h:r||1};return!this.collide(i)}},{key:"compact",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"compact",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===this.nodes.length)return this;n&&this.sortNodes();var r=this.batchMode;r||this.batchUpdate();var i=this._inColumnResize;i||(this._inColumnResize=!0);var o=this.nodes;return this.nodes=[],o.forEach((function(n,r,i){var o;n.locked||(n.autoPosition=!0,"list"===t&&r&&(o=i[r-1])),e.addNode(n,!1,o)})),i||delete this._inColumnResize,r||this.batchUpdate(!1),this}},{key:"float",get:function(){return this._float||!1},set:function(e){this._float!==e&&(this._float=e||!1,e||this._packNodes()._notify())}},{key:"sortNodes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.nodes=RVe.sort(this.nodes,e),this}},{key:"_packNodes",value:function(){var e=this;return this.batchMode||(this.sortNodes(),this.float?this.nodes.forEach((function(t){if(!t._updating&&void 0!==t._orig&&t.y!==t._orig.y)for(var n=t.y;n>t._orig.y;){--n,e.collide(t,{x:t.x,y:n,w:t.w,h:t.h})||(t._dirty=!0,t.y=n)}})):this.nodes.forEach((function(t,n){if(!t.locked)for(;t.y>0;){var r=0===n?0:t.y-1;if(!(0===n||!e.collide(t,{x:t.x,y:r,w:t.w,h:t.h})))break;t._dirty=t.y!==r,t.y=r}}))),this}},{key:"prepareNode",value:function(t,n){var r;t._id=null!==(r=t._id)&&void 0!==r?r:e._idSeq++,void 0!==t.x&&void 0!==t.y&&null!==t.x&&null!==t.y||(t.autoPosition=!0);var i={x:0,y:0,w:1,h:1};return RVe.defaults(t,i),t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,RVe.sanitizeMinMax(t),"string"==typeof t.x&&(t.x=Number(t.x)),"string"==typeof t.y&&(t.y=Number(t.y)),"string"==typeof t.w&&(t.w=Number(t.w)),"string"==typeof t.h&&(t.h=Number(t.h)),isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),isNaN(t.w)&&(t.w=i.w),isNaN(t.h)&&(t.h=i.h),this.nodeBoundFix(t,n),t}},{key:"nodeBoundFix",value:function(e,t){var n=e._orig||RVe.copyPos({},e);if(e.maxW&&(e.w=Math.min(e.w,e.maxW)),e.maxH&&(e.h=Math.min(e.h,e.maxH)),e.minW&&e.minW<=this.column&&(e.w=Math.max(e.w,e.minW)),e.minH&&(e.h=Math.max(e.h,e.minH)),(e.x||0)+(e.w||1)>this.column&&this.column<12&&!this._inColumnResize&&e._id&&-1===this.findCacheLayout(e,12)){var r=TVe({},e);r.autoPosition||void 0===r.x?(delete r.x,delete r.y):r.x=Math.min(11,r.x),r.w=Math.min(12,r.w||1),this.cacheOneLayout(r,12)}return e.w>this.column?e.w=this.column:e.w<1&&(e.w=1),this.maxRow&&e.h>this.maxRow?e.h=this.maxRow:e.h<1&&(e.h=1),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.w>this.column&&(t?e.w=this.column-e.x:e.x=this.column-e.w),this.maxRow&&e.y+e.h>this.maxRow&&(t?e.h=this.maxRow-e.y:e.y=this.maxRow-e.h),RVe.samePos(e,n)||(e._dirty=!0),this}},{key:"getDirtyNodes",value:function(e){return e?this.nodes.filter((function(e){return e._dirty&&!RVe.samePos(e,e._orig)})):this.nodes.filter((function(e){return e._dirty}))}},{key:"_notify",value:function(e){if(this.batchMode||!this.onChange)return this;var t=(e||[]).concat(this.getDirtyNodes());return this.onChange(t),this}},{key:"cleanNodes",value:function(){return this.batchMode||this.nodes.forEach((function(e){delete e._dirty,delete e._lastTried})),this}},{key:"saveInitial",value:function(){return this.nodes.forEach((function(e){e._orig=RVe.copyPos({},e),delete e._dirty})),this._hasLocked=this.nodes.some((function(e){return e.locked})),this}},{key:"restoreInitial",value:function(){return this.nodes.forEach((function(e){RVe.samePos(e,e._orig)||(RVe.copyPos(e,e._orig),e._dirty=!0)})),this._notify(),this}},{key:"findEmptyPosition",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nodes,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.column,r=arguments.length>3?arguments[3]:void 0,i=r?r.y*n+(r.x+r.w):0,o=!1,a=function(){var r=l%n,i=Math.floor(l/n);if(r+e.w>n)return 1;var a={x:r,y:i,w:e.w,h:e.h};t.find((function(e){return RVe.isIntercepted(a,e)}))||(e.x===r&&e.y===i||(e._dirty=!0),e.x=r,e.y=i,delete e.autoPosition,o=!0)},l=i;!o;++l)a();return o}},{key:"addNode",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=this.nodes.find((function(t){return t._id===e._id}));return i||(this._inColumnResize?this.nodeBoundFix(e):this.prepareNode(e),delete e._temporaryRemoved,delete e._removeDOM,e.autoPosition&&this.findEmptyPosition(e,this.nodes,this.column,r)&&(delete e.autoPosition,t=!0),this.nodes.push(e),n&&this.addedNodes.push(e),t||this._fixCollisions(e),this.batchMode||this._packNodes()._notify(),e)}},{key:"removeNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.nodes.find((function(t){return t._id===e._id}))?(n&&this.removedNodes.push(e),t&&(e._removeDOM=!0),this.nodes=this.nodes.filter((function(t){return t._id!==e._id})),e._isAboutToRemove||this._packNodes(),this._notify([e]),this):this}},{key:"removeAll",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(delete this._layouts,!this.nodes.length)return this;e&&this.nodes.forEach((function(e){return e._removeDOM=!0}));var n=this.nodes;return this.removedNodes=t?n:[],this.nodes=[],this._notify(n)}},{key:"moveNodeCheck",value:function(t,n){var r,i=this;if(!this.changedPosConstrain(t,n))return!1;if(n.pack=!0,!this.maxRow)return this.moveNode(t,n);var o=new e({column:this.column,float:this.float,nodes:this.nodes.map((function(e){return e._id===t._id?r=TVe({},e):TVe({},e)}))});if(!r)return!1;var a=o.moveNode(r,n)&&o.getRow()<=Math.max(this.getRow(),this.maxRow);if(!a&&!n.resizing&&n.collide){var l=n.collide.el.gridstackNode;if(this.swap(t,l))return this._notify(),!0}return!!a&&(o.nodes.filter((function(e){return e._dirty})).forEach((function(e){var t=i.nodes.find((function(t){return t._id===e._id}));t&&(RVe.copyPos(t,e),t._dirty=!0)})),this._notify(),!0)}},{key:"willItFit",value:function(t){if(delete t._willFitPos,!this.maxRow)return!0;var n=new e({column:this.column,float:this.float,nodes:this.nodes.map((function(e){return TVe({},e)}))}),r=TVe({},t);return this.cleanupNode(r),delete r.el,delete r._id,delete r.content,delete r.grid,n.addNode(r),n.getRow()<=this.maxRow&&(t._willFitPos=RVe.copyPos({},r),!0)}},{key:"changedPosConstrain",value:function(e,t){return t.w=t.w||e.w,t.h=t.h||e.h,e.x!==t.x||e.y!==t.y||(e.maxW&&(t.w=Math.min(t.w,e.maxW)),e.maxH&&(t.h=Math.min(t.h,e.maxH)),e.minW&&(t.w=Math.max(t.w,e.minW)),e.minH&&(t.h=Math.max(t.h,e.minH)),e.w!==t.w||e.h!==t.h)}},{key:"moveNode",value:function(e,t){if(!e||!t)return!1;var n;void 0!==t.pack||this.batchMode||(n=t.pack=!0),"number"!=typeof t.x&&(t.x=e.x),"number"!=typeof t.y&&(t.y=e.y),"number"!=typeof t.w&&(t.w=e.w),"number"!=typeof t.h&&(t.h=e.h);var r=e.w!==t.w||e.h!==t.h,i=RVe.copyPos({},e,!0);if(RVe.copyPos(i,t),this.nodeBoundFix(i,r),RVe.copyPos(t,i),!t.forceCollide&&RVe.samePos(e,t))return!1;var o=RVe.copyPos({},e),a=this.collideAll(e,i,t.skip),l=!0;if(a.length){var u,c=e._moving&&!t.nested,s=c?this.directionCollideCoverage(e,t,a):a[0];if(c&&s&&null!==(u=e.grid)&&void 0!==u&&null!==(u=u.opts)&&void 0!==u&&u.subGridDynamic&&!e.grid._isTemp){var d=RVe.areaIntercept(t.rect,s._rect),f=RVe.area(t.rect),h=RVe.area(s._rect);d/(f<h?f:h)>.8&&(s.grid.makeSubGrid(s.el,void 0,e),s=void 0)}s?l=!this._fixCollisions(e,i,s,t):(l=!1,n&&delete t.pack)}return l&&(e._dirty=!0,RVe.copyPos(e,i)),t.pack&&this._packNodes()._notify(),!RVe.samePos(e,o)}},{key:"getRow",value:function(){return this.nodes.reduce((function(e,t){return Math.max(e,t.y+t.h)}),0)}},{key:"beginUpdate",value:function(e){return e._updating||(e._updating=!0,delete e._skipDown,this.batchMode||this.saveInitial()),this}},{key:"endUpdate",value:function(){var e=this.nodes.find((function(e){return e._updating}));return e&&(delete e._updating,delete e._skipDown),this}},{key:"save",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,r=null===(e=this._layouts)||void 0===e?void 0:e.length,i=r&&this.column!==r-1?this._layouts[r-1]:null,o=[];return this.sortNodes(),this.nodes.forEach((function(e){var r=null==i?void 0:i.find((function(t){return t._id===e._id})),a=TVe(TVe({},e),r||{});RVe.removeInternalForSave(a,!t),n&&n(e,a),o.push(a)})),o}},{key:"layoutsNodesChange",value:function(e){var t=this;return!this._layouts||this._inColumnResize||this._layouts.forEach((function(n,r){if(!n||r===t.column)return t;if(r<t.column)t._layouts[r]=void 0;else{var i=r/t.column;e.forEach((function(e){if(e._orig){var t=n.find((function(t){return t._id===e._id}));t&&(t.y>=0&&e.y!==e._orig.y&&(t.y+=e.y-e._orig.y),e.x!==e._orig.x&&(t.x=Math.round(e.x*i)),e.w!==e._orig.w&&(t.w=Math.round(e.w*i)))}}))}})),this}},{key:"columnChanged",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"moveScale";if(!this.nodes.length||!t||e===t)return this;if("none"===r)return this;var i="compact"===r||"list"===r;i&&this.sortNodes(1),t<e&&this.cacheLayout(this.nodes,e),this.batchUpdate();var o=[],a=i?this.nodes:RVe.sort(this.nodes,-1);if(t>e&&this._layouts){var l,u=this._layouts[t]||[],c=this._layouts.length-1;!u.length&&e!==c&&null!==(l=this._layouts[c])&&void 0!==l&&l.length&&(e=c,this._layouts[c].forEach((function(e){var t=a.find((function(t){return t._id===e._id}));if(t){var n,r,o;if(!i&&!e.autoPosition)t.x=null!==(r=e.x)&&void 0!==r?r:t.x,t.y=null!==(o=e.y)&&void 0!==o?o:t.y;t.w=null!==(n=e.w)&&void 0!==n?n:t.w,null!=e.x&&void 0!==e.y||(t.autoPosition=!0)}}))),u.forEach((function(e){var t=a.findIndex((function(t){return t._id===e._id}));if(-1!==t){var r,l,u,c=a[t];if(i)return void(c.w=e.w);if((e.autoPosition||isNaN(e.x)||isNaN(e.y))&&n.findEmptyPosition(e,o),!e.autoPosition)c.x=null!==(r=e.x)&&void 0!==r?r:c.x,c.y=null!==(l=e.y)&&void 0!==l?l:c.y,c.w=null!==(u=e.w)&&void 0!==u?u:c.w,o.push(c);a.splice(t,1)}}))}if(i)this.compact(r,!1);else{if(a.length)if("function"==typeof r)r(t,e,o,a);else{var s=i?1:t/e,d="move"===r||"moveScale"===r,f="scale"===r||"moveScale"===r;a.forEach((function(n){n.x=1===t?0:d?Math.round(n.x*s):Math.min(n.x,t-1),n.w=1===t||1===e?1:f?Math.round(n.w*s)||1:Math.min(n.w,t),o.push(n)})),a=[]}o=RVe.sort(o,-1),this._inColumnResize=!0,this.nodes=[],o.forEach((function(e){n.addNode(e,!1),delete e._orig}))}return this.nodes.forEach((function(e){return delete e._orig})),this.batchUpdate(!1,!i),delete this._inColumnResize,this}},{key:"cacheLayout",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return t.forEach((function(t,n){if(void 0===t._id){var i,a=t.id?r.nodes.find((function(e){return e.id===t.id})):void 0;t._id=null!==(i=null==a?void 0:a._id)&&void 0!==i?i:e._idSeq++}o[n]={x:t.x,y:t.y,w:t.w,_id:t._id}})),this._layouts=i?[]:this._layouts||[],this._layouts[n]=o,this}},{key:"cacheOneLayout",value:function(t,n){var r;t._id=null!==(r=t._id)&&void 0!==r?r:e._idSeq++;var i={x:t.x,y:t.y,w:t.w,_id:t._id};(t.autoPosition||void 0===t.x)&&(delete i.x,delete i.y,t.autoPosition&&(i.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[n]=this._layouts[n]||[];var o=this.findCacheLayout(t,n);return-1===o?this._layouts[n].push(i):this._layouts[n][o]=i,this}},{key:"findCacheLayout",value:function(e,t){var n,r;return null!==(n=null===(r=this._layouts)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.findIndex((function(t){return t._id===e._id})))&&void 0!==n?n:-1}},{key:"removeNodeFromLayoutCache",value:function(e){if(this._layouts)for(var t=0;t<this._layouts.length;t++){var n=this.findCacheLayout(e,t);-1!==n&&this._layouts[t].splice(n,1)}}},{key:"cleanupNode",value:function(e){for(var t in e)"_"===t[0]&&"_id"!==t&&delete e[t];return this}}])}();FVe._idSeq=0;var NVe={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"},LVe={handle:".grid-stack-item-content",appendTo:"body"},BVe=ls((function e(){us(this,e)})),VVe="undefined"!=typeof window&&"undefined"!=typeof document&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),zVe=ls((function e(){us(this,e)}));function HVe(e,t){if(!(e.touches.length>1)){e.cancelable&&e.preventDefault();var n=e.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}function WVe(e,t){e.cancelable&&e.preventDefault();var n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}function UVe(e){zVe.touchHandled||(zVe.touchHandled=!0,HVe(e,"mousedown"))}function GVe(e){zVe.touchHandled&&HVe(e,"mousemove")}function YVe(e){if(zVe.touchHandled){zVe.pointerLeaveTimeout&&(window.clearTimeout(zVe.pointerLeaveTimeout),delete zVe.pointerLeaveTimeout);var t=!!BVe.dragElement;HVe(e,"mouseup"),t||HVe(e,"click"),zVe.touchHandled=!1}}function $Ve(e){"mouse"!==e.pointerType&&e.target.releasePointerCapture(e.pointerId)}function qVe(e){BVe.dragElement&&"mouse"!==e.pointerType&&WVe(e,"mouseenter")}function KVe(e){BVe.dragElement&&"mouse"!==e.pointerType&&(zVe.pointerLeaveTimeout=window.setTimeout((function(){delete zVe.pointerLeaveTimeout,WVe(e,"mouseleave")}),10))}var XVe=function(){function e(t,n,r){us(this,e),this.host=t,this.dir=n,this.option=r,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}return ls(e,[{key:"_init",value:function(){var t=this.el=document.createElement("div");return t.classList.add("ui-resizable-handle"),t.classList.add("".concat(e.prefix).concat(this.dir)),t.style.zIndex="100",t.style.userSelect="none",this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),VVe&&(this.el.addEventListener("touchstart",UVe),this.el.addEventListener("pointerdown",$Ve)),this}},{key:"destroy",value:function(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),VVe&&(this.el.removeEventListener("touchstart",UVe),this.el.removeEventListener("pointerdown",$Ve)),this.host.removeChild(this.el),delete this.el,delete this.host,this}},{key:"_mouseDown",value:function(e){this.mouseDownEvent=e,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),VVe&&(this.el.addEventListener("touchmove",GVe),this.el.addEventListener("touchend",YVe)),e.stopPropagation(),e.preventDefault()}},{key:"_mouseMove",value:function(e){var t=this.mouseDownEvent;this.moving?this._triggerEvent("move",e):Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",e),document.addEventListener("keydown",this._keyEvent)),e.stopPropagation()}},{key:"_mouseUp",value:function(e){this.moving&&(this._triggerEvent("stop",e),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),VVe&&(this.el.removeEventListener("touchmove",GVe),this.el.removeEventListener("touchend",YVe)),delete this.moving,delete this.mouseDownEvent,e.stopPropagation(),e.preventDefault()}},{key:"_keyEvent",value:function(e){var t;"Escape"===e.key&&(null===(t=this.host.gridstackNode)||void 0===t||null===(t=t.grid)||void 0===t||t.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))}},{key:"_triggerEvent",value:function(e,t){return this.option[e]&&this.option[e](t),this}}])}();XVe.prefix="ui-resizable-";var JVe=function(){return ls((function e(){us(this,e),this._eventRegister={}}),[{key:"disabled",get:function(){return this._disabled}},{key:"on",value:function(e,t){this._eventRegister[e]=t}},{key:"off",value:function(e){delete this._eventRegister[e]}},{key:"enable",value:function(){this._disabled=!1}},{key:"disable",value:function(){this._disabled=!0}},{key:"destroy",value:function(){delete this._eventRegister}},{key:"triggerEvent",value:function(e,t){if(!this.disabled&&this._eventRegister&&this._eventRegister[e])return this._eventRegister[e](t)}}])}();function ZVe(e,t,n){return t=Ch(t),kh(e,QVe()?Reflect.construct(t,[],Ch(e).constructor):t.apply(e,n))}function QVe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QVe=function(){return!!e})()}function eze(e,t,n,r){var i=QG(Ch(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}var tze=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return us(this,t),(n=ZVe(this,t)).el=e,n.option=r,n.rectScale={x:1,y:1},n._ui=function(){var e=n.el.parentElement.getBoundingClientRect(),t={width:n.originalRect.width,height:n.originalRect.height+n.scrolled,left:n.originalRect.left,top:n.originalRect.top-n.scrolled},r=n.temporalRect||t;return{position:{left:(r.left-e.left)*n.rectScale.x,top:(r.top-e.top)*n.rectScale.y},size:{width:r.width*n.rectScale.x,height:r.height*n.rectScale.y}}},n._mouseOver=n._mouseOver.bind(n),n._mouseOut=n._mouseOut.bind(n),n.enable(),n._setupAutoHide(n.option.autoHide),n._setupHandlers(),n}return Oh(t,e),ls(t,[{key:"on",value:function(e,n){eze(t,"on",this)([e,n])}},{key:"off",value:function(e){eze(t,"off",this)([e])}},{key:"enable",value:function(){eze(t,"enable",this)([]),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}},{key:"disable",value:function(){eze(t,"disable",this)([]),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}},{key:"destroy",value:function(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,eze(t,"destroy",this)([])}},{key:"updateOption",value:function(e){var t=this,n=e.handles&&e.handles!==this.option.handles,r=e.autoHide&&e.autoHide!==this.option.autoHide;return Object.keys(e).forEach((function(n){return t.option[n]=e[n]})),n&&(this._removeHandlers(),this._setupHandlers()),r&&this._setupAutoHide(this.option.autoHide),this}},{key:"_setupAutoHide",value:function(e){return e?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),BVe.overResizeElement===this&&delete BVe.overResizeElement),this}},{key:"_mouseOver",value:function(e){BVe.overResizeElement||BVe.dragElement||(BVe.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}},{key:"_mouseOut",value:function(e){BVe.overResizeElement===this&&(delete BVe.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}},{key:"_setupHandlers",value:function(){var e=this;return this.handlers=this.option.handles.split(",").map((function(e){return e.trim()})).map((function(t){return new XVe(e.el,t,{start:function(t){e._resizeStart(t)},stop:function(t){e._resizeStop(t)},move:function(n){e._resizing(n,t)}})})),this}},{key:"_resizeStart",value:function(e){this.sizeToContent=RVe.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=RVe.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=e,this._setupHelper(),this._applyChange();var t=RVe.initEvent(e,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(t,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",t),this}},{key:"_resizing",value:function(e,t){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(e,t),this._applyChange();var n=RVe.initEvent(e,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(n,this._ui()),this.triggerEvent("resize",n),this}},{key:"_resizeStop",value:function(e){var t=RVe.initEvent(e,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(t),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",t),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}},{key:"_setupHelper",value:function(){var e=this;this.elOriginStyleVal=t._originStyleProp.map((function(t){return e.el.style[t]})),this.parentOriginStylePosition=this.el.parentElement.style.position;var n=this.el.parentElement,r=RVe.getValuesFromTransformedElement(n);return this.rectScale={x:r.xScale,y:r.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}},{key:"_cleanHelper",value:function(){var e=this;return t._originStyleProp.forEach((function(t,n){e.el.style[t]=e.elOriginStyleVal[n]||null})),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}},{key:"_getChange",value:function(e,t){var n,r,i=this.startEvent,o={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},a=e.clientX-i.clientX,l=this.sizeToContent?0:e.clientY-i.clientY;t.indexOf("e")>-1?o.width+=a:t.indexOf("w")>-1&&(o.width-=a,o.left+=a,n=!0),t.indexOf("s")>-1?o.height+=l:t.indexOf("n")>-1&&(o.height-=l,o.top+=l,r=!0);var u=this._constrainSize(o.width,o.height,n,r);return Math.round(o.width)!==Math.round(u.width)&&(t.indexOf("w")>-1&&(o.left+=o.width-u.width),o.width=u.width),Math.round(o.height)!==Math.round(u.height)&&(t.indexOf("n")>-1&&(o.top+=o.height-u.height),o.height=u.height),o}},{key:"_constrainSize",value:function(e,t,n,r){var i=this.option,o=(n?i.maxWidthMoveLeft:i.maxWidth)||Number.MAX_SAFE_INTEGER,a=i.minWidth/this.rectScale.x||e,l=(r?i.maxHeightMoveUp:i.maxHeight)||Number.MAX_SAFE_INTEGER,u=i.minHeight/this.rectScale.y||t;return{width:Math.min(o,Math.max(a,e)),height:Math.min(l,Math.max(u,t))}}},{key:"_applyChange",value:function(){var e=this,t={left:0,top:0,width:0,height:0};if("absolute"===this.el.style.position){var n=this.el.parentElement.getBoundingClientRect(),r=n.left,i=n.top;t={left:r,top:i,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach((function(n){var r=e.temporalRect[n],i="width"===n||"left"===n?e.rectScale.x:"height"===n||"top"===n?e.rectScale.y:1;e.el.style[n]=(r-t[n])*i+"px"})),this):this}},{key:"_removeHandlers",value:function(){return this.handlers.forEach((function(e){return e.destroy()})),delete this.handlers,this}}])}(JVe);function nze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rze(e,t,n){return t=Ch(t),kh(e,ize()?Reflect.construct(t,[],Ch(e).constructor):t.apply(e,n))}function ize(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ize=function(){return!!e})()}function oze(e,t,n,r){var i=QG(Ch(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}tze._originStyleProp=["width","height","position","left","top","opacity","zIndex"];var aze=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(this,t),(n=rze(this,t)).el=e,n.option=r,n.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};var i=r.handle.substring(1),o=e.gridstackNode;return n.dragEls=e.classList.contains(i)?[e]:null!=o&&o.subGrid?[e.querySelector(r.handle)||e]:Array.from(e.querySelectorAll(r.handle)),0===n.dragEls.length&&(n.dragEls=[e]),n._mouseDown=n._mouseDown.bind(n),n._mouseMove=n._mouseMove.bind(n),n._mouseUp=n._mouseUp.bind(n),n._keyEvent=n._keyEvent.bind(n),n.enable(),n}return Oh(t,e),ls(t,[{key:"on",value:function(e,n){oze(t,"on",this)([e,n])}},{key:"off",value:function(e){oze(t,"off",this)([e])}},{key:"enable",value:function(){var e=this;!1!==this.disabled&&(oze(t,"enable",this)([]),this.dragEls.forEach((function(t){t.addEventListener("mousedown",e._mouseDown),VVe&&(t.addEventListener("touchstart",UVe),t.addEventListener("pointerdown",$Ve))})),this.el.classList.remove("ui-draggable-disabled"))}},{key:"disable",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==this.disabled&&(oze(t,"disable",this)([]),this.dragEls.forEach((function(t){t.removeEventListener("mousedown",e._mouseDown),VVe&&(t.removeEventListener("touchstart",UVe),t.removeEventListener("pointerdown",$Ve))})),n||this.el.classList.add("ui-draggable-disabled"))}},{key:"destroy",value:function(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,oze(t,"destroy",this)([])}},{key:"updateOption",value:function(e){var t=this;return Object.keys(e).forEach((function(n){return t.option[n]=e[n]})),this}},{key:"_mouseDown",value:function(e){if(!BVe.mouseHandled)return 0!==e.button||!this.dragEls.find((function(t){return t===e.target}))&&e.target.closest('input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle')||this.option.cancel&&e.target.closest(this.option.cancel)||(this.mouseDownEvent=e,delete this.dragging,delete BVe.dragElement,delete BVe.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),VVe&&(e.target.addEventListener("touchmove",GVe),e.target.addEventListener("touchend",YVe)),e.preventDefault(),document.activeElement&&document.activeElement.blur(),BVe.mouseHandled=!0),!0}},{key:"_callDrag",value:function(e){if(this.dragging){var t=RVe.initEvent(e,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(t,this.ui()),this.triggerEvent("drag",t)}}},{key:"_mouseMove",value:function(e){var t=this,n=this.mouseDownEvent;if(this.lastDrag=e,this.dragging)if(this._dragFollow(e),BVe.pauseDrag){var r=Number.isInteger(BVe.pauseDrag)?BVe.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout((function(){return t._callDrag(e)}),r)}else this._callDrag(e);else if(Math.abs(e.x-n.x)+Math.abs(e.y-n.y)>3){var i;this.dragging=!0,BVe.dragElement=this;var o=null===(i=this.el.gridstackNode)||void 0===i?void 0:i.grid;o?BVe.dropElement=o.el.ddElement.ddDroppable:delete BVe.dropElement,this.helper=this._createHelper(e),this._setupHelperContainmentStyle(),this.dragTransform=RVe.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment),this._setupHelperStyle(e);var a=RVe.initEvent(e,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(a,this.ui()),this.triggerEvent("dragstart",a),document.addEventListener("keydown",this._keyEvent)}return!0}},{key:"_mouseUp",value:function(e){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),VVe&&(e.target.removeEventListener("touchmove",GVe,!0),e.target.removeEventListener("touchend",YVe,!0)),this.dragging){var t,n;delete this.dragging,null===(t=this.el.gridstackNode)||void 0===t||delete t._origRotate,document.removeEventListener("keydown",this._keyEvent),(null===(n=BVe.dropElement)||void 0===n?void 0:n.el)===this.el.parentElement&&delete BVe.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();var r=RVe.initEvent(e,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(r),this.triggerEvent("dragstop",r),BVe.dropElement&&BVe.dropElement.drop(e)}delete this.helper,delete this.mouseDownEvent,delete BVe.dragElement,delete BVe.dropElement,delete BVe.mouseHandled,e.preventDefault()}},{key:"_keyEvent",value:function(e){var t=this.el.gridstackNode;if(null!=t&&t.grid){var n=t.grid;if("Escape"===e.key)t._origRotate&&(t._orig=t._origRotate,delete t._origRotate),n.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent);else if("r"===e.key||"R"===e.key){if(!RVe.canBeRotated(t))return;t._origRotate=t._origRotate||function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nze(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t._orig),delete t._moving,n.setAnimation(!1).rotate(t.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),t._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,t.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",RVe.swap(t._orig,"w","h"),delete t._rect,this._mouseMove(this.lastDrag)}}}},{key:"_createHelper",value:function(e){var n=this,r=this.el;return"function"==typeof this.option.helper?r=this.option.helper(e):"clone"===this.option.helper&&(r=RVe.cloneNode(this.el)),document.body.contains(r)||RVe.appendTo(r,"parent"===this.option.appendTo?this.el.parentElement:this.option.appendTo),r===this.el&&(this.dragElementOriginStyle=t.originStyleProp.map((function(e){return n.el.style[e]}))),r}},{key:"_setupHelperStyle",value:function(e){var t=this;this.helper.classList.add("ui-draggable-dragging");var n=this.helper.style;return n.pointerEvents="none",n.width=this.dragOffset.width+"px",n.height=this.dragOffset.height+"px",n.willChange="left, top",n.position="fixed",this._dragFollow(e),n.transition="none",setTimeout((function(){t.helper&&(n.transition=null)}),0),this}},{key:"_removeHelperStyle",value:function(){var e,n=this;this.helper.classList.remove("ui-draggable-dragging");var r=null===(e=this.helper)||void 0===e?void 0:e.gridstackNode;if((null==r||!r._isAboutToRemove)&&this.dragElementOriginStyle){var i=this.helper,o=this.dragElementOriginStyle.transition||null;i.style.transition=this.dragElementOriginStyle.transition="none",t.originStyleProp.forEach((function(e){return i.style[e]=n.dragElementOriginStyle[e]||null})),setTimeout((function(){return i.style.transition=o}),50)}return delete this.dragElementOriginStyle,this}},{key:"_dragFollow",value:function(e){var t=0,n=0,r=this.helper.style,i=this.dragOffset;r.left=(e.clientX+i.offsetLeft-t)*this.dragTransform.xScale+"px",r.top=(e.clientY+i.offsetTop-n)*this.dragTransform.yScale+"px"}},{key:"_setupHelperContainmentStyle",value:function(){return this.helperContainment=this.helper.parentElement,"fixed"!==this.helper.style.position&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}},{key:"_getDragOffset",value:function(e,t,n){var r=0,i=0;n&&(r=this.dragTransform.xOffset,i=this.dragTransform.yOffset);var o=t.getBoundingClientRect();return{left:o.left,top:o.top,offsetLeft:-e.clientX+o.left-r,offsetTop:-e.clientY+o.top-i,width:o.width*this.dragTransform.xScale,height:o.height*this.dragTransform.yScale}}},{key:"ui",value:function(){var e=this.el.parentElement.getBoundingClientRect(),t=this.helper.getBoundingClientRect();return{position:{top:(t.top-e.top)*this.dragTransform.yScale,left:(t.left-e.left)*this.dragTransform.xScale}}}}])}(JVe);function lze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uze(e,t,n){return t=Ch(t),kh(e,cze()?Reflect.construct(t,[],Ch(e).constructor):t.apply(e,n))}function cze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cze=function(){return!!e})()}function sze(e,t,n,r){var i=QG(Ch(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}aze.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];var dze=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return us(this,t),(n=uze(this,t)).el=e,n.option=r,n._mouseEnter=n._mouseEnter.bind(n),n._mouseLeave=n._mouseLeave.bind(n),n.enable(),n._setupAccept(),n}return Oh(t,e),ls(t,[{key:"on",value:function(e,n){sze(t,"on",this)([e,n])}},{key:"off",value:function(e){sze(t,"off",this)([e])}},{key:"enable",value:function(){!1!==this.disabled&&(sze(t,"enable",this)([]),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),VVe&&(this.el.addEventListener("pointerenter",qVe),this.el.addEventListener("pointerleave",KVe)))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==this.disabled&&(sze(t,"disable",this)([]),this.el.classList.remove("ui-droppable"),e||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),VVe&&(this.el.removeEventListener("pointerenter",qVe),this.el.removeEventListener("pointerleave",KVe)))}},{key:"destroy",value:function(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),sze(t,"destroy",this)([])}},{key:"updateOption",value:function(e){var t=this;return Object.keys(e).forEach((function(n){return t.option[n]=e[n]})),this._setupAccept(),this}},{key:"_mouseEnter",value:function(e){if(BVe.dragElement&&this._canDrop(BVe.dragElement.el)){e.preventDefault(),e.stopPropagation(),BVe.dropElement&&BVe.dropElement!==this&&BVe.dropElement._mouseLeave(e,!0),BVe.dropElement=this;var t=RVe.initEvent(e,{target:this.el,type:"dropover"});this.option.over&&this.option.over(t,this._ui(BVe.dragElement)),this.triggerEvent("dropover",t),this.el.classList.add("ui-droppable-over")}}},{key:"_mouseLeave",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(BVe.dragElement&&BVe.dropElement===this){e.preventDefault(),e.stopPropagation();var n=RVe.initEvent(e,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(n,this._ui(BVe.dragElement)),this.triggerEvent("dropout",n),BVe.dropElement===this&&(delete BVe.dropElement,!t)){for(var r,i=this.el.parentElement;!r&&i;){var o;r=null===(o=i.ddElement)||void 0===o?void 0:o.ddDroppable,i=i.parentElement}r&&r._mouseEnter(e)}}}},{key:"drop",value:function(e){e.preventDefault();var t=RVe.initEvent(e,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(t,this._ui(BVe.dragElement)),this.triggerEvent("drop",t)}},{key:"_canDrop",value:function(e){return e&&(!this.accept||this.accept(e))}},{key:"_setupAccept",value:function(){var e=this;return this.option.accept?("string"==typeof this.option.accept?this.accept=function(t){return t.classList.contains(e.option.accept)||t.matches(e.option.accept)}:this.accept=this.option.accept,this):this}},{key:"_ui",value:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lze(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({draggable:e.el},e.ui())}}])}(JVe),fze=function(){function e(t){us(this,e),this.el=t}return ls(e,[{key:"on",value:function(e,t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.on(e,t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.on(e,t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.on(e,t),this}},{key:"off",value:function(e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.off(e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.off(e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.off(e),this}},{key:"setupDraggable",value:function(e){return this.ddDraggable?this.ddDraggable.updateOption(e):this.ddDraggable=new aze(this.el,e),this}},{key:"cleanDraggable",value:function(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}},{key:"setupResizable",value:function(e){return this.ddResizable?this.ddResizable.updateOption(e):this.ddResizable=new tze(this.el,e),this}},{key:"cleanResizable",value:function(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}},{key:"setupDroppable",value:function(e){return this.ddDroppable?this.ddDroppable.updateOption(e):this.ddDroppable=new dze(this.el,e),this}},{key:"cleanDroppable",value:function(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}],[{key:"init",value:function(t){return t.ddElement||(t.ddElement=new e(t)),t.ddElement}}])}();function hze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hze(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vze=function(){return ls((function e(){us(this,e)}),[{key:"resizable",value:function(e,t,n,r){return this._getDDElements(e).forEach((function(e){if("disable"===t||"enable"===t)e.ddResizable&&e.ddResizable[t]();else if("destroy"===t)e.ddResizable&&e.cleanResizable();else if("option"===t)e.setupResizable(os({},n,r));else{var i=e.el.gridstackNode.grid,o=e.el.getAttribute("gs-resize-handles")||i.opts.resizable.handles||"e,s,se";"all"===o&&(o="n,e,s,w,se,sw,ne,nw");var a=!i.opts.alwaysShowResizeHandle;e.setupResizable(pze(pze(pze({},i.opts.resizable),{handles:o,autoHide:a}),{start:t.start,stop:t.stop,resize:t.resize}))}})),this}},{key:"draggable",value:function(e,t,n,r){return this._getDDElements(e).forEach((function(e){if("disable"===t||"enable"===t)e.ddDraggable&&e.ddDraggable[t]();else if("destroy"===t)e.ddDraggable&&e.cleanDraggable();else if("option"===t)e.setupDraggable(os({},n,r));else{var i=e.el.gridstackNode.grid;e.setupDraggable(pze(pze({},i.opts.draggable),{start:t.start,stop:t.stop,drag:t.drag}))}})),this}},{key:"dragIn",value:function(e,t){return this._getDDElements(e).forEach((function(e){return e.setupDraggable(t)})),this}},{key:"droppable",value:function(e,t,n,r){return"function"!=typeof t.accept||t._accept||(t._accept=t.accept,t.accept=function(e){return t._accept(e)}),this._getDDElements(e).forEach((function(e){"disable"===t||"enable"===t?e.ddDroppable&&e.ddDroppable[t]():"destroy"===t?e.ddDroppable&&e.cleanDroppable():"option"===t?e.setupDroppable(os({},n,r)):e.setupDroppable(t)})),this}},{key:"isDroppable",value:function(e){return!(!(e&&e.ddElement&&e.ddElement.ddDroppable)||e.ddElement.ddDroppable.disabled)}},{key:"isDraggable",value:function(e){return!(!(e&&e.ddElement&&e.ddElement.ddDraggable)||e.ddElement.ddDraggable.disabled)}},{key:"isResizable",value:function(e){return!(!(e&&e.ddElement&&e.ddElement.ddResizable)||e.ddElement.ddResizable.disabled)}},{key:"on",value:function(e,t,n){return this._getDDElements(e).forEach((function(e){return e.on(t,(function(e){n(e,BVe.dragElement?BVe.dragElement.el:e.target,BVe.dragElement?BVe.dragElement.helper:null)}))})),this}},{key:"off",value:function(e,t){return this._getDDElements(e).forEach((function(e){return e.off(t)})),this}},{key:"_getDDElements",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=RVe.getElements(e);if(!n.length)return[];var r=n.map((function(e){return e.ddElement||(t?fze.init(e):null)}));return t||r.filter((function(e){return e})),r}}])}();function gze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gze(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yze=new vze,bze=function(){function e(t){var n,r,i,o,a=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(this,e),this.el=t,this.opts=l,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},t.gridstack=this,l=l||{},t.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),l.row&&(l.minRow=l.maxRow=l.row,delete l.row);var u=RVe.toNumber(t.getAttribute("gs-row"));"auto"===l.column&&delete l.column,void 0!==l.alwaysShowResizeHandle&&(l._alwaysShowResizeHandle=l.alwaysShowResizeHandle);var c=null===(n=l.columnOpts)||void 0===n?void 0:n.breakpoints,s=l;if(s.oneColumnModeDomSort&&(delete s.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),s.oneColumnSize||!1===s.disableOneColumnMode){var d=s.oneColumnSize||768;delete s.oneColumnSize,delete s.disableOneColumnMode,l.columnOpts=l.columnOpts||{};var f=(c=l.columnOpts.breakpoints=l.columnOpts.breakpoints||[]).find((function(e){return 1===e.c}));f?f.w=d:(f={c:1,w:d},c.push(f,{c:12,w:d+1}))}var h,p=l.columnOpts;p&&(p.columnWidth||null!==(h=p.breakpoints)&&void 0!==h&&h.length?p.columnMax=p.columnMax||12:(delete l.columnOpts,c=void 0));(null===(r=c)||void 0===r?void 0:r.length)>1&&c.sort((function(e,t){return(t.w||0)-(e.w||0)}));var v=mze(mze({},RVe.cloneDeep(NVe)),{},{column:RVe.toNumber(t.getAttribute("gs-column"))||NVe.column,minRow:u||(RVe.toNumber(t.getAttribute("gs-min-row"))||NVe.minRow),maxRow:u||(RVe.toNumber(t.getAttribute("gs-max-row"))||NVe.maxRow),staticGrid:RVe.toBool(t.getAttribute("gs-static"))||NVe.staticGrid,draggable:{handle:(l.handleClass?"."+l.handleClass:l.handle?l.handle:"")||NVe.draggable.handle},removableOptions:{accept:l.itemClass||NVe.removableOptions.accept,decline:NVe.removableOptions.decline}});t.getAttribute("gs-animate")&&(v.animate=RVe.toBool(t.getAttribute("gs-animate"))),l=RVe.defaults(l,v),this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+l.column),"auto"===l.rtl&&(l.rtl="rtl"===t.style.direction),l.rtl&&this.el.classList.add("grid-stack-rtl");var g=null===(i=this.el.parentElement)||void 0===i?void 0:i.parentElement,m=null!=g&&g.classList.contains(NVe.itemClass)?g.gridstackNode:void 0;m&&(m.subGrid=this,this.parentGridItem=m,this.el.classList.add("grid-stack-nested"),m.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight="auto"===l.cellHeight,this._isAutoCellHeight||"initial"===l.cellHeight?this.cellHeight(void 0,!1):("number"==typeof l.cellHeight&&l.cellHeightUnit&&l.cellHeightUnit!==NVe.cellHeightUnit&&(l.cellHeight=l.cellHeight+l.cellHeightUnit,delete l.cellHeightUnit),this.cellHeight(l.cellHeight,!1)),"mobile"===l.alwaysShowResizeHandle&&(l.alwaysShowResizeHandle=VVe),this._styleSheetClass="gs-id-"+FVe._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();var y=l.engineClass||e.engineClass||FVe;if(this.engine=new y({column:this.getColumn(),float:l.float,maxRow:l.maxRow,onChange:function(e){var t=0;a.engine.nodes.forEach((function(e){t=Math.max(t,e.y+e.h)})),e.forEach((function(e){var t=e.el;t&&(e._removeDOM?(t&&t.remove(),delete e._removeDOM):a._writePosAttr(t,e))})),a._updateStyles(!1,t)}}),this._updateStyles(!1,0),l.auto&&(this.batchUpdate(),this.engine._loading=!0,this.getGridItems().forEach((function(e){return a._prepareElement(e)})),delete this.engine._loading,this.batchUpdate(!1)),l.children){var b=l.children;delete l.children,b.length&&this.load(b)}this.setAnimation(),l.subGridDynamic&&!BVe.pauseDrag&&(BVe.pauseDrag=!0),void 0!==(null===(o=l.draggable)||void 0===o?void 0:o.pause)&&(BVe.pauseDrag=l.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}return ls(e,[{key:"placeholder",get:function(){if(!this._placeholder){var e=document.createElement("div");e.className="placeholder-content",this.opts.placeholderText&&(e.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,NVe.itemClass,this.opts.itemClass),this.placeholder.appendChild(e)}return this._placeholder}},{key:"addWidget",value:function(t,n){var r,i,o;if("string"==typeof t){var a=document.implementation.createHTMLDocument("");a.body.innerHTML=t,r=a.body.children[0]}else if(0===arguments.length||1===arguments.length&&(void 0!==(o=t).el||void 0!==o.x||void 0!==o.y||void 0!==o.w||void 0!==o.h||void 0!==o.content)){var l;if(null!==(l=i=n=t)&&void 0!==l&&l.el)r=i.el;else if(e.addRemoveCB)r=e.addRemoveCB(this.el,n,!0,!1);else{var u,c=(null===(u=n)||void 0===u?void 0:u.content)||"",s=document.implementation.createHTMLDocument("");s.body.innerHTML='<div class="grid-stack-item '.concat(this.opts.itemClass||"",'"><div class="grid-stack-item-content">').concat(c,"</div></div>"),r=s.body.children[0]}}else r=t;if(r){if((i=r.gridstackNode)&&r.parentElement===this.el&&this.engine.nodes.find((function(e){return e._id===i._id})))return r;var d=this._readAttr(r);return n=RVe.cloneDeep(n)||{},RVe.defaults(n,d),i=this.engine.prepareNode(n),this._writeAttr(r,n),this.el.appendChild(r),this.makeWidget(r,n),r}}},{key:"makeSubGrid",value:function(t,n,r){var i,o,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=t.gridstackNode;if(l||(l=this.makeWidget(t).gridstackNode),null!==(i=l.subGrid)&&void 0!==i&&i.el)return l.subGrid;for(var u,c=this;c&&!o;){var s,d;o=null===(s=c.opts)||void 0===s?void 0:s.subGridOpts,c=null===(d=c.parentGridItem)||void 0===d?void 0:d.grid}n=RVe.cloneDeep(mze(mze({},o||{}),{},{children:void 0},n||l.subGridOpts||{})),l.subGridOpts=n,"auto"===n.column&&(u=!0,n.column=Math.max(l.w||1,(null==r?void 0:r.w)||1),delete n.columnOpts);var f,h,p=l.el.querySelector(".grid-stack-item-content");if(a){if(this._removeDD(l.el),h=mze(mze({},l),{},{x:0,y:0}),RVe.removeInternalForSave(h),delete h.subGridOpts,l.content&&(h.content=l.content,delete l.content),e.addRemoveCB)f=e.addRemoveCB(this.el,h,!0,!1);else{var v=document.implementation.createHTMLDocument("");v.body.innerHTML='<div class="grid-stack-item"></div>',(f=v.body.children[0]).appendChild(p),v.body.innerHTML='<div class="grid-stack-item-content"></div>',p=v.body.children[0],l.el.appendChild(p)}this._prepareDragDropByNode(l)}if(r){var g=u?n.column:l.w,m=l.h+r.h,y=l.el.style;y.transition="none",this.update(l.el,{w:g,h:m}),setTimeout((function(){return y.transition=null}))}var b=l.subGrid=e.addGrid(p,n);return null!=r&&r._moving&&(b._isTemp=!0),u&&(b._autoColumn=!0),a&&b.addWidget(f,h),r&&(r._moving?window.setTimeout((function(){return RVe.simulateMouseEvent(r._event,"mouseenter",b.el)}),0):b.addWidget(l.el,l)),b}},{key:"removeAsSubGrid",value:function(e){var t,n=this,r=null===(t=this.parentGridItem)||void 0===t?void 0:t.grid;r&&(r.batchUpdate(),r.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach((function(e){e.x+=n.parentGridItem.x,e.y+=n.parentGridItem.y,r.addWidget(e.el,e)})),r.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,e&&window.setTimeout((function(){return RVe.simulateMouseEvent(e._event,"mouseenter",r.el)}),0))}},{key:"save",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.saveCB,i=this.engine.save(t,r);if(i.forEach((function(e){if(t&&e.el&&!e.subGrid&&!r){var i=e.el.querySelector(".grid-stack-item-content");e.content=i?i.innerHTML:void 0,e.content||delete e.content}else{var o;if(t||r||delete e.content,null!==(o=e.subGrid)&&void 0!==o&&o.el){var a=e.subGrid.save(t,n,r);e.subGridOpts=n?a:{children:a},delete e.subGrid}}delete e.el})),n){var o=RVe.cloneDeep(this.opts);o.marginBottom===o.marginTop&&o.marginRight===o.marginLeft&&o.marginTop===o.marginRight&&(o.margin=o.marginTop,delete o.marginTop,delete o.marginRight,delete o.marginBottom,delete o.marginLeft),o.rtl===("rtl"===this.el.style.direction)&&(o.rtl="auto"),this._isAutoCellHeight&&(o.cellHeight="auto"),this._autoColumn&&(o.column="auto");var a=o._alwaysShowResizeHandle;return delete o._alwaysShowResizeHandle,void 0!==a?o.alwaysShowResizeHandle=a:delete o.alwaysShowResizeHandle,RVe.removeInternalAndSame(o,NVe),o.children=i,o}return i}},{key:"load",value:function(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.addRemoveCB||!0;t=RVe.cloneDeep(t);var o=this.getColumn();t.forEach((function(e){e.w=e.w||1,e.h=e.h||1})),t=RVe.sort(t);var a=0;t.forEach((function(e){a=Math.max(a,(e.x||0)+e.w)})),a>o&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(t,a,!0));var l=e.addRemoveCB;"function"==typeof i&&(e.addRemoveCB=i);var u=[];this.batchUpdate();var c=!this.engine.nodes.length;(c&&this.setAnimation(!1),!c&&i)&&ts(this.engine.nodes).forEach((function(n){n.id&&(RVe.find(t,n.id)||(e.addRemoveCB&&e.addRemoveCB(r.el,n,!1,!1),u.push(n),r.removeWidget(n.el,!0,!1)))}));this.engine._loading=!0;var s=[];return this.engine.nodes=this.engine.nodes.filter((function(e){return!RVe.find(t,e.id)||(s.push(e),!1)})),t.forEach((function(e){var t,n=RVe.find(s,e.id);if(n){if(RVe.shouldSizeToContent(n)&&(e.h=n.h),r.engine.nodeBoundFix(e),(e.autoPosition||void 0===e.x||void 0===e.y)&&(e.w=e.w||n.w,e.h=e.h||n.h,r.engine.findEmptyPosition(e)),r.engine.nodes.push(n),RVe.samePos(n,e)&&r.moveNode(n,mze(mze({},e),{},{forceCollide:!0})),r.update(n.el,e),null!==(t=e.subGridOpts)&&void 0!==t&&t.children){var o=n.el.querySelector(".grid-stack");o&&o.gridstack&&o.gridstack.load(e.subGridOpts.children)}}else i&&r.addWidget(e)})),delete this.engine._loading,this.engine.removedNodes=u,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,l?e.addRemoveCB=l:delete e.addRemoveCB,c&&null!==(n=this.opts)&&void 0!==n&&n.animate&&this.setAnimation(this.opts.animate,!0),this}},{key:"batchUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.engine.batchUpdate(e),e||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}},{key:"getCellHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.opts.cellHeight&&"auto"!==this.opts.cellHeight&&(!e||!this.opts.cellHeightUnit||"px"===this.opts.cellHeightUnit))return this.opts.cellHeight;if("rem"===this.opts.cellHeightUnit)return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if("em"===this.opts.cellHeightUnit)return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if("cm"===this.opts.cellHeightUnit)return this.opts.cellHeight*(96/2.54);if("mm"===this.opts.cellHeightUnit)return this.opts.cellHeight*(96/2.54)/10;var t=this.el.querySelector("."+this.opts.itemClass);if(t){var n=RVe.toNumber(t.getAttribute("gs-h"))||1;return Math.round(t.offsetHeight/n)}var r=parseInt(this.el.getAttribute("gs-current-row"));return r?Math.round(this.el.getBoundingClientRect().height/r):this.opts.cellHeight}},{key:"cellHeight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&void 0!==e&&this._isAutoCellHeight!==("auto"===e)&&(this._isAutoCellHeight="auto"===e,this._updateResizeEvent()),"initial"!==e&&"auto"!==e||(e=void 0),void 0===e){var n=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;e=this.cellWidth()+n}var r=RVe.parseHeight(e);return this.opts.cellHeightUnit===r.unit&&this.opts.cellHeight===r.h||(this.opts.cellHeightUnit=r.unit,this.opts.cellHeight=r.h,this.resizeToContentCheck(),t&&this._updateStyles(!0)),this}},{key:"cellWidth",value:function(){return this._widthOrContainer()/this.getColumn()}},{key:"_widthOrContainer",value:function(){var e;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=this.opts.columnOpts)&&void 0!==e&&e.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}},{key:"checkDynamicColumn",value:function(){var e,t=this.opts.columnOpts;if(!t||!t.columnWidth&&(null===(e=t.breakpoints)||void 0===e||!e.length))return!1;var n=this.getColumn(),r=n,i=this._widthOrContainer(!0);if(t.columnWidth)r=Math.min(Math.round(i/t.columnWidth)||1,t.columnMax);else{r=t.columnMax;for(var o=0;o<t.breakpoints.length&&i<=t.breakpoints[o].w;)r=t.breakpoints[o++].c||n}if(r!==n){var a,l=null===(a=t.breakpoints)||void 0===a?void 0:a.find((function(e){return e.c===r}));return this.column(r,(null==l?void 0:l.layout)||t.layout),!0}return!1}},{key:"compact",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"compact",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.engine.compact(e,t),this._triggerChangeEvent(),this}},{key:"column",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"moveScale";if(!e||e<1||this.opts.column===e)return this;var n=this.getColumn();return this.opts.column=e,this.engine?(this.engine.column=e,this.el.classList.remove("gs-"+n),this.el.classList.add("gs-"+e),this.engine.columnChanged(n,e,t),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this}},{key:"getColumn",value:function(){return this.opts.column}},{key:"getGridItems",value:function(){var e=this;return Array.from(this.el.children).filter((function(t){return t.matches("."+e.opts.itemClass)&&!t.matches("."+e.opts.placeholderClass)}))}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),e?this.el.parentNode.removeChild(this.el):(this.removeAll(e),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}},{key:"float",value:function(e){return this.opts.float!==e&&(this.opts.float=this.engine.float=e,this._triggerChangeEvent()),this}},{key:"getFloat",value:function(){return this.engine.float}},{key:"getCellFromPixel",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.el.getBoundingClientRect();t=n?{top:r.top+document.documentElement.scrollTop,left:r.left}:{top:this.el.offsetTop,left:this.el.offsetLeft};var i=e.left-t.left,o=e.top-t.top,a=r.width/this.getColumn(),l=r.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(i/a),y:Math.floor(o/l)}}},{key:"getRow",value:function(){return Math.max(this.engine.getRow(),this.opts.minRow)}},{key:"isAreaEmpty",value:function(e,t,n,r){return this.engine.isAreaEmpty(e,t,n,r)}},{key:"makeWidget",value:function(t,n){var r=e.getElement(t);this._prepareElement(r,!0,n);var i=r.gridstackNode;return this._updateContainerHeight(),i.subGridOpts&&this.makeSubGrid(r,i.subGridOpts,void 0,!1),1===this.opts.column&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,r}},{key:"on",value:function(e,t){var n=this;if(-1!==e.indexOf(" "))return e.split(" ").forEach((function(e){return n.on(e,t)})),this;if("change"===e||"added"===e||"removed"===e||"enable"===e||"disable"===e){var r="enable"===e||"disable"===e;this._gsEventHandler[e]=r?function(e){return t(e)}:function(e){return t(e,e.detail)},this.el.addEventListener(e,this._gsEventHandler[e])}else"drag"===e||"dragstart"===e||"dragstop"===e||"resizestart"===e||"resize"===e||"resizestop"===e||"dropped"===e||"resizecontent"===e?this._gsEventHandler[e]=t:console.error("GridStack.on("+e+") event not supported");return this}},{key:"off",value:function(e){var t=this;return-1!==e.indexOf(" ")?(e.split(" ").forEach((function(e){return t.off(e)})),this):("change"!==e&&"added"!==e&&"removed"!==e&&"enable"!==e&&"disable"!==e||this._gsEventHandler[e]&&this.el.removeEventListener(e,this._gsEventHandler[e]),delete this._gsEventHandler[e],this)}},{key:"offAll",value:function(){var e=this;return Object.keys(this._gsEventHandler).forEach((function(t){return e.off(t)})),this}},{key:"removeWidget",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.getElements(t).forEach((function(t){if(!t.parentElement||t.parentElement===n.el){var o=t.gridstackNode;o||(o=n.engine.nodes.find((function(e){return t===e.el}))),o&&(r&&e.addRemoveCB&&e.addRemoveCB(n.el,o,!1,!1),delete t.gridstackNode,n._removeDD(t),n.engine.removeNode(o,r,i),r&&t.parentElement&&t.remove())}})),i&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}},{key:"removeAll",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.engine.nodes.forEach((function(r){n&&e.addRemoveCB&&e.addRemoveCB(t.el,r,!1,!1),delete r.el.gridstackNode,t.opts.staticGrid||t._removeDD(r.el)})),this.engine.removeAll(n,r),r&&this._triggerRemoveEvent(),this}},{key:"setAnimation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.animate;return(arguments.length>1?arguments[1]:void 0)?setTimeout((function(){e.opts&&e.setAnimation(t)})):t?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}},{key:"hasAnimationCSS",value:function(){return this.el.classList.contains("grid-stack-animate")}},{key:"setStatic",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!!this.opts.staticGrid===e||(e?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach((function(i){t._prepareDragDropByNode(i),i.subGrid&&r&&i.subGrid.setStatic(e,n,r)})),n&&this._setStaticClass()),this}},{key:"update",value:function(t,n){var r=this;if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");var i=arguments,o=1;return n={x:i[o++],y:i[o++],w:i[o++],h:i[o++]},this.update(t,n)}return e.getElements(t).forEach((function(e){var t=null==e?void 0:e.gridstackNode;if(t){var i=RVe.cloneDeep(n);r.engine.nodeBoundFix(i),delete i.autoPosition,delete i.id;var o,a=["x","y","w","h"];if(a.some((function(e){return void 0!==i[e]&&i[e]!==t[e]}))&&(o={},a.forEach((function(e){o[e]=void 0!==i[e]?i[e]:t[e],delete i[e]}))),!o&&(i.minW||i.minH||i.maxW||i.maxH)&&(o={}),void 0!==i.content){var l,u=e.querySelector(".grid-stack-item-content");if(u&&u.innerHTML!==i.content)u.innerHTML=i.content,null!==(l=t.subGrid)&&void 0!==l&&l.el&&(u.appendChild(t.subGrid.el),t.subGrid.opts.styleInHead||t.subGrid._updateStyles(!0));delete i.content}var c=!1,s=!1;for(var d in i)"_"!==d[0]&&t[d]!==i[d]&&(t[d]=i[d],c=!0,s=s||!r.opts.staticGrid&&("noResize"===d||"noMove"===d||"locked"===d));if(RVe.sanitizeMinMax(t),o){var f=void 0!==o.w&&o.w!==t.w;r.moveNode(t,o),r.resizeToContentCheck(f,t),delete t._orig}(o||c)&&r._writeAttr(e,t),s&&r._prepareDragDropByNode(t)}})),this}},{key:"moveNode",value:function(e,t){var n=e._updating;n||this.engine.cleanNodes().beginUpdate(e),this.engine.moveNode(e,t),this._updateContainerHeight(),n||(this._triggerChangeEvent(),this.engine.endUpdate())}},{key:"resizeToContent",value:function(t){var n;if(t&&(t.classList.remove("size-to-content-max"),t.clientHeight)){var r=t.gridstackNode;if(r){var i=r.grid;if(i&&t.parentElement===i.el){var o=i.getCellHeight(!0);if(o){var a,l=r.h?r.h*o:t.clientHeight;if(r.resizeToContentParent&&(a=t.querySelector(r.resizeToContentParent)),a||(a=t.querySelector(e.resizeToContentParent)),a){var u,c=t.clientHeight-a.clientHeight,s=r.h?r.h*o-c:a.clientHeight;if(r.subGrid)u=r.subGrid.getRow()*r.subGrid.getCellHeight(!0);else{if(null!==(n=r.subGridOpts)&&void 0!==n&&null!==(n=n.children)&&void 0!==n&&n.length)return;var d=a.firstElementChild;if(!d)return void console.error("Error: GridStack.resizeToContent() widget id:".concat(r.id," '").concat(e.resizeToContentParent,"'.firstElementChild is null, make sure to have a div like container. Skipping sizing."));u=d.getBoundingClientRect().height||s}if(s!==u){l+=u-s;var f=Math.ceil(l/o),h=Number.isInteger(r.sizeToContent)?r.sizeToContent:0;h&&f>h&&(f=h,t.classList.add("size-to-content-max")),r.minH&&f<r.minH?f=r.minH:r.maxH&&f>r.maxH&&(f=r.maxH),f!==r.h&&(i._ignoreLayoutsNodeChange=!0,i.moveNode(r,{h:f}),delete i._ignoreLayoutsNodeChange)}}}}}}}},{key:"resizeToContentCBCheck",value:function(t){e.resizeToContentCB?e.resizeToContentCB(t):this.resizeToContent(t)}},{key:"rotate",value:function(t,n){var r=this;return e.getElements(t).forEach((function(e){var t=e.gridstackNode;if(RVe.canBeRotated(t)){var i={w:t.h,h:t.w,minH:t.minW,minW:t.minH,maxH:t.maxW,maxW:t.maxH};if(n){var o=n.left>0?Math.floor(n.left/r.cellWidth()):0,a=n.top>0?Math.floor(n.top/r.opts.cellHeight):0;i.x=t.x+o-(t.h-(a+1)),i.y=t.y+a-o}Object.keys(i).forEach((function(e){void 0===i[e]&&delete i[e]}));var l=t._orig;r.update(e,i),t._orig=l}})),this}},{key:"margin",value:function(e){if(!("string"==typeof e&&e.split(" ").length>1)){var t=RVe.parseHeight(e);if(this.opts.marginUnit===t.unit&&this.opts.margin===t.h)return}return this.opts.margin=e,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}},{key:"getMargin",value:function(){return this.opts.margin}},{key:"willItFit",value:function(e){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");var t=arguments,n=0,r={x:t[n++],y:t[n++],w:t[n++],h:t[n++],autoPosition:t[n++]};return this.willItFit(r)}return this.engine.willItFit(e)}},{key:"_triggerChangeEvent",value:function(){if(this.engine.batchMode)return this;var e=this.engine.getDirtyNodes(!0);return e&&e.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(e),this._triggerEvent("change",e)),this.engine.saveInitial(),this}},{key:"_triggerAddEvent",value:function(){var e;if(this.engine.batchMode)return this;if(null!==(e=this.engine.addedNodes)&&void 0!==e&&e.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach((function(e){delete e._dirty}));var t=ts(this.engine.addedNodes);this.engine.addedNodes=[],this._triggerEvent("added",t)}return this}},{key:"_triggerRemoveEvent",value:function(){var e;if(this.engine.batchMode)return this;if(null!==(e=this.engine.removedNodes)&&void 0!==e&&e.length){var t=ts(this.engine.removedNodes);this.engine.removedNodes=[],this._triggerEvent("removed",t)}return this}},{key:"_triggerEvent",value:function(e,t){var n=t?new CustomEvent(e,{bubbles:!1,detail:t}):new Event(e);return this.el.dispatchEvent(n),this}},{key:"_removeStylesheet",value:function(){if(this._styles){var e=this.opts.styleInHead?void 0:this.el.parentNode;RVe.removeStylesheet(this._styleSheetClass,e),delete this._styles}return this}},{key:"_updateStyles",value:function(){var e=arguments.length>1?arguments[1]:void 0;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this._removeStylesheet(),void 0===e&&(e=this.getRow()),this._updateContainerHeight(),0===this.opts.cellHeight)return this;var t=this.opts.cellHeight,n=this.opts.cellHeightUnit,r=".".concat(this._styleSheetClass," > .").concat(this.opts.itemClass);if(!this._styles){var i=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=RVe.createStylesheet(this._styleSheetClass,i,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,RVe.addCSSRule(this._styles,r,"height: ".concat(t).concat(n));var o=this.opts.marginTop+this.opts.marginUnit,a=this.opts.marginBottom+this.opts.marginUnit,l=this.opts.marginRight+this.opts.marginUnit,u=this.opts.marginLeft+this.opts.marginUnit,c="".concat(r," > .grid-stack-item-content"),s=".".concat(this._styleSheetClass," > .grid-stack-placeholder > .placeholder-content");RVe.addCSSRule(this._styles,c,"top: ".concat(o,"; right: ").concat(l,"; bottom: ").concat(a,"; left: ").concat(u,";")),RVe.addCSSRule(this._styles,s,"top: ".concat(o,"; right: ").concat(l,"; bottom: ").concat(a,"; left: ").concat(u,";")),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-n"),"top: ".concat(o,";")),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-s"),"bottom: ".concat(a)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-ne"),"right: ".concat(l)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-e"),"right: ".concat(l)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-se"),"right: ".concat(l,"; bottom: ").concat(a)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-nw"),"left: ".concat(u)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-w"),"left: ".concat(u)),RVe.addCSSRule(this._styles,"".concat(r," > .ui-resizable-sw"),"left: ".concat(u,"; bottom: ").concat(a))}if((e=e||this._styles._max)>this._styles._max){for(var d=function(e){return t*e+n},f=this._styles._max+1;f<=e;f++)RVe.addCSSRule(this._styles,"".concat(r,'[gs-y="').concat(f,'"]'),"top: ".concat(d(f))),RVe.addCSSRule(this._styles,"".concat(r,'[gs-h="').concat(f+1,'"]'),"height: ".concat(d(f+1)));this._styles._max=e}return this}},{key:"_updateContainerHeight",value:function(){if(!this.engine||this.engine.batchMode)return this;var e=this.parentGridItem,t=this.getRow()+this._extraDragRow,n=this.opts.cellHeight,r=this.opts.cellHeightUnit;if(!n)return this;if(!e){var i=RVe.parseHeight(getComputedStyle(this.el).minHeight);if(i.h>0&&i.unit===r){var o=Math.floor(i.h/n);t<o&&(t=o)}}return this.el.setAttribute("gs-current-row",String(t)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),t&&(this.el.style[e?"minHeight":"height"]=t*n+r),e&&!e.grid.engine.batchMode&&RVe.shouldSizeToContent(e)&&e.grid.resizeToContentCBCheck(e.el),this}},{key:"_prepareElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;n=n||this._readAttr(e),e.gridstackNode=n,n.el=e,n.grid=this,n=this.engine.addNode(n,t),this._writeAttr(e,n),e.classList.add(NVe.itemClass,this.opts.itemClass);var r=RVe.shouldSizeToContent(n);return r?e.classList.add("size-to-content"):e.classList.remove("size-to-content"),r&&this.resizeToContentCheck(!1,n),this._prepareDragDropByNode(n),this}},{key:"_writePosAttr",value:function(e,t){return void 0!==t.x&&null!==t.x&&e.setAttribute("gs-x",String(t.x)),void 0!==t.y&&null!==t.y&&e.setAttribute("gs-y",String(t.y)),t.w>1?e.setAttribute("gs-w",String(t.w)):e.removeAttribute("gs-w"),t.h>1?e.setAttribute("gs-h",String(t.h)):e.removeAttribute("gs-h"),this}},{key:"_writeAttr",value:function(e,t){if(!t)return this;this._writePosAttr(e,t);var n={autoPosition:"gs-auto-position",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(var r in n)t[r]?e.setAttribute(n[r],String(t[r])):e.removeAttribute(n[r]);return this}},{key:"_readAttr",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={};for(var r in n.x=RVe.toNumber(e.getAttribute("gs-x")),n.y=RVe.toNumber(e.getAttribute("gs-y")),n.w=RVe.toNumber(e.getAttribute("gs-w")),n.h=RVe.toNumber(e.getAttribute("gs-h")),n.autoPosition=RVe.toBool(e.getAttribute("gs-auto-position")),n.noResize=RVe.toBool(e.getAttribute("gs-no-resize")),n.noMove=RVe.toBool(e.getAttribute("gs-no-move")),n.locked=RVe.toBool(e.getAttribute("gs-locked")),n.id=e.getAttribute("gs-id"),n.maxW=RVe.toNumber(e.getAttribute("gs-max-w")),n.minW=RVe.toNumber(e.getAttribute("gs-min-w")),n.maxH=RVe.toNumber(e.getAttribute("gs-max-h")),n.minH=RVe.toNumber(e.getAttribute("gs-min-h")),t&&(1===n.w&&e.removeAttribute("gs-w"),1===n.h&&e.removeAttribute("gs-h"),n.maxW&&e.removeAttribute("gs-max-w"),n.minW&&e.removeAttribute("gs-min-w"),n.maxH&&e.removeAttribute("gs-max-h"),n.minH&&e.removeAttribute("gs-min-h")),n){if(!n.hasOwnProperty(r))return;n[r]||0===n[r]||delete n[r]}return n}},{key:"_setStaticClass",value:function(){var e,t,n=["grid-stack-static"];this.opts.staticGrid?((e=this.el.classList).add.apply(e,n),this.el.setAttribute("gs-static","true")):((t=this.el.classList).remove.apply(t,n),this.el.removeAttribute("gs-static"));return this}},{key:"onResize",value:function(){var e;if(null!==(e=this.el)&&void 0!==e&&e.clientWidth&&this.prevWidth!==this.el.clientWidth){this.prevWidth=this.el.clientWidth,this.batchUpdate();var t=!1;return this._autoColumn&&this.parentGridItem?this.opts.column!==this.parentGridItem.w&&(this.column(this.parentGridItem.w,"none"),t=!0):t=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach((function(e){e.subGrid&&e.subGrid.onResize()})),this._skipInitialResize||this.resizeToContentCheck(t),delete this._skipInitialResize,this.batchUpdate(!1),this}}},{key:"resizeToContentCheck",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this.engine){if(t&&this.hasAnimationCSS())return setTimeout((function(){return e.resizeToContentCheck(!1,n)}),310);if(n)RVe.shouldSizeToContent(n)&&this.resizeToContentCBCheck(n.el);else if(this.engine.nodes.some((function(e){return RVe.shouldSizeToContent(e)}))){var r=ts(this.engine.nodes);this.batchUpdate(),r.forEach((function(t){RVe.shouldSizeToContent(t)&&e.resizeToContentCBCheck(t.el)})),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,n?[n]:this.engine.nodes)}}},{key:"_updateResizeEvent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!this.parentGridItem&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find((function(e){return e.sizeToContent})));return t||!n||this.resizeObserver?!t&&n||!this.resizeObserver||(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle):(this._sizeThrottle=RVe.throttle((function(){return e.onResize()}),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver((function(){return e._sizeThrottle()})),this.resizeObserver.observe(this.el),this._skipInitialResize=!0),this}},{key:"_initMargin",value:function(){var e,t=0,n=[];return"string"==typeof this.opts.margin&&(n=this.opts.margin.split(" ")),2===n.length?(this.opts.marginTop=this.opts.marginBottom=n[0],this.opts.marginLeft=this.opts.marginRight=n[1]):4===n.length?(this.opts.marginTop=n[0],this.opts.marginRight=n[1],this.opts.marginBottom=n[2],this.opts.marginLeft=n[3]):(e=RVe.parseHeight(this.opts.margin),this.opts.marginUnit=e.unit,t=this.opts.margin=e.h),void 0===this.opts.marginTop?this.opts.marginTop=t:(e=RVe.parseHeight(this.opts.marginTop),this.opts.marginTop=e.h,delete this.opts.margin),void 0===this.opts.marginBottom?this.opts.marginBottom=t:(e=RVe.parseHeight(this.opts.marginBottom),this.opts.marginBottom=e.h,delete this.opts.margin),void 0===this.opts.marginRight?this.opts.marginRight=t:(e=RVe.parseHeight(this.opts.marginRight),this.opts.marginRight=e.h,delete this.opts.margin),void 0===this.opts.marginLeft?this.opts.marginLeft=t:(e=RVe.parseHeight(this.opts.marginLeft),this.opts.marginLeft=e.h,delete this.opts.margin),this.opts.marginUnit=e.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}},{key:"movable",value:function(t,n){var r=this;return this.opts.staticGrid||e.getElements(t).forEach((function(e){var t=e.gridstackNode;t&&(n?delete t.noMove:t.noMove=!0,r._prepareDragDropByNode(t))})),this}},{key:"resizable",value:function(t,n){var r=this;return this.opts.staticGrid||e.getElements(t).forEach((function(e){var t=e.gridstackNode;t&&(n?delete t.noResize:t.noResize=!0,r._prepareDragDropByNode(t))})),this}},{key:"disable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.opts.staticGrid)return this.enableMove(!1,e),this.enableResize(!1,e),this._triggerEvent("disable"),this}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.opts.staticGrid)return this.enableMove(!0,e),this.enableResize(!0,e),this._triggerEvent("enable"),this}},{key:"enableMove",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.opts.staticGrid||(e?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach((function(r){t._prepareDragDropByNode(r),r.subGrid&&n&&r.subGrid.enableMove(e,n)}))),this}},{key:"enableResize",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.opts.staticGrid||(e?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach((function(r){t._prepareDragDropByNode(r),r.subGrid&&n&&r.subGrid.enableResize(e,n)}))),this}},{key:"_removeDD",value:function(e){return yze.draggable(e,"destroy").resizable(e,"destroy"),e.gridstackNode&&delete e.gridstackNode._initDD,delete e.ddElement,this}},{key:"_setupAcceptWidget",value:function(){var t,n,r=this;if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return yze.droppable(this.el,"destroy"),this;var i=function(e,i,o){var a,l=i.gridstackNode;if(l){if(o=o||i,null===(a=l.grid)||void 0===a||!a.el){o.style.transform="scale(".concat(1/r.dragTransform.xScale,",").concat(1/r.dragTransform.yScale,")");var u=o.getBoundingClientRect();o.style.left=u.x+(r.dragTransform.xScale-1)*(e.clientX-u.x)/r.dragTransform.xScale+"px",o.style.top=u.y+(r.dragTransform.yScale-1)*(e.clientY-u.y)/r.dragTransform.yScale+"px",o.style.transformOrigin="0px 0px"}var c=r.el.getBoundingClientRect(),s=o.getBoundingClientRect(),d=s.top,f=s.left;f-=c.left;var h={position:{top:(d-=c.top)*r.dragTransform.xScale,left:f*r.dragTransform.yScale}};if(l._temporaryRemoved){if(l.x=Math.max(0,Math.round(f/n)),l.y=Math.max(0,Math.round(d/t)),delete l.autoPosition,r.engine.nodeBoundFix(l),!r.engine.willItFit(l)){if(l.autoPosition=!0,!r.engine.willItFit(l))return void yze.off(i,"drag");l._willFitPos&&(RVe.copyPos(l,l._willFitPos),delete l._willFitPos)}r._onStartMoving(o,e,h,l,n,t)}else r._dragOrResize(o,e,h,l,n,t)}};return yze.droppable(this.el,{accept:function(e){var t=e.gridstackNode||r._readAttr(e,!1);if((null==t?void 0:t.grid)===r)return!0;if(!r.opts.acceptWidgets)return!1;var n=!0;if("function"==typeof r.opts.acceptWidgets)n=r.opts.acceptWidgets(e);else{var i=!0===r.opts.acceptWidgets?".grid-stack-item":r.opts.acceptWidgets;n=e.matches(i)}if(n&&t&&r.opts.maxRow){var o={w:t.w,h:t.h,minW:t.minW,minH:t.minH};n=r.engine.willItFit(o)}return n}}).on(this.el,"dropover",(function(o,a,l){var u,c,s=a.gridstackNode;if((null===(u=s)||void 0===u?void 0:u.grid)===r&&!s._temporaryRemoved)return!1;null!==(c=s)&&void 0!==c&&c.grid&&s.grid!==r&&!s._temporaryRemoved&&s.grid._leave(a,l);n=r.cellWidth(),t=r.getCellHeight(!0),s||(s=r._readAttr(a,!1)),s.grid||(s._isExternal=!0,a.gridstackNode=s),l=l||a;var d=s.w||Math.round(l.offsetWidth/n)||1,f=s.h||Math.round(l.offsetHeight/t)||1;return s.grid&&s.grid!==r?(a._gridstackNodeOrig||(a._gridstackNodeOrig=s),a.gridstackNode=s=mze(mze({},s),{},{w:d,h:f,grid:r}),delete s.x,delete s.y,r.engine.cleanupNode(s).nodeBoundFix(s),s._initDD=s._isExternal=s._temporaryRemoved=!0):(s.w=d,s.h=f,s._temporaryRemoved=!0),e._itemRemoving(s.el,!1),yze.on(a,"drag",i),i(o,a,l),!1})).on(this.el,"dropout",(function(e,t,n){var i=t.gridstackNode;return!!i&&(i.grid&&i.grid!==r||(r._leave(t,n),r._isTemp&&r.removeAsSubGrid(i)),!1)})).on(this.el,"drop",(function(e,t,n){var i,o,a=t.gridstackNode;if((null==a?void 0:a.grid)===r&&!a._isExternal)return!1;var l=!!r.placeholder.parentElement;r.placeholder.remove();var u=l&&r.opts.animate;u&&r.setAnimation(!1);var c=t._gridstackNodeOrig;if(delete t._gridstackNodeOrig,l&&null!=c&&c.grid&&c.grid!==r){var s=c.grid;s.engine.removeNodeFromLayoutCache(c),s.engine.removedNodes.push(c),s._triggerRemoveEvent()._triggerChangeEvent(),s.parentGridItem&&!s.engine.nodes.length&&s.opts.subGridDynamic&&s.removeAsSubGrid()}if(!a)return!1;if(l&&(r.engine.cleanupNode(a),a.grid=r),null===(i=a.grid)||void 0===i||delete i._isTemp,yze.off(t,"drag"),n!==t?(n.remove(),t.gridstackNode=c,l&&(t=t.cloneNode(!0))):(t.remove(),r._removeDD(t)),!l)return!1;t.gridstackNode=a,a.el=t;var d=null===(o=a.subGrid)||void 0===o||null===(o=o.el)||void 0===o?void 0:o.gridstack;return RVe.copyPos(a,r._readAttr(r.placeholder)),RVe.removePositioningStyles(t),r.el.appendChild(t),r._prepareElement(t,!0,a),d&&(d.parentGridItem=a,d.opts.styleInHead||d._updateStyles(!0)),r._updateContainerHeight(),r.engine.addedNodes.push(a),r._triggerAddEvent(),r._triggerChangeEvent(),r.engine.endUpdate(),r._gsEventHandler.dropped&&r._gsEventHandler.dropped(mze(mze({},e),{},{type:"dropped"}),c&&c.grid?c:void 0,a),u&&r.setAnimation(r.opts.animate,!0),!1})),this}},{key:"_setupRemoveDrop",value:function(){if("string"!=typeof this.opts.removable)return this;var t=document.querySelector(this.opts.removable);return t?(this.opts.staticGrid||yze.isDroppable(t)||yze.droppable(t,this.opts.removableOptions).on(t,"dropover",(function(t,n){return e._itemRemoving(n,!0)})).on(t,"dropout",(function(t,n){return e._itemRemoving(n,!1)})),this):this}},{key:"_prepareDragDropByNode",value:function(e){var t=this,n=e.el,r=e.noMove||this.opts.disableDrag,i=e.noResize||this.opts.disableResize;if(this.opts.staticGrid||r&&i)return e._initDD&&(this._removeDD(n),delete e._initDD),n.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!e._initDD){var o,a,l=function(r,i){t._gsEventHandler[r.type]&&t._gsEventHandler[r.type](r,r.target),o=t.cellWidth(),a=t.getCellHeight(!0),t._onStartMoving(n,r,i,e,o,a)},u=function(r,i){t._dragOrResize(n,r,i,e,o,a)},c=function(r){t.placeholder.remove(),delete e._moving,delete e._event,delete e._lastTried;var i=e.w!==e._orig.w,o=r.target;if(o.gridstackNode&&o.gridstackNode.grid===t){if(e.el=o,e._isAboutToRemove){var a=n.gridstackNode.grid;a._gsEventHandler[r.type]&&a._gsEventHandler[r.type](r,o),a.engine.nodes.push(e),a.removeWidget(n,!0,!0)}else RVe.removePositioningStyles(o),e._temporaryRemoved?(RVe.copyPos(e,e._orig),t._writePosAttr(o,e),t.engine.addNode(e)):t._writePosAttr(o,e),t._gsEventHandler[r.type]&&t._gsEventHandler[r.type](r,o);t._extraDragRow=0,t._updateContainerHeight(),t._triggerChangeEvent(),t.engine.endUpdate(),"resizestop"===r.type&&(Number.isInteger(e.sizeToContent)&&(e.sizeToContent=e.h),t.resizeToContentCheck(i,e))}};yze.draggable(n,{start:l,stop:c,drag:u}).resizable(n,{start:l,stop:c,resize:u}),e._initDD=!0}return yze.draggable(n,r?"disable":"enable").resizable(n,i?"disable":"enable"),this}},{key:"_onStartMoving",value:function(e,t,n,r,i,o){var a;if(this.engine.cleanNodes().beginUpdate(r),this._writePosAttr(this.placeholder,r),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=r,null!==(a=r.grid)&&void 0!==a&&a.el)this.dragTransform=RVe.getValuesFromTransformedElement(e);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){var l=this.placeholder.closest(".grid-stack");this.dragTransform=RVe.getValuesFromTransformedElement(l)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};if(r.el=this.placeholder,r._lastUiPosition=n.position,r._prevYPix=n.position.top,r._moving="dragstart"===t.type,delete r._lastTried,"dropover"===t.type&&r._temporaryRemoved&&(this.engine.addNode(r),r._moving=!0),this.engine.cacheRects(i,o,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),"resizestart"===t.type){var u=this.getColumn()-r.x,c=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-r.y;yze.resizable(e,"option","minWidth",i*Math.min(r.minW||1,u)).resizable(e,"option","minHeight",o*Math.min(r.minH||1,c)).resizable(e,"option","maxWidth",i*Math.min(r.maxW||Number.MAX_SAFE_INTEGER,u)).resizable(e,"option","maxWidthMoveLeft",i*Math.min(r.maxW||Number.MAX_SAFE_INTEGER,r.x+r.w)).resizable(e,"option","maxHeight",o*Math.min(r.maxH||Number.MAX_SAFE_INTEGER,c)).resizable(e,"option","maxHeightMoveUp",o*Math.min(r.maxH||Number.MAX_SAFE_INTEGER,r.y+r.h))}}},{key:"_dragOrResize",value:function(e,t,n,r,i,o){var a,l=mze({},r._orig),u=this.opts.marginLeft,c=this.opts.marginRight,s=this.opts.marginTop,d=this.opts.marginBottom,f=Math.round(.1*o),h=Math.round(.1*i);if(u=Math.min(u,h),c=Math.min(c,h),s=Math.min(s,f),d=Math.min(d,f),"drag"===t.type){if(r._temporaryRemoved)return;var p=n.position.top-r._prevYPix;r._prevYPix=n.position.top,!1!==this.opts.draggable.scroll&&RVe.updateScrollPosition(e,n.position,p);var v=n.position.left+(n.position.left>r._lastUiPosition.left?-c:u),g=n.position.top+(n.position.top>r._lastUiPosition.top?-d:s);l.x=Math.round(v/i),l.y=Math.round(g/o);var m=this._extraDragRow;if(this.engine.collide(r,l)){var y=this.getRow(),b=Math.max(0,l.y+r.h-y);this.opts.maxRow&&y+b>this.opts.maxRow&&(b=Math.max(0,this.opts.maxRow-y)),this._extraDragRow=b}else this._extraDragRow=0;if(this._extraDragRow!==m&&this._updateContainerHeight(),r.x===l.x&&r.y===l.y)return}else if("resize"===t.type){if(l.x<0)return;if(RVe.updateScrollResize(t,e,o),l.w=Math.round((n.size.width-u)/i),l.h=Math.round((n.size.height-s)/o),r.w===l.w&&r.h===l.h)return;if(r._lastTried&&r._lastTried.w===l.w&&r._lastTried.h===l.h)return;var w=n.position.left+u,_=n.position.top+s;l.x=Math.round(w/i),l.y=Math.round(_/o),a=!0}r._event=t,r._lastTried=l;var x={x:n.position.left+u,y:n.position.top+s,w:(n.size?n.size.width:r.w*i)-u-c,h:(n.size?n.size.height:r.h*o)-s-d};if(this.engine.moveNodeCheck(r,mze(mze({},l),{},{cellWidth:i,cellHeight:o,rect:x,resizing:a}))){r._lastUiPosition=n.position,this.engine.cacheRects(i,o,s,c,d,u),delete r._skipDown,a&&r.subGrid&&r.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();var k=t.target;this._writePosAttr(k,r),this._gsEventHandler[t.type]&&this._gsEventHandler[t.type](t,k)}}},{key:"_leave",value:function(t,n){var r=t.gridstackNode;r&&((n=n||t).style.transform="scale(1)",yze.off(t,"drag"),r._temporaryRemoved||(r._temporaryRemoved=!0,this.engine.removeNode(r),r.el=r._isExternal&&n?n:t,!0===this.opts.removable&&e._itemRemoving(t,!0),t._gridstackNodeOrig?(t.gridstackNode=t._gridstackNodeOrig,delete t._gridstackNodeOrig):r._isExternal&&(delete r.el,delete t.gridstackNode,this.engine.restoreInitial())))}},{key:"commit",value:function(){var e,t,n,r,i,o;return e=this,t=this.batchUpdate(!1),n="commit",r="batchUpdate",i="5.2",o=function(){console.warn("gridstack.js: Function `"+n+"` is deprecated in "+i+" and has been replaced with `"+r+"`. It will be **removed** in a future release");for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return t.apply(e,a)},o.prototype=t.prototype,this}}],[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".grid-stack";if("undefined"==typeof document)return null;var r=e.getGridElement(n);return r?(r.gridstack||(r.gridstack=new e(r,RVe.cloneDeep(t))),r.gridstack):("string"==typeof n?console.error('GridStack.initAll() no grid was found with selector "'+n+'" - element missing or wrong selector ?\nNote: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.'):console.error("GridStack.init() no grid element was passed."),null)}},{key:"initAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".grid-stack",r=[];return"undefined"==typeof document||(e.getGridElements(n).forEach((function(n){n.gridstack||(n.gridstack=new e(n,RVe.cloneDeep(t))),r.push(n.gridstack)})),0===r.length&&console.error('GridStack.initAll() no grid was found with selector "'+n+'" - element missing or wrong selector ?\nNote: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.')),r}},{key:"addGrid",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return null;var r=t;if(r.gridstack){var i=r.gridstack;return n&&(i.opts=mze(mze({},i.opts),n)),void 0!==n.children&&i.load(n.children),i}if(!t.classList.contains("grid-stack")||e.addRemoveCB)if(e.addRemoveCB)r=e.addRemoveCB(t,n,!0,!0);else{var o=document.implementation.createHTMLDocument("");o.body.innerHTML='<div class="grid-stack '.concat(n.class||"",'"></div>'),r=o.body.children[0],t.appendChild(r)}return e.init(n,r)}},{key:"registerEngine",value:function(t){e.engineClass=t}},{key:"getElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".grid-stack-item";return RVe.getElement(e)}},{key:"getElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".grid-stack-item";return RVe.getElements(e)}},{key:"getGridElement",value:function(t){return e.getElement(t)}},{key:"getGridElements",value:function(e){return RVe.getElements(e)}},{key:"getDD",value:function(){return yze}},{key:"setupDragIn",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;void 0!==(null===(n=t)||void 0===n?void 0:n.pause)&&(BVe.pauseDrag=t.pause),t=mze(mze({},LVe),t||{});var i="string"==typeof e?RVe.getElements(e,r):e;i.length&&(null==i||i.forEach((function(e){yze.isDraggable(e)||yze.dragIn(e,t)})))}},{key:"_itemRemoving",value:function(e,t){var n=e?e.gridstackNode:void 0;null!=n&&n.grid&&!e.classList.contains(n.grid.opts.removableOptions.decline)&&(t?n._isAboutToRemove=!0:delete n._isAboutToRemove,t?e.classList.add("grid-stack-item-removing"):e.classList.remove("grid-stack-item-removing"))}}])}();bze.resizeToContentParent=".grid-stack-item-content",bze.Utils=RVe,bze.Engine=FVe,bze.GDRev="10.3.1";var wze=function(){return ox((function e(){rx(this,e),this._dataStore=[],this._top=0,this._dataStore=[],this._top=0}),[{key:"push",value:function(e){this._dataStore[this._top++]=e}},{key:"pop",value:function(){var e=this._dataStore[this._top-1];return this._top--,e}},{key:"peek",value:function(){return this._dataStore[this._top-1]}},{key:"clear",value:function(){this._dataStore=[],this._top=0}},{key:"length",value:function(){return this._top}},{key:"isEmpty",value:function(){return 0===this._top}},{key:"toString",value:function(){return this._dataStore.toString()}}])}(),_ze=["+","-","/","*","(",")"],xze={"+":100,"-":100,"*":200,"/":200,"(":1e3,")":0},kze=function(e,t){return t.includes(e)};function Cze(e){for(var t=e.split(" "),n=new wze,r=[];0!==t.length;)if(""!==t[0]){if(kze(t[0],_ze))if("("===t[0])n.push(t[0]);else if(")"===t[0]){for(;"("!==n.peek();)r.push(n.pop());n.pop()}else if(n.isEmpty())n.push(t[0]);else if(xze[t[0]]>xze[n.peek()])n.push(t[0]);else{for(;!n.isEmpty()&&xze[n.peek()]>=xze[t[0]]&&"("!==n.peek();)r.push(n.pop());n.push(t[0])}else r.push(t[0]);t.shift()}else t.shift();for(;!n.isEmpty();)r.push(n.pop());var i=function(e){var t=new wze;for(;0!==e.length;){if(kze(e[0],_ze)){var n=t.pop(),r=t.peek(),i=0;switch(e[0]){case"+":i=Number(r)+Number(n);break;case"-":i=Number(r)-Number(n);break;case"*":i=Number(r)*Number(n);break;case"/":i=Number(r)/Number(n)}t.pop(),t.push(i)}else t.push(e[0]);e.shift()}var o=t.pop();if(isNaN(o))throw new Error("Oops, result is not a number");if(o===1/0)throw new Error("Oops, result is Infinity");return o}(r);return i}var Sze=Rf.defineToken("RenderPluginContribution"),Oze=Rf.defineToken("RenderPluginFieldContribution"),Eze=function(e){return e.NORMAL="normal",e.MOBILE="mobile",e}(Eze||{}),Ize=function(e){return e.DISABLE="disable",e.SYNC="sync",e.SEQUENTIAL="sequential",e.ASYNC_CONCURRENT="async-concurrent",e}(Ize||{}),Pze=function(e){return e.NORMAL="normal",e.LITE="lite",e}(Pze||{}),Mze=Rf.defineToken("ViewerContribution"),Rze=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e}(Rze||{}),Aze=Rf.defineToken("ActiveTableServiceToken"),jze=function(){return ox((function e(t,n,r,i){rx(this,e),this._node=t,this._type=n,this._handler=r,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}),[{key:"destroy",value:function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}])}();function Dze(e,t,n,r){return new jze(e,t,n,r)}function Tze(e,t,n){if((null==e?void 0:e.nodeType)===Node.TEXT_NODE&&(e=e.parentNode),!(null==e?void 0:e.closest))return null;var r=e.closest(t);return r||null}function Fze(e){var t,n;e.stopPropagation(),null==(n=null==(t=e.nativeEvent)?void 0:t.stopImmediatePropagation)||n.call(t)}var Nze=["input","textarea","select"];var Lze=Object.defineProperty,Bze=Object.getOwnPropertyDescriptor,Vze=function(){return ox((function e(){rx(this,e)}),[{key:"$root",get:function(){return this._$root},set:function(e){this._$root=e}},{key:"$workbenchRoot",get:function(){return this._$workbenchRoot},set:function(e){this._$workbenchRoot=e}},{key:"hasVerticalScrollbar",value:function(){return this.$root.scrollHeight>this.$root.clientHeight}},{key:"getToolbarBoundingClientRect",value:function(){var e,t=null==(e=this.$workbenchRoot)?void 0:e.querySelector(".lakex-table-workbench-toolbar-container");return t?t.getBoundingClientRect():null}},{key:"getRenderBoundingClientRect",value:function(){var e,t,n,r=this.getToolbarBoundingClientRect();if(r){var i=null==(e=this.$workbenchRoot)?void 0:e.getBoundingClientRect(),o=null==(t=this.$root)?void 0:t.getBoundingClientRect();return new DOMRect(o.x,o.y,o.width,i.height-r.height)}return null==(n=this.$root)?void 0:n.getBoundingClientRect()}}])}();Vze=function(e,t,n,r){for(var i,o=r>1?void 0:r?Bze(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Lze(t,n,o),o}([Gf()],Vze);var zze=Object.defineProperty,Hze=Object.getOwnPropertyDescriptor,Wze=function(e,t,n,r){for(var i,o=r>1?void 0:r?Hze(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zze(t,n,o),o},Uze=function(){return ox((function e(){rx(this,e),this._viewport=null,this._resizeListener=null}),[{key:"viewport",get:function(){return this._viewport||this._updateViewport(),this._viewport}},{key:"init",value:function(){var e=this;this._resizeListener=Dze(this._renderContextService.$root,"resize",(function(){e._updateViewport()}))}},{key:"destroy",value:function(){var e;null==(e=this._resizeListener)||e.destroy()}},{key:"_updateViewport",value:function(){var e=this._renderContextService.$root;this._viewport=e.getBoundingClientRect()}},{key:"isDotInViewPort",value:function(e,t){if(!this._viewport)return!1;var n=e>this._viewport.left&&e<this._viewport.right,r=t>this._viewport.top&&t<this._viewport.bottom;return n&&r}}])}();function Gze(e,t,n){return t=DC(t),jC(e,Yze()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Yze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yze=function(){return!!e})()}Wze([Yf(Vze)],Uze.prototype,"_renderContextService",2),Uze=Wze([Gf()],Uze);var $ze=Object.defineProperty,qze=Object.getOwnPropertyDescriptor,Kze=function(e,t,n,r){for(var i,o=r>1?void 0:r?qze(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$ze(t,n,o),o},Xze=function(e){function t(){var e;return rx(this,t),(e=Gze(this,t,arguments))._viewNodes=new Map,e._currentView=null,e._prevView=null,e._isFirstRender=!0,e._onDoubleClickCell=e._register(new dS),e.onDoubleClickCell=e._onDoubleClickCell.event,e._onClickCellIcon=e._register(new dS),e.onClickCellIcon=e._onClickCellIcon.event,e._onClickRecord=e._register(new dS),e.onClickRecord=e._onClickRecord.event,e._onClickEvent=e._register(new dS),e.onClickEvent=e._onClickEvent.event,e._onClickIcon=e._register(new dS),e.onClickIcon=e._onClickIcon.event,e._onScroll=e._register(new dS),e.onScroll=e._onScroll.event,e._onViewWidthChange=e._register(new dS),e.onViewWidthChange=e._onViewWidthChange.event,e._onViewChange=e._register(new dS),e.onViewChange=e._onViewChange.event,e._onOpenCellEditor=e._register(new dS),e.onOpenCellEditor=e._onOpenCellEditor.event,e._onCloseCellEditor=e._register(new dS),e.onCloseCellEditor=e._onCloseCellEditor.event,e.getRenderWidth=function(){return e.renderContextService.$root.clientWidth},e._handleScroll=function(){e.emitOnScroll(1)},e}return NC(t,e),ox(t,[{key:"emitDoubleClickCell",value:function(e){this._onDoubleClickCell.emit(e)}},{key:"emitClickCellIcon",value:function(e){this._onClickCellIcon.emit(e)}},{key:"emitClickRecord",value:function(e){this._onClickRecord.emit(e)}},{key:"emitClickEvent",value:function(e){this._onClickEvent.emit(e)}},{key:"emitClickIcon",value:function(e){this._onClickIcon.emit(e)}},{key:"emitOnScroll",value:function(e){this._onScroll.emit(e)}},{key:"emitViewWidthChange",value:function(e){this._onViewWidthChange.emit(e)}},{key:"emitViewChange",value:function(e){this._onViewChange.emit(e)}},{key:"openCellEditor",value:function(e){this._onOpenCellEditor.emit(e)}},{key:"closeCellEditor",value:function(){this._onCloseCellEditor.emit({})}},{key:"init",value:(n=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.onError,this.configuration.getValue("render.autoActive")&&this.activeTableService.active(),this.onError=n,this._initPlugins(),this._initViewers();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initDom",value:function(e,t){var n=this;this.renderContextService.$root=e,this.renderContextService.$workbenchRoot=t,this._renderViewPort.init(),this.renderContextService.$root.addEventListener("wheel",this._handleScroll,{passive:!0}),this.onViewWidthChange((function(e){var t=n.renderContextService.$root;e&&(t.style.width="number"==typeof e?e+"px":e)}))}},{key:"_initPlugins",value:function(){var e=this;this.renderPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)}))}},{key:"_initViewers",value:function(){var e=this;this.viewerProvider.getContributions({cache:!1}).forEach((function(t){t.registerViewer(e)}))}},{key:"render",value:function(e,t){this._renderViewer(e.get("uuid"),e.get("type"),t)}},{key:"destroy",value:function(){var e,n,r;!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this.renderPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this._renderViewPort.destroy(),this._viewNodes.clear(),null==(e=this._currentView)||e.destroy(),this._currentView=null,null==(n=this._prevView)||n.destroy(),this._prevView=null,this.renderContextService.$root&&(this.renderContextService.$root.removeEventListener("wheel",this._handleScroll),null==(r=this.renderContextService.$root.parentNode)||r.removeChild(this.renderContextService.$root))}},{key:"_renderViewer",value:function(e,t,n){var r,i=this.renderContextService.$root,o=document.createElement("div");o.className="lakex-table-view-container",o.dataset.viewId=e,i.appendChild(o);var a=this._viewNodes.get(t);this._prevView=this._currentView,null==(r=this._prevView)||r.destroyAsync(),this._currentView=a?a.render(o,{viewId:e,deferMode:"CARD"===t?"disable":this.configuration.getValue("render.deferMode")},n):null,this._currentView||(i.innerHTML="",i.appendChild(this._defaultViewer())),this._isFirstRender&&(this._lifeService.status=cx.Rendered,this._isFirstRender=!1)}},{key:"_defaultViewer",value:function(){var e=document.createElement("h3");return e.innerHTML="没有注册 Viewer 这里是骨架屏",e}},{key:"registerItem",value:function(e){if(this._viewNodes.get(e.viewType))throw Error("".concat(e.viewType," view has been registered"));this._viewNodes.set(e.viewType,e)}},{key:"getCurrentViewNode",value:function(e){var t;return null==(t=this._currentView)?void 0:t.getRoot()}},{key:"getViewNodes",value:function(){return this._viewNodes}}]);var n}(HC);Kze([gh(Sze)],Xze.prototype,"renderPluginProvider",2),Kze([gh(Mze)],Xze.prototype,"viewerProvider",2),Kze([Yf(Vze)],Xze.prototype,"renderContextService",2),Kze([Yf(RC)],Xze.prototype,"configuration",2),Kze([Yf(Aze)],Xze.prototype,"activeTableService",2),Kze([Yf(Uze)],Xze.prototype,"_renderViewPort",2),Kze([Yf(sx)],Xze.prototype,"_lifeService",2),Kze([Df()],Xze.prototype,"destroy",1),Xze=Kze([Gf()],Xze);var Jze=Object.defineProperty,Zze=Object.getOwnPropertyDescriptor,Qze=function(e,t,n,r){for(var i,o=r>1?void 0:r?Zze(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Jze(t,n,o),o},eHe=function(){return ox((function e(){rx(this,e),this._fieldTargetMap={}}),[{key:"plugins",get:function(){return this.renderPluginFieldProvider.getContributions({cache:!1})}},{key:"getFieldPlugin",value:function(e){if(this._fieldTargetMap[e])return this._fieldTargetMap[e];var t=this.plugins.reverse().find((function(t){return t.fieldType===e}));return t&&(this._fieldTargetMap[e]=t),t}}])}();Qze([gh(Oze)],eHe.prototype,"renderPluginFieldProvider",2),eHe=Qze([Gf()],eHe);var tHe=Object.defineProperty,nHe=Object.getOwnPropertyDescriptor,rHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?nHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tHe(t,n,o),o},iHe=function(){return ox((function e(){var t=this;rx(this,e),this._cellEditableComponentMap={},this._fieldComponentMap={},this.getFieldTargetPlugin=function(e){return t._fieldRegistry.getFieldPlugin(e)},this.getFieldComponent=function(e){var n,r,i=t._fieldRegistry.getFieldPlugin(e);if(i.disableCache)return null==(n=null==i?void 0:i.getFieldComponent)?void 0:n.call(i);var o=null==(r=null==i?void 0:i.getFieldComponent)?void 0:r.call(i);return t._fieldComponentMap[e]?t._fieldComponentMap[e]:(o&&(t._fieldComponentMap[e]=o),o)},this.getCellEditableComponent=function(e){var n,r,i=t._fieldRegistry.getFieldPlugin(e);if(null==i?void 0:i.disableCache)return null==(n=null==i?void 0:i.getCellEditableComponent)?void 0:n.call(i);if(t._cellEditableComponentMap[e])return t._cellEditableComponentMap[e];var o=null==(r=null==i?void 0:i.getCellEditableComponent)?void 0:r.call(i);return o&&(t._cellEditableComponentMap[e]=o),o},this.getCellBeforeChange=function(e){var n,r;return null==(r=null==(n=t._fieldRegistry.getFieldPlugin(e))?void 0:n.getCellBeforeChange)?void 0:r.call(n)},this.getFieldEditComponent=function(e){var n,r;return null==(r=null==(n=t._fieldRegistry.getFieldPlugin(e))?void 0:n.getFieldEditComponent)?void 0:r.call(n)},this.getFieldFormComponent=function(e){var n,r;return null==(r=null==(n=t._fieldRegistry.getFieldPlugin(e))?void 0:n.getFieldFormComponent)?void 0:r.call(n)},this.getFieldIcon=function(e){var n,r;return null==(r=null==(n=t._fieldRegistry.getFieldPlugin(e))?void 0:n.getFieldIcon)?void 0:r.call(n)},this.getFieldTagComponent=function(e){var n,r;return null==(r=null==(n=t._fieldRegistry.getFieldPlugin(e))?void 0:n.getFieldTagComponent)?void 0:r.call(n)}}),[{key:"hasCellEditable",value:function(e){return!!this.getCellEditableComponent(e)}},{key:"getCellIsShowValidTip",value:function(e){var t;return null==(t=this._fieldRegistry.getFieldPlugin(e))?void 0:t.isShowValidTipInGrid}},{key:"getFieldIsStrictValidatedValue",value:function(e){var t;return!!(null==(t=this._fieldRegistry.getFieldPlugin(e))?void 0:t.isStrictValidatedValue)}},{key:"getFieldRules",value:function(e){var t,n;return null==(n=null==(t=this._fieldRegistry.getFieldPlugin(e))?void 0:t.getFieldRules)?void 0:n.call(t)}},{key:"cellValueChecker",value:function(e,t){var n,r,i,o,a=null==(o=null==(i=null==(r=null==(n=this._readService)?void 0:n.getValueField)?void 0:r.call(n,e))?void 0:i.getVerify)?void 0:o.call(i,t);return null==a?void 0:a.errorMessage}}])}();rHe([Yf(eHe)],iHe.prototype,"_fieldRegistry",2),rHe([Yf(XA)],iHe.prototype,"_readService",2),iHe=rHe([Gf()],iHe);var oHe=Object.defineProperty,aHe=Object.getOwnPropertyDescriptor,lHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?aHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oHe(t,n,o),o},uHe=function(){return ox((function e(){rx(this,e)}),[{key:"_init",value:function(){this.zIndex={render:0,gridCell:0,gridCellPreviewer:1,gridStickyContent:2,gridCellFrozen:3,gridCellFrozenPreviewer:4,gridHeader:5,gridFooter:5}}}])}();lHe([jf()],uHe.prototype,"_init",1),uHe=lHe([Gf()],uHe);var cHe=Object.defineProperty,sHe=Object.getOwnPropertyDescriptor,dHe=function(){return ox((function e(){rx(this,e),this.gridCellEditorAutoFocus=!0}),[{key:"setGridCellEditorAutoFocus",value:function(e){this.gridCellEditorAutoFocus=e}}])}();dHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?sHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&cHe(t,n,o),o}([Gf()],dHe);var fHe=Rf.defineToken("OpenerContribution"),hHe=Object.defineProperty,pHe=Object.getOwnPropertyDescriptor,vHe=function(){return ox((function e(){rx(this,e),this.openerName="href-opener",this.apps=["phone"]}),[{key:"open",value:function(e){window.location.href=e}}])}();vHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?pHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hHe(t,n,o),o}([Gf()],vHe);var gHe=Object.defineProperty,mHe=Object.getOwnPropertyDescriptor,yHe=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"],bHe=function(){return ox((function e(){rx(this,e),this.openerName="safe-redirect-opener",this.apps=["link:external"]}),[{key:"open",value:function(e){var t=document.location,n=t.protocol,r=t.host,i=window.__mockOpen||window.open;yHe.some((function(t){return e.startsWith(t)}))?i(e):i("".concat(n,"//").concat(r,"/r/goto?url=").concat(encodeURIComponent(e)),"_blank")}}])}();bHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?mHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gHe(t,n,o),o}([Gf()],bHe);var wHe=Object.defineProperty,_He=Object.getOwnPropertyDescriptor,xHe=function(){return ox((function e(){rx(this,e),this.openerName="window-new-opener",this.apps=["link"]}),[{key:"open",value:function(e){(window.__mockOpen||window.open)(e,"_blank")}}])}();xHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?_He(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wHe(t,n,o),o}([Gf()],xHe);var kHe=Object.defineProperty,CHe=Object.getOwnPropertyDescriptor,SHe=function(){return ox((function e(){rx(this,e),this.openerName="window-opener",this.apps=["email"]}),[{key:"open",value:function(e){(window.__mockOpen||window.open)(e,"_self")}}])}();function OHe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return EHe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EHe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function EHe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}SHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?CHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kHe(t,n,o),o}([Gf()],SHe);var IHe=Object.defineProperty,PHe=Object.getOwnPropertyDescriptor,MHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?PHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&IHe(t,n,o),o},RHe=function(){return ox((function e(){rx(this,e),this.openers=[],this.apps=[]}),[{key:"init",value:function(){var e,t=OHe(this._openerProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerOpener){var r=n.registerOpener();r&&r.length>0&&this.registerOpeners(r)}if(n.registerOpenerApp){var i=n.registerOpenerApp();if(i&&i.length>0){var o,a=OHe(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;this.registerApp(l)}}catch(e){a.e(e)}finally{a.f()}}}}}catch(e){t.e(e)}finally{t.f()}}},{key:"registerOpeners",value:function(e){if(e){var t,n=OHe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.registerOpener(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerOpener",value:function(e){var t=this.openers.findIndex((function(t){return t.openerName===e.openerName}));if(t>-1){var n=this.openers[t];e.apps||(e.apps=n.apps),this.openers.splice(t,1)}e.apps?this.openers.push(e):console.warn("missing opener apps",e)}},{key:"registerApp",value:function(e){var t=this.apps.findIndex((function(t){return t.name===e.name&&(!e.sub_name||t.sub_name===e.sub_name)}));t>-1&&this.apps.splice(t,1),this.apps.push(e)}},{key:"getApps",value:function(){return this.apps}},{key:"getOpener",value:function(e){var t,n=OHe(this.openers);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.apps.includes(e.name+(e.sub_name?":"+e.sub_name:"")))return r}}catch(e){n.e(e)}finally{n.f()}}}])}();function AHe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jHe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jHe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function jHe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}MHe([gh(fHe)],RHe.prototype,"_openerProvider",2),RHe=MHe([Gf()],RHe);var DHe=Object.defineProperty,THe=Object.getOwnPropertyDescriptor,FHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?THe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DHe(t,n,o),o},NHe=function(){return ox((function e(){rx(this,e)}),[{key:"getOpenerApp",value:function(e,t){var n,r,i=AHe(this.registry.getApps().filter((function(t){return t.name===e})));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=!0;if(o.pattern)new RegExp(o.pattern).test(t)||(a=!1);var l=o.include;l&&(Px(l)&&l.startsWith("{")&&(l=JSON.parse(l)),Ix(l)&&!l.test(t)&&(a=!1));var u=o.exclude;if(u&&(Px(u)&&u.startsWith("{")&&(u=JSON.parse(u)),Ix(u)&&u.test(t)&&(a=!1)),a){n=o;break}}}catch(e){i.e(e)}finally{i.f()}return n}}])}();function LHe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return BHe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BHe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function BHe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}FHe([Yf(RHe)],NHe.prototype,"registry",2),NHe=FHe([Gf()],NHe);var VHe=Object.defineProperty,zHe=Object.getOwnPropertyDescriptor,HHe=function(){return ox((function e(){rx(this,e)}),[{key:"getHashes",value:function(){var e=window.location.hash;if(e){var t=e.replace("#","").split(";");if(t.length>0){var n,r=[],i=LHe(t);try{for(i.s();!(n=i.n()).done;){var o=jF(n.value.split(":"),2),a=o[0],l=o[1];a&&!l&&32===a.length&&(l=a,a="view"),l&&r.push({name:a,url:l})}}catch(e){i.e(e)}finally{i.f()}return r}}}},{key:"setHash",value:function(e,t){var n=this.buildHash(e,t);n&&(window.location.hash=n)}},{key:"removeHash",value:function(e){var t=this.getHashes();if(t)if((t=t.filter((function(t){return t.name!==e}))).length>0){var n=this._buildHashStr(t);window.location.hash=n}else window.location.hash=""}},{key:"buildHash",value:function(e,t){var n=this.getHashes()||[],r=n.findIndex((function(t){return t.name===e}));return r>-1&&n.splice(r,1),n.push({name:e,url:t}),this._buildHashStr(n)}},{key:"_buildHashStr",value:function(e){return e.map((function(e){return e.name+":"+e.url})).join(";")}}])}();HHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?zHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&VHe(t,n,o),o}([Gf()],HHe);var WHe=Object.defineProperty,UHe=Object.getOwnPropertyDescriptor,GHe=function(e,t,n,r){for(var i,o=r>1?void 0:r?UHe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WHe(t,n,o),o},YHe=function(){return ox((function e(){rx(this,e)}),[{key:"open",value:function(e,t){var n=this._appService.getOpenerApp(e,t);if(!n)throw new Error("Not match app by url: ".concat(t));var r=this.registry.getOpener(n);if(!r)throw new Error("Not define link app opener: ".concat(n.name));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];r.open.apply(r,[t].concat(o)),r.autoClear?this._openerHash.removeHash(e):r.hash&&this.setHash(e,t)}},{key:"getOpenLink",value:function(e,t){var n=this._openerHash.buildHash(e,t);return window.location.origin+window.location.pathname+window.location.search+"#"+n}},{key:"setHash",value:function(e,t){this._configurationService.getValue("opener.useHash")&&this._openerHash.setHash(e,t)}}])}();GHe([Yf(RHe)],YHe.prototype,"registry",2),GHe([Yf(HHe)],YHe.prototype,"_openerHash",2),GHe([Yf(NHe)],YHe.prototype,"_appService",2),GHe([Yf(RC)],YHe.prototype,"_configurationService",2),YHe=GHe([Gf()],YHe);var $He={name:"email",display_name:"Email",description:"邮件",include:/mailto:\S+@\S+\.\S+$/},qHe={name:"file",display_name:"File",description:"附件"},KHe={name:"image",display_name:"Image",description:"图片"},XHe=/^https?:\/\/(.*(antfin|yuque|alibaba|antfin-inc|alibaba-inc).com|lark.alipay.net)/i,JHe={name:"link",display_name:"Yuque Link",description:"链接",include:XHe},ZHe={name:"link",sub_name:"external",display_name:"External Link",description:"外部链接",exclude:XHe},QHe={name:"phone",display_name:"Phone",description:"手机号码",include:/tel:\d+$/},eWe={name:"user",display_name:"用户",description:"用户首页"},tWe=Rf.defineToken("FileContribution"),nWe=Object.defineProperty,rWe=Object.getOwnPropertyDescriptor,iWe=function(e,t,n,r){for(var i,o=r>1?void 0:r?rWe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&nWe(t,n,o),o},oWe=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.fileProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerFile()}}])}();iWe([gh(tWe)],oWe.prototype,"fileProvider",2),oWe=iWe([Gf()],oWe);var aWe={FILE_EXT:[".dwg",".vsd",".vsdm",".vsdx",".vss",".vssm",".vst",".vstm",".vstx",".msi",".chm",".sub",".idx",".sst",".son",".srt",".ssa",".ass",".smi",".psb",".pjs",".stl",".tts",".vsf",".zeg",".ipynb",".msg",".caj",".jar",".tar",".gz",".cnf",".ini",".rpm",".conf"],IMAGE_EXT:[".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif"],TEXT_FILE_EXT:[".txt",".abap",".ada",".adp",".ahk",".as",".as3",".asc",".ascx",".asm",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bat",".bib",".bsh",".build",".builder",".c",".c++",".capfile",".cc",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmake",".cmd",".coffee",".config",".cpp",".cpt",".cpy",".cs",".cshtml",".cson",".csproj",".css",".ctp",".cxx",".dart",".d",".ddl",".di",".diff",".disco",".dml",".dtd",".dtml",".el",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".groovy",".gvy",".Hcp",".h",".h++",".haml",".handlebars",".hbs",".hh",".hpp",".hrl",".hs",".htc",".hxx",".html",".htm",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".pug",".jade",".jav",".java",".js",".json",".jsp",".jsx",".l",".less",".lhs",".lisp",".log",".lst",".ltx",".lua",".m",".mak",".make",".manifest",".master",".md",".mkd",".markdn",".markdown",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".makefile",".nfo",".opml",".osascript",".p",".pas",".patch",".php",".php2",".php3",".php4",".php5",".phtml",".pl",".plx",".perl",".pm",".pod",".pp",".profile",".ps1",".ps1xml",".psd1",".psm1",".pss",".pt",".py",".pyw",".proto",".r",".rake",".rb",".rbx",".rc",".rdf",".re",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".s",".sass",".scala",".scm",".sconscript",".sconstruct",".script",".scss",".sgml",".sh",".shtml",".sml",".svn-base",".swift",".sql",".sty",".tcl",".tex",".textile",".tld",".tli",".tmpl",".tpl",".ts",".tsx",".vb",".vi",".vim",".vmg",".webpart",".wsp",".wsdl",".xhtml",".xml",".jmx",".xoml",".xsd",".xslt",".yaml",".yaws",".yml",".zsh",".arxml"],VIDEO_EXT:[".mp4",".mov",".avi",".wmv",".m4a",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".flac",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".rmvb",".wmv"],OFFICE_EXT:[".docx",".doc",".dotx",".dot",".rtf",".txt",".html",".htm",".lake",".lakebook",".lakesheet",".lakemind",".lakeshow",".pdf",".xls",".xlsx",".xltx",".xlsm",".xlt",".csv",".pptx",".ppt",".potx",".pot",".ppsx",".pps",".pages",".numbers",".nmbtemplate",".template",".key",".keynote",".kth",".et",".ett",".dps",".dpt",".wps",".wpt",".txt",".md",".mark",".markdown",".xmind",".graffle",".gtemplate",".gstencil",".mindnode",".vpp",".mmap",".mm",".mpp"],MAC_OFFICE_EXT:[".key",".keynote",".pages",".numbers"],AUDIO_EXT:[".mp3",".mpga",".wav",".m4a",".flac"],PRESENTATION_EXT:[".ppt",".pptx",".ppsx",".potx",".pot",".key"],SHEET_EXT:[".xls",".xlsx",".xlsm",".xltx",".xlt",".csv",".numbers"],MMAP_EXT:[".mindnode",".mindnode.zip",".xmind",".xmind.zip",".mmap",".mmap.zip",".mm"],COMPRESS_EXT:[".zip",".rar",".gz",".tgz",".gzip",".7z",".tar",".jar",".dmg",".pkg"]},lWe={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]};function uWe(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e.type&&lWe[e.type];return r?r.includes(n)?n:r[0]:n}function cWe(e){var t=uWe(e);return function(e){var t=uWe(e);return aWe.IMAGE_EXT.includes(t)}(e)?"image":function(e){var t=uWe(e);return aWe.VIDEO_EXT.includes(t)}(e)?"video":function(e){var t=uWe(e);return aWe.AUDIO_EXT.includes(t)}(e)?"audio":["doc","docx","dot","dotx"].includes(t)?"word":function(e){var t=uWe(e);return["pdf"].includes(t)}(e)?"pdf":"txt"===t?"txt":["pages","md","markdown","rtf"].includes(t)?"doc":"numbers"===t?"numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"excel":function(e){var t=uWe(e);return aWe.SHEET_EXT.includes(t)}(e)?"sheet":"key"===e?"keynote":function(e){var t=uWe(e);return aWe.PRESENTATION_EXT.includes(t)}(e)?"ppt":["xmind","xmind.zip"].includes(t)?"xmind":["mindnode","mindnode.zip"].includes(t)?"mindnote":function(e){var t=uWe(e);return aWe.MMAP_EXT.includes(t)}(e)?"minimap":"sketch"===t?"sketch":["rp","rplib"].includes(t)?"axure":"psd"===t?"psd":"ai"===t?"ai":"graffle"===t?"graffle":"zip"===t?"rar":"lake"===t?"lake":"lakesheet"===t?"lakesheet":"default"}var sWe=Object.defineProperty,dWe=Object.getOwnPropertyDescriptor,fWe=function(e,t,n,r){for(var i,o=r>1?void 0:r?dWe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&sWe(t,n,o),o},hWe=function(){return ox((function e(){rx(this,e)}),[{key:"_provider",get:function(){return this._fileRegistry.getProvider()}},{key:"getExts",value:function(){var e,t;return(null==(e=this._provider)?void 0:e.getExts)?this._provider.getExts():(t=[],Object.keys(aWe).forEach((function(e){t=t.concat(aWe[e])})),t).join(",")}},{key:"getFileKey",value:function(e){var t;return(null==(t=this._provider)?void 0:t.getFileKey)?this._provider.getFileKey(e):cWe(e)}},{key:"getPreviewUrl",value:function(e){var t,n;return(null==(t=this._provider)?void 0:t.getPreviewUrl)?null==(n=this._provider)?void 0:n.getPreviewUrl(e):e}},{key:"getPreviewOrDownloadUrl",value:function(e,t){var n,r;return(null==(n=this._provider)?void 0:n.getPreviewOrDownloadUrl)?null==(r=this._provider)?void 0:r.getPreviewOrDownloadUrl(e,t):e}}])}();fWe([Yf(oWe)],hWe.prototype,"_fileRegistry",2),hWe=fWe([Gf()],hWe);var pWe=ch().contribution(tWe).register(oWe).register(hWe),vWe=Object.defineProperty,gWe=Object.getOwnPropertyDescriptor,mWe=function(e,t,n,r){for(var i,o=r>1?void 0:r?gWe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vWe(t,n,o),o},yWe=function(){return ox((function e(){rx(this,e),this.openerName="file-previewer-opener",this.apps=["file"]}),[{key:"open",value:function(e,t){var n=this._fileService.getPreviewOrDownloadUrl(e,t.size);n&&(window.__mockOpen||window.open)(n,"_blank","noopener,noreferrer")}}])}();mWe([Yf(hWe)],yWe.prototype,"_fileService",2),yWe=mWe([Gf()],yWe);var bWe,wWe={exports:{}};var _We=(bWe||(bWe=1,function(e,t){var n;e.exports=(n=function(e,t){var n,r,i,o,a,l,u,c,s,d,f,h,p,v,g,m,y,b,w=this,_=!1,x=!0,k=!0,C={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},S=function(e){if(m)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!s&&T();for(var n,r,i=(e.target||e.srcElement).getAttribute("class")||"",o=0;o<W.length;o++)(n=W[o]).onTap&&i.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),m=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){m=!1}),a)}},O=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},E=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},I=function(){var e=1===g.getNumItemsFn();e!==v&&(E(r,"ui--one-slide",e),v=e)},P=function(){E(u,"share-modal--hidden",k)},M=function(){return(k=!k)?(t.removeClass(u,"pswp__share-modal--fade-in"),setTimeout((function(){k&&P()}),300)):(P(),setTimeout((function(){k||t.addClass(u,"pswp__share-modal--fade-in")}),30)),k||A(),!1},R=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),k||M(),1))},A=function(){for(var e,t,n,r,i="",o=0;o<g.shareButtons.length;o++)e=g.shareButtons[o],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),r=g.getTextForShare(e),i+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(i=g.parseShareButtonOut(e,i));u.children[0].innerHTML=i,u.children[0].onclick=R},j=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},D=0,T=function(){clearTimeout(b),D=0,s&&w.setIdle(!1)},F=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout((function(){w.setIdle(!0)}),g.timeToIdleOutside))},N=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},L=function(){g.preloaderEl&&(B(!0),d("beforeChange",(function(){clearTimeout(p),p=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&B(!1):B(!0)}),g.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,n){e.currItem===n&&B(!0)})))},B=function(e){h!==e&&(E(f,"preloader--active",!e),h=e)},V=function(e){var n=e.vGap;if(O()){var a=g.barsSize;if(g.captionEl&&"auto"===a.bottom)if(o||((o=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(o,i),t.addClass(r,"pswp__ui--fit")),g.addCaptionHTMLFn(e,o,!0)){var l=o.clientHeight;n.bottom=parseInt(l,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},z=function(){g.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",T),t.bind(document,"mouseout",F),y=setInterval((function(){2==++D&&w.setIdle(!0)}),g.timeToIdle/2)}))},H=function(){var e;d("onVerticalDrag",(function(e){x&&e<.95?w.hideControls():!x&&e>=.95&&w.showControls()})),d("onPinchClose",(function(t){x&&t<.9?(w.hideControls(),e=!0):e&&!x&&t>.9&&w.showControls()})),d("zoomGestureEnded",(function(){(e=!1)&&!x&&w.showControls()}))},W=[{name:"caption",option:"captionEl",onInit:function(e){i=e}},{name:"share-modal",option:"shareEl",onInit:function(e){u=e},onTap:function(){M()}},{name:"button--share",option:"shareEl",onInit:function(e){l=e},onTap:function(){M()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],U=function(){var e,n,i,o=function(r){if(r)for(var o=r.length,a=0;a<o;a++){e=r[a],n=e.className;for(var l=0;l<W.length;l++)i=W[l],n.indexOf("pswp__"+i.name)>-1&&(g[i.option]?(t.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};o(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&o(a.children)};w.init=function(){t.extend(e.options,C,!0),g=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,H(),d("beforeChange",w.update),d("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){t.bind(r,"pswpTap click",S),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){k||M(),y&&clearInterval(y),t.unbind(document,"mouseout",F),t.unbind(document,"mousemove",T),t.unbind(r,"pswpTap click",S),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){g.captionEl&&(o&&r.removeChild(o),t.removeClass(i,"pswp__caption--empty")),u&&(u.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),g.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),d("initialZoomIn",(function(){g.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),d("parseVerticalMargin",V),U(),g.shareEl&&l&&u&&(k=!0),I(),z(),N(),L()},w.setIdle=function(e){s=e,E(r,"ui--idle",e)},w.update=function(){x&&e.currItem?(w.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,i),E(i,"caption--empty",!e.currItem.title)),_=!0):_=!1,k||M(),I()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){g.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!m)if(n.detail&&"mouse"===n.detail.pointerType){if(j(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(x?w.hideControls():w.showControls()),g.tapToClose&&(t.hasClass(r,"pswp__img")||j(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;E(r,"ui--over-close",j(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),x=!1},w.showControls=function(){x=!0,_||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}},n)}(wWe)),wWe.exports),xWe=Tx(_We),kWe=u.a.createContext({container:null,_cacheMap:{}});kWe.displayName="TableDiContext";var CWe=kWe.Provider;function SWe(e,t){var n,r,i,o=u.a.useContext(kWe);if((null==t?void 0:t.cache)&&(i=e.name,void 0!==(null==(n=o._cacheMap)?void 0:n[i])))return o._cacheMap[i];var a=o.container;if(!a)throw new Error('"useContainer" is being used outside of the TableDiContext');try{var l=a.get(e);return(null==t?void 0:t.cache)&&(o._cacheMap||(o._cacheMap={}),o._cacheMap[i]=l),l}catch(e){return(null==t?void 0:t.cache)&&(o._cacheMap||(o._cacheMap={}),o._cacheMap[i]=null),(null==t?void 0:t.optional)?null:(console.warn(e),null==(r=o.onError)||r.call(o,e),null)}}kWe.Consumer;var OWe=function(e){var t=e.activeColor,n=e.onSelect,r=e.colorSource,i=SWe(mN);return u.a.createElement("div",{className:"lakex-table-colorpicker"},r.map((function(e,r){return u.a.createElement("div",{className:"lakex-table-colorpicker-group",key:r},e.map((function(e,r){var o=(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase());return u.a.createElement("span",{key:r,className:"lakex-table-colorpicker-item",onClick:n.bind(void 0,e)},"empty"===e?u.a.createElement("span",{className:"lakex-table-colorpicker-item-empty",style:{backgroundColor:"transparent"}}):u.a.createElement("span",{style:{backgroundColor:null==i?void 0:i.getRenderColor(e)}},o&&u.a.createElement("svg",{style:{fill:"var(--lt-color-icon-primary)"},viewBox:"0 0 18 18"},u.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))})))})))};function EWe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var IWe=Object(l.createContext)({});function PWe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MWe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PWe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PWe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RWe(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function AWe(e){return e<=1?"".concat(100*Number(e),"%"):e}function jWe(e){return 1===e.length?"0"+e:String(e)}function DWe(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function TWe(e){return FWe(e)/255}function FWe(e){return parseInt(e,16)}var NWe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function LWe(e){var t,n,r,i={r:0,g:0,b:0},o=1,a=null,l=null,u=null,c=!1,s=!1;return"string"==typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(NWe[e])e=NWe[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=HWe.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=HWe.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=HWe.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=HWe.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=HWe.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=HWe.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=HWe.hex8.exec(e),n)return{r:FWe(n[1]),g:FWe(n[2]),b:FWe(n[3]),a:TWe(n[4]),format:t?"name":"hex8"};if(n=HWe.hex6.exec(e),n)return{r:FWe(n[1]),g:FWe(n[2]),b:FWe(n[3]),format:t?"name":"hex"};if(n=HWe.hex4.exec(e),n)return{r:FWe(n[1]+n[1]),g:FWe(n[2]+n[2]),b:FWe(n[3]+n[3]),a:TWe(n[4]+n[4]),format:t?"name":"hex8"};if(n=HWe.hex3.exec(e),n)return{r:FWe(n[1]+n[1]),g:FWe(n[2]+n[2]),b:FWe(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===ex(e)&&(WWe(e.r)&&WWe(e.g)&&WWe(e.b)?(t=e.r,n=e.g,r=e.b,i={r:255*RWe(t,255),g:255*RWe(n,255),b:255*RWe(r,255)},c=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):WWe(e.h)&&WWe(e.s)&&WWe(e.v)?(a=AWe(e.s),l=AWe(e.v),i=function(e,t,n){e=6*RWe(e,360),t=RWe(t,100),n=RWe(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t),u=r%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u]}}(e.h,a,l),c=!0,s="hsv"):WWe(e.h)&&WWe(e.s)&&WWe(e.l)&&(a=AWe(e.s),u=AWe(e.l),i=function(e,t,n){var r,i,o;if(e=RWe(e,360),t=RWe(t,100),n=RWe(n,100),0===t)i=n,o=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=DWe(l,a,e+1/3),i=DWe(l,a,e),o=DWe(l,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,a,u),c=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(o),{ok:c,format:e.format||s,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o}}var BWe="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),VWe="[\\s|\\(]+(".concat(BWe,")[,|\\s]+(").concat(BWe,")[,|\\s]+(").concat(BWe,")\\s*\\)?"),zWe="[\\s|\\(]+(".concat(BWe,")[,|\\s]+(").concat(BWe,")[,|\\s]+(").concat(BWe,")[,|\\s]+(").concat(BWe,")\\s*\\)?"),HWe={CSS_UNIT:new RegExp(BWe),rgb:new RegExp("rgb"+VWe),rgba:new RegExp("rgba"+zWe),hsl:new RegExp("hsl"+VWe),hsla:new RegExp("hsla"+zWe),hsv:new RegExp("hsv"+VWe),hsva:new RegExp("hsva"+zWe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function WWe(e){return Boolean(HWe.CSS_UNIT.exec(String(e)))}var UWe=2,GWe=.16,YWe=.05,$We=.05,qWe=.15,KWe=5,XWe=4,JWe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ZWe(e){var t=function(e,t,n){e=RWe(e,255),t=RWe(t,255),n=RWe(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=r,l=r-i,u=0===r?0:l/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:u,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function QWe(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){return[jWe(Math.round(e).toString(16)),jWe(Math.round(t).toString(16)),jWe(Math.round(n).toString(16))].join("")}(t,n,r))}function eUe(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-UWe*t:Math.round(e.h)+UWe*t:n?Math.round(e.h)+UWe*t:Math.round(e.h)-UWe*t)<0?r+=360:r>=360&&(r-=360),r}function tUe(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-GWe*t:t===XWe?e.s+GWe:e.s+YWe*t)>1&&(r=1),n&&t===KWe&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function nUe(e,t,n){var r;return(r=n?e.v+$We*t:e.v-qWe*t)>1&&(r=1),Number(r.toFixed(2))}function rUe(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=LWe(e),i=KWe;i>0;i-=1){var o=ZWe(r),a=QWe(LWe({h:eUe(o,i,!0),s:tUe(o,i,!0),v:nUe(o,i,!0)}));n.push(a)}n.push(QWe(r));for(var l=1;l<=XWe;l+=1){var u=ZWe(r),c=QWe(LWe({h:eUe(u,l),s:tUe(u,l),v:nUe(u,l)}));n.push(c)}return"dark"===t.theme?JWe.map((function(e){var r,i,o,a=e.index,l=e.opacity;return QWe((r=LWe(t.backgroundColor||"#141414"),i=LWe(n[a]),o=100*l/100,{r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b}))})):n}var iUe={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},oUe={},aUe={};Object.keys(iUe).forEach((function(e){oUe[e]=rUe(iUe[e]),oUe[e].primary=oUe[e][5],aUe[e]=rUe(iUe[e],{theme:"dark",backgroundColor:"#141414"}),aUe[e].primary=aUe[e][5]}));var lUe={};function uUe(e,t){}function cUe(e,t){}function sUe(e,t,n){t||lUe[n]||(e(!1,n),lUe[n]=!0)}function dUe(e,t){sUe(uUe,e,t)}function fUe(e,t){sUe(cUe,e,t)}function hUe(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function pUe(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}dUe.preMessage=function(e){},dUe.resetWarned=function(){lUe={}},dUe.noteOnce=fUe;var vUe,gUe,mUe,yUe,bUe,wUe,_Ue,xUe,kUe,CUe,SUe,OUe,EUe,IUe,PUe,MUe,RUe,AUe,jUe,DUe,TUe,FUe,NUe,LUe,BUe,VUe,zUe,HUe,WUe,UUe,GUe,YUe,$Ue,qUe,KUe,XUe,JUe,ZUe,QUe,eGe,tGe,nGe,rGe,iGe,oGe,aGe,lGe,uGe,cGe,sGe,dGe,fGe,hGe,pGe,vGe,gGe,mGe,yGe,bGe,wGe,_Ge,xGe,kGe="data-rc-order",CGe="data-rc-priority",SGe="rc-util-key",OGe=new Map;function EGe(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):SGe}function IGe(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function PGe(e){return Array.from((OGe.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function MGe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!hUe())return null;var n=t.csp,r=t.prepend,i=t.priority,o=void 0===i?0:i,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),l="prependQueue"===a,u=document.createElement("style");u.setAttribute(kGe,a),l&&o&&u.setAttribute(CGe,"".concat(o)),null!=n&&n.nonce&&(u.nonce=null==n?void 0:n.nonce),u.innerHTML=e;var c=IGe(t),s=c.firstChild;if(r){if(l){var d=(t.styles||PGe(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(kGe)))return!1;var t=Number(e.getAttribute(CGe)||0);return o>=t}));if(d.length)return c.insertBefore(u,d[d.length-1].nextSibling),u}c.insertBefore(u,s)}else c.appendChild(u);return u}function RGe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=IGe(n),i=PGe(r),o=MWe(MWe({},n),{},{styles:i});!function(e,t){var n=OGe.get(e);if(!n||!pUe(document,n)){var r=MGe("",t),i=r.parentNode;OGe.set(e,i),e.removeChild(r)}}(r,o);var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=IGe(t);return(t.styles||PGe(n)).find((function(n){return n.getAttribute(EGe(t))===e}))}(t,o);if(a){var l,u,c;if(null!==(l=o.csp)&&void 0!==l&&l.nonce&&a.nonce!==(null===(u=o.csp)||void 0===u?void 0:u.nonce))a.nonce=null===(c=o.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=MGe(e,o);return s.setAttribute(EGe(o),t),s}function AGe(){if(yUe)return mUe;yUe=1;var e=function(){if(gUe)return vUe;gUe=1;var e="object"==ex(Dx)&&Dx&&Dx.Object===Object&&Dx;return vUe=e}(),t="object"==("undefined"==typeof self?"undefined":ex(self))&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return mUe=n}function jGe(){if(wUe)return bUe;wUe=1;var e=AGe().Symbol;return bUe=e}function DGe(){if(MUe)return PUe;MUe=1;var e=jGe(),t=function(){if(OUe)return SUe;OUe=1;var e=jGe(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;return SUe=function(e){var t=n.call(e,i),o=e[i];try{e[i]=void 0;var a=!0}catch(e){}var l=r.call(e);return a&&(t?e[i]=o:delete e[i]),l},SUe}(),n=function(){if(IUe)return EUe;IUe=1;var e=Object.prototype.toString;return EUe=function(t){return e.call(t)},EUe}(),r=e?e.toStringTag:void 0;return PUe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)},PUe}function TGe(){if(DUe)return jUe;DUe=1;var e=DGe(),t=(AUe||(AUe=1,RUe=function(e){return null!=e&&"object"==ex(e)}),RUe);return jUe=function(n){return"symbol"==ex(n)||t(n)&&"[object Symbol]"==e(n)},jUe}function FGe(){if(FUe)return TUe;FUe=1;var e=jGe(),t=xUe?_Ue:(xUe=1,_Ue=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}),n=function(){if(CUe)return kUe;CUe=1;var e=Array.isArray;return kUe=e}(),r=TGe(),i=e?e.prototype:void 0,o=i?i.toString:void 0;return TUe=function e(i){if("string"==typeof i)return i;if(n(i))return t(i,e)+"";if(r(i))return o?o.call(i):"";var a=i+"";return"0"==a&&1/i==-1/0?"-0":a},TUe}function NGe(){if(LUe)return NUe;LUe=1;var e=FGe();return NUe=function(t){return null==t?"":e(t)},NUe}function LGe(){if(HUe)return zUe;HUe=1;var e=VUe?BUe:(VUe=1,BUe=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o});return zUe=function(t,n,r){var i=t.length;return r=void 0===r?i:r,!n&&r>=i?t:e(t,n,r)}}function BGe(){if(UUe)return WUe;UUe=1;var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");return WUe=function(t){return e.test(t)}}function VGe(){if(XUe)return KUe;XUe=1;var e=YUe?GUe:(YUe=1,GUe=function(e){return e.split("")}),t=BGe(),n=function(){if(qUe)return $Ue;qUe=1;var e="\\ud800-\\udfff",t="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+r+")?",u="[\\ufe0e\\ufe0f]?",c=u+l+"(?:\\u200d(?:"+[i,o,a].join("|")+")"+u+l+")*",s="(?:"+[i+n+"?",n,o,a,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+s+c,"g");return $Ue=function(e){return e.match(d)||[]}}();return KUe=function(r){return t(r)?n(r):e(r)}}function zGe(){if(eGe)return QUe;eGe=1;var e=function(){if(ZUe)return JUe;ZUe=1;var e=LGe(),t=BGe(),n=VGe(),r=NGe();return JUe=function(i){return function(o){o=r(o);var a=t(o)?n(o):void 0,l=a?a[0]:o.charAt(0),u=a?e(a,1).join(""):o.slice(1);return l[i]()+u}},JUe}(),t=e("toUpperCase");return QUe=t}function HGe(){if(uGe)return lGe;uGe=1;var e=(aGe||(aGe=1,oGe=function(e){return function(t){return null==e?void 0:e[t]}}),oGe),t=e({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});return lGe=t}function WGe(){if(yGe)return mGe;yGe=1;var e=function(){if(fGe)return dGe;fGe=1;var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;return dGe=function(t){return t.match(e)||[]}}(),t=function(){if(pGe)return hGe;pGe=1;var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;return hGe=function(t){return e.test(t)}}(),n=NGe(),r=function(){if(gGe)return vGe;gGe=1;var e="\\ud800-\\udfff",t="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+i+"]",a="\\d+",l="["+t+"]",u="["+n+"]",c="[^"+e+i+a+t+n+r+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="["+r+"]",h="(?:"+u+"|"+c+")",p="(?:"+f+"|"+c+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",g="(?:['’](?:D|LL|M|RE|S|T|VE))?",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",b=y+m+"(?:\\u200d(?:"+["[^"+e+"]",s,d].join("|")+")"+y+m+")*",w="(?:"+[l,s,d].join("|")+")"+b,_=RegExp([f+"?"+u+"+"+v+"(?="+[o,f,"$"].join("|")+")",p+"+"+g+"(?="+[o,f+h,"$"].join("|")+")",f+"?"+h+"+"+v,f+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,w].join("|"),"g");return vGe=function(e){return e.match(_)||[]}}();return mGe=function(i,o,a){return i=n(i),void 0===(o=a?void 0:o)?t(i)?r(i):e(i):i.match(o)||[]}}function UGe(){if(wGe)return bGe;wGe=1;var e=iGe?rGe:(iGe=1,rGe=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}),t=function(){if(sGe)return cGe;sGe=1;var e=HGe(),t=NGe(),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");return cGe=function(i){return(i=t(i))&&i.replace(n,e).replace(r,"")}}(),n=WGe(),r=RegExp("['’]","g");return bGe=function(i){return function(o){return e(n(t(o).replace(r,"")),i,"")}},bGe}var GGe=Tx(function(){if(xGe)return _Ge;xGe=1;var e=function(){if(nGe)return tGe;nGe=1;var e=NGe(),t=zGe();return tGe=function(n){return t(e(n).toLowerCase())}}(),t=UGe()((function(t,n,r){return n=n.toLowerCase(),t+(r?e(n):n)}));return _Ge=t}());function YGe(e){return"object"===ex(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===ex(e.icon)||"function"==typeof e.icon)}function $Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[GGe(n)]=r;return t}),{})}function qGe(e,t,n){return n?u.a.createElement(e.tag,MWe(MWe({key:t},$Ge(e.attrs)),n),(e.children||[]).map((function(n,r){return qGe(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):u.a.createElement(e.tag,MWe({key:t},$Ge(e.attrs)),(e.children||[]).map((function(n,r){return qGe(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function KGe(e){return rUe(e)[0]}function XGe(e){return e?Array.isArray(e)?e:[e]:[]}var JGe=["icon","className","onClick","style","primaryColor","secondaryColor"],ZGe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var QGe=function(e){var t,n,r=e.icon,i=e.className,o=e.onClick,a=e.style,u=e.primaryColor,c=e.secondaryColor,s=EWe(e,JGe),d=ZGe;if(u&&(d={primaryColor:u,secondaryColor:c||KGe(u)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=Object(l.useContext)(IWe).csp;Object(l.useEffect)((function(){RGe(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=YGe(r),n="icon should be icon definiton, but got ".concat(r),dUe(t,"[@ant-design/icons] ".concat(n)),!YGe(r))return null;var f=r;return f&&"function"==typeof f.icon&&(f=MWe(MWe({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),qGe(f.icon,"svg-".concat(f.name),MWe({className:i,onClick:o,style:a,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};function eYe(e){var t=jF(XGe(e),2),n=t[0],r=t[1];return QGe.setTwoToneColors({primaryColor:n,secondaryColor:r})}QGe.displayName="IconReact",QGe.getTwoToneColors=function(){return MWe({},ZGe)},QGe.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;ZGe.primaryColor=t,ZGe.secondaryColor=n||KGe(t),ZGe.calculated=!!n};var tYe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];eYe("#1890ff");var nYe=l.forwardRef((function(e,t){var n=e.className,r=e.icon,i=e.spin,o=e.rotate,a=e.tabIndex,u=e.onClick,c=e.twoToneColor,s=EWe(e,tYe),d=l.useContext(IWe),f=d.prefixCls,h=void 0===f?"anticon":f,p=d.rootClassName,v=F()(p,h,nx(nx({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!i||"loading"===r.name),n),g=a;void 0===g&&u&&(g=-1);var m=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,y=jF(XGe(c),2),b=y[0],w=y[1];return l.createElement("span",MWe(MWe({role:"img","aria-label":r.name},s),{},{ref:t,tabIndex:g,onClick:u,className:v}),l.createElement(QGe,{icon:r,primaryColor:b,secondaryColor:w,style:m}))}));nYe.displayName="AntdIcon",nYe.getTwoToneColor=function(){var e=QGe.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},nYe.setTwoToneColor=eYe;var rYe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},iYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:rYe}))},oYe=l.forwardRef(iYe),aYe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},lYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:aYe}))},uYe=l.forwardRef(lYe),cYe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},sYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:cYe}))},dYe=l.forwardRef(sYe),fYe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},hYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:fYe}))},pYe=l.forwardRef(hYe),vYe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},gYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:vYe}))},mYe=l.forwardRef(gYe),yYe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},bYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:yYe}))},wYe=l.forwardRef(bYe),_Ye={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},xYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:_Ye}))},kYe=l.forwardRef(xYe),CYe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},SYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:CYe}))},OYe=l.forwardRef(SYe),EYe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},IYe=function(e,t){return l.createElement(nYe,MWe(MWe({},e),{},{ref:t,icon:EYe}))},PYe=l.forwardRef(IYe),MYe=["className","onSearch","onClear","allowClear","placeholder"];function RYe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AYe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RYe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RYe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jYe(e,t,n){return t=DC(t),jC(e,DYe()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function DYe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DYe=function(){return!!e})()}var TYe=function(e){function t(e){var n;return rx(this,t),(n=jYe(this,t,[e])).onClear=function(e){var t=n.props,r=t.onChange,i=t.onClear;n.input.focus(),n.setState({value:""}),r&&r(e),i&&i(e)},n.onChange=function(e){var t=n.props.onChange,r=e.target.value;n.setState({value:r}),t&&t(e)},n.onSearch=function(e){var t=n.props.onSearch;t&&t(e.target.value,e)},n.focus=function(){n.input.focus()},n.state={value:""},n}return NC(t,e),ox(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className;t.onSearch,t.onClear;var r=t.allowClear,i=t.placeholder,o=void 0===i?wx("搜索"):i,a=EWe(t,MYe),l=r&&this.state.value?u.a.createElement("span",{className:"lt-input-search-close-icon",onClick:this.onClear},u.a.createElement(mYe,null)):null;return u.a.createElement(d.a,AYe(AYe({onPressEnter:this.onSearch,placeholder:o},a),{},{prefix:u.a.createElement(OYe,null),suffix:l,onChange:this.onChange,value:this.state.value,ref:function(t){e.input=t},allowClear:!1,spellCheck:"true",autoComplete:"off",className:F()("lt-input-search",n)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&e.value!==t.value?{value:e.value}:null}}])}(l.Component),FYe=["className"];function NYe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var LYe=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,FYe);return u.a.createElement(d.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NYe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NYe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,className:F()("lt-input",n),autoComplete:"false"},r))}));function BYe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VYe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BYe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BYe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}SG(LYe,d.a),LYe.Search=TYe,LYe.TextArea=d.a.TextArea;var zYe=function(e){var t=Object(l.useRef)(),n=e.onChange;return u.a.createElement(LYe,VYe(VYe({},e),{},{autoComplete:"off",onChange:function(e){t.current||null==n||n(e)},onCompositionStart:function(){t.current=!0},onCompositionEnd:function(e){t.current=!1,null==n||n(e)}}))},HYe=["allowEnter","onSave","maxRows","rows"];function WYe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UYe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WYe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WYe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GYe=LYe.TextArea,YYe="lakex-editor-for-keyboard-input",$Ye=u.a.forwardRef((function(e,t){var n=e.allowEnter,r=void 0!==n&&n;e.onSave;var i=e.maxRows,o=e.rows,a=void 0===o?1:o,c=EWe(e,HYe),s=Object(l.useRef)(null),d=jF(Object(l.useState)(e.value||""),2),f=d[0],h=d[1];Object(l.useLayoutEffect)((function(){Ax(e.value)||h(e.value)}),[e.value]),Object(l.useImperativeHandle)(t,(function(){return{focus:function(e){var t;null==(t=s.current)||t.focus(e)},blur:function(){var e;null==(e=s.current)||e.blur()},setCursorToEnd:function(){p()},setValue:function(e){h(e)},getValue:function(){return f},clearValue:function(){h("")}}}));var p=Object(l.useCallback)((function(){setTimeout((function(){var e=document.activeElement;e&&e.classList.contains(YYe)&&(r?e.scrollTop=e.scrollHeight:e.scrollLeft=e.scrollWidth)}),100)}),[r]),v=Object(l.useMemo)((function(){return i?{minRows:a,maxRows:i}:{minRows:a}}),[]),g=Object(l.useCallback)((function(t){var n,r=t.target.value;h(r),null==(n=e.onChange)||n.call(e,t)}),[e.onChange]);return r?u.a.createElement(GYe,UYe(UYe({autoSize:v,ref:s},c),{},{value:f,onChange:g,className:F()(YYe,e.className),autoComplete:"off",onMouseDown:Fze,onMouseMove:Fze,onMouseUp:Fze,onFocus:e.onFocus,onBlur:e.onBlur})):u.a.createElement(LYe,UYe(UYe({ref:s},c),{},{value:f,onChange:g,className:F()(YYe,e.className),autoComplete:"off",onMouseDown:Fze,onMouseMove:Fze,onMouseUp:Fze,onFocus:e.onFocus,onBlur:e.onBlur}))}));function qYe(){var e=jF(Object(l.useState)(0),2);e[0];var t=e[1];return function(){return t((function(e){return e+1}))}}var KYe=Rf.defineToken("HotKeyServiceToken"),XYe=Rf.defineToken("HotkeyContribution"),JYe={preventDefault:!1,enableOnInput:!1,isEnable:function(){return!0}},ZYe={esc:EG.ESC,left:EG.LEFT,up:EG.UP,right:EG.RIGHT,down:EG.DOWN,enter:EG.ENTER,tab:EG.TAB,space:EG.SPACE,del:EG.DEL,backspace:EG.BACKSPACE},QYe=Object.keys(ZYe).reduce((function(e,t){return e[ZYe[t]]=t,e}),{});function e$e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return QYe[e]||e.toUpperCase()}function t$e(e){return Px(e)?yO.isMac?e:e.replace(/⌘/g,"ctrl").replace(/option/g,"alt"):(console.error("hotKey needs to be string!"),"")}var n$e=function(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey,i=e.shiftKey,o=e.key,a=nx({"⌘":r,ctrl:n,shift:i,alt:t},o,e$e(o)),l=Object.keys(a).reduce((function(e,t){var n=a[t];return n&&e.push(Px(n)?n:t),e}),[]).sort((function(e,t){return Number(e)-Number(t)})).join("+");return l},r$e=function(e){return Px(e)?e.split(/[,]\s+/):[]},i$e={adapterHotKey:t$e,isKeyboardEventMatchingHotkey:function(e,t){var n=n$e(e),r=t$e(t);return(r$e(r)||[]).some((function(e){return e===n}))},getFormatHotkey:e$e,keyEventToHotKey:n$e};function o$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a$e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o$e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l$e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u$e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u$e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function u$e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c$e=Object.defineProperty,s$e=Object.getOwnPropertyDescriptor,d$e=function(e,t,n,r){for(var i,o=r>1?void 0:r?s$e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&c$e(t,n,o),o},f$e=function(){return ox((function e(){rx(this,e),this._hotkeys=new Map,this._hotkeyToCommandId=new Map,this._init=!1}),[{key:"init",value:function(){if(!this._init){this._init=!0;var e,t=l$e(this._hotkeyPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerHotkey(this)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}},{key:"registerItem",value:function(e){var t=this,n=e.id,r=e.hotkey;if(this._hotkeys.has(n))throw new Error("A hotkey is already registered with the id '".concat(n,"'"));this._hotkeys.set(n,a$e(a$e({},e),{},{preventDefault:Ax(e.preventDefault)?JYe.preventDefault:e.preventDefault,enableOnInput:Ax(e.enableOnInput)?JYe.enableOnInput:e.enableOnInput,isEnable:Ax(e.isEnable)?JYe.isEnable:e.isEnable})),r$e(r).forEach((function(e){var r=i$e.adapterHotKey(e),i=t._hotkeyToCommandId.get(r)||[];i.push(n),t._hotkeyToCommandId.set(r,i)}))}},{key:"getRegisterHotkeyIdsByPressedKey",value:function(e){return this._hotkeyToCommandId.get(e)}},{key:"getHotkeyItem",value:function(e){return this._hotkeys.get(e)}},{key:"getHotkeyItems",value:function(){return this._hotkeys.values()}},{key:"unRegister",value:function(){this._hotkeys.clear(),this._hotkeyToCommandId.clear()}}])}();function h$e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p$e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p$e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function p$e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}d$e([gh(XYe)],f$e.prototype,"_hotkeyPluginProvider",2),f$e=d$e([Gf()],f$e);var v$e=Object.defineProperty,g$e=Object.getOwnPropertyDescriptor,m$e=function(e,t,n,r){for(var i,o=r>1?void 0:r?g$e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&v$e(t,n,o),o},y$e=["copy","paste","cut"],b$e=function(){return ox((function e(){rx(this,e),this._toDestroyStore=new KC,this._ignoreEnableOnInputVerify=!1}),[{key:"init",value:function(){this._hotkeyRegister.init(),this._$container=document,this._hotkeyListenerBindEvents()}},{key:"_getTargetHotkeyByEvent",value:function(e){var t=this._getPotentialHotkeyIdsByEvent(e);return this._getEnableHotkey(e,t)}},{key:"fireEventByEditable",value:function(e,t){this._ignoreEnableOnInputVerify=!0,this._dispatchEvent(e,t),this._ignoreEnableOnInputVerify=!1}},{key:"_dispatchEvent",value:function(e,t){var n=null;Cc(t)&&y$e.includes(t)&&(n=this._hotkeyRegister.getHotkeyItem(t)),t||(n=this._getTargetHotkeyByEvent(e))&&e.preventDefault(),n&&this._isValidEventInThisHotKey(e,n)&&this._runHotkeyCallBack(e,n)}},{key:"registerItem",value:function(e){this._hotkeyRegister.registerItem(e)}},{key:"getRegisterHotKeys",value:function(){return this._hotkeyRegister.getHotkeyItems()}},{key:"_hotkeyListenerBindEvents",value:function(){var e=this;this._toDestroyStore.push(Dze(this._$container,"keydown",(function(t){e._dispatchEvent(t)}))),y$e.forEach((function(t){e._toDestroyStore.push(Dze(document,t,(function(n){e._dispatchEvent(n,t)})))}))}},{key:"_getPotentialHotkeyIdsByEvent",value:function(e){var t=i$e.keyEventToHotKey(e);return this._hotkeyRegister.getRegisterHotkeyIdsByPressedKey(t)}},{key:"_getEnableHotkey",value:function(e,t){if(t){var n,r=h$e(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this._hotkeyRegister.getHotkeyItem(i);if(this._isValidEventInThisHotKey(e,o))return o}}catch(e){r.e(e)}finally{r.f()}}}},{key:"_isValidEventInThisHotKey",value:function(e,t){var n,r,i,o,a,l;return!(!e||!t)&&(!(!this._ignoreEnableOnInputVerify&&(r=e,i=r.target,o=i&&i.tagName,a=Boolean(o&&Nze.some((function(e){return e.toLocaleLowerCase()===o.toLocaleLowerCase()}))),l=!!(null==i?void 0:i.isContentEditable),a||l)&&!t.enableOnInput)&&(!!this._activeTableService.isActive&&(!!(null==(n=t.isEnable)?void 0:n.call(t))||(Fze(e),e.preventDefault(),!1))))}},{key:"_runHotkeyCallBack",value:function(e,t){t&&(t.preventDefault&&e.preventDefault(),t.onHotKey(e))}},{key:"destroy",value:function(){this._toDestroyStore.destroy(),this._hotkeyRegister.unRegister()}}])}();m$e([Yf(f$e)],b$e.prototype,"_hotkeyRegister",2),m$e([Yf(Aze)],b$e.prototype,"_activeTableService",2),b$e=m$e([Gf({token:KYe})],b$e);var w$e=ch().contribution(XYe).register(b$e).register(f$e);function _$e(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}function x$e(e){var t=Object(l.useRef)(_$e);Object(l.useLayoutEffect)((function(){t.current=e}),[e]);var n=Object(l.useRef)(null);return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function k$e(e,t,n){var r=Object(l.useRef)(null),i=x$e(t);return Object(l.useLayoutEffect)((function(){var t=function(t){if(null!==r.current&&document.activeElement!==r.current&&!r.current.contains(document.activeElement))return Fze(t),void t.preventDefault();r$e(e).forEach((function(e){i$e.isKeyboardEventMatchingHotkey(t,e)&&i(t)}))};return(r.current||document).addEventListener("keydown",t),function(){(r.current||document).removeEventListener("keydown",t)}}),[e,i]),r}function C$e(e,t,n){var r=this,i=Object(l.useRef)(null),o=Object(l.useRef)(0),a=Object(l.useRef)(),u=Object(l.useRef)([]),c=Object(l.useRef)(),s=Object(l.useRef)(),d=Object(l.useRef)(e),f=Object(l.useRef)(!0);Object(l.useEffect)((function(){d.current=e}),[e]);var h=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=t||0;var p=!!(n=n||{}).leading,v=!("trailing"in n)||!!n.trailing,g="maxWait"in n,m=g?Math.max(n.maxWait||0,t):null;Object(l.useEffect)((function(){return f.current=!0,function(){f.current=!1}}),[]);var y=Object(l.useMemo)((function(){var e=function(e){var t=u.current,n=c.current;return u.current=c.current=[],o.current=e,s.current=d.current.apply(n,t)},n=function(e,t){h&&a.current&&cancelAnimationFrame(a.current),a.current=h?requestAnimationFrame(e):setTimeout(e,t)},l=function(e){if(!f.current)return!1;var n=e-(i.current||0),r=e-o.current;return!i.current||n>=(t||0)||n<0||g&&r>=(m||0)},y=function(t){return a.current=null,v&&u.current?e(t):(u.current=c.current=null,s.current)},b=function(){var e=Date.now();if(l(e))return y(e);if(f.current){var r=e-(i.current||0),a=e-o.current,u=(t||0)-r,c=g?Math.min(u,(m||0)-a):u;n(b,c)}},w=function(){for(var d=Date.now(),h=l(d),v=arguments.length,m=new Array(v),y=0;y<v;y++)m[y]=arguments[y];if(u.current=m,c.current=r,i.current=d,h){if(!a.current&&f.current)return o.current=i.current,n(b,t||0),p?e(i.current):s.current;if(g)return n(b,t||0),e(i.current)}return a.current||n(b,t||0),s.current};return w.cancel=function(){a.current&&(h?cancelAnimationFrame(a.current):clearTimeout(a.current)),o.current=0,u.current=i.current=c.current=a.current=null},w.isPending=function(){return!!a.current},w.flush=function(){return a.current?y(Date.now()):s.current},w}),[p,g,t,m,v,h]);return Object(l.useEffect)((function(){return function(){y.flush()}}),[y]),y}function S$e(e){var t=jF(Object(l.useState)({bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}),2),n=t[0],r=t[1],i=Object(l.useRef)(),o=Object(l.useRef)(),a=Object(l.useCallback)((function(e){return e.width!==(null==n?void 0:n.width)||e.height!==(null==n?void 0:n.height)||e.left!==(null==n?void 0:n.left)||e.right!==(null==n?void 0:n.right)||e.top!==(null==n?void 0:n.top)||e.bottom!==(null==n?void 0:n.bottom)||e.x!==(null==n?void 0:n.x)||e.y!==(null==n?void 0:n.y)}),[n]);C$e((function(e){r(e)}),300);var u=Object(l.useCallback)((function(e){var t,n;null==(t=o.current)||t.disconnect(),null!=i.current&&cancelAnimationFrame(i.current),e&&(null==(n=o.current)||n.unobserve(e))}),[o.current]),c=Object(l.useCallback)((function(e){r(e)}),[]);return[n,function(e){null!==e&&(o.current=new ResizeObserver((function(t){u(e),i.current=requestAnimationFrame((function(){var e=t[0].contentRect.toJSON();a(e)&&r(e)}))})),o.current.observe(e))},u,c]}function O$e(e){var t=e.value,n=e.defaultValue,r=e.onChange,i=Array.isArray(t)?t.map((function(e){return"string"==typeof e?e:e.value?e.value:e.name?e.name:e})).join(","):t,o=qYe(),a=Object(l.useRef)(void 0!==t?t:n),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="function"==typeof e?e(a.current):e;(t||n!==a.current)&&(a.current=n,o(),null==r||r(n))};return Object(l.useEffect)((function(){void 0===t||Oc(t,a.current)||u(t)}),[i]),[a.current,u]}var E$e=function(e){var t=Object(l.useRef)(e);t.current=e,Object(l.useEffect)((function(){return function(){return t.current()}}),[])},I$e=function(){var e,t=SWe(TF),n=jF(Object(l.useState)(null==(e=t.getCurrent)?void 0:e.call(t)),2),r=n[0],i=n[1];return P$e((function(){t.onChange((function(e){i(e)}))}),[]),{themeService:t,currentTheme:r}};function P$e(e,t){var n=SWe(pT);Object(l.useEffect)((function(){var t;try{t=e()}catch(e){n.error(e)}if(t)return t}),t)}var M$e=Object.freeze({Translate:{toString:function(e){if(e){var t=e.x,n=e.y;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}}},Scale:{toString:function(e){if(e)return"scaleX("+e.scaleX+") scaleY("+e.scaleY+")"}},Transform:{toString:function(e){if(e)return[M$e.Translate.toString(e),M$e.Scale.toString(e)].join(" ")}},Transition:{toString:function(e){return e.property+" "+e.duration+"ms "+e.easing}}}),R$e=["onKeyDown"],A$e=["className"];function j$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D$e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j$e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T$e=[37,38,39,40],F$e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N$e=function(e){var t,n=e.onKeyDown,r=EWe(e,R$e),i=Object(l.useCallback)((t=n,function(e){return!(!F$e.includes(e.key)&&!T$e.includes(e.keyCode))||t(e)}),[n]);return u.a.createElement("ul",D$e(D$e({},r),{},{onKeyDown:i}))},L$e=u.a.forwardRef((function(e){var t=e.className,n=EWe(e,A$e);return u.a.createElement(f.a,D$e({className:F()("lt-menu",t),component:N$e},n))}));SG(L$e,f.a),L$e.Item=f.a.Item,L$e.ItemGroup=f.a.ItemGroup;var B$e=["className","overlayClassName"];function V$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z$e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V$e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H$e=u.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,i=EWe(e,B$e);return u.a.createElement(h.a,z$e(z$e({},i),{},{className:F()(n,"lt-popover"),overlayClassName:F()(r,"lt-popover-container"),ref:t}))}));SG(H$e,h.a);var W$e=Rf.defineToken("IconContribution"),U$e={CommentBubble:N.default,Edit:L.default,Delete:B.default,ReviewArrowRight:V.default,MoreHorizontal:z.default,ArrowDown:H.default,ArrowUp:W.default,ArrowRight:U.default,ArrowLeft:G.default,Addlink:Y.default,Add:$.default,Check:q.default,Question:K.default,Close:X.default,Drag:J.default,Preview:Z.default,Download:Q.default,EditorPaste:ee.default,FieldText:te.default,FieldSelect:ne.default,FieldMultiSelect:re.default,FieldEmail:ie.default,FieldInput:oe.default,FieldFile:ae.default,FieldImage:le.default,FieldLink:ue.default,FieldCreator:ce.default,FieldModifier:se.default,FieldNumber:de.default,FieldMention:fe.default,FieldPhone:he.default,FieldCheckbox:pe.default,FieldDate:ve.default,FieldCreatedAt:ge.default,FieldUpdatedAt:me.default,FieldRate:ye.default,FieldProgress:be.default,RowExpand:we.default,RowCollpse:_e.default,Search:xe.default,UpArrow:ke.default,DownArrow:Ce.default,RightArrow:Se.default,LeftArrow:Oe.default,IconHide:Ee.default,RowHeightLow:Ie.default,RowHeightMiddle:Pe.default,RowHeightHigh:Me.default,GridView:Re.default,CardView:Ae.default,KanbanView:je.default,Clear:De.default,ViewerFilter:Te.default,ViewerSort:Fe.default,ViewerGroup:Ne.default,Setting:Le.default,ReviewArrowDown:Be.default,Fullscreen:Ve.default,FullWidth:ze.default,NormalWidth:He.default,FormView:We.default,Copy:Ue.default,FileDefault:Ge.default,FileDefaultDark:Ye.default,FileAi:$e.default,FileAiDark:qe.default,FileExcel:Ke.default,FileExcelDark:Xe.default,FileAudio:Je.default,FileAudioDark:Ze.default,FileAxure:Qe.default,FileAxureDark:et.default,FileDoc:tt.default,FileDocDark:nt.default,FileGraffle:rt.default,FileGraffleDark:it.default,FileImage:ot.default,FileImageDark:at.default,FileKeynote:lt.default,FileKeynoteDark:ut.default,FileMindmap:ct.default,FileMindmapDark:st.default,FileMindnode:dt.default,FileMindnodeDark:ft.default,FileXmind:ht.default,FileXmindDark:pt.default,FileTxt:vt.default,FileTxtDark:gt.default,FileNumbers:mt.default,FileNumbersDark:yt.default,FileFolder:bt.default,FileFolderDark:wt.default,FilePdf:_t.default,FilePdfDark:xt.default,FilePpt:kt.default,FilePptDark:Ct.default,FilePsd:St.default,FilePsdDark:Ot.default,FileRar:Et.default,FileRarDark:It.default,FileSheet:Pt.default,FileSheetDark:Mt.default,FileSketch:Rt.default,FileSketchDark:At.default,FileVideo:jt.default,FileVideoDark:Dt.default,FileWord:Tt.default,FileWordDark:Ft.default,Loading:Nt.default,Upload:Lt.default,NavBuildarea:Bt.default,NavDay:Vt.default,NavNight:zt.default,Change:Ht.default,DocTypeDefault:Wt.default,DocTypeDefaultDark:Ut.default,DocTypeSheet:Gt.default,DocTypeSheetDark:Yt.default,DocTypeMarkdown:$t.default,DocTypeMarkdownDark:qt.default,DocTypeTable:Kt.default,DocTypeTableDark:Xt.default,DocTypeBoard:Jt.default,DocTypeBoardDark:Zt.default,DocTypeMind:Qt.default,DocTypeMindDark:en.default,DocTypeShow:tn.default,DocTypeShowDark:nn.default,DocTypeNote:rn.default,DocTypeNoteDark:on.default,DocTypeArtboard:an.default,DocTypeArtboardDark:ln.default,Star:un.default,Calendar:cn.default,Brush:sn.default,EditorCellBgColor:dn.default,QRCode:function(e){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"rgb(var(--lt-base-white))",className:"larkui-icon larkui-icon-qrcode ".concat(e.className),viewBox:"-5 -5 35 35"},l.createElement("circle",{cx:"0.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"0.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"0.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"0.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"1.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"2.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"2.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"2.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"2.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"2.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"3.5",r:"1.5",fill:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"3.5",cy:"3.5",r:"3",fill:"none",stroke:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"3.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"3.5",cy:"21.5",r:"1.5",fill:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"3.5",cy:"21.5",r:"3",fill:"none",stroke:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"4.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"4.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"4.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"5.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"5.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"5.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"6.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"6.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"6.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"6.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"6.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"7.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"6.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"8.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"9.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"1.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"2.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"6.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"10.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"1.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"11.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"1.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"2.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"6.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"12.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"1.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"13.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"6.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"14.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"4.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"15.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"0.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"3.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"4.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"5.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"6.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"7.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"16.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"17.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"18.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"18.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"18.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"18.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"18.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"9.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"19.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"15.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"20.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"21.5",cy:"3.5",r:"1.5",fill:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"21.5",cy:"3.5",r:"3",fill:"none",stroke:"rgb(var(--lt-base-black))"}),l.createElement("circle",{cx:"21.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"21.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"21.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"21.5",cy:"23.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"21.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"12.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"22.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"22.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"11.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"19.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"20.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"23.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"8.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"10.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"13.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"14.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"16.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"17.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"18.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"21.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}),l.createElement("circle",{cx:"24.5",cy:"24.5",r:"0.25",fill:"rgb(var(--lt-base-black))",opacity:"0.3"}))},Charts:fn.default,Present:hn.default,MoreVertical:pn.default,FilterPacket:vn.default,FilterPacketExpand:gn.default,Lock:mn.default,TextColor:yn.default,TodoView:bn.default},G$e=u.a.createContext({iconMap:{}});G$e.displayName="IconContext";var Y$e=G$e.Provider;G$e.Consumer;var $$e=["type","size","color","className","style"];function q$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K$e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q$e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X$e=function(e){var t=e.type,n=e.size,r=e.color,i=e.className,o=e.style,a=EWe(e,$$e);if(!t)return null;var c=Object(l.useContext)(G$e).iconMap,s=(null==c?void 0:c[t])||U$e[t];if(!s)return null;n=function(e,t){return"FormView"===e&&t&&(t+=1),t}(t,n);var d=K$e({type:t},a);return n&&(d.width=+n,d.height=+n),r&&(o||(o={}),r.startsWith("#")?o.color=r:o.color="rgb(var(--lt-base-".concat(r,"))")),u.a.createElement("span",{className:"lt-icon lt-icon-".concat(t," ").concat(i||""),style:o},u.a.createElement(s,K$e({},d)))},J$e=["ext"];function Z$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Q$e=function(e){e.ext;var t=EWe(e,J$e),n=SWe(TF),r="dark"===(null==n?void 0:n.getCurrent()),i="File"+da(e.ext),o=i;return r&&(o=i+"Dark"),u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z$e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:o},t))},eqe=Object.defineProperty,tqe=Object.getOwnPropertyDescriptor,nqe=function(e,t,n,r){for(var i,o=r>1?void 0:r?tqe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&eqe(t,n,o),o},rqe=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.iconProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerIcon()}},{key:"getIconMap",value:function(){var e,t;return null==(t=null==(e=this.getProvider())?void 0:e.getIconMap)?void 0:t.call(e)}}])}();nqe([gh(W$e)],rqe.prototype,"iconProvider",2),rqe=nqe([Gf()],rqe);var iqe=ch().contribution(W$e).register(rqe);function oqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lqe=function(e){var t=e.menu,n=e.readonly,r=e.defaultSelectedKeys,i=void 0===r?[]:r,o=e.editingKey,a=e.visibleKey,l=e.settingVisible,c=e.onDoubleClick,s=e.onClick,d=e.onInputBlur,f=e.handleVisibleChange;return u.a.createElement(L$e.Item,{key:t.key,eventKey:t.key,icon:t.icon,onDoubleClick:function(e){e.key=t.key,c(e)},onClick:function(){s(t)},className:F()({"lakex-table-menu-item-selected":i.includes(t.key),"lakex-table-menu-item-multi-line":t.desc})},t.key===o?u.a.createElement(LYe,{className:"lakex-table-menu-configs-input",defaultValue:t.title,autoFocus:!0,onKeyDown:function(e){var n;e.stopPropagation();var r=e.keyCode;27!==r?13===r&&(null==(n=t.onTitleChange)||n.call(t,e,t)):d&&d()},onClick:function(e){return e.stopPropagation()},onBlur:function(e){var n;return null==(n=t.onTitleChange)?void 0:n.call(t,e,t)}}):u.a.createElement("span",null,t.title,t.desc&&u.a.createElement("div",{className:"lakex-table-menu-configs-desc"},t.desc)),t.settings&&!n&&u.a.createElement(H$e,{overlayClassName:"lakex-table-menu-container lakex-table-menu-configs-settings",content:u.a.createElement(L$e,{onClick:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.onSettingClick&&t.onSettingClick.apply(t,[t].concat(n)),f(!1,t)}},t.settings.map((function(e,t){return u.a.createElement(lqe,{key:t,readonly:n,menu:e,editingKey:o,visibleKey:a,settingVisible:l,onDoubleClick:c,onClick:s,onInputBlur:d,handleVisibleChange:f})}))),trigger:"click",placement:"rightTop",visible:a===t.key&&l,onVisibleChange:function(e){return f(e,t)}},u.a.createElement(X$e,{type:"MoreHorizontal",size:14,onClick:function(e){return e.stopPropagation()}})),t.showActiveIcon&&u.a.createElement(X$e,{type:"Check",size:14}))},uqe=function(e){var t=e.menu,n=e.index,r=e.readonly,i=e.defaultSelectedKeys,o=void 0===i?[]:i,a=e.editingKey,l=e.visibleKey,c=e.settingVisible,s=e.onDoubleClick,d=e.onClick,f=e.onInputBlur,h=e.handleVisibleChange,p=e.cols,v=t.key?t.key+n:n,g=t.children;if(t.groupBy){var m=t.children.reduce((function(e,n){var r=n[t.groupBy];return e[r]||(e[r]=[]),e[r].push(n),e}),{});Object.values(m).length>1&&(g=m)}var y="";return p&&(y="lakex-table-menu-configs-submenu-col-"+p),u.a.createElement(L$e.SubMenu,{key:v,eventKey:v,icon:t.icon,title:u.a.createElement("span",{className:"lakex-table-menu-item-title"},u.a.createElement("span",null,t.title),u.a.createElement(U.default,{width:16,height:16})),popupClassName:"lakex-table-menu-container lakex-table-menu-configs-submenu ".concat(t.className||""," ").concat(y)},Array.isArray(g)?g.map((function(e,t){return u.a.createElement(lqe,{key:t,readonly:r,menu:e,defaultSelectedKeys:o,editingKey:a,visibleKey:l,settingVisible:c,onDoubleClick:s,onClick:d,onInputBlur:f,handleVisibleChange:h})})):Object.keys(g).map((function(e){return u.a.createElement(L$e.ItemGroup,{key:e,title:e},g[e].map((function(e,t){return u.a.createElement(lqe,{key:t,readonly:r,menu:e,defaultSelectedKeys:o,editingKey:a,visibleKey:l,settingVisible:c,onDoubleClick:s,onClick:d,onInputBlur:f,handleVisibleChange:h})})))})))},cqe=function(e){var t=e.menu,n=e.readonly,r=e.defaultSelectedKeys,i=void 0===r?[]:r,o=e.editingKey,a=e.visibleKey,l=e.settingVisible,c=e.onDoubleClick,s=e.onClick,d=e.onInputBlur,f=e.handleVisibleChange,h=vK({id:t.key}),p=h.attributes,v=h.listeners,g=h.setNodeRef,m=h.transform,y=h.transition,b=h.isDragging,w={transform:M$e.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return u.a.createElement("div",aqe(aqe({key:t.key,ref:g,style:aqe({},w)},v),p),u.a.createElement(lqe,{key:t.key,readonly:n,menu:t,defaultSelectedKeys:i,editingKey:o,visibleKey:a,settingVisible:l,onDoubleClick:c,onClick:s,onInputBlur:d,handleVisibleChange:f}))},sqe=function(e){var t=e.readonly,n=e.configs,r=e.defaultSelectedKeys,i=e.draggable,o=void 0!==i&&i,a=e.editingKey,c=e.visibleKey,s=e.settingVisible,d=e.cols,f=e.onClick,h=e.onDoubleClick,p=e.onDragEnd,v=e.onInputBlur,g=e.handleVisibleChange,m=qY($Y(G$,{activationConstraint:{distance:8}})),y=n.map((function(e,n){var i=e.key?e.key+n:n;return e.children?u.a.createElement(uqe,{key:i,index:n,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:a,visibleKey:c,settingVisible:s,cols:d,onDoubleClick:h,onClick:f,onInputBlur:v,handleVisibleChange:g}):o?u.a.createElement(cqe,{key:i,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:a,visibleKey:c,settingVisible:s,onDoubleClick:h,onClick:f,onInputBlur:v,handleVisibleChange:g}):u.a.createElement(lqe,{key:i,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:a,visibleKey:c,settingVisible:s,onDoubleClick:h,onClick:f,onInputBlur:v,handleVisibleChange:g})})),b=Object(l.useMemo)((function(){return n.map((function(e){return aqe(aqe({},e),{},{id:e.key})}))}),[n]);return o?u.a.createElement(Rq,{sensors:m,modifiers:[xK,wK],collisionDetection:n$,onDragEnd:p},u.a.createElement(uK,{items:b,strategy:oK},y)):y},dqe=function(e){var t=e.readonly,n=void 0!==t&&t,r=e.draggable,i=e.className,o=void 0===i?"":i,a=e.defaultSelectedKeys,c=e.menuKey,s=e.onDragEnd,d=e.onInputBlur,f=e.cols,h=function(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(!1),r=jF(Object(l.useState)(e.configs),2),i=r[0],o=r[1],a=jF(Object(l.useState)(!1),2),u=a[0],c=a[1],s=jF(Object(l.useState)(""),2),d=s[0],f=s[1],h=jF(Object(l.useState)(e.editingKey||""),2),p=h[0],v=h[1];return P$e((function(){v(e.editingKey)}),[e.editingKey]),P$e((function(){o(e.configs)}),[e.configs]),{state:{configs:i,settingVisible:u,visibleKey:d,editingKey:p},timer:t,prevent:n,delay:200,handleVisibleChange:function(e,t){c(e),f(e?t.key:"")},onClick:function(r){e.onDoubleClick?t.current=setTimeout((function(){n.current||null==e||e.onClick(r)}),200):null==e||e.onClick(r)},onDoubleClick:function(r){clearTimeout(t.current),n.current=!0,null==e||e.onDoubleClick(r),setTimeout((function(){n.current=!1}),200)}}}(e),p=h.state,v=h.onClick,g=h.onDoubleClick,m=h.handleVisibleChange,y=p.configs,b=p.editingKey,w=p.visibleKey,_=p.settingVisible;return u.a.createElement(L$e,{className:"lakex-table-menu-configs ".concat(o),mode:"vertical",defaultSelectedKeys:a,key:c},u.a.createElement(sqe,{readonly:n,configs:y,draggable:r,defaultSelectedKeys:a,editingKey:b,visibleKey:w,settingVisible:_,onClick:v,onDoubleClick:g,onDragEnd:s,onInputBlur:d,handleVisibleChange:m,cols:f}))};function fqe(e,t,n){return t=DC(t),jC(e,hqe()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function hqe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hqe=function(){return!!e})()}var pqe=function(e){function t(e){var n;return rx(this,t),(n=fqe(this,t,[e])).state={hasError:!1},n}return NC(t,e),ox(t,[{key:"componentDidCatch",value:function(e,t){var n,r;null==(r=(n=this.props).onError)||r.call(n,e,t)}},{key:"render",value:function(){return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(u.a.Component),vqe=["src","darkSrc","width","height","theme","style","darkAlpha","className","children"];function gqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yqe=function(e){var t=e.src,n=e.darkSrc,r=e.width,i=e.height,o=e.theme,a=e.style,l=e.darkAlpha,c=e.className,s=e.children,d=EWe(e,vqe);r=r||(null==a?void 0:a.width),i=i||(null==a?void 0:a.height);var f=SWe(TF),h=jF(u.a.useState(o||(null==f?void 0:f.getCurrent())),2),p=h[0],v=h[1],g=jF(u.a.useState(p===FF.dark?n:t),2),m=g[0],y=g[1];if(P$e((function(){null==f||f.onChange((function(e){v(e),y(e===FF.dark?n:t)}))}),[]),!m)return null;var b=mqe({width:r,height:i},a);return b.backgroundImage="url(".concat(m,")"),p===FF.dark&&l&&(b.opacity=l),s?u.a.createElement("div",mqe({className:F()("lakex-table-image",c),style:b},d),s):(delete b.backgroundImage,u.a.createElement("img",mqe({src:m,className:F()("lakex-table-image",c),style:b},d)))};yqe.displayName="Image";var bqe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=bqe.F1&&t<=bqe.F12)return!1;switch(t){case bqe.ALT:case bqe.CAPS_LOCK:case bqe.CONTEXT_MENU:case bqe.CTRL:case bqe.DOWN:case bqe.END:case bqe.ESC:case bqe.HOME:case bqe.INSERT:case bqe.LEFT:case bqe.MAC_FF_META:case bqe.META:case bqe.NUMLOCK:case bqe.NUM_CENTER:case bqe.PAGE_DOWN:case bqe.PAGE_UP:case bqe.PAUSE:case bqe.PRINT_SCREEN:case bqe.RIGHT:case bqe.SHIFT:case bqe.UP:case bqe.WIN_KEY:case bqe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=bqe.ZERO&&e<=bqe.NINE)return!0;if(e>=bqe.NUM_ZERO&&e<=bqe.NUM_MULTIPLY)return!0;if(e>=bqe.A&&e<=bqe.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case bqe.SPACE:case bqe.QUESTION_MARK:case bqe.NUM_PLUS:case bqe.NUM_MINUS:case bqe.NUM_PERIOD:case bqe.NUM_DIVISION:case bqe.SEMICOLON:case bqe.DASH:case bqe.EQUALS:case bqe.COMMA:case bqe.PERIOD:case bqe.SLASH:case bqe.APOSTROPHE:case bqe.SINGLE_QUOTE:case bqe.OPEN_SQUARE_BRACKET:case bqe.BACKSLASH:case bqe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function wqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _qe="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),xqe="aria-",kqe="data-";function Cqe(e,t){return 0===e.indexOf(t)}function Sqe(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Cqe(n,xqe))||t.data&&Cqe(n,kqe)||t.attr&&_qe.includes(n))&&(r[n]=e[n])})),r}var Oqe=l.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function Eqe(e,t,n){return(e-t)/(n-t)}function Iqe(e,t,n,r){var i=Eqe(t,n,r),o={};switch(e){case"rtl":o.right="".concat(100*i,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(100*i,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(100*i,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(100*i,"%"),o.transform="translateX(-50%)"}return o}function Pqe(e,t){return Array.isArray(e)?e[t]:e}var Mqe=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"];function Rqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jqe=l.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.value,o=e.valueIndex,a=e.onStartMove,u=e.style,c=e.render,s=e.dragging,d=e.onOffsetChange,f=e.onChangeComplete,h=EWe(e,Mqe),p=l.useContext(Oqe),v=p.min,g=p.max,m=p.direction,y=p.disabled,b=p.keyboard,w=p.range,_=p.tabIndex,x=p.ariaLabelForHandle,k=p.ariaLabelledByForHandle,C=p.ariaValueTextFormatterForHandle,S=p.styles,O=p.classNames,E="".concat(r,"-handle"),I=function(e){y||a(e,o)},P=Iqe(m,i,v,g),M=l.createElement("div",Aqe({ref:t,className:F()(E,nx(nx({},"".concat(E,"-").concat(o+1),w),"".concat(E,"-dragging"),s),O.handle),style:Aqe(Aqe(Aqe({},P),u),S.handle),onMouseDown:I,onTouchStart:I,onKeyDown:function(e){if(!y&&b){var t=null;switch(e.which||e.keyCode){case bqe.LEFT:t="ltr"===m||"btt"===m?-1:1;break;case bqe.RIGHT:t="ltr"===m||"btt"===m?1:-1;break;case bqe.UP:t="ttb"!==m?1:-1;break;case bqe.DOWN:t="ttb"!==m?-1:1;break;case bqe.HOME:t="min";break;case bqe.END:t="max";break;case bqe.PAGE_UP:t=2;break;case bqe.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),d(t,o))}},onKeyUp:function(e){switch(e.which||e.keyCode){case bqe.LEFT:case bqe.RIGHT:case bqe.UP:case bqe.DOWN:case bqe.HOME:case bqe.END:case bqe.PAGE_UP:case bqe.PAGE_DOWN:null==f||f()}},tabIndex:y?null:Pqe(_,o),role:"slider","aria-valuemin":v,"aria-valuemax":g,"aria-valuenow":i,"aria-disabled":y,"aria-label":Pqe(x,o),"aria-labelledby":Pqe(k,o),"aria-valuetext":null==(n=Pqe(C,o))?void 0:n(i),"aria-orientation":"ltr"===m||"rtl"===m?"horizontal":"vertical"},h));return c&&(M=c(M,{index:o,prefixCls:r,value:i,dragging:s})),M})),Dqe=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"];function Tqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fqe=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,i=e.onStartMove,o=e.onOffsetChange,a=e.values,u=e.handleRender,c=e.draggingIndex,s=EWe(e,Dqe),d=l.useRef({});return l.useImperativeHandle(t,(function(){return{focus:function(e){var t;null==(t=d.current[e])||t.focus()}}})),l.createElement(l.Fragment,null,a.map((function(e,t){return l.createElement(jqe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:function(e){e?d.current[t]=e:delete d.current[t]},dragging:c===t,prefixCls:n,style:Pqe(r,t),key:t,value:e,valueIndex:t,onStartMove:i,onOffsetChange:o,render:u},s))})))}));function Nqe(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function Lqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vqe(e){var t=e.prefixCls,n=e.style,r=e.children,i=e.value,o=e.onClick,a=l.useContext(Oqe),u=a.min,c=a.max,s=a.direction,d=a.includedStart,f=a.includedEnd,h=a.included,p="".concat(t,"-text"),v=Iqe(s,i,u,c);return l.createElement("span",{className:F()(p,nx({},"".concat(p,"-active"),h&&d<=i&&i<=f)),style:Bqe(Bqe({},v),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){o(i)}},r)}function zqe(e){var t=e.prefixCls,n=e.marks,r=e.onClick,i="".concat(t,"-mark");return n.length?l.createElement("div",{className:i},n.map((function(e){var t=e.value,n=e.style,o=e.label;return l.createElement(Vqe,{key:t,prefixCls:i,style:n,value:t,onClick:r},o)}))):null}function Hqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uqe(e){var t=e.prefixCls,n=e.value,r=e.style,i=e.activeStyle,o=l.useContext(Oqe),a=o.min,u=o.max,c=o.direction,s=o.included,d=o.includedStart,f=o.includedEnd,h="".concat(t,"-dot"),p=s&&d<=n&&n<=f,v=Wqe(Wqe({},Iqe(c,n,a,u)),"function"==typeof r?r(n):r);return p&&(v=Wqe(Wqe({},v),"function"==typeof i?i(n):i)),l.createElement("span",{className:F()(h,nx({},"".concat(h,"-active"),p)),style:v})}function Gqe(e){var t=e.prefixCls,n=e.marks,r=e.dots,i=e.style,o=e.activeStyle,a=l.useContext(Oqe),u=a.min,c=a.max,s=a.step,d=l.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),r&&null!==s)for(var t=u;t<=c;)e.add(t),t+=s;return Array.from(e)}),[u,c,s,r,n]);return l.createElement("div",{className:"".concat(t,"-step")},d.map((function(e){return l.createElement(Uqe,{prefixCls:t,key:e,value:e,style:i,activeStyle:o})})))}function Yqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qqe(e){var t=e.prefixCls,n=e.style,r=e.start,i=e.end,o=e.index,a=e.onStartMove,u=e.replaceCls,c=l.useContext(Oqe),s=c.direction,d=c.min,f=c.max,h=c.disabled,p=c.range,v=c.classNames,g="".concat(t,"-track"),m=Eqe(r,d,f),y=Eqe(i,d,f),b=function(e){!h&&a&&a(e,-1)},w={};switch(s){case"rtl":w.right="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%");break;case"btt":w.bottom="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;case"ttb":w.top="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;default:w.left="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%")}var _=u||F()(g,nx(nx({},"".concat(g,"-").concat(o+1),null!==o&&p),"".concat(t,"-track-draggable"),a),v.track);return l.createElement("div",{className:_,style:$qe($qe({},w),n),onMouseDown:b,onTouchStart:b})}function Kqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jqe(e){var t=e.prefixCls,n=e.style,r=e.values,i=e.startPoint,o=e.onStartMove,a=l.useContext(Oqe),u=a.included,c=a.range,s=a.min,d=a.styles,f=a.classNames,h=l.useMemo((function(){if(!c){if(0===r.length)return[];var e=null!=i?i:s,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],o=0;o<r.length-1;o+=1)n.push({start:r[o],end:r[o+1]});return n}),[r,c,i,s]),p=null;return(f.tracks||d.tracks)&&(p=l.createElement(qqe,{index:null,prefixCls:t,start:h[0].start,end:h[h.length-1].end,replaceCls:F()(f.tracks,"".concat(t,"-tracks")),style:d.tracks})),u?l.createElement(l.Fragment,null,p,h.map((function(e,r){var i=e.start,a=e.end;return l.createElement(qqe,{index:r,prefixCls:t,style:Xqe(Xqe({},Pqe(n,r)),d.track),start:i,end:a,key:r,onStartMove:o})}))):null}function Zqe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qqe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zqe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zqe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eKe=l.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-slider":n,i=e.className,o=e.style,a=e.classNames,u=e.styles,c=e.disabled,s=void 0!==c&&c,d=e.keyboard,f=void 0===d||d,h=e.autoFocus,p=e.onFocus,v=e.onBlur,g=e.min,m=void 0===g?0:g,y=e.max,b=void 0===y?100:y,w=e.step,_=void 0===w?1:w,x=e.value,k=e.defaultValue,C=e.range,S=e.count,O=e.onChange,E=e.onBeforeChange,I=e.onAfterChange,P=e.onChangeComplete,M=e.allowCross,R=void 0===M||M,A=e.pushable,j=void 0!==A&&A,D=e.draggableTrack,T=e.reverse,N=e.vertical,L=e.included,B=void 0===L||L,V=e.startPoint,z=e.trackStyle,H=e.handleStyle,W=e.railStyle,U=e.dotStyle,G=e.activeDotStyle,Y=e.marks,$=e.dots,q=e.handleRender,K=e.tabIndex,X=void 0===K?0:K,J=e.ariaLabelForHandle,Z=e.ariaLabelledByForHandle,Q=e.ariaValueTextFormatterForHandle,ee=jF(l.useState(!1),2),te=ee[0],ne=ee[1],re=l.useRef(),ie=l.useRef(),oe=l.useMemo((function(){return N?T?"ttb":"btt":T?"rtl":"ltr"}),[T,N]),ae=l.useMemo((function(){return isFinite(m)?m:0}),[m]),le=l.useMemo((function(){return isFinite(b)?b:100}),[b]),ue=l.useMemo((function(){return null!==_&&_<=0?1:_}),[_]),ce=l.useMemo((function(){return"boolean"==typeof j?!!j&&ue:j>=0&&j}),[j,ue]),se=l.useMemo((function(){return Object.keys(Y||{}).map((function(e){var t=Y[e],n={value:Number(e)};return t&&"object"===ex(t)&&!l.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"==typeof t})).sort((function(e,t){return e.value-t.value}))}),[Y]),de=function(e,t,n,r,i,o){var a=l.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),u=l.useCallback((function(r){if(null!==n){var i=e+Math.round((a(r)-e)/n)*n,o=function(e){return(String(e).split(".")[1]||"").length},l=Math.max(o(n),o(t),o(e)),u=Number(i.toFixed(l));return e<=u&&u<=t?u:null}return null}),[n,e,t,a]),c=l.useCallback((function(i){var o=a(i),l=r.map((function(e){return e.value}));null!==n&&l.push(u(i)),l.push(e,t);var c=l[0],s=t-e;return l.forEach((function(e){var t=Math.abs(o-e);t<=s&&(c=e,s=t)})),c}),[e,t,r,n,a,u]),s=function(i,o,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof o){var c,d=i[a],f=d+o,h=[];r.forEach((function(e){h.push(e.value)})),h.push(e,t),h.push(u(d));var p=o>0?1:-1;"unit"===l?h.push(u(d+p*n)):h.push(u(f)),h=h.filter((function(e){return null!==e})).filter((function(e){return o<0?e<=d:e>=d})),"unit"===l&&(h=h.filter((function(e){return e!==d})));var v="unit"===l?d:f;c=h[0];var g=Math.abs(c-v);if(h.forEach((function(e){var t=Math.abs(e-v);t<g&&(c=e,g=t)})),void 0===c)return o<0?e:t;if("dist"===l)return c;if(Math.abs(o)>1){var m=Q_(i);return m[a]=c,s(m,o-p,a,l)}return c}return"min"===o?e:"max"===o?t:void 0},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=e[n],o=s(e,t,n,r);return{value:o,changed:o!==i}},f=function(e){return null===o&&0===e||"number"==typeof o&&e<o};return[c,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e.map(c),l=a[n],u=s(a,t,n,r);if(a[n]=u,!1===i){var h=o||0;n>0&&a[n-1]!==l&&(a[n]=Math.max(a[n],a[n-1]+h)),n<a.length-1&&a[n+1]!==l&&(a[n]=Math.min(a[n],a[n+1]-h))}else if("number"==typeof o||null===o){for(var p=n+1;p<a.length;p+=1)for(var v=!0;f(a[p]-a[p-1])&&v;){var g=d(a,1,p);a[p]=g.value,v=g.changed}for(var m=n;m>0;m-=1)for(var y=!0;f(a[m]-a[m-1])&&y;){var b=d(a,-1,m-1);a[m-1]=b.value,y=b.changed}for(var w=a.length-1;w>0;w-=1)for(var _=!0;f(a[w]-a[w-1])&&_;){var x=d(a,-1,w-1);a[w-1]=x.value,_=x.changed}for(var k=0;k<a.length-1;k+=1)for(var C=!0;f(a[k+1]-a[k])&&C;){var S=d(a,1,k+1);a[k+1]=S.value,C=S.changed}}return{value:a[n],values:a}}]}(ae,le,ue,se,R,ce),fe=jF(de,2),he=fe[0],pe=fe[1],ve=jF(MK(k,{value:x}),2),ge=ve[0],me=ve[1],ye=l.useMemo((function(){var e=null==ge?[]:Array.isArray(ge)?ge:[ge],t=jF(e,1)[0],n=null===ge?[]:[void 0===t?ae:t];if(C){if(n=Q_(e),S||void 0===ge){var r=S>=0?S+1:2;for(n=n.slice(0,r);n.length<r;){var i;n.push(null!==(i=n[n.length-1])&&void 0!==i?i:ae)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=he(e)})),n}),[ge,C,ae,S,he]),be=l.useRef(ye);be.current=ye;var we=function(e){return C?e:e[0]},_e=function(e){var t=Q_(e).sort((function(e,t){return e-t}));O&&!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r.has(t))return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var a=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l],a))return!1;return!0}if(t&&i&&"object"===ex(t)&&"object"===ex(i)){var u=Object.keys(t);return u.length===Object.keys(i).length&&u.every((function(n){return e(t[n],i[n],a)}))}return!1}(e,t)}(t,be.current,!0)&&O(we(t)),me(t)},xe=function(){null==I||I(we(be.current)),null==P||P(we(be.current))},ke=function(e,t,n,r,i,o,a,u,c){var s=jF(l.useState(null),2),d=s[0],f=s[1],h=jF(l.useState(-1),2),p=h[0],v=h[1],g=jF(l.useState(n),2),m=g[0],y=g[1],b=jF(l.useState(n),2),w=b[0],_=b[1],x=l.useRef(null),k=l.useRef(null);l.useEffect((function(){-1===p&&y(n)}),[n,p]),l.useEffect((function(){return function(){document.removeEventListener("mousemove",x.current),document.removeEventListener("mouseup",k.current),document.removeEventListener("touchmove",x.current),document.removeEventListener("touchend",k.current)}}),[]);var C=function(e,t){m.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&f(t),y(e),a(e))},S=function(e,t){if(-1===e){var n=w[0],a=w[w.length-1],l=r-n,u=i-a,s=t*(i-r);s=Math.max(s,l),s=Math.min(s,u);var d=o(n+s);s=d-n;var f=w.map((function(e){return e+s}));C(f)}else{var h=(i-r)*t,p=Q_(m);p[e]=w[e];var v=c(p,h,e,"dist");C(v.values,v.value)}},O=l.useRef(S);O.current=S;var E=l.useMemo((function(){var e=Q_(n).sort((function(e,t){return e-t})),t=Q_(m).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?m:n}),[n,m]);return[p,d,E,function(r,i,o){r.stopPropagation();var a=o||n,l=a[i];v(i),f(l),_(a);var c=Nqe(r),s=c.pageX,d=c.pageY,h=function(n){n.preventDefault();var r,o=Nqe(n),a=o.pageX,l=o.pageY,u=a-s,c=l-d,f=e.current.getBoundingClientRect(),h=f.width,p=f.height;switch(t){case"btt":r=-c/p;break;case"ttb":r=c/p;break;case"rtl":r=-u/h;break;default:r=u/h}O.current(i,r)},p=function(e){e.preventDefault(),document.removeEventListener("mouseup",p),document.removeEventListener("mousemove",h),document.removeEventListener("touchend",p),document.removeEventListener("touchmove",h),x.current=null,k.current=null,v(-1),u()};document.addEventListener("mouseup",p),document.addEventListener("mousemove",h),document.addEventListener("touchend",p),document.addEventListener("touchmove",h),x.current=h,k.current=p}]}(ie,oe,ye,ae,le,he,_e,xe,pe),Ce=jF(ke,4),Se=Ce[0],Oe=Ce[1],Ee=Ce[2],Ie=Ce[3],Pe=function(e,t){if(!s){var n=0,r=le-ae;ye.forEach((function(t,i){var o=Math.abs(e-t);o<=r&&(r=o,n=i)}));var i=Q_(ye);i[n]=e,C&&!ye.length&&void 0===S&&i.push(e),null==E||E(we(i)),_e(i),t&&Ie(t,n,i)}},Me=jF(l.useState(null),2),Re=Me[0],Ae=Me[1];l.useEffect((function(){var e;if(null!==Re){var t=ye.indexOf(Re);t>=0&&(null==(e=re.current)||e.focus(t))}Ae(null)}),[Re]);var je=l.useMemo((function(){return(!D||null!==ue)&&D}),[D,ue]),De=function(e,t){Ie(e,t),null==E||E(we(be.current))},Te=l.useCallback((function(e){e?ne(!0):-1===Se&&ne(!1)}),[Se]),Fe=-1!==Se;l.useEffect((function(){var e;if(!Fe){var t=ye.lastIndexOf(Oe);null==(e=re.current)||e.focus(t)}}),[Fe]);var Ne=l.useMemo((function(){return Q_(Ee).sort((function(e,t){return e-t}))}),[Ee]),Le=jF(l.useMemo((function(){return C?[Ne[0],Ne[Ne.length-1]]:[ae,Ne[0]]}),[Ne,C,ae]),2),Be=Le[0],Ve=Le[1];l.useImperativeHandle(t,(function(){return{focus:function(){re.current.focus(0)},blur:function(){var e=document.activeElement;ie.current.contains(e)&&(null==e||e.blur())}}})),l.useEffect((function(){var e;h&&(null==(e=re.current)||e.focus(0))}),[]);var ze=l.useMemo((function(){return{min:ae,max:le,direction:oe,disabled:s,keyboard:f,step:ue,included:B,includedStart:Be,includedEnd:Ve,range:C,tabIndex:X,ariaLabelForHandle:J,ariaLabelledByForHandle:Z,ariaValueTextFormatterForHandle:Q,styles:u||{},classNames:a||{}}}),[ae,le,oe,s,f,ue,B,Be,Ve,C,X,J,Z,Q,u,a]);return l.createElement(Oqe.Provider,{value:ze},l.createElement("div",{ref:ie,className:F()(r,i,nx(nx(nx(nx({},"".concat(r,"-disabled"),s),"".concat(r,"-vertical"),N),"".concat(r,"-horizontal"),!N),"".concat(r,"-with-marks"),se.length)),style:o,onMouseDown:function(e){e.preventDefault();var t,n=ie.current.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.top,l=n.bottom,u=n.right,c=e.clientX,s=e.clientY;switch(oe){case"btt":t=(l-s)/i;break;case"ttb":t=(s-a)/i;break;case"rtl":t=(u-c)/r;break;default:t=(c-o)/r}Pe(he(ae+t*(le-ae)),e)},onMouseEnter:function(){return Te(!0)},onMouseMove:function(){return Te(!0)},onMouseLeave:function(){return Te(!1)}},l.createElement("div",{className:F()("".concat(r,"-rail"),null==a?void 0:a.rail),style:Qqe(Qqe({},W),null==u?void 0:u.rail)}),l.createElement(Jqe,{prefixCls:r,style:z,values:Ne,startPoint:V,onStartMove:je?De:null}),l.createElement(Gqe,{prefixCls:r,marks:se,dots:$,style:U,activeStyle:G}),te&&l.createElement(Fqe,{ref:re,prefixCls:r,style:H,values:Ee,draggingIndex:Se,onStartMove:De,onOffsetChange:function(e,t){if(!s){var n=pe(ye,e,t);null==E||E(we(ye)),_e(n.values),Ae(n.value)}},onFocus:p,onBlur:v,handleRender:q,onChangeComplete:xe}),l.createElement(zqe,{prefixCls:r,marks:se,onClick:Pe})))}));var tKe=u.a.forwardRef((function(e,t){var n=e.disabled,r=e.prefixCls,i=e.character,o=e.characterRender,a=e.index,l=e.count,c=e.value,s=void 0===c?0:c,d=e.hoverValue,f=void 0===d?0:d,h=e.allowHalf,p=e.focused,v=e.onHover,g=e.onClick,m=null==f?s:f,y=a+1,b=new Set([r]);0===m&&0===a&&p?b.add("".concat(r,"-focused")):h&&m+.5>=y&&m<y?(b.add("".concat(r,"-half")),b.add("".concat(r,"-active")),p&&b.add("".concat(r,"-focused"))):(y<=m?b.add("".concat(r,"-full")):b.add("".concat(r,"-zero")),y===m&&p&&b.add("".concat(r,"-focused"))),y>s&&f>=y&&b.add("".concat(r,"-waiting"));var w="function"==typeof i?i(e):i,_=u.a.createElement("li",{className:F()(Array.from(b)),ref:t},u.a.createElement("div",{onClick:n?null:function(e){g(e,a)},onKeyDown:n?null:function(e){e.keyCode===bqe.ENTER&&g(e,a)},onMouseMove:n?null:function(e){v(e,a)},role:"radio","aria-checked":m>a?"true":"false","aria-posinset":a+1,"aria-setsize":l,tabIndex:n?-1:0},u.a.createElement("div",{className:"".concat(r,"-first")},w),u.a.createElement("div",{className:"".concat(r,"-second")},w)));return o&&(_=o(_,e)),_}));var nKe=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function rKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var iKe=u.a.forwardRef((function(e,t){var n,r=e.prefixCls,i=void 0===r?"lt-rate":r,o=e.className,a=e.defaultValue,c=e.value,s=e.count,d=void 0===s?5:s,f=e.allowHalf,h=void 0!==f&&f,p=e.allowClear,v=void 0===p||p,g=e.character,m=void 0===g?"★":g,y=e.characterRender,b=e.disabled,w=e.direction,_=void 0===w?"ltr":w,x=e.tabIndex,k=void 0===x?0:x,C=e.autoFocus,S=e.onHoverChange,O=e.onChange,E=e.onFocus,I=e.onBlur,P=e.onKeyDown,M=e.onMouseLeave,R=EWe(e,nKe),A=jF((n=l.useRef({}),[function(e){return n.current[e]},function(e){return function(t){n.current[e]=t}}]),2),j=A[0],D=A[1],T=u.a.useRef(null),N=function(){var e;b||null==(e=T.current)||e.focus()};u.a.useImperativeHandle(t,(function(){return{focus:N,blur:function(){var e;b||null==(e=T.current)||e.blur()}}}));var L=jF(MK(a||0,{value:c}),2),B=L[0],V=L[1],z=jF(MK(null),2),H=z[0],W=z[1],U=function(e,t){var n,r,i,o,a="rtl"===_,l=e+1;if(h){var u=j(e),c=(r=function(e){var t,n,r=e.ownerDocument,i=r.body,o=r&&r.documentElement,a=e.getBoundingClientRect();return t=a.left,n=a.top,{left:t-=o.clientLeft||i.clientLeft||0,top:n-=o.clientTop||i.clientTop||0}}(n=u),i=n.ownerDocument,o=i.defaultView||i.parentWindow,r.left+=function(e){var t=e.pageXOffset,n="scrollLeft";if("number"!=typeof t){var r=e.document;"number"!=typeof(t=r.documentElement[n])&&(t=r.body[n])}return t}(o),r.left),s=u.clientWidth;(a&&t-c>s/2||!a&&t-c<s/2)&&(l-=.5)}return l},G=function(e){V(e),null==O||O(e)},Y=jF(u.a.useState(!1),2),$=Y[0],q=Y[1],K=jF(u.a.useState(null),2),X=K[0],J=K[1],Z=function(e,t){var n=U(t,e.pageX);n!==H&&(J(n),W(null)),null==S||S(n)},Q=function(e){b||(J(null),W(null),null==S||S(void 0)),e&&(null==M||M(e))},ee=function(e,t){var n=U(t,e.pageX),r=!1;v&&(r=n===B),Q(),G(r?0:n),W(r?n:null)};u.a.useEffect((function(){C&&!b&&N()}),[]);var te=Array.from({length:d}).fill(0).map((function(e,t){return u.a.createElement(tKe,{ref:D(t),index:t,count:d,disabled:b,prefixCls:"".concat(i,"-star"),allowHalf:h,hoverValue:X,value:B,onClick:ee,onHover:Z,key:e||t,character:m,characterRender:y,focused:$})})),ne=F()(i,o,nx(nx({},"".concat(i,"-disabled"),b),"".concat(i,"-rtl"),"rtl"===_));return u.a.createElement("ul",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rKe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:ne,onMouseLeave:Q,tabIndex:b?-1:k,onFocus:b?null:function(){q(!0),null==E||E()},onBlur:b?null:function(){q(!1),null==I||I()},onKeyDown:b?null:function(e){var t=e.keyCode,n="rtl"===_,r=B;t===bqe.RIGHT&&r<d&&!n?(G(r+=h?.5:1),e.preventDefault()):t===bqe.LEFT&&r>0&&!n||t===bqe.RIGHT&&r>0&&n?(G(r-=h?.5:1),e.preventDefault()):t===bqe.LEFT&&r<d&&n&&(G(r+=h?.5:1),e.preventDefault()),null==P||P(e)},ref:T,role:"radiogroup"},Sqe(R,{aria:!0,data:!0,attr:!0})),te)}));function oKe(){return u.a.createElement("div",{className:"lakex-table-form-empty"},"(".concat(wx("空"),")"))}var aKe=function(e){return e.IMAGE="image",e.FILE="file",e}(aKe||{}),lKe=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e}(lKe||{}),uKe=Rf.defineToken("UploadContribution"),cKe=Object.defineProperty,sKe=Object.getOwnPropertyDescriptor,dKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?sKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&cKe(t,n,o),o},fKe=function(){return ox((function e(){rx(this,e)}),[{key:"getUploader",value:function(){if(this._uploader)return this._uploader;var e=this.uploadProvider.getContributions(),t=e[e.length-1];return this._uploader=t.registerUpload(),this._uploader}}])}();function hKe(e,t,n){return t=DC(t),jC(e,pKe()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function pKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pKe=function(){return!!e})()}dKe([gh(uKe)],fKe.prototype,"uploadProvider",2),fKe=dKe([Gf()],fKe);var vKe=Object.defineProperty,gKe=Object.getOwnPropertyDescriptor,mKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?gKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vKe(t,n,o),o},yKe=function(e){function t(){var e;return rx(this,t),(e=hKe(this,t,arguments))._onDidChange=e._register(new dS),e.onDidChange=e._onDidChange.event,e._fileMap={},e}return NC(t,e),ox(t,[{key:"beforeUpload",value:(r=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"init",value:function(){this.uploadTask=this.taskService.createQueueTask({name:this.name})}},{key:"uploadFile",value:(n=aO(QC.mark((function e(t,n){var r,i=this;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=(null==t?void 0:t.uid)||Cx(),(r=this._uploadRegistry.getUploader()).checkSize&&r.checkSize(t,this.code),e.prev=3,e.next=6,this.beforeUpload(t);case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error(e.t0),p.b.error(wx("文件读取失败，请重新上传")),this._onDidChange.emit({status:lKe.ERROR,file:t}),e.abrupt("return");case 14:if(r.upload){e.next=16;break}return e.abrupt("return");case 16:r.upload(t,this.type,(function(e){e.status===lKe.RUNNING&&e.percent?n.onProcess(e.percent):e.status===lKe.SUCCESS?n.onSuccess():e.status===lKe.ERROR&&n.onError(),i._onDidChange.emit(e)}));case 17:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:"addFile",value:function(e){var t=this;return e.uid=(null==e?void 0:e.uid)||Cx(),this._fileMap[e.uid]=e,this.uploadTask.addJob(e.uid,function(){var e=aO(QC.mark((function e(n){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.uploadFile(t._fileMap[n.jobId],n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this.uploadTask.destroy()}}]);var n,r}(HC);function bKe(e,t,n){return t=DC(t),jC(e,wKe()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function wKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wKe=function(){return!!e})()}mKe([Yf(TT)],yKe.prototype,"taskService",2),mKe([Yf(RC)],yKe.prototype,"configuration",2),mKe([Yf(fKe)],yKe.prototype,"_uploadRegistry",2),mKe([jf()],yKe.prototype,"init",1),mKe([Df()],yKe.prototype,"destroy",1),yKe=mKe([Uf()],yKe);var _Ke=Object.defineProperty,xKe=Object.getOwnPropertyDescriptor,kKe=function(e){function t(){var e;return rx(this,t),(e=bKe(this,t,arguments)).name=wx("图片上传任务"),e.type=aKe.IMAGE,e.maxSizeCode="max_single_image_size",e}return NC(t,e),ox(t,[{key:"beforeUpload",value:function(e){var t=this;return new Promise((function(n,r){var i=new FileReader;i.addEventListener("load",(function(r){var i=function(){t._onDidChange.emit({status:lKe.RUNNING,file:e}),n(e)};if(r.target){var o=new Image;o.src=r.target.result,o.onload=function(){e.width=o.width,e.height=o.height,i()},o.onerror=function(t){console.error("图片预处理失败",t),n(e)}}else i()}),!1),i.addEventListener("error",(function(){r(e)})),i.readAsDataURL(e)}))}}])}(yKe);function CKe(e,t,n){return t=DC(t),jC(e,SKe()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function SKe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(SKe=function(){return!!e})()}kKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?xKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_Ke(t,n,o),o}([Gf()],kKe);var OKe=Object.defineProperty,EKe=Object.getOwnPropertyDescriptor,IKe=function(e){function t(){var e;return rx(this,t),(e=CKe(this,t,arguments)).name=wx("附件上传任务"),e.type=aKe.FILE,e.maxSizeCode="max_single_file_size",e}return NC(t,e),ox(t)}(yKe);IKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?EKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&OKe(t,n,o),o}([Gf()],IKe);var PKe=Rf.defineToken("ImageContribution"),MKe=Object.defineProperty,RKe=Object.getOwnPropertyDescriptor,AKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?RKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&MKe(t,n,o),o},jKe=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.imageProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerImage()}}])}();AKe([gh(PKe)],jKe.prototype,"imageProvider",2),jKe=AKe([Gf()],jKe);var DKe=Object.defineProperty,TKe=Object.getOwnPropertyDescriptor,FKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?TKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DKe(t,n,o),o},NKe=function(){return ox((function e(){rx(this,e)}),[{key:"_provider",get:function(){return this._imageRegistry.getProvider()}},{key:"getExts",value:function(){var e;return(null==(e=this._provider)?void 0:e.getExts)?this._provider.getExts():aWe.IMAGE_EXT.join(",")}},{key:"tryGetWebp",value:function(e,t,n){var r;return(null==(r=this._provider)?void 0:r.tryGetWebp)?this._provider.tryGetWebp(e,t,n):e}},{key:"getRenderUrl",value:function(e,t,n){var r;return(null==(r=this._provider)?void 0:r.getRenderUrl)?this._provider.getRenderUrl(e,t,n):e}},{key:"getThumbnailUrl",value:function(e,t,n,r){var i;return(null==(i=this._provider)?void 0:i.getThumbnailUrl)?this._provider.getThumbnailUrl(e,t,n,r):e}}])}();FKe([Yf(jKe)],NKe.prototype,"_imageRegistry",2),NKe=FKe([Gf()],NKe);var LKe=ch().contribution(PKe).register(jKe).register(NKe),BKe=Object.defineProperty,VKe=Object.getOwnPropertyDescriptor,zKe=function(e,t,n,r){for(var i,o=r>1?void 0:r?VKe(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&BKe(t,n,o),o},HKe=function(){return ox((function e(){rx(this,e)}),[{key:"initConfiguration",value:function(){this._configuration.registerConfiguration({id:"upload",type:"object",title:"上传",properties:{image:{type:"object",properties:{accept:{type:"string",description:"图片可接受的格式"}}},file:{type:"object",properties:{accept:{type:"string",description:"文件可接受的格式"}}}}}),this._configuration.registerDefaultValue({"upload.image.accept":this._imageService.getExts(),"upload.file.accept":this._fileService.getExts()})}},{key:"getAccept",value:function(e){return e===aKe.IMAGE?this._configuration.getValue("upload.image.accept"):e===aKe.FILE?this._configuration.getValue("upload.file.accept"):void 0}},{key:"uploadImage",value:function(e){return this.imageUploadTask.addFile(e)}},{key:"uploadFile",value:function(e){return this.fileUploadTask.addFile(e)}}])}();zKe([Yf(RC)],HKe.prototype,"_configuration",2),zKe([Yf(hWe)],HKe.prototype,"_fileService",2),zKe([Yf(NKe)],HKe.prototype,"_imageService",2),zKe([Yf(IKe)],HKe.prototype,"fileUploadTask",2),zKe([Yf(kKe)],HKe.prototype,"imageUploadTask",2),HKe=zKe([Gf()],HKe);var WKe=ch().contribution(uKe).register(fKe).register(HKe).register(IKe).register(kKe),UKe=function(e){var t=e.onRetry,n=e.onRemove;return u.a.createElement("div",{className:"lakex-table-file-upload-error"},u.a.createElement(X$e,{className:"remove-file-icon",type:"Delete",onClick:n}),wx("上传失败"),u.a.createElement("div",{className:"re-upload-file",onClick:t},wx("重新上传")))};function GKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YKe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GKe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $Ke=function(e){var t,n=e.file,r=e.list,i=void 0===r?[]:r,o=e.type,a=void 0===o?"file":o,l=e.readonly,c=e.onRemove,s=void 0===c?function(){}:c,d=SWe(YHe),f=SWe(hWe),h=SWe(NKe),p=n.src;if(!p)return null;if("file"===a){var v=null==f?void 0:f.getFileKey(n);v&&(t=function(e){return u.a.createElement(Q$e,YKe({ext:v},e))})}else p=(null==h?void 0:h.getThumbnailUrl(p,n.width,n.height,150))||p,t=function(e){return u.a.createElement("img",YKe({loading:"lazy",src:p},e))};return u.a.createElement("div",{className:F()("lakex-table-file-item"),"data-id":n.uid},u.a.createElement("div",{className:"lakex-table-file-".concat(a)},t&&u.a.createElement(t,{className:"lakex-table-file-item-image",size:120}),u.a.createElement("div",{className:"lakex-table-file-actions"},u.a.createElement(X$e,{type:"Preview",onClick:function(e){var t={};"image"===a?t={list:i,index:i.findIndex((function(e){return e.src===n.src}))}:"file"===a&&(t={size:n.size}),null==d||d.open(a,n.src,t)}}),u.a.createElement(X$e,{type:"Download",onClick:function(){return e=n.src,void window.open(e,"_blank");var e}}),!l&&u.a.createElement(X$e,{type:"Delete",onClick:function(){return s(n)}}))),u.a.createElement("div",{className:"lakex-table-file-name"},n.name))},qKe=["className","justify"];function KKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var XKe=u.a.forwardRef((function(e,t){var n=e.className,r=e.justify,i=EWe(e,qKe);return u.a.createElement(v.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KKe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:F()("lt-spin",n,{"lt-spin-block":"block"===r}),indicator:u.a.createElement("div",{className:"lt-spin-indicator"}),ref:t},i))}));SG(XKe,v.a);var JKe=function(e){var t=e.percent;return u.a.createElement("div",{className:"lakex-table-file-uploading-file"},parseFloat(t.toFixed(2)),"%",u.a.createElement(XKe,{indicator:u.a.createElement(X$e,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))},ZKe=function(){return u.a.createElement("div",{className:"lakex-table-file-uploading-file"},0,"%",u.a.createElement(XKe,{indicator:u.a.createElement(X$e,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))};function QKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eXe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QKe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tXe=function(e){var t=e.event,n=e.type,r=e.list,i=e.onRemove,o=void 0===i?function(){}:i,a=e.onRetry,l=void 0===a?function(){}:a,c=vK({id:t.file.uid}),s=c.attributes,d=c.listeners,f=c.setNodeRef,h=c.transform,p=c.transition,v=c.isDragging,g={transform:M$e.Transform.toString(h),transition:p,zIndex:v?"100":"auto",opacity:v?.3:1},m=null;return t.status===lKe.SUCCESS?m=u.a.createElement($Ke,{type:n,key:t.file.uid,file:t.file,list:r.filter((function(e){return e.status===lKe.SUCCESS})).map((function(e){return e.file})),onRemove:o}):t.status===lKe.RUNNING?m=u.a.createElement(JKe,{key:t.file.uid,percent:t.percent||0}):t.status===lKe.PENDING?m=u.a.createElement(ZKe,null):t.status===lKe.ERROR&&(m=u.a.createElement(UKe,{onRemove:function(){return o(t.file)},onRetry:function(){return l(t.file)}})),u.a.createElement("div",eXe(eXe({ref:f,style:eXe({},g)},d),s),m)},nXe=function(e){var t=e.id,n=e.type,r=e.list,i=e.onDragEnd,o=void 0===i?function(){}:i,a=e.onRemove,c=void 0===a?function(){}:a,s=e.onRetry,d=void 0===s?function(){}:s,f=Object(l.useMemo)((function(){return r.map((function(e){return eXe(eXe({},e),{},{id:e.file.uid||Cx()})}))}),[r]),h=function(e){var t=jF(Object(l.useState)(null),2),n=t[0],r=t[1],i=function(){var t=aO(QC.mark((function t(n){var i,o;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(null),i=n.active,o=n.over,i.id!==o.id&&e(o.id,i.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:qY($Y(G$,{activationConstraint:{distance:8}})),handleDragStart:function(e){r(e.active.id)},handleDragEnd:i}}(o),p=h.activeId,v=h.sensors,g=h.handleDragStart,m=h.handleDragEnd,y=Object(l.useMemo)((function(){return r.find((function(e){return e.file.uid===p}))}),[p,r]);return u.a.createElement("div",{id:t},u.a.createElement(Rq,{sensors:v,collisionDetection:n$,onDragStart:g,onDragEnd:m},u.a.createElement(uK,{items:f,strategy:rK},u.a.createElement("div",{className:"lakex-table-file"},r.map((function(e,t){return u.a.createElement("div",{key:e.id||t,className:"lakex-table-file-item-wrap"},u.a.createElement(tXe,{event:e,type:n,list:r,onRemove:c,onRetry:d}))})))),u.a.createElement(Kq,{dropAnimation:null},y?u.a.createElement(tXe,{event:y,type:n,list:r,onRemove:c,onRetry:d}):null)))},rXe=["className"];function iXe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oXe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iXe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iXe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aXe=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,rXe);return(null==n?void 0:n.includes("lt-btn"))?u.a.createElement("div",oXe({ref:t,className:F()("lt-button",n)},r)):u.a.createElement(g.a,oXe({ref:t,className:F()("lt-button",n)},r))}));SG(aXe,g.a);var lXe=m.a.Dragger,uXe=function(e){var t;return(null==(t=null==e?void 0:e.map)?void 0:t.call(e,(function(e){return{id:e.uid,status:lKe.SUCCESS,file:e}})))||[]},cXe=function(e){var t=e.id,n=void 0===t?Cx(32):t,r=e.type,i=void 0===r?aKe.IMAGE:r,o=e.files,a=e.className,c=e.onChange,s=void 0===c?function(){}:c,d=e.onCreate,f=void 0===d?function(){}:d,h=e.onRemove,v=void 0===h?function(){}:h,g=e.onOrderChange,y=void 0===g?function(){}:g,b=C$e((function(e){s(e)}),300),w=Object(l.useRef)(null),_=qYe(),x=SWe(HKe),k=null==x?void 0:x.getAccept(i),C=jF(Object(l.useState)(uXe(o)),2),S=C[0],O=C[1],E=Object(l.useRef)(uXe(o)),I=jF(Object(l.useState)(0===S.length),2),P=I[0],M=I[1];P$e((function(){var e=uXe(o);O(e),E.current=e}),[o]);var R=function(e){e.status===lKe.ERROR&&p.b.error(e.message||wx("上传失败，请重试"));var t=E.current,n=t.findIndex((function(t){return t.file.uid===e.file.uid}));n>-1?(e.id=e.file.uid,t[n]=e):t.push(e),e.status===lKe.SUCCESS&&f(e.file),E.current=t,j(t)};P$e((function(){null==x||x.imageUploadTask.onDidChange((function(e){e.file.uploadId===n&&R(e)})),null==x||x.fileUploadTask.onDidChange((function(e){e.file.uploadId===n&&R(e)}))}),[]);var A=Object(l.useCallback)((function(e){e.uploadId=n,"image"===i?null==x||x.uploadImage(e):"file"===i&&(null==x||x.uploadFile(e))}),[]),j=Object(l.useCallback)((function(e){var t=e.filter((function(e){return e.status===lKe.SUCCESS})).map((function(e){return e.file}));S.map((function(e){return e.file.uid})).join(",")!==t.map((function(e){return e.uid})).join(",")&&b(t),O(e),M(0===e.length),_()}),[S]),D=yO.isMobile?"lakex-table-file-manage-component-h5":"";return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:F()("lakex-table-file-manage-component",D,a)},u.a.createElement("div",{onClick:function(){var e;null==(e=w.current)||e.focus()},onPaste:function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=e.clipboardData)?void 0:t.files;if(n&&n.length){var r=Array.from(n);null==r||r.forEach((function(e){return A(e)}))}else p.b.error(wx("剪贴板里没有文件可粘贴"))},className:"lakex-table-file-manage-component-upload"},u.a.createElement("input",{className:"lakex-table-file-manage-component-paste-container",ref:w}),u.a.createElement(lXe,{showUploadList:!1,customRequest:function(e){return A(e.file)},accept:k,openFileDialogOnClick:!1,multiple:!0},u.a.createElement("div",{className:P?"lakex-table-file-manage-component-empty-content":"lakex-table-file-manage-component-content"},u.a.createElement(X$e,{type:"EditorPaste",size:22}),u.a.createElement("span",{className:"lakex-table-file-manage-component-title"},wx("直接粘贴或拖拽到这里")),u.a.createElement(m.a,{customRequest:function(e){return A(e.file)},accept:k,showUploadList:!1,multiple:!0},u.a.createElement(aXe,{className:"lakex-table-file-manage-component-upload-button"},u.a.createElement(X$e,{className:"lakex-table-file-manage-component-plus-icon",type:"Add",size:18}),u.a.createElement("div",{className:"lakex-table-file-manage-component-button-title"},wx("本地上传"))))))),!P&&u.a.createElement(nXe,{type:i,list:S,onRemove:function(e){var t=Q_(S),n=t.findIndex((function(t){return t.file.uid===e.uid}));n>-1&&(t.splice(n,1),E.current=t,j(t),v(e))},onRetry:function(e){A(e)},onDragEnd:function(e,t){var n=S.findIndex((function(e){return e.file.uid===t})),r=S.findIndex((function(t){return t.file.uid===e})),i=Q_(S),o=jF(i.splice(n,1),1)[0];i.splice(r,0,o),E.current=i,j(i),_x((function(){y({targetUid:e,sourceUid:t})}))}})))};function sXe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dXe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dXe(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function dXe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fXe={};function hXe(e){var t;if(fXe[e])return fXe[e];var n=document.createElement("canvas"),r=null==(t=null==n?void 0:n.getContext)?void 0:t.call(n,"2d");if(!r)return 14*e.length;r.font="14px 'Chinese Quote', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif";var i=r.measureText(e).width;return fXe[e]=i,i}var pXe=function(){return ox((function e(t){rx(this,e),this._tagSizeMap={},this._nameOverflowMap={},this._overflowMap={},this._numWidthBuffer=5,this._boxSize=t.boxSize,this._height=t.height,this._minWidth=t.minWidth,this._paddingLeft=t.paddingLeft,this._paddingRight=t.paddingRight,this._marginLeft=t.marginLeft,this._marginBottom=t.marginBottom,this._marginRight=t.marginRight,this._boxPaddingTop=t.boxPaddingTop,this._boxPaddingBottom=t.boxPaddingBottom,this._boxPaddingLeft=t.boxPaddingLeft,this._boxPaddingRight=t.boxPaddingRight,this._numWidth=t.numWidth}),[{key:"boxSize",get:function(){return this._boxSize}},{key:"getNamesKey",value:function(e){return e.join(":")}},{key:"calcOverflow",value:function(e,t){if(!t||0===t.length)return{count:0};var n=[],r=this._nameOverflowMap[this.getNamesKey(t)];if(null!=r)return this.setOverflow(e,r,t),r;r={count:0};var i,o=sXe(t);try{for(o.s();!(i=o.n()).done;){var a=i.value,l=this._tagSizeMap[a];if(!l){var u=hXe(a);l={width:this._paddingLeft+this._marginLeft+u+this._paddingRight+this._marginRight,height:this._height+this._marginBottom,textWidth:u,text:a},this._tagSizeMap[a]=l}n.push(l)}}catch(e){o.e(e)}finally{o.f()}var c=this.getInnerBoxSize();if(1===t.length)n[0].width>c.width&&(r.ellipsis=[{index:0,width:c.width}]);else{for(var s=0,d=n[0].height,f=1,h=n.length,p=0,v={},g=0;g<n.length;g++){var m=n[g],y=s+m.width;if(y>c.width){var b=d+m.height;if(0===g){v[g]={row:f,useWidth:c.width,boxWidth:y},d=m.height;continue}if(b-c.height>10){p=g-1;break}v[g]={row:f+1,boxWidth:m.width},m.width>c.width&&(v[g].useWidth=c.width),f+=1,s=m.width,d=b,p=g}else v[g]={row:f,boxWidth:y},s=y,p=g}if(p>=0&&p!==h-1){var w=n[p],_=v[p];_.boxWidth+this._numWidth+this._numWidthBuffer>c.width&&(_.useWidth=w.width-(_.boxWidth-c.width)-this._numWidth-this._numWidthBuffer,_.useWidth<this._minWidth&&(p-=1)),r.count=h-(p+1)}r.ellipsis=[];for(var x=0;x<=p;x++){var k=v[x].useWidth;k&&r.ellipsis.push({index:x,width:k})}}return null!=r&&(this._nameOverflowMap[this.getNamesKey(t)]=r,this.setOverflow(e,r,t)),r}},{key:"getCacheKey",value:function(e,t){return e+":"+(null==t?void 0:t.join(":"))}},{key:"setOverflow",value:function(e,t,n){null==t||(this._overflowMap[this.getCacheKey(e,n)]=t)}},{key:"getOverflow",value:function(e,t){return this._overflowMap[this.getCacheKey(e,t)]}},{key:"getInnerBoxSize",value:function(){return{width:this._boxSize.width-this._boxPaddingLeft-this._boxPaddingRight,height:this._boxSize.height-this._boxPaddingTop-this._boxPaddingBottom}}},{key:"getCellOverflow",value:function(e,t){if(!e||!t||0===t.length)return{count:0};var n=this.getOverflow(e,t);return null==n&&(n=this.calcOverflow(e,t)),n||{count:0}}}])}();function vXe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gXe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vXe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vXe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mXe={correct_level:"medium",content_point_type:"circle",positioning_point_type:"circle",positioning_point_color:"rgb(var(--lt-base-black))",content_point_scale:.5,content_point_opacity:.8,content_point_color:"rgb(var(--lt-base-black))"};function yXe(e){return React.createElement(GX,gXe(gXe({},mXe),e))}function bXe(e){return React.createElement(H$e,{placement:"top",trigger:["click","hover"],overlayClassName:"lakex-table-qrcode",mouseEnterDelay:e.mouseEnterDelay,content:React.createElement("div",{className:"lakex-table-qrcode-wrap"},React.createElement(yXe,{url:e.url}))},React.createElement("span",{className:e.className},React.createElement(X$e,{type:"QRCode"})))}var wXe=["className"];function _Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xXe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Xe(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kXe=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,wXe);return u.a.createElement(y.a,xXe(xXe({},r),{},{className:F()(n,"lt-checkbox"),ref:t}))}));SG(kXe,y.a),kXe.Group=y.a.Group;var CXe,SXe,OXe={},EXe={exports:{}};function IXe(){return CXe||(CXe=1,function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(EXe)),EXe.exports}var PXe=function(){if(SXe)return OXe;SXe=1;var e=IXe().default;Object.defineProperty(OXe,"__esModule",{value:!0}),OXe.default=void 0;var t=e(a.a),n=e(Hx()),r=e(Lx()),i=e(ek()),o=e(ik()),l=e(Yx()),u=e(Xx());t.default.extend(u.default),t.default.extend(l.default),t.default.extend(n.default),t.default.extend(r.default),t.default.extend(i.default),t.default.extend(o.default),t.default.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var c={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},s=function(e){return c[e]||e.split("_")[0]},d={getNow:function(){var e=(0,t.default)();return"function"==typeof e.tz?e.tz():e},getFixedDate:function(e){return(0,t.default)(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},setMillisecond:function(e,t){return e.millisecond(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,t.default)().locale(s(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(s(e)).weekday(0)},getWeek:function(e,t){return t.locale(s(e)).week()},getShortWeekDays:function(e){return(0,t.default)().locale(s(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,t.default)().locale(s(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale(s(e)).format(n)},parse:function(e,n,r){for(var i=s(e),o=0;o<r.length;o+=1){var a=r[o],l=n;if(a.includes("wo")||a.includes("Wo")){for(var u=l.split("-")[0],c=l.split("-")[1],d=(0,t.default)(u,"YYYY").startOf("year").locale(i),f=0;f<=52;f+=1){var h=d.add(f,"week");if(h.format("Wo")===c)return h}return null}var p=(0,t.default)(l,a,!0).locale(i);if(p.isValid())return p}return null}}};return OXe.default=d,OXe}(),MXe=Tx(PXe);function RXe(){return RXe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RXe.apply(null,arguments)}function AXe(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}function jXe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jXe=function(){return!!e})()}function DXe(e){var t=jXe();return function(){var n,r=DC(e);if(t){var i=DC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jC(this,n)}}var TXe=Symbol.for("react.element"),FXe=Symbol.for("react.transitional.element"),NXe=Symbol.for("react.fragment");function LXe(e){return e&&"object"===ex(e)&&(e.$$typeof===TXe||e.$$typeof===FXe)&&e.type===NXe}function BXe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return u.a.Children.forEach(e,(function(e){(null!=e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(BXe(e)):LXe(e)&&e.props?n=n.concat(BXe(e.props.children,t)):n.push(e))})),n}var VXe="RC_FORM_INTERNAL_HOOKS",zXe=function(){dUe(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},HXe=l.createContext({getFieldValue:zXe,getFieldsValue:zXe,getFieldError:zXe,getFieldsError:zXe,isFieldsTouched:zXe,isFieldTouched:zXe,isFieldValidating:zXe,isFieldsValidating:zXe,resetFields:zXe,setFields:zXe,setFieldsValue:zXe,validateFields:zXe,submit:zXe,getInternalHooks:function(){return zXe(),{dispatch:zXe,initEntityValue:zXe,registerField:zXe,useSubscribe:zXe,setInitialValues:zXe,setCallbacks:zXe,getFields:zXe,setValidateMessages:zXe,setPreserve:zXe}}});function WXe(e){return null==e?[]:Array.isArray(e)?e:[e]}function UXe(){return UXe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UXe.apply(this,arguments)}function GXe(e){return(GXe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YXe(e,t){return(YXe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $Xe(e,t,n){return($Xe=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&YXe(i,n.prototype),i}).apply(null,arguments)}function qXe(e){var t="function"==typeof Map?new Map:void 0;return qXe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return $Xe(e,arguments,GXe(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),YXe(r,e)},qXe(e)}var KXe=/%[sdj%]/g;function XXe(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function JXe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,i=t[0],o=t.length;return"function"==typeof i?i.apply(null,t.slice(1)):"string"==typeof i?String(i).replace(KXe,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}})):i}function ZXe(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function QXe(e,t,n){var r=0,i=e.length;!function o(a){if(a&&a.length)n(a);else{var l=r;r+=1,l<i?t(e[l],o):n([])}}([])}var eJe=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,YXe(t,n),r}(qXe(Error));function tJe(e,t,n,r){if(t.first){var i=new Promise((function(t,i){var o=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);QXe(o,n,(function(e){return r(e),e.length?i(new eJe(e,XXe(e))):t()}))}));return i.catch((function(e){return e})),i}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var a=Object.keys(e),l=a.length,u=0,c=[],s=new Promise((function(t,i){var s=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?i(new eJe(c,XXe(c))):t()};a.length||(r(c),t()),a.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?QXe(r,n,s):function(e,t,n){var r=[],i=0,o=e.length;function a(e){r.push.apply(r,e),++i===o&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,s)}))}));return s.catch((function(e){return e})),s}function nJe(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function rJe(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===ex(r)&&"object"===ex(e[n])?e[n]=UXe({},e[n],r):e[n]=r}return e}function iJe(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!ZXe(t,o||e.type)||r.push(JXe(i.messages.required,e.fullField))}var oJe={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},aJe={integer:function(e){return aJe.number(e)&&parseInt(e,10)===e},float:function(e){return aJe.number(e)&&!aJe.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===ex(e)&&!aJe.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(oJe.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(oJe.url)},hex:function(e){return"string"==typeof e&&!!e.match(oJe.hex)}};var lJe="enum";var uJe={required:iJe,whitespace:function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(JXe(i.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)iJe(e,t,n,r,i);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?aJe[o](t)||r.push(JXe(i.messages.types[o],e.fullField,e.type)):o&&ex(t)!==e.type&&r.push(JXe(i.messages.types[o],e.fullField,e.type))}},range:function(e,t,n,r,i){var o="number"==typeof e.len,a="number"==typeof e.min,l="number"==typeof e.max,u=t,c=null,s="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(s?c="number":d?c="string":f&&(c="array"),!c)return!1;f&&(u=t.length),d&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?u!==e.len&&r.push(JXe(i.messages[c].len,e.fullField,e.len)):a&&!l&&u<e.min?r.push(JXe(i.messages[c].min,e.fullField,e.min)):l&&!a&&u>e.max?r.push(JXe(i.messages[c].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&r.push(JXe(i.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,i){e[lJe]=Array.isArray(e[lJe])?e[lJe]:[],-1===e[lJe].indexOf(t)&&r.push(JXe(i.messages[lJe],e.fullField,e[lJe].join(", ")))},pattern:function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(JXe(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(JXe(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function cJe(e,t,n,r,i){var o=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t,o)&&!e.required)return n();uJe.required(e,t,r,a,i,o),ZXe(t,o)||uJe.type(e,t,r,a,i)}n(a)}var sJe={string:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t,"string")&&!e.required)return n();uJe.required(e,t,r,o,i,"string"),ZXe(t,"string")||(uJe.type(e,t,r,o,i),uJe.range(e,t,r,o,i),uJe.pattern(e,t,r,o,i),!0===e.whitespace&&uJe.whitespace(e,t,r,o,i))}n(o)},method:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&uJe.type(e,t,r,o,i)}n(o)},number:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&(uJe.type(e,t,r,o,i),uJe.range(e,t,r,o,i))}n(o)},boolean:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&uJe.type(e,t,r,o,i)}n(o)},regexp:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),ZXe(t)||uJe.type(e,t,r,o,i)}n(o)},integer:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&(uJe.type(e,t,r,o,i),uJe.range(e,t,r,o,i))}n(o)},float:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&(uJe.type(e,t,r,o,i),uJe.range(e,t,r,o,i))}n(o)},array:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();uJe.required(e,t,r,o,i,"array"),null!=t&&(uJe.type(e,t,r,o,i),uJe.range(e,t,r,o,i))}n(o)},object:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&uJe.type(e,t,r,o,i)}n(o)},enum:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i),void 0!==t&&uJe.enum(e,t,r,o,i)}n(o)},pattern:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t,"string")&&!e.required)return n();uJe.required(e,t,r,o,i),ZXe(t,"string")||uJe.pattern(e,t,r,o,i)}n(o)},date:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t,"date")&&!e.required)return n();var a;if(uJe.required(e,t,r,o,i),!ZXe(t,"date"))a=t instanceof Date?t:new Date(t),uJe.type(e,a,r,o,i),a&&uJe.range(e,a.getTime(),r,o,i)}n(o)},url:cJe,hex:cJe,email:cJe,required:function(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":ex(t);uJe.required(e,t,r,o,i,a),n(o)},any:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ZXe(t)&&!e.required)return n();uJe.required(e,t,r,o,i)}n(o)}};function dJe(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var fJe=dJe();function hJe(e){this.rules=null,this._messages=fJe,this.define(e)}function pJe(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function vJe(e,t,n,r){if(!t.length)return n;var i,o=fS(t),a=o[0],l=o.slice(1);return i=e||"number"!=typeof a?Array.isArray(e)?Q_(e):MWe({},e):[],r&&void 0===n&&1===l.length?delete i[a][l[0]]:i[a]=vJe(i[a],l,n,r),i}function gJe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!pJe(e,t.slice(0,-1))?e:vJe(e,t,n,r)}function mJe(e){return WXe(e)}function yJe(e,t){return pJe(e,t)}function bJe(e,t,n){return gJe(e,t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function wJe(e,t){var n={};return t.forEach((function(t){var r=yJe(e,t);n=bJe(n,t,r)})),n}function _Je(e,t){return e&&e.some((function(e){return SJe(e,t)}))}function xJe(e){return"object"===ex(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function kJe(e,t){var n=Array.isArray(e)?Q_(e):MWe({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],i=t[e],o=xJe(r)&&xJe(i);n[e]=o?kJe(r,i||{}):i})),n):n}function CJe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return kJe(e,t)}),e)}function SJe(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function OJe(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function EJe(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Q_(e.slice(0,n)),[i],Q_(e.slice(n,t)),Q_(e.slice(t+1,r))):o<0?[].concat(Q_(e.slice(0,t)),Q_(e.slice(t+1,n+1)),[i],Q_(e.slice(n+1,r))):e}hJe.prototype={messages:function(e){return e&&(this._messages=rJe(dJe(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==ex(e)||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var i,o,a=e,l=t,u=n;if("function"==typeof l&&(u=l,l={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(),Promise.resolve();if(l.messages){var c=this.messages();c===fJe&&(c=dJe()),rJe(c,l.messages),l.messages=c}else l.messages=this.messages();var s={};(l.keys||Object.keys(this.rules)).forEach((function(t){i=r.rules[t],o=a[t],i.forEach((function(n){var i=n;"function"==typeof i.transform&&(a===e&&(a=UXe({},a)),o=a[t]=i.transform(o)),(i="function"==typeof i?{validator:i}:UXe({},i)).validator=r.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=r.getType(i),i.validator&&(s[t]=s[t]||[],s[t].push({rule:i,value:o,source:a,field:t}))}))}));var d={};return tJe(s,l,(function(e,t){var n,r=e.rule,i=!("object"!==r.type&&"array"!==r.type||"object"!==ex(r.fields)&&"object"!==ex(r.defaultField));function o(e,t){return UXe({},t,{fullField:r.fullField+"."+e})}function a(n){void 0===n&&(n=[]);var a=n;if(Array.isArray(a)||(a=[a]),!l.suppressWarning&&a.length&&hJe.warning("async-validator:",a),a.length&&void 0!==r.message&&(a=[].concat(r.message)),a=a.map(nJe(r)),l.first&&a.length)return d[r.field]=1,t(a);if(i){if(r.required&&!e.value)return void 0!==r.message?a=[].concat(r.message).map(nJe(r)):l.error&&(a=[l.error(r,JXe(l.messages.required,r.field))]),t(a);var u={};if(r.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(u[c]=r.defaultField);for(var s in u=UXe({},u,e.rule.fields))if(u.hasOwnProperty(s)){var f=Array.isArray(u[s])?u[s]:[u[s]];u[s]=f.map(o.bind(null,s))}var h=new hJe(u);h.messages(l.messages),e.rule.options&&(e.rule.options.messages=l.messages,e.rule.options.error=l.error),h.validate(e.value,e.rule.options||l,(function(e){var n=[];a&&a.length&&n.push.apply(n,a),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(a)}i=i&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,a,e.source,l):r.validator&&(!0===(n=r.validator(r,e.value,a,e.source,l))?a():!1===n?a(r.message||r.field+" fails"):n instanceof Array?a(n):n instanceof Error&&a(n.message)),n&&n.then&&n.then((function(){return a()}),(function(e){return a(e)}))}),(function(e){!function(e){var t,n=[],r={};function i(e){var t;Array.isArray(e)?n=(t=n).concat.apply(t,e):n.push(e)}for(t=0;t<e.length;t++)i(e[t]);n.length?r=XXe(n):(n=null,r=null),u(n,r)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!sJe.hasOwnProperty(e.type))throw new Error(JXe("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?sJe.required:sJe[this.getType(e)]||!1}},hJe.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");sJe[e]=t},hJe.warning=function(){},hJe.messages=fJe,hJe.validators=sJe;var IJe="'${name}' is not a valid ${type}",PJe={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:IJe,method:IJe,array:IJe,object:IJe,number:IJe,date:IJe,boolean:IJe,integer:IJe,float:IJe,regexp:IJe,email:IJe,url:IJe,hex:IJe},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},MJe=hJe;function RJe(e,t,n,r){var i=MWe(MWe({},n),{},{name:t,enum:(n.enum||[]).join(", ")});return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(o){var a,l,u=t[o];"string"==typeof u?n[o]=(a=u,l=r,function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(a,MWe(MWe({},i),l))}):u&&"object"===ex(u)?(n[o]={},e(u,n[o])):n[o]=u})),n}(CJe({},PJe,e))}function AJe(e,t,n,r,i){return jJe.apply(this,arguments)}function jJe(){return jJe=aO(QC.mark((function e(t,n,r,i,o){var a,u,c,s,d,f;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MWe({},r),u=null,a&&"array"===a.type&&a.defaultField&&(u=a.defaultField,delete a.defaultField),c=new MJe(nx({},t,[a])),s=RJe(i.validateMessages,t,a,o),c.messages(s),d=[],e.prev=7,e.next=10,Promise.resolve(c.validate(nx({},t,n),MWe({},i)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?d=e.t0.errors.map((function(e,t){var n=e.message;return l.isValidElement(n)?l.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),d=[s.default()]);case 15:if(d.length||!u){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return AJe("".concat(t,".").concat(n),e,u,i,o)})));case 18:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Q_(e),Q_(t))}),[]));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[7,12]])}))),jJe.apply(this,arguments)}function DJe(e,t,n,r,i,o){var a,l=e.join("."),u=n.map((function(e){var t=e.validator;return t?MWe(MWe({},e),{},{validator:function(e,n,r){var i=!1,o=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){dUe(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))}));dUe(i=o&&"function"==typeof o.then&&"function"==typeof o.catch,"`callback` is deprecated. Please return a promise instead."),i&&o.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===i)a=new Promise(function(){var e=aO(QC.mark((function e(n,i){var a,c;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<u.length)){e.next=11;break}return e.next=4,AJe(l,t,u[a],r,o);case 4:if(!(c=e.sent).length){e.next=8;break}return i(c),e.abrupt("return");case 8:a+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=u.map((function(e){return AJe(l,t,e,r,o)}));a=(i?function(e){return FJe.apply(this,arguments)}(c):function(e){return TJe.apply(this,arguments)}(c)).then((function(e){return e.length?Promise.reject(e):[]}))}return a.catch((function(e){return e})),a}function TJe(){return(TJe=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Q_(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FJe(){return FJe=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),FJe.apply(this,arguments)}function NJe(e,t,n,r,i,o){return"function"==typeof e?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var LJe=function(e){NC(n,e);var t=DXe(n);function n(e){var r;(rx(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,i=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,mJe(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Q_(void 0===n?[]:n),Q_(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,i=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(i):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.onStoreChange=function(e,t,n){var i=r.props,o=i.shouldUpdate,a=i.dependencies,l=void 0===a?[]:a,u=i.onReset,c=n.store,s=r.getNamePath(),d=r.getValue(e),f=r.getValue(c),h=t&&_Je(t,s);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=[]),n.type){case"reset":if(!t||h)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],u&&u(),void r.refresh();break;case"setField":if(h){var p=n.data;return"touched"in p&&(r.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(r.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(r.errors=p.errors||[]),r.dirty=!0,void r.reRender()}if(o&&!s.length&&NJe(o,e,c,d,f,n))return void r.reRender();break;case"dependenciesUpdate":if(l.map(mJe).some((function(e){return _Je(n.relatedFields,e)})))return void r.reRender();break;default:if(h||(!l.length||s.length||o)&&NJe(o,e,c,d,f,n))return void r.reRender()}!0===o&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),i=Promise.resolve().then((function(){if(!r.mounted)return[];var o=r.props,a=o.validateFirst,l=void 0!==a&&a,u=o.messageVariables,c=(e||{}).triggerName,s=r.getRules();c&&(s=s.filter((function(e){var t=e.validateTrigger;return!t||WXe(t).includes(c)})));var d=DJe(t,n,s,e,l,u);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.validatePromise===i&&(r.validatePromise=null,r.errors=e,r.reRender())})),d}));return r.validatePromise=i,r.dirty=!0,r.errors=[],r.reRender(),i},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return r.dirty},r.getErrors=function(){return r.errors},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return MWe(MWe({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=BXe(e);return 1===n.length&&l.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return yJe(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,i=t.validateTrigger,o=t.getValueFromEvent,a=t.normalize,l=t.valuePropName,u=t.getValueProps,c=t.fieldContext,s=void 0!==i?i:c.validateTrigger,d=r.getNamePath(),f=c.getInternalHooks,h=c.getFieldsValue,p=f(VXe).dispatch,v=r.getValue(),g=u||function(e){return nx({},l,e)},m=e[n],y=MWe(MWe({},e),g(v));return y[n]=function(){var e;r.touched=!0,r.dirty=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=o?o.apply(void 0,n):OJe.apply(void 0,[l].concat(n)),a&&(e=a(e,v,h(!0))),p({type:"updateValue",namePath:d,value:e}),m&&m.apply(void 0,n)},WXe(s||[]).forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&p({type:"validateField",namePath:d,triggerName:e})}})),y},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(VXe).initEntityValue)(AC(r));return r}return ox(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(VXe).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?e=i:l.isValidElement(i)?e=l.cloneElement(i,this.getControlled(i.props)):(dUe(!i,"`children` of Field is not validate ReactElement."),e=i),l.createElement(l.Fragment,{key:t},e)}}]),n}(l.Component);function BJe(e){var t=e.name,n=EWe(e,["name"]),r=l.useContext(HXe),i=void 0!==t?mJe(t):void 0,o="keep";return n.isListField||(o="_".concat((i||[]).join("_"))),l.createElement(LJe,RXe({key:o,name:i},n,{fieldContext:r}))}LJe.contextType=HXe,LJe.defaultProps={trigger:"onChange",valuePropName:"value"};var VJe="__@field_split__";function zJe(e){return e.map((function(e){return"".concat(ex(e),":").concat(e)})).join(VJe)}var HJe=function(){function e(){rx(this,e),this.kvs=new Map}return ox(e,[{key:"set",value:function(e,t){this.kvs.set(zJe(e),t)}},{key:"get",value:function(e){return this.kvs.get(zJe(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(zJe(e))}},{key:"map",value:function(e){return Q_(this.kvs.entries()).map((function(t){var n=jF(t,2),r=n[0],i=n[1],o=r.split(VJe);return e({key:o.map((function(e){var t=jF(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),WJe=function e(t){var n=this;rx(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===VXe?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(dUe(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=CJe({},e,n.store))},this.getInitialValue=function(e){return yJe(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new HJe;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=mJe(e);return t.get(n)||{INVALIDATE_NAME_PATH:mJe(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),i=[];return r.forEach((function(n){var r,o="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&i.push(o)}else i.push(o)})),wJe(n.store,i.map(mJe))},this.getFieldValue=function(e){n.warningUnhooked();var t=mJe(e);return yJe(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:mJe(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=mJe(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,o=t[0],a=t[1],l=!1;0===t.length?i=null:1===t.length?Array.isArray(o)?(i=o.map(mJe),l=!1):(i=null,l=o):(i=o.map(mJe),l=a);var u=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!i)return l?u.every(c):u.some(c);var s=new HJe;i.forEach((function(e){s.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&s.update(n,(function(t){return[].concat(Q_(t),[e])}))}))}));var d=function(e){return e.some(c)},f=s.map((function(e){return e.value}));return l?f.every(d):f.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(mJe);return t.some((function(e){var t=e.getNamePath();return _Je(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new HJe,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var i=t.get(r)||new Set;i.add({entity:e,value:n}),t.set(r,i)}}));var i;e.entities?i=e.entities:e.namePathList?(i=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=i).push.apply(n,Q_(Q_(r).map((function(e){return e.entity}))))}))):i=r,i.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))dUe(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var o=t.get(i);if(o&&o.size>1)dUe(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var a=n.getFieldValue(i);e.skipExist&&void 0!==a||(n.store=bJe(n.store,i,Q_(o)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=CJe({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(mJe);r.forEach((function(e){var t=n.getInitialValue(e);n.store=bJe(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name;e.errors;var i=EWe(e,["name","errors"]),o=mJe(r);"value"in i&&(n.store=bJe(n.store,o,i.value)),n.notifyObservers(t,[o],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=MWe(MWe({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===yJe(n.store,r)&&(n.store=bJe(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!1===(void 0!==r?r:n.preserve)&&(!t||i.length>1)){var o=e.getNamePath(),a=t?void 0:yJe(n.initialValues,o);o.length&&n.getFieldValue(o)!==a&&n.fieldEntities.every((function(e){return!SJe(e.getNamePath(),o)}))&&(n.store=bJe(n.store,o,a,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,o=e.triggerName;n.validateFields([i],{triggerName:o})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var i=MWe(MWe({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,i)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=mJe(e),i=n.store;n.store=bJe(n.store,r,t),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"});var o=n.getDependencyChildrenFields(r);o.length&&n.validateFields(o),n.notifyObservers(i,o,{type:"dependenciesUpdate",relatedFields:[r].concat(Q_(o))});var a=n.callbacks.onValuesChange;a&&a(wJe(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Q_(o)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=CJe(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],i=new HJe;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=mJe(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(i.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var o=new HJe;t.forEach((function(e){var t=e.name,n=e.errors;o.set(t,n)})),i.forEach((function(e){e.errors=o.get(e.name)||e.errors}))}r(i.filter((function(t){var n=t.name;return _Je(e,n)})),i)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,i=r?e.map(mJe):[],o=[];n.getFieldEntities(!0).forEach((function(a){if(r||i.push(a.getNamePath()),(null==t?void 0:t.recursive)&&r){var l=a.getNamePath();l.every((function(t,n){return e[n]===t||void 0===e[n]}))&&i.push(l)}if(a.props.rules&&a.props.rules.length){var u=a.getNamePath();if(!r||_Je(i,u)){var c=a.validateRules(MWe({validateMessages:MWe(MWe({},PJe),n.validateMessages)},t));o.push(c.then((function(){return{name:u,errors:[]}})).catch((function(e){return Promise.reject({name:u,errors:e})})))}}}));var a=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,o){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&o(r),i(r))}))}))})):Promise.resolve([])}(o);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var l=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return l.catch((function(e){return e})),l},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};function UJe(e){var t=l.useRef(),n=jF(l.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new WJe((function(){n({})}));t.current=r.getForm()}return[t.current]}var GJe=l.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),YJe=function(e,t){var n=e.name,r=e.initialValues,i=e.fields,o=e.form,a=e.preserve,u=e.children,c=e.component,s=void 0===c?"form":c,d=e.validateMessages,f=e.validateTrigger,h=void 0===f?"onChange":f,p=e.onValuesChange,v=e.onFieldsChange,g=e.onFinish,m=e.onFinishFailed,y=EWe(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),b=l.useContext(GJe),w=jF(UJe(o),1)[0],_=w.getInternalHooks(VXe),x=_.useSubscribe,k=_.setInitialValues,C=_.setCallbacks,S=_.setValidateMessages,O=_.setPreserve;l.useImperativeHandle(t,(function(){return w})),l.useEffect((function(){return b.registerForm(n,w),function(){b.unregisterForm(n)}}),[b,w,n]),S(MWe(MWe({},b.validateMessages),d)),C({onValuesChange:p,onFieldsChange:function(e){if(b.triggerFormChange(n,e),v){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];v.apply(void 0,[e].concat(r))}},onFinish:function(e){b.triggerFormFinish(n,e),g&&g(e)},onFinishFailed:m}),O(a);var E=l.useRef(null);k(r,!E.current),E.current||(E.current=!0);var I=u,P="function"==typeof u;P&&(I=u(w.getFieldsValue(!0),w));x(!P);var M=l.useRef();l.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||!t)return!1;if(!e||!t||"object"!==ex(e)||"object"!==ex(t))return!1;var n=Object.keys(e),r=Object.keys(t),i=new Set([].concat(Q_(n),Q_(r)));return Q_(i).every((function(n){var r=e[n],i=t[n];return"function"==typeof r&&"function"==typeof i||r===i}))})(M.current||[],i||[])||w.setFields(i||[]),M.current=i}),[i,w]);var R=l.useMemo((function(){return MWe(MWe({},w),{},{validateTrigger:h})}),[w,h]),A=l.createElement(HXe.Provider,{value:R},I);return!1===s?A:l.createElement(s,RXe({},y,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),w.submit()},onReset:function(e){var t;e.preventDefault(),w.resetFields(),null===(t=y.onReset)||void 0===t||t.call(y,e)}}),A)},$Je=l.forwardRef(YJe);function qJe(e,t,n){var r=l.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}$Je.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,i=e.children,o=l.useContext(GJe),a=l.useRef({});return l.createElement(GJe.Provider,{value:MWe(MWe({},o),{},{validateMessages:MWe(MWe({},o.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:a.current}),o.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:a.current}),o.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(a.current=MWe(MWe({},a.current),{},nx({},e,t))),o.registerForm(e,t)},unregisterForm:function(e){var t=MWe({},a.current);delete t[e],a.current=t,o.unregisterForm(e)}})},i)},$Je.Field=BJe,$Je.List=function(e){var t=e.name,n=e.initialValue,r=e.children,i=e.rules,o=e.validateTrigger,a=l.useContext(HXe),u=l.useRef({keys:[],id:0}).current;if("function"!=typeof r)return dUe(!1,"Form.List only accepts function as children."),null;var c=mJe(a.prefixName)||[],s=[].concat(Q_(c),Q_(mJe(t)));return l.createElement(HXe.Provider,{value:MWe(MWe({},a),{},{prefixName:s})},l.createElement(BJe,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:o,initialValue:n,isList:!0},(function(e,t){var n=e.value,i=void 0===n?[]:n,o=e.onChange,l=a.getFieldValue,c=function(){return l(s)||[]},d={add:function(e,t){var n=c();t>=0&&t<=n.length?(u.keys=[].concat(Q_(u.keys.slice(0,t)),[u.id],Q_(u.keys.slice(t))),o([].concat(Q_(n.slice(0,t)),[e],Q_(n.slice(t))))):(u.keys=[].concat(Q_(u.keys),[u.id]),o([].concat(Q_(n),[e]))),u.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(u.keys=u.keys.filter((function(e,t){return!n.has(t)})),o(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(u.keys=EJe(u.keys,e,t),o(EJe(n,e,t)))}}},f=i||[];return Array.isArray(f)||(f=[]),r(f.map((function(e,t){var n=u.keys[t];return void 0===n&&(u.keys[t]=u.id,n=u.keys[t],u.id+=1),{name:t,key:n,isListField:!0}})),d,t)})))},$Je.useForm=UJe;var KJe=function(e,t,n){dUe(e,"[antd: ".concat(t,"] ").concat(n))},XJe={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},JJe={lang:RXe({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:RXe({},XJe)},ZJe="${label} is not a valid ${type}",QJe={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:JJe,TimePicker:XJe,Calendar:JJe,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ZJe,method:ZJe,array:ZJe,object:ZJe,number:ZJe,date:ZJe,boolean:ZJe,integer:ZJe,float:ZJe,regexp:ZJe,email:ZJe,url:ZJe,hex:ZJe},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},eZe=Object(l.createContext)(void 0),tZe=function(e){NC(n,e);var t=DXe(n);function n(){return rx(this,n),t.apply(this,arguments)}return ox(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||QJe[t||"global"],r=this.context,i=t&&r?r[t]:{};return RXe(RXe({},"function"==typeof n?n():n),i||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?QJe.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(l.Component);tZe.defaultProps={componentName:"global"},tZe.contextType=eZe;var nZe=function(){var e=(0,l.useContext(lZe).getPrefixCls)("empty-img-default");return l.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("g",{transform:"translate(24 31.67)"},l.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),l.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),l.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),l.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),l.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),l.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),l.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},l.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),l.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},rZe=function(){var e=(0,l.useContext(lZe).getPrefixCls)("empty-img-simple");return l.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},l.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),l.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},l.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),l.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},iZe=l.createElement(nZe,null),oZe=l.createElement(rZe,null),aZe=function(e){var t=e.className,n=e.prefixCls,r=e.image,i=void 0===r?iZe:r,o=e.description,a=e.children,u=e.imageStyle,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),s=l.useContext(lZe),d=s.getPrefixCls,f=s.direction;return l.createElement(tZe,{componentName:"Empty"},(function(e){var r,s=d("empty",n),h=void 0!==o?o:e.description,p="string"==typeof h?h:"empty",v=null;return v="string"==typeof i?l.createElement("img",{alt:p,src:i}):i,l.createElement("div",RXe({className:F()(s,(r={},nx(r,"".concat(s,"-normal"),i===oZe),nx(r,"".concat(s,"-rtl"),"rtl"===f),r),t)},c),l.createElement("div",{className:"".concat(s,"-image"),style:u},v),h&&l.createElement("div",{className:"".concat(s,"-description")},h),a&&l.createElement("div",{className:"".concat(s,"-footer")},a))}))};aZe.PRESENTED_IMAGE_DEFAULT=iZe,aZe.PRESENTED_IMAGE_SIMPLE=oZe;var lZe=l.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:function(e){return l.createElement(uZe,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return l.createElement(aZe,{image:aZe.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return l.createElement(aZe,{image:aZe.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return l.createElement(aZe,null)}}))}}),uZe=lZe.Consumer,cZe=l.createContext(void 0);function sZe(e){return e instanceof HTMLElement||e instanceof SVGElement}function dZe(e){var t,n=function(e){return e&&"object"===ex(e)&&sZe(e.nativeElement)?e.nativeElement:sZe(e)?e:null}(e);return n||(e instanceof u.a.Component?null===(t=s.a.findDOMNode)||void 0===t?void 0:t.call(s.a,e):null)}var fZe,hZe,pZe={exports:{}},vZe={};var gZe=(hZe||(hZe=1,pZe.exports=function(){if(fZe)return vZe;fZe=1;var e,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen");function v(e){if("object"===ex(e)&&null!==e){var p=e.$$typeof;switch(p){case t:switch(e=e.type){case r:case o:case i:case s:case d:return e;default:switch(e=e&&e.$$typeof){case u:case l:case c:case h:case f:case a:return e;default:return p}}case n:return p}}}return e=Symbol.for("react.module.reference"),vZe.ContextConsumer=l,vZe.ContextProvider=a,vZe.Element=t,vZe.ForwardRef=c,vZe.Fragment=r,vZe.Lazy=h,vZe.Memo=f,vZe.Portal=n,vZe.Profiler=o,vZe.StrictMode=i,vZe.Suspense=s,vZe.SuspenseList=d,vZe.isAsyncMode=function(){return!1},vZe.isConcurrentMode=function(){return!1},vZe.isContextConsumer=function(e){return v(e)===l},vZe.isContextProvider=function(e){return v(e)===a},vZe.isElement=function(e){return"object"===ex(e)&&null!==e&&e.$$typeof===t},vZe.isForwardRef=function(e){return v(e)===c},vZe.isFragment=function(e){return v(e)===r},vZe.isLazy=function(e){return v(e)===h},vZe.isMemo=function(e){return v(e)===f},vZe.isPortal=function(e){return v(e)===n},vZe.isProfiler=function(e){return v(e)===o},vZe.isStrictMode=function(e){return v(e)===i},vZe.isSuspense=function(e){return v(e)===s},vZe.isSuspenseList=function(e){return v(e)===d},vZe.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===r||t===o||t===i||t===s||t===d||t===p||"object"===ex(t)&&null!==t&&(t.$$typeof===h||t.$$typeof===f||t.$$typeof===a||t.$$typeof===l||t.$$typeof===c||t.$$typeof===e||void 0!==t.getModuleId)},vZe.typeOf=v,vZe}()),pZe.exports),mZe=function(e,t){"function"==typeof e?e(t):"object"===ex(e)&&e&&"current"in e&&(e.current=t)},yZe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){mZe(t,e)}))}},bZe=function(e){var t,n;if(!e)return!1;if(wZe(e)&&e.props.propertyIsEnumerable("ref"))return!0;var r=gZe.isMemo(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===gZe.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===gZe.ForwardRef)};function wZe(e){return Object(l.isValidElement)(e)&&!LXe(e)}var _Ze=function(e){if(e&&wZe(e)){var t=e;return t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}return null},xZe=l.createContext({}),kZe=function(e){NC(n,e);var t=DXe(n);function n(){return rx(this,n),t.apply(this,arguments)}return ox(n,[{key:"render",value:function(){return this.props.children}}]),n}(l.Component);function CZe(e){var t=l.useRef(!1),n=jF(l.useState(e),2),r=n[0],i=n[1];return l.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||i(e)}]}function SZe(e){var t=l.useRef();t.current=e;var n=l.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}var OZe="none",EZe="appear",IZe="enter",PZe="leave",MZe="none",RZe="prepare",AZe="start",jZe="active",DZe="end",TZe="prepared";function FZe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var NZe=function(e,t){var n={animationend:FZe("Animation","AnimationEnd"),transitionend:FZe("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(hUe(),"undefined"!=typeof window?window:{}),LZe={};if(hUe()){var BZe=document.createElement("div");LZe=BZe.style}var VZe={};function zZe(e){if(VZe[e])return VZe[e];var t=NZe[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in LZe)return VZe[e]=t[o],VZe[e]}return""}var HZe=zZe("animationend"),WZe=zZe("transitionend"),UZe=!(!HZe||!WZe),GZe=HZe||"animationend",YZe=WZe||"transitionend";function $Ze(e,t){return e?"object"===ex(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var qZe=function(e){var t=Object(l.useRef)();function n(t){t&&(t.removeEventListener(YZe,e),t.removeEventListener(GZe,e))}return l.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(YZe,e),r.addEventListener(GZe,e),t.current=r)},n]},KZe=hUe()?l.useLayoutEffect:l.useEffect,XZe=function(e){return+setTimeout(e,16)},JZe=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(XZe=function(e){return window.requestAnimationFrame(e)},JZe=function(e){return window.cancelAnimationFrame(e)});var ZZe=0,QZe=new Map;function eQe(e){QZe.delete(e)}var tQe=function(e){var t=ZZe+=1;return function n(r){if(0===r)eQe(t),e();else{var i=XZe((function(){n(r-1)}));QZe.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};tQe.cancel=function(e){var t=QZe.get(e);return eQe(e),JZe(t)};var nQe=[RZe,AZe,jZe,DZe],rQe=[RZe,TZe],iQe=!1,oQe=!0;function aQe(e){return e===jZe||e===DZe}var lQe=function(e,t,n){var r=jF(CZe(MZe),2),i=r[0],o=r[1],a=function(){var e=l.useRef(null);function t(){tQe.cancel(e.current)}return l.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=tQe((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),u=jF(a,2),c=u[0],s=u[1];var d=t?rQe:nQe;return KZe((function(){if(i!==MZe&&i!==DZe){var e=d.indexOf(i),t=d[e+1],r=n(i);r===iQe?o(t,!0):t&&c((function(e){function n(){e.isCanceled()||o(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,i]),l.useEffect((function(){return function(){s()}}),[]),[function(){o(RZe,!0)},i]};function uQe(e,t,n,r){var i,o,a,u=r.motionEnter,c=void 0===u||u,s=r.motionAppear,d=void 0===s||s,f=r.motionLeave,h=void 0===f||f,p=r.motionDeadline,v=r.motionLeaveImmediately,g=r.onAppearPrepare,m=r.onEnterPrepare,y=r.onLeavePrepare,b=r.onAppearStart,w=r.onEnterStart,_=r.onLeaveStart,x=r.onAppearActive,k=r.onEnterActive,C=r.onLeaveActive,S=r.onAppearEnd,O=r.onEnterEnd,E=r.onLeaveEnd,I=r.onVisibleChanged,P=jF(CZe(),2),M=P[0],R=P[1],A=(i=OZe,o=jF(l.useReducer((function(e){return e+1}),0),2)[1],a=l.useRef(i),[SZe((function(){return a.current})),SZe((function(e){a.current="function"==typeof e?e(a.current):e,o()}))]),j=jF(A,2),D=j[0],T=j[1],F=jF(CZe(null),2),N=F[0],L=F[1],B=D(),V=Object(l.useRef)(!1),z=Object(l.useRef)(null);function H(){return n()}var W=Object(l.useRef)(!1);function U(){T(OZe),L(null,!0)}var G=kK((function(e){var t=D();if(t!==OZe){var n=H();if(!e||e.deadline||e.target===n){var r,i=W.current;t===EZe&&i?r=null==S?void 0:S(n,e):t===IZe&&i?r=null==O?void 0:O(n,e):t===PZe&&i&&(r=null==E?void 0:E(n,e)),i&&!1!==r&&U()}}})),Y=jF(qZe(G),1)[0],$=function(e){switch(e){case EZe:return nx(nx(nx({},RZe,g),AZe,b),jZe,x);case IZe:return nx(nx(nx({},RZe,m),AZe,w),jZe,k);case PZe:return nx(nx(nx({},RZe,y),AZe,_),jZe,C);default:return{}}},q=l.useMemo((function(){return $(B)}),[B]),K=jF(lQe(B,!e,(function(e){if(e===RZe){var t=q[RZe];return t?t(H()):iQe}var n;J in q&&L((null===(n=q[J])||void 0===n?void 0:n.call(q,H(),null))||null);return J===jZe&&B!==OZe&&(Y(H()),p>0&&(clearTimeout(z.current),z.current=setTimeout((function(){G({deadline:!0})}),p))),J===TZe&&U(),oQe})),2),X=K[0],J=K[1],Z=aQe(J);W.current=Z;var Q=Object(l.useRef)(null);KZe((function(){if(!V.current||Q.current!==t){R(t);var n,r=V.current;V.current=!0,!r&&t&&d&&(n=EZe),r&&t&&c&&(n=IZe),(r&&!t&&h||!r&&v&&!t&&h)&&(n=PZe);var i=$(n);n&&(e||i[RZe])?(T(n),X()):T(OZe),Q.current=t}}),[t]),Object(l.useEffect)((function(){(B===EZe&&!d||B===IZe&&!c||B===PZe&&!h)&&T(OZe)}),[d,c,h]),Object(l.useEffect)((function(){return function(){V.current=!1,clearTimeout(z.current)}}),[]);var ee=l.useRef(!1);Object(l.useEffect)((function(){M&&(ee.current=!0),void 0!==M&&B===OZe&&((ee.current||M)&&(null==I||I(M)),ee.current=!0)}),[M,B]);var te=N;return q[RZe]&&J===AZe&&(te=MWe({transition:"none"},te)),[B,J,te,null!=M?M:t]}var cQe=function(e){var t=e;"object"===ex(e)&&(t=e.transitionSupport);var n=l.forwardRef((function(e,n){var r=e.visible,i=void 0===r||r,o=e.removeOnLeave,a=void 0===o||o,u=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,h=function(e,n){return!(!e.motionName||!t||!1===n)}(e,l.useContext(xZe).motion),p=Object(l.useRef)(),v=Object(l.useRef)();var g=jF(uQe(h,i,(function(){try{return p.current instanceof HTMLElement?p.current:dZe(v.current)}catch(e){return null}}),e),4),m=g[0],y=g[1],b=g[2],w=g[3],_=l.useRef(w);w&&(_.current=!0);var x,k=l.useCallback((function(e){p.current=e,mZe(n,e)}),[n]),C=MWe(MWe({},f),{},{visible:i});if(c)if(m===OZe)x=w?c(MWe({},C),k):!a&&_.current&&d?c(MWe(MWe({},C),{},{className:d}),k):u||!a&&!d?c(MWe(MWe({},C),{},{style:{display:"none"}}),k):null;else{var S;y===RZe?S="prepare":aQe(y)?S="active":y===AZe&&(S="start");var O=$Ze(s,"".concat(m,"-").concat(S));x=c(MWe(MWe({},C),{},{className:F()($Ze(s,m),nx(nx({},O,O&&S),s,"string"==typeof s)),style:b}),k)}else x=null;l.isValidElement(x)&&bZe(x)&&(_Ze(x)||(x=l.cloneElement(x,{ref:k})));return l.createElement(kZe,{ref:v},x)}));return n.displayName="CSSMotion",n}(UZe),sQe="add",dQe="keep",fQe="remove",hQe="removed";function pQe(e){var t;return MWe(MWe({},t=e&&"object"===ex(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function vQe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(pQe)}var gQe=["component","children","onVisibleChanged","onAllRemoved"],mQe=["status"],yQe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cQe,n=function(e){NC(r,e);var n=DXe(r);function r(){var e;rx(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return nx(AC(e=n.call.apply(n,[this].concat(i))),"state",{keyEntities:[]}),nx(AC(e),"removeKey",(function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:MWe(MWe({},e),{},{status:hQe})}))}}),(function(){0===e.state.keyEntities.filter((function(e){return e.status!==hQe})).length&&e.props.onAllRemoved&&e.props.onAllRemoved()}))})),e}return ox(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged;r.onAllRemoved;var u=EWe(r,gQe),c=i||l.Fragment,s={};return yQe.forEach((function(e){s[e]=u[e],delete u[e]})),delete u.keys,l.createElement(c,u,n.map((function(n,r){var i=n.status,u=EWe(n,mQe),c=i===sQe||i===dQe;return l.createElement(t,RXe({},s,{key:u.key,visible:c,eventProps:u,onVisibleChanged:function(t){null==a||a(t,{key:u.key}),t||e.removeKey(u.key)}}),(function(e,t){return o(MWe(MWe({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=vQe(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=vQe(e),a=vQe(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var l=a[o];if(l.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return MWe(MWe({},e),{},{status:sQe})}))),r=o),n.push(MWe(MWe({},l),{},{status:dQe})),r+=1,t=!0;break}}t||n.push(MWe(MWe({},e),{},{status:fQe}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return MWe(MWe({},e),{},{status:sQe})}))));var l={};return n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1})),Object.keys(l).filter((function(e){return l[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==fQe}))).forEach((function(t){t.key===e&&(t.status=dQe)}))})),n}(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==hQe||e.status!==fQe}))}}}]),r}(l.Component);nx(n,"defaultProps",{component:"div"})}(UZe);var bQe=function e(t){return rx(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},wQe=0,_Qe={};function xQe(e){var t=wQe++,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _Qe[t]=tQe((function r(){(n-=1)<=0?(e(),delete _Qe[t]):_Qe[t]=tQe(r)})),t}xQe.cancel=function(e){void 0!==e&&(tQe.cancel(_Qe[e]),delete _Qe[e])},xQe.ids=_Qe;var kQe,CQe=l.isValidElement;function SQe(e,t){return function(e,t,n){return CQe(e)?l.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}(e,e,t)}function OQe(e){return!e||null===e.offsetParent||e.hidden}var EQe=function(e){NC(n,e);var t=DXe(n);function n(){var e;return rx(this,n),(e=t.apply(this,arguments)).containerRef=l.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var r,i;if(!(!t||OQe(t)||t.className.indexOf("-leave")>=0)){var o=e.props.insertExtraNode;e.extraNode=document.createElement("div");var a=AC(e).extraNode,l=e.context.getPrefixCls;a.className="".concat(l(""),"-click-animating-node");var u,c=e.getAttributeName();if(t.setAttribute(c,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&!((u=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&u[1]&&u[2]&&u[3]&&u[1]===u[2]&&u[2]===u[3])&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){a.style.borderColor=n;var s=(null===(r=t.getRootNode)||void 0===r?void 0:r.call(t))||t.ownerDocument,d=s instanceof Document?s.body:null!==(i=s.firstChild)&&void 0!==i?i:s;kQe=RGe("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:d})}o&&t.appendChild(a),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!OQe(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),xQe.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=xQe((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!l.isValidElement(r))return r;var i=e.containerRef;return bZe(r)&&(i=yZe(r.ref,e.containerRef)),SQe(r,{ref:i})},e}return ox(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();e.setAttribute(r,"false"),kQe&&(kQe.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return l.createElement(uZe,null,this.renderWave)}}]),n}(l.Component);EQe.contextType=lZe;var IQe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},PQe=function(){return{width:0,opacity:0,transform:"scale(0)"}},MQe=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},RQe=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?u.a.createElement("span",{className:"".concat(t,"-loading-icon")},u.a.createElement(kYe,null)):u.a.createElement(cQe,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:PQe,onAppearActive:MQe,onEnterStart:PQe,onEnterActive:MQe,onLeaveStart:MQe,onLeaveActive:PQe},(function(e,n){var r=e.className,i=e.style;return u.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:i,ref:n},u.a.createElement(kYe,{className:r}))}))},AQe=/^[\u4e00-\u9fa5]{2}$/,jQe=AQe.test.bind(AQe);function DQe(e){return"text"===e||"link"===e}function TQe(e,t){var n=!1,r=[];return l.Children.forEach(e,(function(e){var t=ex(e),i="string"===t||"number"===t;if(n&&i){var o=r.length-1,a=r[o];r[o]="".concat(a).concat(e)}else r.push(e);n=i})),l.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&jQe(e.props.children)?SQe(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(jQe(e)&&(e=e.split("").join(n)),l.createElement("span",null,e)):e}}(e,t)}))}IQe("default","primary","ghost","dashed","link","text"),IQe("circle","round"),IQe("submit","button","reset");var FQe=function(e,t){var n,r,i=e.loading,o=void 0!==i&&i,a=e.prefixCls,u=e.type,c=e.danger,s=e.shape,d=e.size,f=e.className,h=e.children,p=e.icon,v=e.ghost,g=void 0!==v&&v,m=e.block,y=void 0!==m&&m,b=e.htmlType,w=void 0===b?"button":b,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),x=l.useContext(cZe),k=jF(l.useState(!!o),2),C=k[0],S=k[1],O=jF(l.useState(!1),2),E=O[0],I=O[1],P=l.useContext(lZe),M=P.getPrefixCls,R=P.autoInsertSpaceInButton,A=P.direction,j=t||l.createRef(),D=l.useRef(),T=function(){return 1===l.Children.count(h)&&!p&&!DQe(u)};r="object"===ex(o)&&o.delay?o.delay||!0:!!o,l.useEffect((function(){clearTimeout(D.current),"number"==typeof r?D.current=window.setTimeout((function(){S(r)}),r):S(r)}),[r]),l.useEffect((function(){if(j&&j.current&&!1!==R){var e=j.current.textContent;T()&&jQe(e)?E||I(!0):E&&I(!1)}}),[j]);var N=function(t){var n,r=e.onClick,i=e.disabled;C||i?t.preventDefault():null===(n=r)||void 0===n||n(t)};KJe(!("string"==typeof p&&p.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(p,"` at https://ant.design/components/icon")),KJe(!(g&&DQe(u)),"Button","`link` or `text` button can't be a `ghost` button.");var L=M("btn",a),B=!1!==R,V="";switch(d||x){case"large":V="lg";break;case"small":V="sm"}var z=C?"loading":p,H=F()(L,(nx(n={},"".concat(L,"-").concat(u),u),nx(n,"".concat(L,"-").concat(s),s),nx(n,"".concat(L,"-").concat(V),V),nx(n,"".concat(L,"-icon-only"),!h&&0!==h&&!!z),nx(n,"".concat(L,"-background-ghost"),g&&!DQe(u)),nx(n,"".concat(L,"-loading"),C),nx(n,"".concat(L,"-two-chinese-chars"),E&&B),nx(n,"".concat(L,"-block"),y),nx(n,"".concat(L,"-dangerous"),!!c),nx(n,"".concat(L,"-rtl"),"rtl"===A),n),f),W=p&&!C?p:l.createElement(RQe,{existIcon:!!p,prefixCls:L,loading:!!C}),U=h||0===h?TQe(h,T()&&B):null,G=AXe(_,["navigate"]);if(void 0!==G.href)return l.createElement("a",RXe({},G,{className:H,onClick:N,ref:j}),W,U);var Y=l.createElement("button",RXe({},_,{type:w,className:H,onClick:N,ref:j}),W,U);return DQe(u)?Y:l.createElement(EQe,null,Y)},NQe=l.forwardRef(FQe);NQe.displayName="Button",NQe.Group=function(e){return l.createElement(uZe,null,(function(t){var n,r=t.getPrefixCls,i=t.direction,o=e.prefixCls,a=e.size,u=e.className,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","size","className"]),s=r("btn-group",o),d="";switch(a){case"large":d="lg";break;case"small":d="sm";break;case"middle":case void 0:break;default:console.warn(new bQe(a))}var f=F()(s,(nx(n={},"".concat(s,"-").concat(d),d),nx(n,"".concat(s,"-rtl"),"rtl"===i),n),u);return l.createElement("div",RXe({},c,{className:f}))}))},NQe.__ANT_BUTTON=!0;var LQe=IQe("success","processing","error","default","warning"),BQe=IQe("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),VQe=new RegExp("^(".concat(BQe.join("|"),")(-inverse)?$")),zQe=new RegExp("^(".concat(LQe.join("|"),")$")),HQe=function(e,t){var n,r=e.prefixCls,i=e.className,o=e.style,a=e.children,u=e.icon,c=e.color,s=e.onClose,d=e.closeIcon,f=e.closable,h=void 0!==f&&f,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),v=l.useContext(lZe),g=v.getPrefixCls,m=v.direction,y=jF(l.useState(!0),2),b=y[0],w=y[1];l.useEffect((function(){"visible"in p&&w(p.visible)}),[p.visible]);var _=function(){return!!c&&(VQe.test(c)||zQe.test(c))},x=RXe({backgroundColor:c&&!_()?c:void 0},o),k=_(),C=g("tag",r),S=F()(C,(nx(n={},"".concat(C,"-").concat(c),k),nx(n,"".concat(C,"-has-color"),c&&!k),nx(n,"".concat(C,"-hidden"),!b),nx(n,"".concat(C,"-rtl"),"rtl"===m),n),i),O=function(e){e.stopPropagation(),null==s||s(e),e.defaultPrevented||"visible"in p||w(!1)},E="onClick"in p||a&&"a"===a.type,I=AXe(p,["visible"]),P=u||null,M=P?l.createElement(l.Fragment,null,P,l.createElement("span",null,a)):a,R=l.createElement("span",RXe({},I,{ref:t,className:S,style:x}),M,h?d?l.createElement("span",{className:"".concat(C,"-close-icon"),onClick:O},d):l.createElement(mYe,{className:"".concat(C,"-close-icon"),onClick:O}):null);return E?l.createElement(EQe,null,R):R},WQe=l.forwardRef(HQe);function UQe(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function GQe(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}WQe.displayName="Tag",WQe.CheckableTag=function(e){var t,n=e.prefixCls,r=e.className,i=e.checked,o=e.onChange,a=e.onClick,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","checked","onChange","onClick"]),c=(0,l.useContext(lZe).getPrefixCls)("tag",n),s=F()(c,(nx(t={},"".concat(c,"-checkable"),!0),nx(t,"".concat(c,"-checkable-checked"),i),t),r);return l.createElement("span",RXe({},u,{className:s,onClick:function(e){null==o||o(!i),null==a||a(e)}}))};var YQe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};var $Qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};var qQe={button:function(e){return l.createElement(NQe,RXe({size:"small",type:"primary"},e))},rangeItem:function(e){return l.createElement(WQe,RXe({color:"blue"},e))}};function KQe(e){var t,n=e.format,r=e.picker,i=e.showHour,o=e.showMinute,a=e.showSecond,l=e.use12Hours,u=(t=n,t?Array.isArray(t)?t:[t]:[])[0],c=RXe({},e);return u&&"string"==typeof u&&(u.includes("s")||void 0!==a||(c.showSecond=!1),u.includes("m")||void 0!==o||(c.showMinute=!1),u.includes("H")||u.includes("h")||void 0!==i||(c.showHour=!1),(u.includes("a")||u.includes("A"))&&void 0===l&&(c.use12Hours=!0)),"time"===r?c:("function"==typeof u&&delete c.format,{showTime:c})}var XQe,JQe={},ZQe={},QQe={};var e0e,t0e={},n0e={exports:{}};function r0e(){return e0e||(e0e=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(n0e)),n0e.exports}var i0e,o0e={};var a0e,l0e,u0e={};function c0e(){return a0e||(a0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(u0e)),u0e}function s0e(){return l0e||(l0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r0e()),r=t(function(){if(i0e)return o0e;i0e=1,Object.defineProperty(o0e,"__esModule",{value:!0}),o0e.default=void 0;var e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};return o0e.default=e,o0e}()),i=t(c0e()),o={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},i.default)};e.default=o}(t0e)),t0e}var d0e,f0e,h0e,p0e={};function v0e(){return d0e||(d0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(s0e()).default;e.default=n}(p0e)),p0e}function g0e(){return f0e||(f0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((XQe||(XQe=1,Object.defineProperty(QQe,"__esModule",{value:!0}),QQe.default=void 0,QQe.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}),QQe)),r=t(s0e()),i=t(c0e()),o=t(v0e()),a="${label} is not a valid ${type}",l={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:o.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=l}(ZQe)),ZQe}function m0e(){return h0e||(h0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(g0e()).default;e.default=n}(JQe)),JQe}var y0e,b0e=Tx(m0e()),w0e={},_0e={};var x0e,k0e={},C0e={};var S0e,O0e,E0e={};function I0e(){return S0e||(S0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(E0e)),E0e}function P0e(){return O0e||(O0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r0e()),r=t(function(){if(x0e)return C0e;x0e=1,Object.defineProperty(C0e,"__esModule",{value:!0}),C0e.default=void 0;var e={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};return C0e.default=e,C0e}()),i=t(I0e()),o={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},i.default)};o.lang.ok="确 定";var a=o;e.default=a}(k0e)),k0e}var M0e,R0e,A0e={};function j0e(){return M0e||(M0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(P0e()).default;e.default=n}(A0e)),A0e}function D0e(){return R0e||(R0e=1,function(e){var t=IXe();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((y0e||(y0e=1,Object.defineProperty(_0e,"__esModule",{value:!0}),_0e.default=void 0,_0e.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}),_0e)),r=t(P0e()),i=t(I0e()),o=t(j0e()),a="${label}不是一个有效的${type}",l={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:i.default,Calendar:o.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=l}(w0e)),w0e}var T0e=Tx(D0e());function F0e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N0e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F0e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}T0e.Calendar.lang.dayFormat="D",T0e.DatePicker.lang.dayFormat="D";var L0e,B0e,V0e,z0e,H0e,W0e,U0e,G0e,Y0e,$0e,q0e=(B0e=function(e){function t(t,n){var r=function(r){NC(o,r);var i=DXe(o);function o(r){var a;return rx(this,o),(a=i.call(this,r)).pickerRef=l.createRef(),a.focus=function(){a.pickerRef.current&&a.pickerRef.current.focus()},a.blur=function(){a.pickerRef.current&&a.pickerRef.current.blur()},a.renderPicker=function(n){var r=RXe(RXe({},n),a.props.locale),i=a.context,o=i.getPrefixCls,u=i.direction,c=i.getPopupContainer,s=a.props,d=s.prefixCls,f=s.getPopupContainer,h=s.className,p=s.size,v=s.bordered,g=void 0===v||v,m=s.placeholder,y=YQe(s,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),b=a.props,w=b.format,_=b.showTime,x=o("picker",d),k={showToday:!0},C={};t&&(C.picker=t);var S=t||a.props.picker;C=RXe(RXe(RXe({},C),_?KQe(RXe({format:w,picker:S},_)):{}),"time"===S?KQe(RXe(RXe({format:w},a.props),{picker:S})):{});var O=o();return l.createElement(cZe.Consumer,null,(function(t){var n,i=p||t;return l.createElement(W1,RXe({ref:a.pickerRef,placeholder:UQe(S,r,m),suffixIcon:"time"===S?l.createElement(dYe,null):l.createElement(oYe,null),clearIcon:l.createElement(pYe,null),allowClear:!0,transitionName:"".concat(O,"-slide-up")},k,y,C,{locale:r.lang,className:F()((n={},nx(n,"".concat(x,"-").concat(i),i),nx(n,"".concat(x,"-borderless"),!g),n),h),prefixCls:x,getPopupContainer:f||c,generateConfig:e,prevIcon:l.createElement("span",{className:"".concat(x,"-prev-icon")}),nextIcon:l.createElement("span",{className:"".concat(x,"-next-icon")}),superPrevIcon:l.createElement("span",{className:"".concat(x,"-super-prev-icon")}),superNextIcon:l.createElement("span",{className:"".concat(x,"-super-next-icon")}),components:qQe,direction:u}))}))},KJe("quarter"!==t,n,"DatePicker.".concat(n," is legacy usage. Please use DatePicker[picker='").concat(t,"'] directly.")),a}return ox(o,[{key:"render",value:function(){return l.createElement(tZe,{componentName:"DatePicker",defaultLocale:JJe},this.renderPicker)}}]),o}(l.Component);return r.contextType=lZe,n&&(r.displayName=n),r}return{DatePicker:t(),WeekPicker:t("week","WeekPicker"),MonthPicker:t("month","MonthPicker"),YearPicker:t("year","YearPicker"),TimePicker:t("time","TimePicker"),QuarterPicker:t("quarter","QuarterPicker")}}(L0e=MXe),V0e=B0e.DatePicker,z0e=B0e.WeekPicker,H0e=B0e.MonthPicker,W0e=B0e.YearPicker,U0e=B0e.TimePicker,G0e=B0e.QuarterPicker,Y0e=function(e){var t=function(t){NC(r,t);var n=DXe(r);function r(){var t;return rx(this,r),(t=n.apply(this,arguments)).pickerRef=l.createRef(),t.focus=function(){t.pickerRef.current&&t.pickerRef.current.focus()},t.blur=function(){t.pickerRef.current&&t.pickerRef.current.blur()},t.renderPicker=function(n){var r=RXe(RXe({},n),t.props.locale),i=t.context,o=i.getPrefixCls,a=i.direction,u=i.getPopupContainer,c=t.props,s=c.prefixCls,d=c.getPopupContainer,f=c.className,h=c.size,p=c.bordered,v=void 0===p||p,g=c.placeholder,m=$Qe(c,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),y=t.props,b=y.format,w=y.showTime,_=y.picker,x=o("picker",s),k={};k=RXe(RXe(RXe({},k),w?KQe(RXe({format:b,picker:_},w)):{}),"time"===_?KQe(RXe(RXe({format:b},t.props),{picker:_})):{});var C=o();return l.createElement(cZe.Consumer,null,(function(n){var i,o=h||n;return l.createElement(b1,RXe({separator:l.createElement("span",{"aria-label":"to",className:"".concat(x,"-separator")},l.createElement(PYe,null)),ref:t.pickerRef,placeholder:GQe(_,r,g),suffixIcon:"time"===_?l.createElement(dYe,null):l.createElement(oYe,null),clearIcon:l.createElement(pYe,null),allowClear:!0,transitionName:"".concat(C,"-slide-up")},m,k,{className:F()((i={},nx(i,"".concat(x,"-").concat(o),o),nx(i,"".concat(x,"-borderless"),!v),i),f),locale:r.lang,prefixCls:x,getPopupContainer:d||u,generateConfig:e,prevIcon:l.createElement("span",{className:"".concat(x,"-prev-icon")}),nextIcon:l.createElement("span",{className:"".concat(x,"-next-icon")}),superPrevIcon:l.createElement("span",{className:"".concat(x,"-super-prev-icon")}),superNextIcon:l.createElement("span",{className:"".concat(x,"-super-next-icon")}),components:qQe,direction:a}))}))},t}return ox(r,[{key:"render",value:function(){return l.createElement(tZe,{componentName:"DatePicker",defaultLocale:JJe},this.renderPicker)}}]),r}(l.Component);return t.contextType=lZe,t}(L0e),($0e=V0e).WeekPicker=z0e,$0e.MonthPicker=H0e,$0e.YearPicker=W0e,$0e.RangePicker=Y0e,$0e.TimePicker=U0e,$0e.QuarterPicker=G0e,$0e),K0e="zhCN"===bx._lang?T0e:b0e,X0e=Object(l.forwardRef)((function(e,t){return u.a.createElement(q0e,N0e(N0e({locale:K0e.DatePicker},e),{},{ref:t}))})),J0e=["className"];function Z0e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Q0e=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,J0e);return u.a.createElement(b.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z0e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z0e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,className:F()("lt-input-number",n),autoComplete:"false",stringMode:!0,max:1e13},r))}));SG(Q0e,b.a);var e1e=["className","dropdownClassName"];function t1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var n1e=u.a.forwardRef((function(e,t){var n=e.className,r=e.dropdownClassName,i=EWe(e,e1e);return u.a.createElement(w.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t1e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:F()("lt-select",n),dropdownClassName:F()("lt-select-dropdown",r),ref:t,suffixIcon:u.a.createElement(H.default,null)},i))}));function r1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i1e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r1e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r1e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o1e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a1e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a1e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function a1e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l1e(e){var t=e.title;return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-title"},t)}function u1e(e){var t=e.title,n=e.defaultValue,r=e.onChange,i=e.placeholder,o=e.allowClear,a=e.autoFocus;return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-input"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},u.a.createElement(zYe,{defaultValue:n,onChange:r,placeholder:i,allowClear:o,autoFocus:a})))}function c1e(e){var t=e.title,n=e.defaultValue,r=e.onChange,i=e.placeholder,o=e.allowClear;return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-input"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},u.a.createElement(LYe.TextArea,{className:"lt-textarea",defaultValue:n,onChange:r,placeholder:i,allowClear:o})))}function s1e(e){var t=e.id,n=e.title,r=e.defaultValue,i=e.options,o=e.cascader,a=e.onChange,c=e.allowClear,s=e.defaultValues,d=e.placeholder;e.subType;var f=SWe(PS),h=(null==f?void 0:f.getValue("modal.customModalContainer"))||document.body,p=function(e){if(o){var t,n=i.find((function(t){return t.value===e}));if(n){var r,a=o1e(o);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(n[l.matchKey]===l.matchValue){t=l;break}}}catch(e){a.e(e)}finally{a.f()}}return t}return null},v=jF(Object(l.useState)(p(s.statType)),2),g=v[0],m=v[1];return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-select"},n&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},n),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},u.a.createElement(n1e,{defaultValue:r,showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},dropdownClassName:"lakex-table-configurable-select-dropdown",onChange:function(e){null==a||a(t,e);var n=p(e);n?(null==a||a(n.id,n.options[0].value),m(n)):m(null)},suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),getPopupContainer:function(){return h},placeholder:d||wx("请选择"),allowClear:c},i.map((function(e){return e.isTitle?u.a.createElement(n1e.OptGroup,{label:e.label,key:e.label}):u.a.createElement(n1e.Option,{value:e.value,key:e.value,label:e.label,className:"lakex-table-configurable-select-option"},e.icon&&u.a.createElement("span",{className:"lakex-table-configurable-select-icon"},"string"==typeof e.icon?u.a.createElement("img",{className:"lakex-table-configurable-select-icon-img",src:e.icon}):u.a.createElement(e.icon,null)),u.a.createElement("span",{style:{color:e.color}},e.label))}))),g&&u.a.createElement(n1e,{defaultValue:s[g.id],showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},dropdownClassName:"lakex-table-configurable-select-dropdown",onChange:function(e){return null==a?void 0:a(g.id,e)},suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),getPopupContainer:function(){return h},placeholder:g.placeholder||wx("请选择"),allowClear:c},g.options.map((function(e){return e.isTitle?u.a.createElement(n1e.OptGroup,{label:e.label,key:e.label}):u.a.createElement(n1e.Option,{value:e.value,key:e.value,label:e.label,className:"lakex-table-configurable-select-option"},e.icon&&u.a.createElement("span",{className:"lakex-table-configurable-select-icon"},u.a.createElement(e.icon,null)),u.a.createElement("span",null,e.label))})))))}function d1e(e){var t=e.options,n=e.onChange;return u.a.createElement("div",{className:"lakex-table-configurable-icon-radio"},t.map((function(e){return u.a.createElement("div",{className:"lakex-table-configurable-icon-radio-item",onClick:function(t){return null==n?void 0:n(e)}},u.a.createElement("div",{className:"lakex-table-configurable-icon-radio-img"},u.a.createElement("img",{src:e.icon})),u.a.createElement("div",{className:"lakex-table-configurable-icon-radio-title"},e.label))})))}function f1e(e){var t=e.title,n=e.defaultValue,r=e.subType,i=e.options,o=e.onChange;return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-radio"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},"icon"===r?u.a.createElement(d1e,{options:i,onChange:function(e){return null==o?void 0:o(e.value)}}):u.a.createElement(_.a.Group,{options:i,onChange:function(e){return null==o?void 0:o(e.target.value)},defaultValue:n,optionType:"button"})))}function h1e(e){var t=e.title,n=e.onClick,r=e.children,i=e.isDanger;return r?u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-button",onClick:n},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},r)):u.a.createElement("div",{className:"lakex-table-configurable-button",onClick:n},u.a.createElement("div",{className:"lakex-table-configurable-button-text ".concat(i?"lakex-table-btn-danger":"")},t))}function p1e(e){var t=e.title,n=e.onChange,r=e.defaultValue;return u.a.createElement("div",{className:"lakex-table-configurable-checkbox"},u.a.createElement(kXe,{checked:r,onChange:n},t))}function v1e(e){var t=e.title,n=e.onChange,r=e.defaultValue,i=e.format,o=void 0===i?"YYYY-MM-DD HH:mm":i,a=e.placeholder,l=SWe(RC);return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-date"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},u.a.createElement(X0e,{defaultValue:r,picker:"HH:mm"===o?"time":"date",format:o,onChange:n,placeholder:a,getPopupContainer:function(){var e=(null==l?void 0:l.getValue("modal.customModalContainer"))||document.body,t=e.querySelector(".lakex-table-date-picker-container");return t||((t=document.createElement("div")).classList.add("lakex-table-date-picker-container"),e.appendChild(t)),t}})))}function g1e(e){var t=e.text,n=vK({id:t}),r=n.attributes,i=n.setNodeRef,o=n.listeners,a=n.transform,l=n.transition,c=n.isDragging,s={transform:M$e.Transform.toString(a),transition:l,zIndex:c?"1030":"auto",opacity:c?.3:1};return u.a.createElement("div",i1e(i1e({ref:i,className:"lakex-table-configurable-sort-item lakex-table-configurable-dragging"},r),{},{style:s},o),u.a.createElement(X$e,{type:"Drag"}),u.a.createElement("span",{className:"lakex-table-configurable-sort-text"},t))}function m1e(e){e.id;var t=e.title,n=e.list,r=e.onChange,i=jF(Object(l.useState)(n),2),o=i[0],a=i[1];Object(l.useEffect)((function(){a(n)}),[n]);var c=qY($Y(G$,{activationConstraint:{distance:8}})),s=o.filter((function(e){return!!e}));return u.a.createElement("div",{className:"lakex-table-configurable-sort-list"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-sort-list-content"},0===s.length?null:u.a.createElement(Rq,{sensors:c,modifiers:[xK,wK],collisionDetection:n$,onDragEnd:function(e){var t=e.active,n=e.over,i=t.id,o=null==n?void 0:n.id;i!==o&&a((function(e){var t=e.indexOf(i),n=e.indexOf(o),a=Zq(e,t,n);return null==r||r(a),a}))}},u.a.createElement(uK,{items:s,strategy:oK},s.map((function(e){return u.a.createElement(g1e,{key:e,text:e})}))))))}SG(n1e,w.a);var y1e=["grey-9","blue-6","magenta-6","orange-6","pea-green-6","purple-6","red-6","green-6","blue-2,blue-3,blue-4,blue-5,blue-6","magenta-2,magenta-3,magenta-4,magenta-5,magenta-6","orange-2,orange-3,orange-4,orange-5,orange-6","pea-green-2,pea-green-3,pea-green-4,pea-green-5,pea-green-6","purple-2,purple-3,purple-4,purple-5,purple-6","red-2,red-3,red-4,red-5,red-6","green-2,green-3,green-4,green-5,green-6"];function b1e(e){var t=e.title,n=e.onChange,r=e.defaultValue,i=e.colorTokens,o=I$e().themeService,a=jF(Object(l.useState)(r),2),c=a[0],s=a[1],d=(i||y1e).map((function(e){return{colorToken:e,colorValue:o.toRenderColor(e)}}));return u.a.createElement("span",{className:"lakex-table-configurable-item lakex-table-configurable-color"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-color-content"},d.map((function(e){return function(e){return u.a.createElement("span",{className:"lakex-table-configurable-color-item",onClick:function(){null==n||n(e.colorToken),s(e.colorToken)}},u.a.createElement("span",{style:{background:e.colorValue}},e.colorToken===c&&u.a.createElement("svg",{style:{fill:null==o?void 0:o.toColor("white")},viewBox:"0 0 18 18"},u.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}(e)}))))}function w1e(e){var t=e.title,n=e.onChange,r=e.defaultValue,i=e.max,o=e.min;return u.a.createElement("div",{className:"lakex-table-configurable-item lakex-table-configurable-number"},t&&u.a.createElement("h3",{className:"lakex-table-configurable-item-title"},t),u.a.createElement("div",{className:"lakex-table-configurable-item-content"},u.a.createElement(Q0e,{onChange:function(e){return null==n?void 0:n(e)},defaultValue:r,max:i,min:o})))}function _1e(e){var t=e.defaultValues||{};return u.a.createElement("div",{className:"lakex-table-configurable ".concat(e.className||"")},e.schema?e.schema.map((function(n){switch(n.type){case"title":return u.a.createElement(l1e,{key:n.id,title:n.title});case"input":return u.a.createElement(u1e,{key:n.id,title:n.title,defaultValue:t[n.id],onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,t.target.value)},placeholder:e.placeholder||n.placeholder||wx("请输入"),autoFocus:n.autoFocus,allowClear:n.allowClear});case"textarea":return u.a.createElement(c1e,{key:n.id,title:n.title,defaultValue:t[n.id],onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,t.target.value)},placeholder:e.placeholder||n.placeholder||wx("请输入"),allowClear:n.allowClear});case"button":return u.a.createElement(h1e,{key:n.id,title:n.title,children:n.children,isDanger:n.isDanger,onClick:function(e){var t;return null==(t=n.onClick)?void 0:t.call(n,n,e)}});case"select":return u.a.createElement(s1e,{id:n.id,key:n.id,title:n.title,defaultValue:t[n.id],options:n.options,cascader:n.cascader,defaultValues:t,onChange:e.onChange,allowClear:n.allowClear,placeholder:e.placeholder||n.placeholder,subType:n.subType});case"date":return u.a.createElement(v1e,{key:n.id,title:n.title,format:n.format,defaultValue:t[n.id],placeholder:e.placeholder||n.placeholder,onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,(null==t?void 0:t.value)||t)}});case"checkbox":return u.a.createElement(p1e,{key:n.id,title:n.title,defaultValue:t[n.id],onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,t.target.checked)}});case"sortList":return u.a.createElement(m1e,{id:n.id,key:n.id,list:t[n.id],title:n.title,onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,t)}});case"color":return u.a.createElement(b1e,{key:n.id,title:n.title,colorTokens:n.colorTokens,defaultValue:t[n.id],onChange:function(t){var r;return null==(r=e.onChange)?void 0:r.call(e,n.id,t)}});case"radio":return u.a.createElement(f1e,{key:n.id,title:n.title,options:n.options,subType:n.subType,defaultValue:t[n.id],onChange:function(t){return e.onChange(n.id,t)}});case"number":return u.a.createElement(w1e,{key:n.id,title:n.title,defaultValue:t[n.id],onChange:function(t){return e.onChange(n.id,t)},max:n.max,min:n.min});default:return u.a.createElement("div",{key:n.id})}})):u.a.createElement("div",{style:{textAlign:"center"}},wx("暂无配置")))}function x1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k1e(e){return function(t){var n=Object(l.useRef)(),r=jF(u.a.useState(!1),2),i=r[0],o=r[1];return Object(l.useEffect)((function(){return n.current=_O((function(){o(!0)})),function(){n.current&&n.current()}}),[]),i?u.a.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x1e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x1e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)):null}}var C1e="object"===("undefined"==typeof performance?"undefined":ex(performance))&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function S1e(e){cancelAnimationFrame(e.id)}var O1e=-1;function E1e(){if(-1===O1e||arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),O1e=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return O1e}var I1e=null;function P1e(){if(null===I1e||arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?I1e="positive-descending":(e.scrollLeft=1,I1e=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),I1e}return I1e}function M1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R1e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M1e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A1e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A1e=function(){return!!e})()}var j1e=function(e,t){return e};var D1e,T1e,F1e,N1e,L1e,B1e,V1e,z1e,H1e,W1e,U1e,G1e,Y1e,$1e,q1e,K1e,X1e,J1e,Z1e,Q1e,e2e,t2e,n2e,r2e,i2e,o2e,a2e,l2e,u2e,c2e,s2e,d2e,f2e,h2e,p2e,v2e,g2e=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},m2e=function(e,t,n){var r=e.itemSize,i=n.itemMetadataMap,o=n.lastMeasuredIndex;if(t>o){var a=0;if(o>=0){var l=i[o];a=l.offset+l.size}for(var u=o+1;u<=t;u++){var c=r(u);i[u]={offset:a,size:c},a+=c}n.lastMeasuredIndex=t}return i[t]},y2e=function(e,t,n,r,i){for(;r<=n;){var o=r+Math.floor((n-r)/2),a=m2e(e,o,t).offset;if(a===i)return o;a<i?r=o+1:a>i&&(n=o-1)}return r>0?r-1:0},b2e=function(e,t,n,r){for(var i=e.itemCount,o=1;n<i&&m2e(e,n,t).offset<r;)n+=o,o*=2;return y2e(e,t,Math.min(n,i-1),Math.floor(n/2),r)},w2e=function(e,t){var n=e.itemCount,r=t.itemMetadataMap,i=t.estimatedItemSize,o=t.lastMeasuredIndex,a=0;if(o>=n&&(o=n-1),o>=0){var l=r[o];a=l.offset+l.size}return a+(n-o-1)*i},_2e=(D1e={getItemOffset:function(e,t,n){return m2e(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:w2e,getOffsetForIndexAndAlignment:function(e,t,n,r,i,o){var a=e.direction,l=e.height,u=e.layout,c=e.width,s="horizontal"===a||"horizontal"===u?c:l,d=m2e(e,t,i),f=w2e(e,i),h=Math.max(0,Math.min(f-s,d.offset)),p=Math.max(0,d.offset-s+d.size+o);switch("smart"===n&&(n=r>=p-s&&r<=h+s?"auto":"center"),n){case"start":return h;case"end":return p;case"center":return Math.round(p+(h-p)/2);default:return r>=p&&r<=h?r:r<p?p:h}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var r=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?r[i].offset:0)>=n?y2e(e,t,i,0,n):b2e(e,t,Math.max(0,i),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,r){for(var i=e.direction,o=e.height,a=e.itemCount,l=e.layout,u=e.width,c="horizontal"===i||"horizontal"===l?u:o,s=m2e(e,t,r),d=n+c,f=s.offset+s.size,h=t;h<a-1&&f<d;)h++,f+=m2e(e,h,r).size;return h},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}},F1e=D1e.getItemOffset,N1e=D1e.getEstimatedTotalSize,L1e=D1e.getItemSize,B1e=D1e.getOffsetForIndexAndAlignment,V1e=D1e.getStartIndexForOffset,z1e=D1e.getStopIndexForStartIndex,H1e=D1e.initInstanceProps,W1e=D1e.validateProps,T1e=function(e){function t(e){var n;return rx(this,t),n=function(e,t,n){return t=DC(t),jC(e,A1e()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}(this,t,[e]),n._instanceProps=H1e(n.props,n),n._resetIsScrollingTimeoutId=null,n.state={instance:n,isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n.itemMap={},n._callOnItemsRendered=Y1((function(e,t,r,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:i})})),n._callOnScroll=Y1((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=function(e){var t,r=n.props,i=r.direction,o=r.itemSize,a=r.layout,l=n._getItemStyleCache(o,a,i);if(l.hasOwnProperty(e))t=l[e];else{var u=F1e(n.props,e,n._instanceProps),c=L1e(n.props,e,n._instanceProps),s="horizontal"===i||"horizontal"===a,d="rtl"===i,f=s?u:0;l[e]=t={position:"absolute",left:d?void 0:f,right:d?f:void 0,top:s?0:u,height:s?"100%":c,width:s?c:"100%"}}return t},n._getItemStyleCache=Y1((function(e,t,n){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,a=i;if("rtl"===t)switch(P1e()){case"negative":a=-i;break;case"positive-descending":a=o-r-i}return a=Math.max(0,Math.min(a,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,i=t.scrollHeight,o=t.scrollTop;n.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,i-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"===ex(t)&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&S1e(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=function(e,t){var n=C1e(),r={id:requestAnimationFrame((function i(){C1e()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))};return r}(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}return NC(t,e),ox(t,[{key:"clearCache",value:function(){this._instanceProps=H1e(this.props,this),this._getItemStyleCache(-1,null)}},{key:"scrollTo",value:function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)}},{key:"scrollToItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=this.props,r=n.itemCount,i=n.layout,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===i?l.scrollWidth>l.clientWidth?E1e():0:l.scrollHeight>l.clientHeight?E1e():0}this.scrollTo(B1e(this.props,e,t,o,this._instanceProps,a))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(P1e()){case"negative":o.scrollLeft=-i;break;case"positive-ascending":o.scrollLeft=i;break;default:var a=o.clientWidth,l=o.scrollWidth;o.scrollLeft=l-a-i}else o.scrollLeft=i;else o.scrollTop=i}this._callPropsCallbacks()}},{key:"componentWillUnmount",value:function(){null!==this._resetIsScrollingTimeoutId&&S1e(this._resetIsScrollingTimeoutId)}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.children,o=r.className,a=r.direction,u=r.height,c=r.innerRef,s=r.innerElementType,d=r.innerTagName,f=r.itemCount,h=r.itemData,p=r.itemKey,v=void 0===p?j1e:p,g=r.layout,m=r.outerElementType,y=r.outerTagName,b=r.style,w=r.useIsScrolling,_=r.width,x=r.contentWidth,k=r.onScroll,C=r.disableVirtual,S=this.state.isScrolling,O="horizontal"===a||"horizontal"===g;if(C)e=0,t=f-1;else{var E=this._getRangeToRender();e=E[0],t=E[1]}var I=[];if(f>0)for(var P=e;P<=t;P++){var M=this._getItemStyle(P),R=v(P,h)+"-"+M.top+"-"+M.height;this.itemMap[R]||(this.itemMap[R]=Object(l.createElement)(i,{data:h,key:R,index:P,isScrolling:w?S:void 0,style:M})),I.push(this.itemMap[R])}var A=N1e(this.props,this._instanceProps);return Object(l.createElement)(m||y||"div",{className:o,onScroll:function(e){O?n._onScrollHorizontal(e):n._onScrollVertical(e),null==k||k(e)},ref:this._outerRefSetter,contentWidth:x,style:R1e({position:"relative",height:u,width:x||_,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},b)},Object(l.createElement)(s||d||"div",{children:I,ref:c,style:{height:O?"100%":A,pointerEvents:S?"none":void 0,width:O?A:"100%"}}))}},{key:"_callPropsCallbacks",value:function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=jF(this._getRangeToRender(),4),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var o=this.state,a=o.scrollDirection,l=o.scrollOffset,u=o.scrollUpdateWasRequested;this._callOnScroll(a,l,u)}}},{key:"_getRangeToRender",value:function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,o=r.scrollDirection,a=r.scrollOffset;if(0===t)return[0,0,0,0];var l=V1e(this.props,a,this._instanceProps),u=z1e(this.props,l,a,this._instanceProps),c=i&&"backward"!==o?1:Math.max(1,n),s=i&&"forward"!==o?1:Math.max(1,n);return[Math.max(0,l-c),Math.max(0,Math.min(t-1,u+s)),l,u]}}],[{key:"getDerivedStateFromProps",value:function(e,t){return g2e(e,t),W1e(e),null}}])}(l.PureComponent),T1e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},T1e),x2e=hUe()?l.useLayoutEffect:l.useEffect,k2e=function(e,t){var n=l.useRef(!0);x2e((function(){return e(n.current)}),t),x2e((function(){return n.current=!1,function(){n.current=!0}}),[])},C2e=function(e,t){k2e((function(t){if(!t)return e()}),t)};function S2e(e){return void 0!==e}function O2e(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,l=jF(CZe((function(){return S2e(i)?i:S2e(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),u=l[0],c=l[1],s=void 0!==i?i:u,d=a?a(s):s,f=SZe(o),h=jF(CZe([s]),2),p=h[0],v=h[1];return C2e((function(){var e=p[0];u!==e&&f(u,e)}),[p]),C2e((function(){S2e(i)||c(i)}),[i]),[d,SZe((function(e,t){c(e,t),v([s],t)}))]}function E2e(){if(K1e)return q1e;K1e=1;var e=($1e||($1e=1,Y1e=function(e){return function(t){return null==t?void 0:t[e]}}),Y1e),t=e("length");return q1e=t}function I2e(){if(Q1e)return Z1e;Q1e=1;var e=E2e(),t=BGe(),n=function(){if(J1e)return X1e;J1e=1;var e="\\ud800-\\udfff",t="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+r+")?",u="[\\ufe0e\\ufe0f]?",c=u+l+"(?:\\u200d(?:"+[i,o,a].join("|")+")"+u+l+")*",s="(?:"+[i+n+"?",n,o,a,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+s+c,"g");return X1e=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}}();return Z1e=function(r){return t(r)?n(r):e(r)}}function P2e(){if(t2e)return e2e;t2e=1;var e=function(){if(G1e)return U1e;G1e=1;var e=Math.floor;return U1e=function(t,n){var r="";if(!t||n<1||n>9007199254740991)return r;do{n%2&&(r+=t),(n=e(n/2))&&(t+=t)}while(n);return r}}(),t=FGe(),n=LGe(),r=BGe(),i=I2e(),o=VGe(),a=Math.ceil;return e2e=function(l,u){var c=(u=void 0===u?" ":t(u)).length;if(c<2)return c?e(u,l):u;var s=e(u,a(l/i(u)));return r(u)?n(o(s),0,l).join(""):s.slice(0,l)}}function M2e(){if(o2e)return i2e;o2e=1;var e=function(){if(r2e)return n2e;r2e=1;var e=/\s/;return n2e=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}(),t=/^\s+/;return i2e=function(n){return n?n.slice(0,e(n)+1).replace(t,""):n}}function R2e(){if(c2e)return u2e;c2e=1;var e=M2e(),t=(l2e||(l2e=1,a2e=function(e){var t=ex(e);return null!=e&&("object"==t||"function"==t)}),a2e),n=TGe(),r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;return u2e=function(l){if("number"==typeof l)return l;if(n(l))return NaN;if(t(l)){var u="function"==typeof l.valueOf?l.valueOf():l;l=t(u)?u+"":u}if("string"!=typeof l)return 0===l?l:+l;l=e(l);var c=i.test(l);return c||o.test(l)?a(l.slice(2),c?2:8):r.test(l)?NaN:+l},u2e}function A2e(){if(h2e)return f2e;h2e=1;var e=function(){if(d2e)return s2e;d2e=1;var e=R2e();return s2e=function(t){return t?1/0===(t=e(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},s2e}();return f2e=function(t){var n=e(t),r=n%1;return n==n?r?n-r:n:0},f2e}var j2e=Tx(function(){if(v2e)return p2e;v2e=1;var e=P2e(),t=I2e(),n=A2e(),r=NGe();return p2e=function(i,o,a){i=r(i);var l=(o=n(o))?t(i):0;return o&&l<o?e(o-l,a)+i:i}}()),D2e={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=D2e.F1&&t<=D2e.F12)return!1;switch(t){case D2e.ALT:case D2e.CAPS_LOCK:case D2e.CONTEXT_MENU:case D2e.CTRL:case D2e.DOWN:case D2e.END:case D2e.ESC:case D2e.HOME:case D2e.INSERT:case D2e.LEFT:case D2e.MAC_FF_META:case D2e.META:case D2e.NUMLOCK:case D2e.NUM_CENTER:case D2e.PAGE_DOWN:case D2e.PAGE_UP:case D2e.PAUSE:case D2e.PRINT_SCREEN:case D2e.RIGHT:case D2e.SHIFT:case D2e.UP:case D2e.WIN_KEY:case D2e.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=D2e.ZERO&&e<=D2e.NINE)return!0;if(e>=D2e.NUM_ZERO&&e<=D2e.NUM_MULTIPLY)return!0;if(e>=D2e.A&&e<=D2e.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case D2e.SPACE:case D2e.QUESTION_MARK:case D2e.NUM_PLUS:case D2e.NUM_MINUS:case D2e.NUM_PERIOD:case D2e.NUM_DIVISION:case D2e.SEMICOLON:case D2e.DASH:case D2e.EQUALS:case D2e.COMMA:case D2e.PERIOD:case D2e.SLASH:case D2e.APOSTROPHE:case D2e.SINGLE_QUOTE:case D2e.OPEN_SQUARE_BRACKET:case D2e.BACKSLASH:case D2e.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},T2e="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function F2e(e,t){return 0===e.indexOf(t)}function N2e(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:MWe({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||F2e(n,"aria-"))||t.data&&F2e(n,"data-")||t.attr&&T2e.includes(n))&&(r[n]=e[n])})),r}var L2e=l.createContext(null);var B2e=void 0!==Hn?Hn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},V2e=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),z2e="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,H2e=void 0!==B2e&&B2e.Math===Math?B2e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),W2e="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(H2e):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var U2e=["top","right","bottom","left","width","height","size","weight"],G2e="undefined"!=typeof MutationObserver,Y2e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function a(){W2e(o)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){z2e&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G2e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){z2e&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;U2e.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$2e=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},q2e=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||H2e},K2e=t5e(0,0,0,0);function X2e(e){return parseFloat(e)||0}function J2e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+X2e(e["border-"+n+"-width"])}),0)}function Z2e(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return K2e;var r=q2e(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=X2e(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,l=X2e(r.width),u=X2e(r.height);if("border-box"===r.boxSizing&&(Math.round(l+o)!==t&&(l-=J2e(r,"left","right")+o),Math.round(u+a)!==n&&(u-=J2e(r,"top","bottom")+a)),!function(e){return e===q2e(e).document.documentElement}(e)){var c=Math.round(l+o)-t,s=Math.round(u+a)-n;1!==Math.abs(c)&&(l-=c),1!==Math.abs(s)&&(u-=s)}return t5e(i.left,i.top,l,u)}var Q2e="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof q2e(e).SVGGraphicsElement}:function(e){return e instanceof q2e(e).SVGElement&&"function"==typeof e.getBBox};function e5e(e){return z2e?Q2e(e)?function(e){var t=e.getBBox();return t5e(0,0,t.width,t.height)}(e):Z2e(e):K2e}function t5e(e,t,n,r){return{x:e,y:t,width:n,height:r}}var n5e=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=t5e(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=e5e(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),r5e=function(){return function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return $2e(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);$2e(this,{target:e,contentRect:n})}}(),i5e=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new V2e,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof q2e(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new n5e(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof q2e(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new r5e(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),o5e="undefined"!=typeof WeakMap?new WeakMap:new V2e,a5e=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Y2e.getInstance(),r=new i5e(t,n,this);o5e.set(this,r)}}();["observe","unobserve","disconnect"].forEach((function(e){a5e.prototype[e]=function(){var t;return(t=o5e.get(this))[e].apply(t,arguments)}}));var l5e=void 0!==H2e.ResizeObserver?H2e.ResizeObserver:a5e,u5e=new Map;var c5e=new l5e((function(e){e.forEach((function(e){var t,n=e.target;null===(t=u5e.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var s5e=function(e){NC(n,e);var t=DXe(n);function n(){return rx(this,n),t.apply(this,arguments)}return ox(n,[{key:"render",value:function(){return this.props.children}}]),n}(l.Component);function d5e(e,t){var n=e.children,r=e.disabled,i=l.useRef(null),o=l.useRef(null),a=l.useContext(L2e),u="function"==typeof n,c=u?n(i):n,s=l.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!u&&l.isValidElement(c)&&bZe(c),f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qJe((function(){return yZe.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))}(d?_Ze(c):null,i),h=function(){var e;return dZe(i.current)||(i.current&&"object"===ex(i.current)?dZe(null===(e=i.current)||void 0===e?void 0:e.nativeElement):null)||dZe(o.current)};l.useImperativeHandle(t,(function(){return h()}));var p=l.useRef(e);p.current=e;var v=l.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,l=i.height,u=e.offsetWidth,c=e.offsetHeight,d=Math.floor(o),f=Math.floor(l);if(s.current.width!==d||s.current.height!==f||s.current.offsetWidth!==u||s.current.offsetHeight!==c){var h={width:d,height:f,offsetWidth:u,offsetHeight:c};s.current=h;var v=u===Math.round(o)?o:u,g=c===Math.round(l)?l:c,m=MWe(MWe({},h),{},{offsetWidth:v,offsetHeight:g});null==a||a(m,e,r),n&&Promise.resolve().then((function(){n(m,e)}))}}),[]);return l.useEffect((function(){var e=h();return e&&!r&&function(e,t){u5e.has(e)||(u5e.set(e,new Set),c5e.observe(e)),u5e.get(e).add(t)}(e,v),function(){return function(e,t){u5e.has(e)&&(u5e.get(e).delete(t),u5e.get(e).size||(c5e.unobserve(e),u5e.delete(e)))}(e,v)}}),[i.current,r]),l.createElement(s5e,{ref:o},d?l.cloneElement(c,{ref:f}):c)}var f5e=l.forwardRef(d5e);function h5e(e,t){var n=e.children;return("function"==typeof n?[n]:BXe(n)).map((function(n,r){var i=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return l.createElement(f5e,RXe({},e,{key:i,ref:0===r?t:void 0}),n)}))}var p5e=l.forwardRef(h5e);p5e.Collection=function(e){var t=e.children,n=e.onBatchResize,r=l.useRef(0),i=l.useRef([]),o=l.useContext(L2e),a=l.useCallback((function(e,t,a){r.current+=1;var l=r.current;i.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){l===r.current&&(null==n||n(i.current),i.current=[])})),null==o||o(e,t,a)}),[n,o]);return l.createElement(L2e.Provider,{value:a},t)};var v5e=l.forwardRef((function(e,t){var n=e.height,r=e.offsetY,i=e.offsetX,o=e.children,a=e.prefixCls,u=e.onInnerResize,c=e.innerProps,s=e.rtl,d=e.extra,f={},h={display:"flex",flexDirection:"column"};return void 0!==r&&(f={height:n,position:"relative",overflow:"hidden"},h=MWe(MWe({},h),{},nx(nx(nx(nx(nx({transform:"translateY(".concat(r,"px)")},s?"marginRight":"marginLeft",-i),"position","absolute"),"left",0),"right",0),"top",0))),l.createElement("div",{style:f},l.createElement(p5e,{onResize:function(e){e.offsetHeight&&u&&u()}},l.createElement("div",RXe({style:h,className:F()(nx({},"".concat(a,"-holder-inner"),a)),ref:t},c),o,d)))}));function g5e(e){var t=e.children,n=e.setRef,r=l.useCallback((function(e){n(e)}),[]);return l.cloneElement(t,{ref:r})}function m5e(e,t,n){var r=jF(l.useState(e),2),i=r[0],o=r[1],a=jF(l.useState(null),2),u=a[0],c=a[1];return l.useEffect((function(){var n=function(e,t,n){var r,i,o=e.length,a=t.length;if(0===o&&0===a)return null;o<a?(r=e,i=t):(r=t,i=e);var l={__EMPTY_ITEM__:!0};function u(e){return void 0!==e?n(e):l}for(var c=null,s=1!==Math.abs(o-a),d=0;d<i.length;d+=1){var f=u(r[d]);if(f!==u(i[d])){c=d,s=s||f!==u(i[d+1]);break}}return null===c?null:{index:c,multiple:s}}(i||[],e,t);void 0!==(null==n?void 0:n.index)&&c(e[n.index]),o(e)}),[e]),[u]}v5e.displayName="Filler";var y5e="object"===("undefined"==typeof navigator?"undefined":ex(navigator))&&/Firefox/i.test(navigator.userAgent),b5e=function(e,t,n,r){var i=Object(l.useRef)(!1),o=Object(l.useRef)(null);var a=Object(l.useRef)({top:e,bottom:t,left:n,right:r});return a.current.top=e,a.current.bottom=t,a.current.left=n,a.current.right=r,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e?t<0&&a.current.left||t>0&&a.current.right:t<0&&a.current.top||t>0&&a.current.bottom;return n&&r?(clearTimeout(o.current),i.current=!1):r&&!i.current||(clearTimeout(o.current),i.current=!0,o.current=setTimeout((function(){i.current=!1}),50)),!i.current&&r}};function w5e(e,t,n,r,i,o,a){var u=Object(l.useRef)(0),c=Object(l.useRef)(null),s=Object(l.useRef)(null),d=Object(l.useRef)(!1),f=b5e(t,n,r,i);var h=Object(l.useRef)(null),p=Object(l.useRef)(null);return[function(t){if(e){tQe.cancel(p.current),p.current=tQe((function(){h.current=null}),2);var n=t.deltaX,r=t.deltaY,i=t.shiftKey,l=n,v=r;("sx"===h.current||!h.current&&i&&r&&!n)&&(l=r,v=0,h.current="sx");var g=Math.abs(l),m=Math.abs(v);null===h.current&&(h.current=o&&g>m?"x":"y"),"y"===h.current?function(e,t){if(tQe.cancel(c.current),!f(!1,t)){var n=e;n._virtualHandled||(n._virtualHandled=!0,u.current+=t,s.current=t,y5e||n.preventDefault(),c.current=tQe((function(){var e=d.current?10:1;a(u.current*e,!1),u.current=0})))}}(t,v):function(e,t){a(t,!0),y5e||e.preventDefault()}(t,l)}},function(t){e&&(d.current=t.detail===s.current)}]}var _5e=function(){function e(){rx(this,e),nx(this,"maps",void 0),nx(this,"id",0),nx(this,"diffKeys",new Set),this.maps=Object.create(null)}return ox(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1,this.diffKeys.add(e)}},{key:"get",value:function(e){return this.maps[e]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function x5e(e){var t=parseFloat(e);return isNaN(t)?0:t}var k5e=14/15;function C5e(e){return Math.floor(Math.pow(e,.5))}function S5e(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}var O5e=10;var E5e=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.rtl,i=e.scrollOffset,o=e.scrollRange,a=e.onStartMove,u=e.onStopMove,c=e.onScroll,s=e.horizontal,d=e.spinSize,f=e.containerSize,h=e.style,p=e.thumbStyle,v=jF(l.useState(!1),2),g=v[0],m=v[1],y=jF(l.useState(null),2),b=y[0],w=y[1],_=jF(l.useState(null),2),x=_[0],k=_[1],C=!r,S=l.useRef(),O=l.useRef(),E=jF(l.useState(!1),2),I=E[0],P=E[1],M=l.useRef(),R=function(){clearTimeout(M.current),P(!0),M.current=setTimeout((function(){P(!1)}),3e3)},A=o-f||0,j=f-d||0,D=l.useMemo((function(){return 0===i||0===A?0:i/A*j}),[i,A,j]),T=l.useRef({top:D,dragging:g,pageY:b,startTop:x});T.current={top:D,dragging:g,pageY:b,startTop:x};var N=function(e){m(!0),w(S5e(e,s)),k(T.current.top),a(),e.stopPropagation(),e.preventDefault()};l.useEffect((function(){var e=function(e){e.preventDefault()},t=S.current,n=O.current;return t.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchstart",N,{passive:!1}),function(){t.removeEventListener("touchstart",e),n.removeEventListener("touchstart",N)}}),[]);var L=l.useRef();L.current=A;var B=l.useRef();B.current=j,l.useEffect((function(){if(g){var e,t=function(t){var n=T.current,r=n.dragging,i=n.pageY,o=n.startTop;tQe.cancel(e);var a=S.current.getBoundingClientRect(),l=f/(s?a.width:a.height);if(r){var u=(S5e(t,s)-i)*l,d=o;!C&&s?d-=u:d+=u;var h=L.current,p=B.current,v=p?d/p:0,g=Math.ceil(v*h);g=Math.max(g,0),g=Math.min(g,h),e=tQe((function(){c(g,s)}))}},n=function(){m(!1),u()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),tQe.cancel(e)}}}),[g]),l.useEffect((function(){return R(),function(){clearTimeout(M.current)}}),[i]),l.useImperativeHandle(t,(function(){return{delayHidden:R}}));var V="".concat(n,"-scrollbar"),z={position:"absolute",visibility:I?null:"hidden"},H={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return s?(z.height=8,z.left=0,z.right=0,z.bottom=0,H.height="100%",H.width=d,C?H.left=D:H.right=D):(z.width=8,z.top=0,z.bottom=0,C?z.right=0:z.left=0,H.width="100%",H.height=d,H.top=D),l.createElement("div",{ref:S,className:F()(V,nx(nx(nx({},"".concat(V,"-horizontal"),s),"".concat(V,"-vertical"),!s),"".concat(V,"-visible"),I)),style:MWe(MWe({},z),h),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:R},l.createElement("div",{ref:O,className:F()("".concat(V,"-thumb"),nx({},"".concat(V,"-thumb-moving"),g)),style:MWe(MWe({},H),p),onMouseDown:N}))})),I5e=20;function P5e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,I5e),Math.floor(t)}var M5e=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],R5e=[],A5e={overflowY:"auto",overflowAnchor:"none"};function j5e(e,t){var n=e.prefixCls,r=void 0===n?"rc-virtual-list":n,i=e.className,o=e.height,a=e.itemHeight,u=e.fullHeight,s=void 0===u||u,d=e.style,f=e.data,h=e.children,p=e.itemKey,v=e.virtual,g=e.direction,m=e.scrollWidth,y=e.component,b=void 0===y?"div":y,w=e.onScroll,_=e.onVirtualScroll,x=e.onVisibleChange,k=e.innerProps,C=e.extraRender,S=e.styles,O=EWe(e,M5e),E=l.useCallback((function(e){return"function"==typeof p?p(e):null==e?void 0:e[p]}),[p]),I=function(e,t,n){var r=jF(l.useState(0),2),i=r[0],o=r[1],a=Object(l.useRef)(new Map),u=Object(l.useRef)(new _5e),c=Object(l.useRef)(0);function s(){c.current+=1}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s();var t=function(){a.current.forEach((function(e,t){if(e&&e.offsetParent){var n=dZe(e),r=n.offsetHeight,i=getComputedStyle(n),o=i.marginTop,a=i.marginBottom,l=r+x5e(o)+x5e(a);u.current.get(t)!==l&&u.current.set(t,l)}})),o((function(e){return e+1}))};if(e)t();else{c.current+=1;var n=c.current;Promise.resolve().then((function(){n===c.current&&t()}))}}return Object(l.useEffect)((function(){return s}),[]),[function(t,n){var r=e(t);a.current.get(r),n?(a.current.set(r,n),d()):a.current.delete(r)},d,u.current,i]}(E),P=jF(I,4),M=P[0],R=P[1],A=P[2],j=P[3],D=!(!1===v||!o||!a),T=l.useMemo((function(){return Object.values(A.maps).reduce((function(e,t){return e+t}),0)}),[A.id,A.maps]),N=D&&f&&(Math.max(a*f.length,T)>o||!!m),L="rtl"===g,B=F()(r,nx({},"".concat(r,"-rtl"),L),i),V=f||R5e,z=Object(l.useRef)(),H=Object(l.useRef)(),W=Object(l.useRef)(),U=jF(Object(l.useState)(0),2),G=U[0],Y=U[1],$=jF(Object(l.useState)(0),2),q=$[0],K=$[1],X=jF(Object(l.useState)(!1),2),J=X[0],Z=X[1],Q=function(){Z(!0)},ee=function(){Z(!1)},te={getKey:E};function ne(e){Y((function(t){var n=function(e){var t=e;Number.isNaN(be.current)||(t=Math.min(t,be.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return z.current.scrollTop=n,n}))}var re=Object(l.useRef)({start:0,end:V.length}),ie=Object(l.useRef)(),oe=jF(m5e(V,E),1)[0];ie.current=oe;var ae=l.useMemo((function(){if(!D)return{scrollHeight:void 0,start:0,end:V.length-1,offset:void 0};var e;if(!N)return{scrollHeight:(null===(e=H.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:V.length-1,offset:void 0};for(var t,n,r,i=0,l=V.length,u=0;u<l;u+=1){var c=V[u],s=E(c),d=A.get(s),f=i+(void 0===d?a:d);f>=G&&void 0===t&&(t=u,n=i),f>G+o&&void 0===r&&(r=u),i=f}return void 0===t&&(t=0,n=0,r=Math.ceil(o/a)),void 0===r&&(r=V.length-1),{scrollHeight:i,start:t,end:r=Math.min(r+1,V.length-1),offset:n}}),[N,D,G,V,j,o]),le=ae.scrollHeight,ue=ae.start,ce=ae.end,se=ae.offset;re.current.start=ue,re.current.end=ce,l.useLayoutEffect((function(){var e=A.getRecord();if(1===e.size){var t=Array.from(e)[0];if(E(V[ue])===t){var n=A.get(t)-a;ne((function(e){return e+n}))}}A.resetRecord()}),[le]);var de=jF(l.useState({width:0,height:o}),2),fe=de[0],he=de[1],pe=Object(l.useRef)(),ve=Object(l.useRef)(),ge=l.useMemo((function(){return P5e(fe.width,m)}),[fe.width,m]),me=l.useMemo((function(){return P5e(fe.height,le)}),[fe.height,le]),ye=le-o,be=Object(l.useRef)(ye);be.current=ye;var we=G<=0,_e=G>=ye,xe=q<=0,ke=q>=m,Ce=b5e(we,_e,xe,ke),Se=function(){return{x:L?-q:q,y:G}},Oe=Object(l.useRef)(Se()),Ee=kK((function(e){if(_){var t=MWe(MWe({},Se()),e);Oe.current.x===t.x&&Oe.current.y===t.y||(_(t),Oe.current=t)}}));function Ie(e,t){var n=e;t?(Object(c.flushSync)((function(){K(n)})),Ee()):ne(n)}var Pe=function(e){var t=e,n=m?m-fe.width:0;return t=Math.max(t,0),t=Math.min(t,n)},Me=kK((function(e,t){t?(Object(c.flushSync)((function(){K((function(t){return Pe(t+(L?-e:e))}))})),Ee()):ne((function(t){return t+e}))})),Re=jF(w5e(D,we,_e,xe,ke,!!m,Me),2),Ae=Re[0],je=Re[1];!function(e,t,n){var r,i=Object(l.useRef)(!1),o=Object(l.useRef)(0),a=Object(l.useRef)(0),u=Object(l.useRef)(null),c=Object(l.useRef)(null),s=function(e){if(i.current){var t=Math.ceil(e.touches[0].pageX),r=Math.ceil(e.touches[0].pageY),l=o.current-t,u=a.current-r,s=Math.abs(l)>Math.abs(u);s?o.current=t:a.current=r;var d=n(s,s?l:u,!1,e);d&&e.preventDefault(),clearInterval(c.current),d&&(c.current=setInterval((function(){s?l*=k5e:u*=k5e;var e=Math.floor(s?l:u);(!n(s,e,!0)||Math.abs(e)<=.1)&&clearInterval(c.current)}),16))}},d=function(){i.current=!1,r()},f=function(e){r(),1!==e.touches.length||i.current||(i.current=!0,o.current=Math.ceil(e.touches[0].pageX),a.current=Math.ceil(e.touches[0].pageY),u.current=e.target,u.current.addEventListener("touchmove",s,{passive:!1}),u.current.addEventListener("touchend",d,{passive:!0}))};r=function(){u.current&&(u.current.removeEventListener("touchmove",s),u.current.removeEventListener("touchend",d))},k2e((function(){return e&&t.current.addEventListener("touchstart",f,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),r(),clearInterval(c.current)}}),[e])}(D,z,(function(e,t,n,r){var i=r;return!Ce(e,t,n)&&((!i||!i._virtualHandled)&&(i&&(i._virtualHandled=!0),Ae({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0))})),function(e,t,n){l.useEffect((function(){var r=t.current;if(e&&r){var i,o,a=!1,l=function(){tQe.cancel(i)},u=function e(){l(),i=tQe((function(){n(o),e()}))},c=function(e){var t=e;t._virtualHandled||(t._virtualHandled=!0,a=!0)},s=function(){a=!1,l()},d=function(e){if(a){var t=S5e(e,!1),n=r.getBoundingClientRect(),i=n.top,c=n.bottom;t<=i?(o=-C5e(i-t),u()):t>=c?(o=C5e(t-c),u()):l()}};return r.addEventListener("mousedown",c),r.ownerDocument.addEventListener("mouseup",s),r.ownerDocument.addEventListener("mousemove",d),function(){r.removeEventListener("mousedown",c),r.ownerDocument.removeEventListener("mouseup",s),r.ownerDocument.removeEventListener("mousemove",d),l()}}}),[e])}(N,z,(function(e){ne((function(t){return t+e}))})),k2e((function(){function e(e){var t=we&&e.detail<0,n=_e&&e.detail>0;!D||t||n||e.preventDefault()}var t=z.current;return t.addEventListener("wheel",Ae,{passive:!1}),t.addEventListener("DOMMouseScroll",je,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",Ae),t.removeEventListener("DOMMouseScroll",je),t.removeEventListener("MozMousePixelScroll",e)}}),[D,we,_e]),k2e((function(){if(m){var e=Pe(q);K(e),Ee({x:e})}}),[fe.width,m]);var De=function(){var e,t;null===(e=pe.current)||void 0===e||e.delayHidden(),null===(t=ve.current)||void 0===t||t.delayHidden()},Te=function(e,t,n,r,i,o,a,u){var c=l.useRef(),s=jF(l.useState(null),2),d=s[0],f=s[1];return k2e((function(){if(d&&d.times<O5e){if(!e.current)return void f((function(e){return MWe({},e)}));o();var l=d.targetAlign,u=d.originAlign,c=d.index,s=d.offset,h=e.current.clientHeight,p=!1,v=l,g=null;if(h){for(var m=l||u,y=0,b=0,w=0,_=Math.min(t.length-1,c),x=0;x<=_;x+=1){var k=i(t[x]);b=y;var C=n.get(k);y=w=b+(void 0===C?r:C)}for(var S="top"===m?s:h-s,O=_;O>=0;O-=1){var E=i(t[O]),I=n.get(E);if(void 0===I){p=!0;break}if((S-=I)<=0)break}switch(m){case"top":g=b-s;break;case"bottom":g=w-h+s;break;default:var P=e.current.scrollTop;b<P?v="top":w>P+h&&(v="bottom")}null!==g&&a(g),g!==d.lastTop&&(p=!0)}p&&f(MWe(MWe({},d),{},{times:d.times+1,targetAlign:v,lastTop:g}))}}),[d,e.current]),function(e){if(null!=e){if(tQe.cancel(c.current),"number"==typeof e)a(e);else if(e&&"object"===ex(e)){var n,r=e.align;n="index"in e?e.index:t.findIndex((function(t){return i(t)===e.key}));var o=e.offset;f({times:0,index:n,offset:void 0===o?0:o,originAlign:r})}}else u()}}(z,V,A,a,E,(function(){return R(!0)}),ne,De);l.useImperativeHandle(t,(function(){return{nativeElement:W.current,getScrollInfo:Se,scrollTo:function(e){var t;(t=e)&&"object"===ex(t)&&("left"in t||"top"in t)?(void 0!==e.left&&K(Pe(e.left)),Te(e.top)):Te(e)}}})),k2e((function(){if(x){var e=V.slice(ue,ce+1);x(e,V)}}),[ue,ce,V]);var Fe=function(e,t,n,r){var i=jF(l.useMemo((function(){return[new Map,[]]}),[e,n.id,r]),2),o=i[0],a=i[1];return function(i){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,u=o.get(i),c=o.get(l);if(void 0===u||void 0===c)for(var s=e.length,d=a.length;d<s;d+=1){var f,h=e[d],p=t(h);o.set(p,d);var v=null!==(f=n.get(p))&&void 0!==f?f:r;if(a[d]=(a[d-1]||0)+v,p===i&&(u=d),p===l&&(c=d),void 0!==u&&void 0!==c)break}return{top:a[u-1]||0,bottom:a[c]}}}(V,E,A,a),Ne=null==C?void 0:C({start:ue,end:ce,virtual:N,offsetX:q,offsetY:se,rtl:L,getSize:Fe}),Le=function(e,t,n,r,i,o,a,u){var c=u.getKey;return e.slice(t,n+1).map((function(e,n){var u=a(e,t+n,{style:{width:r},offsetX:i}),s=c(e);return l.createElement(g5e,{key:s,setRef:function(t){return o(e,t)}},u)}))}(V,ue,ce,m,q,M,h,te),Be=null;o&&(Be=MWe(nx({},s?"height":"maxHeight",o),A5e),D&&(Be.overflowY="hidden",m&&(Be.overflowX="hidden"),J&&(Be.pointerEvents="none")));var Ve={};return L&&(Ve.dir="rtl"),l.createElement("div",RXe({ref:W,style:MWe(MWe({},d),{},{position:"relative"}),className:B},Ve,O),l.createElement(p5e,{onResize:function(e){he({width:e.offsetWidth,height:e.offsetHeight})}},l.createElement(b,{className:"".concat(r,"-holder"),style:Be,ref:z,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==G&&ne(t),null==w||w(e),Ee()},onMouseEnter:De},l.createElement(v5e,{prefixCls:r,height:le,offsetX:q,offsetY:se,scrollWidth:m,onInnerResize:R,ref:H,innerProps:k,rtl:L,extra:Ne},Le))),N&&le>o&&l.createElement(E5e,{ref:pe,prefixCls:r,scrollOffset:G,scrollRange:le,rtl:L,onScroll:Ie,onStartMove:Q,onStopMove:ee,spinSize:me,containerSize:fe.height,style:null==S?void 0:S.verticalScrollBar,thumbStyle:null==S?void 0:S.verticalScrollBarThumb}),N&&m>fe.width&&l.createElement(E5e,{ref:ve,prefixCls:r,scrollOffset:q,scrollRange:m,rtl:L,onScroll:Ie,onStartMove:Q,onStopMove:ee,spinSize:ge,containerSize:fe.width,horizontal:!0,style:null==S?void 0:S.horizontalScrollBar,thumbStyle:null==S?void 0:S.horizontalScrollBarThumb}))}var D5e=l.forwardRef(j5e);D5e.displayName="List";var T5e=function(e){var t,n=e.className,r=e.customizeIcon,i=e.customizeIconProps,o=e.onMouseDown,a=e.onClick,u=e.children;return t="function"==typeof r?r(i):r,l.createElement("span",{className:n,onMouseDown:function(e){e.preventDefault(),o&&o(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==t?t:l.createElement("span",{className:F()(n.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},u))},F5e=function(e,t){var n=e.prefixCls,r=e.id,i=e.flattenOptions,o=e.childrenAsData,a=e.values,u=e.searchValue,c=e.multiple,s=e.defaultActiveFirstOption,d=e.height,f=e.itemHeight,h=e.notFoundContent,p=e.open,v=e.menuItemSelectedIcon,g=e.virtual,m=e.onSelect,y=e.onToggleOpen,b=e.onActiveValue,w=e.onScroll,_=e.onMouseEnter,x="".concat(n,"-item"),k=qJe((function(){return i}),[p,i],(function(e,t){return t[0]&&e[1]!==t[1]})),C=l.useRef(null),S=function(e){e.preventDefault()},O=function(e){C.current&&C.current.scrollTo({index:e})},E=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=k.length,r=0;r<n;r+=1){var i=(e+r*t+n)%n,o=k[i],a=o.group,l=o.data;if(!a&&!l.disabled)return i}return-1},I=jF(l.useState((function(){return E(0)})),2),P=I[0],M=I[1],R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(e);var n={source:t?"keyboard":"mouse"},r=k[e];r?b(r.data.value,e,n):b(null,-1,n)};l.useEffect((function(){R(!1!==s?E(0):-1)}),[k.length,u]),l.useEffect((function(){var e,t=setTimeout((function(){if(!c&&p&&1===a.size){var e=Array.from(a)[0],t=k.findIndex((function(t){return t.data.value===e}));R(t),O(t)}}));p&&(null===(e=C.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[p]);var A=function(e){void 0!==e&&m(e,{selected:!a.has(e)}),c||y(!1)};if(l.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which;switch(t){case D2e.UP:case D2e.DOWN:var n=0;if(t===D2e.UP?n=-1:t===D2e.DOWN&&(n=1),0!==n){var r=E(P+n,n);O(r),R(r,!0)}break;case D2e.ENTER:var i=k[P];i&&!i.data.disabled?A(i.data.value):A(void 0),p&&e.preventDefault();break;case D2e.ESC:y(!1),p&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){O(e)}}})),0===k.length)return l.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(x,"-empty"),onMouseDown:S},h);function j(e){var t=k[e];if(!t)return null;var n=t.data||{},i=n.value,u=n.label,c=n.children,s=N2e(n,!0),d=o?c:u;return t?l.createElement("div",RXe({"aria-label":"string"==typeof d?d:null},s,{key:e,role:"option",id:"".concat(r,"_list_").concat(e),"aria-selected":a.has(i)}),i):null}return l.createElement(l.Fragment,null,l.createElement("div",{role:"listbox",id:"".concat(r,"_list"),style:{height:0,width:0,overflow:"hidden"}},j(P-1),j(P),j(P+1)),l.createElement(D5e,{itemKey:"key",ref:C,data:k,height:d,itemHeight:f,fullHeight:!1,onMouseDown:S,onScroll:w,virtual:g,onMouseEnter:_},(function(e,t){var n,r=e.group,i=e.groupOption,u=e.data,c=u.label,s=u.key;if(r)return l.createElement("div",{className:F()(x,"".concat(x,"-group"))},void 0!==c?c:s);var d=u.disabled,f=u.value,h=u.title,p=u.children,g=u.style,m=u.className,y=EWe(u,["disabled","value","title","children","style","className"]),b=a.has(f),w="".concat(x,"-option"),_=F()(x,w,m,(nx(n={},"".concat(w,"-grouped"),i),nx(n,"".concat(w,"-active"),P===t&&!d),nx(n,"".concat(w,"-disabled"),d),nx(n,"".concat(w,"-selected"),b),n)),k=!v||"function"==typeof v||b,C=(o?p:c)||f,S="string"==typeof C||"number"==typeof C?C.toString():void 0;return void 0!==h&&(S=h),l.createElement("div",RXe({},y,{"aria-selected":b,className:_,title:S,onMouseMove:function(){P===t||d||R(t)},onClick:function(){d||A(f)},style:g}),l.createElement("div",{className:"".concat(w,"-content")},C),l.isValidElement(v)||b,k&&l.createElement(T5e,{className:"".concat(x,"-option-state"),customizeIcon:v,customizeIconProps:{isSelected:b}},b?"✓":null))})))},N5e=l.forwardRef(F5e);N5e.displayName="OptionList";var L5e=function(){return null};L5e.isSelectOption=!0;var B5e=function(){return null};function V5e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return BXe(e).map((function(e,n){if(!l.isValidElement(e)||!e.type)return null;var r=e.type.isSelectOptGroup,i=e.key,o=e.props,a=o.children,u=EWe(o,["children"]);return t||!r?function(e){var t=e.key,n=e.props,r=n.children,i=n.value;return MWe({key:t,value:void 0!==i?i:t,children:r},EWe(n,["children","value"]))}(e):MWe(MWe({key:"__RC_SELECT_GRP__".concat(null===i?n:i,"__"),label:i},u),{},{options:V5e(a)})})).filter((function(e){return e}))}function z5e(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}B5e.isSelectOptGroup=!0;var H5e="undefined"!=typeof window&&window.document&&window.document.documentElement,W5e=0;function U5e(e,t){var n,r=e.key;return"value"in e&&(n=e.value),null!=r?r:void 0!==n?n:"rc-index-key-".concat(t)}function G5e(e){var t=MWe({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return dUe(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function Y5e(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).prevValueOptions,r=void 0===n?[]:n,i=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;i.set(t.value,t)}})),e.map((function(e){var t=i.get(e);return t||(t=MWe({},r.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),G5e(t)}))}function $5e(e){return z5e(e).join("")}var q5e=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))},K5e=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],X5e=void 0;function J5e(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,a=e.responsive,u=e.responsiveDisabled,c=e.registerSize,s=e.itemKey,d=e.className,f=e.style,h=e.children,p=e.display,v=e.order,g=e.component,m=void 0===g?"div":g,y=EWe(e,K5e),b=a&&!p;function w(e){c(s,e)}l.useEffect((function(){return function(){w(null)}}),[]);var _,x=o&&i!==X5e?o(i,{index:v}):h;r||(_={opacity:b?0:1,height:b?0:X5e,overflowY:b?"hidden":X5e,order:a?v:X5e,pointerEvents:b?"none":X5e,position:b?"absolute":X5e});var k={};b&&(k["aria-hidden"]=!0);var C=l.createElement(m,RXe({className:F()(!r&&n,d),style:MWe(MWe({},_),f)},k,y,{ref:t}),x);return a&&(C=l.createElement(p5e,{onResize:function(e){w(e.offsetWidth)},disabled:u},C)),C}var Z5e=l.forwardRef(J5e);function Q5e(){var e=l.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"==typeof MessageChannel)tQe(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){Object(c.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function e3e(e,t){var n=jF(l.useState(t),2),r=n[0],i=n[1];return[r,SZe((function(t){e((function(){i(t)}))}))]}Z5e.displayName="Item";var t3e=u.a.createContext(null),n3e=["component"],r3e=["className"],i3e=["className"],o3e=function(e,t){var n=l.useContext(t3e);if(!n){var r=e.component,i=void 0===r?"div":r,o=EWe(e,n3e);return l.createElement(i,RXe({},o,{ref:t}))}var a=n.className,u=EWe(n,r3e),c=e.className,s=EWe(e,i3e);return l.createElement(t3e.Provider,{value:null},l.createElement(Z5e,RXe({ref:t,className:F()(a,c)},u,s)))},a3e=l.forwardRef(o3e);a3e.displayName="RawItem";var l3e=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],u3e="responsive",c3e="invalidate";function s3e(e){return"+ ".concat(e.length," ...")}function d3e(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,i=e.data,o=void 0===i?[]:i,a=e.renderItem,u=e.renderRawItem,c=e.itemKey,s=e.itemWidth,d=void 0===s?10:s,f=e.ssr,h=e.style,p=e.className,v=e.maxCount,g=e.renderRest,m=e.renderRawRest,y=e.suffix,b=e.component,w=void 0===b?"div":b,_=e.itemComponent,x=e.onVisibleChange,k=EWe(e,l3e),C="full"===f,S=Q5e(),O=jF(e3e(S,null),2),E=O[0],I=O[1],P=E||0,M=jF(e3e(S,new Map),2),R=M[0],A=M[1],j=jF(e3e(S,0),2),D=j[0],T=j[1],N=jF(e3e(S,0),2),L=N[0],B=N[1],V=jF(e3e(S,0),2),z=V[0],H=V[1],W=jF(Object(l.useState)(null),2),U=W[0],G=W[1],Y=jF(Object(l.useState)(null),2),$=Y[0],q=Y[1],K=l.useMemo((function(){return null===$&&C?Number.MAX_SAFE_INTEGER:$||0}),[$,E]),X=jF(Object(l.useState)(!1),2),J=X[0],Z=X[1],Q="".concat(r,"-item"),ee=Math.max(D,L),te=v===u3e,ne=o.length&&te,re=v===c3e,ie=ne||"number"==typeof v&&o.length>v,oe=Object(l.useMemo)((function(){var e=o;return ne?e=null===E&&C?o:o.slice(0,Math.min(o.length,P/d)):"number"==typeof v&&(e=o.slice(0,v)),e}),[o,d,E,v,ne]),ae=Object(l.useMemo)((function(){return ne?o.slice(K+1):o.slice(oe.length)}),[o,oe,ne,K]),le=Object(l.useCallback)((function(e,t){var n;return"function"==typeof c?c(e):null!==(n=c&&(null==e?void 0:e[c]))&&void 0!==n?n:t}),[c]),ue=Object(l.useCallback)(a||function(e){return e},[a]);function ce(e,t,n){($!==e||void 0!==t&&t!==U)&&(q(e),n||(Z(e<o.length-1),null==x||x(e)),void 0!==t&&G(t))}function se(e,t){A((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return R.get(le(oe[e],e))}k2e((function(){if(P&&"number"==typeof ee&&oe){var e=z,t=oe.length,n=t-1;if(!t)return void ce(0,null);for(var r=0;r<t;r+=1){var i=de(r);if(C&&(i=i||0),void 0===i){ce(r-1,void 0,!0);break}if(e+=i,0===n&&e<=P||r===n-1&&e+de(n)<=P){ce(n,null);break}if(e+ee>P){ce(r-1,e-i-z+L);break}}y&&de(0)+z>P&&G(null)}}),[P,R,L,z,le,oe]);var fe=J&&!!ae.length,he={};null!==U&&ne&&(he={position:"absolute",left:U,top:0});var pe={prefixCls:Q,responsive:ne,component:_,invalidate:re},ve=u?function(e,t){var n=le(e,t);return l.createElement(t3e.Provider,{key:n,value:MWe(MWe({},pe),{},{order:t,item:e,itemKey:n,registerSize:se,display:t<=K})},u(e,t))}:function(e,t){var n=le(e,t);return l.createElement(Z5e,RXe({},pe,{order:t,key:n,item:e,renderItem:ue,itemKey:n,registerSize:se,display:t<=K}))},ge={order:fe?K:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){B(t),T(L)},display:fe},me=g||s3e,ye=m?l.createElement(t3e.Provider,{value:MWe(MWe({},pe),ge)},m(ae)):l.createElement(Z5e,RXe({},pe,ge),"function"==typeof me?me(ae):me),be=l.createElement(w,RXe({className:F()(!re&&r,p),style:h,ref:t},k),oe.map(ve),ie?ye:null,y&&l.createElement(Z5e,RXe({},pe,{responsive:te,responsiveDisabled:!ne,order:K,className:"".concat(Q,"-suffix"),registerSize:function(e,t){H(t)},display:!0,style:he}),y));return te?l.createElement(p5e,{onResize:function(e,t){I(t.clientWidth)},disabled:!ne},be):be}var f3e=l.forwardRef(d3e);f3e.displayName="Overflow",f3e.Item=a3e,f3e.RESPONSIVE=u3e,f3e.INVALIDATE=c3e;var h3e=function(e,t){var n,r,i=e.prefixCls,o=e.id,a=e.inputElement,u=e.disabled,c=e.tabIndex,s=e.autoFocus,d=e.autoComplete,f=e.editable,h=e.accessibilityIndex,p=e.value,v=e.maxLength,g=e.onKeyDown,m=e.onMouseDown,y=e.onChange,b=e.onPaste,w=e.onCompositionStart,_=e.onCompositionEnd,x=e.open,k=e.attrs,C=a||l.createElement("input",null),S=C,O=S.ref,E=S.props,I=E.onKeyDown,P=E.onChange,M=E.onMouseDown,R=E.onCompositionStart,A=E.onCompositionEnd,j=E.style;return C=l.cloneElement(C,MWe(MWe({id:o,ref:yZe(t,O),disabled:u,tabIndex:c,autoComplete:d||"off",type:"search",autoFocus:s,className:F()("".concat(i,"-selection-search-input"),null===(n=C)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),style:MWe(MWe({},j),{},{opacity:f?null:0}),role:"combobox","aria-expanded":x,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":"".concat(o,"_list_").concat(h)},k),{},{value:f?p:"",maxLength:v,readOnly:!f,unselectable:f?null:"on",onKeyDown:function(e){g(e),I&&I(e)},onMouseDown:function(e){m(e),M&&M(e)},onChange:function(e){y(e),P&&P(e)},onCompositionStart:function(e){w(e),R&&R(e)},onCompositionEnd:function(e){_(e),A&&A(e)},onPaste:b}))},p3e=l.forwardRef(h3e);function v3e(e,t){H5e?l.useLayoutEffect(e,t):l.useEffect(e,t)}p3e.displayName="Input";var g3e=function(e){e.preventDefault(),e.stopPropagation()},m3e=function(e){var t=e.id,n=e.prefixCls,r=e.values,i=e.open,o=e.searchValue,a=e.inputRef,u=e.placeholder,c=e.disabled,s=e.mode,d=e.showSearch,f=e.autoFocus,h=e.autoComplete,p=e.accessibilityIndex,v=e.tabIndex,g=e.removeIcon,m=e.maxTagCount,y=e.maxTagTextLength,b=e.maxTagPlaceholder,w=void 0===b?function(e){return"+ ".concat(e.length," ...")}:b,_=e.tagRender,x=e.onToggleOpen,k=e.onSelect,C=e.onInputChange,S=e.onInputPaste,O=e.onInputKeyDown,E=e.onInputMouseDown,I=e.onInputCompositionStart,P=e.onInputCompositionEnd,M=l.useRef(null),R=jF(Object(l.useState)(0),2),A=R[0],j=R[1],D=jF(Object(l.useState)(!1),2),T=D[0],N=D[1],L="".concat(n,"-selection"),B=i||"tags"===s?o:"",V="tags"===s||d&&(i||T);function z(e,t,n,r){return l.createElement("span",{className:F()("".concat(L,"-item"),nx({},"".concat(L,"-item-disabled"),t))},l.createElement("span",{className:"".concat(L,"-item-content")},e),n&&l.createElement(T5e,{className:"".concat(L,"-item-remove"),onMouseDown:g3e,onClick:r,customizeIcon:g},"×"))}v3e((function(){j(M.current.scrollWidth)}),[B]);var H=l.createElement("div",{className:"".concat(L,"-search"),style:{width:A},onFocus:function(){N(!0)},onBlur:function(){N(!1)}},l.createElement(p3e,{ref:a,open:i,prefixCls:n,id:t,inputElement:null,disabled:c,autoFocus:f,autoComplete:h,editable:V,accessibilityIndex:p,value:B,onKeyDown:O,onMouseDown:E,onChange:C,onPaste:S,onCompositionStart:I,onCompositionEnd:P,tabIndex:v,attrs:N2e(e,!0)}),l.createElement("span",{ref:M,className:"".concat(L,"-search-mirror"),"aria-hidden":!0},B," ")),W=l.createElement(f3e,{prefixCls:"".concat(L,"-overflow"),data:r,renderItem:function(e){var t=e.disabled,n=e.label,r=e.value,o=!c&&!t,a=n;if("number"==typeof y&&("string"==typeof n||"number"==typeof n)){var u=String(a);u.length>y&&(a="".concat(u.slice(0,y),"..."))}var s=function(e){e&&e.stopPropagation(),k(r,{selected:!1})};return"function"==typeof _?function(e,t,n,r,o){return l.createElement("span",{onMouseDown:function(e){g3e(e),x(!i)}},_({label:t,value:e,disabled:n,closable:r,onClose:o}))}(r,a,t,o,s):z(a,t,o,s)},renderRest:function(e){return z("function"==typeof w?w(e):w,!1)},suffix:H,itemKey:"key",maxCount:m});return l.createElement(l.Fragment,null,W,!r.length&&!B&&l.createElement("span",{className:"".concat(L,"-placeholder")},u))},y3e=function(e){var t=e.inputElement,n=e.prefixCls,r=e.id,i=e.inputRef,o=e.disabled,a=e.autoFocus,u=e.autoComplete,c=e.accessibilityIndex,s=e.mode,d=e.open,f=e.values,h=e.placeholder,p=e.tabIndex,v=e.showSearch,g=e.searchValue,m=e.activeValue,y=e.maxLength,b=e.onInputKeyDown,w=e.onInputMouseDown,_=e.onInputChange,x=e.onInputPaste,k=e.onInputCompositionStart,C=e.onInputCompositionEnd,S=jF(l.useState(!1),2),O=S[0],E=S[1],I="combobox"===s,P=I||v,M=f[0],R=g||"";I&&m&&!O&&(R=m),l.useEffect((function(){I&&E(!1)}),[I,m]);var A=!("combobox"!==s&&!d)&&!!R,j=!M||"string"!=typeof M.label&&"number"!=typeof M.label?void 0:M.label.toString();return l.createElement(l.Fragment,null,l.createElement("span",{className:"".concat(n,"-selection-search")},l.createElement(p3e,{ref:i,prefixCls:n,id:r,open:d,inputElement:t,disabled:o,autoFocus:a,autoComplete:u,editable:P,accessibilityIndex:c,value:R,onKeyDown:b,onMouseDown:w,onChange:function(e){E(!0),_(e)},onPaste:x,onCompositionStart:k,onCompositionEnd:C,tabIndex:p,attrs:N2e(e,!0),maxLength:I?y:void 0})),!I&&M&&!A&&l.createElement("span",{className:"".concat(n,"-selection-item"),title:j},M.label),!M&&!A&&l.createElement("span",{className:"".concat(n,"-selection-placeholder")},h))};function b3e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=l.useRef(null),n=l.useRef(null);return l.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return t.current},function(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){t.current=null}),e)}]}var w3e=function(e,t){var n=Object(l.useRef)(null),r=Object(l.useRef)(!1),i=e.prefixCls,o=e.multiple,a=e.open,u=e.mode,c=e.showSearch,s=e.tokenWithEnter,d=e.onSearch,f=e.onSearchSubmit,h=e.onToggleOpen,p=e.onInputKeyDown,v=e.domRef;l.useImperativeHandle(t,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var g=jF(b3e(0),2),m=g[0],y=g[1],b=Object(l.useRef)(null),w=function(e){!1!==d(e,!0,r.current)&&h(!0)},_={inputRef:n,onInputKeyDown:function(e){var t=e.which;t!==D2e.UP&&t!==D2e.DOWN||e.preventDefault(),p&&p(e),t!==D2e.ENTER||"tags"!==u||r.current||a||f(e.target.value),[D2e.SHIFT,D2e.TAB,D2e.BACKSPACE,D2e.ESC].includes(t)||h(!0)},onInputMouseDown:function(){y(!0)},onInputChange:function(e){var t=e.target.value;if(s&&b.current&&/[\r\n]/.test(b.current)){var n=b.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,b.current)}b.current=null,w(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");b.current=t},onInputCompositionStart:function(){r.current=!0},onInputCompositionEnd:function(e){r.current=!1,"combobox"!==u&&w(e.target.value)}},x=o?l.createElement(m3e,RXe({},e,_)):l.createElement(y3e,RXe({},e,_));return l.createElement("div",{ref:v,className:"".concat(i,"-selector"),onClick:function(e){e.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(e){var t=m();e.target===n.current||t||e.preventDefault(),("combobox"===u||c&&t)&&a||(a&&d("",!0,!1),h())}},x)},_3e=l.forwardRef(w3e);function x3e(e,t,n,r){var i=s.a.unstable_batchedUpdates?function(e){s.a.unstable_batchedUpdates(n,e)}:n;return null!=e&&e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(t,i,r)}}}_3e.displayName="Selector";var k3e,C3e=Object(l.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=Object(l.useRef)(),a=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{}}));var u=Object(l.useRef)(!1);return!u.current&&hUe()&&(a.current=r(),o.current=a.current.parentNode,u.current=!0),Object(l.useEffect)((function(){null==n||n(e)})),Object(l.useEffect)((function(){return null===a.current.parentNode&&null!==o.current&&o.current.appendChild(a.current),function(){var e;null===(e=a.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(a.current)}}),[]),a.current?s.a.createPortal(i,a.current):null}));function S3e(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function O3e(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function E3e(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,i=e.mask,o=e.maskMotion,a=e.maskAnimation,u=e.maskTransitionName;if(!i)return null;var c={};return(o||u||a)&&(c=MWe({motionAppear:!0},O3e({motion:o,prefixCls:t,transitionName:u,animation:a}))),l.createElement(cQe,RXe({},c,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return l.createElement("div",{style:{zIndex:r},className:F()("".concat(t,"-mask"),n)})}))}function I3e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P3e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I3e(Object(n),!0).forEach((function(t){R3e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I3e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M3e(e){return(M3e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R3e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A3e={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function j3e(){if(void 0!==k3e)return k3e;k3e="";var e=document.createElement("p").style;for(var t in A3e)t+"Transform"in e&&(k3e=t);return k3e}function D3e(){return j3e()?"".concat(j3e(),"TransitionProperty"):"transitionProperty"}function T3e(){return j3e()?"".concat(j3e(),"Transform"):"transform"}function F3e(e,t){var n=D3e();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function N3e(e,t){var n=T3e();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var L3e,B3e=/matrix\((.*)\)/,V3e=/matrix3d\((.*)\)/;function z3e(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function H3e(e,t,n){var r=n;if("object"!==M3e(t))return void 0!==r?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):L3e(e,t);for(var i in t)t.hasOwnProperty(i)&&H3e(e,i,t[i])}function W3e(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function U3e(e){return W3e(e)}function G3e(e){return W3e(e,!0)}function Y3e(e){var t=function(e){var t,n,r,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=U3e(r),t.top+=G3e(r),t}function $3e(e){return null!=e&&e==e.window}function q3e(e){return $3e(e)?e.document:9===e.nodeType?e:e.ownerDocument}var K3e=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),X3e=/^(top|right|bottom|left)$/,J3e="currentStyle",Z3e="runtimeStyle",Q3e="left";function e6e(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function t6e(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function n6e(e,t,n){"static"===H3e(e,"position")&&(e.style.position="relative");var r=-999,i=-999,o=e6e("left",n),a=e6e("top",n),l=t6e(o),u=t6e(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c,s="",d=Y3e(e);("left"in t||"top"in t)&&(s=(c=e).style.transitionProperty||c.style[D3e()]||"",F3e(e,"none")),"left"in t&&(e.style[l]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[a]="".concat(i,"px")),z3e(e);var f=Y3e(e),h={};for(var p in t)if(t.hasOwnProperty(p)){var v=e6e(p,n),g="left"===p?r:i,m=d[p]-f[p];h[v]=v===p?g+m:g-m}H3e(e,h),z3e(e),("left"in t||"top"in t)&&F3e(e,s);var y={};for(var b in t)if(t.hasOwnProperty(b)){var w=e6e(b,n),_=t[b]-d[b];y[w]=b===w?h[w]+_:h[w]-_}H3e(e,y)}function r6e(e,t){var n=Y3e(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(T3e());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(T3e());if(r&&"none"!==r){var i,o=r.match(B3e);o?((i=(o=o[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,N3e(e,"matrix(".concat(i.join(","),")"))):((i=r.match(V3e)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,N3e(e,"matrix3d(".concat(i.join(","),")")))}else N3e(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}function i6e(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o6e(e){return"border-box"===L3e(e,"boxSizing")}"undefined"!=typeof window&&(L3e=window.getComputedStyle?function(e,t,n){var r=n,i="",o=q3e(e);return(r=r||o.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e[J3e]&&e[J3e][t];if(K3e.test(n)&&!X3e.test(t)){var r=e.style,i=r[Q3e],o=e[Z3e][Q3e];e[Z3e][Q3e]=e[J3e][Q3e],r[Q3e]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[Q3e]=i,e[Z3e][Q3e]=o}return""===n?"auto":n});var a6e=["margin","border","padding"],l6e=-1,u6e=2,c6e=1;function s6e(e,t,n){var r,i,o,a=0;for(i=0;i<t.length;i++)if(r=t[i])for(o=0;o<n.length;o++){var l=void 0;l="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(L3e(e,l))||0}return a}var d6e={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function f6e(e,t,n){var r=n;if($3e(e))return"width"===t?d6e.viewportWidth(e):d6e.viewportHeight(e);if(9===e.nodeType)return"width"===t?d6e.docWidth(e):d6e.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=o6e(e),l=0;(null==o||o<=0)&&(o=void 0,(null==(l=L3e(e,t))||Number(l)<0)&&(l=e.style[t]||0),l=Math.floor(parseFloat(l))||0),void 0===r&&(r=a?c6e:l6e);var u=void 0!==o||a,c=o||l;return r===l6e?u?c-s6e(e,["border","padding"],i):l:u?r===c6e?c:c+(r===u6e?-s6e(e,["border"],i):s6e(e,["margin"],i)):l+s6e(e,a6e.slice(r),i)}i6e(["Width","Height"],(function(e){d6e["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],d6e["viewport".concat(e)](n))},d6e["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var h6e={position:"absolute",visibility:"hidden",display:"block"};function p6e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=f6e.apply(void 0,t):function(e,t,n){var r,i={},o=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r],o[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(o[r]=i[r])}(i,h6e,(function(){r=f6e.apply(void 0,t)})),r}function v6e(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}i6e(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);d6e["outer".concat(t)]=function(t,n){return t&&p6e(t,e,n?0:c6e)};var n="width"===e?["Left","Right"]:["Top","Bottom"];d6e[e]=function(t,r){var i=r;return void 0!==i?t?(o6e(t)&&(i+=s6e(t,["padding","border"],n)),H3e(t,e,i)):void 0:t&&p6e(t,e,l6e)}}));var g6e={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:q3e,offset:function(e,t,n){if(void 0===t)return Y3e(e);!function(e,t,n){if(n.ignoreShake){var r=Y3e(e),i=r.left.toFixed(0),o=r.top.toFixed(0),a=t.left.toFixed(0),l=t.top.toFixed(0);if(i===a&&o===l)return}n.useCssRight||n.useCssBottom?n6e(e,t,n):n.useCssTransform&&T3e()in document.body.style?r6e(e,t):n6e(e,t,n)}(e,t,n||{})},isWindow:$3e,each:i6e,css:H3e,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:v6e,getWindowScrollLeft:function(e){return U3e(e)},getWindowScrollTop:function(e){return G3e(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)g6e.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};v6e(g6e,d6e);var m6e=g6e.getParent;function y6e(e){if(g6e.isWindow(e)||9===e.nodeType)return null;var t,n=g6e.getDocument(e).body,r=g6e.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:m6e(e);for(t=m6e(e);t&&t!==n&&9!==t.nodeType;t=m6e(t))if("static"!==(r=g6e.css(t,"position")))return t;return null}var b6e=g6e.getParent;function w6e(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=y6e(e),i=g6e.getDocument(e),o=i.defaultView||i.parentWindow,a=i.body,l=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===l||"visible"===g6e.css(r,"overflow")){if(r===a||r===l)break}else{var u=g6e.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=y6e(r)}var c=null;g6e.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===g6e.css(e,"position")&&(e.style.position="fixed"));var s=g6e.getWindowScrollLeft(o),d=g6e.getWindowScrollTop(o),f=g6e.viewportWidth(o),h=g6e.viewportHeight(o),p=l.scrollWidth,v=l.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(p=o.innerWidth),"hidden"===g.overflowY&&(v=o.innerHeight),e.style&&(e.style.position=c),t||function(e){if(g6e.isWindow(e)||9===e.nodeType)return!1;var t=g6e.getDocument(e),n=t.body,r=null;for(r=b6e(e);r&&r!==n&&r!==t;r=b6e(r))if("fixed"===g6e.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,s),n.top=Math.max(n.top,d),n.right=Math.min(n.right,s+f),n.bottom=Math.min(n.bottom,d+h);else{var m=Math.max(p,s+f);n.right=Math.min(n.right,m);var y=Math.max(v,d+h);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function _6e(e){var t,n,r;if(g6e.isWindow(e)||9===e.nodeType){var i=g6e.getWindow(e);t={left:g6e.getWindowScrollLeft(i),top:g6e.getWindowScrollTop(i)},n=g6e.viewportWidth(i),r=g6e.viewportHeight(i)}else t=g6e.offset(e),n=g6e.outerWidth(e),r=g6e.outerHeight(e);return t.width=n,t.height=r,t}function x6e(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,a=e.left,l=e.top;return"c"===n?l+=o/2:"b"===n&&(l+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:l}}function k6e(e,t,n,r,i){var o=x6e(t,n[1]),a=x6e(e,n[0]),l=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-l[0]+r[0]-i[0]),top:Math.round(e.top-l[1]+r[1]-i[1])}}function C6e(e,t,n){return e.left<n.left||e.left+t.width>n.right}function S6e(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function O6e(e,t,n){var r=[];return g6e.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function E6e(e,t){return e[t]=-e[t],e}function I6e(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function P6e(e,t){e[0]=I6e(e[0],t.width),e[1]=I6e(e[1],t.height)}function M6e(e,t,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],l=n.overflow,u=n.source||e;o=[].concat(o),a=[].concat(a);var c={},s=0,d=w6e(u,!(!(l=l||{})||!l.alwaysByViewport)),f=_6e(u);P6e(o,f),P6e(a,t);var h=k6e(f,t,i,o,a),p=g6e.merge(f,h);if(d&&(l.adjustX||l.adjustY)&&r){if(l.adjustX&&C6e(h,f,d)){var v=O6e(i,/[lr]/gi,{l:"r",r:"l"}),g=E6e(o,0),m=E6e(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(k6e(f,t,v,g,m),f,d)||(s=1,i=v,o=g,a=m)}if(l.adjustY&&S6e(h,f,d)){var y=O6e(i,/[tb]/gi,{t:"b",b:"t"}),b=E6e(o,1),w=E6e(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(k6e(f,t,y,b,w),f,d)||(s=1,i=y,o=b,a=w)}s&&(h=k6e(f,t,i,o,a),g6e.mix(p,h));var _=C6e(h,f,d),x=S6e(h,f,d);if(_||x){var k=i;_&&(k=O6e(i,/[lr]/gi,{l:"r",r:"l"})),x&&(k=O6e(i,/[tb]/gi,{t:"b",b:"t"})),i=k,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=l.adjustX&&_,c.adjustY=l.adjustY&&x,(c.adjustX||c.adjustY)&&(p=function(e,t,n,r){var i=g6e.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),g6e.mix(i,o)}(h,f,d,c))}return p.width!==f.width&&g6e.css(u,"width",g6e.width(u)+p.width-f.width),p.height!==f.height&&g6e.css(u,"height",g6e.height(u)+p.height-f.height),g6e.offset(u,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function R6e(e,t,n){var r=n.target||t,i=_6e(r),o=!function(e,t){var n=w6e(e,t),r=_6e(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return M6e(e,i,n,o)}R6e.__getOffsetParent=y6e,R6e.__getVisibleRectForElement=w6e;function A6e(e,t){var n=null,r=null;var i=new l5e((function(e){var i=jF(e,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,l=o.height,u=Math.floor(a),c=Math.floor(l);n===u&&r===c||Promise.resolve().then((function(){t({width:u,height:c})})),n=u,r=c}}));return e&&i.observe(e),function(){i.disconnect()}}function j6e(e){return"function"!=typeof e?null:e()}function D6e(e){return"object"===ex(e)&&e?e:null}var T6e=function(e,t){var n=e.children,r=e.disabled,i=e.target,o=e.align,a=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,s=void 0===c?0:c,d=u.a.useRef({}),f=u.a.useRef(),h=u.a.Children.only(n),p=u.a.useRef({});p.current.disabled=r,p.current.target=i,p.current.align=o,p.current.onAlign=a;var v=function(e,t){var n=u.a.useRef(!1),r=u.a.useRef(null);function i(){window.clearTimeout(r.current)}return[function o(a){if(i(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,o()}),t);else{if(!1===e(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,i()}]}((function(){var e=p.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,o=f.current;if(!t&&n&&o){var a,l=j6e(n),u=D6e(n);d.current.element=l,d.current.point=u,d.current.align=r;var c=document.activeElement;return l&&function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1}(l)?a=R6e(o,l,r):u&&(a=function(e,t,n){var r,i,o=g6e.getDocument(e),a=o.defaultView||o.parentWindow,l=g6e.getWindowScrollLeft(a),u=g6e.getWindowScrollTop(a),c=g6e.viewportWidth(a),s=g6e.viewportHeight(a),d={left:r="pageX"in t?t.pageX:l+t.clientX,top:i="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},f=r>=0&&r<=l+c&&i>=0&&i<=u+s,h=[n.points[0],"cc"];return M6e(e,d,P3e(P3e({},n),{},{points:h}),f)}(o,u,r)),function(e,t){e!==document.activeElement&&pUe(t,e)&&"function"==typeof e.focus&&e.focus()}(c,o),i&&a&&i(o,a),!0}return!1}),s),g=jF(v,2),m=g[0],y=g[1],b=jF(u.a.useState(),2),w=b[0],_=b[1],x=jF(u.a.useState(),2),k=x[0],C=x[1];return k2e((function(){_(j6e(i)),C(D6e(i))})),u.a.useEffect((function(){var e,t;d.current.element===w&&((e=d.current.point)===(t=k)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(dUe(!a,"Warning: There may be circular references"),a)return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var l=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u],l))return!1;return!0}if(t&&i&&"object"===ex(t)&&"object"===ex(i)){var c=Object.keys(t);return c.length===Object.keys(i).length&&c.every((function(n){return e(t[n],i[n],l)}))}return!1}(e,t)}(d.current.align,o)||m()})),u.a.useEffect((function(){return A6e(f.current,m)}),[f.current]),u.a.useEffect((function(){return A6e(w,m)}),[w]),u.a.useEffect((function(){r?y():m()}),[r]),u.a.useEffect((function(){if(l)return x3e(window,"resize",m).remove}),[l]),u.a.useEffect((function(){return function(){y()}}),[]),u.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return m(!0)}}})),u.a.isValidElement(h)&&(h=u.a.cloneElement(h,{ref:yZe(h.ref,f)})),h},F6e=u.a.forwardRef(T6e);function N6e(){N6e=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),l=new M(r||[]);return i(a,"_invoke",{value:O(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",h="suspendedYield",p="executing",v="completed",g={};function m(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(R([])));x&&x!==n&&r.call(x,a)&&(w=x);var k=b.prototype=m.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,l){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==ex(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var u=E(l,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?v:h,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(ex(t)+" is not iterable")}return y.prototype=b,i(k,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},C(S.prototype),c(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}F6e.displayName="Align";var L6e=["measure","alignPre","align",null,"motion"],B6e=l.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,i=e.className,o=e.style,a=e.children,u=e.zIndex,c=e.stretch,s=e.destroyPopupOnHide,d=e.forceRender,f=e.align,h=e.point,p=e.getRootDomNode,v=e.getClassNameFromAlign,g=e.onAlign,m=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,w=e.onTouchStart,_=e.onClick,x=Object(l.useRef)(),k=Object(l.useRef)(),C=jF(Object(l.useState)(),2),S=C[0],O=C[1],E=function(e){var t=jF(l.useState({width:0,height:0}),2),n=t[0],r=t[1];return[l.useMemo((function(){var t={};if(e){var r=n.width,i=n.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){var t=e.offsetWidth,n=e.offsetHeight,i=e.getBoundingClientRect(),o=i.width,a=i.height;Math.abs(t-o)<1&&Math.abs(n-a)<1&&(t=o,n=a),r({width:t,height:n})}]}(c),I=jF(E,2),P=I[0],M=I[1];var R=function(e,t){var n=jF(CZe(null),2),r=n[0],i=n[1],o=Object(l.useRef)();function a(e){i(e,!0)}function u(){tQe.cancel(o.current)}return Object(l.useEffect)((function(){a("measure")}),[e]),Object(l.useEffect)((function(){"measure"===r&&t(),r&&(o.current=tQe(aO(N6e().mark((function e(){var t,n;return N6e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=L6e.indexOf(r),(n=L6e[t+1])&&-1!==t&&a(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),Object(l.useEffect)((function(){return function(){u()}}),[]),[r,function(e){u(),o.current=tQe((function(){a((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n,(function(){c&&M(p())})),A=jF(R,2),j=A[0],D=A[1],T=jF(Object(l.useState)(0),2),N=T[0],L=T[1],B=Object(l.useRef)();function V(){var e;null===(e=x.current)||void 0===e||e.forceAlign()}function z(e,t){var n=v(t);S!==n&&O(n),L((function(e){return e+1})),"align"===j&&(null==g||g(e,t))}k2e((function(){"alignPre"===j&&L(0)}),[j]),k2e((function(){"align"===j&&(N<3?V():D((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[N]);var H=MWe({},O3e(e));function W(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=H[e];H[e]=function(e,n){return D(),null==t?void 0:t(e,n)}})),l.useEffect((function(){H.motionName||"motion"!==j||D()}),[H.motionName,j]),l.useImperativeHandle(t,(function(){return{forceAlign:V,getElement:function(){return k.current}}}));var U=MWe(MWe({},P),{},{zIndex:u,opacity:"motion"!==j&&"stable"!==j&&n?0:void 0,pointerEvents:n||"stable"===j?void 0:"none"},o),G=!0;null==f||!f.points||"align"!==j&&"stable"!==j||(G=!1);var Y=a;return l.Children.count(a)>1&&(Y=l.createElement("div",{className:"".concat(r,"-content")},a)),l.createElement(cQe,RXe({visible:n,ref:k,leavedClassName:"".concat(r,"-hidden")},H,{onAppearPrepare:W,onEnterPrepare:W,removeOnLeave:s,forceRender:d}),(function(e,t){var n=e.className,o=e.style,a=F()(r,i,S,n);return l.createElement(F6e,{target:h||p,key:"popup",ref:x,monitorWindowResize:!0,disabled:G,align:f,onAlign:z},l.createElement("div",{ref:t,className:a,onMouseEnter:m,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:w,onClick:_,style:MWe(MWe({},o),U)},Y))}))}));B6e.displayName="PopupInner";var V6e=l.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.children,a=e.mobile,u=(a=void 0===a?{}:a).popupClassName,c=a.popupStyle,s=a.popupMotion,d=void 0===s?{}:s,f=a.popupRender,h=e.onClick,p=l.useRef();l.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return p.current}}}));var v=MWe({zIndex:i},c),g=o;return l.Children.count(o)>1&&(g=l.createElement("div",{className:"".concat(n,"-content")},o)),f&&(g=f(g)),l.createElement(cQe,RXe({visible:r,ref:p,removeOnLeave:!0},d),(function(e,t){var r=e.className,i=e.style,o=F()(n,u,r);return l.createElement("div",{ref:t,className:o,onClick:h,style:MWe(MWe({},i),v)},g)}))}));V6e.displayName="MobilePopupInner";var z6e=["visible","mobile"],H6e=l.forwardRef((function(e,t){var n=e.visible,r=e.mobile,i=EWe(e,z6e),o=jF(Object(l.useState)(n),2),a=o[0],u=o[1],c=jF(Object(l.useState)(!1),2),s=c[0],d=c[1],f=MWe(MWe({},i),{},{visible:a});Object(l.useEffect)((function(){u(n),n&&r&&d(q5e())}),[n,r]);var h=s?l.createElement(V6e,RXe({},f,{mobile:r,ref:t})):l.createElement(B6e,RXe({},f,{ref:t}));return l.createElement("div",null,l.createElement(E3e,f),h)}));H6e.displayName="Popup";var W6e=l.createContext(null);function U6e(){}function G6e(){return""}function Y6e(e){return e?e.ownerDocument:window.document}var $6e=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var q6e,K6e,X6e=(q6e=C3e,K6e=function(e){NC(n,e);var t=DXe(n);function n(e){var r,i;return rx(this,n),nx(AC(r=t.call(this,e)),"popupRef",l.createRef()),nx(AC(r),"triggerRef",l.createRef()),nx(AC(r),"portalContainer",void 0),nx(AC(r),"attachId",void 0),nx(AC(r),"clickOutsideHandler",void 0),nx(AC(r),"touchOutsideHandler",void 0),nx(AC(r),"contextMenuOutsideHandler1",void 0),nx(AC(r),"contextMenuOutsideHandler2",void 0),nx(AC(r),"mouseDownTimeout",void 0),nx(AC(r),"focusTime",void 0),nx(AC(r),"preClickTime",void 0),nx(AC(r),"preTouchTime",void 0),nx(AC(r),"delayTimer",void 0),nx(AC(r),"hasPopupMouseDown",void 0),nx(AC(r),"onMouseEnter",(function(e){var t=r.props.mouseEnterDelay;r.fireEvents("onMouseEnter",e),r.delaySetPopupVisible(!0,t,t?null:e)})),nx(AC(r),"onMouseMove",(function(e){r.fireEvents("onMouseMove",e),r.setPoint(e)})),nx(AC(r),"onMouseLeave",(function(e){r.fireEvents("onMouseLeave",e),r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),nx(AC(r),"onPopupMouseEnter",(function(){r.clearDelayTimer()})),nx(AC(r),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&pUe(null===(t=r.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||r.delaySetPopupVisible(!1,r.props.mouseLeaveDelay)})),nx(AC(r),"onFocus",(function(e){r.fireEvents("onFocus",e),r.clearDelayTimer(),r.isFocusToShow()&&(r.focusTime=Date.now(),r.delaySetPopupVisible(!0,r.props.focusDelay))})),nx(AC(r),"onMouseDown",(function(e){r.fireEvents("onMouseDown",e),r.preClickTime=Date.now()})),nx(AC(r),"onTouchStart",(function(e){r.fireEvents("onTouchStart",e),r.preTouchTime=Date.now()})),nx(AC(r),"onBlur",(function(e){r.fireEvents("onBlur",e),r.clearDelayTimer(),r.isBlurToHide()&&r.delaySetPopupVisible(!1,r.props.blurDelay)})),nx(AC(r),"onContextMenu",(function(e){e.preventDefault(),r.fireEvents("onContextMenu",e),r.setPopupVisible(!0,e)})),nx(AC(r),"onContextMenuClose",(function(){r.isContextMenuToShow()&&r.close()})),nx(AC(r),"onClick",(function(e){if(r.fireEvents("onClick",e),r.focusTime){var t;if(r.preClickTime&&r.preTouchTime?t=Math.min(r.preClickTime,r.preTouchTime):r.preClickTime?t=r.preClickTime:r.preTouchTime&&(t=r.preTouchTime),Math.abs(t-r.focusTime)<20)return;r.focusTime=0}r.preClickTime=0,r.preTouchTime=0,r.isClickToShow()&&(r.isClickToHide()||r.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!r.state.popupVisible;(r.isClickToHide()&&!n||n&&r.isClickToShow())&&r.setPopupVisible(!r.state.popupVisible,e)})),nx(AC(r),"onPopupMouseDown",(function(){var e;r.hasPopupMouseDown=!0,clearTimeout(r.mouseDownTimeout),r.mouseDownTimeout=window.setTimeout((function(){r.hasPopupMouseDown=!1}),0),r.context&&(e=r.context).onPopupMouseDown.apply(e,arguments)})),nx(AC(r),"onDocumentClick",(function(e){if(!r.props.mask||r.props.maskClosable){var t=e.target,n=r.getRootDomNode(),i=r.getPopupDomNode();pUe(n,t)&&!r.isContextMenuOnly()||pUe(i,t)||r.hasPopupMouseDown||r.close()}})),nx(AC(r),"getRootDomNode",(function(){var e=r.props.getTriggerDOMNode;if(e)return e(r.triggerRef.current);try{var t=dZe(r.triggerRef.current);if(t)return t}catch(e){}return s.a.findDOMNode(AC(r))})),nx(AC(r),"getPopupClassNameFromAlign",(function(e){var t=[],n=r.props,i=n.popupPlacement,o=n.builtinPlacements,a=n.prefixCls,l=n.alignPoint,u=n.getPopupClassNameFromAlign;return i&&o&&t.push(function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var l=o[a];if(S3e(e[l].points,i,r))return"".concat(t,"-placement-").concat(l)}return""}(o,a,e,l)),u&&t.push(u(e)),t.join(" ")})),nx(AC(r),"getComponent",(function(){var e=r.props,t=e.prefixCls,n=e.destroyPopupOnHide,i=e.popupClassName,o=e.onPopupAlign,a=e.popupMotion,u=e.popupAnimation,c=e.popupTransitionName,s=e.popupStyle,d=e.mask,f=e.maskAnimation,h=e.maskTransitionName,p=e.maskMotion,v=e.zIndex,g=e.popup,m=e.stretch,y=e.alignPoint,b=e.mobile,w=e.forceRender,_=e.onPopupClick,x=r.state,k=x.popupVisible,C=x.point,S=r.getPopupAlign(),O={};return r.isMouseEnterToShow()&&(O.onMouseEnter=r.onPopupMouseEnter),r.isMouseLeaveToHide()&&(O.onMouseLeave=r.onPopupMouseLeave),O.onMouseDown=r.onPopupMouseDown,O.onTouchStart=r.onPopupMouseDown,l.createElement(H6e,RXe({prefixCls:t,destroyPopupOnHide:n,visible:k,point:y&&C,className:i,align:S,onAlign:o,animation:u,getClassNameFromAlign:r.getPopupClassNameFromAlign},O,{stretch:m,getRootDomNode:r.getRootDomNode,style:s,mask:d,zIndex:v,transitionName:c,maskAnimation:f,maskTransitionName:h,maskMotion:p,ref:r.popupRef,motion:a,mobile:b,forceRender:w,onClick:_}),"function"==typeof g?g():g)})),nx(AC(r),"attachParent",(function(e){tQe.cancel(r.attachId);var t,n=r.props,i=n.getPopupContainer,o=n.getDocument,a=r.getRootDomNode();i?(a||0===i.length)&&(t=i(a)):t=o(r.getRootDomNode()).body,t?t.appendChild(e):r.attachId=tQe((function(){r.attachParent(e)}))})),nx(AC(r),"getContainer",(function(){if(!r.portalContainer){var e=(0,r.props.getDocument)(r.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",r.portalContainer=e}return r.attachParent(r.portalContainer),r.portalContainer})),nx(AC(r),"setPoint",(function(e){r.props.alignPoint&&e&&r.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),nx(AC(r),"handlePortalUpdate",(function(){r.state.prevPopupVisible!==r.state.popupVisible&&r.props.afterPopupVisibleChange(r.state.popupVisible)})),nx(AC(r),"triggerContextValue",{onPopupMouseDown:r.onPopupMouseDown}),i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:i,popupVisible:i},$6e.forEach((function(e){r["fire".concat(e)]=function(t){r.fireEvents(e,t)}})),r}return ox(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=x3e(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=x3e(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=x3e(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=x3e(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),tQe.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return MWe(MWe({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,i=t.alignPoint,o=t.className,a=t.autoDestroy,u=l.Children.only(n),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,i&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var s=F()(u&&u.props&&u.props.className,o);s&&(c.className=s);var d=MWe({},c);bZe(u)&&(d.ref=yZe(this.triggerRef,u.ref));var f,h=l.cloneElement(u,d);return(e||this.popupRef.current||r)&&(f=l.createElement(q6e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&a&&(f=null),l.createElement(W6e.Provider,{value:this.triggerContextValue},h,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(l.Component),nx(K6e,"contextType",W6e),nx(K6e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:G6e,getDocument:Y6e,onPopupVisibleChange:U6e,afterPopupVisibleChange:U6e,onPopupAlign:U6e,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),K6e),J6e=function(e,t){var n=e.prefixCls;e.disabled;var r=e.visible,i=e.children,o=e.popupElement,a=e.containerWidth,u=e.animation,c=e.transitionName,s=e.dropdownStyle,d=e.dropdownClassName,f=e.direction,h=void 0===f?"ltr":f,p=e.dropdownMatchSelectWidth,v=void 0===p||p,g=e.dropdownRender,m=e.dropdownAlign,y=e.getPopupContainer,b=e.empty,w=e.getTriggerDOMNode,_=e.onPopupVisibleChange,x=EWe(e,["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange"]),k="".concat(n,"-dropdown"),C=o;g&&(C=g(o));var S=l.useMemo((function(){return function(e){var t="number"!=typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(v)}),[v]),O=u?"".concat(k,"-").concat(u):c,E=l.useRef(null);l.useImperativeHandle(t,(function(){return{getPopupElement:function(){return E.current}}}));var I=MWe({minWidth:a},s);return"number"==typeof v?I.width=v:v&&(I.width=a),l.createElement(X6e,RXe({},x,{showAction:_?["click"]:[],hideAction:_?["click"]:[],popupPlacement:"rtl"===h?"bottomRight":"bottomLeft",builtinPlacements:S,prefixCls:k,popupTransitionName:O,popup:l.createElement("div",{ref:E},C),popupAlign:m,popupVisible:r,getPopupContainer:y,popupClassName:F()(d,nx({},"".concat(k,"-empty"),b)),popupStyle:I,getTriggerDOMNode:w,onPopupVisibleChange:_}),i)},Z6e=l.forwardRef(J6e);Z6e.displayName="SelectTrigger";var Q6e=["removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","tabIndex"];var e4e=function(e){var t=e.prefixCls,n=e.components.optionList,r=e.convertChildrenToData,i=e.flattenOptions,o=e.getLabeledValue,a=e.filterOptions,u=e.isValueDisabled,c=e.findValueOption,s=e.fillOptionsWithMissingValue,d=e.omitDOMProps;function f(e,f){var h,p=e.prefixCls,v=void 0===p?t:p,g=e.className,m=e.id,y=e.open,b=e.defaultOpen,w=e.options,_=e.children,x=e.mode,k=e.value,C=e.defaultValue,S=e.labelInValue,O=e.showSearch,E=e.inputValue,I=e.searchValue,P=e.filterOption,M=e.filterSort,R=e.optionFilterProp,A=void 0===R?"value":R,j=e.autoClearSearchValue,D=void 0===j||j,T=e.onSearch,N=e.allowClear,L=e.clearIcon,B=e.showArrow,V=e.inputIcon,z=e.menuItemSelectedIcon,H=e.disabled,W=e.loading,U=e.defaultActiveFirstOption,G=e.notFoundContent,Y=void 0===G?"Not Found":G,$=e.optionLabelProp,q=e.backfill;e.tabIndex;var K=e.getInputElement,X=e.getRawInputElement,J=e.getPopupContainer,Z=e.listHeight,Q=void 0===Z?200:Z,ee=e.listItemHeight,te=void 0===ee?20:ee,ne=e.animation,re=e.transitionName,ie=e.virtual,oe=e.dropdownStyle,ae=e.dropdownClassName,le=e.dropdownMatchSelectWidth,ue=e.dropdownRender,ce=e.dropdownAlign,se=e.showAction,de=void 0===se?[]:se,fe=e.direction,he=e.tokenSeparators,pe=e.tagRender,ve=e.onPopupScroll,ge=e.onDropdownVisibleChange,me=e.onFocus,ye=e.onBlur,be=e.onKeyUp,we=e.onKeyDown,_e=e.onMouseDown,xe=e.onChange,ke=e.onSelect,Ce=e.onDeselect,Se=e.onClear,Oe=e.internalProps,Ee=void 0===Oe?{}:Oe,Ie=EWe(e,["prefixCls","className","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","filterSort","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","tabIndex","getInputElement","getRawInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","onChange","onSelect","onDeselect","onClear","internalProps"]),Pe="RC_SELECT_INTERNAL_PROPS_MARK"===Ee.mark,Me=d?d(Ie):Ie;Q6e.forEach((function(e){delete Me[e]}));var Re=Object(l.useRef)(null),Ae=Object(l.useRef)(null),je=Object(l.useRef)(null),De=Object(l.useRef)(null),Te=Object(l.useMemo)((function(){return(he||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[he]),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=jF(l.useState(!1),2),n=t[0],r=t[1],i=l.useRef(null),o=function(){window.clearTimeout(i.current)};return l.useEffect((function(){return o}),[]),[n,function(t,n){o(),i.current=window.setTimeout((function(){r(t),n&&n()}),e)},o]}(),Ne=jF(Fe,3),Le=Ne[0],Be=Ne[1],Ve=Ne[2],ze=jF(Object(l.useState)(),2),He=ze[0],We=ze[1];Object(l.useEffect)((function(){var e;We("rc_select_".concat((H5e?(e=W5e,W5e+=1):e="TEST_OR_SSR",e)))}),[]);var Ue=m||He,Ge=$;void 0===Ge&&(Ge=w?"label":"children");var Ye="combobox"!==x&&S,$e="tags"===x||"multiple"===x,qe=void 0!==O?O:$e||"combobox"===x,Ke=jF(Object(l.useState)(!1),2),Xe=Ke[0],Je=Ke[1];Object(l.useEffect)((function(){Je(q5e())}),[]);var Ze=Object(l.useRef)(null);l.useImperativeHandle(f,(function(){var e,t,n;return{focus:null===(e=je.current)||void 0===e?void 0:e.focus,blur:null===(t=je.current)||void 0===t?void 0:t.blur,scrollTo:null===(n=De.current)||void 0===n?void 0:n.scrollTo}}));var Qe=jF(O2e(C,{value:k}),2),et=Qe[0],tt=Qe[1],nt=Object(l.useMemo)((function(){return function(e,t){var n=t.labelInValue,r=t.combobox,i=new Map;if(void 0===e||""===e&&r)return[[],i];var o=Array.isArray(e)?e:[e],a=o;return n&&(a=o.filter((function(e){return null!==e})).map((function(e){var t=e.key,n=e.value,r=void 0!==n?n:t;return i.set(r,e),r}))),[a,i]}(et,{labelInValue:Ye,combobox:"combobox"===x})}),[et,Ye]),rt=jF(nt,2),it=rt[0],ot=rt[1],at=Object(l.useMemo)((function(){return new Set(it)}),[it]),lt=jF(Object(l.useState)(null),2),ut=lt[0],ct=lt[1],st=jF(Object(l.useState)(""),2),dt=st[0],ft=st[1],ht=dt;"combobox"===x&&void 0!==et?ht=et:void 0!==I?ht=I:E&&(ht=E);var pt=Object(l.useMemo)((function(){var e=w;return void 0===e&&(e=r(_)),"tags"===x&&s&&(e=s(e,et,Ge,S)),e||[]}),[w,_,x,et]),vt=Object(l.useMemo)((function(){return i(pt,e)}),[pt]),gt=function(e){var t=l.useRef(null),n=l.useMemo((function(){var t=new Map;return e.forEach((function(e){var n=e.data.value;t.set(n,e)})),t}),[e]);return t.current=n,function(e){return e.map((function(e){return t.current.get(e)})).filter(Boolean)}}(vt),mt=Object(l.useMemo)((function(){if(!ht||!qe)return Q_(pt);var e=a(ht,pt,{optionFilterProp:A,filterOption:"combobox"===x&&void 0===P?function(){return!0}:P});return"tags"===x&&e.every((function(e){return e[A]!==ht}))&&e.unshift({value:ht,label:ht,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),M&&Array.isArray(e)?Q_(e).sort(M):e}),[pt,ht,x,qe,M]),yt=Object(l.useMemo)((function(){return i(mt,e)}),[mt]);Object(l.useEffect)((function(){De.current&&De.current.scrollTo&&De.current.scrollTo(0)}),[ht]);var bt,wt,_t,xt=Object(l.useMemo)((function(){var e=it.map((function(e){var t=gt([e]);return MWe(MWe({},o(e,{options:t,prevValueMap:ot,labelInValue:Ye,optionLabelProp:Ge})),{},{disabled:u(e,t)})}));return x||1!==e.length||null!==e[0].value||null!==e[0].label?e:[]}),[et,pt,x]);bt=xt,wt=l.useRef(bt),_t=l.useMemo((function(){var e=new Map;wt.current.forEach((function(t){var n=t.value,r=t.label;n!==r&&e.set(n,r)}));var t=bt.map((function(t){var n=e.get(t.value);return t.isCacheable&&n?MWe(MWe({},t),{},{label:n}):t}));return wt.current=t,t}),[bt]),xt=_t;var kt=function(e,t,n){var r=gt([e]),i=c([e],r)[0];if(!Ee.skipTriggerSelect){var a=Ye?o(e,{options:r,prevValueMap:ot,labelInValue:Ye,optionLabelProp:Ge}):e;t&&ke?ke(a,i):!t&&Ce&&Ce(a,i)}Pe&&(t&&Ee.onRawSelect?Ee.onRawSelect(e,i,n):!t&&Ee.onRawDeselect&&Ee.onRawDeselect(e,i,n))},Ct=jF(Object(l.useState)([]),2),St=Ct[0],Ot=Ct[1],Et=function(e){if(!Pe||!Ee.skipTriggerChange){var t=gt(e),n=function(e,t){var n=t.optionLabelProp,r=t.labelInValue,i=t.prevValueMap,o=t.options,a=t.getLabeledValue,l=e;return r&&(l=l.map((function(e){return a(e,{options:o,prevValueMap:i,labelInValue:r,optionLabelProp:n})}))),l}(Array.from(e),{labelInValue:Ye,options:t,getLabeledValue:o,prevValueMap:ot,optionLabelProp:Ge}),r=$e?n:n[0];if(xe&&(0!==it.length||0!==n.length)){var i=c(e,t,{prevValueOptions:St});Ot(i.map((function(t,n){var r=MWe({},t);return Object.defineProperty(r,"_INTERNAL_OPTION_VALUE_",{get:function(){return e[n]}}),r}))),xe(r,$e?i:i[0])}tt(r)}},It=function(e,t){var n,r=t.selected,i=t.source;H||($e?(n=new Set(it),r?n.add(e):n.delete(e)):(n=new Set).add(e),($e||!$e&&Array.from(it)[0]!==e)&&Et(Array.from(n)),kt(e,!$e||r,i),"combobox"===x?(ft(String(e)),ct("")):$e&&!D||(ft(""),ct("")))},Pt="combobox"===x&&"function"==typeof K&&K()||null,Mt="function"==typeof X&&X(),Rt=jF(O2e(void 0,{defaultValue:b,value:y}),2),At=Rt[0],jt=Rt[1],Dt=At,Tt=!Y&&!mt.length;(H||Tt&&Dt&&"combobox"===x)&&(Dt=!1);var Ft,Nt=!Tt&&Dt,Lt=function(e){var t=void 0!==e?e:!Dt;At===t||H||(jt(t),ge&&ge(t))};Mt&&(Ft=function(e){Lt(e)}),function(e,t,n){var r=l.useRef(null);r.current={open:t,triggerOpen:n},l.useEffect((function(){function t(t){var n=t.target;n.shadowRoot&&t.composed&&(n=t.composedPath()[0]||n),r.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(n)&&e!==n}))&&r.current.triggerOpen(!1)}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}((function(){var e;return[Re.current,null===(e=Ae.current)||void 0===e?void 0:e.getPopupElement()]}),Nt,Lt);var Bt=function(e,t,n){var r=!0,i=e;ct(null);var o=n?null:function(e,t){if(!t||!t.length)return null;var n=!1,r=function e(t,r){var i=fS(r),o=i[0],a=i.slice(1);if(!o)return[t];var l=t.split(o);return n=n||l.length>1,l.reduce((function(t,n){return[].concat(Q_(t),Q_(e(n,a)))}),[]).filter((function(e){return e}))}(e,t);return n?r:null}(e,he),a=o;if("combobox"===x)t&&Et([i]);else if(o){i="","tags"!==x&&(a=o.map((function(e){var t=vt.find((function(t){return t.data[Ge]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var l=Array.from(new Set([].concat(Q_(it),Q_(a))));Et(l),l.forEach((function(e){kt(e,!0,"input")})),Lt(!1),r=!1}return ft(i),T&&ht!==i&&T(i),r};Object(l.useEffect)((function(){At&&H&&jt(!1)}),[H]),Object(l.useEffect)((function(){Dt||$e||"combobox"===x||Bt("",!1,!1)}),[Dt]);var Vt=jF(b3e(),2),zt=Vt[0],Ht=Vt[1],Wt=Object(l.useRef)(!1),Ut=[];Object(l.useEffect)((function(){return function(){Ut.forEach((function(e){return clearTimeout(e)})),Ut.splice(0,Ut.length)}}),[]);var Gt=jF(Object(l.useState)(0),2),Yt=Gt[0],$t=Gt[1],qt=void 0!==U?U:"combobox"!==x,Kt=jF(Object(l.useState)(null),2),Xt=Kt[0],Jt=Kt[1],Zt=jF(Object(l.useState)({}),2)[1];v3e((function(){if(Nt){var e,t=Math.ceil(null===(e=Re.current)||void 0===e?void 0:e.offsetWidth);Xt===t||Number.isNaN(t)||Jt(t)}}),[Nt]);var Qt,en=l.createElement(n,{ref:De,prefixCls:v,id:Ue,open:Dt,childrenAsData:!w,options:mt,flattenOptions:yt,multiple:$e,values:at,height:Q,itemHeight:te,onSelect:function(e,t){It(e,MWe(MWe({},t),{},{source:"option"}))},onToggleOpen:Lt,onActiveValue:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,r=void 0===n?"keyboard":n;$t(t),q&&"combobox"===x&&null!==e&&"keyboard"===r&&ct(String(e))},defaultActiveFirstOption:qt,notFoundContent:Y,onScroll:ve,searchValue:ht,menuItemSelectedIcon:z,virtual:!1!==ie&&!1!==le,onMouseEnter:function(){Zt({})}});!H&&N&&(it.length||ht)&&(Qt=l.createElement(T5e,{className:"".concat(v,"-clear"),onMouseDown:function(){Pe&&Ee.onClear&&Ee.onClear(),Se&&Se(),Et([]),Bt("",!1,!1)},customizeIcon:L},"×"));var tn,nn=void 0!==B?B:W||!$e&&"combobox"!==x;nn&&(tn=l.createElement(T5e,{className:F()("".concat(v,"-arrow"),nx({},"".concat(v,"-arrow-loading"),W)),customizeIcon:V,customizeIconProps:{loading:W,searchValue:ht,open:Dt,focused:Le,showSearch:qe}}));var rn=F()(v,g,(nx(h={},"".concat(v,"-focused"),Le),nx(h,"".concat(v,"-multiple"),$e),nx(h,"".concat(v,"-single"),!$e),nx(h,"".concat(v,"-allow-clear"),N),nx(h,"".concat(v,"-show-arrow"),nn),nx(h,"".concat(v,"-disabled"),H),nx(h,"".concat(v,"-loading"),W),nx(h,"".concat(v,"-open"),Dt),nx(h,"".concat(v,"-customize-input"),Pt),nx(h,"".concat(v,"-show-search"),qe),h)),on=l.createElement(Z6e,{ref:Ae,disabled:H,prefixCls:v,visible:Nt,popupElement:en,containerWidth:Xt,animation:ne,transitionName:re,dropdownStyle:oe,dropdownClassName:ae,direction:fe,dropdownMatchSelectWidth:le,dropdownRender:ue,dropdownAlign:ce,getPopupContainer:J,empty:!pt.length,getTriggerDOMNode:function(){return Ze.current},onPopupVisibleChange:Ft},Mt?l.cloneElement(Mt,{ref:yZe(Ze,Mt.props.ref)}):l.createElement(_3e,RXe({},e,{domRef:Ze,prefixCls:v,inputElement:Pt,ref:je,id:Ue,showSearch:qe,mode:x,accessibilityIndex:Yt,multiple:$e,tagRender:pe,values:xt,open:Dt,onToggleOpen:Lt,searchValue:ht,activeValue:ut,onSearch:Bt,onSearchSubmit:function(e){if(e&&e.trim()){var t=Array.from(new Set([].concat(Q_(it),[e])));Et(t),t.forEach((function(e){kt(e,!0,"input")})),ft("")}},onSelect:function(e,t){It(e,MWe(MWe({},t),{},{source:"selection"}))},tokenWithEnter:Te})));return Mt?on:l.createElement("div",RXe({className:rn},Me,{ref:Re,onMouseDown:function(e){var t,n=e.target,r=null===(t=Ae.current)||void 0===t?void 0:t.getPopupElement();if(r&&r.contains(n)){var i=setTimeout((function(){var e,t=Ut.indexOf(i);(-1!==t&&Ut.splice(t,1),Ve(),Xe||r.contains(document.activeElement))||(null===(e=je.current)||void 0===e||e.focus())}));Ut.push(i)}if(_e){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];_e.apply(void 0,[e].concat(a))}},onKeyDown:function(e){var t,n=zt(),r=e.which;if(r===D2e.ENTER&&("combobox"!==x&&e.preventDefault(),Dt||Lt(!0)),Ht(!!ht),r===D2e.BACKSPACE&&!n&&$e&&!ht&&it.length){var i=function(e,t){var n,r=Q_(t);for(n=e.length-1;n>=0&&e[n].disabled;n-=1);var i=null;return-1!==n&&(i=r[n],r.splice(n,1)),{values:r,removedValue:i}}(xt,it);null!==i.removedValue&&(Et(i.values),kt(i.removedValue,!1,"input"))}for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];Dt&&De.current&&(t=De.current).onKeyDown.apply(t,[e].concat(a));we&&we.apply(void 0,[e].concat(a))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;Dt&&De.current&&(i=De.current).onKeyUp.apply(i,[e].concat(n));be&&be.apply(void 0,[e].concat(n))},onFocus:function(){Be(!0),H||(me&&!Wt.current&&me.apply(void 0,arguments),de.includes("focus")&&Lt(!0)),Wt.current=!0},onBlur:function(){Be(!1,(function(){Wt.current=!1,Lt(!1)})),H||(ht&&("tags"===x?(Bt("",!1,!1),Et(Array.from(new Set([].concat(Q_(it),[ht]))))):"multiple"===x&&ft("")),ye&&ye.apply(void 0,arguments))}}),Le&&!Dt&&l.createElement("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(it.join(", "))),on,tn,Qt)}return l.forwardRef(f)}({prefixCls:"rc-select",components:{optionList:N5e},convertChildrenToData:V5e,flattenOptions:function(e){var t=[];return function e(n,r){n.forEach((function(n){r||!("options"in n)?t.push({key:U5e(n,t.length),groupOption:r,data:n}):(t.push({key:U5e(n,t.length),group:!0,data:n}),e(n.options,!0))}))}(e,!1),t},getLabeledValue:function(e,t){var n=t.options,r=t.prevValueMap,i=t.labelInValue,o=t.optionLabelProp,a=Y5e([e],n)[0],l={value:e},u=i?r.get(e):void 0;return u&&"object"===ex(u)&&"label"in u?(l.label=u.label,a&&"string"==typeof u.label&&"string"==typeof a[o]&&u.label.trim()!==a[o].trim()&&dUe(!1,"`label` of `value` is not same as `label` in Select options.")):a&&o in a?l.label=a[o]:(l.label=e,l.isCacheable=!0),l.key=l.value,l},filterOptions:function(e,t,n){var r,i=n.optionFilterProp,o=n.filterOption,a=[];return!1===o?Q_(t):(r="function"==typeof o?o:function(e){return function(t,n){var r=t.toLowerCase();return"options"in n?$5e(n.label).toLowerCase().includes(r):$5e(n[e]).toLowerCase().includes(r)}}(i),t.forEach((function(t){if("options"in t)if(r(e,t))a.push(t);else{var n=t.options.filter((function(t){return r(e,t)}));n.length&&a.push(MWe(MWe({},t),{},{options:n}))}else r(e,G5e(t))&&a.push(t)})),a)},isValueDisabled:function(e,t){return Y5e([e],t)[0].disabled},findValueOption:Y5e,warningProps:function(e){var t=e.mode,n=e.options,r=e.children,i=e.backfill,o=e.allowClear,a=e.placeholder,u=e.getInputElement,c=e.showSearch,s=e.onSearch,d=e.defaultOpen,f=e.autoFocus,h=e.labelInValue,p=e.value,v=e.inputValue,g=e.optionLabelProp,m="multiple"===t||"tags"===t,y=void 0!==c?c:m||"combobox"===t,b=n||V5e(r);if(dUe("tags"!==t||b.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),("tags"===t||"combobox"===t)&&dUe(!b.some((function(e){return e.options?e.options.some((function(e){return"number"==typeof("value"in e?e.value:e.key)})):"number"==typeof("value"in e?e.value:e.key)})),"`value` of Option should not use number type when `mode` is `tags` or `combobox`."),dUe("combobox"!==t||!g,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),dUe("combobox"===t||!i,"`backfill` only works with `combobox` mode."),dUe("combobox"===t||!u,"`getInputElement` only work with `combobox` mode."),fUe("combobox"!==t||!u||!o||!a,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),s&&!y&&"combobox"!==t&&"tags"!==t&&dUe(!1,"`onSearch` should work with `showSearch` instead of use alone."),fUe(!d||f,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),null!=p){var w=z5e(p);dUe(!h||w.every((function(e){return"object"===ex(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),dUe(!m||Array.isArray(p),"`value` should be array when `mode` is `multiple` or `tags`")}if(r){var _=null;BXe(r).some((function(e){if(!l.isValidElement(e)||!e.type)return!1;var t=e.type;return!t.isSelectOption&&(t.isSelectOptGroup?!BXe(e.props.children).every((function(t){return!(l.isValidElement(t)&&e.type&&!t.type.isSelectOption)||(_=t.type,!1)})):(_=t,!0))})),_&&dUe(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(_.displayName||_.name||_,"`.")),dUe(void 0===v,"`inputValue` is deprecated, please use `searchValue` instead.")}},fillOptionsWithMissingValue:function(e,t,n,r){var i=z5e(t).slice().sort(),o=Q_(e),a=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){a.add(e.value)})):a.add(e.value)})),i.forEach((function(e){var t,i=r?e.value:e;a.has(i)||o.push(r?(nx(t={},n,e.label),nx(t,"value",i),t):{value:i})})),o}}),t4e=function(e){NC(n,e);var t=DXe(n);function n(){var e;return rx(this,n),(e=t.apply(this,arguments)).selectRef=l.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return ox(n,[{key:"render",value:function(){return l.createElement(e4e,RXe({ref:this.selectRef},this.props))}}]),n}(l.Component);t4e.Option=L5e,t4e.OptGroup=B5e;var n4e=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)},r4e="SECRET_COMBOBOX_MODE_DO_NOT_USE",i4e=function(e,t){var n,r,i=e.prefixCls,o=e.bordered,a=void 0===o||o,u=e.className,c=e.getPopupContainer,s=e.dropdownClassName,d=e.listHeight,f=void 0===d?256:d,h=e.listItemHeight,p=void 0===h?24:h,v=e.size,g=e.notFoundContent,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),y=l.useContext(lZe),b=y.getPopupContainer,w=y.getPrefixCls,_=y.renderEmpty,x=y.direction,k=y.virtual,C=y.dropdownMatchSelectWidth,S=l.useContext(cZe),O=w("select",i),E=w(),I=l.useMemo((function(){var e=m.mode;if("combobox"!==e)return e===r4e?"combobox":e}),[m.mode]),P="multiple"===I||"tags"===I;r=void 0!==g?g:"combobox"===I?null:_("Select");var M=function(e){var t=e.suffixIcon,n=e.clearIcon,r=e.menuItemSelectedIcon,i=e.removeIcon,o=e.loading,a=e.multiple,u=e.prefixCls,c=n;n||(c=l.createElement(pYe,null));var s=null;if(void 0!==t)s=t;else if(o)s=l.createElement(kYe,{spin:!0});else{var d="".concat(u,"-suffix");s=function(e){var t=e.open,n=e.showSearch;return t&&n?l.createElement(OYe,{className:d}):l.createElement(wYe,{className:d})}}return{clearIcon:c,suffixIcon:s,itemIcon:void 0!==r?r:a?l.createElement(uYe,null):null,removeIcon:void 0!==i?i:l.createElement(mYe,null)}}(RXe(RXe({},m),{multiple:P,prefixCls:O})),R=M.suffixIcon,A=M.itemIcon,j=M.removeIcon,D=M.clearIcon,T=AXe(m,["suffixIcon","itemIcon"]),N=F()(s,nx({},"".concat(O,"-dropdown-").concat(x),"rtl"===x)),L=v||S,B=F()((nx(n={},"".concat(O,"-lg"),"large"===L),nx(n,"".concat(O,"-sm"),"small"===L),nx(n,"".concat(O,"-rtl"),"rtl"===x),nx(n,"".concat(O,"-borderless"),!a),n),u);return l.createElement(t4e,RXe({ref:t,virtual:k,dropdownMatchSelectWidth:C},T,{transitionName:n4e(E,"slide-up",m.transitionName),listHeight:f,listItemHeight:p,mode:I,prefixCls:O,direction:x,inputIcon:R,menuItemSelectedIcon:A,removeIcon:j,clearIcon:D,notFoundContent:r,className:B,getPopupContainer:c||b,dropdownClassName:N}))},o4e=l.forwardRef(i4e);o4e.SECRET_COMBOBOX_MODE_DO_NOT_USE=r4e,o4e.Option=L5e,o4e.OptGroup=B5e;var a4e=function(e){NC(n,e);var t=DXe(n);function n(e){var r;rx(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,i=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),i&&i({target:MWe(MWe({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var i="checked"in e?e.checked:e.defaultChecked;return r.state={checked:i},r}return ox(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,i=t.style,o=t.name,a=t.id,l=t.type,c=t.disabled,s=t.readOnly,d=t.tabIndex,f=t.onClick,h=t.onFocus,p=t.onBlur,v=t.onKeyDown,g=t.onKeyPress,m=t.onKeyUp,y=t.autoFocus,b=t.value,w=t.required,_=EWe(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),x=Object.keys(_).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=_[t]),e}),{}),k=this.state.checked,C=F()(n,r,(nx(e={},"".concat(n,"-checked"),k),nx(e,"".concat(n,"-disabled"),c),e));return u.a.createElement("span",{className:C,style:i},u.a.createElement("input",RXe({name:o,id:a,type:l,required:w,readOnly:s,disabled:c,tabIndex:d,className:"".concat(n,"-input"),checked:!!k,onClick:f,onFocus:h,onBlur:p,onKeyUp:m,onKeyDown:v,onKeyPress:g,onChange:this.handleChange,autoFocus:y,ref:this.saveInput,value:b},x)),u.a.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?MWe(MWe({},t),{},{checked:e.checked}):null}}]),n}(l.Component);a4e.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var l4e=l.createContext(null),u4e=l4e.Provider,c4e=function(e,t){var n,r=l.useContext(l4e),i=l.useContext(lZe),o=i.getPrefixCls,a=i.direction,u=l.useRef(),c=yZe(t,u);l.useEffect((function(){KJe(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var s=e.prefixCls,d=e.className,f=e.children,h=e.style,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","children","style"]),v=o("radio",s),g=RXe({},p);r&&(g.name=r.name,g.onChange=function(t){var n,i;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(i=null==r?void 0:r.onChange)||void 0===i||i.call(r,t)},g.checked=e.value===r.value,g.disabled=e.disabled||r.disabled);var m=F()("".concat(v,"-wrapper"),(nx(n={},"".concat(v,"-wrapper-checked"),g.checked),nx(n,"".concat(v,"-wrapper-disabled"),g.disabled),nx(n,"".concat(v,"-wrapper-rtl"),"rtl"===a),n),d);return l.createElement("label",{className:m,style:h,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},l.createElement(a4e,RXe({},g,{prefixCls:v,ref:c})),void 0!==f?l.createElement("span",null,f):null)},s4e=l.forwardRef(c4e);s4e.displayName="Radio",s4e.defaultProps={type:"radio"};var d4e=l.forwardRef((function(e,t){var n=l.useContext(lZe),r=n.getPrefixCls,i=n.direction,o=l.useContext(cZe),a=jF(O2e(e.defaultValue,{value:e.value}),2),u=a[0],c=a[1];return l.createElement(u4e,{value:{onChange:function(t){var n=u,r=t.target.value;"value"in e||c(r);var i=e.onChange;i&&r!==n&&i(t)},value:u,disabled:e.disabled,name:e.name}},function(){var n,a=e.prefixCls,c=e.className,s=void 0===c?"":c,d=e.options,f=e.optionType,h=e.buttonStyle,p=void 0===h?"outline":h,v=e.disabled,g=e.children,m=e.size,y=e.style,b=e.id,w=e.onMouseEnter,_=e.onMouseLeave,x=r("radio",a),k="".concat(x,"-group"),C=g;if(d&&d.length>0){var S="button"===f?"".concat(x,"-button"):x;C=d.map((function(e){return"string"==typeof e?l.createElement(s4e,{key:e,prefixCls:S,disabled:v,value:e,checked:u===e},e):l.createElement(s4e,{key:"radio-group-value-options-".concat(e.value),prefixCls:S,disabled:e.disabled||v,value:e.value,checked:u===e.value,style:e.style},e.label)}))}var O=m||o,E=F()(k,"".concat(k,"-").concat(p),(nx(n={},"".concat(k,"-").concat(O),O),nx(n,"".concat(k,"-rtl"),"rtl"===i),n),s);return l.createElement("div",RXe({},function(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}(e),{className:E,style:y,onMouseEnter:w,onMouseLeave:_,id:b,ref:t}),C)}())})),f4e=l.memo(d4e),h4e=function(e,t){var n=l.useContext(l4e),r=l.useContext(lZe).getPrefixCls,i=e.prefixCls,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls"]),a=r("radio-button",i);return n&&(o.checked=e.value===n.value,o.disabled=e.disabled||n.disabled),l.createElement(s4e,RXe({prefixCls:a},o,{type:"radio",ref:t}))},p4e=l.forwardRef(h4e),v4e=s4e;v4e.Button=p4e,v4e.Group=f4e;var g4e=10,m4e=20;function y4e(e){var t=e.fullscreen,n=e.validRange,r=e.generateConfig,i=e.locale,o=e.prefixCls,a=e.value,u=e.onChange,c=e.divRef,s=r.getYear(a||r.getNow()),d=s-g4e,f=d+m4e;n&&(d=r.getYear(n[0]),f=r.getYear(n[1])+1);for(var h=i&&"年"===i.year?"年":"",p=[],v=d;v<f;v++)p.push({label:"".concat(v).concat(h),value:v});return l.createElement(o4e,{size:t?void 0:"small",options:p,value:s,className:"".concat(o,"-year-select"),onChange:function(e){var t=r.setYear(a,e);if(n){var i=jF(n,2),o=i[0],l=i[1],c=r.getYear(t),s=r.getMonth(t);c===r.getYear(l)&&s>r.getMonth(l)&&(t=r.setMonth(t,r.getMonth(l))),c===r.getYear(o)&&s<r.getMonth(o)&&(t=r.setMonth(t,r.getMonth(o)))}u(t)},getPopupContainer:function(){return c.current}})}function b4e(e){var t=e.prefixCls,n=e.fullscreen,r=e.validRange,i=e.value,o=e.generateConfig,a=e.locale,u=e.onChange,c=e.divRef,s=o.getMonth(i||o.getNow()),d=0,f=11;if(r){var h=jF(r,2),p=h[0],v=h[1],g=o.getYear(i);o.getYear(v)===g&&(f=o.getMonth(v)),o.getYear(p)===g&&(d=o.getMonth(p))}for(var m=a.shortMonths||o.locale.getShortMonths(a.locale),y=[],b=d;b<=f;b+=1)y.push({label:m[b],value:b});return l.createElement(o4e,{size:n?void 0:"small",className:"".concat(t,"-month-select"),value:s,options:y,onChange:function(e){u(o.setMonth(i,e))},getPopupContainer:function(){return c.current}})}function w4e(e){var t=e.prefixCls,n=e.locale,r=e.mode,i=e.fullscreen,o=e.onModeChange;return l.createElement(f4e,{onChange:function(e){var t=e.target.value;o(t)},value:r,size:i?void 0:"small",className:"".concat(t,"-mode-switch")},l.createElement(p4e,{value:"month"},n.month),l.createElement(p4e,{value:"year"},n.year))}function _4e(e){var t=e.prefixCls,n=e.fullscreen,r=e.mode,i=e.onChange,o=e.onModeChange,a=l.useRef(null),u=RXe(RXe({},e),{onChange:i,fullscreen:n,divRef:a});return l.createElement("div",{className:"".concat(t,"-header"),ref:a},l.createElement(y4e,u),"month"===r&&l.createElement(b4e,u),l.createElement(w4e,RXe({},u,{onModeChange:o})))}a.a.extend(Zx),a.a.extend(qx),a.a.extend(Ux),a.a.extend(Vx),a.a.extend(nk),a.a.extend(ak),a.a.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var x4e={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},k4e=function(e){return x4e[e]||e.split("_")[0]},C4e={getNow:function(){var e=a()();return"function"==typeof e.tz?e.tz():e},getFixedDate:function(e){return a()(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},setMillisecond:function(e,t){return e.millisecond(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return a()().locale(k4e(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(k4e(e)).weekday(0)},getWeek:function(e,t){return t.locale(k4e(e)).week()},getShortWeekDays:function(e){return a()().locale(k4e(e)).localeData().weekdaysMin()},getShortMonths:function(e){return a()().locale(k4e(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale(k4e(e)).format(n)},parse:function(e,t,n){for(var r=k4e(e),i=0;i<n.length;i+=1){var o=n[i],l=t;if(o.includes("wo")||o.includes("Wo")){for(var u=l.split("-")[0],c=l.split("-")[1],s=a()(u,"YYYY").startOf("year").locale(r),d=0;d<=52;d+=1){var f=s.add(d,"week");if(f.format("Wo")===c)return f}return null}var h=a()(l,o,!0).locale(r);if(h.isValid())return h}return null}}};function S4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O4e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E4e="zhCN"===bx._lang?T0e:b0e,I4e=function(e){function t(t,n){return t&&n&&e.getYear(t)===e.getYear(n)}function n(n,r){return t(n,r)&&e.getMonth(n)===e.getMonth(r)}function r(t,r){return n(t,r)&&e.getDate(t)===e.getDate(r)}return function(i){var o=i.prefixCls,a=i.className,u=i.style,c=i.dateFullCellRender,s=i.dateCellRender,d=i.monthFullCellRender,f=i.monthCellRender,h=i.headerRender,p=i.value,v=i.defaultValue,g=i.disabledDate,m=i.mode,y=i.validRange,b=i.fullscreen,w=void 0===b||b,_=i.onChange,x=i.onPanelChange,k=i.onSelect,C=l.useContext(lZe),S=C.getPrefixCls,O=C.direction,E=S("picker",o),I="".concat(E,"-calendar"),P=e.getNow(),M=jF(O2e((function(){return p||e.getNow()}),{defaultValue:v,value:p}),2),R=M[0],A=M[1],j=jF(O2e("month",{value:m}),2),D=j[0],T=j[1],N=l.useMemo((function(){return"year"===D?"month":"date"}),[D]),L=l.useCallback((function(t){return!!y&&(e.isAfter(y[0],t)||e.isAfter(t,y[1]))||!!(null==g?void 0:g(t))}),[g,y]),B=function(e,t){null==x||x(e,t)},V=function(e){T(e),B(R,e)},z=function(e){!function(e){A(e),r(e,R)||(("date"===N&&!n(e,R)||"month"===N&&!t(e,R))&&B(e,D),null==_||_(e))}(e),null==k||k(e)},H=l.useCallback((function(t){return c?c(t):l.createElement("div",{className:F()("".concat(E,"-cell-inner"),"".concat(I,"-date"),nx({},"".concat(I,"-date-today"),r(P,t)))},l.createElement("div",{className:"".concat(I,"-date-value")},j2e(String(e.getDate(t)),2,"0")),l.createElement("div",{className:"".concat(I,"-date-content")},s&&s(t)))}),[c,s]),W=l.useCallback((function(t,r){if(d)return d(t);var i=r.shortMonths||e.locale.getShortMonths(r.locale);return l.createElement("div",{className:F()("".concat(E,"-cell-inner"),"".concat(I,"-date"),nx({},"".concat(I,"-date-today"),n(P,t)))},l.createElement("div",{className:"".concat(I,"-date-value")},i[e.getMonth(t)]),l.createElement("div",{className:"".concat(I,"-date-content")},f&&f(t)))}),[d,f]);return l.createElement(tZe,{componentName:"Calendar",defaultLocale:function(){var e=i.locale,t=RXe(RXe({},JJe),e);return t.lang=RXe(RXe({},t.lang),(e||{}).lang),t}},(function(t){var n;return l.createElement("div",{className:F()(I,(n={},nx(n,"".concat(I,"-full"),w),nx(n,"".concat(I,"-mini"),!w),nx(n,"".concat(I,"-rtl"),"rtl"===O),n),a),style:u},h?h({value:R,type:D,onChange:z,onTypeChange:V}):l.createElement(_4e,{prefixCls:I,value:R,generateConfig:e,mode:D,fullscreen:w,locale:t.lang,validRange:y,onChange:z,onModeChange:V}),l.createElement(K0,{value:R,prefixCls:E,locale:t.lang,generateConfig:e,dateRender:H,monthCellRender:function(e){return W(e,t.lang)},onSelect:z,mode:N,picker:N,disabledDate:L,hideHeader:!0}))}))}}(C4e),P4e=Object(l.forwardRef)((function(e,t){return React.createElement(I4e,O4e(O4e({locale:E4e.DatePicker},e),{},{ref:t}))})),M4e=["className","overlayClassName"];function R4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A4e={};var j4e=u.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,i=EWe(e,M4e);return!0===A4e.disable?i.children:u.a.createElement(x.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:F()("lt-tooltip",n),overlayClassName:F()("lt-tooltip-container",r),ref:t},i))}));SG(j4e,x.a),j4e.config=function(e){void 0!==e.disable&&(A4e.disable=e.disable)};var D4e=["className"];function T4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F4e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N4e=function(e){var t=e.className,n=EWe(e,D4e);return React.createElement(j4e,{title:wx("已开启创建者锁定，非创建者不可编辑")},React.createElement(X$e,F4e(F4e({className:F()("lt-lock",t)},n),{},{type:"Lock"})))},L4e=["className"];function B4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V4e=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,L4e);return u.a.createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,className:F()("lt-button-ghost",n)},r),e.children)})),z4e=u.a.forwardRef((function(e,t){var n=jF(Object(l.useState)(!1),2),r=n[0],i=n[1],o=e.className,a=e.list,c=e.trigger,s=e.placement,d=e.overlayClassName,f=e.children,h=e.onSelect;return u.a.createElement(H$e,{className:o,overlayClassName:d||"lakex-table-ui-popover-select-overlay",ref:t,visible:r,onVisibleChange:function(e){i(e)},placement:s||"bottomLeft",trigger:c||["click"],content:u.a.createElement(u.a.Fragment,null,a.map((function(e){return u.a.createElement("div",{onClick:function(){h(e.key),i(!1)},className:"lakex-table-ui-popover-select-item"},e.value)})))},u.a.createElement("div",{className:"lakex-table-ui-popover-select",onClick:function(){return i(!0)}},f))})),H4e=["className","overlayClassName"];function W4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U4e=u.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,i=EWe(e,H4e);return u.a.createElement(k.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:F()(n,"lt-dropdown-trigger"),overlayClassName:F()(r,"lt-dropdown"),ref:t},i))}));SG(U4e,k.a);var G4e=["className","overlayClassName","overlay","children"];function Y4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $4e=u.a.forwardRef((function(e,t){var n=e.className,r=e.overlayClassName,i=e.overlay,o=e.children,a=EWe(e,G4e),l=i?i.props:{};return u.a.createElement(k.a.Button,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:F()(n,"lt-dropdown-trigger"),overlay:u.a.cloneElement(i,{className:F()(l.className,r,"lt-dropdown-menu")}),ref:t},a),o)}));function q4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K4e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}SG($4e,k.a.Button);U4e.Selector=function(e){var t=e.className,n=e.overlayClassName,r=e.currentValue,i=e.menus,o=e.disableMenus,a=void 0===o?[]:o,l=e.disableTip,c=e.handleChange,s=e.triggerPrefix,d=i.find((function(e){return e.value===r}));return u.a.createElement(U4e,K4e(K4e({},e),{},{trigger:["click"],className:F()("lt-dropdown-selector",t),overlayClassName:F()("lt-dropdown-selector-menu",n),overlay:u.a.createElement(L$e,{selectedKeys:[r]},i.map((function(e){var t=a.some((function(t){return t.value===e.value})),n=u.a.createElement("span",{className:"lt-dropdown-selector-option"},u.a.createElement("span",{className:"lt-dropdown-selector-option-name"},e.name),e.value===r&&u.a.createElement("span",{className:"lt-dropdown-selector-option-checked"},u.a.createElement(uYe,null)));return u.a.createElement(L$e.Item,{key:e.value,disabled:t,onClick:function(){c(e.value)}},t&&l?u.a.createElement(j4e,{title:l,placement:"right"},n):n)})),e.externalActions&&u.a.createElement(L$e.Divider,null),e.externalActions&&e.externalActions())}),u.a.createElement("span",{className:"lt-dropdown-selector-trigger"},u.a.createElement("span",null,s),u.a.createElement("span",null,d?d.name:wx("请选择")),u.a.createElement("span",{className:"lt-dropdown-selector-trigger-icon"},u.a.createElement(wYe,null))))},U4e.Button=$4e;var X4e=["className"],J4e=["className"];function Z4e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q4e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z4e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z4e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var e8e=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,X4e),i=F()("lt-form",n);return u.a.createElement(C.a,Q4e({className:i,ref:t},r))}));SG(e8e,C.a),e8e.Item=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,J4e),i=F()("lt-form-item",n);return u.a.createElement(C.a.Item,Q4e(Q4e({className:i,ref:t},r),{},{colon:!1}))}));var t8e=["className"];function n8e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var r8e=u.a.forwardRef((function(e,t){var n=e.className,r=EWe(e,t8e);return u.a.createElement(S.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n8e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n8e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,className:F()("lt-modal",n),autoComplete:"false"},r))}));SG(r8e,S.a);var i8e=.05;function o8e(e,t,n){return t=DC(t),jC(e,a8e()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function a8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a8e=function(){return!!e})()}var l8e=function(e){function t(e){var n;return rx(this,t),(n=o8e(this,t,[e])).state={prevStatus:"default",nextStatus:"default",zoomInStatus:"default",zoomOutStatus:"default",originSizeStatus:"default",bestSizeStatus:"default"},n}return NC(t,e),ox(t,[{key:"afterZoom",value:function(){var e,t=this.props.imageBrowser,n=t.getCurrentZoomLevel(),r=t.getInitialZoomLevel();n===r&&(e="activated"),1===r&&(e="disable"),this.setState({zoomOutStatus:n===i8e?"disable":"default",zoomInStatus:5===n?"disable":"default",originSizeStatus:1===n?"activated":"default",bestSizeStatus:e})}},{key:"afterChange",value:function(){var e=this.props.imageBrowser.getCount();this.setState({nextStatus:1===e?"disable":"default",prevStatus:1===e?"disable":"default"})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.imageBrowser;t.on("afterzoom",(function(){e.afterZoom()})),t.on("afterchange",(function(){e.afterChange()})),t.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.setState({tooltipContainer:this.tooltipContainer})}},{key:"renderBtn",value:function(e,t,n,r){var i=this.state.tooltipContainer;return i?u.a.createElement(j4e,{title:t,getPopupContainer:function(){return i},mouseEnterDelay:1},u.a.createElement("span",{className:"lake-pswp-".concat(e," btn ").concat(n),onClick:r})):""}},{key:"render",value:function(){var e=this,t=this.props,n=t.imageBrowser,r=t.shouldShowNavigation,i=t.shouldShowDownload,o=t.shouldShowRemove,a=this.state,l=a.prevStatus,c=a.nextStatus,s=a.zoomInStatus,d=a.zoomOutStatus,f=a.originSizeStatus,h=a.bestSizeStatus;return u.a.createElement("div",{className:"lake-pswp-tool-bar"},u.a.createElement("div",{ref:function(t){e.tooltipContainer=t}}),u.a.createElement("div",{className:"pswp-toolbar-content"},r&&u.a.createElement(u.a.Fragment,null,this.renderBtn("arrow-left",wx("上一张"),l,(function(){"disable"!==l&&n.prev()})),u.a.createElement("span",{className:"lake-pswp-counter"}),this.renderBtn("arrow-right",wx("下一张"),c,(function(){"disable"!==c&&n.next()})),u.a.createElement("span",{className:"separation"})),this.renderBtn("zoom-out",wx("缩小"),d,(function(){"disable"!==d&&n.zoomOut()})),this.renderBtn("zoom-in",wx("放大"),s,(function(){"disable"!==s&&n.zoomIn()})),this.renderBtn("origin-size",wx("实际尺寸"),f,(function(){"disable"!==f&&n.zoomToOriginSize()})),this.renderBtn("best-size",wx("适应屏幕"),h,(function(){"disable"!==h&&n.zoomToBestSize()})),i&&this.renderBtn("download",wx("下载图片"),null,(function(){n.download()})),o&&this.renderBtn("remove",wx("删除图片"),null,(function(){n.remove()}))))}}])}(u.a.Component);function u8e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c8e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u8e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u8e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s8e(e,t,n){return t=DC(t),jC(e,d8e()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function d8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d8e=function(){return!!e})()}function f8e(e){return["http:","https:","data:","blob:","/"].some((function(t){return e.startsWith(t)}))?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}var h8e=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rx(this,t),e=s8e(this,t);var r=n.pswpOptions||{};return e.options=c8e(c8e(c8e({shouldToggleOnHover:!1,shouldShowNavigation:!0,shouldShowDownload:!1,shouldShowRemove:!1,closable:!0,container:document.body},globalThis.__LakeTableImageBrowser_options),n),{},{pswpOptions:c8e({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,dragging:yO.isMobile,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!0,bgOpacity:.8,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:yO.isMobile,tapToClose:!0,barsSize:{top:44,bottom:80}},r)}),e.options.closable||(e.options.pswpOptions.escKey=!1,e.options.pswpOptions.closeElClasses=[]),e.images=[],e.pswpDestroy=!0,e.timeouts={},e._initRoot(),e}return NC(t,e),ox(t,[{key:"_initRoot",value:function(){var e=this,t=this.options.closable?'<button type="button" class="pswp__button lake-pswp-button-close" title="Close (Esc)"></button>':"",n=document.createElement("div");n.innerHTML='\n    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="pswp__bg"></div>\n        <div class="pswp__scroll-wrap">\n            <div class="pswp__container">\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n            </div>\n            <div class="pswp__ui pswp__ui--hidden">\n                '.concat(t,'\n                <div class="lake-pswp-custom-top-bar"></div>\n            </div>\n        </div>\n    </div>\n    '),this.options.container?this.options.container.appendChild(n):document.body.appendChild(n),this.root=n.children[0],yO.isMobile?this.root.classList.add("lake-pswp-mobile"):this.root.classList.add("lake-pswp-pc");var r=this.root.querySelector(".lake-pswp-custom-top-bar"),i=this.root.querySelector(".lake-pswp-button-close");this.toolbarContainer=r,this.closeBtnContainer=i,s.a.render(u.a.createElement(l8e,{imageBrowser:this,shouldShowNavigation:this.options.shouldShowNavigation,shouldShowDownload:this.options.shouldShowDownload,shouldShowRemove:this.options.shouldShowRemove}),r,(function(){yO.isMobile||(e.bindKeyboardEvnet(),e.bindClickEvent(),e.options.shouldToggleOnHover&&e.hoverControllerFadeInAndOut())}))}},{key:"hoverControllerFadeInAndOut",value:function(){var e=this,t=this.toolbarContainer,n=this.closeBtnContainer;t.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),t.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")}))}},{key:"removeFadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),n[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this,t=this.root,n=this.closeBtnContainer;t.addEventListener("click",(function(t){var n=t.target;n.classList.contains("pswp__img")&&setTimeout((function(){e.currentZoom=null,e.afterZoom()}),366),(n.classList.contains("pswp__bg")||n.classList.contains("lake-pswp-tool-bar"))&&e.close()})),n.addEventListener("click",(function(){e.close()}))}},{key:"prev",value:function(){this.pswp.prev()}},{key:"next",value:function(){this.pswp.next()}},{key:"renderCounter",value:function(){var e=this.toolbarContainer,t=this.pswp;e&&(e.querySelector(".lake-pswp-counter").innerHTML="".concat(t.getCurrentIndex()+1," / ").concat(t.items.length))}},{key:"getCurrentZoomLevel",value:function(){return this.currentZoom&&Number(this.currentZoom.toFixed(2))||this.pswp&&Number(this.pswp.getZoomLevel().toFixed(2))}},{key:"zoomTo",value:function(e){var t=this.pswp;t.zoomTo(e,{x:t.viewportSize.x/2,y:t.viewportSize.y/2},100),this.currentZoom=e,this.afterZoom()}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=1.2*e;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(e!==i8e){var t=e/1.2;t<i8e&&(t=i8e),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){var e=this;this.root.addEventListener("keydown",(function(t){(t.metaKey||t.ctrlKey)&&187===t.keyCode&&(t.preventDefault(),e.zoomIn()),(t.metaKey||t.ctrlKey)&&189===t.keyCode&&(t.preventDefault(),e.zoomOut())}))}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();this.zoomTo(e)}},{key:"getInitialZoomLevel",value:function(){return Number(this.pswp.currItem.initialZoomLevel.toFixed(2))}},{key:"afterZoom",value:function(){this.emit("afterzoom")}},{key:"getCount",value:function(){return this.pswp.items.length}},{key:"afterChange",value:function(){var e=this;if(!yO.isMobile){var t=this.getInitialZoomLevel();this.renderCounter(),this.currentZoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.currentZoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e=this,t=this.pswp;t.listen("afterChange",(function(){e.afterChange()})),t.listen("destroy",(function(){e.pswpDestroy=!0})),t.listen("resize",(function(){e.emit("resize")})),t.listen("imageLoadComplete",(function(){e.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){var e=this.root,t=0===this.options.pswpOptions.bgOpacity?"0 2px 14px rgba(0, 0, 0, 0.25)":"0 0 10px rgba(0, 0, 0, 0.5)";e.querySelectorAll(".pswp__img").forEach((function(e){e.complete?(e.style.background="white",e.style["box-shadow"]=t):e.onload=function(){e.style.background="white",e.style["box-shadow"]=t}}))}},{key:"open",value:function(e,n){var r=this;if(!0===this.pswpDestroy){e.forEach((function(e){return e.src=f8e(e.src),e.msrc=f8e(e.msrc),e}));var i=this.root,o=this.options.pswpOptions,a=new HU(i,xWe,e.map((function(e){return c8e({},e)})),c8e({index:n},o)),l=a.lazyLoadItem;a.lazyLoadItem=function(t){if(!e[(e.length+t)%e.length].layoutSelf)return l.call(a,t)},a.listen("gettingData",(function(n,i){isNaN(i.w)||isNaN(i.h)?(i.w=0,i.h=0,t.loadImageSize(i,a,r)):e[n].layoutSelf&&t.loadImageSize(i,a,r,e[n].layoutSelf)})),a.items=e.map((function(e){return e.src=f8e(e.src),e.msrc=f8e(e.msrc),e})),a.init(),this.pswp=a,this.pswpDestroy=!1,this.options.shouldToggleOnHover&&(yO.isMobile||(this.toolbarContainer.removeClass("pswp-fade-out"),this.fadeOut(this.toolbarContainer,"toolbarFadeInAndOut"),this.closeBtnContainer.removeClass("pswp-fade-out"),this.fadeOut(this.closeBtnContainer,"closeFadeInAndOut")),i.removeClass("pswp-fade-in"),i.addClass("pswp-fade-in")),this.afterChange(),this.bindPswpEvent()}}},{key:"download",value:function(){window.open(this.pswp.currItem.src,"_blank")}},{key:"remove",value:function(){this.emit("remove"),this.destroy()}},{key:"close",value:function(){this.options.closable&&this.pswp&&this.pswp.close()}},{key:"destroy",value:function(){this.root&&(this.close(),this.root.remove(),this.options=null)}}],[{key:"loadImageSize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.cleanSlide(e),e.loading=!0,r)e.img=r(),e.img.className="pswp__img",setTimeout((function(){var t;e.loading=!1,e.loaded=!0,null==(t=e.loadComplete)||t.call(e,e)}));else{var i=document.createElement("img");i.className="pswp__img",e.img=i;var o=function(){if(n.pswpDestroy)return i=null,void(e.img=null);0!==e.w&&0!==e.h||(e.w=i.width,e.h=i.height),e.needUpdate=!0,t.updateSize(),e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,i.onload=i.onerror=null,i=null};i.onload=o,i.onerror=function(){e.loadError=!0,o()},i.src=e.src}}}])}(q5);var p8e=Object.defineProperty,v8e=Object.getOwnPropertyDescriptor,g8e=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};function m8e(e,t){var n=(globalThis.__LakeTableImageBrowser||(globalThis.__LakeTableImageBrowser=new h8e),globalThis.__LakeTableImageBrowser),r=Array.isArray(e)?e.map((function(e){return g8e(e)})):[e].map((function(e){return g8e(e)}));n.open(r,t||0)}var y8e=function(){return ox((function e(){rx(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.list,r=t.index||0;n||(r=0,n=[{src:e,width:t.width,height:t.height}]),m8e(n,r)}}])}();y8e=function(e,t,n,r){for(var i,o=r>1?void 0:r?v8e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&p8e(t,n,o),o}([Gf()],y8e);var b8e=Object.defineProperty,w8e=Object.getOwnPropertyDescriptor,_8e=function(){return ox((function e(){rx(this,e),this.openerName="user-opener",this.apps=["user"]}),[{key:"open",value:function(e){e.login&&(window.__mockOpen||window.open)("/"+e.login,"_blank")}}])}();function x8e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k8e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function k8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}_8e=function(e,t,n,r){for(var i,o=r>1?void 0:r?w8e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&b8e(t,n,o),o}([Gf()],_8e);var C8e=Object.defineProperty,S8e=Object.getOwnPropertyDescriptor,O8e=function(e,t,n,r){for(var i,o=r>1?void 0:r?S8e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&C8e(t,n,o),o},E8e=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.registry.registerApp($He),this.registry.registerApp(qHe),this.registry.registerApp($He),this.registry.registerApp(KHe),this.registry.registerApp(JHe),this.registry.registerApp(ZHe),this.registry.registerApp(QHe),this.registry.registerApp(eWe),this.registry.registerOpener(this.filePreviewOpener),this.registry.registerOpener(this.imageViewerOpener),this.registry.registerOpener(this.hrefOpener),this.registry.registerOpener(this.safeRedirectOpener),this.registry.registerOpener(this.userOpener),this.registry.registerOpener(this.windowOpener),this.registry.registerOpener(this.windowNewOpener),this.registry.init();var e=this.openerHash.getHashes();if(e){var t,n=x8e(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name&&r.url&&this.openerService.open(r.name,r.url)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"initConfiguration",value:function(){this._configurationService.registerConfiguration({id:"opener",type:"object",title:"打开器",properties:{useHash:{type:"boolean",description:"opener 是否同步更新 url hash"}}}),this._configurationService.registerDefaultValue({"opener.useHash":!0})}}])}();O8e([Yf(RHe)],E8e.prototype,"registry",2),O8e([Yf(HHe)],E8e.prototype,"openerHash",2),O8e([Yf(YHe)],E8e.prototype,"openerService",2),O8e([Yf(RC)],E8e.prototype,"_configurationService",2),O8e([Yf(yWe)],E8e.prototype,"filePreviewOpener",2),O8e([Yf(y8e)],E8e.prototype,"imageViewerOpener",2),O8e([Yf(vHe)],E8e.prototype,"hrefOpener",2),O8e([Yf(bHe)],E8e.prototype,"safeRedirectOpener",2),O8e([Yf(_8e)],E8e.prototype,"userOpener",2),O8e([Yf(SHe)],E8e.prototype,"windowOpener",2),O8e([Yf(xHe)],E8e.prototype,"windowNewOpener",2),E8e=O8e([Gf()],E8e);var I8e=ch().contribution(fHe).register(NHe).register(RHe).register(YHe).register(HHe).register(E8e).register(yWe).register(y8e).register(SHe).register(xHe).register(vHe).register(bHe).register(_8e);function P8e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M8e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M8e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function M8e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R8e(e,t,n){return t=DC(t),jC(e,A8e()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function A8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A8e=function(){return!!e})()}var j8e=function(e){function t(e){var n;return rx(this,t),(n=R8e(this,t))._activeViewId="",n._options=e,n.container=e.container,n._kernelService=e.kernelService,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:YS.render,action:"renderInited",data:null}),n}return NC(t,e),ox(t,[{key:"renderService",get:function(){return this._renderService}},{key:"init",value:function(){this._listenEvent(),this._renderService.init({onError:this._options.onError})}},{key:"destroy",value:function(){this._renderService.destroy(),this.unregisterPlugins(this.container)}},{key:"render",value:function(e){if(!e)throw Error("Can't get active view data.");"easy"!==this._options.renderMode&&this._renderService.render(e,this.container),this._renderService.emitViewChange({viewId:e.get("uuid"),viewType:e.get("type")})}},{key:"_logger",get:function(){return this.container.get($S)}},{key:"_listenEvent",value:function(){var e=this;this._kernelService.onDataLoaded((function(t){var n=e.container.get(RC),r=n.getValue("render.noRecord"),i=n.getValue("render.asyncRecord");if("loadedRecords"===t||r||i){var o=e._readService.getActiveView();o&&(e._activeViewId=o.get("uuid"),e.render(o))}})),this._kernelService.onDataChanged((function(){var t=e.container.get(RC),n=t.getValue("render.noRecord"),r=t.getValue("render.asyncRecord");if(n||r||!(e._lifeService.status<cx.RecordReady)){var i=e._readService.getActiveView();i&&e._activeViewId!==i.get("uuid")&&(e._activeViewId=i.get("uuid"),e.render(i))}})),this._lifeService.when(cx.Rendered,(function(){e.container.get(E8e).init()}))}},{key:"_loadCoreServices",value:function(){this._renderService=this.container.get(Xze),this._lifeService=this.container.get(sx),this._readService=this.container.get(XA)}},{key:"_registerContribs",value:function(e){if(e){var t,n=P8e(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(iO);function D8e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T8e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D8e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D8e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F8e(e,t,n){return t=DC(t),jC(e,N8e()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function N8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N8e=function(){return!!e})()}var L8e=function(e){function t(e){var n;return rx(this,t),(n=F8e(this,t,[e])).state={key:+new Date},n._props=e.props,n._ref=u.a.createRef(),n.DeferRenderComponent=NG(e.component),n}return NC(t,e),ox(t,[{key:"componentDidMount",value:function(){}},{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=T8e(T8e({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.container,r=this._props.deferMode,i=r===Ize.DISABLE?t:this.DeferRenderComponent;return u.a.createElement(pqe,{onError:this.props.onError},u.a.createElement(JG,{mode:r===Ize.DISABLE?Ize.ASYNC_CONCURRENT:r,batchSize:5},u.a.createElement(CWe,{value:{container:n,onError:this.props.onError},key:this.state.key},u.a.createElement(i,T8e(T8e({},this._props),{},{ref:this._ref})))))}}])}(l.Component);function B8e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V8e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B8e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B8e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z8e=function(){return ox((function e(t){var n=t.onError;rx(this,e),this._onError=n}),[{key:"pureRender",value:function(e){var t=this.Component;return u.a.createElement(t,V8e({},e))}},{key:"render",value:function(e,t,n){var r=null;if(!this.Component)throw Error("This view didn't provide view component.");return s.a.render(u.a.createElement(L8e,{props:t,component:this.Component,container:n,ref:function(e){r=e},onError:this._onError}),e),{getRoot:function(){return e},getViewNode:function(){return r},getReactRef:function(){return null==r?void 0:r.getRef()},rerender:function(e){r&&r.update(V8e({},e))},destroy:function(){var t;s.a.unmountComponentAtNode(e),r=null,null==(t=e.parentNode)||t.removeChild(e)},destroyAsync:function(){var t=this;e.style.display="none",_O((function(){t.destroy()}))}}}},{key:"unmount",value:function(e){}}])}();function H8e(e,t,n){return t=DC(t),jC(e,W8e()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function W8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W8e=function(){return!!e})()}var U8e=Object.defineProperty,G8e=Object.getOwnPropertyDescriptor,Y8e=function(e,t,n,r){for(var i,o=r>1?void 0:r?G8e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&U8e(t,n,o),o},$8e=function(e){function t(){var e;return rx(this,t),(e=H8e(this,t,arguments))._onStatusChange=e._register(new dS),e.onStatusChange=e._onStatusChange.event,e.isActive=!1,e}return NC(t,e),ox(t,[{key:"isAutoActive",get:function(){return this._configurationService.getValue("render.autoActive")}},{key:"active",value:function(){this.isActive||(this.isActive=!0,this._onStatusChange.emit({status:Rze.ACTIVE,isActive:this.isActive}))}},{key:"inactive",value:function(){this.isActive&&(this.isActive=!1,this._onStatusChange.emit({status:Rze.INACTIVE,isActive:this.isActive}))}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Y8e([Yf(RC)],$8e.prototype,"_configurationService",2),Y8e([Df()],$8e.prototype,"destroy",1),$8e=Y8e([Gf({token:Aze})],$8e);var q8e=ch().contribution(Oze).contribution(Sze).contribution(Mze).register(Xze).register(eHe).register(iHe).register(Uze).register(uHe).register(Vze).register(dHe).register($8e);function K8e(e,t,n){return t=DC(t),jC(e,X8e()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function X8e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X8e=function(){return!!e})()}var J8e=function(e){function t(e){var n;return rx(this,t),(n=K8e(this,t,[e])).handleViewChange=function(e){n.setState({viewId:e.viewId,viewType:e.viewType})},n._options=e,n._renderRef=u.a.createRef(),n._renderService=e.renderService,n._container=e.container,n.state={viewId:null,viewType:null},n}return NC(t,e),ox(t,[{key:"componentDidMount",value:function(){this._renderService.initDom(this._options.$root,this._renderRef.current.parentNode),this._renderService.onViewChange(this.handleViewChange)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.viewId!==t.viewId}},{key:"render",value:function(){var e,t=this._renderService._viewNodes.get(this.state.viewType),n=t?t.pureRender({viewId:this.state.viewId}):null;return u.a.createElement(Y$e,{value:{iconMap:null==(e=this._container.get(rqe))?void 0:e.getIconMap()}},u.a.createElement("div",{className:"lakex-table-view-container","data-view-id":this.state.viewId,ref:this._renderRef},n))}}])}(u.a.Component);Rf.defineToken("WorkbenchContextToken");var Z8e=Rf.defineToken("WorkbenchPluginContribution"),Q8e=Object.defineProperty,e9e=Object.getOwnPropertyDescriptor,t9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?e9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Q8e(t,n,o),o},n9e=function(){return ox((function e(){rx(this,e),this._plugins=[]}),[{key:"init",value:function(){this._plugins=this._workbenchPluginProvider.getContributions(),this._initPlugins()}},{key:"destroy",value:function(){this._plugins.forEach((function(e){var t;return null==(t=e.destroy)?void 0:t.call(e)}))}},{key:"_initPlugins",value:function(){this._plugins.forEach((function(e){e._inited||(e.init(),e._inited=!0)}))}}])}();t9e([gh(Z8e)],n9e.prototype,"_workbenchPluginProvider",2),n9e=t9e([Gf()],n9e);var r9e=Rf.defineToken("ToolbarServiceToken"),i9e=Rf.defineToken("ToolbarContribution"),o9e=function(e){return!!e.RenderComponent},a9e=function(e){return!!e.tooltip},l9e=function(e){return e.NORMAL="normal",e.LITE="lite",e}(l9e||{});function u9e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c9e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c9e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function c9e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s9e=Object.defineProperty,d9e=Object.getOwnPropertyDescriptor,f9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?d9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&s9e(t,n,o),o},h9e=function(){return ox((function e(){rx(this,e),this._items=new Map,this._customItems=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=u9e(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerToolbar)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerRender",value:function(e){this._toolbarRender=e}},{key:"registerItem",value:function(e){if(o9e(e))this._registerCustomItem(e);else{if(!a9e(e))throw new Error("An invalid toolbar item!");this._registerNormalItem(e)}return e}},{key:"getToolbarItem",value:function(e){return this._items.get(e)}},{key:"getCustomItem",value:function(e){return this._customItems.get(e)}},{key:"getRender",value:function(){return this._toolbarRender}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.id,n=this.getToolbarItem(t),r=this.getCustomItem(t);n&&this._items.delete(t),r&&this._customItems.delete(t)}},{key:"hasToolbars",get:function(){return this._customItems.size>0||this._items.size>0}},{key:"_registerNormalItem",value:function(e){var t=e.id;if(this._items.has(t))throw new Error("A normal toolbar item is already registered with the '".concat(t,"'"));this._items.set(t,e)}},{key:"_registerCustomItem",value:function(e){var t=e.id;if(this._customItems.has(t))throw new Error("A custom toolbar item is already registered with the '".concat(t,"'"));this._customItems.set(t,e)}},{key:"destroy",value:function(){this._items.clear(),this._customItems.clear(),this._toolbarRender=null}}])}();f9e([gh(i9e)],h9e.prototype,"toolbarPluginProvider",2),f9e([Df()],h9e.prototype,"destroy",1),h9e=f9e([Gf()],h9e);var p9e=function(){},v9e=function(e){var t=e.id,n=e.isActive,r=e.isDisable,i=e.isShowIcon,o=e.isShowTitle,a=e.iconType,l=e.iconSize,c=e.titleFontSize,s=e.tooltipStr,d=e.onCommand;return u.a.createElement("button",{className:F()({"lakex-workbench-toolbar-button":!0,"lakex-workbench-toolbar-button-active":n,"lakex-workbench-toolbar-button-disable":r}),id:t,onClick:function(e){r||d(e)},tabIndex:-1},i&&a&&u.a.createElement(X$e,{type:a,size:l}),o&&u.a.createElement("span",{className:"toolbar-button-title",style:{fontSize:c}},s))},g9e=function(e){var t=e.onCommand,n=void 0===t?p9e:t,r=e.id,i=e.tooltip,o=e.showTooltip,a=void 0!==o&&o,l=e.disable,c=e.active,s=e.showIcon,d=void 0===s||s,f=e.showTitle,h=void 0===f||f,p=e.icon,v=e.iconSize,g=void 0===v?16:v,m=e.titleFontSize,y=void 0===m?14:m,b=e.visible,w=void 0!==b&&b,_=Ex(l)?l():l,x=Ex(c)?c():c,k=Ex(d)?d():d,C=Ex(p)?p():p,S=Ex(h)?h():h,O=Ex(i)?i():i;return(Ex(w)?w():w)?a?u.a.createElement(j4e,{title:O},u.a.createElement("div",null,u.a.createElement(v9e,{id:r,isDisable:_,isActive:x,isShowIcon:k,isShowTitle:S,iconSize:g,iconType:C,tooltipStr:O,titleFontSize:y,onCommand:n}))):u.a.createElement(v9e,{id:r,isDisable:_,isActive:x,isShowIcon:k,isShowTitle:S,iconSize:g,iconType:C,tooltipStr:O,titleFontSize:y,onCommand:n}):null},m9e=function(){return u.a.createElement("div",{className:"lakex-table-workbench-toolbar-btn lake-workbench-toolbar-divider"})},y9e=["RenderComponent"],b9e=["visible","onClick"];function w9e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _9e(e,t,n){return t=DC(t),jC(e,x9e()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function x9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x9e=function(){return!!e})()}var k9e=Object.defineProperty,C9e=Object.getOwnPropertyDescriptor,S9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?C9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&k9e(t,n,o),o},O9e=function(e){function t(){var e;return rx(this,t),(e=_9e(this,t,arguments))._$ref=u.a.createRef(),e._toolbarRef=u.a.createRef(),e._onChange=e._register(new dS),e.onChange=e._onChange.event,e.Buttons=function(t){var n=t.buttons,r=t.mode;return Array.isArray(n)?u.a.createElement(u.a.Fragment,null,n.map((function(t,n){return u.a.createElement(u.a.Fragment,{key:n},e._renderButtonItem(t,r))}))):u.a.createElement(u.a.Fragment,null)},e}return NC(t,e),ox(t,[{key:"init",value:function(){this._toolbarRegistry.init()}},{key:"getDom",value:function(){return this._$ref.current}},{key:"render",value:function(){var e=this._toolbarRegistry.getRender();return e?u.a.createElement("div",{className:"lakex-table-workbench-toolbar-container",style:{width:"100%"},ref:this._$ref},u.a.createElement(e,{ref:this._toolbarRef})):null}},{key:"rerender",value:function(){this._toolbarRef.current&&this._toolbarRef.current.refresh()}},{key:"filterVisibleButtons",value:function(e){var t=this;return e?e.filter((function(e){if("|"===e)return!0;var n=t._toolbarRegistry.getCustomItem(e);if(n)return!!(null==n?void 0:n.RenderComponent);var r=t._toolbarRegistry.getToolbarItem(e);return!!r&&(!!r.visible&&(Ex(r.visible)?r.visible():r.visible))})).filter((function(t,n){if("|"===t){if(!e[n-1])return!1;if(!e[n+1])return!1}return!0})):[]}},{key:"_renderButtonItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l9e.NORMAL,n=this._toolbarRegistry.getCustomItem(e);if(n){var r=n.RenderComponent,i=EWe(n,y9e);return u.a.createElement(r,{onCommand:function(e){var t;null==(t=i.onClick)||t.call(i,{target:e.currentTarget})}})}var o=this._toolbarRegistry.getToolbarItem(e);if(o){var a=o.visible,l=o.onClick,c=EWe(o,b9e);return t===l9e.LITE&&(Mc(c.showTitle)&&(c.showTitle=!1),Mc(c.showTooltip)&&(c.showTooltip=!0)),u.a.createElement(g9e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w9e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w9e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({visible:a,onCommand:function(e){null==l||l({target:e.currentTarget})}},c))}return"|"===e&&this._toolbarRegistry.hasToolbars?u.a.createElement(m9e,null):null}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([]),this._$ref.current=null,this._toolbarRef.current=null}}])}(HC);S9e([Yf(h9e)],O9e.prototype,"_toolbarRegistry",2),S9e([Df()],O9e.prototype,"destroy",1),O9e=S9e([Gf({token:r9e})],O9e);var E9e=Object.defineProperty,I9e=Object.getOwnPropertyDescriptor,P9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?I9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&E9e(t,n,o),o},M9e=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this._toolbarRegistry.init()}}])}();P9e([Yf(h9e)],M9e.prototype,"_toolbarRegistry",2),M9e=P9e([Gf({contrib:[Z8e]})],M9e);var R9e=ch().contribution(i9e).register(M9e).register(O9e).register(h9e);function A9e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j9e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A9e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A9e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D9e=Object.defineProperty,T9e=Object.getOwnPropertyDescriptor,F9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?T9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&D9e(t,n,o),o},N9e=1004,L9e=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.zIndex=j9e(j9e({},this._renderZIndexService.zIndex),{},{mask:N9e,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();function B9e(e){return e&&!!e.placement&&!!e.origin}F9e([Yf(uHe)],L9e.prototype,"_renderZIndexService",2),F9e([jf()],L9e.prototype,"init",1),L9e=F9e([Gf()],L9e);var V9e=function(e){return e.MODAL="modal",e.DRAWER="drawer",e.CUSTOM="custom",e}(V9e||{}),z9e=Rf.defineToken("ModalServiceToken"),H9e=Rf.defineToken("ModalContribution");function W9e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return U9e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U9e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function U9e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G9e=Object.defineProperty,Y9e=Object.getOwnPropertyDescriptor,$9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?Y9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&G9e(t,n,o),o},q9e=function(){return ox((function e(){rx(this,e),this._modals=new Map,this._hasInit=!1}),[{key:"init",value:function(){var e;if(!this._hasInit){this._hasInit=!0;var t,n=W9e(this._modalPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerModal)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.id;this._modals.has(t)&&this._modals.delete(t),this._modals.set(t,e)}},{key:"getModalItem",value:function(e){return this._modals.get(e)}},{key:"getModalItems",value:function(){return Q_(this._modals.values())}}])}();function K9e(e,t,n){return t=DC(t),jC(e,X9e()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function X9e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X9e=function(){return!!e})()}$9e([gh(H9e)],q9e.prototype,"_modalPluginProvider",2),q9e=$9e([Gf()],q9e);var J9e=Object.defineProperty,Z9e=Object.getOwnPropertyDescriptor,Q9e=function(e,t,n,r){for(var i,o=r>1?void 0:r?Z9e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&J9e(t,n,o),o},e7e=function(e){function t(){var e;return rx(this,t),(e=K9e(this,t,arguments))._$scrollContainer=null,e._hasScrollListener=!1,e._scrolledCount=0,e._onScrollEmitter=e._register(new dS),e._onScroll=e._onScrollEmitter.event,e._scrolledDistance=0,e._scrollHandler=function(t){e._getScrollDistance(t),e._scrolledDistance>10&&e._onScrollEmitter.emit()},e}return NC(t,e),ox(t,[{key:"attachScrollContainer",value:function(e){e&&(this._$scrollContainer=e)}},{key:"attachScrollListener",value:function(e,t){var n=this;this._hasScrollListener||this._addGlobalScrollListener();var r=this._onScroll((function(){e()}));return this._scrolledCount++,{destroy:function(){n._scrolledCount--,r.destroy(),n._scrolledCount<=0&&n._removeGlobalScrollListener()}}}},{key:"_getScrollDistance",value:function(e){var t=Math.abs(e.deltaX),n=Math.abs(e.deltaY);this._scrolledDistance=n||t}},{key:"_addGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.addEventListener("wheel",this._scrollHandler,{passive:!0})}},{key:"_removeGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.removeEventListener("wheel",this._scrollHandler)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function t7e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n7e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t7e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t7e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r7e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i7e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i7e(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function i7e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Q9e([Df()],e7e.prototype,"destroy",1),e7e=Q9e([Gf()],e7e);var o7e=function(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;var t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((function(e){var n=t.getPropertyValue(e);return"auto"===n||"scroll"===n||"overlay"===n}))};function a7e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(!e)return[];var n,r=r7e(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=document.querySelectorAll(i);if(o.length>0){var a,l=r7e(o);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=null==u?void 0:u.getBoundingClientRect().toJSON();t.push({dom:u,rect:c})}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}var l7e=function(e){var t=Object(l.useRef)(null),n=SWe(e7e),r=jF(Object(l.useState)((function(){return a7e(e.skipElements)})),2),i=r[0],o=r[1];P$e((function(){n.attachScrollContainer(t.current);var r=n.attachScrollListener((function(t){"block"===e.scrollStrategy?(null==t||t.preventDefault(),null==t||t.stopPropagation()):"close"===e.scrollStrategy&&e.onScrollAutoClose()}));return function(){r.destroy()}}),[]),P$e((function(){var t,n=[],r=rc((function(){var t=a7e(e.skipElements);o(t)}),200),a=e.skipElements||[];if("donut"===e.shape&&a.length>0){if(a){var l,u=r7e(a);try{for(u.s();!(l=u.n()).done;){var c=l.value,s=document.querySelectorAll(c);if(0!==s.length){var d,f=r7e(s);try{var h=function(){var e=d.value,t=new ResizeObserver(rc((function(t){var n=t[0];if(n.contentRect){var r=n.target.getBoundingClientRect().toJSON(),a=i.findIndex((function(t){return t.dom===e}));if(null==a)return;i[a]={dom:e,rect:r},o(i)}}),200));t.observe(e),n.push({resizer:t,dom:e})};for(f.s();!(d=f.n()).done;)h()}catch(e){f.e(e)}finally{f.f()}}}}catch(e){u.e(e)}finally{u.f()}}t=function(e){var t,n=[],r=r7e(e);try{var i=function(){var e=t.value,r=document.querySelector(e);if(!r)return 1;for(var i=r.parentElement;i;)o7e(i)&&(n.find((function(e){return e!==i}))||n.push(i)),i=i.parentElement};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n.push(document),n}(a);var p,v=r7e(t);try{for(v.s();!(p=v.n()).done;){p.value.addEventListener("scroll",r)}}catch(e){v.e(e)}finally{v.f()}}return function(){if(n.length>0)for(var e=0,i=n;e<i.length;e++){var o=i[e];o.resizer.unobserve(o.dom),o.resizer.disconnect()}if(t){var a,l=r7e(t);try{for(l.s();!(a=l.n()).done;){a.value.removeEventListener("scroll",r)}}catch(e){l.e(e)}finally{l.f()}}}}),[e.shape]);var a,c,s,d=function(t){e.maskClick&&e.maskClick(),t.preventDefault()},f=n7e({zIndex:e.zIndex,opacity:e.visible?1:0},e.style&&e.style);if(!e.enable)return null;if("donut"===e.shape&&i){var h=(a=i.map((function(e){return e.rect})),c=document.body.getBoundingClientRect(),s=[],a.forEach((function(e,t){if(0===t)e.top>0&&e.top>c.top&&s.push({top:0,left:e.left,width:e.width,height:e.top}),e.left>0&&e.left>c.left&&s.push({top:0,left:0,width:e.left,height:Math.max(c.bottom,c.height)}),e.right>0&&e.right<c.right&&s.push({top:0,left:e.left+e.width,width:c.right-e.right,height:Math.max(c.bottom,c.height)});else{var n=a[t-1].bottom;t>0&&e.top-n>3&&s.push({top:n,left:e.left,width:e.width,height:e.top-n})}t===a.length-1&&e.bottom>0&&e.bottom<c.bottom&&s.push({top:e.bottom,left:0,width:c.width,height:Math.max(c.bottom,c.height)-e.bottom})})),a[0].bottom<0&&s.push({top:0,left:0,width:c.width,height:c.height}),s);return u.a.createElement(u.a.Fragment,null,h.map((function(e,t){return u.a.createElement("div",{key:t,className:"lakex-workbench-modal-donut-mask",style:n7e(n7e({},f),e),onClick:d,onContextMenu:function(e){return e.preventDefault(),!1}})})))}return u.a.createElement("div",{ref:t,className:"lakex-workbench-modal-mask",style:f,onClick:d,onContextMenu:function(e){return e.preventDefault(),!1}})};function u7e(e){return Px(e)&&e.endsWith("%")}function c7e(e){return Px(e)&&e.startsWith("calc(")}function s7e(e){return u7e(e)||c7e(e)}function d7e(e){return!function(e){return _r(e)&&1===e.nodeType&&!$o(e)}(e)}function f7e(e,t){if(!e)return 0;if(c7e(e)){if((e=e.replace(/^(\s|calc\()+|(\s|\))+$/g,"")).includes("%")){var n=jF(e.split("%"),2),r=n[0],i=n[1];return Cze(parseInt(r,10)/100*t+i)}}else if(u7e(e)){var o=e.replace("%","");return parseInt(o,10)/100*t}return 0}function h7e(e){return u.a.createElement(p3,{maxWidth:e.maxWidth,minWidth:480,defaultSize:{width:e.width,height:"auto"},enable:{top:!1,left:!0,bottom:!1,right:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},handleStyles:{left:{zIndex:1010}},onResizeStart:function(t,n,r){var i;null==(i=e.onResizeStart)||i.call(e,t,n,r)},onResizeStop:function(t,n,r,i){var o;try{localStorage.setItem("lakex-table-modal-resize-width",String(r.offsetWidth))}catch(e){console.error(e)}null==(o=e.onResizeStop)||o.call(e,t,n,r,i)}},e.children)}function p7e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v7e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p7e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p7e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g7e=function(e){var t,n,r,i=e.id,o=SWe(z9e),a=qYe(),c=((null==o?void 0:o.visibleList)||[]).includes(i),s=jF(Object(l.useState)(!1),2),d=s[0],f=s[1],h=Object(l.useRef)(null),p=jF(S$e(),4),v=p[0],g=p[1],m=p[2],y=p[3],b=Object(l.useRef)(null),w=Object(l.useRef)(null);P$e((function(){var e=o.onChange((function(){var e=Date.now();w.current=e,a()}));return function(){e.destroy()}}),[]),k$e("esc",(function(t){o.isDisableEscClose(i)||(t.preventDefault(),o.close(e.id))})),Object(l.useLayoutEffect)((function(){h.current?c?g(h.current):m(h.current):m()}),[h,c]),P$e((function(){var e,t=o.onUpdatePosition((function(t){t.modalId===i&&(clearTimeout(e),e=_x((function(){var e,t=null==(e=h.current)?void 0:e.getBoundingClientRect();y(t||null)})))}));return function(){t.destroy(),clearTimeout(e)}}),[]);var _=Object(l.useMemo)((function(){if(o.getModalProps(e.id).mode!==V9e.DRAWER)return o.getPosition(e.id,v)||{left:0,top:0}}),[e.id,v,null==v?void 0:v.height,null==v?void 0:v.width,w.current]);if(!c)return null;var x=o.getModalProps(e.id),k={left:null!==(t=null==_?void 0:_.left)&&void 0!==t?t:"initial",top:null!==(n=null==_?void 0:_.top)&&void 0!==n?n:"initial"},C={},S=(null==(r=null==x?void 0:x.position)?void 0:r.placement)||"";if(B9e(x.position)&&"cover"===S){var O=d7e(x.position.origin)?x.position.origin:x.position.origin.getBoundingClientRect();k.width=null==O?void 0:O.width,k.height=null==O?void 0:O.height,C.width="100%",C.height="100%"}var E=function(){var t;null==(t=b.current)||t.onCloseByClickAwayOrScroll(),o.close(e.id)},I=e.RenderComponent,P=null!=x.hasMask?x.hasMask:e.showMask,M=u.a.createElement("div",{className:"lakex-workbench-modal-layout",style:v7e({zIndex:e.zIndex},x.mode===V9e.MODAL&&_&&k)},u.a.createElement("div",{className:"lakex-workbench-modal-content",ref:h,style:v7e({},C)},u.a.createElement(I,v7e(v7e({},x),{},{ref:b})))),R=o.maskSkipElements(i)||[];return u.a.createElement("div",{className:F()("lakex-workbench-modal-container",nx(nx(nx({hasAnimation:e.hasAnimation,hasMask:P},"lakex-workbench-modal-container-mode-".concat(x.mode),!0),"lakex-workbench-modal-container-placement-".concat(S),!0),"lakex-workbench-modal-container-resizing",d)),style:{zIndex:e.zIndex,visibility:_||x.mode!==V9e.MODAL?"visible":"hidden"}},u.a.createElement(l7e,{shape:R.length>0?"donut":"flat",skipElements:R,zIndex:e.maskZIndex,scrollStrategy:e.scrollStrategy,style:e.maskStyle,maskClick:E,onScrollAutoClose:E,enable:!o.isDisableClickAwayClose(i),visible:P}),x.mode===V9e.DRAWER?u.a.createElement(h7e,{width:o.getWidth(),onResizeStart:function(){f(!0)},onResizeStop:function(){var t;f(!1),null==(t=e.onResize)||t.call(e)}},M):M)},m7e=function(e){var t=e.initialState.message,n=void 0===t?"":t,r=SWe(z9e),i=jF(Object(l.useState)(!1),2),o=i[0],a=i[1];return P$e((function(){a(!0);var e=setTimeout((function(){r.close("tooltip")}),2e3);return function(){clearTimeout(e)}}),[n]),u.a.createElement("div",{className:F()("lakex-table-tooltip",{"lakex-table-tooltip-active":o,"lakex-table-tooltip-placement-top":!0})},u.a.createElement("div",{className:"lakex-table-tooltip-message"},n))},y7e=Rf.defineToken("ViewportServiceToken"),b7e=Object.defineProperty,w7e=Object.getOwnPropertyDescriptor,_7e=function(e,t,n,r){for(var i,o=r>1?void 0:r?w7e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&b7e(t,n,o),o},x7e=function(){return ox((function e(){rx(this,e)}),[{key:"getPosition",value:function(e,t){if(Pc(t)||Pc(t.width)||Pc(t.height))return null;var n,r=null;return!(n=e)||Ax(n.left)||Ax(n.top)?B9e(e)&&(r=this._calculateAutoPlacementPosition(e,t)):r=this._calculateAbsolutePosition(e,t),(null==r?void 0:r.top)&&Number(r.top)<0&&(r.top=0),(null==r?void 0:r.left)&&Number(r.left)<0&&(r.left=0),!r||Ic(r.left)||Ic(r.top)?(console.warn("modal size has conflicts with the placement in this origin and viewport"),null):r}},{key:"_calculateAbsolutePosition",value:function(e,t){var n={left:e.left,top:e.top},r=this._getBoundingBox(),i=r.width,o=r.height,a=(null==t?void 0:t.height)||0,l=(null==t?void 0:t.width)||0;if(s7e(e.left)){var u=f7e(e.left,i);n.left=u-Math.floor(l/2)}if(s7e(e.top)){var c=f7e(e.top,o);n.top=c-Math.floor(a/2)}return n}},{key:"_calculateAutoPlacementPosition",value:function(e,t){if(!t)return null;var n=d7e(e.origin)?e.origin:e.origin.getBoundingClientRect(),r=this._getBoundingBox(),i=(null==t?void 0:t.width)||0,o=(null==t?void 0:t.height)||0,a=e.placement,l=this.getRenderRangeBox(n,a,o,i);if(this._rectIsContain(l,r))return{left:l.left,top:l.top};var u={left:l.left,top:l.top},c=l.top+l.height>r.bottom,s=l.top<r.top;if(c||s){var d=this._autoLayoutWithMinimalOffset(n.top,o,[r.top,r.bottom]);u.top=d}var f=l.left+l.width>r.right;if(l.left<r.left||f){var h=this._autoLayoutWithMinimalOffset(n.left,i,[r.left,r.right]);u.left=h}return u}},{key:"_autoLayoutWithMinimalOffset",value:function(e,t,n){var r=jF(n,2),i=r[0],o=r[1],a=e+t+5;return e>i&&a<o?e:e<i?e+=i-e:a>o?e-=a-o:0}},{key:"_getBoundingBox",value:function(){return this._viewportService.getViewportRect()}},{key:"getRenderRangeBox",value:function(e,t,n,r){var i={left:0,top:0,width:r,height:n};if("top"===t&&(i.top=e.top-n-5),"bottom"!==t&&"bottomRight"!==t&&"bottomLeft"!==t||(i.top=e.top+e.height+5),"top"===t||"bottom"===t){i.left=e.left-0}if("left"===t&&(i.left=e.left-r-5),"bottomRight"===t&&(i.left=e.left+e.width-r),"bottomLeft"===t&&(i.left=e.left),"right"!==t&&"rightTop"!==t||(i.left=e.left+e.width+5),"rightTop"===t&&(i.top=e.top),"left"===t||"right"===t){var o=Math.ceil((n-e.height)/2);i.top=e.top-o}return"cover"===t&&(i.left=e.left,i.top=e.top,i.width=r,i.height=n),i}},{key:"_rectIsContain",value:function(e,t){if(e.left<0||e.top<0)return!1;var n=[e.left,e.top,e.left+e.width,e.top+e.height],r=n[0],i=n[1],o=n[2],a=n[3],l=[t.left,t.top,t.left+t.width,t.top+t.height];return r>=l[0]&&i>=l[1]&&o<=l[2]&&a<=l[3]}}])}();_7e([Yf(y7e)],x7e.prototype,"_viewportService",2),x7e=_7e([Gf()],x7e);var k7e="lakex-workbench-global-modal-container";function C7e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S7e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C7e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C7e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O7e(e,t,n){return t=DC(t),jC(e,E7e()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function E7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E7e=function(){return!!e})()}var I7e=Object.defineProperty,P7e=Object.getOwnPropertyDescriptor,M7e=function(e,t,n,r){for(var i,o=r>1?void 0:r?P7e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&I7e(t,n,o),o},R7e="lakex-table-modal-resize-width",A7e=function(e){function t(){var e;return rx(this,t),(e=O7e(this,t,arguments))._onBeforeClose=e._register(new dS),e.onBeforeClose=e._onBeforeClose.event,e._onUpdatePosition=e._register(new dS),e.onUpdatePosition=e._onUpdatePosition.event,e._visibleList=[],e._visibleListOpenArgs=new Map,e._toDestroyList=new KC,e._onChange=e._register(new dS),e.onChange=e._onChange.event,e._onAppend=e._register(new dS),e.onAppend=e._onAppend.event,e.getMaxWidth=function(){var t=e._configurationService.getValue("workbench.docContainer");return null==t?void 0:t.offsetWidth},e.getWidth=function(){var t;if(localStorage.getItem(R7e))t=Number(localStorage.getItem(R7e));else{var n=globalThis.innerWidth;t=n>1440?720:n>1280?580:480}var r=e.getMaxWidth();return t>r?r:t},e}return NC(t,e),ox(t,[{key:"init",value:function(){this._modalRegistry.init(),this._innerModalRegister()}},{key:"destroy",value:function(){this._toDestroyList.destroy()}},{key:"_innerModalRegister",value:function(){this._modalRegistry.registerItem({id:"tooltip",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:m7e})}},{key:"showTooltip",value:function(e,t){this.open("tooltip",{position:t,initialState:{message:e}})}},{key:"confirm",value:function(e){var t=this._zIndexService.maxZIndex,n=e.type||"confirm",r=S7e(S7e({},e),{},{zIndex:t,getContainer:this.getContainer()});r8e[n](r)}},{key:"open",value:function(e,t){var n,r=this._modalRegistry.getModalItem(e);r?r.mode!==V9e.CUSTOM?(t&&this._visibleListOpenArgs.set(e,t),this._addVisible(e)):null==(n=r.render)||n.call(r,t):console.error("The Compo: ".concat(e," is not registered"))}},{key:"close",value:function(e){this._removeVisible(e),this._visibleListOpenArgs.delete(e)}},{key:"getTopVisibleModalId",value:function(){return this._visibleList[this._visibleList.length-1]}},{key:"closeAll",value:function(){this._removeVisible()}},{key:"getPosition",value:function(e,t){var n,r=this._visibleListOpenArgs.get(e),i=null==(n=this._modalRegistry.getModalItem(e))?void 0:n.position,o=(null==r?void 0:r.position)||i;return o?this._modalLayoutService.getPosition(o,t):null}},{key:"emitUpdatePosition",value:function(e){this._onUpdatePosition.emit({modalId:e})}},{key:"getModalProps",value:function(e){var t,n=this._modalRegistry.getModalItem(e),r=this._visibleListOpenArgs.get(e)||{},i=S7e(S7e({},n),r);return i.mode!==V9e.DRAWER||(null==(t=i.position)?void 0:t.placement)||(i.position={placement:"right"}),S7e(S7e({},i),{},{mode:i.mode||V9e.MODAL,position:i.position||{},initialState:i.initialState||{}})}},{key:"render",value:function(){var e=this,t=this._modalRegistry.getModalItems();return t?t.map((function(t){return e.getRenderModal(t)})):null}},{key:"getRenderModal",value:function(e){var t=e.id,n=e.RenderComponent,r=e.hasMask,i=e.mode,o=void 0===i?V9e.MODAL:i,a=e.zIndex,l=void 0===a?"modalFromToolbar":a,c=e.scrollStrategy,d=void 0===c?"block":c,f=e.maskStyle,h=e.hasAnimation,p=void 0!==h&&h,v=this._zIndexService.zIndex[l],g=this._zIndexService.zIndex.mask,m=u.a.createElement(g7e,{id:t,key:t,mode:o,showMask:r,maskStyle:f||{},zIndex:v,maskZIndex:g,scrollStrategy:d,hasAnimation:p,RenderComponent:n,maxWidth:this.getMaxWidth(),onResize:function(){var t;null==(t=e.onResize)||t.call(e)}});return s.a.createPortal(m,this.getContainer())}},{key:"visibleList",get:function(){return this._visibleList}},{key:"isModalVisible",value:function(e){return this._visibleList.includes(e)}},{key:"isDisableEscClose",value:function(e){var t;return!!(null==(t=this.getModalProps(e))?void 0:t.disableEscClose)}},{key:"isDisableClickAwayClose",value:function(e){var t;return!!(null==(t=this.getModalProps(e))?void 0:t.disableClickAwayClose)}},{key:"maskSkipElements",value:function(e){var t;return null==(t=this.getModalProps(e))?void 0:t.maskSkipElements}},{key:"getContainer",value:function(){var e=this._configurationService.getValue("modal.customModalContainer")||document.body,t=e.querySelector(".".concat(k7e));if(!t){var n=document.createElement("div");n.classList.add(k7e),e.appendChild(n),t=n}return t}},{key:"_addVisible",value:function(e){if(this._isValidModal(e)){var t=this._visibleList,n=Q_(new Set(t.concat(e)));this._notify(n)}}},{key:"_removeVisible",value:function(e){var t=this;if(!e||this._isValidModal(e)){var n=this._visibleList,r=[];if(e){if(!this._modalRegistry.getModalItem(e))return void console.error("The Compo: ".concat(e," is not registered"));r=n.filter((function(t){return t!==e})),this._onBeforeClose.emit({modalId:e})}else n.forEach((function(e){t._onBeforeClose.emit({modalId:e})}));this._notify(r)}}},{key:"_isValidModal",value:function(e){return Boolean(this._modalRegistry.getModalItem(e))}},{key:"_notify",value:function(e){this._visibleList=e,this._onChange.emit(this._visibleList)}},{key:"emitAppendEvent",value:function(e){return this._onAppend.emit(e)}}])}(HC);M7e([Yf(q9e)],A7e.prototype,"_modalRegistry",2),M7e([Yf(L9e)],A7e.prototype,"_zIndexService",2),M7e([Yf(x7e)],A7e.prototype,"_modalLayoutService",2),M7e([Yf(RC)],A7e.prototype,"_configurationService",2),M7e([Df()],A7e.prototype,"destroy",1),A7e=M7e([Gf({token:z9e,contrib:[Z8e]})],A7e);var j7e=Object.defineProperty,D7e=Object.getOwnPropertyDescriptor,T7e=function(e,t,n,r){for(var i,o=r>1?void 0:r?D7e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&j7e(t,n,o),o},F7e=function(){return ox((function e(){rx(this,e)}),[{key:"getRenderViewPort",value:function(){return this._renderContext.$root.getBoundingClientRect()}},{key:"getViewportRect",value:function(){var e=document.documentElement.getBoundingClientRect();return new DOMRect(e.x,0,e.width,e.height)}}])}();T7e([Yf(Vze)],F7e.prototype,"_renderContext",2),F7e=T7e([Gf({token:y7e})],F7e);var N7e=ch().contribution(H9e).register(A7e).register(q9e).register(e7e).register(x7e).register(L9e).register(F7e),L7e=function(e){var t=SWe(q9e),n=SWe(z9e);return P$e((function(){null==t||t.registerItem(e),null==n||n.emitAppendEvent(e.id)}),[]),u.a.createElement(u.a.Fragment,null)};function B7e(e,t,n){return t=DC(t),jC(e,V7e()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function V7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V7e=function(){return!!e})()}var z7e=Object.defineProperty,H7e=Object.getOwnPropertyDescriptor,W7e=function(e){function t(){var e;return rx(this,t),(e=B7e(this,t,arguments))._key=(new Date).getTime(),e}return NC(t,e),ox(t,[{key:"getRenderContainerId",value:function(){return"lakex-table-render-container-"+this._key}},{key:"setContainerEl",value:function(e){this._$containerEl=e}},{key:"getContainerEl",value:function(){return this._$containerEl}}])}(HC);function U7e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G7e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U7e(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U7e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}W7e=function(e,t,n,r){for(var i,o=r>1?void 0:r?H7e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&z7e(t,n,o),o}([Gf()],W7e);var Y7e=Object.defineProperty,$7e=Object.getOwnPropertyDescriptor,q7e=function(e,t,n,r){for(var i,o=r>1?void 0:r?$7e(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Y7e(t,n,o),o},K7e=1004,X7e=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.zIndex=G7e(G7e({},this._renderZIndexService.zIndex),{},{mask:K7e,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();function J7e(e,t,n){return t=DC(t),jC(e,Z7e()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function Z7e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z7e=function(){return!!e})()}q7e([Yf(uHe)],X7e.prototype,"_renderZIndexService",2),q7e([jf()],X7e.prototype,"init",1),X7e=q7e([Gf()],X7e);var Q7e=function(e){function t(e){var n;return rx(this,t),(n=J7e(this,t,[e]))._$renderRef=u.a.createRef(),n._$workbenchRef=u.a.createRef(),n._toDestroyCollection=[],n.state={isRenderReady:!1,isWorkbenchReady:!1,key:+new Date},n}return NC(t,e),ox(t,[{key:"componentDidMount",value:function(){var e,t,n=this;null==(t=(e=this.props).attachRender)||t.call(e,this._$renderRef.current);var r=this.props.container;this.toolbarService=r.get(r9e),this.modalService=r.get(z9e),this._workbenchService=r.get(W7e),this._workbenchService.setContainerEl(this._$workbenchRef.current),this.setState({isRenderReady:!0}),this.props.initWorkbench(),this.setState({isWorkbenchReady:!0}),this.modalService.onAppend((function(e){n.forceUpdate()})),r.get($S).log({type:YS.workbench,action:"workbenchReady"})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.container!==e.container||(this.state.key!==t.key||(this.state.isWorkbenchReady!==t.isWorkbenchReady||this.state.isRenderReady!==t.isRenderReady))}},{key:"componentWillUnmount",value:function(){this._toDestroyCollection.forEach((function(e){return e.destroy()}))}},{key:"_renderWorkbench",value:function(){return this.state.isWorkbenchReady?u.a.createElement(u.a.Fragment,null,u.a.createElement(pqe,{onError:this.props.onError},this.toolbarService.render()),u.a.createElement(pqe,{onError:this.props.onError},this.modalService.render())):null}},{key:"render",value:function(){var e,t=this.props.container;return u.a.createElement(u.a.Fragment,null,u.a.createElement(pqe,{onError:this.props.onError},u.a.createElement(O.b,{prefixCls:"ant"},u.a.createElement(CWe,{value:{container:t,onError:this.props.onError},key:this.state.key},u.a.createElement("div",{className:"lakex-table-workbench-container",ref:this._$workbenchRef},this._renderWorkbench(),u.a.createElement(pqe,{onError:this.props.onError},u.a.createElement("div",{id:null==(e=this._workbenchService)?void 0:e.getRenderContainerId(),className:"lakex-table-render-container",ref:this._$renderRef,onContextMenu:function(e){return e.preventDefault()}},this.props.children)))))))}}])}(u.a.PureComponent),eet=Rf.defineToken("WorkbenchContextService",{multiple:!1});function tet(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return net(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?net(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function net(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ret(e,t,n){return t=DC(t),jC(e,iet()?Reflect.construct(t,[],DC(e).constructor):t.apply(e,n))}function iet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iet=function(){return!!e})()}var oet=function(e){function t(e){var n;return rx(this,t),(n=ret(this,t)).render=null,n._options=e||{},n.$root=e.$root,n.container=e.container,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),"easy"!==e.renderMode&&n._mountComponent(),n._logger.log({type:YS.workbench,action:"workbenchInited",data:null}),n}return NC(t,e),ox(t,[{key:"attachRender",value:function(e){this._options.renderService.initDom(e,this.$root)}},{key:"initWorkbench",value:function(){this._workbenchRegistry.init(),this.container.get(sx).status=cx.WorkbenchInited}},{key:"destroy",value:function(){var e;null==(e=this.render)||e.destroy(),this._workbenchRegistry.destroy(),this.unregisterPlugins(this.container),this._unMountComponent()}},{key:"_loadCoreServices",value:function(){this.container.register({token:eet,useValue:{$root:this.$root}}),this._workbenchRegistry=this.container.get(n9e)}},{key:"_logger",get:function(){return this.container.get($S)}},{key:"_mountComponent",value:function(){var e=this;s.a.render(u.a.createElement(Q7e,{key:+new Date,container:this.container,attachRender:function(t){return e.attachRender(t)},initWorkbench:function(){return e.initWorkbench()},onError:this._options.onError}),this.$root)}},{key:"renderWorkbench",value:function(){var e=this;return u.a.createElement(Q7e,{container:this.container,initWorkbench:function(){return e.initWorkbench()},onError:this._options.onError},u.a.createElement(J8e,{$root:this.$root,container:this.container,renderService:this._options.renderService}))}},{key:"_unMountComponent",value:function(){s.a.unmountComponentAtNode(this.$root)}},{key:"_registerContribs",value:function(e){if(e){var t,n=tet(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(iO),aet=ch().contribution(Z8e).register(X7e).register(W7e).register(n9e),uet=function(){return ox((function e(){rx(this,e),this.kernelContainer=ph.createChild(),this.renderContainer=this.kernelContainer.createChild(),this.workbenchContainer=this.renderContainer.createChild()}),[{key:"init",value:function(){this._loadGlobalServices(),this._loadKernelServices(),this._loadRenderServices(),this._loadWorkbenchServices()}},{key:"destroy",value:function(){this._unloadGlobalServices(),this._unloadKernelServices(),this._unloadRenderServices(),this._unloadWorkbenchServices()}},{key:"_loadGlobalServices",value:function(){this.kernelContainer.load(bN,!0),this.kernelContainer.load(QS,!0),this.kernelContainer.load(MS,!0)}},{key:"_unloadGlobalServices",value:function(){this.kernelContainer.unload(bN),this.kernelContainer.unload(QS),this.kernelContainer.unload(MS)}},{key:"_loadKernelServices",value:function(){this.kernelContainer.load(VE,!0),this.kernelContainer.load(GS,!0),this.kernelContainer.load(FT,!0),this.kernelContainer.load(Ej,!0),this.kernelContainer.load(SM,!0),this.kernelContainer.load(MD,!0),this.kernelContainer.load(Jj,!0),this.kernelContainer.load(wT,!0),this.kernelContainer.load(fj,!0)}},{key:"_unloadKernelServices",value:function(){this.kernelContainer.unload(VE),this.kernelContainer.unload(GS),this.kernelContainer.unload(FT),this.kernelContainer.unload(Ej),this.kernelContainer.unload(SM),this.kernelContainer.unload(MD),this.kernelContainer.unload(Jj),this.kernelContainer.unload(wT),this.kernelContainer.unload(fj)}},{key:"_loadRenderServices",value:function(){this.renderContainer.load(yN,!0),this.renderContainer.load(oN,!0),this.renderContainer.load(pWe,!0),this.renderContainer.load(LKe,!0),this.renderContainer.load(iqe,!0),this.renderContainer.load(q8e,!0),this.renderContainer.load(WKe,!0),this.renderContainer.load(I8e,!0)}},{key:"_unloadRenderServices",value:function(){this.renderContainer.unload(yN),this.renderContainer.unload(oN),this.renderContainer.unload(pWe),this.renderContainer.unload(LKe),this.renderContainer.unload(iqe),this.renderContainer.unload(q8e),this.renderContainer.unload(WKe),this.renderContainer.unload(I8e)}},{key:"_loadWorkbenchServices",value:function(){this.workbenchContainer.load(aet,!0),this.workbenchContainer.load(R9e,!0),this.workbenchContainer.load(N7e,!0)}},{key:"_unloadWorkbenchServices",value:function(){this.workbenchContainer.unload(aet),this.workbenchContainer.unload(R9e),this.workbenchContainer.unload(N7e)}}])}(),cet=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e,t){this._options=t,this.kernelContainer=e.kernelContainer,this.renderContainer=e.renderContainer,this.workbenchContainer=e.workbenchContainer,this.configurationService=this.kernelContainer.get(RC),this._registerKernelConfig(t.kernelPlugins),this._registerRenderConfig(t.renderPlugins),this._registerWorkbenchConfig(t.workbenchPlugins),this._setInitConfigData(t.settings)}},{key:"_registerKernelConfig",value:function(e){this.configurationService.registerConfiguration({id:"development",type:"object",title:"开发配置",properties:{disableReactDevTools:{type:"boolean",description:"是否禁用 react 开发工具"}}}),this.configurationService.registerDefaultValue({"development.disableReactDevTools":!1}),this.configurationService.registerConfiguration({id:"kernel",type:"object",title:"内核配置",properties:{groupLimitByGroupItemModel:{type:"boolean",description:"分组限制为 groupItemModel 的顺序，不会自动处理空分组等"}}}),this.configurationService.registerDefaultValue({"kernel.groupLimitByGroupItemModel":!1}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerRenderConfig",value:function(e){this.renderContainer.get(E8e).initConfiguration(),this.renderContainer.get(HKe).initConfiguration(),this.renderContainer.get(TF).initConfiguration(),this.configurationService.registerConfiguration({id:"render",type:"object",title:"渲染",properties:{noRecord:{type:"boolean",description:"不渲染 record 数据，表单提交编辑器不需要加载 record"},asyncRecord:{type:"boolean",description:"异步 record，先渲染框架内容"},showFieldIcon:{type:"boolean",description:"是否展示字段 icon"},mode:{type:"string",description:"通用渲染模式",enum:Object.values(Eze)},deferMode:{type:"string",description:"延迟渲染模式",enum:Object.values(Ize)},autoActive:{type:"boolean",description:"是否自动激活"}}}),this.configurationService.registerDefaultValue({"render.noRecord":!1,"render.showFieldIcon":!0,"render.mode":Eze.NORMAL,"render.autoActive":!0,"render.deferMode":Ize.ASYNC_CONCURRENT}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerWorkbenchConfig",value:function(e){this.configurationService.registerConfiguration({id:"workbench",type:"object",title:"Workbench",properties:{toolbar:{type:"object",properties:{visible:{type:"boolean",description:"是否显示工具栏"}}},docContainer:{type:"object",description:"文档容器"}}}),this.configurationService.registerDefaultValue({"workbench.toolbar.visible":!0,"workbench.docContainer":this._options.$root}),this.configurationService.registerConfiguration({id:"modal",type:"object",title:"弹出窗",properties:{mode:{type:"string",description:"通用弹出层模式",enum:Object.values(V9e)},customModalContainer:{type:"object",description:"自定义弹出层容器，类型为 HTMLElement | undefined"}}}),this.configurationService.registerDefaultValue({"modal.mode":V9e.MODAL,"modal.customModalContainer":void 0}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_setInitConfigData",value:function(e){e&&this.configurationService.setValue(e)}},{key:"registerPluginConfiguration",value:function(e,t){e&&e.forEach((function(e){e.registerConfiguration&&e.registerConfiguration(t)}))}}])}();hh.config({lifecycle:Rf.Lifecycle.singleton});var set=function(){function e(){rx(this,e),this._destroy=!1,this._containerService=new uet,this._configService=new cet,this._errors=[],this._reactErrors=[],this._onLoad=new dS,this.onLoad=this._onLoad.event}return ox(e,[{key:"$root",get:function(){return this._options.$root}},{key:"init",value:function(e){var t=this;this._options=e,bx.setLanguage(e.lang),this._containerService.init(),this._loadCoreServices(),e.disableLifecycle&&this._lifeService.disable(),this._lifeService.status=cx.Init,this._configService.init({kernelContainer:this._containerService.kernelContainer,renderContainer:this._containerService.renderContainer,workbenchContainer:this._containerService.workbenchContainer},e),this._configService.configurationService.getValue("development.disableReactDevTools")&&function(){var e=function(){},t=globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===ex(t))for(var n=0,r=Object.entries(t);n<r.length;n++){var i=jF(r[n],2),o=i[0],a=i[1];t[o]="function"==typeof a?e:null}}(),this._lifeService.status=cx.Configed,this.kernel=new bT({container:this._containerService.kernelContainer,plugins:this._filterPlugins(e.kernelPlugins),commandHooks:e.commandHooks,contribs:e.kernelContribs,settings:e.settings,data:e.data,onError:function(e,n){var r,i;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(i=(r=t._options).onError)||i.call(r,e,n)}}),this.render=new j8e({container:this._containerService.renderContainer,renderMode:e.renderMode,plugins:this._filterPlugins(e.renderPlugins),contribs:e.renderContribs,kernelService:this.kernel.kernelService,onError:function(e,n){var r,i;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(i=(r=t._options).onError)||i.call(r,e,n)}});var n=this._configService.configurationService.getValue("theme.current");this.themeService.setTheme(n||FF.default),this.workbench=new oet({$root:this.$root,renderMode:e.renderMode,container:this._containerService.workbenchContainer,plugins:this._filterPlugins(e.workbenchPlugins),contribs:e.workbenchContribs,renderService:this.render.renderService,onError:function(e,n){var r,i;e&&t._errors.push(e),n&&t._reactErrors.push(n),null==(i=(r=t._options).onError)||i.call(r,e,n)}}),this.logger.log({type:YS.core,action:"editorInited",data:null}),e.onDataLoaded&&this.kernel.onDataLoaded(e.onDataLoaded),e.onCollabUsersChange&&this.kernel.kernelService.onCollabUsersChange(e.onCollabUsersChange),this.kernel.onFinishExecuteCommand((function(e){var n,r;e.context.isRemote||null==(r=(n=t._options).onChange)||r.call(n)})),this._lifeService.when(cx.Rendered,(function(){var t;null==(t=e.onRendered)||t.call(e)})),this._database=this._containerService.kernelContainer.get(sC),_x((function(){var n;t.kernel.start(),null==(n=e.onLoad)||n.call(e,t),t._onLoad.emit(t)}))}},{key:"renderEditor",value:function(){return this.workbench.renderWorkbench()}},{key:"readService",get:function(){return this._containerService.kernelContainer.get(XA)}},{key:"commandService",get:function(){return this._getKernelService(Lj)}},{key:"tableId",get:function(){return this.readService.getTable().get("uuid")}},{key:"logger",get:function(){return this._containerService.kernelContainer.get($S)}},{key:"themeService",get:function(){return this._containerService.renderContainer.get(TF)}},{key:"_loadCoreServices",value:function(){this._lifeService=this._containerService.kernelContainer.get(sx)}},{key:"_filterPlugins",value:function(e){var t=this._options,n=t.disablePlugins,r=t.enablePlugins;return r?e.filter((function(e){return r.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):n?e.filter((function(e){return!n.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):e}},{key:"_getKernelService",value:function(e){var t,n;try{return this._containerService.kernelContainer.get(e)}catch(r){return console.warn("Kernel container not found:",e),null==(n=(t=this._options).onError)||n.call(t,r),null}}},{key:"getService",value:function(e){try{return this._containerService.workbenchContainer.get(e)}catch(t){console.warn("Workbench container not found:",e);try{return this._containerService.renderContainer.get(e)}catch(t){return console.warn("Render container not found:",e),this._getKernelService(e)}}}},{key:"updateSettings",value:function(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this._configService.configurationService.setValue(e))}},{key:"getContent",value:function(){return this.kernel.getContent()}},{key:"setContent",value:function(e,t){this.kernel.setContent(e,t)}},{key:"setRecords",value:function(e,t){t&&this._database.clear([NP.table]),this.kernel.setRecords(e)}},{key:"setUsers",value:function(e){this.kernel.setUsers(e)}},{key:"isEmptyTable",value:function(){return!!this._destroy||(!this.readService||this.readService.isEmptyTable())}},{key:"destroy",value:function(){this._destroy=!0,this.kernel.destroy(),this.render.destroy(),this.workbench.destroy(),this._containerService.destroy()}}],[{key:"create",value:function(t){var n=new e;return n.init(t),n}}])}();bx.setData({"$1 条记录":"$1 records","$1个筛选":"$1 filters","(空)":"(Empty)","X轴":"X Axis","YYYY年M月":"MM, YYYY","Y轴":"Y Axis","上":"Up","上一个":"Previous","上一张":"Previous","上一条记录":"Prev row","上传失败":"Upload failure","上传失败，请重试":"Upload failure, please retry","上传超时，请重试":"Upload timeout, please retry","上右":"Up Right","上周":"Last week","上左":"Up Left","上月":"Last month","下":"Down","下一个":"Next","下一张":"Next","下一条记录":"Next row","下右":"Down Right","下周":"Next week","下左":"Down Left","下月":"Next month","下载图片":"Download Picture","不包含":"Not contains","不存在对应字段":"There is no corresponding field","不存在对应选项":"There is no corresponding option","不展示":"None","不是":"is not","不等于":"Not equal to","不能与其他列重名":"Field name must be unique","不重复的值":"Unique","与":"And","中":"Middle","中位数":"Median","中位数 $1":"Median $1","丹麦克朗":"Danish krone","为空":"is empty","乌拉圭比索":"Uruguayan peso","人员":"Mention","人民币":"Yuan","今天":"Today","从大到小":"9 → 1","从小到大":"1 → 9","任务流转一目了然":"Task flow is clear at a glance","休":"RD","优先级":"Priority","优先级字段":"Priority field","低":"Low","你还未进行任何分组":"You haven't done any grouping yet","你还未进行任何排序":"You haven't done any sorting yet","你还未进行任何筛选":"You haven't done any filtering yet","使用空格分隔":"Seperate by space","保存":"Save","保持排序":"Keep sort","修改人":"Update people","修改分组":"Edit group","修改分组人员":"Edit group member","修改时间":"Update time","值":"Value","全屏演示":"","兰特":"Rand","关闭弹窗 (ESC)":"Close modal (ESC)","具体日期":"Specific date","兹罗提":"Złoty","内容":"Content","内容、优先级、日期不能为空":"content,priority,date should not emtpy.","内容显示":"Content","农历及节假日":"Lunar Year & Holiday","分组":"Group","分组方式":"Group By","切换视图":"Switch view","列伊":"Leu","列名不能为空":"Field name must not empty","列类型":"Field type","创建人":"creator","创建分组":"Create group","创建时间":"Create time","删除":"Delete","删除分组":"Delete group","删除列":"Remove field","删除图片":"Remove picture","删除图表":"Remove chart","删除日程":"Remove schedule","删除本条记录":"Remove current record","删除筛选":"Remove filter","删除行":"Remove row","删除规则":"Remove rule","删除视图":"Remove view","删除记录":"Remove record","删除该条件":"Delete this condition","剪贴板里没有文件可粘贴":"There is no file in the clipboard to paste","副本":"Copy","加元":"Canadian dollar","加载中...":"Loading...","加载更多":"Load more","包含":"Contains","包含一个":"has one of","包含所有":"has all of","升序":"Asc","单选":"Select","卢布":"Ruble","卢比":"Rupee","印尼盾":"Rupiah","取消":"Cancel","取消分组":"Ungroup","取消排序后，可进行拖拽":"After unsorting, you can drag and drop","取消筛选":"Unfilter","取消高亮重复值":"Cancel highlight same value","可以快速新建一个单选列进行分组":"You can quickly create a select column for grouping","可搜索或新建选项":"Select an option or create one","右":"Right","右上":"Rigth Up","右下":"Right Down","向上插入 {InputNumber} 行":"Insert {InputNumber} row above","向上插入记录":"Insert record above","向下插入 {InputNumber} 行":"Insert {InputNumber} row below","向下插入记录":"Insert record below","向右插入列":"Insert field right","向右插入记录":"Insert record right","向左插入列":"Insert field left","向左插入记录":"Insert record left","否":"Not","哥伦比亚比索":"Colombian peso","唯一数":"Unique","唯一数 $1":"Unique $1","唯一数占比":"Percent unique","唯一数占比 $1":"Unique $1","图例位置":"Legend Pos","图片":"Image","图片上传任务":"Image upload task","图片列表":"image list","图表视图":"Chart view","基础":"Basis","基础配置":"Basic config","墨西哥比索":"Mexican peso","备注":"Remark","备注字段":"Remark field","复制":"Copy","复制列":"Copy column","复制图表":"Copy chart","复制成功":"Copy success","复制行":"Copy row","复制视图":"Copy view","复制记录":"Copy record","复制链接":"Copy link","复选框":"Checkbox","多选":"Multi-select","大于":"Greater than","大于等于":"Greater than or equal to","字段配置":"Field setting","完成":"Finish","实际尺寸":"Actual size","封面效果":"Cover displays","封面来源":"Cover source","小于":"Less than","小于等于":"Less than or equal to","层顺序":"Layer order","展开":"Expand","展开分组":"Expand group","展开行":"Expand row","展开行（Space）":"Expand row（Space）","展开记录":"Expand record","展开详情":"Expand detail","左":"Left","左上":"Left Up","左下":"Left Down","已勾选":"Checked","已勾选 $1":"Checked $1","已勾选占比":"Percent checked","已勾选占比 $1":"Checked $1","已填写 $1":"Filled $1","已填写占比":"Percent filled","已填写占比 $1":"Filled $1","已填写数":"Filled","已存在该选项，不可重复创建！":"This option already exists","已完成":"Done","已完成字段":"Done field","已开启创建者锁定，非创建者不可编辑":"The creator lock is enabled, non-creator users cannot edit","已选择 $1 个单元格":"$1 cells selected","已逾期":"Outdated","巴西雷亚尔":"Real","带千分分隔符的数字":"Number with commas","平均值":"Average","平均值 $1":"Avg $1","平均数":"Avg","开头不是":"Not starts with","开头是":"Starts with","开始日期":"Start date","开始每天的事项安排":"Start your daily schedule","当":"Where","当前处于保持排序状态，为您重新定位":"Re-locate when keep sort","当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问":"Current browser don't support access clipboard data, we recommend that you use the Chrome browser to visit","当前访问剪贴板数据被禁止了，请打开剪贴板访问权限":"Access to clipboard data is currently prohibited, please enable clipboard access permissions","形状":"Shape","待办视图":"Todo view","待办配置":"Todo setting","总和":"Sum","总数":"Total","成功复制 $1 个单元格":"$1 cells copied","成功复制 $1 条记录":"$1 records copied","或":"Or","手机号码":"Phone","折线图":"Line chart","按":"By","按以下选项进行分组":"Group by options","按以下选项进行排序":"Sort by the following options","按本列分组":"Group by current col","按本列筛选":"Filter by current col","挪威克朗":"Norwegian krone","捷克克朗":"Koruna","排序":"Sort","排序方式":"Sort by","排序设置":"Sort settings","排除词":"Filter Words","搜索":"Search","搜索人员":"Search member","搜索选项":"Search option","收起分组":"Collapse group","放大":"Zoom out","散点图":"Scatter chart","数值说明":"Value info","数字":"Number","数字格式":"Number format","数字类型只能输入数字":"Number type can only enter numbers","数据":"Data","数据加载中...":"Loading...","数据表列名":"Field name","数据表已达最大行数限制":"Records in this table is over limits","文件读取失败，请重新上传":"File read failed, please re-upload","文本":"Text","文本 A → Z":"Text A → Z","文本 Z → A":"Text Z → A","文本颜色":"Text color","文档已保存":"Document has been saved","新加坡元":"Singapore dollar","新台币":"New Taiwan dollar","新增一个日期列":"Create date type field","新增字段":"New field","新建分组":"New group","新建视图":"New view","新建选项":"New option","新建选项不能为空字符":"The new option cannot be an empty character","新西兰元":"New Zealand dollar","无封面":"No cover","无权访问当前视图":"Not authorized to access current view","日元":"Yen","日历视图":"Calendar view","日历配置":"Calendar setting","日期":"Date","日期字段":"Date field","日期格式":"Date format","早于":"Before","时间":"Time","时间字段":"Time field","时间范围 $1 天":"RNG $1 days","时间范围 $1 月":"RNG $1 months","时间范围（日）":"Date Range(days)","时间范围（月）":"Date Range(months)","明天":"Tomorrow","星期一":"Monday","星期三":"Wednesday","星期二":"Tuesday","星期五":"Friday","星期六":"Saturday","星期四":"Thursday","星期日":"Sunday","星期日在首位":"Sunday at first","昨天":"Yesterday","是":"is","显示内容":"Content","显示周数":"Show week number","显示字段名":"Show column name","晚于":"After","智利比索":"Chilean peso","暂无人员":"Empty","暂无数据":"Empty data","暂无配置":"Empty config","最大值":"Max","最大值 $1":"Max $1","最大数量":"Max","最小值":"Min","最小值 $1":"Min $1","最早时间":"Earlist date","最早时间 $1":"Earlist date $1","最晚时间":"Lastest date","最晚时间 $1":"Latest date $1","未分组":"Ungrouped","未勾选":"Unchecked","未勾选 $1":"Unchecked $1","未勾选占比":"Percent unchecked","未勾选占比 $1":"Unchecked $1","未命名日程":"Untitled schedule","未命名记录":"Untitled record","未填写 $1":"Empty $1","未填写占比":"Percent empty","未填写占比 $1":"Empty $1","未填写数":"Empty","未搜索到结果":"No data","未来30天内":"Within the next 30 days","未来7天内":"within the next 7 days","本周":"This week","本地上传":"Local upload","本年":"This year","本月":"This month","本记录不属于该分组，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录因排序规则会移动，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录将被移动到新的排序位置":"Record moved","本记录将被移至新的分组":"Record moved","本记录将被过滤":"Record filtered","本记录已被筛选过滤，点击其他区域将隐藏该记录":"This record is no longer visible based on this view's filter, and will be hidden when you select another record","条形图":"Bar chart","林吉特":"Ringgit","查找":"Search","查看和分析数据":"Find and analyze data","查看视图需要编辑权限":"View current view requires edit permission","柱子最大宽度":"Column max width","柱状图":"Column chart","标题字段":"Title field","标题展示":"Schedule title","样式配置":"Style config","欧元":"Euro","正在处理粘贴内容...":"Processing pasted content...","每个切片代表":"Pie by","每层表示":"Each layer","求和":"Sum","求和 $1":"Sum $1","没有数据":"Non data","没有更多":"No more","法郎":"Franc","添加":"Add","添加一个选项":"Add an option","添加下一个":"Add next","添加分组条件":"Add grouping conditions","添加待办":"Add todo","添加排序条件":"Add sorting conditions","添加日程":"Add schedule","添加日程标题":"Add schedule title","添加筛选分组":"Add filter group","添加筛选条件":"Add filter","添加筛选规则":"Add filter rule","添加组件":"Add chart","添加记录":"Add record","港元":"Hong Kong dollar","漏斗图":"Funnel chart","澳元":"Australian dollar","热力图":"Heatmap","热度最大值":"Heatmap max value","热点计算":"Hot spot calc","班":"WD","瑞典克朗":"Krona","画册视图":"Gallery view","画册配置":"Gallery setting","百分比":"Percent","直接粘贴或拖拽到这里":"Paste or drag directly here","看板暂无分组":"Kanban no grouping","看板视图":"Kanban view","看板配置":"Kanban setting","确定":"Confirm","确认":"Confirm",'确认要删除 "$1" 字段吗':'Are you sure you want to delete the "$1" field',"确认要删除所有单元格数据吗":"Are you sure you want to delete all cell data?","福林":"Forint","秘鲁索尔":"Peruvian sol","空":"Empty","等于":"Equal to","筛选":"Filter","粘贴":"Paste","粘贴失败, 请稍后重试":"Paste failed, please try again later","粘贴失败，没有足够的列":"Paste failed, not enough columns","粘贴成功":"Pasted successfully","系统字段不支持粘贴修改":"System fields do not support paste modification","累计合并下层数据":"Cumulatively merge lower-level data","结尾不是":"Not ends with","结尾是":"Ends with","结束日期":"End date","统计":"Calculation","统计数字":"Stat number","统计方式":"Stat by","编辑":"Edit","编辑列":"Edit field","编辑图表":"Edit chart","编辑链接":"Edit link","缩小":"Zoom in","美元":"US dollar","自定义颜色":"Custom color","英镑":"Pound","获取链接标题":"Fetch link title","菲律宾比索":"Philippine peso","行高":"Row height","表单":"Form","表格视图":"Grid view","表格配置":"Table config","裁剪":"Clip","规范化存储和展示数据":"Normalized storage and presentation of data","视图名称":"view name","计数 大 → 小":"Count big → small","计数 小 → 大":"Count small → big","记录总数":"Count","设置该列内容类型，支持文本、日期、数字、单选、多选等":"Set the content type of the column, support text, date, number, single select, multiple select, etc.","评分":"Rate","评分类型只能输入数字":"Rate type can only enter numbers","词云":"Word cloud","该日程被隐藏":"The schedule has been hidden","请上传":"Please upload","请输入":"Please enter","请输入关键词...":"Please enter a keyword...","请输入关键词搜索":"Please enter keywords to search","请输入有效手机号":"Please enter a valid mobile phone number","请输入有效邮箱":"Please enter a valid email address","请选择":"Please choose","请选择优先级字段":"Please select the priority field","请选择单选字段":"Please choose select field","请选择备注字段":"Please select the remark field","请选择已完成字段":"","请选择日期字段":"Please choose date field","请选择时间字段":"Please select a time field","请选择标题字段":"Please choose schedule title field","请选择正文字段":"Please select the body field","谢克尔":"Shekel","货币格式":"Currency format","跟随字段颜色":"Follow field color","轻松搞定日程安排":"Make your schedule easily","输入格式有误":"Please enter a valid data","过去30天内":"within the past 30 days","过去7天内":"within the past 7 days","还有 $1 项":"has $1 schedules more","还未设置任何筛选":"No filters applied to this view","进度":"Progress","进度类型只能输入数字":"Progress type can only enter numbers","进行中":"Doing","迪拉姆":"Dirham","适合展示图片类数据":"Suitable for displaying image data","适应":"Fit","适应屏幕":"adapt to screen","选择一个组件，开始搭建你的数据可视化":"Pick a chart, startup building your data viewer","选择一列进行分组":"Pick a field to group by","选择一列进行排序":"Pick a field to sort by","选择优先级":"Select priority","选择分组字段":"Select grouping field","选择日期":"Select date","选择时间":"Select time","选择统计类型":"Select a stat type","选项倒序":"Last-First","选项名不能为空":"Option name cannot be empty","选项名不能超过最大长度限制":"Option name cannot be over max length","选项设置":"Filed options","选项顺序":"First-Last","通用格式":"Common Format","邮箱":"Email","配色方案":"Theme type","里亚尔":"Riyal","里拉":"Lira","重命名视图":"Rename view","重新上传":"Upload again","铢":"Baht","链接":"Link","阿根廷比索":"Argentine peso","附件":"File","附件上传任务":"Attachment upload task","附件列表":"attachment list","降序":"Desc","非空":"is not empty","面积图":"Area chart","韩元":"Won","颜色":"Color","颜色显示":"Schedule color","颜色设置":"Color setting","饼图":"Pie chart","高":"High","高亮重复值":"Highlight same value","高级":"Advanced","默认":"default","（空）":"(Empty)"});function det(e,t,n){return t=DC(t),jC(e,fet()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fet(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fet=function(){return!!e})()}var het=Object.defineProperty,pet=Object.getOwnPropertyDescriptor,vet=function(e){function t(){var e;return rx(this,t),(e=det(this,t,arguments)).strict=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return vet.type}},{key:"baseType",get:function(){return vet.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||Fk(t)},errorMsg:wx("进度类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=cC(String(e),{precision:vet.DECIMAL_PRECISION,scale:vet.DECIMAL_SCALE});return!(Number(e)>vet.MAX_NUM||Number(e)<vet.MIN_NUM)&&t}},{key:"transform",value:function(e){return cC(e,{precision:vet.DECIMAL_PRECISION,scale:vet.DECIMAL_SCALE})?{value:this._safeGetValue(e)}:{value:"0"}}},{key:"formatted",value:function(e){return e?String(e):"0"}},{key:"keyValue",value:function(e){return e||"0"}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=(null==n?void 0:n.get("value"))||"0",i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"upsertModelCell",value:function(e,t,n,r){var i=this.getVerify(n);n||(n="0"),this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),i.verify,i.errorMessage,r)}},{key:"_safeGetValue",value:function(e){return e>vet.MAX_NUM?vet.MAX_NUM:e<vet.MIN_NUM?vet.MIN_NUM:e||"0"}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(gj);vet.type=xO.PROGRESS,vet.baseType=kO.NUMBER,vet.DECIMAL_PRECISION=3,vet.DECIMAL_SCALE=0,vet.MAX_NUM=100,vet.MIN_NUM=0,vet=function(e,t,n,r){for(var i,o=r>1?void 0:r?pet(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&het(t,n,o),o}([Gf()],vet);var get=Object.defineProperty,met=Object.getOwnPropertyDescriptor,yet=function(e,t,n,r){for(var i,o=r>1?void 0:r?met(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&get(t,n,o),o},bet=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._progressField)}}],[{key:"pluginModule",value:function(){return ch().register(vet).register(this)}}])}();function wet(e,t,n){return t=DC(t),jC(e,_et()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function _et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_et=function(){return!!e})()}bet.pluginName="kernel-field-progress",yet([Yf(vet)],bet.prototype,"_progressField",2),bet=yet([Gf({contrib:mj})],bet);var xet=Object.defineProperty,ket=Object.getOwnPropertyDescriptor,Cet=function(e){function t(){var e;return rx(this,t),(e=wet(this,t,arguments)).strict=!0,e}return NC(t,e),ox(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return Cet.type}},{key:"baseType",get:function(){return Cet.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||Fk(t)},errorMsg:wx("评分类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=cC(String(e),{precision:Cet.DECIMAL_PRECISION,scale:Cet.DECIMAL_SCALE});return!(Number(e)>Cet.MAX_NUM||Number(e)<Cet.MIN_NUM)&&t}},{key:"transform",value:function(e){if(!cC(e,{precision:Cet.DECIMAL_PRECISION,scale:Cet.DECIMAL_SCALE})){var t=e[0];if(t){for(var n=e.length,r=0;r<e.length;r++)if(e[r]!==t)return{value:0};return{value:n}}return{value:0}}return{value:this._safeGetValue(e)}}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),i=this._safeGetCell(e,t,r);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new bC}},{key:"_safeGetValue",value:function(e){return e>Cet.MAX_NUM?Cet.MAX_NUM:e<Cet.MIN_NUM?Cet.MIN_NUM:e}},{key:"upsertModelCell",value:function(e,t,n,r){var i=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),i.verify,i.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,r),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(gj);Cet.type=xO.RATE,Cet.baseType=kO.NUMBER,Cet.DECIMAL_PRECISION=1,Cet.DECIMAL_SCALE=0,Cet.MAX_NUM=5,Cet.MIN_NUM=0,Cet=function(e,t,n,r){for(var i,o=r>1?void 0:r?ket(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xet(t,n,o),o}([Gf()],Cet);var Oet=Object.defineProperty,Eet=Object.getOwnPropertyDescriptor,Iet=function(e,t,n,r){for(var i,o=r>1?void 0:r?Eet(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Oet(t,n,o),o},Pet=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){e.registerField(this._rateField)}}],[{key:"pluginModule",value:function(){return ch().register(Cet).register(this)}}])}();function Met(e,t,n){return t=DC(t),jC(e,Ret()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Ret(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ret=function(){return!!e})()}Pet.pluginName="kernel-field-rate",Iet([Yf(Cet)],Pet.prototype,"_rateField",2),Pet=Iet([Gf({contrib:mj})],Pet);var Aet=function(e){function t(){return rx(this,t),Met(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=e.fieldId,r=this.readService.getViewConfig(),i=OC(this.readService.getAllFields(),(function(e){return e.get("uuid")}));if(!i.includes(n))return!1;var o=((null==r?void 0:r.get("highlight_same_fields"))||"").split(",").filter((function(e){return i.includes(e)}));return o.includes(n)||(o.push(n),this.writeService.updateViewConfig(t,{highlight_same_fields:o.join(",")})),!0}}])}(Ij);function jet(e,t,n){return t=DC(t),jC(e,Det()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Det(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Det=function(){return!!e})()}var Tet=function(e){function t(){return rx(this,t),jet(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=e.fieldId,r=this.readService.getViewConfig(),i=OC(this.readService.getAllFields(),(function(e){return e.get("uuid")}));if(!i.includes(n))return!1;var o=((null==r?void 0:r.get("highlight_same_fields"))||"").split(",").filter((function(e){return i.includes(e)}));if(!o.includes(n))return!0;var a=o.findIndex((function(e){return e===n}));return o.splice(a,1),this.writeService.updateViewConfig(t,{highlight_same_fields:o.join(",")}),!0}}])}(Ij);function Fet(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Net(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Net(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Net(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Let=Object.defineProperty,Bet=Object.getOwnPropertyDescriptor,Vet=function(e,t,n,r){for(var i,o=r>1?void 0:r?Bet(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Let(t,n,o),o},zet=function(){return ox((function e(){rx(this,e)}),[{key:"groupMatch",value:function(e){var t,n=this._readService.getFieldFormatValues(e).reverse(),r=n.reduce((function(e,t){return""!=t.formatValue&&(e[t.formatValue]=t),e}),{}),i={matches:[],unmatches:[]},o=Fet(n);try{for(o.s();!(t=o.n()).done;){var a=t.value,l=r[a.formatValue];""!==a.formatValue&&l&&l.recordId!==a.recordId?i.matches.push(a.recordId):i.unmatches.push(a.recordId)}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"isEnable",value:function(e){var t=this._readService.getViewConfig();return((null==t?void 0:t.get("highlight_same_fields"))||"").includes(e)}}])}();Vet([Yf(XA)],zet.prototype,"_readService",2),zet=Vet([Gf()],zet);var Het=Object.defineProperty,Wet=Object.getOwnPropertyDescriptor,Uet=function(e,t,n,r){for(var i,o=r>1?void 0:r?Wet(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Het(t,n,o),o},Get=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand("addHighlightSame",Aet),this.commandService.registerCommand("removeHighlightSame",Tet)}}],[{key:"pluginModule",value:function(){return ch().register(zet).register(this)}}])}();function Yet(e,t,n){return t=DC(t),jC(e,$et()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($et=function(){return!!e})()}Get.pluginName="kernel-highlight-same",Uet([Yf(Lj)],Get.prototype,"commandService",2),Get=Uet([Gf({contrib:mj})],Get);var qet=function(e){function t(){return rx(this,t),Yet(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.importTable(e),!0}}])}(Ij);qet.commandName="importTable";var Ket=Object.defineProperty,Xet=Object.getOwnPropertyDescriptor,Jet=function(e,t,n,r){for(var i,o=r>1?void 0:r?Xet(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ket(t,n,o),o},Zet=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(qet.commandName,qet)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function Qet(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ett(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ett(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ett(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ttt(e,t,n){return t=DC(t),jC(e,ntt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ntt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ntt=function(){return!!e})()}Zet.pluginName="kernel-import",Jet([Yf(Lj)],Zet.prototype,"commandService",2),Zet=Jet([Gf({contrib:mj})],Zet);var rtt=function(e){function t(){return rx(this,t),ttt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n;if(0===e.recordIds.length||!e.fieldId)return!0;var r,i=this.readService.getActiveViewId(),o=JSON.parse((null==(t=this.readService.getViewConfig(i))?void 0:t.get("text_colors"))||"{}"),a=Qet(e.recordIds);try{for(a.s();!(r=a.n()).done;){var l=r.value;(null==(n=o[l])?void 0:n[e.fieldId])&&(delete o[l][e.fieldId],Object.keys(0===o[l].length)&&delete o[l])}}catch(e){a.e(e)}finally{a.f()}return this.writeService.updateViewConfig(i,{text_colors:JSON.stringify(o)}),!0}}])}(Ij);function itt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ott(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ott(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ott(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function att(e,t,n){return t=DC(t),jC(e,ltt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ltt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ltt=function(){return!!e})()}var utt=function(e){function t(){return rx(this,t),att(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t;if(0===e.recordIds.length||!e.fieldId)return!0;var n,r=this.readService.getActiveViewId(),i=JSON.parse((null==(t=this.readService.getViewConfig(r))?void 0:t.get("text_colors"))||"{}"),o=itt(e.recordIds);try{for(o.s();!(n=o.n()).done;){var a=n.value;i[a]?i[a][e.fieldId]=e.color:i[a]=nx({},e.fieldId,e.color)}}catch(e){o.e(e)}finally{o.f()}return this.writeService.updateViewConfig(r,{text_colors:JSON.stringify(i)}),!0}}])}(Ij),ctt=Rf.defineToken("TextColorKernelPluginContribution"),stt=Object.defineProperty,dtt=Object.getOwnPropertyDescriptor,ftt=function(e,t,n,r){for(var i,o=r>1?void 0:r?dtt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&stt(t,n,o),o},htt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand("updateTextColor",utt),this.commandService.registerCommand("removeTextColor",rtt)}}],[{key:"pluginModule",value:function(){return ch().contribution(ctt).register(this)}}])}();function ptt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vtt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ptt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ptt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gtt(e,t,n){return t=DC(t),jC(e,mtt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function mtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mtt=function(){return!!e})()}htt.pluginName="kernel-text-color",ftt([Yf(Lj)],htt.prototype,"commandService",2),htt=ftt([Gf({contrib:mj})],htt);var ytt=function(e){function t(){return rx(this,t),gtt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t);if(!n)return[];var r=n.get("start_date_field_uuid");if(!r){var i=this.readService.getAllFields(),o=this.writeService.createField({viewId:t,field:{uuid:Cx(32),name:EO(xO.DATE,i.toJSON()),type:xO.DATE}});r=(null==o?void 0:o.uuid)||""}var a=n.get("end_date_field_uuid")||r,l=this.writeService.createEmptyRecord({viewId:t,uuid:Cx(32),direction:"after"}),u=e.date.format("YYYY-MM-DD"),c=this.readService.getCell(r,l[0].uuid);if(this.writeService.setCell(vtt(vtt({},c),{},{value:u})),a!==r){var s=this.readService.getCell(a,l[0].uuid);this.writeService.setCell(vtt(vtt({},s),{},{value:u}))}return l}}])}(Ij);function btt(e,t,n){return t=DC(t),jC(e,wtt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function wtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wtt=function(){return!!e})()}ytt.commandName="createSchedule";var _tt=function(e){function t(){return rx(this,t),btt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.date.format("YYYY-MM-DD");return this.writeService.updateViewConfig(e.viewId,{active_date:t}),t}}])}(Ij);function xtt(e,t,n){return t=DC(t),jC(e,ktt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ktt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ktt=function(){return!!e})()}_tt.commandName="setActiveDate";var Ctt=function(e){function t(){return rx(this,t),xtt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_lunar:e.show}),!0}}])}(Ij);function Stt(e,t,n){return t=DC(t),jC(e,Ott()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Ott(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ott=function(){return!!e})()}Ctt.commandName="showLunar";var Ett=function(e){function t(){return rx(this,t),Stt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{sunday_at_first:e.value}),!0}}])}(Ij);function Itt(e,t,n){return t=DC(t),jC(e,Ptt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Ptt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ptt=function(){return!!e})()}Ett.commandName="sundayAtFirst";var Mtt=function(e){function t(){return rx(this,t),Itt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_color_type:e.type,date_color:e.colorId}),!0}}])}(Ij);Mtt.commandName="updateScheduleColor";var Rtt="add",Att="subtract",jtt="day",Dtt="month",Ttt=7,Ftt=[wx("星期日"),wx("星期一"),wx("星期二"),wx("星期三"),wx("星期四"),wx("星期五"),wx("星期六")],Ntt=[["$label-back-color:0-0","$label-back-color:1-3","$label-back-color:1-1","$label-back-color:0-2","$label-back-color:1-4","$label-back-color:1-2","$label-back-color:0-4","$label-back-color:1-0","$label-back-color:0-1","$label-back-color:0-3"]];function Ltt(e,t,n){return t=DC(t),jC(e,Btt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Btt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Btt=function(){return!!e})()}var Vtt=function(e){function t(){return rx(this,t),Ltt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(e.type===FO.CUSTOM)this.writeService.updateViewConfig(e.viewId,{date_color_type:FO.CUSTOM,date_color:Ntt[0][0]});else{var t=xC(this.readService.getAllFields(),(function(e){return e.get("type")===xO.SELECT}));this.writeService.updateViewConfig(e.viewId,{date_color_type:FO.FOLLOW_FIELD,date_color:t?t.get("uuid"):""})}return!0}}])}(Ij);function ztt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Htt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ztt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ztt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wtt(e,t,n){return t=DC(t),jC(e,Utt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Utt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Utt=function(){return!!e})()}Vtt.commandName="updateScheduleColorType";var Gtt=function(e){function t(){return rx(this,t),Wtt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,i=e.targetRecordId,o=e.direction,a=this.readService.getActiveViewId(),l=this.readService.getViewConfig(a);if(l){var u=l.get("start_date_field_uuid"),c=l.get("end_date_field_uuid")||u,s=n&&!r,d=r&&!n;if(u&&c&&u===c&&(s||d)){var f=this.readService.getAllFields(),h=this.writeService.createField({viewId:a,field:{uuid:Cx(32),name:EO(xO.DATE,f.toJSON()),type:xO.DATE}});s?(u=(null==h?void 0:h.uuid)||"",this.writeService.updateViewConfig(a,{start_date_field_uuid:u})):d&&(c=(null==h?void 0:h.uuid)||"",this.writeService.updateViewConfig(a,{end_date_field_uuid:c}))}if(u&&n){var p=n.format("YYYY-MM-DD"),v=this.readService.getCell(u,t);if(this.writeService.setCell(Htt(Htt({},v),{},{value:p})),s&&c){var g=this.readService.getCell(c,t);if(!(null==g?void 0:g.value)){var m=(null==v?void 0:v.value)||(null==g?void 0:g.value);this.writeService.setCell(Htt(Htt({},v),{},{value:m,fieldId:c}))}}}if(c&&r){var y=r.format("YYYY-MM-DD"),b=this.readService.getCell(c,t);if(this.writeService.setCell(Htt(Htt({},b),{},{value:y})),d&&u){var w=this.readService.getCell(u,t);if(!(null==w?void 0:w.value)){var _=(null==b?void 0:b.value)||(null==w?void 0:w.value);this.writeService.setCell(Htt(Htt({},b),{},{value:_,fieldId:u}))}}}this.writeService.updateRecordOrder(a,t,i,void 0,o)}}}])}(Ij);function Ytt(e,t,n){return t=DC(t),jC(e,$tt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($tt=function(){return!!e})()}Gtt.commandName="updateSchedule";var qtt=function(e){function t(){return rx(this,t),Ytt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_title_field_uuid:e.titleId}),!0}}])}(Ij);function Ktt(e,t,n){return t=DC(t),jC(e,Xtt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Xtt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xtt=function(){return!!e})()}qtt.commandName="updateScheduleTitle";var Jtt=function(e){function t(){return rx(this,t),Ktt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(!e.fieldId){var t=this.readService.getAllFields(),n=this.writeService.createField({viewId:e.viewId,field:{uuid:Cx(32),name:EO(xO.DATE,t.toJSON()),type:xO.DATE}});return this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:null==n?void 0:n.uuid,end_date_field_uuid:null==n?void 0:n.uuid}),n}var r=this.readService.getField(e.fieldId);if(!r)throw new Error("This field is not exist");if(!YO.isDateLike(null==r?void 0:r.get("type")))throw new Error("This field is not a date field");switch(e.type){case"start":this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:r.get("uuid")});break;case"end":this.writeService.updateViewConfig(e.viewId,{end_date_field_uuid:r.get("uuid")})}return r.toJSON()}}])}(Ij);Jtt.commandName="upsertStartOrEndDate";var Ztt=Object.defineProperty,Qtt=Object.getOwnPropertyDescriptor,ent=function(e,t,n,r){for(var i,o=r>1?void 0:r?Qtt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ztt(t,n,o),o},tnt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Jtt.commandName,Jtt),this.commandService.registerCommand(_tt.commandName,_tt),this.commandService.registerCommand(ytt.commandName,ytt),this.commandService.registerCommand(Gtt.commandName,Gtt),this.commandService.registerCommand(Ctt.commandName,Ctt),this.commandService.registerCommand(Ett.commandName,Ett),this.commandService.registerCommand(qtt.commandName,qtt),this.commandService.registerCommand(Vtt.commandName,Vtt),this.commandService.registerCommand(Mtt.commandName,Mtt)}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function nnt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rnt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nnt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nnt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function int(e,t,n){return t=DC(t),jC(e,ont()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ont(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ont=function(){return!!e})()}tnt.pluginName="kernel-viewer-calendar",ent([Yf(Lj)],tnt.prototype,"commandService",2),tnt=ent([Gf({contrib:mj})],tnt);var ant=function(e){function t(){return rx(this,t),int(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t),r=JSON.parse((null==n?void 0:n.get("charts"))||"[]"),i=r.findIndex((function(t){return t.id===e.chart.id}));return i>-1?r[i]=rnt(rnt({},r[i]),e.chart):(e.chart.id||(e.chart.id=Cx(6)),e.chart.name||(e.chart.name=""),e.chart.w||(e.chart.w=4),e.chart.h||(e.chart.h=4),r.push(e.chart)),this.writeService.updateViewConfig(t,{charts:JSON.stringify(r)}),!0}}])}(Ij),lnt=Rf.defineToken("ViewerChartKernelPluginContribution");function unt(e,t,n){return t=DC(t),jC(e,cnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function cnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cnt=function(){return!!e})()}var snt=function(e){function t(){return rx(this,t),unt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t),r=JSON.parse((null==n?void 0:n.get("charts"))||"[]"),i=r.findIndex((function(t){return t.id===e.chartId}));return i>-1&&r.splice(i,1),this.writeService.updateViewConfig(t,{charts:JSON.stringify(r)}),!0}}])}(Ij);function dnt(e,t,n){return t=DC(t),jC(e,fnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fnt=function(){return!!e})()}var hnt=function(e){function t(){return rx(this,t),dnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t),r=JSON.parse((null==n?void 0:n.get("charts"))||"[]"),i=r.findIndex((function(t){return t.id===e.chartId}));if(i>-1){var o=function(e){return iu(e,5)}(r[i]);o.id=Cx(6),delete o.x,delete o.y,r.push(o)}return this.writeService.updateViewConfig(t,{charts:JSON.stringify(r)}),!0}}])}(Ij);function pnt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vnt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vnt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function vnt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gnt(e,t,n){return t=DC(t),jC(e,mnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function mnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mnt=function(){return!!e})()}var ynt=function(e){function t(){return rx(this,t),gnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=this.readService.getActiveViewId(),r=this.readService.getViewConfig(n),i=JSON.parse((null==r?void 0:r.get("charts"))||"[]"),o=pnt(e.rects);try{var a=function(){var e=t.value,n=i.findIndex((function(t){return t.id===e.id}));n>-1&&(i[n].w=e.w,i[n].h=e.h,i[n].x=e.x,i[n].y=e.y)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return this.writeService.updateViewConfig(n,{charts:JSON.stringify(i)}),!0}}])}(Ij);function bnt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wnt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wnt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function wnt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var _nt=Object.defineProperty,xnt=Object.getOwnPropertyDescriptor,knt=function(e,t,n,r){for(var i,o=r>1?void 0:r?xnt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_nt(t,n,o),o},Cnt=function(){return ox((function e(){rx(this,e)}),[{key:"getData",value:function(e,t,n,r,i,o){var a="total"!==r?r:void 0,l=r?i:void 0,u=this._queryData(e,n,a,l,o);return t&&["text-asc","text-desc","num-asc","num-desc"].includes(t)?this._sortLegend(t,u):u}},{key:"_queryData",value:function(e,t,n,r,i){return t?this._queryGroup(e,t,n,r,i):this._queryMain(e,n,r,void 0,i)}},{key:"_queryGroup",value:function(e,t,n,r,i){var o,a=this,l={},u=bnt(this._readService.getFieldFormatValues(t,i));try{for(u.s();!(o=u.n()).done;){var c=o.value;l[c.recordId]=c.formatValue}}catch(e){u.e(e)}finally{u.f()}var s=this._readService.getFieldFormatValues(e,i),d={};s.forEach((function(e){if(e.formatValue){var t=l[e.recordId];if(!t)return;d[t]||(d[t]=[]),d[t].push(e)}}));var f=[];return Object.keys(d).forEach((function(t){var o=d[t];a._queryMain(e,n,r,o,i).forEach((function(e){f.push({name:e.name,value:e.value,groupValue:t})}))})),f}},{key:"_queryMain",value:function(e,t,n,r,i){var o=this;if(r=r||this._readService.getFieldFormatValues(e,i),t){var a={};if(r.forEach((function(e){e.formatValue&&(a[e.formatValue]||(a[e.formatValue]=[]),a[e.formatValue].push(e.recordId))})),n)return Object.keys(a).map((function(e){var r=a[e];if(0===r.length)return{name:e,value:0};var i=o._readService.calcStatValue(t,n,r);return{name:e,value:parseFloat(i)}}));var l=this._readService.getFieldFormatValues(t).reduce((function(e,t){return e[t.recordId]=t.formatValue,e}),{});return Object.keys(a).map((function(e){var t=a[e],n=0;return t.forEach((function(e){l[e]&&(n+=1)})),{name:e,value:n}}))}var u={};return r.forEach((function(e){e.formatValue&&(u[e.formatValue]?u[e.formatValue]+=1:u[e.formatValue]=1)})),Object.keys(u).map((function(e){return{name:e,value:u[e]}}))}},{key:"_sortLegend",value:function(e,t){return"text-asc"===e?t.sort((function(e,t){var n=e.name||"",r=t.name||"";return n.localeCompare(r)})):"text-desc"===e?t.sort((function(e,t){var n=e.name||"";return(t.name||"").localeCompare(n)})):"num-asc"===e?t.sort((function(e,t){var n=e.value||"",r=t.value||"";return n===r?0:FR(n,r)?-1:1})):"num-desc"===e?t.sort((function(e,t){var n=e.value||"",r=t.value||"";return n===r?0:FR(r,n)?-1:1})):void 0}}])}();knt([Yf(XA)],Cnt.prototype,"_readService",2),Cnt=knt([Gf()],Cnt);var Snt=Object.defineProperty,Ont=Object.getOwnPropertyDescriptor,Ent=function(e,t,n,r){for(var i,o=r>1?void 0:r?Ont(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Snt(t,n,o),o},Int=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand("upsertChart",ant),this.commandService.registerCommand("removeChart",snt),this.commandService.registerCommand("copyChart",hnt),this.commandService.registerCommand("updateChartRect",ynt)}}],[{key:"pluginModule",value:function(){return ch().contribution(lnt).register(Cnt).register(this)}}])}();function Pnt(e,t,n){return t=DC(t),jC(e,Mnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Mnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mnt=function(){return!!e})()}Int.pluginName="kernel-viewer-chart",Ent([Yf(Lj)],Int.prototype,"commandService",2),Int=Ent([Gf({contrib:mj})],Int);var Rnt=function(e){function t(){return rx(this,t),Pnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return!0}}])}(Ij);function Ant(e,t,n){return t=DC(t),jC(e,jnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function jnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jnt=function(){return!!e})()}var Dnt=function(e){function t(){return rx(this,t),Ant(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.newFieldId||(e.newFieldId=Cx(32)),e}},{key:"execute",value:function(e){return this.writeService.cloneViewField(e.viewId,e.fieldId,e.newFieldId),!0}}])}(Ij);function Tnt(e,t,n){return t=DC(t),jC(e,Fnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Fnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fnt=function(){return!!e})()}Dnt.commandName="cloneViewField";var Nnt=function(e){function t(){return rx(this,t),Tnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.insertViewField(e.viewId,e.fieldId),!0}}])}(Ij);function Lnt(e,t,n){return t=DC(t),jC(e,Bnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Bnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bnt=function(){return!!e})()}var Vnt=function(e){function t(){return rx(this,t),Lnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeViewField(e.viewId,e.fieldId),!0}}])}(Ij);function znt(e,t,n){return t=DC(t),jC(e,Hnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Hnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hnt=function(){return!!e})()}var Wnt=function(e){function t(){return rx(this,t),znt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateView(e.viewId,{desc:e.desc}),!0}}])}(Ij);function Unt(e,t,n){return t=DC(t),jC(e,Gnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Gnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gnt=function(){return!!e})()}Wnt.commandName="updateViewDesc";var Ynt=function(e){function t(){return rx(this,t),Unt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{display_type:e.displayType}),!0}}])}(Ij);function $nt(e,t,n){return t=DC(t),jC(e,qnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function qnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qnt=function(){return!!e})()}Ynt.commandName="updateViewFieldDisplayType";var Knt=function(e){function t(){return rx(this,t),$nt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{name:e.name}),!0}}])}(Ij);function Xnt(e,t,n){return t=DC(t),jC(e,Jnt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Jnt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jnt=function(){return!!e})()}Knt.commandName="updateViewFieldName";var Znt=function(e){function t(){return rx(this,t),Xnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{required:e.required}),!0}}])}(Ij);function Qnt(e,t,n){return t=DC(t),jC(e,ert()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ert(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ert=function(){return!!e})()}Znt.commandName="updateViewFieldRequired";var trt=function(e){function t(){return rx(this,t),Qnt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.upsertViewShare(e.viewId,{src:e.src,status:e.status}),!0}}])}(Ij),nrt=Rf.defineToken("ViewerFormContribution"),rrt=function(e){return e.PENDING="pending",e.COLLECTING="collecting",e}(rrt||{}),irt=Rf.defineToken("ViewerFormKernelPluginContribution"),ort=Object.defineProperty,art=Object.getOwnPropertyDescriptor,lrt=function(e,t,n,r){for(var i,o=r>1?void 0:r?art(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ort(t,n,o),o},urt=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.formProvider.getContributions();return e[e.length-1].registerForm()}},{key:"getForm",value:function(e){return this.getProvider().getForm(e)}}])}();lrt([gh(nrt)],urt.prototype,"formProvider",2),urt=lrt([Gf()],urt);var crt=Object.defineProperty,srt=Object.getOwnPropertyDescriptor,drt=function(e,t,n,r){for(var i,o=r>1?void 0:r?srt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&crt(t,n,o),o},frt=function(){return ox((function e(){rx(this,e)}),[{key:"initForm",value:(e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:if(!this.getShare(t)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this._formRegistry.getForm(n.get("id"));case 8:return(r=e.sent)&&this._writeService.upsertViewShare(n.get("uuid"),r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"getShare",value:function(e){if(e)return this._readService.getViewShare(e)}},{key:"getForm",value:function(e){return this._readService.getView(e)}},{key:"getFormEditData",value:function(e){var t=this._readService.getViewFields(e),n=this._readService.getAllFields();return{view:this._readService.getView(e),viewConfig:this._readService.getViewConfig(e),fields:kC(n,(function(e){return!YO.isSystemType(e.get("type"))})),viewFields:t&&kC(t,(function(e){var t;return!YO.isSystemType(null==(t=e.get("field"))?void 0:t.get("type"))}))}}}]);var e}();drt([Yf(XA)],frt.prototype,"_readService",2),drt([Yf(dj)],frt.prototype,"_writeService",2),drt([Yf(urt)],frt.prototype,"_formRegistry",2),frt=drt([Gf()],frt);var hrt=Object.defineProperty,prt=Object.getOwnPropertyDescriptor,vrt=function(e,t,n,r){for(var i,o=r>1?void 0:r?prt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hrt(t,n,o),o},grt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand("addFormRecord",Rnt),this.commandService.registerCommand("removeViewField",Vnt),this.commandService.registerCommand("insertViewField",Nnt),this.commandService.registerCommand(Wnt.commandName,Wnt),this.commandService.registerCommand(Ynt.commandName,Ynt),this.commandService.registerCommand(Znt.commandName,Znt),this.commandService.registerCommand(Knt.commandName,Knt),this.commandService.registerCommand(Dnt.commandName,Dnt),this.commandService.registerCommand("upsertViewShare",trt)}}],[{key:"pluginModule",value:function(){return ch().contribution(irt).contribution(nrt).register(urt).register(frt).register(this)}}])}();grt.pluginName="kernel-viewer-form",vrt([Yf(Lj)],grt.prototype,"commandService",2),grt=vrt([Gf({contrib:mj})],grt);var mrt=Rf.defineToken("ViewerTodoKernelPluginContribution");function yrt(e,t,n){return t=DC(t),jC(e,brt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function brt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(brt=function(){return!!e})()}Rf.defineToken("ViewerTodoRenderPluginContribution");var wrt=function(e){function t(){return rx(this,t),yrt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e.recordId||(e.recordId=Cx(32)),e}},{key:"execute",value:function(e){this.writeService.createEmptyRecord({groupItemKey:e.groupItemKey,uuid:e.recordId,viewId:e.viewId});var t=e.cells.map((function(t){return t.recordId=e.recordId,t}));return this.writeService.bulkSetCellWithRecord(t),!0}}])}(Ij);function _rt(e,t,n){return t=DC(t),jC(e,xrt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function xrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xrt=function(){return!!e})()}wrt.commandName="addTodo";var krt=function(e){function t(){return rx(this,t),_rt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeRecord(e.recordId),!0}}])}(Ij);function Crt(e,t,n){return t=DC(t),jC(e,Srt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Srt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Srt=function(){return!!e})()}krt.commandName="removeTodo";var Ort=function(e){function t(){return rx(this,t),Crt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.cells.map((function(t){return t.recordId=e.recordId,t}));return this.writeService.bulkSetCellWithRecord(t),!0}}])}(Ij);function Ert(e,t,n){return t=DC(t),jC(e,Irt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Irt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Irt=function(){return!!e})()}Ort.commandName="updateTodo";var Prt=function(e){function t(){return rx(this,t),Ert(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_day_field_uuid:e.fieldId}),!0}}])}(Ij);function Mrt(e,t,n){return t=DC(t),jC(e,Rrt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Rrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rrt=function(){return!!e})()}Prt.commandName="updateTodoDay";var Art=function(e){function t(){return rx(this,t),Mrt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_done_field_uuid:e.fieldId}),!0}}])}(Ij);function jrt(e,t,n){return t=DC(t),jC(e,Drt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Drt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Drt=function(){return!!e})()}Art.commandName="updateTodoDone";var Trt=function(e){function t(){return rx(this,t),jrt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_priority_field_uuid:e.fieldId}),!0}}])}(Ij);function Frt(e,t,n){return t=DC(t),jC(e,Nrt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Nrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nrt=function(){return!!e})()}Trt.commandName="updateTodoPriority";var Lrt=function(e){function t(){return rx(this,t),Frt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_remark_field_uuid:e.fieldId}),!0}}])}(Ij);function Brt(e,t,n){return t=DC(t),jC(e,Vrt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Vrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vrt=function(){return!!e})()}Lrt.commandName="updateTodoRemark";var zrt=function(e){function t(){return rx(this,t),Brt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_time_field_uuid:e.fieldId}),!0}}])}(Ij);function Hrt(e,t,n){return t=DC(t),jC(e,Wrt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Wrt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wrt=function(){return!!e})()}zrt.commandName="updateTodoTime";var Urt=function(e){function t(){return rx(this,t),Hrt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{todo_title_field_uuid:e.fieldId}),!0}}])}(Ij);function Grt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yrt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yrt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Yrt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Urt.commandName="updateTodoTitle";var $rt=Object.defineProperty,qrt=Object.getOwnPropertyDescriptor,Krt=function(e,t,n,r){for(var i,o=r>1?void 0:r?qrt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$rt(t,n,o),o},Xrt=function(){return ox((function e(){rx(this,e),this._cache={},this.curDay=new Date}),[{key:"init",value:function(){var e,t,n;this._cache={},this.viewId=this._readService.getActiveViewId(),this.viewConfig=null==(e=this._readService.getViewConfig())?void 0:e.toJSON(),this.titleFieldId=this.viewConfig.todo_title_field_uuid,this.remarkFieldId=this.viewConfig.todo_remark_field_uuid,this.dayFieldId=this.viewConfig.todo_day_field_uuid,this.timeFieldId=this.viewConfig.todo_time_field_uuid,this.priorityFieldId=this.viewConfig.todo_priority_field_uuid,this.priorityField=null==(t=this._readService.getField(this.viewConfig.todo_priority_field_uuid))?void 0:t.toJSON(),this.priorityFieldOptions=this._readService.getFieldOptions(this.priorityFieldId).toJSON(),this.defaultPriorityFieldOptionId=null==(n=this.priorityFieldOptions[0])?void 0:n.uuid,this.doneFieldId=this.viewConfig.todo_done_field_uuid}},{key:"getCurrent",value:function(e){var t=this.dayFieldId+":"+a()(e).format("YYYY-MM-DD");if(this._cache[t])return this._cache[t];var n,r=this._model.viewRecordModel.find({view_uuid:this.viewId,group_item_key:t}),i={},o=Grt(this.priorityFieldOptions);try{for(o.s();!(n=o.n()).done;){var l=n.value;i[l.uuid]={doing:[],done:[]}}}catch(e){o.e(e)}finally{o.f()}var u=OC(r,(function(e){return e.get("record_uuid")})),c=this._cellService.getFieldKeyValues(this.priorityFieldId,u),s={};this._cellService.getFieldKeyValues(this.doneFieldId,u).forEach((function(e){1==e.keyValue&&(s[e.recordId]=!0)}));var d,f=0,h=0,p=Grt(c);try{for(p.s();!(d=p.n()).done;){var v=d.value;i[v.keyValue]&&(s[v.recordId]?(i[v.keyValue].done.push(v.recordId),h++):(i[v.keyValue].doing.push(v.recordId),f++))}}catch(e){p.e(e)}finally{p.f()}Object.keys(i).forEach((function(e){i[e].percent=Math.round(i[e].done.length/(i[e].done.length+i[e].doing.length)*100)}));var g={stat:{total:f+h,doing:f,done:h},priority:i};return this._cache[t]=g,g}},{key:"getCurrentTimeCells",value:function(e){var t=this.dayFieldId+":"+a()(e).format("YYYY-MM-DD"),n=OC(this._model.viewRecordModel.find({view_uuid:this.viewId,group_item_key:t}),(function(e){return e.get("record_uuid")}));return this._cellService.getFieldFormatValues(this.timeFieldId,n)}},{key:"getPriorityStat",value:function(e){var t,n=this.getCurrent(e),r=[],i=Grt(this.priorityFieldOptions);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push({fieldOption:o,doing:n.priority[o.uuid].doing.length})}}catch(e){i.e(e)}finally{i.f()}return{done:n.stat.done,priority:r}}},{key:"getTodoDetail",value:function(e){return this._readService.getViewRecordCells(this.viewId,e).toJSON().reduce((function(e,t){return e[t.fieldId]=t,e}),{})}},{key:"onDone",value:function(e){this._commandService.execCommand("updateTodo",{recordId:e,cells:[{fieldId:this.doneFieldId,recordId:e,value:!0}]})}},{key:"onDoing",value:function(e){this._commandService.execCommand("updateTodo",{recordId:e,cells:[{fieldId:this.doneFieldId,recordId:e,value:!1}]})}},{key:"onRemove",value:function(e){this._commandService.execCommand("removeTodo",{recordId:e})}},{key:"isOutdated",value:function(e,t){var n=new Date;return!!a()(e).isBefore(a()(n).format("YYYY-MM-DD"))||!!t&&!!a()(e+" "+t).isBefore(n)}}])}();Krt([Yf(XA)],Xrt.prototype,"_readService",2),Krt([Yf(vM)],Xrt.prototype,"_cellService",2),Krt([Yf(Lj)],Xrt.prototype,"_commandService",2),Krt([Yf(JP)],Xrt.prototype,"_model",2),Xrt=Krt([Gf()],Xrt);var Jrt=Object.defineProperty,Zrt=Object.getOwnPropertyDescriptor,Qrt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Zrt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Jrt(t,n,o),o},eit=function(){return ox((function e(){rx(this,e)}),[{key:"initView",value:function(e){var t,n,r,i,o,a,l=this._readService.getAllFields().toJSON(),u=l.find((function(e){return e.type===xO.TEXT&&e.name.includes("任务标题")}));u?t=u.uuid:(t=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:t,name:"任务标题",type:xO.TEXT}}));var c=l.find((function(e){return e.type===xO.TEXT&&e.name.includes("任务备注")}));c?n=c.uuid:(n=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:n,name:"任务备注",type:xO.TEXT}}));var s=l.find((function(e){return e.type===xO.SELECT&&e.name.includes("任务优先级")}));s?r=s.uuid:(r=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:r,name:"任务优先级",type:xO.SELECT,color:!0,options:[{uuid:Cx(6),name:"重要且紧急",color:"$label-back-color:2-0"},{uuid:Cx(6),name:"重要不紧急",color:"$label-back-color:2-1"},{uuid:Cx(6),name:"紧急不重要",color:"$label-back-color:2-3"},{uuid:Cx(6),name:"不重要不紧急",color:"$label-back-color:3-0"}]}}));var d=l.find((function(e){return e.type===xO.CHECKBOX&&e.name.includes("已完成")}));d?i=d.uuid:(i=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:i,name:"已完成",type:xO.CHECKBOX}}));var f=l.find((function(e){return e.type===xO.DATE&&e.name.includes("任务日期")}));f?o=f.uuid:(o=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:o,name:"任务日期",type:xO.DATE,config:{date_format:"YYYY-MM-DD"}}}));var h=l.find((function(e){return e.type===xO.DATE&&e.name.includes("任务时间")}));h?a=h.uuid:(a=Cx(32),this._viewFieldService.create({viewId:e,field:{uuid:a,name:"任务时间",type:xO.DATE,config:{date_format:"HH:mm"}}})),this._writeService.updateViewConfig(e,{todo_title_field_uuid:t,todo_remark_field_uuid:n,todo_priority_field_uuid:r,todo_done_field_uuid:i,todo_day_field_uuid:o,todo_time_field_uuid:a}),this._writeService.createGroup(e,{field_uuid:o,type:NO.ASC})}}])}();function tit(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nit(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nit(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function nit(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Qrt([Yf(XA)],eit.prototype,"_readService",2),Qrt([Yf(dj)],eit.prototype,"_writeService",2),Qrt([Yf(gA)],eit.prototype,"_viewFieldService",2),eit=Qrt([Gf()],eit);var rit=Object.defineProperty,iit=Object.getOwnPropertyDescriptor,oit=function(e,t,n,r){for(var i,o=r>1?void 0:r?iit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rit(t,n,o),o},ait=function(){return ox((function e(){rx(this,e),this._timeout=12e4,this._prevNotifyTime=new Date}),[{key:"init",value:function(){this._intervalId&&clearInterval(this._intervalId),Notification.requestPermission(),this.handle(),this.listner()}},{key:"listner",value:function(){var e=this;this._intervalId=setTimeout((function(){e.handle(),e.listner()}),this._timeout)}},{key:"handle",value:function(){var e,t=[],n=[],r=new Date,i=tit(this._todoDataService.getCurrentTimeCells(r));try{for(i.s();!(e=i.n()).done;){var o=e.value;o.formatValue&&(this._todoDataService.isOutdated(a()().format("YYYY-MM-DD"),o.formatValue)?n.push(o):this._isWantOutdate(o.formatValue)&&t.push(o))}}catch(e){i.e(e)}finally{i.f()}if(n.length>0){var l=this._cellService.getFieldFormatValues(this._todoDataService.titleFieldId,n.map((function(e){return e.recordId})));this.notify("".concat(n.length," 条待办已经过期"),{body:l.map((function(e){return e.formatValue})).join(";")})}else if(t.length>0){var u=this._cellService.getFieldFormatValues(this._todoDataService.titleFieldId,t.map((function(e){return e.recordId})));this.notify("".concat(t.length," 条待办即将过期"),{body:u.map((function(e){return e.formatValue})).join(";")})}this._prevNotifyTime=r}},{key:"notify",value:function(e,t){var n=this;"Notification"in window&&("granted"===Notification.permission?this._handleNotify(e,t):"denied"!==Notification.permission&&Notification.requestPermission().then((function(r){"granted"===r&&n._handleNotify(e,t)})))}},{key:"_isWantOutdate",value:function(e){var t=new Date,n=a()(a()().format("YYYY-MM-DD ")+e).add(-15,"minute");return!(!n.isBefore(t)||!n.isAfter(this._prevNotifyTime))}},{key:"_handleNotify",value:function(e,t){new Notification(e,t)}},{key:"destroy",value:function(){this._intervalId&&clearInterval(this._intervalId)}}])}();oit([Yf(Xrt)],ait.prototype,"_todoDataService",2),oit([Yf(vM)],ait.prototype,"_cellService",2),oit([Df()],ait.prototype,"destroy",1),ait=oit([Gf()],ait);var lit=Object.defineProperty,uit=Object.getOwnPropertyDescriptor,cit=function(e,t,n,r){for(var i,o=r>1?void 0:r?uit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lit(t,n,o),o},sit=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){var t=this;this.commandService.registerCommand(Urt.commandName,Urt),this.commandService.registerCommand(Lrt.commandName,Lrt),this.commandService.registerCommand(Trt.commandName,Trt),this.commandService.registerCommand(Art.commandName,Art),this.commandService.registerCommand(Prt.commandName,Prt),this.commandService.registerCommand(zrt.commandName,zrt),this.commandService.registerCommand(wrt.commandName,wrt),this.commandService.registerCommand(Ort.commandName,Ort),this.commandService.registerCommand(krt.commandName,krt),this.commandService.registerCommandHook({commandName:"addView",afterExecute:function(e,n){if(n.type!==WO.TODO)return!0;t._todoKernelService.initView(n.uuid)}}),this._todoNotifyService.init()}}],[{key:"pluginModule",value:function(){return ch().contribution(mrt).register(Xrt).register(ait).register(eit).register(this)}}])}();sit.pluginName="kernel-viewer-todo",cit([Yf(Lj)],sit.prototype,"commandService",2),cit([Yf(eit)],sit.prototype,"_todoKernelService",2),cit([Yf(ait)],sit.prototype,"_todoNotifyService",2);var dit=[VV,RV,KB,dV,PB,NL,bL,iz,IL,LB,KV,pB,rB,yB,YL,wV,Pet,bet,Oz,Bz,$H,aL,DH,sL,rW,KN,iH,VU,TN,kW,Zet,uH,dU,JW,iU,TW,Get,htt,lW,_U,tnt,Int,sit=cit([Gf({contrib:mj})],sit),grt],fit=Rf.defineToken("ViewerGridPluginRecordContribution"),hit=Rf.defineToken("ViewerGridPluginStatisticsContribution"),pit=Rf.defineToken("ViewerGridPluginAddFieldContribution"),vit=Rf.defineToken("ViewerGridPluginAddRecordContribution"),git=Rf.defineToken("ViewerGridPluginFooterContribution"),mit=Rf.defineToken("GridEventServiceToken"),yit=Rf.defineToken("ViewerGridHeaderContribution"),bit=Rf.defineToken("ViewerGridEmptyTextContribution"),wit=Rf.defineToken("ViewerGridLoadingTextContribution"),_it=u.a.createContext({});_it.displayName="GridContext";var xit=_it.Provider;_it.Consumer;var kit=Object.defineProperty,Cit=Object.getOwnPropertyDescriptor,Sit=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kit(t,n,o),o},Oit=function(){return ox((function e(){var t=this;rx(this,e),this.UNGROUP_KEY="ungroup",this.Record=null,this.CellContextProvider=null,this.RowContextProvider=null,this.Statistics=null,this.AddField=null,this.AddRecord=null,this.Footer=null,this.HeaderTitle=null,this.HeaderSetting=null,this.EmptyText=null,this.LoadingText=null,this._getRecordComponent=function(){var e,n,r=t.viewerGridPluginRecordProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getRecordComponent)?void 0:n.call(e)},this._getCellContextProvider=function(){var e,n,r=t.viewerGridPluginRecordProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getCellContextProvider)?void 0:n.call(e)},this._getRowContextProvider=function(){var e,n,r=t.viewerGridPluginRecordProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getRowContextProvider)?void 0:n.call(e)},this._getStatisticsComponent=function(){var e,n,r=t.viewerGridPluginStatisticsProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getStatisticsComponent)?void 0:n.call(e)},this._getAddFieldComponent=function(){var e,n,r=t.viewerGridPluginAddFieldProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getAddFieldComponent)?void 0:n.call(e)},this._getAddRecordComponent=function(){var e,n,r=t.viewerGridPluginAddRecordProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getAddRecordComponent)?void 0:n.call(e)},this._getFooterComponent=function(){var e,n,r=t.viewerGridPluginFooterProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getFooterComponent)?void 0:n.call(e)},this._getHeaderTitleComponent=function(){var e,n,r=t.viewerGridPluginHeaderProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getHeaderTitleComponent)?void 0:n.call(e)},this._getHeaderSettingComponent=function(){var e,n,r=t.viewerGridPluginHeaderProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getHeaderSettingComponent)?void 0:n.call(e)},this._getEmptyTextComponent=function(){var e,n,r=t.viewerGridEmptyTextProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getEmptyTextComponent)?void 0:n.call(e)},this._getLoadingTextComponent=function(){var e,n,r=t.viewerGridLoadingTextProvider.getContributions({cache:!1});if(r[0])return null==(n=(e=r[0]).getLoadingTextComponent)?void 0:n.call(e)}}),[{key:"init",value:function(){this.Record=this._getRecordComponent(),this.CellContextProvider=this._getCellContextProvider(),this.RowContextProvider=this._getRowContextProvider(),this.Statistics=this._getStatisticsComponent(),this.AddField=this._getAddFieldComponent(),this.AddRecord=this._getAddRecordComponent(),this.Footer=this._getFooterComponent(),this.HeaderTitle=this._getHeaderTitleComponent(),this.HeaderSetting=this._getHeaderSettingComponent(),this.EmptyText=this._getEmptyTextComponent(),this.LoadingText=this._getLoadingTextComponent()}}])}();function Eit(e,t,n){return t=DC(t),jC(e,Iit()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Iit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iit=function(){return!!e})()}Sit([gh(fit)],Oit.prototype,"viewerGridPluginRecordProvider",2),Sit([gh(hit)],Oit.prototype,"viewerGridPluginStatisticsProvider",2),Sit([gh(pit)],Oit.prototype,"viewerGridPluginAddFieldProvider",2),Sit([gh(vit)],Oit.prototype,"viewerGridPluginAddRecordProvider",2),Sit([gh(git)],Oit.prototype,"viewerGridPluginFooterProvider",2),Sit([gh(yit)],Oit.prototype,"viewerGridPluginHeaderProvider",2),Sit([gh(bit)],Oit.prototype,"viewerGridEmptyTextProvider",2),Sit([gh(wit)],Oit.prototype,"viewerGridLoadingTextProvider",2),Oit=Sit([Gf()],Oit);var Pit=Object.defineProperty,Mit=Object.getOwnPropertyDescriptor,Rit=function(e,t,n,r){for(var i,o=r>1?void 0:r?Mit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Pit(t,n,o),o},Ait=function(e){function t(){var e;return rx(this,t),(e=Eit(this,t,arguments))._onResizeStart=e._register(new dS),e.onResizeStart=e._onResizeStart.event,e._onResize=e._register(new dS),e.onResize=e._onResize.event,e._onResizeEnd=e._register(new dS),e.onResizeEnd=e._onResizeEnd.event,e._indexColWidth=80,e._minColWidth=80,e._maxColWidth=800,e._scrollStep=10,e._scrollThreshold=100,e._groupRowGap=14,e._rootLeft=0,e._rootRight=0,e._scrollLeft=0,e._field=null,e._index=-1,e._startW=0,e._minW=e._indexColWidth+e._minColWidth,e._maxW=Number.MAX_SAFE_INTEGER,e._stickyPaneWidth=0,e}return NC(t,e),ox(t,[{key:"indexColWidth",get:function(){return this._indexColWidth}},{key:"groupRowGap",get:function(){return this._groupRowGap}},{key:"stickyColNum",get:function(){return this._configuration.getValue("viewerGrid.stickyColNum")}},{key:"defaultColWidth",get:function(){return this._configuration.getValue("viewerGrid.defaultColWidth")}},{key:"getRowIndexWidth",value:function(){var e,t,n=null==(e=this._configuration)?void 0:e.getValue("viewerGrid.row.dnd.disable"),r=null==(t=this._configuration)?void 0:t.getValue("viewerGrid.row.expand.disable"),i=this._configuration.getValue("viewerGrid.pagination.enable");if(!n&&!r&&!i)return 80;var o=this._readService.getViewConfig(),a=Math.min(o.get("pagination_current")||1,1),l=this._configuration.getValue("viewerGrid.pagination.pageSize")||20,u=20;return r||(u+=40),10*String(l+(a-1)*l+1).length+u}},{key:"getStickyPaneWidth",value:function(e){return this.getColTotalWidth(e,this.stickyColNum)+this._indexColWidth}},{key:"getInnerColTotalWidth",value:function(e){var t=this;return OC(e,(function(e){return e.get("size")||t.defaultColWidth})).reduce((function(e,t){return e+t}),0)+this.getRowIndexWidth()}},{key:"getColTotalWidth",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return OC(e,(function(e){return e.get("size")||t.defaultColWidth})).slice(0,n).reduce((function(e,t){return e+t}),0)}},{key:"emitResizeStart",value:function(e,t,n){var r,i=t.get(n),o=null==(r=i.get("field"))?void 0:r.get("type"),a=this._renderContext.$root.getBoundingClientRect();this._field=i,this._index=n,this._startW=this.getColTotalWidth(t,n+1)+this._indexColWidth,this._minW=this.getColTotalWidth(t,n)+this._indexColWidth+([xO.RATE,xO.PROGRESS].includes(o)?134:this._minColWidth),this._maxW=this._minW-this._minColWidth+this._maxColWidth,this._stickyPaneWidth=this.getStickyPaneWidth(t),this._rootLeft=a.left,this._rootRight=a.right,this._$scroller=this._renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]'),this._scrollLeft=this._$scroller.scrollLeft,this._onResizeStart.emit({field:this._field,x:e.clientX-this._rootLeft})}},{key:"emitResizing",value:function(e){if(this._index<this.stickyColNum){var t=e.clientX-this._rootLeft,n=this._minW,r=this._maxW;t>=n&&t<=r&&t>0&&this._onResize.emit({field:this._field,x:t})}else{var i=e.clientX-this._rootLeft,o=this._minW-this._scrollLeft,a=this._maxW-this._scrollLeft;i>=o&&i<a&&this._rootRight-this._rootLeft-i<=this._scrollThreshold&&(this._scrollLeft+=this._scrollStep,this._$scroller.scrollLeft+=this._scrollStep),this._scrollLeft>0&&i<this._stickyPaneWidth+this._scrollThreshold&&o<this._stickyPaneWidth&&(this._scrollLeft-=this._scrollStep,this._$scroller.scrollLeft-=this._scrollStep),i>=o&&i<=a&&i>0&&this._onResize.emit({field:this._field,x:i})}}},{key:"emitResizeEnd",value:function(e){var t,n,r;this._onResizeEnd.emit({field:this._field,x:e.clientX-this._rootLeft});var i=this._index<this.stickyColNum,o=e.clientX-this._rootLeft+(i?0:this._scrollLeft),a=Math.max(o,this._minW)-this._startW,l=(null==(t=this._field)?void 0:t.get("size"))||this.defaultColWidth,u=Math.max(l+a,this._minColWidth);this._commandService.execCommand("changeColWidth",{viewId:null==(n=this._field)?void 0:n.get("view_uuid"),fieldId:null==(r=this._field)?void 0:r.get("field_uuid"),size:Math.min(u,this._maxColWidth)}),this._gridEventService.emitColResize({e:e,fieldId:this._field.get("field_uuid"),data:Math.min(u,this._maxColWidth)}),this._reset()}},{key:"_reset",value:function(){this._startW=0,this._minW=this._indexColWidth+this._minColWidth,this._maxW=Number.MAX_SAFE_INTEGER,this._stickyPaneWidth=0,this._field=null,this._index=-1,this._rootLeft=0,this._rootRight=0,this._scrollLeft=0}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Rit([Yf(XA)],Ait.prototype,"_readService",2),Rit([Yf(Vze)],Ait.prototype,"_renderContext",2),Rit([Yf(Lj)],Ait.prototype,"_commandService",2),Rit([Yf(RC)],Ait.prototype,"_configuration",2),Rit([Yf(mit)],Ait.prototype,"_gridEventService",2),Rit([Df()],Ait.prototype,"destroy",1),Ait=Rit([Gf()],Ait);var jit=Object.defineProperty,Dit=Object.getOwnPropertyDescriptor,Tit=function(e,t,n,r){for(var i,o=r>1?void 0:r?Dit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&jit(t,n,o),o},Fit=function(){return ox((function e(){rx(this,e)}),[{key:"rowHeightConfig",get:function(){return this._configuration.getValue("viewerGrid.row.height")||nx(nx(nx({},"low",36),"middle",64),"high",148)}},{key:"getRowHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low";return this.rowHeightConfig[e]||this.rowHeightConfig.low}},{key:"rowHeightSize",get:function(){var e=this._readService.getViewConfig().get("record_height");return this.rowHeightConfig[e]}}])}();function Nit(e,t,n){return t=DC(t),jC(e,Lit()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Lit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lit=function(){return!!e})()}Tit([Yf(XA)],Fit.prototype,"_readService",2),Tit([Yf(RC)],Fit.prototype,"_configuration",2),Fit=Tit([Gf()],Fit);var Bit=Object.defineProperty,Vit=Object.getOwnPropertyDescriptor,zit=function(e,t,n,r){for(var i,o=r>1?void 0:r?Vit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Bit(t,n,o),o},Hit=function(e){function t(){var e;return rx(this,t),(e=Nit(this,t,arguments))._virtuosoRef=null,e._variableRef=null,e._scroller=null,e._timer=void 0,e._onScroll=e._register(new dS),e.onScroll=e._onScroll.event,e.scrollChangedVersion=null,e._setScrollChangedVersion=rc((function(){e.scrollChangedVersion=(new Date).getTime()}),60),e.emitScrollEvent=function(t){e._setScrollChangedVersion(),e._onScroll.emit(t)},e}return NC(t,e),ox(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"variableRef",get:function(){return this._variableRef}},{key:"scroller",get:function(){if(!this._scroller){var e=this.renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]')||this.renderContext.$root.querySelector('div[data-variable-scroller="true"]');e&&(this._scroller=e)}return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this.scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"setVariableRef",value:function(e){this._variableRef=e}},{key:"isScrolling",value:function(e){var t,n=this;e?(clearTimeout(this._timer),null==(t=this._scroller)||t.setAttribute("data-scrolling","true")):this._timer=setTimeout((function(){var e;null==(e=n._scroller)||e.setAttribute("data-scrolling","false")}),600)}},{key:"scrollIntoView",value:function(e){var t,n,r,i;if(!this._virtuosoRef&&!this._variableRef)return null==(t=e.done)?void 0:t.call(e);this._virtuosoRef?null==(n=this._virtuosoRef)||n.scrollIntoView(e):this._variableRef&&(null==(r=this._variableRef)||r.scrollToItem(e.index),null==(i=e.done)||i.call(e))}},{key:"scrollTo",value:function(e){var t,n,r,i;if(!this._virtuosoRef&&!this._variableRef)return null==(t=e.done)?void 0:t.call(e);this._virtuosoRef?null==(n=this._virtuosoRef)||n.scrollTo(e):this._variableRef&&(null==(r=this._variableRef)||r.scrollTo(e.top),null==(i=e.done)||i.call(e))}},{key:"horizontalScroll",value:function(e,t){var n=this._readService.getActiveView(),r=t<this._columnControllerService.stickyColNum,i=this._scroller;if(!r&&e&&i&&n){var o=i.getBoundingClientRect(),a=e.getBoundingClientRect(),l=this._readService.getViewFields(n.get("uuid"))||[],u=this._readService.getViewGroup(null==n?void 0:n.get("uuid"))?this._columnControllerService.groupRowGap:0,c=this._columnControllerService.getStickyPaneWidth(l)+u;a.right>o.right&&(i.scrollLeft+=a.right-o.right),a.left<o.left+c&&(i.scrollLeft-=o.left+c-a.left)}}},{key:"mouseMoveScroll",value:function(e,t,n,r,i){var o=this._scroller,a=(null==r?void 0:r.left)||0,l=(null==r?void 0:r.top)||0,u=e.clientX,c=e.clientY,s=100;o&&u+s>=t?o.scrollLeft+=10:o&&u-s<=a+this._columnControllerService.getStickyPaneWidth(i)&&(o.scrollLeft-=10),o&&c-s<=l?o.scrollTop-=10:o&&c+s>=n&&(o.scrollTop+=10)}},{key:"destroy",value:function(){clearTimeout(this._timer),this._virtuosoRef=null,this._scroller=null}}])}(HC);function Wit(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Uit(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uit(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Uit(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}zit([Yf(Vze)],Hit.prototype,"renderContext",2),zit([Yf(Ait)],Hit.prototype,"_columnControllerService",2),zit([Yf(XA)],Hit.prototype,"_readService",2),Hit=zit([Gf()],Hit);var Git=Object.defineProperty,Yit=Object.getOwnPropertyDescriptor,$it=function(e,t,n,r){for(var i,o=r>1?void 0:r?Yit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Git(t,n,o),o},qit=function(){return ox((function e(){rx(this,e),this._rowCoordsByIndex=new Map,this._colCoordsByIndex=new Map,this._scrollUpdatedVersion=0}),[{key:"_viewport",get:function(){return this._renderViewPort.viewport}},{key:"updateCellCoordsInViewPort",value:function(){this._scrollUpdatedVersion&&this._scrollUpdatedVersion===this._scrollService.scrollChangedVersion||(this._scrollUpdatedVersion=this._scrollService.scrollChangedVersion,this._updateRowsLayout(),this._updateColsLayout())}},{key:"getCellIndexesByClientXY",value:function(e,t){if(!this._renderViewPort.isDotInViewPort(e,t))return null;var n=this._getTargetRowIndexByClientY(t);if(Pc(n))return null;var r=this._getTargetColIndexByClientX(e);return Pc(r)?null:[n,r]}},{key:"_updateRowsLayout",value:function(){this._rowCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-row-container.normal .lakex-viewer-grid-row[data-row]");if(t){var n,r=Wit(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=Number(i.getAttribute("data-row")),a=i.getBoundingClientRect();a.top<this._viewport.top||a.bottom>this._viewport.bottom||this._rowCoordsByIndex.set(o,{top:a.top,bottom:a.bottom})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_updateColsLayout",value:function(){this._colCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-header-column[data-col-index]");if(t){var n,r=Wit(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=Number(i.getAttribute("data-col-index")),a=i.getBoundingClientRect();a.left<this._viewport.left||a.right>this._viewport.right||this._colCoordsByIndex.set(o,{left:a.left,right:a.right})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_getTargetRowIndexByClientY",value:function(e){if(!this._rowCoordsByIndex)return null;for(var t=Q_(this._rowCoordsByIndex.keys()),n=0,r=t.length-1,i=Date.now();n<=r;){if(Date.now()-i>500)return null;var o=Math.floor((n+r)/2),a=t[o],l=this._rowCoordsByIndex.get(a);if(!l){console.warn("_getTargetRowIndexByClientY.get curRowIndex never");break}if(e<l.bottom&&l.top<e)return a;l.bottom<e?n=o+1:e<l.top&&(r=o-1)}return null}},{key:"_getTargetColIndexByClientX",value:function(e){if(!this._colCoordsByIndex)return null;for(var t=Q_(this._colCoordsByIndex.keys()),n=0,r=t.length-1,i=Date.now();n<=r;){if(Date.now()-i>500)return null;var o=Math.floor((n+r)/2),a=t[o],l=this._colCoordsByIndex.get(a);if(!l){console.warn("_getTargetColIndexByClientX.get curRowIndex never");break}if(e<l.right&&l.left<e)return a;l.left<e?n=o+1:e<l.right&&(r=o-1)}return null}}])}();function Kit(e,t,n){return t=DC(t),jC(e,Xit()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Xit(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xit=function(){return!!e})()}$it([Yf(Vze)],qit.prototype,"_renderContext",2),$it([Yf(Uze)],qit.prototype,"_renderViewPort",2),$it([Yf(Hit)],qit.prototype,"_scrollService",2),qit=$it([Gf()],qit);var Jit=Object.defineProperty,Zit=Object.getOwnPropertyDescriptor,Qit=function(e,t,n,r){for(var i,o=r>1?void 0:r?Zit(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Jit(t,n,o),o},eot=function(e){function t(){var e;return rx(this,t),(e=Kit(this,t,arguments))._onColSettingIconClick=e._register(new dS),e.onColSettingIconClick=e._onColSettingIconClick.event,e._onColContextMenu=e._register(new dS),e.onColContextMenu=e._onColContextMenu.event,e._onColResize=e._register(new dS),e.onColResize=e._onColResize.event,e}return NC(t,e),ox(t,[{key:"emitColSettingClick",value:function(e){this._onColSettingIconClick.emit(e)}},{key:"emitColContextMenu",value:function(e){this._onColContextMenu.emit(e)}},{key:"emitColResize",value:function(e){this._onColResize.emit(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Qit([Df()],eot.prototype,"destroy",1),eot=Qit([Gf({token:mit})],eot);var tot=function(){var e=SWe(Xze),t=Object(l.useCallback)((function(t){t.preventDefault(),e.emitClickIcon({iconName:"grid-field-config",event:t})}),[e]);return u.a.createElement("div",{className:"lakex-viewer-grid-header-blank",onClick:t},u.a.createElement(X$e,{type:"Add"}))},not=Object.defineProperty,rot=Object.getOwnPropertyDescriptor,iot=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getAddFieldComponent",value:function(){return tot}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();iot.pluginName="render-add-field",iot=function(e,t,n,r){for(var i,o=r>1?void 0:r?rot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&not(t,n,o),o}([Gf({contrib:[Sze,pit]})],iot);var oot=Rf.defineToken("SelectionRenderPluginScrollContribution");var aot=function(){function e(t,n){rx(this,e),n||(n=t);var r,i,o,a,l,u,c=(i=n,o=(r=t).column,a=r.row,l=i.column,u=i.row,{minColumn:Math.min(o,l),maxColumn:Math.max(o,l),minRow:Math.min(a,u),maxRow:Math.max(a,u)}),s=c.minRow,d=c.minColumn,f=c.maxRow,h=c.maxColumn;this._start=new pH(s,d,t.rowCount,t.columnCount),this._end=new pH(f,h,n.rowCount,n.columnCount),this._isCollapsed=pH.equal(t,this._end)}return ox(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"isCollapsed",get:function(){return this._isCollapsed}},{key:"rowCount",get:function(){return this._start.rowCount}},{key:"columnCount",get:function(){return this._start.columnCount}},{key:"cloneRange",value:function(){return new e(this._start,this._end)}}],[{key:"createAt",value:function(t,n){return new e(t,n)}},{key:"equal",value:function(e,t){return!(!e||!t)&&(e===t||pH.equal(e.start,t.start)&&pH.equal(e.end,t.end))}}])}();var lot=function(){function e(t,n,r){if(rx(this,e),this._anchor=n,this._focus=r,this._ranges=[],0===t.length)throw new Error("ranges construct error");var i;this._ranges=1===(i=t.slice()).length?Q_(i):i.sort((function(e,t){return e.start.row<t.start.row?-1:e.start.row>t.start.row?1:e.start.column-t.start.column}))}return ox(e,[{key:"destroy",value:function(){delete this._ranges,delete this._anchor,delete this._focus}},{key:"type",get:function(){return 0===this.rangeCount?hH.NONE:this.isCollapsed?hH.CARET:hH.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"isMultiSelection",get:function(){return this._ranges.length>1}},{key:"isAllSelect",get:function(){return 1===this._ranges.length&&0===this._ranges[0].start.row&&0===this._ranges[0].start.column&&this._ranges[0].end.row===this._ranges[0].start.rowCount-1&&this._ranges[0].end.column===this._ranges[0].start.columnCount-1}},{key:"focus",get:function(){return this._focus}},{key:"anchor",get:function(){return this._anchor}},{key:"rowCount",get:function(){return this.anchor.rowCount}},{key:"columnCount",get:function(){return this.anchor.columnCount}},{key:"isValid",value:function(){return this._ranges.length>0}},{key:"cloneSelection",value:function(){return new e(this._ranges.map((function(e){return e.cloneRange()})),this._anchor,this._focus)}},{key:"getRangeAt",value:function(e){return this._ranges[e]}}],[{key:"createBy",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t[0].start,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t[t.length-1].end)}},{key:"equal",value:function(e,t){if(e.ranges.length!==t.ranges.length)return!1;if(e.rowCount!==t.rowCount||e.columnCount!==t.columnCount)return!1;for(var n=0;n<e.ranges.length;n++)if(!aot.equal(e.ranges[n],t.ranges[n]))return!1;return!0}}])}(),uot=function(){function e(t){rx(this,e),this._recordId=t}return ox(e,[{key:"isCollapsed",get:function(){return!0}},{key:"recordId",get:function(){return this._recordId}},{key:"cloneRange",value:function(){return new e(this._recordId)}}],[{key:"createAt",value:function(t){return new e(t)}},{key:"equal",value:function(e,t){return e._recordId===t._recordId}}])}(),cot=function(){function e(t){if(rx(this,e),this._ranges=[],0===t.length)throw new Error("ranges construct error");this._ranges=t.slice()}return ox(e,[{key:"type",get:function(){return 0===this.rangeCount?hH.NONE:this.isCollapsed?hH.CARET:hH.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"destroy",value:function(){delete this._ranges}},{key:"getRangeAt",value:function(e){return this._ranges[e]}},{key:"removeAllRanges",value:function(){this._ranges=[]}},{key:"removeRange",value:function(e){var t=this._ranges.findIndex((function(t){return t.recordId===e.recordId}));return this._ranges.splice(t,1)}}],[{key:"createBy",value:function(t){return new e(t)}}])}();function sot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dot(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function dot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fot(e,t,n){return t=DC(t),jC(e,hot()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function hot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hot=function(){return!!e})()}var pot=Object.defineProperty,vot=Object.getOwnPropertyDescriptor,got=function(e,t,n,r){for(var i,o=r>1?void 0:r?vot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&pot(t,n,o),o};function mot(e){return e instanceof lot}var yot=function(e){function t(){var e;return rx(this,t),(e=fot(this,t,arguments))._onChange=e._register(new dS),e.onChange=e._onChange.event,e._onAnchorChange=e._register(new dS),e.onAnchorChange=e._onAnchorChange.event,e._selection=null,e._prevSelection=null,e._fieldValue=null,e._editable=!0,e._kanbanScrollService=null,e._cardScrollService=null,e._gridScrollService=null,e}return NC(t,e),ox(t,[{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"gridScrollService",get:function(){return this._gridScrollService}},{key:"setKanbanScrollService",value:function(e){this._kanbanScrollService=e}},{key:"setCardScrollService",value:function(e){this._cardScrollService=e}},{key:"setGridScrollService",value:function(e){this._gridScrollService=e}},{key:"destroy",value:function(){this._selection=null,this._onChange.destroy(),this._onAnchorChange.destroy()}},{key:"hasSelection",value:function(){return null!==this._selection}},{key:"getSelection",value:function(){return this._selection}},{key:"getFieldValue",value:function(){return this._currentViewType===WO.GRID?this._fieldValue:null}},{key:"getFieldValues",value:function(){return this._selection instanceof lot?this._getSelectFieldValues(this._selection):null}},{key:"setSelection",value:function(e){var t,n,r,i=this._readService.getActiveView();if(i){if(this._prevSelection=this._selection,i.get("type")===WO.GRID){if((r=Array.isArray(e)?lot.createBy(e):e.cloneSelection())instanceof lot&&this._prevSelection instanceof lot&&pH.equal(r.anchor,this._prevSelection.anchor)){if(r instanceof lot&&this._fieldValue){var o=this._readService.getFlatViewRecords(i.get("uuid")),a=this._readService.getViewFields(i.get("uuid"))||[],l=null==(t=o.get(r.anchor.row))?void 0:t.get("record_uuid"),u=null==(n=a.get(r.anchor.column))?void 0:n.get("field_uuid");this._fieldValue.recordId===l&&this._fieldValue.fieldId===u||(this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue}))}}else this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue});if(this._prevSelection instanceof lot&&r instanceof lot&&lot.equal(r,this._prevSelection))return}else r=e;this._selection=r,this._onChange.emit({selection:this._selection,editable:this._editable})}}},{key:"removeSelection",value:function(){var e=this._selection;this._selection=null,this._prevSelection=null,this._fieldValue=null,this._editable=!0,null!=e&&(this._onChange.emit({selection:null}),this._onAnchorChange.emit({selection:null,fieldValue:null}))}},{key:"createGridSelectionByScope",value:function(e,t,n,r){return this._editable=!0,function(e,t,n,r){var i=new pH(e.row,e.column,n,r),o=new pH(t.row,t.column,n,r),a=aot.createAt(i,o);return lot.createBy([a],i,o)}(e,t,n,r)}},{key:"createGridSelectionByIndex",value:function(e,t,n,r){if(this._editable=!0,Pc(n)||Pc(r)){var i=this._readService.getActiveView();n=Pc(n)?(this._readService.getFlatViewRecords(null==i?void 0:i.get("uuid"))||[]).length:n,r=Pc(r)?(this._readService.getViewFields(null==i?void 0:i.get("uuid"))||[]).length:r}return function(e,t,n,r){var i=aot.createAt(new pH(e,t,n,r),new pH(e,t,n,r));return lot.createBy([i])}(e,t,n,r)}},{key:"createRowGridSelectionByIndex",value:function(e,t,n){return this._editable=!0,Array.isArray(e)&&0===e.length?(this.removeSelection(),null):function(e,t,n){if(Array.isArray(e)){var r=Xc(e).sort(),i=[],o=r[0],a=r[0];return r.forEach((function(e,l){if(!(r[l+1]>=0&&r[l+1]===e+1)){a=e;var u=aot.createAt(new pH(o,0,t,n),new pH(a,n-1,t,n));i.push(u),o=r[l+1]}})),lot.createBy(i)}var l=aot.createAt(new pH(e,0,t,n),new pH(e,n-1,t,n));return lot.createBy([l])}(e,t,n)}},{key:"createColumnGridSelectionByIndex",value:function(e,t,n){return this._editable=!0,function(e,t,n){var r=aot.createAt(new pH(0,e,t,n),new pH(t-1,e,t,n));return lot.createBy([r])}(e,t,n)}},{key:"createSelectionById",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._editable=n;var r=this._readService.getActiveView();if(!r)return null;if(r.get("type")===WO.GRID){var i=this._readService.getViewFields(r.get("uuid"))||[],o=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=0;t&&"string"==typeof t&&(a=CC(i,(function(e){return e.get("field_uuid")===t})));var l=CC(o,(function(t){return t.get("record_uuid")===e})),u=aot.createAt(new pH(l,a,o.length,i.length));return lot.createBy([u])}var c=uot.createAt(e);return cot.createBy([c])}},{key:"moveToRecord",value:function(e){var t=this._readService.getActiveView(),n=this._readService.getFlatViewRecords(null==t?void 0:t.get("uuid")),r=CC(n,(function(t){return t.get("record_uuid")===e}));if(!(r<0)){if((null==t?void 0:t.get("type"))===WO.GRID){var i=this._readService.getViewFieldsCount(),o=this.createGridSelectionByIndex(r,0,n.length,i);this.scrollToSelection(o,"end")}if((null==t?void 0:t.get("type"))===WO.KANBAN&&this._kanbanScrollService){var a=this._readService.getGroupViewRecords(null==t?void 0:t.get("uuid")),l=this._kanbanScrollService.getKanbanGroupPositionByRecordId(e,a),u=l.index,c=l.groupId;c&&u>=0&&this._kanbanScrollIntoView(c,u,"end")}(null==t?void 0:t.get("type"))===WO.CARD&&this._cardScrollIntoView(r,"center")}}},{key:"moveUp",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtRowStart?null:lot.createBy([aot.createAt(new pH(e.row-1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveDown",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtRowEnd?null:lot.createBy([aot.createAt(new pH(e.row+1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveLeft",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtColumnStart?e.isAtRowStart?null:lot.createBy([aot.createAt(new pH(e.row-1,e.columnCount-1,e.rowCount,e.columnCount))]):lot.createBy([aot.createAt(new pH(e.row,e.column-1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveRight",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtColumnEnd?e.isAtRowEnd?null:lot.createBy([aot.createAt(new pH(e.row+1,0,e.rowCount,e.columnCount))]):lot.createBy([aot.createAt(new pH(e.row,e.column+1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveFocusUp",value:function(){if(this._selection&&this._selection instanceof lot){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowStart){var r=e.getRangeAt(0),i=new pH(n.row-1,n.column,r.rowCount,r.columnCount);return lot.createBy([aot.createAt(t,i)],t,i)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusDown",value:function(){if(this._selection&&this._selection instanceof lot){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowEnd){var r=e.getRangeAt(0),i=new pH(n.row+1,n.column,r.rowCount,r.columnCount);return lot.createBy([aot.createAt(t,i)],t,i)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveFocusLeft",value:function(){if(this._selection&&this._selection instanceof lot){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnStart){var r=e.getRangeAt(0),i=new pH(n.row,n.column-1,r.rowCount,r.columnCount);return lot.createBy([aot.createAt(t,i)],t,i)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusRight",value:function(){if(this._selection&&this._selection instanceof lot){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnEnd){var r=e.getRangeAt(0),i=new pH(n.row,n.column+1,r.rowCount,r.columnCount);return lot.createBy([aot.createAt(t,i)],t,i)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveTop",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtRowStart?null:lot.createBy([aot.createAt(new pH(0,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveBottom",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtRowEnd?null:lot.createBy([aot.createAt(new pH(e.rowCount-1,e.column,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"moveFirstLeft",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtColumnStart?null:lot.createBy([aot.createAt(new pH(e.row,0,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"start")}}},{key:"moveLastRight",value:function(){var e,t=this.isRowSelection();if(this._selection&&this._selection instanceof lot&&!t){var n=(e=this._selection.anchor).isAtColumnEnd?null:lot.createBy([aot.createAt(new pH(e.row,e.columnCount-1,e.rowCount,e.columnCount))]);this.scrollToSelection(n,"end")}}},{key:"selectAll",value:function(){var e=this._readService.getActiveView();if(e&&e.get("type")===WO.GRID){var t=this._readService.getViewRecordsCount(e.get("uuid")),n=this._readService.getViewFieldsCount(e.get("uuid")),r=this.createGridSelectionByScope({row:0,column:0},{row:t-1,column:n-1},t,n);this.setSelection(r)}}},{key:"getSelectBoundingRect",value:function(){if(this._selection){var e=this._renderContext.$root,t=this.getSelectAnchorTarget();if(t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom?null:DOMRect.fromRect({x:r.x,y:r.y,width:r.width,height:r.height})}}return null}},{key:"_getSelectPositionTarget",value:function(e){return this._renderContext.$root.querySelector('.lakex-viewer-grid-row[data-row="'.concat(e.row,'"] .lakex-viewer-grid-cell[data-col="').concat(e.column,'"]'))}},{key:"getSelectAnchorTarget",value:function(e){return!e&&this._selection instanceof lot&&(e=this._selection),e?this._getSelectPositionTarget(e.anchor):null}},{key:"getSelectFocusTarget",value:function(e){return!e&&this._selection instanceof lot&&(e=this._selection),e?this._getSelectPositionTarget(e.focus):null}},{key:"isSelectOneCell",value:function(){var e;return(null==(e=this._selection)?void 0:e.isCollapsed)||!1}},{key:"isSelectOneCol",value:function(e){var t=this._selection;if(!t)return!1;if(this._currentViewType===WO.GRID){var n=t.anchor,r=t.focus,i=t.rowCount;return 0===n.row&&r.row===i-1&&n.column===r.column&&n.column===e}return!1}},{key:"isInSelect",value:function(e,t){var n=this._selection;if(!n)return!1;var r,i=sot(n.ranges);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.start,l=o.end;if(e>=a.row&&e<=l.row&&t>=a.column&&t<=l.column)return!0}}catch(e){i.e(e)}finally{i.f()}return!1}},{key:"isInRowsSelect",value:function(e){var t=this._selection;if(!t)return!1;var n,r=sot(t.ranges);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.start,a=i.end,l=i.columnCount;if(0===o.column&&a.column===l-1&&e>=o.row&&e<=a.row)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"isRowSelection",value:function(){var e=this._selection;return!!e&&vc(e.ranges,(function(e){var t=e.start,n=e.end,r=e.columnCount;return 0===t.column&&n.column===r-1}))}},{key:"isColSelection",value:function(){var e=this._selection;return!!e&&vc(e.ranges,(function(e){var t=e.start,n=e.end;return t.column===n.column}))}},{key:"isActiveCell",value:function(e,t){var n=this._selection;return!!n&&(n.anchor.column===t&&n.anchor.row===e)}},{key:"isSelectionEnd",value:function(e,t){var n=this._selection;if(!n)return!1;var r=n.ranges[n.ranges.length-1];return r.end.column===t&&r.end.row===e}},{key:"isEditable",value:function(){return this._editable}},{key:"getSelectRowIndexes",value:function(e){if(!(e=e||this._selection))return[];var t,n=[],r=sot(e.ranges);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(Array.from({length:i.end.row-i.start.row+1}).fill(i.start.row).map((function(e,t){return e+t})))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"scrollToAnchorPosition",value:function(e,t,n){var r=this,i=null==e?void 0:e.anchor;if(i){var o=Q_(document.querySelectorAll("[data-tr-row]")).find((function(e){return Number(e.getAttribute("data-tr-row"))===i.row})),a=o?Number(o.getAttribute("data-index")):i.row;this._gridScrollIntoView(a,t,(function(){requestAnimationFrame((function(){var t,i=r.getSelectAnchorTarget(e);i&&(null==(t=r._gridScrollService)||t.horizontalScroll(i,e.anchor.column)),r.setSelection(e),n&&n()}))}))}}},{key:"scrollToFocusPosition",value:function(e,t,n){var r=this,i=null==e?void 0:e.focus;this._gridScrollIntoView(i.row,t,(function(){requestAnimationFrame((function(){var t,i=r.getSelectFocusTarget(e);i&&(null==(t=r._gridScrollService)||t.horizontalScroll(i,e.focus.column)),r.setSelection(e),n&&n()}))}))}},{key:"scrollToSelection",value:function(e,t,n){var r=this;if(e){var i=this._readService.getActiveView();if((null==i?void 0:i.get("type"))===WO.GRID)this.scrollToFocusPosition(e,t,n);else if((null==i?void 0:i.get("type"))===WO.KANBAN&&this._kanbanScrollService){var o=e.getRangeAt(0).recordId,a=this._readService.getGroupViewRecords(null==i?void 0:i.get("uuid")),l=this._kanbanScrollService.getKanbanGroupPositionByRecordId(o,a),u=l.index,c=l.groupId;c&&u>=0&&this._kanbanScrollIntoView(c,u,t,(function(){var t,i;null==(i=null==(t=r._kanbanScrollService)?void 0:t.scrollers[c])||i.scrollIntoView(),r.setSelection(e),n&&n()}))}else if((null==i?void 0:i.get("type"))===WO.CARD){for(var s=e.getRangeAt(0).recordId,d=this._readService.getViewRecords(null==i?void 0:i.get("uuid")),f=-1,h=0;h<d.length;h++){if(d.get(h).get("record_uuid")===s){f=h;break}}f>=0&&this._cardScrollIntoView(f,t,(function(){r.setSelection(e),n&&n()}))}else this.setSelection(e),n&&n()}}},{key:"_gridScrollIntoView",value:function(e,t,n){var r;null==(r=this._gridScrollService)||r.scrollIntoView({index:e,align:t,done:function(){n&&n()}})}},{key:"_kanbanScrollIntoView",value:function(e,t,n,r){var i;null==(i=this._kanbanScrollService)||i.scrollIntoView(e,{index:t,align:n,done:function(){r&&r()}})}},{key:"_cardScrollIntoView",value:function(e,t,n){var r;null==(r=this._cardScrollService)||r.scrollToIndex({index:e,align:t}),n&&n()}},{key:"_getSelectFieldValue",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var i=e.anchor,o=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),l=null==(t=o.get(i.column))?void 0:t.get("field_uuid"),u=null==(n=a.get(i.row))?void 0:n.get("record_uuid");return l&&u?this._readService.getCell(l,u):null}},{key:"_getSelectFieldValues",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;for(var i=this._readService.getViewFields(r.get("uuid"))||[],o=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=[],l=e.getRangeAt(0),u=l.start.row;u<=l.end.row;u++)for(var c=l.start.column;c<=l.end.column;c++){var s=null==(t=null==i?void 0:i.get(c))?void 0:t.get("field_uuid"),d=null==(n=o.get(u))?void 0:n.get("record_uuid");if(s&&d){var f=this._readService.getCell(s,d);f&&a.push(f)}}return a}},{key:"getRecordIds",value:function(e,t){var n=[];if(!e)return n;var r=this._readService.getActiveView();if(!r)return n;for(var i=this._readService.getFlatViewRecords(r.get("uuid"))||[],o=this.getSelectRowIndexes(e),a=0;a<o.length;a++){var l=o[a];t&&!this.isInRowsSelect(l)||n.push(i.get(l).get("record_uuid"))}return n}},{key:"getFieldId",value:function(e){var t;if(!e)return null;var n=this._readService.getActiveView();if(!n)return null;var r=e.anchor;return null==(t=this._readService.getViewFields(n.get("uuid")).get(r.column))?void 0:t.get("field_uuid")}},{key:"getRecordId",value:function(e){var t;if(!(e&&e instanceof lot))return null;var n=this._readService.getActiveView();if(!n)return null;var r=e.anchor,i=null==(t=this._readService.getFlatViewRecords(n.get("uuid")).get(r.row))?void 0:t.get("record_uuid");return i||null}},{key:"getAnchorPosition",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var i=e.anchor,o=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),l=null==(t=o.get(i.column))?void 0:t.get("field_uuid"),u=null==(n=a.get(i.row))?void 0:n.get("record_uuid");return l&&u?{fieldId:l,recordId:u}:null}}])}(HC);function bot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wot(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function wot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}got([Yf(XA)],yot.prototype,"_readService",2),got([Yf(Vze)],yot.prototype,"_renderContext",2),got([Df()],yot.prototype,"destroy",1),yot=got([Gf()],yot);var _ot=Object.defineProperty,xot=Object.getOwnPropertyDescriptor,kot=function(e,t,n,r){for(var i,o=r>1?void 0:r?xot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_ot(t,n,o),o};function Cot(e){var t;if(!e)return null;var n,r;return n=parseInt((null==e?void 0:e.getAttribute("data-col"))||"",10),r=parseInt((null==(t=null==e?void 0:e.parentNode)?void 0:t.getAttribute("data-row"))||"",10),(Ic(n)||Ic(r))&&console.warn("getCoordinateFromNode NaN error",{column:n,row:r}),{row:r,column:n}}var Sot="ant",Oot=function(){return ox((function e(){rx(this,e),this._selectorMap=nx(nx(nx({},WO.GRID,".lakex-viewer-grid-cell"),WO.KANBAN,".lakex-viewer-kanban-record"),WO.CARD,".lakex-viewer-card-record-item"),this._baseSelector="",this._preAutofillSelection=null,this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}),[{key:"init",value:function(){var e=this,t=null,n=null,r=null;this._mouseDownEmitter=Dze(document.body,"mousedown",(function(i){var o,a,l,u,c,s,d,f,h,p;null==(o=e._mouseMoveEmitter)||o.destroy(),null==(a=e._mouseUpEmitter)||a.destroy();var v=e._configuration.getValue("selection.ignoreSelectors");if(v){var g,m=bot(v);try{for(m.s();!(g=m.n()).done;){var y=g.value;if(Tze(i.target,"".concat(y)))return}}catch(e){m.e(e)}finally{m.f()}}if(!(Tze(i.target,".".concat(k7e))||Tze(i.target,".".concat(Sot,"-picker-dropdown"))||Tze(i.target,".".concat(Sot,"-popover"))||Tze(i.target,".".concat(Sot,"-select-dropdown"))||Tze(i.target,".".concat(Sot,"-slider"))))if(e._activeTableService.isAutoActive||((null==(l=e._renderContext.$workbenchRoot)?void 0:l.contains(i.target))?e._activeTableService.active():e._activeTableService.inactive()),null==(u=e._renderContext.$root)?void 0:u.contains(i.target)){var b=e._readService.getActiveView();if(b)if(b.get("type")===WO.GRID){if(!(Tze(i.target,".lakex-viewer-grid-header-column")||Tze(i.target,".lakex-viewer-grid-row-checkbox")||Tze(i.target,".lakex-viewer-grid-row-dragger")||Tze(i.target,".lakex-viewer-grid-header-checkbox")||Tze(i.target,".lakex-viewer-grid-row-index"))){var w=e._selectionService.gridScrollService,_=document.body.clientWidth,x=document.body.clientHeight,k=null==(c=null==w?void 0:w.scroller)?void 0:c.getBoundingClientRect();e._baseSelector=e._selectorMap[(null==b?void 0:b.get("type"))||""];var C=e._selectionService.getSelection();if(n=i.shiftKey&&C?{row:C.anchor.row,column:C.anchor.column}:Cot(Tze(i.target,e._baseSelector)),e._baseSelector&&n){if(2!==i.button){var S=e._readService.getViewFields(b.get("uuid"))||[],O=e._readService.getViewRecordsCount(b.get("uuid")),E=S.length;if(i.metaKey){var I=n.row,P=(null==(s=e._selectionService)?void 0:s.isRowSelection())||!1,M=(null==(d=e._selectionService)?void 0:d.getSelectRowIndexes())||[];M.includes(I)&&P?M=M.filter((function(e){return e!==I})):M.push(I);var R=null==(f=e._selectionService)?void 0:f.createRowGridSelectionByIndex(M,O,E);R&&(null==(h=e._selectionService)||h.setSelection(R))}else{if(null==(p=i.target)?void 0:p.classList.contains("lakex-viewer-grid-autofill-container"))e._preAutofillSelection=e._selectionService.getSelection(),e._renderContext.$workbenchRoot.style.cursor="crosshair";else{var A=Tze(i.target,e._baseSelector);A&&(r=Cot(t=A),e._updateSelection(n,r,O,E))}e._mouseMoveEmitter=Dze(e._renderContext.$root,"mousemove",(function(i){if(!Pc(n)){w&&k&&w.mouseMoveScroll(i,_,x,k,S);var o=Tze(i.target,e._baseSelector);o!==t&&o&&(r=Cot(t=o),e._updateSelection(n,r,O,E))}})),e._mouseUpEmitter=Dze(document.body,"mouseup",(function(i){var o,a;e._preAutofillSelection&&e._commandService.execCommand("autofillCells",{preSelection:e._preAutofillSelection,newSelection:e._selectionService.getSelection()}),e._preAutofillSelection=null,null==(o=e._mouseMoveEmitter)||o.destroy(),e._renderContext.$workbenchRoot.style.cursor="";var l=Tze(i.target,e._baseSelector);Pc(n)||(l!==t&&l&&(r=Cot(t=l),e._updateSelection(n,r,O,E)),null==(a=e._mouseUpEmitter)||a.destroy(),n=null,r=null,t=null)}))}}}else e._removeSelection()}}else e._removeSelection()}else e._removeSelection()}))}},{key:"_updateSelection",value:function(e,t,n,r){var i,o,a,l,u,c=this._preAutofillSelection,s=null==(i=this._selectionService)?void 0:i.createGridSelectionByScope(e,t,n,r);if(c){var d=c.getRangeAt(0).start,f=c.getRangeAt(c.rangeCount-1).end,h=s.getRangeAt(0).start,p=s.getRangeAt(s.rangeCount-1).end,v=null;return v=p.row>f.row?null==(o=this._selectionService)?void 0:o.createGridSelectionByScope({row:d.row,column:d.column},{row:p.row,column:f.column},n,r):h.row<d.row?null==(a=this._selectionService)?void 0:a.createGridSelectionByScope({row:h.row,column:d.column},{row:f.row,column:f.column},n,r):c,void(null==(l=this._selectionService)||l.setSelection(v))}null==(u=this._selectionService)||u.setSelection(s)}},{key:"_removeSelection",value:function(){var e;this._configuration.getValue("selection.autoClear")&&(null==(e=this._selectionService)||e.removeSelection())}},{key:"destroy",value:function(){var e,t,n;null==(e=this._mouseDownEmitter)||e.destroy(),null==(t=this._mouseMoveEmitter)||t.destroy(),null==(n=this._mouseUpEmitter)||n.destroy(),this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}}])}();function Eot(){var e=SWe(yot,{optional:!0}),t=SWe(XA),n=null==e?void 0:e.getFieldValue(),r=n?t.getCell(n.fieldId,n.recordId):null,i=jF(Object(l.useState)(r),2),o=i[0],a=i[1];return P$e((function(){var n=null==e?void 0:e.onChange((function(){var n=null==e?void 0:e.getFieldValue();if(!n)return null;a(t.getCell(n.fieldId,n.recordId))}));return function(){null==n||n.destroy()}}),[]),n?o:null}function Iot(e){var t=SWe(yot,{optional:!0}),n=jF(Object(l.useState)(null),2),r=n[0],i=n[1],o=Eot(),a=Object(l.useCallback)((function(){var e=null==t?void 0:t.getSelectBoundingRect();return e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}),[]),u=Object(l.useCallback)((function(){var e=a();i(e)}),[]);return Object(l.useLayoutEffect)((function(){var t=setTimeout((function(){e&&u()}),80);return function(){clearTimeout(t)}}),[e,null==o?void 0:o.formatValue]),Object(l.useLayoutEffect)((function(){e&&u()}),[e]),r}kot([Yf(Vze)],Oot.prototype,"_renderContext",2),kot([Yf(XA)],Oot.prototype,"_readService",2),kot([Yf(Aze)],Oot.prototype,"_activeTableService",2),kot([Yf(yot),If()],Oot.prototype,"_selectionService",2),kot([Yf(Lj)],Oot.prototype,"_commandService",2),kot([Yf(RC)],Oot.prototype,"_configuration",2),kot([Df()],Oot.prototype,"destroy",1),Oot=kot([Gf()],Oot);var Pot=function(e){var t=e.inGroup,n=void 0!==t&&t,r=e.index,i=void 0===r?-1:r,o=e.viewGroupRecord,a=e.viewRecords,c=e.viewFields,s=SWe(Lj),d=SWe(XA),f=SWe(yot,{optional:!0}),h=Object(l.useCallback)((function(){var e,t;if(n){var r=null==(e=a[i])?void 0:e.get("record_uuid"),l="";if(o){var u=null==o?void 0:o.option;u&&((null==(t=u.value)?void 0:t.toJSON)&&(u.value=u.value.toJSON()),l=d.groupValue(u))}s.execCommand("addEmptyRecord",{sourceRecordId:r,groupItemKey:l})}else s.execCommand("addEmptyRecord");if(f){var h=f.createGridSelectionByIndex(n?i+1:a.length,0,a.length+1,c.length);null==f||f.scrollToSelection(h,"end")}}),[]);return u.a.createElement("div",{className:"lakex-viewer-grid-add-record"},u.a.createElement(X$e,{type:"Add",onClick:h,size:14}))},Mot=Object.defineProperty,Rot=Object.getOwnPropertyDescriptor,Aot=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getAddRecordComponent",value:function(){return Pot}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Aot.pluginName="render-add-record",Aot=function(e,t,n,r){for(var i,o=r>1?void 0:r?Rot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Mot(t,n,o),o}([Gf({contrib:[Sze,vit]})],Aot);var jot=Rf.defineToken("WorkbenchHotkeyContribution"),Dot=Rf.defineToken("ClipboardRegistryToken"),Tot=Rf.defineToken("ClipboardRenderPluginContribution"),Fot=function(e){return e.laketable="text/laketable",e.text="text/plain",e.html="text/html",e}(Fot||{});function Not(e){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.clip="rect(0, 0, 0, 0)",document.body.appendChild(t),t.innerHTML=e;var n=document.createRange(),r=window.getSelection(),i=t.querySelector("table");if(!i||!r)return!1;n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n);var o=!1;try{if(!(o=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(e){throw new Error("unable to copy using execCommand: ",{cause:e})}finally{t.remove(),r.removeAllRanges()}return o}function Lot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bot(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Bot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Vot=function(){function e(){rx(this,e)}return ox(e,null,[{key:"_setDataToInnerCache",value:function(t){e._innerCache.push(t)}},{key:"_getDataFromInnerCache",value:function(){return e._innerCache[e._innerCache.length-1]}},{key:"getFilesFromClipBoard",value:function(e){var t=e&&(e.dataTransfer||e.clipboardData);if(!t)return null;var n=t.getData(Fot.text),r=[];try{t.items&&t.items.length>0?r=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=n.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(r=Array.from(t.files))}catch(e){t.files&&t.files.length>0&&(r=Array.from(t.files))}return r}},{key:"getClipboardData",value:(r=aO(QC.mark((function t(n,r,i){var o,a;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==i?void 0:i.disableClipboardApi)){t.next=5;break}if(o=e._getDataFromInnerCache()){t.next=4;break}return t.abrupt("return",null);case 4:return t.abrupt("return",o[n]);case 5:if(!r){t.next=9;break}if(!(a=e.getClipboardDataFromClipboardEvent(r,n))){t.next=9;break}return t.abrupt("return",a);case 9:return t.next=11,e.getClipboardDataFromClipboardApi(n);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"getClipboardDataFromClipboardEvent",value:function(e,t){var n,r=e&&(e.dataTransfer||e.clipboardData);return r?null==(n=r.getData)?void 0:n.call(r,t):null}},{key:"getClipboardDataFromClipboardApi",value:(n=aO(QC.mark((function t(n){var r,i,o,a,l,u,c,s,d,f;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=navigator.clipboard)?void 0:r.read){t.next=3;break}return e.notSupportClipboardApiToast(),t.abrupt("return",null);case 3:return t.prev=3,t.next=6,navigator.clipboard.read();case 6:i=t.sent,o=Lot(i),t.prev=8,o.s();case 10:if((a=o.n()).done){t.next=37;break}l=a.value,u=Lot(l.types),t.prev=13,u.s();case 15:if((c=u.n()).done){t.next=27;break}if((s=c.value)!==n){t.next=25;break}return t.next=20,l.getType(s);case 20:return d=t.sent.text(),t.next=23,d;case 23:return f=t.sent,t.abrupt("return",f);case 25:t.next=15;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(13),u.e(t.t0);case 32:return t.prev=32,u.f(),t.finish(32);case 35:t.next=10;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(8),o.e(t.t1);case 42:return t.prev=42,o.f(),t.finish(42);case 45:t.next=51;break;case 47:t.prev=47,t.t2=t.catch(3),"NotAllowedError"===t.t2.name&&e.notAllowClipboardApiToast(),console.error("getClipboardDataFromClipboardApi err",t.t2);case 51:return t.abrupt("return",null);case 52:case"end":return t.stop()}}),t,null,[[3,47],[8,39,42,45],[13,29,32,35]])}))),function(e){return n.apply(this,arguments)})},{key:"writeToClipboardData",value:(t=aO(QC.mark((function t(n,r,i){var o,a;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==i?void 0:i.disableClipboardApi)){t.next=3;break}return e._setDataToInnerCache(n),t.abrupt("return");case 3:if(!(null==r?void 0:r.setData)){t.next=8;break}return null!=n.laketable&&r.setData(Fot.laketable,n.laketable),null!=n.html&&r.setData(Fot.html,n.html),null!=n.text&&r.setData(Fot.text,n.text),t.abrupt("return");case 8:if(!n.html){t.next=21;break}return Not(n.html),t.prev=10,o=new Blob([n.html],{type:Fot.html}),a=new ClipboardItem(nx({},Fot.html,o)),t.next=15,navigator.clipboard.write([a]);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(10),console.error("writeToClipboardDataByClipboardApi err",t.t0),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[10,17]])}))),function(e,n,r){return t.apply(this,arguments)})}]);var t,n,r}();Vot._innerCache=[],Vot.notSupportClipboardApiToast=rc((function(){p.b.error(wx("当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问"))}),100),Vot.notAllowClipboardApiToast=rc((function(){p.b.error(wx("当前访问剪贴板数据被禁止了，请打开剪贴板访问权限"))}),100);var zot=Vot,Hot=function(e){return e.COPY="copy",e.CUT="cut",e.NULL="null",e}(Hot||{}),Wot=function(){return ox((function e(){rx(this,e)}),[{key:"serialize",value:function(e){if(!e)return"";var t=e.cells,n=[],r=t.length,i=t[0].length;return PG(0,r,(function(e){var r=[];PG(0,i,(function(n){var i,o=t[e][n];i=o?o.formatValue:"",r.push(i)})),n.push(r.join("\t"))})),n.join("\n")}},{key:"deserialize",value:function(e){var t=[],n={cells:t};return e?(e.split("\n").forEach((function(e,n){var r=e.split("\t");t[n]=[],r.forEach((function(e,r){var i={fieldType:xO.TEXT,value:e};t[n][r]=i}))})),n):n}}])}(),Uot=function(){return ox((function e(){rx(this,e)}),[{key:"serialize",value:function(e){return e?this._standardTableValueToTableHTML(e):""}},{key:"deserialize",value:function(e){return this._tableHTMLToStandardTableValue(e)}},{key:"_getTrHTML",value:function(e){var t,n=e.cells,r=e.fields,i=e.rowHeight,o=[];o.length=n.length;var a=n.length;return PG(0,(null==(t=n[0])?void 0:t.length)||0,(function(e){var t=null==r?void 0:r[e];PG(0,a,(function(r){var a;o[r]=o[r]||'<tr style="height: '.concat(i,'px">');var l=n[r][e],u="",c="";if(l&&(l.value||[xO.CHECKBOX,xO.SELECT,xO.MULTI_SELECT].includes(null==t?void 0:t.type))){switch(null==t?void 0:t.type){case xO.SELECT:case xO.MULTI_SELECT:var s=l.formatValue.split(","),d=t.options||new yC;u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:"select",value:s,options:d.map((function(e){return{id:e.get("uuid"),value:e.get("name"),color:e.get("color")}})),color:!!(null==(a=d.get(0))?void 0:a.get("color")),multi:t.type===xO.MULTI_SELECT})),'"'),c=l.formatValue;break;case xO.MENTION:u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:l.formatValue})),'"'),c=l.formatValue;break;case xO.IMAGE:var f=l.value;c=(null==f?void 0:f.map((function(e){return'<img src="'.concat(e.src,'" height=').concat(t.size," />")})).join(""))||"";break;case xO.LINK:var h=l.value;c=h?'<a href="'.concat(h.src,'">').concat(h.name,"</a>"):"";break;case xO.FILE:var p=l.value;c=p?p.map((function(e){return'<a href="'.concat(e.src,'">').concat(e.name,"</a>")})).join(""):"";break;case xO.CHECKBOX:var v=l.value;c=!0===v?"✅":"🔲",u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:!0===v})),'"');break;default:c=function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}(l.formatValue)}o[r]+="<td ".concat(u,">").concat(c,"</td>")}else o[r]+="<td></td>"}))})),PG(0,a,(function(e){o[e]+="</tr>"})),o}},{key:"_standardTableValueToTableHTML",value:function(e){var t=e.startCell,n=e.fields,r=this._getTrHTML(e),i=[];n&&n.forEach((function(e){i.push("<col width=".concat(e.size,">"))}));var o="<colgroup>".concat(i.join(""),"</colgroup>");return"\x3c!--StartFragment--\x3e".concat('<style type="text/css">\x3c!--\n    td {border: 0.5pt solid #ccc;white-space: nowrap;}\n    br {mso-data-placement:same-cell;}\n    .numberstr{mso-number-format:"@";}\n    .perc {mso-number-format:0%;}\n    .curr¥ {mso-number-format:"¥#,##0.00;[red]¥#,##0.00";}\n    .curr$ {mso-number-format:"$#,##0.00;[red]$#,##0.00";}\n    .curr£ {mso-number-format:"£#,##0.00;[red]£#,##0.00";}\n    .curr€ {mso-number-format:"€#,##0.00;[red]€#,##0.00";}\n    --\x3e</style>','<table style="font-size: 12px;" data-startCell="').concat(t.row,":").concat(t.column,'">').concat(o).concat(r.join(""),"</table>\x3c!--EndFragment--\x3e")}},{key:"_tableHTMLToStandardTableValue",value:function(e){for(var t=lne(e),n=t.rowCount,r=t.colCount,i=t.data,o=[],a=0;a<n;){if(o[a]=[],o[a].length=r,i[a])for(var l=0;l<r;){if(i[a][l]){var u=i[a][l],c=this._htmlValueToTableCell(u);o[a][l]=c}l++}a++}return{cells:o}}},{key:"_htmlValueToTableCell",value:function(e){var t={fieldType:xO.TEXT,value:""},n=e.value||"";if(Px(n)||function(e){return Ox(e,"Number")}(n)||Sc(n))return t.value=n,t;var r=n.class;if("link"===r){var i=n,o={name:i.text,src:i.url,icon:i.icon};t.fieldType=xO.LINK,t.value=o}else if("file"===r){var a=n,l=[{name:a.text,src:a.url}];t.fieldType=xO.IMAGE,t.value=l}else if("image"===r){var u=n,c=[{name:u.name,src:u.originSrc}];t.fieldType=xO.IMAGE,t.value=c}else if("select"===r){var s=n;if(s.multi){var d=s.value;t.fieldType=xO.MULTI_SELECT,t.value=d}else{var f=s.value[0];t.fieldType=xO.SELECT,t.value=f}}return t}}])}(),Got=function(){return ox((function e(){rx(this,e)}),[{key:"serialize",value:function(e){return JSON.stringify(e)}},{key:"deserialize",value:function(e){return JSON.parse(e)}}])}(),Yot=ox((function e(){rx(this,e)}));function $ot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qot(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function qot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Kot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kot(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Yot.html=new Uot,Yot.text=new Wot,Yot.laketable=new Got;var Jot=Object.defineProperty,Zot=Object.getOwnPropertyDescriptor,Qot=function(e,t,n,r){for(var i,o=r>1?void 0:r?Zot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Jot(t,n,o),o},eat=DD.Plugin("clipboard"),tat=function(){return ox((function e(){rx(this,e),this.runningStatus=Hot.NULL}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();return mot(t)?t:null}},{key:"copy",value:function(e){p.b.destroy(),this._enable()&&this._selection&&0!==this._selection.rangeCount&&(this.runningStatus=Hot.COPY,this.setDataToClipboard(e),this._showCopyCutSuccessMessage(),this.runningStatus=Hot.NULL)}},{key:"cut",value:function(e){this._enable()&&(this.runningStatus=Hot.CUT,this.runningStatus=Hot.NULL)}},{key:"_enable",value:function(){var e;return this.runningStatus===Hot.NULL&&(!!this._selection&&(!!window.formulaCopy||(!this._abilityService.isReadonly(Qj.VIEW)||!(null==(e=window.appData)?void 0:e.disableDocumentCopy))))}},{key:"setDataToClipboard",value:function(e){null==e||e.preventDefault();var t=this.getCopyDataBySelection(),n=e&&(e.dataTransfer||e.clipboardData),r=Yot.laketable.serialize(t),i=Yot.html.serialize(t),o=Yot.text.serialize(t),a=this._configuration.getValue("clipboard.clipboardApi.disable");return zot.writeToClipboardData({laketable:r,html:i,text:o},n,{disableClipboardApi:a}),t}},{key:"_getCopyDataByRange",value:function(e,t,n){for(var r,i,o=e.start,a=e.end,l=a.row-o.row+1,u=a.column-o.column+1,c=Array.from({length:l}).fill(0).map((function(){return Array.from({length:u}).fill(0)})),s=[],d=0;d<u;d++){var f=t.get(d+o.column),h=f.get("field"),p=(null==h?void 0:h.get("uuid"))||"";h&&s.push(Xot(Xot({},h.toJSON()),{},{size:f.get("size")||180}));for(var v=0;v<l;v++){var g=null==(i=null==(r=n.get(v+o.row))?void 0:r.get)?void 0:i.call(r,"record_uuid");if(g){var m=this._readService.getCell(p,g);m&&(c[v][d]=m)}}}return{fields:s,cells:c}}},{key:"getCopyDataBySelection",value:function(){var e=this._selection;if(!e)return null;var t,n=[],r=[],i=this._readService.getActiveView(),o=this._readService.getViewFields(null==i?void 0:i.get("uuid"))||[],a=this._readService.getFlatViewRecords(null==i?void 0:i.get("uuid"))||[],l=this._readService.getViewConfig(null==i?void 0:i.get("uuid")),u=$ot(e.ranges);try{for(u.s();!(t=u.n()).done;){var c=t.value,s=this._getCopyDataByRange(c,o,a);r=Zc([].concat(Q_(r),Q_(s.fields)),(function(e,t){return e.uuid===t.uuid})),n=[].concat(Q_(n),Q_(s.cells))}}catch(e){u.e(e)}finally{u.f()}var d={tableId:this._readService.getTable().get("uuid"),fields:r,cells:n,startCell:e.getRangeAt(0).start,rowHeight:this._rowControllerService.getRowHeight(null==l?void 0:l.get("record_height"))};try{var f=this._clipboardRegistry.getCopyMiddlewares();if(f&&f.length>0){var h,p=$ot(f);try{for(p.s();!(h=p.n()).done;){var v=h.value;d=v?v(e,d):d}}catch(e){p.e(e)}finally{p.f()}}}catch(e){eat("clipboard copy middleware error:",e)}return d}},{key:"_showCopyCutSuccessMessage",value:function(){var e=this._selection,t=null==e?void 0:e.getRangeAt(0),n=null==t?void 0:t.start,r=null==t?void 0:t.end;if(!e||!n||!r)return null;if(this._selectionService.isRowSelection()){var i=this._selectionService.getSelectRowIndexes().length;p.b.success(wx("成功复制 $1 条记录",i))}else{var o=r.row-n.row+1,a=r.column-n.column+1;p.b.success(wx("成功复制 $1 个单元格",o*a))}}}])}();function nat(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rat(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nat(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nat(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iat(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oat(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oat(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function oat(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Qot([Yf(XA)],tat.prototype,"_readService",2),Qot([Yf(yot),If()],tat.prototype,"_selectionService",2),Qot([Yf(Fit)],tat.prototype,"_rowControllerService",2),Qot([Yf(RC)],tat.prototype,"_configuration",2),Qot([Yf(Dot)],tat.prototype,"_clipboardRegistry",2),Qot([Yf(hD)],tat.prototype,"_abilityService",2),tat=Qot([Gf()],tat);var aat=Object.defineProperty,lat=Object.getOwnPropertyDescriptor,uat=function(e,t,n,r){for(var i,o=r>1?void 0:r?lat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&aat(t,n,o),o},cat=DD.Plugin("clipboard"),sat=function(){return ox((function e(){rx(this,e),this._pasteData=null}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();if(mot(t)){var n=t.anchor,r=t.focus,i=r.row-n.row+1,o=r.column-n.column+1;return{startRowIndex:n.row,startColIndex:n.column,rowCount:i,colCount:o}}return null}},{key:"paste",value:(r=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection){e.next=2;break}return e.abrupt("return");case 2:return p.b.destroy(),this._asyncPasteIfNeedUpload(t),e.next=6,this._getStdCellValueFromClip(t);case 6:this._pasteData=e.sent,this._process(this._selection,this._pasteData);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_getStdCellValueFromClip",value:(n=aO(QC.mark((function e(t){var n,r,i,o,a,l,u,c,s;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=this._configuration.getValue("clipboard.clipboardApi.disable"),i=[{key:Fot.laketable,serializer:Yot.laketable},{key:Fot.html,serializer:Yot.html},{key:Fot.text,serializer:Yot.text}],o=0,a=i;case 4:if(!(o<a.length)){e.next=16;break}return l=a[o],u=l.key,c=l.serializer,e.next=9,zot.getClipboardData(u,t,{disableClipboardApi:r});case 9:if((s=e.sent)&&(n=c.deserialize(s)),!n){e.next=13;break}return e.abrupt("break",16);case 13:o++,e.next=4;break;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_process",value:(t=aO(QC.mark((function e(t,n){var r,i,o,a,l,u=this;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enable(t,n)){e.next=2;break}return e.abrupt("return");case 2:return r=n.cells,i=r.length,o=r[0].length,a=i*o,l=p.b.loading(wx("正在处理粘贴内容..."),0),e.abrupt("return",new Promise((function(e){setTimeout(aO(QC.mark((function r(){var i,o,a,c,s,d,f,h,v,g,m,y,b,w,_,x,k,C,S,O,E;return QC.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return b=null==(i=u._selectionService)?void 0:i.getSelection(),r.next=3,u._commandService.execCommand("pasteUpdateRecords",{selection:t,pasteData:n,colCount:(null==b?void 0:b.columnCount)||1});case 3:w=r.sent,_=(null==(a=null==(o=null==w?void 0:w.result)?void 0:o.data)?void 0:a.createRecordIds)||[],x=(null==(s=null==(c=null==w?void 0:w.result)?void 0:c.data)?void 0:s.updateRecordIds)||[];try{if((k=u._clipboardRegistry.getPasteMiddlewares())&&k.length>0&&n){C=iat(k);try{for(C.s();!(S=C.n()).done;)(O=S.value)&&O(t,n,_,x)}catch(e){C.e(e)}finally{C.f()}}}catch(e){cat("clipboard paste middleware error:",e)}_.length>0&&b&&(E=u._selectionService.createGridSelectionByIndex(b.anchor.row,b.anchor.column,b.rowCount+_.length,b.columnCount),u._selectionService.setSelection(E)),l(),0===(null==(d=null==w?void 0:w.result)?void 0:d.code)?p.b.success(null==(f=null==w?void 0:w.result)?void 0:f.message):(null==(h=null==w?void 0:w.result)?void 0:h.code)&&(null==(v=null==w?void 0:w.result)?void 0:v.code)>0?p.b.error(null==(g=null==w?void 0:w.result)?void 0:g.message):-1===(null==(m=null==w?void 0:w.result)?void 0:m.code)&&(console.error('Internal Error After execCommand: "pasteUpdateRecords", '.concat(null==(y=null==w?void 0:w.result)?void 0:y.message)),p.b.error(wx("粘贴失败, 请稍后重试"))),e(null==w?void 0:w.result);case 11:case"end":return r.stop()}}),r)}))),a>100?100:0)})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_enable",value:function(e,t){var n,r;if(!t||!e)return!1;var i=e.rowCount,o=e.startRowIndex,a=e.startColIndex;if(o+i>this._readService.maxRecordCount)return p.b.error(wx("数据表已达最大行数限制")),!1;var l=(null==(n=this._readService.getAllViewFields())?void 0:n.length)||0;return!(a+((null==(r=t.fields)?void 0:r.length)||0)>l)||(p.b.error(wx("粘贴失败，没有足够的列")),!1)}},{key:"_asyncPasteIfNeedUpload",value:(e=aO(QC.mark((function e(t){var n,r,i,o,a,l,u=this;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection&&t){e.next=2;break}return e.abrupt("return");case 2:if(n=zot.getFilesFromClipBoard(t),r=null==n?void 0:n[0]){e.next=6;break}return e.abrupt("return");case 6:if((i=this._readService.getCellByIndexes(this._selection.startRowIndex,this._selection.startColIndex))&&[xO.IMAGE,xO.FILE].includes(i.fieldType)){e.next=10;break}return console.warn("target field type is not support for file"),e.abrupt("return");case 10:this._uploadService.getAccept(null==i?void 0:i.fieldType),o=(null==i?void 0:i.fieldType)===xO.IMAGE?this._uploadService.uploadImage(r):this._uploadService.uploadFile(r),a=rat(rat({},this._selection),{},{rowCount:1,colCount:1}),l=o.onDidChange(function(){var e=aO(QC.mark((function e(t){var n,r,o,c;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status!==lKe.ERROR){e.next=3;break}return p.b.error(t.message||wx("上传失败，请重试")),e.abrupt("return");case 3:if(t.status!==lKe.TIMEOUT){e.next=6;break}return p.b.error(t.message||wx("上传超时，请重试")),e.abrupt("return");case 6:if(t.status!==lKe.SUCCESS){e.next=13;break}return r=t.file,o=rat(rat({},i),{},{value:null==(n=i.value||[])?void 0:n.concat([r])}),c={cells:[[o]]},e.next=12,u._process(a,c);case 12:l.destroy();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,r}();function dat(e,t,n){return t=DC(t),jC(e,fat()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function fat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fat=function(){return!!e})()}uat([Yf(XA)],sat.prototype,"_readService",2),uat([Yf(yot),If()],sat.prototype,"_selectionService",2),uat([Yf(Lj)],sat.prototype,"_commandService",2),uat([Yf(RC)],sat.prototype,"_configuration",2),uat([Yf(HKe)],sat.prototype,"_uploadService",2),uat([Yf(Dot)],sat.prototype,"_clipboardRegistry",2),sat=uat([Gf()],sat);var hat=Object.defineProperty,pat=Object.getOwnPropertyDescriptor,vat=function(e,t,n,r){for(var i,o=r>1?void 0:r?pat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hat(t,n,o),o},gat=function(e){function t(){return rx(this,t),dat(this,t,arguments)}return NC(t,e),ox(t,[{key:"getCopyMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerCopyMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getPasteMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerPasteMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}(HC);vat([gh(Tot)],gat.prototype,"clipboardProvider",2),gat=vat([Gf({token:Dot})],gat);var mat=Object.defineProperty,yat=Object.getOwnPropertyDescriptor,bat=function(e,t,n,r){for(var i,o=r>1?void 0:r?yat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mat(t,n,o),o},wat=function(){return ox((function e(){rx(this,e),this._onCopy=null,this._onCut=null,this._onPaste=null}),[{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"_isGridView",get:function(){return this._readService.getActiveViewType()===WO.GRID}},{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"copy",hotkey:"copy",name:"copy",enableOnInput:!1,preventDefault:!0,isEnable:function(){return t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.copy(e)}}),e.registerItem({id:"cut",hotkey:"cut",name:"cut",preventDefault:!0,enableOnInput:!1,isEnable:function(){return!t._abilityService.isReadonly(Qj.VIEW)&&t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.cut(e)}}),e.registerItem({id:"paste",hotkey:"paste",name:"paste",preventDefault:!0,enableOnInput:!1,isEnable:function(){var e,n;return!t._abilityService.isReadonly(Qj.VIEW)&&t._hasSelection()&&t._isGridView&&(!!(null==(e=document.activeElement)?void 0:e.closest(".lakex-grid-cell-editor-keyboard-input"))||!!(null==(n=document.activeElement)?void 0:n.closest(".lakex-viewer-grid-content")))},onHotKey:function(e){t._pasteService.paste(e)}})}},{key:"destroy",value:function(){var e,t,n;null==(e=this._onCopy)||e.destroy(),null==(t=this._onCut)||t.destroy(),null==(n=this._onPaste)||n.destroy()}}],[{key:"pluginModule",value:function(){return ch().register(this).contribution(Tot).register(gat).register(tat).register(sat)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"clipboard",type:"object",title:"粘贴板",properties:{"clipboardApi.disable":{type:"boolean",description:"不使用 clipboard api"}}}),e.registerDefaultValue({"clipboard.clipboardApi.disable":!1})}}])}();function _at(e,t,n){return t=DC(t),jC(e,xat()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function xat(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xat=function(){return!!e})()}wat.pluginName="render-clipboard",bat([Yf(XA)],wat.prototype,"_readService",2),bat([Yf(hD)],wat.prototype,"_abilityService",2),bat([Yf(tat)],wat.prototype,"_copyCutService",2),bat([Yf(sat)],wat.prototype,"_pasteService",2),bat([Yf(yot),If()],wat.prototype,"_selectionService",2),wat=bat([Gf({contrib:[Sze,XYe]})],wat);var kat=Object.defineProperty,Cat=Object.getOwnPropertyDescriptor,Sat=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kat(t,n,o),o},Oat=function(e){return e.HEADER="header",e.GROUP_HEADER="group_header",e.CELL="cell",e.MULTI_CELL="multi_cell",e.KANBAN_RECORD="kanban_record",e.CARD_RECORD="card_record",e.CALENDAR_RECORD="calendar_record",e}(Oat||{}),Eat=function(e){function t(){var e;return rx(this,t),(e=_at(this,t,arguments))._onContextMenu=e._register(new dS),e.contextMenuInfo=null,e.onContextMenu=e._onContextMenu.event,e}return NC(t,e),ox(t,[{key:"showContextMenu",value:function(e){this._onContextMenu.emit(e),this.contextMenuInfo=e}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Sat([Df()],Eat.prototype,"destroy",1),Eat=Sat([Gf()],Eat);var Iat=Object.defineProperty,Pat=Object.getOwnPropertyDescriptor,Mat=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return ch().register(this).register(Eat)}}])}();Mat.pluginName="render-context-menu",Mat=function(e,t,n,r){for(var i,o=r>1?void 0:r?Pat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Iat(t,n,o),o}([Gf({contrib:Sze})],Mat);var Rat=Rf.defineToken("ViewerRowHeaderIconContribution"),Aat=Object.defineProperty,jat=Object.getOwnPropertyDescriptor,Dat=function(e,t,n,r){for(var i,o=r>1?void 0:r?jat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Aat(t,n,o),o},Tat=function(){return ox((function e(){var t=this;rx(this,e),this._getExpandRecordRecordHeaderIcon=function(){var e,n,r=t._viewerGridRecordHeaderIconContribution.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getHeaderIcon)?void 0:n.call(e):null}}),[{key:"ExpandRecordRecordHeaderIcon",get:function(){return this._getExpandRecordRecordHeaderIcon()}}])}();Dat([gh(Rat)],Tat.prototype,"_viewerGridRecordHeaderIconContribution",2),Tat=Dat([Gf()],Tat);var Fat=Object.defineProperty,Nat=Object.getOwnPropertyDescriptor,Lat=function(e,t,n,r){for(var i,o=r>1?void 0:r?Nat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Fat(t,n,o),o},Bat=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){this.isPaginationShow=this._configuration.getValue("viewerGrid.pagination.show"),this.isPaginationGroupIndexReset=this._configuration.getValue("viewerGrid.pagination.groupIndexReset")}},{key:"getRowIndex",value:function(e,t,n){if(t)return this.isPaginationGroupIndexReset?n+1:t.paginationStartIndex+n+1;if(!this.isPaginationShow)return e+1;var r=this._readService.getViewConfig();return e+(Math.min(r.get("pagination_current")||1,1)-1)*(this._configuration.getValue("viewerGrid.pagination.pageSize")||20)+1}}])}();Lat([Yf(XA)],Bat.prototype,"_readService",2),Lat([Yf(RC)],Bat.prototype,"_configuration",2),Lat([jf()],Bat.prototype,"init",1),Bat=Lat([Gf()],Bat);var Vat=function(e){var t=e.recordId,n=SWe(Xze),r=SWe(RC).getValue("expandRecord.hotkey.disable");return u.a.createElement(O.b,{prefixCls:"ant"},u.a.createElement(j4e,{title:wx(r?"展开行":"展开行（Space）"),placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("div",{className:"lakex-viewer-grid-row-expander",onClick:function(e){e.stopPropagation(),null==n||n.emitClickRecord({recordId:t})}},u.a.createElement(X$e,{type:"RowExpand"}))))},zat=Object.defineProperty,Hat=Object.getOwnPropertyDescriptor,Wat=function(e,t,n,r){for(var i,o=r>1?void 0:r?Hat(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zat(t,n,o),o},Uat=function(){return ox((function e(){rx(this,e)}),[{key:"getHeaderIcon",value:function(){return Vat}},{key:"registerOpenerApp",value:function(){return[{name:"record",display_name:"Record",description:"记录"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"record-opener",apps:["record"],autoClear:!0,open:function(t){var n;e._lifecycleService.status<cx.Rendered?e._lifecycleService.when(cx.Rendered,(function(){var n;null==(n=e._renderService)||n.emitClickRecord({recordId:t})})):null==(n=e._renderService)||n.emitClickRecord({recordId:t})}}]}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function Gat(e){var t=SWe(hD);return{isReadonly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null==t?void 0:t.isReadonly.apply(t,[e].concat(r)))||!1},can:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(null==t?void 0:t.can.apply(t,[n,e].concat(i)))||!1},canCreate:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null==t?void 0:t.canCreate.apply(t,[e].concat(r)))||!1},canDelete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null==t?void 0:t.canDelete.apply(t,[e].concat(r)))||!1},canUpdate:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null==t?void 0:t.canUpdate.apply(t,[e].concat(r)))||!1},canRead:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null==t?void 0:t.canRead.apply(t,[e].concat(r)))||!1}}}function Yat(){var e=SWe(XA),t=SWe(cT),n=e.getActiveView(),r=jF(Object(l.useState)(n),2),i=r[0],o=r[1],a=Object(l.useCallback)((function(){var t=e.getActiveView();o(t)}),[e]);return Object(l.useLayoutEffect)((function(){var e=t.onDataLoaded((function(){a()})),n=t.onDataChanged((function(){a()}));return function(){e.destroy(),n.destroy()}}),[t,a]),i}function $at(){var e=SWe(XA),t=SWe(cT),n=jF(Object(l.useState)(e.getViews()),2),r=n[0],i=n[1],o=function(){i(e.getViews())};return P$e((function(){var e=t.onDataLoaded((function(){o()})),n=t.onDataChanged((function(){o()}));return function(){e.destroy(),n.destroy()}}),[]),r}function qat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=SWe(XA),n=SWe(cT),r=function(){var e,n=t.getActiveView(),r=null==(e=t.getViewGroup())?void 0:e.group,i=r?null:t.getViewRecords(),o=r?t.getGroupViewRecords():null,a=t.getViewFields(),l=t.getViewConfig(),u=t.getViewFilter();return{view:n,group:r,fields:t.getAllFields(),viewRecords:i,groupViewRecords:o,viewFields:a,viewConfig:l,filter:u}},i=jF(Object(l.useState)(r()),2),o=i[0],a=i[1],u=function(n){var i=t.getActiveView();e.viewId&&i.get("uuid")!==e.viewId||(n=n||r(),a(n))};return P$e((function(){var e=n.onDataLoaded((function(){u()})),t=n.onDataChanged((function(){u()}));return function(){e.destroy(),t.destroy()}}),[]),o}Uat.pluginName="render-expand-record",Wat([Yf(Xze)],Uat.prototype,"_renderService",2),Wat([Yf(sx)],Uat.prototype,"_lifecycleService",2),Uat=Wat([Gf({contrib:[Rat,fHe]})],Uat);var Kat=function(e){return e.changeFieldType="changeFieldType",e.updateFieldName="updateFieldName",e.updateFieldHidden="updateFieldHidden",e.updateField="updateField",e}(Kat||{});function Xat(e){var t=SWe(cT),n=SWe(XA),r=SWe(Lj),i=Gat(Qj.TABLE).isReadonly(),o=jF(Object(l.useState)((function(){return n.getField(e)})),2),a=o[0],u=o[1],c=qYe();P$e((function(){e&&u(n.getField(e))}),[e,n]);var s=null==a?void 0:a.get("type"),d=null==a?void 0:a.get("name");P$e((function(){var i=null==r?void 0:r.onDidExecuteCommand((function(t){var r=t.context;if(Object.values(Kat).includes(r.commandName)){var i=r.argArray[0],o=i.uuid;"updateField"===r.commandName&&(o=i.field.get("uuid")),e&&o===e&&(u(n.getField(e)),c())}})),o=t.onDataChanged((function(t){"stack-undo"!==t&&"stack-redo"!==t&&"collab-synced"!==t||u(n.getField(e))}));return function(){null==i||i.destroy(),null==o||o.destroy()}}),[r,e,n,t]);return e&&a?{field:a,fieldId:e,fieldName:d,fieldType:s,fieldConfig:a.get("config"),fieldOptions:n.getFieldOptions(a.get("uuid")),isPrimary:!1,updateProperty:function(t){return null==r||r.execCommand("updateField",{field:a,newFieldProperty:t}),n.getField(e)},hasPermissionForWrite:function(){return i}}:{}}var Jat=["addField","removeField","changeFieldOrder"].concat(Q_(Object.values(Kat)));function Zat(){var e=SWe(cT),t=SWe(XA),n=SWe(Lj),r=jF(Object(l.useState)((function(){return null==t?void 0:t.getAllViewFields()})),2),i=r[0],o=r[1];return P$e((function(){var r=null==n?void 0:n.onDidExecuteCommand((function(e){var n=e.context;Jat.includes(n.commandName)&&o(null==t?void 0:t.getAllViewFields())})),i=e.onDataChanged((function(e){"stack-undo"!==e&&"stack-redo"!==e||o(null==t?void 0:t.getAllViewFields())}));return function(){r.destroy(),i.destroy()}}),[n,t,e]),i||null}function Qat(e,t){var n=SWe(XA),r=SWe(aM),i=jF(Object(l.useState)((function(){return n.getPrimaryCellInRecord(e,t)})),2),o=i[0],a=i[1];return P$e((function(){a(n.getPrimaryCellInRecord(e,t))}),[n,e,t]),P$e((function(){var i=null==r?void 0:r.onCellChange((function(r){a(n.getPrimaryCellInRecord(e,t))}));return function(){null==i||i.destroy()}}),[n,r,e,t]),{title:(null==o?void 0:o.formattedValue)||""}}function elt(e,t){var n=SWe(XA),r=SWe(cT),i=SWe(Lj),o=SWe(aM),a=Xat(t),u=a.field,c=a.fieldType,s=Gat(Qj.TABLE).isReadonly(),d=Object(l.useCallback)((function(e,t){return n.getCell(t,e)}),[]),f=jF(Object(l.useState)((function(){return d(e,t)})),2),h=f[0],p=f[1];P$e((function(){p(d(e,t))}),[e,t]),P$e((function(){var n=null==o?void 0:o.onCellChange((function(n){n.recordId===e&&n.fieldId===t&&p(d(e,t))})),i=r.onDataChanged((function(n){e&&t&&("stack-undo"!==n&&"stack-redo"!==n||p(d(e,t)))}));return function(){null==n||n.destroy(),null==i||i.destroy()}}),[t,e]);var v=Object(l.useCallback)((function(n){if(!s){if(!e||!t||!h)return null;var r={recordId:e,fieldId:t,value:n,fieldType:c,uuid:h.uuid};r&&(null==i||i.execCommand("setCell",r))}}),[e,t,c,h,s]);return e&&t&&u&&h?{fieldId:t,recordId:e,fieldType:c,value:h.value,errorMessage:h.errorMessage,formatValue:h.formatValue,keyValue:h.keyValue,updated_at:h.updated_at,setCell:v}:null}var tlt=function(e){return e.Checkbox="checkbox",e.Radio="radio",e}(tlt||{}),nlt=[{value:!0,name:wx("是")},{value:!1,name:wx("否")}],rlt=function(e){var t,n=e.id,r=e.type,i=void 0===r?tlt.Checkbox:r,o=e.defaultValue,a=e.value,l=e.onChange,c=e.focus,s=jF(O$e({value:a,defaultValue:o,onChange:l}),2),d=s[0],f=s[1];return i===tlt.Checkbox?t=u.a.createElement(kXe,{checked:d,onChange:function(e){var t=e.target.checked;null==l||l(t),f(t)}}):i===tlt.Radio&&(t=u.a.createElement(_.a.Group,{defaultValue:d,autoFocus:c},nlt.map((function(e,t){return u.a.createElement(_.a,{value:e.value,key:t,onChange:function(t){var n=e.value;null==l||l(n),f(n)}},u.a.createElement("span",{className:"lakex-table-form-type-checkbox-value"},e.name))})))),u.a.createElement("div",{className:"lakex-table-form-checkbox",id:n},t)},ilt=function(e){return u.a.createElement("div",{className:"lakex-table-form-checkbox-readonly"},u.a.createElement(kXe,{checked:e.value,onChange:function(t){if(!e.readonly){var n=t.target.checked;e.onChange(n)}}}))},olt=Object(l.memo)((function(e){var t=e.readonly,n=e.cell,r=!Gat(Qj.RECORD).canUpdate(),i=SWe(Lj),o=elt(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),a=Object(l.useCallback)((function(e){r||t||null==o||o.setCell(e)}),[r,t,i]),c=o?o.value:null==n?void 0:n.value;return u.a.createElement(ilt,{readonly:t,value:!!c,onChange:a})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)})),alt=function(e){var t=e.field,n=elt(e.recordId,null==t?void 0:t.get("uuid")),r=Object(l.useCallback)((function(e){null==n||n.setCell(e)}),[]);return n?u.a.createElement(rlt,{id:n.uuid,defaultValue:n.value,value:n.value,onChange:r}):null};function llt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ult=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?llt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):llt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCheckbox"},e))};function clt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var slt=function(e){return u.a.createElement(rlt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?clt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):clt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:tlt.Radio},e))},dlt=Object.defineProperty,flt=Object.getOwnPropertyDescriptor,hlt=function(e,t,n,r){for(var i,o=r>1?void 0:r?flt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dlt(t,n,o),o},plt=function(){return ox((function e(){rx(this,e),this.fieldType="checkbox",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return olt}},{key:"getFieldEditComponent",value:function(){return alt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?ult:null}},{key:"getFieldFormComponent",value:function(){return slt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();plt.pluginName="render-field-checkbox",hlt([Yf(RC)],plt.prototype,"_configuration",2),plt=hlt([Gf({contrib:[Oze,Sze]})],plt);var vlt=["id","onChange","defaultValue","value","focus","renderMode","format","rectStyle"];function glt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mlt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?glt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):glt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ylt=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,i=e.defaultValue,o=e.value,c=e.focus,s=e.renderMode,d=e.format,f=e.rectStyle,h=void 0===f?{}:f,p=EWe(e,vlt),v=SWe(RC),g=jF(O$e({value:o,defaultValue:i,onChange:r}),2),m=g[0],y=g[1],b=Object(l.useRef)(null),w=Object(l.useMemo)((function(){return m?a()(m):""}),[m]);P$e((function(){c&&setTimeout((function(){var e;null==(e=b.current)||e.focus()}),100)}),[c]);var _=(null==d?void 0:d.split(" "))||[],x=_[1];return u.a.createElement("div",{className:"lakex-table-form-date lakex-table-form-date-render-mode-".concat(s),id:t},u.a.createElement(X0e,mlt(mlt({ref:b,defaultValue:w,value:w,autoFocus:c,format:d,picker:"HH:mm"===d?"time":"date",showTime:x&&{format:_[1]},onChange:function(){var e;y(null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.toDate())},style:mlt({},h)},p),{},{getPopupContainer:function(){var e=(null==v?void 0:v.getValue("modal.customModalContainer"))||document.body,t=e.querySelector(".lakex-table-date-picker-container");return t||((t=document.createElement("div")).classList.add("lakex-table-date-picker-container"),e.appendChild(t)),t}})))},blt=function(e){var t=e.value,n=e.format,r=void 0===n?"YYYY-MM-DD":n,i=e.showEmpty,o=e.textColor;return t?u.a.createElement("div",{className:"lakex-table-form-date-readonly",style:o?{color:"rgb(var(--lt-base-".concat(o,"))")}:void 0},t?a()(t).format(r):""):i?u.a.createElement(oKe,null):null},wlt=Object(l.memo)((function(e){var t,n,r=e.cell,i=Xat(null==r?void 0:r.fieldId),o=null==r?void 0:r.value;return"number"==typeof o&&(o=new Date(o)),u.a.createElement(blt,{key:null==r?void 0:r.uuid,value:o,format:(null==(n=null==(t=i.field)?void 0:t.get("config"))?void 0:n.date_format)||"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function _lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xlt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_lt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreatedAt"},e))},klt=Object.defineProperty,Clt=Object.getOwnPropertyDescriptor,Slt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Clt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&klt(t,n,o),o},Olt=function(){return ox((function e(){rx(this,e),this.fieldType="createdAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return wlt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?xlt:null}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Olt.pluginName="render-field-created-at",Slt([Yf(RC)],Olt.prototype,"_configuration",2),Olt=Slt([Gf({contrib:[Oze,Sze]})],Olt);var Elt=Object(l.memo)((function(e){var t,n,r=e.cell,i=e.textColor,o=Xat(null==r?void 0:r.fieldId),a=elt(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),l=a?a.value:null==r?void 0:r.value;return"number"==typeof l&&(l=new Date(l)),u.a.createElement(blt,{key:null==r?void 0:r.fieldId,value:l,format:null==(n=null==(t=o.field)?void 0:t.get("config"))?void 0:n.date_format,textColor:i})}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)}));function Ilt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Plt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ilt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ilt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldDate"},e))},Mlt=["cell","defaultValue","onCellChange"];function Rlt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Alt=function(e){var t,n,r=e.cell,i=e.defaultValue,o=e.onCellChange,a=EWe(e,Mlt),l=Xat(null==r?void 0:r.fieldId);return r?u.a.createElement(ylt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rlt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rlt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:r.fieldId,format:null==(n=null==(t=l.field)?void 0:t.get("config"))?void 0:n.date_format,defaultValue:i,value:r.value,onChange:function(e){null==o||o(e)}},a)):null};function jlt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dlt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jlt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jlt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tlt=function(e){var t,n;return u.a.createElement(ylt,Dlt(Dlt({},e),{},{format:null==(n=null==(t=e.viewField.get("field"))?void 0:t.get("config"))?void 0:n.date_format}))},Flt=Object.defineProperty,Nlt=Object.getOwnPropertyDescriptor,Llt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Nlt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Flt(t,n,o),o},Blt=function(){return ox((function e(){rx(this,e),this.fieldType="date",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Elt}},{key:"getFieldEditComponent",value:function(){return Alt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Plt:null}},{key:"getFieldFormComponent",value:function(){return Tlt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Blt.pluginName="render-field-date",Llt([Yf(RC)],Blt.prototype,"_configuration",2),Blt=Llt([Gf({contrib:[Oze,Sze]})],Blt);var Vlt=function(e){var t=e.id,n=e.defaultValue,r=void 0===n?"":n,i=e.focus,o=e.onBlur,a=e.renderMode,c=e.prefix,s=Object(l.useRef)(null),d=jF(O$e({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),f=d[0],h=d[1],p=SWe(YHe);P$e((function(){i&&s.current&&s.current.focus({cursor:"end"})}),[i]);var v=null!==c?c:u.a.createElement(X$e,{type:"FieldEmail",size:14});return u.a.createElement("div",{className:"lakex-table-form-email lakex-table-form-email-render-mode-".concat(a),id:t},u.a.createElement(LYe,{allowClear:a!==Pze.LITE,value:f,defaultValue:r,type:"text",placeholder:wx("请输入"),prefix:v,onChange:function(t){var n,r=t.target.value;h(r),null==(n=e.onChange)||n.call(e,r)},onBlur:o,suffix:u.a.createElement(X$e,{className:F()("lakex-table-form-email-action",{hasValue:f}),type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==p||p.open("email","mailto:"+f)}}),autoFocus:i,ref:s}))},zlt=function(e){var t=e.value,n=e.showEmpty,r=e.textColor,i=SWe(YHe);if(!t)return n?u.a.createElement(oKe,null):null;return u.a.createElement("div",{className:"lakex-table-form-email-readonly"},u.a.createElement("span",{className:"lakex-table-form-email-text",style:r?{color:"rgb(var(--lt-base-".concat(r,"))")}:void 0},t),u.a.createElement(X$e,{className:"lakex-table-form-email-action",type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==i||i.open("email","mailto:"+t)}}))},Hlt=Object(l.memo)((function(e){var t=e.cell,n=e.textColor,r=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),i=r?r.value:null==t?void 0:t.value;return i?u.a.createElement(zlt,{key:null==t?void 0:t.fieldId,value:i||"",textColor:n}):null}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)}));function Wlt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ult=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wlt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wlt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldEmail"},e))},Glt=["field","cell","defaultValue","onCellChange"];function Ylt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $lt=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,i=EWe(e,Glt);return t?u.a.createElement(Vlt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ylt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ylt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value,prefix:e.renderMode===Pze.LITE?void 0:u.a.createElement(X$e,{type:"FieldEmail"}),onChange:function(e){null==r||r(e)}},i)):null};function qlt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Klt=function(e){return u.a.createElement(Vlt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qlt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qlt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Xlt=Object.defineProperty,Jlt=Object.getOwnPropertyDescriptor,Zlt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Jlt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Xlt(t,n,o),o},Qlt=function(){return ox((function e(){rx(this,e),this.fieldType="email",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Hlt}},{key:"getFieldEditComponent",value:function(){return $lt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Ult:null}},{key:"getFieldRules",value:function(){return this._emailField.rules}},{key:"getFieldFormComponent",value:function(){return Klt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Qlt.pluginName="render-field-email",Zlt([Yf(HL)],Qlt.prototype,"_emailField",2),Zlt([Yf(RC)],Qlt.prototype,"_configuration",2),Qlt=Zlt([Gf({contrib:[Oze,Sze]})],Qlt);var eut=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,i=e.onCreate,o=void 0===i?function(){}:i,a=e.onUpdate,l=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,h=e.style;return u.a.createElement("div",{className:"lakex-table-file-form-upload",style:h||{}},u.a.createElement(cXe,{id:t||Cx(6),type:aKe.FILE,onChange:n,onCreate:o,onUpdate:l,onRemove:s,onOrderChange:f,files:r}))};function tut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rut=function(e){var t,n=e.file,r=e.size,i=void 0===r?32:r,o=SWe(YHe),a=SWe(hWe);if(!n.src)return null;var l=null==a?void 0:a.getFileKey(n);return l&&(t=function(e){return u.a.createElement(Q$e,nut(nut({ext:l},e),{},{size:i}))}),u.a.createElement("div",{className:"lakex-table-simple-file-item file","data-id":n.uid},u.a.createElement("div",{className:"lakex-table-simple-file-img"},t&&u.a.createElement(j4e,{title:n.name,placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement(t,{className:"lakex-table-simple-file-file",onClick:function(e){e.preventDefault(),e.stopPropagation();var t={size:n.size};null==o||o.open("file",n.src,t)}}))),u.a.createElement("div",{className:"lakex-table-simple-file-name"},n.name))},iut=function(e){var t,n=e.id,r=e.value,i=void 0===r?[]:r;return i?u.a.createElement("div",{className:"lakex-table-file-list",id:n},null==(t=i.map)?void 0:t.call(i,(function(e,t){return u.a.createElement(rut,{key:e.uid||t,file:e,size:24})}))):null},out=Object(l.memo)((function(e){var t=e.cell,n=e.readonly,r=Gat(Qj.VIEW).canUpdate(),i=SWe(Xze),o=(null==t?void 0:t.recordId)||"",a=(null==t?void 0:t.fieldId)||"",c=elt(o,a),s=c?c.value:null==t?void 0:t.value,d=Object(l.useCallback)((function(e){o&&a&&(null==i||i.emitClickCellIcon({recordId:o,fieldId:a,event:e,iconName:"cellFileIcon"}))}),[o,a]);return 0===(null==s?void 0:s.length)?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(iut,{value:s}),r&&!n&&u.a.createElement(X$e,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function aut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var lut=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldFile"},e))},uut=["field","recordId","cell","onCellChange"];function cut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var sut=function(e){var t=e.field,n=e.recordId,r=e.cell,i=e.onCellChange,o=EWe(e,uut),a=SWe(Lj),l=SWe(z9e),c=SWe(JP).fieldUriModel;return t&&r?e.renderMode===Pze.LITE?u.a.createElement("div",{className:"lakex-table-field-file-editable-lite",onClick:function(e){var r={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n}};l.open("fieldFileEditor",r)}},r.value?r.value.map((function(e){return u.a.createElement("div",{key:e.uid,className:"lakex-table-field-file-editable-wrap"},u.a.createElement(rut,{key:e.uid,file:e}))})):u.a.createElement("p",{className:"lakex-table-field-file-placeholder"},wx("请上传"))):u.a.createElement(eut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==r?void 0:r.uuid)||Cx(32),defaultValue:r.value,onChange:function(e){null==i||i(e)},onOrderChange:function(e){var r,i,o=e.targetUid,l=e.sourceUid,u=null==(r=c.findOne({uid:o}))?void 0:r.get("uuid"),s=null==(i=c.findOne({uid:l}))?void 0:i.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n,targetValueId:u,sourceValueId:s})}},o)):null};function dut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fut=function(e){return u.a.createElement(eut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},hut=Object.defineProperty,put=Object.getOwnPropertyDescriptor,vut=function(e,t,n,r){for(var i,o=r>1?void 0:r?put(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&hut(t,n,o),o},gut=function(){return ox((function e(){rx(this,e),this.fieldType="file",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return out}},{key:"getFieldEditComponent",value:function(){return sut}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?lut:null}},{key:"getFieldFormComponent",value:function(){return fut}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();gut.pluginName="render-field-file",vut([Yf(RC)],gut.prototype,"_configuration",2),gut=vut([Gf({contrib:[Oze,Sze]})],gut);var mut=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,i=e.onCreate,o=void 0===i?function(){}:i,a=e.onUpdate,l=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,h=e.style;return u.a.createElement("div",{className:"lakex-table-file-form-upload",style:h||{}},u.a.createElement(cXe,{id:t,type:aKe.IMAGE,onChange:n,onCreate:o,onUpdate:l,onRemove:s,onOrderChange:f,files:r}))};function yut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var but=function(e){var t,n=e.file,r=e.list,i=void 0===r?[]:r,o=e.size,a=void 0===o?32:o,l=SWe(YHe),c=SWe(NKe),s=n.src;return s?(s=(null==c?void 0:c.getThumbnailUrl(s,n.width,n.height,a))||s,i=i.map((function(e){return e.src=null==c?void 0:c.getRenderUrl(e.src,e.width,e.height),e})),t=function(e){return u.a.createElement("img",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({loading:"lazy",src:s},e))},u.a.createElement("div",{className:"lakex-table-simple-file-item image","data-id":n.uid},u.a.createElement("div",{className:"lakex-table-simple-file-img"},t&&u.a.createElement(j4e,{title:n.name,placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement(t,{className:"lakex-table-simple-file-image",onClick:function(e){e.preventDefault(),e.stopPropagation();var t={list:i,index:i.findIndex((function(e){return e.src===n.src}))};null==l||l.open("image",n.src,t)}}))),u.a.createElement("div",{className:"lakex-table-simple-file-name"},n.name))):null},wut=function(e){var t,n=e.id,r=e.value;return r?u.a.createElement("div",{className:"lakex-table-image-list",id:n},null==(t=r.map)?void 0:t.call(r,(function(e,t){return u.a.createElement(but,{key:e.uid||t,file:e,list:r})}))):null},_ut=Object(l.memo)((function(e){var t=e.cell,n=e.readonly,r=Gat(Qj.VIEW).canUpdate(),i=SWe(Xze),o=(null==t?void 0:t.recordId)||"",a=(null==t?void 0:t.fieldId)||"",c=elt(o,a),s=c?c.value:null==t?void 0:t.value,d=Object(l.useCallback)((function(e){null==i||i.emitClickCellIcon({recordId:o,fieldId:a,event:e,iconName:"cellImageIcon"})}),[o,a]);return 0===(null==s?void 0:s.length)?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(wut,{value:s}),r&&!n&&u.a.createElement(X$e,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function xut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kut=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldImage"},e))},Cut=["field","cell","recordId","defaultValue","onCellChange"];function Sut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Out=function(e){var t=e.field,n=e.cell,r=e.recordId,i=e.defaultValue,o=e.onCellChange,a=EWe(e,Cut),l=SWe(Lj),c=SWe(z9e),s=SWe(NKe),d=SWe(JP).fieldUriModel;return t?e.renderMode===Pze.LITE?u.a.createElement("div",{className:"lakex-table-field-image-editable-lite",onClick:function(e){var n={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r}};c.open("fieldImageEditor",n)}},i?i.map((function(e){var t=s.getRenderUrl(e.src,e.width,e.height);return u.a.createElement("div",{key:e.src,className:"lakex-table-field-image-editable-wrap"},u.a.createElement("img",{loading:"lazy",src:t}))})):u.a.createElement("p",{className:"lakex-table-field-image-placeholder"},wx("请上传"))):u.a.createElement(mut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==n?void 0:n.uuid)||Cx(32),defaultValue:i,onChange:function(e){null==o||o(e)},onOrderChange:function(e){var n,i,o=e.targetUid,a=e.sourceUid,u=null==(n=d.findOne({uid:o}))?void 0:n.get("uuid"),c=null==(i=d.findOne({uid:a}))?void 0:i.get("uuid");l.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r,targetValueId:u,sourceValueId:c})}},a)):null};function Eut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Iut=function(e){return u.a.createElement(mut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Put=Object.defineProperty,Mut=Object.getOwnPropertyDescriptor,Rut=function(e,t,n,r){for(var i,o=r>1?void 0:r?Mut(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Put(t,n,o),o},Aut=function(){return ox((function e(){rx(this,e),this.fieldType="image",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return _ut}},{key:"getFieldEditComponent",value:function(){return Out}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?kut:null}},{key:"getFieldFormComponent",value:function(){return Iut}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function jut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Aut.pluginName="render-field-image",Rut([Yf(RC)],Aut.prototype,"_configuration",2),Aut=Rut([Gf({contrib:[Oze,Sze]})],Aut);var Dut=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldLink"},e))},Tut=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.defaultValue,r=e.onSubmit,i=void 0===r?function(){}:r,o=e.onBlur,a=void 0===o?function(){}:o,c=e.style,s=SWe(GT),d=Object(l.useRef)(),f=Object(l.useRef)(),h=u.a.useRef(null),p=jF(u.a.useState(!1),2),v=p[0],g=p[1];Object(l.useImperativeHandle)(t,(function(){return{getValues:function(){var e,t=null==(e=h.current)?void 0:e.getFieldsValue();return m(t)}}})),P$e((function(){e.visible&&setTimeout((function(){var e;null==(e=f.current)||e.focus({cursor:"end"})}),300)}),[n,e.visible]);var m=Object(l.useCallback)((function(e){var t={src:e.src||e.name||"",name:e.name||"",icon:e.icon||""};return{src:jk(t.src)||"http://".concat(t.src),name:t.name,icon:t.icon||""}}),[]),y=function(e){if(""===e.src&&""===e.name)return a();var t=m(e);i(t),a()};return u.a.createElement("div",{className:"lakex-table-link-editor",style:c||{},onKeyDown:function(e){var t;if(e.key===EG.ENTER){var n=null==(t=h.current)?void 0:t.getFieldsValue();y(n)}}},u.a.createElement(e8e,{initialValues:n,onFinish:y,ref:h},u.a.createElement(e8e.Item,{name:"name",label:wx("文本"),className:"lakex-table-link-editor-title"},u.a.createElement(LYe,{ref:d,placeholder:wx("请输入"),autoComplete:"off",suffix:v?u.a.createElement(XKe,{className:"lakex-table-link-editor-fetch lakex-table-link-editor-fetching"}):u.a.createElement(j4e,{title:wx("获取链接标题")},u.a.createElement(X$e,{className:"lakex-table-link-editor-fetch",type:"Change",onClick:function(e){return function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=h.current)?void 0:t.getFieldsValue();g(!0),null==s||s.getLinkDetail(n.src).then((function(e){var t;e&&(null==(t=h.current)||t.setFieldsValue({name:e.title,icon:s.getIconByDetail(e)})),g(!1)}))}(e)}}))})),u.a.createElement(e8e.Item,{name:"src",label:wx("链接"),className:"lakex-table-link-editor-link"},u.a.createElement(LYe,{ref:f,placeholder:wx("请输入"),autoComplete:"off",onBlur:function(e){!function(e){var t;null==(t=h.current)||t.setFieldsValue({icon:""})}(e.target.value)}})),u.a.createElement(e8e.Item,{name:"icon",style:{display:"none"}},u.a.createElement(LYe,{type:"hidden"})),u.a.createElement(e8e.Item,{className:"lakex-table-link-editor-footer"},u.a.createElement(aXe,{onClick:function(){return a()}},wx("取消")),u.a.createElement(aXe,{type:"primary",htmlType:"submit"},wx("确定")))))}))),Fut=function(e){var t=SWe(YHe);return u.a.createElement("span",{className:F()("lakex-table-ui-link",e.className),onClick:function(n){null==t||t.open("link",e.href),e.onClick&&e.onClick(n)},style:e.style},e.children)},Nut=Object.defineProperty,Lut=Object.getOwnPropertyDescriptor,But=function(e,t,n,r){for(var i,o=r>1?void 0:r?Lut(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Nut(t,n,o),o},Vut=function(){return ox((function e(){rx(this,e)}),[{key:"getLinkIconType",value:function(e){if(!(null==e?void 0:e.startsWith("yuqueicon:")))return null;var t=e.split(":")[2],n="DocTypeDefault";return"sheet"===t?n="DocTypeSheet":"design"===t||"artboard"===t?n="DocTypeArtboard":"board"===t?n="DocTypeBoard":"mind"===t?n="DocTypeMind":"table"===t?n="DocTypeTable":"note"===t&&(n="DocTypeNote"),"dark"===this.themeService.getCurrent()&&(n+="Dark"),n}}])}();But([Yf(TF)],Vut.prototype,"themeService",2),Vut=But([Gf()],Vut);var zut=function(e){var t,n,r=e.id,i=e.defaultValue,o=e.useLinkEditor,a=e.prefix,c=e.renderMode,s=e.onChange,d=void 0===s?function(){}:s,f=e.onBlur,h=void 0===f?function(){}:f,p=e.focus,v=SWe(Vut),g=function(e){var t=e.defaultValue,n=e.onChange,r=jF(Object(l.useState)((function(){return Mx(t)?{src:t.src,name:t.name,icon:t.icon}:t})),2),i=r[0],o=r[1],a=jF(Object(l.useState)(!1),2),u=a[0],c=a[1];P$e((function(){o(i)}),[i]);var s=Object(l.useCallback)((function(e){o(e),n(e)}),[n]);return P$e((function(){var e=function(e){e.target.closest(".lakex-table-form-link-popover")||c(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{value:i,visible:u},setVisible:c,checkLink:function(e){e.target.closest(".lakex-table-form-link-anchor")&&(i||(e.preventDefault(),e.stopPropagation(),c(!0)))},onSubmit:s,onInputChange:function(e){var r,i;if(e.target){if(!e.target.value)return void n(null);i=e.target.value,r=jk(e.target.value)}else r=e.src,i=e.name;var a={name:i,src:r,icon:(null==t?void 0:t.icon)||""};a.src||(a.src=a.name),a.name||(a.name=a.src),o(a),n(a)}}}({defaultValue:i,onChange:d}),m=g.state,y=g.setVisible,b=g.checkLink,w=g.onInputChange,_=g.onSubmit;void 0===a&&(a=u.a.createElement(X$e,{type:"FieldLink",size:14}));var x=o?"lakex-table-form-link-useeditor":"",k=m.value&&(m.value.src||m.value.name)&&m.value.icon&&(null==v?void 0:v.getLinkIconType(m.value.icon));return u.a.createElement("div",{className:"lakex-table-form-link ".concat(x," lakex-table-form-link-render-mode-").concat(c),id:r},!o&&u.a.createElement(LYe,{allowClear:!0,defaultValue:null==i?void 0:i.src,type:"text",placeholder:wx("请输入"),prefix:a,onChange:w,autoFocus:p,onBlur:h}),o&&u.a.createElement(U4e,{overlayClassName:"lakex-table-form-link-popover",destroyTooltipOnHide:!0,overlay:u.a.createElement(Tut,{defaultValue:i,onSubmit:_,onBlur:function(){return y(!1)},visible:m.visible}),visible:m.visible},u.a.createElement(u.a.Fragment,null,m.value&&(m.value.src||m.value.name)?u.a.createElement(Fut,{href:null==(t=m.value)?void 0:t.src,className:F()("lakex-table-form-link-anchor",nx({},"lakex-table-form-link-has-icon",k)),onClick:function(e){b(e)}},k&&u.a.createElement(X$e,{type:k,className:"lakex-table-form-link-icon"}),u.a.createElement("div",{className:"lakex-table-form-link-text"},m.value.name)):u.a.createElement(LYe,{allowClear:!0,defaultValue:null==i?void 0:i.src,type:"text",placeholder:wx("请输入"),onBlur:w,onPressEnter:w,autoFocus:p}),(null==(n=m.value)?void 0:n.src)&&u.a.createElement(bXe,{className:"lakex-table-link-editor-qrcode",url:m.value.src}),u.a.createElement(j4e,{title:wx("编辑链接")},u.a.createElement(X$e,{className:"lakex-table-link-editor-action",type:"FieldLink",size:14,onClick:function(){return y(!0)}})))))},Hut=function(e){var t=e.value,n=e.showEmpty,r=e.textColor,i=SWe(Vut);if(!t)return n?u.a.createElement(oKe,null):null;var o=t.icon&&(null==i?void 0:i.getLinkIconType(t.icon));return u.a.createElement("div",{className:"lakex-table-form-link-readonly"},u.a.createElement(Fut,{href:t.src,className:F()(nx({},"lakex-table-form-link-has-icon",o)),style:r?{color:"rgb(var(--lt-base-".concat(r,"))")}:void 0},o&&u.a.createElement(X$e,{type:o,className:"lakex-table-form-link-icon"}),u.a.createElement("div",{className:"lakex-table-form-link-text"},t.name)),t.src&&u.a.createElement(bXe,{className:"lakex-table-form-link-qrcode",url:t.src,mouseEnterDelay:1}))},Wut=Object(l.memo)((function(e){var t=e.cell,n=e.readonly,r=e.isSelected,i=e.textColor,o=!Gat(Qj.RECORD).canUpdate(),a=SWe(Xze),l=null==t?void 0:t.recordId,c=null==t?void 0:t.fieldId,s=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),d=s?s.value:null==t?void 0:t.value;return d?u.a.createElement(u.a.Fragment,null,u.a.createElement(Hut,{key:c,value:d,textColor:i}),!o&&!n&&r&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Dut,{onClick:function(e){e.stopPropagation(),l&&c&&(null==a||a.emitClickCellIcon({recordId:l,fieldId:c,iconName:"cellLinkIcon",event:e}))}}))):null}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)})),Uut=["field","cell","defaultValue","onCellChange","useLinkEditor"];function Gut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yut=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,i=e.useLinkEditor,o=EWe(e,Uut);return t?u.a.createElement(zut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({useLinkEditor:i,id:t.uuid,defaultValue:n,onChange:r},o)):null};function $ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qut=function(e){return u.a.createElement(zut,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$ut(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Kut=Object.defineProperty,Xut=Object.getOwnPropertyDescriptor,Jut=function(e,t,n,r){for(var i,o=r>1?void 0:r?Xut(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Kut(t,n,o),o},Zut=function(){return ox((function e(){rx(this,e),this.fieldType="link",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Wut}},{key:"getFieldEditComponent",value:function(){return Yut}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Dut:null}},{key:"getFieldRules",value:function(){return this._linkField.rules}},{key:"getFieldFormComponent",value:function(){return qut}}],[{key:"pluginModule",value:function(){return ch().register(this).register(Vut)}}])}();Zut.pluginName="render-field-link",Jut([Yf(JT)],Zut.prototype,"_linkField",2),Jut([Yf(RC)],Zut.prototype,"_configuration",2),Zut=Jut([Gf({contrib:[Oze,Sze]})],Zut);var Qut=function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.list,i=e.onUnSelect,o=void 0===i?function(){}:i,a=e.onMentionTagClick,l=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f=null;return f=r&&0!==r.length||!s?u.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap"},null==r?void 0:r.map((function(e){return e?u.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uid,onClick:function(t){l(e)}},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),u.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name),c&&u.a.createElement("span",{className:"lakex-table-form-mention-tag-close",onClick:function(t){t.stopPropagation(),o(e,t)}},u.a.createElement(X$e,{type:"Close"}))):null}))):u.a.createElement("p",{className:"lakex-table-form-mention-placeholder"},wx("请选择")),u.a.createElement("div",{className:F()("lakex-table-form-mention-content",{writeable:c}),onClick:n},f,c&&!d&&u.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:e.onClickDropDownIcon},u.a.createElement(X$e,{type:"ReviewArrowDown",size:16})))},ect=function(e){var t=e.isSelected,n=e.user,r=e.onSelect,i=void 0===r?function(){}:r,o=e.onUnselect,a=void 0===o?function(){}:o,l=F()("lakex-table-form-mention-selector-item",{selected:t});return u.a.createElement("div",{onClick:function(e){t?a(n):i(n)},className:l},u.a.createElement("div",{className:"lakex-table-form-mention-selector-content"},u.a.createElement("span",{className:"lakex-table-form-mention-selector-avatar"},u.a.createElement("img",{src:n.icon})),u.a.createElement("div",null,u.a.createElement("div",{className:"lakex-table-form-mention-selector-name"},n.name),u.a.createElement("div",{className:"lakex-table-form-mention-selector-login"},n.login))),t&&u.a.createElement(X$e,{type:"Check"}))},tct=function(e){var t=e.list,n=e.highlightId,r=e.selectedIds,i=e.emptyText,o=void 0===i?wx("未搜索到结果"):i,a=e.onSelect,l=e.onUnselect;return function(e){P$e((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list");if(e){var t=document.querySelector(".highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}}),[e.highlightId])}({highlightId:n}),t&&t.length>0?u.a.createElement("ul",{className:"lakex-table-form-mention-selector-list"},t.map((function(e){if(!e)return null;var t=F()({highlight:n===e.uid});return u.a.createElement("li",{key:e.uid,className:t},u.a.createElement(ect,{isSelected:r.includes(e.uid),onSelect:a,onUnselect:l,user:e}))}))):u.a.createElement("div",{className:"lakex-table-form-mention-selector-empty"},u.a.createElement("span",null,o))};function nct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ict=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,i=void 0===r?"":r,o=e.value,a=e.focus,c=e.onSearch,s=void 0===c?function(){}:c,d=e.onChange,f=void 0===d?function(){}:d,h=e.inputRef,p=e.visible,v=Object(l.useRef)(),g=h||v,m=Object(l.useRef)();P$e((function(){a&&g.current&&setTimeout((function(){var e;null==(e=g.current)||e.focus()}),300)}),[a,p]);var y={type:n,placeholder:wx("搜索人员"),onChange:function(e){f(e),m.current||s(e)},onCompositionStart:function(){m.current=!0},onCompositionEnd:function(e){m.current=!1,s(e)},bordered:!1,defaultValue:i,value:o};return u.a.createElement($Ye,rct(rct({},y),{},{ref:g,allowEnter:!1}))},oct=function(e){var t=new Set;return e&&Array.isArray(e)&&e.forEach((function(e){t.add(e.uid)})),Q_(t.values())},act=function(e){var t=e.inputRef,n=e.visible,r=e.maxHeight,i=function(e){var t=e.selected,n=e.inputRef,r=e.focus,i=SWe(Oj),o=jF(Object(l.useState)(""),2),a=o[0],u=o[1],c=jF(Object(l.useState)([]),2),s=c[0],d=c[1],f=jF(Object(l.useState)(!1),2),h=f[0],p=f[1],v=jF(Object(l.useState)(),2),g=v[0],m=v[1],y=jF(Object(l.useState)((function(){return oct(t)})),2),b=y[0],w=y[1];P$e((function(){null==i||i.contextUsers().then((function(e){d(e)})),setTimeout((function(){var e;r&&(null==(e=null==n?void 0:n.current)||e.focus())}),40)}),[]),P$e((function(){w(oct(t))}),[t]);var _=Object(l.useCallback)((function(e){var t,n=e.keyCode||e.which;if([OG.UP,OG.DOWN].includes(n)){e.preventDefault();var r=s.findIndex((function(e){return e.uid===g}));n===OG.UP?(r-=1)<0&&(r=0):n===OG.DOWN&&(r+=1)>=s.length&&(r=s.length-1),m(null==(t=s[r])?void 0:t.uid)}else if(n===OG.ENTER){e.preventDefault();var i=document.querySelector(".highlight .lakex-table-form-mention-selector-item");i&&i.click()}}),[s,g]);P$e((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list"),t=null==e?void 0:e.querySelector("li.highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[g]);var x=Object(l.useCallback)((function(t){var n;null==(n=e.onSelect)||n.call(e,t),b.includes(t.uid)||(w(b.concat(t.uid)),u(""))}),[e.onSelect,t]),k=Object(l.useCallback)((function(t){var n;null==(n=e.onUnselect)||n.call(e,t);var r=b.filter((function(e){return e!==t.uid}));w(r)}),[e.onUnselect]),C=Object(l.useCallback)((function(e){var t=e.target.value||"";u(t)}),[]);return Object(l.useLayoutEffect)((function(){!e.visible&&a&&u("")}),[e.visible]),{state:{list:s,loading:h,highlightId:g,selectedUserIds:b,filterValue:a},onKeyDown:_,onSearch:function(e){p(!0);var t=e.target.value;null==i||i.searchUser(t).then((function(e){d(e),p(!1)}))},onSelect:x,onUnselect:k,onChange:C}}(e),o=i.state,a=i.onKeyDown,c=i.onSearch,s=i.onSelect,d=i.onUnselect,f=i.onChange,h=r?Math.max(parseInt(String(r),10)-40,80):void 0;return u.a.createElement("div",{className:"lakex-table-form-mention-selector-container lakex-table-mention-wrapper",onKeyDown:a},u.a.createElement("div",{className:"lakex-table-form-mention-selector-search"},u.a.createElement(ict,{focus:e.focus,visible:n,onSearch:c,onChange:f,inputRef:t,value:o.filterValue})),o.loading?u.a.createElement("div",{className:"lakex-table-form-mention-selector-spin"},u.a.createElement(XKe,null)):u.a.createElement("div",{style:{maxHeight:h},className:"lakex-table-form-mention-selector-body"},u.a.createElement(tct,{selectedIds:o.selectedUserIds,list:o.list,highlightId:o.highlightId,onSelect:s,onUnselect:d})))};var lct=function(e){var t=e.defaultValue,n=e.onChange,r=e.onSelect,i=e.onUnselect,o=Object(l.useState)((function(){return function(e){return Pc(e)?[]:Array.isArray(e)?e:[e]}(t)})),a=jF(o,2),u=a[0],c=a[1],s=jF(Object(l.useState)(!1),2),d=s[0],f=s[1];return P$e((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-mention-wrapper"))return;t=t.parentNode}f(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{visible:d,selected:u},onMentionSelect:function(e){var t=u.concat(e);c(t),f(!1),n(t),r(e)},onMentionUnselect:function(e){var t=u.filter((function(t){return t.uid!==e.uid}));c(t),f(!1),n(t),i(e)},onToggleVisible:function(){f(!d)}}},uct=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,i=e.onSelect,o=void 0===i?function(){}:i,a=e.onUnselect,l=void 0===a?function(){}:a,c=e.defaultValue,s=void 0===c?[]:c,d=e.onMentionTagClick,f=void 0===d?function(){}:d,h=e.renderMode,p=lct({defaultValue:s,onChange:r,onSelect:o,onUnselect:l}),v=p.state,g=p.onMentionSelect,m=p.onMentionUnselect,y=p.onToggleVisible;return u.a.createElement(u.a.Fragment,null,u.a.createElement(U4e,{overlay:u.a.createElement(act,{focus:!0,visible:v.visible,selected:v.selected,onSelect:g,onUnselect:m}),visible:v.visible,placement:"bottomLeft",dropdownClassName:"lakex-table-mention-wrapper"},u.a.createElement("div",{className:"lakex-table-form-mention lakex-table-mention-wrapper lakex-table-form-mention-render-mode-".concat(h),id:t,onClick:function(){return y()}},u.a.createElement(Qut,{writeable:v.visible,list:v.selected,hideDropdownIcon:h===Pze.LITE,onUnSelect:m,onMentionTagClick:f}))))},cct=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n,r,i,o=e.value,a=e.showEmpty,l=e.onMentionTagClick,c=void 0===l?function(){}:l,s=e.overflow;if(!o||0===o.length)return a?u.a.createElement("div",{className:"lakex-table-form-mention-readonly"},u.a.createElement(oKe,null)):null;if(s&&s.count>0){var d=o.length-s.count;r=o.slice(0,d),i=o.slice(d)}else r=o;return u.a.createElement("div",{className:"lakex-table-form-mention-readonly"},u.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap"},null==(n=null==r?void 0:r.map)?void 0:n.call(r,(function(e,t){var n;if(!e)return null;var r,i=null==(n=null==s?void 0:s.ellipsis)?void 0:n.find((function(e){return e.index===t})),o=u.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name),a={};return i&&(a.width=i.width,r=u.a.createElement(j4e,{overlayClassName:"lakex-table-tooltip-ellipsis-container",title:o,shouldHiddenOnHover:!0,shouldArrowCenter:!0},o)),u.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uuid,onClick:function(t){c(e)},style:a},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),r||o)})),i&&i.length>0&&function(e,t,n){var r=u.a.createElement("div",{className:"lakex-table-form-mention-overflow-content"},t.map((function(e){return u.a.createElement("div",{key:e.name,className:"lakex-table-form-mention-overflow-content-item",onClick:function(t){n(e,!0)}},u.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),e.name)})));return u.a.createElement(j4e,{overlayClassName:"lakex-table-tooltip-ellipsis-container",title:r,shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("span",{className:"lakex-table-form-mention-item lakex-table-form-mention-overflow-num"},"+",e.count))}(s,i,c)))}))),sct=Object.defineProperty,dct=Object.getOwnPropertyDescriptor,fct=function(e,t,n,r){for(var i,o=r>1?void 0:r?dct(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&sct(t,n,o),o},hct=function(){return ox((function e(){rx(this,e),this._overflowObjMap={}}),[{key:"getObj",value:function(e,t){var n=this._overflowObjMap[e],r=t;return n&&n.boxSize.width===r.width&&n.boxSize.height===r.height||(n=new pXe({boxSize:r,height:22,paddingLeft:24,paddingRight:6,marginLeft:0,marginRight:4,marginBottom:7,boxPaddingTop:7,boxPaddingBottom:7,boxPaddingLeft:8,boxPaddingRight:8,numWidth:34,minWidth:60}),this._overflowObjMap[e]=n),n}},{key:"getOverflow",value:function(e,t,n,r,i){var o=this.readService.getActiveView().get("type");if(o!==WO.GRID&&o!==WO.CARD)return{};var a;return o===WO.GRID&&r?a={width:r+20,height:i+12}:o===WO.CARD&&r&&(a={width:r-40,height:30}),a?this.getObj(e,a).getCellOverflow(t,n.map((function(e){return e.name}))):{}}}])}();fct([Yf(XA)],hct.prototype,"readService",2),hct=fct([Gf()],hct);var pct=Object(l.memo)((function(e){var t=e.cell,n=e.checkCell,r=void 0===n||n,i=e.disableOpen,o=void 0!==i&&i,a=e.isSelected,c=void 0!==a&&a,s=e.boxRect,d=(null==t?void 0:t.recordId)||"",f=(null==t?void 0:t.fieldId)||"",h=!Gat(Qj.RECORD).canUpdate(),p=elt(d,f),v=(p?p.value:null==t?void 0:t.value)||[],g=SWe(Xze),m=SWe(XA),y=SWe(YHe),b=Object(l.useRef)(null),w=x$e((function(e){null==g||g.emitClickCellIcon({recordId:d,fieldId:f,event:e,iconName:"cellMentionIcon"})})),_=Object(l.useCallback)((function(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||c||m.getActiveViewType()!==WO.GRID)&&!o&&(null==y||y.open("user",e))}),[c]),x=function(e,t,n,r,i){var o,a=jF(Object(l.useState)(!0),2),u=a[0],c=a[1],s=jF(Object(l.useState)(null),2),d=s[0],f=s[1],h=SWe(hct),p=(null==(o=null==n?void 0:n.map((function(e){return e.name})))?void 0:o.join(":"))||"";return P$e((function(){if(c(!0),e&&t&&n){var o=null==h?void 0:h.getOverflow(e,t,n,r,i);f(o)}c(!1)}),[e,t,r,i,p]),{calcing:u,overflow:d}}(f,d,v,null==s?void 0:s.width,null==s?void 0:s.height),k=x.calcing,C=x.overflow;return r&&!v?null:h||!c?k?null:u.a.createElement(cct,{ref:b,overflow:C,value:v.toJSON?v.toJSON():v,onMentionTagClick:_}):u.a.createElement(Qut,{showPlaceholder:!1,writeable:c&&!h,list:v,onUnSelect:function(e){var t=null==v?void 0:v.filter((function(t){return t.uid!==e.uid}));null==p||p.setCell(t)},onMentionTagClick:_,onClickDropDownIcon:w})}),(function(e,t){var n,r,i=e.cell,o=t.cell,a=e.boxRect!==t.boxRect,l=e.isSelected!==t.isSelected;return!a&&!l&&((null==i?void 0:i.updated_at)||(null==o?void 0:o.updated_at)?!((null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at)):Oc(i.uuid,o.uuid))}));function vct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gct=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMention"},e))},mct=["field","cell","onCellChange"];function yct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bct=function(e){e.field;var t=e.cell;e.onCellChange;var n=EWe(e,mct),r=SWe(YHe),i=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),o=Object(l.useCallback)((function(e){null==r||r.open("user",e)}),[]);return t?u.a.createElement(uct,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onMentionTagClick:o,id:t.uuid,defaultValue:t.value,onChange:function(e){null==i||i.setCell(e)}},n)):null};function wct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xct=function(e){var t=SWe(YHe),n=Object(l.useCallback)((function(e){null==t||t.open("user",e)}),[]);return u.a.createElement(uct,_ct(_ct({},e),{},{onMentionTagClick:n}))},kct=Object.defineProperty,Cct=Object.getOwnPropertyDescriptor,Sct=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cct(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kct(t,n,o),o},Oct=function(){return ox((function e(){rx(this,e),this.fieldType="mention",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return pct}},{key:"getFieldEditComponent",value:function(){return bct}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?gct:null}},{key:"getFieldFormComponent",value:function(){return xct}}],[{key:"pluginModule",value:function(){return ch().register(this).register(hct)}}])}();Oct.pluginName="render-field-mention",Sct([Yf(RC)],Oct.prototype,"_configuration",2),Oct=Sct([Gf({contrib:[Oze,Sze]})],Oct);var Ect=Object(l.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,i=SWe(YHe),o=Object(l.useCallback)((function(e){r&&(null==i||i.open("user",e))}),[r]);return t?u.a.createElement(cct,{value:t.value?[t.value]:[],onMentionTagClick:o}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Ict(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pct=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ict(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ict(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldModifier"},e))},Mct=Object.defineProperty,Rct=Object.getOwnPropertyDescriptor,Act=function(e,t,n,r){for(var i,o=r>1?void 0:r?Rct(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Mct(t,n,o),o},jct=function(){return ox((function e(){rx(this,e),this.fieldType="modifierId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Ect}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Pct:null}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();jct.pluginName="render-field-modifier-id",Act([Yf(RC)],jct.prototype,"_configuration",2),jct=Act([Gf({contrib:[Oze,Sze]})],jct);var Dct=function(e){return e.Dropdown="dropdown",e.List="list",e}(Dct||{}),Tct=function(e){return e.Select="select",e.MultiSelect="multiSelect",e}(Tct||{}),Fct=function(e){var t=e.placeholder,n=e.defaultValue,r=void 0===n?"":n,i=e.value,o=void 0===i?"":i,a=e.visible,c=e.onChange,s=void 0===c?function(){}:c,d=e.focus,f=e.inputRef,h=Object(l.useRef)(),p=f||h;return P$e((function(){d&&p.current&&setTimeout((function(){var e;null==(e=p.current)||e.focus()}),300)}),[d,a]),u.a.createElement("div",{className:"lakex-table-dropdown-search"},u.a.createElement($Ye,{ref:p,type:"text",placeholder:t,onChange:s,bordered:!1,defaultValue:r,value:o,allowEnter:!1}))},Nct=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.value,r=e.color,i=function(e){var t=e.value,n=e.color,r=jF(Object(l.useState)(t),2),i=r[0],o=r[1],a=SWe(mN),u=n?{background:(null==a?void 0:a.getRenderColor(n))||"none"}:{};return u.color=null==a?void 0:a.getRenderTextColor(n),P$e((function(){o(t)}),[t]),{state:{optionValue:i},style:u}}({value:n,color:r}),o=i.state,a=i.style;return Object(l.useImperativeHandle)(t,(function(){return{getValue:function(){return n||""}}})),u.a.createElement("div",{className:F()("lakex-table-dropdown-item create",{active:e.isActive}),onClick:function(){e.onCreate(n)}},u.a.createElement("span",{className:"lakex-table-dropdown-item-prefix"},wx("新建选项")),o.optionValue&&u.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:a},o.optionValue))})));function Lct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vct=function(e){var t=e.item,n=e.colorable,r={labelColor:SWe(mN)}.labelColor,i=jF(Object(l.useState)(t.name),2),o=i[0],a=i[1],c=Object(l.useRef)(!1),s=Object(l.useRef)(null),d=C$e((function(){var n,r,i;c.current&&(null==(r=e.onOptionChange)||r.call(e,Bct(Bct({},t),{},{name:null==(n=s.current)?void 0:n.input.value})),c.current=!1,null==(i=e.onClose)||i.call(e,t))}),400);return P$e((function(){return function(){var n,r;c.current&&(null==(r=e.onOptionChange)||r.call(e,Bct(Bct({},t),{},{name:null==(n=s.current)?void 0:n.input.value})))}}),[]),u.a.createElement("div",{key:t.id,className:"lakex-table-dropdown-item editing active"},u.a.createElement(LYe,{ref:s,className:"lakex-table-dropdown-item-input editing-input",value:o,onChange:function(e){var t=(e.target.value||"").trim();a(t),c.current=!0},onPressEnter:function(e){e.stopPropagation(),d()},onKeyDown:function(n){var r;n.stopPropagation(),n.keyCode===OG.ESC&&(null==(r=e.onClose)||r.call(e,t))},onBlur:function(){setTimeout((function(){var e;(null==(e=s.current)?void 0:e.input)!==document.activeElement&&d()}),300)},autoFocus:!0}),n&&u.a.createElement(H$e,{placement:"rightTop",overlayClassName:"lakex-table-colorpicker",overlayStyle:{zIndex:1050},content:u.a.createElement(OWe,{colorSource:Q_(uN),activeColor:t.color,onSelect:function(n){var r,i;null==(r=e.onOptionChange)||r.call(e,Bct(Bct({},t),{},{color:n})),null==(i=s.current)||i.focus(),c.current=!0}})},u.a.createElement("span",{className:"option-color",style:{background:null==r?void 0:r.getRenderColor(t.color)}})))},zct=function(e){var t=e.isEditing,n=e.isActive,r=e.isSelected,i=e.canEditing,o=void 0===i||i,a=e.item,c=e.colorable,s=e.editable,d=e.onSelect,f=void 0===d?function(){}:d,h=e.onSetActive,p=void 0===h?function(){}:h,v=function(e){var t=e.item,n=e.colorable,r=SWe(mN),i=jF(Object(l.useState)(t),2),o=i[0],a=i[1],u=Object(l.useMemo)((function(){return n?{background:t.color?null==r?void 0:r.getRenderColor(t.color):"none",color:null==r?void 0:r.getRenderTextColor(t.color)}:{}}),[t,n]);return{optionItem:o,setOptionItem:a,labelColor:r,style:u}}({item:a,colorable:c}),g=v.optionItem,m=v.setOptionItem,y=v.style,b=jF(Object(l.useState)(!1),2),w=b[0],_=b[1];return P$e((function(){!n&&_(!1)}),[n]),t?u.a.createElement(Vct,{onOptionChange:function(t){var n;t.name===a.name&&t.color===a.color||(null==(n=e.onOptionChange)||n.call(e,t),m(t))},item:g,colorable:c,onClose:function(){var t;null==(t=e.onSetEditing)||t.call(e,null)}}):u.a.createElement("div",{key:g.uuid,className:F()("lakex-table-dropdown-item",{active:n}),onClick:function(){o&&f(g)}},r&&u.a.createElement(X$e,{type:"Check",size:14}),u.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:y},g.name),s&&u.a.createElement(H$e,{visible:w,overlayClassName:"lakex-table-dropdown-popover-container",overlayStyle:{zIndex:1051},getPopupContainer:function(){var e=document.getElementById("lakex-table-dropdown-popup-container");return e||((e=document.createElement("div")).id="lakex-table-dropdown-popup-container",e.onmouseup=function(e){e.preventDefault(),e.stopPropagation()},document.body.appendChild(e),e)},content:u.a.createElement(L$e,{onClick:function(t){var n,r,i=t.key;t.domEvent.stopPropagation(),"edit"===i?null==(n=e.onSetEditing)||n.call(e,g.uuid):"del"===i&&(null==(r=e.onRemove)||r.call(e,g.uuid)),_(!1)}},u.a.createElement(L$e.Item,{key:"edit",icon:u.a.createElement(X$e,{type:"Edit",size:14})},wx("编辑")),u.a.createElement(L$e.Item,{key:"del",icon:u.a.createElement(X$e,{type:"Delete",size:14})},wx("删除"))),trigger:"click",placement:"rightTop"},u.a.createElement(X$e,{type:"MoreHorizontal",onClick:function(e){e.stopPropagation(),_(!w),p()}})))},Hct=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,i=e.selectedIds,o=e.colorable,a=e.optionEditable,c=e.inputRef,s=e.visible,d=function(e){var t=e.options,n=e.onOptionCreate,r=e.colorable,i=e.inputRef,o=e.visible,a=e.focus,u=jF(Object(l.useState)(0),2),c=u[0],s=u[1],d=jF(Object(l.useState)(""),2),f=d[0],h=d[1],v=SWe(mN),g=Object(l.useMemo)((function(){var e,n,i;if(r)return 0===t.length?null==(e=mN)?void 0:e.getNextColor(""):null==(i=mN)?void 0:i.getNextColor(null==(n=t[t.length-1])?void 0:n.color)}),[r,v,t]),m=Object(l.useMemo)((function(){if(!f)return t;var e=t.filter((function(e){var t,n;return null==(n=null==(t=e.name)?void 0:t.toLowerCase)?void 0:n.call(t).includes(f.toLowerCase())}));return e}),[f,t]);P$e((function(){setTimeout((function(){var e;a&&(null==(e=null==i?void 0:i.current)||e.focus())}),20)}),[]),Object(l.useLayoutEffect)((function(){!o&&f&&h("")}),[o,f]);var y=Object(l.useMemo)((function(){return""!==f&&!m.some((function(e){return e.name===f}))}),[f,m]),b=x$e((function(e){var t=e.trim();if(t){var r={name:t,uuid:Cx(6),color:g||""};null==n||n(r),h(""),s(0)}else p.b.error(wx("新建选项不能为空字符"))})),w=Object(l.useMemo)((function(){return{value:f,selectOptions:m,showNew:y,newOptionColor:g,activeIdx:c}}),[f,y,g,m,c]),_=x$e((function(t){var n,r;null==(n=e.onOptionChange)||n.call(e,t),null==(r=null==i?void 0:i.current)||r.focus()})),x=x$e((function(t,n){var r;s(n),e.onOptionSelect(t),h(""),null==(r=null==i?void 0:i.current)||r.focus()})),k=Object(l.useCallback)((function(t){var n;e.onOptionDelete(t),null==(n=null==i?void 0:i.current)||n.focus()}),[]),C=Object(l.useCallback)((function(e){var t=e.target.value;h(t),s(0)}),[]);return{state:w,onInputChange:C,onCreateOption:b,setActiveIdx:s,onOptionChange:_,onOptionDelete:k,onOptionSelect:x}}(e),f=d.state,h=d.onInputChange,v=d.onCreateOption,g=d.setActiveIdx,m=d.onOptionChange,y=d.onOptionDelete,b=d.onOptionSelect,w=f.activeIdx,_=jF(Object(l.useState)(null),2),x=_[0],k=_[1],C=Object(l.useRef)(null),S=Object(l.useCallback)((function(e){var t,n=e.keyCode||e.which,r=n===OG.UP,i=n===OG.DOWN,o=f.selectOptions.length,a=f.showNew?o:o-1;if((r||i)&&o>0){e.preventDefault();g(0===w?r?a:1:w===a?r?w-1:0:w+(r?-1:1))}else if(n===OG.ENTER){var l=0===o||w===o;if(f.showNew&&l){var u=null==(t=C.current)?void 0:t.getValue();u&&v(u)}else{var c=f.selectOptions[w];c&&b(c,w)}}}),[w,n,f.showNew,C.current,f.selectOptions]);return P$e((function(){var e=document.querySelector(".lakex-table-dropdown-list"),t=document.querySelector(".lakex-table-dropdown-item.active");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[w]),u.a.createElement("div",{className:"lakex-table-dropdown-celleditor",onKeyDown:S},u.a.createElement(Fct,{placeholder:wx(a?"可搜索或新建选项":"搜索选项"),visible:s,onChange:h,focus:r,value:f.value,inputRef:c}),u.a.createElement("div",{className:"lakex-table-dropdown-list"},f.selectOptions.map((function(e,t){var n=w===t,r=null==i?void 0:i.includes(e.uuid),l=e.uuid===x;return u.a.createElement(zct,{key:e.uuid,isEditing:l,onSetEditing:function(e){k(e)},canEditing:!0,colorable:o,onOptionChange:m,onRemove:y,onSelect:function(e){return b(e,t)},onSetActive:function(){g(t)},isActive:n,isSelected:r,item:e,editable:!!a})})),f.showNew&&a&&u.a.createElement(Nct,{isActive:w===f.selectOptions.length||0===f.selectOptions.length,ref:C,onCreate:function(e){v(e)},value:f.value,colorable:o,color:f.newOptionColor})))},Wct=function(e){var t=e.value,n=void 0===t?[]:t,r=e.colorable,i=e.onDelete,o=void 0===i?function(){}:i,a=e.onClickDropDownIcon,l=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f={labelColor:SWe(mN)}.labelColor;return Array.isArray(n)?0===n.length&&s?u.a.createElement("p",{className:"lakex-table-dropdown-selected-placeholder"},wx("请选择")):u.a.createElement("div",{className:"lakex-table-dropdown-selector"},u.a.createElement("div",{className:"lakex-table-dropdown-selected-list ".concat(c?"writeable":"")},n.map((function(e){return u.a.createElement("div",{className:"lakex-table-dropdown-selected-item",key:e.uuid,style:r?{background:e.color?null==f?void 0:f.getRenderColor(e.color):"none",color:null==f?void 0:f.getRenderTextColor(e.color)}:{}},u.a.createElement("span",{className:"lakex-table-dropdown-selected-item-text"},e.name),c&&u.a.createElement(X$e,{className:"lakex-table-select-close-action",type:"Close",size:12,onClick:function(t){t.stopPropagation(),o(e)}}))}))),c&&!d?u.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:function(e){null==l||l(e)}},u.a.createElement(X$e,{type:"ReviewArrowDown",size:16})):null):null};function Uct(e){return Ax(e)?[]:Array.isArray(e)?e:[e]}var Gct=function(e){var t=e.options,n=e.editable,r=e.optionEditable,i=e.colorable,o=function(e){var t=e.defaultValue,n=e.options,r=e.type,i=jF(Object(l.useState)(!1),2),o=i[0],a=i[1],u=jF(Object(l.useState)((function(){return Uct(t)})),2),c=u[0],s=u[1],d=Object(l.useRef)(null),f=Object(l.useMemo)((function(){return!Ax(e.onChange)}),[e.onChange]);P$e((function(){if(f){var e=Uct(t);s(e)}}),[t,f]),P$e((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-dropdown")||t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-dropdown-popover-container")||t.classList.contains("lakex-table-dropdown-celleditor")||t.classList.contains("lakex-table-select-close-action"))return;t=t.parentNode}a(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]);var h=Object(l.useCallback)((function(e){(e.keyCode||e.which)===OG.ESC&&a(!1)}),[n]),p=Object(l.useMemo)((function(){return n.filter((function(e){return c.includes(e.uuid)}))}),[n,c]),v=Object(l.useCallback)((function(){a(!o)}),[o]),g=Object(l.useCallback)((function(t){var i,o=r===Tct.MultiSelect,a=t.uuid,l=c.includes(a),u=o?c.concat(a):[a],d=o?c.filter((function(e){return e!==a})):[],h=l?d:u;f?null==(i=e.onChange)||i.call(e,n.filter((function(e){return h.includes(e.uuid)}))):s(h),o||l||v()}),[o,r,c,f,n]);return{state:{visible:o,selectedOptions:p,selectedIds:c,selectInputRef:d},onKeyDown:h,onToggleVisible:v,onToggleSelect:g}}(e),a=o.state,c=o.onKeyDown,s=o.onToggleVisible,d=o.onToggleSelect;return u.a.createElement("div",{className:"lakex-table-dropdown",onKeyDown:c},u.a.createElement(U4e,{overlay:u.a.createElement(Hct,{visible:a.visible,inputRef:a.selectInputRef,focus:!0,colorable:!!i,options:t,editable:!!n,optionEditable:!!r,selectedIds:a.selectedIds||[],onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t)},onOptionChange:function(t){var n;null==(n=e.onOptionChange)||n.call(e,t)},onOptionDelete:function(t){var n;null==(n=e.onOptionDelete)||n.call(e,t)},onOptionSelect:function(e){d(e)}}),placement:"bottomLeft",visible:a.visible,overlayClassName:"lakex-table-dropdown"},u.a.createElement("div",{className:"lakex-table-dropdown-cellview",onClick:s},u.a.createElement(Wct,{writeable:a.visible,colorable:!!i,value:a.selectedOptions,hideDropdownIcon:e.hideDropdownIcon,onDelete:function(e){return d(e)},showPlaceholder:!0}))))},Yct=function(e){var t=e.options,n=e.value,r=e.focus,i=e.onOptionSelect,o=void 0===i?function(){}:i,a=function(e){var t=e.focus,n=Object(l.useRef)(null);return P$e((function(){t&&setTimeout((function(){var e;null==(e=n.current)||e.focus()}),300)}),[t]),{radioRef:n}}({focus:r}),c=a.radioRef;return u.a.createElement(_.a.Group,{ref:c,value:n},t.map((function(e,t){return u.a.createElement(_.a,{className:"lakex-table-form-select-radio",value:e.uuid,key:t,onChange:function(){o([e])}},u.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},$ct=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,i=e.value,o=e.onOptionSelect,a=void 0===o?function(){}:o;return u.a.createElement(kXe.Group,{onChange:function(e){a(n.filter((function(t){return e.includes(t.uuid)})))},value:i,autoFocus:r},n.map((function(e,t){return u.a.createElement(kXe,{className:"lakex-table-form-select-checkbox",value:e.uuid,key:t},u.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},qct=["defaultValue","onChange"];function Kct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kct(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jct=function(e,t){return e!==Tct.Select||Array.isArray(t)?t:[t]},Zct=function(e){var t,n=e.id,r=e.type,i=void 0===r?Tct.Select:r,o=e.defaultValue,a=void 0===o?[]:o,l=e.value,c=e.options,s=e.renderMode,d=e.displayType,f=void 0===d?Dct.List:d,h=e.focus,p=void 0!==h&&h,v=e.className,g=void 0===v?"":v;e.onChange&&(t=function(t){var n,r=i===Tct.Select?t[0]:t;null==(n=e.onChange)||n.call(e,r)});var m,y=jF(O$e({value:l?Jct(i,l):void 0,defaultValue:Jct(i,a),onChange:t}),2),b=y[0],w=y[1];if(f===Dct.Dropdown){e.defaultValue,e.onChange;var _=EWe(e,qct);m=u.a.createElement(Gct,Xct(Xct({},_),{},{defaultValue:b,value:b,onChange:function(e){w(e.map((function(e){return e.uuid})))},onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t),b.push(t.uuid),w(b)},onOptionChange:e.onOptionChange,onOptionDelete:e.onOptionDelete,hideDropdownIcon:s===Pze.LITE}))}else f===Dct.List&&i===Tct.Select?m=u.a.createElement(Yct,{value:b[0],options:c,focus:p,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}):f===Dct.List&&i===Tct.MultiSelect&&(m=u.a.createElement($ct,{value:b,options:c,focus:p,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}));return u.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(i||"normal"," ").concat(g," lakex-table-form-select-render-mode-").concat(s),id:n},m)},Qct=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n,r,i=e.colorable,o=e.type,a=void 0===o?"":o,c=e.value,s=void 0===c?[]:c,d=e.className,f=void 0===d?"":d,h=e.showEmpty,p=void 0!==h&&h,v=e.overflow,g=SWe(mN),m=Object(l.useRef)(null),y=Object(l.useCallback)((function(e,t){var n={};if(i){var r=e.color?null==g?void 0:g.getRenderColor(e.color):"none";n.background=r,n.color=null==g?void 0:g.getRenderTextColor(e.color)}return n}),[i]);if(!s||0===s.length)return p?u.a.createElement(oKe,null):null;if(v&&v.count>0){var b=s.length-v.count;n=s.slice(0,b),r=s.slice(b)}else n=s;return u.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(a||"normal"," ").concat(f)},u.a.createElement("div",{className:"lakex-table-form-select-readonly",ref:m},n.map((function(e,t){var n,r,i=y(e,t),o=null==(n=null==v?void 0:v.ellipsis)?void 0:n.find((function(e){return e.index===t})),a=u.a.createElement("span",{className:"lakex-table-select-item-text"},e.name||"");return o&&(i.width=o.width,r=u.a.createElement(j4e,{overlayClassName:"lakex-table-tooltip-ellipsis-container",title:a,shouldHiddenOnHover:!0,shouldArrowCenter:!0},a)),u.a.createElement("div",{className:"lakex-table-select-item lakex-table-select-item-overflow-apply",key:t,style:i},r||a)})),r&&r.length>0&&function(e,t){var n=u.a.createElement("div",{className:"lakex-table-form-select-overflow-content"},t.map((function(e){return u.a.createElement("div",{key:e.name,className:"lakex-table-form-select-overflow-content-item"},e.name)})));return u.a.createElement(j4e,{overlayClassName:"lakex-table-tooltip-ellipsis-container",title:n,shouldHiddenOnHover:!0,shouldArrowCenter:!0},u.a.createElement("span",{className:"lakex-table-select-item lakex-table-form-select-overflow-num"},"+",e.count))}(v,r)))})));function est(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tst(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?est(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):est(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nst(e,t,n){return t=DC(t),jC(e,rst()?Reflect.construct(t,n,DC(e).constructor):t.apply(e,n))}function rst(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rst=function(){return!!e})()}var ist=function(e){function t(e){var n;return rx(this,t),(n=nst(this,t,[e]))._inputRefs=[],n.getDefaultOptions=function(){var e=n.props,t=e.configs,r=e.multiple,i=t.options,o=t.color,a=!!o;if(i&&i.length>0)return i.forEach((function(e){e.uuid||(e.uuid=Cx(6)),void 0===o&&(a=!!i[0]&&!!i[0].color)})),{options:i,multi:r,hasColor:a};var l=[{name:"",uuid:Cx(6),color:"$label-back-color:0-0"},{name:"",uuid:Cx(6),color:"$label-back-color:0-1"},{name:"",uuid:Cx(6),color:"$label-back-color:0-2"}];return l.forEach((function(e,t){a&&!e.color&&(e.color=0===t?mN.getNextColor(""):mN.getNextColor(l[t-1].color))})),{options:l,multi:r,hasColor:a}},n.onAddItem=function(e){var t=n.state.options,r={name:"",uuid:Cx(6),color:""},i=0===t.length?"":t[t.length-1].color;r.color=mN.getNextColor(i),t.push(r),n.setState({options:t.slice()},(function(){n._optionListRef&&n._optionListRef.current&&(n._optionListRef.current.scrollTop=1e4),e&&n._inputRefs.length>1&&n._inputRefs[n._inputRefs.length-1].focus(),n.onChange()}))},n.onChangeItem=function(e,t){var r=e.target.value,i=n.state.options,o=[];i.forEach((function(e,n){var i=n===t?r:e.name;o.push(tst(tst({},e),{},{name:i}))})),n.setState({options:o},(function(){n._inputRefs[t].focus(),n.onChange()}))},n.onDeleteItem=function(e,t){var r=n.state.options.filter((function(e,n){return n!==t}));n._inputRefs.splice(t,1),n.setState({options:r},(function(){n.onChange()}))},n.onChangeColor=function(e,t){var r=n.state.options,i=[];r.forEach((function(n){var r=n.uuid===e?t:n.color;i.push(tst(tst({},n),{},{color:r}))})),n.setState({options:i},(function(){n.onChange()}))},n.toggleColor=function(e){var t=e.target.checked,r=n.state.options;t&&r[0]&&!r[0].color&&r.forEach((function(e,t){e.color=n.props.labelColor.getByIndex(t)})),n.setState({options:r,hasColor:t},(function(){n.onChange()}))},n.beforeChange=function(e){n.setState({options:e},(function(){n.onChange()}))},n.onPressEnter=function(e){e>=n.state.options.length-1?n.onAddItem(!0):n._inputRefs[e+1].input.focus()},n.onChangeOrder=function(e,t){var r=n.state.options,i=r.findIndex((function(t){return t.uuid===e})),o=r.findIndex((function(e){return e.uuid===t}));n.setState({options:Zq(r,i,o)},(function(){var r,i;null==(i=(r=n.props).onChangeOrder)||i.call(r,e,t),n.onChange()}))},n.state={options:[],multi:!1,hasColor:!1},n}return NC(t,e),ox(t,[{key:"componentDidMount",value:function(){this._optionListRef=u.a.createRef();var e=this.getDefaultOptions(),t=e.options,n=e.multi,r=e.hasColor;this.setState({options:t,multi:n,hasColor:r})}},{key:"onChange",value:function(){var e=this,t={color:this.state.hasColor,options:[]},n=[];this.state.options.forEach((function(t){if(""!==t.name){var r={name:t.name,uuid:t.uuid,color:e.state.hasColor?t.color:null};""!==t.name&&n.push(r)}})),t.options=Jc(n,(function(e){return e.name})),this.props.multiple&&(t.multi=!!this.state.multi),this.props.onChange&&this.props.onChange(t)}},{key:"_ignoreSortableRule",value:function(e){return!(!(null==e?void 0:e.tagName)||"input"!==e.tagName.toLowerCase())}},{key:"render",value:function(){return this.state.options?u.a.createElement("div",{className:"col-config-select-options"},this.props.title,u.a.createElement("div",{className:"multi-select"},u.a.createElement(kXe,{size:"small",checked:!!this.state.hasColor,onChange:this.toggleColor,style:{marginLeft:12}}),wx("颜色")),u.a.createElement("div",{className:"option-list",ref:this._optionListRef},u.a.createElement(lst,{hasColor:this.state.hasColor,labelColor:this.props.labelColor,options:this.state.options,inputRefs:this._inputRefs,onChangeColor:this.onChangeColor,onChangeItem:this.onChangeItem,onDeleteItem:this.onDeleteItem,onPressEnter:this.onPressEnter,onChangeOrder:this.onChangeOrder,autoFocus:this.props.autoFocus})),u.a.createElement("div",{className:"select-options-add-item"+(this.state.hasColor?" colored":""),onClick:this.onAddItem},u.a.createElement(X$e,{type:"Add"}),wx("添加一个选项"))):null}}])}(u.a.Component),ost=function(e){var t=SWe(mN);return t?u.a.createElement(ist,tst({labelColor:t},e)):null},ast=function(e){var t=e.hasColor,n=e.labelColor,r=e.option,i=e.index,o=e.inputRefs,a=e.autoFocus,l=e.onChangeColor,c=e.onChangeItem,s=e.onPressEnter,d=e.onDeleteItem,f=vK({id:r.uuid}),h=f.attributes,p=f.listeners,v=f.setNodeRef,g=f.transform,m=f.transition,y=f.isDragging,b=null;t&&(b=u.a.createElement(H$e,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:u.a.createElement(OWe,{colorSource:Q_(uN),activeColor:r.color||"",onSelect:function(e){l(r.uuid,e)}})},u.a.createElement("span",{className:"option-color",style:{background:n.getRenderColor(r.color)}})));var w={transform:M$e.Transform.toString(g),transition:m,zIndex:y?"100":"auto",opacity:y?.3:1};return u.a.createElement("div",tst({ref:v,className:"input-item",key:r.uuid,"data-id":r.uuid,style:w},h),u.a.createElement("span",{className:"input-item-content"},b,u.a.createElement(LYe,{value:r.name,onChange:function(e){c(e,i)},onPressEnter:function(){s(i)},ref:function(e){o[i]=e},autoFocus:a&&0===i}),u.a.createElement(X$e,{type:"Delete",onClick:function(e){d(e,i)}})),u.a.createElement("div",tst({className:"input-item-drag"},p),u.a.createElement(X$e,{type:"Drag"})))},lst=function(e){var t=e.autoFocus,n=e.hasColor,r=e.labelColor,i=e.options,o=e.inputRefs,a=e.onChangeColor,l=e.onChangeItem,c=e.onPressEnter,s=e.onDeleteItem,d=e.onChangeOrder,f=qY($Y(G$,{activationConstraint:{distance:8}})),h=function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.active,r=t.over,n.id!==r.id&&d(n.id,r.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(Rq,{sensors:f,modifiers:[xK,wK],collisionDetection:n$,onDragEnd:h},u.a.createElement(uK,{items:i.map((function(e){return tst(tst({},e),{},{id:e.uuid})})),strategy:oK},i.map((function(e,i){return u.a.createElement(ast,{key:e.uuid,option:e,index:i,hasColor:n,labelColor:r,inputRefs:o,onChangeColor:a,onChangeItem:l,onPressEnter:c,onDeleteItem:s,autoFocus:!!t})}))))},ust=Object.defineProperty,cst=Object.getOwnPropertyDescriptor,sst=function(e,t,n,r){for(var i,o=r>1?void 0:r?cst(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ust(t,n,o),o},dst=function(){return ox((function e(){rx(this,e),this._overflowObjMap={}}),[{key:"getObj",value:function(e,t){var n=this._overflowObjMap[e],r=t;return n&&n.boxSize.width===r.width&&n.boxSize.height===r.height||(n=new pXe({boxSize:r,height:22,paddingLeft:6,paddingRight:6,marginLeft:0,marginBottom:7,marginRight:4,boxPaddingTop:7,boxPaddingBottom:7,boxPaddingLeft:8,boxPaddingRight:8,numWidth:34,minWidth:40}),this._overflowObjMap[e]=n),n}},{key:"getOverflow",value:function(e,t,n,r,i){var o=this.readService.getActiveView().get("type");if(o!==WO.GRID&&o!==WO.CARD)return{};var a;return o===WO.GRID&&r?a={width:r+20,height:i+12}:o===WO.CARD&&r&&(a={width:r-40,height:30}),a?this.getObj(e,a).getCellOverflow(t,n.map((function(e){return e.name}))):{}}}])}();function fst(e,t,n,r,i){var o,a=jF(Object(l.useState)(!0),2),u=a[0],c=a[1],s=jF(Object(l.useState)(null),2),d=s[0],f=s[1],h=SWe(dst),p=(null==(o=null==n?void 0:n.map((function(e){return e.name})))?void 0:o.join(":"))||"";return P$e((function(){if(c(!0),e&&t&&n){var o=null==h?void 0:h.getOverflow(e,t,n,r,i);f(o)}c(!1)}),[e,t,r,i,p]),{calcing:u,overflow:d}}function hst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pst(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}sst([Yf(XA)],dst.prototype,"readService",2),dst=sst([Gf()],dst);var vst=Object(l.memo)((function(e){var t=e.cell,n=e.field,r=e.writeable,i=e.isSelected,o=e.boxRect,a=(null==t?void 0:t.recordId)||"",c=(null==t?void 0:t.fieldId)||"",s=!Gat(Qj.RECORD).canUpdate(),d=elt(a,c),f=(d?d.value:null==t?void 0:t.value)||[],h=SWe(Xze),p=SWe(XA).getFieldOptions(c).toJSON(),v=Object(l.useRef)(null),g=Object(l.useMemo)((function(){var e,t,n;return null==(n=null==(e=f.map)?void 0:(t=e.call(f,(function(e){var t=p.find((function(t){return t.uuid===e}));return t?pst(pst({},t),{},{name:t.name,value:t.uuid}):null}))).filter)?void 0:n.call(t,(function(e){return!!e}))}),[f,p]),m=fst(c,a,g,null==o?void 0:o.width,null==o?void 0:o.height),y=m.calcing,b=m.overflow,w=Object(l.useCallback)((function(e){null==h||h.emitClickCellIcon({recordId:a,fieldId:c,event:e,iconName:"cellSelectIcon"})}),[a,c]);return t?s||!i?y?null:u.a.createElement(Qct,{ref:v,overflow:b,colorable:!!(null==n?void 0:n.get("color")),value:g}):u.a.createElement(Wct,{writeable:Pc(r)?i&&!s:r,colorable:!!(null==n?void 0:n.get("color")),value:g,onDelete:function(e){var t=g.filter((function(t){return(null==t?void 0:t.uuid)!==e.uuid}));null==d||d.setCell(t)},showPlaceholder:!1,onClickDropDownIcon:w}):null}),(function(e,t){var n=e.cell,r=t.cell,i=e.boxRect!==t.boxRect,o=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&(!i&&!o&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at))}));function gst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mst=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMultiSelect"},e))},yst=["displayType","cell","defaultValue","onChange","onCellChange"];function bst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wst=function(e){var t,n=e.displayType,r=e.cell,i=e.defaultValue,o=e.onChange,a=e.onCellChange,l=EWe(e,yst),c=Xat((null==(t=e.field)?void 0:t.get("uuid"))||""),s=c.field,d=c.fieldOptions,f=c.updateProperty,h=elt(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),p=qYe(),v=Gat(Qj.FIELD).canUpdate(s),g=null==r?void 0:r.value,m=i||[""],y=function(){var e=aO(QC.mark((function e(t){var n,i,o;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==r?void 0:r.value)||[],i=n.includes(t.uuid),o=i?n.filter((function(e){return e!==t.uuid})):n.concat(t.uuid),null==h||h.setCell(o.map((function(e){return{value:e}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=x$e(function(){var e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.toJSON().concat(t),f({options:n}),y(t),p();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=x$e((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),p()})),_=x$e((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),p()})),x=x$e((function(e){var t=kC(d,(function(t){return e.includes(t.get("uuid"))})).map((function(e){var t=e.toJSON();return t.value=t.uuid,t}));null==a||a(t),null==o||o(t)}));return s?u.a.createElement(Zct,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s.get("uuid"),defaultValue:m,value:g,type:s.get("type"),options:d.toJSON(),colorable:null==s?void 0:s.get("color"),editable:!0,optionEditable:v,displayType:n,onChange:x,onOptionChange:w,onOptionCreate:b,onOptionDelete:_},l)):null},_st=["viewField","onChange"];function xst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kst=function(e){var t=e.viewField,n=e.onChange,r=EWe(e,_st),i=Xat(t.get("field_uuid")||""),o=i.field,a=i.fieldOptions,l="dropdown"===(null==t?void 0:t.get("display_type"))?Dct.Dropdown:Dct.List;return u.a.createElement(Zct,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Tct.MultiSelect,options:null==a?void 0:a.toJSON(),colorable:null==o?void 0:o.get("color"),displayType:l,editable:!1,onChange:function(e){if(a){var t=kC(a,(function(t){return e.includes(t.get("uuid"))})).map((function(e){return e.get("uuid")}));null==n||n(t)}}},r))};kst.OptionEditable=function(e){var t;if(!YO.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return u.a.createElement(ost,{title:u.a.createElement("span",{className:"lakex-table-form-design-option-title"},wx("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!0,configs:n,autoFocus:e.autoFocus})};var Cst=Object.defineProperty,Sst=Object.getOwnPropertyDescriptor,Ost=function(e,t,n,r){for(var i,o=r>1?void 0:r?Sst(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Cst(t,n,o),o},Est=function(){return ox((function e(){rx(this,e),this.fieldType="multiSelect",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return vst}},{key:"getFieldEditComponent",value:function(){return wst}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?mst:null}},{key:"getFieldFormComponent",value:function(){return kst}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Est.pluginName="render-field-multi-select",Ost([Yf(RC)],Est.prototype,"_configuration",2),Est=Ost([Gf({contrib:[Oze,Sze]})],Est);var Ist=function(e){var t=e.id,n=e.defaultValue,r=e.focus,i=e.onBlur,o=e.renderMode,a=e.format,c=void 0===a?"number":a,s=null!==e.prefix?e.prefix:u.a.createElement(X$e,{type:"FieldNumber",size:14}),d=Object(l.useRef)(null);return P$e((function(){r&&d.current&&d.current.focus({cursor:"end"})}),[r]),u.a.createElement("div",{className:"lakex-table-form-number lakex-table-form-number-render-mode-".concat(o),id:t},u.a.createElement(Q0e,{allowClear:o!==Pze.LITE,type:"text",defaultValue:n,placeholder:wx("请输入"),prefix:s,onChange:function(t){var n;null==(n=e.onChange)||n.call(e,t)},formatter:function(e){return nV.getFormatter(c,e)},parser:function(e){return nV.getParser(c,e)},onBlur:i,autoFocus:r,ref:d}))},Pst=function(e){var t=e.value,n=e.showEmpty,r=e.textColor;return t||0===Number(t)?u.a.createElement("div",{className:"lakex-table-form-number-readonly",style:r?{color:"rgb(var(--lt-base-".concat(r,"))")}:void 0},t):n?u.a.createElement(oKe,null):null},Mst=Object(l.memo)((function(e){e.field;var t=e.cell,n=e.textColor,r=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),i=r?r.formatValue:null==t?void 0:t.formatValue;return null==i?null:u.a.createElement(Pst,{key:null==t?void 0:t.updated_at,value:i,textColor:n})}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)}));function Rst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ast=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldNumber"},e))},jst=["field","cell","defaultValue","onCellChange"];function Dst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tst=function(e){var t,n=e.field,r=e.cell,i=e.defaultValue,o=e.onCellChange,a=EWe(e,jst);if(!r)return null;var l=null==(t=null==n?void 0:n.get("config"))?void 0:t.format;return u.a.createElement(Ist,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==r?void 0:r.uuid,defaultValue:i,value:r.value||"",format:l,prefix:e.renderMode===Pze.LITE?void 0:u.a.createElement(X$e,{type:"FieldNumber"}),onChange:function(e){null==o||o(e)}},a))};function Fst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Nst=function(e){return u.a.createElement(Ist,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Lst=Object.defineProperty,Bst=Object.getOwnPropertyDescriptor,Vst=function(e,t,n,r){for(var i,o=r>1?void 0:r?Bst(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Lst(t,n,o),o},zst=function(){return ox((function e(){rx(this,e),this.fieldType="number",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Mst}},{key:"getFieldEditComponent",value:function(){return Tst}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Ast:null}},{key:"getFieldRules",value:function(){return this._numberField.rules}},{key:"getFieldFormComponent",value:function(){return Nst}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();zst.pluginName="render-field-number",Vst([Yf(lV)],zst.prototype,"_numberField",2),Vst([Yf(RC)],zst.prototype,"_configuration",2),zst=Vst([Gf({contrib:[Oze,Sze]})],zst);var Hst=function(e){var t=e.id,n=e.defaultValue,r=e.prefix,i=e.focus,o=e.renderMode,a=e.onChange,c=void 0===a?function(){}:a,s=e.onBlur,d=SWe(YHe),f=jF(O$e({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),h=f[0],p=f[1],v=null!==r?r:u.a.createElement(X$e,{type:"FieldPhone"}),g=Object(l.useRef)(null);return P$e((function(){i&&g.current&&g.current.focus({cursor:"end"})}),[i]),u.a.createElement("div",{className:"lakex-table-form-phone lakex-table-form-phone-render-mode-".concat(o),id:t},u.a.createElement(LYe,{allowClear:o!==Pze.LITE,value:h,defaultValue:n,autoFocus:i,type:"text",placeholder:wx("请输入"),prefix:v,onChange:function(e){var t=e.target.value;p(t),null==c||c(t)},onBlur:s,suffix:u.a.createElement(X$e,{className:F()("lakex-table-form-phone-action",{hasValue:h}),type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==d||d.open("phone","tel:"+h)}}),ref:g}))},Wst=function(e){var t=e.value,n=e.showEmpty,r=e.textColor,i=SWe(YHe);if(!t)return n?u.a.createElement(oKe,null):null;return u.a.createElement("div",{className:"lakex-table-form-phone-readonly"},u.a.createElement("span",{className:"lakex-table-form-phone-text",style:r?{color:"rgb(var(--lt-base-".concat(r,"))")}:void 0},t),u.a.createElement(X$e,{className:"lakex-table-form-phone-action",type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==i||i.open("phone","tel:"+t)}}))},Ust=Object(l.memo)((function(e){var t=e.cell,n=e.textColor,r=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),i=r?r.value:null==t?void 0:t.value;return null==i?null:u.a.createElement(Wst,{key:null==t?void 0:t.fieldId,value:i,textColor:n})}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)}));function Gst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yst=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldPhone"},e))},$st=["field","cell","defaultValue","onCellChange"];function qst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Kst=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,i=EWe(e,$st);return t?u.a.createElement(Hst,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",prefix:e.renderMode===Pze.LITE?void 0:u.a.createElement(X$e,{type:"FieldPhone"}),onChange:function(e){null==r||r(e)}},i)):null};function Xst(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jst=function(e){return u.a.createElement(Hst,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xst(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xst(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Zst=Object.defineProperty,Qst=Object.getOwnPropertyDescriptor,edt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Qst(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Zst(t,n,o),o},tdt=function(){return ox((function e(){rx(this,e),this.fieldType="phone",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Ust}},{key:"getFieldEditComponent",value:function(){return Kst}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Yst:null}},{key:"getFieldRules",value:function(){return this._phoneField.rules}},{key:"getFieldFormComponent",value:function(){return Jst}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();tdt.pluginName="render-field-phone",edt([Yf(gV)],tdt.prototype,"_phoneField",2),edt([Yf(RC)],tdt.prototype,"_configuration",2),tdt=edt([Gf({contrib:[Oze,Sze]})],tdt);var ndt=["blue-6","magenta-6","orange-6","pea-green-6","purple-6","red-6","green-6","blue-2,blue-3,blue-4,blue-5,blue-6","magenta-2,magenta-3,magenta-4,magenta-5,magenta-6","orange-2,orange-3,orange-4,orange-5,orange-6","pea-green-2,pea-green-3,pea-green-4,pea-green-5,pea-green-6","purple-2,purple-3,purple-4,purple-5,purple-6","red-2,red-3,red-4,red-5,red-6","green-2,green-3,green-4,green-5,green-6"],rdt=function(e,t,n){var r=t.split(",");if(1===r.length)return e.toColor(t);var i=r.length,o=Math.floor(100/i),a=Math.min(Math.floor(n/o),i-1);return e.toColor(r[a])},idt=function(e){if(1===e.length)return e[0];var t=100/e.length,n=[];return e.forEach((function(e,r){n.push("".concat(e," ").concat(t*r,"%")),n.push("".concat(e," ").concat(t*(r+1),"%"))})),"linear-gradient(to right, ".concat(n.join(","),")")},odt=function(e){var t=e.value,n=e.onChange,r=e.color,i=void 0===r?"blue-6":r,o=I$e().themeService,a=jF(Object(l.useState)(t),2),c=a[0],s=a[1],d=jF(Object(l.useState)(i),2),f=d[0],h=d[1];return t||0===Number(t)||(t=0),P$e((function(){s(t)}),[t]),P$e((function(){h(i)}),[i]),u.a.createElement("div",{className:"lakex-table-form-progress-editable"},u.a.createElement(eKe,{prefixCls:"".concat("ant","-slider"),range:!1,onChangeComplete:n,styles:{track:{backgroundColor:f&&rdt(o,f,c)}},onChange:function(e){s(e)},value:c}),u.a.createElement("span",{className:"lakex-table-form-progress-value"},c,"%"))},adt=function(e){var t=e.value,n=e.color,r=I$e().themeService;return t||0===Number(t)||(t=0),u.a.createElement("div",{className:"lakex-table-form-progress-readonly"},u.a.createElement(E.a,{percent:t,showInfo:!1,strokeColor:rdt(r,n,t)}),u.a.createElement("span",{className:"lakex-table-form-progress-value"},t,"%"))},ldt=Object(l.memo)((function(e){var t,n,r=e.cell,i=e.field,o=e.readonly,a=Xat((null==i?void 0:i.get("uuid"))||""),l=SWe(Lj),c=Gat(Qj.VIEW).canUpdate(),s=elt(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),d=(s?s.value:null==r?void 0:r.value)||0;return r&&c&&!o?u.a.createElement(odt,{key:null==r?void 0:r.updated_at,value:d,color:(null==(t=null==a?void 0:a.field)?void 0:t.get("color"))||"blue-6",onChange:function(e){null==l||l.execCommand("setCell",{recordId:r.recordId,fieldId:r.fieldId,value:e,fieldType:r.fieldType})}}):u.a.createElement(adt,{key:null==r?void 0:r.updated_at,color:(null==(n=null==a?void 0:a.field)?void 0:n.get("color"))||"blue-6",value:d})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function udt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cdt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?udt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):udt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldProgress"},e))},sdt=["field","cell","defaultValue","onCellChange"];function ddt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fdt=function(e){var t=e.field,n=e.cell;e.defaultValue;var r=e.onCellChange,i=EWe(e,sdt);return u.a.createElement(odt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ddt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ddt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==n?void 0:n.uuid,value:(null==n?void 0:n.value)?Number(n.value):0,color:(null==t?void 0:t.get("color"))||"blue-6",onChange:function(e){null==r||r(e)}},i))};function hdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pdt=function(e){return u.a.createElement(odt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},vdt=Object.defineProperty,gdt=Object.getOwnPropertyDescriptor,mdt=function(e,t,n,r){for(var i,o=r>1?void 0:r?gdt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vdt(t,n,o),o},ydt=function(){return ox((function e(){rx(this,e),this.fieldType="progress",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return ldt}},{key:"getFieldEditComponent",value:function(){return fdt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?cdt:null}},{key:"getFieldRules",value:function(){return this._progressField.rules}},{key:"getFieldFormComponent",value:function(){return pdt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();ydt.pluginName="render-field-progress",mdt([Yf(vet)],ydt.prototype,"_progressField",2),mdt([Yf(RC)],ydt.prototype,"_configuration",2),ydt=mdt([Gf({contrib:[Oze,Sze]})],ydt);var bdt=function(e){var t=e.defaultValue,n=void 0===t?0:t,r=e.value,i=e.onChange;return r||0===Number(r)||(r=0),u.a.createElement("div",{className:"lakex-table-form-rate-editable",onClick:function(e){e.preventDefault(),e.stopPropagation()}},u.a.createElement(iKe,{onChange:i,defaultValue:n,value:r,count:5,character:u.a.createElement(X$e,{type:"Star"})}))},wdt=function(e){var t=e.value;return t||0===Number(t)||(t=0),u.a.createElement("div",{className:"lakex-table-form-rate-readonly"},u.a.createElement(iKe,{disabled:!0,defaultValue:t,count:5,character:u.a.createElement(X$e,{type:"Star"})}))},_dt=Object(l.memo)((function(e){var t=e.cell,n=e.readonly,r=SWe(Lj),i=Gat(Qj.RECORD).canUpdate(),o=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),a=(o?o.value:null==t?void 0:t.value)||0;return t&&i&&!n?u.a.createElement(bdt,{key:null==t?void 0:t.updated_at,value:a,onChange:function(e){null==r||r.execCommand("setCell",{recordId:t.recordId,fieldId:t.fieldId,value:e,fieldType:t.fieldType})}}):u.a.createElement(wdt,{key:null==t?void 0:t.updated_at,value:a})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function xdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kdt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldRate"},e))},Cdt=["field","cell","defaultValue","onCellChange"];function Sdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Odt=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,i=EWe(e,Cdt);return u.a.createElement(bdt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==t?void 0:t.uuid,defaultValue:n,value:(null==t?void 0:t.value)?Number(t.value):0,onChange:function(e){null==r||r(e)}},i))};function Edt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Idt=function(e){return u.a.createElement(bdt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Edt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Edt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Pdt=Object.defineProperty,Mdt=Object.getOwnPropertyDescriptor,Rdt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Mdt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Pdt(t,n,o),o},Adt=function(){return ox((function e(){rx(this,e),this.fieldType="rate",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return _dt}},{key:"getFieldEditComponent",value:function(){return Odt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?kdt:null}},{key:"getFieldRules",value:function(){return this._rateField.rules}},{key:"getFieldFormComponent",value:function(){return Idt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();Adt.pluginName="render-field-rate",Rdt([Yf(Cet)],Adt.prototype,"_rateField",2),Rdt([Yf(RC)],Adt.prototype,"_configuration",2),Adt=Rdt([Gf({contrib:[Oze,Sze]})],Adt);var jdt=Object(l.memo)((function(e){var t=e.cell,n=e.field,r=e.checkCell,i=e.isSelected,o=void 0!==i&&i,a=e.boxRect,c=(null==t?void 0:t.recordId)||"",s=(null==t?void 0:t.fieldId)||"",d=!Gat(Qj.RECORD).canUpdate(),f=elt(c,s),h=SWe(XA).getFieldOptions(s).toJSON(),p=f?f.value:null==t?void 0:t.value,v=h.filter((function(e){return e.uuid===p}))||null,g=SWe(Xze),m=Object(l.useCallback)((function(e){null==g||g.emitClickCellIcon({recordId:c,fieldId:s,event:e,iconName:"cellSelectIcon"})}),[c,s]),y=fst(s,c||s,v,null==a?void 0:a.width,null==a?void 0:a.height),b=y.calcing,w=y.overflow;return r&&!(null==f?void 0:f.value)?null:d||!o?b?null:u.a.createElement(Qct,{colorable:!!(null==n?void 0:n.get("color")),overflow:w,value:v}):u.a.createElement(u.a.Fragment,null,u.a.createElement(Wct,{writeable:o&&!d,colorable:!!(null==n?void 0:n.get("color")),value:v,onDelete:function(e){null==f||f.setCell(null)},showPlaceholder:!1,onClickDropDownIcon:m}))}),(function(e,t){var n=e.cell,r=t.cell,i=e.boxRect!==t.boxRect,o=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&(!i&&!o&&((null==n?void 0:n.value)===(null==r?void 0:r.value)&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at)))}));function Ddt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tdt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ddt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ddt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldSelect"},e))},Fdt=["displayType","defaultValue","cell","onCellChange"];function Ndt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ldt=function(e){var t,n=e.displayType,r=e.defaultValue,i=e.cell,o=e.onCellChange,a=EWe(e,Fdt),l=Xat((null==(t=e.field)?void 0:t.get("uuid"))||""),c=l.field,s=l.fieldId,d=l.fieldOptions,f=l.updateProperty,h=Gat(Qj.FIELD).canUpdate(c),p=elt(null==i?void 0:i.recordId,null==i?void 0:i.fieldId),v=qYe(),g=function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==p?void 0:p.value)||[],r=n.includes(t.uuid),null==p||p.setCell(r?"":t.uuid);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=x$e(function(){var e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.toJSON().concat(t),e.next=3,f({options:n});case 3:g(t),v();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=x$e((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),v()})),b=x$e((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),v()})),w=x$e((function(e){null==o||o(e)}));if(!c||!p)return null;var _=p?p.value:null==i?void 0:i.value;return u.a.createElement(Zct,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ndt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ndt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s,defaultValue:r?[r.value]:[],value:_?[_]:null,type:c.type,options:d.toJSON(),colorable:c.get("color"),editable:!0,optionEditable:h,displayType:n,onChange:w,onOptionChange:y,onOptionCreate:m,onOptionDelete:b},a))},Bdt=["viewField"];function Vdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zdt=function(e){var t=e.viewField,n=EWe(e,Bdt),r=Xat(t.get("field_uuid")||""),i=r.field,o=r.fieldOptions,a="dropdown"===(null==t?void 0:t.get("display_type"))?Dct.Dropdown:Dct.List;return u.a.createElement(Zct,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Tct.Select,options:(null==o?void 0:o.toJSON())||[],colorable:null==i?void 0:i.get("color"),displayType:a,editable:!1},n))};zdt.OptionEditable=function(e){var t;if(!YO.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return u.a.createElement(ost,{title:u.a.createElement("span",{className:"lakex-table-form-design-option-title"},wx("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!1,configs:n,autoFocus:e.autoFocus})};var Hdt=Object.defineProperty,Wdt=Object.getOwnPropertyDescriptor,Udt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Wdt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Hdt(t,n,o),o},Gdt=function(){return ox((function e(){rx(this,e),this.fieldType="select",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return jdt}},{key:"getFieldEditComponent",value:function(){return Ldt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Tdt:null}},{key:"getFieldFormComponent",value:function(){return zdt}}],[{key:"pluginModule",value:function(){return ch().register(this).register(dst)}}])}();Gdt.pluginName="render-field-select",Udt([Yf(RC)],Gdt.prototype,"_configuration",2),Gdt=Udt([Gf({contrib:[Oze,Sze]})],Gdt);var Ydt=function(e){var t=e.id,n=e.focus,r=e.defaultValue,i=void 0===r?"":r,o=e.renderMode,a=e.value,c=e.onChange,s=Object(l.useRef)(null),d=jF(O$e({value:a,defaultValue:i,onChange:c}),2),f=d[0],h=d[1];return P$e((function(){n&&s.current&&s.current.focus({cursor:"end"})}),[n]),u.a.createElement("div",{className:"lakex-table-form-text lakex-table-form-text-render-mode-".concat(o),id:t||""},u.a.createElement(LYe.TextArea,{className:"lt-textarea",defaultValue:i,value:f,autoSize:!0,placeholder:wx("请输入"),onChange:function(e){var t=e.target.value;h(t),null==c||c(t)},autoFocus:n,ref:s}))},$dt=function(e){var t=e.value,n=e.showEmpty,r=e.className,i=e.textColor;return t?u.a.createElement("div",{className:"".concat(r||""," lakex-table-form-text-readonly"),style:i?{color:"rgb(var(--lt-base-".concat(i,"))")}:void 0},t):n?u.a.createElement(oKe,null):null},qdt=Object(l.memo)((function(e){var t=e.cell,n=e.boxRect,r=e.isSelected,i=void 0!==r&&r,o=e.textColor,a=elt(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),l=a?a.value:null==t?void 0:t.value;return u.a.createElement($dt,{className:F()({"text-ellipsis":!i&&n}),key:null==t?void 0:t.uuid,value:l||"",textColor:o})}),(function(e,t){var n,r,i=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),o=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected,l=e.textColor!==t.textColor;return!(i||o||a||l)}));function Kdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xdt=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldText"},e))},Jdt=["field","cell","defaultValue","onCellChange"];function Zdt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qdt=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,i=EWe(e,Jdt);if(!t)return null;var o=C$e((function(e){null==r||r(e)}),100);return u.a.createElement(Ydt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zdt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zdt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",onChange:function(e){o(e)}},i))};function eft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tft=function(e){return u.a.createElement(Ydt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eft(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},nft=Rf.defineToken("FieldTextPluginFieldTagContribution"),rft=Object.defineProperty,ift=Object.getOwnPropertyDescriptor,oft=function(e,t,n,r){for(var i,o=r>1?void 0:r?ift(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rft(t,n,o),o},aft=ox((function e(){var t=this;rx(this,e),this.getTextFieldTagComponent=function(){var e,n,r=t.fieldTextPluginFieldTagProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getTextFieldTagComponent)?void 0:n.call(e):null}}));oft([gh(nft)],aft.prototype,"fieldTextPluginFieldTagProvider",2),aft=oft([Gf()],aft);var lft=Object.defineProperty,uft=Object.getOwnPropertyDescriptor,cft=function(e,t,n,r){for(var i,o=r>1?void 0:r?uft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lft(t,n,o),o},sft=function(){return ox((function e(){rx(this,e),this.fieldType="text",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return qdt}},{key:"getFieldEditComponent",value:function(){return Qdt}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Xdt:null}},{key:"getFieldTagComponent",value:function(){return this._fieldTextService.getTextFieldTagComponent()}},{key:"getFieldFormComponent",value:function(){return tft}}],[{key:"pluginModule",value:function(){return ch().contribution(nft).register(this).register(aft)}}])}();sft.pluginName="render-field-text",cft([Yf(RC)],sft.prototype,"_configuration",2),cft([Yf(aft)],sft.prototype,"_fieldTextService",2),sft=cft([Gf({contrib:[Oze,Sze]})],sft);var dft=Object(l.memo)((function(e){var t,n,r=e.cell,i=Xat(null==r?void 0:r.fieldId),o=null==r?void 0:r.value;return"number"==typeof o&&(o=new Date(o)),u.a.createElement(blt,{value:o,format:(null==(n=null==(t=i.field)?void 0:t.get("config"))?void 0:n.date_format)||"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function fft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hft=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fft(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldUpdatedAt"},e))},pft=Object.defineProperty,vft=Object.getOwnPropertyDescriptor,gft=function(e,t,n,r){for(var i,o=r>1?void 0:r?vft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&pft(t,n,o),o},mft=function(){return ox((function e(){rx(this,e),this.fieldType="updatedAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return dft}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?hft:null}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();mft.pluginName="render-field-updated-at",gft([Yf(RC)],mft.prototype,"_configuration",2),mft=gft([Gf({contrib:[Oze,Sze]})],mft);var yft=Object(l.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,i=SWe(YHe),o=Object(l.useCallback)((function(e){r&&(null==i||i.open("user",e))}),[r]);return t&&null!=t.value?u.a.createElement(cct,{value:t.value?[t.value]:[],onMentionTagClick:o}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function bft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wft=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bft(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreator"},e))},_ft=Object.defineProperty,xft=Object.getOwnPropertyDescriptor,kft=function(e,t,n,r){for(var i,o=r>1?void 0:r?xft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&_ft(t,n,o),o},Cft=function(){return ox((function e(){rx(this,e),this.fieldType="userId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return yft}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?wft:null}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function Sft(e,t,n){return t=DC(t),jC(e,Oft()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Oft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oft=function(){return!!e})()}Cft.pluginName="render-field-user-id",kft([Yf(RC)],Cft.prototype,"_configuration",2),Cft=kft([Gf({contrib:[Oze,Sze]})],Cft);var Eft=Object.defineProperty,Ift=Object.getOwnPropertyDescriptor,Pft=function(e,t,n,r){for(var i,o=r>1?void 0:r?Ift(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Eft(t,n,o),o},Mft=function(e){function t(){var e;return rx(this,t),(e=Sft(this,t,arguments))._onShowNewGroup=e._register(new dS),e.onShowNewGroup=e._onShowNewGroup.event,e._onShowEditGroup=e._register(new dS),e.onShowEditGroup=e._onShowEditGroup.event,e}return NC(t,e),ox(t,[{key:"showNewGroup",value:function(e,t){this._onShowNewGroup.emit({target:e,groupField:t})}},{key:"showEditGroup",value:function(e,t,n){this._onShowEditGroup.emit({target:e,groupField:t,groupOption:n})}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Pft([Df()],Mft.prototype,"destroy",1),Mft=Pft([Gf()],Mft);var Rft=Object.defineProperty,Aft=Object.getOwnPropertyDescriptor,jft=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(this).register(Mft)}}])}();jft.pluginName="render-group",jft=function(e,t,n,r){for(var i,o=r>1?void 0:r?Aft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Rft(t,n,o),o}([Gf({contrib:[Z8e,H9e]})],jft);var Dft=Rf.defineToken("HighlightRenderPluginContribution");function Tft(e,t,n){return t=DC(t),jC(e,Fft()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Fft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fft=function(){return!!e})()}var Nft=Object.defineProperty,Lft=Object.getOwnPropertyDescriptor,Bft=function(e,t,n,r){for(var i,o=r>1?void 0:r?Lft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Nft(t,n,o),o},Vft=function(e){function t(){var e;return rx(this,t),(e=Tft(this,t,arguments))._highlightCellIds={},e._highlightRecordIds=new Set,e._onChange=e._register(new dS),e.onChange=e._onChange.event,e}return NC(t,e),ox(t,[{key:"_getCellIdByHighlightItem",value:function(e){return e.fieldId?"".concat(e.recordId,"-").concat(e.fieldId):null}},{key:"_setHighlightColor",value:function(e){var t=document.querySelector(":root");null==t||t.style.setProperty("--view-highlight-bg-color",e)}},{key:"_removeHighlightColor",value:function(){var e=document.querySelector(":root");null==e||e.style.removeProperty("--view-highlight-bg-color")}},{key:"isInHighlight",value:function(e){if(Ax(e.recordId))return!1;if(!Ax(e.fieldId)){var t=this._getCellIdByHighlightItem(e);return!!this._highlightCellIds[t]}return this._highlightRecordIds.has(e.recordId)}},{key:"setHighlights",value:function(e,t,n){var r=this;n&&this._setHighlightColor(n),t.forEach((function(t){var n=t.recordId;n&&r._highlightRecordIds.add(n);var i=r._getCellIdByHighlightItem(t);i&&(r._highlightCellIds[i]=r._highlightCellIds[i]||new Set,r._highlightCellIds[i].add(e))})),this._notify()}},{key:"removeHighlights",value:function(e,t){var n=this;t.forEach((function(t){var r=t.recordId;r&&n._highlightRecordIds.delete(r);var i=n._getCellIdByHighlightItem(t);i&&n._highlightCellIds[i]&&(n._highlightCellIds[i].delete(e),0===n._highlightCellIds[i].size&&delete n._highlightCellIds[i])})),this._notify()}},{key:"clearHighlights",value:function(e){this._clear(e),this._notify()}},{key:"_clear",value:function(e){for(var t=0,n=Object.keys(this._highlightCellIds);t<n.length;t++){var r=n[t],i=this._highlightCellIds[r];i.delete(e),0===i.size&&delete this._highlightCellIds[r]}this._highlightRecordIds.clear()}},{key:"_notify",value:function(){this._onChange.emit({highlightCellIds:this._highlightCellIds,highlightRecordIds:this._highlightRecordIds})}},{key:"clearAll",value:function(){this._highlightCellIds={},this._highlightRecordIds.clear(),this._removeHighlightColor(),this._notify()}},{key:"destroy",value:function(){this.clearAll(),this._onChange.destroy()}}])}(HC);function zft(e){var t=SWe(Vft),n=jF(Object(l.useState)((function(){return t.isInHighlight(e)})),2),r=n[0],i=n[1];return P$e((function(){var n=t.onChange((function(n){n.highlightCellIds,n.highlightRecordIds;var r=t.isInHighlight(e);i(r)}));return function(){n.destroy()}}),[t]),r}Bft([Df()],Vft.prototype,"destroy",1),Vft=Bft([Gf()],Vft);var Hft=Object.defineProperty,Wft=Object.getOwnPropertyDescriptor,Uft=function(e,t,n,r){for(var i,o=r>1?void 0:r?Wft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Hft(t,n,o),o},Gft=function(){return ox((function e(){var t=this;rx(this,e),this._refresh=rc((function(){var e,n=null==(e=t._readService.getViewConfig())?void 0:e.get("highlight_same_fields");n&&n.split(",").forEach((function(e){t.refreshHighlights(e)}))}),100)}),[{key:"init",value:function(){var e=this;this._abilityService.isReadonly(Qj.VIEW)||(this._eventService.onCellChange((function(t){_x((function(){e._highlightSameService.isEnable(t.fieldId)&&e.refreshHighlights(t.fieldId)}))})),this._dataLoadedListener=this._kernelService.onDataLoaded((function(){e._highlightService.clearAll(),e._refresh()})),this._dataChangedListener=this._kernelService.onDataChanged((function(){e._highlightService.clearAll(),e._refresh()})))}},{key:"refreshHighlights",value:function(e){var t=this._highlightSameService.groupMatch(e);t.matches.length>0&&this._highlightService.setHighlights("cellSame",t.matches.map((function(t){return{fieldId:e,recordId:t}}))),t.unmatches.length>0&&this._highlightService.removeHighlights("cellSame",t.unmatches.map((function(t){return{fieldId:e,recordId:t}})))}},{key:"removeHighlights",value:function(e){var t=OC(this._readService.getRecords(),(function(e){return e.get("uuid")}));this._highlightService.removeHighlights("cellSame",t.map((function(t){return{fieldId:e,recordId:t}})))}},{key:"destroy",value:function(){this._dataLoadedListener.destroy(),this._dataChangedListener.destroy()}}])}();Uft([Yf(XA)],Gft.prototype,"_readService",2),Uft([Yf(cT)],Gft.prototype,"_kernelService",2),Uft([Yf(aM)],Gft.prototype,"_eventService",2),Uft([Yf(Vft)],Gft.prototype,"_highlightService",2),Uft([Yf(zet)],Gft.prototype,"_highlightSameService",2),Uft([Yf(hD)],Gft.prototype,"_abilityService",2),Uft([Df()],Gft.prototype,"destroy",1),Gft=Uft([Gf()],Gft);var Yft=Object.defineProperty,$ft=Object.getOwnPropertyDescriptor,qft=function(e,t,n,r){for(var i,o=r>1?void 0:r?$ft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Yft(t,n,o),o},Kft=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this._highlightSameRenderService.init()}}],[{key:"pluginModule",value:function(){return ch().register(Gft).register(this)}}])}();Kft.pluginName="render-highlight-same",qft([Yf(Gft)],Kft.prototype,"_highlightSameRenderService",2),Kft=qft([Gf({contrib:Sze})],Kft);var Xft=Object.defineProperty,Jft=Object.getOwnPropertyDescriptor,Zft=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().contribution(Dft).register(this).register(Vft)}}])}();Zft.pluginName="render-highlight",Zft=function(e,t,n,r){for(var i,o=r>1?void 0:r?Jft(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Xft(t,n,o),o}([Gf({contrib:Sze})],Zft);var Qft=Object.defineProperty,eht=Object.getOwnPropertyDescriptor,tht=function(e,t,n,r){for(var i,o=r>1?void 0:r?eht(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Qft(t,n,o),o},nht=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"undo",hotkey:"⌘+Z",name:"撤销",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.undo()}}),e.registerItem({id:"redo",hotkey:"⌘+shift+Z",name:"重做",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.redo()}})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();nht.pluginName="render-history",tht([Yf(Lj)],nht.prototype,"_commandService",2),nht=tht([Gf({contrib:[Sze,XYe]})],nht);var rht=Object.defineProperty,iht=Object.getOwnPropertyDescriptor,oht=function(e,t,n,r){for(var i,o=r>1?void 0:r?iht(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rht(t,n,o),o},aht=function(){return ox((function e(){rx(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"_hasSelection",value:function(){return!1}},{key:"init",value:function(){var e;null==(e=this._hotkeyService)||e.init()}},{key:"destroy",value:function(){var e;null==(e=this._hotkeyService)||e.destroy()}}],[{key:"pluginModule",value:function(){return w$e.register(this),w$e}}])}();function lht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lht(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}aht.pluginName="render-hotkey",oht([Yf(KYe),If()],aht.prototype,"_hotkeyService",2),oht([Yf(XA)],aht.prototype,"_readService",2),oht([Yf(hD)],aht.prototype,"_abilityService",2),aht=oht([Gf({contrib:[Sze]})],aht);var cht=function(e){var t=e.listeners,n=e.disable,r=void 0!==n&&n;return r?u.a.createElement(j4e,{title:wx("取消排序后，可进行拖拽")},u.a.createElement("div",uht(uht({className:F()("lakex-viewer-grid-row-dragger",{disable:r})},t),{},{onClick:function(e){return e.stopPropagation()}}),u.a.createElement(X$e,{type:"Drag"}))):u.a.createElement("div",uht(uht({className:F()("lakex-viewer-grid-row-dragger")},t),{},{onClick:function(e){return e.stopPropagation()}}),u.a.createElement(X$e,{type:"Drag"}))},sht=Rf.defineToken("OrderRenderPluginContribution"),dht=Object.defineProperty,fht=Object.getOwnPropertyDescriptor,hht=function(e,t,n,r){for(var i,o=r>1?void 0:r?fht(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dht(t,n,o),o},pht=function(){return ox((function e(){var t=this;rx(this,e),this._fieldOrderChecker=function(){var e=aO(QC.mark((function e(n,r){var i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t._provider.getContributions({cache:!1}))[0]||!i[0].fieldOrderChecker){e.next=3;break}return e.abrupt("return",i[0].fieldOrderChecker(n,r));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),[{key:"OrderDragIcon",get:function(){return cht}},{key:"updateViewOrder",value:function(e,t){this._commandService.execCommand("changeViewOrder",{sourceViewId:e,targetViewId:t})}},{key:"updateRecordOrder",value:function(e,t,n,r){var i=this._readService.getActiveView();this._commandService.execCommand("changeRecordOrder",{viewId:null==i?void 0:i.get("uuid"),sourceRecordId:e,targetRecordId:t,targetGroupItem:n,direction:r})}},{key:"updateFieldOrder",value:(e=aO(QC.mark((function e(t,n){var r,i,o,a,l,u;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._readService.getActiveView(),!this._fieldOrderChecker){e.next=11;break}return i=this._readService.getViewFields(),o=CC(i,(function(e){return e.get("field_uuid")===t})),a=n?CC(i,(function(e){return e.get("field_uuid")===n})):0,l=n,o<a&&(u=i.get(a+1),l=u?u.get("field_uuid"):null),e.next=9,this._fieldOrderChecker(t,l);case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:this._commandService.execCommand("changeFieldOrder",{viewId:null==r?void 0:r.get("uuid"),sourceFieldId:t,targetFieldId:n});case 12:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"updateFieldOptionOrder",value:function(e,t,n){this._commandService.execCommand("changeFieldOptionOrder",{fieldId:e,sourceFieldOptionId:t,targetFieldOptionId:n})}}]);var e}();hht([gh(sht)],pht.prototype,"_provider",2),hht([Yf(Lj)],pht.prototype,"_commandService",2),hht([Yf(XA)],pht.prototype,"_readService",2),pht=hht([Gf()],pht);var vht=Object.defineProperty,ght=Object.getOwnPropertyDescriptor,mht=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().contribution(sht).register(this).register(pht)}}])}();mht.pluginName="render-order",mht=function(e,t,n,r){for(var i,o=r>1?void 0:r?ght(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vht(t,n,o),o}([Gf({contrib:Sze})],mht);var yht=function(e){return e.delRow="delRow",e.delCol="delCol",e}(yht||{}),bht=function(e){return e[e.possible=1]="possible",e[e.unpossible=0]="unpossible",e}(bht||{});function wht(e,t,n){return t=DC(t),jC(e,_ht()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function _ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_ht=function(){return!!e})()}var xht=Object.defineProperty,kht=Object.getOwnPropertyDescriptor,Cht=function(e){function t(){var e;return rx(this,t),(e=wht(this,t,arguments))._onChange=e._register(new dS),e.onChange=e._onChange.event,e._possible={},e}return NC(t,e),ox(t,[{key:"getPossible",value:function(e){return this._possible[e]}},{key:"setPossible",value:function(e,t){this._possible[e]={type:e,status:bht.possible,data:t},this._onChange.emit({type:e,status:bht.possible,data:t})}},{key:"setUnpossible",value:function(e,t){this._possible[e]={type:e,status:bht.unpossible,data:t},this._onChange.emit({type:e,status:bht.unpossible,data:t})}}])}(HC);Cht=function(e,t,n,r){for(var i,o=r>1?void 0:r?kht(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xht(t,n,o),o}([Gf()],Cht);var Sht=Object.defineProperty,Oht=Object.getOwnPropertyDescriptor,Eht=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(Cht).register(this)}}])}();Eht.pluginName="render-possible",Eht=function(e,t,n,r){for(var i,o=r>1?void 0:r?Oht(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Sht(t,n,o),o}([Gf({contrib:Sze})],Eht);var Iht=Rf.defineToken("RefreshRenderPluginContribution");function Pht(e,t){return e===t||e!=e&&t!=t}function Mht(e,t){for(var n=e.length;n--;)if(Pht(e[n][0],t))return n;return-1}var Rht=Array.prototype.splice;function Aht(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Aht.prototype.clear=function(){this.__data__=[],this.size=0},Aht.prototype.delete=function(e){var t=this.__data__,n=Mht(t,e);return!(n<0)&&(n==t.length-1?t.pop():Rht.call(t,n,1),--this.size,!0)},Aht.prototype.get=function(e){var t=this.__data__,n=Mht(t,e);return n<0?void 0:t[n][1]},Aht.prototype.has=function(e){return Mht(this.__data__,e)>-1},Aht.prototype.set=function(e,t){var n=this.__data__,r=Mht(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var jht="object"==ex(B2e)&&B2e&&B2e.Object===Object&&B2e,Dht="object"==("undefined"==typeof self?"undefined":ex(self))&&self&&self.Object===Object&&self,Tht=jht||Dht||Function("return this")(),Fht=Tht.Symbol,Nht=Object.prototype,Lht=Nht.hasOwnProperty,Bht=Nht.toString,Vht=Fht?Fht.toStringTag:void 0;var zht=Object.prototype.toString;var Hht="[object Null]",Wht="[object Undefined]",Uht=Fht?Fht.toStringTag:void 0;function Ght(e){return null==e?void 0===e?Wht:Hht:Uht&&Uht in Object(e)?function(e){var t=Lht.call(e,Vht),n=e[Vht];try{e[Vht]=void 0;var r=!0}catch(e){}var i=Bht.call(e);return r&&(t?e[Vht]=n:delete e[Vht]),i}(e):function(e){return zht.call(e)}(e)}function Yht(e){var t=ex(e);return null!=e&&("object"==t||"function"==t)}var $ht="[object AsyncFunction]",qht="[object Function]",Kht="[object GeneratorFunction]",Xht="[object Proxy]";function Jht(e){if(!Yht(e))return!1;var t=Ght(e);return t==qht||t==Kht||t==$ht||t==Xht}var Zht=Tht["__core-js_shared__"],Qht=function(){var e=/[^.]+$/.exec(Zht&&Zht.keys&&Zht.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var ept=Function.prototype.toString;function tpt(e){if(null!=e){try{return ept.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var npt=/^\[object .+?Constructor\]$/,rpt=Function.prototype,ipt=Object.prototype,opt=rpt.toString,apt=ipt.hasOwnProperty,lpt=RegExp("^"+opt.call(apt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function upt(e){return!(!Yht(e)||function(e){return!!Qht&&Qht in e}(e))&&(Jht(e)?lpt:npt).test(tpt(e))}function cpt(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return upt(n)?n:void 0}var spt=cpt(Tht,"Map"),dpt=cpt(Object,"create");var fpt=Object.prototype.hasOwnProperty;var hpt=Object.prototype.hasOwnProperty;function ppt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function vpt(e,t){var n=e.__data__;return function(e){var t=ex(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function gpt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ppt.prototype.clear=function(){this.__data__=dpt?dpt(null):{},this.size=0},ppt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ppt.prototype.get=function(e){var t=this.__data__;if(dpt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return fpt.call(t,e)?t[e]:void 0},ppt.prototype.has=function(e){var t=this.__data__;return dpt?void 0!==t[e]:hpt.call(t,e)},ppt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=dpt&&void 0===t?"__lodash_hash_undefined__":t,this},gpt.prototype.clear=function(){this.size=0,this.__data__={hash:new ppt,map:new(spt||Aht),string:new ppt}},gpt.prototype.delete=function(e){var t=vpt(this,e).delete(e);return this.size-=t?1:0,t},gpt.prototype.get=function(e){return vpt(this,e).get(e)},gpt.prototype.has=function(e){return vpt(this,e).has(e)},gpt.prototype.set=function(e,t){var n=vpt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function mpt(e){var t=this.__data__=new Aht(e);this.size=t.size}mpt.prototype.clear=function(){this.__data__=new Aht,this.size=0},mpt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},mpt.prototype.get=function(e){return this.__data__.get(e)},mpt.prototype.has=function(e){return this.__data__.has(e)},mpt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Aht){var r=n.__data__;if(!spt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gpt(r)}return n.set(e,t),this.size=n.size,this};function ypt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new gpt;++t<n;)this.add(e[t])}function bpt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}ypt.prototype.add=ypt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ypt.prototype.has=function(e){return this.__data__.has(e)};var wpt=1,_pt=2;function xpt(e,t,n,r,i,o){var a=n&wpt,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=o.get(e),s=o.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,h=n&_pt?new ypt:void 0;for(o.set(e,t),o.set(t,e);++d<l;){var p=e[d],v=t[d];if(r)var g=a?r(v,p,d,t,e,o):r(p,v,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!bpt(t,(function(e,t){if(a=t,!h.has(a)&&(p===e||i(p,e,n,r,o)))return h.push(t);var a}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}var kpt=Tht.Uint8Array;function Cpt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Spt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Opt=1,Ept=2,Ipt="[object Boolean]",Ppt="[object Date]",Mpt="[object Error]",Rpt="[object Map]",Apt="[object Number]",jpt="[object RegExp]",Dpt="[object Set]",Tpt="[object String]",Fpt="[object Symbol]",Npt="[object ArrayBuffer]",Lpt="[object DataView]",Bpt=Fht?Fht.prototype:void 0,Vpt=Bpt?Bpt.valueOf:void 0;var zpt=Array.isArray;var Hpt=Object.prototype.propertyIsEnumerable,Wpt=Object.getOwnPropertySymbols,Upt=Wpt?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(Wpt(e),(function(t){return Hpt.call(e,t)})))}:function(){return[]};function Gpt(e){return null!=e&&"object"==ex(e)}function Ypt(e){return Gpt(e)&&"[object Arguments]"==Ght(e)}var $pt=Object.prototype,qpt=$pt.hasOwnProperty,Kpt=$pt.propertyIsEnumerable,Xpt=Ypt(function(){return arguments}())?Ypt:function(e){return Gpt(e)&&qpt.call(e,"callee")&&!Kpt.call(e,"callee")};var Jpt="object"==("undefined"==typeof exports?"undefined":ex(exports))&&exports&&!exports.nodeType&&exports,Zpt=Jpt&&"object"==ex(r)&&r&&!r.nodeType&&r,Qpt=Zpt&&Zpt.exports===Jpt?Tht.Buffer:void 0,evt=(Qpt?Qpt.isBuffer:void 0)||function(){return!1},tvt=9007199254740991,nvt=/^(?:0|[1-9]\d*)$/;function rvt(e,t){var n=ex(e);return!!(t=null==t?tvt:t)&&("number"==n||"symbol"!=n&&nvt.test(e))&&e>-1&&e%1==0&&e<t}var ivt=9007199254740991;function ovt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ivt}var avt={};avt["[object Float32Array]"]=avt["[object Float64Array]"]=avt["[object Int8Array]"]=avt["[object Int16Array]"]=avt["[object Int32Array]"]=avt["[object Uint8Array]"]=avt["[object Uint8ClampedArray]"]=avt["[object Uint16Array]"]=avt["[object Uint32Array]"]=!0,avt["[object Arguments]"]=avt["[object Array]"]=avt["[object ArrayBuffer]"]=avt["[object Boolean]"]=avt["[object DataView]"]=avt["[object Date]"]=avt["[object Error]"]=avt["[object Function]"]=avt["[object Map]"]=avt["[object Number]"]=avt["[object Object]"]=avt["[object RegExp]"]=avt["[object Set]"]=avt["[object String]"]=avt["[object WeakMap]"]=!1;var lvt="object"==("undefined"==typeof exports?"undefined":ex(exports))&&exports&&!exports.nodeType&&exports,uvt=lvt&&"object"==ex(r)&&r&&!r.nodeType&&r,cvt=uvt&&uvt.exports===lvt&&jht.process,svt=function(){try{var e=uvt&&uvt.require&&uvt.require("util").types;return e||cvt&&cvt.binding&&cvt.binding("util")}catch(e){}}(),dvt=svt&&svt.isTypedArray,fvt=dvt?function(e){return function(t){return e(t)}}(dvt):function(e){return Gpt(e)&&ovt(e.length)&&!!avt[Ght(e)]},hvt=Object.prototype.hasOwnProperty;function pvt(e,t){var n=zpt(e),r=!n&&Xpt(e),i=!n&&!r&&evt(e),o=!n&&!r&&!i&&fvt(e),a=n||r||i||o,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(var c in e)!hvt.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||rvt(c,u))||l.push(c);return l}var vvt=Object.prototype;var gvt=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),mvt=Object.prototype.hasOwnProperty;function yvt(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vvt)}(e))return gvt(e);var t=[];for(var n in Object(e))mvt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function bvt(e){return function(e){return null!=e&&ovt(e.length)&&!Jht(e)}(e)?pvt(e):yvt(e)}function wvt(e){return function(e,t,n){var r=t(e);return zpt(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,bvt,Upt)}var _vt=1,xvt=Object.prototype.hasOwnProperty;var kvt=cpt(Tht,"DataView"),Cvt=cpt(Tht,"Promise"),Svt=cpt(Tht,"Set"),Ovt=cpt(Tht,"WeakMap"),Evt="[object Map]",Ivt="[object Promise]",Pvt="[object Set]",Mvt="[object WeakMap]",Rvt="[object DataView]",Avt=tpt(kvt),jvt=tpt(spt),Dvt=tpt(Cvt),Tvt=tpt(Svt),Fvt=tpt(Ovt),Nvt=Ght;(kvt&&Nvt(new kvt(new ArrayBuffer(1)))!=Rvt||spt&&Nvt(new spt)!=Evt||Cvt&&Nvt(Cvt.resolve())!=Ivt||Svt&&Nvt(new Svt)!=Pvt||Ovt&&Nvt(new Ovt)!=Mvt)&&(Nvt=function(e){var t=Ght(e),n="[object Object]"==t?e.constructor:void 0,r=n?tpt(n):"";if(r)switch(r){case Avt:return Rvt;case jvt:return Evt;case Dvt:return Ivt;case Tvt:return Pvt;case Fvt:return Mvt}return t});var Lvt=1,Bvt="[object Arguments]",Vvt="[object Array]",zvt="[object Object]",Hvt=Object.prototype.hasOwnProperty;function Wvt(e,t,n,r,i,o){var a=zpt(e),l=zpt(t),u=a?Vvt:Nvt(e),c=l?Vvt:Nvt(t),s=(u=u==Bvt?zvt:u)==zvt,d=(c=c==Bvt?zvt:c)==zvt,f=u==c;if(f&&evt(e)){if(!evt(t))return!1;a=!0,s=!1}if(f&&!s)return o||(o=new mpt),a||fvt(e)?xpt(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case Lpt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Npt:return!(e.byteLength!=t.byteLength||!o(new kpt(e),new kpt(t)));case Ipt:case Ppt:case Apt:return Pht(+e,+t);case Mpt:return e.name==t.name&&e.message==t.message;case jpt:case Tpt:return e==t+"";case Rpt:var l=Cpt;case Dpt:var u=r&Opt;if(l||(l=Spt),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=Ept,a.set(e,t);var s=xpt(l(e),l(t),r,i,o,a);return a.delete(e),s;case Fpt:if(Vpt)return Vpt.call(e)==Vpt.call(t)}return!1}(e,t,u,n,r,i,o);if(!(n&Lvt)){var h=s&&Hvt.call(e,"__wrapped__"),p=d&&Hvt.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return o||(o=new mpt),i(v,g,n,r,o)}}return!!f&&(o||(o=new mpt),function(e,t,n,r,i,o){var a=n&_vt,l=wvt(e),u=l.length;if(u!=wvt(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:xvt.call(t,s)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var v=e[s=l[c]],g=t[s];if(r)var m=a?r(g,v,s,t,e,o):r(v,g,s,e,t,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){h=!1;break}p||(p="constructor"==s)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,i,o))}function Uvt(e,t,n,r,i){return e===t||(null==e||null==t||!Gpt(e)&&!Gpt(t)?e!=e&&t!=t:Wvt(e,t,n,r,Uvt,i))}function Gvt(e,t){return Uvt(e,t)}function Yvt(e,t,n){return t=DC(t),jC(e,$vt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($vt=function(){return!!e})()}var qvt=Object.defineProperty,Kvt=Object.getOwnPropertyDescriptor,Xvt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Kvt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qvt(t,n,o),o},Jvt=function(e){function t(){var e;return rx(this,t),(e=Yvt(this,t,arguments))._task=null,e._originCellValue=null,e._handleRefresh=function(){},e._selectionListener=null,e._commandListener=null,e._onRefreshTooltipChange=e._register(new dS),e.onRefreshTooltipChange=e._onRefreshTooltipChange.event,e.DESC_MAP=nx(nx(nx({},nj.GROUP,{text:wx("本记录将被移至新的分组"),ps:wx("本记录不属于该分组，点击其他区域将移走该记录")}),nj.FILTER,{text:wx("本记录将被过滤"),ps:wx("本记录已被筛选过滤，点击其他区域将隐藏该记录")}),nj.SORT,{text:wx("本记录将被移动到新的排序位置"),ps:wx("本记录因排序规则会移动，点击其他区域将移走该记录")}),e}return NC(t,e),ox(t,[{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}},{key:"init",value:function(){this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this;this._refreshEventService.onBeforeRefresh(function(){var t=aO(QC.mark((function t(n){var r,i,o,a,l,u,c,s,d,f,h,p,v,g,m,y,b;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.type,i=n.commandName,o=n.params,a=n.action,h=e._readService.getActiveView(),null==(l=e._selectionListener)||l.destroy(),null==(u=e._commandListener)||u.destroy(),"setCell"!==i&&"removeCells"!==i){t.next=35;break}if(p="setCell"===i?o:o.cells[0],v=e._readService.getCell(p.fieldId,p.recordId),g=null==(c=e._selectionService)?void 0:c.getSelection(),!e._originCellValue&&v&&(e._originCellValue=v.value),!e._task){t.next=24;break}if(i!==e._task.commandName||p.recordId!==e._task.params.recordId||p.fieldId!==e._task.params.fieldId){t.next=19;break}if(!Gvt(null==p?void 0:p.value,e._originCellValue)){t.next=16;break}return e._task=null,e._hideHighlight(),e._hideTooltip(),t.abrupt("return");case 16:e._task={type:r,commandName:i,params:o,action:a},t.next=22;break;case 19:return t.next=21,e._task.action();case 21:e._task={type:r,commandName:i,params:o,action:a};case 22:t.next=25;break;case 24:e._task={type:r,commandName:i,params:o,action:a};case 25:if((null==h?void 0:h.get("type"))===WO.GRID&&e._showHighlight(h,p.recordId),e._handleRefresh=aO(QC.mark((function t(){var n,r;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh(),e._updateSelection(h,p.recordId,g);case 5:case"end":return t.stop()}}),t)}))),(m=null==h?void 0:h.get("type"))!==WO.KANBAN){t.next=31;break}return e._handleRefresh(),t.abrupt("return");case 31:return e._showTooltip(r,p.recordId),m===WO.GRID&&(e._selectionListener=null==(s=e._selectionService)?void 0:s.onChange((function(t){var n=t.selection;n?n.isCollapsed&&n.anchor.row!==g.anchor.row&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 35:if("addEmptyRecord"!==i){t.next=51;break}if(y=o.uuid,b=null==(d=e._selectionService)?void 0:d.getSelection(),!e._task){t.next=44;break}return t.next=41,e._task.action();case 41:e._task={type:r,commandName:i,params:o,action:a},t.next=45;break;case 44:e._task={type:r,commandName:i,params:o,action:a};case 45:return(null==h?void 0:h.get("type"))===WO.GRID&&e._showHighlight(h,y),e._showTooltip(r,y),e._handleRefresh=aO(QC.mark((function t(){var n,r;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh();case 4:case"end":return t.stop()}}),t)}))),(null==h?void 0:h.get("type"))===WO.GRID&&(e._selectionListener=null==(f=e._selectionService)?void 0:f.onChange((function(t){var n,r=t.selection;r?r.isCollapsed&&r.anchor.row!==(null==(n=null==b?void 0:b.anchor)?void 0:n.row)&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 51:a();case 52:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_showHighlight",value:function(e,t){var n=OC(this._readService.getViewFields(null==e?void 0:e.get("uuid")),(function(e){return{recordId:t,fieldId:e.get("field_uuid")}}));this._highlightService.setHighlights("refresh",n)}},{key:"_hideHighlight",value:function(){this._highlightService.clearHighlights("refresh")}},{key:"_showTooltip",value:function(e,t){this._onRefreshTooltipChange.emit({type:e,recordId:t,desc:this.DESC_MAP[e]})}},{key:"_hideTooltip",value:function(){this._onRefreshTooltipChange.emit({type:null,recordId:"",desc:{text:"",ps:""}})}},{key:"_updateSelection",value:function(e,t,n){var r,i,o;if((null==e?void 0:e.get("type"))===WO.GRID&&n){var a=this._readService.getFlatViewRecords(e.get("uuid")),l=n.anchor,u=CC(a,(function(e){return(null==e?void 0:e.get("record_uuid"))===t}));if(u>=0){var c=null==(r=this._selectionService)?void 0:r.getSelection(),s=null==(i=this._selectionService)?void 0:i.createGridSelectionByIndex(u,c?c.anchor.column:l.column,l.rowCount,l.columnCount);null==(o=this._selectionService)||o.scrollToSelection(s,"center")}}}},{key:"_afterRefresh",value:function(){var e,t;this._task=null,this._originCellValue=null,this._hideHighlight(),this._hideTooltip(),null==(e=this._selectionListener)||e.destroy(),null==(t=this._commandListener)||t.destroy()}}])}(HC);Xvt([Yf(rj)],Jvt.prototype,"_refreshEventService",2),Xvt([Yf(yot),If()],Jvt.prototype,"_selectionService",2),Xvt([Yf(XA)],Jvt.prototype,"_readService",2),Xvt([Yf(Vft)],Jvt.prototype,"_highlightService",2),Xvt([Yf(Lj)],Jvt.prototype,"_commandService",2),Xvt([Df()],Jvt.prototype,"destroy",1),Jvt=Xvt([Gf()],Jvt);var Zvt=Object.defineProperty,Qvt=Object.getOwnPropertyDescriptor,egt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Qvt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Zvt(t,n,o),o},tgt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e;null==(e=this._refreshService)||e.init()}}],[{key:"pluginModule",value:function(){return ch().contribution(Iht).register(this).register(Jvt)}}])}();tgt.pluginName="render-refresh",egt([Yf(Jvt),If()],tgt.prototype,"_refreshService",2),tgt=egt([Gf({contrib:Sze})],tgt);var ngt=Rf.defineToken("SearchRegistryToken"),rgt=Rf.defineToken("SearchRenderPluginContribution"),igt=function(e){var t=e.isFolding,n=e.onFold;return u.a.createElement("span",{className:"lakex-viewer-grid-group-fold"},u.a.createElement(X$e,{type:"ReviewArrowDown",size:16,onClick:function(){n&&n(!t)}}))};function ogt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return agt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?agt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function agt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lgt(e,t,n){return t=DC(t),jC(e,ugt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ugt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ugt=function(){return!!e})()}var cgt=Object.defineProperty,sgt=Object.getOwnPropertyDescriptor,dgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?sgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&cgt(t,n,o),o},fgt=function(e){function t(){var e;return rx(this,t),(e=lgt(this,t,arguments))._onGroupFoldingChange=e._register(new dS),e.onGroupFoldingChange=e._onGroupFoldingChange.event,e}return NC(t,e),ox(t,[{key:"getGroupFolding",value:function(e,t){var n,r=new Set,i=ogt(this._readService.getGroupItems(e,t));try{for(i.s();!(n=i.n()).done;){var o=n.value;o.get("collapse")&&r.add(o.get("key"))}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"FoldIcon",get:function(){return igt}},{key:"setGroupFolding",value:function(e,t,n,r){this._commandService.execCommand("updateGridGroupFold",{viewId:e,fieldId:t,groupId:n,value:r}),this._onGroupFoldingChange.emit({viewId:e,fieldId:t,groupId:n,value:r})}},{key:"tryUnFoldCellGroup",value:function(e,t){if(e&&t){var n=this._readService.getViewRecordByRecordId(t||"");if(n){var r=this._readService.getViewGroup();if(r){var i=r.field.get("uuid"),o=(null==n?void 0:n.get("group_item_key"))||"ungroup",a=this.getGroupFolding(e,i);(null==a?void 0:a.has(o))&&this.setGroupFolding(e,i,o,!1)}}}}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function hgt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pgt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pgt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function pgt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vgt(e,t,n){return t=DC(t),jC(e,ggt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ggt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ggt=function(){return!!e})()}dgt([Yf(XA)],fgt.prototype,"_readService",2),dgt([Yf(Lj)],fgt.prototype,"_commandService",2),dgt([Df()],fgt.prototype,"destroy",1),fgt=dgt([Gf()],fgt);var mgt=Object.defineProperty,ygt=Object.getOwnPropertyDescriptor,bgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?ygt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mgt(t,n,o),o},wgt=DD.Plugin("search"),_gt=function(e){function t(){var e;return rx(this,t),(e=vgt(this,t,arguments))._selectionService=null,e._highlightService=null,e.isInSearching=!1,e._onSearching=e._register(new dS),e.onSearching=e._onSearching.event,e._onExitSearching=e._register(new dS),e.onExitSearching=e._onExitSearching.event,e}return NC(t,e),ox(t,[{key:"_getViewSearchResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this._readService.isGroup(e),r=this._readService.getViewFields(e),i=[];if(n){var o,a=hgt(this._readService.getGroupViewRecords(e));try{for(a.s();!(o=a.n()).done;){var l=o.value.viewRecords;if(l){var u,c=hgt(l);try{for(c.s();!(u=c.n()).done;){var s,d=u.value,f=hgt(r);try{for(f.s();!(s=f.n()).done;){var h=s.value,p=this._getMatch(t,h.get("field_uuid"),d.get("record_uuid"));p&&i.push(p)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){a.e(e)}finally{a.f()}}else{var v=this._readService.getViewRecords(e);if(!r||0===r.length)return i;var g,m=hgt(v);try{for(m.s();!(g=m.n()).done;){var y,b=g.value,w=hgt(r);try{for(w.s();!(y=w.n()).done;){var _=y.value,x=this._getMatch(t,_.get("field_uuid"),b.get("record_uuid"));x&&i.push(x)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){m.e(e)}finally{m.f()}}return i}},{key:"_getMatch",value:function(e,t,n){var r=this._readService.getCellFormattedValue(t,n);try{var i=this._searchRegistry.getMatchMiddlewares()||[];if(i.length>0){var o,a=hgt(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;r=l?l(e,t,n,r):r}}catch(e){a.e(e)}finally{a.f()}}}catch(e){wgt("search match middleware error:",e)}if(r)return r.includes(e)?{fieldId:t,recordId:n}:void 0}},{key:"search",value:function(e,t){var n,r,i=this._readService.getActiveView();if(!i)return[];var o=this._getViewSearchResult(i.get("uuid"),e);return null==(n=this._highlightService)||n.clearHighlights("search"),o.length>0&&(null==(r=this._highlightService)||r.setHighlights("search",o,t)),(null==i?void 0:i.get("type"))!==WO.GRID?Jc(o.map((function(e){return{recordId:e.recordId}})),"recordId"):o}},{key:"jumpToSearch",value:function(e,t){var n,r,i,o;if(e){var a=null==(n=this._selectionService)?void 0:n.createSelectionById(e.recordId,e.fieldId,!1);if(a){var l=this._readService.getActiveView();if(!l)return;null==(r=this._groupFoldService)||r.tryUnFoldCellGroup(null==l?void 0:l.get("uuid"),e.recordId),t?null==(i=this._selectionService)||i.setSelection(a):null==(o=this._selectionService)||o.scrollToSelection(a,"center")}}}},{key:"closeSearch",value:function(){var e,t,n,r;null==(e=this._highlightService)||e.clearHighlights("search"),(null==(n=null==(t=this._readService)?void 0:t.getActiveView())?void 0:n.get("type"))!==WO.GRID&&(null==(r=this._selectionService)||r.removeSelection())}},{key:"emitSearchingEvent",value:function(){this.isInSearching=!0,this._onSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!1)}},{key:"emitExitSearchingEvent",value:function(){this.isInSearching=!1,this._onExitSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!0)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function xgt(e,t,n){return t=DC(t),jC(e,kgt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function kgt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kgt=function(){return!!e})()}bgt([Yf(XA)],_gt.prototype,"_readService",2),bgt([Yf(ngt)],_gt.prototype,"_searchRegistry",2),bgt([Yf(dHe)],_gt.prototype,"_renderFocusService",2),bgt([Yf(yot),If()],_gt.prototype,"_selectionService",2),bgt([Yf(Vft),If()],_gt.prototype,"_highlightService",2),bgt([Yf(fgt),If()],_gt.prototype,"_groupFoldService",2),bgt([Df()],_gt.prototype,"destroy",1),_gt=bgt([Gf()],_gt);var Cgt=Object.defineProperty,Sgt=Object.getOwnPropertyDescriptor,Ogt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Sgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Cgt(t,n,o),o},Egt=function(e){function t(){return rx(this,t),xgt(this,t,arguments)}return NC(t,e),ox(t,[{key:"getMatchMiddlewares",value:function(){return(this.searchProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerMatchMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}(HC);Ogt([gh(rgt)],Egt.prototype,"searchProvider",2),Egt=Ogt([Gf({token:ngt})],Egt);var Igt=Object.defineProperty,Pgt=Object.getOwnPropertyDescriptor,Mgt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(this).contribution(rgt).register(Egt).register(_gt)}}])}();function Rgt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Agt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Agt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Agt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Mgt.pluginName="render-search",Mgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Pgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Igt(t,n,o),o}([Gf({contrib:[Sze]})],Mgt);var jgt=Object.defineProperty,Dgt=Object.getOwnPropertyDescriptor,Tgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Dgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&jgt(t,n,o),o},Fgt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e;this._registerScrollService(),null==(e=this._selectionBindingService)||e.init()}},{key:"_registerScrollService",value:function(){var e,t=Rgt(this._selectionPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerScrollService(this._selectionService)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}],[{key:"pluginModule",value:function(){return ch().contribution(oot).register(this).register(yot).register(Oot)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"selection",type:"object",title:"选区",properties:{ignoreSelectors:{type:"object",items:{type:"string"},description:"阻止处理的节点"},autoClear:{type:"boolean",description:"是否自动清除选区"}}}),e.registerDefaultValue({"viewerGrid.stickyColNum":1,"viewerGrid.defaultColWidth":180,"viewerGrid.row.height.low":36,"viewerGrid.row.height.middle":64,"viewerGrid.row.height.high":148,"selection.autoClear":!0})}}])}();Fgt.pluginName="render-selection",Tgt([Yf(yot),If()],Fgt.prototype,"_selectionService",2),Tgt([Yf(Oot),If()],Fgt.prototype,"_selectionBindingService",2),Tgt([gh(oot)],Fgt.prototype,"_selectionPluginProvider",2),Fgt=Tgt([Gf({contrib:Sze})],Fgt);var Ngt=Rf.defineToken("StatisticsRenderPluginContribution");function Lgt(e,t,n){return t=DC(t),jC(e,Bgt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Bgt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bgt=function(){return!!e})()}var Vgt=Object.defineProperty,zgt=Object.getOwnPropertyDescriptor,Hgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?zgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Vgt(t,n,o),o},Wgt=function(e){function t(){var e;return rx(this,t),(e=Lgt(this,t,arguments))._onClick=e._register(new dS),e.onClick=e._onClick.event,e}return NC(t,e),ox(t,[{key:"open",value:function(e,t,n,r){this._onClick.emit({view:e,field:t,stat:n,target:r})}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);Hgt([Df()],Wgt.prototype,"destroy",1),Wgt=Hgt([Gf()],Wgt);var Ugt=[xO.TEXT,xO.SELECT,xO.MULTI_SELECT,xO.NUMBER,xO.RATE,xO.PROGRESS,xO.DATE,xO.IMAGE,xO.FILE,xO.PHONE,xO.MENTION,xO.LINK,xO.EMAIL,xO.USER_ID,xO.CREATED_AT,xO.MODIFIER_ID,xO.UPDATED_AT],Ggt=[xO.DATE,xO.CREATED_AT,xO.UPDATED_AT],Ygt={none:{stats:wx("统计"),text:wx("不展示")},count:{stats:wx("$1 条记录"),text:wx("记录总数")},filled:{stats:wx("已填写 $1"),text:wx("已填写数"),types:Ugt},empty:{stats:wx("未填写 $1"),text:wx("未填写数"),types:Ugt},checked:{stats:wx("已勾选 $1"),text:wx("已勾选"),types:[xO.CHECKBOX]},unchecked:{stats:wx("未勾选 $1"),text:wx("未勾选"),types:[xO.CHECKBOX]},unique:{stats:wx("唯一数 $1"),text:wx("唯一数"),types:Ugt},percentFilled:{stats:wx("已填写占比 $1"),text:wx("已填写占比"),types:Ugt},percentEmpty:{stats:wx("未填写占比 $1"),text:wx("未填写占比"),types:Ugt},percentUnique:{stats:wx("唯一数占比 $1"),text:wx("唯一数占比"),types:Ugt},sum:{stats:wx("求和 $1"),text:wx("求和"),types:[xO.NUMBER]},average:{stats:wx("平均值 $1"),text:wx("平均值"),types:[xO.NUMBER]},median:{stats:wx("中位数 $1"),text:wx("中位数"),types:[xO.NUMBER]},max:{stats:wx("最大值 $1"),text:wx("最大值"),types:[xO.NUMBER,xO.RATE,xO.PROGRESS]},min:{stats:wx("最小值 $1"),text:wx("最小值"),types:[xO.NUMBER,xO.RATE,xO.PROGRESS]},earliestDate:{stats:wx("最早时间 $1"),text:wx("最早时间"),types:Ggt},latestDate:{stats:wx("最晚时间 $1"),text:wx("最晚时间"),types:Ggt},dateRange:{stats:wx("时间范围 $1 天"),text:wx("时间范围（日）"),types:Ggt},monthRange:{stats:wx("时间范围 $1 月"),text:wx("时间范围（月）"),types:Ggt},percentChecked:{stats:wx("已勾选占比 $1"),text:wx("已勾选占比"),types:[xO.CHECKBOX]},percentUnchecked:{stats:wx("未勾选占比 $1"),text:wx("未勾选占比"),types:[xO.CHECKBOX]}},$gt=function(e){var t,n=e.viewField,r=e.recordIds,i=e.isReadonly,o=function(e){var t,n=e.viewField,r=e.recordIds,i=e.isReadonly,o=SWe(XA),a=SWe(Wgt),u=o.getActiveView(),c=jF(Object(l.useState)(void 0),2),s=c[0],d=c[1],f=jF(Object(l.useState)(),2),h=f[0],p=f[1];return P$e((function(){u&&n&&_O((function(){var e=o.getStatValue(u.get("uuid"),n.get("field_uuid"),r);d(null==e?void 0:e.stat.toJSON()),e&&p(e.value)}))}),[null==u?void 0:u.get("uuid"),null==n?void 0:n.get("field_uuid"),r]),{stat:s,statValue:h,fieldType:null==(t=n.get("field"))?void 0:t.get("type"),onClick:function(e){i||null==a||a.open(u,n.get("field"),s,e.currentTarget)}}}({viewField:n,recordIds:r,isReadonly:i}),c=o.stat,s=o.statValue,d=o.fieldType,f=o.onClick;if(c&&c.type){var h=Ygt[c.type].stats,p=s;("earliestDate"===c.type||"latestDate"===c.type&&s)&&(p=a()(s).format("YYYY-MM-DD")),t=u.a.createElement("span",{className:"lakex-table-stats-filled"},u.a.createElement("span",{className:"lakex-table-stats-text"},wx(h,p+"")),u.a.createElement(X$e,{type:"ReviewArrowDown",size:14}))}else t=u.a.createElement("span",{className:"lakex-table-stats-unfilled"},u.a.createElement("span",{className:"lakex-table-stats-text"},Ygt.none.stats),u.a.createElement(X$e,{type:"ReviewArrowDown",size:14}));return u.a.createElement("div",{className:F()("lakex-table-stats lakex-table-stats-".concat(d),{"lakex-table-readonly":i}),onClick:f},t)},qgt=Object.defineProperty,Kgt=Object.getOwnPropertyDescriptor,Xgt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getStatisticsComponent",value:function(){return $gt}}],[{key:"pluginModule",value:function(){return ch().contribution(Ngt).register(Wgt).register(this)}}])}();Xgt.pluginName="render-statistics",Xgt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Kgt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qgt(t,n,o),o}([Gf({contrib:[Sze,hit]})],Xgt);var Jgt=u.a.createContext({});Jgt.displayName="CalendarContext";var Zgt=Jgt.Provider;function Qgt(e){if(null==e)throw new TypeError("Cannot destructure "+e)}Jgt.Consumer;var emt=function(e){var t=e.date,n=e.onCurrentDateChange,r=Object(l.useCallback)((function(e,r,i){var o=t[e](i,r);n(o)}),[t]),i=Object(l.useCallback)((function(e){e.stopPropagation(),r(Att,Dtt,1)}),[r]),o=Object(l.useCallback)((function(e){e.stopPropagation(),r(Rtt,Dtt,1)}),[r]),a=Object(l.useCallback)((function(){var e=Ek();t.isSame(e)||n(e)}),[t]);return React.createElement("div",{className:"lakex-table-view-calendar-header"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-date"},t.format(wx("YYYY年M月"))),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-prev",onClick:i},React.createElement(X$e,{type:"ArrowLeft",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-next",onClick:o},React.createElement(X$e,{type:"ArrowRight",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-today-button",onClick:a},wx("今天"))))},tmt=Rf.defineToken("ViewerCalendarDataServiceToken"),nmt=function(){for(var e=SWe(tmt).startWeekDay,t=[],n=0;n<Ttt;n++){var r=(e+n)%Ttt;t.push(Ftt[r])}return React.createElement("div",{className:"lakex-view-calendar-week-names"},t.map((function(e,t){return React.createElement("div",{className:"lakex-view-calendar-week-names-item",key:t},e)})))},rmt=Rf.defineToken("ContextMenuContribution");function imt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return omt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?omt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function omt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var amt=Object.defineProperty,lmt=Object.getOwnPropertyDescriptor,umt=function(e,t,n,r){for(var i,o=r>1?void 0:r?lmt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&amt(t,n,o),o},cmt=function(){return ox((function e(){rx(this,e),this._items=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=imt(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerContextMenu)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.key;if(this._items.has(t))throw new Error("A contextmenu item is already registered with the '".concat(t,"'"));return this._items.set(t,e),e}},{key:"getContextMenuItem",value:function(e){return"|"===e?e:this._items.get(e)}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.key;this.getContextMenuItem(t)&&this._items.delete(t)}},{key:"hasContextMenu",get:function(){return this._items.size>0}}])}();function smt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dmt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?smt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):smt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}umt([gh(rmt)],cmt.prototype,"toolbarPluginProvider",2),cmt=umt([Gf()],cmt);var fmt=Object.defineProperty,hmt=Object.getOwnPropertyDescriptor,pmt=function(e,t,n,r){for(var i,o=r>1?void 0:r?hmt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fmt(t,n,o),o},vmt=function(){return ox((function e(){rx(this,e)}),[{key:"getMenuItems",value:function(e){var t=this,n=(this._configurationService.getValue("contextMenu")||[]).map((function(e){return t._contextMenuRegistry.getContextMenuItem(e)})).filter((function(e){return void 0!==e}));return this.cleanMenuItems(n,e)}},{key:"cleanMenuItems",value:function(e,t){var n=[];return e.forEach((function(e){if("|"===e){var r=n[n.length-1];r&&"|"!==r||n.pop(),n.push(e)}else{if(null==e.visible&&(e.visible=!0),!($r(e.visible)?e.visible(t):e.visible))return;n.push(dmt(dmt({},e),{},{name:$r(e.name)?e.name(t):e.name}))}})),"|"===n[n.length-1]&&n.pop(),"|"===n[0]&&n.shift(),n}}])}();function gmt(e){var t=SWe(Cht,{optional:!0,cache:!0}),n=jF(Object(l.useState)(bht.unpossible),2),r=n[0],i=n[1];return Object(l.useEffect)((function(){var n=null==t?void 0:t.onChange((function(t){t.type===yht.delRow&&(t.data&&!t.data.includes(e)||i(t.status))}));return function(){null==n||n.destroy()}}),[t]),r}function mmt(e){var t=SWe(Cht,{optional:!0,cache:!0}),n=jF(Object(l.useState)(bht.unpossible),2),r=n[0],i=n[1];return P$e((function(){var n=null==t?void 0:t.onChange((function(t){t.type===yht.delCol&&(t.data&&!t.data.includes(e)||i(t.status))}));return function(){null==n||n.destroy()}}),[]),r}pmt([Yf(RC)],vmt.prototype,"_configurationService",2),pmt([Yf(cmt)],vmt.prototype,"_contextMenuRegistry",2),vmt=pmt([Gf()],vmt);var ymt=function(e){var t=e.date,n=e.colIndex;e.rowIndex;var r,i,o=e.schedule,a=e.activeScheduleId,u=e.dragScheduleId,c=e.onBeforeDrag,s=e.onBeforeResize,d=e.onEnterSchedule,f=e.onLeaveSchedule,h=Object(l.useContext)(Jgt),p=h.isReadonly,v=h.renderService,g=SWe(XA),m=SWe(tmt),y=SWe(Eat,{optional:!0}),b=SWe(yot,{optional:!0}),w=gmt(o.id),_=function(){var e,t,n;return!((null==(n=null==(t=null==(e=null==b?void 0:b.getSelection())?void 0:e.getRangeAt)?void 0:t.call(e,0))?void 0:n.recordId)!==o.id)},x=jF(Object(l.useState)(_()),2),k=x[0],C=x[1];P$e((function(){var e=null==b?void 0:b.onChange((function(e){e.selection;C(_())}));return function(){null==e||e.destroy()}}),[]);var S=zft({recordId:o.id}),O="lakex-view-calendar-schedule-line",E=Object(l.useRef)(!1),I=Object(l.useRef)(!1),P=Object(l.useRef)(null),M=Object(l.useRef)(null),R=o.isStartDate(t),A=o.id===a,j=g.getViewConfig(),D=(null==j?void 0:j.get("start_date_field_uuid"))||"",T=(null==j?void 0:j.get("end_date_field_uuid"))||"",F=null==(r=g.getField(D))?void 0:r.get("type"),N=null==(i=g.getField(T))?void 0:i.get("type"),L=F===xO.DATE,B=N===xO.DATE,V=(null==j?void 0:j.get("date_color_type"))||FO.CUSTOM,z=(null==j?void 0:j.get("date_color"))||"",H=g.getFieldOptions(z),W=Object(l.useMemo)((function(){var e={};return V===FO.FOLLOW_FIELD&&z&&OC(H,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[V,z,H]),U=Object(l.useMemo)((function(){var e=m.getScheduleLineStyle({schedule:o,colIndex:n,date:t,isActive:A,isDelPossible:!!w,isInHighlight:S,isSelected:k,scheduleColorType:V,schedlueColorFieldIdOrColorId:z,colorMap:W});return u===o.id&&(e.lineStyle.opacity=0),e}),[o,n,t,a,u,w,S,k,W]),G=U.lineStyle,Y=U.labelStyle,$=U.isShowControl,q=Object(l.useCallback)((function(){P.current&&clearTimeout(P.current),P.current=null}),[P.current]),K=Object(l.useCallback)((function(e){e.preventDefault(),null==y||y.showContextMenu({e:e,from:Oat.CALENDAR_RECORD,recordId:o.id})}),[o,y]),X=Object(l.useCallback)((function(e){e.persist(),p||(I.current?I.current=!1:(q(),P.current=setTimeout((function(){null==v||v.emitClickEvent({eventName:"selectSchedule",data:{recordId:o.id,event:e}})}),300)))}),[o,p,I.current,q]),J=Object(l.useCallback)((function(e){q(),null==v||v.emitClickRecord({recordId:o.id})}),[o,q]),Z=Object(l.useCallback)((function(e){if(2!==e.button&&!p&&L&&B){E.current=!0;var t={x:e.clientX,y:e.clientY};setTimeout((function(){E.current&&(q(),c(o,t))}),300)}}),[E.current,o,p,L,B,q]),Q=Object(l.useCallback)((function(e,t){2===e.button||p||(I.current=!0,s(o,t))}),[o,p]),ee=Object(l.useCallback)((function(){I.current=!1}),[]);return React.createElement("div",{className:"".concat(O),ref:M,style:G,"data-id":o.id,"data-active":A,"data-is-start":R,"data-line":"true","data-schedule-line":"true","data-in-highlight":S,"data-control":String($),onClick:X,onDoubleClick:J,onMouseEnter:function(){d(o)},onMouseLeave:f},R&&!p&&L?React.createElement("div",{className:"".concat(O,"-label"),style:Y,onMouseDown:function(e){Q(e,"startDate")},onMouseUp:ee}):null,React.createElement("div",{className:"".concat(O,"-title"),"data-not-title":!o.title,onMouseDown:Z,onMouseUp:function(){E.current=!1},onContextMenu:K},o.title||wx("添加日程标题")),$&&!p&&B?React.createElement("div",{className:"".concat(O,"-control"),style:Y,onMouseDown:function(e){Q(e,"endDate")},onMouseUp:ee}):null)},bmt=function(e){var t=e.onCreateSchedule;return React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-placeholder",onClick:t},React.createElement(X$e,{type:"Add",size:16}),React.createElement("span",null,wx("添加日程")))},wmt=function(e){var t=e.cell,n=e.colIndex,r=e.rowIndex,i=e.scheduleList,o=e.scheduleMap,a=e.isShowBorder,u=e.activeScheduleId,c=e.dragScheduleId,s=e.dragSchedulePosIndex,d=e.onBeforeDrag,f=e.onBeforeResize,h=e.onCreateSchedule,p=e.onEnterSchedule,v=e.onLeaveSchedule,g=Object(l.useContext)(Jgt),m=g.isReadonly,y=g.renderService,b=SWe(tmt),w=100,_=i.length>0,x=Object(l.useMemo)((function(){return b.sortScheduleList(t,i,o)}),[t,i,o]),k=Object(l.useMemo)((function(){return{renderScheduleList:x.slice(0,w),hiddenScheduleList:x.slice(w)}}),[x,w]),C=k.renderScheduleList,S=k.hiddenScheduleList,O=S.length>0,E=Object(l.useCallback)((function(e){null==y||y.emitClickEvent({eventName:"showMoreSchedule",data:{event:e,date:t,scheduleList:x}})}),[x]);return _||m?React.createElement(React.Fragment,null,C.map((function(e,i){var g,m=t.unix(),y=e.isStartDate(t),b={},_={},x=i===C.length-1,k=Ok(e.start),S=null==(g=o[k])?void 0:g[e.id],O=null,E="".concat(m,"-").concat(e.id,"-schedule");return S>=w?C.length>1?null:React.createElement(bmt,{key:E,onCreateSchedule:h}):(a&&c!==e.id&&-1!==s&&(s===i&&(b.backgroundColor="var(--yq-yuque-green-500)"),x&&s>=C.length&&(_.backgroundColor="var(--yq-yuque-green-500)")),O=y||0===n?React.createElement(ymt,{key:E,date:t,colIndex:n,rowIndex:r,schedule:e,activeScheduleId:u,dragScheduleId:c,onBeforeResize:f,onBeforeDrag:d,onEnterSchedule:p,onLeaveSchedule:v}):React.createElement("div",{key:"".concat(m,"-").concat(e.id,"-holder"),"data-id":e.id,className:"lakex-view-calendar-content-box-row-cell-schedule-holder","data-line":"true"}),React.createElement(l.Fragment,{key:"".concat(m,"-").concat(e.id,"-fragment")},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-start"),style:b}),O,x&&React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-end"),style:_})))})),O?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-more",onClick:E},wx("还有 $1 项",S.length)):null):React.createElement(bmt,{onCreateSchedule:h})},_mt=function(e){var t=e.cell,n=e.cellHeight,r=e.colIndex,i=e.rowIndex,o=e.date,u=e.dateRows,c=e.scheduleList,s=e.scheduleMap,d=e.activeScheduleId,f=e.dragScheduleId,h=e.dragSchedulePosIndex,p=e.resizeSchedule,v=e.highlightDate,g=e.onBeforeResize,m=e.onBeforeDrag,y=e.onEnterSchedule,b=e.onLeaveSchedule,w=Object(l.useContext)(Jgt),_=w.isReadonly,x=w.renderService,k=w.viewConfig,C=SWe(tmt),S=C.defaultCellMinHeight,O=Object(l.useRef)(null),E=(null==k?void 0:k.get("show_lunar"))||!1,I=Object(l.useMemo)((function(){return E?C.getDateLunarInfo(t):null}),[E,t]),P=!1,M=!1;p&&p.include(t)&&(P=!0);var R=c.filter((function(e){return e.include(t)})),A=R.length>0,j=0===t.day()||6===t.day();v&&v.isSame(t,jtt)&&(M=!0,P=!0);var D=Object(l.useCallback)(function(){var e=aO(QC.mark((function e(n){var r,i,o,a;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.createSchedule(t);case 2:i=e.sent,o=null==i?void 0:i.result,(a=null==(r=null==o?void 0:o[0])?void 0:r.uuid)&&setTimeout((function(){var e,t,r=null==(e=O.current)?void 0:e.querySelectorAll('div[data-line="true"]'),i=null==(t=O.current)?void 0:t.querySelector(".lakex-view-calendar-content-box-row-cell-schedule-more");i?null==x||x.emitClickEvent({eventName:"selectSchedule",data:{recordId:a,event:n,position:{origin:i,placement:"bottomLeft"}}}):r&&(null==x||x.emitClickEvent({eventName:"selectSchedule",data:{recordId:a,event:n,position:{origin:r[r.length-1],placement:"bottomLeft"}}}))}),300);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return React.createElement("div",{ref:O,className:F()("lakex-view-calendar-content-box-row-cell",{lunar:E}),key:t.unix(),"data-background":M,"data-unix":t.unix(),"data-lunar-holiday":(null==I?void 0:I.displayHoliday)&&!I.isWork,"data-weekend":j,style:{minHeight:"".concat(S,"px")}},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date","data-today":t.isSame(a()(),jtt),"data-fade":t.month()!==o.month()},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-left"},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-text"},React.createElement("span",null,t.format("D"))),I?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-lunar"},I.lunarText):null,(null==I?void 0:I.displayHoliday)?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-holiday"},I.isWork?wx("班"):wx("休")):null),A&&!_?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-plus",onClick:D},React.createElement(j4e,{title:wx("添加日程")},React.createElement(X$e,{type:"Add",size:14}))):null),React.createElement(wmt,{cell:t,cellHeight:n,colIndex:r,rowIndex:i,dateRows:u,scheduleList:R,scheduleMap:s,isShowBorder:P,onCreateSchedule:D,activeScheduleId:d,dragScheduleId:f,dragSchedulePosIndex:h,onBeforeResize:g,onBeforeDrag:m,onEnterSchedule:y,onLeaveSchedule:b}))},xmt=function(e){var t=e.boxInfo,n=e.lines,r=t.top,i=t.left;return React.createElement(React.Fragment,null,n.map((function(e,t){var n=e.getBoundingClientRect();return React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot-line",key:t,style:{top:n.top-r,left:n.left-i,width:n.width,height:n.height},dangerouslySetInnerHTML:{__html:e.outerHTML}})})))},kmt=Object(l.forwardRef)((function(e,t){var n=e.scheduleId,r=e.boxNode,i=e.boxInfo;if(!i)return null;var o=Object(l.useRef)(null),a=i.width,u=i.height,c=Object(l.useMemo)((function(){return Q_(r.querySelectorAll('.lakex-view-calendar-schedule-line[data-id="'.concat(n,'"]')))}),[r,n]);return Object(l.useImperativeHandle)(t,(function(){return{moving:function(e){o.current&&(o.current.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))}}})),React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot",ref:o,style:{width:a,height:u}},React.createElement(xmt,{lines:c,boxInfo:i}))})),Cmt=function(){return ox((function e(t){var n=t.id,r=t.start,i=t.end,o=t.title;rx(this,e),this._id=n,this._start=r,this._end=i,this._title=o}),[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"duration",get:function(){return this._end.diff(this._start,jtt)}},{key:"include",value:function(e){return e.isBetween(this._start,this._end,null,"[]")}},{key:"isStartDate",value:function(e){return e.isSame(this._start,jtt)}},{key:"isEndDate",value:function(e){return e.isSame(this._end,jtt)}},{key:"isSameDaySchedule",value:function(){return this.start.isSame(this._end,jtt)}},{key:"toJSON",value:function(){return{id:this._id,title:this._title,start:this._start,end:this._end}}}])}();function Smt(e,t,n){return t=DC(t),jC(e,Omt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Omt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Omt=function(){return!!e})()}var Emt=Object.defineProperty,Imt=Object.getOwnPropertyDescriptor,Pmt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Imt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Emt(t,n,o),o},Mmt=function(e){function t(){var e;return rx(this,t),(e=Smt(this,t,arguments))._scroller=null,e._onScroll=e._register(new dS),e.onScroll=e._onScroll.event,e}return NC(t,e),ox(t,[{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-table-view-calendar-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0,n=this.renderContext.$root.querySelector(".lakex-view-calendar-week-names"),r=(null==n?void 0:n.getBoundingClientRect().height)||0;return this.scrollHeight+t+r}},{key:"destroy",value:function(){this._scroller=null}},{key:"setScroller",value:function(e){this._scroller=e}}])}(HC);function Rmt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Amt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rmt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rmt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Pmt([Yf(Vze)],Mmt.prototype,"renderContext",2),Mmt=Pmt([Gf()],Mmt);var jmt=function(e){var t=e.date,n=e.dateRows,r=e.cellHeight,i=e.scheduleList,o=SWe(Mmt),a=Object(l.useRef)(null),u=function(){var e=Object(l.useRef)(null),t=jF(Object(l.useState)(null),2),n=t[0],r=t[1],i=function(e,t){for(var n=[],r=0;r<e;r++)"function"==typeof t?n.push(t(r,n[r-1])):n.push([r*t,(r+1)*t]);return n},o=function(t){return i(t.length,(function(t,n){var r=e.current.children[t].getBoundingClientRect().height;if(!n)return[0,r];var i=jF(n,2)[1];return[i,i+r]}))};return{boxRef:e,boxInfo:n,makeRowRecords:o,findBoxIndex:function(e,t){var n=t.x-e.left,r=t.y-e.top,i=-1,o=-1;return e.rowRecords.forEach((function(e,t){var n=jF(e,2),o=n[0],a=n[1];o<=r&&r<=a&&(i=t)})),e.colRecords.forEach((function(e,t){var r=jF(e,2),i=r[0],a=r[1];i<=n&&n<=a&&(o=t)})),{rowIndex:i,colIndex:o}},getBoxInfo:function(t){var n=e.current.getBoundingClientRect(),r=n.top,a=n.left,l=n.width,u=n.height,c=Ttt,s=l/c;return{top:r,left:a,width:l,height:u,colWidth:s,rowHeight:u/t.length,colRecords:i(c,s),rowRecords:o(t)}},setBoxInfo:r}}(),c=u.boxRef,s=u.boxInfo,d=u.findBoxIndex,f=u.getBoxInfo,h=u.setBoxInfo,p=function(e){var t=e.dateRows,n=e.boxRef,r=e.boxInfo,i=e.snapshotRef,o=e.findBoxIndex,a=e.getBoxInfo,u=e.setBoxInfo,c=e.scheduleList,s=SWe(tmt),d=SWe(Vze),f=jF(Object(l.useState)(c),2),h=f[0],p=f[1],v=Object(l.useMemo)((function(){return s.getDateScheduleMap(t,h)}),[t,h]),g=jF(Object(l.useState)(""),2),m=g[0],y=g[1],b=jF(Object(l.useState)(null),2),w=b[0],_=b[1],x=jF(Object(l.useState)(""),2),k=x[0],C=x[1],S=jF(Object(l.useState)(-1),2),O=S[0],E=S[1],I=jF(Object(l.useState)(-1),2),P=I[0],M=I[1],R=jF(Object(l.useState)(!1),2),A=R[0],j=R[1],D=jF(Object(l.useState)(null),2),T=D[0],F=D[1],N=jF(Object(l.useState)(""),2),L=N[0],B=N[1],V=jF(Object(l.useState)(!1),2),z=V[0],H=V[1],W=jF(Object(l.useState)("endDate"),2),U=W[0],G=W[1],Y=jF(Object(l.useState)(null),2),$=Y[0],q=Y[1],K=jF(Object(l.useState)(null),2),X=K[0],J=K[1],Z=jF(Object(l.useState)(null),2),Q=Z[0],ee=Z[1],te=jF(Object(l.useState)(!1),2),ne=te[0],re=te[1],ie=Object(l.useCallback)((function(e){for(var t,r=e.unix(),i=Q_(n.current.querySelectorAll('.lakex-view-calendar-content-box-row-cell[data-unix="'.concat(r,'"] [data-line="true"]'))),o=-1,a=Ok(e),l=v[a],u=[],c=i.map((function(e){var t=e.getBoundingClientRect(),n=!1,r=e.getAttribute("data-id");return e.hasAttribute("data-schedule-line")?(n=!0,o+=1):u.push(l[r]),{start:t.top,end:t.top+t.height,id:r,isScheduleLine:n,index:n?o:o+1}})),s=Object.values(l),d=null==(t=bc(c,(function(e){return!e.isScheduleLine})))?void 0:t.id,f=l[d],h=[],p=0;p<f;p++)s.includes(p)||h.push(p);return{dateSchedulePosRecords:c,scheduleLineCount:o+1,freeSlot:h,maxSlotOrder:f,blackOrders:u}}),[n,v]),oe=Object(l.useCallback)((function(e){var t=-1,n=-1,r=Q.dateSchedulePosRecords,i=Q.scheduleLineCount;if((null==r?void 0:r.length)>0&&(fc(r,(function(i,o){if(0===o){var a=i.end;if(e.y<=a)return t=o,n=i.index,!1}else{var l=r[o-1].end,u=i.end;if(l<e.y&&e.y<=u)return t=o,n=i.index,!1}})),-1===t)){var o=r[r.length-1].end;e.y>o&&(t=r.length,n=i)}if(-1!==t){var a=Q.freeSlot,l=Q.blackOrders;if(l.length===r.length)t=a.length?a[0]:-1;else if(l.includes(t)){for(var u=t;l.includes(u);)u+=1;a.length&&u>a[a.length-1]&&(u=a[0]),t=u}}return{posIndex:t,scheduleIndex:n}}),[Q]),ae=Object(l.useCallback)((function(e){y(e.id)}),[]),le=Object(l.useCallback)((function(){A||z||y("")}),[A,z]),ue=Object(l.useCallback)((function(e,n){(null==d?void 0:d.$workbenchRoot)&&(d.$workbenchRoot.style.cursor="ew-resize"),y(e.id),H(!0),G(n),q(e),B(e.id),u(a(t))}),[t]),ce=Object(l.useCallback)((function(e,n){!w&&n&&_(Amt({},n)),y(e.id),j(!0),F(e),C(e.id),u(a(t)),re(!0)}),[w,t]),se=Object(l.useCallback)((function(e){var n;if(e.stopPropagation(),e.preventDefault(),(z||A)&&r){var a={x:e.clientX,y:e.clientY};w||_(Amt({},a));var l=o(r,a),u=l.rowIndex,c=l.colIndex;if(-1!==u&&-1!==c){var s=t[u][c];if(z&&$)if(s.isSameOrAfter($.start,jtt)&&"endDate"===U){p(h.map((function(e){return e.id===$.id?new Cmt({id:$.id,title:$.title,start:$.start,end:s}):e})));var d=new Cmt({id:$.id,title:$.title,start:$.start,end:s});q(d)}else if(s.isSameOrBefore($.end,jtt)&&"startDate"===U){p(h.map((function(e){return e.id===$.id?new Cmt({id:$.id,title:$.title,start:s,end:$.end}):e})));var f=new Cmt({id:$.id,title:$.title,start:s,end:$.end});q(f)}if(A){if(null==X?void 0:X.isSame(s)){var v=oe(a),g=v.posIndex,m=v.scheduleIndex;P===g&&O===m||(E(m),M(g))}else J(s),ee(ie(s));(null==(n=i.current)?void 0:n.moving)&&w&&i.current.moving({x:a.x-w.x,y:a.y-w.y})}}}}),[z,A,U,r,i,X]),de=Object(l.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),z||A){if(A&&T&&X){var t=v[Ok(X)]||[],n=Object.entries(t).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]})),r=n[O-1],i=jO.forward;0===O&&(r=n[0],i=jO.forward),null==s||s.updateSchedule({recordId:T.id,startDate:X,endDate:X.add(T.duration,jtt),targetRecordId:r,direction:i})}z&&$&&("endDate"===U?null==s||s.updateSchedule({recordId:$.id,endDate:$.end}):null==s||s.updateSchedule({recordId:$.id,startDate:$.start})),(null==d?void 0:d.$workbenchRoot)&&(d.$workbenchRoot.style.cursor=""),y(""),H(!1),j(!1),G("endDate"),q(null),B(""),F(null),C(""),E(-1),M(-1),u(null),re(!1),J(null),ee(null),_(null)}}),[z,A,X,T,O,$,U]);return P$e((function(){p(c)}),[c]),{renderScheduleList:h,scheduleMap:v,activeScheduleId:m,startMovingPos:w,dragScheduleId:k,isDraggingSchedule:A,dragSchedule:T,highlightDate:X,dragSchedulePosIndex:P,resizeScheduleId:L,isResizingSchedule:z,resizeSchedule:$,isShowScheduleSnapshot:ne,handleMouseEnterSchedule:ae,handleMouseLeaveSchedule:le,handleBeforeResizeSchedule:ue,handleBeforeDragSchedule:ce,handleResizeOrDragSchedule:se,handleAfterResizeOrDragSchedule:de}}({dateRows:n,scheduleList:i,boxRef:c,boxInfo:s,snapshotRef:a,findBoxIndex:d,getBoxInfo:f,setBoxInfo:h}),v=p.renderScheduleList,g=p.scheduleMap,m=p.activeScheduleId,y=p.dragScheduleId,b=p.dragSchedulePosIndex,w=p.resizeSchedule,_=p.highlightDate,x=p.isShowScheduleSnapshot,k=p.handleMouseEnterSchedule,C=p.handleMouseLeaveSchedule,S=p.handleResizeOrDragSchedule,O=p.handleAfterResizeOrDragSchedule,E=p.handleBeforeResizeSchedule,I=p.handleBeforeDragSchedule;return P$e((function(){c.current&&(null==o||o.setScroller(c.current))}),[o,c]),React.createElement("div",{ref:c,className:"lakex-view-calendar-box",onMouseMove:S,onMouseUp:O},n.map((function(e,i){return React.createElement("div",{className:"lakex-view-calendar-box-row",key:"".concat(t.month(),"-").concat(i),"data-last":i===n.length-1},e.map((function(e,o){return React.createElement(_mt,{key:e.toDate().getTime(),cell:e,cellHeight:r,colIndex:o,rowIndex:i,date:t,dateRows:n,scheduleList:v,scheduleMap:g,activeScheduleId:m,dragScheduleId:y,dragSchedulePosIndex:b,resizeSchedule:w,highlightDate:_,onEnterSchedule:k,onLeaveSchedule:C,onBeforeResize:E,onBeforeDrag:I})})))})),x?React.createElement(kmt,{ref:a,boxNode:c.current,boxInfo:s,scheduleId:y}):null)},Dmt=function(e){var t=e.date,n=e.calendarDate,r=e.scheduleList,i=e.rootRect,o=SWe(tmt),a=o.defaultCellMinHeight,u=Object(l.useRef)(null),c=jF(Object(l.useState)("auto"),2),s=c[0],d=c[1],f=jF(Object(l.useState)(a),2),h=f[0],p=f[1],v=Object(l.useMemo)((function(){return o.getDateRows(n)}),[n]);P$e((function(){if(u.current){var e=u.current.getBoundingClientRect().height,t=Math.floor(e/v.length)-1;p(t>a?t:a)}}),[i,v.length]);var g=o.isAutoScroll();return P$e((function(){if(g){var e=u.current.getBoundingClientRect();d("calc(100vh - ".concat(e.top,"px)"))}}),[u.current,g]),React.createElement("div",{ref:u,className:"lakex-viewer-calendar-content ".concat(g&&"lakex-viewer-calendar-content-auto-scroll"),style:{height:s}},React.createElement(jmt,{date:t,dateRows:v,cellHeight:h,scheduleList:r}))},Tmt=u.a.forwardRef((function(e,t){Qgt(e);var n=Object(l.useContext)(Jgt),r=n.viewRecords,i=n.viewConfig,o=SWe(tmt),a=function(){var e=SWe(Vze),t=jF(Object(l.useState)(null),2),n=t[0],r=t[1];return P$e((function(){r(e.getRenderBoundingClientRect())}),[]),{rootRect:n}}(),c=a.rootRect,s=o.getCurrentDate(i),d=Object(l.useMemo)((function(){return o.getCalendarDate(s)}),[s]);if(!c)return null;var f=o.getSchedules(r,i,d);return u.a.createElement("div",{ref:t,className:"lakex-viewer-calendar"},u.a.createElement("div",{className:"lakex-viewer-calendar-inner"},u.a.createElement(emt,{date:s,onCurrentDateChange:function(e){o.setCurrentDate(e)}}),u.a.createElement(nmt,null),u.a.createElement(Dmt,{date:s,calendarDate:d,scheduleList:f,rootRect:c})))})),Fmt=u.a.forwardRef((function(e,t){var n=qat({viewId:e.viewId}),r=SWe(Xze),i=n.view,o=!Gat(Qj.RECORD).canUpdate();return u.a.createElement(Zgt,{value:{renderService:r,isReadonly:o,view:i,fields:n.fields,viewRecords:n.viewRecords||new yC,viewFields:n.viewFields,viewConfig:n.viewConfig}},u.a.createElement(Tmt,{ref:t}))}));function Nmt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lmt(e,t,n){return t=DC(t),jC(e,Bmt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Bmt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bmt=function(){return!!e})()}var Vmt=function(e){function t(){var e;return rx(this,t),(e=Lmt(this,t,arguments)).viewType=WO.CALENDAR,e.title=wx("日历视图"),e.desc=wx("轻松搞定日程安排"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nmt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nmt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"Calendar",size:e.size||16},e))},e.color="purple-4",e.Component=Fmt,e}return NC(t,e),ox(t)}(z8e),zmt=function(){function e(){rx(this,e)}return ox(e,null,[{key:"isLeapYear",value:function(e){return e<1600?e%4==0:e%4==0&&e%100!=0||e%400==0}},{key:"getDaysOfMonth",value:function(t,n){if(1582===t&&10===n)return 21;var r=n-1,i=e.DAYS_OF_MONTH[r];return 1===r&&e.isLeapYear(t)&&i++,i}},{key:"getDaysOfYear",value:function(t){return 1582===t?355:e.isLeapYear(t)?366:365}},{key:"getDaysInYear",value:function(t,n,r){for(var i=0,o=1;o<n;o++)i+=e.getDaysOfMonth(t,o);var a=r;if(1582===t&&10===n&&r>=15)if(r>=15)a-=10;else if(r>4)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));return i+=a}},{key:"getDaysBetween",value:function(t,n,r,i,o,a){var l,u,c;if(t==i)l=e.getDaysInYear(i,o,a)-e.getDaysInYear(t,n,r);else if(t>i){for(u=e.getDaysOfYear(i)-e.getDaysInYear(i,o,a),c=i+1;c<t;c++)u+=e.getDaysOfYear(c);l=-(u+=e.getDaysInYear(t,n,r))}else{for(u=e.getDaysOfYear(t)-e.getDaysInYear(t,n,r),c=t+1;c<i;c++)u+=e.getDaysOfYear(c);l=u+=e.getDaysInYear(i,o,a)}return l}}])}();zmt.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];var Hmt=zmt,Wmt=function(){return ox((function e(t,n,r,i){rx(this,e),this._day=e._ymd(t),this._name=n,this._work=r,this._target=e._ymd(i)}),[{key:"getDay",value:function(){return this._day}},{key:"getName",value:function(){return this._name}},{key:"isWork",value:function(){return this._work}},{key:"getTarget",value:function(){return this._target}},{key:"toString",value:function(){return this._day+" "+this._name+(this._work?"调休":"")+" "+this._target}}],[{key:"_ymd",value:function(e){return e.indexOf("-")<0?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6):e}}])}(),Umt=function(){function e(){rx(this,e)}return ox(e,null,[{key:"_padding",value:function(e){return(e<10?"0":"")+e}},{key:"_findForward",value:function(t){var n=e._DATA_IN_USE.indexOf(t);if(n<0)return null;var r=e._DATA_IN_USE.substring(n),i=r.length%e._SIZE;for(i>0&&(r=r.substring(i));0!==r.indexOf(t)&&r.length>=e._SIZE;)r=r.substring(e._SIZE);return r}},{key:"_buildHolidayForward",value:function(t){var n=t.substring(0,8),r=e._NAMES_IN_USE[t.charCodeAt(8)-e._ZERO],i=t.charCodeAt(9)===e._ZERO,o=t.substring(10,18);return new Wmt(n,r,i,o)}},{key:"_findHolidaysForward",value:function(t){var n=[],r=e._findForward(t);if(null==r)return n;for(;0===r.indexOf(t);)n.push(e._buildHolidayForward(r)),r=r.substr(e._SIZE);return n}},{key:"getHoliday",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(n=0==r||0==i?e._findHolidaysForward((t+"").replace(/-/g,"")):e._findHolidaysForward(t+e._padding(r)+e._padding(i))).length<1?null:n[0]}},{key:"_fixNames",value:function(t){t&&(e._NAMES_IN_USE=t)}},{key:"_fixData",value:function(t){if(t){for(var n=[];t.length>=e._SIZE;){var r=t.substring(0,e._SIZE),i=r.substring(0,8),o=e._TAG_REMOVE==r.substring(8,9),a=e.getHoliday(i);if(a){for(var l=-1,u=0,c=e._NAMES_IN_USE.length;u<c;u++)if(e._NAMES_IN_USE[u]===a.getName()){l=u;break}if(l>-1){var s=i+String.fromCharCode(l+e._ZERO)+(a.isWork()?"0":"1")+a.getTarget().replace(/-/g,"");e._DATA_IN_USE=e._DATA_IN_USE.replace(new RegExp(s,"g"),o?"":r)}}else o||n.push(r);t=t.substring(e._SIZE)}n.length>0&&(e._DATA_IN_USE+=n.join(""))}}},{key:"_fix",value:function(t,n){n?(e._fixNames(t),e._fixData(n)):e._fixData(t)}}])}();Umt.NAMES=["元旦节","春节","清明节","劳动节","端午节","中秋节","国庆节","国庆中秋","抗战胜利日"],Umt.DATA="200112290020020101200112300020020101200201010120020101200201020120020101200201030120020101200202091020020212200202101020020212200202121120020212200202131120020212200202141120020212200202151120020212200202161120020212200202171120020212200202181120020212200204273020020501200204283020020501200205013120020501200205023120020501200205033120020501200205043120020501200205053120020501200205063120020501200205073120020501200209286020021001200209296020021001200210016120021001200210026120021001200210036120021001200210046120021001200210056120021001200210066120021001200210076120021001200301010120030101200302011120030201200302021120030201200302031120030201200302041120030201200302051120030201200302061120030201200302071120030201200302081020030201200302091020030201200304263020030501200304273020030501200305013120030501200305023120030501200305033120030501200305043120030501200305053120030501200305063120030501200305073120030501200309276020031001200309286020031001200310016120031001200310026120031001200310036120031001200310046120031001200310056120031001200310066120031001200310076120031001200401010120040101200401171020040122200401181020040122200401221120040122200401231120040122200401241120040122200401251120040122200401261120040122200401271120040122200401281120040122200405013120040501200405023120040501200405033120040501200405043120040501200405053120040501200405063120040501200405073120040501200405083020040501200405093020040501200410016120041001200410026120041001200410036120041001200410046120041001200410056120041001200410066120041001200410076120041001200410096020041001200410106020041001200501010120050101200501020120050101200501030120050101200502051020050209200502061020050209200502091120050209200502101120050209200502111120050209200502121120050209200502131120050209200502141120050209200502151120050209200504303020050501200505013120050501200505023120050501200505033120050501200505043120050501200505053120050501200505063120050501200505073120050501200505083020050501200510016120051001200510026120051001200510036120051001200510046120051001200510056120051001200510066120051001200510076120051001200510086020051001200510096020051001200512310020060101200601010120060101200601020120060101200601030120060101200601281020060129200601291120060129200601301120060129200601311120060129200602011120060129200602021120060129200602031120060129200602041120060129200602051020060129200604293020060501200604303020060501200605013120060501200605023120060501200605033120060501200605043120060501200605053120060501200605063120060501200605073120060501200609306020061001200610016120061001200610026120061001200610036120061001200610046120061001200610056120061001200610066120061001200610076120061001200610086020061001200612300020070101200612310020070101200701010120070101200701020120070101200701030120070101200702171020070218200702181120070218200702191120070218200702201120070218200702211120070218200702221120070218200702231120070218200702241120070218200702251020070218200704283020070501200704293020070501200705013120070501200705023120070501200705033120070501200705043120070501200705053120070501200705063120070501200705073120070501200709296020071001200709306020071001200710016120071001200710026120071001200710036120071001200710046120071001200710056120071001200710066120071001200710076120071001200712290020080101200712300120080101200712310120080101200801010120080101200802021020080206200802031020080206200802061120080206200802071120080206200802081120080206200802091120080206200802101120080206200802111120080206200802121120080206200804042120080404200804052120080404200804062120080404200805013120080501200805023120080501200805033120080501200805043020080501200806074120080608200806084120080608200806094120080608200809135120080914200809145120080914200809155120080914200809276020081001200809286020081001200809296120081001200809306120081001200810016120081001200810026120081001200810036120081001200810046120081001200810056120081001200901010120090101200901020120090101200901030120090101200901040020090101200901241020090125200901251120090125200901261120090125200901271120090125200901281120090125200901291120090125200901301120090125200901311120090125200902011020090125200904042120090404200904052120090404200904062120090404200905013120090501200905023120090501200905033120090501200905284120090528200905294120090528200905304120090528200905314020090528200909276020091001200910016120091001200910026120091001200910036120091001200910046120091001200910055120091003200910065120091003200910075120091003200910085120091003200910105020091003201001010120100101201001020120100101201001030120100101201002131120100213201002141120100213201002151120100213201002161120100213201002171120100213201002181120100213201002191120100213201002201020100213201002211020100213201004032120100405201004042120100405201004052120100405201005013120100501201005023120100501201005033120100501201006124020100616201006134020100616201006144120100616201006154120100616201006164120100616201009195020100922201009225120100922201009235120100922201009245120100922201009255020100922201009266020101001201010016120101001201010026120101001201010036120101001201010046120101001201010056120101001201010066120101001201010076120101001201010096020101001201101010120110101201101020120110101201101030120110101201101301020110203201102021120110203201102031120110203201102041120110203201102051120110203201102061120110203201102071120110203201102081120110203201102121020110203201104022020110405201104032120110405201104042120110405201104052120110405201104303120110501201105013120110501201105023120110501201106044120110606201106054120110606201106064120110606201109105120110912201109115120110912201109125120110912201110016120111001201110026120111001201110036120111001201110046120111001201110056120111001201110066120111001201110076120111001201110086020111001201110096020111001201112310020120101201201010120120101201201020120120101201201030120120101201201211020120123201201221120120123201201231120120123201201241120120123201201251120120123201201261120120123201201271120120123201201281120120123201201291020120123201203312020120404201204012020120404201204022120120404201204032120120404201204042120120404201204283020120501201204293120120501201204303120120501201205013120120501201205023020120501201206224120120623201206234120120623201206244120120623201209295020120930201209305120120930201210016120121001201210026120121001201210036120121001201210046120121001201210056120121001201210066120121001201210076120121001201210086020121001201301010120130101201301020120130101201301030120130101201301050020130101201301060020130101201302091120130210201302101120130210201302111120130210201302121120130210201302131120130210201302141120130210201302151120130210201302161020130210201302171020130210201304042120130404201304052120130404201304062120130404201304273020130501201304283020130501201304293120130501201304303120130501201305013120130501201306084020130612201306094020130612201306104120130612201306114120130612201306124120130612201309195120130919201309205120130919201309215120130919201309225020130919201309296020131001201310016120131001201310026120131001201310036120131001201310046120131001201310056120131001201310066120131001201310076120131001201401010120140101201401261020140131201401311120140131201402011120140131201402021120140131201402031120140131201402041120140131201402051120140131201402061120140131201402081020140131201404052120140405201404062120140405201404072120140405201405013120140501201405023120140501201405033120140501201405043020140501201405314120140602201406014120140602201406024120140602201409065120140908201409075120140908201409085120140908201409286020141001201410016120141001201410026120141001201410036120141001201410046120141004201410056120141001201410066120141001201410076120141001201410116020141001201501010120150101201501020120150101201501030120150101201501040020150101201502151020150219201502181120150219201502191120150219201502201120150219201502211120150219201502221120150219201502231120150219201502241120150219201502281020150219201504042120150405201504052120150405201504062120150405201505013120150501201505023120150501201505033120150501201506204120150620201506214120150620201506224120150620201509038120150903201509048120150903201509058120150903201509068020150903201509265120150927201509275120150927201510016120151001201510026120151001201510036120151001201510046120151004201510056120151001201510066120151001201510076120151001201510106020151001201601010120160101201601020120160101201601030120160101201602061020160208201602071120160208201602081120160208201602091120160208201602101120160208201602111120160208201602121120160208201602131120160208201602141020160208201604022120160404201604032120160404201604042120160404201604303120160501201605013120160501201605023120160501201606094120160609201606104120160609201606114120160609201606124020160609201609155120160915201609165120160915201609175120160915201609185020160915201610016120161001201610026120161001201610036120161001201610046120161001201610056120161001201610066120161001201610076120161001201610086020161001201610096020161001201612310120170101201701010120170101201701020120170101201701221020170128201701271120170128201701281120170128201701291120170128201701301120170128201701311120170128201702011120170128201702021120170128201702041020170128201704012020170404201704022120170404201704032120170404201704042120170404201704293120170501201704303120170501201705013120170501201705274020170530201705284120170530201705294120170530201705304120170530201709306020171001201710016120171001201710026120171001201710036120171001201710045120171004201710056120171001201710066120171001201710076120171001201710086120171001201712300120180101201712310120180101201801010120180101201802111020180216201802151120180216201802161120180216201802171120180216201802181120180216201802191120180216201802201120180216201802211120180216201802241020180216201804052120180405201804062120180405201804072120180405201804082020180405201804283020180501201804293120180501201804303120180501201805013120180501201806164120180618201806174120180618201806184120180618201809225120180924201809235120180924201809245120180924201809296020181001201809306020181001201810016120181001201810026120181001201810036120181001201810046120181001201810056120181001201810066120181001201810076120181001201812290020190101201812300120190101201812310120190101201901010120190101201902021020190205201902031020190205201902041120190205201902051120190205201902061120190205201902071120190205201902081120190205201902091120190205201902101120190205201904052120190405201904062120190405201904072120190405201904283020190501201905013120190501201905023120190501201905033120190501201905043120190501201905053020190501201906074120190607201906084120190607201906094120190607201909135120190913201909145120190913201909155120190913201909296020191001201910016120191001201910026120191001201910036120191001201910046120191001201910056120191001201910066120191001201910076120191001201910126020191001202001010120200101202001191020200125202001241120200125202001251120200125202001261120200125202001271120200125202001281120200125202001291120200125202001301120200125202001311120200125202002011120200125202002021120200125202004042120200404202004052120200404202004062120200404202004263020200501202005013120200501202005023120200501202005033120200501202005043120200501202005053120200501202005093020200501202006254120200625202006264120200625202006274120200625202006284020200625202009277020201001202010017120201001202010026120201001202010036120201001202010046120201001202010056120201001202010066120201001202010076120201001202010086120201001202010106020201001202101010120210101202101020120210101202101030120210101202102071020210212202102111120210212202102121120210212202102131120210212202102141120210212202102151120210212202102161120210212202102171120210212202102201020210212202104032120210404202104042120210404202104052120210404202104253020210501202105013120210501202105023120210501202105033120210501202105043120210501202105053120210501202105083020210501202106124120210614202106134120210614202106144120210614202109185020210921202109195120210921202109205120210921202109215120210921202109266020211001202110016120211001202110026120211001202110036120211001202110046120211001202110056120211001202110066120211001202110076120211001202110096020211001202201010120220101202201020120220101202201030120220101202201291020220201202201301020220201202201311120220201202202011120220201202202021120220201202202031120220201202202041120220201202202051120220201202202061120220201202204022020220405202204032120220405202204042120220405202204052120220405202204243020220501202204303120220501202205013120220501202205023120220501202205033120220501202205043120220501202205073020220501202206034120220603202206044120220603202206054120220603202209105120220910202209115120220910202209125120220910202210016120221001202210026120221001202210036120221001202210046120221001202210056120221001202210066120221001202210076120221001202210086020221001202210096020221001202212310120230101202301010120230101202301020120230101202301211120230122202301221120230122202301231120230122202301241120230122202301251120230122202301261120230122202301271120230122202301281020230122202301291020230122202304052120230405202304233020230501202304293120230501202304303120230501202305013120230501202305023120230501202305033120230501202305063020230501202306224120230622202306234120230622202306244120230622202306254020230622202309295120230929202309306120231001202310016120231001202310026120231001202310036120231001202310046120231001202310056120231001202310066120231001202310076020231001202310086020231001202312300120240101202312310120240101202401010120240101202402041020240210202402101120240210202402111120240210202402121120240210202402131120240210202402141120240210202402151120240210202402161120240210202402171120240210202402181020240210202404042120240404202404052120240404202404062120240404202404072020240404202404283020240501202405013120240501202405023120240501202405033120240501202405043120240501202405053120240501202405113020240501202406084120240610202406094120240610202406104120240610202409145020240917202409155120240917202409165120240917202409175120240917202409296020241001202410016120241001202410026120241001202410036120241001202410046120241001202410056120241001202410066120241001202410076120241001202410126020241001",Umt._SIZE=18,Umt._ZERO="0".charCodeAt(0),Umt._TAG_REMOVE="~",Umt._NAMES_IN_USE=Umt.NAMES,Umt._DATA_IN_USE=Umt.DATA;var Gmt=Umt,Ymt=function(){function e(t,n,r,i,o,a){if(rx(this,e),1582===t&&10===n&&r>4&&r<15)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));if(n<1||n>12)throw new Error("wrong month ".concat(n));if(r<1||r>31)throw new Error("wrong day ".concat(r));if(i<0||i>23)throw new Error("wrong hour ".concat(i));if(o<0||o>59)throw new Error("wrong minute ".concat(o));if(a<0||a>59)throw new Error("wrong second ".concat(a));this._year=t,this._month=n,this._day=r,this._hour=i,this._minute=o,this._second=a}return ox(e,[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getDay",value:function(){return this._day}},{key:"getWeek",value:function(){return(Math.floor(this.getJulianDay()+.5)+7000001)%7}},{key:"toYmd",value:function(){for(var e=this._year+"";e.length<4;)e="0"+e;return[e,(this._month<10?"0":"")+this._month,(this._day<10?"0":"")+this._day].join("-")}},{key:"toString",value:function(){return this.toYmd()}},{key:"nextDay",value:function(t){var n=this._year,r=this._month,i=this._day;if(1582===n&&10===r&&i>4&&(i-=10),t>0){i+=t;for(var o=Hmt.getDaysOfMonth(n,r);i>o;)i-=o,++r>12&&(r=1,n++),o=Hmt.getDaysOfMonth(n,r)}else if(t<0){for(;i+t<=0;)--r<1&&(r=12,n--),i+=Hmt.getDaysOfMonth(n,r);i+=t}return 1582===n&&10===r&&i>4&&(i+=10),e.fromYmdHms(n,r,i,this._hour,this._minute,this._second)}},{key:"next",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var n=e.fromYmdHms(this._year,this._month,this._day,this._hour,this._minute,this._second);if(0!==t)for(var r=Math.abs(t),i=t<1?-1:1;r>0;){n=n.next(i);var o=!0,a=Gmt.getHoliday(n.getYear(),n.getMonth(),n.getDay());if(a)o=a.isWork();else{var l=n.getWeek();0!==l&&6!==l||(o=!1)}o&&(r-=1)}return n}return this.nextDay(t)}},{key:"getLunar",value:function(){return nyt.fromSolar(this)}},{key:"getJulianDay",value:function(){var e=this._year,t=this._month,n=this._day+((this._second/60+this._minute)/60+this._hour)/24,r=0,i=!1;return 372*e+31*t+Math.floor(n)>=588829&&(i=!0),t<=2&&(t+=12,e--),i&&(r=2-(r=Math.floor(e/100))+Math.floor(r/4)),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5}},{key:"subtract",value:function(e){return Hmt.getDaysBetween(e.getYear(),e.getMonth(),e.getDay(),this._year,this._month,this._day)}}],[{key:"fromYmd",value:function(t,n,r){return e.fromYmdHms(t,n,r,0,0,0)}},{key:"fromYmdHms",value:function(t,n,r,i,o,a){return new e(t,n,r,i,o,a)}},{key:"fromDate",value:function(t){return e.fromYmdHms(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}},{key:"fromJulianDay",value:function(t){var n,r=Math.floor(t+.5),i=t+.5-r;r>=2299161&&(r+=1+(n=Math.floor((r-1867216.25)/36524.25))-Math.floor(n/4)),r+=1524;var o=Math.floor((r-122.1)/365.25);r-=Math.floor(365.25*o);var a=Math.floor(r/30.601),l=r-=Math.floor(30.601*a);a>13?(a-=13,o-=4715):(a-=1,o-=4716),i*=24;var u=Math.floor(i);i-=u,i*=60;var c=Math.floor(i);i-=c,i*=60;var s=Math.round(i);return s>59&&(s-=60,c++),c>59&&(c-=60,u++),u>23&&(u-=24,l+=1),e.fromYmdHms(o,a,l,u,c,s)}}])}();Ymt.J2000=2451545;var $mt=Ymt,qmt=ox((function e(){rx(this,e)}));qmt.BASE_MONTH_ZHI_INDEX=2,qmt.JIE_QI=["{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}"],qmt.JIE_QI_IN_USE=["DA_XUE","{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}","DONG_ZHI","XIAO_HAN","DA_HAN","LI_CHUN","YU_SHUI","JING_ZHE"],qmt.NUMBER=["{n.zero}","{n.one}","{n.two}","{n.three}","{n.four}","{n.five}","{n.six}","{n.seven}","{n.eight}","{n.nine}","{n.ten}","{n.eleven}","{n.twelve}"],qmt.MONTH=["","{m.one}","{m.two}","{m.three}","{m.four}","{m.five}","{m.six}","{m.seven}","{m.eight}","{m.nine}","{m.ten}","{m.eleven}","{m.twelve}"],qmt.DAY=["","{d.one}","{d.two}","{d.three}","{d.four}","{d.five}","{d.six}","{d.seven}","{d.eight}","{d.nine}","{d.ten}","{d.eleven}","{d.twelve}","{d.thirteen}","{d.fourteen}","{d.fifteen}","{d.sixteen}","{d.seventeen}","{d.eighteen}","{d.nighteen}","{d.twenty}","{d.twentyOne}","{d.twentyTwo}","{d.twentyThree}","{d.twentyFour}","{d.twentyFive}","{d.twentySix}","{d.twentySeven}","{d.twentyEight}","{d.twentyNine}","{d.thirty}"],qmt.FESTIVAL={"1-1":"{jr.chunJie}","1-15":"{jr.yuanXiao}","2-2":"{jr.longTou}","5-5":"{jr.duanWu}","7-7":"{jr.qiXi}","8-15":"{jr.zhongQiu}","9-9":"{jr.chongYang}","12-8":"{jr.laBa}"};var Kmt=function(){return ox((function e(t,n,r,i,o){rx(this,e),this._year=t,this._month=n,this._dayCount=r,this._firstJulianDay=i,this._index=o}),[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getIndex",value:function(){return this._index}},{key:"getDayCount",value:function(){return this._dayCount}},{key:"getFirstJulianDay",value:function(){return this._firstJulianDay}}],[{key:"fromYm",value:function(e,t){return Qmt.fromYear(e).getMonth(t)}}])}(),Xmt=function(){function e(){rx(this,e)}return ox(e,null,[{key:"decode",value:function(e){var t="0000000000",n=t+t;return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/J/g,"00")).replace(/I/g,"000")).replace(/H/g,"0000")).replace(/G/g,"00000")).replace(/t/g,"02")).replace(/s/g,"002")).replace(/r/g,"0002")).replace(/q/g,"00002")).replace(/p/g,"000002")).replace(/o/g,"0000002")).replace(/n/g,"00000002")).replace(/m/g,"000000002")).replace(/l/g,"0000000002")).replace(/k/g,"01")).replace(/j/g,"0101")).replace(/i/g,"001")).replace(/h/g,"001001")).replace(/g/g,"0001")).replace(/f/g,"00001")).replace(/e/g,"000001")).replace(/d/g,"0000001")).replace(/c/g,"00000001")).replace(/b/g,"000000001")).replace(/a/g,"0000000001")).replace(/A/g,n+n+n)).replace(/B/g,n+n+t)).replace(/C/g,n+n)).replace(/D/g,n+t)).replace(/E/g,n)).replace(/F/g,t)}},{key:"nutationLon2",value:function(t){for(var n=-1.742*t,r=t*t,i=0,o=0,a=e.NUT_B.length;o<a;o+=5)i+=(e.NUT_B[o+3]+n)*Math.sin(e.NUT_B[o]+e.NUT_B[o+1]*t+e.NUT_B[o+2]*r),n=0;return i/100/e.SECOND_PER_RAD}},{key:"eLon",value:function(t,n){t/=10;for(var r,i,o,a,l,u=0,c=1,s=e.XL0[2]-e.XL0[1],d=0;d<6;d++,c*=t)if(r=Math.floor(e.XL0[1+d]),0!=(l=(i=Math.floor(e.XL0[2+d]))-r)){n<0?o=i:(o=Math.floor(3*n*l/s+.5+r),0!=d&&(o+=3),o>i&&(o=i)),a=0;for(var f=r;f<o;f+=3)a+=e.XL0[f]*Math.cos(e.XL0[f+1]+t*e.XL0[f+2]);u+=a*c}u/=e.XL0[0];var h=t*t;return u+=(-.0728-2.7702*t-1.1019*h-.0996*h*t)/e.SECOND_PER_RAD}},{key:"mLon",value:function(t,n){var r,i,o=e.XL1,a=o[0].length,l=1,u=0,c=t*t,s=c*t,d=s*t,f=d*t,h=t-10;u+=(3.81034409+8399.684730072*t-3319e-8*c+3.11e-8*s-2.033e-10*d)*e.SECOND_PER_RAD,u+=5028.792262*t+1.1124406*c+7699e-8*s-23479e-9*d-1.78e-8*f,h>0&&(u+=1.43*h-.866+.054*h*h),c/=1e4,s/=1e8,d/=1e8,(n*=6)<0&&(n=a);for(var p=0,v=o.length;p<v;p++,l*=t){var g=o[p],m=g.length,y=Math.floor(n*m/a+.5);for(p>0&&(y+=6),y>=m&&(y=m),r=0,i=0;r<y;r+=6)i+=g[r]*Math.cos(g[r+1]+t*g[r+2]+c*g[r+3]+s*g[r+4]+d*g[r+5]);u+=i*l}return u/=e.SECOND_PER_RAD}},{key:"gxcSunLon",value:function(t){var n=t*t,r=628.301955*t-.043126-2732e-9*n;return-20.49552*(1+(.016708634-42037e-9*t-1.267e-7*n)*Math.cos(r))/e.SECOND_PER_RAD}},{key:"ev",value:function(e){var t=628.307585*e;return 628.332+21*Math.sin(1.527+t)+.44*Math.sin(1.48+2*t)+.129*Math.sin(5.82+t)*e+55e-5*Math.sin(4.21+t)*e*e}},{key:"saLon",value:function(t,n){return e.eLon(t,n)+e.nutationLon2(t)+e.gxcSunLon(t)+Math.PI}},{key:"dtExt",value:function(e,t){var n=(e-1820)/100;return t*n*n-20}},{key:"dtCalc",value:function(t){var n,r=e.DT_AT.length,i=e.DT_AT[r-2],o=e.DT_AT[r-1];if(t>=i){return t>i+100?e.dtExt(t,31):e.dtExt(t,31)-(e.dtExt(i,31)-o)*(i+100-t)/100}for(n=0;n<r&&!(t<e.DT_AT[n+5]);n+=5);var a=(t-e.DT_AT[n])/(e.DT_AT[n+5]-e.DT_AT[n])*10,l=a*a,u=l*a;return e.DT_AT[n+1]+e.DT_AT[n+2]*a+e.DT_AT[n+3]*l+e.DT_AT[n+4]*u}},{key:"dtT",value:function(t){return e.dtCalc(t/365.2425+2e3)/e.SECOND_PER_DAY}},{key:"mv",value:function(e){var t=8399.71-914*Math.sin(.7848+8328.691425*e+1523e-7*e*e);return t-=179*Math.sin(2.543+15542.7543*e)+160*Math.sin(.1874+7214.0629*e)+62*Math.sin(3.14+16657.3828*e)+34*Math.sin(4.827+16866.9323*e)+22*Math.sin(4.9+23871.4457*e)+12*Math.sin(2.59+14914.4523*e)+7*Math.sin(.23+6585.7609*e)+5*Math.sin(.9+25195.624*e)+5*Math.sin(2.32-7700.3895*e)+5*Math.sin(3.88+8956.9934*e)+5*Math.sin(.49+7771.3771*e)}},{key:"saLonT",value:function(t){var n,r=628.3319653318;return n=(t-1.75347-Math.PI)/r,r=e.ev(n),n+=(t-e.saLon(n,10))/r,r=e.ev(n),n+=(t-e.saLon(n,-1))/r}},{key:"msaLon",value:function(t,n,r){return e.mLon(t,n)+-34e-7-(e.eLon(t,r)+e.gxcSunLon(t)+Math.PI)}},{key:"msaLonT",value:function(t){var n,r=7771.37714500204;return n=(t+1.08472)/r,n+=(t-e.msaLon(n,3,3))/r,r=e.mv(n)-e.ev(n),n+=(t-e.msaLon(n,20,10))/r,n+=(t-e.msaLon(n,-1,60))/r}},{key:"saLonT2",value:function(t){var n=628.3319653318,r=(t-1.75347-Math.PI)/n;return r-=(5297e-9*r*r+.0334166*Math.cos(4.669257+628.307585*r)+2061e-7*Math.cos(2.67823+628.307585*r)*r)/n,r+=(t-e.eLon(r,8)-Math.PI+(20.5+17.2*Math.sin(2.1824-33.75705*r))/e.SECOND_PER_RAD)/n}},{key:"msaLonT2",value:function(t){var n,r=7771.37714500204,i=(n=(t+1.08472)/r)*n;return i=(n-=(-3309e-8*i+.10976*Math.cos(.784758+8328.6914246*n+152292e-9*i)+.02224*Math.cos(.1874+7214.0628654*n-21848e-8*i)-.03342*Math.cos(4.669257+628.307585*n))/r)*n,n+=(t-(e.mLon(n,20)-(4.8950632+628.3319653318*n+5297e-9*i+.0334166*Math.cos(4.669257+628.307585*n)+2061e-7*Math.cos(2.67823+628.307585*n)*n+349e-6*Math.cos(4.6261+1256.61517*n)-20.5/e.SECOND_PER_RAD)))/(r=7771.38-914*Math.sin(.7848+8328.691425*n+1523e-7*i)-179*Math.sin(2.543+15542.7543*n)-160*Math.sin(.1874+7214.0629*n))}},{key:"qiHigh",value:function(t){var n=36525*e.saLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1200||r>e.SECOND_PER_DAY-1200)&&(n=36525*e.saLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"shuoHigh",value:function(t){var n=36525*e.msaLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1800||r>e.SECOND_PER_DAY-1800)&&(n=36525*e.msaLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"qiLow",value:function(t){var n=628.3319653318,r=(t-4.895062166)/n;return r-=(53*r*r+334116*Math.cos(4.67+628.307585*r)+2061*Math.cos(2.678+628.3076*r)*r)/n/1e7,36525*(r-=((48950621.66+6283319653.318*r+53*r*r+334166*Math.cos(4.669257+628.307585*r)+3489*Math.cos(4.6261+1256.61517*r)+2060.6*Math.cos(2.67823+628.307585*r)*r-994-834*Math.sin(2.1824-33.75705*r))/1e7-t)/628.332+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"shuoLow",value:function(t){var n=7771.37714500204,r=(t+1.08472)/n;return 36525*(r-=(-331e-7*r*r+.10976*Math.cos(.785+8328.6914*r)+.02224*Math.cos(.187+7214.0629*r)-.03342*Math.cos(4.669+628.3076*r))/n+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"calcShuo",value:function(t){var n,r=e.SHUO_KB.length,i=0,o=14;t+=$mt.J2000;var a=e.SHUO_KB[0]-o,l=e.SHUO_KB[r-1]-o,u=2436935;if(t<a||t>=u)i=Math.floor(e.shuoHigh(Math.floor((t+o-2451551)/29.5306)*Math.PI*2)+.5);else if(t>=a&&t<l){for(n=0;n<r&&!(t+o<e.SHUO_KB[n+2]);n+=2);i=e.SHUO_KB[n]+e.SHUO_KB[n+1]*Math.floor((t+o-e.SHUO_KB[n])/e.SHUO_KB[n+1]),1683460==(i=Math.floor(i+.5))&&i++,i-=$mt.J2000}else if(t>=l&&t<u){i=Math.floor(e.shuoLow(Math.floor((t+o-2451551)/29.5306)*Math.PI*2)+.5);var c=Math.floor((t-l)/29.5306),s=e.SB.substring(c,c+1);"1"==s?i+=1:"2"==s&&(i-=1)}return i}},{key:"calcQi",value:function(t){var n,r=e.QI_KB.length,i=0;t+=$mt.J2000;var o=e.QI_KB[0]-7,a=e.QI_KB[r-1]-7,l=2436935;if(t<o||t>=l)i=Math.floor(e.qiHigh(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);else if(t>=o&&t<a){for(n=0;n<r&&!(t+7<e.QI_KB[n+2]);n+=2);i=e.QI_KB[n]+e.QI_KB[n+1]*Math.floor((t+7-e.QI_KB[n])/e.QI_KB[n+1]),1683460==(i=Math.floor(i+.5))&&i++,i-=$mt.J2000}else if(t>=a&&t<l){i=Math.floor(e.qiLow(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);var u=Math.floor((t-a)/365.2422*24),c=e.QB.substring(u,u+1);"1"==c?i+=1:"2"==c&&(i-=1)}return i}},{key:"qiAccurate",value:function(t){var n=36525*e.saLonT(t);return n-e.dtT(n)+e.ONE_THIRD}},{key:"qiAccurate2",value:function(t){var n=Math.PI/12,r=Math.floor((t+293)/365.2422*24)*n,i=e.qiAccurate(r);return i-t>5?e.qiAccurate(r-n):i-t<-5?e.qiAccurate(r+n):i}}])}();Xmt.PI_2=2*Math.PI,Xmt.ONE_THIRD=1/3,Xmt.SECOND_PER_DAY=86400,Xmt.SECOND_PER_RAD=648e3/Math.PI,Xmt.NUT_B=[2.1824,-33.75705,36e-6,-1720,920,3.5069,1256.66393,11e-6,-132,57,1.3375,16799.4182,-51e-6,-23,10,4.3649,-67.5141,72e-6,21,-9,.04,-628.302,0,-14,0,2.36,8328.691,0,7,0,3.46,1884.966,0,-5,2,5.44,16833.175,0,-4,2,3.69,25128.11,0,-3,0,3.55,628.362,0,2,0],Xmt.DT_AT=[-4e3,108371.7,-13036.8,392,0,-500,17201,-627.82,16.17,-.3413,-150,12200.6,-346.41,5.403,-.1593,150,9113.8,-328.13,-1.647,.0377,500,5707.5,-391.41,.915,.3145,900,2203.4,-283.45,13.034,-.1778,1300,490.1,-57.35,2.085,-.0072,1600,120,-9.81,-1.532,.1403,1700,10.2,-.91,.51,-.037,1800,13.4,-.72,.202,-.0193,1830,7.8,-1.81,.416,-.0247,1860,8.3,-.13,-.406,.0292,1880,-5.4,.32,-.183,.0173,1900,-2.3,2.06,.169,-.0135,1920,21.2,1.69,-.304,.0167,1940,24.2,1.22,-.064,.0031,1960,33.2,.51,.231,-.0109,1980,51,1.29,-.026,.0032,2e3,63.87,.1,0,0,2005,64.7,.21,0,0,2012,66.8,.22,0,0,2018,69,.36,0,0,2028,72.6],Xmt.XL0=[1e10,20,578,920,1100,1124,1136,1148,1217,1226,1229,1229,1229,1229,1937,2363,2618,2633,2660,2666,17534704567,0,0,334165646,4.669256804,6283.075849991,3489428,4.6261024,12566.1517,349706,2.744118,5753.384885,341757,2.828866,3.523118,313590,3.62767,77713.771468,267622,4.418084,7860.419392,234269,6.135162,3930.209696,132429,.742464,11506.76977,127317,2.037097,529.690965,119917,1.109629,1577.343542,99025,5.23268,5884.92685,90186,2.04505,26.29832,85722,3.50849,398.149,77979,1.17883,5223.69392,75314,2.53339,5507.55324,50526,4.58293,18849.22755,49238,4.20507,775.52261,35666,2.91954,.06731,31709,5.84902,11790.62909,28413,1.89869,796.29801,27104,.31489,10977.0788,24281,.34481,5486.77784,20616,4.80647,2544.31442,20539,1.86948,5573.1428,20226,2.45768,6069.77675,15552,.83306,213.2991,13221,3.41118,2942.46342,12618,1.08303,20.7754,11513,.64545,.98032,10285,.636,4694.00295,10190,.97569,15720.83878,10172,4.2668,7.11355,9921,6.2099,2146.1654,9761,.681,155.4204,8580,5.9832,161000.6857,8513,1.2987,6275.9623,8471,3.6708,71430.6956,7964,1.8079,17260.1547,7876,3.037,12036.4607,7465,1.7551,5088.6288,7387,3.5032,3154.6871,7355,4.6793,801.8209,6963,.833,9437.7629,6245,3.9776,8827.3903,6115,1.8184,7084.8968,5696,2.7843,6286.599,5612,4.3869,14143.4952,5558,3.4701,6279.5527,5199,.1891,12139.5535,5161,1.3328,1748.0164,5115,.2831,5856.4777,4900,.4874,1194.447,4104,5.3682,8429.2413,4094,2.3985,19651.0485,3920,6.1683,10447.3878,3677,6.0413,10213.2855,3660,2.5696,1059.3819,3595,1.7088,2352.8662,3557,1.776,6812.7668,3329,.5931,17789.8456,3041,.4429,83996.8473,3005,2.7398,1349.8674,2535,3.1647,4690.4798,2474,.2148,3.5904,2366,.4847,8031.0923,2357,2.0653,3340.6124,2282,5.222,4705.7323,2189,5.5559,553.5694,2142,1.4256,16730.4637,2109,4.1483,951.7184,2030,.3713,283.8593,1992,5.2221,12168.0027,1986,5.7747,6309.3742,1912,3.8222,23581.2582,1889,5.3863,149854.4001,1790,2.2149,13367.9726,1748,4.5605,135.0651,1622,5.9884,11769.8537,1508,4.1957,6256.7775,1442,4.1932,242.7286,1435,3.7236,38.0277,1397,4.4014,6681.2249,1362,1.8893,7632.9433,1250,1.1305,5.5229,1205,2.6223,955.5997,1200,1.0035,632.7837,1129,.1774,4164.312,1083,.3273,103.0928,1052,.9387,11926.2544,1050,5.3591,1592.596,1033,6.1998,6438.4962,1001,6.0291,5746.2713,980,.999,11371.705,980,5.244,27511.468,938,2.624,5760.498,923,.483,522.577,922,4.571,4292.331,905,5.337,6386.169,862,4.165,7058.598,841,3.299,7234.794,836,4.539,25132.303,813,6.112,4732.031,812,6.271,426.598,801,5.821,28.449,787,.996,5643.179,776,2.957,23013.54,769,3.121,7238.676,758,3.974,11499.656,735,4.386,316.392,731,.607,11513.883,719,3.998,74.782,706,.323,263.084,676,5.911,90955.552,663,3.665,17298.182,653,5.791,18073.705,630,4.717,6836.645,615,1.458,233141.314,612,1.075,19804.827,596,3.321,6283.009,596,2.876,6283.143,555,2.452,12352.853,541,5.392,419.485,531,.382,31441.678,519,4.065,6208.294,513,2.361,10973.556,494,5.737,9917.697,450,3.272,11015.106,449,3.653,206.186,447,2.064,7079.374,435,4.423,5216.58,421,1.906,245.832,413,.921,3738.761,402,.84,20.355,387,1.826,11856.219,379,2.344,3.881,374,2.954,3128.389,370,5.031,536.805,365,1.018,16200.773,365,1.083,88860.057,352,5.978,3894.182,352,2.056,244287.6,351,3.713,6290.189,340,1.106,14712.317,339,.978,8635.942,339,3.202,5120.601,333,.837,6496.375,325,3.479,6133.513,316,5.089,21228.392,316,1.328,10873.986,309,3.646,10.637,303,1.802,35371.887,296,3.397,9225.539,288,6.026,154717.61,281,2.585,14314.168,262,3.856,266.607,262,2.579,22483.849,257,1.561,23543.231,255,3.949,1990.745,251,3.744,10575.407,240,1.161,10984.192,238,.106,7.046,236,4.272,6040.347,234,3.577,10969.965,211,3.714,65147.62,210,.754,13521.751,207,4.228,5650.292,202,.814,170.673,201,4.629,6037.244,200,.381,6172.87,199,3.933,6206.81,199,5.197,6262.3,197,1.046,18209.33,195,1.07,5230.807,195,4.869,36.028,194,4.313,6244.943,192,1.229,709.933,192,5.595,6282.096,192,.602,6284.056,189,3.744,23.878,188,1.904,15.252,188,.867,22003.915,182,3.681,15110.466,181,.491,1.484,179,3.222,39302.097,179,1.259,12559.038,62833196674749,0,0,20605886,2.67823456,6283.07584999,430343,2.635127,12566.1517,42526,1.59047,3.52312,11926,5.79557,26.29832,10898,2.96618,1577.34354,9348,2.5921,18849.2275,7212,1.1385,529.691,6777,1.8747,398.149,6733,4.4092,5507.5532,5903,2.888,5223.6939,5598,2.1747,155.4204,4541,.398,796.298,3637,.4662,775.5226,2896,2.6471,7.1135,2084,5.3414,.9803,1910,1.8463,5486.7778,1851,4.9686,213.2991,1729,2.9912,6275.9623,1623,.0322,2544.3144,1583,1.4305,2146.1654,1462,1.2053,10977.0788,1246,2.8343,1748.0164,1188,3.258,5088.6288,1181,5.2738,1194.447,1151,2.075,4694.003,1064,.7661,553.5694,997,1.303,6286.599,972,4.239,1349.867,945,2.7,242.729,858,5.645,951.718,758,5.301,2352.866,639,2.65,9437.763,610,4.666,4690.48,583,1.766,1059.382,531,.909,3154.687,522,5.661,71430.696,520,1.854,801.821,504,1.425,6438.496,433,.241,6812.767,426,.774,10447.388,413,5.24,7084.897,374,2.001,8031.092,356,2.429,14143.495,350,4.8,6279.553,337,.888,12036.461,337,3.862,1592.596,325,3.4,7632.943,322,.616,8429.241,318,3.188,4705.732,297,6.07,4292.331,295,1.431,5746.271,290,2.325,20.355,275,.935,5760.498,270,4.804,7234.794,253,6.223,6836.645,228,5.003,17789.846,225,5.672,11499.656,215,5.202,11513.883,208,3.955,10213.286,208,2.268,522.577,206,2.224,5856.478,206,2.55,25132.303,203,.91,6256.778,189,.532,3340.612,188,4.735,83996.847,179,1.474,4164.312,178,3.025,5.523,177,3.026,5753.385,159,4.637,3.286,157,6.124,5216.58,155,3.077,6681.225,154,4.2,13367.973,143,1.191,3894.182,138,3.093,135.065,136,4.245,426.598,134,5.765,6040.347,128,3.085,5643.179,127,2.092,6290.189,125,3.077,11926.254,125,3.445,536.805,114,3.244,12168.003,112,2.318,16730.464,111,3.901,11506.77,111,5.32,23.878,105,3.75,7860.419,103,2.447,1990.745,96,.82,3.88,96,4.08,6127.66,91,5.42,206.19,91,.42,7079.37,88,5.17,11790.63,81,.34,9917.7,80,3.89,10973.56,78,2.4,1589.07,78,2.58,11371.7,77,3.98,955.6,77,3.36,36.03,76,1.3,103.09,75,5.18,10969.97,75,4.96,6496.37,73,5.21,38.03,72,2.65,6309.37,70,5.61,3738.76,69,2.6,3496.03,69,.39,15.25,69,2.78,20.78,65,1.13,7058.6,64,4.28,28.45,61,5.63,10984.19,60,.73,419.48,60,5.28,10575.41,58,5.55,17298.18,58,3.19,4732.03,5291887,0,0,871984,1.072097,6283.07585,30913,.86729,12566.1517,2734,.053,3.5231,1633,5.1883,26.2983,1575,3.6846,155.4204,954,.757,18849.228,894,2.057,77713.771,695,.827,775.523,506,4.663,1577.344,406,1.031,7.114,381,3.441,5573.143,346,5.141,796.298,317,6.053,5507.553,302,1.192,242.729,289,6.117,529.691,271,.306,398.149,254,2.28,553.569,237,4.381,5223.694,208,3.754,.98,168,.902,951.718,153,5.759,1349.867,145,4.364,1748.016,134,3.721,1194.447,125,2.948,6438.496,122,2.973,2146.165,110,1.271,161000.686,104,.604,3154.687,100,5.986,6286.599,92,4.8,5088.63,89,5.23,7084.9,83,3.31,213.3,76,3.42,5486.78,71,6.19,4690.48,68,3.43,4694,65,1.6,2544.31,64,1.98,801.82,61,2.48,10977.08,50,1.44,6836.65,49,2.34,1592.6,46,1.31,4292.33,46,3.81,149854.4,43,.04,7234.79,40,4.94,7632.94,39,1.57,71430.7,38,3.17,6309.37,35,.99,6040.35,35,.67,1059.38,31,3.18,2352.87,31,3.55,8031.09,30,1.92,10447.39,30,2.52,6127.66,28,4.42,9437.76,28,2.71,3894.18,27,.67,25132.3,26,5.27,6812.77,25,.55,6279.55,23,1.38,4705.73,22,.64,6256.78,20,6.07,640.88,28923,5.84384,6283.07585,3496,0,0,1682,5.4877,12566.1517,296,5.196,155.42,129,4.722,3.523,71,5.3,18849.23,64,5.97,242.73,40,3.79,553.57,11408,3.14159,0,772,4.134,6283.076,77,3.84,12566.15,42,.42,155.42,88,3.14,0,17,2.77,6283.08,5,2.01,155.42,3,2.21,12566.15,27962,3.1987,84334.66158,10164,5.42249,5507.55324,8045,3.8801,5223.6939,4381,3.7044,2352.8662,3193,4.0003,1577.3435,2272,3.9847,1047.7473,1814,4.9837,6283.0758,1639,3.5646,5856.4777,1444,3.7028,9437.7629,1430,3.4112,10213.2855,1125,4.8282,14143.4952,1090,2.0857,6812.7668,1037,4.0566,71092.8814,971,3.473,4694.003,915,1.142,6620.89,878,4.44,5753.385,837,4.993,7084.897,770,5.554,167621.576,719,3.602,529.691,692,4.326,6275.962,558,4.41,7860.419,529,2.484,4705.732,521,6.25,18073.705,903,3.897,5507.553,618,1.73,5223.694,380,5.244,2352.866,166,1.627,84334.662,10001398880,0,0,167069963,3.098463508,6283.075849991,1395602,3.0552461,12566.1517,308372,5.198467,77713.771468,162846,1.173877,5753.384885,157557,2.846852,7860.419392,92480,5.45292,11506.76977,54244,4.56409,3930.2097,47211,3.661,5884.92685,34598,.96369,5507.55324,32878,5.89984,5223.69392,30678,.29867,5573.1428,24319,4.2735,11790.62909,21183,5.84715,1577.34354,18575,5.02194,10977.0788,17484,3.01194,18849.22755,10984,5.05511,5486.77784,9832,.8868,6069.7768,8650,5.6896,15720.8388,8583,1.2708,161000.6857,6490,.2725,17260.1547,6292,.9218,529.691,5706,2.0137,83996.8473,5574,5.2416,71430.6956,4938,3.245,2544.3144,4696,2.5781,775.5226,4466,5.5372,9437.7629,4252,6.0111,6275.9623,3897,5.3607,4694.003,3825,2.3926,8827.3903,3749,.8295,19651.0485,3696,4.9011,12139.5535,3566,1.6747,12036.4607,3454,1.8427,2942.4634,3319,.2437,7084.8968,3192,.1837,5088.6288,3185,1.7778,398.149,2846,1.2134,6286.599,2779,1.8993,6279.5527,2628,4.589,10447.3878,2460,3.7866,8429.2413,2393,4.996,5856.4777,2359,.2687,796.298,2329,2.8078,14143.4952,2210,1.95,3154.6871,2035,4.6527,2146.1654,1951,5.3823,2352.8662,1883,.6731,149854.4001,1833,2.2535,23581.2582,1796,.1987,6812.7668,1731,6.152,16730.4637,1717,4.4332,10213.2855,1619,5.2316,17789.8456,1381,5.1896,8031.0923,1364,3.6852,4705.7323,1314,.6529,13367.9726,1041,4.3329,11769.8537,1017,1.5939,4690.4798,998,4.201,6309.374,966,3.676,27511.468,874,6.064,1748.016,779,3.674,12168.003,771,.312,7632.943,756,2.626,6256.778,746,5.648,11926.254,693,2.924,6681.225,680,1.423,23013.54,674,.563,3340.612,663,5.661,11371.705,659,3.136,801.821,648,2.65,19804.827,615,3.029,233141.314,612,5.134,1194.447,563,4.341,90955.552,552,2.091,17298.182,534,5.1,31441.678,531,2.407,11499.656,523,4.624,6438.496,513,5.324,11513.883,477,.256,11856.219,461,1.722,7234.794,458,3.766,6386.169,458,4.466,5746.271,423,1.055,5760.498,422,1.557,7238.676,415,2.599,7058.598,401,3.03,1059.382,397,1.201,1349.867,379,4.907,4164.312,360,5.707,5643.179,352,3.626,244287.6,348,.761,10973.556,342,3.001,4292.331,336,4.546,4732.031,334,3.138,6836.645,324,4.164,9917.697,316,1.691,11015.106,307,.238,35371.887,298,1.306,6283.143,298,1.75,6283.009,293,5.738,16200.773,286,5.928,14712.317,281,3.515,21228.392,280,5.663,8635.942,277,.513,26.298,268,4.207,18073.705,266,.9,12352.853,260,2.962,25132.303,255,2.477,6208.294,242,2.8,709.933,231,1.054,22483.849,229,1.07,14314.168,216,1.314,154717.61,215,6.038,10873.986,200,.561,7079.374,198,2.614,951.718,197,4.369,167283.762,186,2.861,5216.58,183,1.66,39302.097,183,5.912,3738.761,175,2.145,6290.189,173,2.168,10575.407,171,3.702,1592.596,171,1.343,3128.389,164,5.55,6496.375,164,5.856,10984.192,161,1.998,10969.965,161,1.909,6133.513,157,4.955,25158.602,154,6.216,23543.231,153,5.357,13521.751,150,5.77,18209.33,150,5.439,155.42,139,1.778,9225.539,139,1.626,5120.601,128,2.46,13916.019,123,.717,143571.324,122,2.654,88860.057,121,4.414,3894.182,121,1.192,3.523,120,4.03,553.569,119,1.513,17654.781,117,3.117,14945.316,113,2.698,6040.347,110,3.085,43232.307,109,.998,955.6,108,2.939,17256.632,107,5.285,65147.62,103,.139,11712.955,103,5.85,213.299,102,3.046,6037.244,101,2.842,8662.24,100,3.626,6262.3,98,2.36,6206.81,98,5.11,6172.87,98,2,15110.47,97,2.67,5650.29,97,2.75,6244.94,96,4.02,6282.1,96,5.31,6284.06,92,.1,29088.81,85,3.26,20426.57,84,2.6,28766.92,81,3.58,10177.26,80,5.81,5230.81,78,2.53,16496.36,77,4.06,6127.66,73,.04,5481.25,72,5.96,12559.04,72,5.92,4136.91,71,5.49,22003.91,70,3.41,7.11,69,.62,11403.68,69,3.9,1589.07,69,1.96,12416.59,69,4.51,426.6,67,1.61,11087.29,66,4.5,47162.52,66,5.08,283.86,66,4.32,16858.48,65,1.04,6062.66,64,1.59,18319.54,63,5.7,45892.73,63,4.6,66567.49,63,3.82,13517.87,62,2.62,11190.38,61,1.54,33019.02,60,5.58,10344.3,60,5.38,316428.23,60,5.78,632.78,59,6.12,9623.69,57,.16,17267.27,57,3.86,6076.89,57,1.98,7668.64,56,4.78,20199.09,55,4.56,18875.53,55,3.51,17253.04,54,3.07,226858.24,54,4.83,18422.63,53,5.02,12132.44,52,3.63,5333.9,52,.97,155427.54,51,3.36,20597.24,50,.99,11609.86,50,2.21,1990.75,48,1.62,12146.67,48,1.17,12569.67,47,4.62,5436.99,47,1.81,12562.63,47,.59,21954.16,47,.76,7342.46,46,.27,4590.91,46,3.77,156137.48,45,5.66,10454.5,44,5.84,3496.03,43,.24,17996.03,41,5.93,51092.73,41,4.21,12592.45,40,5.14,1551.05,40,5.28,15671.08,39,3.69,18052.93,39,4.94,24356.78,38,2.72,11933.37,38,5.23,7477.52,38,4.99,9779.11,37,3.7,9388.01,37,4.44,4535.06,36,2.16,28237.23,36,2.54,242.73,36,.22,5429.88,35,6.15,19800.95,35,2.92,36949.23,34,5.63,2379.16,34,5.73,16460.33,34,5.11,5849.36,33,6.19,6268.85,10301861,1.1074897,6283.07584999,172124,1.064423,12566.1517,70222,3.14159,0,3235,1.0217,18849.2275,3080,2.8435,5507.5532,2497,1.3191,5223.6939,1849,1.4243,1577.3435,1008,5.9138,10977.0788,865,1.42,6275.962,863,.271,5486.778,507,1.686,5088.629,499,6.014,6286.599,467,5.987,529.691,440,.518,4694.003,410,1.084,9437.763,387,4.75,2544.314,375,5.071,796.298,352,.023,83996.847,344,.949,71430.696,341,5.412,775.523,322,6.156,2146.165,286,5.484,10447.388,284,3.42,2352.866,255,6.132,6438.496,252,.243,398.149,243,3.092,4690.48,225,3.689,7084.897,220,4.952,6812.767,219,.42,8031.092,209,1.282,1748.016,193,5.314,8429.241,185,1.82,7632.943,175,3.229,6279.553,173,1.537,4705.732,158,4.097,11499.656,158,5.539,3154.687,150,3.633,11513.883,148,3.222,7234.794,147,3.653,1194.447,144,.817,14143.495,135,6.151,5746.271,134,4.644,6836.645,128,2.693,1349.867,123,5.65,5760.498,118,2.577,13367.973,113,3.357,17789.846,110,4.497,4292.331,108,5.828,12036.461,102,5.621,6256.778,99,1.14,1059.38,98,.66,5856.48,93,2.32,10213.29,92,.77,16730.46,88,1.5,11926.25,86,1.42,5753.38,85,.66,155.42,81,1.64,6681.22,80,4.11,951.72,66,4.55,5216.58,65,.98,25132.3,64,4.19,6040.35,64,.52,6290.19,63,1.51,5643.18,59,6.18,4164.31,57,2.3,10973.56,55,2.32,11506.77,55,2.2,1592.6,55,5.27,3340.61,54,5.54,553.57,53,5.04,9917.7,53,.92,11371.7,52,3.98,17298.18,52,3.6,10969.97,49,5.91,3894.18,49,2.51,6127.66,48,1.67,12168,46,.31,801.82,42,3.7,10575.41,42,4.05,10984.19,40,2.17,7860.42,40,4.17,26.3,38,5.82,7058.6,37,3.39,6496.37,36,1.08,6309.37,36,5.34,7079.37,34,3.62,11790.63,32,.32,16200.77,31,4.24,3738.76,29,4.55,11856.22,29,1.26,8635.94,27,3.45,5884.93,26,5.08,10177.26,26,5.38,21228.39,24,2.26,11712.96,24,1.05,242.73,24,5.59,6069.78,23,3.63,6284.06,23,1.64,4732.03,22,3.46,213.3,21,1.05,3496.03,21,3.92,13916.02,21,4.01,5230.81,20,5.16,12352.85,20,.69,1990.75,19,2.73,6062.66,19,5.01,11015.11,18,6.04,6283.01,18,2.85,7238.68,18,5.6,6283.14,18,5.16,17253.04,18,2.54,14314.17,17,1.58,7.11,17,.98,3930.21,17,4.75,17267.27,16,2.19,6076.89,16,2.19,18073.7,16,6.12,3.52,16,4.61,9623.69,16,3.4,16496.36,15,.19,9779.11,15,5.3,13517.87,15,4.26,3128.39,15,.81,709.93,14,.5,25158.6,14,4.38,4136.91,13,.98,65147.62,13,3.31,154717.61,13,2.11,1589.07,13,1.92,22483.85,12,6.03,9225.54,12,1.53,12559.04,12,5.82,6282.1,12,5.61,5642.2,12,2.38,167283.76,12,.39,12132.44,12,3.98,4686.89,12,5.81,12569.67,12,.56,5849.36,11,.45,6172.87,11,5.8,16858.48,11,6.22,12146.67,11,2.27,5429.88,435939,5.784551,6283.07585,12363,5.57935,12566.1517,1234,3.1416,0,879,3.628,77713.771,569,1.87,5573.143,330,5.47,18849.228,147,4.48,5507.553,110,2.842,161000.686,101,2.815,5223.694,85,3.11,1577.34,65,5.47,775.52,61,1.38,6438.5,50,4.42,6286.6,47,3.66,7084.9,46,5.39,149854.4,42,.9,10977.08,40,3.2,5088.63,35,1.81,5486.78,32,5.35,3154.69,30,3.52,796.3,29,4.62,4690.48,28,1.84,4694,27,3.14,71430.7,27,6.17,6836.65,26,1.42,2146.17,25,2.81,1748.02,24,2.18,155.42,23,4.76,7234.79,21,3.38,7632.94,21,.22,4705.73,20,4.22,1349.87,20,2.01,1194.45,20,4.58,529.69,19,1.59,6309.37,18,5.7,6040.35,18,6.03,4292.33,17,2.9,9437.76,17,2,8031.09,17,5.78,83996.85,16,.05,2544.31,15,.95,6127.66,14,.36,10447.39,14,1.48,2352.87,13,.77,553.57,13,5.48,951.72,13,5.27,6279.55,13,3.76,6812.77,11,5.41,6256.78,10,.68,1592.6,10,4.95,398.15,10,1.15,3894.18,10,5.2,244287.6,10,1.94,11856.22,9,5.39,25132.3,8,6.18,1059.38,8,.69,8429.24,8,5.85,242.73,7,5.26,14143.5,7,.52,801.82,6,2.24,8635.94,6,4,13367.97,6,2.77,90955.55,6,5.17,7058.6,5,1.46,233141.31,5,4.13,7860.42,5,3.91,26.3,5,3.89,12036.46,5,5.58,6290.19,5,5.54,1990.75,5,.83,11506.77,5,6.22,6681.22,4,5.26,10575.41,4,1.91,7477.52,4,.43,10213.29,4,1.09,709.93,4,5.09,11015.11,4,4.22,88860.06,4,3.57,7079.37,4,1.98,6284.06,4,3.93,10973.56,4,6.18,9917.7,4,.36,10177.26,4,2.75,3738.76,4,3.33,5643.18,4,5.36,25158.6,14459,4.27319,6283.07585,673,3.917,12566.152,77,0,0,25,3.73,18849.23,4,2.8,6286.6,386,2.564,6283.076,31,2.27,12566.15,5,3.44,5573.14,2,2.05,18849.23,1,2.06,77713.77,1,4.41,161000.69,1,3.82,149854.4,1,4.08,6127.66,1,5.26,6438.5,9,1.22,6283.08,1,.66,12566.15],Xmt.XL1=[[22639.586,.78475822,8328.691424623,1.5229241,25.0719,-.123598,4586.438,.1873974,7214.06286536,-2.184756,-18.86,.0828,2369.914,2.542952,15542.75428998,-.661832,6.212,-.0408,769.026,3.140313,16657.38284925,3.04585,50.144,-.2472,666.418,1.527671,628.30195521,-.02664,.062,-.0054,411.596,4.826607,16866.932315,-1.28012,-1.07,-.0059,211.656,4.115028,-1114.6285593,-3.70768,-43.93,.2064,205.436,.230523,6585.7609101,-2.15812,-18.92,.0882,191.956,4.898507,23871.4457146,.86109,31.28,-.164,164.729,2.586078,14914.4523348,-.6352,6.15,-.035,147.321,5.4553,-7700.3894694,-1.5496,-25.01,.118,124.988,.48608,7771.377145,-.3309,3.11,-.02,109.38,3.88323,8956.9933798,1.4963,25.13,-.129,55.177,5.57033,-1324.178025,.6183,7.3,-.035,45.1,.89898,25195.62374,.2428,24,-.129,39.533,3.81213,-8538.24089,2.803,26.1,-.118,38.43,4.30115,22756.817155,-2.8466,-12.6,.042,36.124,5.49587,24986.074274,4.5688,75.2,-.371,30.773,1.94559,14428.125731,-4.3695,-37.7,.166,28.397,3.28586,7842.364821,-2.2114,-18.8,.077,24.358,5.64142,16171.056245,-.6885,6.3,-.046,18.585,4.41371,-557.31428,-1.8538,-22,.1,17.954,3.58454,8399.6791,-.3576,3.2,-.03,14.53,4.9416,23243.143759,.888,31.2,-.16,14.38,.9709,32200.137139,2.384,56.4,-.29,14.251,5.7641,-2.3012,1.523,25.1,-.12,13.899,.3735,31085.50858,-1.324,12.4,-.08,13.194,1.7595,-9443.319984,-5.231,-69,.33,9.679,3.0997,-16029.080894,-3.072,-50.1,.24,9.366,.3016,24080.99518,-3.465,-19.9,.08,8.606,4.1582,-1742.930514,-3.681,-44,.21,8.453,2.8416,16100.06857,1.192,28.2,-.14,8.05,2.6292,14286.15038,-.609,6.1,-.03,7.63,6.2388,17285.684804,3.019,50.2,-.25,7.447,1.4845,1256.60391,-.053,.1,-.01,7.371,.2736,5957.458955,-2.131,-19,.09,7.063,5.6715,33.757047,-.308,-3.6,.02,6.383,4.7843,7004.5134,2.141,32.4,-.16,5.742,2.6572,32409.686605,-1.942,5,-.05,4.374,4.3443,22128.5152,-2.82,-13,.05,3.998,3.2545,33524.31516,1.766,49,-.25,3.21,2.2443,14985.44001,-2.516,-16,.06,2.915,1.7138,24499.74767,.834,31,-.17,2.732,1.9887,13799.82378,-4.343,-38,.17,2.568,5.4122,-7072.08751,-1.576,-25,.11,2.521,3.2427,8470.66678,-2.238,-19,.07,2.489,4.0719,-486.3266,-3.734,-44,.2,2.146,5.6135,-1952.47998,.645,7,-.03,1.978,2.7291,39414.2,.199,37,-.21,1.934,1.5682,33314.7657,6.092,100,-.5,1.871,.4166,30457.20662,-1.297,12,-.1,1.753,2.0582,-8886.0057,-3.38,-47,.2,1.437,2.386,-695.87607,.59,7,0,1.373,3.026,-209.54947,4.33,51,-.2,1.262,5.94,16728.37052,1.17,28,-.1,1.224,6.172,6656.74859,-4.04,-41,.2,1.187,5.873,6099.43431,-5.89,-63,.3,1.177,1.014,31571.83518,2.41,56,-.3,1.162,3.84,9585.29534,1.47,25,-.1,1.143,5.639,8364.73984,-2.18,-19,.1,1.078,1.229,70.98768,-1.88,-22,.1,1.059,3.326,40528.82856,3.91,81,-.4,.99,5.013,40738.37803,-.42,30,-.2,.948,5.687,-17772.01141,-6.75,-94,.5,.876,.298,-.35232,0,0,0,.822,2.994,393.02097,0,0,0,.788,1.836,8326.39022,3.05,50,-.2,.752,4.985,22614.8418,.91,31,-.2,.74,2.875,8330.99262,0,0,0,.669,.744,-24357.77232,-4.6,-75,.4,.644,1.314,8393.12577,-2.18,-19,.1,.639,5.888,575.33849,0,0,0,.635,1.116,23385.11911,-2.87,-13,0,.584,5.197,24428.75999,2.71,53,-.3,.583,3.513,-9095.55517,.95,4,0,.572,6.059,29970.88002,-5.03,-32,.1,.565,2.96,.32863,1.52,25,-.1,.561,4.001,-17981.56087,-2.43,-43,.2,.557,.529,7143.07519,-.3,3,0,.546,2.311,25614.37623,4.54,75,-.4,.536,4.229,15752.30376,-4.99,-45,.2,.493,3.316,-8294.9344,-1.83,-29,.1,.491,1.744,8362.4485,1.21,21,-.1,.478,1.803,-10071.6219,-5.2,-69,.3,.454,.857,15333.2048,3.66,57,-.3,.445,2.071,8311.7707,-2.18,-19,.1,.426,.345,23452.6932,-3.44,-20,.1,.42,4.941,33733.8646,-2.56,-2,0,.413,1.642,17495.2343,-1.31,-1,0,.404,1.458,23314.1314,-.99,9,-.1,.395,2.132,38299.5714,-3.51,-6,0,.382,2.7,31781.3846,-1.92,5,0,.375,4.827,6376.2114,2.17,32,-.2,.361,3.867,16833.1753,-.97,3,0,.358,5.044,15056.4277,-4.4,-38,.2,.35,5.157,-8257.7037,-3.4,-47,.2,.344,4.233,157.7344,0,0,0,.34,2.672,13657.8484,-.58,6,0,.329,5.61,41853.0066,3.29,74,-.4,.325,5.895,-39.8149,0,0,0,.309,4.387,21500.2132,-2.79,-13,.1,.302,1.278,786.0419,0,0,0,.302,5.341,-24567.3218,-.27,-24,.1,.301,1.045,5889.8848,-1.57,-12,0,.294,4.201,-2371.2325,-3.65,-44,.2,.293,3.704,21642.1886,-6.55,-57,.2,.29,4.069,32828.4391,2.36,56,-.3,.289,3.472,31713.8105,-1.35,12,-.1,.285,5.407,-33.7814,.31,4,0,.283,5.998,-16.9207,-3.71,-44,.2,.283,2.772,38785.898,.23,37,-.2,.274,5.343,15613.742,-2.54,-16,.1,.263,3.997,25823.9257,.22,24,-.1,.254,.6,24638.3095,-1.61,2,0,.253,1.344,6447.1991,.29,10,-.1,.25,.887,141.9754,-3.76,-44,.2,.247,.317,5329.157,-2.1,-19,.1,.245,.141,36.0484,-3.71,-44,.2,.231,2.287,14357.1381,-2.49,-16,.1,.227,5.158,2.6298,0,0,0,.219,5.085,47742.8914,1.72,63,-.3,.211,2.145,6638.7244,-2.18,-19,.1,.201,4.415,39623.7495,-4.13,-14,0,.194,2.091,588.4927,0,0,0,.193,3.057,-15400.7789,-3.1,-50,0,.186,5.598,16799.3582,-.72,6,0,.185,3.886,1150.677,0,0,0,.183,1.619,7178.0144,1.52,25,0,.181,2.635,8328.3391,1.52,25,0,.181,2.077,8329.0437,1.52,25,0,.179,3.215,-9652.8694,-.9,-18,0,.176,1.716,-8815.018,-5.26,-69,0,.175,5.673,550.7553,0,0,0,.17,2.06,31295.058,-5.6,-39,0,.167,1.239,7211.7617,-.7,6,0,.165,4.499,14967.4158,-.7,6,0,.164,3.595,15540.4531,.9,31,0,.164,4.237,522.3694,0,0,0,.163,4.633,15545.0555,-2.2,-19,0,.161,.478,6428.0209,-2.2,-19,0,.158,2.03,13171.5218,-4.3,-38,0,.157,2.28,7216.3641,-3.7,-44,0,.154,5.65,7935.6705,1.5,25,0,.152,.46,29828.9047,-1.3,12,0,.151,1.19,-.7113,0,0,0,.15,1.42,23942.4334,-1,9,0,.144,2.75,7753.3529,1.5,25,0,.137,2.08,7213.7105,-2.2,-19,0,.137,1.44,7214.4152,-2.2,-19,0,.136,4.46,-1185.6162,-1.8,-22,0,.136,3.03,8000.1048,-2.2,-19,0,.134,2.83,14756.7124,-.7,6,0,.131,5.05,6821.0419,-2.2,-19,0,.128,5.99,-17214.6971,-4.9,-72,0,.127,5.35,8721.7124,1.5,25,0,.126,4.49,46628.2629,-2,19,0,.125,5.94,7149.6285,1.5,25,0,.124,1.09,49067.0695,1.1,55,0,.121,2.88,15471.7666,1.2,28,0,.111,3.92,41643.4571,7.6,125,-1,.11,1.96,8904.0299,1.5,25,0,.106,3.3,-18.0489,-2.2,-19,0,.105,2.3,-4.931,1.5,25,0,.104,2.22,-6.559,-1.9,-22,0,.101,1.44,1884.9059,-.1,0,0,.1,5.92,5471.1324,-5.9,-63,0,.099,1.12,15149.7333,-.7,6,0,.096,4.73,15508.9972,-.4,10,0,.095,5.18,7230.9835,1.5,25,0,.093,3.37,39900.5266,3.9,81,0,.092,2.01,25057.0619,2.7,53,0,.092,1.21,-79.6298,0,0,0,.092,1.65,-26310.2523,-4,-68,0,.091,1.01,42062.5561,-1,23,0,.09,6.1,29342.5781,-5,-32,0,.09,4.43,15542.402,-.7,6,0,.09,3.8,15543.1066,-.7,6,0,.089,4.15,6063.3859,-2.2,-19,0,.086,4.03,52.9691,0,0,0,.085,.49,47952.4409,-2.6,11,0,.085,1.6,7632.8154,2.1,32,0,.084,.22,14392.0773,-.7,6,0,.083,6.22,6028.4466,-4,-41,0,.083,.63,-7909.9389,2.8,26,0,.083,5.2,-77.5523,0,0,0,.082,2.74,8786.1467,-2.2,-19,0,.08,2.43,9166.5428,-2.8,-26,0,.08,3.7,-25405.1732,4.1,27,0,.078,5.68,48857.52,5.4,106,-1,.077,1.85,8315.5735,-2.2,-19,0,.075,5.46,-18191.1103,1.9,8,0,.075,1.41,-16238.6304,1.3,1,0,.074,5.06,40110.0761,-.4,30,0,.072,2.1,64.4343,-3.7,-44,0,.071,2.17,37671.2695,-3.5,-6,0,.069,1.71,16693.4313,-.7,6,0,.069,3.33,-26100.7028,-8.3,-119,1,.068,1.09,8329.4028,1.5,25,0,.068,3.62,8327.9801,1.5,25,0,.068,2.41,16833.1509,-1,3,0,.067,3.4,24709.2971,-3.5,-20,0,.067,1.65,8346.7156,-.3,3,0,.066,2.61,22547.2677,1.5,39,0,.066,3.5,15576.5113,-1,3,0,.065,5.76,33037.9886,-2,5,0,.065,4.58,8322.1325,-.3,3,0,.065,6.2,17913.9868,3,50,0,.065,1.5,22685.8295,-1,9,0,.065,2.37,7180.3058,-1.9,-15,0,.064,1.06,30943.5332,2.4,56,0,.064,1.89,8288.8765,1.5,25,0,.064,4.7,6.0335,.3,4,0,.063,2.83,8368.5063,1.5,25,0,.063,5.66,-2580.7819,.7,7,0,.062,3.78,7056.3285,-2.2,-19,0,.061,1.49,8294.91,1.8,29,0,.061,.12,-10281.1714,-.9,-18,0,.061,3.06,-8362.4729,-1.2,-21,0,.061,4.43,8170.9571,1.5,25,0,.059,5.78,-13.1179,-3.7,-44,0,.059,5.97,6625.5702,-2.2,-19,0,.058,5.01,-.508,-.3,0,0,.058,2.73,7161.0938,-2.2,-19,0,.057,.19,7214.0629,-2.2,-19,0,.057,4,22199.5029,-4.7,-35,0,.057,5.38,8119.142,5.8,76,0,.056,1.07,7542.6495,1.5,25,0,.056,.28,8486.4258,1.5,25,0,.054,4.19,16655.0816,4.6,75,0,.053,.72,7267.032,-2.2,-19,0,.053,3.12,12.6192,.6,7,0,.052,2.99,-32896.013,-1.8,-49,0,.052,3.46,1097.708,0,0,0,.051,5.37,-6443.786,-1.6,-25,0,.051,1.35,7789.401,-2.2,-19,0,.051,5.83,40042.502,.2,38,0,.051,3.63,9114.733,1.5,25,0,.05,1.51,8504.484,-2.5,-22,0,.05,5.23,16659.684,1.5,25,0,.05,1.15,7247.82,-2.5,-23,0,.047,.25,-1290.421,.3,0,0,.047,4.67,-32686.464,-6.1,-100,0,.047,3.49,548.678,0,0,0,.047,2.37,6663.308,-2.2,-19,0,.046,.98,1572.084,0,0,0,.046,2.04,14954.262,-.7,6,0,.046,3.72,6691.693,-2.2,-19,0,.045,6.19,-235.287,0,0,0,.044,2.96,32967.001,-.1,27,0,.044,3.82,-1671.943,-5.6,-66,0,.043,5.82,1179.063,0,0,0,.043,.07,34152.617,1.7,49,0,.043,3.71,6514.773,-.3,0,0,.043,5.62,15.732,-2.5,-23,0,.043,5.8,8351.233,-2.2,-19,0,.042,.27,7740.199,1.5,25,0,.042,6.14,15385.02,-.7,6,0,.042,6.13,7285.051,-4.1,-41,0,.041,1.27,32757.451,4.2,78,0,.041,4.46,8275.722,1.5,25,0,.04,.23,8381.661,1.5,25,0,.04,5.87,-766.864,2.5,29,0,.04,1.66,254.431,0,0,0,.04,.4,9027.981,-.4,0,0,.04,2.96,7777.936,1.5,25,0,.039,4.67,33943.068,6.1,100,0,.039,3.52,8326.062,1.5,25,0,.039,3.75,21013.887,-6.5,-57,0,.039,5.6,606.978,0,0,0,.039,1.19,8331.321,1.5,25,0,.039,2.84,7211.433,-2.2,-19,0,.038,.67,7216.693,-2.2,-19,0,.038,6.22,25161.867,.6,28,0,.038,4.4,7806.322,1.5,25,0,.038,4.16,9179.168,-2.2,-19,0,.037,4.73,14991.999,-.7,6,0,.036,.35,67.514,-.6,-7,0,.036,3.7,25266.611,-1.6,0,0,.036,5.39,16328.796,-.7,6,0,.035,1.44,7174.248,-2.2,-19,0,.035,5,15684.73,-4.4,-38,0,.035,.39,-15.419,-2.2,-19,0,.035,6.07,15020.385,-.7,6,0,.034,6.01,7371.797,-2.2,-19,0,.034,.96,-16623.626,-3.4,-54,0,.033,6.24,9479.368,1.5,25,0,.033,3.21,23661.896,5.2,82,0,.033,4.06,8311.418,-2.2,-19,0,.033,2.4,1965.105,0,0,0,.033,5.17,15489.785,-.7,6,0,.033,5.03,21986.54,.9,31,0,.033,4.1,16691.14,2.7,46,0,.033,5.13,47114.589,1.7,63,0,.033,4.45,8917.184,1.5,25,0,.033,4.23,2.078,0,0,0,.032,2.33,75.251,1.5,25,0,.032,2.1,7253.878,-2.2,-19,0,.032,3.11,-.224,1.5,25,0,.032,4.43,16640.462,-.7,6,0,.032,5.68,8328.363,0,0,0,.031,5.32,8329.02,3,50,0,.031,3.7,16118.093,-.7,6,0,.03,3.67,16721.817,-.7,6,0,.03,5.27,-1881.492,-1.2,-15,0,.03,5.72,8157.839,-2.2,-19,0,.029,5.73,-18400.313,-6.7,-94,0,.029,2.76,16,-2.2,-19,0,.029,1.75,8879.447,1.5,25,0,.029,.32,8851.061,1.5,25,0,.029,.9,14704.903,3.7,57,0,.028,2.9,15595.723,-.7,6,0,.028,5.88,16864.631,.2,24,0,.028,.63,16869.234,-2.8,-26,0,.028,4.04,-18609.863,-2.4,-43,0,.027,5.83,6727.736,-5.9,-63,0,.027,6.12,418.752,4.3,51,0,.027,.14,41157.131,3.9,81,0,.026,3.8,15.542,0,0,0,.026,1.68,50181.698,4.8,99,-1,.026,.32,315.469,0,0,0,.025,5.67,19.188,.3,0,0,.025,3.16,62.133,-2.2,-19,0,.025,3.76,15502.939,-.7,6,0,.025,4.53,45999.961,-2,19,0,.024,3.21,837.851,-4.4,-51,0,.024,2.82,38157.596,.3,37,0,.024,5.21,15540.124,-.7,6,0,.024,.26,14218.576,0,13,0,.024,3.01,15545.384,-.7,6,0,.024,1.16,-17424.247,-.6,-21,0,.023,2.34,-67.574,.6,7,0,.023,2.44,18.024,-1.9,-22,0,.023,3.7,469.4,0,0,0,.023,.72,7136.511,-2.2,-19,0,.023,4.5,15582.569,-.7,6,0,.023,2.8,-16586.395,-4.9,-72,0,.023,1.51,80.182,0,0,0,.023,1.09,5261.583,-1.5,-12,0,.023,.56,54956.954,-.5,44,0,.023,4.01,8550.86,-2.2,-19,0,.023,4.46,38995.448,-4.1,-14,0,.023,3.82,2358.126,0,0,0,.022,3.77,32271.125,.5,34,0,.022,.82,15935.775,-.7,6,0,.022,1.07,24013.421,-2.9,-13,0,.022,.4,8940.078,-2.2,-19,0,.022,2.06,15700.489,-.7,6,0,.022,4.27,15124.002,-5,-45,0,.021,1.16,56071.583,3.2,88,0,.021,5.58,9572.189,-2.2,-19,0,.02,1.7,-17.273,-3.7,-44,0,.02,3.05,214.617,0,0,0,.02,4.41,8391.048,-2.2,-19,0,.02,5.95,23869.145,2.4,56,0,.02,.42,40947.927,-4.7,-21,0,.019,1.39,5818.897,.3,10,0,.019,.71,23873.747,-.7,6,0,.019,2.81,7291.615,-2.2,-19,0,.019,5.09,8428.018,-2.2,-19,0,.019,4.14,6518.187,-1.6,-12,0,.019,3.85,21.33,0,0,0,.018,.66,14445.046,-.7,6,0,.018,1.65,.966,-4,-48,0,.018,5.64,-17143.709,-6.8,-94,0,.018,6.01,7736.432,-2.2,-19,0,.018,2.74,31153.083,-1.9,5,0,.018,4.58,6116.355,-2.2,-19,0,.018,2.28,46.401,.3,0,0,.018,3.8,10213.597,1.4,25,0,.018,2.84,56281.132,-1.1,36,0,.018,3.53,8249.062,1.5,25,0,.017,4.43,20871.911,-3,-13,0,.017,4.44,627.596,0,0,0,.017,1.85,628.308,0,0,0,.017,1.19,8408.321,2,25,0,.017,1.95,7214.056,-2,-19,0,.017,1.57,7214.07,-2,-19,0,.017,1.65,13870.811,-6,-60,0,.017,.3,22.542,-4,-44,0,.017,2.62,-119.445,0,0,0,.016,4.87,5747.909,2,32,0,.016,4.45,14339.108,-1,6,0,.016,1.83,41366.68,0,30,0,.016,4.53,16309.618,-3,-23,0,.016,2.54,15542.754,-1,6,0,.016,6.05,1203.646,0,0,0,.015,5.2,2751.147,0,0,0,.015,1.8,-10699.924,-5,-69,0,.015,.4,22824.391,-3,-20,0,.015,2.1,30666.756,-6,-39,0,.015,2.1,6010.417,-2,-19,0,.015,.7,-23729.47,-5,-75,0,.015,1.4,14363.691,-1,6,0,.015,5.8,16900.689,-2,0,0,.015,5.2,23800.458,3,53,0,.015,5.3,6035,-2,-19,0,.015,1.2,8251.139,2,25,0,.015,3.6,-8.86,0,0,0,.015,.8,882.739,0,0,0,.015,3,1021.329,0,0,0,.015,.6,23296.107,1,31,0,.014,5.4,7227.181,2,25,0,.014,.1,7213.352,-2,-19,0,.014,4,15506.706,3,50,0,.014,3.4,7214.774,-2,-19,0,.014,4.6,6665.385,-2,-19,0,.014,.1,-8.636,-2,-22,0,.014,3.1,15465.202,-1,6,0,.014,4.9,508.863,0,0,0,.014,3.5,8406.244,2,25,0,.014,1.3,13313.497,-8,-82,0,.014,2.8,49276.619,-3,0,0,.014,.1,30528.194,-3,-10,0,.013,1.7,25128.05,1,31,0,.013,2.9,14128.405,-1,6,0,.013,3.4,57395.761,3,80,0,.013,2.7,13029.546,-1,6,0,.013,3.9,7802.556,-2,-19,0,.013,1.6,8258.802,-2,-19,0,.013,2.2,8417.709,-2,-19,0,.013,.7,9965.21,-2,-19,0,.013,3.4,50391.247,0,48,0,.013,3,7134.433,-2,-19,0,.013,2.9,30599.182,-5,-31,0,.013,3.6,-9723.857,1,0,0,.013,4.8,7607.084,-2,-19,0,.012,.8,23837.689,1,35,0,.012,3.6,4.409,-4,-44,0,.012,5,16657.031,3,50,0,.012,4.4,16657.735,3,50,0,.012,1.1,15578.803,-4,-38,0,.012,6,-11.49,0,0,0,.012,1.9,8164.398,0,0,0,.012,2.4,31852.372,-4,-17,0,.012,2.4,6607.085,-2,-19,0,.012,4.2,8359.87,0,0,0,.012,.5,5799.713,-2,-19,0,.012,2.7,7220.622,0,0,0,.012,4.3,-139.72,0,0,0,.012,2.3,13728.836,-2,-16,0,.011,3.6,14912.146,1,31,0,.011,4.7,14916.748,-2,-19,0],[1.6768,4.66926,628.301955,-.0266,.1,-.005,.51642,3.3721,6585.76091,-2.158,-18.9,.09,.41383,5.7277,14914.452335,-.635,6.2,-.04,.37115,3.9695,7700.389469,1.55,25,-.12,.2756,.7416,8956.99338,1.496,25.1,-.13,.24599,4.2253,-2.3012,1.523,25.1,-.12,.07118,.1443,7842.36482,-2.211,-19,.08,.06128,2.4998,16171.05625,-.688,6,0,.04516,.443,8399.6791,-.36,3,0,.04048,5.771,14286.15038,-.61,6,0,.03747,4.626,1256.60391,-.05,0,0,.03707,3.415,5957.45895,-2.13,-19,.1,.03649,1.8,23243.14376,.89,31,-.2,.02438,.042,16029.08089,3.07,50,-.2,.02165,1.017,-1742.93051,-3.68,-44,.2,.01923,3.097,17285.6848,3.02,50,-.3,.01692,1.28,.3286,1.52,25,-.1,.01361,.298,8326.3902,3.05,50,-.2,.01293,4.013,7072.0875,1.58,25,-.1,.01276,4.413,8330.9926,0,0,0,.0127,.101,8470.6668,-2.24,-19,.1,.01097,1.203,22128.5152,-2.82,-13,0,.01088,2.545,15542.7543,-.66,6,0,.00835,.19,7214.0629,-2.18,-19,.1,.00734,4.855,24499.7477,.83,31,-.2,.00686,5.13,13799.8238,-4.34,-38,.2,.00631,.93,-486.3266,-3.73,-44,0,.00585,.699,9585.2953,1.5,25,0,.00566,4.073,8328.3391,1.5,25,0,.00566,.638,8329.0437,1.5,25,0,.00539,2.472,-1952.48,.6,7,0,.00509,2.88,-.7113,0,0,0,.00469,3.56,30457.2066,-1.3,12,0,.00387,.78,-.3523,0,0,0,.00378,1.84,22614.8418,.9,31,0,.00362,5.53,-695.8761,.6,7,0,.00317,2.8,16728.3705,1.2,28,0,.00303,6.07,157.7344,0,0,0,.003,2.53,33.757,-.3,-4,0,.00295,4.16,31571.8352,2.4,56,0,.00289,5.98,7211.7617,-.7,6,0,.00285,2.06,15540.4531,.9,31,0,.00283,2.65,2.6298,0,0,0,.00282,6.17,15545.0555,-2.2,-19,0,.00278,1.23,-39.8149,0,0,0,.00272,3.82,7216.3641,-3.7,-44,0,.0027,4.37,70.9877,-1.9,-22,0,.00256,5.81,13657.8484,-.6,6,0,.00244,5.64,-.2237,1.5,25,0,.0024,2.96,8311.7707,-2.2,-19,0,.00239,.87,-33.7814,.3,4,0,.00216,2.31,15.9995,-2.2,-19,0,.00186,3.46,5329.157,-2.1,-19,0,.00169,2.4,24357.772,4.6,75,0,.00161,5.8,8329.403,1.5,25,0,.00161,5.2,8327.98,1.5,25,0,.0016,4.26,23385.119,-2.9,-13,0,.00156,1.26,550.755,0,0,0,.00155,1.25,21500.213,-2.8,-13,0,.00152,.6,-16.921,-3.7,-44,0,.0015,2.71,-79.63,0,0,0,.0015,5.29,15.542,0,0,0,.00148,1.06,-2371.232,-3.7,-44,0,.00141,.77,8328.691,1.5,25,0,.00141,3.67,7143.075,-.3,0,0,.00138,5.45,25614.376,4.5,75,0,.00129,4.9,23871.446,.9,31,0,.00126,4.03,141.975,-3.8,-44,0,.00124,6.01,522.369,0,0,0,.0012,4.94,-10071.622,-5.2,-69,0,.00118,5.07,-15.419,-2.2,-19,0,.00107,3.49,23452.693,-3.4,-20,0,.00104,4.78,17495.234,-1.3,0,0,.00103,1.44,-18.049,-2.2,-19,0,.00102,5.63,15542.402,-.7,6,0,.00102,2.59,15543.107,-.7,6,0,.001,4.11,-6.559,-1.9,-22,0,97e-5,.08,15400.779,3.1,50,0,96e-5,5.84,31781.385,-1.9,5,0,94e-5,1.08,8328.363,0,0,0,94e-5,2.46,16799.358,-.7,6,0,94e-5,1.69,6376.211,2.2,32,0,93e-5,3.64,8329.02,3,50,0,93e-5,2.65,16655.082,4.6,75,0,9e-4,1.9,15056.428,-4.4,-38,0,89e-5,1.59,52.969,0,0,0,88e-5,2.02,-8257.704,-3.4,-47,0,88e-5,3.02,7213.711,-2.2,-19,0,87e-5,.5,7214.415,-2.2,-19,0,87e-5,.49,16659.684,1.5,25,0,82e-5,5.64,-4.931,1.5,25,0,79e-5,5.17,13171.522,-4.3,-38,0,76e-5,3.6,29828.905,-1.3,12,0,76e-5,4.08,24567.322,.3,24,0,76e-5,4.58,1884.906,-.1,0,0,73e-5,.33,31713.811,-1.4,12,0,73e-5,.93,32828.439,2.4,56,0,71e-5,5.91,38785.898,.2,37,0,69e-5,2.2,15613.742,-2.5,-16,0,66e-5,3.87,15.732,-2.5,-23,0,66e-5,.86,25823.926,.2,24,0,65e-5,2.52,8170.957,1.5,25,0,63e-5,.18,8322.132,-.3,0,0,6e-4,5.84,8326.062,1.5,25,0,6e-4,5.15,8331.321,1.5,25,0,6e-4,2.18,8486.426,1.5,25,0,58e-5,2.3,-1.731,-4,-44,0,58e-5,5.43,14357.138,-2,-16,0,57e-5,3.09,8294.91,2,29,0,57e-5,4.67,-8362.473,-1,-21,0,56e-5,4.15,16833.151,-1,0,0,54e-5,1.93,7056.329,-2,-19,0,54e-5,5.27,8315.574,-2,-19,0,52e-5,5.6,8311.418,-2,-19,0,52e-5,2.7,-77.552,0,0,0,51e-5,4.3,7230.984,2,25,0,5e-4,.4,-.508,0,0,0,49e-5,5.4,7211.433,-2,-19,0,49e-5,4.4,7216.693,-2,-19,0,49e-5,4.3,16864.631,0,24,0,49e-5,2.2,16869.234,-3,-26,0,47e-5,6.1,627.596,0,0,0,47e-5,5,12.619,1,7,0,45e-5,4.9,-8815.018,-5,-69,0,44e-5,1.6,62.133,-2,-19,0,42e-5,2.9,-13.118,-4,-44,0,42e-5,4.1,-119.445,0,0,0,41e-5,4.3,22756.817,-3,-13,0,41e-5,3.6,8288.877,2,25,0,4e-4,.5,6663.308,-2,-19,0,4e-4,1.1,8368.506,2,25,0,39e-5,4.1,6443.786,2,25,0,39e-5,3.1,16657.383,3,50,0,38e-5,.1,16657.031,3,50,0,38e-5,3,16657.735,3,50,0,38e-5,4.6,23942.433,-1,9,0,37e-5,4.3,15385.02,-1,6,0,37e-5,5,548.678,0,0,0,36e-5,1.8,7213.352,-2,-19,0,36e-5,1.7,7214.774,-2,-19,0,35e-5,1.1,7777.936,2,25,0,35e-5,1.6,-8.86,0,0,0,35e-5,4.4,23869.145,2,56,0,35e-5,2,6691.693,-2,-19,0,34e-5,1.3,-1185.616,-2,-22,0,34e-5,2.2,23873.747,-1,6,0,33e-5,2,-235.287,0,0,0,33e-5,3.1,17913.987,3,50,0,33e-5,1,8351.233,-2,-19,0],[.00487,4.6693,628.30196,-.027,0,-.01,.00228,2.6746,-2.3012,1.523,25,-.12,.0015,3.372,6585.76091,-2.16,-19,.1,.0012,5.728,14914.45233,-.64,6,0,.00108,3.969,7700.38947,1.55,25,-.1,8e-4,.742,8956.99338,1.5,25,-.1,254e-6,6.002,.3286,1.52,25,-.1,21e-5,.144,7842.3648,-2.21,-19,0,18e-5,2.5,16171.0562,-.7,6,0,13e-5,.44,8399.6791,-.4,3,0,126e-6,5.03,8326.3902,3,50,0,12e-5,5.77,14286.1504,-.6,6,0,118e-6,5.96,8330.9926,0,0,0,11e-5,1.8,23243.1438,.9,31,0,11e-5,3.42,5957.459,-2.1,-19,0,11e-5,4.63,1256.6039,-.1,0,0,99e-6,4.7,-.7113,0,0,0,7e-5,.04,16029.0809,3.1,50,0,7e-5,5.14,8328.3391,1.5,25,0,7e-5,5.85,8329.0437,1.5,25,0,6e-5,1.02,-1742.9305,-3.7,-44,0,6e-5,3.1,17285.6848,3,50,0,54e-6,5.69,-.352,0,0,0,43e-6,.52,15.542,0,0,0,41e-6,2.03,2.63,0,0,0,4e-5,.1,8470.667,-2.2,-19,0,4e-5,4.01,7072.088,1.6,25,0,36e-6,2.93,-8.86,-.3,0,0,3e-5,1.2,22128.515,-2.8,-13,0,3e-5,2.54,15542.754,-.7,6,0,27e-6,4.43,7211.762,-.7,6,0,26e-6,.51,15540.453,.9,31,0,26e-6,1.44,15545.055,-2.2,-19,0,25e-6,5.37,7216.364,-3.7,-44,0],[12e-6,1.041,-2.3012,1.52,25,-.1,17e-7,.31,-.711,0,0,0]],Xmt.QI_KB=[1640650.479938,15.218425,1642476.703182,15.21874996,1683430.515601,15.218750011,1752157.640664,15.218749978,1807675.003759,15.218620279,1883627.765182,15.218612292,1907369.1281,15.218449176,1936603.140413,15.218425,1939145.52418,15.218466998,1947180.7983,15.218524844,1964362.041824,15.218533526,1987372.340971,15.218513908,1999653.819126,15.218530782,2007445.469786,15.218535181,2021324.917146,15.218526248,2047257.232342,15.218519654,2070282.898213,15.218425,2073204.87285,15.218515221,2080144.500926,15.218530782,2086703.688963,15.218523776,2110033.182763,15.218425,2111190.300888,15.218425,2113731.271005,15.218515671,2120670.840263,15.218425,2123973.309063,15.218425,2125068.997336,15.218477932,2136026.312633,15.218472436,2156099.495538,15.218425,2159021.324663,15.218425,2162308.575254,15.218461742,2178485.706538,15.218425,2178759.662849,15.218445786,2185334.0208,15.218425,2187525.481425,15.218425,2188621.191481,15.218437494,2322147.76],Xmt.QB=Xmt.decode("FrcFs22AFsckF2tsDtFqEtF1posFdFgiFseFtmelpsEfhkF2anmelpFlF1ikrotcnEqEq2FfqmcDsrFor22FgFrcgDscFs22FgEeFtE2sfFs22sCoEsaF2tsD1FpeE2eFsssEciFsFnmelpFcFhkF2tcnEqEpFgkrotcnEqrEtFermcDsrE222FgBmcmr22DaEfnaF222sD1FpeForeF2tssEfiFpEoeFssD1iFstEqFppDgFstcnEqEpFg11FscnEqrAoAF2ClAEsDmDtCtBaDlAFbAEpAAAAAD2FgBiBqoBbnBaBoAAAAAAAEgDqAdBqAFrBaBoACdAAf1AACgAAAeBbCamDgEifAE2AABa1C1BgFdiAAACoCeE1ADiEifDaAEqAAFe1AcFbcAAAAAF1iFaAAACpACmFmAAAAAAAACrDaAAADG0"),Xmt.SHUO_KB=[1457698.231017,29.53067166,1546082.512234,29.53085106,1640640.7353,29.5306,1642472.151543,29.53085439,1683430.5093,29.53086148,1752148.041079,29.53085097,1807665.420323,29.53059851,1883618.1141,29.5306,1907360.7047,29.5306,1936596.2249,29.5306,1939135.6753,29.5306,1947168],Xmt.SB=Xmt.decode("EqoFscDcrFpmEsF2DfFideFelFpFfFfFiaipqti1ksttikptikqckstekqttgkqttgkqteksttikptikq2fjstgjqttjkqttgkqtekstfkptikq2tijstgjiFkirFsAeACoFsiDaDiADc1AFbBfgdfikijFifegF1FhaikgFag1E2btaieeibggiffdeigFfqDfaiBkF1kEaikhkigeidhhdiegcFfakF1ggkidbiaedksaFffckekidhhdhdikcikiakicjF1deedFhFccgicdekgiFbiaikcfi1kbFibefgEgFdcFkFeFkdcfkF1kfkcickEiFkDacFiEfbiaejcFfffkhkdgkaiei1ehigikhdFikfckF1dhhdikcfgjikhfjicjicgiehdikcikggcifgiejF1jkieFhegikggcikFegiegkfjebhigikggcikdgkaFkijcfkcikfkcifikiggkaeeigefkcdfcfkhkdgkegieidhijcFfakhfgeidieidiegikhfkfckfcjbdehdikggikgkfkicjicjF1dbidikFiggcifgiejkiegkigcdiegfggcikdbgfgefjF1kfegikggcikdgFkeeijcfkcikfkekcikdgkabhkFikaffcfkhkdgkegbiaekfkiakicjhfgqdq2fkiakgkfkhfkfcjiekgFebicggbedF1jikejbbbiakgbgkacgiejkijjgigfiakggfggcibFifjefjF1kfekdgjcibFeFkijcfkfhkfkeaieigekgbhkfikidfcjeaibgekgdkiffiffkiakF1jhbakgdki1dj1ikfkicjicjieeFkgdkicggkighdF1jfgkgfgbdkicggfggkidFkiekgijkeigfiskiggfaidheigF1jekijcikickiggkidhhdbgcfkFikikhkigeidieFikggikhkffaffijhidhhakgdkhkijF1kiakF1kfheakgdkifiggkigicjiejkieedikgdfcggkigieeiejfgkgkigbgikicggkiaideeijkefjeijikhkiggkiaidheigcikaikffikijgkiahi1hhdikgjfifaakekighie1hiaikggikhkffakicjhiahaikggikhkijF1kfejfeFhidikggiffiggkigicjiekgieeigikggiffiggkidheigkgfjkeigiegikifiggkidhedeijcfkFikikhkiggkidhh1ehigcikaffkhkiggkidhh1hhigikekfiFkFikcidhh1hitcikggikhkfkicjicghiediaikggikhkijbjfejfeFhaikggifikiggkigiejkikgkgieeigikggiffiggkigieeigekijcijikggifikiggkideedeijkefkfckikhkiggkidhh1ehijcikaffkhkiggkidhh1hhigikhkikFikfckcidhh1hiaikgjikhfjicjicgiehdikcikggifikigiejfejkieFhegikggifikiggfghigkfjeijkhigikggifikiggkigieeijcijcikfksikifikiggkidehdeijcfdckikhkiggkhghh1ehijikifffffkhsFngErD1pAfBoDd1BlEtFqA2AqoEpDqElAEsEeB2BmADlDkqBtC1FnEpDqnEmFsFsAFnllBbFmDsDiCtDmAB2BmtCgpEplCpAEiBiEoFqFtEqsDcCnFtADnFlEgdkEgmEtEsCtDmADqFtAFrAtEcCqAE1BoFqC1F1DrFtBmFtAC2ACnFaoCgADcADcCcFfoFtDlAFgmFqBq2bpEoAEmkqnEeCtAE1bAEqgDfFfCrgEcBrACfAAABqAAB1AAClEnFeCtCgAADqDoBmtAAACbFiAAADsEtBqAB2FsDqpFqEmFsCeDtFlCeDtoEpClEqAAFrAFoCgFmFsFqEnAEcCqFeCtFtEnAEeFtAAEkFnErAABbFkADnAAeCtFeAfBoAEpFtAABtFqAApDcCGJ");var Jmt=Xmt,Zmt=function(){function e(t){rx(this,e),this._year=t,this._months=[],this._jieQiJulianDays=[],this.compute()}return ox(e,[{key:"compute",value:function(){var t,n,r=[],i=[],o=[],a=[],l=this._year,u=Math.floor(365.2422*(l-2e3)+180),c=365.2422*Math.floor((u-355+183)/365.2422)+355;for(Jmt.calcQi(c)>u&&(c-=365.2422),t=0;t<26;t++)r.push(Jmt.calcQi(c+15.2184*t));for(t=0,n=qmt.JIE_QI_IN_USE.length;t<n;t++)u=0===t?Jmt.qiAccurate2(r[0]-15.2184):t<=26?Jmt.qiAccurate2(r[t-1]):Jmt.qiAccurate2(r[25]+15.2184*(t-26)),this._jieQiJulianDays.push(u+$mt.J2000);for((c=Jmt.calcShuo(r[0]))>r[0]&&(c-=29.53),t=0;t<16;t++)i.push(Jmt.calcShuo(c+29.5306*t));for(t=0;t<15;t++)o.push(Math.floor(i[t+1]-i[t])),a.push(t);var s=l-1,d=16;if(e._LEAP_11.indexOf(l)>-1)d=13;else if(e._LEAP_12.indexOf(l)>-1)d=14;else if(i[13]<=r[24]){for(t=1;i[t+1]>r[2*t]&&t<13;)t++;d=t}for(n=d;n<15;n++)a[n]-=1;var f=[11,12,1,2,3,4,5,6,7,8,9,10],h=-1,p=-1,v=s;for(t=0;t<15;t++){var g=i[t]+$mt.J2000,m=a[t],y=f[m%12];1724360<=g&&g<1729794||1807724<=g&&g<1808699?y=f[(m+1)%12]:1729794!=g&&1808699!=g||(y=12),-1==h&&(h=y,p=y),y<h&&(v+=1,p=1),h=y,t==d?y=-y:1729794!=g&&1808699!=g||(y=-11),this._months.push(new Kmt(v,y,o[t],i[t]+$mt.J2000,p)),p++}}},{key:"getYear",value:function(){return this._year}},{key:"getJieQiJulianDays",value:function(){return this._jieQiJulianDays}},{key:"getDayCount",value:function(){for(var e=0,t=0,n=this._months.length;t<n;t++){var r=this._months[t];r.getYear()==this._year&&(e+=r.getDayCount())}return e}},{key:"getMonths",value:function(){return this._months}},{key:"getMonth",value:function(e){for(var t=0,n=this._months.length;t<n;t++){var r=this._months[t];if(r.getYear()==this._year&&r.getMonth()==e)return r}return null}},{key:"toString",value:function(){return"".concat(this.getYear())}}],[{key:"fromYear",value:function(t){var n;return e._CACHE_YEAR&&e._CACHE_YEAR.getYear()==t?n=e._CACHE_YEAR:(n=new e(t),e._CACHE_YEAR=n),n}}])}();Zmt.YUAN=["下","上","中"],Zmt.YUN=["七","八","九","一","二","三","四","五","六"],Zmt._LEAP_11=[75,94,170,265,322,398,469,553,583,610,678,735,754,773,849,887,936,1050,1069,1126,1145,1164,1183,1259,1278,1308,1373,1403,1441,1460,1498,1555,1593,1612,1631,1642,2033,2128,2147,2242,2614,2728,2910,3062,3244,3339,3616,3711,3730,3825,4007,4159,4197,4322,4341,4379,4417,4531,4599,4694,4713,4789,4808,4971,5085,5104,5161,5180,5199,5294,5305,5476,5677,5696,5772,5791,5848,5886,6049,6068,6144,6163,6258,6402,6440,6497,6516,6630,6641,6660,6679,6736,6774,6850,6869,6899,6918,6994,7013,7032,7051,7070,7089,7108,7127,7146,7222,7271,7290,7309,7366,7385,7404,7442,7461,7480,7491,7499,7594,7624,7643,7662,7681,7719,7738,7814,7863,7882,7901,7939,7958,7977,7996,8034,8053,8072,8091,8121,8159,8186,8216,8235,8254,8273,8311,8330,8341,8349,8368,8444,8463,8474,8493,8531,8569,8588,8626,8664,8683,8694,8702,8713,8721,8751,8789,8808,8816,8827,8846,8884,8903,8922,8941,8971,9036,9066,9085,9104,9123,9142,9161,9180,9199,9218,9256,9294,9313,9324,9343,9362,9381,9419,9438,9476,9514,9533,9544,9552,9563,9571,9582,9601,9639,9658,9666,9677,9696,9734,9753,9772,9791,9802,9821,9886,9897,9916,9935,9954,9973,9992],Zmt._LEAP_12=[37,56,113,132,151,189,208,227,246,284,303,341,360,379,417,436,458,477,496,515,534,572,591,629,648,667,697,716,792,811,830,868,906,925,944,963,982,1001,1020,1039,1058,1088,1153,1202,1221,1240,1297,1335,1392,1411,1422,1430,1517,1525,1536,1574,3358,3472,3806,3988,4751,4941,5066,5123,5275,5343,5438,5457,5495,5533,5552,5715,5810,5829,5905,5924,6421,6535,6793,6812,6888,6907,7002,7184,7260,7279,7374,7556,7746,7757,7776,7833,7852,7871,7966,8015,8110,8129,8148,8224,8243,8338,8406,8425,8482,8501,8520,8558,8596,8607,8615,8645,8740,8778,8835,8865,8930,8960,8979,8998,9017,9055,9074,9093,9112,9150,9188,9237,9275,9332,9351,9370,9408,9427,9446,9457,9465,9495,9560,9590,9628,9647,9685,9715,9742,9780,9810,9818,9829,9848,9867,9905,9924,9943,9962,1e4],Zmt._CACHE_YEAR=null;var Qmt=Zmt,eyt=function(){function e(){rx(this,e)}return ox(e,null,[{key:"getMessage",value:function(t){return t?(t.startsWith("{")&&(t=t.replace(/(\{|\})/gi,"")),e._MESSAGES[t]):t}}])}();eyt._MESSAGES={"n.zero":"〇","n.one":"一","n.two":"二","n.three":"三","n.four":"四","n.five":"五","n.six":"六","n.seven":"七","n.eight":"八","n.nine":"九","n.ten":"十","n.eleven":"十一","n.twelve":"十二","d.one":"初一","d.two":"初二","d.three":"初三","d.four":"初四","d.five":"初五","d.six":"初六","d.seven":"初七","d.eight":"初八","d.nine":"初九","d.ten":"初十","d.eleven":"十一","d.twelve":"十二","d.thirteen":"十三","d.fourteen":"十四","d.fifteen":"十五","d.sixteen":"十六","d.seventeen":"十七","d.eighteen":"十八","d.nighteen":"十九","d.twenty":"二十","d.twentyOne":"廿一","d.twentyTwo":"廿二","d.twentyThree":"廿三","d.twentyFour":"廿四","d.twentyFive":"廿五","d.twentySix":"廿六","d.twentySeven":"廿七","d.twentyEight":"廿八","d.twentyNine":"廿九","d.thirty":"三十","m.one":"正","m.two":"二","m.three":"三","m.four":"四","m.five":"五","m.six":"六","m.seven":"七","m.eight":"八","m.nine":"九","m.ten":"十","m.eleven":"冬","m.twelve":"腊","w.sun":"日","w.mon":"一","w.tues":"二","w.wed":"三","w.thur":"四","w.fri":"五","w.sat":"六","jq.dongZhi":"冬至","jq.xiaoHan":"小寒","jq.daHan":"大寒","jq.liChun":"立春","jq.yuShui":"雨水","jq.jingZhe":"惊蛰","jq.chunFen":"春分","jq.qingMing":"清明","jq.guYu":"谷雨","jq.liXia":"立夏","jq.xiaoMan":"小满","jq.mangZhong":"芒种","jq.xiaZhi":"夏至","jq.xiaoShu":"小暑","jq.daShu":"大暑","jq.liQiu":"立秋","jq.chuShu":"处暑","jq.baiLu":"白露","jq.qiuFen":"秋分","jq.hanLu":"寒露","jq.shuangJiang":"霜降","jq.liDong":"立冬","jq.xiaoXue":"小雪","jq.daXue":"大雪","jr.chuXi":"除夕","jr.chunJie":"春节","jr.yuanXiao":"元宵节","jr.longTou":"龙头节","jr.duanWu":"端午节","jr.qiXi":"七夕节","jr.zhongQiu":"中秋节","jr.chongYang":"重阳节","jr.laBa":"腊八节","jr.yuanDan":"元旦节","jr.qingRen":"情人节","jr.fuNv":"妇女节","jr.zhiShu":"植树节","jr.xiaoFei":"消费者权益日","jr.wuYi":"劳动节","jr.qingNian":"青年节","jr.erTong":"儿童节","jr.yuRen":"愚人节","jr.jianDang":"建党节","jr.jianJun":"建军节","jr.jiaoShi":"教师节","jr.guoQing":"国庆节","jr.wanShengYe":"万圣节前夜","jr.wanSheng":"万圣节","jr.pingAn":"平安夜","jr.shengDan":"圣诞节"};var tyt=eyt,nyt=function(){function e(t,n,r,i,o){rx(this,e);var a=e._compute(o);this._year=t,this._month=n,this._day=r,this._jieQi=a.jieQi,this._solar=i}return ox(e,[{key:"getDayInChinese",value:function(){return tyt.getMessage(qmt.DAY[this._day])}},{key:"getYear",value:function(){return this._year}},{key:"getJieQi",value:function(){var t="";for(var n in this._jieQi){var r=this._jieQi[n];if(r.getYear()==this._solar.getYear()&&r.getMonth()==this._solar.getMonth()&&r.getDay()==this._solar.getDay()){t=n;break}}return e._convertJieQi(t)}},{key:"getFestival",value:function(){if(12==Math.abs(this._month)&&this._day>=29&&this._year!=this._next(1).getYear())return tyt.getMessage("jr.chuXi");var e=qmt.FESTIVAL[this._month+"-"+this._day];return tyt.getMessage(e)}},{key:"_next",value:function(e){return this._solar.next(e).getLunar()}}],[{key:"fromSolar",value:function(t){for(var n=0,r=0,i=0,o=Qmt.fromYear(t.getYear()),a=o.getMonths(),l=0,u=a.length;l<u;l++){var c=a[l],s=t.subtract($mt.fromJulianDay(c.getFirstJulianDay()));if(s<c.getDayCount()){n=c.getYear(),r=c.getMonth(),i=s+1;break}}return new e(n,r,i,t,o)}},{key:"fromDate",value:function(t){return e.fromSolar($mt.fromDate(t))}},{key:"_computeJieQi",value:function(e,t){for(var n=t.getJieQiJulianDays(),r=0,i=qmt.JIE_QI_IN_USE.length;r<i;r++){var o=qmt.JIE_QI_IN_USE[r];e.jieQiList.push(o),e.jieQi[o]=$mt.fromJulianDay(n[r])}}},{key:"_compute",value:function(t){var n={jieQi:{},jieQiList:[]};return e._computeJieQi(n,t),n}},{key:"_convertJieQi",value:function(e){return"DONG_ZHI"===e?tyt.getMessage("jq.dongZhi"):"DA_HAN"===e?tyt.getMessage("jq.daHan"):"XIAO_HAN"===e?tyt.getMessage("jq.xiaoHan"):"LI_CHUN"===e?tyt.getMessage("jq.liChun"):"DA_XUE"===e?tyt.getMessage("jq.daXue"):"YU_SHUI"===e?tyt.getMessage("jq.yuShui"):"JING_ZHE"===e?tyt.getMessage("jq.jingZhe"):tyt.getMessage(e)}}])}();function ryt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iyt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iyt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function iyt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oyt=Object.defineProperty,ayt=Object.getOwnPropertyDescriptor,lyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?ayt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oyt(t,n,o),o};var uyt=function(){return ox((function e(){rx(this,e),this.cellScheduleHeight=26}),[{key:"defaultMaxScheduleNum",get:function(){return 3}},{key:"defaultCellMinHeight",get:function(){return 58+this.cellScheduleHeight*this.defaultMaxScheduleNum}},{key:"startWeekDay",get:function(){var e;return(null==(e=this._viewConfig)?void 0:e.get("sunday_at_first"))?0:1}},{key:"isAutoScroll",value:function(){return!this._configurationService.getValue("view.useWindowScroll")}},{key:"getCurrentDate",value:function(e){this._viewConfig=e;var t=null==e?void 0:e.get("active_date");return t?a()(t,"YYYY-MM-DD"):Ek()}},{key:"setCurrentDate",value:function(e){this._commandService.execCommand("setActiveDate",{date:e})}},{key:"getCalendarDate",value:function(e){var t=Ttt,n=e.daysInMonth(),r=e.day(),i=Math.abs((r<this.startWeekDay?t:r)-this.startWeekDay),o=e.subtract(i,jtt),a=i+n,l=a%t;0!==l&&(a+=t-l%t);var u=o.add(a,jtt);return{startDate:o,endDate:u,totalDayCount:a}}},{key:"getDateRows",value:function(e){for(var t=e.startDate,n=e.totalDayCount,r=Ttt,i=[],o=[],a=0;a<=n;a++)0!==a&&a%r==0&&(i.push(Q_(o)),o=[]),o.push(t.add(a,jtt));return i}},{key:"getDateLunarInfo",value:function(e){var t,n=nyt.fromDate(e.toDate()),r=Gmt.getHoliday(e.year(),e.month()+1,e.date()),i=(null==r?void 0:r.getTarget())===(null==r?void 0:r.getDay()),o=null==r?void 0:r.getName();return i&&(t=o),t||(t=n.getFestival()),t||(t=n.getJieQi()),t||(t=n.getDayInChinese()),{isHolidayTarget:i,displayHoliday:o,isWork:(null==r?void 0:r.isWork())||!1,lunarText:t}}},{key:"getSchedules",value:function(e,t,n){var r,i=(null==t?void 0:t.get("start_date_field_uuid"))||"",o=(null==t?void 0:t.get("end_date_field_uuid"))||i,l=this._readService.getViewFields(),u=OC(e,(function(e){return e.get("record_uuid")})),c=(null==t?void 0:t.get("date_title_field_uuid"))||l.get(0).get("uuid"),s=this._readService.getFieldKeyValues(i,u),d=this._readService.getFieldKeyValues(o,u),f=this._readService.getFieldFormatValues(c,u).reduce((function(e,t){return e[t.recordId]=t.formatValue||"",e}),{}),h={},p=ryt(s);try{for(p.s();!(r=p.n()).done;){var v=r.value;if(v.keyValue){var g=a()(v.keyValue).startOf(jtt);(g.isBetween(n.startDate,n.endDate)||g.isSameOrBefore(n.startDate))&&(h[v.recordId]={start:g})}}}catch(e){p.e(e)}finally{p.f()}var m,y=ryt(d);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(b.keyValue){var w=a()(b.keyValue).endOf(jtt);if(w.isBetween(n.startDate,n.endDate)||w.isSameOrAfter(n.endDate)){var _=h[b.recordId];_?_.end=w:h[b.recordId]={end:w}}}}}catch(e){y.e(e)}finally{y.f()}return u.filter((function(e){return!!h[e]})).map((function(e){var t=h[e];return new Cmt({id:e,title:f[e]||"",start:t.start||t.end.startOf(jtt),end:t.end||t.start.endOf(jtt)})})).filter((function(e){return e.start.isSameOrBefore(e.end)})).sort((function(e,t){return Ok(e.start)-Ok(t.start)}))}},{key:"getDateScheduleMap",value:function(e,t){for(var n={},r=function(){for(var r={},o=function(){var o=e[i][a],l=Ok(o),u=t.filter((function(e){return e.include(o)}));if(0===a&&0!==i){var c=n[Ok(o.subtract(1,jtt))];u=u.sort((function(e,t){var n,r;return(null!==(n=c[e.id])&&void 0!==n?n:99)-(null!==(r=c[t.id])&&void 0!==r?r:99)}))}n[l]={};var s=[];u.filter((function(e){var t=r[e.id];return!t||(n[l][e.id]=t,s.push(t),!1)})).forEach((function(e){var t=function(e){for(var t=0,n=0;n<e.length&&e.includes(t);n++)t+=1;return t}(s);r[e.id]=t,n[l][e.id]=t,s.push(t)}))},a=0;a<e[i].length;a++)o()},i=0;i<e.length;i++)r();return n}},{key:"sortScheduleList",value:function(e,t,n){var r=Ok(e);return t.filter((function(t){return t.include(e)})).sort((function(e,t){var i=n[r];return(i[e.id]||0)-(i[t.id]||0)}))}},{key:"getNextColorToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/(.+-)(\d+)/);if(n){var r=n[1],i=n[2],o=parseInt(i)+t;return r+(o>9?9:o)}return e}},{key:"getScheduleColor",value:function(e,t,n,r){var i,o,a,l,u,c,s=Ntt[0][0];if(n&&t===FO.CUSTOM)s=n;else if(n&&t===FO.FOLLOW_FIELD){var d=this._readService.getCell(n,e.id),f=r[null==d?void 0:d.value];f&&(s=f)}var h=null==(i=this._labelColor)?void 0:i.getLabelColorTokenByBackColorId(s),p=this.getNextColorToken(h,1),v=this.getNextColorToken(h,2),g=this.getNextColorToken(h,5),m=null==(o=this._labelColor)?void 0:o.getRenderColor(h),y=null==(a=this._labelColor)?void 0:a.getRenderColor(p);return{normal:m,highlight:null==(l=this._labelColor)?void 0:l.getRenderColor(v),lite:y,heavy:null==(u=this._labelColor)?void 0:u.getRenderColor(g),text:null==(c=this._labelColor)?void 0:c.getRenderTextColor(s)}}},{key:"getScheduleLineStyle",value:function(e){var t=e.schedule,n=e.colIndex,r=e.date,i=e.isActive,o=e.isDelPossible,a=e.isInHighlight,l=e.isSelected,u=e.scheduleColorType,c=e.schedlueColorFieldIdOrColorId,s=e.colorMap,d=this.getScheduleColor(t,u,c,s),f=o?{normal:"var(--yq-red-100)",lite:"var(--yq-red-200)",heavy:"var(--yq-red-600)",text:"var(--yq-red-900)"}:a?{normal:d.highlight,lite:d.highlight,heavy:d.heavy,text:d.text}:d,h={color:f.text,borderColor:o||a&&l?f.heavy:"transparent",backgroundColor:i?f.lite:f.normal},p={background:f.heavy},v=t.start.isSame(t.end),g=v;if(!v){var m=t.end.diff(r,jtt)+1,y=Math.min(Ttt-n,m),b=y+(12*y-7),w=t.isStartDate(r),_=r.add(y-1,jtt);t.isEndDate(_)?(b-=w?6:1,g=!0):t.isStartDate(r)||(b+=5),h.width="calc(".concat(100*y,"% + ").concat(b,"px)")}return{lineStyle:h,labelStyle:p,isShowControl:g}}},{key:"createSchedule",value:(e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._commandService.execCommand("createSchedule",{date:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"updateSchedule",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,i=e.targetRecordId,o=e.direction,a=void 0===o?jO.forward:o;return this._commandService.execCommand("updateSchedule",{recordId:t,startDate:n,endDate:r,targetRecordId:i,direction:a})}}]);var e}();lyt([Yf(XA)],uyt.prototype,"_readService",2),lyt([Yf(Lj)],uyt.prototype,"_commandService",2),lyt([Yf(RC)],uyt.prototype,"_configurationService",2),lyt([Yf(mN)],uyt.prototype,"_labelColor",2),uyt=lyt([Gf({token:tmt})],uyt);var cyt=Object.defineProperty,syt=Object.getOwnPropertyDescriptor,dyt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new Vmt({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return ch().register(this).register(uyt).register(Mmt)}}])}();function fyt(e,t,n){return t=DC(t),jC(e,hyt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function hyt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hyt=function(){return!!e})()}dyt.pluginName="render-viewer-calendar",dyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?syt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&cyt(t,n,o),o}([Gf({contrib:[Sze,Mze]})],dyt);var pyt=Object.defineProperty,vyt=Object.getOwnPropertyDescriptor,gyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?vyt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&pyt(t,n,o),o},myt=function(e){function t(){var e;return rx(this,t),(e=fyt(this,t,arguments)).gridGap=20,e._onRefreshLayout=e._register(new dS),e.onRefreshLayout=e._onRefreshLayout.event,e}return NC(t,e),ox(t,[{key:"_getViewRect",value:function(){return this._renderContext.getRenderBoundingClientRect()}},{key:"_getColCount",value:function(e){var t=5;return e<1440&&(t=Math.max(5-Math.ceil((1440-e)/300),2)),t}},{key:"_getRowCount",value:function(e,t){return Math.ceil(e/t)}},{key:"_getCardWidth",value:function(e,t){return Math.floor(Math.floor(e-20*(t+1))/t)}},{key:"getCoverHeight",value:function(e){return Math.round(e/1.6)}},{key:"_getFieldNameHeight",value:function(){return 23}},{key:"_getCardHeight",value:function(e,t,n){var r,i=40;n.get("cover_field_uuid")&&(i+=this.getCoverHeight(e));for(var o=0;o<t.length;o++){var a=t.get(o);if(!a.get("hidden")){n.get("show_field_name")&&(i+=this._getFieldNameHeight());var l=null==(r=a.get("field"))?void 0:r.get("type");l===xO.IMAGE?i+=40:l===xO.TEXT?i+=12+(0===o?28:22):i+=40,o===t.length-1&&(i-=12)}}return i}},{key:"getLayout",value:function(e,t,n){var r=this._getViewRect(),i=this._getColCount(r.width),o=this._getRowCount(e.length,i),a=this._getCardWidth(r.width,i);return{viewRect:r,width:a,height:this._getCardHeight(a,t,n),colCount:i,rowCount:o}}},{key:"refresh",value:function(){this._onRefreshLayout.emit()}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function yyt(e,t,n){return t=DC(t),jC(e,byt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function byt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(byt=function(){return!!e})()}gyt([Yf(Vze)],myt.prototype,"_renderContext",2),gyt([Df()],myt.prototype,"destroy",1),myt=gyt([Gf()],myt);var wyt=Object.defineProperty,_yt=Object.getOwnPropertyDescriptor,xyt=function(e){function t(){var e;return rx(this,t),(e=yyt(this,t,arguments))._virtuosoRef=null,e._scroller=null,e._onScroll=e._register(new dS),e.onScroll=e._onScroll.event,e.emitScrollEvent=function(t){e._onScroll.emit(t)},e}return NC(t,e),ox(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"destroy",value:function(){this._virtuosoRef=null,this._scroller=null}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"setScroller",value:function(e){this._scroller=e}},{key:"scrollToIndex",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollToIndex(e)}},{key:"scrollTo",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollTo(e)}}])}(HC);xyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?_yt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wyt(t,n,o),o}([Gf()],xyt);var kyt=function(e){var t=e.cell,n=e.field,r=e.viewConfig,i=e.index,o=e.width,a=e.height,l=SWe(iHe),c=l.getFieldComponent(null==n?void 0:n.get("type")),s=function(e,t){var n={defaultValue:t.value,readonly:!0},r=e.get("type");return YO.isSelectLike(r)?n.field=e:YO.isImage(r)?n.size="small":YO.isSystemDate(r)&&(n.format="YYYY-MM-DD HH:mm:ss"),n}(n,t),d=null==l?void 0:l.getFieldIcon(n.get("type")),f=null;return 0===i&&null==(null==t?void 0:t.value)&&(f=u.a.createElement("div",{key:null==t?void 0:t.fieldId,className:F()("lakex-viewer-card-field-content first empty")},wx("未命名记录"))),u.a.createElement("div",{className:"lakex-viewer-card-cell-field","data-field-uuid":t.fieldId},r.get("show_field_name")&&u.a.createElement("div",{className:"lakex-viewer-card-field-name"},d&&u.a.createElement(d,{size:16}),u.a.createElement("span",{className:"lakex-viewer-card-field-name-content"},null==n?void 0:n.get("name"))),f,c&&!f&&u.a.createElement("div",{className:F()("lakex-viewer-card-field-content","".concat(n.get("type")),{first:0===i})},u.a.createElement(c,{cell:t,field:n,fieldProps:s,readonly:!0,boxRect:o&&a?{width:o,height:a}:null})))},Cyt=function(e){var t=e.height,n=e.onShowRecord;return u.a.createElement("div",{className:"lakex-viewer-card-record-item-cover empty",style:{height:t},onClick:n},u.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/94c60ed0-e53a-4ad1-9ffe-ec7fd1266b46.svg",draggable:"false"}))},Syt=function(e){var t,n=e.viewRecord,r=e.width,i=e.onShowRecord,o=function(e){var t=e.viewRecord,n=e.width,r=SWe(XA),i=SWe(YHe),o=SWe(NKe),a=SWe(myt),u=null==r?void 0:r.getViewConfig(),c=null==r?void 0:r.getCell((null==u?void 0:u.get("cover_field_uuid"))||"",t.get("record_uuid")),s=Object(l.useRef)(null),d=jF(Object(l.useState)(0),2);return{carouselRef:s,cell:c,opener:i,imageService:o,viewConfig:u,getCoverHeight:function(){return null==a?void 0:a.getCoverHeight(n)},index:d[0],setIndex:d[1]}}({viewRecord:n,width:r,onShowRecord:i}),a=o.carouselRef,c=o.getCoverHeight,s=o.cell,d=o.viewConfig,f=o.opener,h=o.imageService,p=o.index,v=o.setIndex;if(!(null==d?void 0:d.get("cover_field_uuid")))return null;if(!(null==s?void 0:s.value)||!(null==(t=s.value[0])?void 0:t.src))return u.a.createElement(Cyt,{height:c(),onShowRecord:i});var g=s.value||[],m=Object(l.useMemo)((function(){return g.map((function(e){return{src:h.getRenderUrl(e.src,e.width,e.height),width:e.width,height:e.height}}))||[]}),[g]);return u.a.createElement(I.a,{ref:a,className:"lakex-viewer-card-record-item-cover",arrows:!0,infinite:!1,prevArrow:u.a.createElement(X$e,{type:"ArrowLeft",size:16,onClick:function(){var e;null==(e=null==a?void 0:a.current)||e.prev()}}),nextArrow:u.a.createElement(X$e,{type:"ArrowRight",size:16,onClick:function(){var e;null==(e=null==a?void 0:a.current)||e.next()}}),appendDots:function(){return u.a.createElement("div",null,p+1," / ",m.length)},beforeChange:function(e,t){v(t)}},g.map((function(e,t){var n={height:c()},r=h.getThumbnailUrl(e.src,e.width,e.height,390);return n.backgroundImage="url(".concat(r,")"),n.backgroundRepeat="no-repeat",n.backgroundPosition="center center",d.get("cover_display")===DO.Clip?n.backgroundSize="cover":n.backgroundSize="contain",u.a.createElement("div",{key:e.src},u.a.createElement("div",{className:"lakex-viewer-card-record-item-image",style:n,onClick:function(n){n.preventDefault(),n.stopPropagation(),null==f||f.open("image",e.src,{list:m,index:t})}}))})))};function Oyt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eyt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oyt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oyt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Iyt=function(e){var t=e.fieldMap,n=e.cell,r=e.index,i=e.viewConfig,o=e.width,a=e.height,l=t.get(n.fieldId);return l?React.createElement(kyt,{cell:n,field:l,viewConfig:i,index:r,width:o,height:a}):null},Pyt=function(e){var t=e.className,n=e.viewRecord,r=e.width,i=void 0===r?200:r,o=e.height,a=void 0===o?300:o,u=e.viewConfig,c=e.fieldMap,s=e.disableDrag,d=void 0!==s&&s,f=function(e){var t=e.viewRecord,n=SWe(Eat,{optional:!0}),r=SWe(yot,{optional:!0}),i=SWe(Xze),o=SWe(XA),a=function(){var e,n,i;return!((null==(i=null==(n=null==(e=null==r?void 0:r.getSelection())?void 0:e.getRangeAt)?void 0:n.call(e,0))?void 0:i.recordId)!==(null==t?void 0:t.get("record_uuid")))},u=jF(Object(l.useState)(a()),2),c=u[0],s=u[1];P$e((function(){var e=null==r?void 0:r.onChange((function(e){e.selection,s(a())}));return function(){null==e||e.destroy()}}),[]);var d=zft({recordId:null==t?void 0:t.get("record_uuid")}),f=Object(l.useCallback)((function(){var e=null==t?void 0:t.get("record_uuid");e&&(null==i||i.emitClickRecord({recordId:e}))}),[t,i]),h=Object(l.useCallback)((function(e){e.preventDefault(),null==n||n.showContextMenu({e:e,from:Oat.CARD_RECORD,recordId:null==t?void 0:t.get("record_uuid")})}),[t,n]);return{cells:o.getViewRecordCells(t.get("record_uuid")),isSelected:c,isInHighlight:d,onShowRecord:f,onShowContextMenu:h}}({viewRecord:n}),h=f.cells,p=f.isSelected,v=f.isInHighlight,g=f.onShowRecord,m=f.onShowContextMenu,y=F()("lakex-viewer-card-record-item",t,{selected:p,"in-highlight":v});if(d)return React.createElement("div",{className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:{width:i,height:a}},React.createElement(Syt,{viewRecord:n,width:i,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},PC(h,(function(e,t){return React.createElement(Iyt,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:u,fieldMap:c,width:i,height:a})}))));var b=vK({id:n.get("record_uuid"),disabled:d}),w=b.attributes,_=b.listeners,x=b.setNodeRef,k=b.transform,C=b.transition,S=b.isDragging,O={transform:M$e.Transform.toString(k),transition:C,zIndex:S?"100":"auto",opacity:S?0:1};return React.createElement("div",Eyt(Eyt({ref:x,className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:Eyt(Eyt({},O),{},{width:i,height:a})},_),w),React.createElement(Syt,{viewRecord:n,width:i,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},PC(h,(function(e,t){return React.createElement(Iyt,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:u,fieldMap:c,width:i,height:a})}))))},Myt=["style","context"],Ryt=["context"];function Ayt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jyt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ayt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ayt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dyt=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,i=EWe(e,Myt),o=r.colCount,a=r.cardWidth,l=r.gridGap;return u.a.createElement("div",jyt(jyt({ref:t},i),{},{style:jyt(jyt({},n),{},{display:"grid",gridTemplateColumns:"repeat(".concat(o,", ").concat(a,"px)"),columnGap:"".concat(l,"px"),padding:"0 ".concat(l,"px")})}))})),Tyt=u.a.forwardRef((function(e,t){e.context;var n=EWe(e,Ryt);return u.a.createElement("div",jyt(jyt({},n),{},{style:{}}))})),Fyt=u.a.forwardRef((function(e,t){var n,r=e.fields,i=e.viewRecords,o=e.viewFields,a=e.viewConfig,s=SWe(xyt),d=!Gat(Qj.RECORD).canUpdate(),f=function(e){var t=e.viewRecords,n=e.viewFields,r=e.viewConfig,i=SWe(myt),o=SWe(Xze),a=SWe(RC),u=jF(Object(l.useState)(200),2),c=u[0],s=u[1],d=jF(Object(l.useState)(300),2),f=d[0],h=d[1],p=jF(Object(l.useState)(0),2),v=p[0],g=p[1],m=jF(Object(l.useState)(),2),y=m[0],b=m[1],w=jF(Object(l.useState)((null==a?void 0:a.getValue("view.useWindowScroll"))||!1),2),_=w[0],x=w[1],k=null==a?void 0:a.getValue("view.customScrollParent"),C=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body,S=jF(Object(l.useState)((null==a?void 0:a.getValue("view.disableVirtualScroll"))||!1),2),O=S[0],E=S[1],I=Object(l.useCallback)((function(){var e=null==i?void 0:i.getLayout(t,n,r);b(null==e?void 0:e.viewRect),s((null==e?void 0:e.width)||200),h((null==e?void 0:e.height)||300),g((null==e?void 0:e.colCount)||0)}),[t,n,r]);return P$e((function(){var e=null==a?void 0:a.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?(I(),x(n)):"view.disableVirtualScroll"===t&&E(n)})),t=null==o?void 0:o.onViewWidthChange((function(){setTimeout((function(){I()}),100)}));return function(){null==e||e.destroy(),null==t||t.destroy()}}),[I]),P$e((function(){var e=rc((function(){_||I()}),300);window.addEventListener("resize",e),window.addEventListener("lakex_table_view_resize",e);var t=null==i?void 0:i.onRefreshLayout((function(){I()}));return function(){window.removeEventListener("resize",e),window.removeEventListener("lakex_table_view_resize",e),null==t||t.destroy()}}),[_,I]),P$e((function(){I()}),[I]),{rootRect:y,gridGap:null==i?void 0:i.gridGap,cardWidth:c,cardHeight:f,colCount:v,useWindowScroll:_,customScrollParent:k,customModalContainer:C,disableVirtualScroll:O}}({viewRecords:i,viewFields:o,viewConfig:a}),h=f.rootRect,p=f.cardWidth,v=f.cardHeight,g=f.colCount,m=f.gridGap,y=f.useWindowScroll,b=f.customScrollParent,w=f.customModalContainer,_=f.disableVirtualScroll,x=function(){var e=SWe(pht),t=jF(Object(l.useState)(null),2),n=t[0],r=t[1],i=function(){var t=aO(QC.mark((function t(n){var i,o,a,l;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(null),i=n.active,o=n.over,i.id===o.id){t.next=7;break}return a=i.id,l=o.id,t.next=7,e.updateRecordOrder(a,l);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:qY($Y(G$,{activationConstraint:{distance:8}})),onDragStart:function(e){r(e.active.id)},onDragEnd:i}}(),k=x.activeId,C=x.sensors,S=x.onDragStart,O=x.onDragEnd,E=function(){var e=SWe(xyt),t=Object(l.useRef)(null);return P$e((function(){t.current&&(null==e||e.setVirtuosoRef(t.current))}),[e,t]),t}(),I=Object(l.useRef)(null),P=Object(l.useMemo)((function(){return OC(i,(function(e){return{viewRecord:e,id:e.get("record_uuid")}}))}),[i]),M=Object(l.useMemo)((function(){return xC(i,(function(e){return e.get("record_uuid")===k}))}),[k,i]),R=new Map;if(r.forEach((function(e){R.set(e.get("uuid"),e)})),P$e((function(){I.current&&(null==s||s.setScroller(I.current))}),[s,I]),!a)return null;if(!i||0===i.length||!o)return null;var A=u.a.createElement(lae,{useWindowScroll:y,customScrollParent:b,ref:E,context:{gridGap:m,colCount:g,cardWidth:p,cardHeight:v},components:{List:Dyt,Item:Tyt},scrollerRef:function(e){I.current=e},onScroll:null==s?void 0:s.emitScrollEvent,style:{width:"100%",height:null==h?void 0:h.height},data:P,initialItemCount:_?P.length:0,itemContent:function(e,t){return u.a.createElement(Pyt,{key:t.viewRecord.get("record_uuid"),viewRecord:t.viewRecord,fieldMap:R,viewConfig:a,width:p,height:v,disableDrag:d||!!(null==a?void 0:a.get("keep_sort"))})}});return n=d?A:u.a.createElement(Rq,{sensors:C,modifiers:[_K],collisionDetection:n$,onDragStart:S,onDragEnd:O},u.a.createElement(u.a.Fragment,null,u.a.createElement(uK,{items:P,strategy:rK},A),Object(c.createPortal)(u.a.createElement(Kq,{dropAnimation:null},M?u.a.createElement(Pyt,{viewRecord:M,fieldMap:R,viewConfig:a,width:p,height:v}):null),w))),u.a.createElement("div",{ref:t,className:"lakex-viewer-card"},u.a.createElement("div",{className:"lakex-viewer-card-inner"},u.a.createElement("div",{className:"lakex-viewer-card-content"},n)))})),Nyt=u.a.forwardRef((function(e,t){var n=qat({viewId:e.viewId});return u.a.createElement(Fyt,{ref:t,view:n.view,fields:n.fields,viewRecords:n.viewRecords||new yC,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function Lyt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Byt(e,t,n){return t=DC(t),jC(e,Vyt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Vyt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vyt=function(){return!!e})()}var zyt=function(e){function t(){var e;return rx(this,t),(e=Byt(this,t,arguments)).viewType=WO.CARD,e.title=wx("画册视图"),e.desc=wx("适合展示图片类数据"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lyt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lyt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CardView",size:e.size||16},e))},e.color="blue-5",e.Component=Nyt,e}return NC(t,e),ox(t)}(z8e),Hyt=Object.defineProperty,Wyt=Object.getOwnPropertyDescriptor,Uyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Wyt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Hyt(t,n,o),o},Gyt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new zyt({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setCardScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return ch().register(this).register(myt).register(xyt)}}])}();Gyt.pluginName="render-viewer-card",Uyt([Yf(xyt)],Gyt.prototype,"_scrollService",2),Gyt=Uyt([Gf({contrib:[Sze,Mze,oot]})],Gyt);var Yyt={type:"area-chart",name:wx("面积图"),icon:"https://gw.alipayobjects.com/mdn/rms_d314dd/afts/img/A*YYfSRoiOS_EAAAAAAAAAAABkARQnAQ"},$yt=[{label:wx("(空)"),value:"empty"},{label:wx("上"),value:"top"},{label:wx("上左"),value:"top-left"},{label:wx("上右"),value:"top-right"},{label:wx("左"),value:"left"},{label:wx("左上"),value:"left-top"},{label:wx("左下"),value:"left-bottom"},{label:wx("右"),value:"right"},{label:wx("右上"),value:"right-top"},{label:wx("右下"),value:"right-bottom"},{label:wx("下"),value:"bottom"},{label:wx("下左"),value:"bottom-left"},{label:wx("下右"),value:"bottom-right"}],qyt=[{label:wx("默认"),value:"default"},{label:wx("文本 A → Z"),value:"text-asc"},{label:wx("文本 Z → A"),value:"text-desc"},{label:wx("计数 小 → 大"),value:"num-asc"},{label:wx("计数 大 → 小"),value:"num-desc"}],Kyt=Object.defineProperty,Xyt=Object.getOwnPropertyDescriptor,Jyt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Xyt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Kyt(t,n,o),o},Zyt=function(){return ox((function e(){rx(this,e)}),[{key:"getStatOptions",value:function(e){var t=[],n=[];return e.forEach((function(e){e.type===xO.NUMBER?(0===t.length&&t.push({label:"数字类型",isTitle:!0}),t.push(e)):n.push(e)})),[{label:"常规统计",isTitle:!0},{label:wx("总数"),value:"total"}].concat(t,[{label:"其他类型",isTitle:!0}],n)}},{key:"getFieldOptions",value:function(){var e=this;return OC(this._readService.getAllFields(),(function(t){var n=e._fieldService.getFieldIcon(t.get("type"));return{label:t.get("name"),value:t.get("uuid"),type:t.get("type"),icon:n}}))}},{key:"getDefaultFieldId",value:function(e){var t,n=e.find((function(e){return e.type===xO.SELECT}));if(n)return n.value;var r=e.find((function(e){return e.type===xO.MENTION}));if(r)return r.value;var i=e.find((function(e){return e.type===xO.TEXT}));return i?i.value:null==(t=e[0])?void 0:t.value}},{key:"getDefaultConfg",value:function(){var e=this.getFieldOptions();return{mainField:this.getDefaultFieldId(e),statField:"total",legendPosition:"bottom",legendSort:"default",maxColumnWidth:40}}},{key:"getConfigurableXAxis",value:function(){return{id:"xAxis",title:wx("X轴"),type:"title"}}},{key:"getConfigurableYAxis",value:function(){return{id:"yAxis",title:wx("Y轴"),type:"title"}}},{key:"getConfigurableMainField",value:function(e,t){return{id:"mainField",title:t||wx("显示内容"),type:"select",options:e}}},{key:"getConfigurableStatField",value:function(e,t){return{id:"statField",title:t||wx("显示内容"),type:"select",options:this.getStatOptions(e),cascader:[{id:"statType",matchKey:"type",matchValue:"number",placeholder:wx("选择统计类型"),options:[{label:wx("总和"),value:"sum"},{label:wx("平均数"),value:"average"},{label:wx("最小值"),value:"min"},{label:wx("最大值"),value:"max"},{label:wx("中位数"),value:"median"},{label:wx("不重复的值"),value:"unique"}]}]}}},{key:"getConfigurableGroupField",value:function(e,t){return{id:"groupField",title:t||wx("分组方式"),type:"select",options:e,allowClear:!0}}},{key:"getConfigurableLegendSort",value:function(){return{id:"legendSort",title:wx("排序方式"),type:"select",options:qyt}}},{key:"getConfigurableLegendPosition",value:function(){return{id:"legendPosition",title:wx("图例位置"),type:"select",options:$yt}}},{key:"getConfigurableMaxColumnWidth",value:function(){return{id:"maxColumnWidth",title:wx("柱子最大宽度"),type:"number",min:20,max:100}}}])}();function Qyt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config||{},o=!!i.groupField;n.current=new dPe(t.current,{data:e.data,theme:r,xField:"name",yField:"value",seriesField:o?"groupValue":void 0,legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"right-top"},animation:!1}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function ebt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tbt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tbt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function tbt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nbt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nbt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nbt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Jyt([Yf(iHe)],Zyt.prototype,"_fieldService",2),Jyt([Yf(XA)],Zyt.prototype,"_readService",2),Zyt=Jyt([Gf()],Zyt);var ibt=Object.defineProperty,obt=Object.getOwnPropertyDescriptor,abt=function(e,t,n,r){for(var i,o=r>1?void 0:r?obt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ibt(t,n,o),o},lbt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(Qyt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return rbt(rbt({},Yyt),{},{basicSchema:[this._chartConfigService.getConfigurableXAxis(),this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableGroupField(e),this._chartConfigService.getConfigurableYAxis(),this._chartConfigService.getConfigurableStatField(e)],styleSchema:[this._chartConfigService.getConfigurableLegendPosition()]})}},{key:"getDefaultConfg",value:function(){var e=this._chartConfigService.getDefaultConfg(),t=this._chartConfigService.getFieldOptions(),n=this._getDefaultFieldId(t),r=this._getGroupFieldId(t),i=this._getStatFieldId(t);return rbt(rbt({},e),{},{mainField:n,groupField:r,statField:i,statType:"sum",legendPosition:"right"})}},{key:"_getDefaultFieldId",value:function(e){var t,n=e.find((function(e){return e.type===xO.DATE}));return n?n.value:null==(t=e[0])?void 0:t.value}},{key:"_getGroupFieldId",value:function(e){var t,n,r=ebt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if([xO.TEXT,xO.SELECT].includes(i.type))return i.value}}catch(e){r.e(e)}finally{r.f()}return null==(t=e[0])?void 0:t.value}},{key:"_getStatFieldId",value:function(e){var t,n,r=ebt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if([xO.NUMBER,xO.RATE,xO.PROGRESS].includes(i.type))return i.value}}catch(e){r.e(e)}finally{r.f()}return null==(t=e[0])?void 0:t.value}}])}();abt([Yf(Cnt)],lbt.prototype,"_chartDataService",2),abt([Yf(Zyt)],lbt.prototype,"_chartConfigService",2),lbt=abt([Gf()],lbt);var ubt={type:"bar-chart",name:wx("条形图"),icon:"https://gw.alipayobjects.com/zos/antfincdn/rWp4Sq5ofk/10256978-7f35-4a4c-b67c-39aaad269bc2.png"};function cbt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config||{},o=!!i.groupField;n.current=new VPe(t.current,{data:e.data,theme:r,xField:"value",yField:"name",isStack:o,seriesField:o?"groupValue":"name",maxBarWidth:i.maxColumnWidth,legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"bottom"},animation:!1}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function sbt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sbt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sbt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fbt=Object.defineProperty,hbt=Object.getOwnPropertyDescriptor,pbt=function(e,t,n,r){for(var i,o=r>1?void 0:r?hbt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fbt(t,n,o),o},vbt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(cbt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return dbt(dbt({},ubt),{},{basicSchema:[this._chartConfigService.getConfigurableXAxis(),this._chartConfigService.getConfigurableStatField(e),this._chartConfigService.getConfigurableGroupField(e),this._chartConfigService.getConfigurableYAxis(),this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableLegendSort()],styleSchema:[this._chartConfigService.getConfigurableLegendPosition(),this._chartConfigService.getConfigurableMaxColumnWidth()]})}},{key:"getDefaultConfg",value:function(){return this._chartConfigService.getDefaultConfg()}}])}();pbt([Yf(Cnt)],vbt.prototype,"_chartDataService",2),pbt([Yf(Zyt)],vbt.prototype,"_chartConfigService",2),vbt=pbt([Gf()],vbt);var gbt={type:"column-chart",name:wx("柱状图"),icon:"https://gw.alipayobjects.com/mdn/rms_d314dd/afts/img/A*KAg2TY-oYRUAAAAAAAAAAAAAARQnAQ"};function mbt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config||{},o=!!i.groupField;n.current=new HPe(t.current,{data:e.data,theme:r,xField:"name",yField:"value",isStack:o,seriesField:o?"groupValue":"name",maxColumnWidth:i.maxColumnWidth,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!0,autoRotate:!1}},legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"bottom"},animation:!1}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function ybt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ybt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ybt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wbt=Object.defineProperty,_bt=Object.getOwnPropertyDescriptor,xbt=function(e,t,n,r){for(var i,o=r>1?void 0:r?_bt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wbt(t,n,o),o},kbt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(mbt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return bbt(bbt({},gbt),{},{basicSchema:[this._chartConfigService.getConfigurableXAxis(),this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableLegendSort(),this._chartConfigService.getConfigurableYAxis(),this._chartConfigService.getConfigurableStatField(e),this._chartConfigService.getConfigurableGroupField(e)],styleSchema:[this._chartConfigService.getConfigurableLegendPosition(),this._chartConfigService.getConfigurableMaxColumnWidth()]})}},{key:"getDefaultConfg",value:function(){return this._chartConfigService.getDefaultConfg()}}])}();xbt([Yf(Cnt)],kbt.prototype,"_chartDataService",2),xbt([Yf(Zyt)],kbt.prototype,"_chartConfigService",2),kbt=xbt([Gf()],kbt);var Cbt={type:"funnel-chart",name:wx("漏斗图"),icon:"https://gw.alicdn.com/tfs/TB158FxuAT2gK0jSZPcXXcKkpXa-646-500.png"};function Sbt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){t.current&&(n.current&&n.current.destroy(),n.current=new OMe(t.current,{data:e.data,theme:r,xField:"name",yField:"value",legend:!1,animation:!1}),n.current.render())}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function Obt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ebt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Obt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Obt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ibt=Object.defineProperty,Pbt=Object.getOwnPropertyDescriptor,Mbt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Pbt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ibt(t,n,o),o},Rbt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(Sbt,{config:e,data:t})}},{key:"getData",value:function(e,t){var n=this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t);e=this.syncConfig(e,n);var r=n.reduce((function(e,t){return e[t.name]=t,e}),{}),i=[];if(e.layers&&e.layers.forEach((function(e){return i.push(r[e])})),e.mergeLower)for(var o=i.length,a=o-1;a>=0;)a!==o-1?(i[a].value+=i[a+1].value,a--):a--;return i}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return Ebt(Ebt({},Cbt),{},{basicSchema:[{id:"mainField",title:wx("内容显示"),type:"select",options:e},this._chartConfigService.getConfigurableStatField(e,wx("每层表示")),{id:"mergeLower",title:wx("累计合并下层数据"),type:"checkbox"},{id:"layers",title:wx("层顺序"),type:"sortList"}]})}},{key:"getDefaultConfg",value:function(){return Ebt(Ebt({},this._chartConfigService.getDefaultConfg()),{},{mergeLower:!0,layers:[]})}},{key:"syncConfig",value:function(e,t){var n=e.layers||[],r=t.map((function(e){return e.name}));return n.forEach((function(e,t){-1===r.findIndex((function(t){return t===e}))&&(n[t]="")})),n=n.filter((function(e){return!!e})),r.forEach((function(e){-1===n.findIndex((function(t){return e===t}))&&n.push(e)})),e.layers=n,e}}])}();Mbt([Yf(Cnt)],Rbt.prototype,"_chartDataService",2),Mbt([Yf(Zyt)],Rbt.prototype,"_chartConfigService",2),Rbt=Mbt([Gf()],Rbt);var Abt={type:"hotmap",name:wx("热力图"),icon:"https://mdn.alipayobjects.com/huamei_b00jk5/afts/img/A*r4CYToJlVtMAAAAAAAAAAAAADgitAQ/original"};function jbt(e){var t=I$e().currentTheme;if(!e.data)return u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"));var n=e.data;if(!(null==n?void 0:n.length))return null;var r,i,o=19*n.length-5+8;return u.a.createElement("svg",{width:o,height:158,className:F()(e.className,"lakex-table-chart-hotmap")},n.map((function(e,n){return u.a.createElement("g",{key:"".concat(n),transform:"translate(".concat(19*n+4,")")},e.map((function(e,n){var r=e.level;return function(e,t){return u.a.createElement(j4e,{key:e.date,placement:"top",title:function(){return u.a.createElement("div",null,a()(e.date).format("YYYY-MM-DD ddd"),u.a.createElement("div",null,wx("值"),": ",e.value))}},t)}(e,u.a.createElement("rect",{className:F()("lakex-table-chart-hotmap-daybox",nx({},"lakex-table-chart-hotmap-daybox-nooutline","dark"===t&&r<0)),width:14,height:14,rx:2,ry:2,x:0,y:19*n,"data-level":r}))})))})),(r=-1,i=[],n.forEach((function(e,t){var n=(e=e.filter((function(e){return null==e?void 0:e.level})))[e.length-1]||{};if(n&&n.date){var o=a()(n.date).toDate(),l=o.getMonth()+1;l!==r&&o.getDate()<10&&(r=l,i.push({col:t,month:a()(n.date).format("MMM")}))}})),u.a.createElement("g",{transform:"translate(".concat(4,", ").concat(136,")"),height:16},i.map((function(e){return u.a.createElement("text",{key:e.col,className:"lakex-table-chart-hotmap-monthLabel",x:19*e.col,y:0},e.month)})))))}function Dbt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dbt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dbt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fbt=Object.defineProperty,Nbt=Object.getOwnPropertyDescriptor,Lbt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Nbt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Fbt(t,n,o),o},Bbt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return React.createElement(jbt,{config:e,data:t})}},{key:"getData",value:function(e,t){var n=this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t);return this._aggregateData(e,n)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return Tbt(Tbt({},Abt),{},{basicSchema:[this._chartConfigService.getConfigurableMainField(e,wx("日期字段")),this._chartConfigService.getConfigurableStatField(e,wx("热点计算")),{id:"maxHotNum",title:wx("热度最大值"),type:"number",min:0},{id:"weeks",title:wx("显示周数"),type:"number",min:4,max:52}]})}},{key:"getDefaultConfg",value:function(){var e=this._chartConfigService.getFieldOptions();return{mainField:this._getMainField(e),statField:"total",maxHotNum:100,weeks:52}}},{key:"_getMainField",value:function(e){var t,n=e.find((function(e){return e.type===xO.DATE}));return n?n.value:null==(t=e[0])?void 0:t.value}},{key:"_aggregateData",value:function(e,t){for(var n=this._getStartDate(e),r=t.reduce((function(e,t){return e[a()(t.name).format("YYYY-MM-DD")]=t,e}),{}),i=[],o=Math.floor(e.maxHotNum/6),l=7*e.weeks,u=0;u<l;u+=7){for(var c=[],s=0;s<7;s++){var d=a()(n).add(u+s,"day").format("YYYY-MM-DD");if(r[d]){var f=Math.floor(r[d].value/o);f=Math.max(f,-1),f=Math.min(f,5),c.push({date:d,level:f,value:r[d].value})}else c.push({date:d,level:-1,value:0})}i.push(c)}return i}},{key:"_getStartDate",value:function(e){var t=new Date,n=7-t.getDay()-1,r=7*e.weeks;return a()(t).subtract(r-n-1,"day")}}])}();Lbt([Yf(Cnt)],Bbt.prototype,"_chartDataService",2),Lbt([Yf(Zyt)],Bbt.prototype,"_chartConfigService",2),Bbt=Lbt([Gf()],Bbt);var Vbt={type:"line-chart",name:wx("折线图"),icon:"https://gw.alipayobjects.com/zos/antfincdn/aiERL4ey%24U/08d95f7b-46cb-4bfd-89b2-be36343d44a1.png"};function zbt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config||{},o=!!i.groupField;n.current=new nRe(t.current,{data:e.data,theme:r,padding:"auto",xField:"name",yField:"value",seriesField:o?"groupValue":void 0,legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"bottom"},animation:!1}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function Hbt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hbt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hbt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ubt=Object.defineProperty,Gbt=Object.getOwnPropertyDescriptor,Ybt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Gbt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ubt(t,n,o),o},$bt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(zbt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return Wbt(Wbt({},Vbt),{},{basicSchema:[this._chartConfigService.getConfigurableXAxis(),this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableLegendSort(),this._chartConfigService.getConfigurableYAxis(),this._chartConfigService.getConfigurableStatField(e),this._chartConfigService.getConfigurableGroupField(e)],styleSchema:[this._chartConfigService.getConfigurableLegendPosition()]})}},{key:"getDefaultConfg",value:function(){return this._chartConfigService.getDefaultConfg()}}])}();Ybt([Yf(Cnt)],$bt.prototype,"_chartDataService",2),Ybt([Yf(Zyt)],$bt.prototype,"_chartConfigService",2),$bt=Ybt([Gf()],$bt);var qbt={type:"pie-chart",name:wx("饼图"),icon:"https://gw.alipayobjects.com/mdn/rms_d314dd/afts/img/A*wmldRZZj9lIAAAAAAAAAAABkARQnAQ"};function Kbt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config||{};n.current=new wRe(t.current,{data:e.data,theme:r,appendPadding:10,colorField:"name",angleField:"value",radius:.9,label:{type:"inner",offset:"-30%",content:function(e){var t=e.percent;return"".concat((100*t).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"bottom"},interactions:[{type:"element-active"}],animation:!1}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function Xbt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jbt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xbt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xbt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zbt=Object.defineProperty,Qbt=Object.getOwnPropertyDescriptor,ewt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Qbt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Zbt(t,n,o),o},twt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(Kbt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return Jbt(Jbt({},qbt),{},{basicSchema:[{id:"titleData",title:wx("数据"),type:"title"},this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableStatField(e,wx("每个切片代表")),this._chartConfigService.getConfigurableLegendSort()],styleSchema:[this._chartConfigService.getConfigurableLegendPosition()]})}},{key:"getDefaultConfg",value:function(){return this._chartConfigService.getDefaultConfg()}}])}();ewt([Yf(Cnt)],twt.prototype,"_chartDataService",2),ewt([Yf(Zyt)],twt.prototype,"_chartConfigService",2),twt=ewt([Gf()],twt);var nwt={type:"scatter-chart",name:wx("散点图"),icon:"https://gw.alipayobjects.com/zos/antfincdn/kRFIJ2OlFs/FE726B54-2352-47F5-AAF9-B17D281CE513.png"};function rwt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){if(t.current){n.current&&n.current.destroy();var i=e.config;n.current=new aAe(t.current,{data:e.data,theme:r,xField:"name",yField:"value",colorField:"name",shape:"circle",size:4,animation:!1,legend:"empty"!==i.legendPosition&&{position:i.legendPosition||"bottom"}}),n.current.render()}}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function iwt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function owt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iwt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iwt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var awt=Object.defineProperty,lwt=Object.getOwnPropertyDescriptor,uwt=function(e,t,n,r){for(var i,o=r>1?void 0:r?lwt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&awt(t,n,o),o},cwt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(rwt,{config:e,data:t})}},{key:"getData",value:function(e,t){return this._chartDataService.getData(e.mainField,e.legendSort,e.groupField,e.statField,e.statType,t)}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return owt(owt({},nwt),{},{basicSchema:[this._chartConfigService.getConfigurableXAxis(),this._chartConfigService.getConfigurableMainField(e),this._chartConfigService.getConfigurableLegendSort(),this._chartConfigService.getConfigurableYAxis(),this._chartConfigService.getConfigurableStatField(e),this._chartConfigService.getConfigurableGroupField(e)],styleSchema:[this._chartConfigService.getConfigurableLegendPosition()]})}},{key:"getDefaultConfg",value:function(){return this._chartConfigService.getDefaultConfg()}}])}();uwt([Yf(Cnt)],cwt.prototype,"_chartDataService",2),uwt([Yf(Zyt)],cwt.prototype,"_chartConfigService",2),cwt=uwt([Gf()],cwt);var swt,dwt={type:"statistics",name:wx("统计数字"),icon:"https://mdn.alipayobjects.com/huamei_7uahnr/afts/img/A*YL7PRYNtH-4AAAAAAAAAAAAADrJ8AQ/original"},fwt={exports:{}},hwt=fwt.exports;var pwt=(swt||(swt=1,function(e,t){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",a=32,l=128,u=256,c=1/0,s=9007199254740991,d=NaN,f=4294967295,h=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",u]],p="[object Arguments]",v="[object Array]",g="[object Boolean]",m="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",_="[object Map]",x="[object Number]",k="[object Object]",C="[object Promise]",S="[object RegExp]",O="[object Set]",E="[object String]",I="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",R="[object DataView]",A="[object Float32Array]",j="[object Float64Array]",D="[object Int8Array]",T="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",B="[object Uint16Array]",V="[object Uint32Array]",z=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,Y=RegExp(U.source),$=RegExp(G.source),q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),ne=/^\s+/,re=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,be=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="['’]",Ie="["+we+"]",Pe="["+Oe+"]",Me="["+_e+"]",Re="\\d+",Ae="["+xe+"]",je="["+ke+"]",De="[^"+we+Oe+Re+xe+ke+Ce+"]",Te="\\ud83c[\\udffb-\\udfff]",Fe="[^"+we+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Ce+"]",Ve="\\u200d",ze="(?:"+je+"|"+De+")",He="(?:"+Be+"|"+De+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",Ue="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+Me+"|"+Te+")?",Ye="["+Se+"]?",$e=Ye+Ge+"(?:"+Ve+"(?:"+[Fe,Ne,Le].join("|")+")"+Ye+Ge+")*",qe="(?:"+[Ae,Ne,Le].join("|")+")"+$e,Ke="(?:"+[Fe+Me+"?",Me,Ne,Le,Ie].join("|")+")",Xe=RegExp(Ee,"g"),Je=RegExp(Me,"g"),Ze=RegExp(Te+"(?="+Te+")|"+Ke+$e,"g"),Qe=RegExp([Be+"?"+je+"+"+We+"(?="+[Pe,Be,"$"].join("|")+")",He+"+"+Ue+"(?="+[Pe,Be+ze,"$"].join("|")+")",Be+"?"+ze+"+"+We,Be+"+"+Ue,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,qe].join("|"),"g"),et=RegExp("["+Ve+we+_e+Se+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rt=-1,it={};it[A]=it[j]=it[D]=it[T]=it[F]=it[N]=it[L]=it[B]=it[V]=!0,it[p]=it[v]=it[M]=it[g]=it[R]=it[m]=it[y]=it[b]=it[_]=it[x]=it[k]=it[S]=it[O]=it[E]=it[P]=!1;var ot={};ot[p]=ot[v]=ot[M]=ot[R]=ot[g]=ot[m]=ot[A]=ot[j]=ot[D]=ot[T]=ot[F]=ot[_]=ot[x]=ot[k]=ot[S]=ot[O]=ot[E]=ot[I]=ot[N]=ot[L]=ot[B]=ot[V]=!0,ot[y]=ot[b]=ot[P]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ut=parseInt,ct="object"==ex(Dx)&&Dx&&Dx.Object===Object&&Dx,st="object"==("undefined"==typeof self?"undefined":ex(self))&&self&&self.Object===Object&&self,dt=ct||st||Function("return this")(),ft=t&&!t.nodeType&&t,ht=ft&&e&&!e.nodeType&&e,pt=ht&&ht.exports===ft,vt=pt&&ct.process,gt=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),mt=gt&&gt.isArrayBuffer,yt=gt&&gt.isDate,bt=gt&&gt.isMap,wt=gt&&gt.isRegExp,_t=gt&&gt.isSet,xt=gt&&gt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function St(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Pt(e,t){return!(null==e||!e.length)&&Bt(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function At(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Dt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Wt("length");function Nt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Lt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Bt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Lt(e,zt,n)}function Vt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Ht(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:d}function Wt(e){return function(t){return null==t?n:t[e]}}function Ut(e){return function(t){return null==e?n:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Yt(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function qt(e){return e?e.slice(0,dn(e)+1).replace(ne,""):e}function Kt(e){return function(t){return e(t)}}function Xt(e,t){return Rt(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&Bt(t,e[n],0)>-1;);return n}function Qt(e,t){for(var n=e.length;n--&&Bt(t,e[n],0)>-1;);return n}var en=Ut({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),tn=Ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+at[e]}function rn(e){return et.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function an(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var l=e[n];l!==t&&l!==o||(e[n]=o,a[i++]=n)}return a}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function cn(e){return rn(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Ft(e)}function sn(e){return rn(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var fn=Ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var re=(t=null==t?dt:hn.defaults(dt.Object(),t,hn.pick(dt,nt))).Array,we=t.Date,_e=t.Error,xe=t.Function,ke=t.Math,Ce=t.Object,Se=t.RegExp,Oe=t.String,Ee=t.TypeError,Ie=re.prototype,Pe=xe.prototype,Me=Ce.prototype,Re=t["__core-js_shared__"],Ae=Pe.toString,je=Me.hasOwnProperty,De=0,Te=function(){var e=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Me.toString,Ne=Ae.call(Ce),Le=dt._,Be=Se("^"+Ae.call(je).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=pt?t.Buffer:n,ze=t.Symbol,He=t.Uint8Array,We=Ve?Ve.allocUnsafe:n,Ue=an(Ce.getPrototypeOf,Ce),Ge=Ce.create,Ye=Me.propertyIsEnumerable,$e=Ie.splice,qe=ze?ze.isConcatSpreadable:n,Ke=ze?ze.iterator:n,Ze=ze?ze.toStringTag:n,et=function(){try{var e=uo(Ce,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ct=we&&we.now!==dt.Date.now&&we.now,st=t.setTimeout!==dt.setTimeout&&t.setTimeout,ft=ke.ceil,ht=ke.floor,vt=Ce.getOwnPropertySymbols,gt=Ve?Ve.isBuffer:n,Ft=t.isFinite,Ut=Ie.join,pn=an(Ce.keys,Ce),vn=ke.max,gn=ke.min,mn=we.now,yn=t.parseInt,bn=ke.random,wn=Ie.reverse,_n=uo(t,"DataView"),xn=uo(t,"Map"),kn=uo(t,"Promise"),Cn=uo(t,"Set"),Sn=uo(t,"WeakMap"),On=uo(Ce,"create"),En=Sn&&new Sn,In={},Pn=To(_n),Mn=To(xn),Rn=To(kn),An=To(Cn),jn=To(Sn),Dn=ze?ze.prototype:n,Tn=Dn?Dn.valueOf:n,Fn=Dn?Dn.toString:n;function Nn(e){if(Za(e)&&!za(e)&&!(e instanceof zn)){if(e instanceof Vn)return e;if(je.call(e,"__wrapped__"))return Fo(e)}return new Vn(e)}var Ln=function(){function e(){}return function(t){if(!Ja(t))return{};if(Ge)return Ge(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Bn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Un;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Wn(e);this.size=t.size}function $n(e,t){var n=za(e),r=!n&&Va(e),i=!n&&!r&&Ga(e),o=!n&&!r&&!i&&al(e),a=n||r||i||o,l=a?$t(e.length,Oe):[],u=l.length;for(var c in e)!t&&!je.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||go(c,u))||l.push(c);return l}function qn(e){var t=e.length;return t?e[Gr(0,t-1)]:n}function Kn(e,t){return Ao(Oi(e),ir(t,0,e.length))}function Xn(e){return Ao(Oi(e))}function Jn(e,t,r){(r!==n&&!Na(e[t],r)||r===n&&!(t in e))&&nr(e,t,r)}function Zn(e,t,r){var i=e[t];je.call(e,t)&&Na(i,r)&&(r!==n||t in e)||nr(e,t,r)}function Qn(e,t){for(var n=e.length;n--;)if(Na(e[n][0],t))return n;return-1}function er(e,t,n,r){return cr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function tr(e,t){return e&&Ei(t,Il(t),e)}function nr(e,t,n){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(e,t){for(var r=-1,i=t.length,o=re(i),a=null==e;++r<i;)o[r]=a?n:kl(e,t[r]);return o}function ir(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function or(e,t,r,i,o,a){var l,u=1&t,c=2&t,s=4&t;if(r&&(l=o?r(e,i,o,a):r(e)),l!==n)return l;if(!Ja(e))return e;var d=za(e);if(d){if(l=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&je.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return Oi(e,l)}else{var f=fo(e),h=f==b||f==w;if(Ga(e))return wi(e,u);if(f==k||f==p||h&&!o){if(l=c||h?{}:po(e),!u)return c?function(e,t){return Ei(e,so(e),t)}(e,function(e,t){return e&&Ei(t,Pl(t),e)}(l,e)):function(e,t){return Ei(e,co(e),t)}(e,tr(l,e))}else{if(!ot[f])return o?e:{};l=function(e,t,n){var r,i=e.constructor;switch(t){case M:return _i(e);case g:case m:return new i(+e);case R:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case A:case j:case D:case T:case F:case N:case L:case B:case V:return xi(e,n);case _:return new i;case x:case E:return new i(e);case S:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new i;case I:return r=e,Tn?Ce(Tn.call(r)):{}}}(e,f,u)}}a||(a=new Yn);var v=a.get(e);if(v)return v;a.set(e,l),rl(e)?e.forEach((function(n){l.add(or(n,t,r,n,e,a))})):Qa(e)&&e.forEach((function(n,i){l.set(i,or(n,t,r,i,e,a))}));var y=d?n:(s?c?to:eo:c?Pl:Il)(e);return St(y||e,(function(n,i){y&&(n=e[i=n]),Zn(l,i,or(n,t,r,i,e,a))})),l}function ar(e,t,r){var i=r.length;if(null==e)return!i;for(e=Ce(e);i--;){var o=r[i],a=t[o],l=e[o];if(l===n&&!(o in e)||!a(l))return!1}return!0}function lr(e,t,i){if("function"!=typeof e)throw new Ee(r);return Io((function(){e.apply(n,i)}),t)}function ur(e,t,n,r){var i=-1,o=Pt,a=!0,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=Rt(t,Kt(n))),r?(o=Mt,a=!1):t.length>=200&&(o=Jt,a=!1,t=new Gn(t));e:for(;++i<l;){var s=e[i],d=null==n?s:n(s);if(s=r||0!==s?s:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(s)}else o(t,d,r)||u.push(s)}return u}Nn.templateSettings={escape:q,evaluate:K,interpolate:X,variable:"",imports:{_:Nn}},Nn.prototype=Bn.prototype,Nn.prototype.constructor=Nn,Vn.prototype=Ln(Bn.prototype),Vn.prototype.constructor=Vn,zn.prototype=Ln(Bn.prototype),zn.prototype.constructor=zn,Hn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(On){var r=t[e];return r===i?n:r}return je.call(t,e)?t[e]:n},Hn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==n:je.call(t,e)},Hn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=On&&t===n?i:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=Qn(t,e);return!(n<0||(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,0))},Wn.prototype.get=function(e){var t=this.__data__,r=Qn(t,e);return r<0?n:t[r][1]},Wn.prototype.has=function(e){return Qn(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=Qn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Un.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(xn||Wn),string:new Hn}},Un.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},Un.prototype.get=function(e){return ao(this,e).get(e)},Un.prototype.has=function(e){return ao(this,e).has(e)},Un.prototype.set=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Gn.prototype.add=Gn.prototype.push=function(e){return this.__data__.set(e,i),this},Gn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!xn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Un(r)}return n.set(e,t),this.size=n.size,this};var cr=Mi(mr),sr=Mi(yr,!0);function dr(e,t){var n=!0;return cr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function fr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],l=t(a);if(null!=l&&(u===n?l==l&&!ol(l):r(l,u)))var u=l,c=a}return c}function hr(e,t){var n=[];return cr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function pr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=vo),i||(i=[]);++o<a;){var l=e[o];t>0&&n(l)?t>1?pr(l,t-1,n,r,i):At(i,l):r||(i[i.length]=l)}return i}var vr=Ri(),gr=Ri(!0);function mr(e,t){return e&&vr(e,t,Il)}function yr(e,t){return e&&gr(e,t,Il)}function br(e,t){return It(t,(function(t){return qa(e[t])}))}function wr(e,t){for(var r=0,i=(t=gi(t,e)).length;null!=e&&r<i;)e=e[Do(t[r++])];return r&&r==i?e:n}function _r(e,t,n){var r=t(e);return za(e)?r:At(r,n(e))}function xr(e){return null==e?e===n?"[object Undefined]":"[object Null]":Ze&&Ze in Ce(e)?function(e){var t=je.call(e,Ze),r=e[Ze];try{e[Ze]=n;var i=!0}catch(e){}var o=Fe.call(e);return i&&(t?e[Ze]=r:delete e[Ze]),o}(e):function(e){return Fe.call(e)}(e)}function kr(e,t){return e>t}function Cr(e,t){return null!=e&&je.call(e,t)}function Sr(e,t){return null!=e&&t in Ce(e)}function Or(e,t,r){for(var i=r?Mt:Pt,o=e[0].length,a=e.length,l=a,u=re(a),c=1/0,s=[];l--;){var d=e[l];l&&t&&(d=Rt(d,Kt(t))),c=gn(d.length,c),u[l]=!r&&(t||o>=120&&d.length>=120)?new Gn(l&&d):n}d=e[0];var f=-1,h=u[0];e:for(;++f<o&&s.length<c;){var p=d[f],v=t?t(p):p;if(p=r||0!==p?p:0,!(h?Jt(h,v):i(s,v,r))){for(l=a;--l;){var g=u[l];if(!(g?Jt(g,v):i(e[l],v,r)))continue e}h&&h.push(v),s.push(p)}}return s}function Er(e,t,r){var i=null==(e=So(e,t=gi(t,e)))?e:e[Do($o(t))];return null==i?n:kt(i,e,r)}function Ir(e){return Za(e)&&xr(e)==p}function Pr(e,t,r,i,o){return e===t||(null==e||null==t||!Za(e)&&!Za(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var l=za(e),u=za(t),c=l?v:fo(e),s=u?v:fo(t),d=(c=c==p?k:c)==k,f=(s=s==p?k:s)==k,h=c==s;if(h&&Ga(e)){if(!Ga(t))return!1;l=!0,d=!1}if(h&&!d)return a||(a=new Yn),l||al(e)?Zi(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case g:case m:case x:return Na(+e,+t);case y:return e.name==t.name&&e.message==t.message;case S:case E:return e==t+"";case _:var l=on;case O:var u=1&r;if(l||(l=un),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var s=Zi(l(e),l(t),r,i,o,a);return a.delete(e),s;case I:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,c,r,i,o,a);if(!(1&r)){var b=d&&je.call(e,"__wrapped__"),w=f&&je.call(t,"__wrapped__");if(b||w){var C=b?e.value():e,P=w?t.value():t;return a||(a=new Yn),o(C,P,r,i,a)}}return!!h&&(a||(a=new Yn),function(e,t,r,i,o,a){var l=1&r,u=eo(e),c=u.length,s=eo(t),d=s.length;if(c!=d&&!l)return!1;for(var f=c;f--;){var h=u[f];if(!(l?h in t:je.call(t,h)))return!1}var p=a.get(e),v=a.get(t);if(p&&v)return p==t&&v==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++f<c;){var y=e[h=u[f]],b=t[h];if(i)var w=l?i(b,y,h,t,e,a):i(y,b,h,e,t,a);if(!(w===n?y===b||o(y,b,r,i,a):w)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,r,i,o,a))}(e,t,r,i,Pr,o))}function Mr(e,t,r,i){var o=r.length,a=o,l=!i;if(null==e)return!a;for(e=Ce(e);o--;){var u=r[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=r[o])[0],s=e[c],d=u[1];if(l&&u[2]){if(s===n&&!(c in e))return!1}else{var f=new Yn;if(i)var h=i(s,d,c,e,t,f);if(!(h===n?Pr(d,s,3,i,f):h))return!1}}return!0}function Rr(e){return!(!Ja(e)||function(e){return!!Te&&Te in e}(e))&&(qa(e)?Be:pe).test(To(e))}function Ar(e){return"function"==typeof e?e:null==e?eu:"object"==ex(e)?za(e)?Lr(e[0],e[1]):Nr(e):cu(e)}function jr(e){if(!_o(e))return pn(e);var t=[];for(var n in Ce(e))je.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dr(e){if(!Ja(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)("constructor"!=r||!t&&je.call(e,r))&&n.push(r);return n}function Tr(e,t){return e<t}function Fr(e,t){var n=-1,r=Wa(e)?re(e.length):[];return cr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Nr(e){var t=lo(e);return 1==t.length&&t[0][2]?ko(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function Lr(e,t){return yo(e)&&xo(t)?ko(Do(e),t):function(r){var i=kl(r,e);return i===n&&i===t?Cl(r,e):Pr(t,i,3)}}function Br(e,t,r,i,o){e!==t&&vr(t,(function(a,l){if(o||(o=new Yn),Ja(a))!function(e,t,r,i,o,a,l){var u=Oo(e,r),c=Oo(t,r),s=l.get(c);if(s)Jn(e,r,s);else{var d=a?a(u,c,r+"",e,t,l):n,f=d===n;if(f){var h=za(c),p=!h&&Ga(c),v=!h&&!p&&al(c);d=c,h||p||v?za(u)?d=u:Ua(u)?d=Oi(u):p?(f=!1,d=wi(c,!0)):v?(f=!1,d=xi(c,!0)):d=[]:tl(c)||Va(c)?(d=u,Va(u)?d=pl(u):Ja(u)&&!qa(u)||(d=po(c))):f=!1}f&&(l.set(c,d),o(d,c,i,a,l),l.delete(c)),Jn(e,r,d)}}(e,t,l,r,Br,i,o);else{var u=i?i(Oo(e,l),a,l+"",e,t,o):n;u===n&&(u=a),Jn(e,l,u)}}),Pl)}function Vr(e,t){var r=e.length;if(r)return go(t+=t<0?r:0,r)?e[t]:n}function zr(e,t,n){t=t.length?Rt(t,(function(e){return za(e)?function(t){return wr(t,1===e.length?e[0]:e)}:e})):[eu];var r=-1;t=Rt(t,Kt(oo()));var i=Fr(e,(function(e,n,i){return{criteria:Rt(t,(function(t){return t(e)})),index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,l=n.length;++r<a;){var u=ki(i[r],o[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],l=wr(e,a);n(l,a)&&Xr(o,gi(a,e),l)}return o}function Wr(e,t,n,r){var i=r?Vt:Bt,o=-1,a=t.length,l=e;for(e===t&&(t=Oi(t)),n&&(l=Rt(e,Kt(n)));++o<a;)for(var u=0,c=t[o],s=n?n(c):c;(u=i(l,s,u,r))>-1;)l!==e&&$e.call(l,u,1),$e.call(e,u,1);return e}function Ur(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;go(i)?$e.call(e,i,1):ui(e,i)}}return e}function Gr(e,t){return e+ht(bn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>s)return n;do{t%2&&(n+=e),(t=ht(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Po(Co(e,t,eu),e+"")}function qr(e){return qn(Nl(e))}function Kr(e,t){var n=Nl(e);return Ao(n,ir(t,0,n.length))}function Xr(e,t,r,i){if(!Ja(e))return e;for(var o=-1,a=(t=gi(t,e)).length,l=a-1,u=e;null!=u&&++o<a;){var c=Do(t[o]),s=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=l){var d=u[c];(s=i?i(d,c,u):n)===n&&(s=Ja(d)?d:go(t[o+1])?[]:{})}Zn(u,c,s),u=u[c]}return e}var Jr=En?function(e,t){return En.set(e,t),e}:eu,Zr=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Jl(t),writable:!0})}:eu;function Qr(e){return Ao(Nl(e))}function ei(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=re(i);++r<i;)o[r]=e[r+t];return o}function ti(e,t){var n;return cr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ni(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ol(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ri(e,t,eu,n)}function ri(e,t,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var l=(t=r(t))!=t,u=null===t,c=ol(t),s=t===n;o<a;){var d=ht((o+a)/2),f=r(e[d]),h=f!==n,p=null===f,v=f==f,g=ol(f);if(l)var m=i||v;else m=s?v&&(i||h):u?v&&h&&(i||!p):c?v&&h&&!p&&(i||!g):!p&&!g&&(i?f<=t:f<t);m?o=d+1:a=d}return gn(a,4294967294)}function ii(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],l=t?t(a):a;if(!n||!Na(l,u)){var u=l;o[i++]=0===a?0:a}}return o}function oi(e){return"number"==typeof e?e:ol(e)?d:+e}function ai(e){if("string"==typeof e)return e;if(za(e))return Rt(e,ai)+"";if(ol(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Pt,o=e.length,a=!0,l=[],u=l;if(n)a=!1,i=Mt;else if(o>=200){var c=t?null:Yi(e);if(c)return un(c);a=!1,i=Jt,u=new Gn}else u=t?[]:l;e:for(;++r<o;){var s=e[r],d=t?t(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),l.push(s)}else i(u,d,n)||(u!==l&&u.push(d),l.push(s))}return l}function ui(e,t){return null==(e=So(e,t=gi(t,e)))||delete e[Do($o(t))]}function ci(e,t,n,r){return Xr(e,t,n(wr(e,t)),r)}function si(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ei(e,r?0:o,r?o+1:i):ei(e,r?o+1:0,r?i:o)}function di(e,t){var n=e;return n instanceof zn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,At([e],t.args))}),n)}function fi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,o=re(r);++i<r;)for(var a=e[i],l=-1;++l<r;)l!=i&&(o[i]=ur(o[i]||a,e[l],t,n));return li(pr(o,1),t,n)}function hi(e,t,r){for(var i=-1,o=e.length,a=t.length,l={};++i<o;){var u=i<a?t[i]:n;r(l,e[i],u)}return l}function pi(e){return Ua(e)?e:[]}function vi(e){return"function"==typeof e?e:eu}function gi(e,t){return za(e)?e:yo(e,t)?[e]:jo(vl(e))}var mi=$r;function yi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ei(e,t,r)}var bi=at||function(e){return dt.clearTimeout(e)};function wi(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function xi(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ki(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=ol(e),l=t!==n,u=null===t,c=t==t,s=ol(t);if(!u&&!s&&!a&&e>t||a&&l&&c&&!u&&!s||i&&l&&c||!r&&c||!o)return 1;if(!i&&!a&&!s&&e<t||s&&r&&o&&!i&&!a||u&&r&&o||!l&&o||!c)return-1}return 0}function Ci(e,t,n,r){for(var i=-1,o=e.length,a=n.length,l=-1,u=t.length,c=vn(o-a,0),s=re(u+c),d=!r;++l<u;)s[l]=t[l];for(;++i<a;)(d||i<o)&&(s[n[i]]=e[i]);for(;c--;)s[l++]=e[i++];return s}function Si(e,t,n,r){for(var i=-1,o=e.length,a=-1,l=n.length,u=-1,c=t.length,s=vn(o-l,0),d=re(s+c),f=!r;++i<s;)d[i]=e[i];for(var h=i;++u<c;)d[h+u]=t[u];for(;++a<l;)(f||i<o)&&(d[h+n[a]]=e[i++]);return d}function Oi(e,t){var n=-1,r=e.length;for(t||(t=re(r));++n<r;)t[n]=e[n];return t}function Ei(e,t,r,i){var o=!r;r||(r={});for(var a=-1,l=t.length;++a<l;){var u=t[a],c=i?i(r[u],e[u],u,r,e):n;c===n&&(c=e[u]),o?nr(r,u,c):Zn(r,u,c)}return r}function Ii(e,t){return function(n,r){var i=za(n)?Ct:er,o=t?t():{};return i(n,e,oo(r,2),o)}}function Pi(e){return $r((function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,l=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,l&&mo(r[0],r[1],l)&&(a=o<3?n:a,o=1),t=Ce(t);++i<o;){var u=r[i];u&&e(t,u,i,a)}return t}))}function Mi(e,t){return function(n,r){if(null==n)return n;if(!Wa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ce(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ri(e){return function(t,n,r){for(var i=-1,o=Ce(t),a=r(t),l=a.length;l--;){var u=a[e?l:++i];if(!1===n(o[u],u,o))break}return t}}function Ai(e){return function(t){var r=rn(t=vl(t))?sn(t):n,i=r?r[0]:t.charAt(0),o=r?yi(r,1).join(""):t.slice(1);return i[e]()+o}}function ji(e){return function(t){return jt(ql(Vl(t).replace(Xe,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ln(e.prototype),r=e.apply(n,t);return Ja(r)?r:n}}function Ti(e){return function(t,r,i){var o=Ce(t);if(!Wa(t)){var a=oo(r,3);t=Il(t),r=function(e){return a(o[e],e,o)}}var l=e(t,r,i);return l>-1?o[a?t[l]:l]:n}}function Fi(e){return Qi((function(t){var i=t.length,o=i,a=Vn.prototype.thru;for(e&&t.reverse();o--;){var l=t[o];if("function"!=typeof l)throw new Ee(r);if(a&&!u&&"wrapper"==ro(l))var u=new Vn([],!0)}for(o=u?o:i;++o<i;){var c=ro(l=t[o]),s="wrapper"==c?no(l):n;u=s&&bo(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?u[ro(s[0])].apply(u,s[3]):1==l.length&&bo(l)?u[c]():u.thru(l)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&za(n))return u.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function Ni(e,t,r,i,o,a,u,c,s,d){var f=t&l,h=1&t,p=2&t,v=24&t,g=512&t,m=p?n:Di(e);return function l(){for(var y=arguments.length,b=re(y),w=y;w--;)b[w]=arguments[w];if(v)var _=io(l),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,_);if(i&&(b=Ci(b,i,o,v)),a&&(b=Si(b,a,u,v)),y-=x,v&&y<d){var k=ln(b,_);return Ui(e,t,Ni,l.placeholder,r,b,k,c,s,d-y)}var C=h?r:this,S=p?C[e]:e;return y=b.length,c?b=function(e,t){for(var r=e.length,i=gn(t.length,r),o=Oi(e);i--;){var a=t[i];e[i]=go(a,r)?o[a]:n}return e}(b,c):g&&y>1&&b.reverse(),f&&s<y&&(b.length=s),this&&this!==dt&&this instanceof l&&(S=m||Di(S)),S.apply(C,b)}}function Li(e,t){return function(n,r){return function(e,t,n,r){return mr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Bi(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=ai(r),i=ai(i)):(r=oi(r),i=oi(i)),o=e(r,i)}return o}}function Vi(e){return Qi((function(t){return t=Rt(t,Kt(oo())),$r((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function zi(e,t){var r=(t=t===n?" ":ai(t)).length;if(r<2)return r?Yr(t,e):t;var i=Yr(t,ft(e/cn(t)));return rn(t)?yi(sn(i),0,e).join(""):i.slice(0,e)}function Hi(e){return function(t,r,i){return i&&"number"!=typeof i&&mo(t,r,i)&&(r=i=n),t=sl(t),r===n?(r=t,t=0):r=sl(r),function(e,t,n,r){for(var i=-1,o=vn(ft((t-e)/(n||1)),0),a=re(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:sl(i),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=hl(t),n=hl(n)),e(t,n)}}function Ui(e,t,r,i,o,l,u,c,s,d){var f=8&t;t|=f?a:64,4&(t&=~(f?64:a))||(t&=-4);var h=[e,t,o,f?l:n,f?u:n,f?n:l,f?n:u,c,s,d],p=r.apply(n,h);return bo(e)&&Eo(p,h),p.placeholder=i,Mo(p,e,t)}function Gi(e){var t=ke[e];return function(e,n){if(e=hl(e),(n=null==n?0:gn(dl(n),292))&&Ft(e)){var r=(vl(e)+"e").split("e");return+((r=(vl(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Cn&&1/un(new Cn([,-0]))[1]==c?function(e){return new Cn(e)}:ou;function $i(e){return function(t){var n=fo(t);return n==_?on(t):n==O?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return Rt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function qi(e,t,i,c,s,d,f,h){var p=2&t;if(!p&&"function"!=typeof e)throw new Ee(r);var v=c?c.length:0;if(v||(t&=-97,c=s=n),f=f===n?f:vn(dl(f),0),h=h===n?h:dl(h),v-=s?s.length:0,64&t){var g=c,m=s;c=s=n}var y=p?n:no(e),b=[e,t,i,c,s,g,m,d,f,h];if(y&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,c=r==l&&8==n||r==l&&n==u&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!c)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var d=e[3];e[3]=d?Ci(d,s,t[4]):s,e[4]=d?ln(e[3],o):t[4]}(s=t[5])&&(d=e[5],e[5]=d?Si(d,s,t[6]):s,e[6]=d?ln(e[5],o):t[6]),(s=t[7])&&(e[7]=s),r&l&&(e[8]=null==e[8]?t[8]:gn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,y),e=b[0],t=b[1],i=b[2],c=b[3],s=b[4],!(h=b[9]=b[9]===n?p?0:e.length:vn(b[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,r){var i=Di(e);return function o(){for(var a=arguments.length,l=re(a),u=a,c=io(o);u--;)l[u]=arguments[u];var s=a<3&&l[0]!==c&&l[a-1]!==c?[]:ln(l,c);return(a-=s.length)<r?Ui(e,t,Ni,o.placeholder,n,l,s,n,n,r-a):kt(this&&this!==dt&&this instanceof o?i:e,this,l)}}(e,t,h):t!=a&&33!=t||s.length?Ni.apply(n,b):function(e,t,n,r){var i=1&t,o=Di(e);return function t(){for(var a=-1,l=arguments.length,u=-1,c=r.length,s=re(c+l),d=this&&this!==dt&&this instanceof t?o:e;++u<c;)s[u]=r[u];for(;l--;)s[u++]=arguments[++a];return kt(d,i?n:this,s)}}(e,t,i,c);else var w=function(e,t,n){var r=1&t,i=Di(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return Mo((y?Jr:Eo)(w,b),e,t)}function Ki(e,t,r,i){return e===n||Na(e,Me[r])&&!je.call(i,r)?t:e}function Xi(e,t,r,i,o,a){return Ja(e)&&Ja(t)&&(a.set(t,e),Br(e,t,n,Xi,a),a.delete(t)),e}function Ji(e){return tl(e)?n:e}function Zi(e,t,r,i,o,a){var l=1&r,u=e.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var s=a.get(e),d=a.get(t);if(s&&d)return s==t&&d==e;var f=-1,h=!0,p=2&r?new Gn:n;for(a.set(e,t),a.set(t,e);++f<u;){var v=e[f],g=t[f];if(i)var m=l?i(g,v,f,t,e,a):i(v,g,f,e,t,a);if(m!==n){if(m)continue;h=!1;break}if(p){if(!Tt(t,(function(e,t){if(!Jt(p,t)&&(v===e||o(v,e,r,i,a)))return p.push(t)}))){h=!1;break}}else if(v!==g&&!o(v,g,r,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Qi(e){return Po(Co(e,n,Ho),e+"")}function eo(e){return _r(e,Il,co)}function to(e){return _r(e,Pl,so)}var no=En?function(e){return En.get(e)}:ou;function ro(e){for(var t=e.name+"",n=In[t],r=je.call(In,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function io(e){return(je.call(Nn,"placeholder")?Nn:e).placeholder}function oo(){var e=Nn.iteratee||tu;return e=e===tu?Ar:e,arguments.length?e(arguments[0],arguments[1]):e}function ao(e,t){var n=e.__data__;return function(e){var t=ex(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function lo(e){for(var t=Il(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,xo(i)]}return t}function uo(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Rr(r)?r:n}var co=vt?function(e){return null==e?[]:(e=Ce(e),It(vt(e),(function(t){return Ye.call(e,t)})))}:fu,so=vt?function(e){for(var t=[];e;)At(t,co(e)),e=Ue(e);return t}:fu,fo=xr;function ho(e,t,n){for(var r=-1,i=(t=gi(t,e)).length,o=!1;++r<i;){var a=Do(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xa(i)&&go(a,i)&&(za(e)||Va(e))}function po(e){return"function"!=typeof e.constructor||_o(e)?{}:Ln(Ue(e))}function vo(e){return za(e)||Va(e)||!!(qe&&e&&e[qe])}function go(e,t){var n=ex(e);return!!(t=null==t?s:t)&&("number"==n||"symbol"!=n&&ge.test(e))&&e>-1&&e%1==0&&e<t}function mo(e,t,n){if(!Ja(n))return!1;var r=ex(t);return!!("number"==r?Wa(n)&&go(t,n.length):"string"==r&&t in n)&&Na(n[t],e)}function yo(e,t){if(za(e))return!1;var n=ex(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ol(e))||Z.test(e)||!J.test(e)||null!=t&&e in Ce(t)}function bo(e){var t=ro(e),n=Nn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=no(n);return!!r&&e===r[0]}(_n&&fo(new _n(new ArrayBuffer(1)))!=R||xn&&fo(new xn)!=_||kn&&fo(kn.resolve())!=C||Cn&&fo(new Cn)!=O||Sn&&fo(new Sn)!=P)&&(fo=function(e){var t=xr(e),r=t==k?e.constructor:n,i=r?To(r):"";if(i)switch(i){case Pn:return R;case Mn:return _;case Rn:return C;case An:return O;case jn:return P}return t});var wo=Re?qa:hu;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Me)}function xo(e){return e==e&&!Ja(e)}function ko(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Ce(r))}}function Co(e,t,r){return t=vn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=vn(n.length-t,0),a=re(o);++i<o;)a[i]=n[t+i];i=-1;for(var l=re(t+1);++i<t;)l[i]=n[i];return l[t]=r(a),kt(e,this,l)}}function So(e,t){return t.length<2?e:wr(e,ei(t,0,-1))}function Oo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Eo=Ro(Jr),Io=st||function(e,t){return dt.setTimeout(e,t)},Po=Ro(Zr);function Mo(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return St(h,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(r),n)))}function Ro(e){var t=0,r=0;return function(){var i=mn(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ao(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=Gr(r,o),l=e[a];e[a]=e[r],e[r]=l}return e.length=t,e}var jo=function(e){var t=Ra(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,(function(e,n,r,i){t.push(r?i.replace(ce,"$1"):n||e)})),t}));function Do(e){if("string"==typeof e||ol(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function To(e){if(null!=e){try{return Ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof zn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var No=$r((function(e,t){return Ua(e)?ur(e,pr(t,1,Ua,!0)):[]})),Lo=$r((function(e,t){var r=$o(t);return Ua(r)&&(r=n),Ua(e)?ur(e,pr(t,1,Ua,!0),oo(r,2)):[]})),Bo=$r((function(e,t){var r=$o(t);return Ua(r)&&(r=n),Ua(e)?ur(e,pr(t,1,Ua,!0),n,r):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:dl(n);return i<0&&(i=vn(r+i,0)),Lt(e,oo(t,3),i)}function zo(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=dl(r),o=r<0?vn(i+o,0):gn(o,i-1)),Lt(e,oo(t,3),o,!0)}function Ho(e){return null!=e&&e.length?pr(e,1):[]}function Wo(e){return e&&e.length?e[0]:n}var Uo=$r((function(e){var t=Rt(e,pi);return t.length&&t[0]===e[0]?Or(t):[]})),Go=$r((function(e){var t=$o(e),r=Rt(e,pi);return t===$o(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Or(r,oo(t,2)):[]})),Yo=$r((function(e){var t=$o(e),r=Rt(e,pi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Or(r,n,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:n}var qo=$r(Ko);function Ko(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var Xo=Qi((function(e,t){var n=null==e?0:e.length,r=rr(e,t);return Ur(e,Rt(t,(function(e){return go(e,n)?+e:e})).sort(ki)),r}));function Jo(e){return null==e?e:wn.call(e)}var Zo=$r((function(e){return li(pr(e,1,Ua,!0))})),Qo=$r((function(e){var t=$o(e);return Ua(t)&&(t=n),li(pr(e,1,Ua,!0),oo(t,2))})),ea=$r((function(e){var t=$o(e);return t="function"==typeof t?t:n,li(pr(e,1,Ua,!0),n,t)}));function ta(e){if(!e||!e.length)return[];var t=0;return e=It(e,(function(e){if(Ua(e))return t=vn(e.length,t),!0})),$t(t,(function(t){return Rt(e,Wt(t))}))}function na(e,t){if(!e||!e.length)return[];var r=ta(e);return null==t?r:Rt(r,(function(e){return kt(t,n,e)}))}var ra=$r((function(e,t){return Ua(e)?ur(e,t):[]})),ia=$r((function(e){return fi(It(e,Ua))})),oa=$r((function(e){var t=$o(e);return Ua(t)&&(t=n),fi(It(e,Ua),oo(t,2))})),aa=$r((function(e){var t=$o(e);return t="function"==typeof t?t:n,fi(It(e,Ua),n,t)})),la=$r(ta),ua=$r((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,na(e,r)}));function ca(e){var t=Nn(e);return t.__chain__=!0,t}function sa(e,t){return t(e)}var da=Qi((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return rr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof zn&&go(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:sa,args:[o],thisArg:n}),new Vn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(o)})),fa=Ii((function(e,t,n){je.call(e,n)?++e[n]:nr(e,n,1)})),ha=Ti(Vo),pa=Ti(zo);function va(e,t){return(za(e)?St:cr)(e,oo(t,3))}function ga(e,t){return(za(e)?Ot:sr)(e,oo(t,3))}var ma=Ii((function(e,t,n){je.call(e,n)?e[n].push(t):nr(e,n,[t])})),ya=$r((function(e,t,n){var r=-1,i="function"==typeof t,o=Wa(e)?re(e.length):[];return cr(e,(function(e){o[++r]=i?kt(t,e,n):Er(e,t,n)})),o})),ba=Ii((function(e,t,n){nr(e,n,t)}));function wa(e,t){return(za(e)?Rt:Fr)(e,oo(t,3))}var _a=Ii((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),xa=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&mo(e,t[0],t[1])?t=[]:n>2&&mo(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,pr(t,1),[])})),ka=ct||function(){return dt.Date.now()};function Ca(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,qi(e,l,n,n,n,n,t)}function Sa(e,t){var i;if("function"!=typeof t)throw new Ee(r);return e=dl(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Oa=$r((function(e,t,n){var r=1;if(n.length){var i=ln(n,io(Oa));r|=a}return qi(e,r,t,n,i)})),Ea=$r((function(e,t,n){var r=3;if(n.length){var i=ln(n,io(Ea));r|=a}return qi(t,r,e,n,i)}));function Ia(e,t,i){var o,a,l,u,c,s,d=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Ee(r);function v(t){var r=o,i=a;return o=a=n,d=t,u=e.apply(i,r)}function g(e){var r=e-s;return s===n||r>=t||r<0||h&&e-d>=l}function m(){var e=ka();if(g(e))return y(e);c=Io(m,function(e){var n=t-(e-s);return h?gn(n,l-(e-d)):n}(e))}function y(e){return c=n,p&&o?v(e):(o=a=n,u)}function b(){var e=ka(),r=g(e);if(o=arguments,a=this,s=e,r){if(c===n)return function(e){return d=e,c=Io(m,t),f?v(e):u}(s);if(h)return bi(c),c=Io(m,t),v(s)}return c===n&&(c=Io(m,t)),u}return t=hl(t)||0,Ja(i)&&(f=!!i.leading,l=(h="maxWait"in i)?vn(hl(i.maxWait)||0,t):l,p="trailing"in i?!!i.trailing:p),b.cancel=function(){c!==n&&bi(c),d=0,o=s=a=c=n},b.flush=function(){return c===n?u:y(ka())},b}var Pa=$r((function(e,t){return lr(e,1,t)})),Ma=$r((function(e,t,n){return lr(e,hl(t)||0,n)}));function Ra(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ee(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ra.Cache||Un),n}function Aa(e){if("function"!=typeof e)throw new Ee(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ra.Cache=Un;var ja=mi((function(e,t){var n=(t=1==t.length&&za(t[0])?Rt(t[0],Kt(oo())):Rt(pr(t,1),Kt(oo()))).length;return $r((function(r){for(var i=-1,o=gn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),Da=$r((function(e,t){var r=ln(t,io(Da));return qi(e,a,n,t,r)})),Ta=$r((function(e,t){var r=ln(t,io(Ta));return qi(e,64,n,t,r)})),Fa=Qi((function(e,t){return qi(e,u,n,n,n,t)}));function Na(e,t){return e===t||e!=e&&t!=t}var La=Wi(kr),Ba=Wi((function(e,t){return e>=t})),Va=Ir(function(){return arguments}())?Ir:function(e){return Za(e)&&je.call(e,"callee")&&!Ye.call(e,"callee")},za=re.isArray,Ha=mt?Kt(mt):function(e){return Za(e)&&xr(e)==M};function Wa(e){return null!=e&&Xa(e.length)&&!qa(e)}function Ua(e){return Za(e)&&Wa(e)}var Ga=gt||hu,Ya=yt?Kt(yt):function(e){return Za(e)&&xr(e)==m};function $a(e){if(!Za(e))return!1;var t=xr(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!tl(e)}function qa(e){if(!Ja(e))return!1;var t=xr(e);return t==b||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ka(e){return"number"==typeof e&&e==dl(e)}function Xa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Ja(e){var t=ex(e);return null!=e&&("object"==t||"function"==t)}function Za(e){return null!=e&&"object"==ex(e)}var Qa=bt?Kt(bt):function(e){return Za(e)&&fo(e)==_};function el(e){return"number"==typeof e||Za(e)&&xr(e)==x}function tl(e){if(!Za(e)||xr(e)!=k)return!1;var t=Ue(e);if(null===t)return!0;var n=je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ae.call(n)==Ne}var nl=wt?Kt(wt):function(e){return Za(e)&&xr(e)==S},rl=_t?Kt(_t):function(e){return Za(e)&&fo(e)==O};function il(e){return"string"==typeof e||!za(e)&&Za(e)&&xr(e)==E}function ol(e){return"symbol"==ex(e)||Za(e)&&xr(e)==I}var al=xt?Kt(xt):function(e){return Za(e)&&Xa(e.length)&&!!it[xr(e)]},ll=Wi(Tr),ul=Wi((function(e,t){return e<=t}));function cl(e){if(!e)return[];if(Wa(e))return il(e)?sn(e):Oi(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=fo(e);return(t==_?on:t==O?un:Nl)(e)}function sl(e){return e?(e=hl(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function dl(e){var t=sl(e),n=t%1;return t==t?n?t-n:t:0}function fl(e){return e?ir(dl(e),0,f):0}function hl(e){if("number"==typeof e)return e;if(ol(e))return d;if(Ja(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ja(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=qt(e);var n=he.test(e);return n||ve.test(e)?ut(e.slice(2),n?2:8):fe.test(e)?d:+e}function pl(e){return Ei(e,Pl(e))}function vl(e){return null==e?"":ai(e)}var gl=Pi((function(e,t){if(_o(t)||Wa(t))Ei(t,Il(t),e);else for(var n in t)je.call(t,n)&&Zn(e,n,t[n])})),ml=Pi((function(e,t){Ei(t,Pl(t),e)})),yl=Pi((function(e,t,n,r){Ei(t,Pl(t),e,r)})),bl=Pi((function(e,t,n,r){Ei(t,Il(t),e,r)})),wl=Qi(rr),_l=$r((function(e,t){e=Ce(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&mo(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],l=Pl(a),u=-1,c=l.length;++u<c;){var s=l[u],d=e[s];(d===n||Na(d,Me[s])&&!je.call(e,s))&&(e[s]=a[s])}return e})),xl=$r((function(e){return e.push(n,Xi),kt(Rl,n,e)}));function kl(e,t,r){var i=null==e?n:wr(e,t);return i===n?r:i}function Cl(e,t){return null!=e&&ho(e,t,Sr)}var Sl=Li((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),Jl(eu)),Ol=Li((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),je.call(e,t)?e[t].push(n):e[t]=[n]}),oo),El=$r(Er);function Il(e){return Wa(e)?$n(e):jr(e)}function Pl(e){return Wa(e)?$n(e,!0):Dr(e)}var Ml=Pi((function(e,t,n){Br(e,t,n)})),Rl=Pi((function(e,t,n,r){Br(e,t,n,r)})),Al=Qi((function(e,t){var n={};if(null==e)return n;var r=!1;t=Rt(t,(function(t){return t=gi(t,e),r||(r=t.length>1),t})),Ei(e,to(e),n),r&&(n=or(n,7,Ji));for(var i=t.length;i--;)ui(n,t[i]);return n})),jl=Qi((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return Cl(e,n)}))}(e,t)}));function Dl(e,t){if(null==e)return{};var n=Rt(to(e),(function(e){return[e]}));return t=oo(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Tl=$i(Il),Fl=$i(Pl);function Nl(e){return null==e?[]:Xt(e,Il(e))}var Ll=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?Bl(t):t)}));function Bl(e){return $l(vl(e).toLowerCase())}function Vl(e){return(e=vl(e))&&e.replace(me,en).replace(Je,"")}var zl=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Hl=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Wl=Ai("toLowerCase"),Ul=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Gl=ji((function(e,t,n){return e+(n?" ":"")+$l(t)})),Yl=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$l=Ai("toUpperCase");function ql(e,t,r){return e=vl(e),(t=r?n:t)===n?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Kl=$r((function(e,t){try{return kt(e,n,t)}catch(e){return $a(e)?e:new _e(e)}})),Xl=Qi((function(e,t){return St(t,(function(t){t=Do(t),nr(e,t,Oa(e[t],e))})),e}));function Jl(e){return function(){return e}}var Zl=Fi(),Ql=Fi(!0);function eu(e){return e}function tu(e){return Ar("function"==typeof e?e:or(e,1))}var nu=$r((function(e,t){return function(n){return Er(n,e,t)}})),ru=$r((function(e,t){return function(n){return Er(e,n,t)}}));function iu(e,t,n){var r=Il(t),i=br(t,r);null!=n||Ja(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=br(t,Il(t)));var o=!(Ja(n)&&"chain"in n&&!n.chain),a=qa(e);return St(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,At([this.value()],arguments))})})),e}function ou(){}var au=Vi(Rt),lu=Vi(Et),uu=Vi(Tt);function cu(e){return yo(e)?Wt(Do(e)):function(e){return function(t){return wr(t,e)}}(e)}var su=Hi(),du=Hi(!0);function fu(){return[]}function hu(){return!1}var pu,vu=Bi((function(e,t){return e+t}),0),gu=Gi("ceil"),mu=Bi((function(e,t){return e/t}),1),yu=Gi("floor"),bu=Bi((function(e,t){return e*t}),1),wu=Gi("round"),_u=Bi((function(e,t){return e-t}),0);return Nn.after=function(e,t){if("function"!=typeof t)throw new Ee(r);return e=dl(e),function(){if(--e<1)return t.apply(this,arguments)}},Nn.ary=Ca,Nn.assign=gl,Nn.assignIn=ml,Nn.assignInWith=yl,Nn.assignWith=bl,Nn.at=wl,Nn.before=Sa,Nn.bind=Oa,Nn.bindAll=Xl,Nn.bindKey=Ea,Nn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return za(e)?e:[e]},Nn.chain=ca,Nn.chunk=function(e,t,r){t=(r?mo(e,t,r):t===n)?1:vn(dl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,l=re(ft(i/t));o<i;)l[a++]=ei(e,o,o+=t);return l},Nn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Nn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=re(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return At(za(n)?Oi(n):[n],pr(t,1))},Nn.cond=function(e){var t=null==e?0:e.length,n=oo();return e=t?Rt(e,(function(e){if("function"!=typeof e[1])throw new Ee(r);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Nn.conforms=function(e){return function(e){var t=Il(e);return function(n){return ar(n,e,t)}}(or(e,1))},Nn.constant=Jl,Nn.countBy=fa,Nn.create=function(e,t){var n=Ln(e);return null==t?n:tr(n,t)},Nn.curry=function e(t,r,i){var o=qi(t,8,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Nn.curryRight=function e(t,r,i){var o=qi(t,16,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Nn.debounce=Ia,Nn.defaults=_l,Nn.defaultsDeep=xl,Nn.defer=Pa,Nn.delay=Ma,Nn.difference=No,Nn.differenceBy=Lo,Nn.differenceWith=Bo,Nn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ei(e,(t=r||t===n?1:dl(t))<0?0:t,i):[]},Nn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ei(e,0,(t=i-(t=r||t===n?1:dl(t)))<0?0:t):[]},Nn.dropRightWhile=function(e,t){return e&&e.length?si(e,oo(t,3),!0,!0):[]},Nn.dropWhile=function(e,t){return e&&e.length?si(e,oo(t,3),!0):[]},Nn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&mo(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=dl(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:dl(i))<0&&(i+=o),i=r>i?0:fl(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},Nn.filter=function(e,t){return(za(e)?It:hr)(e,oo(t,3))},Nn.flatMap=function(e,t){return pr(wa(e,t),1)},Nn.flatMapDeep=function(e,t){return pr(wa(e,t),c)},Nn.flatMapDepth=function(e,t,r){return r=r===n?1:dl(r),pr(wa(e,t),r)},Nn.flatten=Ho,Nn.flattenDeep=function(e){return null!=e&&e.length?pr(e,c):[]},Nn.flattenDepth=function(e,t){return null!=e&&e.length?pr(e,t=t===n?1:dl(t)):[]},Nn.flip=function(e){return qi(e,512)},Nn.flow=Zl,Nn.flowRight=Ql,Nn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Nn.functions=function(e){return null==e?[]:br(e,Il(e))},Nn.functionsIn=function(e){return null==e?[]:br(e,Pl(e))},Nn.groupBy=ma,Nn.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Nn.intersection=Uo,Nn.intersectionBy=Go,Nn.intersectionWith=Yo,Nn.invert=Sl,Nn.invertBy=Ol,Nn.invokeMap=ya,Nn.iteratee=tu,Nn.keyBy=ba,Nn.keys=Il,Nn.keysIn=Pl,Nn.map=wa,Nn.mapKeys=function(e,t){var n={};return t=oo(t,3),mr(e,(function(e,r,i){nr(n,t(e,r,i),e)})),n},Nn.mapValues=function(e,t){var n={};return t=oo(t,3),mr(e,(function(e,r,i){nr(n,r,t(e,r,i))})),n},Nn.matches=function(e){return Nr(or(e,1))},Nn.matchesProperty=function(e,t){return Lr(e,or(t,1))},Nn.memoize=Ra,Nn.merge=Ml,Nn.mergeWith=Rl,Nn.method=nu,Nn.methodOf=ru,Nn.mixin=iu,Nn.negate=Aa,Nn.nthArg=function(e){return e=dl(e),$r((function(t){return Vr(t,e)}))},Nn.omit=Al,Nn.omitBy=function(e,t){return Dl(e,Aa(oo(t)))},Nn.once=function(e){return Sa(2,e)},Nn.orderBy=function(e,t,r,i){return null==e?[]:(za(t)||(t=null==t?[]:[t]),za(r=i?n:r)||(r=null==r?[]:[r]),zr(e,t,r))},Nn.over=au,Nn.overArgs=ja,Nn.overEvery=lu,Nn.overSome=uu,Nn.partial=Da,Nn.partialRight=Ta,Nn.partition=_a,Nn.pick=jl,Nn.pickBy=Dl,Nn.property=cu,Nn.propertyOf=function(e){return function(t){return null==e?n:wr(e,t)}},Nn.pull=qo,Nn.pullAll=Ko,Nn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,oo(n,2)):e},Nn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Wr(e,t,n,r):e},Nn.pullAt=Xo,Nn.range=su,Nn.rangeRight=du,Nn.rearg=Fa,Nn.reject=function(e,t){return(za(e)?It:hr)(e,Aa(oo(t,3)))},Nn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=oo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Ur(e,i),n},Nn.rest=function(e,t){if("function"!=typeof e)throw new Ee(r);return $r(e,t=t===n?t:dl(t))},Nn.reverse=Jo,Nn.sampleSize=function(e,t,r){return t=(r?mo(e,t,r):t===n)?1:dl(t),(za(e)?Kn:Kr)(e,t)},Nn.set=function(e,t,n){return null==e?e:Xr(e,t,n)},Nn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Xr(e,t,r,i)},Nn.shuffle=function(e){return(za(e)?Xn:Qr)(e)},Nn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&mo(e,t,r)?(t=0,r=i):(t=null==t?0:dl(t),r=r===n?i:dl(r)),ei(e,t,r)):[]},Nn.sortBy=xa,Nn.sortedUniq=function(e){return e&&e.length?ii(e):[]},Nn.sortedUniqBy=function(e,t){return e&&e.length?ii(e,oo(t,2)):[]},Nn.split=function(e,t,r){return r&&"number"!=typeof r&&mo(e,t,r)&&(t=r=n),(r=r===n?f:r>>>0)?(e=vl(e))&&("string"==typeof t||null!=t&&!nl(t))&&!(t=ai(t))&&rn(e)?yi(sn(e),0,r):e.split(t,r):[]},Nn.spread=function(e,t){if("function"!=typeof e)throw new Ee(r);return t=null==t?0:vn(dl(t),0),$r((function(n){var r=n[t],i=yi(n,0,t);return r&&At(i,r),kt(e,this,i)}))},Nn.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Nn.take=function(e,t,r){return e&&e.length?ei(e,0,(t=r||t===n?1:dl(t))<0?0:t):[]},Nn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ei(e,(t=i-(t=r||t===n?1:dl(t)))<0?0:t,i):[]},Nn.takeRightWhile=function(e,t){return e&&e.length?si(e,oo(t,3),!1,!0):[]},Nn.takeWhile=function(e,t){return e&&e.length?si(e,oo(t,3)):[]},Nn.tap=function(e,t){return t(e),e},Nn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new Ee(r);return Ja(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ia(e,t,{leading:i,maxWait:t,trailing:o})},Nn.thru=sa,Nn.toArray=cl,Nn.toPairs=Tl,Nn.toPairsIn=Fl,Nn.toPath=function(e){return za(e)?Rt(e,Do):ol(e)?[e]:Oi(jo(vl(e)))},Nn.toPlainObject=pl,Nn.transform=function(e,t,n){var r=za(e),i=r||Ga(e)||al(e);if(t=oo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ja(e)&&qa(o)?Ln(Ue(e)):{}}return(i?St:mr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Nn.unary=function(e){return Ca(e,1)},Nn.union=Zo,Nn.unionBy=Qo,Nn.unionWith=ea,Nn.uniq=function(e){return e&&e.length?li(e):[]},Nn.uniqBy=function(e,t){return e&&e.length?li(e,oo(t,2)):[]},Nn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?li(e,n,t):[]},Nn.unset=function(e,t){return null==e||ui(e,t)},Nn.unzip=ta,Nn.unzipWith=na,Nn.update=function(e,t,n){return null==e?e:ci(e,t,vi(n))},Nn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ci(e,t,vi(r),i)},Nn.values=Nl,Nn.valuesIn=function(e){return null==e?[]:Xt(e,Pl(e))},Nn.without=ra,Nn.words=ql,Nn.wrap=function(e,t){return Da(vi(t),e)},Nn.xor=ia,Nn.xorBy=oa,Nn.xorWith=aa,Nn.zip=la,Nn.zipObject=function(e,t){return hi(e||[],t||[],Zn)},Nn.zipObjectDeep=function(e,t){return hi(e||[],t||[],Xr)},Nn.zipWith=ua,Nn.entries=Tl,Nn.entriesIn=Fl,Nn.extend=ml,Nn.extendWith=yl,iu(Nn,Nn),Nn.add=vu,Nn.attempt=Kl,Nn.camelCase=Ll,Nn.capitalize=Bl,Nn.ceil=gu,Nn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=hl(r))==r?r:0),t!==n&&(t=(t=hl(t))==t?t:0),ir(hl(e),t,r)},Nn.clone=function(e){return or(e,4)},Nn.cloneDeep=function(e){return or(e,5)},Nn.cloneDeepWith=function(e,t){return or(e,5,t="function"==typeof t?t:n)},Nn.cloneWith=function(e,t){return or(e,4,t="function"==typeof t?t:n)},Nn.conformsTo=function(e,t){return null==t||ar(e,t,Il(t))},Nn.deburr=Vl,Nn.defaultTo=function(e,t){return null==e||e!=e?t:e},Nn.divide=mu,Nn.endsWith=function(e,t,r){e=vl(e),t=ai(t);var i=e.length,o=r=r===n?i:ir(dl(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},Nn.eq=Na,Nn.escape=function(e){return(e=vl(e))&&$.test(e)?e.replace(G,tn):e},Nn.escapeRegExp=function(e){return(e=vl(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Nn.every=function(e,t,r){var i=za(e)?Et:dr;return r&&mo(e,t,r)&&(t=n),i(e,oo(t,3))},Nn.find=ha,Nn.findIndex=Vo,Nn.findKey=function(e,t){return Nt(e,oo(t,3),mr)},Nn.findLast=pa,Nn.findLastIndex=zo,Nn.findLastKey=function(e,t){return Nt(e,oo(t,3),yr)},Nn.floor=yu,Nn.forEach=va,Nn.forEachRight=ga,Nn.forIn=function(e,t){return null==e?e:vr(e,oo(t,3),Pl)},Nn.forInRight=function(e,t){return null==e?e:gr(e,oo(t,3),Pl)},Nn.forOwn=function(e,t){return e&&mr(e,oo(t,3))},Nn.forOwnRight=function(e,t){return e&&yr(e,oo(t,3))},Nn.get=kl,Nn.gt=La,Nn.gte=Ba,Nn.has=function(e,t){return null!=e&&ho(e,t,Cr)},Nn.hasIn=Cl,Nn.head=Wo,Nn.identity=eu,Nn.includes=function(e,t,n,r){e=Wa(e)?e:Nl(e),n=n&&!r?dl(n):0;var i=e.length;return n<0&&(n=vn(i+n,0)),il(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Bt(e,t,n)>-1},Nn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:dl(n);return i<0&&(i=vn(r+i,0)),Bt(e,t,i)},Nn.inRange=function(e,t,r){return t=sl(t),r===n?(r=t,t=0):r=sl(r),function(e,t,n){return e>=gn(t,n)&&e<vn(t,n)}(e=hl(e),t,r)},Nn.invoke=El,Nn.isArguments=Va,Nn.isArray=za,Nn.isArrayBuffer=Ha,Nn.isArrayLike=Wa,Nn.isArrayLikeObject=Ua,Nn.isBoolean=function(e){return!0===e||!1===e||Za(e)&&xr(e)==g},Nn.isBuffer=Ga,Nn.isDate=Ya,Nn.isElement=function(e){return Za(e)&&1===e.nodeType&&!tl(e)},Nn.isEmpty=function(e){if(null==e)return!0;if(Wa(e)&&(za(e)||"string"==typeof e||"function"==typeof e.splice||Ga(e)||al(e)||Va(e)))return!e.length;var t=fo(e);if(t==_||t==O)return!e.size;if(_o(e))return!jr(e).length;for(var n in e)if(je.call(e,n))return!1;return!0},Nn.isEqual=function(e,t){return Pr(e,t)},Nn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Pr(e,t,n,r):!!i},Nn.isError=$a,Nn.isFinite=function(e){return"number"==typeof e&&Ft(e)},Nn.isFunction=qa,Nn.isInteger=Ka,Nn.isLength=Xa,Nn.isMap=Qa,Nn.isMatch=function(e,t){return e===t||Mr(e,t,lo(t))},Nn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Mr(e,t,lo(t),r)},Nn.isNaN=function(e){return el(e)&&e!=+e},Nn.isNative=function(e){if(wo(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Nn.isNil=function(e){return null==e},Nn.isNull=function(e){return null===e},Nn.isNumber=el,Nn.isObject=Ja,Nn.isObjectLike=Za,Nn.isPlainObject=tl,Nn.isRegExp=nl,Nn.isSafeInteger=function(e){return Ka(e)&&e>=-9007199254740991&&e<=s},Nn.isSet=rl,Nn.isString=il,Nn.isSymbol=ol,Nn.isTypedArray=al,Nn.isUndefined=function(e){return e===n},Nn.isWeakMap=function(e){return Za(e)&&fo(e)==P},Nn.isWeakSet=function(e){return Za(e)&&"[object WeakSet]"==xr(e)},Nn.join=function(e,t){return null==e?"":Ut.call(e,t)},Nn.kebabCase=zl,Nn.last=$o,Nn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=dl(r))<0?vn(i+o,0):gn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Lt(e,zt,o,!0)},Nn.lowerCase=Hl,Nn.lowerFirst=Wl,Nn.lt=ll,Nn.lte=ul,Nn.max=function(e){return e&&e.length?fr(e,eu,kr):n},Nn.maxBy=function(e,t){return e&&e.length?fr(e,oo(t,2),kr):n},Nn.mean=function(e){return Ht(e,eu)},Nn.meanBy=function(e,t){return Ht(e,oo(t,2))},Nn.min=function(e){return e&&e.length?fr(e,eu,Tr):n},Nn.minBy=function(e,t){return e&&e.length?fr(e,oo(t,2),Tr):n},Nn.stubArray=fu,Nn.stubFalse=hu,Nn.stubObject=function(){return{}},Nn.stubString=function(){return""},Nn.stubTrue=function(){return!0},Nn.multiply=bu,Nn.nth=function(e,t){return e&&e.length?Vr(e,dl(t)):n},Nn.noConflict=function(){return dt._===this&&(dt._=Le),this},Nn.noop=ou,Nn.now=ka,Nn.pad=function(e,t,n){e=vl(e);var r=(t=dl(t))?cn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(ht(i),n)+e+zi(ft(i),n)},Nn.padEnd=function(e,t,n){e=vl(e);var r=(t=dl(t))?cn(e):0;return t&&r<t?e+zi(t-r,n):e},Nn.padStart=function(e,t,n){e=vl(e);var r=(t=dl(t))?cn(e):0;return t&&r<t?zi(t-r,n)+e:e},Nn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),yn(vl(e).replace(ne,""),t||0)},Nn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&mo(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=sl(e),t===n?(t=e,e=0):t=sl(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=bn();return gn(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Gr(e,t)},Nn.reduce=function(e,t,n){var r=za(e)?jt:Gt,i=arguments.length<3;return r(e,oo(t,4),n,i,cr)},Nn.reduceRight=function(e,t,n){var r=za(e)?Dt:Gt,i=arguments.length<3;return r(e,oo(t,4),n,i,sr)},Nn.repeat=function(e,t,r){return t=(r?mo(e,t,r):t===n)?1:dl(t),Yr(vl(e),t)},Nn.replace=function(){var e=arguments,t=vl(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Nn.result=function(e,t,r){var i=-1,o=(t=gi(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[Do(t[i])];a===n&&(i=o,a=r),e=qa(a)?a.call(e):a}return e},Nn.round=wu,Nn.runInContext=e,Nn.sample=function(e){return(za(e)?qn:qr)(e)},Nn.size=function(e){if(null==e)return 0;if(Wa(e))return il(e)?cn(e):e.length;var t=fo(e);return t==_||t==O?e.size:jr(e).length},Nn.snakeCase=Ul,Nn.some=function(e,t,r){var i=za(e)?Tt:ti;return r&&mo(e,t,r)&&(t=n),i(e,oo(t,3))},Nn.sortedIndex=function(e,t){return ni(e,t)},Nn.sortedIndexBy=function(e,t,n){return ri(e,t,oo(n,2))},Nn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ni(e,t);if(r<n&&Na(e[r],t))return r}return-1},Nn.sortedLastIndex=function(e,t){return ni(e,t,!0)},Nn.sortedLastIndexBy=function(e,t,n){return ri(e,t,oo(n,2),!0)},Nn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ni(e,t,!0)-1;if(Na(e[n],t))return n}return-1},Nn.startCase=Gl,Nn.startsWith=function(e,t,n){return e=vl(e),n=null==n?0:ir(dl(n),0,e.length),t=ai(t),e.slice(n,n+t.length)==t},Nn.subtract=_u,Nn.sum=function(e){return e&&e.length?Yt(e,eu):0},Nn.sumBy=function(e,t){return e&&e.length?Yt(e,oo(t,2)):0},Nn.template=function(e,t,r){var i=Nn.templateSettings;r&&mo(e,t,r)&&(t=n),e=vl(e),t=yl({},t,i,Ki);var o,a,l=yl({},t.imports,i.imports,Ki),u=Il(l),c=Xt(l,u),s=0,d=t.interpolate||ye,f="__p += '",h=Se((t.escape||ye).source+"|"+d.source+"|"+(d===X?se:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),p="//# sourceURL="+(je.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rt+"]")+"\n";e.replace(h,(function(t,n,r,i,l,u){return r||(r=i),f+=e.slice(s,u).replace(be,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),l&&(a=!0,f+="';\n"+l+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=u+t.length,t})),f+="';\n";var v=je.call(t,"variable")&&t.variable;if(v){if(ue.test(v))throw new _e("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(z,""):f).replace(H,"$1").replace(W,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Kl((function(){return xe(u,p+"return "+f).apply(n,c)}));if(g.source=f,$a(g))throw g;return g},Nn.times=function(e,t){if((e=dl(e))<1||e>s)return[];var n=f,r=gn(e,f);t=oo(t),e-=f;for(var i=$t(r,t);++n<e;)t(n);return i},Nn.toFinite=sl,Nn.toInteger=dl,Nn.toLength=fl,Nn.toLower=function(e){return vl(e).toLowerCase()},Nn.toNumber=hl,Nn.toSafeInteger=function(e){return e?ir(dl(e),-9007199254740991,s):0===e?e:0},Nn.toString=vl,Nn.toUpper=function(e){return vl(e).toUpperCase()},Nn.trim=function(e,t,r){if((e=vl(e))&&(r||t===n))return qt(e);if(!e||!(t=ai(t)))return e;var i=sn(e),o=sn(t);return yi(i,Zt(i,o),Qt(i,o)+1).join("")},Nn.trimEnd=function(e,t,r){if((e=vl(e))&&(r||t===n))return e.slice(0,dn(e)+1);if(!e||!(t=ai(t)))return e;var i=sn(e);return yi(i,0,Qt(i,sn(t))+1).join("")},Nn.trimStart=function(e,t,r){if((e=vl(e))&&(r||t===n))return e.replace(ne,"");if(!e||!(t=ai(t)))return e;var i=sn(e);return yi(i,Zt(i,sn(t))).join("")},Nn.truncate=function(e,t){var r=30,i="...";if(Ja(t)){var o="separator"in t?t.separator:o;r="length"in t?dl(t.length):r,i="omission"in t?ai(t.omission):i}var a=(e=vl(e)).length;if(rn(e)){var l=sn(e);a=l.length}if(r>=a)return e;var u=r-cn(i);if(u<1)return i;var c=l?yi(l,0,u).join(""):e.slice(0,u);if(o===n)return c+i;if(l&&(u+=c.length-u),nl(o)){if(e.slice(u).search(o)){var s,d=c;for(o.global||(o=Se(o.source,vl(de.exec(o))+"g")),o.lastIndex=0;s=o.exec(d);)var f=s.index;c=c.slice(0,f===n?u:f)}}else if(e.indexOf(ai(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+i},Nn.unescape=function(e){return(e=vl(e))&&Y.test(e)?e.replace(U,fn):e},Nn.uniqueId=function(e){var t=++De;return vl(e)+t},Nn.upperCase=Yl,Nn.upperFirst=$l,Nn.each=va,Nn.eachRight=ga,Nn.first=Wo,iu(Nn,(pu={},mr(Nn,(function(e,t){je.call(Nn.prototype,t)||(pu[t]=e)})),pu),{chain:!1}),Nn.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Nn[e].placeholder=Nn})),St(["drop","take"],(function(e,t){zn.prototype[e]=function(r){r=r===n?1:vn(dl(r),0);var i=this.__filtered__&&!t?new zn(this):this.clone();return i.__filtered__?i.__takeCount__=gn(r,i.__takeCount__):i.__views__.push({size:gn(r,f),type:e+(i.__dir__<0?"Right":"")}),i},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),St(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),St(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),St(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(eu)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Er(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Aa(oo(e)))},zn.prototype.slice=function(e,t){e=dl(e);var r=this;return r.__filtered__&&(e>0||t<0)?new zn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=dl(t))<0?r.dropRight(-t):r.take(t-e)),r)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(f)},mr(zn.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Nn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(Nn.prototype[t]=function(){var t=this.__wrapped__,l=i?[1]:arguments,u=t instanceof zn,c=l[0],s=u||za(t),d=function(e){var t=o.apply(Nn,At([e],l));return i&&f?t[0]:t};s&&r&&"function"==typeof c&&1!=c.length&&(u=s=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,v=u&&!h;if(!a&&s){t=v?t:new zn(this);var g=e.apply(t,l);return g.__actions__.push({func:sa,args:[d],thisArg:n}),new Vn(g,f)}return p&&v?e.apply(this,l):(g=this.thru(d),p?i?g.value()[0]:g.value():g)})})),St(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Nn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(za(i)?i:[],e)}return this[n]((function(n){return t.apply(za(n)?n:[],e)}))}})),mr(zn.prototype,(function(e,t){var n=Nn[t];if(n){var r=n.name+"";je.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}})),In[Ni(n,2).name]=[{name:"wrapper",func:n}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=za(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gn(t,e+a);break;case"takeRight":e=vn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,l=o.end,u=l-a,c=r?l:a-1,s=this.__iteratees__,d=s.length,f=0,h=gn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return di(e,this.__actions__);var p=[];e:for(;u--&&f<h;){for(var v=-1,g=e[c+=t];++v<d;){var m=s[v],y=m.iteratee,b=m.type,w=y(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}p[f++]=g}return p},Nn.prototype.at=da,Nn.prototype.chain=function(){return ca(this)},Nn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Nn.prototype.next=function(){this.__values__===n&&(this.__values__=cl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Nn.prototype.plant=function(e){for(var t,r=this;r instanceof Bn;){var i=Fo(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},Nn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:sa,args:[Jo],thisArg:n}),new Vn(t,this.__chain__)}return this.thru(Jo)},Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},Nn.prototype.first=Nn.prototype.head,Ke&&(Nn.prototype[Ke]=function(){return this}),Nn}();ht?((ht.exports=hn)._=hn,ft._=hn):dt._=hn}).call(hwt)}(fwt,fwt.exports)),fwt.exports);function vwt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gwt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vwt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vwt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mwt(e){var t,n,r=SWe(iN),i=function(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=jF(Object(l.useState)(),2),i=r[0],o=r[1],a=jF(Object(l.useState)(),2),u=a[0],c=a[1],s=jF(Object(l.useState)(),2),d=s[0],f=s[1],h=function(e){var t=e.height;t<200?(o(48),c(24),f(16)):t<300?(o(120),c(24),f(16)):(o(144),c(36),f(32))};return Object(l.useEffect)((function(){if(t.current&&e.data){n.current=new ResizeObserver(pwt.debounce((function(e){var t=e[0];if(t.contentRect){var n=t.target.getBoundingClientRect();h(n)}}),300)),n.current.observe(t.current);var r=t.current.getBoundingClientRect();h(r)}return function(){n.current&&n.current.disconnect()}}),[]),{elRef:t,mainFontSize:i,descFontSize:u,descMarginTop:d}}(e),o=i.elRef,a=i.mainFontSize,c=i.descFontSize,s=i.descMarginTop;if(null==e.data)return u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"));var d={},f=null==r?void 0:r.toRenderColor(e.config.color);return f.startsWith("linear-gradient")?(d.backgroundImage=f,d.backgroundClip="text",d.color="transparent",d["-webkit-text-fill-color"]="transparent"):d.color=f,u.a.createElement("div",{className:"lakex-table-chart-statistics",ref:o},a&&u.a.createElement("div",{style:gwt({fontSize:a},d),className:"lakex-table-chart-statistics-content"},e.data),a&&(null==(t=e.config)?void 0:t.desc)&&u.a.createElement("div",{style:gwt({fontSize:c,marginTop:s},d),className:"lakex-table-chart-statistics-desc"},null==(n=e.config)?void 0:n.desc))}var ywt=["none","-","count","filled","empty","checked","unchecked","unique","-","percentFilled","percentEmpty","percentUnique","-","sum","average","median","max","min","earliestDate","latestDate","dateRange","monthRange","percentChecked","percentUnchecked"];function bwt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wwt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bwt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bwt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _wt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xwt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xwt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function xwt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kwt=Object.defineProperty,Cwt=Object.getOwnPropertyDescriptor,Swt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Cwt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kwt(t,n,o),o},Owt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return u.a.createElement(mwt,{config:e,data:t})}},{key:"getFieldOptions",value:function(){var e=this;return OC(this._readService.getAllFields(),(function(t){var n=e._fieldService.getFieldIcon(t.get("type"));return{label:t.get("name"),value:t.get("uuid"),type:t.get("type"),icon:n}}))}},{key:"getData",value:function(e,t){return this._readService.calcStatValue(e.field,e.stat,t)}},{key:"_getStatOptions",value:function(e){var t,n=this._readService.getField(e),r=[],i=_wt(ywt);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=Ygt[o];"-"!==o&&"none"!==o&&(a&&(a.types?a.types.includes(null==n?void 0:n.get("type"))&&r.push({label:a.text,value:o}):r.push({label:a.text,value:o})))}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"getConfigSchema",value:function(e){var t=this.getFieldOptions();return wwt(wwt({},dwt),{},{basicSchema:[{id:"field",title:wx("内容显示"),type:"select",options:t},{id:"stat",title:wx("统计方式"),type:"select",options:this._getStatOptions(e.field)},{id:"desc",title:wx("数值说明"),type:"input"},{id:"color",title:wx("配色方案"),type:"color",colorTokens:["grey-9","blue-6","magenta-6","orange-6","pea-green-6","purple-6","red-6","green-6","cyan-6,sea-blue-6","sea-blue-6,magenta-6","orange-6,magenta-5","yellow-6,orange-6"]}]})}},{key:"getDefaultFieldId",value:function(e){var t,n=e.find((function(e){return e.type===xO.TEXT}));if(n)return n.value;var r=e.find((function(e){return e.type===xO.SELECT}));return r?r.value:null==(t=e[0])?void 0:t.value}},{key:"getDefaultConfg",value:function(){var e=this.getFieldOptions();return{field:this.getDefaultFieldId(e),desc:"",color:"grey-9",stat:"count"}}}])}();Swt([Yf(XA)],Owt.prototype,"_readService",2),Swt([Yf(iHe)],Owt.prototype,"_fieldService",2),Owt=Swt([Gf()],Owt);var Ewt={type:"word-cloud",name:wx("词云"),icon:"https://gw.alipayobjects.com/mdn/rms_d314dd/afts/img/A*CDgnRaN9iXkAAAAAAAAAAAAAARQnAQ"},Iwt={cloud:"https://cdn.nlark.com/yuque/0/2024/jpeg/84181/1726915141203-17490ddd-d32b-4f3c-bce8-5442afe0e1c1.jpeg",circle:"https://cdn.nlark.com/yuque/0/2024/jpeg/84181/1727496142207-4f539400-ce58-459b-8c1c-fb4914e4172f.jpeg",ellipse:"https://cdn.nlark.com/yuque/0/2024/jpeg/84181/1727496217510-38ed0048-7c2c-48f2-8e0a-a4afd2a85462.jpeg"},Pwt=[{label:"云朵",value:"cloud",icon:"https://cdn.nlark.com/yuque/0/2024/svg/84181/1726912676167-b03169bc-690f-4b5b-8ab6-4ef8703fa9c5.svg"},{label:"正圆",value:"circle",icon:"https://cdn.nlark.com/yuque/0/2024/svg/84181/1727496072603-ccee85f2-8b92-43e5-8cc2-add5b84e56de.svg"},{label:"椭圆",value:"ellipse",icon:"https://cdn.nlark.com/yuque/0/2024/svg/84181/1727496179913-81653483-29be-45e9-8986-6ea0f20eed9c.svg"}];function Mwt(e){var t=Object(l.useRef)(null),n=Object(l.useRef)(null),r=I$e().currentTheme;return Object(l.useEffect)((function(){t.current&&(n.current&&n.current.destroy(),n.current=new IVe(t.current,{data:e.data,theme:r,wordField:"name",weightField:"value",colorField:"name",wordStyle:{fontFamily:"Verdana",fontSize:[8,32],rotationSteps:10},animation:!1,random:function(){return 0},imageMask:Iwt[e.config.imageMask]||e.config.imageMask}),n.current.render())}),[e.config,e.data,r]),e.data?u.a.createElement("div",{style:{width:"100%",height:"100%"},ref:t}):u.a.createElement("div",{style:{width:"100%",height:"100%"}},wx("暂无数据"))}function Rwt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Awt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rwt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rwt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jwt=Object.defineProperty,Dwt=Object.getOwnPropertyDescriptor,Twt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Dwt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&jwt(t,n,o),o},Fwt=function(){return ox((function e(){rx(this,e)}),[{key:"render",value:function(e,t){return React.createElement(Mwt,{config:e,data:t})}},{key:"getData",value:function(e,t){var n=this._chartDataService.getData(e.mainField,void 0,void 0,void 0,void 0,t);if(e.exclude){var r=e.exclude.split(" ");n.forEach((function(e,t){r.includes(e.name)&&n.splice(t,1)}))}return e.maxCount&&((n=Uc(n,(function(e){return e.value}))).length=Math.min(n.length,e.maxCount)),n}},{key:"getDefaultConfg",value:function(){var e=this._chartConfigService.getFieldOptions();return{mainField:this._chartConfigService.getDefaultFieldId(e),imageMask:Pwt[0].value,maxCount:20}}},{key:"getConfigSchema",value:function(){var e=this._chartConfigService.getFieldOptions();return Awt(Awt({},Ewt),{},{basicSchema:[this._chartConfigService.getConfigurableMainField(e),{id:"imageMask",title:wx("形状"),type:"select",subType:"icon",options:Pwt},{id:"maxCount",title:wx("最大数量"),type:"number",max:100,min:1},{id:"exclude",title:wx("排除词"),type:"input",placeholder:wx("使用空格分隔")}]})}}])}();Twt([Yf(Cnt)],Fwt.prototype,"_chartDataService",2),Twt([Yf(Zyt)],Fwt.prototype,"_chartConfigService",2),Fwt=Twt([Gf()],Fwt);var Nwt=Rf.defineToken("ViewerChartRenderPluginContribution"),Lwt=Rf.defineToken("ChartContribution");function Bwt(e,t,n){return t=DC(t),jC(e,Vwt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Vwt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vwt=function(){return!!e})()}var zwt=Object.defineProperty,Hwt=Object.getOwnPropertyDescriptor,Wwt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Hwt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zwt(t,n,o),o},Uwt=function(e){function t(){var e;return rx(this,t),(e=Bwt(this,t,arguments))._onChartSettingClick=e._register(new dS),e.onChartSettingClick=e._onChartSettingClick.event,e._onChartCreateClick=e._register(new dS),e.onChartCreateClick=e._onChartCreateClick.event,e._chartMap={},e}return NC(t,e),ox(t,[{key:"emitChartCreateClick",value:function(e){this._onChartCreateClick.emit({chartType:e})}},{key:"init",value:function(){var e=this;this.chartProvider.getContributions({cache:!1}).forEach((function(t){t.registerChart(e)}))}},{key:"registerItem",value:function(e){this._chartMap[e.type]=e}},{key:"createChart",value:function(e){var t=this.getChartPlugin(e),n={id:Cx(6),type:e,name:t.name,w:3,h:3,x:0,y:0,config:{},filter:null};this.commandService.execCommand("addChart",{chart:n})}},{key:"getChart",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t);return JSON.parse((null==n?void 0:n.get("charts"))||"[]").find((function(t){return t.id===e}))}},{key:"getChartPlugin",value:function(e){return this._chartMap[e]}},{key:"getChartPlugins",value:function(){return Object.values(this._chartMap)}},{key:"getRecordIds",value:function(e){var t=OC(this.readService.getFlatViewRecords(),(function(e){return e.get("record_uuid")}));return e&&(t=this._filter(e,t)),t}},{key:"render",value:function(e,t,n,r){var i,o;r&&(n=this._filter(r,n));var a=this.getChartData(e,t,n),l=this.getChartPlugin(e).service.getDefaultConfg(),u=Object.assign({},l,t||{});return null==(o=null==(i=this.getChartPlugin(e))?void 0:i.service)?void 0:o.render(u,a)}},{key:"_filter",value:function(e,t){return this.readService.filterRecordIds(e,t)}},{key:"getChartConfig",value:function(e,t){var n=this._chartMap[t];if(n){var r=n.service.getDefaultConfg();if(!e)return r;var i=this.getChart(e);return Object.assign({},r,i.config)}}},{key:"getChartSchema",value:function(e,t){var n,r=this._chartMap[e];if(!r){var i=this.getChart(e);i&&(r=this._chartMap[i.type])}if(r)return null==(n=r.service)?void 0:n.getConfigSchema(t)}},{key:"getChartData",value:function(e,t,n){var r=this._chartMap[e];if(r)return r.service.getData(t,n)}},{key:"openModal",value:function(e){this._onChartSettingClick.emit(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);function Gwt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ywt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gwt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gwt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wwt([gh(Lwt)],Uwt.prototype,"chartProvider",2),Wwt([Yf(XA)],Uwt.prototype,"readService",2),Wwt([Yf(Lj)],Uwt.prototype,"commandService",2),Wwt([jf()],Uwt.prototype,"init",1),Wwt([Df()],Uwt.prototype,"destroy",1),Uwt=Wwt([Gf()],Uwt);var $wt=function(e){var t=e.items,n=void 0===t?[]:t,r=e.isReadonly,i=e.onAdd,o=e.onChange,a=SWe(Uwt),c=a.getRecordIds(),s=Object(l.useRef)({}),d=Object(l.useRef)(),f=Object(l.useRef)(null);s.current={},Object.keys(s.current).length!==n.length&&n.forEach((function(e){e&&(s.current[e.id]=s.current[e.id]||Object(l.createRef)())})),Object(l.useLayoutEffect)((function(){if(d.current){var e=d.current,t=n.map((function(e){return s.current[e.id].current.gridstackNode||Ywt(Ywt({},e),{},{el:s.current[e.id].current})}));e._ignoreCB=!0,e.load(t),delete e._ignoreCB}else var a=d.current=bze.init({minRow:1,disableDrag:r,disableResize:r},f.current).on("added",(function(e,t){a._ignoreCB||t.forEach((function(e){a.removeWidget(e.el,!0,!1),null==i||i({id:e.id,x:e.x,y:e.y,w:e.w,h:e.h})}))})).on("removed change",(function(e,t){var n=a.save(!1);null==o||o(n)}))}),[n]);return u.a.createElement("div",{style:{width:"100%",marginRight:"10px"}},u.a.createElement("div",{className:"grid-stack",ref:f},n.map((function(e,t){return e?u.a.createElement("div",{ref:s.current[e.id],key:e.id,className:"grid-stack-item","gs-id":e.id,"gs-w":e.w,"gs-h":e.h,"gs-x":e.x,"gs-y":e.y},u.a.createElement("div",{className:"grid-stack-item-content"},u.a.createElement("div",{className:"lakex-table-grid-stack-item-header"},u.a.createElement("div",{className:"lakex-table-grid-stack-item-title"},e.name),!r&&u.a.createElement(V4e,null,u.a.createElement(X$e,{className:"lakex-table-grid-stack-item-setting-icon",type:"MoreVertical",onClick:function(t){return function(e,t){null==a||a.openModal({position:{origin:t.target,placement:"rightTop"},initialState:{chartId:e.id,chartType:e.type}})}(e,t)}}))),u.a.createElement("div",{className:"lakex-table-grid-stack-item-body"},null==a?void 0:a.render(e.type,e.config,c,e.filter)))):null}))))};var qwt=function(){var e,t=!Gat(Qj.RECORD).canUpdate(),n={schema:[{id:"add-chart",type:"radio",subType:"icon",options:(e=SWe(Uwt)).getChartPlugins().map((function(e){return{label:e.name,value:e.type,icon:e.icon}}))}],onChange:function(t,n){e.emitChartCreateClick(n)}},r=n.schema,i=n.onChange;return u.a.createElement("div",{className:"lakex-table-chart-empty"},u.a.createElement("div",{className:"lakex-table-chart-empty-body"},u.a.createElement("h1",{className:"lakex-table-chart-empty-title"},wx("选择一个组件，开始搭建你的数据可视化")),u.a.createElement("p",{className:"lakex-table-chart-empty-desc"},wx("可以使用柱状图、折线图、饼图等组件，组合多个组件可以更直观展示数据，方便洞察数据")),!t&&u.a.createElement("div",{className:"lakex-table-chart-empty-create"},u.a.createElement(_1e,{schema:r,onChange:i}))))};function Kwt(e){var t=function(e){var t=e.chartData,n=SWe(Lj);return{data:jF(Object(l.useState)(t),1)[0],onAdd:function(e){},onChange:function(e){null==n||n.execCommand("updateChartRect",{rects:e})}}}(e);return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement("div",{style:{display:"flex",width:"100%"}},e.chartData&&0!==e.chartData.length?u.a.createElement($wt,{items:e.chartData,onAdd:function(e){return t.onAdd(e)},onChange:function(e){return t.onChange(e)}}):u.a.createElement(qwt,null)))}function Xwt(e){var t=SWe(Uwt),n=t.getRecordIds();return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement("div",{className:"lakex-table-chart-h5"},e.chartData.map((function(e){return u.a.createElement("div",{className:"lakex-table-chart-h5-item"},null==t?void 0:t.render(e.type,e.config,n,e.filter))}))))}function Jwt(e){return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement("div",{style:{display:"flex",width:"100%"}},e.chartData&&0!==e.chartData.length?u.a.createElement($wt,{isReadonly:!0,items:e.chartData}):u.a.createElement(qwt,null)))}var Zwt=u.a.forwardRef((function(e,t){var n=e.viewConfig,r=SWe(RC).getValue("render.mode")===Eze.MOBILE,i=Gat(Qj.RECORD).isReadonly(),o=jF(Object(l.useState)(0),2),a=o[0],c=o[1],s=SWe(Vze);Object(l.useLayoutEffect)((function(){var e=null==s?void 0:s.getToolbarBoundingClientRect();null!=(null==e?void 0:e.height)&&c(e.height)}),[]);var d,f=JSON.parse((null==n?void 0:n.get("charts"))||"[]");return d=r?u.a.createElement(Xwt,{chartData:f}):i?u.a.createElement(Jwt,{chartData:f}):u.a.createElement(Kwt,{chartData:f}),u.a.createElement("div",{className:"lakex-table-chart-view-container"},u.a.createElement("div",{className:"lakex-table-chart-view",style:{height:"calc(100% - ".concat(a,"px)")},ref:t},d))})),Qwt=u.a.forwardRef((function(e,t){var n=qat({viewId:e.viewId});return u.a.createElement(Zwt,{ref:t,fields:n.fields,view:n.view,viewRecords:n.viewRecords||new yC,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function e_t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t_t(e,t,n){return t=DC(t),jC(e,n_t()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function n_t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n_t=function(){return!!e})()}var r_t=function(e){function t(){var e;return rx(this,t),(e=t_t(this,t,arguments)).viewType=WO.CHART,e.title=wx("图表视图"),e.desc=wx("查看和分析数据"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e_t(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"Charts",size:e.size||16},e))},e.color="red-4",e.Component=Qwt,e}return NC(t,e),ox(t)}(z8e),i_t=Object.defineProperty,o_t=Object.getOwnPropertyDescriptor,a_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?o_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&i_t(t,n,o),o},l_t=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new r_t({onError:e.onError}))}},{key:"registerChart",value:function(e){e.registerItem({type:gbt.type,name:gbt.name,icon:gbt.icon,service:this._columnChartService}),e.registerItem({type:ubt.type,name:ubt.name,icon:ubt.icon,service:this._barChartService}),e.registerItem({type:Yyt.type,name:Yyt.name,icon:Yyt.icon,service:this._areaChartService}),e.registerItem({type:Vbt.type,name:Vbt.name,icon:Vbt.icon,service:this._lineChartService}),e.registerItem({type:qbt.type,name:qbt.name,icon:qbt.icon,service:this._pieChartService}),e.registerItem({type:Cbt.type,name:Cbt.name,icon:Cbt.icon,service:this._funnelChartService}),e.registerItem({type:nwt.type,name:nwt.name,icon:nwt.icon,service:this._scatterChartService}),e.registerItem({type:Abt.type,name:Abt.name,icon:Abt.icon,service:this._hotmapService}),e.registerItem({type:dwt.type,name:dwt.name,icon:dwt.icon,service:this._statisticsService}),e.registerItem({type:Ewt.type,name:Ewt.name,icon:Ewt.icon,service:this._wordCloudService})}}],[{key:"pluginModule",value:function(){return ch().contribution(Nwt).contribution(Lwt).register(Uwt).register(Zyt).register(Fwt).register(vbt).register(kbt).register(Rbt).register($bt).register(twt).register(cwt).register(Owt).register(Bbt).register(lbt).register(this)}}])}();l_t.pluginName="render-viewer-chart",a_t([Yf(vbt)],l_t.prototype,"_barChartService",2),a_t([Yf(kbt)],l_t.prototype,"_columnChartService",2),a_t([Yf(Rbt)],l_t.prototype,"_funnelChartService",2),a_t([Yf($bt)],l_t.prototype,"_lineChartService",2),a_t([Yf(twt)],l_t.prototype,"_pieChartService",2),a_t([Yf(cwt)],l_t.prototype,"_scatterChartService",2),a_t([Yf(Owt)],l_t.prototype,"_statisticsService",2),a_t([Yf(Fwt)],l_t.prototype,"_wordCloudService",2),a_t([Yf(Bbt)],l_t.prototype,"_hotmapService",2),a_t([Yf(lbt)],l_t.prototype,"_areaChartService",2),l_t=a_t([Gf({contrib:[Sze,Mze,Lwt]})],l_t);var u_t=function(e){var t=e.view,n=e.defaultValue,r=e.maxLength,i=void 0===r?255:r,o=Gat(Qj.TABLE),a=!Gat(Qj.RECORD).canUpdate(),l=SWe(Lj);return u.a.createElement(LYe.TextArea,{autoSize:!0,className:"lakex-form-desc",maxLength:i,defaultValue:n,disabled:!(null==o?void 0:o.canUpdate())||a,onBlur:function(e){null==l||l.execCommand("updateViewDesc",{viewId:null==t?void 0:t.get("uuid"),desc:e.target.value})},size:"small",onClick:function(e){e.stopPropagation()},placeholder:wx("请输入表单描述")})},c_t=function(e){var t=e.view,n=Gat(Qj.TABLE),r=SWe(XA),i=SWe(Lj);return n.canUpdate()?u.a.createElement("div",{className:"lakex-form-empty-field"},u.a.createElement("img",{className:"lakex-form-empty-field-img",src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*oG_ZTrK2ylsAAAAAAAAAAAAADvuFAQ/original"}),u.a.createElement("p",null,wx("表单为空")),u.a.createElement("span",{className:"lakex-form-empty-field-tip"},wx("点击左侧列表添加已有列 或 点击下方按钮添加新表单项")),u.a.createElement("br",null),u.a.createElement(aXe,{type:"primary",onClick:function(){var e=r.getAllFields(),n=EO(xO.TEXT,OC(e,(function(e){return{name:e.get("name"),type:e.get("type")}})));i.execCommand("addField",{viewId:t.get("uuid"),field:{uuid:Cx(32),name:n,type:xO.TEXT}})}},u.a.createElement(X$e,{type:"Add"}),wx("添加"))):null},s_t=function(e){var t=e.fields,n=function(e){var t=e.view,n=e.viewFields,r=Gat(Qj.TABLE),i=SWe(XA),o=SWe(Lj),a=SWe(iHe),c=Object(l.useMemo)((function(){return OC(n,(function(e){var t;return null==(t=e.get("field"))?void 0:t.get("uuid")}))}),[n]),s=r.canUpdate(),d=OO.filter((function(e){return!YO.isSystemType(e.type)})).map((function(e){var t=null==a?void 0:a.getFieldIcon(e.type);return{key:e.type,title:e.name,icon:t?u.a.createElement(t,{size:16}):null}}));return{viewFieldIds:c,canUpdate:s,onInsert:function(e){s&&(null==o||o.execCommand("insertViewField",{viewId:t.get("uuid"),fieldId:e.uuid}))},onRemove:function(e){s&&(null==o||o.execCommand("removeViewField",{viewId:t.get("uuid"),fieldId:e.uuid}))},onCreate:function(e){var r,a,l=EO(e,OC(i.getAllFields(),(function(e){return{name:e.get("name"),type:e.get("type")}})));null==o||o.execCommand("addField",{viewId:t.get("uuid"),field:{uuid:Cx(32),name:l,type:xO.TEXT},sourceFieldId:null==(r=null==n?void 0:n[n.length-1])?void 0:r.field_uuid});var u=document.querySelectorAll(".lakex-form-item"),c=u[u.length-1];null==(a=c.scrollIntoViewIfNeeded)||a.call(c)},getIcon:function(e){return a.getFieldIcon(e)},newFields:d}}({view:e.view,viewFields:e.viewFields}),r=n.viewFieldIds,i=n.getIcon,o=n.onInsert,a=n.onCreate,c=n.newFields,s=n.canUpdate,d=kC(t,(function(e){return!r.includes(e.get("uuid"))}));return u.a.createElement("div",{className:"lakex-form-col-container"},u.a.createElement("div",{className:"lakex-form-col-intro"},wx("可用项")),u.a.createElement("div",{className:"lakex-form-col-content lakex-form-col-visible-list"},d.length>0?OC(d,(function(e){var t=i(e.get("type"));return u.a.createElement("div",{className:"lakex-form-col active",key:e.get("uuid"),onClick:function(){o(e)}},u.a.createElement("div",{className:"lakex-form-col-name"},t&&u.a.createElement(t,null),e.get("name")),s&&u.a.createElement("span",{className:"lakex-form-col-state add"},wx("添加")," ",u.a.createElement(X$e,{type:"ArrowRight",style:{marginLeft:4}})))})):u.a.createElement("p",{className:"lakex-form-empty"},wx("(空)"))),u.a.createElement("div",{className:"lakex-form-col-intro"},wx("新建项")),u.a.createElement("div",{className:"lakex-form-col-content lakex-form-col-field-list"},c.map((function(e){return u.a.createElement("div",{key:e.key,className:"lakex-form-col-field-item",onClick:function(){return a(e.key)}},e.icon,e.title)}))))},d_t=function(e){var t,n=e.viewField,r=(t=SWe(iHe),{getFormComponent:function(e){return t.getFieldFormComponent(e)}}).getFormComponent;if(!n)return null;if(!n.get("field"))return null;var i=r(n.get("field").get("type"));return i?u.a.createElement(j4e,{placement:"bottom",title:wx("此处由填写者输入")},u.a.createElement("div",{className:"lakex-form-item-field"},u.a.createElement("div",{className:"lakex-form-item-field-mask"}),u.a.createElement(i,{viewField:n}))):null},f_t=function(e){var t,n,r=e.viewField,i=function(e){var t=e.viewField,n=SWe(iHe),r=SWe(Lj),i=SWe(pht);return{getFormComponent:function(e){return n.getFieldFormComponent(e)},onChange:function(e){null==r||r.execCommand("updateField",{field:t.get("field"),newFieldProperty:e})},onChangeOrder:function(e,n){null==i||i.updateFieldOptionOrder(t.get("field").get("uuid"),e,n)}}}({viewField:r}),o=i.getFormComponent,a=i.onChange,l=i.onChangeOrder;if(!r)return null;if(!r.get("field"))return null;var c=r.get("field").get("type"),s=o(c);if(!s)return null;var d=s.OptionEditable;return d?u.a.createElement("div",{className:"lakex-table-form-designer-option-wrap"},u.a.createElement(d,{type:c,options:null==(t=r.get("field"))?void 0:t.get("options"),color:null==(n=r.get("field"))?void 0:n.get("color"),onChange:a,onChangeOrder:l,autoFocus:!1})):null};function h_t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p_t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h_t(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v_t=function(e){var t=!e.defaultValue;return u.a.createElement("div",{className:"lakex-form-item-ui-container ".concat(t?"lakex-form-item-ui-show-tooltip":"")},u.a.createElement(zYe,p_t(p_t({autoFocus:!0,placeholder:wx("请输入问题")},e),{},{maxLength:128})),t&&u.a.createElement(j4e,{title:wx("当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。")},u.a.createElement(X$e,{className:"lakex-form-item-input-tooltip",type:"Question"})))},g_t=function(e){var t=e.view,n=e.viewField,r=e.viewFields,i=function(e){var t=e.view,n=e.viewFields,r=SWe(XA),i=SWe(Lj),o=SWe(Xze),a=SWe(iHe);return{onMoveUp:function(e){var r,o=CC(n,(function(t){return t.get("uuid")===e.get("uuid")}));if(0!==o){var a=null==(r=n.get(o-1))?void 0:r.get("field_uuid");null==i||i.execCommand("changeFieldOrder",{viewId:t.get("uuid"),sourceFieldId:e.get("field_uuid"),targetFieldId:a})}},onMoveDown:function(e){var r,o=CC(n,(function(t){return t.get("uuid")===e.get("uuid")})),a=null==(r=n.get(o+1))?void 0:r.get("field_uuid");a&&(null==i||i.execCommand("changeFieldOrder",{viewId:t.get("uuid"),sourceFieldId:e.get("field_uuid"),targetFieldId:a}))},onClone:function(e){null==i||i.execCommand(Dnt.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid")})},onRemove:function(e){null==i||i.execCommand("removeViewField",{viewId:e.get("view_uuid"),fieldId:e.get("field").get("uuid")})},onChangeRequired:function(e,n){null==i||i.execCommand(Znt.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),required:n.target.checked})},onChangeDisplayType:function(e,n){null==i||i.execCommand(Ynt.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),displayType:n})},onChangeName:rc((function(e,n){(e.get("name")||e.get("field").get("name"))!==n&&(null==i||i.execCommand(Knt.commandName,{viewId:t.get("uuid"),fieldId:e.get("field_uuid"),name:n}))}),1e3),onCreateAfter:function(e){var n=r.getAllFields(),o=EO(xO.TEXT,OC(n,(function(e){return{name:e.get("name"),type:e.get("type")}})));null==i||i.execCommand("addField",{viewId:t.get("uuid"),field:{uuid:Cx(32),name:o,type:xO.TEXT},sourceFieldId:e.get("field_uuid")})},openFieldConfigModal:function(e,t){null==o||o.emitClickEvent({eventName:"fieldConfigClick",data:{viewField:e,e:t}})},Icon:function(e){var t=e.type,n=null==a?void 0:a.getFieldIcon(t);return n?u.a.createElement(n,{size:16}):null}}}({view:t,viewField:n,viewFields:r}),o=i.onMoveUp,a=i.onMoveDown,l=i.onClone,c=i.onRemove,s=i.onChangeRequired,d=i.onChangeName,f=i.onCreateAfter,h=i.onChangeDisplayType,p=i.openFieldConfigModal,v=i.Icon;if(!n.get("field"))return null;var g=n.get("field").get("type");return u.a.createElement("div",{className:"lakex-form-item active"},u.a.createElement("div",{className:"lakex-form-item-inner"},u.a.createElement("div",{className:"lakex-form-item-inner-sidebar",onClick:function(e){e.stopPropagation()}},u.a.createElement(j4e,{placement:"left",title:wx("向上移动")},u.a.createElement(X$e,{type:"ArrowUp",onClick:function(){o(n)}})),u.a.createElement(j4e,{placement:"left",title:wx("向下移动")},u.a.createElement(X$e,{type:"ArrowDown",onClick:function(){a(n)}})),u.a.createElement(j4e,{placement:"left",title:wx("复制表单项")},u.a.createElement(X$e,{type:"Copy",onClick:function(){l(n)}})),u.a.createElement(j4e,{placement:"left",title:wx("移除表单项")},u.a.createElement(X$e,{type:"Clear",onClick:function(){c(n)}}))),u.a.createElement("div",{className:"lakex-form-item-inner-container"},u.a.createElement("div",{className:"lakex-form-item-inner-column-configs"},u.a.createElement("div",{className:"lakex-form-item-inner-column-name"},u.a.createElement(j4e,{placement:"top",title:wx("点击修改字段")},u.a.createElement("span",{className:"lakex-form-item-inner-column-content",onClick:function(e){return p(n,e)}},u.a.createElement(v,{type:g}),null==n?void 0:n.get("field").get("name"),u.a.createElement(X$e,{type:"Edit"})))),u.a.createElement("div",{className:"lakex-form-item-inner-type"},u.a.createElement("div",{className:"lakex-form-item-inner-validation"},u.a.createElement(kXe,{defaultChecked:n.get("required"),onChange:function(e){return s(n,e)}},wx("必填"))))),u.a.createElement("div",{className:"lakex-form-item-inner-field-configs"},u.a.createElement(v_t,{defaultValue:n.get("name")||n.get("field").get("name"),onChange:function(e){d(n,e.target.value)},onBlur:function(e){d(n,e.target.value)}}),u.a.createElement(d_t,{viewField:n}),u.a.createElement(f_t,{viewField:n}),YO.isSelectLike(g)&&u.a.createElement("div",{className:"lakex-form-item-option-layout"},u.a.createElement("span",{style:{color:"#8c8c8c"}},wx("布局方式"),":"),u.a.createElement(n1e,{defaultValue:n.get("display_type")||"list",bordered:!1,onChange:function(e){h(n,e)},dropdownClassName:"lakex-form-item-dropdown"},u.a.createElement(n1e.Option,{value:"list"},wx("列表")),u.a.createElement(n1e.Option,{value:"dropdown"},wx("下拉")))))),n.get("required")&&""===n.get("name")?u.a.createElement("div",{className:"lakex-form-item-inner-error"},wx("请输入问题")):null),u.a.createElement("div",{className:"lakex-form-item-inner-add"},u.a.createElement(aXe,{onClick:function(e){f(n)},onMouseDown:function(e){e.stopPropagation()}},u.a.createElement(X$e,{type:"Add"}),wx("添加"))))},m_t=function(e){var t,n=e.viewField,r=e.onClick,i=void 0===r?function(){}:r,o=e.index;return u.a.createElement("div",{className:"lakex-form-item lakex-form-item-normal",onClick:i},u.a.createElement("div",{className:"lakex-form-item-normal-preview"},u.a.createElement("div",{className:n.get("required")?"lakex-form-item-normal-preview-required":""},"".concat(o+1,". ").concat(n.get("name")||(null==(t=n.get("field"))?void 0:t.get("name")))),u.a.createElement("div",{className:"lakex-form-item-normal-comp"},u.a.createElement(d_t,{viewField:n}))),n.get("required")&&""===n.get("name")?u.a.createElement("div",{className:"lakex-form-item-error"},wx("请输入问题")):null)},y_t=function(e){var t=e.index,n=e.active,r=e.view,i=e.viewField,o=e.viewFields,a=e.onClick,l=void 0===a?function(){}:a;return n?u.a.createElement(g_t,{view:r,viewField:i,viewFields:o}):u.a.createElement(m_t,{onClick:l,index:t,viewField:i})},b_t=function(e){var t=e.view,n=e.viewFields,r=function(e){var t=e.view,n=e.viewFields,r=Gat(Qj.TABLE),i=!Gat(Qj.RECORD).canUpdate(),o=jF(Object(l.useState)(),2),a=o[0],u=o[1],c=SWe(XA),s=SWe(Lj),d=qYe();return Object(l.useEffect)((function(){var e=function(e){var t=e.target;if("INPUT"!==t.tagName){for(;t&&t.classList&&t!==document.body;){if(t.classList.contains("lakex-form-item")||t.classList.contains("lakex-form-item-dropdown")||t.classList.contains("lakex-table-col-configs")||t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-menu-configs-submenu")||t.classList.contains("lakex-table-ai-writing-config-modal"))return;t=t.parentNode}u(void 0),d()}};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[]),{state:{activeId:a},canUpdate:r.canUpdate()&&!i,forceUpdate:d,setActiveId:u,onCreate:function(){var e,r=c.getAllFields(),i=EO(xO.TEXT,OC(r,(function(e){return{name:e.get("name"),type:e.get("type")}})));null==s||s.execCommand("addField",{viewId:t.uuid,field:{uuid:Cx(32),name:i,type:xO.TEXT},sourceFieldId:null==(e=n[n.length-1])?void 0:e.field_uuid})}}}({view:t,viewFields:n}),i=r.state,o=r.forceUpdate,a=r.setActiveId,c=r.onCreate,s=r.canUpdate;return u.a.createElement("div",{className:"lakex-form-list"},OC(n,(function(e,r){var l=e.get("field");return l?u.a.createElement(y_t,{view:t,viewField:e,viewFields:n,index:r,active:e.get("uuid")===i.activeId,key:l.get("uuid"),onClick:function(){s&&(a(e.get("uuid")),o())}}):null})),s&&u.a.createElement("div",{className:"lakex-form-list-footer"},u.a.createElement(aXe,{type:"primary",onClick:function(e){c()}},u.a.createElement(X$e,{type:"Add"}),wx("添加"))))},w_t=function(e){var t=e.view,n=e.defaultValue,r=Gat(Qj.TABLE),i=!Gat(Qj.RECORD).canUpdate(),o=SWe(Lj),a=SWe(KO),c=Object(l.useRef)(null);return Object(l.useEffect)((function(){null==a||a.onChange((function(e){var n,r,i=e.spell;"view"===i.table&&i.command===JO.UPDATE&&t.get("uuid")===(null==(n=i.where)?void 0:n.uuid)&&null!=i.sets.name&&(null==(r=c.current)||r.setValue(i.sets.name))}))}),[]),u.a.createElement(zYe,{ref:c,className:"lakex-form-title",autoFocus:""===n,autoSize:!0,defaultValue:n,disabled:!r.canUpdate()||i,onBlur:function(e){null==o||o.execCommand("updateViewName",{viewId:null==t?void 0:t.get("uuid"),name:e.target.value})},onClick:function(e){e.stopPropagation()},placeholder:wx("请输入表单标题")})},__t=function(e){var t=e.viewId,n=!Gat(Qj.RECORD).canUpdate(),r=SWe(frt),i=SWe(cT),o=jF(Object(l.useState)(null==r?void 0:r.getFormEditData(t)),2),a=o[0],u=o[1];return Object(l.useEffect)((function(){var e=i.onDataChanged((function(){var e;e=null==r?void 0:r.getFormEditData(t),u(e)}));return function(){e.destroy()}}),[]),{formData:a,isReadonly:n}},x_t=function(e){var t,n,r,i,o=__t({viewId:e.viewId}),a=o.formData,l=o.isReadonly;return a?u.a.createElement("div",{className:"lakex-form-container"},(null==a?void 0:a.fields)&&!l&&u.a.createElement(s_t,{view:a.view,fields:a.fields,viewFields:a.viewFields}),u.a.createElement("div",{className:"lakex-form-configs"},u.a.createElement("div",{className:"lakex-form-configs-bg"},0!==(null==(t=a.viewFields)?void 0:t.length)&&u.a.createElement("div",{className:"lakex-form-configs-title"},u.a.createElement(w_t,{view:a.view,defaultValue:null==(n=a.view)?void 0:n.get("name")}),u.a.createElement(u_t,{view:a.view,defaultValue:null==(r=a.view)?void 0:r.get("desc")})),0===(null==(i=a.viewFields)?void 0:i.length)?u.a.createElement(c_t,{view:a.view}):u.a.createElement(b_t,{view:a.view,viewFields:a.viewFields})))):null},k_t=u.a.forwardRef((function(e,t){var n=function(){var e=qat(),t=Gat(Qj.TABLE),n=!Gat(Qj.RECORD).canUpdate(),r=SWe(frt),i=SWe(Xze),o=SWe(KO),a=jF(Object(l.useState)(rrt.PENDING),2),u=a[0],c=a[1],s=e.view.get("id"),d=e.view.get("uuid"),f=Object(l.useCallback)((function(e){var t=null==r?void 0:r.getShare(e);(null==t?void 0:t.get("status"))===MO.ACTIVE?c(rrt.COLLECTING):c(rrt.PENDING)}),[d]);return Object(l.useEffect)((function(){if(s){var e=null==r?void 0:r.getShare(d);e?e.get("status")===MO.ACTIVE?c(rrt.COLLECTING):c(rrt.PENDING):null==r||r.initForm(d).then((function(){f(d)})),null==o||o.onChange((function(e){var t=e.spell;"view_share"===t.table&&t.command===JO.UPSERT&&f(d)}))}else c(rrt.PENDING)}),[s,d]),{status:u,viewId:d,canUpdate:t.canUpdate()&&!n,onOpenManage:function(t){var n;i.emitClickEvent({eventName:"clickFormManageButton",data:{target:t.currentTarget,viewId:null==(n=null==e?void 0:e.view)?void 0:n.get("uuid"),status:u}})}}}(),r=n.status,i=n.onOpenManage,o=n.viewId,a=n.canUpdate,c=wx("开启收集");return r===rrt.COLLECTING&&(c=wx("收集中")),u.a.createElement("div",{className:"lakex-table-form",ref:t,key:o},u.a.createElement(x_t,{viewId:o}),a&&u.a.createElement(aXe,{className:"lakex-table-form-manage",type:"primary",onClick:i},c))}));function C_t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S_t(e,t,n){return t=DC(t),jC(e,O_t()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function O_t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O_t=function(){return!!e})()}var E_t=function(e){function t(){var e;return rx(this,t),(e=S_t(this,t,arguments)).viewType=WO.FORM,e.title=wx("表单视图"),e.desc=wx("像问卷一样收集信息"),e.icon=function(e){return React.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C_t(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FormView"},e))},e.color="orange-5",e.Component=k_t,e}return NC(t,e),ox(t)}(z8e),I_t=Object.defineProperty,P_t=Object.getOwnPropertyDescriptor,M_t=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new E_t({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function R_t(e,t,n){return t=DC(t),jC(e,A_t()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function A_t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A_t=function(){return!!e})()}M_t.pluginName="render-viewer-form",M_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?P_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&I_t(t,n,o),o}([Gf({contrib:[Sze,Mze]})],M_t);var j_t=Object.defineProperty,D_t=Object.getOwnPropertyDescriptor,T_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?D_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&j_t(t,n,o),o},F_t=function(e){function t(){var e;return rx(this,t),(e=R_t(this,t,arguments))._onEditingChange=e._register(new dS),e.onEditingChange=e._onEditingChange.event,e}return NC(t,e),ox(t,[{key:"emitEditingChange",value:function(e){var t=e.editing,n=e.recordId,r=e.fieldId;this._onEditingChange.emit({recordId:n,fieldId:r,editing:t})}},{key:"isDisableDbClickEdit",value:function(e){return this._configuration.getValue("viewerGridCellEditor.disableDbClickFieldIds").includes(e)}},{key:"isDisableEnterEdit",value:function(e){return this._configuration.getValue("viewerGridCellEditor.disableEnterFieldIds").includes(e)}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);T_t([Yf(RC)],F_t.prototype,"_configuration",2),T_t([Df()],F_t.prototype,"destroy",1),F_t=T_t([Gf()],F_t);var N_t=Object.defineProperty,L_t=Object.getOwnPropertyDescriptor,B_t=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return ch().register(this).register(F_t)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerGridCellEditor",type:"object",title:"表格视图单元格编辑",properties:{disableDbClickFieldIds:{type:"array",description:"禁用双击编辑单元字段列表"},disableEnterFieldIds:{type:"array",description:"禁用enter编辑单元字段列表"}}}),e.registerDefaultValue({"viewerGridCellEditor.disableDbClickFieldIds":[],"viewerGridCellEditor.disableEnterFieldIds":[]})}}])}();B_t.pluginName="render-viewer-grid-cell-editor",B_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?L_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&N_t(t,n,o),o}([Gf({contrib:[Sze]})],B_t);var V_t=Object.defineProperty,z_t=Object.getOwnPropertyDescriptor,H_t=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(fgt).register(this)}}])}();function W_t(e,t,n){return t=DC(t),jC(e,U_t()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function U_t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U_t=function(){return!!e})()}H_t.pluginName="render-viewer-grid-group",H_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?z_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&V_t(t,n,o),o}([Gf({contrib:Sze})],H_t);var G_t=Object.defineProperty,Y_t=Object.getOwnPropertyDescriptor,$_t=function(e,t,n,r){for(var i,o=r>1?void 0:r?Y_t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&G_t(t,n,o),o},q_t=function(e){function t(){var e;return rx(this,t),(e=W_t(this,t,arguments))._onMouseOver=e._register(new dS),e.onMouseOver=e._onMouseOver.event,e._onMouseLeave=e._register(new dS),e.onMouseLeave=e._onMouseLeave.event,e}return NC(t,e),ox(t,[{key:"mouseOver",value:function(e,t){this._onMouseOver.emit({rowId:t,rowIndex:e})}},{key:"mouseLeave",value:function(e,t){this._onMouseLeave.emit({rowId:t,rowIndex:e})}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);$_t([Df()],q_t.prototype,"destroy",1),q_t=$_t([Gf()],q_t);var K_t=u.a.createContext({});K_t.displayName="CellContext";var X_t=K_t.Provider;K_t.Consumer;var J_t=Object(l.memo)((function(e){var t=e.fieldType,n=e.cell,r=Object(l.useContext)(K_t).renderFieldService,i=null==r?void 0:r.getCellIsShowValidTip(t),o=n.errorMessage;return o&&i?u.a.createElement(j4e,{title:o,placement:"left"},u.a.createElement("span",{className:"lakex-table-grid-invalid-flag"})):null}),(function(e,t){return e.cell.updated_at===t.cell.updated_at})),Z_t=k1e(J_t),Q_t=k1e((function(e){var t=e.rowIndex,n=e.colIndex,r=!Gat(Qj.RECORD).canUpdate(),i=Object(l.useContext)(K_t).selectionService,o=jF(Object(l.useState)(null==i?void 0:i.isSelectionEnd(t,n)),2),a=o[0],c=o[1],s=jF(Object(l.useState)(null==i?void 0:i.isInRowsSelect(t)),2),d=s[0],f=s[1];return P$e((function(){var e=null==i?void 0:i.onChange((function(e){e.selection;c(null==i?void 0:i.isSelectionEnd(t,n)),f(null==i?void 0:i.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),!a||d||r?null:u.a.createElement("div",{className:"lakex-viewer-grid-autofill-container"})})),ext=function(e){var t,n=e.recordId,r=e.fieldId,i=e.field,o=e.size,a=e.rowIndex,c=e.colIndex,s=e.rowCount,d=e.colCount,f=e.minHeight,h=e.isFrozen,p=e.readonly,v=Object(l.useContext)(_it),g=v.getFieldTypeById,m=v.getCell,y=v.disableCellTip,b=v.disableAutofill,w=v.disableSelected,_=Object(l.useContext)(K_t),x=_.renderFieldService,k=_.contextMenuService,C=_.renderService,S=_.selectionService,O=_.textColorMap,E=g(r),I=m(n,r),P=Object(l.useRef)(null),M=zft({recordId:n,fieldId:r}),R=mmt(r),A=function(e,t){var n=Object(l.useContext)(_it).gridCellEditService,r=jF(Object(l.useState)(!1),2),i=r[0],o=r[1];return P$e((function(){var r=n.onEditingChange((function(n){var r=n.recordId,i=n.fieldId,a=n.editing;r===e&&i===t&&o(a)}));return function(){r.destroy()}}),[n]),i}(n,r),j=jF(Object(l.useState)(0),2),D=j[0],T=j[1],N=Object(l.useCallback)((function(e){var t=e.e,n=e.recordId,r=e.fieldId,i=null==S?void 0:S.getSelection();if(t.preventDefault(),i&&!(null==S?void 0:S.isSelectOneCell())&&(null==S?void 0:S.isInSelect(a,c)))null==k||k.showContextMenu({from:Oat.MULTI_CELL,e:t,selection:i});else{var o=null==S?void 0:S.createGridSelectionByIndex(a,c,s,d);o&&(null==S||S.setSelection(o)),null==k||k.showContextMenu({from:Oat.CELL,e:t,recordId:n,fieldId:r,selection:i})}}),[]),L=Object(l.useCallback)((function(e){null==S||S.scrollToAnchorPosition(null==S?void 0:S.getSelection(),e.clientY>window.innerHeight/2?"end":"start",(function(){null==C||C.emitDoubleClickCell({fieldId:r,recordId:n,event:e,fieldType:E,hasCellEditable:null==x?void 0:x.hasCellEditable(E)})}))}),[E,r,n]),B=Object(l.useCallback)((function(e){null==C||C.emitClickEvent({eventName:"activeCellClick",data:{fieldId:r,recordId:n,event:e,fieldType:E}})}),[E,r,n]),V=Object(l.useMemo)((function(){return{width:o?o-20:0,height:f-12}}),[o,f]),z=function(e){var t=e.rowIndex,n=e.colIndex,r=e.isFrozen,i=Object(l.useContext)(K_t),o=i.selectionService,a=i.renderZIndexService,u=jF(Object(l.useState)(null==o?void 0:o.isActiveCell(t,n)),2),c=u[0],s=u[1],d=jF(Object(l.useState)(null==o?void 0:o.isInSelect(t,n)),2),f=d[0],h=d[1],p=jF(Object(l.useState)(null==o?void 0:o.isInRowsSelect(t)),2),v=p[0],g=p[1],m=Object(l.useMemo)((function(){return c&&r?null==a?void 0:a.zIndex.gridCellFrozenPreviewer:r?null==a?void 0:a.zIndex.gridCellFrozen:c?null==a?void 0:a.zIndex.gridCellPreviewer:null==a?void 0:a.zIndex.gridCell}),[c,r]);return P$e((function(){var e=null==o?void 0:o.onChange((function(){s(null==o?void 0:o.isActiveCell(t,n)),h(null==o?void 0:o.isInSelect(t,n)),g(null==o?void 0:o.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[t,n]),P$e((function(){s(null==o?void 0:o.isActiveCell(t,n)),h(null==o?void 0:o.isInSelect(t,n)),g(null==o?void 0:o.isInRowsSelect(t))}),[t,n]),{isSelected:c,isInSelect:f,isInRowsSelect:v,inSelect:f&&!c||v,selected:c&&!v,cellZIndex:m}}({rowIndex:a,colIndex:c,isFrozen:h}),H=z.isSelected,W=z.inSelect,U=z.selected,G=z.isInSelect,Y=z.isInRowsSelect,$=z.cellZIndex;Object(l.useLayoutEffect)((function(){var e;if(H&&E===xO.TEXT){var t=null==(e=P.current)?void 0:e.getBoundingClientRect();t&&window.innerHeight-t.bottom<40?T(f-t.height):T(0)}else T(0)}),[H,f,E]);var q=Object(l.useMemo)((function(){return null==x?void 0:x.getFieldComponent(E)}),[E]);return u.a.createElement("div",{ref:P,"data-col":c,"data-record-uuid":n,"data-field-uuid":r,className:F()("lakex-viewer-grid-cell",nx({"in-del-possible":R,"in-highlight":M,"in-select":w?G||Y:W,selected:U,editing:A},"height-".concat(f),f),E),style:{width:o+"px",minHeight:f,zIndex:$,transform:H?"translateY(".concat(D,"px)"):""},onContextMenu:function(e){return N({e:e,recordId:n,fieldId:r,from:Oat.CELL})},onScrollCapture:function(e){return e.stopPropagation()},onDoubleClick:L,onClick:B},u.a.createElement(q,{key:null==I?void 0:I.updated_at,fieldId:r,recordId:n,boxRect:V,rowIndex:a,colIndex:c,writeable:null==S?void 0:S.isEditable(),isSelected:H,field:i,fieldUpdatedAt:i.get("updated_at"),cell:I,focus:!1,readonly:p,textColor:null==(t=null==O?void 0:O[n])?void 0:t[r]}),!y&&I&&u.a.createElement(Z_t,{fieldType:E,cell:I}),!w&&U&&u.a.createElement("div",{className:"lakex-viewer-grid-selected-container"}),!b&&u.a.createElement(Q_t,{rowIndex:a,colIndex:c}))},txt=u.a.createContext({});txt.displayName="RowContext";var nxt=txt.Provider;txt.Consumer;var rxt=function(e){var t=e.rowIndex,n=e.onChecked,r=e.groupItem,i=e.indexInGroup,o=Object(l.useContext)(txt),a=o.gridRecordRenderService,c=o.selectionService,s=jF(Object(l.useState)(null==c?void 0:c.isInRowsSelect(t)),2),d=s[0],f=s[1],h=function(e){var t=e.rowIndex,n=SWe(q_t),r=jF(Object(l.useState)(!1),2),i=r[0],o=r[1];return P$e((function(){null==n||n.onMouseOver((function(e){t===e.rowIndex&&o(!0)})),null==n||n.onMouseLeave((function(e){t===e.rowIndex&&o(!1)}))}),[]),i}({rowIndex:t});return P$e((function(){var e=null==c?void 0:c.onChange((function(){f(null==c?void 0:c.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),h||d?u.a.createElement(kXe,{className:"lakex-viewer-grid-row-checkbox",checked:d,onChange:function(e){e.stopPropagation();var t=e.target.checked;n(!!t)}}):u.a.createElement("div",{className:"lakex-viewer-grid-row-number"},null==a?void 0:a.getRowIndex(t,r,i))},ixt=function(e){var t=e.rowIndex,n=e.onChecked;e.groupItem,e.indexInGroup;var r=Object(l.useContext)(txt).selectionService,i=jF(Object(l.useState)(null==r?void 0:r.isInRowsSelect(t)),2),o=i[0],a=i[1];return P$e((function(){var e=null==r?void 0:r.onChange((function(){a(null==r?void 0:r.isInRowsSelect(t))}));return function(){null==e||e.destroy()}}),[]),u.a.createElement(kXe,{className:"lakex-viewer-grid-row-checkbox",checked:o,onChange:function(e){e.stopPropagation();var t=e.target.checked;n(!!t)}})},oxt=function(e){var t=e.index,n=e.recordId,r=e.colCount,i=e.rowCount,o=e.disableDrag,a=void 0!==o&&o,c=e.hiddenDragIcon,s=void 0!==c&&c,d=e.isReadonly,f=e.listeners,h=void 0===f?{}:f,p=e.rowIndexWidth,v=e.groupItem,g=e.indexInGroup,m=Object(l.useContext)(_it),y=m.defaultColWidth,b=m.rowHeight,w=m.stickyLeftViewFields,_=m.getField,x=Object(l.useContext)(txt),k=x.viewerGridRecordService,C=x.orderService,S=x.contextMenuService,O=x.selectionService,E=x.keepCheckbox,I=null==k?void 0:k.ExpandRecordRecordHeaderIcon,P=null==C?void 0:C.OrderDragIcon,M=Object(l.useCallback)((function(e){var n=(null==O?void 0:O.getSelectRowIndexes())||[],o=(null==O?void 0:O.isRowSelection())||!1;n.includes(t)||o||(n=[t]),n=e?[].concat(Q_(n),[t]):n.filter((function(e){return e!==t}));var a=null==O?void 0:O.createRowGridSelectionByIndex(n,i,r);return a&&(null==O||O.setSelection(a)),a}),[t,i,r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-viewer-grid-row-index",style:p?{width:p}:void 0,onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var n=null==O?void 0:O.isInRowsSelect(t),r=M(!n);r&&(null==S||S.showContextMenu({from:Oat.MULTI_CELL,e:e,selection:r}))}},P&&!s&&!d&&u.a.createElement(P,{listeners:h,disable:a}),E?u.a.createElement(ixt,{rowIndex:t,onChecked:function(e){return M(e)},groupItem:v,indexInGroup:g}):u.a.createElement(rxt,{rowIndex:t,onChecked:function(e){return M(e)},groupItem:v,indexInGroup:g}),I&&u.a.createElement(I,{recordId:n})),OC(w,(function(e,o){var a=e.get("field_uuid");return u.a.createElement(ext,{key:n+"_"+a+"_"+o,recordId:n,fieldId:a,field:_(a),rowIndex:t,colIndex:o,rowCount:i,colCount:r,size:e.get("size")||y,minHeight:b,readonly:d,isFrozen:!0})})))},axt=function(e){var t=e.index,n=e.recordId,r=e.colCount,i=e.rowCount,o=e.hasBlank,a=Object(l.useContext)(_it),c=a.stickyColNum,s=a.defaultColWidth,d=a.rowHeight,f=a.stickyRightViewFields,h=a.getField,p=a.isReadonly;return u.a.createElement(u.a.Fragment,null,PC(f,(function(e,o){var a=e.get("field_uuid");return u.a.createElement(ext,{key:n+"_"+a+"_"+o,recordId:n,fieldId:a,field:h(a),rowIndex:t,colIndex:o+c,rowCount:i,colCount:r,size:e.get("size")||s,minHeight:d,isFrozen:!1,readonly:p})})),o&&u.a.createElement("div",{className:"lakex-viewer-grid-row-blank"}))},lxt=function(e){var t=e.index,n=e.recordId,r=e.sticky,i=e.hasBlank,o=void 0!==i&&i,a=e.disableDrag,c=void 0!==a&&a,s=e.listeners,d=void 0===s?{}:s,f=e.isReadonly,h=e.rowIndexWidth,p=e.groupItem,v=e.indexInGroup,g=Object(l.useContext)(_it),m=g.rowCount,y=g.colCount,b=g.rowHeight,w=Object(l.useContext)(txt),_=w.renderService,x=w.configuration,k=null==x?void 0:x.getValue("viewerGrid.row.dnd.disable"),C=Object(l.useCallback)((function(){(null==x?void 0:x.getValue("render.mode"))===Eze.MOBILE&&_.emitClickRecord({recordId:n})}),[n]);return u.a.createElement("div",{className:"lakex-viewer-grid-row","data-row":t,"data-record-uuid":n,style:{height:b},onClick:C},r?u.a.createElement(oxt,{index:t,recordId:n,colCount:y,rowCount:m,disableDrag:c,hiddenDragIcon:k,listeners:d,isReadonly:f,rowIndexWidth:h,groupItem:p,indexInGroup:v}):u.a.createElement(axt,{index:t,recordId:n,colCount:y,rowCount:m,hasBlank:o}))},uxt=Object.defineProperty,cxt=Object.getOwnPropertyDescriptor,sxt=function(){return ox((function e(){rx(this,e)}),[{key:"getRecordComponent",value:function(){return lxt}},{key:"getRowContextProvider",value:function(){return nxt}},{key:"getCellContextProvider",value:function(){return X_t}}],[{key:"pluginModule",value:function(){return ch().contribution(Rat).register(Tat).register(Bat).register(this)}}])}();sxt.pluginName="render-viewer-grid-record",sxt=function(e,t,n,r){for(var i,o=r>1?void 0:r?cxt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uxt(t,n,o),o}([Gf({contrib:fit})],sxt);var dxt=function(e){var t=e.cellNum;return u.a.createElement("div",{className:"lakex-viewer-grid-footer-column-name"},wx("已选择 $1 个单元格",t))},fxt=function(e){var t=e.viewField,n=Object(l.useContext)(_it),r=n.viewRecords,i=n.viewerGridService,o=n.isReadonly,a=i.Statistics;return a?u.a.createElement(a,{viewField:t,recordIds:OC(r,(function(e){return e.get("record_uuid")})),isReadonly:o}):null},hxt=function(e){var t,n=e.width,r=e.viewField,i=Object(l.useContext)(_it),o=i.selectionService,a=i.isReadonly,c=jF(Object(l.useState)(null==(t=null==o?void 0:o.getSelection())?void 0:t.getRangeAt(0)),2),s=c[0],d=c[1];P$e((function(){var e=null==o?void 0:o.onChange((function(){var e;d(null==(e=null==o?void 0:o.getSelection())?void 0:e.getRangeAt(0))}));return function(){null==e||e.destroy()}}),[o]);var f=s?(s.end.column-s.start.column+1)*(s.end.row-s.start.row+1):0;return u.a.createElement("div",{className:F()("lakex-viewer-grid-footer-column",{"lakex-table-readonly":a}),style:{width:n+"px"}},f>1?u.a.createElement(dxt,{cellNum:f}):u.a.createElement(fxt,{viewField:r}))},pxt=function(e){var t=e.indexColWidth,n=e.defaultColWidth,r=e.stickyColNum,i=e.sticky,o=Object(l.useContext)(_it),a=o.viewFields,c=o.isReadonly,s=i?IC(a,0,r):IC(a,r,a.length);return u.a.createElement(u.a.Fragment,null,OC(s,(function(e,o){if(!e.get("field"))return null;var a=o+(i?0:r);return 0===a?u.a.createElement(hxt,{key:e.get("uuid")+"_"+a,width:t+(e.get("size")||n),viewField:e}):u.a.createElement("div",{key:e.get("uuid")+"_"+a,className:F()("lakex-viewer-grid-footer-column",{"lakex-table-readonly":c}),style:{width:(e.get("size")||n)+"px"}},u.a.createElement(fxt,{viewField:e}))})))},vxt=function(e){Qgt(e);var t=Object(l.useContext)(_it).columnControllerService,n=t.indexColWidth,r=t.defaultColWidth,i=t.stickyColNum;return u.a.createElement("div",{className:"lakex-viewer-grid-footer"},u.a.createElement("div",{className:"lakex-viewer-grid-footer-left"},u.a.createElement(pxt,{indexColWidth:n,defaultColWidth:r,stickyColNum:i,sticky:!0})),u.a.createElement("div",{className:"lakex-viewer-grid-footer-right"},u.a.createElement(pxt,{indexColWidth:n,defaultColWidth:r,stickyColNum:i,sticky:!1})))},gxt=function(e){var t=e.isUngroup,n=e.groupKey,r=e.groupOption,i=e.groupField,o=e.groupViewRecords,a=e.isFolding,c=e.onFold,s=e.groupRecordTotal,d=e.isCompactMode,f=Object(l.useContext)(_it),h=f.stickyPaneWidth,p=f.viewFields,v=f.colCount,g=f.isReadonly,m=SWe(iHe),y=SWe(Ait),b=SWe(Oit),w=SWe(fgt,{optional:!0}),_=SWe(RC).getValue("viewerGrid.group.showTotal"),x=null==m?void 0:m.getFieldComponent(null==i?void 0:i.get("type")),k=b.Statistics,C=null==w?void 0:w.FoldIcon;return u.a.createElement("div",{className:F()("lakex-viewer-grid-group-header",{folded:a,compact:d})},u.a.createElement("div",{className:"left",style:{width:h}},u.a.createElement("div",{className:F()("lakex-viewer-grid-group-header-index",{"no-sticky-col":0===y.stickyColNum})},C&&u.a.createElement(C,{isFolding:a,onFold:c}),t?wx("（空）"):x&&u.a.createElement("div",{className:"lakex-viewer-grid-group-field"},u.a.createElement(x,{readonly:!0,field:i,groupKey:n,cell:r,checkCell:!1,writeable:!1,boxRect:{width:h-80-24-40,height:34}})),_&&u.a.createElement("span",{className:"lakex-viewer-grid-group-total"},s||0)),!d&&IC(p,0,y.stickyColNum).map((function(e,t){var n;return u.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:F()("lakex-viewer-grid-group-header-column sticky")},k?u.a.createElement(k,{viewField:e,recordIds:o.map((function(e){return e.get("record_uuid")})),isReadonly:g}):null)}))),!d&&u.a.createElement("div",{className:"right"},IC(p,y.stickyColNum,v).map((function(e,t){var n;return u.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:F()("lakex-viewer-grid-group-header-column"),style:{width:e.get("size")+"px"}},k?u.a.createElement(k,{viewField:e,recordIds:o.map((function(e){return e.get("record_uuid")})),isReadonly:g}):null)}))))},mxt=["style","context"],yxt=["style","context","item"];function bxt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wxt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bxt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bxt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _xt=function(e){var t=e.style,n=e.context,r=EWe(e,mxt),i=n.rootRect,o=n.useWindowScroll;return u.a.createElement("table",wxt(wxt({},r),{},{style:wxt(wxt({},t),{},{width:o?"auto":"100%",minWidth:o?"750px":"auto",minHeight:o?0:null==i?void 0:i.height})}))},xxt=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,i=e.children,o=SWe(uHe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},i):u.a.createElement("thead",{ref:t,style:wxt(wxt({},n),{},{zIndex:null==o?void 0:o.zIndex.gridHeader})},i)})),kxt=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,i=e.children,o=SWe(uHe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},i):u.a.createElement("tfoot",{ref:t,style:wxt(wxt({},n),{},{zIndex:null==o?void 0:o.zIndex.gridFooter})},i)})),Cxt=function(e){var t,n=e.style,r=e.context,i=e.item,o=EWe(e,yxt),a=jF(Object(l.useState)(0),2),c=a[0],s=a[1],d=o["data-known-size"],f={"--child-height":"".concat(c,"px")},h=null==(t=r.recordIndexMap[i.id])?void 0:t.totalIndex;return Object(l.useEffect)((function(){s((function(e){return 0===d?e:d}))}),[d]),u.a.createElement("tr",wxt(wxt({className:"height-preserving-tr"},o),{},{"data-tr-row":h,style:wxt(wxt({},n),f)}))};function Sxt(e,t,n){return t=DC(t),jC(e,Oxt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Oxt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oxt=function(){return!!e})()}var Ext=function(e){function t(){return rx(this,t),Sxt(this,t,arguments)}return NC(t,e),ox(t)}(G$);function Ixt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pxt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ixt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ixt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ext.activators=[{eventName:"onPointerDown",handler:function(e){var t,n=e.nativeEvent;return 2!==n.button&&(!(t=n.target).dataset||!t.dataset.noDnd)}}];var Mxt=function(e){var t=e.type,n=SWe(iHe).getFieldIcon(t);return n?u.a.createElement(n,{size:16}):null},Rxt=function(e){var t=e.type,n=e.field,r=SWe(iHe).getFieldTagComponent(t);return r&&n?u.a.createElement(r,{field:n,position:"gridHeader"}):null},Axt=function(e){var t,n,r,i,o,a,c=e.viewField,s=e.index,d=e.size,f=e.rootHeight,h=Object(l.useContext)(_it),p=h.isReadonly,v=h.readService,g=h.viewRecords,m=h.viewFields,y=h.groupViewRecords,b=h.group,w=h.filter,_=h.colCount,x=Gat(Qj.VIEW).canUpdate(),k=SWe(yot,{optional:!0}),C=SWe(Ait),S=SWe(Eat,{optional:!0}),O=SWe(mit),E=SWe(iHe),I=SWe(Xze),P=SWe(Oit),M=null==P?void 0:P.HeaderSetting,R=null==P?void 0:P.HeaderTitle,A=void 0!==M?null!=M?u.a.createElement(M,{colKey:c.get("field_uuid")}):null:u.a.createElement(X$e,{type:"ReviewArrowDown",size:16}),j=Object(l.useRef)(),D=vK({id:c.get("uuid"),disabled:!x}),T=D.attributes,N=D.listeners,L=D.setNodeRef,B=D.over,V=D.active,z=jF(Object(l.useState)(!1),2),H=z[0],W=z[1],U=Gat(Qj.FIELD),G=Xat(c.get("field_uuid")),Y=G.field,$=G.fieldId,q=Object(l.useMemo)((function(){return v.isFieldInFilter(Y.get("uuid"),w)}),[w,Y]),K=mmt(c.get("field_uuid")),X=function(e){var t=e.colIndex,n=SWe(yot,{optional:!0}),r=jF(Object(l.useState)(null==n?void 0:n.isSelectOneCol(t)),2),i=r[0],o=r[1];return P$e((function(){var e=null==n?void 0:n.onChange((function(){o(null==n?void 0:n.isSelectOneCol(t))}));return function(){null==e||e.destroy()}}),[n,t]),P$e((function(){o(null==n?void 0:n.isSelectOneCol(t))}),[t]),{isSelectColumn:i}}({colIndex:s}),J=X.isSelectColumn,Z=Object(l.useCallback)((function(){if(k){var e=b?y.map((function(e){var t;return(null==(t=e.viewRecords)?void 0:t.length)||0})).reduce((function(e,t){return e+t}),0):g.length,t=k.createColumnGridSelectionByIndex(s,e,_);k.setSelection(t)}}),[s,g,m,b]),Q=x$e((function(e,t){U.canUpdate(t)&&!p&&(null==I||I.emitClickEvent({eventName:"gridHeader:doubleClick",data:{fieldId:t.get("uuid"),event:e}}))})),ee=Object(l.useCallback)((function(e){var t=e.e,n=e.fieldId;t.preventDefault(),t.stopPropagation(),Z(),null==S||S.showContextMenu({e:t,from:Oat.HEADER,fieldId:n})}),[s,g,m,b]);if(P$e((function(){if(H){var e=Dze(window,"mousemove",Gc((function(e){C.emitResizing(e)}),16)),t=Dze(window,"mouseup",(function(t){C.emitResizeEnd(t),W(!1),e.destroy()}));return function(){e.destroy(),t.destroy()}}}),[H]),!Y)return null;if(!E.getFieldTargetPlugin(Y.get("type")))return null;var te=null==(r=null==(n=null==(t=null==V?void 0:V.data)?void 0:t.current)?void 0:n.sortable)?void 0:r.index,ne=null==(a=null==(o=null==(i=null==B?void 0:B.data)?void 0:i.current)?void 0:o.sortable)?void 0:a.index;return u.a.createElement("div",{key:Y.get("updated_at"),ref:function(e){L(e),j.current=e},className:F()("lakex-viewer-grid-header-column",{"in-filter":q,"is-selected":J,"is-del-possible":K}),"data-col-index":s,"data-field-id":$,style:{width:(d||C.defaultColWidth)+"px"},onClick:function(e){return Z()},onContextMenu:function(e){ee({e:e,fieldId:$}),null==O||O.emitColContextMenu({e:e,fieldId:$})},onDoubleClick:function(e){return Q(e,Y)}},u.a.createElement("div",Pxt(Pxt({className:"lakex-viewer-grid-header-column-content"},N),T),R?u.a.createElement(R,{colKey:Y.get("uuid")}):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-viewer-grid-header-column-icon"},u.a.createElement(Mxt,{type:Y.get("type")})),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-name"},Y.get("name")),u.a.createElement(Rxt,{type:Y.get("type"),field:Y}))),A&&u.a.createElement("div",{className:"lakex-viewer-grid-header-column-dropdown",onClick:function(e){ee({e:e,fieldId:$}),null==O||O.emitColSettingClick({e:e,fieldId:$})}},A),u.a.createElement("div",{className:"lakex-viewer-grid-header-column-resizer",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),C.emitResizeStart(e,m,s),W(!0)}}),(null==B?void 0:B.id)===c.get("uuid")&&(null==B?void 0:B.id)!==(null==V?void 0:V.id)&&u.a.createElement("div",{className:F()("lakex-viewer-grid-dragger-line",{left:te>ne,right:te<ne}),style:{height:f}}))},jxt=function(){var e,t=SWe(yot,{optional:!0}),n=jF(Object(l.useState)(null==(e=null==t?void 0:t.getSelection())?void 0:e.isAllSelect),2),r=n[0],i=n[1];return P$e((function(){var e=null==t?void 0:t.onChange((function(e){var t=e.selection;i(null==t?void 0:t.isAllSelect)}));return function(){null==e||e.destroy()}}),[]),u.a.createElement(kXe,{className:"lakex-viewer-grid-header-checkbox",checked:r,onChange:function(e){e.stopPropagation(),e.target.checked?null==t||t.selectAll():null==t||t.removeSelection()}})},Dxt=function(e){var t=e.sticky,n=e.stickyColNum,r=e.rootHeight,i=e.hasBlank,o=void 0!==i&&i,a=e.rowIndexWidth,c=Object(l.useContext)(_it),s=c.viewRecords,d=c.viewFields,f=c.isReadonly,h=SWe(Oit),p=!f&&h.AddField,v=t?IC(d,0,n):IC(d,n,d.length);return u.a.createElement("div",{className:"lakex-viewer-grid-header-row"},t&&u.a.createElement("div",{className:"lakex-viewer-grid-header-index",style:a?{width:a}:void 0},0!==(null==s?void 0:s.length)&&u.a.createElement(jxt,null)),OC(v,(function(e,i){var o=i+(t?0:n);return u.a.createElement(Axt,{key:e.get("uuid"),viewField:e,index:o,size:e.get("size"),rootHeight:r})})),o&&p&&u.a.createElement(p,null))},Txt=Object(l.memo)((function(e){var t,n,r,i,o,a=e.rowIndexWidth,s=e.isCompactMode,d=e.style,f=Object(l.useContext)(_it),h=f.isReadonly,p=f.viewFields,v=SWe(pht),g=SWe(Ait),m=SWe(Vze),y=Gat(Qj.FIELD).canCreate(),b=SWe(RC).getValue("viewerGrid.col.dnd.disable"),w=jF(Object(l.useState)(null),2),_=w[0],x=w[1],k=Object(l.useRef)(null),C=qY($Y(Ext,{activationConstraint:{distance:8}})),S=Object(l.useMemo)((function(){return CC(p,(function(e){return e.get("uuid")===_}))}),[_,p]),O=p.get(S),E=function(){var e=aO(QC.mark((function e(t){var n,r,i,o,a,l;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.active,o=t.over,x(null),i.id===o.id){e.next=7;break}return a=null==(n=xC(p,(function(e){return e.get("uuid")===i.id})))?void 0:n.get("field_uuid"),l=null==(r=xC(p,(function(e){return e.get("uuid")===o.id})))?void 0:r.get("field_uuid"),e.next=7,v.updateFieldOrder(a,l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=u.a.createElement("div",{className:F()("lakex-viewer-grid-header",{compact:s}),style:d},u.a.createElement("div",{className:"lakex-viewer-grid-header-left"},u.a.createElement("div",{className:"lakex-viewer-grid-header-main"},u.a.createElement(Dxt,{sticky:!0,stickyColNum:g.stickyColNum,rootHeight:(null==(t=k.current)?void 0:t.height)||"100%",rowIndexWidth:a}))),u.a.createElement("div",{className:F()("lakex-viewer-grid-header-right",{"has-blank":y})},u.a.createElement("div",{className:"lakex-viewer-grid-header-main"},u.a.createElement(Dxt,{sticky:!1,stickyColNum:g.stickyColNum,rootHeight:(null==(n=k.current)?void 0:n.height)||"100%",hasBlank:y}))));return h||b?I:u.a.createElement(Rq,{sensors:C,modifiers:[yK],collisionDetection:n$,onDragStart:function(e){x(e.active.id),m.$root&&(k.current=m.$root.getBoundingClientRect())},onDragEnd:E,autoScroll:{threshold:{x:.2,y:0}}},u.a.createElement(uK,{items:OC(p,(function(e){return Pxt(Pxt({},e),{},{id:e.get("uuid")})})),strategy:nK},I,Object(c.createPortal)(u.a.createElement(Kq,{className:"lakex-table-grid-header-drag",style:{height:null==(r=k.current)?void 0:r.height,top:null==(i=k.current)?void 0:i.top},dropAnimation:null},O?u.a.createElement("div",{className:"lakex-viewer-grid-header-drag-overlay"},u.a.createElement(Axt,{viewField:O,index:S,size:O.get("size"),rootHeight:(null==(o=k.current)?void 0:o.height)||"100%"})):null),document.body)))}),(function(e,t){return!(e.headerKey!==t.headerKey)})),Fxt=function(e){var t=Object(l.useContext)(_it).headerKey;return u.a.createElement(Txt,Pxt({headerKey:t},e))};function Nxt(e){var t=SWe(Jvt,{optional:!0}),n=jF(Object(l.useState)(!1),2),r=n[0],i=n[1],o=jF(Object(l.useState)(null),2),a=o[0],u=o[1];return P$e((function(){var n=null==t?void 0:t.onRefreshTooltipChange((function(t){var n=t.recordId,r=t.desc;if(!n)return i(!1),void u(null);i(e===n),u(r)}));return function(){null==n||n.destroy()}}),[t]),{isInRefresh:r,refreshDesc:a}}var Lxt=k1e((function(e){var t=Nxt(e.recordId),n=t.isInRefresh,r=t.refreshDesc;return n?u.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip"},null==r?void 0:r.text,u.a.createElement(j4e,{placement:"top",title:null==r?void 0:r.ps},u.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip-icon"},u.a.createElement(X$e,{type:"Question",size:16})))):null})),Bxt=function(e){var t=e.index,n=e.recordId,r=e.sticky,i=void 0===r||r,o=e.hasBlank,a=void 0!==o&&o,c=e.isDragging,s=void 0!==c&&c,d=e.isGroupLast,f=void 0!==d&&d,h=e.disableDrag,p=void 0!==h&&h,v=e.isReadonly,g=e.listeners,m=e.rowIndexWidth,y=e.groupItem,b=e.indexInGroup,w=Object(l.useContext)(_it),_=w.disableCellTip,x=w.Record,k=w.disableRefresh,C=gmt(n),S=Object(l.useRef)(),O=function(e){var t=e.rowIndex,n=Object(l.useContext)(_it).selectionService,r=function(){var e,r,i=null==(e=null==n?void 0:n.getSelection())?void 0:e.getRangeAt(0);return(null==(r=null==i?void 0:i.start)?void 0:r.row)===t},i=function(){return!!(null==n?void 0:n.getSelection())&&r()&&(null==n?void 0:n.isSelectOneCell())},o=function(){return null==n?void 0:n.isInRowsSelect(t)},a=jF(Object(l.useState)(r()),2),u=a[0],c=a[1],s=jF(Object(l.useState)(i()),2),d=s[0],f=s[1],h=jF(Object(l.useState)(o()),2),p=h[0],v=h[1];return P$e((function(){var e=null==n?void 0:n.onChange((function(){c(r()),f(i()),v(o())}));return function(){null==e||e.destroy()}}),[n,t]),{isRowSelected:u,isSelectOneCell:d,isInRowsSelect:p}}({rowIndex:t}),E=O.isRowSelected,I=O.isSelectOneCell,P=O.isInRowsSelect;return g?u.a.createElement("div",{className:F()("lakex-viewer-grid-row-container",{"is-dragging":s,sticky:i,normal:!i,"group-last":f,selected:E,"is-select-one":I,"is-in-row-select":P,"is-del-possible":C}),ref:function(e){return S.current=e}},i&&!_&&u.a.createElement(Lxt,{recordId:n}),x&&u.a.createElement(x,{index:t,recordId:n,sticky:i,hasBlank:a,disableDrag:p,isReadonly:v,listeners:g,rowIndexWidth:m,groupItem:y,indexInGroup:b})):u.a.createElement("div",{className:F()("lakex-viewer-grid-row-container",{sticky:i,normal:!i,"group-last":f,"is-select-one":I,"is-in-row-select":P,"is-del-possible":C}),ref:function(e){return S.current=e}},i&&!k&&u.a.createElement(Lxt,{recordId:n}),x&&u.a.createElement(x,{index:t,recordId:n,sticky:i,hasBlank:a,isReadonly:v,disableDrag:p,rowIndexWidth:m,groupItem:y,indexInGroup:b}))};function Vxt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zxt=function(e){var t,n,r,i,o=e.isSameGroup,a=e.recordIndexMap,l=e.active,c=e.over,s=e.record,d=null==(n=null==(t=null==l?void 0:l.data.current)?void 0:t.sortable)?void 0:n.index,f=null==(i=null==(r=null==c?void 0:c.data.current)?void 0:r.sortable)?void 0:i.index;if(!c||!l)return null;if(!o&&c.id===s.id&&c.id!==l.id){var h=a[c.id].isGroupFirst,p=a[c.id].isGroupLast;return u.a.createElement("div",{className:F()("lakex-viewer-grid-group-dragger-line",{top:d>f,bottom:d<f,first:h,last:p})})}return null},Hxt=function(e){var t=e.index,n=e.record,r=e.listeners,i=void 0===r?{}:r,o=e.isReadonly,a=e.setNodeRef,l=e.style,c=e.attributes,s=e.isGroupLast,d=e.isSameGroup,f=e.recordIndexMap,h=e.active,p=e.over,v=e.rowIndexWidth,g=e.isCompactMode,m=SWe(q_t);return u.a.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vxt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vxt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:o?void 0:a,className:F()("lakex-viewer-grid-group-row",{compact:g}),style:l,onMouseOver:function(){null==m||m.mouseOver(t,n.id)},onMouseLeave:function(){null==m||m.mouseLeave(t,n.id)}},c),u.a.createElement(Bxt,{key:(null==n?void 0:n.id)+"_sticky_"+t,index:t,recordId:n.viewRecord.get("record_uuid"),sticky:!0,isGroupLast:s,listeners:i,isReadonly:o,rowIndexWidth:v}),u.a.createElement(Bxt,{key:(null==n?void 0:n.id)+"_"+t,index:t,recordId:n.viewRecord.get("record_uuid"),sticky:!1,isGroupLast:s,isReadonly:o,rowIndexWidth:v}),u.a.createElement(zxt,{isSameGroup:d,recordIndexMap:f,active:h,over:p,record:n}))},Wxt=u.a.createContext({});Wxt.displayName="GridGroupContext";var Uxt=Wxt.Provider;Wxt.Consumer;var Gxt=function(e){var t=e.index,n=e.record,r=e.groupFolding,i=e.rowIndexWidth,o=e.isCompactMode,a=e.canCreateRecord,c=Object(l.useContext)(_it),s=c.isReadonly,d=c.groupViewRecords,f=c.viewFields,h=c.viewRecords,p=c.stickyPaneWidth,v=SWe(Oit),g=SWe(fgt,{optional:!0}),m=Object(l.useContext)(Wxt).recordIndexMap,y=vK({id:n.id,disabled:s}),b=y.attributes,w=y.listeners,_=y.setNodeRef,x=y.transform,k=y.transition,C=y.isDragging,S=y.over,O=y.active,E=m[n.id];if(!E)return null;var I=E.groupIndex,P=E.isGroupFirst,M=E.isGroupLast,R=d[I],A=R.key||v.UNGROUP_KEY,j=null==r?void 0:r.has(A),D=null==v?void 0:v.AddRecord,T=null;if(!j){var F={transform:"",transition:k,opacity:C?0:1},N=!(!O||!S)&&m[O.id].groupIndex===m[S.id].groupIndex;N&&(F.transform=M$e.Transform.toString(x)||""),T=u.a.createElement(Hxt,{index:t,record:n,listeners:w,isReadonly:s,setNodeRef:_,style:F,attributes:b,isGroupLast:M,isSameGroup:N,recordIndexMap:m,active:O,over:S,rowIndexWidth:i,isCompactMode:o})}return u.a.createElement("td",null,P&&u.a.createElement(gxt,{isUngroup:!R.option,groupField:R.field,groupOption:R.option,groupViewRecords:R.viewRecords,groupRecordTotal:R.paginationTotal,isFolding:!!j,onFold:function(e){var t;null==g||g.setGroupFolding(null==(t=f.get(0))?void 0:t.get("view_uuid"),R.field.get("uuid"),A,e)},isCompactMode:o}),T,!s&&M&&!j&&u.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:p}},D&&a?u.a.createElement(D,{inGroup:!0,index:t,viewGroupRecord:R,viewRecords:h,viewFields:f}):null))},Yxt=function(e,t,n,r){var i=SWe(Hit),o=SWe(pht),a=SWe(yot,{optional:!0}),u=SWe(XA),c=jF(Object(l.useState)(null),2),s=c[0],d=c[1],f=jF(Object(l.useState)([]),2),h=f[0],v=f[1],g=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=0&&s&&h.includes(s)&&r>0){var i=null==a?void 0:a.createGridSelectionByScope({row:e,column:0},{row:e+r-1,column:n.length-1},t.length,n.length);i&&(null==a||a.setSelection(i))}},m=function(){var n=aO(QC.mark((function n(a){var l,c,s,f,m,y,b,w,_,x,k,C,S,O,E,I,P,M,R,A,j,D,T,F,N;return QC.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(y=a.active,b=a.over,!(y.id!==b.id||h.length>1)){n.next=20;break}if(w=y.id,_=b.id,x=e[w],k=x.groupIndex,C=x.recordId,S=e[_],O=S.groupIndex,E=S.recordId,I=t[k]||null,P=t[O]||null,!(null==r?void 0:r.get("keep_sort"))||I!==P){n.next=11;break}return p.b.warning(wx("取消排序后，可进行拖拽")),n.abrupt("return");case 11:return I&&P&&I!==P&&(M=null==(l=y.data.current.sortable)?void 0:l.index,R=null==(c=b.data.current.sortable)?void 0:c.index,A=u.getOriginViewRecords(),j=CC(A,(function(e){return e.get("uuid")===w})),D=CC(A,(function(e){return e.get("uuid")===_})),M<R&&j>D&&(E=null==(s=A[D+1])?void 0:s.record_uuid),M>R&&j<D&&(E=null==(f=A[D-1])?void 0:f.record_uuid)),n.next=14,o.updateRecordOrder(h.length>0?h:C,E,P);case 14:if(!(null==r?void 0:r.get("keep_sort"))){n.next=20;break}return T=u.getFlatViewRecords(r.get("view_uuid")),F=CC(T,(function(e){return e.get("uuid")===w})),i.scrollIntoView({index:F,align:"start"}),p.b.warning(wx("当前处于保持排序状态，为您重新定位")),n.abrupt("return");case 20:N=null==(m=y.data.current.sortable)?void 0:m.index,g(N,h.length),d(null),v([]);case 24:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=qY($Y(G$,{activationConstraint:{distance:8}}));return{activeId:s,selectedIds:h,sensors:y,onDragStart:function(e){var r;d(e.active.id);var i,o,l=null==a?void 0:a.getSelection(),u=null==(r=e.active.data.current.sortable)?void 0:r.index;if(l&&(null==a?void 0:a.isRowSelection())&&(null==a?void 0:a.isInRowsSelect(u))){var c=(null==a?void 0:a.getRecordIds(l))||[];v(c),i=u,(o=null==a?void 0:a.createRowGridSelectionByIndex(i,t.length,n.length))&&(null==a||a.setSelection(o))}else v([])},onDragEnd:m}},$xt=function(e){var t=e.rootRect,n=e.useWindowScroll,r=e.customScrollParent,i=e.customModalContainer,o=e.disableVirtualScroll,a=Object(l.useContext)(_it),s=a.isReadonly,d=a.groupViewRecords,f=a.viewFields,h=a.viewConfig,p=a.group,v=a.rowHeight,g=SWe(RC),m=SWe(Hit),y=null==g?void 0:g.getValue("viewerGrid.footer.disable"),b=null==g?void 0:g.getValue("viewerGrid.group.compact"),w=SWe(Oit),_=SWe(fgt,{optional:!0}),x=SWe(Ait),k=null==x?void 0:x.getRowIndexWidth(),C=null==w?void 0:w.AddRecord,S=function(e){return Object(l.useMemo)((function(){for(var t={},n=[],r=[],i=0,o=0;o<e.length;o++){var a=e[o].viewRecords||[];o>0&&(i+=(e[o-1].viewRecords||[]).length);for(var l=0;l<a.length;l++){var u=a[l];t[u.get("uuid")]={recordId:u.get("record_uuid"),groupIndex:o,totalIndex:i+l,indexInGroup:l,isGroupFirst:0===l,isGroupLast:l===a.length-1},n.push({id:u.get("uuid"),viewRecord:u}),r.push(u)}}return{recordIndexMap:t,allRecords:n,viewRecords:r}}),[e])}(d),O=S.allRecords,E=S.viewRecords,I=S.recordIndexMap,P=Yxt(I,d,f,h),M=P.activeId,R=P.selectedIds,A=P.sensors,j=P.onDragStart,D=P.onDragEnd,T=Gat(Qj.RECORD).canCreate(),N=null==_?void 0:_.getGroupFolding(h.get("view_uuid"),p.get("field_uuid")),L=Object(l.useRef)(null),B=Object(l.useMemo)((function(){var e=E.filter((function(e){var t=e.get("group_item_key")||w.UNGROUP_KEY,n=null==N?void 0:N.has(t),r=e.get("uuid");return!!I[r].isGroupFirst||!n})).map((function(e){return{id:e.get("uuid"),viewRecord:e}}));return M?e.filter((function(e){var t=e.id;return t===M||!R.includes(t)})):e}),[E,M,R,N,I]),V=B.findIndex((function(e){return e.id===M})),z=B[V];if(P$e((function(){L.current&&(null==m||m.setVirtuosoRef(L.current))}),[m,L]),E$e((function(){null==m||m.destroy()})),0===O.length&&T)return C?u.a.createElement(C,{inGroup:!0,index:-1,viewRecords:[],viewFields:f}):null;var H=u.a.createElement(Uxt,{value:{recordIndexMap:I}},u.a.createElement(xae,{ref:L,useWindowScroll:n,customScrollParent:r,context:{rootRect:t,useWindowScroll:n,groupFolding:N,ungroupKey:w.UNGROUP_KEY,recordIndexMap:I},components:{Table:_xt,TableHead:xxt,TableFoot:kxt,TableRow:Cxt},isScrolling:function(e){null==m||m.isScrolling(e)},onScroll:null==m?void 0:m.emitScrollEvent,data:B,defaultItemHeight:v,itemSize:function(e){if(void 0===e.dataset.index)return v;var t=parseInt(e.dataset.index),n=B[t];if(!n)return v;var r=I[n.id],i=r.isGroupFirst,o=r.isGroupLast,a=r.groupIndex,l=d[a].key||w.UNGROUP_KEY,u=null==N?void 0:N.has(l);return(u?0:v)+(i?56:0)+(o&&!u&&T?40:0)+(t===B.length-1?20:0)},increaseViewportBy:o?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==t?void 0:t.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(Fxt,{rowIndexWidth:k,isCompactMode:b})))},fixedFooterContent:function(){return y?null:u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(vxt,null)))},itemContent:function(e,t){var n=e;return B.length!==E.length&&(n=I[t.id].totalIndex),u.a.createElement(u.a.Fragment,null,u.a.createElement(Gxt,{key:t.id,index:n,record:t,groupFolding:N,rowIndexWidth:k,isCompactMode:b,canCreateRecord:T}),e===B.length-1?u.a.createElement("div",{className:"lakex-viewer-grid-group-gap-line"}):null)}}));return s?H:u.a.createElement(Rq,{sensors:A,modifiers:[xK,_K],collisionDetection:n$,onDragStart:j,onDragEnd:D,autoScroll:{threshold:{x:0,y:.2}}},u.a.createElement(uK,{items:B,strategy:oK},u.a.createElement(u.a.Fragment,null,H,Object(c.createPortal)(u.a.createElement(Kq,{dropAnimation:null,style:{width:"".concat(t.width,"px"),left:"".concat(t.left,"px"),overflow:"hidden"}},z?u.a.createElement("div",{className:F()("lakex-viewer-grid-group-row",{count:R.length>0}),style:{"--count":"'".concat(R.length,"'")}},u.a.createElement(Bxt,{index:V,recordId:z.viewRecord.get("record_uuid"),sticky:!0,isGroupLast:!1}),u.a.createElement(Bxt,{index:V,recordId:z.viewRecord.get("record_uuid"),sticky:!1,isGroupLast:!1})):null),i))))},qxt=Rf.defineToken("PaginationPluginContribution");function Kxt(e,t,n){return t=DC(t),jC(e,Xxt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function Xxt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xxt=function(){return!!e})()}var Jxt=Object.defineProperty,Zxt=Object.getOwnPropertyDescriptor,Qxt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Zxt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Jxt(t,n,o),o},ekt=function(e){function t(){var e;return rx(this,t),(e=Kxt(this,t,arguments))._onChange=e._register(new dS),e.onChange=e._onChange.event,e._onPageSizeChange=e._register(new dS),e.onPageSizeChange=e._onPageSizeChange.event,e}return NC(t,e),ox(t,[{key:"updatePage",value:(r=aO(QC.mark((function e(t,n){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._commmandService.execCommand("updatePagination",{pagination_current:t,pagination_page_size:n}),this._onChange.emit({page:t,pageSize:n});case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"updatePageSize",value:(n=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._commmandService.execCommand("updatePagination",{pagination_page_size:t}),this._onPageSizeChange.emit(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]);var n,r}(HC);function tkt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nkt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nkt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function nkt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rkt(e,t,n){return t=DC(t),jC(e,ikt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ikt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ikt=function(){return!!e})()}Qxt([Yf(Lj)],ekt.prototype,"_commmandService",2),ekt=Qxt([Gf()],ekt);var okt=Object.defineProperty,akt=Object.getOwnPropertyDescriptor,lkt=function(e,t,n,r){for(var i,o=r>1?void 0:r?akt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&okt(t,n,o),o},ukt=function(e){function t(){var e;return rx(this,t),(e=rkt(this,t,arguments))._onPaginationChange=e._register(new dS),e.onPaginationChange=e._onPaginationChange.event,e._onPaginationLoading=e._register(new dS),e.onPaginationLoading=e._onPaginationLoading.event,e.emitPaginationLoading=function(t){e._onPaginationLoading.emit(t)},e.locked=!1,e}return NC(t,e),ox(t,[{key:"init",value:function(){var e=this;this._viewerGridScrollService.onScroll(Gc((function(){e.enablePagination&&e.loadMoreIfNeed()}),300))}},{key:"enablePagination",get:function(){return!!this._configuration.getValue("viewerGrid.pagination.enable")}},{key:"isPageMode",get:function(){return"page"===this._configuration.getValue("viewerGrid.pagination.mode")}},{key:"getPaginationProps",value:function(){var e,t=this,n=null==(e=this._configuration)?void 0:e.getValue("viewerGrid.pagination"),r=this._readService.getViewConfig(),i={total:r.get("pagination_total"),current:r.get("pagination_current"),pageSize:r.get("pagination_page_size"),showSizeChanger:n.showSizeChanger,showQuickJumper:n.showQuickJumper,pageSizeOptions:n.pageSizeOptions.split(","),onShowSizeChange:function(e,n){t._paginationDataService.updatePageSize(n)},onChange:function(e,n){t._paginationDataService.updatePage(e,n)}};return n.showTotal&&(i.showTotal=function(e){return"共 ".concat(e," 条")}),i}},{key:"loadMoreIfNeed",value:function(){if(!this.locked){var e=this._viewerGridScrollService.scroller.scrollTop+this._viewerGridScrollService.scroller.clientHeight,t=this._getPaginationChange(e,100);t&&this._onPaginationChange.emit(t)}}},{key:"_isGroup",value:function(){var e;return!!(null==(e=this._readService.getViewGroup())?void 0:e.group)}},{key:"triggerGroupPaginationChange",value:function(e){var t=this._readService.getActiveViewId(),n=this._readService.getViewGroup(t);if(n){var r=n.field.get("uuid"),i=xC(this._readService.getGroupItems(t,r),(function(t){return t.get("key")===e}));i&&(i.get("pagination_loaded")||this._onPaginationChange.emit({page:i.get("pagination_current")+1,pageSize:i.get("pagination_page_size"),groupKey:e}))}}},{key:"_getGroupPaginationChangeByScroll",value:function(e,t){var n=this._readService.getActiveViewId(),r=this._readService.getViewGroup(n);if(r){var i,o,a=r.field.get("uuid"),l=this._configuration.getValue("viewerGrid.row.height.low"),u=0,c=tkt(this._readService.getGroupItems(n,a));try{for(c.s();!(o=c.n()).done;){var s=o.value;if(s.get("collapse"))u+=36;else if(e>=(u+=36+l*(s.get("pagination_current")||1)*s.get("pagination_page_size"))-t&&!s.get("pagination_loaded")){i=s;break}}}catch(e){c.e(e)}finally{c.f()}if(i&&!i.get("pagination_loaded"))return{groupKey:i.get("key"),page:i.get("pagination_current")+1,pageSize:i.get("pagination_page_size")}}}},{key:"_getPaginationChange",value:function(e,t){var n=this._readService.getViewConfig();if(!n.get("pagination_loaded")){var r=this._configuration.getValue("viewerGrid.row.height.low"),i=n.get("pagination_current"),o=n.get("pagination_page_size");return e>=r*(i||1)*o-t&&!n.get("pagination_loaded")?{page:i+1,pageSize:o}:void 0}}}])}(HC);lkt([Yf(Hit)],ukt.prototype,"_viewerGridScrollService",2),lkt([Yf(RC)],ukt.prototype,"_configuration",2),lkt([Yf(ekt)],ukt.prototype,"_paginationDataService",2),lkt([Yf(XA)],ukt.prototype,"_readService",2),lkt([jf()],ukt.prototype,"init",1),ukt=lkt([Gf()],ukt);var ckt=["children"],skt=["children","style","contentWidth"];function dkt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fkt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dkt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dkt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hkt=u.a.createContext({});hkt.displayName="StickyListContext";var pkt=function(e){var t=e.className,n=e.record,r=e.recordIndexMap,i=e.groupFolding,o=e.rowIndexWidth,a=e.isCompactMode,c=e.style,s=Object(l.useContext)(_it).groupViewRecords,d=SWe(Oit),f=SWe(q_t),h=Gat(Qj.VIEW).isReadonly(),p=r[n.id],v=p.groupIndex,g=p.totalIndex,m=p.indexInGroup,y=p.isGroupLast,b=s[v],w=b.key||d.UNGROUP_KEY,_=null==i?void 0:i.has(w),x=Vc(b,"paginationCurrent","paginationPageSize","paginationLoaded","paginationTotal","paginationStartIndex","key");return u.a.createElement("div",{className:t,style:c},!_&&u.a.createElement("div",{className:F()("lakex-viewer-grid-group-row",{compact:a}),onMouseOver:function(){null==f||f.mouseOver(g,n.id)},onMouseLeave:function(){null==f||f.mouseLeave(g,n.id)}},u.a.createElement(Bxt,{key:(null==n?void 0:n.id)+"_sticky_"+g,index:g,recordId:n.viewRecord.record_uuid,sticky:!0,isGroupLast:y,isReadonly:h,rowIndexWidth:o,groupItem:x,indexInGroup:m}),u.a.createElement(Bxt,{key:(null==n?void 0:n.id)+"_"+g,index:g,recordId:n.viewRecord.record_uuid,sticky:!1,isGroupLast:y,isReadonly:h,rowIndexWidth:o,groupItem:x,indexInGroup:m})))},vkt=function(e){var t=e.style,n=e.record,r=e.groupFolding,i=jF(Object(l.useState)(!1),2),o=i[0],a=i[1],c=SWe(ukt);return P$e((function(){null==c||c.onPaginationLoading((function(e){e.key===n.groupKey&&a(e.loading)}))}),[n,c]),(null==r?void 0:r.has(n.groupKey))?null:u.a.createElement("div",{style:t},u.a.createElement(aXe,{type:"text",disabled:o,className:"lakex-table-group-load-more-btn",onClick:function(){null==c||c.triggerGroupPaginationChange(n.groupKey)}},wx(o?"加载中...":"加载更多")))},gkt=u.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.children,r=EWe(e,ckt);return u.a.createElement(hkt.Consumer,null,(function(e){var i=e.rowIndexWidth,o=e.isCompactMode,a=e.contentWidth;return u.a.createElement("tbody",fkt(fkt({},r),{},{className:"lakex-table-grid-new-tbody",ref:t}),u.a.createElement("tr",{className:"lakex-table-grid-group-new-head",style:{width:a}},u.a.createElement(Fxt,{style:{width:"100%"},rowIndexWidth:i,isCompactMode:o})),n)}))})),mkt=u.a.forwardRef((function(e,t){var n=e.children,r=e.style;e.contentWidth;var i=EWe(e,skt);return u.a.createElement("div",{ref:t,style:r,"data-virtuoso-scroller":"true",onScroll:function(){try{i.onScroll&&i.onScroll.apply(i,arguments)}catch(e){console.error(e)}}},u.a.createElement("table",fkt(fkt({},i),{},{className:"lakex-table-grid-group-simple"}),n))})),ykt=function(e){var t=e.rootRect,n=Object(l.useContext)(_it),r=n.groupViewRecords,i=n.viewFields,o=n.viewConfig,a=n.group,c=n.rowHeight,s=jF(Object(l.useState)(c),2),d=s[0],f=s[1],h=Object(l.useRef)(null),p=Object(l.useRef)(null),v=Object(l.useRef)(null),g=SWe(RC),m=SWe(Hit),y=null==g?void 0:g.getValue("viewerGrid.group.compact"),b=SWe(fgt,{optional:!0}),w=null==b?void 0:b.getGroupFolding(o.get("view_uuid"),a.get("field_uuid")),_=SWe(Ait),x=null==_?void 0:_.getRowIndexWidth(),k=Math.max((null==_?void 0:_.getInnerColTotalWidth(i))+180,t.width),C=function(e,t,n,r){return Object(l.useMemo)((function(){for(var i={},o=[],a=[],l=0,u=0,c=n+"-"+r,s=0;s<e.length;s++){var d=e[s],f=d.viewRecords||[],h=null==t?void 0:t.has(d.key);s>0&&(l+=(e[s-1].viewRecords||[]).length),++u,o.push({id:"group-title-"+d.key+"-"+u+"-"+c+"-"+d.paginationTotal+"-"+(d.collapse?"1":"0"),groupItem:d});for(var p=0;p<f.length;p++){var v=f[p].toJSON();++u;var g=v.record_uuid+"-"+p+"-"+c;i[g]={recordId:v.record_uuid,groupIndex:s,totalIndex:l+p,indexInGroup:p,isGroupFirst:0===p,isGroupLast:p===f.length-1},h||o.push({id:g,viewRecord:v}),a.push(v)}h||d.paginationLoaded||(++u,o.push({id:"more-"+u+"-"+c+"-"+Cx(6),groupKey:d.key,isLoadMore:!0}))}return{items:o,viewRecords:a,recordIndexMap:i}}),[e,t])}(r,w,c,k),S=C.items,O=C.recordIndexMap;P$e((function(){h.current&&(null==m||m.setVariableRef(h.current))}),[m,h]),E$e((function(){null==m||m.destroy()}));var E=t.height,I=t.width,P=C$e((function(e){p.current=e.scrollTop,v.current=e.scrollLeft}),100);P$e((function(){h.current.clearCache()}),[S]),P$e((function(){h.current.clearCache(),f(c)}),[c]);var M=Object(l.useCallback)((function(e){if(0===e)return 36;var t=S[e-1];return t?t.groupItem?37:t.isLoadMore?32:d:d}),[S,d]),R={width:I,height:(null==S?void 0:S.length)?E:null,overflowX:"auto",overflowY:"auto"};return u.a.createElement(hkt.Provider,{value:{rowIndexWidth:x,isCompactMode:y,contentWidth:k}},u.a.createElement(_2e,{ref:h,width:I,contentWidth:k,height:E,overscanCount:200,disableVirtual:!0,initialScrollOffset:p.current,itemCount:S.length+1,itemSize:M,itemData:S,itemKey:function(e){if(0===e)return"header";var t=S[e-1];return(null==t?void 0:t.id)||e},innerElementType:gkt,outerElementType:mkt,style:fkt({},R),onScroll:function(e){!function(e){if(!e.scrollDirection){var t=Do(e,"nativeEvent.target.scrollLeft"),n=Do(e,"nativeEvent.target.scrollTop");P({scrollLeft:t,scrollTop:n}),null==m||m.emitScrollEvent(e)}}(e)}},(function(e){if(0===e.index)return null;var t,n=S[e.index-1];return t=n.groupItem?u.a.createElement("div",{className:"lakex-table-grid-group-header-wrapper",style:{width:k}},u.a.createElement(gxt,{groupField:n.groupItem.field,groupKey:n.groupItem.key,groupViewRecords:n.groupItem.viewRecords,groupRecordTotal:n.groupItem.paginationTotal,isFolding:!!n.groupItem.collapse,onFold:function(e){var t;null==b||b.setGroupFolding(null==(t=i.get(0))?void 0:t.get("view_uuid"),n.groupItem.field.get("uuid"),n.groupItem.key,e)},isCompactMode:y})):n.isLoadMore?u.a.createElement(vkt,{style:{width:k},record:n,groupFolding:w}):u.a.createElement(pkt,{className:"lakex-table-grid-group-row-wrapper",style:{width:k,height:c},index:e.index-1,record:n,rowIndexWidth:x,recordIndexMap:O,isCompactMode:y}),u.a.createElement("tr",{style:e.style,className:"lakex-table-grid-group-tr"},u.a.createElement("td",null,t))})))},bkt=["style","context"],wkt=["style","context","item"];function _kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xkt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_kt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kkt=function(e){var t=e.index,n=e.viewRecord,r=e.keepSort,i=e.listeners,o=void 0===i?{}:i,a=e.isReadonly,l=e.count,c=void 0===l?0:l,s=e.rowIndexWidth,d=void 0===s?void 0:s,f=Gat(Qj.FIELD).canCreate,h=SWe(q_t);return u.a.createElement("div",{className:F()("lakex-viewer-grid-list-row",{count:c>0}),style:{"--count":"'".concat(c,"'")},onMouseOver:function(){null==h||h.mouseOver(t,n.get("uuid"))},onMouseLeave:function(){null==h||h.mouseLeave(t,n.get("uuid"))}},u.a.createElement(Bxt,{index:t,recordId:n.get("record_uuid"),sticky:!0,listeners:o,disableDrag:!!r,isReadonly:a,rowIndexWidth:d}),u.a.createElement(Bxt,{index:t,recordId:n.get("record_uuid"),sticky:!1,hasBlank:f(),disableDrag:!!r,isReadonly:a,rowIndexWidth:d}))},Ckt=function(e){var t=e.index,n=e.viewRecord,r=e.keepSort,i=e.isReadonly,o=e.rowIndexWidth,a=!Gat(Qj.VIEW).canUpdate()||!!r,l=vK({id:n.get("record_uuid"),disabled:a||i}),c=l.attributes,s=l.listeners,d=l.setNodeRef,f=l.transform,h=l.transition,p=l.isDragging,v={transform:M$e.Transform.toString(f),transition:h,zIndex:p?"100":"auto",opacity:p?0:1};return u.a.createElement("td",xkt({ref:a?void 0:d,style:v},c),u.a.createElement(kkt,{index:t,viewRecord:n,listeners:s,keepSort:r,isReadonly:i,rowIndexWidth:o}))},Skt=function(e,t){var n=SWe(pht),r=SWe(yot,{optional:!0}),i=jF(Object(l.useState)(null),2),o=i[0],a=i[1],u=jF(Object(l.useState)([]),2),c=u[0],s=u[1],d=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>=0&&o&&c.includes(o)&&i>0){var a=null==r?void 0:r.createGridSelectionByScope({row:n,column:0},{row:n+i-1,column:t.length-1},e.length,t.length);a&&(null==r||r.setSelection(a))}},f=function(){var e=aO(QC.mark((function e(t){var r,i,o,l,u,f;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.active,o=t.over,!(i.id!==o.id||c.length>1)){e.next=6;break}return l=i.id,u=o.id,e.next=6,n.updateRecordOrder(c.length>0?c:l,u);case 6:f=null==(r=i.data.current.sortable)?void 0:r.index,d(f,c.length),a(null),s([]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=qY($Y(G$,{activationConstraint:{distance:8}}));return{activeId:o,selectedIds:c,sensors:h,onDragStart:function(n){var i;a(n.active.id);var o,l,u=null==r?void 0:r.getSelection(),c=null==(i=n.active.data.current.sortable)?void 0:i.index;if(u&&(null==r?void 0:r.isRowSelection())&&(null==r?void 0:r.isInRowsSelect(c))){var d=(null==r?void 0:r.getRecordIds(u))||[];s(d),o=c,(l=null==r?void 0:r.createRowGridSelectionByIndex(o,e.length,t.length))&&(null==r||r.setSelection(l))}else s([])},onDragEnd:f}},Okt=function(e){var t=e.style,n=e.context,r=EWe(e,bkt),i=n.rootRect,o=n.useWindowScroll;return u.a.createElement("table",xkt(xkt({},r),{},{style:xkt(xkt({},t),{},{width:o?"auto":"100%",minWidth:o?"750px":"auto",minHeight:o?0:null==i?void 0:i.height})}))},Ekt=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,i=e.children,o=SWe(uHe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},i):u.a.createElement("thead",{ref:t,style:xkt(xkt({},n),{},{zIndex:null==o?void 0:o.zIndex.gridHeader})},i)})),Ikt=u.a.forwardRef((function(e,t){var n=e.style,r=e.context,i=e.children,o=SWe(uHe);return r.useWindowScroll?u.a.createElement("tbody",{ref:t,style:{height:"36px"}},i):u.a.createElement("tfoot",{ref:t,style:xkt(xkt({},n),{},{zIndex:null==o?void 0:o.zIndex.gridFooter})},i)})),Pkt=function(e){var t=e.style,n=e.context,r=e.item,i=EWe(e,wkt),o=jF(Object(l.useState)(0),2),a=o[0],c=o[1],s=i["data-known-size"],d={"--child-height":"".concat(a,"px")},f=n.recordIndexMap[r.id];return P$e((function(){c((function(e){return 0===s?e:s}))}),[s]),u.a.createElement("tr",xkt(xkt({className:"height-preserving-tr"},i),{},{"data-tr-row":f,style:xkt(xkt({},t),d)}))},Mkt=function(e){var t=e.rootRect,n=e.useWindowScroll,r=e.customScrollParent,i=e.customModalContainer,o=e.disableVirtualScroll,a=Object(l.useContext)(_it),s=a.viewRecords,d=a.viewFields,f=a.viewConfig,h=a.rowHeight,p=a.stickyPaneWidth,v=a.isReadonly,g=SWe(RC),m=Gat(Qj.RECORD).canCreate(),y=SWe(Hit),b=null==g?void 0:g.getValue("viewerGrid.footer.disable"),w=null==g?void 0:g.getValue("render.asyncRecord"),_=SWe(Oit),x=SWe(Ait),k=null==_?void 0:_.AddRecord,C=(null==_?void 0:_.Footer)||vxt,S=null==_?void 0:_.LoadingText,O=Object(l.useRef)(null),E=null==f?void 0:f.get("keep_sort"),I=null==x?void 0:x.getRowIndexWidth(),P=Skt(s,d),M=P.activeId,R=P.selectedIds,A=P.sensors,j=P.onDragStart,D=P.onDragEnd,T=Object(l.useMemo)((function(){var e={};return OC(s,(function(t,n){e[t.get("record_uuid")]=n})),e}),[s]),F=Object(l.useMemo)((function(){return CC(s,(function(e){return e.get("record_uuid")===M}))}),[s,M]),N=s.get(F),L=Object(l.useMemo)((function(){var e=OC(s,(function(e){return{id:e.get("record_uuid"),viewRecord:e}}));return S&&e.push({id:"LoadingText"}),M?e.filter((function(e){var t=e.id;return t===M||!R.includes(t)})):e}),[s,M,R,S]);if(P$e((function(){O.current&&(null==y||y.setVirtuosoRef(O.current))}),[y,O]),E$e((function(){null==y||y.destroy()})),!w&&0===s.length&&m)return k?u.a.createElement(k,{viewRecords:s,viewFields:d}):null;var B=u.a.createElement(xae,{ref:O,useWindowScroll:n,customScrollParent:r,context:{rootRect:t,useWindowScroll:n,recordIndexMap:T},components:{Table:Okt,TableHead:Ekt,TableFoot:Ikt,TableRow:Pkt},isScrolling:function(e){null==y||y.isScrolling(e)},onScroll:null==y?void 0:y.emitScrollEvent,data:L,defaultItemHeight:h,itemSize:function(e){if(void 0===e.dataset.index)return h;var t=parseInt(e.dataset.index);return t===L.length-1&&S?32:h+(t===L.length-1&&m?40:0)},increaseViewportBy:o?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==t?void 0:t.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(Fxt,{rowIndexWidth:I})))},fixedFooterContent:function(){return b?null:u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement(C,null)))},itemContent:function(e,t){var n=t.viewRecord,r=t.id;if("LoadingText"===r&&S)return u.a.createElement(S,{viewConfig:f});if(!n)return null;var i=e;return L.length!==s.length&&(i=T[r]>=0?T[r]:e),u.a.createElement(u.a.Fragment,null,u.a.createElement(Ckt,{key:n.get("record_uuid"),index:i,viewRecord:n,isReadonly:v,keepSort:E,rowIndexWidth:I}),e===L.length-1&&u.a.createElement("td",null,u.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:p}},m&&!v&&k?u.a.createElement(k,{viewRecords:s,viewFields:d}):null)))}});return v?B:u.a.createElement(Rq,{sensors:A,modifiers:[xK,_K],collisionDetection:n$,onDragStart:j,onDragEnd:D,autoScroll:{threshold:{x:0,y:.2}}},u.a.createElement(uK,{items:L,strategy:oK},u.a.createElement(u.a.Fragment,null,B,Object(c.createPortal)(u.a.createElement(Kq,{dropAnimation:null,style:{width:"".concat(t.width,"px"),left:"".concat(t.left,"px"),overflow:"hidden"}},M?u.a.createElement(kkt,{index:F,viewRecord:N,isReadonly:v,keepSort:E,count:R.length}):null),i))))},Rkt=["children"],Akt=["children","style","contentWidth"];function jkt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dkt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jkt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jkt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tkt=u.a.createContext({});Tkt.displayName="StickyListContext";var Fkt=function(e){var t=e.index,n=e.viewRecord,r=e.rowIndexWidth,i=SWe(q_t);return u.a.createElement("div",{className:F()("lakex-viewer-grid-list-row"),onMouseOver:function(){null==i||i.mouseOver(t,n.uuid)},onMouseLeave:function(){null==i||i.mouseLeave(t,n.uuid)}},u.a.createElement(Bxt,{index:t,recordId:n.record_uuid,sticky:!0,rowIndexWidth:r}),u.a.createElement(Bxt,{index:t,recordId:n.record_uuid,sticky:!1,rowIndexWidth:r}))},Nkt=u.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.children,r=EWe(e,Rkt);return u.a.createElement("tbody",Dkt(Dkt({},r),{},{className:"lakex-table-grid-new-tbody",ref:t}),u.a.createElement("tr",{className:"lakex-table-grid-list-new-head"},u.a.createElement(Tkt.Consumer,null,(function(e){var t=e.rowIndexWidth;return u.a.createElement(Fxt,{rowIndexWidth:t})}))),n)})),Lkt=u.a.forwardRef((function(e,t){var n=e.children,r=e.style,i=e.contentWidth,o=EWe(e,Akt);return u.a.createElement("div",{ref:t,"data-virtuoso-scroller":"true",style:r,onScroll:function(){try{o.onScroll&&o.onScroll.apply(o,arguments)}catch(e){console.error(e)}}},u.a.createElement("table",Dkt(Dkt({},o),{},{style:{width:i},className:"lakex-table-grid-new-list"}),n))})),Bkt=function(e){var t=e.rootRect,n=Object(l.useContext)(_it),r=n.viewRecords,i=n.viewFields,o=n.viewConfig,a=n.rowHeight,c=n.enablePagination,s=jF(Object(l.useState)(a),2),d=s[0],f=s[1],h=Object(l.useRef)(null),p=Object(l.useRef)(null),v=Object(l.useRef)(null),g=SWe(Hit),m=SWe(Oit),y=SWe(Ait),b=c?null==m?void 0:m.LoadingText:null,w=null==y?void 0:y.getRowIndexWidth(),_=Math.max((null==y?void 0:y.getInnerColTotalWidth(i))+180,t.width),x=Object(l.useMemo)((function(){var e={},t={};return OC(r,(function(n,r){var i=n.toJSON();e[r]=i,t[r]=i.record_uuid})),{viewRecordMap:e,keyMap:t}}),[r]);Object(l.useEffect)((function(){h.current&&(null==g||g.setVariableRef(h.current))}),[g,h]),E$e((function(){null==g||g.destroy()}));var k=r.length+1;b&&(k+=1);var C=t.height,S=t.width,O=C$e((function(e){p.current=e.scrollTop,v.current=e.scrollLeft}),100);Object(l.useEffect)((function(){h.current.clearCache(),f(a)}),[a]);var E=Object(l.useCallback)((function(e){return 0===e?36:d}),[d]),I={width:S,height:(null==r?void 0:r.length)?C:null,overflowX:"auto",overflowY:"auto"};return u.a.createElement(Tkt.Provider,{value:{rowIndexWidth:w}},u.a.createElement(_2e,{ref:h,width:S,contentWidth:_,height:C,overscanCount:200,disableVirtual:!0,initialScrollOffset:p.current,itemCount:k,itemSize:E,itemData:r,itemKey:function(e){return 0===e?e:e===k-1&&b?Cx(6):x.keyMap[e-1]},innerElementType:Nkt,outerElementType:Lkt,style:Dkt({},I),onScroll:function(e){!function(e){if(!e.scrollDirection){var t=Do(e,"nativeEvent.target.scrollLeft"),n=Do(e,"nativeEvent.target.scrollTop");O({scrollLeft:t,scrollTop:n}),null==g||g.emitScrollEvent(e)}}(e)}},(function(e){var t;if(0===e.index)return null;if(e.index===k-1&&b)t=u.a.createElement(b,{style:{height:a},viewConfig:o});else{var n=x.viewRecordMap[e.index-1];t=u.a.createElement(Fkt,{index:e.index-1,viewRecord:n,rowIndexWidth:w})}return u.a.createElement("tr",{style:e.style,className:"lakex-table-grid-tr"},u.a.createElement("td",null,t))})))},Vkt=function(e){var t=e.rootRect,n=Object(l.useContext)(_it).viewFields,r=SWe(Oit),i=(null==r?void 0:r.EmptyText)||wx("没有数据"),o=SWe(Ait),a=null==o?void 0:o.getRowIndexWidth(),c=Math.max((null==o?void 0:o.getInnerColTotalWidth(n))+180,t.width);return u.a.createElement("div",{style:{width:t.width,overflowX:"auto"}},u.a.createElement("div",{style:{width:c}},u.a.createElement(Fxt,{rowIndexWidth:a}),i))},zkt=function(){var e,t=function(){var e=SWe(Vze),t=SWe(Hit),n=SWe(RC),r=jF(Object(l.useState)(e.getRenderBoundingClientRect()),2),i=r[0],o=r[1],a=SWe(RC),u=jF(Object(l.useState)((null==a?void 0:a.getValue("view.useWindowScroll"))||!1),2),c=u[0],s=u[1],d=null==a?void 0:a.getValue("view.customScrollParent"),f=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body,h=jF(Object(l.useState)((null==a?void 0:a.getValue("view.disableVirtualScroll"))||!1),2),p=h[0],v=h[1];return P$e((function(){var r=rc((function(){if(!(null==n?void 0:n.getValue("view.useWindowScroll"))){var r=e.getRenderBoundingClientRect();if(o(r),t.scroller){t.scroller.style.height=r.height+"px";var i=t.scroller.querySelector("table"),a=t.scroller.querySelector("div[data-viewport-type]"),l=a?a.getBoundingClientRect().height:r.height;i&&(i.style.width="100%",i.style.minWidth="auto",i.style.minHeight=l+"px")}}}),300);return window.addEventListener("resize",r),window.addEventListener("lakex_table_view_resize",r),function(){window.removeEventListener("resize",r),window.removeEventListener("lakex_table_view_resize",r)}}),[e]),P$e((function(){var t=null==a?void 0:a.onConfigurationChange((function(t){var n=t.key,r=t.value;if("view.useWindowScroll"===n){var i=e.getRenderBoundingClientRect();o(i),s(r)}else"view.disableVirtualScroll"===n&&v(r)}));return function(){null==t||t.destroy()}}),[]),{rootRect:i,useWindowScroll:c,customScrollParent:d,customModalContainer:f,disableVirtualScroll:p}}(),n=t.rootRect,r=t.useWindowScroll,i=t.customScrollParent,o=t.customModalContainer,a=t.disableVirtualScroll,c=Object(l.useContext)(_it),s=c.group,d=c.viewRecords,f=SWe(RC),h=null==f?void 0:f.getValue("viewerGrid.group.simple"),p=null==f?void 0:f.getValue("viewerGrid.useReactWindow"),v=null==f?void 0:f.getValue("viewerGrid.showEmptyText");return P$e((function(){var e=function(e){"ResizeObserver loop done with undelivered notifications."!==e.message&&"ResizeObserver loop limit exceeded"!==e.message||e.stopImmediatePropagation()};return window.addEventListener("error",e),function(){window.removeEventListener("error",e)}}),[]),e=s?h?u.a.createElement(ykt,{rootRect:n}):u.a.createElement($xt,{rootRect:n,useWindowScroll:r,customScrollParent:i,customModalContainer:o,disableVirtualScroll:a}):v&&0===(null==d?void 0:d.length)?u.a.createElement(Vkt,{rootRect:n}):p?u.a.createElement(Bkt,{rootRect:n,useWindowScroll:r,customScrollParent:i,customModalContainer:o,disableVirtualScroll:a}):u.a.createElement(Mkt,{rootRect:n,useWindowScroll:r,customScrollParent:i,customModalContainer:o,disableVirtualScroll:a}),u.a.createElement("div",{className:F()("lakex-viewer-grid-content",{"in-group":!!s})},e)};function Hkt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wkt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wkt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Wkt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ukt=u.a.forwardRef((function(e,t){var n,r=qat({viewId:e.viewId}),i=SWe(Oit),o=i.CellContextProvider,a=i.RowContextProvider,c=SWe(Eat,{optional:!0}),s=!Gat(Qj.RECORD).canCreate(),d=SWe(Fit),f=SWe(Xze),h=SWe(iHe),p=SWe(uHe),v=SWe(yot,{optional:!0}),g=SWe(XA),m=SWe(RC),y=SWe(Ait),b=SWe(Tat),w=SWe(Bat),_=SWe(F_t),x=SWe(pht),k=r.view,C=r.group,S=r.viewRecords;C&&(S=null==g?void 0:g.getFlatViewRecords());var O=r.groupViewRecords,E=r.viewFields,I=r.viewConfig,P=Object(l.useMemo)((function(){return SC(E,(function(e,t){return e[t.get("field_uuid")]=t,e}),{})}),[E]),M=Object(l.useMemo)((function(){return SC(E,(function(e,t){return e[t.get("field_uuid")]=t.get("field").get("type"),e}),{})}),[E]),R=d.getRowHeight(null==I?void 0:I.get("record_height")),A=Object(l.useMemo)((function(){var e=C?null==y?void 0:y.groupRowGap:0;return((null==y?void 0:y.getStickyPaneWidth(E||[]))||0)+e}),[y,E]),j=y.stickyColNum,D=Object(l.useMemo)((function(){var e={},t=k.get("uuid");if(S){var n,r=Hkt(S);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.get("record_uuid"),a=g.getViewRecordCells(t,i.get("record_uuid"));e[o]={};var l,u=Hkt(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;e[o][c.fieldId]=c}}catch(e){u.e(e)}finally{u.f()}}}catch(e){r.e(e)}finally{r.f()}}return e}),[k,S,E]),T=Object(l.useMemo)((function(){var e,t="",n=Hkt(E);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+=String(new Date(r.get("updated_at")).getTime()).substring(0,3)}}catch(e){n.e(e)}finally{n.f()}return t}),[E]);return u.a.createElement("div",{ref:t,className:"lakex-viewer-grid"},u.a.createElement("div",{className:"lakex-viewer-grid-inner"},u.a.createElement(o,{value:{contextMenuService:c,renderService:f,renderFieldService:h,renderZIndexService:p,selectionService:v,textColorMap:JSON.parse((null==(n=r.viewConfig)?void 0:n.get("text_colors"))||"{}")}},u.a.createElement(a,{value:{renderService:f,readService:g,configuration:m,columnControllerService:y,viewerGridRecordService:b,gridRecordRenderService:w,orderService:x,contextMenuService:c,selectionService:v,keepCheckbox:m.getValue("viewerGrid.row.keepCheckbox")}},u.a.createElement(xit,{value:{readService:g,viewerGridService:i,columnControllerService:y,isReadonly:s,Record:i.Record,viewRecords:S,groupViewRecords:O,view:k,viewFields:E,viewConfig:r.viewConfig,group:C,filter:r.filter,colCount:E.length,rowCount:S?S.length:0,fieldMap:P,rowHeight:R,stickyPaneWidth:A,stickyColNum:j,defaultColWidth:y.defaultColWidth,stickyLeftViewFields:IC(E,0,j),stickyRightViewFields:IC(E,j,E.length),getFieldTypeById:function(e){return M[e]},getCell:function(e,t){var n;return null==(n=D[e])?void 0:n[t]},getField:function(e){return P[e].get("field")},disableCellTip:m.getValue("viewerGrid.cellTip.disable"),disableRefresh:m.getValue("viewerGrid.refresh.disable"),disableAutofill:m.getValue("viewerGrid.autofill.disable"),disableSelected:m.getValue("viewerGrid.selected.disable"),enablePagination:m.getValue("viewerGrid.pagination.enable"),headerKey:T,gridCellEditService:_,selectionService:v}},u.a.createElement(zkt,null))))))}));function Gkt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ykt(e,t,n){return t=DC(t),jC(e,$kt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function $kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($kt=function(){return!!e})()}var qkt=function(e){function t(){var e;return rx(this,t),(e=Ykt(this,t,arguments)).viewType=WO.GRID,e.title=wx("表格视图"),e.desc=wx("规范化存储和展示数据"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gkt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gkt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"GridView",size:e.size||16},e))},e.color="green-6",e.Component=Ukt,e}return NC(t,e),ox(t)}(z8e),Kkt=Object.defineProperty,Xkt=Object.getOwnPropertyDescriptor,Jkt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Xkt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Kkt(t,n,o),o},Zkt=function(){return ox((function e(){rx(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"_currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){this._viewerGridService.init()}},{key:"registerViewer",value:function(e){e.registerItem(new qkt({onError:e.onError}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"grid-field-move-up",hotkey:"up",name:"up 向上移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveUp()}}),e.registerItem({id:"grid-field-move-down",hotkey:"down",name:"down 向下移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveDown()}}),e.registerItem({id:"grid-field-move-left",hotkey:"left",name:"left 向左移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLeft()}}),e.registerItem({id:"grid-field-move-right",hotkey:"right, tab",name:"right 向右移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveRight()}}),e.registerItem({id:"grid-field-move-top",hotkey:"⌘+up",name:"移动到第一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveTop()}}),e.registerItem({id:"grid-field-move-bottom",hotkey:"⌘+down",name:"移动到最后一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveBottom()}}),e.registerItem({id:"grid-field-move-first-left",hotkey:"⌘+left",name:"移动到第一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFirstLeft()}}),e.registerItem({id:"grid-field-move-last-right",hotkey:"⌘+right",name:"移动到最后一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLastRight()}}),e.registerItem({id:"grid-field-focus-move-up",hotkey:"shift+up",name:"选区终点上移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusUp()}}),e.registerItem({id:"grid-field-focus-move-down",hotkey:"shift+down",name:"选区终点下移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusDown()}}),e.registerItem({id:"grid-field-focus-move-left",hotkey:"shift+left",name:"选区终点左移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusLeft()}}),e.registerItem({id:"grid-field-focus-move-right",hotkey:"shift+right",name:"选区终点右移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusRight()}}),e.registerItem({id:"grid-field-select-all",hotkey:"⌘+A",name:"全选",enableOnInput:!1,isEnable:function(){return t._currentViewType===WO.GRID},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.selectAll()}}),e.registerItem({id:"grid-add-record-before",hotkey:"⌘+shift+enter",name:"向上插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,i,o;e.preventDefault();var a=t._readService.getFlatViewRecords(),l=null==(n=t._selectionService)?void 0:n.getFieldValue(),u=CC(a,(function(e){return e.get("record_uuid")===(null==l?void 0:l.recordId)}));if(!(u<0)){var c=t._readService.getViewFields(),s=a.get(u),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"before",groupItemKey:s.get("group_item_key")});var f=null==(i=t._selectionService)?void 0:i.createGridSelectionByIndex(u,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(o=t._selectionService)||o.scrollToSelection(f,"start")}}}),e.registerItem({id:"grid-add-record-after",hotkey:"shift+enter",name:"向下插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===WO.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,i,o;e.preventDefault();var a=t._readService.getFlatViewRecords(),l=null==(n=t._selectionService)?void 0:n.getFieldValue(),u=CC(a,(function(e){return e.get("record_uuid")===(null==l?void 0:l.recordId)}));if(!(u<0)){var c=t._readService.getViewFields(),s=a.get(u),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"after",groupItemKey:s.get("group_item_key")});var f=null==(i=t._selectionService)?void 0:i.createGridSelectionByIndex(u+1,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(o=t._selectionService)||o.scrollToSelection(f,"end")}}})}},{key:"registerScrollService",value:function(e){e.setGridScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return ch().contribution(fit).contribution(hit).contribution(pit).contribution(vit).contribution(git).contribution(yit).contribution(bit).contribution(wit).register(this).register(Oit).register(qit).register(Ait).register(Fit).register(Hit).register(eot).register(q_t)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerGrid",type:"object",title:"表格视图",properties:{stickyColNum:{type:"number",description:"冻结列个数"},defaultColWidth:{type:"number",description:"默认列宽度"},row:{type:"object",properties:{height:{type:"object",description:"行高度",properties:{low:{type:"number",description:"低-行高渲染高度"},middle:{type:"number",description:"中-行高渲染高度"},high:{type:"number",description:"高-行高渲染高度"}}},dnd:{type:"object",properties:{disable:{type:"boolean",description:"不进行dnd拖拽"}}},expand:{type:"object",properties:{disable:{type:"boolean",description:"不开启行展开"}}},indexWidth:{type:"number",description:"行数字的宽度"},keepCheckbox:{type:"boolean",description:"保持checkbox显示"}}},col:{type:"object",properties:{dnd:{type:"object",properties:{disable:{type:"boolean",description:"不进行dnd拖拽"}}}}},footer:{type:"object",properties:{disable:{type:"boolean",description:"是否隐藏底部栏"}}},group:{type:"object",properties:{compact:{type:"boolean",description:"分组是否使用紧凑样式"},simple:{type:"boolean",description:"使用简单模式，没有拖拽等"},showTotal:{type:"boolean",description:"是否显示总数"}}},showEmptyText:{type:"boolean",description:"是否显示空文本"},useReactWindow:{type:"boolean",description:"使用 react window 组件"},refresh:{type:"object",properties:{disable:{type:"boolean",description:"是否禁用refresh"}}},cellTip:{type:"object",properties:{disable:{type:"boolean",description:"是否禁用cellTip"}}},autofill:{type:"object",properties:{disable:{type:"boolean",description:"是否禁用autofill"}}},selected:{type:"object",properties:{disable:{type:"boolean",description:"是否禁用selected"}}}}}),e.registerDefaultValue({"viewerGrid.stickyColNum":1,"viewerGrid.defaultColWidth":180,"viewerGrid.row.height.low":36,"viewerGrid.row.height.middle":64,"viewerGrid.row.height.high":148})}}])}();Zkt.pluginName="render-viewer-grid",Jkt([Yf(XA)],Zkt.prototype,"_readService",2),Jkt([Yf(hD)],Zkt.prototype,"_abilityService",2),Jkt([Yf(yot),If()],Zkt.prototype,"_selectionService",2),Jkt([Yf(Lj)],Zkt.prototype,"_commandService",2),Jkt([Yf(Hit)],Zkt.prototype,"_scrollService",2),Jkt([Yf(Oit)],Zkt.prototype,"_viewerGridService",2),Zkt=Jkt([Gf({contrib:[Sze,oot,XYe,Mze]})],Zkt);var Qkt=Rf.defineToken("ViewerKanbanPluginGroupContribution"),eCt=Rf.defineToken("ViewerKanbanGroupActionContribution"),tCt=Object.defineProperty,nCt=Object.getOwnPropertyDescriptor,rCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?nCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tCt(t,n,o),o},iCt=function(){return ox((function e(){var t=this;rx(this,e),this.getKanbanGroupActionComponents=function(){var e=t._viewerKanbanGroupActionProvider.getContributions({cache:!1});if(e.length>0){var n=[];return e.forEach((function(e){var t,r=null==(t=e.getKanbanGroupActionComponent)?void 0:t.call(e);r&&(Array.isArray(r)?n=n.concat(r):n.push(r))})),n}return null}}),[{key:"getGroup",value:function(){var e=this._readService.getActiveView();return e?this._readService.getViewGroup(null==e?void 0:e.get("uuid")):null}},{key:"getGroupField",value:function(){var e=this.getGroup();return null==e?void 0:e.field}},{key:"getSupportGroupFields",value:function(){return kC(this._readService.getAllFields(),(function(e){return[xO.SELECT,xO.MENTION].includes(e.get("type"))}))}},{key:"getGroupFieldOption",value:function(e,t){return e.get("type")===xO.SELECT?xC(this._readService.getFieldOptions(e.get("uuid")),(function(e){return e.get("uuid")===t.value})):e.get("type")===xO.MENTION?t:null}},{key:"createGroup",value:function(){var e,t=this._readService.getAllFields(),n={field:{uuid:Cx(32),name:EO(xO.SELECT,t.toJSON()),type:xO.SELECT,color:!0,options:[]}};null==(e=this._commandService)||e.execCommand("addField",n)}}])}();function oCt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}rCt([gh(eCt)],iCt.prototype,"_viewerKanbanGroupActionProvider",2),rCt([Yf(XA)],iCt.prototype,"_readService",2),rCt([Yf(Lj)],iCt.prototype,"_commandService",2),iCt=rCt([Gf()],iCt);var aCt=Object.defineProperty,lCt=Object.getOwnPropertyDescriptor,uCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?lCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&aCt(t,n,o),o},cCt=function(){return ox((function e(){rx(this,e),this.UNGROUP_KEY="ungroup"}),[{key:"toKanbanData",value:function(e){var t=this;return(null==e?void 0:e.map((function(e){var n;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oCt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oCt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==(n=e.option)?void 0:n.uuid)||t.UNGROUP_KEY},e)})))||[]}},{key:"addRecord",value:(e=aO(QC.mark((function e(t,n){var r,i,o,a,l,u,c;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this._readService.getGroupViewRecords(),a=n?o.find((function(e){var t;return(null==(t=e.option)?void 0:t.uuid)===n.uuid})):o[0]){e.next=4;break}return e.abrupt("return");case 4:return l=a.viewRecords.length>0?a.viewRecords[0].get("record_uuid"):"",e.next=7,this._commandService.execCommand("addEmptyRecord",{sourceRecordId:l,groupItemKey:n?null==(r=this._readService)?void 0:r.groupValue(n):"",position:"after"});case 7:u=e.sent,(c=null==u?void 0:u.result)&&c[0]&&(null==(i=this._renderService)||i.emitClickRecord({recordId:c[0].uuid,isNewRecord:!0}));case 10:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e}();uCt([Yf(Lj)],cCt.prototype,"_commandService",2),uCt([Yf(XA)],cCt.prototype,"_readService",2),uCt([Yf(Xze)],cCt.prototype,"_renderService",2),cCt=uCt([Gf()],cCt);var sCt=Object.defineProperty,dCt=Object.getOwnPropertyDescriptor,fCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?dCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&sCt(t,n,o),o},hCt=function(){return ox((function e(){rx(this,e)}),[{key:"Group",get:function(){return this._getGroupComponent()}},{key:"_getGroupComponent",value:function(){var e,t,n=this.viewerKanbanPluginGroupProvider.getContributions({cache:!1});return n[0]?null==(t=(e=n[0]).getGroupComponent)?void 0:t.call(e):null}}])}();function pCt(e,t,n){return t=DC(t),jC(e,vCt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function vCt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vCt=function(){return!!e})()}fCt([gh(Qkt)],hCt.prototype,"viewerKanbanPluginGroupProvider",2),hCt=fCt([Gf()],hCt);var gCt=Object.defineProperty,mCt=Object.getOwnPropertyDescriptor,yCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?mCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gCt(t,n,o),o},bCt=function(e){function t(){var e;return rx(this,t),(e=pCt(this,t,arguments))._virtuosoRefs={},e._scrollers={},e._onScroll=e._register(new dS),e.onScroll=e._onScroll.event,e}return NC(t,e),ox(t,[{key:"virtuosoRefs",get:function(){return this._virtuosoRefs}},{key:"scrollers",get:function(){return this._scrollers}},{key:"scrollHeight",get:function(){var e=Object.values(this._scrollers).map((function(e){return e.scrollHeight}));return Math.max.apply(Math,Q_(e))}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-viewer-kanban-group-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0;return this.scrollHeight+t}},{key:"destroy",value:function(){this._virtuosoRefs={},this._scrollers={}}},{key:"setVirtuosoRefs",value:function(e){this._virtuosoRefs=e}},{key:"setScrollers",value:function(e){this._scrollers=e}},{key:"scrollIntoView",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollIntoView(t)}},{key:"emitScrollEvent",value:function(e){this._onScroll.emit(e)}},{key:"scrollTo",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollTo(t)}},{key:"getKanbanGroupPositionByRecordId",value:function(e,t){for(var n,r="",i=-1,o=0;o<t.length;o++)for(var a=t[o].viewRecords||[],l=0;l<a.length;l++)if(a[l].get("record_uuid")===e){r=(null==(n=t[o].option)?void 0:n.uuid)||this._dataServce.UNGROUP_KEY,i=l;break}return{index:i,groupId:r}}}])}(HC);yCt([Yf(cCt)],bCt.prototype,"_dataServce",2),yCt([Yf(Vze)],bCt.prototype,"renderContext",2),bCt=yCt([Gf()],bCt);var wCt=function(e){var t,n=e.count,r=void 0===n?0:n,i=e.groupField,o=e.groupOption,a=e.isReadonly,c=function(e){var t=e.groupField,n=e.groupOption,r=e.isReadonly,i=SWe(iHe),o=SWe(iCt),a=SWe(Mft),u=Object(l.useCallback)((function(e){if(!r){var i=e.target.closest(".lakex-viewer-kanban-group-header");null==a||a.showEditGroup(i,t,n)}}),[t,n]);return{onOpenSetting:u,getFieldComponent:function(e){return i.getFieldComponent(e)},getKanbanGroupActions:function(){return null==o?void 0:o.getKanbanGroupActionComponents()}}}(e),s=c.getFieldComponent,d=c.getKanbanGroupActions,f=c.onOpenSetting,h=s(i.get("type"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-table-kanban-group-title-content",onClick:f},h&&u.a.createElement(h,{readonly:!0,field:i,cell:o,checkCell:!1,writeable:!1,disableOpen:!0})),u.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},r)),i&&o&&!a&&u.a.createElement("div",{className:"lakex-table-kanban-group-actions"},null==(t=d())?void 0:t.map((function(e,t){return e?u.a.createElement(e,{key:t,groupField:i,groupOption:o}):null}))))},_Ct=function(e){var t=e.count,n=void 0===t?0:t,r=e.groupField,i=e.groupOption,o=e.isReadonly,a=SWe(cCt);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-table-kanban-group-title-content"},wx("未分组")),u.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},n)),u.a.createElement("div",{className:"lakex-table-kanban-group-actions"},!o&&u.a.createElement(j4e,{title:wx("添加记录"),placement:"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},u.a.createElement(V4e,{onClick:function(){return null==a?void 0:a.addRecord(r,i)}},u.a.createElement(X$e,{type:"Add"})))))},xCt=function(e){var t=e.count,n=e.groupField,r=e.groupOption,i=SWe(Lj),o=SWe(XA);return u.a.createElement("div",{className:"lakex-table-kanban-collpse"},u.a.createElement("div",{className:"lakex-table-kanban-collpse-expander",onClick:function(e){e.stopPropagation(),null==i||i.execCommand("updateKanbanGroupCollapse",{fieldId:n.get("uuid"),groupId:null==o?void 0:o.groupValue(r),value:!1})}},u.a.createElement(X$e,{type:"RowExpand"})),u.a.createElement(wCt,{count:t,groupField:n,groupOption:r,isReadonly:!0}))};function kCt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CCt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kCt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kCt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var SCt=function(e){var t,n=e.isReadonly,r=e.groupId,i=e.items,o=e.disableDrag,a=e.groupField,l=e.groupOption,c=e.children,s=e.collapse,d=l&&a,f=i.length,h=vK({id:r,data:{type:"container",children:i},disabled:n||o}),p=h.attributes,v=h.listeners,g=h.setNodeRef,m=h.transform,y=h.transition,b=h.isDragging,w={transform:o?"":M$e.Transform.toString(m),transition:b?y:"",zIndex:b?"100":"auto"};return t=s?u.a.createElement(xCt,{count:f,groupField:a,groupOption:l}):d?u.a.createElement(wCt,{isReadonly:n,count:f,groupField:a,groupOption:l}):u.a.createElement(_Ct,{isReadonly:n,count:f,groupField:a,groupOption:l}),u.a.createElement("div",CCt({ref:g,className:F()("lakex-viewer-kanban-group",{"lakex-viewer-kanban-group-collapse":s}),style:w},p),u.a.createElement("div",CCt({className:F()("lakex-viewer-kanban-group-header",{"disable-drag":o})},v),t),!s&&u.a.createElement("div",{className:"lakex-table-kanban-group-records"},c))},OCt=function(e){var t=e.groupField,n=e.groupOption,r=e.name,i=SWe(cCt);return t&&n?u.a.createElement(j4e,{title:wx("添加记录"),placement:"card"===r?"bottomRight":"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},u.a.createElement(V4e,{onClick:function(){return null==i?void 0:i.addRecord(t,n)}},u.a.createElement(X$e,{type:"Add"}))):null};function ECt(e,t,n){return t=DC(t),jC(e,ICt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function ICt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ICt=function(){return!!e})()}var PCt=Object.defineProperty,MCt=Object.getOwnPropertyDescriptor,RCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?MCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&PCt(t,n,o),o},ACt=function(e){function t(){var e;return rx(this,t),(e=ECt(this,t,arguments))._onAddGroupRecordClick=e._register(new dS),e.onAddGroupRecordClick=e._onAddGroupRecordClick.event,e._onGroupSettingClick=e._register(new dS),e.onGroupSettingClick=e._onGroupSettingClick.event,e}return NC(t,e),ox(t,[{key:"openSettingModal",value:function(e,t,n,r){this._onGroupSettingClick.emit({target:e.target,groupField:t,groupOption:n,$title:r})}},{key:"destroy",value:function(){!function(e,t,n,r){var i=TC(DC(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}(t,"destroy",this)([])}}])}(HC);RCt([Df()],ACt.prototype,"destroy",1),ACt=RCt([Gf()],ACt);var jCt=function(e){var t=e.groupField,n=e.groupOption,r=function(e){var t=e.groupField,n=e.groupOption,r=SWe(ACt),i=Object(l.useCallback)((function(e){var i=e.target.closest(".lakex-viewer-kanban-group-header");null==r||r.openSettingModal(e,t,n,i)}),[t,n]);return{onOpenSetting:i}}({groupField:t,groupOption:n}),i=r.onOpenSetting;return t&&n?u.a.createElement(V4e,{onClick:function(e){return i(e)}},u.a.createElement(X$e,{type:"MoreHorizontal"})):null},DCt=Object.defineProperty,TCt=Object.getOwnPropertyDescriptor,FCt=function(){return ox((function e(){rx(this,e)}),[{key:"getKanbanGroupActionComponent",value:function(){return[OCt,jCt]}},{key:"getGroupComponent",value:function(){return SCt}}],[{key:"pluginModule",value:function(){return ch().register(this).register(ACt)}}])}();FCt.pluginName="render-viewer-kanban-group",FCt=function(e,t,n,r){for(var i,o=r>1?void 0:r?TCt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DCt(t,n,o),o}([Gf({contrib:[Qkt,eCt]})],FCt);var NCt=["children"];function LCt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BCt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LCt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LCt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var VCt=function(e){var t=e.children,n=EWe(e,NCt),r=jF(Object(l.useState)(0),2),i=r[0],o=r[1],a=n["data-known-size"],c={"--child-height":"".concat(i,"px")};return P$e((function(){o((function(e){return 0===a?e:a}))}),[a]),u.a.createElement("div",BCt(BCt({},n),{},{className:"height-preserving-kanban-record",style:c}),t)},zCt=function(e){var t=!Gat(Qj.RECORD).canUpdate();return u.a.createElement("div",{className:"lakex-table-kanban-empty"},u.a.createElement("div",{className:"lakex-table-kanban-empty-body"},u.a.createElement("h1",null,wx("看板暂无分组")),u.a.createElement("p",null,wx("可以快速新建一个单选列进行分组")),u.a.createElement(aXe,{type:"primary",onClick:e.onCreate,disabled:t},wx("新建分组"))))},HCt=function(e){var t=e.groupField,n=function(e){var t=e.groupField,n=SWe(Mft);return{onAddGroup:function(e){null==n||n.showNewGroup(e.target.parentNode,t)}}}({groupField:t}),r=n.onAddGroup;return t?u.a.createElement("div",{className:"lakex-viewer-kanban-group"},u.a.createElement("div",{className:"lakex-table-kanban-group-title"},u.a.createElement("div",{className:"lakex-viewer-kanban-new-group"},u.a.createElement(V4e,{className:"lakex-viewer-kanban-new-group-button",onClick:r},u.a.createElement(X$e,{type:"Add"}),wx("新建分组"))))):null};var WCt=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,i=SWe(Eat,{optional:!0}),o=SWe(yot,{optional:!0}),a=SWe(iHe),c=SWe(Xze),s=SWe(XA),d=t.get("record_uuid"),f=(null==r?void 0:r.get("show_field_name"))||!1,h=function(){var e,t,n;return!((null==(n=null==(t=null==(e=null==o?void 0:o.getSelection())?void 0:e.getRangeAt)?void 0:t.call(e,0))?void 0:n.recordId)!==d)},p=jF(Object(l.useState)(h()),2),v=p[0],g=p[1];P$e((function(){var e=null==o?void 0:o.onChange((function(e){e.selection;g(h())}));return function(){null==e||e.destroy()}}),[]);var m=zft({recordId:d}),y=Object(l.useCallback)((function(e){e.preventDefault(),null==i||i.showContextMenu({from:Oat.KANBAN_RECORD,e:e,recordId:d})}),[d,i]),b=Object(l.useCallback)((function(){null==c||c.emitClickRecord({recordId:d})}),[d,c]),w=null==s?void 0:s.getViewRecordCells(t.get("view_uuid"),t.get("record_uuid"));return u.a.createElement("div",{key:d+t.get("updated_at"),className:F()("lakex-viewer-kanban-record",{selected:v,"show-field-name":f,"in-highlight":m}),"data-record-uuid":d,onClick:b,onContextMenu:y},u.a.createElement("div",{className:"lakex-viewer-kanban-field-list"},null==w?void 0:w.map((function(e,t){var r=xC(n,(function(t){return t.get("uuid")===(null==e?void 0:e.fieldId)}));if(!r)return null;var i=a.getFieldComponent(r.get("type")),o=null==a?void 0:a.getFieldIcon(r.get("type"));if(null==(null==e?void 0:e.value)||""==(null==e?void 0:e.value))return 0===t?u.a.createElement("div",{key:e.fieldType+e.cellId,className:"lakex-viewer-kanban-field empty first","data-field-uuid":null==e?void 0:e.fieldId},f&&u.a.createElement("div",{className:F()("lakex-viewer-kanban-field-name",e.fieldType)},o&&u.a.createElement(o,{size:14}),r.get("name")),u.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},u.a.createElement("span",{className:"empty-title"},wx("未命名记录")))):" ";var l=function(e,t){var n={defaultValue:t.value,readonly:!0},r=e.get("type");return YO.isSelectLike(r)?n.field=e:YO.isImage(r)?n.size="small":YO.isSystemDate(r)&&(n.format="YYYY-MM-DD HH:mm:ss"),n}(r,e);return u.a.createElement("div",{key:r.get("updated_at")+e.fieldType+e.uuid+e.updated_at,className:F()("lakex-viewer-kanban-field",{first:0===t}),"data-field-uuid":null==e?void 0:e.fieldId},f&&u.a.createElement("div",{className:F()("lakex-viewer-kanban-field-name",e.fieldType)},o&&u.a.createElement(o,{size:14}),u.a.createElement("span",{className:"lakex-viewer-kanban-field-name-content"},r.get("name"))),u.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},i?u.a.createElement(i,{readonly:!0,key:t,cell:e,field:r,fieldProps:l}):null))}))))};function UCt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GCt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UCt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UCt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YCt=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,i=!Gat(Qj.RECORD).canUpdate(),o=vK({id:t.get("record_uuid"),disabled:i}),a=o.attributes,l=o.listeners,c=o.setNodeRef,s=o.transform,d=o.transition,f=o.isDragging,h={transform:M$e.Transform.toString(s),transition:d,zIndex:f?"100":"auto",opacity:f?0:1};return u.a.createElement("div",GCt(GCt({ref:i?void 0:c,className:"lakex-viewer-kanban-record-container",style:h},a),l),u.a.createElement(WCt,{key:t.get("uuid")+t.get("updated_at"),viewRecord:t,fields:n,viewConfig:r}))};function $Ct(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qCt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qCt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function qCt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function KCt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XCt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KCt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KCt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JCt=function(e,t,n,r,i){var o=SWe(XA),a=SWe(pht),u=SWe(bCt),c=Object(l.useMemo)((function(){var e=Object.keys(t),n=e.findIndex((function(e){return e===r}));return n>-1&&(e.splice(n,1),e.unshift(r)),e}),[t]),s=jF(Object(l.useState)(null),2),d=s[0],f=s[1],h=Object(l.useRef)(null),v=Object(l.useRef)(!1),g=function(e){return e in t?e:Object.keys(t).find((function(n){return t[n].map((function(e){return e.get("record_uuid")})).includes(e)}))},m=Object(l.useCallback)((function(e){var n;if(d&&d in t)return n$(XCt(XCt({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id in t}))}));var r=function(e){var t=e.droppableContainers,n=e.droppableRects,r=e.pointerCoordinates;if(!r)return[];var i,o,a,l,u,c,s=[],d=LY(t);try{for(d.s();!(i=d.n()).done;){var f=i.value,h=f.id,p=n.get(h);if(p&&o$(r,p)){var v=(a=void 0,l=void 0,u=void 0,c=void 0,a=(o=p).left,l=o.top,u=o.height,c=o.width,[{x:a,y:l},{x:a+c,y:l},{x:a,y:l+u},{x:a+c,y:l+u}]).reduce((function(e,t){return e+XY(r,t)}),0),g=Number((v/4).toFixed(4));s.push({id:h,data:{droppableContainer:f,value:g}})}}}catch(e){d.e(e)}finally{d.f()}return s.sort(ZY)}(e),i=e$(r.length>0?r:i$(e),"id");if(null!=i){if(i in t){var o=t[i];o.length>0&&(i=null==(n=n$(XCt(XCt({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id!==i&&o.map((function(e){return e.get("record_uuid")})).includes(e.id)}))}))[0])?void 0:n.id)}return h.current=i,[{id:i}]}return v.current&&(h.current=d),h.current?[{id:h.current}]:[]}),[d,t]);P$e((function(){requestAnimationFrame((function(){v.current=!1}))}),[t]);var y=qY($Y(G$,{activationConstraint:{distance:8}}));return{activeId:d,containers:c,sensors:y,collisionDetectionStrategy:m,onDragStart:function(e){f(e.active.id)},onDragOver:function(e){var r=e.active,i=e.over,o=null==i?void 0:i.id;if(null!=o&&!(r.id in t)){var a=g(o),l=g(r.id);a&&l&&l!==a&&n((function(e){var t,n=e[l],u=e[a],c=u.map((function(e){return e.get("record_uuid")})).indexOf(o),s=n.map((function(e){return e.get("record_uuid")})).indexOf(r.id);if(o in e)t=u.length+1;else{var d=i&&r.rect.current.translated&&r.rect.current.translated.top>i.rect.top+i.rect.height;t=c>=0?c+(d?1:0):u.length+1}return v.current=!0,XCt(XCt({},e),{},nx(nx({},l,e[l].filter((function(e){return e.get("record_uuid")!==r.id}))),a,[].concat(Q_(e[a].slice(0,t)),[e[l][s]],Q_(e[a].slice(t,e[a].length)))))}))}},onDragEnd:function(n){var l,c,s,d,h,v,m=n.active,y=n.over;if(m.id in t&&(null==y?void 0:y.id)){if(0===(null==(l=y.data.current.sortable)?void 0:l.index)&&(null==(c=null==y?void 0:y.data.current.sortable)?void 0:c.items[0])===r)return;var b=e.find((function(e){var t;return(null==(t=e.option)?void 0:t.uuid)===m.id}));a.updateFieldOptionOrder(null==b?void 0:b.option.field_uuid,m.id,y.id)}else{var w,_,x=$Ct(e);try{for(x.s();!(_=x.n()).done;){var k=_.value;if(k.viewRecords.find((function(e){return e.get("record_uuid")===m.id}))){w=k.id;break}}}catch(e){x.e(e)}finally{x.f()}if(w){var C=null==y?void 0:y.id,S=g(C);if(null!=C){if(S){if((null==i?void 0:i.get("keep_sort"))&&w===S)return void p.b.warning(wx("取消排序后，可进行拖拽"));var O=e.find((function(e){return e.id===w}))||void 0,E=e.find((function(e){return e.id===S}))||void 0,I=((null==O?void 0:O.viewRecords)||[]).map((function(e){return e.get("record_uuid")})).indexOf(m.id),P=t[S].map((function(e){return e.get("record_uuid")})).indexOf(C),M=m.id,R=null==(s=null==E?void 0:E.viewRecords[P])?void 0:s.get("record_uuid");if(w===S&&I===P)return;if(w!==S){var A=P===(null==E?void 0:E.viewRecords.length),j=o.getOriginViewRecords();if(A)R=null==(d=E.viewRecords[P-1])?void 0:d.get("record_uuid");else if(R){var D=CC(j,(function(e){return e.get("record_uuid")===R}));R=null==(h=j.get(D+1))?void 0:h.get("record_uuid")}var T=CC(j,(function(e){return e.get("record_uuid")===M})),F=CC(j,(function(e){return e.get("record_uuid")===R}));T<F&&(R=null==(v=j.get(F-1))?void 0:v.get("record_uuid"))}if(a.updateRecordOrder(M,R,E,jO.reverse),null==i?void 0:i.get("keep_sort")){var N=o.getGroupViewRecords(i.get("view_uuid")),L=u.getKanbanGroupPositionByRecordId(m.id,N),B=L.index,V=L.groupId;return u.scrollIntoView(V,{index:B,align:"start"}),void p.b.warning(wx("当前处于保持排序状态，为您重新定位"))}}f(null)}else f(null)}else f(null)}},onDragCancel:function(){f(null)},findContainer:g,getIndex:function(e){var n=g(e);return n?t[n].map((function(e){return e.get("record_uuid")})).indexOf(e):-1}}},ZCt=function(e){var t=e.items,n=e.containerId,r=e.useWindowScroll,i=e.customScrollParent,o=e.disableVirtualScroll,a=e.fields,l=e.viewConfig,c=e.withRef,s=e.scrollerRef,d=e.isReadonly;return u.a.createElement(uK,{disabled:d,items:t[n].map((function(e){return e.get("record_uuid")})),strategy:oK},u.a.createElement(Aoe,{useWindowScroll:r,customScrollParent:i,ref:function(e){c(e)},scrollerRef:s,components:{Item:VCt},data:t[n],className:"lakex-viewer-kanban-group-scorller","data-group-id":n,increaseViewportBy:o?Number.MAX_SAFE_INTEGER:0,itemContent:function(e,t){return u.a.createElement(YCt,{key:t.get("record_uuid"),viewRecord:t,fields:a,viewConfig:l})}}))},QCt=u.a.forwardRef((function(e,t){var n,r=function(e){var t=e.viewId,n=SWe(XA),r=qat({viewId:t}),i=SWe(cT),o=SWe(hCt),a=SWe(iCt),u=SWe(cCt),c=SWe(bCt),s=SWe(RC),d=!Gat(Qj.RECORD).canUpdate(),f=u.UNGROUP_KEY,h=r.groupViewRecords,p=u.toKanbanData(h),v=Object(l.useRef)({}),g=jF(Object(l.useState)((function(){var e={};return p.forEach((function(t){e[t.id]=t.viewRecords})),e})),2),m=g[0],y=g[1],b=jF(Object(l.useState)(null==s?void 0:s.getValue("view.useWindowScroll")),2),w=b[0],_=b[1],x=null==s?void 0:s.getValue("view.customScrollParent"),k=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body,C=jF(Object(l.useState)((null==s?void 0:s.getValue("view.disableVirtualScroll"))||!1),2),S=C[0],O=C[1];P$e((function(){v.current&&(null==c||c.setScrollers(v.current))}),[c,v]),P$e((function(){var e=i.onDataChanged((function(){var e;if(t===(null==(e=n.getActiveView())?void 0:e.get("uuid"))){var r=n.getGroupViewRecords(),i=(null==u?void 0:u.toKanbanData(r))||[],o={};i.forEach((function(e){o[e.id]=e.viewRecords})),y(o)}}));return function(){e.destroy()}}),[t]),P$e((function(){var e=null==s?void 0:s.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?_(n):"view.disableVirtualScroll"===t&&O(n)}));return function(){null==e||e.destroy()}}),[]);var E=r.group;return{isReadonly:d,ungroupId:f,fields:r.fields,viewConfig:r.viewConfig,group:E,isEmpty:!E,data:p,items:m,setItems:y,kanbanService:o,kanbanGroupService:a,scrollService:c,groupScrollersRef:v,useWindowScroll:w,customScrollParent:x,customModalContainer:k,disableVirtualScroll:S}}(e),i=r.isReadonly,o=r.kanbanService,a=r.kanbanGroupService,s=r.scrollService,d=r.fields,f=r.viewConfig,h=r.isEmpty,p=r.data,v=r.items,g=r.setItems,m=r.ungroupId,y=r.groupScrollersRef,b=r.useWindowScroll,w=r.customScrollParent,_=r.customModalContainer,x=r.disableVirtualScroll,k=JCt(p,v,g,m,f),C=k.activeId,S=k.containers,O=k.sensors,E=k.collisionDetectionStrategy,I=k.onDragStart,P=k.onDragOver,M=k.onDragEnd,R=k.onDragCancel,A=SWe(RC).getValue("render.deferMode"),j=Object(l.useMemo)((function(){return A===Ize.DISABLE?o.Group:NG(o.Group)}),[o.Group,A]),D=Object(l.useRef)({}),T=Object(l.useMemo)((function(){if(C&&!S.includes(C))for(var e=0,t=Object.values(v);e<t.length;e++){var n=t[e].find((function(e){return e.get("record_uuid")===C}));if(n)return n}return null}),[C,S,v]);if(P$e((function(){D.current&&(null==s||s.setVirtuosoRefs(D.current))}),[s,D]),!a)return null;if(h)n=u.a.createElement("div",{className:"lakex-viewer-kanban-content empty"},u.a.createElement(zCt,{onCreate:function(){return null==a?void 0:a.createGroup()}}));else{var F=null==S?void 0:S.map((function(e){var t=p.find((function(t){return t.id===e}));return t&&j?u.a.createElement(j,{key:e,isReadonly:i,groupId:e,items:v[e],disableDrag:e===m,groupField:t.field,collapse:t.collapse,groupOption:t.option},u.a.createElement(ZCt,{items:v,isReadonly:i,containerId:e,useWindowScroll:b,customScrollParent:w,disableVirtualScroll:x,fields:d,viewConfig:f,withRef:function(t){return D.current[e]=t},scrollerRef:function(t){t&&(y.current[e]=t)}})):null}));n=i?u.a.createElement("div",{className:"lakex-viewer-kanban-content"},F):u.a.createElement("div",{className:"lakex-viewer-kanban-content"},u.a.createElement(Rq,{sensors:O,collisionDetection:E,measuring:{droppable:{strategy:nq.Always}},onDragStart:I,onDragOver:P,onDragEnd:M,onDragCancel:R},u.a.createElement(u.a.Fragment,null,u.a.createElement(uK,{items:S,strategy:nK},F),Object(c.createPortal)(u.a.createElement(Kq,{dropAnimation:null},T&&u.a.createElement(WCt,{viewRecord:T,fields:d,viewConfig:f})),_))),u.a.createElement(HCt,{groupField:a.getGroupField()}))}return u.a.createElement("div",{ref:t,className:"lakex-viewer-kanban"},u.a.createElement("div",{className:"lakex-viewer-kanban-inner",onScroll:function(e){s.emitScrollEvent(e)}},n))}));function eSt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tSt(e,t,n){return t=DC(t),jC(e,nSt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function nSt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nSt=function(){return!!e})()}var rSt=function(e){function t(){var e;return rx(this,t),(e=tSt(this,t,arguments)).viewType=WO.KANBAN,e.title=wx("看板视图"),e.desc=wx("任务流转一目了然"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eSt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eSt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"KanbanView",size:e.size||16},e))},e.color="cyan-5",e.Component=QCt,e}return NC(t,e),ox(t)}(z8e),iSt=Object.defineProperty,oSt=Object.getOwnPropertyDescriptor,aSt=function(e,t,n,r){for(var i,o=r>1?void 0:r?oSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&iSt(t,n,o),o},lSt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new rSt({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setKanbanScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return ch().contribution(Qkt).contribution(eCt).register(this).register(hCt).register(iCt).register(cCt).register(bCt)}}])}();lSt.pluginName="render-viewer-kanban",aSt([Yf(bCt)],lSt.prototype,"_scrollService",2),lSt=aSt([Gf({contrib:[Sze,Mze,oot]})],lSt);var uSt=Object.defineProperty,cSt=Object.getOwnPropertyDescriptor,sSt=function(e,t,n,r){for(var i,o=r>1?void 0:r?cSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&uSt(t,n,o),o},dSt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(t){var n=t.context;if("switchView"===n.commandName){var r=n.argArray[0].viewId;e._openerService.setHash("view",r)}}))}},{key:"registerOpenerApp",value:function(){return[{name:"view",display_name:"View",description:"视图"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"view-opener",apps:["view"],open:function(t){e._commandService.execCommand("switchView",{viewId:t},!0)}}]}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{useWindowScroll:{type:"boolean",description:"滚动容器是否为 window"},customScrollParent:{type:"object",description:"自定义滚动容器，useWindowScroll 场景下触发滚动加载，类型为 HTMLElement | undefined"},disableVirtualScroll:{type:"boolean",description:"是否禁用虚拟滚动"}}}),e.registerDefaultValue({"view.useWindowScroll":!1,"view.customScrollParent":void 0,"view.disableVirtualScroll":!1})}}])}();dSt.pluginName="render-viewer-manage",sSt([Yf(Lj)],dSt.prototype,"_commandService",2),sSt([Yf(YHe)],dSt.prototype,"_openerService",2),dSt=sSt([Gf({contrib:[Sze,fHe]})],dSt);var fSt=u.a.createContext({});fSt.displayName="TodoContext";var hSt=fSt.Provider;function pSt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vSt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pSt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pSt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gSt(e,t,n){return t=DC(t),jC(e,mSt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function mSt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mSt=function(){return!!e})()}fSt.Consumer;var ySt=Object.defineProperty,bSt=Object.getOwnPropertyDescriptor,wSt=function(e){function t(){var e;return rx(this,t),(e=gSt(this,t,arguments))._onTodoAddClick=e._register(new dS),e.onTodoAddClick=e._onTodoAddClick.event,e._onTodoEditClick=e._register(new dS),e.onTodoEditClick=e._onTodoEditClick.event,e}return NC(t,e),ox(t,[{key:"emitTodoAddClick",value:function(e){this._onTodoAddClick.emit(vSt(vSt({},e),{},{type:"add"}))}},{key:"emitTodoEditClick",value:function(e){this._onTodoEditClick.emit(vSt(vSt({},e),{},{type:"edit"}))}}])}(HC);function _St(e){for(var t=Object(l.useContext)(fSt),n=t.todoDataService,r=t.labelColor,i=[],o=n.getPriorityStat(e.date),a=0;a<o.priority.length;a++){var c=o.priority[a];c.doing&&i.push(u.a.createElement("span",{className:"lakex-table-viewer-todo-point lakex-table-viewer-todo-point-".concat(a),style:{background:r.getRenderPureTextColor(c.fieldOption.color)}}))}return o.done&&i.push(u.a.createElement("span",{className:"lakex-table-viewer-todo-point",style:{background:"rgb(var(--lt-base-grey-6))"}})),u.a.createElement("div",{className:"lakex-table-viewer-todo-highlight"},i)}function xSt(e){var t=Object(l.useContext)(fSt).todoDataService.getCurrent(e.date);return u.a.createElement("div",{className:"lakex-table-viewer-todo-statics"},u.a.createElement("div",{className:"lakex-table-viewer-todo-statics-item"},u.a.createElement("div",{className:"todo-num todo-doing"},t.stat.doing),u.a.createElement("div",{className:"todo-doing"},wx("进行中"))),u.a.createElement("div",{className:"lakex-table-viewer-todo-statics-item"},u.a.createElement("div",{className:"todo-num todo-done"},t.stat.done),u.a.createElement("div",{className:"todo-done"},wx("已完成"))),u.a.createElement("div",{className:"lakex-table-viewer-todo-statics-item"},u.a.createElement("div",{className:"todo-num todo-total"},t.stat.total),u.a.createElement("div",null,wx("总数"))))}function kSt(e){var t=jF(Object(l.useState)(e.defaulValue),2),n=t[0],r=t[1],i=function(t){r(t),e.onChange(t)},o=a()(n).format("YYYY-MM-DD")===a()().format("YYYY-MM-DD");return u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar"},u.a.createElement(P4e,{fullscreen:!1,value:a()(n),headerRender:function(e){var t=e.value;return u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar-header-wrap"},u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar-header"},u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar-title"},u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar-date"},t.format("YYYY-MM-DD")),u.a.createElement(aXe,{className:"lt-btn",onClick:function(){i(t.startOf("month").subtract(1,"month").toDate())}},u.a.createElement(X$e,{type:"ArrowLeft"})),u.a.createElement(aXe,{className:"lt-btn",onClick:function(){i(t.startOf("month").add(1,"month").toDate())}},u.a.createElement(X$e,{type:"ArrowRight"}))),!o&&u.a.createElement("div",{className:"lakex-table-viewer-todo-calendar-arrow"},u.a.createElement(aXe,{className:"lt-btn lakex-table-viewer-todo-calendar-back",onClick:function(){i(new Date)}},wx("今天")))),u.a.createElement(xSt,{date:t}))},dateCellRender:function(e){return u.a.createElement("div",null,u.a.createElement(_St,{date:e}))},onChange:function(e){i(e.toDate())}}))}function CSt(e){var t,n,r,i,o=Object(l.useContext)(fSt),a=o.todoDataService,c=o.todoRenderService,s=o.isReadonly,d=a.getTodoDetail(e.recordId),f=null==(t=d[a.titleFieldId])?void 0:t.formatValue,h=null==(n=d[a.remarkFieldId])?void 0:n.formatValue,p=null==(r=d[a.dayFieldId])?void 0:r.formatValue,v=null==(i=d[a.timeFieldId])?void 0:i.formatValue,g=a.isOutdated(p,v);return u.a.createElement("div",{className:"lakex-table-viewer-todo-thing"},!s&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-checkbox"},u.a.createElement(kXe,{key:e.recordId,onClick:function(){return a.onDone(e.recordId)}})),u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-content",onClick:function(t){s||c.emitTodoEditClick({$target:t.target,recordId:e.recordId})}},u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-title"},f),h&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-remark"},h),(g||v)&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-footer"},g&&u.a.createElement("span",{className:"lakex-table-viewer-todo-thing-outdated"},wx("已逾期")),v&&!g&&u.a.createElement("span",{className:"lakex-table-viewer-todo-thing-time"},v))),!s&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-action"},u.a.createElement(X$e,{onClick:function(){return a.onRemove(e.recordId)},type:"Delete",size:16})))}function SSt(e){var t,n,r,i=Object(l.useContext)(fSt),o=i.todoDataService,a=i.todoRenderService,c=i.isReadonly,s=o.getTodoDetail(e.recordId),d=null==(t=s[o.titleFieldId])?void 0:t.formatValue,f=null==(n=s[o.remarkFieldId])?void 0:n.formatValue,h=null==(r=s[o.timeFieldId])?void 0:r.formatValue;return u.a.createElement("div",{className:"lakex-table-viewer-todo-thing"},!c&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-checkbox todo-done"},u.a.createElement(kXe,{key:e.recordId,checked:!0,onClick:function(){return o.onDoing(e.recordId)}})),u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-content todo-done",onClick:function(t){c||a.emitTodoEditClick({$target:t.target,recordId:e.recordId})}},u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-title"},d),f&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-remark"},f),h&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-time"},h)),!c&&u.a.createElement("div",{className:"lakex-table-viewer-todo-thing-action"},u.a.createElement(X$e,{onClick:function(){return o.onRemove(e.recordId)},type:"Delete",size:16})))}function OSt(e){var t=Object(l.useContext)(fSt),n=t.todoRenderService,r=t.isReadonly;return u.a.createElement("div",{className:F()("lakex-table-viewer-todo-item",{"is-even":e.isEven,"is-bottom":e.isBottom})},u.a.createElement("div",{className:"lakex-table-viewer-todo-item-title"},u.a.createElement("span",{className:"lakex-table-viewer-todo-item-progress"},u.a.createElement(E.a,{type:"circle",width:16,strokeWidth:10,strokeColor:e.color,percent:e.percent,showInfo:!1})),u.a.createElement("span",{style:{color:e.color}},e.title),!r&&u.a.createElement(aXe,{className:"lt-btn lakex-table-viewer-todo-item-add",onClick:function(t){n.emitTodoAddClick({$target:t.target,fieldOption:e.fieldOption})}},u.a.createElement(X$e,{type:"Add",size:16}))),u.a.createElement("div",{className:"lakex-table-viewer-todo-item-records"},0===e.doingRecordIds.length&&0===e.doneRecordIds.length?r?null:u.a.createElement(P.a,{image:P.a.PRESENTED_IMAGE_SIMPLE,description:u.a.createElement(u.a.Fragment,null)},u.a.createElement(aXe,{className:"lt-btn",type:"primary",onClick:function(t){n.emitTodoAddClick({$target:t.target,fieldOption:e.fieldOption})}},u.a.createElement(X$e,{type:"Add",size:16}),wx("添加待办"))):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:F()(nx({},"todo-color-".concat(e.colorToken),!0))},e.doingRecordIds.map((function(e){return u.a.createElement(CSt,{recordId:e})}))),e.doneRecordIds.map((function(e){return u.a.createElement(SSt,{recordId:e})})))))}function ESt(e){var t=e.data,n=Object(l.useContext)(fSt),r=n.todoDataService,i=n.labelColor,o=Math.round(r.priorityFieldOptions.length/2);return u.a.createElement("div",{className:"lakex-table-viewer-todo-content"},r.priorityFieldOptions.map((function(e,n){var r=n%2==0,a=Math.round((n+1)/2)===o;return u.a.createElement(OSt,{isEven:r,isBottom:a,fieldOption:e,doingRecordIds:t.priority[e.uuid].doing,doneRecordIds:t.priority[e.uuid].done,title:e.name,percent:t.priority[e.uuid].percent,color:null==i?void 0:i.getRenderPureTextColor(e.color),colorToken:null==i?void 0:i.getPureTextColorToken(e.color)})})))}wSt=function(e,t,n,r){for(var i,o=r>1?void 0:r?bSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ySt(t,n,o),o}([Gf()],wSt);var ISt=M.a.Sider,PSt=M.a.Content;function MSt(){var e=jF(Object(l.useState)(new Date),2),t=e[0],n=e[1],r=Object(l.useContext)(fSt).todoDataService;r.init();var i=r.getCurrent(t);return u.a.createElement(M.a,{className:"lakex-table-viewer-todo"},u.a.createElement(ISt,{width:300},u.a.createElement(kSt,{defaulValue:t,onChange:function(e){n(e),r.curDay=e}})),u.a.createElement(M.a,{className:"lakex-table-viewer-todo-layout"},u.a.createElement(PSt,null,u.a.createElement(ESt,{data:i}))))}var RSt=u.a.forwardRef((function(e,t){var n=qat({viewId:e.viewId}),r=!Gat(Qj.RECORD).canUpdate(),i=SWe(wSt),o=SWe(Xrt),a=SWe(mN);return o.init(),u.a.createElement(hSt,{value:{todoDataService:o,todoRenderService:i,labelColor:a,isReadonly:r}},u.a.createElement(MSt,{ref:t,fields:n.fields,view:n.view,viewRecords:n.viewRecords||new yC,viewFields:n.viewFields,viewConfig:n.viewConfig}))}));function ASt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jSt(e,t,n){return t=DC(t),jC(e,DSt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function DSt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DSt=function(){return!!e})()}var TSt=function(e){function t(){var e;return rx(this,t),(e=jSt(this,t,arguments)).viewType=WO.TODO,e.title=wx("待办视图"),e.desc=wx("开始每天的事项安排"),e.icon=function(e){return u.a.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ASt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ASt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"TodoView",size:e.size||16},e))},e.color="magenta-4",e.Component=RSt,e}return NC(t,e),ox(t)}(z8e),FSt=Object.defineProperty,NSt=Object.getOwnPropertyDescriptor,LSt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){}},{key:"registerViewer",value:function(e){e.registerItem(new TSt({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return ch().register(wSt).register(this)}}])}();LSt.pluginName="render-viewer-todo",LSt=function(e,t,n,r){for(var i,o=r>1?void 0:r?NSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&FSt(t,n,o),o}([Gf({contrib:[Sze,Mze]})],LSt);var BSt=[sft,Gdt,Est,zst,Oct,Blt,plt,Cft,Olt,jct,mft,Aut,gut,Zut,Qlt,tdt,Adt,ydt,jft,Zft,wat,tgt,Mat,Uat,Fgt,aht,Xgt,nht,mht,dSt,iot,Aot,Mgt,Eht,Zkt,sxt,H_t,B_t,Kft,Gyt,lSt,FCt,dyt,l_t,LSt,M_t],VSt=Rf.defineToken("AddFieldPluginConfigContribution"),zSt=Rf.defineToken("AddFieldPluginColConfigNameContribution"),HSt=Object.defineProperty,WSt=Object.getOwnPropertyDescriptor,USt=function(e,t,n,r){for(var i,o=r>1?void 0:r?WSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&HSt(t,n,o),o},GSt=ox((function e(){var t=this;rx(this,e),this.getConfigComponents=function(){var e=t.addFieldPluginConfigProvider.getContributions({cache:!1});return e.length>0?e.map((function(e){return e.getConfigComponent()})):[]},this.getColConfigNameComponent=function(){var e,n,r=t.AddFieldPluginColConfigNameaddFieldPluginConfigProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getColConfigNameComponent)?void 0:n.call(e):null}}));USt([gh(VSt)],GSt.prototype,"addFieldPluginConfigProvider",2),USt([gh(zSt)],GSt.prototype,"AddFieldPluginColConfigNameaddFieldPluginConfigProvider",2),GSt=USt([Gf()],GSt);var YSt=function(e){var t,n;if(!YO.isSelectLike(e.type))return null;var r={type:e.type,options:(null==(t=e.property)?void 0:t.options)||[],color:(null==(n=e.property)?void 0:n.color)||!1};return u.a.createElement("div",{className:"select-input lakex-table-col-options"},u.a.createElement(ost,{title:u.a.createElement("span",{className:"lakex-table-option-config-title"},wx("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:e.type===xO.MULTI_SELECT,configs:r}))},$St=function(e){var t=e.initialState||{},n=t.fieldId,r=t.showFieldTypes,i=t.sourceFieldId,o=t.direction,a=void 0===o?"after":o,c=Xat(n||""),s=c.field,d=c.fieldName,f=c.fieldType,h=c.fieldOptions,p=c.updateProperty,v=SWe(XA),g=SWe(Lj),m=SWe(hD),y=SWe(iHe),b=SWe(z9e),w=SWe(mN),_=SWe(GSt),x=s?null==y?void 0:y.getFieldIcon(null==s?void 0:s.get("type")):null,k=(null==_?void 0:_.getConfigComponents())||[],C=Ax(s),S=jF(Object(l.useState)(null),2),O=S[0],E=S[1],I=Object(l.useMemo)((function(){return C?function(e){var t,n=[];for(e.forEach((function(e){n.push(e.uuid)}));!t||n.includes(t);)t=Cx(32);return{id:t,name:EO(xO.TEXT,e),type:xO.TEXT,options:null,color:null,config:null}}(v.getAllFields().toJSON()):{id:n,name:d||"",type:f||xO.TEXT,options:(null==h?void 0:h.toJSON())||[],color:null==s?void 0:s.get("color"),config:null==s?void 0:s.get("config")}}),[s]),P=jF(Object(l.useState)(I.name),2),M=P[0],R=P[1],A=jF(Object(l.useState)(I.type),2),j=A[0],D=A[1],T=jF(Object(l.useState)(I.color),2),N=T[0],L=T[1],B=jF(Object(l.useState)(I.config),2),V=B[0],z=B[1],H=Object(l.useRef)(null),W=jF(Object(l.useState)(!1),2),U=W[0],G=W[1],Y=jF(Object(l.useState)((function(){return YO.isSelectLike(j)?{options:I.options,color:Boolean(null==s?void 0:s.get("color"))}:null})),2),$=Y[0],q=Y[1],K=Object(l.useCallback)((function(){b.close("addOrUpdateField")}),[b]),X=Object(l.useCallback)((function(e){return e?EC(v.getAllFields(),(function(t){return t.get("uuid")!==I.id&&t.get("name")===e}))?wx("不能与其他列重名"):null:wx("列名不能为空")}),[]),J=Object(l.useCallback)((function(e){var t=X(e);E(t)}),[]),Z=Object(l.useCallback)((function(e){var t=e.ctrlKey,n=e.metaKey;if(G(!0),13===e.keyCode&&!t&&!n){var r=e.target.value.trim();J(r)}}),[]),Q=Object(l.useCallback)(function(){var e=aO(QC.mark((function e(t){var r,o,l;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X(M),E(r),J(M),!r){e.next=5;break}return e.abrupt("return");case 5:C?(o={field:{uuid:t||Cx(32),name:M,type:j,color:N,config:V},sourceFieldId:i,direction:a},YO.isSelectLike(j)&&$&&(o.field.color=$.color,o.field.options=$.options),null==g||g.execCommand("addField",o),K()):(l={uuid:n,name:M,type:j,color:N,config:V},YO.isSelectLike(j)&&$&&(l.color=$.color,l.options=$.options),p(l),K());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[X,s,C,n,i,a,M,j,N,V,J,$]),ee=Object(l.useCallback)((function(e){return Jc(v.getFieldCells(e.fieldId),"formatValue").filter((function(e){return!!e.formatValue})).map((function(e,t){return{color:null==w?void 0:w.getByIndex(t),name:e.formatValue,uuid:Cx(6)}}))}),[]),te=Object(l.useCallback)((function(e){var t=e.key;if(new RegExp("".concat(IO(j),"(\\s\\d)*")).test(M)&&C&&!U){var r=EO(t,v.getAllFields().toJSON());R(r)}if(!YO.isSelectLike(j)&&YO.isSelectLike(t)&&(!$||!$.options||0===$.options.length)){var i=n?ee({fieldId:n,type:j,color:true}):[];q({options:i,color:true})}b.emitUpdatePosition("addOrUpdateField"),D(t)}),[I,v,j,$,n,C,U]);if(P$e((function(){(null==H?void 0:H.current)&&setTimeout((function(){H.current&&(H.current.focus(),H.current.select())}),100)}),[]),!C&&!s)return console.warn("FieldId is valid in FieldConfigModal"),null;var ne=OO;r&&(ne=OO.filter((function(e){return r.includes(e.type)})));var re=null==y?void 0:y.getFieldIcon(j),ie=[{key:j,title:u.a.createElement("span",null,IO(j)),icon:re?u.a.createElement(re,{size:16}):null,groupBy:"subType",children:ne.map((function(e){var t=null==y?void 0:y.getFieldIcon(e.type),n=null==_?void 0:_.getColConfigNameComponent();return{key:e.type,title:n?u.a.createElement(n,{fieldType:e.type,fieldName:e.name}):e.name,icon:t?u.a.createElement(t,{size:16}):null,subType:e.isAdvanced?wx("高级"):wx("基础"),showActiveIcon:!0}}))}];return u.a.createElement("div",{className:"lakex-table-col-configs"},u.a.createElement("p",{className:"lakex-table-col-title"},wx("数据表列名")),u.a.createElement("div",{className:"lakex-table-col-name"},u.a.createElement(LYe,{value:M,ref:H,className:F()({error:O}),defaultValue:M,maxLength:128,onChange:function(e){var t=e.target.value.trim();R(t)},onKeyDown:Z,onBlur:function(e){J(e.target.value.trim())}}),O&&u.a.createElement("div",{className:"lakex-table-col-error"},O)),u.a.createElement("p",{className:"lakex-table-col-title"},wx("列类型"),u.a.createElement(j4e,{title:wx("设置该列内容类型，支持文本、日期、数字、单选、多选等")},u.a.createElement(X$e,{type:"Question",size:14,style:{marginLeft:4}}))),C||m.can(Zj.TRANSFORM,Qj.FIELD,s)?u.a.createElement(dqe,{key:f,menuKey:f||"",className:"lakex-table-col-types",defaultSelectedKeys:[j],onClick:te,configs:ie,cols:2}):u.a.createElement("div",{className:"lakex-table-col-readonly"},x&&u.a.createElement(x,null),u.a.createElement("span",{className:"lakex-table-col-readonly-text"},IO(null==s?void 0:s.get("type")))),u.a.createElement(YSt,{name:M,type:j,property:$,onChange:function(e){q(e)}}),k.length>0&&k.map((function(e){return u.a.createElement(e,{key:null,originField:s,fieldType:j,fieldName:M,fieldProperty:$,onFieldSubmitConfirm:Q,onChange:function(e){(null==e?void 0:e.color)&&L(e.color),null!=(null==e?void 0:e.config)&&z(e.config)}})})),u.a.createElement("div",{className:"lakex-table-col-configs-footer"},u.a.createElement(aXe,{style:{marginRight:12},onClick:K},wx("取消")),u.a.createElement(aXe,{type:"primary",disabled:O,onClick:function(){return Q()}},wx("确定"))))},qSt=Object.defineProperty,KSt=Object.getOwnPropertyDescriptor,XSt=function(e,t,n,r){for(var i,o=r>1?void 0:r?KSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&qSt(t,n,o),o},JSt=function(){return ox((function e(){rx(this,e),this._toDestroyCollection=new KC}),[{key:"init",value:function(){var e=this;this._toDestroyCollection.push(this._renderService.onClickIcon((function(t){"grid-field-config"===t.iconName&&e._handleOpenFieldConfigCreateModal(t.event.currentTarget)}))),this._toDestroyCollection.push(this._renderService.onClickEvent((function(t){if("gridHeader:doubleClick"===t.eventName){var n=t.data,r=n.event,i=n.fieldId;e._modalService.open("addOrUpdateField",{position:{origin:r.currentTarget,placement:"bottom"},initialState:{fieldId:i}})}})))}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:"addOrUpdateField",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:$St})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"updateField",name:wx("编辑列"),icon:"Edit",hotkey:"",visible:function(e){var n=e.from;return t._abilityService.canUpdate(Qj.FIELD)&&n===Oat.HEADER},onClick:function(e){var n=e.initialState,r=e.position,i=n.recordId,o=n.fieldId;if(r){var a=t._workbenchContext.$root.querySelector('.lakex-viewer-grid-header-column[data-field-id="'.concat(o,'"]'));t._modalService.open("addOrUpdateField",{initialState:{recordId:i,fieldId:o},position:{origin:a,placement:"bottom"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"copyField",name:wx("复制列"),icon:"Copy",hotkey:"",visible:function(e){var n=e.from;return t._abilityService.canCreate(Qj.FIELD)&&n===Oat.HEADER},onClick:function(e){var n=e.initialState.fieldId;t._commandService.execCommand("copyField",{fieldId:n}),t._modalService.close("context-menu-modal")}}),e.registerItem({key:"insertFieldLeft",name:wx("向左插入列"),icon:"LeftArrow",hotkey:"",visible:function(e){var n=e.from;return t._abilityService.canCreate(Qj.FIELD)&&n===Oat.HEADER},onClick:function(e){var n=e.initialState,r=e.position,i=t._readService.getActiveView(),o=n.fieldId,a=n.originRect;if(r&&i){var l=xC(t._readService.getViewFields(i.get("uuid"))||[],(function(e){return e.get("field_uuid")===o}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==l?void 0:l.get("field_uuid"),direction:"before"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"insertFieldRight",name:wx("向右插入列"),icon:"RightArrow",hotkey:"",visible:function(e){var n=e.from;return t._abilityService.canCreate(Qj.FIELD)&&n===Oat.HEADER},onClick:function(e){var n=e.initialState,r=e.position,i=t._readService.getActiveView(),o=n.fieldId,a=n.originRect;if(r&&i){var l=xC(t._readService.getViewFields(i.get("uuid"))||[],(function(e){return e.get("field_uuid")===o}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==l?void 0:l.get("field_uuid"),direction:"after"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"removeField",name:wx("删除列"),icon:"Delete",hotkey:"",visible:function(e){var n=e.from;return!!e.fieldId&&(t._abilityService.canDelete(Qj.FIELD)&&n===Oat.HEADER)},onClick:function(e){var n,r=e.initialState,i=r.fieldId;r.disableDel||(null==(n=t._possibleService)||n.setUnpossible(yht.delCol,[i]),t._commandService.execCommand("removeField",{fieldId:i}),t._modalService.close("context-menu-modal"))},onMouseEnter:function(e){var n,r=[e.initialState.fieldId];null==(n=t._possibleService)||n.setPossible(yht.delCol,r)},onMouseLeave:function(e){var n,r=[e.initialState.fieldId];null==(n=t._possibleService)||n.setUnpossible(yht.delCol,r)}})}},{key:"_handleOpenFieldConfigCreateModal",value:function(e){this._abilityService.canCreate(Qj.FIELD)&&this._modalService.open("addOrUpdateField",{position:{origin:e,placement:"bottom"}})}}],[{key:"pluginModule",value:function(){return ch().contribution(VSt).contribution(zSt).register(this).register(GSt)}}])}();JSt.pluginName="workbench-add-field",XSt([Yf(z9e)],JSt.prototype,"_modalService",2),XSt([Yf(Xze)],JSt.prototype,"_renderService",2),XSt([Yf(hD)],JSt.prototype,"_abilityService",2),XSt([Yf(eet)],JSt.prototype,"_workbenchContext",2),XSt([Yf(XA)],JSt.prototype,"_readService",2),XSt([Yf(Lj)],JSt.prototype,"_commandService",2),XSt([Yf(Cht),If()],JSt.prototype,"_possibleService",2),JSt=XSt([Gf({contrib:[Z8e,H9e,rmt]})],JSt);var ZSt=Object.defineProperty,QSt=Object.getOwnPropertyDescriptor,eOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?QSt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ZSt(t,n,o),o},tOt=function(){return ox((function e(){var t=this;rx(this,e),this._handleInsertRecordBefore=function(){var e=aO(QC.mark((function e(n){var r,i,o,a,l,u,c,s,d,f,h,p;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.initialState,i=n.inputNumber,a=r.recordId,l=t._readService.getOriginViewRecords(),!((u=CC(l,(function(e){return e.get("record_uuid")===a})))<0)){e.next=6;break}return e.abrupt("return");case 6:return c=t._readService.getViewFields(),s=l.get(u),e.next=10,t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"before",groupItemKey:s.get("group_item_key"),recordCount:i||1});case 10:d=e.sent,f=t._readService.getActiveView(),h=null==d?void 0:d.result,(null==f?void 0:f.get("type"))===WO.GRID?(p=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(u,0,((null==l?void 0:l.length)||0)+1,(null==c?void 0:c.length)||0),t._selectionService.scrollToSelection(p,"start")):h&&h[0]&&t._modalService.open("expandRecord",{initialState:{recordId:h[0].uuid}}),t._modalService.close("context-menu-modal");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._handleInsertRecordAfter=function(){var e=aO(QC.mark((function e(n){var r,i,o,a,l,u,c,s,d,f,h,p;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.initialState,i=n.inputNumber,a=r.recordId,l=t._readService.getOriginViewRecords(),!((u=CC(l,(function(e){return e.get("record_uuid")===a})))<0)){e.next=6;break}return e.abrupt("return");case 6:return c=t._readService.getViewFields(),s=l.get(u),e.next=10,t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"after",groupItemKey:s.get("group_item_key"),recordCount:i||1});case 10:d=e.sent,f=t._readService.getActiveView(),h=null==d?void 0:d.result,(null==f?void 0:f.get("type"))===WO.GRID?(p=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(u+1,0,((null==l?void 0:l.length)||0)+1,(null==c?void 0:c.length)||0),t._selectionService.scrollToSelection(p,"end")):h&&h[0]&&t._modalService.open("expandRecord",{initialState:{recordId:h[0].uuid}}),t._modalService.close("context-menu-modal");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._handleRemoveRecord=function(e){var n,r,i=e.initialState.recordId;null==(n=t._possibleService)||n.setUnpossible(yht.delRow,[i]),t._commandService.execCommand("removeRecords",{recordIds:[i]}),null==(r=t._selectionService)||r.removeSelection(),t._modalService.close("context-menu-modal")},this._handleRemoveRecords=function(e){var n,r,i,o=e.initialState.selection;if(o){if(o.isAllSelect)null==(n=t._possibleService)||n.setUnpossible(yht.delRow),t._commandService.execCommand("removeRecords",{all:!0});else{var a=t._selectionService.getRecordIds(o);null==(r=t._possibleService)||r.setUnpossible(yht.delRow,a),t._commandService.execCommand("removeRecords",{recordIds:a})}null==(i=t._selectionService)||i.removeSelection(),t._modalService.close("context-menu-modal")}}}),[{key:"canCreateReacord",get:function(){return this._abilityService.canCreate(Qj.RECORD)}},{key:"canDeleteReacord",get:function(){return this._abilityService.canDelete(Qj.RECORD)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t,n=this;e.registerItem({id:"add-record",icon:"Add",iconSize:16,tooltip:function(){return n.currentViewType===WO.CALENDAR?wx("添加日程"):wx("添加记录")},visible:function(){var e=n._readService.getActiveView();if(!e)return!1;var t=e.get("type");return n.canCreateReacord&&![WO.FORM,WO.CHART,WO.TODO].includes(t)},showTitle:!0,showTooltip:!1,onClick:(t=aO(QC.mark((function e(){var t,r,i,o;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,n.currentViewType!==WO.CALENDAR){e.next=8;break}return n._commandService.execCommand("setActiveDate",{date:Ek()}),e.next=5,n._commandService.execCommand("createSchedule",{date:a()()});case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,n._commandService.execCommand("addEmptyRecord");case 10:r=e.sent;case 11:i=null==r?void 0:r.result,(o=null==(t=null==i?void 0:i[0])?void 0:t.uuid)&&_x((function(){var e;null==(e=n._selectionService)||e.moveToRecord(o),n._modalService.open("expandRecord",{mode:V9e.MODAL,disableClickAwayClose:!1,initialState:{recordId:o,showAddNext:!0,isNewRecord:!0}})}));case 14:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})})}},{key:"registerContextMenu",value:function(e){var t,n=this;e.registerItem({key:"insertRecordUp",name:function(){return n.currentViewType===WO.GRID?wx("向上插入 {InputNumber} 行"):wx("向上插入记录")},icon:"UpArrow",hotkey:i$e.adapterHotKey("⌘+⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var t=e.from;return n.canCreateReacord&&(t===Oat.CELL||t===Oat.KANBAN_RECORD)},onClick:function(e){n.currentViewType===WO.GRID&&null==e.inputNumber||(n.currentViewType===WO.KANBAN?n._handleInsertRecordAfter(e):n._handleInsertRecordBefore(e))}}),e.registerItem({key:"insertRecordDown",name:function(){return n.currentViewType===WO.GRID?wx("向下插入 {InputNumber} 行"):wx("向下插入记录")},icon:"DownArrow",hotkey:i$e.adapterHotKey("⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var t=e.from;return n.canCreateReacord&&(t===Oat.CELL||t===Oat.KANBAN_RECORD)},onClick:function(e){n.currentViewType===WO.GRID&&null==e.inputNumber||(n.currentViewType===WO.KANBAN?n._handleInsertRecordBefore(e):n._handleInsertRecordAfter(e))}}),e.registerItem({key:"insertRecordLeft",name:wx("向左插入记录"),icon:"LeftArrow",hotkey:"",visible:function(e){var t=e.from;return n.canCreateReacord&&t===Oat.CARD_RECORD},onClick:this._handleInsertRecordBefore}),e.registerItem({key:"insertRecordRight",name:wx("向右插入记录"),icon:"RightArrow",hotkey:"",visible:function(e){var t=e.from;return n.canCreateReacord&&t===Oat.CARD_RECORD},onClick:this._handleInsertRecordAfter}),e.registerItem({key:"copyRecord",icon:"Copy",name:function(){return n.currentViewType===WO.GRID?wx("复制行"):wx("复制记录")},hotkey:"",visible:function(e){var t=e.from;return t===Oat.CELL||t===Oat.KANBAN_RECORD||t===Oat.CARD_RECORD},onClick:function(e){var t=e.initialState.recordId,r=n._readService.getOriginViewRecords(),i=CC(r,(function(e){return e.get("record_uuid")===t})),o=r.get(i);n._commandService.execCommand("copyRecord",{sourceRecordId:o.get("record_uuid")}),n._modalService.close("context-menu-modal")}}),e.registerItem({key:"removeRecord",name:function(){return n.currentViewType===WO.GRID?wx("删除行"):n.currentViewType===WO.CALENDAR?wx("删除日程"):wx("删除记录")},icon:"Delete",hotkey:"",visible:function(e){var t=e.from;return n.canDeleteReacord&&t!==Oat.HEADER&&t!==Oat.GROUP_HEADER},onClick:(t=aO(QC.mark((function e(t){var r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.initialState,(i=r.selection)&&!i.isCollapsed?n._handleRemoveRecords(t):n._handleRemoveRecord(t);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onMouseEnter:function(e){var t,r=e.initialState,i=r.selection,o=[r.recordId];i&&(o=n._selectionService.getRecordIds(i)),null==(t=n._possibleService)||t.setPossible(yht.delRow,o)},onMouseLeave:function(e){var t,r=e.initialState,i=r.selection,o=[r.recordId];i&&(o=n._selectionService.getRecordIds(i)),null==(t=n._possibleService)||t.setUnpossible(yht.delRow,o)}})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();tOt.pluginName="workbench-add-record",eOt([Yf(z9e)],tOt.prototype,"_modalService",2),eOt([Yf(XA)],tOt.prototype,"_readService",2),eOt([Yf(Lj)],tOt.prototype,"_commandService",2),eOt([Yf(yot),If()],tOt.prototype,"_selectionService",2),eOt([Yf(hD)],tOt.prototype,"_abilityService",2),eOt([Yf(Cht),If()],tOt.prototype,"_possibleService",2),tOt=eOt([Gf({contrib:[Z8e,i9e,rmt]})],tOt);var nOt=Object.defineProperty,rOt=Object.getOwnPropertyDescriptor,iOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?rOt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&nOt(t,n,o),o},oOt=function(){return ox((function e(){var t=this;rx(this,e),this._handleCopy=function(){t._copyCutService.copy(),t._modalService.close("context-menu-modal")},this._handlePaste=function(){t._pasteService.paste(),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"copy",name:wx("复制"),hotkey:i$e.adapterHotKey("⌘+C"),visible:function(e){var t=e.from;return t===Oat.CELL||t===Oat.MULTI_CELL},onClick:this._handleCopy}),e.registerItem({key:"paste",name:wx("粘贴"),hotkey:i$e.adapterHotKey("⌘+V"),visible:function(e){var n=e.from;return!t.isReadonly&&(n===Oat.CELL||n===Oat.MULTI_CELL)},onClick:this._handlePaste})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function aOt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lOt(e){var t=jF(Object(l.useState)(e.inputNumber),2),n=t[0],r=t[1],i=Object(l.useRef)(null),o=Object(l.useRef)(null);return u.a.createElement(Q0e,{ref:i,defaultValue:e.defaultValue,value:n,size:e.size,controls:e.controls,onChange:function(t){o.current&&clearTimeout(o.current),null!=t&&(e.max<t?(t=e.max,_x((function(){i.current&&(i.current.value=String(t))}))):e.min>t&&(t=e.min,_x((function(){i.current&&(i.current.value=String(t))})))),r(t),e.onChange(t)},onClick:e.onClick})}oOt.pluginName="workbench-clipboard",iOt([Yf(z9e)],oOt.prototype,"_modalService",2),iOt([Yf(XA)],oOt.prototype,"_readService",2),iOt([Yf(hD)],oOt.prototype,"_abilityService",2),iOt([Yf(tat)],oOt.prototype,"_copyCutService",2),iOt([Yf(sat)],oOt.prototype,"_pasteService",2),oOt=iOt([Gf({contrib:[Z8e,rmt]})],oOt);var uOt=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aOt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aOt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=t.initialState,r=n.items,i=n.disableDel,o=Object(l.useRef)(null);return u.a.createElement("div",{ref:o,className:"lakex-grid-context-menu"},u.a.createElement(L$e,{mode:"vertical"},null==r?void 0:r.map((function(e,n){return"|"===e?u.a.createElement(R.a,{key:n}):u.a.createElement(L$e.Item,{className:F()({disable:"deleteField"===e.key&&i}),key:e.key,icon:$r(e.icon)?e.icon({}):u.a.createElement(X$e,{type:e.icon}),onClick:function(n){var r;null==(r=e.onClick)||r.call(e,t,n)},onMouseEnter:function(n){var r;null==(r=e.onMouseEnter)||r.call(e,t,n)},onMouseLeave:function(n){var r;null==(r=e.onMouseLeave)||r.call(e,t,n)}},u.a.createElement("span",null,function(e){if(e.enableInputNumber&&"string"==typeof e.name&&e.name.includes("{InputNumber}")){var n=e.name.split("{InputNumber}");return t.inputNumber=e.defaultNum||1,u.a.createElement(u.a.Fragment,null,n[0],u.a.createElement(lOt,{defaultValue:t.inputNumber,min:e.minNum,max:e.maxNum,size:"small",controls:!1,onChange:function(e){t.inputNumber=e},onClick:function(e){e.preventDefault(),e.stopPropagation()}}),n[1])}return e.name}(e)),u.a.createElement("span",{className:"lakex-grid-context-menu-item-hotkey"},e.enableInputNumber?"":e.hotkey))}))))},cOt=["e","from","modalProps"];function sOt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dOt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sOt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sOt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fOt=Object.defineProperty,hOt=Object.getOwnPropertyDescriptor,pOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?hOt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fOt(t,n,o),o},vOt=function(){return ox((function e(){rx(this,e),this._contextMenuModalId="context-menu-modal",this._destroyList=new KC}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e,t,n=this;this._contextMenuRegistry.init(),this._destroyList.push(null==(e=this._contextMenuService)?void 0:e.onContextMenu((function(e){var t,r=e.e,i=e.from,o=e.modalProps,a=EWe(e,cOt),l=n._readService.getViewFields()||[],u=r.currentTarget,c=r.clientX,s=r.clientY;n.isReadonly||(t="header"===i?u:{height:0,width:0,left:c,right:c,top:s,bottom:s},n._modalService.open(n._contextMenuModalId,dOt({position:{origin:t,placement:"bottomLeft"},initialState:dOt({items:n._contextMenuWorkbenchService.getMenuItems({from:i,fieldId:a.fieldId}),originRect:u.getBoundingClientRect(),disableDel:1===l.length},a)},o||{})))})));var r=null==(t=this._selectionService)?void 0:t.onAnchorChange((function(e){var t,r;(null==(t=n._selectionService)?void 0:t.hasSelection())||n._modalService.close(n._contextMenuModalId);var i=e.fieldValue,o=null==(r=n._contextMenuService)?void 0:r.contextMenuInfo;((null==i?void 0:i.fieldId)!==(null==o?void 0:o.fieldId)||(null==i?void 0:i.recordId)!==(null==o?void 0:o.recordId))&&n._modalService.close(n._contextMenuModalId)}));r&&this._destroyList.push(r)}},{key:"destroy",value:function(){this._destroyList.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:this._contextMenuModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!1,disableEscClose:!0,RenderComponent:uOt})}}],[{key:"pluginModule",value:function(){return ch().contribution(rmt).register(vmt).register(cmt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"contextMenu",type:"array",title:"右键菜单"}),e.registerDefaultValue({contextMenu:[]})}}])}();vOt.pluginName="workbench-context-menu",pOt([Yf(z9e)],vOt.prototype,"_modalService",2),pOt([Yf(Eat),If()],vOt.prototype,"_contextMenuService",2),pOt([Yf(vmt)],vOt.prototype,"_contextMenuWorkbenchService",2),pOt([Yf(yot),If()],vOt.prototype,"_selectionService",2),pOt([Yf(XA)],vOt.prototype,"_readService",2),pOt([Yf(cmt)],vOt.prototype,"_contextMenuRegistry",2),pOt([Yf(hD)],vOt.prototype,"_abilityService",2),vOt=pOt([Gf({contrib:[Z8e,H9e,rmt]})],vOt);var gOt=Rf.defineToken("ExpandRecordContribution"),mOt=function(e){return e.NORMAL="normal",e.LITE="lite",e}(mOt||{});function yOt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bOt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bOt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function bOt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var wOt=Object.defineProperty,_Ot=Object.getOwnPropertyDescriptor,xOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?_Ot(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wOt(t,n,o),o},kOt=function(){return ox((function e(){rx(this,e),this._recordProviders=[],this._tooltipComponent=null}),[{key:"init",value:function(){var e,t,n=yOt(this.expendRecordProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerExpandRecord)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getProviders",value:function(){return this._recordProviders}},{key:"getTooltipComponent",value:function(){return this._tooltipComponent}},{key:"registerRecordProvider",value:function(e){this._recordProviders.push(e)}},{key:"registerRecordTooltip",value:function(e){this._tooltipComponent=e}}])}();function COt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SOt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?COt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):COt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}xOt([gh(gOt)],kOt.prototype,"expendRecordProvider",2),kOt=xOt([Gf()],kOt);var OOt=Object(l.memo)((function(e){var t=e.recordId,n=e.field,r=elt(t,n.get("uuid")),i=n.get("type")||"",o=SWe(iHe).getFieldComponent(i);return i&&o?Ax(null==r?void 0:r.value)?u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},u.a.createElement("span",{className:"lakex-cell-field-in-expand-record cell-empty"},wx("(空)"))):u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},o&&u.a.createElement(o,{key:null==r?void 0:r.uuid,cell:r,field:n,readonly:!0})):null})),EOt=Object(l.memo)((function(e){var t=e.recordId,n=e.field,r=e.focus,i=void 0!==r&&r,o=e.suffixIcon,a=e.allowClear,c=void 0===a||a,s=e.renderMode,d=void 0===s?Pze.NORMAL:s,f=e.onCellChange,h=elt(t,n.get("uuid")),p=n.get("type")||"",v=SWe(iHe),g=SWe(kOt).getTooltipComponent(),m=jF(Object(l.useState)(""),2),y=m[0],b=m[1];if(!h&&p!==xO.RATE&&p!==xO.PROGRESS)return null;var w=v.getFieldEditComponent(p)||v.getFieldComponent(p);if(!w)return u.a.createElement("h1",null,"尚未注册FieldEditComponent");var _=SOt(SOt({},YO.isLink(p)&&{useLinkEditor:!0}),YO.isSelectLike(p)&&{displayType:"dropdown"});if(YO.isSystemType(p))return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},u.a.createElement(w,{key:null==h?void 0:h.uuid,field:n,recordId:t,cell:h,readonly:!1,focus:!1}));var x=u.a.createElement(w,SOt({key:(null==h?void 0:h.uuid)+h.updated_at,defaultValue:null==h?void 0:h.value,field:n,cell:h,renderMode:d,recordId:t,onCellChange:function(e){var t=v.cellValueChecker(p,e);b(t),null==h||h.setCell(e),null==f||f(e)},focus:i,suffixIcon:o,allowClear:c},_));return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},g?u.a.createElement(g,{cell:h,field:n},x):x,u.a.createElement("p",{className:F()("lakex-table-expand-item-error",{show:y})},y))})),IOt=Object(l.memo)((function(e){var t=e.type,n=SWe(iHe).getFieldIcon(t);return u.a.createElement("div",{className:"lakex-cell-field-in-expand-record-icon"},n&&u.a.createElement(n,{size:16}))})),POt=Object(l.memo)((function(e){var t=e.field,n=e.position,r=SWe(iHe).getFieldTagComponent(t.get("type"));return r?u.a.createElement(r,{field:t,position:n}):null})),MOt=function(e){var t=e.field,n=e.isReadonly,r=Xat((null==t?void 0:t.get("uuid"))||""),i=r.field,o=r.fieldType,a=r.fieldName,c=SWe(z9e),s=Object(l.useCallback)((function(e){n||c.open("addOrUpdateField",{position:{origin:e.currentTarget,placement:"bottom"},initialState:{fieldId:null==i?void 0:i.get("uuid")}})}),[n]);return i?u.a.createElement("div",{className:F()("lakex-table-expand-record-form-item-label",{"lakex-table-readonly":n}),onClick:s},u.a.createElement(IOt,{type:o}),u.a.createElement("div",{className:"lakex-table-expand-record-form-item-label-name"},a),!n&&u.a.createElement(X$e,{type:"ReviewArrowDown"}),u.a.createElement(POt,{field:i,position:"expandRecord"})):null},ROt=function(e){var t=e.recordId,n=e.field,r=e.isReadonly,i=SWe(RC);return n?u.a.createElement(u.a.Fragment,null,u.a.createElement(MOt,{isReadonly:r,field:n}),u.a.createElement("div",{className:"lakex-table-expand-record-form-item-content"},r?u.a.createElement(OOt,{key:n.get("type")+n.get("uuid"),recordId:t,field:n,isReadonly:!0}):u.a.createElement(EOt,{key:n.get("type")+n.get("uuid"),recordId:t,field:n,renderMode:(null==i?void 0:i.getValue("expandRecord.fieldRenderMode"))||Pze.NORMAL}))):null};function AOt(e){var t=e.recordId,n=e.showAddNext,r=SWe(RC),i=r.getValue("render.mode")===Eze.MOBILE,o=!Gat(Qj.RECORD).canUpdate()||i,a=function(){var e=SWe(XA),t=jF(Object(l.useState)((function(){return e.getVisibleRecordIdsInActiveView()})),2),n=t[0];return t[1],{ids:n}}(),u=a.ids,c=Eot(),s=Object(l.useMemo)((function(){return t||(null==c?void 0:c.recordId)}),[null==c?void 0:c.recordId,t]),d=jF(Object(l.useState)(s),2),f=d[0],h=d[1],p=Nxt(f),v=p.isInRefresh,g=p.refreshDesc,m=jF(Object(l.useState)(null),2),y=m[0],b=m[1],w=Zat(),_=Object(l.useMemo)((function(){var e=u[0];return f===e}),[f,u]),x=Qat(f).title,k=Object(l.useMemo)((function(){var e=u[u.length-1];return f===e}),[f,u]),C=SWe(Lj),S=function(e){if(u){var t=null!==y?y:f,n=null,r=u.findIndex((function(e){return e===t}));"up"!==e||_?"down"!==e||k||(null!==y?r=u.findIndex((function(e){return e===y})):r++,n=u[r]):(r--,n=u[r]),n&&(h(n),b(null))}},O=function(){S("down")},E=x$e(aO(QC.mark((function e(){var t,n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==C?void 0:C.execCommand("addEmptyRecord");case 2:n=e.sent,r=null==n?void 0:n.result,i=null==(t=null==r?void 0:r[0])?void 0:t.uuid,h(i);case 6:case"end":return e.stop()}}),e)}))));return{showAddNext:n,isReadonly:o,layoutMode:null==r?void 0:r.getValue("expandRecord.fieldLayoutMode"),title:x,fields:OC(w,(function(e){return e.get("field")})),disableUp:_,disableDown:k,rowId:f,isInRefresh:v,removeRecord:function(){null==C||C.execCommand("removeRecords",{recordIds:[f]}),O()},refreshDesc:g,onShowNextRecord:O,onShowPrevRecord:function(){S("up")},onAddNextRecord:E}}var jOt=function(){var e=SWe(z9e),t=Object(l.useCallback)((function(t){e.open("addOrUpdateField",{position:{origin:t.currentTarget,placement:"bottom"}})}),[]);return u.a.createElement("div",{id:"lark-table-expand-record-add-column",className:"add-column-button",onClick:t},u.a.createElement(X$e,{type:"Add"}),u.a.createElement("div",{className:"title"},wx("新增字段")))},DOt=function(e){var t=e.focus,n=void 0!==t&&t,r=e.children,i=e.className,o=Object(l.useRef)(null);return Object(l.useLayoutEffect)((function(){if(n&&o.current){o.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});var e=o.current.querySelector("input")||o.current.querySelector("textarea");setTimeout((function(){var t=null==e?void 0:e.value.length;t&&(null==e||e.setSelectionRange(t,t)),null==e||e.focus()}),300)}}),[n]),u.a.createElement("div",{className:i,ref:o},r)},TOt=function(e){var t=e.desc;return u.a.createElement("div",{className:"lakex-table-expand-record-refresh-tooltip"},u.a.createElement(A.a,{message:null==t?void 0:t.text,type:"warning",showIcon:!0,closable:!0}))},FOt=function(e){var t=e.mode,n=e.initialState,r=SWe(z9e),i=SWe(kOt),o=AOt({recordId:(null==n?void 0:n.recordId)||"",showAddNext:!!(null==n?void 0:n.showAddNext)}),a=o.showAddNext,c=o.isReadonly,s=o.title,d=o.layoutMode,f=o.rowId,h=o.fields,v=o.disableUp,g=o.disableDown,m=o.isInRefresh,y=o.refreshDesc,b=o.removeRecord,w=o.onShowNextRecord,_=o.onShowPrevRecord,x=o.onAddNextRecord,k=jF(Object(l.useState)(!1),2),C=k[0],S=k[1],O=SWe(YHe),E=jF(Object(l.useState)(t===V9e.MODAL?"calc(100vh - 200px)":void 0),2),I=E[0],P=E[1],M=Object(l.useRef)(null),R=(null==n?void 0:n.showAddNext)||t!==V9e.DRAWER;k$e("⌘+shift+,",(function(){_()})),k$e("⌘+shift+.",(function(){w()}));var A=function(){r.close("expandRecord")};P$e((function(){if(M.current){if(t===V9e.DRAWER)return;var e=M.current.getBoundingClientRect();P(e.height)}}),[R]);var j=i.getProviders(),D=I&&"number"==typeof I?"".concat(I,"px"):I;return u.a.createElement("div",{key:f,className:"lakex-expand-record lakex-table-expand-record lakex-table-input lakex-ui-modal-mode-".concat(t," lakex-table-input lakex-table-expand-record-layout-").concat(d," ")},m&&u.a.createElement(TOt,{desc:y}),u.a.createElement("div",{className:"lakex-table-expand-record-head"},u.a.createElement("div",{className:"lakex-table-expand-record-head-action"},u.a.createElement("h1",{className:"lakex-table-expand-record-title"},s||u.a.createElement("span",{className:"lakex-table-expand-record-empty-title"},wx("未命名记录"))),u.a.createElement("div",{className:"lakex-table-expand-record-head-aciton-wrap"},u.a.createElement(j4e,{placement:"top",title:u.a.createElement("span",null,wx("复制链接"))},u.a.createElement("span",{className:"lakex-table-expand-record-more-action",onClick:function(e){e.stopPropagation();var t=null==O?void 0:O.getOpenLink("record",f);t&&(En()(t),p.b.success({content:wx("复制成功"),style:{zIndex:1050}}))}},u.a.createElement(X$e,{type:"Addlink",size:14}))),u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement("span",{className:"lakex-table-expand-record-direction"},u.a.createElement(j4e,{placement:"top",title:u.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},wx("上一条记录"),u.a.createElement("br",null),i$e.adapterHotKey("⌘+shift+,"))},u.a.createElement(aXe,{className:"lakex-table-expand-record-up",disabled:v,onClick:_,type:"text"},u.a.createElement(X$e,{type:"ArrowUp",size:16}))),u.a.createElement(j4e,{placement:"top",title:u.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},wx("下一条记录"),u.a.createElement("br",null),i$e.adapterHotKey("⌘+shift+."))},u.a.createElement(aXe,{className:"lakex-table-expand-record-down",disabled:g,onClick:w,type:"text"},u.a.createElement(X$e,{type:"ArrowDown",size:16})))),!c&&u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement(H$e,{overlayClassName:"lakex-table-expand-record-more",visible:C,content:u.a.createElement(L$e,{onClick:function(e){b(),S(!1),r.close("expandRecord")}},u.a.createElement(L$e.Item,{key:"delete"},u.a.createElement("span",{className:"lakex-table-expand-record-more-list"},u.a.createElement(X$e,{type:"Delete",size:14}),wx("删除本条记录")))),trigger:"click",placement:"bottomLeft",onVisibleChange:function(e){S(e)}},u.a.createElement(aXe,{className:"lakex-table-expand-record-more-btn",type:"text"},u.a.createElement(X$e,{type:"MoreHorizontal",size:14})))),u.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),u.a.createElement(j4e,{placement:"top",title:wx("关闭弹窗 (ESC)")},u.a.createElement(X$e,{type:"RowCollpse",size:16,onClick:A}))))),u.a.createElement("div",{ref:M,className:"lakex-table-expand-record-form lakex-table-expand-record-form-scroller",style:{height:D}},null==h?void 0:h.map((function(e,t){var r="".concat(f,"-").concat(null==e?void 0:e.get("uuid")),i=!!(null==n?void 0:n.isFocus)&&(n.fieldId?n.fieldId===(null==e?void 0:e.get("uuid")):0===t);return u.a.createElement(DOt,{focus:i,className:"lakex-table-expand-record-form-item",key:r},u.a.createElement(ROt,{recordId:f,field:e,isReadonly:c}))})),!c&&u.a.createElement(jOt,null),j.map((function(e){var t=e.RenderComponent;return u.a.createElement(t,{key:f,recordId:f,isReadonly:c,isNewRecord:null==n?void 0:n.isNewRecord})}))),!c&&R&&u.a.createElement("div",{className:"lakex-table-expand-record-operation-button"},u.a.createElement("div",{className:"create-row-footer"},a&&u.a.createElement(aXe,{onClick:x},wx("添加下一个")),u.a.createElement(aXe,{onClick:A},wx("完成")))))},NOt=Object.defineProperty,LOt=Object.getOwnPropertyDescriptor,BOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?LOt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&NOt(t,n,o),o},VOt=function(){return ox((function e(){var t=this;rx(this,e),this._toDestroyCollection=new KC,this._handleExpandRecord=function(e){var n=e.initialState.recordId;t._openExpandRecord({recordId:n}),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t=this;if(this._expandRecordRegistry.init(),this._toDestroyCollection.push(this._renderService.onClickRecord((function(e){var n=e.recordId,r=e.isNewRecord;t.currentViewType!==WO.FORM&&(t._modalService.close("viewerGridCellEditor"),t._openExpandRecord({recordId:n,isNewRecord:r,isFocus:!0}))}))),this._selectionService){var n=null==(e=this._selectionService)?void 0:e.onChange((function(e){var n,r=e.selection,i=t._selectionService.getRecordId(r);if(i&&t._modalService.isModalVisible("expandRecord")){if(null==(n=t._modalService.getModalProps("expandRecord").initialState)?void 0:n.isNewRecord)return;t._openExpandRecord({recordId:i})}}));this._toDestroyCollection.push(n)}var r=this._modalService.onBeforeClose((function(e){"expandRecord"===e.modalId&&t._renderService.emitViewWidthChange("100%")}));this._toDestroyCollection.push(r)}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"_getMode",value:function(){var e;return(null==(e=this._configuration.getValue("expandRecord.modalDrawerModeViews"))?void 0:e.includes(this.currentViewType))?V9e.DRAWER:V9e.MODAL}},{key:"_openExpandRecord",value:function(e){var t=this._getMode(),n=this._modalService.isModalVisible("expandRecord");this._modalService.open("expandRecord",{key:e.recordId,mode:t,hasMask:t!==V9e.DRAWER,maskSkipElements:t===V9e.DRAWER?[".lakex-table-workbench-toolbar-main-section",".lakex-viewer-grid-header",".lakex-viewer-grid-content tbody",".lakex-viewer-kanban",".lakex-viewer-calendar",".lakex-viewer-card"]:[],initialState:{recordId:e.recordId,fieldId:e.fieldId,isNewRecord:e.isNewRecord,isFocus:e.isFocus}}),n||this._emitViewWidthChange(e.recordId)}},{key:"_emitViewWidthChange",value:function(e){var t=this;if(this._getMode()===V9e.DRAWER){var n=this._workbenchService.getContainerEl().clientWidth,r=this._modalService.getWidth(),i=Math.max(n-r,520);this._renderService.emitViewWidthChange(i),e&&this.currentViewType===WO.CARD&&setTimeout((function(){var n;null==(n=t._selectionService)||n.moveToRecord(e)}),300)}}},{key:"registerModal",value:function(e){var t=this;e.registerItem({id:"expandRecord",hasMask:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},hasAnimation:!0,RenderComponent:FOt,onResize:function(){t._emitViewWidthChange()}})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"expandRecord",hotkey:"space",name:"行展开",enableOnInput:!1,isEnable:function(){if(t._configuration.getValue("expandRecord.hotkey.disable"))return!1;var e=t.currentViewType===WO.GRID;return t._hasSelection()&&e},onHotKey:function(e){var n,r;e.preventDefault(),t._modalService.close("viewerGridCellEditor");var i=null==(n=t._selectionService)?void 0:n.getSelection();if(i){var o=null==(r=t._selectionService)?void 0:r.getAnchorPosition(i);o&&t._openExpandRecord({fieldId:o.fieldId,recordId:o.recordId,isFocus:!0})}}})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"expandRecord",name:function(){return t.currentViewType===WO.GRID?wx("展开行"):t.currentViewType===WO.CALENDAR?wx("展开详情"):wx("展开记录")},icon:"RowExpand",hotkey:i$e.adapterHotKey("Space"),visible:function(e){var t=e.from;return t===Oat.CELL||t===Oat.CARD_RECORD||t===Oat.KANBAN_RECORD||t===Oat.CALENDAR_RECORD},onClick:this._handleExpandRecord})}}],[{key:"pluginModule",value:function(){return ch().contribution(gOt).register(kOt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"expandRecord",type:"object",title:"行展开",properties:{fieldRenderMode:{type:"string",description:"字段渲染模式",enum:Object.values(Pze)},fieldLayoutMode:{type:"string",description:"字段排版模式",enum:Object.values(mOt)},modalDrawerModeViews:{type:"array",description:"使用侧边栏打开的视图列表"},hotkey:{type:"object",description:"快捷键",properties:{disable:{type:"boolean",description:"禁用快捷键"}}}}}),e.registerDefaultValue({"expandRecord.fieldRenderMode":Pze.LITE,"expandRecord.fieldLayoutMode":mOt.LITE,"expandRecord.hotkey.disable":!1,"expandRecord.modalDrawerModeViews":[WO.GRID,WO.CARD,WO.KANBAN,WO.CALENDAR]})}}])}();VOt.pluginName="workbench-expand-record",BOt([Yf(Xze)],VOt.prototype,"_renderService",2),BOt([Yf(W7e)],VOt.prototype,"_workbenchService",2),BOt([Yf(XA)],VOt.prototype,"_readService",2),BOt([Yf(hD)],VOt.prototype,"_abilityService",2),BOt([Yf(z9e)],VOt.prototype,"_modalService",2),BOt([Yf(RC)],VOt.prototype,"_configuration",2),BOt([Yf(yot),If()],VOt.prototype,"_selectionService",2),BOt([Yf(kOt)],VOt.prototype,"_expandRecordRegistry",2),VOt=BOt([Gf({contrib:[Z8e,H9e,jot,gOt,rmt]})],VOt);var zOt=["YYYY-MM-DD HH:mm","YYYY-MM-DD","YYYY/MM/DD HH:mm","YYYY/MM/DD","MM-DD","HH:mm","YYYY","YYYY/MM","MM/DD/YYYY","DD/MM/YYYY"],HOt=function(e){var t,n=e.originField,r=e.fieldType,i=e.onChange,o=SWe(PS),l=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body;if(YO.isDateLike(r)){var u=YO.isDate(r)?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",c=YO.isDate(r)?zOt:["YYYY-MM-DD HH:mm:ss"].concat(Q_(zOt));return React.createElement(React.Fragment,null,React.createElement("p",{className:"lakex-table-col-title"},wx("日期格式")),React.createElement(n1e,{className:"lakex-table-field-date-config",defaultValue:(null==(t=null==n?void 0:n.get("config"))?void 0:t.date_format)||u,dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:React.createElement(X$e,{type:"ArrowDown",size:12}),onChange:function(e){var t=(null==n?void 0:n.toJSON())||{};t.config={date_format:e},null==i||i(t)},getPopupContainer:function(){return l}},c.map((function(e){return React.createElement(n1e.Option,{value:e,key:e},React.createElement("div",{className:"lakex-table-date-config-format"},a()().format(e)))}))))}return null},WOt=Object.defineProperty,UOt=Object.getOwnPropertyDescriptor,GOt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return HOt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function YOt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YOt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YOt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}GOt.pluginName="workbench-field-date",GOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?UOt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WOt(t,n,o),o}([Gf({contrib:[Z8e,VSt]})],GOt);var qOt=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,i=t.fieldId,o=SWe(z9e),a=SWe(Lj),l=SWe(JP).fieldUriModel,c=elt(r,i),s={style:{width:520},defaultValue:null==c?void 0:c.value,onChange:function(e){null==a||a.execCommand("setCell",$Ot($Ot({},c),{},{value:e}))},onOrderChange:function(e){var t,o,u=e.targetUid,c=e.sourceUid,s=null==(t=l.findOne({uid:u}))?void 0:t.get("uuid"),d=null==(o=l.findOne({uid:c}))?void 0:o.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:i,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};return u.a.createElement("div",{className:"lakex-table-cell-file-uploader"},u.a.createElement("div",{className:"file-uploader-header"},u.a.createElement("h4",{className:"file-uploader-header-title"},wx("附件列表")),u.a.createElement(X$e,{type:"Close",className:"file-uploader-close",onClick:function(e){null==o||o.close("fieldFileEditor")}})),u.a.createElement(eut,$Ot({},s)))},KOt=Object.defineProperty,XOt=Object.getOwnPropertyDescriptor,JOt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerModal",value:function(e){e.registerItem({id:"fieldFileEditor",hasMask:!1,hasAnimation:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},RenderComponent:qOt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function ZOt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QOt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZOt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZOt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}JOt.pluginName="workbench-field-file",JOt=function(e,t,n,r){for(var i,o=r>1?void 0:r?XOt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&KOt(t,n,o),o}([Gf({contrib:[Z8e,H9e]})],JOt);var eEt=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,i=t.fieldId,o=SWe(z9e),a=SWe(Lj),l=SWe(JP).fieldUriModel,c=elt(r,i),s={style:{width:520},defaultValue:null==c?void 0:c.value,onChange:function(e){null==a||a.execCommand("setCell",QOt(QOt({},c),{},{value:e}))},onOrderChange:function(e){var t,o,u=e.targetUid,c=e.sourceUid,s=null==(t=l.findOne({uid:u}))?void 0:t.get("uuid"),d=null==(o=l.findOne({uid:c}))?void 0:o.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:i,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};return u.a.createElement("div",{className:"lakex-table-cell-file-uploader"},u.a.createElement("div",{className:"file-uploader-header"},u.a.createElement("h4",{className:"file-uploader-header-title"},wx("图片列表")),u.a.createElement(X$e,{type:"Close",className:"file-uploader-close",onClick:function(e){null==o||o.close("fieldImageEditor")}})),u.a.createElement(mut,QOt({},s)))},tEt=Object.defineProperty,nEt=Object.getOwnPropertyDescriptor,rEt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerModal",value:function(e){e.registerItem({id:"fieldImageEditor",hasAnimation:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},RenderComponent:eEt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();rEt.pluginName="workbench-field-image",rEt=function(e,t,n,r){for(var i,o=r>1?void 0:r?nEt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tEt(t,n,o),o}([Gf({contrib:[Z8e,H9e]})],rEt);var iEt=function(e){var t,n=e.originField,r=e.fieldType,i=e.onChange,o=SWe(PS),a=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body;if(r===xO.NUMBER){var l=[{label:wx("通用格式"),options:XB.map((function(e){return{label:JB[e],value:e}}))},{label:wx("货币格式"),options:ZB.map((function(e){return{label:QB[e],value:e}}))}];return u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"lakex-table-col-title"},wx("数字格式")),u.a.createElement(n1e,{className:"lakex-table-field-number-config",defaultValue:(null==(t=null==n?void 0:n.get("config"))?void 0:t.format)||"number",dropdownClassName:"lakex-table-filter-field-select-dropdown",showSearch:!0,filterOption:function(e,t){var n,r,i=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(i)||(null!==(r=null==t?void 0:t.value)&&void 0!==r?r:"").toLowerCase().includes(i)},suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),onChange:function(e){var t=(null==n?void 0:n.toJSON())||{};t.config={format:e},null==i||i(t)},getPopupContainer:function(){return a},options:l}))}return null},oEt=Object.defineProperty,aEt=Object.getOwnPropertyDescriptor,lEt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return iEt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function uEt(e){var t=I$e().themeService,n=jF(Object(l.useState)(e.color),2),r=n[0],i=n[1];P$e((function(){i(e.color)}),[e.color]);var o=function(e){return ndt.map((function(t){return{colorToken:t,colorValue:t.split(",").map((function(t){return e.toColor(t)}))}}))}(t),a=function(n){return u.a.createElement("span",{className:"lakex-table-progress-color-selector-item",onClick:function(){e.onClick(n.colorToken),i(n.colorToken)}},u.a.createElement("span",{style:{background:idt(n.colorValue)}},n.colorToken===r&&u.a.createElement("svg",{style:{fill:null==t?void 0:t.toColor("white")},viewBox:"0 0 18 18"},u.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};return u.a.createElement("span",{className:"lakex-table-progress-color-selector"},e.chunk?function(e,t,n){t=void 0===t?1:Wa(zr(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Array(Ha(r/t));i<r;)a[o++]=qo(e,i,i+=t);return a}(o,e.chunk).map((function(e,t){return u.a.createElement("div",{key:t,className:"lakex-table-progress-color-selector-chunk"},e.map((function(e){return a(e)})))})):o.map((function(e){return a(e)})))}lEt.pluginName="workbench-field-number",lEt=function(e,t,n,r){for(var i,o=r>1?void 0:r?aEt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oEt(t,n,o),o}([Gf({contrib:[Z8e,VSt]})],lEt);var cEt=function(e){var t=e.originField,n=e.fieldType,r=e.onChange;if(n!==xO.PROGRESS)return null;var i=null==t?void 0:t.get("color");return"string"==typeof i&&i||(i="blue-6",null==r||r({color:i})),React.createElement("div",{className:"lakex-table-field-progress-config"},React.createElement("p",{className:"lakex-table-field-progress-config-title"},wx("颜色设置")),React.createElement(uEt,{chunk:7,color:i,onClick:function(e){return null==r?void 0:r({color:e})}}))},sEt=Object.defineProperty,dEt=Object.getOwnPropertyDescriptor,fEt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return cEt}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function hEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pEt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fEt.pluginName="workbench-field-progress",fEt=function(e,t,n,r){for(var i,o=r>1?void 0:r?dEt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&sEt(t,n,o),o}([Gf({contrib:[Z8e,VSt]})],fEt);var vEt=function(){var e=SWe(Lj),t=SWe(XA),n=t.getActiveView().get("uuid");return{filter:t.getViewFilter(n),onPacketCreate:function(t,r,i){r&&(t.parent_uuid=r),t.view_uuid=n,null==e||e.execCommand("createFilterPacket",{packet:t,thingId:i})},onPacketRemove:function(t,r){null==e||e.execCommand("removeFilterPacket",{viewId:n,packetId:t,isAll:r})},onPacketChange:function(t,r){null==e||e.execCommand("updateFilterPacket",pEt(pEt({},r),{},{view_uuid:n,uuid:t}))},onThingCreate:function(t){null==e||e.execCommand("createFilterThing",t)},onThingChange:function(t,r){null==e||e.execCommand("updateFilterThing",pEt(pEt({},r),{},{uuid:t,view_uuid:n}))},onThingRemove:function(t){null==e||e.execCommand("removeFilterThing",t)}}},gEt=function(e){return e.showCloseIcon||e.title?u.a.createElement("div",{className:"lakex-table-ui-popup-header",onClick:e.onClose},e.title&&u.a.createElement("h1",{className:"lakex-table-ui-popup-header-title"},e.title),e.showCloseIcon&&u.a.createElement(X$e,{className:"lakex-table-ui-popup-close-icon",type:"Close",size:18})):null},mEt=function(e){var t=e.title,n=e.showCloseIcon,r=e.onClose,i=e.children;return u.a.createElement("div",{className:F()("lakex-table-ui-popup")},u.a.createElement(gEt,{title:t,onClose:r,showCloseIcon:!!n}),u.a.createElement("div",{className:F()("lakex-table-ui-popup-content")},i))};function yEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bEt=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:e.maxWidth},e.style&&e.style);return u.a.createElement("span",{style:t,className:F()("lakex-table-ui-text-ellipsis",e.className)},e.children)};function wEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xEt=function(e){return u.a.createElement(j.a,_Et(_Et({},e),{},{className:F()("lakex-table-h5-switch",e.className)}))};function kEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var CEt=function(e){var t=e.options,n=e.className,r=e.style,i=e.onChange,o=e.defaultValue,a=jF(Object(l.useState)(o),2),c=a[0],s=a[1],d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r&&r);Array.isArray(t)&&2===t.length||console.error("options length is valid!");return u.a.createElement("div",{style:d,className:F()("lakex-table-h5-choose",n)},t.map((function(e){return u.a.createElement("div",{key:e.value,className:F()("lakex-table-h5-choose-item",c===e.value&&"active"),onClick:function(){return s((t=e).value),void i(t);var t}},u.a.createElement("span",{className:"lakex-table-h5-choose-item-desc"},e.label))})))},SEt=function(e){var t=jF(Object(l.useState)(e.list),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-switch"},n.map((function(t){return u.a.createElement("li",{className:"lakex-table-ui-item-switch",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},t.icon,u.a.createElement(bEt,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),u.a.createElement(xEt,{disabled:t.disabled,checked:t.checked,onChange:function(i){t.checked=i,e.onSwitch(t,i),r(Q_(n))}}))})))},OEt=function(e){var t=jF(Object(l.useState)(e.defaultValue),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-check"},e.list.map((function(t){var i=Array.isArray(n)?n.includes(t.key):t.key===n;return u.a.createElement("li",{className:"lakex-table-ui-item-check",key:t.key,onClick:function(){if(e.multiple){var i=Q_(n),o=i.findIndex((function(e){return e===t.key}));o>-1?i.splice(o,1):i.push(t.key),r(i),e.onCheck(e.list.filter((function(e){return i.includes(e.key)})))}else r(t.key),e.onCheck(t)}},u.a.createElement("div",{className:F()("lakex-table-ui-item-left",{"lakex-table-ui-item-danger":t.isDanger})},t.icon,u.a.createElement(bEt,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),i&&u.a.createElement(X$e,{type:"Check",size:"16"}))})))},EEt=function(e){var t=jF(Object(l.useState)(e.list),2),n=t[0],r=t[1];return u.a.createElement("ul",{className:"lakex-table-ui-list-choose"},n.map((function(t){return u.a.createElement("li",{className:"lakex-table-ui-item-choose",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},u.a.createElement(bEt,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),u.a.createElement(CEt,{defaultValue:t.defaultValue,options:t.options,onChange:function(i){t.defaultValue=i.value,e.onChoose(t,i),r(Q_(n))}}))})))},IEt=function(e){var t=jF(Object(l.useState)(e.list),2),n=t[0],r=t[1];return P$e((function(){r(e.list)}),[e.list]),u.a.createElement("ul",{className:"lakex-table-ui-list-select"},n.map((function(t){var n=t.options.find((function(e){return e.value===t.defaultValue}));return u.a.createElement("li",{className:"lakex-table-ui-item-select",key:t.key},u.a.createElement("div",{className:"lakex-table-ui-item-left"},u.a.createElement(bEt,{className:"lakex-table-ui-item-name"},t.title)),u.a.createElement("div",{className:"lakex-table-ui-item-right",onClick:function(){e.onSelect(t)}},u.a.createElement(bEt,{className:"lakex-table-ui-item-name"},(null==n?void 0:n.label)||""),u.a.createElement(X$e,{type:"ArrowRight",size:18})))})))};function PEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var MEt=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style&&e.style);return u.a.createElement("div",{className:F()("lakex-table-empty-no-data",e.className),style:t},u.a.createElement("div",{className:"intrinsic-aspect-ratio-container"},u.a.createElement("div",{className:"lakex-table-empty-no-data-inner"})),e.desc&&u.a.createElement("p",{className:"lakex-table-empty-no-data-desc"},e.desc),e.children&&e.children)},REt=function(e){var t=e.text,n=void 0===t?"":t,r=e.prefixIcon,i=void 0===r?"":r,o=e.className,a=e.style,l=void 0===a?{}:a,c=e.border,s=e.children,d=e.autoWrap;return u.a.createElement("div",{className:F()("lakex-table-select-bar",c&&"lakex-table-select-bar-has-border",d&&"lakex-table-select-bar-auto-wrap",o),onClick:e.onClick,style:l},i&&u.a.createElement("span",{className:"prefix-icon"},i),s||u.a.createElement(bEt,{className:"lakex-table-select-bar-text"},n),u.a.createElement(X$e,{type:"ArrowDown",className:"arrow-down"}))};function AEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jEt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DEt=function(e){var t=e.option,n=e.style,r=e.className,i=SWe(mN),o=!!t.color?{background:i.getRenderColor(t.color),color:i.getRenderTextColor(t.color)}:{},a=jEt(jEt({},n&&n),o);return u.a.createElement(bEt,{className:F()("lakex-table-select-tag",r),style:a},t.value)};function TEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var FEt=function(e){var t=e.mention,n=e.style,r=e.className,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n&&n);return u.a.createElement("div",{className:F()("lakex-table-mention-tag",r),style:i},u.a.createElement("img",{className:"lakex-table-mention-tag-avatar",src:t.avatar_url,alt:"avatar"}),u.a.createElement(bEt,{className:"lakex-table-mention-tag-name"},t.name))};function NEt(e){var t=e.onThingCreate,n=e.onPacketCreate,r=e.packetDeep,i=SWe(RC),o=SWe(z9e),a=i.getValue("modal.mode");return r>1?React.createElement(aXe,{className:"lakex-table-h5-filter-add",onClick:function(){return t()}},React.createElement(X$e,{type:"Add"}),wx("添加筛选条件")):React.createElement("div",null,React.createElement(aXe,{type:0===r&&"primary",className:"lakex-table-h5-filter-add",onClick:function(){return o.open("filter-field-add-selector")}},React.createElement(X$e,{type:"Add"}),wx("添加筛选条件")),React.createElement(L7e,{id:"filter-field-add-selector",mode:a,hasMask:a===V9e.DRAWER,hasAnimation:a===V9e.DRAWER,position:a===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var r=e.initialState;return React.createElement(mEt,{title:wx("请选择"),onClose:function(){return o.close("filter-field-add-selector")},showCloseIcon:!0},React.createElement(OEt,{defaultValue:r.value,list:[{key:"createThing",title:wx("添加筛选规则"),icon:React.createElement(X$e,{type:"Add",size:16})},{key:"createPacket",title:wx("添加筛选分组"),icon:React.createElement(X$e,{type:"FilterPacket",size:16})}],onCheck:function(e){"createThing"===e.key?t():"createPacket"===e.key&&n(),o.close("filter-field-add-selector")}}))}}))}var LEt=function(e){var t=e.onThingCreate,n=e.onPacketCreate;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(MEt,{desc:wx("你还未进行任何筛选"),className:"no-data"}),u.a.createElement(NEt,{onThingCreate:t,onPacketCreate:n,packetDeep:0}))};function BEt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VEt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BEt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BEt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zEt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HEt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HEt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function HEt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var WEt=Object.defineProperty,UEt=Object.getOwnPropertyDescriptor,GEt=function(e,t,n,r){for(var i,o=r>1?void 0:r?UEt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WEt(t,n,o),o},YEt=function(){return ox((function e(){rx(this,e)}),[{key:"findPacket",value:function(e,t){if(t===e.uuid)return e;if(e.filters){var n,r=zEt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("packet"===i.type){var o=this.findPacket(i,t);if(o)return o}}}catch(e){r.e(e)}finally{r.f()}}return!1}},{key:"findThing",value:function(e,t){if(e.filters){var n,r=zEt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("packet"!==i.type){if(t){if(i.uuid===t)return i;continue}return i}var o=this.findThing(i,t);if(o)return o}}catch(e){r.e(e)}finally{r.f()}}}},{key:"findField",value:function(e,t){if(e&&e.filters){var n,r=zEt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("packet"===i.type){var o=this.findThing(i,t);if(o)return o}else if(i.field_uuid===t)return i}}catch(e){r.e(e)}finally{r.f()}}}},{key:"countFields",value:function(e){var t=0,n=function(e){var r,i=zEt(e.filters);try{for(i.s();!(r=i.n()).done;){var o=r.value;"packet"===o.type?n(o):t+=1}}catch(e){i.e(e)}finally{i.f()}};return n(e),t}},{key:"buildThingByFieldId",value:function(e,t){var n=this._readService.getField(e);if(n){var r=this.getConditions(n.get("type"));return{uuid:Cx(32),view_uuid:t,field_uuid:n.get("uuid"),func:r[0].func,expected:null}}}},{key:"getConditions",value:function(e){var t=VO[e];return BO.filter((function(e){return e.type===t}))}},{key:"getDateExpected",value:function(e){return HO.filter((function(t){return!(t.matchFuncs&&!t.matchFuncs.includes(e))}))}},{key:"getMentionFieldValues",value:function(e){var t=this._readService.getFieldCells(e),n=[];return null==t||t.forEach((function(e){Array.isArray(null==e?void 0:e.value)?n=n.concat(null==e?void 0:e.value):e.value&&n.push(e.value)})),Jc(n,"uid")}},{key:"createPacket",value:function(e,t,n){var r,i=this,o=VEt({},e||{});if(o.filters||(o.filters=[]),t&&o.uuid!==t)o.filters&&o.filters.forEach((function(o,a){var l,u;if(t&&"packet"===o.type){var c=o;if(c.uuid===t){var s=Cx(),d=i._readService.getActiveViewId(),f=i._readService.getDefaultThing(d,e,s);if(r={uuid:s,type:"packet",parent_uuid:c.uuid,root_uuid:c.root_uuid||c.uuid,filters:[f],operator:AO.And},n){var h=null==(l=c.filters)?void 0:l.findIndex((function(e){return e.uuid===n}));h>-1?(r.filters=[c.filters[h]],null==(u=c.filters)||u.splice(h,1,r)):c.filters.push(r)}else c.filters.push(r);return}i.createPacket(o,t,n)}}));else{var a,l=Cx(),u=this._readService.getActiveViewId();n&&(a=this.findThing(e,n))&&this.removeThing(e,n),a||(a=this._readService.getDefaultThing(u,e,l)),r={uuid:l,type:"packet",parent_uuid:o.uuid,root_uuid:o.root_uuid||o.uuid,filters:[a],operator:AO.Or},o.filters.push(r)}return[r,o]}},{key:"removePacket",value:function(e,t,n){var r=this,i=VEt({},e||{});return e.uuid===t&&n?null:(i.filters&&i.filters.forEach((function(e,o){var a,l,u;if("packet"===e.type){var c=e;if(c.uuid===t)return void(n?null==(a=i.filters)||a.splice(o,1):(null==(l=c.filters)||l.forEach((function(e){"packet"===e.type?e.parent_uuid=i.uuid:e.packet_uuid=i.uuid})),null==(u=i.filters)||u.splice(o,1),i.filters=[].concat(Q_(i.filters),Q_(c.filters))));var s=r.removePacket(e,t);s&&(i.filters[o]=s)}})),i)}},{key:"changePacket",value:function(e,t,n){var r=this,i=VEt({},e||{});return i.uuid===t?Object.keys(n).forEach((function(e){i[e]=n[e]})):i.filters&&i.filters.forEach((function(e,i){if("packet"===e.type){var o=e;if(o.uuid===t)return void Object.keys(n).forEach((function(e){o[e]=n[e]}));r.changePacket(e,t,n)}})),i}},{key:"createThing",value:function(e,t){var n,r=null==(n=this._readService)?void 0:n.getActiveViewId(),i=this._readService.getDefaultThing(r,e,t);if(i){if(!e){var o=Cx();e={uuid:o,type:"packet",view_uuid:i.view_uuid,operator:AO.And,parent_uuid:null,root_uuid:null,filters:[],updated_at:(new Date).getTime(),created_at:(new Date).getTime()},t=o,i.packet_uuid=o}var a=VEt({},e||{});if(a.filters||(a.filters=[]),t){var l=this.findPacket(a,t);l?(l.filters||(l.filters=[]),l.filters.push(i)):null==a||a.filters.push(i)}else null==a||a.filters.push(i);return[i,a]}}},{key:"removeThing",value:function(e,t){var n,r=this,i=VEt({},e||{});return null==(n=i.filters)||n.forEach((function(e,n){var o,a,l;"packet"===e.type?(r.removeThing(e,t),0===(null==(o=e.filters)?void 0:o.length)&&(null==(a=i.filters)||a.splice(n,1))):e.uuid===t&&(null==(l=i.filters)||l.splice(n,1))})),i}},{key:"changeThing",value:function(e,t,n){var r,i=this,o=VEt({},e||{});return null==(r=o.filters)||r.forEach((function(e,r){"packet"===e.type?i.changeThing(e,t,n):e.uuid===t&&Object.keys(n).forEach((function(t){var r;"field_uuid"===t&&(e.field=null==(r=i._readService.getField(n[t]))?void 0:r.toJSON(),n.field=e.field,e.field.type===xO.CHECKBOX?(e.expected="true",n.expected="true"):(e.expected="",n.expected="")),e[t]=n[t]}))})),o}}])}();function $Et(e){var t=SWe(YEt),n=jF(Object(l.useState)(e.filter),2),r=n[0],i=n[1],o=function(n){var o,a=t.createThing(r,n);a&&(i(a[1]),null==(o=e.onThingCreate)||o.call(e,a[0],n))};return Object(l.useEffect)((function(){r||o()}),[]),{filter:r,onPacketCreate:function(n,o){var a,l,u=t.createPacket(r,n,o);u&&(i(u[1]),null==(a=e.onPacketCreate)||a.call(e,u[0],n,o),null==(l=e.onChange)||l.call(e,u[1]))},onPacketRemove:function(n,o){var a,l,u=t.removePacket(r,n,o);i(u),null==(a=e.onPacketRemove)||a.call(e,n,o),null==(l=e.onChange)||l.call(e,u)},onPacketChange:function(n,o){var a,l,u=t.changePacket(r,n,o);u&&(i(u),null==(a=e.onPacketChange)||a.call(e,n,o),null==(l=e.onChange)||l.call(e,u))},onThingCreate:o,onThingRemove:function(n){var o,a,l=t.removeThing(r,n);i(l),null==(o=e.onThingRemove)||o.call(e,n),null==(a=e.onChange)||a.call(e,l)},onThingChange:function(n,o){var a,l,u=t.changeThing(r,n,o);i(u),null==(a=e.onThingChange)||a.call(e,n,o),null==(l=e.onChange)||l.call(e,u)}}}GEt([Yf(XA)],YEt.prototype,"_readService",2),YEt=GEt([Gf()],YEt);var qEt=function(e){var t=SWe(XA),n=t.getActiveView(),r=kC(t.getViewFields(null==n?void 0:n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||YO.isFilter(null==(r=t.get("field"))?void 0:r.get("type"))}));return{filterFields:r}},KEt=function(e){var t=e.thing,n=e.className,r=void 0===n?"":n,i=e.defaultValue,o=void 0===i?"":i,a=e.onFieldChange,c=void 0===a?function(){}:a,s=qEt({defaultValue:o}).filterFields,d=SWe(RC),f=SWe(XA),h=SWe(z9e),p=d.getValue("modal.mode"),v=SWe(iHe),g=Object(l.useCallback)((function(){h.close("filter-field-select")}),[]);if(!t||!s)return null;var m=f.getField(t.field_uuid)||s.get(0).get("field");if(!m)return null;var y=v.getFieldIcon(m.get("type"));return u.a.createElement("div",{className:r},u.a.createElement(REt,{prefixIcon:y,className:"lakex-table-h5-filter-col",text:m.get("name"),onClick:function(){h.open("filter-field-select",{initialState:{value:o}})}}),u.a.createElement(L7e,{id:"filter-field-select",mode:p,hasMask:p===V9e.DRAWER,hasAnimation:p===V9e.DRAWER,position:p===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:g,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:t.value,list:OC(s,(function(e){var t=e.get("field");if(!t)return null;var n=v.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){var t,n=xC(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e.key}));c(null==(t=null==n?void 0:n.get("field"))?void 0:t.toJSON()),g()}}))}}))},XEt=function(e){var t=e.thing,n=e.onFuncChange,r=SWe(YEt),i=SWe(XA),o=null==i?void 0:i.getField(t.field_uuid),a=null==r?void 0:r.getConditions(null==o?void 0:o.get("type"));return(null==a?void 0:a.some((function(e){return e.func===t.func})))||n(null==a?void 0:a[0].func),{conditions:a}},JEt=function(e){var t,n=e.thing,r=e.className,i=e.onFuncChange,o=void 0===i?function(){}:i,a=XEt({thing:n,onFuncChange:o}).conditions,c=SWe(RC),s=SWe(z9e),d=c.getValue("modal.mode"),f=Object(l.useCallback)((function(){s.close("filter-func-select")}),[]),h=n.func||(null==a?void 0:a[0].func),p=(null==(t=null==a?void 0:a.find((function(e){return e.func===h})))?void 0:t.text)||(null==a?void 0:a[0].text);return u.a.createElement("div",{className:r},u.a.createElement(REt,{className:"lakex-table-h5-filter-func",text:p,onClick:function(){s.open("filter-func-select",{initialState:{value:h}})}}),u.a.createElement(L7e,{id:"filter-func-select",mode:d,hasMask:d===V9e.DRAWER,hasAnimation:d===V9e.DRAWER,position:d===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:f,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:t.value,list:a.map((function(e){return{key:e.func,title:e.text}})),onCheck:function(e){o(e.key),f()}}))}}))},ZEt=function(e){var t=e.thing,n=SWe(XA),r=SWe(YEt);return{getDateExpected:function(e){return r.getDateExpected(e)},getMentionValues:function(){return r.getMentionFieldValues(t.field_uuid)},field:n.getField(t.field_uuid)}},QEt=function(e){var t,n,r=e.thing,i=e.onExpectedChange,o=void 0===i?function(){}:i,l=ZEt({thing:r}),c=l.getMentionValues,s=l.getDateExpected,d=l.field,f=SWe(RC),h=SWe(z9e),p=SWe(XA),v=f.getValue("modal.mode"),g=d.get("type");if(zO.includes(r.func))return null;if(g===xO.SELECT||g===xO.MULTI_SELECT){var m=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(m=null==r?void 0:r.expected.split(","));var y=p.getFieldOptions(d.get("uuid")),b=kC(y,(function(e){return m.includes(e.get("uuid"))})),w=OC(b,(function(e){return e.get("uuid")}));n=u.a.createElement(u.a.Fragment,null,u.a.createElement(REt,{className:"lakex-table-h5-filter-col",text:OC(b,(function(e){return e.get("name")})).join(", "),onClick:function(){h.open("filter-expected-select",{initialState:{value:w}})}},(!w||!w.length)&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},wx("请选择"))),u.a.createElement(L7e,{id:"filter-expected-select",mode:v,hasMask:v===V9e.DRAWER,hasAnimation:v===V9e.DRAWER,position:v===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){h.close("filter-expected-select")},showCloseIcon:!0},u.a.createElement(OEt,{multiple:g===xO.MULTI_SELECT,defaultValue:null==t?void 0:t.value,list:OC(y,(function(e){return{key:e.get("uuid"),title:u.a.createElement(DEt,{option:{color:e.get("color"),value:e.get("name")}})}})),onCheck:function(e){if(null!=e&&""!==e&&0!==e.length){if("select"===g)return o(e.key),void h.close("filter-expected-select");var t=[];y.forEach((function(n){e.some((function(e){return e.key===n.uuid}))&&t.push(n.uuid)})),o(t)}else o("")}}))}}))}else if("checkbox"===g)n=u.a.createElement("span",{className:"lakex-table-h5-filter-checkbox"},u.a.createElement(kXe,{defaultChecked:!0===Boolean(r.expected),onChange:function(e){o(e.target.checked?"true":"false")}}));else if(YO.isMentionLike(g)){var _=c()||[],x={};null==_||_.forEach((function(e){x[e.uid]=e}));var k=(null==r?void 0:r.expected)?r.expected.split(","):[];n=u.a.createElement(u.a.Fragment,null,u.a.createElement(REt,{className:"lakex-table-h5-filter-col",text:k.map((function(e){return x[e]})).map((function(e){return e.name})).join(", "),onClick:function(){h.open("filter-expected-mention",{initialState:{value:k}})}},(!k||!k.length)&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},wx("请选择"))),u.a.createElement(L7e,{id:"filter-expected-mention",mode:v,hasMask:v===V9e.DRAWER,hasAnimation:v===V9e.DRAWER,position:v===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){h.close("filter-expected-mention")},showCloseIcon:!0},_.length?u.a.createElement(OEt,{multiple:!0,defaultValue:null==t?void 0:t.value,list:_.map((function(e,t){return{key:String(e.uid),title:u.a.createElement(FEt,{mention:{avatar_url:e.icon,name:e.name}})}})),onCheck:function(e){h.close("filter-expected-mention"),null!=e&&""!==e&&0!==e.length?o(0===e.length?"":e.map((function(e){return e.key})).join(",")):o("")}}):u.a.createElement(MEt,{desc:wx("暂无人员")}))}}))}else if(YO.isDateLike(g)){var C=!r.expected||uC(r.expected),S=C?"custom":r.expected;r.expected||(S="custom"),n=u.a.createElement(u.a.Fragment,null,u.a.createElement(REt,{className:"lakex-table-h5-filter-col",text:null==(t=HO.find((function(e){return e.name===S})))?void 0:t.text,onClick:function(){h.open("filter-expected-date",{initialState:{value:S}})}},!S&&u.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},wx("请选择"))),u.a.createElement(L7e,{id:"filter-expected-date",mode:v,hasMask:v===V9e.DRAWER,hasAnimation:v===V9e.DRAWER,position:v===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){h.close("filter-expected-mention")},showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:null==t?void 0:t.value,list:s(r.func).map((function(e,t){return{key:e.name,title:e.text}})),onCheck:function(e){"custom"===e.key?o(""):o(e.key),h.close("filter-expected-date")}}))}}),C&&u.a.createElement("div",{className:"lakex-table-h5-select-expected-datepicker"},u.a.createElement(X0e,{defaultValue:filter.expected?a()(filter.expected):null,autoFocus:focus,onChange:function(){var e;o(null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=u.a.createElement(LYe,{className:"lakex-table-h5-filter-expected-input",placeholder:wx("请输入"),defaultValue:r.expected,onChange:function(e){o(e.target.value)}});return u.a.createElement("div",{className:"lakex-table-h5-filter-expected"},n)},eIt=function(e){var t=e.thing,n=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-h5-filter-thing"},u.a.createElement("div",{className:"lakex-table-h5-filter-thing-content-head"},u.a.createElement(KEt,{thing:t,className:"lakex-table-h5-filter-thing-field",defaultValue:t.field_uuid,onFieldChange:function(e){null==n||n(t.uuid,{field_uuid:null==e?void 0:e.uuid})}}),u.a.createElement(JEt,{thing:t,className:"lakex-table-h5-filter-thing-func",onFuncChange:rc((function(e){null==n||n(t.uuid,{func:e})}),200)})),u.a.createElement("div",null,u.a.createElement(QEt,{thing:t,onExpectedChange:rc((function(e){null==n||n(t.uuid,{expected:e})}),200)})))},tIt=function(e){var t,n=e.packet,r=e.itemIndex,i=e.onOperatorChange,o=void 0===i?function(){}:i,a=SWe(RC),l=SWe(z9e),c=a.getValue("modal.mode");return t=0===r?u.a.createElement("div",{className:"lakex-table-h5-filter-where"},wx("当")):1===r?u.a.createElement(u.a.Fragment,null,u.a.createElement(REt,{className:"lakex-table-h5-filter-col",text:n.operator===AO.And?wx("与"):wx("或"),onClick:function(){l.open("filter-select-operator",{initialState:{value:n.operator}})}}),u.a.createElement(L7e,{id:"filter-select-operator",mode:c,hasMask:c===V9e.DRAWER,hasAnimation:c===V9e.DRAWER,position:c===V9e.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){return l.close("filter-select-operator")},showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:t.value,list:[{key:AO.And,title:wx("与")},{key:AO.Or,title:wx("或")}],onCheck:function(e){o(e.key),l.close("filter-select-operator")}}))}})):u.a.createElement("div",{className:"lakex-table-filter-operator-text-h5"},n.operator===AO.And?wx("与"):wx("或")),u.a.createElement("div",{className:"lakex-table-h5-filter-where"},t)};function nIt(e){var t=SWe(RC),n=SWe(z9e),r=t.getValue("modal.mode"),i=!e.thing,o=[];return i?o=[{key:"removePacketAndThing",isDanger:!0,title:wx("删除分组"),icon:React.createElement(X$e,{type:"Delete",size:16})},{key:"removePacket",title:wx("展开分组"),icon:React.createElement(X$e,{type:"FilterPacketExpand",size:16})}]:(o=[{key:"removeThing",title:wx("删除规则"),isDanger:!0,icon:React.createElement(X$e,{type:"Delete",size:16})}],e.packetDeep<2&&o.push({key:"createPacket",title:wx("创建分组"),icon:React.createElement(X$e,{type:"FilterPacket",size:16})})),React.createElement("div",{className:F()("lakex-table-filter-setting-h5",e.className)},React.createElement(X$e,{type:"MoreHorizontal",size:18,onClick:function(){n.open("filter-field-setting-selector")}}),React.createElement(L7e,{id:"filter-field-setting-selector",mode:r,hasMask:r===V9e.DRAWER,hasAnimation:r===V9e.DRAWER,position:r===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(t){var r=t.initialState;return React.createElement(mEt,{title:wx("请选择"),onClose:function(){return n.close("filter-field-setting-selector")},showCloseIcon:!0},React.createElement(OEt,{defaultValue:r.value,list:o,onCheck:function(t){var r,i,o,a;"removeThing"===t.key?null==(r=e.onThingRemove)||r.call(e,e.thing.uuid):"removePacket"===t.key?null==(i=e.onPacketRemove)||i.call(e,e.packet.uuid):"removePacketAndThing"===t.key?null==(o=e.onPacketRemove)||o.call(e,e.packet.uuid,!0):"createPacket"===t.key&&(null==(a=e.onPacketCreate)||a.call(e,e.thing.packet_uuid,e.thing.uuid)),n.close("filter-field-setting-selector")}}))}}))}var rIt=function(e){var t=e.filter,n=e.packetDeep,r=void 0===n?0:n,i=e.onPacketCreate,o=e.onPacketRemove,a=e.onPacketChange,l=e.onThingCreate,c=e.onThingRemove,s=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-filter-packet-h5 lakex-table-filter-packet-h5-".concat(r)},t.filters.map((function(e,n){var d,f=e.operator;return d=f?u.a.createElement(rIt,{packetDeep:r+1,filter:e,onPacketCreate:i,onPacketRemove:o,onPacketChange:a,onThingCreate:l,onThingRemove:c,onThingChange:s}):u.a.createElement(eIt,{key:e.uuid,thing:e,onThingChange:s}),u.a.createElement("div",{className:"lakex-table-filter-packet-grid-h5"},u.a.createElement(tIt,{itemIndex:n,packet:t,onOperatorChange:function(e){null==a||a(t.uuid,{operator:e})}}),u.a.createElement("div",{className:"lakex-table-h5-filter-packet-content"},u.a.createElement("div",{className:"lakex-table-h5-filter-packet-content-left"},d),u.a.createElement(nIt,{className:"lakex-table-h5-filter-packet-content-right",onThingRemove:c,onPacketRemove:o,onPacketCreate:i,thing:f?void 0:e,packet:f?e:void 0,packetDeep:r})))})),u.a.createElement(NEt,{onThingCreate:function(){return null==l?void 0:l(t.uuid)},onPacketCreate:function(){return null==i?void 0:i(t.uuid)},packetDeep:r}))},iIt=function(e){var t=e.filter,n=e.onPacketCreate,r=e.onPacketRemove,i=e.onPacketChange,o=e.onThingCreate,a=e.onThingRemove,l=e.onThingChange;return u.a.createElement(rIt,{filter:t,onPacketCreate:n,onPacketRemove:r,onPacketChange:i,onThingCreate:o,onThingRemove:a,onThingChange:l})},oIt=function(e){var t=$Et(e),n=t.filter,r=t.onPacketCreate,i=t.onPacketRemove,o=t.onPacketChange,a=t.onThingCreate,l=t.onThingRemove,c=t.onThingChange,s=SWe(z9e);return u.a.createElement(mEt,{title:wx("筛选"),onClose:function(){null==s||s.close("filter")},showCloseIcon:!0},n?u.a.createElement("div",{className:"lakex-table-h5-filter"},u.a.createElement(iIt,{filter:n,onPacketCreate:r,onPacketRemove:i,onPacketChange:o,onThingCreate:a,onThingRemove:l,onThingChange:c})):u.a.createElement(LEt,{onThingCreate:a,onPacketCreate:r}))},aIt=function(){var e=vEt(),t=e.filter,n=e.onPacketCreate,r=e.onPacketRemove,i=e.onPacketChange,o=e.onThingCreate,a=e.onThingRemove,l=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-filter-modal-h5"},u.a.createElement(oIt,{filter:t,onPacketCreate:n,onPacketRemove:r,onPacketChange:i,onThingCreate:o,onThingRemove:a,onThingChange:l}))},lIt="lakex-table-filter-modal-empty",uIt=function(){return u.a.createElement("div",{className:lIt},u.a.createElement("div",{className:"".concat(lIt,"-desc")},wx("还未设置任何筛选")))},cIt=function(e){var t,n=e.onThingCreate,r=e.onPacketCreate;return t=e.packetDeep>1?u.a.createElement(aXe,{className:"lt-btn",onClick:function(){return n()}},u.a.createElement(X$e,{type:"Add",size:16}),wx("添加筛选规则")):u.a.createElement(z4e,{list:[{key:"createThing",value:u.a.createElement(aXe,{className:"lt-btn"},u.a.createElement(X$e,{type:"Add",size:16}),wx("添加筛选规则"))},{key:"createPacket",value:u.a.createElement(aXe,{className:"lt-btn"},u.a.createElement(X$e,{type:"FilterPacket",size:16}),wx("添加筛选分组"))}],onSelect:function(e){"createThing"===e?n():"createPacket"===e&&r()}},u.a.createElement(aXe,{className:"lt-btn"},u.a.createElement(X$e,{type:"Add",size:16}),wx("添加筛选规则"))),u.a.createElement("div",{className:"lakex-table-filter-add"},t)},sIt=function(e){e.thing;var t=e.bordered,n=void 0===t||t,r=e.className,i=e.defaultValue,o=void 0===i?"":i,a=e.onFieldChange,l=void 0===a?function(){}:a,c=qEt({defaultValue:o}).filterFields,s=SWe(PS),d=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body,f=SWe(iHe);return u.a.createElement(n1e,{className:F()("lakex-table-filter-field-select",r),defaultValue:o,dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},onChange:function(e){var t,n=xC(c,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));l(null==(t=null==n?void 0:n.get("field"))?void 0:t.toJSON())},bordered:n,getPopupContainer:function(){return d}},OC(c,(function(e){var t,n,r,i,o=null==f?void 0:f.getFieldIcon(e.get("field").get("type"));return u.a.createElement(n1e.Option,{label:null==(t=e.get("field"))?void 0:t.get("name"),value:null==(n=e.get("field"))?void 0:n.get("uuid"),key:null==(r=e.get("field"))?void 0:r.get("uuid")},o&&u.a.createElement(o,null),u.a.createElement("div",{className:"lakex-table-filter-field-select-name"},null==(i=e.get("field"))?void 0:i.get("name")))})))},dIt=function(e){var t=e.thing,n=e.onFuncChange,r=void 0===n?function(){}:n,i=XEt({thing:t,onFuncChange:r}).conditions,o=SWe(PS),a=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(n1e,{className:"lakex-table-filter-func-select",value:t.func||(null==i?void 0:i[0].func),dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},style:{marginRight:5,width:110},onChange:function(e){r(e)},getPopupContainer:function(){return a}},null==i?void 0:i.map((function(e){return u.a.createElement(n1e.Option,{label:e.text,value:e.func,key:e.func},e.text)})))},fIt=function(e){var t,n,r=e.thing,i=e.onExpectedChange,o=void 0===i?function(){}:i,l=SWe(XA),c=SWe(PS),s=(null==c?void 0:c.getValue("modal.customModalContainer"))||document.body,d=ZEt({thing:r}),f=d.getMentionValues,h=d.getDateExpected,p=d.field,v=null==p?void 0:p.get("type");if(zO.includes(r.func))return null;if(v===xO.SELECT||v===xO.MULTI_SELECT){var g=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(g=null==r?void 0:r.expected.split(","));var m=l.getFieldOptions(p.get("uuid")),y=kC(m,(function(e){return g.includes(e.get("uuid"))})).map((function(e){return e.get("uuid")}));n=u.a.createElement(n1e,{value:y,dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),showSearch:!0,onChange:function(e){var t;if(null!=e&&""!==e&&0!==e.length)if("select"!==v){var n=[];if(!r.field){var i=null==(t=l.getField(r.field_uuid))?void 0:t.toJSON();if(!i)return;r.field=i}var a=l.getFieldOptions(r.field.uuid);null==a||a.forEach((function(t){e.includes(t.get("uuid"))&&n.push(t.uuid)})),o(n)}else o(e);else o("")},mode:"multiSelect"===v?"multiple":null,filterOption:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null==(e=(arguments.length>1?arguments[1]:void 0).label)?void 0:e.includes(t.toLowerCase())},getPopupContainer:function(){return s}},OC(m,(function(e,t){return u.a.createElement(n1e.Option,{key:t,label:e.get("name"),value:e.get("uuid")},e.get("name"))})))}else if(v===xO.CHECKBOX)n=u.a.createElement("span",{className:"lakex-table-filter-checkbox"},u.a.createElement(kXe,{defaultChecked:"true"===r.expected,onChange:function(e){o(e.target.checked?"true":"false")}}));else if(YO.isMentionLike(v)){var b=f()||[],w={};null==b||b.forEach((function(e){w[e.uid]=e}));var _=(null==r?void 0:r.expected)?r.expected.split(","):[];n=u.a.createElement(n1e,{value:_,dropdownClassName:"lakex-table-menu-item lakex-table-field-mention-select",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),onChange:function(e){var t=e.map((function(e){return w[e]})).filter((function(e){return!!e.uid}));t.sort((function(e,t){return e.name.localeCompare(t.name)})),o(0===e.length?"":t.map((function(e){return e.uid})).join(","))},mode:"multiple",filterOption:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return null==(t=null==(e=null==r?void 0:r.children[1])?void 0:e.toLowerCase())?void 0:t.includes(n.toLowerCase())},getPopupContainer:function(){return s}},null==b?void 0:b.map((function(e,t){return u.a.createElement(n1e.Option,{key:t,value:e.uid+""},u.a.createElement("span",{className:"lakex-table-selector-avatar"},u.a.createElement("img",{src:e.icon})),e.name)})))}else if(YO.isDateLike(v)){var x=!r.expected||uC(r.expected);n=u.a.createElement(u.a.Fragment,null,u.a.createElement(n1e,{value:x?"custom":r.expected,dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),style:{marginRight:5,width:110},onChange:function(e){o("custom"===e?"":e)},getPopupContainer:function(){return s}},null==(t=h(r.func))?void 0:t.map((function(e){return u.a.createElement(n1e.Option,{value:e.name,key:e.name},e.text)}))),x&&u.a.createElement("div",{className:"lakex-table-select-expected-datepicker"},u.a.createElement(X0e,{defaultValue:r.expected?a()(r.expected):null,autoFocus:focus,onChange:function(){var e;o(null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=u.a.createElement(LYe,{placeholder:wx("请输入"),defaultValue:r.expected,onChange:function(e){o(e.target.value)}});return u.a.createElement("div",{className:"lakex-table-select-expected"},n)},hIt=function(e){var t=e.thing,n=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-filter-thing"},u.a.createElement(sIt,{thing:t,defaultValue:t.field_uuid,onFieldChange:function(e){null==n||n(t.uuid,{field_uuid:null==e?void 0:e.uuid})}}),u.a.createElement(dIt,{thing:t,onFuncChange:rc((function(e){null==n||n(t.uuid,{func:e})}),200,{leading:!0})}),u.a.createElement(fIt,{thing:t,onExpectedChange:rc((function(e){null==n||n(t.uuid,{expected:e})}),200,{leading:!0})}))},pIt=function(e){var t,n=e.packet,r=e.itemIndex,i=e.onOperatorChange,o=void 0===i?function(){}:i,a=SWe(PS),l=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body;return t=0===r?u.a.createElement("div",{className:"lakex-table-filter-operator-text"},wx("当")):1===r?u.a.createElement(n1e,{value:n.operator,className:"lakex-table-filter-operator",dropdownClassName:"lakex-table-menu-item",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),onChange:function(e){o(e)},getPopupContainer:function(){return l}},u.a.createElement(n1e.Option,{value:AO.And},wx("与")),u.a.createElement(n1e.Option,{value:AO.Or},wx("或"))):u.a.createElement("div",{className:"lakex-table-filter-operator-text"},n.operator===AO.And?wx("与"):wx("或")),u.a.createElement("div",{className:"lakex-table-filter-operator-wrap"},t)},vIt=function(e){var t=[];return!e.thing?t=[{key:"removePacketAndThing",value:u.a.createElement(aXe,{className:"lt-btn lt-btn-danger"},u.a.createElement(X$e,{type:"Delete",size:16}),wx("删除分组"))},{key:"removePacket",value:u.a.createElement(aXe,{className:"lt-btn"},u.a.createElement(X$e,{type:"FilterPacketExpand",size:16}),wx("展开分组"))}]:(t=[{key:"removeThing",value:u.a.createElement(aXe,{className:"lt-btn lt-btn-danger"},u.a.createElement(X$e,{type:"Delete",size:16}),wx("删除规则"))}],e.packetDeep<2&&t.push({key:"createPacket",value:u.a.createElement(aXe,{className:"lt-btn"},u.a.createElement(X$e,{type:"FilterPacket",size:16}),wx("创建分组"))})),u.a.createElement("div",{className:"lakex-table-filter-setting"},u.a.createElement(z4e,{list:t,onSelect:function(t){var n,r,i,o;"removeThing"===t?null==(n=e.onThingRemove)||n.call(e,e.thing.uuid):"removePacket"===t?null==(r=e.onPacketRemove)||r.call(e,e.packet.uuid):"removePacketAndThing"===t?null==(i=e.onPacketRemove)||i.call(e,e.packet.uuid,!0):"createPacket"===t&&(null==(o=e.onPacketCreate)||o.call(e,e.thing.packet_uuid,e.thing.uuid))}},u.a.createElement("div",{className:"lakex-table-filter-setting-icon"},u.a.createElement(X$e,{type:"MoreHorizontal",size:14}))))},gIt=function(e){var t=e.filter,n=e.packetDeep,r=void 0===n?0:n,i=e.onPacketCreate,o=e.onPacketRemove,a=e.onPacketChange,l=e.onThingCreate,c=e.onThingRemove,s=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-filter-packet lakex-table-filter-packet-".concat(r)},t.filters.map((function(e,n){var d,f=e.operator;return d=f?u.a.createElement(gIt,{packetDeep:r+1,filter:e,onPacketCreate:i,onPacketRemove:o,onPacketChange:a,onThingCreate:l,onThingRemove:c,onThingChange:s}):u.a.createElement(hIt,{key:e.field_uuid,thing:e,onThingChange:s}),u.a.createElement("div",{className:"lakex-table-filter-packet-grid"},u.a.createElement(pIt,{itemIndex:n,packet:t,onOperatorChange:function(e){null==a||a(t.uuid,{operator:e})}}),d,u.a.createElement(vIt,{onThingRemove:c,onPacketRemove:o,onPacketCreate:i,thing:f?void 0:e,packet:f?e:void 0,packetDeep:r}))})),u.a.createElement(cIt,{onThingCreate:function(){return null==l?void 0:l(t.uuid)},onPacketCreate:function(){return null==i?void 0:i(t.uuid)},packetDeep:r}))},mIt=function(e){var t=e.filter,n=e.onPacketCreate,r=e.onPacketRemove,i=e.onPacketChange,o=e.onThingCreate,a=e.onThingRemove,l=e.onThingChange;return u.a.createElement(gIt,{filter:t,onPacketCreate:n,onPacketRemove:r,onPacketChange:i,onThingCreate:o,onThingRemove:a,onThingChange:l})},yIt=function(e){var t,n=$Et(e),r=n.filter,i=n.onPacketCreate,o=n.onPacketRemove,a=n.onPacketChange,l=n.onThingCreate,c=n.onThingRemove,s=n.onThingChange,d=!r;return t=d?u.a.createElement(uIt,null):u.a.createElement(mIt,{filter:r,onPacketCreate:i,onPacketRemove:o,onPacketChange:a,onThingCreate:l,onThingRemove:c,onThingChange:s}),u.a.createElement(u.a.Fragment,null,!d&&t,d&&u.a.createElement("div",{className:"lakex-table-filter-packet-wrap"},u.a.createElement(cIt,{onThingCreate:l,onPacketCreate:i,packetDeep:0})),u.a.createElement("div",{className:"lakex-table-filter-hr"}),u.a.createElement("div",{className:"lakex-table-filter-delete"},u.a.createElement(aXe,{className:"lt-btn lt-btn-danger",onClick:function(){return o(r.uuid,!0)}},u.a.createElement(X$e,{type:"Delete",size:14}),wx("删除筛选"))))},bIt=function(){var e=vEt(),t=e.filter,n=e.onPacketCreate,r=e.onPacketRemove,i=e.onPacketChange,o=e.onThingCreate,a=e.onThingRemove,l=e.onThingChange;return u.a.createElement("div",{className:"lakex-table-filter-modal"},u.a.createElement(yIt,{filter:t,onPacketCreate:n,onPacketRemove:r,onPacketChange:i,onThingCreate:o,onThingRemove:a,onThingChange:l}))},wIt=Object.defineProperty,_It=Object.getOwnPropertyDescriptor,xIt=function(e,t,n,r){for(var i,o=r>1?void 0:r?_It(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wIt(t,n,o),o},kIt=function(){return ox((function e(){var t=this;rx(this,e),this._getTitle=function(){var e=t._readService.getActiveView();if(!e)return wx("筛选");var n=t._readService.getViewFilter(e.get("uuid"));return n?wx("$1个筛选",t._filterToolbarService.countFields(n)):wx("筛选")},this._getActive=function(){var e=t._readService.getActiveView();return!!e&&!!t._readService.getViewFilter(e.get("uuid"))}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"filter",icon:"ViewerFilter",tooltip:this._getTitle,visible:function(){var e=t._readService.getActiveView();if(!e||!t.isMobile&&t.isReadonly)return!1;var n=e.get("type");return![WO.FORM,WO.TODO].includes(n)},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("filter",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"filter",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?aIt:bIt})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"filterByField",name:function(e){var n=e.fieldId,r=t._readService.getActiveView(),i=t._readService.getViewFilter(null==r?void 0:r.get("uuid"));return wx(t._filterToolbarService.findField(i,n)?"取消筛选":"按本列筛选")},icon:"ViewerFilter",hotkey:"",visible:function(e){return e.from===Oat.HEADER},onClick:function(e){var n,r,i=e.initialState.fieldId,o=t._readService.getActiveView().get("uuid"),a=t._readService.getViewFilter(o);if(t._filterToolbarService.findField(a,i)&&a)null==(n=t._commandService)||n.execCommand("removeFilterPacket",{viewId:o,packetId:a.uuid,isAll:!0});else{var l=t._filterToolbarService.buildThingByFieldId(i,o);null==(r=t._commandService)||r.execCommand("createFilterThing",l);var u=t._workbenchContext.$root.querySelector("#filter");u&&t._modalService.open("filter",{position:{origin:u,placement:"bottom"}})}t._modalService.close("context-menu-modal")}})}}],[{key:"pluginModule",value:function(){return ch().register(YEt).register(this)}}])}();kIt.pluginName="workbench-filter",xIt([Yf(z9e)],kIt.prototype,"_modalService",2),xIt([Yf(XA)],kIt.prototype,"_readService",2),xIt([Yf(Lj)],kIt.prototype,"_commandService",2),xIt([Yf(YEt)],kIt.prototype,"_filterToolbarService",2),xIt([Yf(eet)],kIt.prototype,"_workbenchContext",2),xIt([Yf(RC)],kIt.prototype,"_configuration",2),xIt([Yf(hD)],kIt.prototype,"_abilityService",2),kIt=xIt([Gf({contrib:[Z8e,i9e,H9e,rmt]})],kIt);var CIt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.groupField,r=e.groupOption,i=e.color,o=e.onSubmit,a=function(e){var t=e.groupField,n=e.groupOption,r=e.defaultColor,i=e.onSubmit,o=e.ref,a=SWe(mN),u=jF(Object(l.useState)((null==n?void 0:n.color)||r||mN.getNextColor("")),2),c=u[0],s=u[1],d=jF(Object(l.useState)(null==n?void 0:n.name),2),f=d[0],h=d[1],p=Object(l.useRef)(null);P$e((function(){var e;s((null==n?void 0:n.color)||r||mN.getNextColor("")),h(null==n?void 0:n.name),null==(e=p.current)||e.focus()}),[null==n?void 0:n.color,null==n?void 0:n.name]);var v=Object(l.useCallback)((function(){null==i||i({fieldId:t.get("uuid"),fieldOption:{name:f,color:c}})}),[t.get("uuid"),f,c]);return Object(l.useImperativeHandle)(o,(function(){return{onSubmit:function(){v()}}})),{inputRef:p,state:{name:f,optionColor:c},labelColor:a,onPressEnter:v,onChange:function(e){h(e.target.value)},onChangeColor:function(e){s(e)}}}({groupField:n,groupOption:r,defaultColor:e.defaultColor,onSubmit:o,ref:t}),c=a.inputRef,s=a.state,d=a.labelColor,f=a.onChange,h=a.onChangeColor,p=a.onPressEnter,v=null;return i&&(v=u.a.createElement(H$e,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:u.a.createElement(OWe,{colorSource:Q_(uN),activeColor:s.optionColor,onSelect:h})},u.a.createElement("span",{className:"lakex-table-group-item-option-color",style:{background:d.getRenderColor(s.optionColor)}}))),u.a.createElement("div",{className:"lakex-table-group-item-input"},u.a.createElement("span",{className:"lakex-table-group-item-input-content"},v,u.a.createElement(LYe,{ref:c,value:s.name,onChange:function(e){f(e)},onPressEnter:function(){p()},autoFocus:!0})))})));function SIt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OIt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SIt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SIt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var EIt=function(e){var t=e.groupField,n=e.groupOption,r=void 0===n?{}:n,i=e.onSubmit;return u.a.createElement("div",{className:"lakex-table-group-item-mention"},u.a.createElement(uct,{id:t.get("uuid"),defaultValue:(null==r?void 0:r.value)||[],onChange:function(e){var n=e.map((function(e){return e.uid})).join(",");null==i||i({fieldId:t.get("uuid"),fieldOption:OIt(OIt({},r),{},{uuid:n,name:n,value:n,users:e})})}}))},IIt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n,r=e.initialState.groupField,i=Xat(null==r?void 0:r.get("uuid")),o=i.field,a=i.fieldType,c=i.fieldOptions,s=SWe(Lj),d=SWe(z9e),f=Object(l.useRef)(null),h=Object(l.useCallback)((function(e){var t=e.fieldId,n=e.fieldOption,r=function(){var e=aO(QC.mark((function e(t){var n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fieldId,r=t.fieldOption,e.next=3,s.execCommand("createFieldOption",{fieldId:n,fieldOption:r});case 3:(null==(i=e.sent)?void 0:i.isSuccess)?d.close("addGroupItem"):(null==i?void 0:i.error)&&p.b.error(i.error.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r({fieldId:t,fieldOption:n})}),[]),v=Object(l.useCallback)((function(e){var t=e.fieldId,n=e.fieldOption,r=function(){var e=aO(QC.mark((function e(t){var n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fieldId,(r=t.fieldOption).name){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s.execCommand("createFieldOption",{fieldId:n,fieldOption:r});case 5:(null==(i=e.sent)?void 0:i.isSuccess)?d.close("addGroupItem"):(null==i?void 0:i.error)&&p.b.error(i.error.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r({fieldId:t,fieldOption:n})}),[]);if(Object(l.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;a===xO.SELECT&&(null==(e=f.current)||e.onSubmit())}}})),a===xO.MENTION)return u.a.createElement(EIt,{groupField:o,onSubmit:h});var g=mN.getNextColor((null==(n=null==c?void 0:c.get(c.length-1))?void 0:n.get("color"))||"");return o?u.a.createElement(CIt,{ref:f,groupField:o,color:null==r?void 0:r.get("color"),defaultColor:g,onSubmit:v}):null}))),PIt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n,r,i=null==(n=e.initialState)?void 0:n.groupField,o=null==(r=e.initialState)?void 0:r.groupOption,a=SWe(Lj),c=SWe(z9e),s=Object(l.useRef)(null),d=Object(l.useCallback)((function(e){var t=e.fieldId,n=e.fieldOption,r=function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.fieldId,n=t.fieldOption,e.next=3,a.execCommand("updateFieldOption",{optionId:o.uuid,fieldOption:n});case 3:(null==(r=e.sent)?void 0:r.isSuccess)&&c.close("editGroupItem"),(null==r?void 0:r.error)&&p.b.error(r.error.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r({fieldId:t,fieldOption:n})}),[]),f=Object(l.useCallback)((function(e){var t=e.fieldId,n=e.fieldOption,r=function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.fieldId,(n=t.fieldOption).name!==o.name||n.color!==o.color){e.next=4;break}return c.close("editGroupItem"),e.abrupt("return");case 4:return e.next=6,a.execCommand("updateFieldOption",{optionId:o.uuid,fieldOption:n});case 6:(null==(r=e.sent)?void 0:r.isSuccess)?c.close("editGroupItem"):(null==r?void 0:r.error)&&p.b.error(r.error.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r({fieldId:t,fieldOption:n})}),[]);return Object(l.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;(null==i?void 0:i.get("type"))===xO.SELECT&&(null==(e=s.current)||e.onSubmit())}}})),i?(null==i?void 0:i.get("type"))===xO.MENTION?u.a.createElement(EIt,{groupField:i,groupOption:o,onSubmit:d}):u.a.createElement(CIt,{ref:s,groupField:i,groupOption:o,color:null==i?void 0:i.get("color"),onSubmit:f}):null}))),MIt=Object.defineProperty,RIt=Object.getOwnPropertyDescriptor,AIt=function(e,t,n,r){for(var i,o=r>1?void 0:r?RIt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&MIt(t,n,o),o},jIt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e,t,n=this;null==(e=this._groupItemService)||e.onShowEditGroup((function(e){var t,r=e.target,i=e.groupField,o=e.groupOption;null==(t=n._modalService)||t.open("editGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:i,groupOption:o}})})),null==(t=this._groupItemService)||t.onShowNewGroup((function(e){var t,r=e.target,i=e.groupField;null==(t=n._modalService)||t.open("addGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:i}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"addGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:IIt}),e.registerItem({id:"editGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:PIt})}},{key:"registerContextMenu",value:function(e){var t,n=this;e.registerItem({key:"groupByField",name:function(e){var t=e.fieldId,r=n._readService.getActiveView(),i=n._readService.getViewGroup(null==r?void 0:r.get("uuid"));return wx(i&&i.field.get("uuid")===t?"取消分组":"按本列分组")},icon:"ViewerGroup",hotkey:"",visible:function(e){return e.from===Oat.HEADER},onClick:(t=aO(QC.mark((function e(t){var r,i,o,a,l,u,c,s,d;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.initialState,l=n._readService.getActiveView(),u=r.fieldId,l){e.next=5;break}return e.abrupt("return");case 5:if(c=n._readService.getViewGroup(l.get("uuid")),s=c&&c.field.get("uuid")===u,d=null,c){e.next=14;break}return e.next=11,null==(i=n._commandService)?void 0:i.execCommand("createGridGroup",{viewId:l.get("uuid"),group:{field_uuid:u,type:NO.ASC}});case 11:d=e.sent,e.next=23;break;case 14:if(!s){e.next=20;break}return e.next=17,null==(o=n._commandService)?void 0:o.execCommand("removeGridGroup",{viewId:l.get("uuid")});case 17:d=e.sent,e.next=23;break;case 20:return e.next=22,null==(a=n._commandService)?void 0:a.execCommand("updateGridGroup",{viewId:l.get("uuid"),group:{field_uuid:u,type:NO.ASC}});case 22:d=e.sent;case 23:(null==d?void 0:d.isSuccess)?n._modalService.close("context-menu-modal"):(null==d?void 0:d.error)&&p.b.error(d.error.message);case 24:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();jIt.pluginName="workbench-group",AIt([Yf(Mft),If()],jIt.prototype,"_groupItemService",2),AIt([Yf(z9e)],jIt.prototype,"_modalService",2),AIt([Yf(XA)],jIt.prototype,"_readService",2),AIt([Yf(Lj)],jIt.prototype,"_commandService",2),jIt=AIt([Gf({contrib:[Z8e,H9e,rmt]})],jIt);var DIt=Object.defineProperty,TIt=Object.getOwnPropertyDescriptor,FIt=function(e,t,n,r){for(var i,o=r>1?void 0:r?TIt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DIt(t,n,o),o},NIt=function(){return ox((function e(){rx(this,e)}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"init",value:function(){}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"highlightSame",name:function(e){var n=e.fieldId;return t._highlightSameService.isEnable(n)?wx("取消高亮重复值"):wx("高亮重复值")},hotkey:"",visible:function(e){var n=e.from,r=t._readService.getActiveView();return(null==r?void 0:r.get("type"))===WO.GRID&&(!t.isReadonly&&n===Oat.HEADER)},onClick:function(e){var n=e.initialState.fieldId;t._highlightSameService.isEnable(n)?(t._commandService.execCommand("removeHighlightSame",{fieldId:n}),t._highlightSameRenderService.removeHighlights(n)):(t._commandService.execCommand("addHighlightSame",{fieldId:n}),t._highlightSameRenderService.refreshHighlights(n)),t._modalService.close("context-menu-modal")}})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();NIt.pluginName="workbench-highlight-same",FIt([Yf(z9e)],NIt.prototype,"_modalService",2),FIt([Yf(hD)],NIt.prototype,"_abilityService",2),FIt([Yf(XA)],NIt.prototype,"_readService",2),FIt([Yf(Lj)],NIt.prototype,"_commandService",2),FIt([Yf(zet)],NIt.prototype,"_highlightSameService",2),FIt([Yf(Gft)],NIt.prototype,"_highlightSameRenderService",2),NIt=FIt([Gf({contrib:[Z8e,rmt]})],NIt);var LIt=Object.defineProperty,BIt=Object.getOwnPropertyDescriptor,VIt=function(e,t,n,r){for(var i,o=r>1?void 0:r?BIt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&LIt(t,n,o),o},zIt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._workbenchHotkeyPluginProvider.getContributions({cache:!1}).forEach((function(t){t.registerHotkey(e._hotkeyRegistry)}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"save",hotkey:"⌘+S",name:wx("保存"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===WO.FORM)},onHotKey:function(e){e.preventDefault(),p.b.success(wx("文档已保存"))}})}}],[{key:"pluginModule",value:function(){return ch().contribution(jot).register(this)}}])}();zIt.pluginName="workbench-hotkey",VIt([gh(jot)],zIt.prototype,"_workbenchHotkeyPluginProvider",2),VIt([Yf(f$e)],zIt.prototype,"_hotkeyRegistry",2),VIt([Yf(XA)],zIt.prototype,"_readService",2),zIt=VIt([Gf({contrib:[Z8e,jot]})],zIt);var HIt=function(){var e=SWe(z9e),t=SWe(_gt),n=jF(Object(l.useState)(null),2),r=n[0],i=n[1],o=jF(Object(l.useState)(0),2),a=o[0],u=o[1],c=jF(Object(l.useState)(0),2),s=c[0],d=c[1],f=jF(Object(l.useState)([]),2),h=f[0],p=f[1],v=Object(l.useRef)(null),g=Object(l.useRef)(null),m=Object(l.useRef)(!1);Object(l.useLayoutEffect)((function(){var e=setTimeout((function(){var e;null==(e=g.current)||e.focus()}),50);return function(){clearTimeout(e)}}),[]);var y=function(){i(null),p([]),u(0),d(0),null==t||t.closeSearch()},b=function(){setTimeout((function(){var e;null==(e=g.current)||e.focus()}),200)},w=C$e((function(){var e,n,r;if(!(null==m?void 0:m.current)){var o=null==(r=(null==(e=g.current)?void 0:e.input)||(null==(n=g.current)?void 0:n.nativeElement))?void 0:r.value;if(o){var a=(null==t?void 0:t.search(o))||[];i(o),u(a.length),p(a),d(0),b()}else y()}}),300);return P$e((function(){var e=h[s];e&&(null==t||t.jumpToSearch(e))}),[s,h]),P$e((function(){var t=e.onBeforeClose((function(e){"search"===e.modalId&&y()}));return function(){t.destroy()}}),[]),{state:{query:r,count:a,current:s},onCloseSearch:function(){e.close("search"),y()},onCompositionStart:function(){m.current=!0},onCompositionEnd:function(){m.current=!1,w()},searchBox:v,onChangeQuery:w,onClear:function(){i(null)},searchInput:g,composition:m,onSearchPrev:function(){d(s>0?s-1:a-1),b()},onSearchNext:function(){d(s<a-1?s+1:0),b()}}},WIt=function(){var e=HIt(),t=e.searchInput,n=e.onClear,r=e.composition,i=e.onCloseSearch,o=e.onChangeQuery;return P$e((function(){r.current=!1}),[]),u.a.createElement("div",{className:F()("lakex-table-h5-search-bar")},u.a.createElement(LYe,{ref:t,prefix:u.a.createElement(X$e,{type:"Search",size:"16",className:"lakex-table-h5-search-icon"}),className:"lakex-table-h5-search-input",placeholder:wx("请输入关键词搜索"),clearable:!0,onClear:n,onChange:o}),u.a.createElement("span",{className:"lakex-table-h5-search-cancel",onClick:i},wx("取消")))};function UIt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GIt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UIt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UIt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YIt={x:0,y:0},$It=function(e){var t,n,r=e.top,i=void 0===r?0:r,o=e.left,a=void 0===o?0:o,l=HIt(),c=l.state,s=l.onCloseSearch,d=l.searchInput,f=l.onChangeQuery,h=l.onCompositionStart,p=l.onCompositionEnd,v=l.onSearchPrev,g=l.onSearchNext,m=Tq({id:"search"}),y=m.attributes,b=m.listeners,w=m.setNodeRef,_=m.transform;return u.a.createElement("div",GIt(GIt(GIt({className:"lakex-table-search grid",ref:w},b),y),{},{style:{top:i,right:10-a,"--translate-x":"".concat(null!==(t=null==_?void 0:_.x)&&void 0!==t?t:0,"px"),"--translate-y":"".concat(null!==(n=null==_?void 0:_.y)&&void 0!==n?n:0,"px")}}),u.a.createElement(X$e,{className:"lakex-search-close-action",type:"Close",size:14,onClick:s}),u.a.createElement(Y5,{defaultActiveKey:"search",animated:!1,items:[{key:"search",label:wx("查找"),children:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"search-input"},u.a.createElement(LYe,{ref:d,className:"lakex-table-search-input",defaultValue:c.query,onChange:f,onCompositionStart:h,onCompositionEnd:p,autoFocus:!0,onPressEnter:g,onMouseDown:function(e){e.stopPropagation()}}),c.query&&u.a.createElement("span",{className:"search-result"},Math.min(c.current+1,c.count)," / ",c.count)),u.a.createElement("div",{className:"search-foot"},u.a.createElement(aXe,{size:"small",onClick:v},wx("上一个")),u.a.createElement(aXe,{size:"small",onClick:g},wx("下一个"))))}]}))},qIt=function(){var e=jF(Object(l.useState)(YIt),2),t=e[0],n=t.x,r=t.y,i=e[1],o=qY($Y(K$,{activationConstraint:{distance:8}}));return u.a.createElement(Rq,{sensors:o,onDragEnd:function(e){var t=e.delta;i((function(e){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}))}},u.a.createElement($It,{top:r,left:n}))},KIt=function(){var e=SWe(_gt),t=SWe(RC),n=SWe(z9e),r=SWe(F7e),i=HIt(),o=i.state,a=i.searchBox,c=i.onCloseSearch,s=i.searchInput,d=i.onChangeQuery,f=i.onCompositionStart,h=i.onCompositionEnd,p=i.onSearchNext,v=jF(Object(l.useState)(!1),2),g=v[0],m=v[1],y=(null==t?void 0:t.getValue("toolbar.mode"))===l9e.NORMAL,b=Object(l.useCallback)((function(){m(!1),c(),null==e||e.emitExitSearchingEvent()}),[c]),w=Object(l.useCallback)((function(e){e.keyCode===OG.ESC&&b()}),[b]);return P$e((function(){var t=null==e?void 0:e.onSearching((function(){m(!0)}));return function(){c(),null==t||t.destroy()}}),[]),y?u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){var e=null==r?void 0:r.getRenderViewPort();e&&(null==n||n.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:{left:e.right,top:e.top}}))},tabIndex:-1},u.a.createElement(X$e,{type:"Search"}),u.a.createElement("span",{className:"toolbar-button-title"},wx("搜索"))):g?u.a.createElement("div",{className:"lakex-search-toolbar-btn",ref:a.current},u.a.createElement(LYe,{ref:s,className:"lakex-table-search-input",defaultValue:o.query,placeholder:wx("请输入关键词..."),onChange:d,onCompositionStart:f,onCompositionEnd:h,autoFocus:!0,allowClear:!0,bordered:!1,onPressEnter:p,onKeyDown:w,onBlur:b})):u.a.createElement(j4e,{title:wx("搜索")},u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){m(!0),null==e||e.emitSearchingEvent()},tabIndex:-1},u.a.createElement(X$e,{type:"Search"})))},XIt=Object.defineProperty,JIt=Object.getOwnPropertyDescriptor,ZIt=function(e,t,n,r){for(var i,o=r>1?void 0:r?JIt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&XIt(t,n,o),o},QIt=function(){return ox((function e(){rx(this,e)}),[{key:"_getSearchPosition",value:function(){var e=this._viewportService.getRenderViewPort();return{left:e.right,top:e.top}}},{key:"_isLiteMode",get:function(){return this._configuration.getValue("toolbar.mode")===l9e.LITE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("render.mode");this._isLiteMode&&n!==Eze.MOBILE?e.registerItem({id:"search",RenderComponent:KIt}):e.registerItem({id:"search",icon:"Search",tooltip:wx("搜索"),visible:function(){var e,n=null==(e=t._readService.getActiveView())?void 0:e.get("type");return![WO.FORM,WO.CHART,WO.TODO].includes(n)},onClick:function(e){var r;r=n===Eze.MOBILE?{placement:"cover",origin:t._toolbarService.getDom()}:t._getSearchPosition(),t._modalService.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:r})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("render.mode");e.registerItem({id:"search",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",disableClickAwayClose:!0,RenderComponent:t===Eze.MOBILE?WIt:qIt})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"search",hotkey:"⌘+F",name:wx("查找"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===WO.FORM)},onHotKey:function(e){e.preventDefault(),t._isLiteMode?t._searchService.emitSearchingEvent():t._modalService.open("search",{initialState:{searchParams:{openFrom:"hotkey"}},position:t._getSearchPosition()})}})}}],[{key:"pluginModule",value:function(){return ch().contribution(rgt).register(this)}}])}();QIt.pluginName="workbench-search",ZIt([Yf(z9e)],QIt.prototype,"_modalService",2),ZIt([Yf(XA)],QIt.prototype,"_readService",2),ZIt([Yf(F7e)],QIt.prototype,"_viewportService",2),ZIt([Yf(r9e)],QIt.prototype,"_toolbarService",2),ZIt([Yf(RC)],QIt.prototype,"_configuration",2),ZIt([Yf(_gt)],QIt.prototype,"_searchService",2),QIt=ZIt([Gf({contrib:[Z8e,i9e,H9e,jot]})],QIt);var ePt=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(MEt,{desc:wx("你还未进行任何排序"),className:"no-data"}),u.a.createElement(aXe,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},u.a.createElement(X$e,{type:"Add"}),wx("添加排序条件")))},tPt=function(e){var t,n=SWe(z9e),r=SWe(Lj),i=SWe(XA),o=(null==(t=i.getViewSort())?void 0:t.toJSON())||void 0,a=i.getViewConfig(),u=i.getView(),c=jF(Object(l.useState)(o),2),s=c[0],d=c[1],f=jF(Object(l.useState)(!!(null==a?void 0:a.get("keep_sort"))),2),h=f[0],p=f[1],v=function(e){if(u)return e?o?null==r?void 0:r.execCommand("updateSort",{viewId:null==a?void 0:a.get("view_uuid"),sort:e,auto:h}):null==r?void 0:r.execCommand("createSort",{viewId:null==a?void 0:a.get("view_uuid"),sort:e}):null==r?void 0:r.execCommand("removeSort",{viewId:null==a?void 0:a.get("view_uuid")})},g=i.getAllFields(),m=Object(l.useCallback)((function(){return s?xC(g,(function(e){return e.get("uuid")===s.field_uuid})):null}),[s,g]);return{state:{sort:s,auto:h},fields:g,getCurrnetSortField:m,onAddOption:function(e){e||(e=i.getViewFields().get(0).get("field"));var t={field_uuid:null==e?void 0:e.get("uuid"),type:LO.ASC};if(h)return v(t),void d(t);d(t)},onRemoveOption:function(){if(h)return v(null),void d(null);d(null)},onUpdateOption:function(e){var t={field_uuid:e,type:(null==s?void 0:s.type)||LO.ASC};if(h)return v(t),void d(t);d(t)},onUpdateType:function(e){var t={field_uuid:null==s?void 0:s.field_uuid,type:e};if(h)return v(t),void d(t);d(t)},onUpdateAuto:function(e){if(h!==e)return null==r||r.execCommand("updateSort",{viewId:null==a?void 0:a.get("view_uuid"),sort:s,auto:e}),void p(e);p(e)},onCancel:function(){n.close("sort")},onSubmit:function(){v(s),n.close("sort")}}},nPt=function(e){switch(e){case"select":case"multiSelect":return{asc:wx("选项顺序"),desc:wx("选项倒序")};case"number":case"phone":return{asc:wx("从小到大"),desc:wx("从大到小")};default:return{asc:wx("升序"),desc:wx("降序"),style:{padding:"0 16px"}}}},rPt=function(e){var t=tPt(),n=t.state,r=t.onCancel,i=t.onSubmit,o=t.onAddOption,a=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto,f=t.getCurrnetSortField,h=SWe(RC),p=SWe(z9e),v=h.getValue("modal.mode"),g=SWe(XA),m=SWe(iHe),y=Object(l.useMemo)((function(){return g.getViewFields()}),[]);return u.a.createElement(mEt,{title:wx("排序"),onClose:r,showCloseIcon:!0},function(){if(!n.sort)return u.a.createElement(ePt,{onAddOption:o});var e=f(),t=nPt(null==e?void 0:e.get("type")),r=e&&m.getFieldIcon(e.get("type"));return u.a.createElement("div",{className:"lakex-table-h5-sort"},u.a.createElement("div",{className:"lakex-table-h5-sort-tip"},wx("按以下选项进行排序")),u.a.createElement(REt,{prefixIcon:r,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==p||p.open("sort-select",{initialState:{sort:n.sort}})}}),u.a.createElement(L7e,{id:"sort-select",mode:v,hasMask:v===V9e.DRAWER,hasAnimation:v===V9e.DRAWER,position:v===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){null==p||p.close("sort-select")},showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:null==(t=n.sort)?void 0:t.field_uuid,list:OC(y,(function(e){var t=e.get("field");if(!t)return null;var n=m.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){null==p||p.close("sort-select"),a(e.key)}}))}}),u.a.createElement(CEt,{className:"lakex-table-h5-sort-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.sort.type}),u.a.createElement(SEt,{className:"lakex-table-h5-sort-auto",list:[{key:"auto",checked:n.auto,title:wx("保持排序")}],onSwitch:function(e,t){d(t)}}),u.a.createElement(aXe,{type:"primary",className:"lakex-table-h5-sort-confirm",onClick:function(){return i()},style:{opacity:n.auto?0:1}},wx("确定")),u.a.createElement(aXe,{className:"lakex-table-h5-sort-del",onClick:function(){return c()}},u.a.createElement(X$e,{type:"Delete",className:"del-icon"}),wx("删除该条件")))}())},iPt=function(e){var t=e.className,n=e.defaultValue,r=void 0===n?"":n,i=e.onFieldSelect,o=void 0===i?function(){}:i,a=function(e){var t=SWe(XA),n=t.getActiveView(),r=kC(t.getViewFields(null==n?void 0:n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||YO.isSort(null==(r=t.get("field"))?void 0:r.get("type"))}));return{sortFields:r}}({defaultValue:r}),l=a.sortFields,c=SWe(iHe),s=SWe(PS),d=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(n1e,{className:"lakex-table-sort-field-select ".concat(t),defaultValue:r,dropdownClassName:"lakex-table-sort-field-select-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:12}),showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},onChange:function(e){var t=xC(l,(function(t){return t.get("field_uuid")===e}));o(null==t?void 0:t.get("field"))},bordered:!1,getPopupContainer:function(){return d}},OC(l,(function(e){var t=e.get("field");if(!t)return null;var n=null==c?void 0:c.getFieldIcon(t.get("type"));return u.a.createElement(n1e.Option,{label:t.get("name"),value:t.get("uuid"),key:t.get("uuid")},n&&u.a.createElement(n,null),u.a.createElement("div",{className:"lakex-table-sort-field-select-name"},t.get("name")))})))},oPt=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-sort-modal-empty"},u.a.createElement(iPt,{defaultValue:wx("选择一列进行排序"),onFieldSelect:n}))},aPt=function(e){var t=e.auto,n=void 0!==t&&t,r=e.onUpdateAuto,i=void 0===r?function(){}:r;return u.a.createElement("div",{className:"lakex-table-sort-setting"},u.a.createElement("h2",{className:"lakex-table-sort-setting-title"},wx("排序设置")),u.a.createElement("div",{className:"lakex-table-sort-setting-action"},u.a.createElement("span",null,wx("保持排序")),u.a.createElement(j.a,{checked:n,onChange:i,size:"small"})))},lPt=function(e){var t=e.sort,n=e.field,r=e.onUpdateType,i=void 0===r?function(){}:r;if(!n)return null;if(YO.isCheckbox(n.type))return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){i(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},u.a.createElement(kXe,{checked:!1},u.a.createElement(X$e,{type:"RightArrow"})),u.a.createElement(kXe,{checked:!0}))),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},u.a.createElement(kXe,{checked:!0},u.a.createElement(X$e,{type:"RightArrow"})),u.a.createElement(kXe,{checked:!1}))));var o=nPt(n.type);return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){i(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{style:o.style},o.asc)),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{style:o.style},o.desc)))},uPt=function(e){var t=e.sort,n=e.field,r=e.onRemove,i=void 0===r?function(){}:r,o=e.onChange,a=void 0===o?function(){}:o,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=jF(Object(l.useState)(t),2),i=r[0],o=r[1];return{state:{activeField:i},onFieldSelect:function(e){n(e.get("uuid")),o(e)}}}({field:n,onChange:a}),f=d.state,h=d.onFieldSelect;return u.a.createElement("div",{className:"lakex-table-sort-item"},u.a.createElement(X$e,{type:"Close",onClick:function(){i(t)}}),u.a.createElement(iPt,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:h,className:"lakex-table-sort-item-select"}),u.a.createElement(lPt,{sort:t,field:f.activeField,onUpdateType:s}))},cPt=function(e){var t=e.onCancel,n=void 0===t?function(){}:t,r=e.onSubmit,i=void 0===r?function(){}:r;return u.a.createElement("div",{className:"lakex-table-sort-footer"},u.a.createElement(aXe,{onClick:n},wx("取消")),u.a.createElement(aXe,{type:"primary",onClick:i},wx("确定")))},sPt=function(){var e,t=tPt(),n=t.state,r=t.fields,i=t.onCancel,o=t.onSubmit,a=t.onAddOption,l=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto;if(n.sort){var f=xC(r,(function(e){var t;return e.get("uuid")===(null==(t=n.sort)?void 0:t.field_uuid)}));e=u.a.createElement(u.a.Fragment,null,u.a.createElement(aPt,{auto:n.auto,onUpdateAuto:d}),u.a.createElement(uPt,{field:f,sort:n.sort,onRemove:c,onChange:l,onUpdateType:s}),!n.auto&&u.a.createElement(cPt,{onCancel:i,onSubmit:o}))}else e=u.a.createElement(u.a.Fragment,null,u.a.createElement(oPt,{onAddOption:a}),!n.auto&&u.a.createElement(cPt,{onCancel:i,onSubmit:o}));return u.a.createElement("div",{className:"lakex-table-sort-modal"},e)},dPt=Object.defineProperty,fPt=Object.getOwnPropertyDescriptor,hPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?fPt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dPt(t,n,o),o},pPt=function(){return ox((function e(){var t=this;rx(this,e),this._getActive=function(){var e=t._readService.getActiveView();if(!e)return!1;var n=t._readService.getViewConfig(e.get("uuid"));return!!(null==n?void 0:n.get("keep_sort"))}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"sort",icon:"ViewerSort",tooltip:wx("排序"),visible:function(){var e;return!(!t._readService.getActiveView()||!t.isMobile&&t.isReadonly)&&![WO.FORM,WO.CALENDAR,WO.CHART,WO.TODO].includes(null==(e=t._readService.getActiveView())?void 0:e.get("type"))},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("sort",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"sort",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?rPt:sPt})}},{key:"registerContextMenu",value:function(e){var t,n,r=this;e.registerItem({key:"sortByAsc",name:wx("升序"),hotkey:"",visible:function(e){return e.from===Oat.HEADER},onClick:(t=aO(QC.mark((function e(t){var n,i,o,a,l,u,c,s;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.initialState,a=n.fieldId,l=r._readService.getActiveView()){e.next=5;break}return e.abrupt("return");case 5:if(u=r._readService.getViewSort(l.get("uuid")),c=r._readService.getViewConfig(null==l?void 0:l.get("uuid")),s=null,u){e.next=14;break}return e.next=11,null==(i=r._commandService)?void 0:i.execCommand("createSort",{viewId:l.get("uuid"),sort:{field_uuid:a,type:"asc"}});case 11:s=e.sent,e.next=17;break;case 14:return e.next=16,null==(o=r._commandService)?void 0:o.execCommand("updateSort",{viewId:l.get("uuid"),sort:{field_uuid:a,type:"asc"},auto:!!(null==c?void 0:c.get("keep_sort"))});case 16:s=e.sent;case 17:(null==s?void 0:s.isSuccess)?r._modalService.close("context-menu-modal"):(null==s?void 0:s.error)&&p.b.error(s.error.message);case 18:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}),e.registerItem({key:"sortByDesc",name:wx("降序"),hotkey:"",visible:function(e){return e.from===Oat.HEADER},onClick:(n=aO(QC.mark((function e(t){var n,i,o,a,l,u,c,s;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.initialState,a=n.fieldId,l=r._readService.getActiveView()){e.next=5;break}return e.abrupt("return");case 5:if(u=r._readService.getViewSort(l.get("uuid")),c=r._readService.getViewConfig(null==l?void 0:l.get("uuid")),s=null,u){e.next=14;break}return e.next=11,null==(i=r._commandService)?void 0:i.execCommand("createSort",{viewId:l.get("uuid"),sort:{field_uuid:a,type:"desc"}});case 11:s=e.sent,e.next=17;break;case 14:return e.next=16,null==(o=r._commandService)?void 0:o.execCommand("updateSort",{viewId:l.get("uuid"),sort:{field_uuid:a,type:"desc"},auto:!!(null==c?void 0:c.get("keep_sort"))});case 16:s=e.sent;case 17:(null==s?void 0:s.isSuccess)?r._modalService.close("context-menu-modal"):(null==s?void 0:s.error)&&p.b.error(s.error.message);case 18:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function vPt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gPt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vPt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vPt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mPt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yPt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yPt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function yPt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}pPt.pluginName="workbench-sort",hPt([Yf(z9e)],pPt.prototype,"_modalService",2),hPt([Yf(XA)],pPt.prototype,"_readService",2),hPt([Yf(Lj)],pPt.prototype,"_commandService",2),hPt([Yf(RC)],pPt.prototype,"_configuration",2),hPt([Yf(hD)],pPt.prototype,"_abilityService",2),pPt=hPt([Gf({contrib:[Z8e,i9e,H9e,rmt]})],pPt);var bPt=function(e){var t=e.initialState,n=t.stat,r=(null==n?void 0:n.type)||"none",i=function(e){var t,n=e.field,r=e.view,i=SWe(Lj),o=SWe(z9e),a=[],l=mPt(ywt);try{for(l.s();!(t=l.n()).done;){var u=t.value,c=Ygt[u];"-"!==u?c&&(c.types?c.types.includes(null==n?void 0:n.get("type"))&&a.push(gPt(gPt({},c),{},{type:u})):a.push(gPt(gPt({},c),{},{type:u}))):a.push(u)}}catch(e){l.e(e)}finally{l.f()}return"-"===a[a.length-1]&&a.splice(a.length-1,1),{menus:a,onChange:function(e,t){"none"===e&&t?null==i||i.execCommand("removeStat",{viewId:r.get("uuid"),fieldId:n.get("uuid")}):null==i||i.execCommand("updateStat",{viewId:r.get("uuid"),fieldId:n.get("uuid"),type:e}),null==o||o.close("stat-option")}}}(t),o=i.menus,a=i.onChange;return u.a.createElement("div",{className:"lakex-table-stats-option-list"},o.map((function(e,t){if("-"===e)return u.a.createElement("div",{key:t,className:"lakex-table-stats-option-seperator"});var i=e.type,o=e.text;return i?u.a.createElement("div",{key:i,className:"lakex-table-stats-option-item",onClick:function(){a(i,n)}},i===r?u.a.createElement(X$e,{type:"Check",size:14}):u.a.createElement("span",{className:"lakex-table-stats-empty"}),o):null})))},wPt=Object.defineProperty,_Pt=Object.getOwnPropertyDescriptor,xPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?_Pt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&wPt(t,n,o),o},kPt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._statControllerService.onClick((function(t){var n=t.view,r=t.field,i=t.stat,o=t.target;e._modalService.open("stat-option",{position:{placement:"top",origin:o},initialState:{view:n,field:r,stat:i}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"stat-option",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:bPt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();kPt.pluginName="workbench-statistics",xPt([Yf(z9e)],kPt.prototype,"_modalService",2),xPt([Yf(Wgt)],kPt.prototype,"_statControllerService",2),kPt=xPt([Gf({contrib:[Z8e,H9e]})],kPt);var CPt=Object.defineProperty,SPt=Object.getOwnPropertyDescriptor,OPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?SPt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&CPt(t,n,o),o},EPt=function(){return ox((function e(){rx(this,e),this.supportTypes=[xO.TEXT,xO.NUMBER,xO.DATE,xO.EMAIL,xO.PHONE,xO.LINK]}),[{key:"getColors",value:function(){return[["empty","blue-6","magenta-6","orange-6","pea-green-6","purple-6"],["grey-6","red-6","green-6","yellow-6","cyan-6","brown-6"]]}},{key:"isSupport",value:function(e){var t=this._fieldService.getField(e);return!!this.supportTypes.includes(t.get("type"))}},{key:"getCellColor",value:function(e,t){var n,r=this._viewService.getActiveView(),i=this._viewConfigService.getViewConfig(r.get("uuid"));return null==(n=JSON.parse((null==i?void 0:i.get("text_colors"))||"{}")[t])?void 0:n[e]}},{key:"isSelectionValid",value:function(){var e,t,n,r,i=null==(e=this._selectionService)?void 0:e.getSelection();if((null==(t=this._selectionService)?void 0:t.isColSelection())&&(null==(n=this._selectionService)?void 0:n.getSelectAnchorTarget())){var o=null==(r=this._selectionService)?void 0:r.getFieldId(i);if(this.isSupport(o))return!0}return!1}}])}();OPt([Yf(yot),If()],EPt.prototype,"_selectionService",2),OPt([Yf(NM)],EPt.prototype,"_fieldService",2),OPt([Yf(CA)],EPt.prototype,"_viewService",2),OPt([Yf(uA)],EPt.prototype,"_viewConfigService",2),EPt=OPt([Gf()],EPt);var IPt=function(e){var t=function(e){var t=e.initialState,n=t.fieldId,r=t.recordIds,i=SWe(Lj),o=SWe(EPt),a=jF(Object(l.useState)("empty"),2),u=a[0],c=a[1];return Object(l.useEffect)((function(){c(1===r.length?o.getCellColor(n,r[0]):"empty")}),[n,r]),{colors:o.getColors(),activeColor:u,onChange:function(e){"empty"===e?null==i||i.execCommand("removeTextColor",{fieldId:n,recordIds:r}):null==i||i.execCommand("updateTextColor",{color:e,fieldId:n,recordIds:r}),c(e)}}}(e),n=t.colors,r=t.activeColor,i=t.onChange;return u.a.createElement("div",{className:"lakex-table-text-color-picker"},u.a.createElement(OWe,{colorSource:n,activeColor:r,onSelect:i}))},PPt=Object.defineProperty,MPt=Object.getOwnPropertyDescriptor,RPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?MPt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&PPt(t,n,o),o},APt=function(){return ox((function e(){rx(this,e),this._modalId="text-color-picker"}),[{key:"isReadonly",get:function(){return!this._abilityService.canUpdate(Qj.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e,t=this;null==(e=this._selectionService)||e.onChange((function(e){t._modalService.isModalVisible(t._modalId)?t.openModal():e.selection||t.closeModal()}))}},{key:"openModal",value:function(){var e,t,n,r,i;if(!this._modalService.isModalVisible("context-menu-modal")){var o=null==(e=this._selectionService)?void 0:e.getSelection();if(null==(t=this._selectionService)?void 0:t.isColSelection()){var a=null==(n=this._selectionService)?void 0:n.getSelectAnchorTarget();if(a){var l=null==(r=this._selectionService)?void 0:r.getFieldId(o);if(!this._textColorSerivce.isSupport(l))return void this.closeModal();var u=null==(i=this._selectionService)?void 0:i.getRecordIds(o);this._modalService.open(this._modalId,{position:{origin:a,placement:"top"},initialState:{fieldId:l,recordIds:u}})}}else this.closeModal()}}},{key:"closeModal",value:function(){this._modalService.close(this._modalId)}},{key:"registerModal",value:function(e){e.registerItem({id:this._modalId,mode:V9e.MODAL,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",disableClickAwayClose:!0,RenderComponent:IPt})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"textColor",name:wx("文本颜色"),icon:"TextColor",hotkey:i$e.adapterHotKey("⌘+Shift+E"),visible:function(){return t._isVisible()},onClick:function(e){t._modalService.close("context-menu-modal"),t.openModal()}})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"textColorHotkey",hotkey:"⌘+shift+E",name:wx("文本颜色"),enableOnInput:!1,isEnable:function(){return t._isVisible()},onHotKey:function(e){e.preventDefault(),e.stopPropagation(),t._modalService.isModalVisible(t._modalId)?t.closeModal():t.openModal()}})}},{key:"_isVisible",value:function(){return!this.isReadonly&&this.currentViewType===WO.GRID&&this._textColorSerivce.isSelectionValid()}}],[{key:"pluginModule",value:function(){return ch().register(EPt).register(this)}}])}();APt.pluginName="workbench-text-color",RPt([Yf(XA)],APt.prototype,"_readService",2),RPt([Yf(z9e)],APt.prototype,"_modalService",2),RPt([Yf(yot),If()],APt.prototype,"_selectionService",2),RPt([Yf(hD)],APt.prototype,"_abilityService",2),RPt([Yf(EPt)],APt.prototype,"_textColorSerivce",2),APt=RPt([Gf({contrib:[Z8e,H9e,rmt,jot,i9e]})],APt);var jPt=Object(l.forwardRef)((function(e,t){var n=SWe(r9e),r=SWe(RC),i=SWe(cT),o=SWe(Aze),a=n.Buttons,c=qYe(),s=Object(l.useRef)(null),d=Object(l.useRef)(),f=Object(l.useRef)(0);P$e((function(){var e=i.onDataLoaded((function(){c()})),t=i.onDataChanged((function(){c()}));return function(){e.destroy(),t.destroy()}}),[]),P$e((function(){var e=null==o?void 0:o.onStatusChange((function(){c()}));return function(){null==e||e.destroy()}}),[o]),P$e((function(){if(s.current)return d.current=new ResizeObserver((function(e){var t=e[0].contentRect.height;f.current!==t&&(f.current=e[0].contentRect.height,window.dispatchEvent(new CustomEvent("lakex_table_view_resize")))})),d.current.observe(s.current),function(){var e;null==(e=d.current)||e.disconnect()}}),[]),Object(l.useImperativeHandle)(t,(function(){return{refresh:c}}));var h=n.filterVisibleButtons(r.getValue("toolbar.topLeft")),p=n.filterVisibleButtons(r.getValue("toolbar.topRight")),v=n.filterVisibleButtons(r.getValue("toolbar.left")),g=n.filterVisibleButtons((null==o?void 0:o.isActive)?r.getValue("toolbar.right"):[]),m=r.getValue("toolbar.mode"),y=0!==h.length||0!==p.length;return u.a.createElement("div",{ref:s,className:"lakex-workbench-toolbar-container"},u.a.createElement("div",{className:F()("lakex-table-workbench-toolbar",{"lakex-table-workbench-toolbar-multi-row":y})},(h.length>0||p.length>0)&&u.a.createElement("div",{className:"lakex-table-workbench-toolbar-top-section"},u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},h.length>0?u.a.createElement(a,{buttons:h,mode:m}):null),u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},p.length>0?u.a.createElement(a,{buttons:p,mode:m}):null)),(v.length>0||g.length>0)&&u.a.createElement("div",{className:"lakex-table-workbench-toolbar-main-section"},u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},v.length>0?u.a.createElement(a,{buttons:v,mode:m}):null),u.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},g.length>0?u.a.createElement(a,{buttons:g,mode:m}):null))))})),DPt=Object.defineProperty,TPt=Object.getOwnPropertyDescriptor,FPt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){e.registerRender(jPt)}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"toolbar",type:"object",title:"工具栏",properties:{left:{type:"array",description:"左侧工具栏"},right:{type:"array",description:"右侧工具栏"},topLeft:{type:"array",description:"左上工具栏"},topRight:{type:"array",description:"右上工具栏"},mode:{type:"string",description:"展示模式",enum:Object.values(l9e)}}}),e.registerDefaultValue({"toolbar.mode":l9e.NORMAL})}}])}();FPt.pluginName="workbench-toolbar",FPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?TPt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&DPt(t,n,o),o}([Gf({contrib:[Z8e,i9e]})],FPt);var NPt=function(e){var t=e.initialState,n=SWe(XA),r=SWe(z9e),i=t.recordId,o=n.getActiveViewId(),a=n.getViewConfig(o),c=null==a?void 0:a.get("start_date_field_uuid"),s=null==a?void 0:a.get("end_date_field_uuid"),d=null==a?void 0:a.get("date_title_field_uuid"),f=(null==a?void 0:a.get("date_color_type"))===FO.FOLLOW_FIELD&&(null==a?void 0:a.get("date_color")),h=Qat(i,d||"").title,v=SWe(Xze);if(!c||!s)return null;var g=n.getAllViewFields(o),m=xC(g,(function(e){return e.get("field_uuid")===d}))||g.get(0),y=xC(g,(function(e){return e.get("field_uuid")===f})),b=Object(l.useMemo)((function(){return kC(g,(function(e){return e.get("field_uuid")===c||e.get("field_uuid")===s}))}),[g,c,s]),w=Zc(y?[m,y].concat(Q_(b)):[m].concat(Q_(b)),(function(e,t){return e.get("field_uuid")===t.get("field_uuid")}));return u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal"},u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-header"},u.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-title"},h||wx("未命名日程")),u.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-expand",onClick:function(){r.close("calendar-edit-modal"),null==v||v.emitClickRecord({recordId:i})}},u.a.createElement(j4e,{title:wx("展开")},u.a.createElement(X$e,{type:"RowExpand"})))),w.map((function(e,t){var n=e.get("field");if(!n)return null;var o=n.get("uuid");return u.a.createElement("div",{key:o},u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label"},u.a.createElement(IOt,{type:n.get("type")}),u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label-name"},n.get("name"))),u.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-content"},u.a.createElement(EOt,{key:n.get("type")+o,recordId:i,field:n,focus:0===t,suffixIcon:null,allowClear:!1,renderMode:Pze.NORMAL,onCellChange:function(e){o!==c&&o!==s||requestAnimationFrame((function(){var e=document.querySelector('.lakex-view-calendar-schedule-line[data-id="'.concat(i,'"]'));e?r.open("calendar-edit-modal",{position:{origin:e,placement:"bottomLeft"},initialState:{recordId:i}}):(r.close("calendar-edit-modal"),p.b.warning(wx("该日程被隐藏")))}))}})))})))};function LPt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BPt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LPt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LPt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var VPt=function(e){var t=e.schedule,n=SWe(XA),r=n.getActiveViewId(),i=n.getViewConfig(r),o=null==i?void 0:i.get("date_title_field_uuid"),a=Qat(t.id,o||"").title;return u.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-title","data-not-title":!a},a||wx("添加日程标题"))},zPt=function(e){var t=e.readonly,n=e.schedule,r=e.colors,i=e.modalRef,o=SWe(Xze),a=vK({id:n.id}),c=a.attributes,s=a.listeners,d=a.setNodeRef,f=a.transform,h=a.transition,p=a.isDragging,v=jF(Object(l.useState)(!1),2),g=v[0],m=v[1],y={transform:M$e.Transform.toString(f),transition:h,zIndex:p?"100":"auto",opacity:p?.3:1,backgroundColor:g?r.lite:r.normal,color:r.text};return u.a.createElement("div",BPt(BPt(BPt({ref:t?void 0:d,className:"lakex-table-view-calendar-more-modal-item"},c),s),{},{style:y,onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onClick:function(e){null==o||o.emitClickEvent({eventName:"selectSchedule",data:{recordId:n.id,event:e,position:{origin:i.current,placement:"rightTop"}}})}}),u.a.createElement(VPt,{schedule:n}))},HPt=function(e){var t=e.initialState,n=SWe(tmt),r=SWe(z9e),i=SWe(pht),o=SWe(Lj),a=SWe(XA),c=!Gat(Qj.RECORD).canUpdate(),s=Object(l.useRef)(null),d=t.date,f=t.scheduleList,h=jF(Object(l.useState)(f),2),p=h[0],v=h[1],g=a.getViewConfig(),m=(null==g?void 0:g.get("date_color_type"))||FO.CUSTOM,y=(null==g?void 0:g.get("date_color"))||"",b=a.getFieldOptions(y),w=Object(l.useMemo)((function(){var e={};return m===FO.FOLLOW_FIELD&&y&&OC(b,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[m,y,b]),_=null==d?void 0:d.weekday(),x=qY($Y(G$,{activationConstraint:{distance:8}})),k=Object(l.useCallback)(function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.active,r=t.over,n.id===r.id){e.next=4;break}return e.next=4,null==i?void 0:i.updateRecordOrder(n.id,r.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,r]);return P$e((function(){var e=o.onDidExecuteCommand((function(e){if("changeRecordOrder"===e.context.commandName){var t=a.getViewConfig(),r=a.getViewRecords(),i=n.getCurrentDate(t),o=n.getCalendarDate(i),l=n.getDateRows(o),u=n.getSchedules(r,t,o),c=n.getDateScheduleMap(l,u),s=n.sortScheduleList(d,u,c);v(s)}}));return function(){e.destroy()}}),[]),u.a.createElement("div",{ref:s,className:"lakex-table-view-calendar-more-modal"},u.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-header"},u.a.createElement("span",null,wx("".concat(d.format("M月D日")," 星期").concat(["一","二","三","四","五","六","日"][_]))),u.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-close",onClick:function(){null==r||r.close("calendar-more-modal")}},u.a.createElement(X$e,{type:"Close",size:12}))),u.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-content"},u.a.createElement(Rq,{sensors:x,modifiers:[xK,wK],collisionDetection:n$,onDragEnd:k},u.a.createElement(uK,{items:p,strategy:oK},p.map((function(e){var t=n.getScheduleColor(e,m,y,w);return u.a.createElement(zPt,{key:e.id,readonly:!!c,schedule:e,colors:t,modalRef:s})}))))))},WPt=function(e){e.initialState;var t=SWe(iHe),n=function(){var e=SWe(XA),t=SWe(Lj),n=e.getViewConfig(),r=jF(Object(l.useState)(e.getAllFields()),2),i=r[0],o=r[1],a=Object(l.useMemo)((function(){var e=kC(i,(function(e){return YO.isDateLike(e.get("type"))}));return 0===e.length?[{name:wx("新增一个日期列"),value:"",type:xO.DATE}]:OC(e,(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[i]),u=Object(l.useMemo)((function(){return OC(kC(i,(function(e){return YO.isSelect(e.get("type"))})),(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[i]),c=[{name:wx("自定义颜色"),icon:"EditorCellBgColor",value:FO.CUSTOM},{name:wx("跟随字段颜色"),icon:"FieldSelect",value:FO.FOLLOW_FIELD}],s=Object(l.useMemo)((function(){var e;return(null==(e=xC(i,(function(e){return e.get("uuid")===(null==n?void 0:n.get("start_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[i,n]),d=Object(l.useMemo)((function(){var e;return(null==(e=xC(i,(function(e){return e.get("uuid")===(null==n?void 0:n.get("end_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[i,n]),f=Object(l.useMemo)((function(){var e;return(null==(e=xC(i,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_title_field_uuid"))})))?void 0:e.get("uuid"))||null}),[i,n]),h=jF(Object(l.useState)((null==n?void 0:n.get("show_lunar"))||!1),2),p=h[0],v=h[1],g=jF(Object(l.useState)((null==n?void 0:n.get("sunday_at_first"))||!1),2),m=g[0],y=g[1],b=jF(Object(l.useState)((null==n?void 0:n.get("date_color_type"))||FO.CUSTOM),2),w=b[0],_=b[1],x=Object(l.useMemo)((function(){var e;return w===FO.FOLLOW_FIELD?(null==(e=xC(i,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_color"))})))?void 0:e.get("uuid"))||"":(null==n?void 0:n.get("date_color"))||Ntt[0][0]}),[i,n,w]);return{dateFieldOptions:a,selectFieldOptions:u,colorTypeOptions:c,fields:i,startDateFieldId:s,endDateFieldId:d,titleFieldId:f,showLunar:p,sundayAtFirst:m,colorType:w,colorId:x,onStartDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"start"}),o(e.getAllFields())},onEndDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"end"}),o(e.getAllFields())},onTitleFieldChange:function(n){t.execCommand("updateScheduleTitle",{titleId:n}),o(e.getAllFields())},onShowLunarChange:function(e){t.execCommand("showLunar",{show:e}),v(e)},onColorTypeChange:function(e){t.execCommand("updateScheduleColorType",{type:e}),_(e)},onColorChange:function(n){t.execCommand("updateScheduleColor",{type:FO.CUSTOM,colorId:n}),o(e.getAllFields())},onColorFieldChange:function(n){t.execCommand("updateScheduleColor",{type:FO.FOLLOW_FIELD,colorId:n}),o(e.getAllFields())},onSundayAtFirstChange:function(e){t.execCommand("sundayAtFirst",{value:e}),y(e)}}}(),r=n.dateFieldOptions,i=n.selectFieldOptions,o=n.colorTypeOptions,a=n.fields,c=n.startDateFieldId,s=n.endDateFieldId,d=n.titleFieldId,f=n.showLunar,h=n.sundayAtFirst,p=n.colorType,v=n.colorId,g=n.onStartDateChange,m=n.onEndDateChange,y=n.onTitleFieldChange,b=n.onShowLunarChange,w=n.onColorTypeChange,_=n.onColorChange,x=n.onColorFieldChange,k=n.onSundayAtFirstChange,C=SWe(PS),S=(null==C?void 0:C.getValue("modal.customModalContainer"))||document.body;return u.a.createElement("div",{className:"lakex-table-view-calendar-setting-modal"},u.a.createElement("div",{className:"title"},wx("日历配置")),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(X$e,{className:"icon",type:"Calendar"}),u.a.createElement("span",null,wx("标题展示"))),u.a.createElement(n1e,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),value:d,showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},placeholder:wx("请选择标题字段"),onChange:y,getPopupContainer:function(){return S}},OC(a,(function(e){var n=t.getFieldIcon(e.get("type"));return u.a.createElement(n1e.Option,{className:"select-option",label:e.get("name"),value:e.get("uuid"),key:e.get("uuid")},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.get("name")))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(X$e,{className:"icon",type:"Brush"}),u.a.createElement("span",null,wx("颜色显示"))),u.a.createElement(n1e,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),value:p,onChange:w,getPopupContainer:function(){return S}},o.map((function(e){return u.a.createElement(n1e.Option,{className:"select-option",value:e.value,key:e.value},u.a.createElement(X$e,{className:"icon",type:e.icon}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},p===FO.CUSTOM?u.a.createElement(OWe,{activeColor:v,colorSource:Ntt,onSelect:_}):u.a.createElement(n1e,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),value:v,placeholder:wx("请选择单选字段"),onChange:x,getPopupContainer:function(){return S}},i.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(n1e.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(X$e,{className:"icon",type:"FieldDate"}),u.a.createElement("span",null,wx("开始日期"))),u.a.createElement(n1e,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),value:c,placeholder:wx("请选择日期字段"),onChange:g,getPopupContainer:function(){return S}},r.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(n1e.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement(X$e,{className:"icon",type:"FieldDate"}),u.a.createElement("span",null,wx("结束日期"))),u.a.createElement(n1e,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),value:s,placeholder:wx("请选择日期字段"),onChange:m,getPopupContainer:function(){return S}},r.map((function(e){var n=t.getFieldIcon(e.type);return u.a.createElement(n1e.Option,{className:"select-option",value:e.value,key:e.value},n&&u.a.createElement(n,{className:"icon"}),u.a.createElement("span",null,e.name))})))),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label inline"},u.a.createElement("span",null,wx("农历及节假日")),u.a.createElement(j.a,{checked:f,onChange:b})),u.a.createElement("div",{className:"label inline"},u.a.createElement("span",null,wx("星期日在首位")),u.a.createElement(j.a,{checked:h,onChange:k}))))},UPt=Object.defineProperty,GPt=Object.getOwnPropertyDescriptor,YPt=function(e,t,n,r){for(var i,o=r>1?void 0:r?GPt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&UPt(t,n,o),o},$Pt=function(){return ox((function e(){rx(this,e)}),[{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"init",value:function(){var e=this;this._renderService.onClickEvent((function(t){if("selectSchedule"===t.eventName){var n=t.data,r=n.event,i=n.recordId,o=n.position;e._modalService.open("calendar-edit-modal",{position:o||{origin:r.target,placement:"bottomLeft"},initialState:{recordId:i}})}if("showMoreSchedule"===t.eventName){var a=t.data,l=a.event,u=a.date,c=a.scheduleList;e._modalService.open("calendar-more-modal",{position:{origin:l.currentTarget,placement:"bottomLeft"},initialState:{date:u,scheduleList:c}})}}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"calendar-setting",icon:"Setting",tooltip:wx("日历配置"),visible:function(){var e=t._readService.getActiveView();return!(!e||t.isReadonly)&&(null==e?void 0:e.get("type"))===WO.CALENDAR},onClick:function(e){var n=e.target;t._modalService.open("calendar-setting-modal",{position:{origin:n,placement:"bottom"},initialState:{}})}})}},{key:"registerModal",value:function(e){e.registerItem({id:"calendar-setting-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:WPt}),e.registerItem({id:"calendar-edit-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:NPt}),e.registerItem({id:"calendar-more-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:HPt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();$Pt.pluginName="workbench-viewer-calendar",YPt([Yf(XA)],$Pt.prototype,"_readService",2),YPt([Yf(z9e)],$Pt.prototype,"_modalService",2),YPt([Yf(Xze)],$Pt.prototype,"_renderService",2),YPt([Yf(hD)],$Pt.prototype,"_abilityService",2),$Pt=YPt([Gf({contrib:[Z8e,i9e,H9e]})],$Pt);var qPt=function(){var e,t={schema:[{id:"add-chart",type:"radio",subType:"icon",options:(e=SWe(Uwt)).getChartPlugins().map((function(e){return{label:e.name,value:e.type,icon:e.icon}}))}],onChange:function(t,n){e.emitChartCreateClick(n)}},n=t.schema,r=t.onChange;return u.a.createElement("div",{className:"lakex-table-chart-add-modal"},u.a.createElement(_1e,{schema:n,onChange:r}))};var KPt=function(e){var t,n,r=e.filter;return r&&r.length&&(t=r,r={uuid:n=Cx(),type:"packet",parent_uuid:null,root_uuid:null,view_uuid:t[0].view_uuid,operator:t[0].operator,created_at:(new Date).getTime(),updated_at:(new Date).getTime(),filters:t.map((function(e){return e.packet_uuid=n,e}))}),u.a.createElement("div",{className:"lakex-table-chart-filter-modal"},u.a.createElement(yIt,{filter:e.filter,onChange:e.onChange}))};function XPt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JPt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XPt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XPt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZPt(e){var t=e.schema,n=e.defaultValues;return u.a.createElement("div",{className:"lakex-table-chart-edit-basic-config"},u.a.createElement(_1e,{defaultValues:n,schema:t,onChange:e.onChange}))}function QPt(e){var t=e.schema,n=e.defaultValues;return u.a.createElement("div",{className:"lakex-table-chart-edit-style-config"},u.a.createElement(_1e,{defaultValues:n,schema:t,onChange:e.onChange}))}var eMt=function(e){var t=e.initialState,n=SWe(z9e),r=SWe(Uwt),i=SWe(YEt),o=function(e){var t=SWe(Lj),n=SWe(z9e),r=SWe(Uwt),i=null==r?void 0:r.getChart(e.chartId),o=jF(Object(l.useState)((null==i?void 0:i.name)||""),2),a=o[0],u=o[1],c=jF(Object(l.useState)(null==i?void 0:i.filter),2),s=c[0],d=c[1],f=jF(Object(l.useState)(null==r?void 0:r.getChartConfig(e.chartId,e.chartType)),2),h=f[0],p=f[1],v=null==r?void 0:r.getChartSchema((null==e?void 0:e.chartId)||e.chartType,h);return{name:a,filter:s,config:h,recordIds:r.getRecordIds(s),basicSchema:null==v?void 0:v.basicSchema,styleSchema:null==v?void 0:v.styleSchema,onChange:function(e,t){h[e]=t,p(JPt({},h))},onNameChange:function(e,t){u(t||"")},onSubmit:function(){null==t||t.execCommand("upsertChart",{chart:{id:e.chartId,type:e.chartType,name:a,filter:s,config:h}}),null==n||n.close("chartAdd"),null==n||n.close("chartEdit")},onFilterClick:function(e){var t=e.target;null==n||n.open("chartFilter",{position:{origin:t,placement:"bottom"}})},onFilterChange:function(e){d(e)}}}(t),a=SWe(PS),c=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body,s={trigger:"click",overlayClassName:"lakex-table-chart-edit-filter-overlay",content:u.a.createElement(KPt,{filter:o.filter,onChange:o.onFilterChange}),getPopupContainer:function(){return c}},d=u.a.createElement(H$e,JPt({},s),u.a.createElement("span",{className:"lakex-table-chart-edit-filter",onClick:o.onFilterClick},u.a.createElement(X$e,{type:"ViewerFilter"}),wx("添加")));o.filter&&(d=u.a.createElement(H$e,JPt({},s),u.a.createElement("span",{className:"lakex-table-chart-edit-filter",onClick:o.onFilterClick},u.a.createElement(X$e,{type:"ViewerFilter"}),wx("$1个筛选",i.countFields(o.filter)))));var f=[{label:wx("基础配置"),key:"basicConfig",children:u.a.createElement("div",{className:"lakex-table-chart-edit-common-config"},u.a.createElement(_1e,{defaultValues:{name:o.name},schema:[{id:"name",type:"input",title:"图表名称"},{id:"filter",type:"button",title:"数据筛选",children:d}],onChange:o.onNameChange}),u.a.createElement(ZPt,{defaultValues:o.config,schema:o.basicSchema,onChange:o.onChange}))},{label:wx("样式配置"),key:"styleConfig",children:u.a.createElement(QPt,{defaultValues:o.config,schema:o.styleSchema,onChange:o.onChange})}];return u.a.createElement("div",{className:"lakex-table-chart-edit-modal"},u.a.createElement("div",{className:"lakex-table-chart-edit-body"},u.a.createElement("div",{className:"lakex-table-chart-edit-chart"},o.name&&u.a.createElement("div",{className:"lakex-table-chart-edit-chart-title"},o.name),null==r?void 0:r.render(t.chartType,o.config,o.recordIds,o.filter)),u.a.createElement("div",{className:"lakex-table-chart-edit-config"},u.a.createElement("div",{className:"lakex-table-chart-edit-tabs"},u.a.createElement(Y5,{items:f})),u.a.createElement("div",{className:"lakex-table-chart-edit-submit"},u.a.createElement(aXe,{onClick:o.onSubmit},wx("确定"))))),u.a.createElement("span",{className:"lakex-table-chart-edit-close",onClick:function(){return null==n?void 0:n.close("chartEdit")}},u.a.createElement(X$e,{type:"Close"})))},tMt=function(e){var t=e.initialState,n=SWe(Lj),r=SWe(z9e),i=[{id:"chart-edit",title:wx("编辑图表"),type:"button",onClick:function(e){null==r||r.close("chartMenu"),null==r||r.open("chartEdit",{initialState:{chartId:t.chartId,chartType:t.chartType}})}},{id:"chart-copy",title:wx("复制图表"),type:"button",onClick:function(){null==n||n.execCommand("copyChart",{chartId:t.chartId}),null==r||r.close("chartMenu")}},{id:"chart-delete",title:wx("删除图表"),type:"button",isDanger:!0,onClick:function(){null==n||n.execCommand("removeChart",{chartId:t.chartId}),null==r||r.close("chartMenu")}}];return u.a.createElement("div",{className:"lakex-table-chart-menu-modal"},u.a.createElement(_1e,{schema:i,onChange:function(){}}))},nMt=Object.defineProperty,rMt=Object.getOwnPropertyDescriptor,iMt=function(e,t,n,r){for(var i,o=r>1?void 0:r?rMt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&nMt(t,n,o),o},oMt=function(){return ox((function e(){var t=this;rx(this,e),this.handleFullscreenChanged=function(e){document.fullscreenElement?console.log("Element: ".concat(document.fullscreenElement.id," entered fullscreen mode.")):(t._themeService.setTheme(t._currentTheme),t.offEvent(),t.removeStyle())}}),[{key:"requestFullscreen",value:function(){this._el=this._renderService.getCurrentViewNode(WO.CHART),this._el.requestFullscreen=this._el.requestFullscreen||this._el.msRequestFullscreen||this._el.mozRequestFullScreen||this._el.webkitRequestFullscreen,this._el.addEventListener("fullscreenchange",this.handleFullscreenChanged),this._el.requestFullscreen&&(this._el.requestFullscreen(),this.addStyle(),this._currentTheme=this._themeService.getCurrent(),this._themeService.setTheme(FF.dark))}},{key:"addStyle",value:function(){var e=this._el.querySelector(".lakex-table-chart-view-container");e&&(e.style.background="linear-gradient(to top, rgb(35, 37, 38), rgb(65, 67, 69))")}},{key:"removeStyle",value:function(){var e=this._el.querySelector(".lakex-table-chart-view-container");e&&e.style.removeProperty("background")}},{key:"exitFullscreen",value:function(){document.exitFullscreen()}},{key:"offEvent",value:function(){this._el&&this._el.removeEventListener("fullscreenchange",this.handleFullscreenChanged)}},{key:"destroy",value:function(){this.offEvent()}}])}();iMt([Yf(Xze)],oMt.prototype,"_renderService",2),iMt([Yf(TF)],oMt.prototype,"_themeService",2),iMt([Df()],oMt.prototype,"destroy",1),oMt=iMt([Gf()],oMt);var aMt=Object.defineProperty,lMt=Object.getOwnPropertyDescriptor,uMt=function(e,t,n,r){for(var i,o=r>1?void 0:r?lMt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&aMt(t,n,o),o},cMt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._chartRenderService.onChartSettingClick((function(t){var n;null==(n=e._modalService)||n.open("chartMenu",t)})),this._chartRenderService.onChartCreateClick((function(t){var n;null==(n=e._modalService)||n.open("chartEdit",{initialState:{chartType:t.chartType}}),e._modalService.close("chartAdd")}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"chart-fullscreen",icon:"Present",tooltip:wx("全屏演示"),visible:function(){var e=t._readService.getActiveView();return[WO.CHART].includes(null==e?void 0:e.get("type"))},onClick:function(){t._chartFullscreenService.requestFullscreen()}}),e.registerItem({id:"chart-add",icon:"Add",iconSize:16,tooltip:wx("添加组件"),visible:function(){var e=t._readService.getActiveView();if(!e)return!1;var n=e.get("type");return t._abilityService.canCreate(Qj.RECORD)&&[WO.CHART].includes(n)},showTitle:!0,showTooltip:!1,onClick:function(e){var n={position:{placement:"bottom",origin:e.target}};t._modalService.open("chartAdd",n)}})}},{key:"registerModal",value:function(e){e.registerItem({id:"chartAdd",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:qPt}),e.registerItem({id:"chartEdit",hasMask:!0,scrollStrategy:"block",zIndex:"modalFromToolbar",mode:V9e.MODAL,position:{left:"50%",top:"50%"},hasAnimation:!0,RenderComponent:eMt}),e.registerItem({id:"chartMenu",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:tMt})}}],[{key:"pluginModule",value:function(){return ch().contribution(Lwt).register(oMt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerChart",type:"object",title:"图表视图配置",properties:{list:{type:"array",description:"开启的图表"}}}),e.registerDefaultValue({"viewerChart.list":[ubt.type,Ewt.type]})}}])}();cMt.pluginName="workbench-viewer-chart",uMt([Yf(z9e)],cMt.prototype,"_modalService",2),uMt([Yf(XA)],cMt.prototype,"_readService",2),uMt([Yf(hD)],cMt.prototype,"_abilityService",2),uMt([Yf(Uwt)],cMt.prototype,"_chartRenderService",2),uMt([Yf(oMt)],cMt.prototype,"_chartFullscreenService",2),cMt=uMt([Gf({contrib:[Z8e,H9e,i9e]})],cMt);var sMt=function(){var e=SWe(XA),t=SWe(Lj),n=kC(e.getAllViewFields(),(function(e){var t;return(null==(t=e.get("field"))?void 0:t.get("type"))===xO.IMAGE}))||[],r=null==e?void 0:e.getViewConfig();return{options:[{label:wx("无封面"),value:null,icon:u.a.createElement(X$e,{type:"Clear",size:14})}].concat(Q_(OC(n,(function(e){var t=e.get("field");return{label:null==t?void 0:t.get("name"),value:null==t?void 0:t.get("uuid"),icon:u.a.createElement(X$e,{type:"FieldImage"})}})))),defaultValue:(null==r?void 0:r.get("cover_field_uuid"))||null,onCoverSourceChange:function(n){var r;null==t||t.execCommand("updateCoverSource",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),coverFieldId:n})}}},dMt=function(){var e=sMt(),t=e.options,n=e.defaultValue,r=SWe(z9e),i=Object(l.useMemo)((function(){return[{key:"cover-source",title:wx("封面来源"),options:t,defaultValue:n}]}),[t,n]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(IEt,{list:i,onSelect:function(e){r.open("view-field-cover-source",{position:{placement:"bottom"},initialState:{options:e.options,defaultValue:e.defaultValue}})}}))},fMt=function(){var e,t=SWe(XA),n=SWe(Lj);return{options:[{label:wx("适应"),value:DO.Fit},{label:wx("裁剪"),value:DO.Clip}],coverDisplay:null==(e=null==t?void 0:t.getViewConfig())?void 0:e.get("cover_display"),viewFields:(null==t?void 0:t.getViewFields())||[],onCoverDisplayChange:function(e){var r;null==n||n.execCommand("updateCoverDisplay",{viewId:null==(r=null==t?void 0:t.getActiveView())?void 0:r.get("uuid"),coverDisplay:e})}}},hMt=function(){var e=fMt(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay,i=Object(l.useMemo)((function(){return[{key:"cover-display",title:wx("封面效果"),options:t,defaultValue:r||DO.Clip}]}),[t,r]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(EEt,{list:i,onChoose:function(e,t){n(t.value)}}))},pMt=function(){var e=SWe(XA),t=SWe(Lj);return{viewConfig:null==e?void 0:e.getViewConfig(),onShowFieldChange:function(n){var r;null==t||t.execCommand("updateShowFieldName",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),showFieldName:n})}}},vMt=function(){var e=pMt(),t=e.viewConfig,n=e.onShowFieldChange,r=Object(l.useMemo)((function(){return[{key:t.get("uuid"),title:wx("显示字段名"),checked:!!t.get("show_field_name")}]}),[t]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(SEt,{list:r,onSwitch:function(e,t){n(t)}}))},gMt=function(){var e=SWe(iHe),t=SWe(Lj),n=SWe(z9e),r=Zat();return{readonly:!Gat(Qj.RECORD).canUpdate(),viewFields:r,onFieldHiddenChange:function(e,n,r){null==t||t.execCommand("updateFieldHidden",{viewId:e,fieldId:n,hidden:r})},openConfigMenu:function(e,t,r){var i;null==n||n.open("view-field-action",{position:{origin:e.target,placement:"rightTop"},initialState:{fieldId:t.get("field_uuid"),fieldName:null==(i=t.get("field"))?void 0:i.get("name"),target:e.target,disableDel:r}})},fieldService:e}},mMt=function(){var e,t=gMt(),n=t.viewFields,r=t.onFieldHiddenChange,i=t.fieldService,o=kC(n,(function(e){return!e.get("hidden")}));1===o.length&&(e=o[0]);var a=Object(l.useMemo)((function(){return OC(n,(function(t){var n=t.get("field");if(!n)return null;var r=(null==i?void 0:i.getFieldIcon(n.get("type")))||null,o=t.get("hidden"),a=(null==e?void 0:e.uuid)===t.get("uuid");return{key:t.get("uuid"),title:n.get("name"),checked:!o,icon:r?u.a.createElement(r,null):null,disabled:a}})).filter((function(e){return!!e}))}),[n]);return u.a.createElement("div",{className:"lakex-table-view-setting-fields"},u.a.createElement(SEt,{list:a,onSwitch:function(e,t){var i=xC(n,(function(t){return t.get("uuid")==e.key}));i&&r(i.get("view_uuid"),i.get("field_uuid"),!t)}}))},yMt=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return u.a.createElement("div",{className:"lakex-table-h5-viewer-setting"},(null==n?void 0:n.includes("cover"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(dMt,null),u.a.createElement(hMt,null)),(null==n?void 0:n.includes("showField"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(vMt,null)),n.includes("fields")&&u.a.createElement(mMt,null))},bMt=function(e){var t=e.initialState,n=SWe(z9e);return u.a.createElement(u.a.Fragment,null,u.a.createElement(mEt,{title:t.title,onClose:function(){n.close("view-field-setting")},showCloseIcon:!0},u.a.createElement(yMt,{settings:t.settings})))},wMt=function(e){var t=e.initialState,n=sMt().onCoverSourceChange,r=SWe(z9e),i=function(){r.close("view-field-cover-source")},o=Object(l.useMemo)((function(){return t.options.map((function(e){return{key:e.value||"",icon:e.icon,title:e.label||""}}))}),[t.options]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(mEt,{title:wx("请选择"),onClose:i,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:t.defaultValue||"",list:o,onCheck:function(e){n(e.key),i()}})))},_Mt=function(e){var t=e.initialState,n=function(e){var t=e.fieldId,n=e.target,r=e.disableDel,i=SWe(z9e),o=SWe(Lj);return{items:[{key:"field-edit",icon:"Edit",name:wx("编辑"),onClick:function(){null==i||i.close("view-field-action"),null==i||i.open("addOrUpdateField",{position:{origin:n,placement:"rightTop"},initialState:{fieldId:t}})}},{key:"field-del",icon:"Delete",name:wx("删除"),onClick:function(){r||(null==o||o.execCommand("removeField",{fieldId:t}),null==i||i.close("view-field-action"))}}]}}({fieldId:t.fieldId,fieldName:t.fieldName,target:t.target,disableDel:t.disableDel}),r=n.items;return u.a.createElement(L$e,{mode:"vertical",className:"lakex-table-field-action"},r.map((function(e,n){return u.a.createElement(L$e.Item,{className:F()({disable:"field-del"===e.key&&t.disableDel}),key:e.key,icon:u.a.createElement("span",{className:"lakex-table-menu-icon"},u.a.createElement(X$e,{type:e.icon})),onClick:function(){var t;null==(t=e.onClick)||t.call(e)}},wx(e.name))})))},xMt=function(){var e=sMt(),t=e.options,n=e.defaultValue,r=e.onCoverSourceChange,i=SWe(PS),o=(null==i?void 0:i.getValue("modal.customModalContainer"))||document.body;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-source"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},wx("封面来源")),u.a.createElement(n1e,{defaultValue:n,dropdownClassName:"lakex-table-menu-container lakex-table-view-setting",onChange:r,suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),getPopupContainer:function(){return o}},t.map((function(e){return u.a.createElement(n1e.Option,{value:e.value,key:e.value,className:"column-select-option"},e.icon,e.label)}))))},kMt=function(){var e=fMt(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-display"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},wx("封面效果")),u.a.createElement(_.a.Group,{options:t,onChange:function(e){return n(e.target.value)},defaultValue:r,optionType:"button"}))},CMt=function(){var e=pMt(),t=e.viewConfig,n=e.onShowFieldChange;return u.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-show-name"},u.a.createElement("span",{className:"lakex-table-view-setting-title"},wx("显示字段名")),u.a.createElement(j.a,{defaultChecked:null==t?void 0:t.get("show_field_name"),onChange:n,size:"small"}))};function SMt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OMt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SMt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SMt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var EMt=function(e){var t=e.readonly,n=e.viewField,r=e.disable,i=e.OrderDragIcon,o=e.onFieldHiddenChange,a=e.openConfigMenu,l=SWe(iHe),c=n.get("field"),s=n.get("hidden"),d=n.get("field_uuid"),f=n.get("view_uuid"),h=vK({id:d}),p=h.attributes,v=h.listeners,g=h.setNodeRef,m=h.transform,y=h.transition,b=h.isDragging,w=c?null==l?void 0:l.getFieldIcon(c.get("type")):null,_=c?null==l?void 0:l.getFieldTagComponent(c.get("type")):null,x={transform:M$e.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return c?u.a.createElement("div",OMt(OMt({ref:t?void 0:g,className:"lakex-table-view-setting-field-item ".concat(s?"lakex-table-view-setting-disable":"")},p),{},{style:x}),i&&!t&&u.a.createElement("span",{className:"lakex-table-view-setting-drag-icon"},u.a.createElement(i,{listeners:v})),w?u.a.createElement(w,{className:"lakex-table-view-setting-field-icon"}):null,u.a.createElement("div",{className:"lakex-table-view-setting-field-name"},u.a.createElement("span",{className:"lakex-table-view-setting-field-name-content"},c.get("name")),_?u.a.createElement(_,{field:c,position:"viewerSetting"}):null),u.a.createElement("span",{className:"lakex-table-view-setting-operation-icon"},!r&&u.a.createElement(X$e,{type:s?"IconHide":"Preview",onClick:function(){return o(f,d,!s)}})),!t&&u.a.createElement(X$e,{className:"lakex-table-config-container lakex-table-view-setting-operation-icon",type:"MoreHorizontal",onClick:function(e){return a(e,n,r)}})):null},IMt=function(){var e,t=gMt(),n=t.readonly,r=t.viewFields,i=t.onFieldHiddenChange,o=t.openConfigMenu,a=function(e){var t=SWe(pht),n=t.OrderDragIcon,r=Object(l.useCallback)(function(){var e=aO(QC.mark((function e(n){var r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.active,i=n.over,r.id===i.id){e.next=4;break}return e.next=4,t.updateFieldOrder(r.id,i.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,e]);return{OrderDragIcon:n,onDragEnd:r}}(r),c=a.onDragEnd,s=a.OrderDragIcon,d=qY($Y(G$,{activationConstraint:{distance:8}})),f=Object(l.useMemo)((function(){return OC(r,(function(e){return{id:e.get("field_uuid")}}))}),[r]),h=kC(r,(function(e){return!e.get("hidden")}));return 1===h.length&&(e=h[0]),u.a.createElement("div",{className:"lakex-table-view-setting-fields"},u.a.createElement(Rq,{sensors:d,modifiers:[xK,wK],collisionDetection:n$,onDragEnd:c},u.a.createElement(uK,{items:f,strategy:oK},OC(r,(function(t){var r=t.get("field"),a=(null==e?void 0:e.get("uuid"))===t.get("uuid");return r?u.a.createElement(EMt,{key:t.get("field_uuid"),readonly:!!n,viewField:t,disable:a,OrderDragIcon:s,onFieldHiddenChange:i,openConfigMenu:o}):null})))))},PMt=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-setting"},(null==n?void 0:n.includes("cover"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(xMt,null),u.a.createElement(kMt,null),u.a.createElement("div",{className:"lakex-table-view-setting-hr"})),(null==n?void 0:n.includes("showField"))&&u.a.createElement(u.a.Fragment,null,u.a.createElement(CMt,null),u.a.createElement("div",{className:"lakex-table-view-setting-hr"})),n.includes("fields")&&u.a.createElement(IMt,null))},MMt=function(e){var t=e.initialState;return u.a.createElement("div",{className:"lakex-table-view-setting-modal"},u.a.createElement(PMt,{settings:t.settings}))},RMt=Object.defineProperty,AMt=Object.getOwnPropertyDescriptor,jMt=function(e,t,n,r){for(var i,o=r>1?void 0:r?AMt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&RMt(t,n,o),o},DMt=function(){return ox((function e(){var t=this;rx(this,e),this._getTitlte=function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===WO.GRID?wx("表格配置"):(null==e?void 0:e.get("type"))===WO.CARD?wx("画册配置"):(null==e?void 0:e.get("type"))===WO.KANBAN?wx("看板配置"):wx("字段配置")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"view-field-setting",icon:"Setting",tooltip:this._getTitlte,visible:function(){var e=t._readService.getActiveView();return!(!e||!t.isMobile&&t.isReadonly)&&[WO.GRID,WO.CARD,WO.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:function(e){var n=e.target;t._modalService.open("view-field-setting",{position:{origin:n,placement:"bottom"},initialState:t._getInitstate()})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-field-setting",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?bMt:MMt}),n===Eze.MOBILE&&e.registerItem({id:"view-field-cover-source",mode:V9e.DRAWER,hasMask:!0,hasAnimation:!0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:wMt}),e.registerItem({id:"view-field-action",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:_Mt})}},{key:"_getInitstate",value:function(){var e=this._readService.getActiveView();return e.get("type")===WO.GRID?{settings:["fields"],title:this._getTitlte()}:e.get("type")===WO.CARD?{settings:["cover","showField","fields"],title:this._getTitlte()}:e.get("type")===WO.KANBAN?{settings:["showField","fields"],title:this._getTitlte()}:{}}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();DMt.pluginName="workbench-viewer-field-setting",jMt([Yf(XA)],DMt.prototype,"_readService",2),jMt([Yf(z9e)],DMt.prototype,"_modalService",2),jMt([Yf(RC)],DMt.prototype,"_configuration",2),jMt([Yf(hD)],DMt.prototype,"_abilityService",2),DMt=jMt([Gf({contrib:[Z8e,i9e,H9e]})],DMt);var TMt=Rf.defineToken("ViewerFormManageContribution"),FMt=Object.defineProperty,NMt=Object.getOwnPropertyDescriptor,LMt=function(e,t,n,r){for(var i,o=r>1?void 0:r?NMt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&FMt(t,n,o),o},BMt=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.formManageProvider.getContributions();return e[e.length-1].registerFormManage()}},{key:"enableForm",value:function(e,t){return this.getProvider().enableForm(e,t)}}])}();LMt([gh(TMt)],BMt.prototype,"formManageProvider",2),BMt=LMt([Gf()],BMt);var VMt=Object.defineProperty,zMt=Object.getOwnPropertyDescriptor,HMt=function(e,t,n,r){for(var i,o=r>1?void 0:r?zMt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&VMt(t,n,o),o},WMt=function(){return ox((function e(){rx(this,e)}),[{key:"getShare",value:function(e){if(e)return this._readService.getViewShare(e)}},{key:"setModalPosition",value:function(e){this._position=e}},{key:"disableForm",value:(t=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:this._commandService.execCommand("upsertViewShare",{viewId:n.get("uuid"),status:MO.INACTIVE}),this._modalService.close("form-enabled-modal");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"enableForm",value:(e=aO(QC.mark((function e(t){var n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._readService.getView(t)){e.next=3;break}return e.abrupt("return");case 3:return r="create",this._readService.getViewShare(n.get("uuid"))&&(r="update"),e.next=7,this._formManageRegistry.enableForm(n.get("id"),r);case 7:i=e.sent,this._commandService.execCommand("upsertViewShare",{viewId:n.get("uuid"),status:MO.ACTIVE,src:i.src}),this._modalService.close("form-disabled-modal"),this._modalService.open("form-enabled-modal",{position:this._position});case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"isEnableManage",value:function(){return!this._configuration.getValue("form.manage.disable")}}]);var e,t}();HMt([Yf(XA)],WMt.prototype,"_readService",2),HMt([Yf(Lj)],WMt.prototype,"_commandService",2),HMt([Yf(z9e)],WMt.prototype,"_modalService",2),HMt([Yf(RC)],WMt.prototype,"_configuration",2),HMt([Yf(BMt)],WMt.prototype,"_formManageRegistry",2),WMt=HMt([Gf()],WMt);var UMt=function(e){var t=e.onEnable;return u.a.createElement("div",{className:"lakex-table-form-disabled-centered"},u.a.createElement(yqe,{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*5bdXSJkjvI0AAAAAAAAAAAAAARQnAQ",darkSrc:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eBesTrDkSP8AAAAAAAAAAAAAARQnAQ"}),u.a.createElement("div",{className:"lakex-table-form-disabled-title"},wx("表单收集未开启")),u.a.createElement("p",{className:"lakex-table-form-disabled-desc"},wx("点击「开启收集」按钮获得表单填写链接")),u.a.createElement("div",{className:"lakex-table-form-disabled-button"},u.a.createElement(aXe,{onClick:t,type:"primary"},wx("开启收集"))))},GMt=function(){var e,t,n,r=(e=Yat(),t=SWe(frt),n=SWe(WMt),{form:jF(Object(l.useState)(null==t?void 0:t.getForm(e.get("uuid"))),1)[0],onEnable:function(){n.enableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}),i=r.form,o=r.onEnable,a=r.isEnableManage;return u.a.createElement("div",{className:"lakex-table-form-modal"},u.a.createElement("div",{className:"lakex-table-form-model-content"},a&&u.a.createElement(UMt,{form:i,onEnable:o})))};function YMt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YMt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YMt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qMt={correct_level:"medium",content_point_type:"circle",positioning_point_type:"circle",positioning_point_color:"rgb(var(--lt-base-black))",content_point_scale:.5,content_point_opacity:.8,content_point_color:"rgb(var(--lt-base-black))"};function KMt(e){return u.a.createElement(GX,$Mt($Mt({},qMt),e))}var XMt=function(e){var t=function(e){var t,n=Gat(Qj.TABLE).canUpdate(),r=SWe(WMt),i=null==(t=null==r?void 0:r.getShare(e.form.get("uuid")))?void 0:t.get("src"),o="".concat(location.origin).concat(i);return{shareUrl:o,copyLink:function(e){e.preventDefault(),En()(o),p.b.success({content:wx("复制成功"),style:{zIndex:1050}})},canUpdate:n,onDisable:function(){var t;null==(t=e.onDisable)||t.call(e)}}}(e),n=t.shareUrl,r=t.copyLink,i=t.canUpdate,o=t.onDisable;return u.a.createElement("div",{className:"lakex-table-form-share-link"},i?u.a.createElement("div",{className:"lakex-table-form-share-link-title"},u.a.createElement("div",null,wx("获得链接的所有人，可填写并提交表单")),u.a.createElement("span",{className:"lakex-table-form-share-link-unlink"},wx("停止收集"),u.a.createElement(j.a,{onChange:o}))):null,u.a.createElement("div",{className:"lakex-table-form-share-link-content"},u.a.createElement(aXe.Group,null,u.a.createElement(zYe,{value:n,disabled:!0,className:"lakex-table-form-share-link-input"}),u.a.createElement(aXe,{type:"primary",onClick:r,className:"lakex-table-form-share-link-btn"},wx("复制填写链接"))),u.a.createElement("div",{className:"lakex-table-form-share-link-qrcode"},n?u.a.createElement(KMt,{url:n}):u.a.createElement("span",null),u.a.createElement("span",null,wx("使用钉钉扫码$1",wx(i?"分享":"打开"))))))},JMt=function(e){return u.a.createElement("div",{className:"lakex-table-form-enabled-centered"},u.a.createElement(XMt,{form:e.form,onDisable:e.onDisable}))},ZMt=function(){var e,t,n,r=(e=Yat(),t=SWe(frt),n=SWe(WMt),{form:jF(Object(l.useState)(null==t?void 0:t.getForm(e.get("uuid"))),1)[0],onDisable:function(){n.disableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}),i=r.form,o=r.onDisable,a=r.isEnableManage;return u.a.createElement("div",{className:"lakex-table-form-modal"},u.a.createElement("div",{className:"lakex-table-form-model-content"},a&&u.a.createElement(JMt,{form:i,onDisable:o})))},QMt=Object.defineProperty,eRt=Object.getOwnPropertyDescriptor,tRt=function(e,t,n,r){for(var i,o=r>1?void 0:r?eRt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&QMt(t,n,o),o},nRt=function(){return ox((function e(){rx(this,e),this._toDestroyCollection=new KC}),[{key:"init",value:function(){var e=this;this._toDestroyCollection.push(this._renderService.onClickEvent((function(t){if("clickFormManageButton"===t.eventName){var n=t.data.target,r=t.data.status,i={origin:n,placement:"bottomRight"};if(e._viewerFormManageService.setModalPosition(i),r!==rrt.COLLECTING)return void e._modalService.open("form-disabled-modal",{position:i});e._modalService.open("form-enabled-modal",{position:i})}})))}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:"form-enabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:ZMt}),e.registerItem({id:"form-disabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:GMt})}}],[{key:"pluginModule",value:function(){return ch().contribution(TMt).register(this).register(WMt).register(BMt)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"form",type:"object",properties:{manage:{type:"object",properties:{disable:{type:"boolean"}}}}})}}])}();nRt.pluginName="workbench-viewer-form-manage",tRt([Yf(Xze)],nRt.prototype,"_renderService",2),tRt([Yf(z9e)],nRt.prototype,"_modalService",2),tRt([Yf(WMt)],nRt.prototype,"_viewerFormManageService",2),nRt=tRt([Gf({contrib:[Z8e,i9e,H9e]})],nRt);var rRt=Object.defineProperty,iRt=Object.getOwnPropertyDescriptor,oRt=function(e,t,n,r){for(var i,o=r>1?void 0:r?iRt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&rRt(t,n,o),o},aRt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._renderService.onClickEvent((function(t){var n;if("fieldConfigClick"===t.eventName){var r=t.data,i=r.e,o=r.viewField;e._modalService.open("addOrUpdateField",{position:{origin:i.target,placement:"bottom"},initialState:{fieldId:o.get("field_uuid"),showFieldTypes:null==(n=OO)?void 0:n.filter((function(e){var t;return!YO.isSystemType(e.type)&&e.type!==(null==(t=o.get("field"))?void 0:t.get("type"))})).map((function(e){return e.type}))}})}}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"create-form",icon:"FormView",tooltip:wx("生成表单"),visible:function(){var e=t._readService.getActiveView();return[WO.GRID,WO.CARD,WO.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:function(){var e,n=Cx(32);t._commandService.execCommand("addView",{uuid:n,type:WO.FORM}),null==(e=t._openerService)||e.open("view",n)}})}},{key:"destroy",value:function(){}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();aRt.pluginName="workbench-viewer-form",oRt([Yf(z9e)],aRt.prototype,"_modalService",2),oRt([Yf(Xze)],aRt.prototype,"_renderService",2),oRt([Yf(XA)],aRt.prototype,"_readService",2),oRt([Yf(Lj)],aRt.prototype,"_commandService",2),oRt([Yf(YHe)],aRt.prototype,"_openerService",2),aRt=oRt([Gf({contrib:[Z8e,i9e]})],aRt);var lRt=function(e){var t,n=Eot(),r=Iot(!0),i=elt(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),o=Xat(null==n?void 0:n.fieldId),a=SWe(z9e),c=jF(Object(l.useState)(null==n?void 0:n.value),2),s=c[0],d=c[1],f=function(){var e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t),e.next=3,null==i?void 0:i.setCell(t);case 3:null==a||a.close("cellDateDropDownEditor");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?u.a.createElement(ylt,{className:"cell-date-dropdown-editor",fieldId:null==n?void 0:n.fieldId,recordId:null==n?void 0:n.recordId,fieldType:null==n?void 0:n.fieldType,focus:!0,open:!0,format:(null==(t=o.fieldConfig)?void 0:t.date_format)||"YYYY-MM-DD",defaultValue:s||"",onChange:f,rectStyle:{width:r.width-1,height:r.height}}):null},uRt=function(e){var t=e.initialState,n=t.fieldId,r=t.recordId,i=t.fieldType,o=t.rect,a=SWe(iHe),l=null==a?void 0:a.getCellEditableComponent(i);return u.a.createElement(l,{className:"lakex-table-cell-editable-editor",fieldId:n,recordId:r,fieldType:i,boxRect:{width:o.width-1,height:o.height}})},cRt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=Eot(),r=elt(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),i=SWe(z9e),o=Object(l.useRef)(null);Object(l.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e,t=null==(e=o.current)?void 0:e.getValues();t&&(null==r||r.setCell(t))}}}));var a=function(){null==i||i.close("cellLinkDropDownEditor")};return(null==r?void 0:r.fieldType)!==xO.LINK?null:u.a.createElement(Tut,{ref:o,defaultValue:r.value,onSubmit:function(e){null==r||r.setCell(e),setTimeout((function(){a()}),100)},onBlur:a,visible:!0})})));function sRt(e){var t=e.editing,n=SWe(F7e),r=Iot(t),i=Object(l.useRef)(null),o=jF(S$e(),3),a=o[0],u=o[1],c=o[2];return Object(l.useLayoutEffect)((function(){t&&i.current?u(i.current):c()}),[i,t]),{editorRelativeLayout:Object(l.useMemo)((function(){var e=Math.floor((null==n?void 0:n.getRenderViewPort().height)||0);return function(e,t,n,r){var i={position:"absolute",left:0};if(!e)return i.width=0,i;var o=Math.round((null==t?void 0:t.height)||0);return Math.floor(e.top+o+4)>r?(i.bottom=0,i.maxHeight=e.top):(i.top=e.height+4,i.maxHeight=n-(e.top+e.height+4)),i}(r,a,document.body.getBoundingClientRect().height,e)}),[t,a,r]),editorWrapperRef:i}}function dRt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fRt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dRt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dRt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hRt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.editing,r=e.style,i=e.inputObserverRef,o=e.cellValue||[],a=elt(e.recordId,e.fieldId),c=SWe(Xze),s=act,d=sRt({editing:n}),f=d.editorRelativeLayout,h=d.editorWrapperRef;Object(l.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=i.current)||e.focus()},blur:function(){var e;null==(e=i.current)||e.blur()},onEndEdit:(e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=i.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e}));var p=x$e(function(){var e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null==a?void 0:a.setCell(t.map((function(e){return e})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());P$e((function(){var t=null==c?void 0:c.onClickCellIcon((function(t){"cellMentionIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);return u.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:h,style:fRt(fRt(fRt({},r),f),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===EG.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},u.a.createElement(s,{fieldId:e.fieldId,recordId:e.recordId,fieldType:e.fieldType,focus:!1,visible:n,inputRef:i,selected:o,maxHeight:f.maxHeight,onSelect:function(e){var t=o.concat(e);p(t)},onUnselect:function(e){var t=o.filter((function(t){return t.uid!==e.uid}));p(t)}}))}))),pRt=function(e){var t=Object(l.useRef)(null);P$e((function(){var e,n=function(e){e.preventDefault(),e.stopPropagation()};return null==(e=t.current)||e.addEventListener("wheel",n,{passive:!1}),function(){var e;null==(e=t.current)||e.removeEventListener("wheel",n)}}),[e.visible]);var n=function(t){t.preventDefault(),e.onBeforeEndEdit(t)};return e.visible?u.a.createElement("div",{className:"lakex-mask-in-cell-editor",onClick:n,ref:t,onContextMenu:n}):null};function vRt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gRt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vRt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vRt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mRt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.editing,r=e.style,i=e.fieldType,o=e.onBlur,a=e.onChange,c=e.onSave,s=Object(l.useRef)(null),d=SWe(Fit),f=SWe(qit),h=SWe(yot,{optional:!0}),p=jF(Object(l.useState)(),2),v=p[0],g=p[1];Object(l.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=s.current)||e.focus()},blur:function(){var e;null==(e=s.current)||e.blur()},onEndEdit:(e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){b(e)},getValue:function(){return v}};var e}));var m=function(){var e=aO(QC.mark((function e(t){var n,r,i;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}if(null!=v){e.next=5;break}return e.next=4,null==c?void 0:c(null);case 4:return e.abrupt("return",e.sent);case 5:return r=String(v),i=null==(n=null==r?void 0:r.trim)?void 0:n.call(r),e.next=9,null==c?void 0:c(i);case 9:setTimeout((function(){g(null)}),30);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(l.useCallback)((function(t){e.toggleEditing(!1);var n=null==f?void 0:f.getCellIndexesByClientXY(t.clientX,t.clientY);n&&_x((function(){var e=null==h?void 0:h.createGridSelectionByIndex(n[0],n[1]);e&&(null==h||h.setSelection(e))}))}),[n]),b=function(t){var n;if(void 0!==t){var r=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;g(r),_x((function(){null==f||f.updateCellCoordsInViewPort()}))}},w=Object(l.useMemo)((function(){var e=null==d?void 0:d.rowHeightSize;return gRt(gRt({},r),{},{minHeight:e,height:e})}),[r]),_={className:"number-cell ".concat(i),fieldId:e.fieldId,recordId:e.recordId,fieldType:e.fieldType,ref:s,onKeyDown:function(t){var r,i=t.shiftKey,o=t.key;o===EG.ENTER&&(n&&i?(null==(r=s.current)||r.blur(),setTimeout((function(){var e;null==(e=s.current)||e.focus()}),0)):i||e.toggleEditing(!0)),o===EG.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))},value:v,onChange:function(e){g(e),a&&a(e)},autoFocus:!0,readOnly:!1,onBlur:function(){o&&o()}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(pRt,{visible:n,onBeforeEndEdit:y}),u.a.createElement("div",{className:"lakex-table-number-editor",style:gRt({},w)},u.a.createElement(Q0e,gRt({allowEnter:!0},_))))})));function yRt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bRt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yRt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yRt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wRt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.editing,r=e.style,i=e.fieldType,o=e.inputObserverRef,a=elt(e.recordId,e.fieldId),c=Xat(e.fieldId),s=c.field,d=c.fieldOptions,f=c.updateProperty,h=Gat(Qj.FIELD).canUpdate(s),p=Object(l.useMemo)((function(){return i===xO.MULTI_SELECT}),[i]),v=SWe(Xze),g=Hct,m=Object(l.useMemo)((function(){var e=(null==a?void 0:a.value)||[];return Array.isArray(e)?e:[e]}),[p,null==a?void 0:a.formatValue]),y=sRt({editing:n}),b=y.editorRelativeLayout,w=y.editorWrapperRef;Object(l.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=o.current)||e.focus()},blur:function(){var e;null==(e=o.current)||e.blur()},onEndEdit:(e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=o.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e})),P$e((function(){var t=null==v?void 0:v.onClickCellIcon((function(t){"cellSelectIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);var _=function(){var e=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.includes(t.uuid),p){e.next=7;break}return e.next=4,null==a?void 0:a.setCell(n?"":t.uuid);case 4:case 10:return e.abrupt("return",e.sent);case 7:return r=n?m.filter((function(e){return e!==t.uuid})):m.concat(t.uuid),e.next=10,null==a?void 0:a.setCell(r.map((function(e){return{value:e}})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=x$e(function(){var t=aO(QC.mark((function t(r){return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,_(r);case 4:p||e.toggleEditing();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k=x$e((function(e){var t=kC(d,(function(t){return t.get("uuid")!==e}));f({options:t.toJSON()})})),C=x$e(function(){var t=aO(QC.mark((function t(r){var i;return QC.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return i=d.toJSON().concat(r),t.next=5,f({options:i});case 5:_(r),p||e.toggleEditing();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),S=x$e((function(e){var t=OC(d,(function(t){return t.get("uuid")===e.uuid?e:t.toJSON()}));f({options:t})}));return s&&YO.isSelectLike(i)?u.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:w,style:bRt(bRt(bRt({},r),b),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===EG.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},u.a.createElement(g,{fieldId:e.fieldId,recordId:e.recordId,fieldType:e.fieldType,inputRef:o,visible:n,focus:!1,colorable:!!s.get("color"),options:d.toJSON(),editable:!0,optionEditable:h,selectedIds:m,onOptionCreate:C,onOptionChange:S,onOptionDelete:k,onOptionSelect:x})):null})));function _Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xRt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Rt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kRt=Object(l.memo)(Object(l.forwardRef)((function(e,t){var n=e.editing,r=e.style,i=e.fieldType,o=e.fieldId,a=e.isMultiText,c=e.onBlur,s=e.onChange,d=e.onSave,f=Object(l.useRef)(null),h=SWe(Fit),p=SWe(F_t),v=SWe(qit),g=SWe(yot,{optional:!0}),m=$Ye,y=jF(Object(l.useState)(!1),2),b=y[0],w=y[1];Object(l.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=f.current)||e.focus()},blur:function(){var e;null==(e=f.current)||e.blur()},onEndEdit:(e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){k(e)},getValue:function(){var e;return null==(e=f.current)?void 0:e.getValue()}};var e}));var _=function(){var e=aO(QC.mark((function e(t){var n,r,i,o;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return i=String(null==(n=f.current)?void 0:n.getValue()),o=null==(r=null==i?void 0:i.trim)?void 0:r.call(i),e.next=5,null==d?void 0:d(o);case 5:setTimeout((function(){var e,t;null==(e=f.current)||e.focus(),null==(t=f.current)||t.clearValue()}),30);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(l.useCallback)((function(t){e.toggleEditing(!1);var n=null==v?void 0:v.getCellIndexesByClientXY(t.clientX,t.clientY);n&&_x((function(){var e=null==g?void 0:g.createGridSelectionByIndex(n[0],n[1]);e&&(null==g||g.setSelection(e))}))}),[n]),k=function(t){var n,r,i;if(void 0!==t){var o=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;null==(r=f.current)||r.setValue(o),null==(i=f.current)||i.setCursorToEnd(),_x((function(){null==v||v.updateCellCoordsInViewPort()}))}},C=Object(l.useMemo)((function(){if(!a){var e=null==h?void 0:h.rowHeightSize;return xRt(xRt({},r),{},{minHeight:e,height:e})}return r}),[a,r]),S={className:"textarea-cell ".concat(i),fieldId:e.fieldId,recordId:e.recordId,fieldType:e.fieldType,ref:f,onKeyDown:function(t){var r,a=t.shiftKey,l=t.key,u=l===EG.ENTER;if(!b){if(u)if(n&&a)document.execCommand("insertText",!1,"\n"),null==(r=f.current)||r.blur(),setTimeout((function(){var e;null==(e=f.current)||e.focus()}),0);else if(!a){if((i===xO.LINK||(null==p?void 0:p.isDisableEnterEdit(o)))&&!n)return;e.toggleEditing(!0)}l===EG.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))}},onCompositionStart:function(){w(!0)},onCompositionEnd:function(){w(!1)},onChange:function(e){var t=e.target.value;null==s||s(t)},readOnly:!1,onBlur:function(){c&&c()},maxRows:6};return u.a.createElement(u.a.Fragment,null,u.a.createElement(pRt,{visible:n,onBeforeEndEdit:x}),u.a.createElement("div",{className:"lakex-table-text-editor",style:xRt({},C)},u.a.createElement(m,xRt({allowEnter:a},S))))}))),CRt={width:0,height:1,border:"none",padding:0,boxShadow:"none",overflowX:"hidden",overflowY:"hidden"};function SRt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ORt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SRt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SRt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ERt,IRt=(ERt=Object(l.memo)((function(e){var t,n=e.activeCell,r=Xat((null==n?void 0:n.fieldId)||""),i=r.field,o=r.fieldType,c=SWe(Xze),s=SWe(KYe,{optional:!0}),d=SWe(z9e),f=SWe(F_t),h=SWe(yot,{optional:!0}),v=SWe(Oit),g=SWe(fgt,{optional:!0}),m=jF(Object(l.useState)(!1),2),y=m[0],b=m[1],w=null==n?void 0:n.recordId,_=null==n?void 0:n.fieldId,x=elt(w,_),k=Object(l.useRef)(null),C=null==x?void 0:x.value,S=Object(l.useRef)(null),O=SWe(iHe),E=SWe(dHe),I=SWe(XA),P=null==O?void 0:O.getCellBeforeChange(o),M=null==O?void 0:O.getCellEditableComponent(null==x?void 0:x.fieldType),R=Iot(y),A=jF(Object(l.useState)(null==(t=null==h?void 0:h.getSelection())?void 0:t.rangeCount),2),j=A[0],D=A[1],T=function(e){var t=e.editing,n=e.width,r=e.height;return Object(l.useMemo)((function(){return t?n&&r?{width:n,minHeight:r}:{}:CRt}),[t,n,r])}({editing:y,width:(null==R?void 0:R.width)||0,height:(null==R?void 0:R.height)||0}),F=Object(l.useCallback)((function(){var e,t=k.current;t&&(null==(e=t.focus)||e.call(t))}),[]),N=x$e((function(e){(YO.isString(e.fieldType)||YO.isSelectLike(e.fieldType)||YO.isNumberLike(e.fieldType)||YO.isMention(e.fieldType))&&L(!0)}));P$e((function(){var e=null==c?void 0:c.onDoubleClickCell((function(e){e.hasCellEditable||(null==f?void 0:f.isDisableDbClickEdit(e.fieldId))||N(e)})),t=null==c?void 0:c.onOpenCellEditor((function(e){I.getField(e.fieldId)&&N(e)})),n=null==c?void 0:c.onClickEvent((function(e){"activeCellClick"===e.eventName&&F()}));return function(){null==e||e.destroy(),null==n||n.destroy(),null==t||t.destroy()}}),[]),P$e((function(){null==f||f.emitEditingChange({recordId:w,fieldId:_,editing:y})}),[y]);var L=Object(l.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=k.current;n&&(b(!0),null==(e=n.onStartEdit)||e.call(n,t?C:void 0),F())}),[C,k,F,y]),B=x$e((function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=k.current;if(y&&r){var i=null==(e=null==r?void 0:r.getValue)?void 0:e.call(r),a="",l=n;if(i){(a=O.cellValueChecker(o,i))&&$(a);var u=O.getFieldIsStrictValidatedValue(o)&&a;l||(l=u)}null==(t=null==r?void 0:r.onEndEdit)||t.call(r,l),b(!1)}}));P$e((function(){var e=null==c?void 0:c.onScroll(rc((function(){null==d||d.close("tooltip"),B()}),100));return function(){null==e||e.destroy()}}),[B]);var V=Object(l.useCallback)((function(e){if(y)B();else if(e){var t=I.getViewGroup();if(t){var n=I.getViewRecordByRecordId(w||"");if(!n)return;var r=n.get("group_item_key")||(null==v?void 0:v.UNGROUP_KEY),i=n.get("view_uuid"),o=t.field.get("uuid"),a=null==g?void 0:g.getGroupFolding(i,o);r&&(null==a?void 0:a.has(r))&&(null==g||g.setGroupFolding(i,o,r,!1))}h?null==h||h.scrollToAnchorPosition(h.getSelection(),"start",(function(){L(!0)})):requestAnimationFrame((function(){L(!0)}))}else L(!0)}),[y,L,B]);P$e((function(){var e=function(){return B()};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[B]),P$e((function(){var e=null==h?void 0:h.onChange((function(e){var t=e.selection;D(null==t?void 0:t.rangeCount)}));return function(){null==e||e.destroy()}}),[]),P$e((function(){var e=setTimeout((function(){1===j&&(b(!1),(null==E?void 0:E.gridCellEditorAutoFocus)&&F())}),50);return function(){clearTimeout(e)}}),[j,null==E?void 0:E.gridCellEditorAutoFocus]);var z=Object(l.useCallback)((function(e){return o===xO.LINK?(null==e?void 0:e.name)||"":o===xO.DATE?a()(e||"").format("YYYY-MM-DD"):""}),[o]),H=function(){var e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,!y){e.next=11;break}if(Fze(t),t.key==EG.ESC&&B(!1),83!==n||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)){e.next=9;break}return t.preventDefault(),e.next=8,B(!1);case 8:p.b.success(wx("文档已保存"));case 9:e.next=12;break;case 11:IG(t)?L():null==s||s.fireEventByEditable(t.nativeEvent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=Object(l.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"copy"))}),[y]),U=Object(l.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"paste"))}),[y]),G=Object(l.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"cut"))}),[y]),Y=Object(l.useCallback)(function(){var e=aO(QC.mark((function e(t){return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(!Oc(t,C)){e.next=4;break}return e.abrupt("return");case 4:if(!P){e.next=10;break}return e.next=7,P(_,w,t);case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,null==x?void 0:x.setCell(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,C]),$=x$e((function(e){R&&(null==d||d.showTooltip(e,{origin:R,placement:"top"}))}));return n&&i&&o&&_&&w&&!M?u.a.createElement("div",{className:"lakex-table-cell-editor-container lakex-grid-cell-editor-keyboard-input",style:{position:"absolute",left:(null==R?void 0:R.left)||0,top:(null==R?void 0:R.top)||0},onKeyDown:H,onMouseDown:Fze,onMouseUp:Fze,onMouseMove:Fze,onCopy:W,onCut:G,onPaste:U},function(){if(!(n&&i&&o&&_&&w))return null;var e,t,r={onSave:Y,fieldId:_,recordId:w,fieldType:o,editing:y,style:T,inputObserverRef:S};switch(o){case xO.TEXT:return u.a.createElement(kRt,ORt({isMultiText:o===xO.TEXT,ref:k,toggleEditing:V},r));case xO.PHONE:case xO.EMAIL:return u.a.createElement(kRt,ORt({isMultiText:!1,ref:k,toggleEditing:V},r));case xO.PROGRESS:case xO.NUMBER:return u.a.createElement(mRt,ORt({ref:k,toggleEditing:V},r));case xO.LINK:return u.a.createElement(kRt,ORt(ORt({isMultiText:!1,getFormattedValue:z,ref:k},r),{},{onSave:(t=aO(QC.mark((function e(t){var n,r;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={src:(null==(n=null==x?void 0:x.value)?void 0:n.src)||"http://".concat(t),name:t},e.next=3,Y(r);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),toggleEditing:V}));case xO.SELECT:case xO.MULTI_SELECT:return u.a.createElement(wRt,ORt({ref:k,toggleEditing:V},r));case xO.MENTION:return u.a.createElement(hRt,ORt({ref:k,toggleEditing:V,cellValue:C},r));case xO.DATE:return u.a.createElement(kRt,ORt(ORt({isMultiText:!1,getFormattedValue:z,ref:k},r),{},{onSave:(e=aO(QC.mark((function e(t){var n;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sk(t||""),e.next=3,Y(n);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),toggleEditing:V}));default:return null}}()):null})),function(e){var t=Eot();return u.a.createElement(ERt,{activeCell:t})});function PRt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MRt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PRt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PRt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RRt=Object.defineProperty,ARt=Object.getOwnPropertyDescriptor,jRt=function(e,t,n,r){for(var i,o=r>1?void 0:r?ARt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&RRt(t,n,o),o},DRt=function(){return ox((function e(){rx(this,e),this._gridCellEditorId="viewerGridCellEditor",this._toDestroyCollection=new KC}),[{key:"isGridView",get:function(){return this._readService.getActiveView().get("type")===WO.GRID}},{key:"isReadonly",get:function(){return!this._abilityService.canUpdate(Qj.RECORD)}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t,n,r=this;if(!this.isReadonly){var i=null==(e=this._selectionService)?void 0:e.onChange((function(e){if(r._hasSelection()&&r.isGridView){if(r._modalService.close(r._gridCellEditorId),!e.editable||r.isReadonly)return;r._modalService.open(r._gridCellEditorId,{position:{left:0,top:0}})}else r._modalService.close(r._gridCellEditorId)}));i&&this._toDestroyCollection.push(i),null==(t=this._renderService)||t.onOpenCellEditor((function(e){r.openEditable(e)})),null==(n=this._renderService)||n.onCloseCellEditor((function(){r.closeEditable()})),this._toDestroyCollection.push(this._renderService.onClickCellIcon((function(e){var t,n;if("cellLinkIcon"===e.iconName)r._handleOpenCellLinkDropdownEditor();else if("cellImageIcon"===e.iconName){var i=null==(t=r._selectionService)?void 0:t.getFieldValue();r._handleOpenCellFileEditor(xO.IMAGE,null==i?void 0:i.recordId,null==i?void 0:i.fieldId)}else if("cellFileIcon"===e.iconName){var o=null==(n=r._selectionService)?void 0:n.getFieldValue();r._handleOpenCellFileEditor(xO.FILE,null==o?void 0:o.recordId,null==o?void 0:o.fieldId)}}))),this._toDestroyCollection.push(this._renderService.onDoubleClickCell((function(e){r._gridCellEditService.isDisableDbClickEdit(e.fieldId)||r.isReadonly||r.openEditable(e)}))),this._toDestroyCollection.push(this._renderService.onScroll((function(){r.closeEditable()})))}}},{key:"openEditable",value:function(e){var t;if(e.hasCellEditable)this._handleOpenEditableEditor(e);else if(e.fieldType===xO.LINK)this._handleOpenCellLinkDropdownEditor();else if(e.fieldType===xO.DATE)this._handleOpenCellDateDropdownEditor();else if(e.fieldType===xO.IMAGE||e.fieldType===xO.FILE){var n=null==(t=this._selectionService)?void 0:t.getFieldValue();this._handleOpenCellFileEditor(e.fieldType,null==n?void 0:n.recordId,null==n?void 0:n.fieldId)}}},{key:"closeEditable",value:function(){this._modalService.close("cellEditableEditor")}},{key:"registerModal",value:function(e){e.registerItem({id:this._gridCellEditorId,hasMask:!1,scrollStrategy:"close",zIndex:"modalRenderBase",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:IRt}),e.registerItem({id:"cellLinkDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:cRt}),e.registerItem({id:"cellDateDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:lRt}),e.registerItem({id:"cellEditableEditor",hasMask:!1,scrollStrategy:"close",disableClickAwayClose:!0,zIndex:"modalFromRender",RenderComponent:uRt})}},{key:"registerHotkey",value:function(e){var t,n=this;e.registerItem({id:"enterToCellEditor",hotkey:"enter",name:"enter进入单元格编辑",enableOnInput:!1,isEnable:function(){return!n.isReadonly&&n._hasSelection()&&n.isGridView},onHotKey:function(e){var t,r,i;e.preventDefault();var o=null==(t=n._selectionService)?void 0:t.getFieldValue(),a=(null==o?void 0:o.fieldId)||"",l=(null==o?void 0:o.recordId)||"";if(!(null==(r=n._gridCellEditService)?void 0:r.isDisableEnterEdit(a))){var u,c=n._readService.getField(a).get("type");if(c===xO.CHECKBOX){var s=null==(i=n._readService.getCell(a,l))?void 0:i.value,d=MRt(MRt({},o),{},{value:!s});null==(u=n._commandService)||u.execCommand("setCell",d)}[xO.IMAGE,xO.FILE].includes(c)&&n._handleOpenCellFileEditor(c,null==o?void 0:o.recordId,null==o?void 0:o.fieldId),c===xO.LINK&&n._handleOpenCellLinkDropdownEditor()}}}),e.registerItem({id:"deleteCell",hotkey:"del, backspace",name:"清空单元格",enableOnInput:!1,isEnable:function(){return n._hasSelection()&&n.isGridView&&!n.isReadonly},onHotKey:function(e){var t,r;e.preventDefault();var i=((null==(t=n._selectionService)?void 0:t.getFieldValues())||[]).map((function(e){return MRt(MRt({},e),{},{value:""})}));n._selectionService.getSelection().isAllSelect?r8e.confirm({content:wx("确认要删除所有单元格数据吗"),okText:wx("确认"),cancelText:wx("取消"),onOk:function(){var e;null==(e=n._commandService)||e.execCommand("removeCells",{cells:i})}}):null==(r=n._commandService)||r.execCommand("removeCells",{cells:i})}}),e.registerItem({id:"openCellLinkEditor",hotkey:"⌘+K",name:"打开单元格链接编辑器",enableOnInput:!0,isEnable:function(){return n._hasSelection()&&n.isGridView&&!n.isReadonly},onHotKey:(t=aO(QC.mark((function e(t){var r,i,o;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i=null==(r=n._selectionService)?void 0:r.getFieldValue(),o=(null==i?void 0:i.fieldId)||"",n._readService.getField(o).get("type")===xO.LINK&&n._handleOpenCellLinkDropdownEditor();case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{key:"_handleOpenCellLinkDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectFocusTarget();this._modalService.open("cellLinkDropDownEditor",{position:{origin:t,placement:"bottom"}})}},{key:"_handleOpenCellFileEditor",value:function(e,t,n){var r="";e===xO.IMAGE?r="fieldImageEditor":e===xO.FILE&&(r="fieldFileEditor"),r&&this._modalService.open(r,{initialState:{fieldType:e,recordId:t,fieldId:n}})}},{key:"_handleOpenCellDateDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectAnchorTarget();this._modalService.open("cellDateDropDownEditor",{position:{origin:t,placement:"cover"}})}},{key:"_handleOpenEditableEditor",value:function(e){var t,n,r=this._renderContext.$root,i=r.querySelector('.lakex-viewer-grid-cell[data-record-uuid="'.concat(e.recordId,'"][data-field-uuid="').concat(e.fieldId,'"]'));this._modalService.open("cellEditableEditor",{initialState:{fieldId:e.fieldId,recordId:e.recordId,fieldType:e.fieldType,rect:(t=r.getBoundingClientRect(),n=i.getBoundingClientRect(),n.right<t.left||n.left>t.right||n.bottom<t.top||n.top>t.bottom?null:DOMRect.fromRect({x:n.x,y:n.y,width:n.width,height:n.height}))},position:{origin:i,placement:"cover"}})}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();DRt.pluginName="workbench-viewer-grid-cell-editor",jRt([Yf(yot),If()],DRt.prototype,"_selectionService",2),jRt([Yf(XA)],DRt.prototype,"_readService",2),jRt([Yf(hD)],DRt.prototype,"_abilityService",2),jRt([Yf(z9e)],DRt.prototype,"_modalService",2),jRt([Yf(Xze)],DRt.prototype,"_renderService",2),jRt([Yf(Lj)],DRt.prototype,"_commandService",2),jRt([Yf(F_t)],DRt.prototype,"_gridCellEditService",2),jRt([Yf(Vze)],DRt.prototype,"_renderContext",2),DRt=jRt([Gf({contrib:[Z8e,H9e,jot]})],DRt);var TRt=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-h5-empty"},u.a.createElement(MEt,{desc:wx("你还未进行任何分组"),className:"no-data"}),u.a.createElement(aXe,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},u.a.createElement(X$e,{type:"Add"}),wx("添加分组条件")))},FRt=function(){var e=SWe(z9e),t=SWe(Lj),n=SWe(XA),r=n.getViewGroup(),i=n.getViewConfig(),o=n.getAllFields(),a=jF(Object(l.useState)(null==r?void 0:r.group.toJSON()),2),u=a[0],c=a[1],s=function(e){return e?r?null==t?void 0:t.execCommand("updateGridGroup",{viewId:null==i?void 0:i.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("createGridGroup",{viewId:null==i?void 0:i.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("removeGridGroup",{viewId:null==i?void 0:i.get("view_uuid")})};return{state:{group:u},fields:o,onAddOption:function(e){var t,r;e||(e=null==(r=null==(t=null==n?void 0:n.getViewFields())?void 0:t.get(0).get("field"))?void 0:r.toJSON());var i={field_uuid:null==e?void 0:e.uuid,type:NO.ASC};s(i),c(i)},onRemoveOption:function(){s(null),c(null)},onUpdateOption:function(e){var t={field_uuid:null==e?void 0:e.uuid,type:(null==u?void 0:u.type)||NO.ASC};s(t),c(t)},onUpdateType:function(e){u&&(u.type=e),s(u),c(u)},onClose:function(){e.close("grid-group")}}},NRt=function(e){switch(e){case"select":case"multiSelect":return{asc:wx("选项顺序"),desc:wx("选项倒序")};case"number":case"phone":return{asc:wx("从小到大"),desc:wx("从大到小")};default:return{asc:wx("升序"),desc:wx("降序"),style:{padding:"0 16px"}}}},LRt=function(e){var t=FRt(),n=t.state,r=t.fields,i=t.onClose,o=t.onAddOption,a=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=SWe(RC),f=SWe(z9e),h=d.getValue("modal.mode"),p=SWe(XA),v=SWe(iHe),g=Object(l.useMemo)((function(){return null==p?void 0:p.getViewFields()}),[]);return u.a.createElement(mEt,{title:wx("分组"),onClose:i,showCloseIcon:!0},function(){if(!n.group)return u.a.createElement(TRt,{onAddOption:o});var e=xC(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)})),t=NRt(null==e?void 0:e.get("type")),i=e&&v.getFieldIcon(null==e?void 0:e.get("type"));return u.a.createElement("div",{className:"lakex-table-h5-group"},u.a.createElement("div",{className:"lakex-table-h5-group-tip"},wx("按以下选项进行分组")),u.a.createElement(REt,{prefixIcon:i,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==f||f.open("group-select",{initialState:{group:n.group}})}}),u.a.createElement(L7e,{id:"group-select",mode:h,hasMask:h===V9e.DRAWER,hasAnimation:h===V9e.DRAWER,position:h===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return u.a.createElement(mEt,{title:wx("请选择"),onClose:function(){null==f||f.close("group-select")},showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:null==(t=n.group)?void 0:t.field_uuid,list:OC(g,(function(e){var t=e.get("field");if(!t)return null;var n=v.getFieldIcon(t.get("type"));return{key:t.get("uuid"),title:t.get("name"),icon:n&&u.a.createElement(n,null)}})),onCheck:function(e){null==f||f.close("group-select"),a({uuid:e.key})}}))}}),u.a.createElement(CEt,{className:"lakex-table-h5-group-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.group.type}),u.a.createElement(aXe,{className:"lakex-table-h5-group-del",onClick:function(){return c()}},u.a.createElement(X$e,{type:"Delete",className:"del-icon"}),wx("删除该条件")))}())},BRt=function(e){var t=e.className,n=e.defaultValue,r=void 0===n?"":n,i=e.onFieldSelect,o=void 0===i?function(){}:i,a=function(e){var t=SWe(XA),n=t.getActiveView(),r=kC(t.getViewFields(n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||YO.isGroup(null==(r=t.get("field"))?void 0:r.get("type"))}));return{groupFields:r}}({defaultValue:r}),l=a.groupFields,c=SWe(iHe),s=SWe(PS),d=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body;return u.a.createElement(n1e,{className:"lakex-table-group-field-select ".concat(t),defaultValue:r,dropdownClassName:"lakex-table-group-field-select-dropdown",suffixIcon:u.a.createElement(X$e,{type:"ArrowDown",size:14}),showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},onChange:function(e){var t,n=xC(l,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));o(null==(t=null==n?void 0:n.get("field"))?void 0:t.toJSON())},bordered:!1,getPopupContainer:function(){return d}},OC(l,(function(e){var t=e.get("field");if(!t)return null;var n=null==c?void 0:c.getFieldIcon(t.get("type"));return u.a.createElement(n1e.Option,{label:t.get("name"),value:t.get("uuid"),key:t.get("uuid")},n&&u.a.createElement(n,null),u.a.createElement("div",{className:"lakex-table-group-field-select-name"},t.get("name")))})))},VRt=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return u.a.createElement("div",{className:"lakex-table-group-modal-empty"},u.a.createElement(BRt,{defaultValue:wx("选择一列进行分组"),onFieldSelect:n}))},zRt=function(e){var t=e.group,n=e.field,r=e.onUpdateType,i=void 0===r?function(){}:r;if(!n)return null;if(YO.isCheckbox(n.type))return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){i(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{className:"lakex-table-group-field-order-radio"},u.a.createElement(kXe,{checked:!1},u.a.createElement(X$e,{type:"RightArrow"})),u.a.createElement(kXe,{checked:!0}))),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{className:"lakex-table-group-field-order-radio"},u.a.createElement(kXe,{checked:!0},u.a.createElement(X$e,{type:"RightArrow"})),u.a.createElement(kXe,{checked:!1}))));var o=NRt(n.type);return u.a.createElement(_.a.Group,{defaultValue:t.type,onChange:function(e){i(e.target.value)}},u.a.createElement(_.a.Button,{value:"asc"},u.a.createElement("span",{style:o.style},o.asc)),u.a.createElement(_.a.Button,{value:"desc"},u.a.createElement("span",{style:o.style},o.desc)))},HRt=function(e){var t=e.group,n=e.field,r=e.onRemove,i=void 0===r?function(){}:r,o=e.onChange,a=void 0===o?function(){}:o,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=jF(Object(l.useState)(t),2),i=r[0],o=r[1];return{state:{activeField:i},onFieldSelect:function(e){n(e),o(e)}}}({field:n,onChange:a}),f=d.state,h=d.onFieldSelect;return u.a.createElement("div",{className:"lakex-table-group-item"},u.a.createElement(X$e,{type:"Close",onClick:function(){i(t)}}),u.a.createElement(BRt,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:h,className:"lakex-table-group-item-select"}),u.a.createElement(zRt,{group:t,field:f.activeField,onUpdateType:s}))},WRt=function(){var e,t=FRt(),n=t.state,r=t.fields,i=t.onAddOption,o=t.onUpdateOption,a=t.onRemoveOption,l=t.onUpdateType;if(n.group){var c=xC(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)}));e=u.a.createElement(HRt,{field:c,group:n.group,onRemove:a,onChange:o,onUpdateType:l})}else e=u.a.createElement(VRt,{onAddOption:i});return u.a.createElement("div",{className:"lakex-table-group-modal"},e)},URt=Object.defineProperty,GRt=Object.getOwnPropertyDescriptor,YRt=function(e,t,n,r){for(var i,o=r>1?void 0:r?GRt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&URt(t,n,o),o},$Rt=function(){return ox((function e(){var t=this;rx(this,e),this._getActive=function(){var e=t._readService.getActiveView();return!!e&&!!t._readService.getViewGroup(e.get("uuid"))}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-group",icon:"ViewerGroup",tooltip:wx("分组"),visible:function(){var e=t._readService.getActiveView();return!(!e||!t.isMobile&&t.isReadonly)&&e.get("type")===WO.GRID},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("grid-group",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-group",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?LRt:WRt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();$Rt.pluginName="workbench-viewer-grid-group",YRt([Yf(z9e)],$Rt.prototype,"_modalService",2),YRt([Yf(XA)],$Rt.prototype,"_readService",2),YRt([Yf(RC)],$Rt.prototype,"_configuration",2),YRt([Yf(hD)],$Rt.prototype,"_abilityService",2),$Rt=YRt([Gf({contrib:[Z8e,i9e,H9e]})],$Rt);var qRt=function(){var e=SWe(Lj),t=SWe(z9e),n=SWe(XA),r=n.getView();return{viewConfig:n.getViewConfig(),onConfirm:function(n){null==e||e.execCommand("updateGridRecordHeight",{viewId:r.get("uuid"),recordHeight:n.key}),t.close("grid-record-height")},onModalClose:function(){t.close("grid-record-height")}}},KRt=[{type:"low",name:wx("低")},{type:"middle",name:wx("中")},{type:"high",name:wx("高")}],XRt=function(e){var t=qRt(),n=t.viewConfig,r=t.onConfirm,i=t.onModalClose;return n?u.a.createElement(mEt,{title:wx("行高"),onClose:i,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:n.get("record_height"),list:KRt.map((function(e){return{key:e.type,title:e.name}})),onCheck:function(e){return r(e)}})):null},JRt="lakex-table-row-height",ZRt=function(){var e=qRt(),t=e.viewConfig,n=e.onConfirm;return t?u.a.createElement("div",{className:JRt},u.a.createElement(L$e,{defaultSelectedKeys:[t.get("record_height")],mode:"vertical",onClick:n},KRt.map((function(e){return u.a.createElement(L$e.Item,{key:e.type,icon:u.a.createElement("span",null,e.type===t.get("record_height")&&u.a.createElement("span",{className:"".concat(JRt,"-checked")},u.a.createElement(X$e,{type:"Check"})),u.a.createElement(X$e,{type:"RowHeight".concat(da(e.type))}))},wx(e.name))})))):null},QRt=Object.defineProperty,eAt=Object.getOwnPropertyDescriptor,tAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?eAt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&QRt(t,n,o),o},nAt=function(){return ox((function e(){rx(this,e)}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-record-height",icon:"RowHeightLow",tooltip:wx("行高"),visible:function(){if(!t._readService.getActiveView()||!t.isMobile&&t.isReadonly)return!1;var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===WO.GRID},onClick:function(e){var n=e.target;t._modalService.open("grid-record-height",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-record-height",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?XRt:ZRt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();nAt.pluginName="workbench-viewer-grid-record-height",tAt([Yf(z9e)],nAt.prototype,"_modalService",2),tAt([Yf(XA)],nAt.prototype,"_readService",2),tAt([Yf(RC)],nAt.prototype,"_configuration",2),tAt([Yf(hD)],nAt.prototype,"_abilityService",2),nAt=tAt([Gf({contrib:[Z8e,i9e,H9e]})],nAt);var rAt=function(e){var t=e.initialState,n=SWe(Vze),r=SWe(Ait),i=jF(Object(l.useState)(t.x),2),o=i[0],a=i[1],c=jF(Object(l.useState)(0),2),s=c[0],d=c[1];return P$e((function(){var e=r.onResize((function(e){var t=e.x;a(t)}));return function(){e.destroy()}}),[]),P$e((function(){var e=n.$root.getBoundingClientRect().height;d(e||"100%")}),[n]),u.a.createElement("div",{className:"lakex-grid-column-resize-line",style:{transform:"translateX(".concat(o,"px)"),height:s}})},iAt=Object.defineProperty,oAt=Object.getOwnPropertyDescriptor,aAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?oAt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&iAt(t,n,o),o},lAt=function(){return ox((function e(){rx(this,e),this._columnControllerModalId="grid-column-controller"}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"init",value:function(){var e=this;this._columnControllerService.onResizeStart((function(t){var n=t.x,r=e._renderContext.$root.getBoundingClientRect(),i=r.left,o=r.top;e._modalService.getContainer().style.cursor="col-resize",e._modalService.open(e._columnControllerModalId,{position:{left:i,top:o},initialState:{x:n}})})),this._columnControllerService.onResizeEnd((function(){e._modalService.getContainer().style.cursor="",e._modalService.close(e._columnControllerModalId)}))}},{key:"registerModal",value:function(e){e.registerItem({id:this._columnControllerModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:rAt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();lAt.pluginName="workbench-viewer-grid",aAt([Yf(z9e)],lAt.prototype,"_modalService",2),aAt([Yf(Ait)],lAt.prototype,"_columnControllerService",2),aAt([Yf(Vze)],lAt.prototype,"_renderContext",2),aAt([Yf(hD)],lAt.prototype,"_abilityService",2),lAt=aAt([Gf({contrib:[Z8e,H9e]})],lAt);var uAt=function(){var e=SWe(iHe),t=SWe(Lj),n=SWe(z9e),r=SWe(XA),i=SWe(iCt),o=null==r?void 0:r.getActiveView(),a=jF(Object(l.useState)(null==i?void 0:i.getGroup()),2),u=a[0],c=a[1];return{state:{group:u},fields:null==i?void 0:i.getSupportGroupFields(),onChange:function(e){c(e);var r={field_uuid:e.uuid};null==t||t.execCommand("updateKanbanGroup",{viewId:null==o?void 0:o.get("uuid"),group:r}),n.close("kanban-group-setting")},onModalClose:function(){n.close("kanban-group-setting")},fieldService:e}},cAt=function(){var e,t=uAt(),n=t.state,r=t.fields,i=t.onChange,o=t.onModalClose,a=t.fieldService;if(!n.group)return null;var l=OC(r,(function(e){var t=null==a?void 0:a.getFieldIcon(e.get("type"));return{key:e.get("uuid"),icon:t?u.a.createElement(t,{className:"lakex-table-icon-col-type"}):null,title:e.get("name")}}));return u.a.createElement(mEt,{title:wx("选择分组字段"),onClose:o,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:null==(e=n.group)?void 0:e.field.get("uuid"),list:l,onCheck:function(e){return i(xC(r,(function(t){return t.get("uuid")===e.key})))}}))},sAt=function(){var e=uAt(),t=e.state,n=e.fields,r=e.onChange,i=e.fieldService;return t.group?u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-menu-kanban-group lakex-table-menu-kanban-group-modal"},u.a.createElement("div",{className:"lakex-table-menu-kanban-group-options"},OC(n,(function(e){var n,o=null==i?void 0:i.getFieldIcon(e.get("type"));return u.a.createElement("div",{key:e.get("uuid"),className:"lakex-table-menu-kanban-group-option",onClick:function(){r(e)}},u.a.createElement("span",{className:"lakex-table-menu-kanban-group-option-title"},o?u.a.createElement(o,{className:"lakex-table-icon-col-type"}):null,u.a.createElement("span",{className:"lakex-table-menu-kanban-group-field-name"},e.get("name"))),e.get("uuid")===(null==(n=t.group)?void 0:n.field.get("uuid"))?u.a.createElement(X$e,{type:"Check"}):u.a.createElement("span",{className:"lakex-table-menu-kanban-group-empty"}))})))):null},dAt=function(e){var t=e.field,n=SWe(iHe),r=null==n?void 0:n.getFieldIcon(t.get("type"));return u.a.createElement("span",{className:"lakex-table-kanban-group-setting-title"},wx("按"),r?u.a.createElement(r,{className:"lakex-table-icon-col-type",size:14}):null,u.a.createElement("span",{className:"lakex-table-kanban-group-field-name"},t.get("name")),wx("分组"))},fAt=Object.defineProperty,hAt=Object.getOwnPropertyDescriptor,pAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?hAt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&fAt(t,n,o),o},vAt=function(){return ox((function e(){rx(this,e)}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.VIEW)}},{key:"isMobile",get:function(){return this._configuration.getValue("render.mode")===Eze.MOBILE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"kanban-group-setting",tooltip:function(){var e=t._readService.getActiveView();if(!e)return null;var n=t._readService.getViewGroup(null==e?void 0:e.get("uuid"));return(null==n?void 0:n.field)?React.createElement(dAt,{field:null==n?void 0:n.field}):null},visible:function(){var e=t._readService.getActiveView();if(!e||!t.isMobile&&t.isReadonly)return!1;if(!(e.get("type")===WO.KANBAN))return!1;var n=t._readService.getViewGroup(e.get("uuid"));return!!(null==n?void 0:n.field)},showTitle:!0,showTooltip:!1,onClick:function(e){t._modalService.open("kanban-group-setting",{position:{origin:e.target,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"kanban-group-setting",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?cAt:sAt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();vAt.pluginName="workbench-viewer-kanban-group-setting",pAt([Yf(z9e)],vAt.prototype,"_modalService",2),pAt([Yf(XA)],vAt.prototype,"_readService",2),pAt([Yf(RC)],vAt.prototype,"_configuration",2),pAt([Yf(hD)],vAt.prototype,"_abilityService",2),vAt=pAt([Gf({contrib:[Z8e,i9e,H9e]})],vAt);var gAt=function(e){var t=e.initialState,n=t.groupField,r=t.groupOption,i=function(e){var t=e.groupField,n=e.groupOption,r=e.$title,i=SWe(XA),o=SWe(Lj),a=SWe(z9e),c=SWe(Mft),s=SWe(iCt),d=Object(l.useMemo)((function(){return[{key:"edit",name:YO.isMention(null==t?void 0:t.type)?wx("修改分组人员"):wx("修改分组"),icon:u.a.createElement(X$e,{type:"Edit"}),onClick:function(){null==a||a.close("viewKanbanGroupSetting"),null==c||c.showEditGroup(r,t,n)}},{key:"collpse",name:wx("收起分组"),icon:u.a.createElement(X$e,{type:"RowCollpse"}),onClick:function(){null==a||a.close("viewKanbanGroupSetting"),null==o||o.execCommand("updateKanbanGroupCollapse",{fieldId:t.get("uuid"),groupId:null==i?void 0:i.groupValue(n),value:!0})}},{key:"remove",name:wx("删除分组"),icon:u.a.createElement(X$e,{type:"Delete"}),isDanger:!0,onClick:function(){var e;null==a||a.close("viewKanbanGroupSetting");var r=null==s?void 0:s.getGroupFieldOption(t,n);if(r){null==a||a.close("viewKanbanGroupSetting");var i=r.uuid||(null==(e=r.get)?void 0:e.call(r,"uuid"));i&&(null==o||o.execCommand("removeFieldOption",{optionId:i}))}}}]}),[null==t?void 0:t.type]);return{settings:d}}(t),o=i.settings;return n&&r?u.a.createElement("div",{className:"lakex-table-kanban-group-setting"},u.a.createElement(L$e,null,o.map((function(e){return u.a.createElement(L$e.Item,{key:e.key,icon:e.icon,onClick:function(){return e.onClick()},className:F()({"lakex-table-kanban-group-setting-danger":e.isDanger})},e.name)})))):null},mAt=Object.defineProperty,yAt=Object.getOwnPropertyDescriptor,bAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?yAt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mAt(t,n,o),o},wAt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){var e=this;this._kanbanGroupActionService.onGroupSettingClick((function(t){var n,r=t.target,i=t.groupField,o=t.groupOption,a=t.$title;null==(n=e._modalService)||n.open("viewKanbanGroupSetting",{position:{origin:r,placement:"bottom"},initialState:{groupField:i,groupOption:o,$title:a}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"viewKanbanGroupSetting",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:gAt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();wAt.pluginName="workbench-viewer-kanban-group",bAt([Yf(ACt)],wAt.prototype,"_kanbanGroupActionService",2),bAt([Yf(z9e)],wAt.prototype,"_modalService",2),wAt=bAt([Gf({contrib:[Z8e,H9e]})],wAt);var _At=function(e){return e.MENU="menu",e.TAB="tab",e}(_At||{}),xAt=[{key:"rename",title:wx("重命名视图")},{key:"copy",title:wx("复制视图")},{key:"remove",title:wx("删除视图"),isDanger:!0}],kAt=function(){var e=SWe(z9e),t=SWe(Lj),n=SWe(YHe),r=SWe(pht),i=SWe(eM),o=SWe(Xze),a=SWe(RC),u=Gat(Qj.TABLE),c=Gat(Qj.VIEW),s=$at(),d=Yat(),f=jF(Object(l.useState)(null),2),h=f[0],p=f[1],v=o.getViewNodes(),g=a.getValue("viewerManage.viewTypes"),m=kC(s,(function(e){return g.includes(e.get("type"))})),y=function(n,r){var i,o=n.key,a=r.key;switch(null==(i=r.domEvent)||i.stopPropagation(),a){case"rename":p(o);break;case"copy":t.execCommand("copyView",{viewId:o}),e.close("view-manage");break;case"remove":if(m.length<=1)return;t.execCommand("removeView",{viewId:o}),e.close("view-manage")}},b=function(){p(null)},w=function(e,n){e.stopPropagation(),t.execCommand("updateViewName",{viewId:n.key,name:e.target.value}),b()};return{views:s,get isTableReadonly(){return u.isReadonly()},isViewCanUpdate:function(e){return c.canUpdate(e)},isCreatorLock:function(e){var t;return!!a.getValue("ability.table.update")&&(!!a.getValue("ability.view.enableCreatorLock")&&Number(null==(t=i.currentUser)?void 0:t.uid)!==Number(e))},activeView:d,onModalClose:function(){e.close("view-manage")},onChooseView:function(t){if(!h){var r=t.key,i=xC(m,(function(e){return e.get("uuid")===r}));i&&(null==n||n.open("view",i.get("uuid")),e.close("view-manage"))}},onRenameView:function(e){p(e.key)},editingKey:h,onDragEnd:function(e){var t=e.active,n=e.over;t.id!==n.id&&r.updateViewOrder(t.id,n.id)},onCancelEditing:b,onViewNameChange:w,onHandleSetting:y,getChooseConfigs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{unActiveViewColor:!1};return OC(m,(function(t){var n,r=Array.from(v).map((function(e){return e[1]})).find((function(e){return e.viewType===t.get("type")}));return r?(n=e.unActiveViewColor&&(null==d?void 0:d.get("uuid"))!==t.get("uuid")?"":r.color,{key:t.get("uuid"),title:t.get("name"),icon:r.icon({color:n,size:16}),onSettingClick:y,onTitleChange:w,settings:xAt,draggable:!0,creatorId:t.get("creator_id"),view:t}):null})).filter((function(e){return!!e}))}}},CAt=function(e){var t=kAt(),n=t.getChooseConfigs,r=t.onChooseView,i=t.onModalClose,o=t.activeView;return u.a.createElement(mEt,{title:wx("切换视图"),onClose:i,showCloseIcon:!0},u.a.createElement(OEt,{defaultValue:o.get("uuid"),list:n(),onCheck:function(e){return r(e)}}))},SAt=function(e){var t=SWe(z9e),n=SWe(Lj),r=SWe(YHe),i=SWe(RC),o=SWe(Xze),a=Gat(Qj.TABLE).isReadonly(),c=null==o?void 0:o.getViewNodes(),s=Object(l.useMemo)((function(){if(c){var e=i.getValue("viewerManage.viewTypes"),t=Array.from(c).map((function(e){return e[1]}));return e.map((function(e){var n=t.find((function(t){return t.viewType===e}));return n?{key:e,icon:n.icon({color:n.color,size:16}),title:n.title,desc:n.desc}:null})).filter((function(e){return!!e}))}return[]}),[c]),d=Object(l.useMemo)((function(){return e.hasTitle?[{icon:u.a.createElement(X$e,{type:"Add"}),title:u.a.createElement("span",null,wx("新建视图")),children:s}]:s}),[e.hasTitle]);return u.a.createElement(dqe,{menuKey:"addView",configs:d,onClick:function(e){var i=Cx(32);n.execCommand("addView",{uuid:i,type:e.key}),null==r||r.open("view",i),t.close("add-view"),t.close("view-manage")},className:F()({"lakex-table-menu-container":!0,"lakex-table-view-create":!0,"lakex-table-view-create-no-title":!e.hasTitle}),onDoubleClick:function(){},onInputBlur:function(){},readonly:a})},OAt=function(){var e=kAt(),t=e.views,n=e.getChooseConfigs,r=e.onChooseView,i=e.onRenameView,o=e.onCancelEditing,a=e.onDragEnd,l=e.isTableReadonly,c=e.editingKey,s=e.activeView;if(t.length<=1)return null;var d=n();return u.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-manage"},u.a.createElement(dqe,{menuKey:d.map((function(e){return null==e?void 0:e.title})).join(","),configs:d,onClick:r,onDoubleClick:function(){return!l&&i},defaultSelectedKeys:[(null==s?void 0:s.get("uuid"))||""],onInputBlur:o,editingKey:c,className:"lakex-table-view-manage-inner",readonly:l,onDragEnd:a,draggable:!l}),!l&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"lakex-table-view-manage-hr"}),u.a.createElement(SAt,{hasTitle:!0})))},EAt=function(){var e=Gat(Qj.TABLE).isReadonly(),t=jF(Object(l.useState)(!1),2),n=t[0],r=t[1],i=SWe(Lj),o=SWe(z9e),a=SWe(Aze),c=SWe(Xze).getViewNodes(),s=Object(l.useRef)(null),d=Yat(),f=jF(Object(l.useState)((null==d?void 0:d.get("name"))||""),2),h=f[0],p=f[1];P$e((function(){p((null==d?void 0:d.get("name"))||"")}),[d]);var v=Object(l.useMemo)((function(){for(var e=0,t=0;t<h.length;t++)e+=h.charCodeAt(t)>255?14:7;return e+16}),[h]),g=function(e){var t,n,o=((null==(t=e.target)?void 0:t.value)||"").trim()||wx("表格视图");i.execCommand("updateViewName",{viewId:null==d?void 0:d.get("uuid"),name:o}),r(!1),null==(n=s.current)||n.blur()},m=Array.from(c).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==d?void 0:d.get("type"))}));return m?u.a.createElement("div",{className:"view-manage-signal-toolbar-item"},u.a.createElement("div",{onClick:function(){e||r(!0)},id:"lakex-table-toolbar-view-manage",className:F()("view-manage",!n&&"view-manage-normal")},m.icon({color:m.color,size:16}),u.a.createElement(zYe,{ref:s,onClick:function(){var e;null==(e=s.current)||e.focus()},onMouseDown:function(e){e.stopPropagation()},defaultValue:h,style:{width:v},onChange:function(e){var t=e.target.value;p(t)},onBlur:g,onPressEnter:g,bordered:!1,className:F()("input-name",e&&"input-name-disable"),placeholder:wx("视图名称")})),!e&&(null==a?void 0:a.isActive)&&u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(e){var t=e.currentTarget;null==o||o.open("add-view",{position:{origin:t,placement:"bottom"}})}},u.a.createElement(X$e,{type:"Add"}),u.a.createElement("span",{className:"toolbar-button-title"},wx("新建视图")))):null},IAt=function(e){var t=e.onCommand,n=$at(),r=Yat(),i=SWe(Xze),o=SWe(RC).getValue("viewerManage.viewTypes");if(1===kC(n,(function(e){return o.includes(e.get("type"))})).length)return u.a.createElement(EAt,null);var a=i.getViewNodes(),l=Array.from(a).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==r?void 0:r.get("type"))}));return l?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"lakex-workbench-toolbar-button view-manage-multiple-toolbar-item",onClick:t,tabIndex:-1},l.icon({color:l.color,size:16}),u.a.createElement("span",{className:"lakex-table-view-manage-title"},null==r?void 0:r.get("name")),u.a.createElement(X$e,{type:"ArrowDown"}))):null},PAt=["className"];function MAt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RAt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MAt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MAt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var AAt=function(e){e.className;var t=EWe(e,PAt),n=vK({id:t["data-node-key"],disabled:t.disabled}),r=n.attributes,i=n.listeners,o=n.setNodeRef,a=n.transform,l=n.transition,c=RAt(RAt({},t.style),{},{transform:M$e.Transform.toString(a&&RAt(RAt({},a),{},{scaleX:1})),transition:l});return u.a.cloneElement(t.children,RAt(RAt({ref:o,style:c},r),i))},jAt=function(){var e=kAt(),t=e.getChooseConfigs,n=e.onChooseView,r=e.onCancelEditing,i=e.onViewNameChange,o=e.onHandleSetting,a=e.editingKey,c=e.activeView,s=e.onDragEnd,d=e.isTableReadonly,f=e.isViewCanUpdate,h=e.isCreatorLock,p=SWe(z9e),v=jF(Object(l.useState)(""),2),g=v[0],m=v[1],y=function(e,t){m(e?t.key:"")},b=qY($Y(G$,{activationConstraint:{distance:8}})),w=function(e,t,n){"add"===t&&function(e){var t=e.currentTarget;null==p||p.open("add-view",{position:{origin:t,placement:"bottom"}})}(e)},_=function(e){var t=h(e.creatorId);return u.a.createElement("span",{onDoubleClick:function(){d||t||o({key:c.get("uuid")},xAt.find((function(e){return"rename"===e.key})))},className:"lakex-table-viewer-manage-tab-title"},e.title,t&&u.a.createElement(N4e,null))},x=t({unActiveViewColor:!0}).map((function(e){return e?{key:e.key,label:u.a.createElement("div",{className:"lakex-table-viewer-manage-tab-item"},e.icon,e.key===a&&u.a.createElement(LYe,{className:"lakex-table-menu-configs-input",defaultValue:e.title,autoFocus:!0,onKeyDown:function(t){t.stopPropagation();var n=t.keyCode;27!==n?13===n&&i(t,e):r()},onClick:function(e){return e.stopPropagation()},onBlur:function(t){i(t,e)}}),e.key!==a&&e.title.length>10&&u.a.createElement(j4e,{placement:"top",title:e.title,arrow:!0},_(e)),e.key!==a&&e.title.length<=10&&_(e)),closable:f(e.view),closeIcon:e.key===c.get("uuid")?u.a.createElement(H$e,{overlayClassName:"lakex-table-menu-container lakex-table-toolbar-tab-menu",content:u.a.createElement(L$e,{onClick:function(e){o({key:c.get("uuid")},e),y(!1,e)}},xAt.map((function(e){return u.a.createElement(L$e.Item,{key:e.key},e.title)}))),visible:g===e.key,trigger:"click",placement:"bottomLeft",onVisibleChange:function(t){return y(t,e)}},u.a.createElement(X$e,{type:"MoreHorizontal",size:14})):u.a.createElement("span",null)}:null})).filter((function(e){return!!e}));return u.a.createElement(Y5,{className:"lakex-table-viewer-manage-tab",activeKey:null==c?void 0:c.get("uuid"),onChange:function(e){return n({key:e})},items:x,editable:{onEdit:function(e,t){var n=t.key,r=t.event;null==w||w("add"===e?r:n,e)},removeIcon:u.a.createElement("span",null),showAdd:!d,addIcon:u.a.createElement(X$e,{type:"Add",size:14})},popupClassName:"lakex-table-viewer-manage-tab-more-popup",more:{icon:u.a.createElement(X$e,{type:"MoreHorizontal",size:14})},renderTabBar:function(e,t){return u.a.createElement(Rq,{sensors:b,modifiers:[yK,wK],collisionDetection:n$,onDragEnd:s},u.a.createElement(uK,{items:x.map((function(e){return{id:e.key}})),strategy:nK},u.a.createElement(t,RAt({},e),(function(e){return u.a.createElement(AAt,{"data-node-key":String(e.key)||"",disabled:!!a},e)}))))}})};function DAt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TAt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DAt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DAt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FAt=function(e){return SWe(RC).getValue("viewerManage.type")===_At.MENU?u.a.createElement(IAt,TAt({},e)):u.a.createElement(jAt,TAt({},e))},NAt=Object.defineProperty,LAt=Object.getOwnPropertyDescriptor,BAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?LAt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&NAt(t,n,o),o},VAt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("viewerManage.type");e.registerItem({id:"view-manage",RenderComponent:FAt,onClick:function(e){if(n!==_At.TAB){var r={position:{placement:"bottom",origin:e.target}};t._modalService.open("view-manage",r)}}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-manage",mode:t,hasMask:t===V9e.DRAWER,hasAnimation:t===V9e.DRAWER,position:t===V9e.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===Eze.MOBILE?CAt:OAt}),e.registerItem({id:"add-view",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:SAt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerManage",type:"object",title:"视图管理",properties:{type:{type:"string",description:"组件类型",enum:Object.values(_At)},viewTypes:{type:"array",description:"可操作的视图列表"}}}),e.registerDefaultValue({"viewerManage.type":_At.TAB,"viewerManage.viewTypes":[WO.GRID,WO.KANBAN,WO.CARD,WO.CALENDAR,WO.CHART]})}}])}();function zAt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HAt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zAt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zAt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}VAt.pluginName="workbench-viewer-manage",BAt([Yf(z9e)],VAt.prototype,"_modalService",2),BAt([Yf(RC)],VAt.prototype,"_configuration",2),VAt=BAt([Gf({contrib:[Z8e,i9e,H9e]})],VAt);var WAt=function(e){var t=function(e){var t=e.fieldOption,n=e.recordId,r=jF(Object(l.useState)({}),2),i=r[0],o=r[1],u=SWe(z9e),c=SWe(Lj),s=SWe(Xrt),d=(null==t?void 0:t.uuid)||s.defaultPriorityFieldOptionId,f=SWe(XA),h=SWe(mN),v=null==f?void 0:f.getFieldOptions(s.priorityFieldId).toJSON(),g=[{id:s.titleFieldId,type:"input",autoFocus:!0,placeholder:wx("内容")},{id:s.remarkFieldId,type:"textarea",placeholder:wx("备注")},{id:s.priorityFieldId,type:"select",title:wx("优先级"),placeholder:wx("选择优先级"),options:null==v?void 0:v.map((function(e){return{label:e.name,value:e.uuid,color:e.color&&(null==h?void 0:h.getRenderPureTextColor(e.color))}}))},{id:s.dayFieldId,type:"date",title:wx("日期"),format:"YYYY-MM-DD",placeholder:wx("选择日期")},{id:s.timeFieldId,type:"date",title:wx("时间"),format:"HH:mm",placeholder:wx("选择时间")}],m=nx(nx(nx({},s.priorityFieldId,d),s.dayFieldId,a()(s.curDay)),s.timeFieldId,null);if(n){var y=s.getTodoDetail(n);y[s.titleFieldId]&&(m[s.titleFieldId]=y[s.titleFieldId].formatValue),y[s.remarkFieldId]&&(m[s.remarkFieldId]=y[s.remarkFieldId].formatValue),y[s.priorityFieldId]&&(m[s.priorityFieldId]=y[s.priorityFieldId].keyValue),y[s.dayFieldId].value&&(m[s.dayFieldId]=a()(y[s.dayFieldId].value||new Date)),y[s.timeFieldId].value&&(m[s.timeFieldId]=a()(y[s.timeFieldId].value))}return{schema:g,defaultValues:m,onChange:function(e,t){o(HAt(HAt({},i),{},nx({},e,t)))},onSubmit:function(){var t=[],r="add"===e.type?HAt(HAt({},m),i):i;if(Object.keys(r).forEach((function(e){var n=r[e];t.push({fieldId:e,value:(null==n?void 0:n.toDate)?n.toDate():n})})),"add"===e.type){if(![s.titleFieldId,s.priorityFieldId,s.dayFieldId].every((function(e){return!!t.find((function(t){return t.fieldId===e}))})))return void p.b.error(wx("内容、优先级、日期不能为空"));null==c||c.execCommand("addTodo",{groupItemKey:s.dayFieldId+":"+a()(r[s.dayFieldId]).format("YYYY-MM-DD"),cells:t})}else{if(""===r[s.titleFieldId])return void p.b.error(wx("内容"));if(""===r[s.dayFieldId])return void p.b.error(wx("日期"));null==c||c.execCommand("updateTodo",{recordId:n,cells:t})}null==u||u.close("todo-editable-modal")}}}(e.initialState),n=t.schema,r=t.defaultValues,i=t.onChange,o=t.onSubmit;return React.createElement("div",{className:"lakex-table-viewer-todo-editable"},React.createElement(_1e,{defaultValues:r,schema:n,onChange:i}),React.createElement(aXe,{className:"lt-btn lakex-table-viewer-todo-editable-submit",onClick:o},wx("确定")))};function UAt(e){var t=SWe(iHe),n=SWe(XA),r=SWe(PS),i=(null==r?void 0:r.getValue("modal.customModalContainer"))||document.body,o=n.getAllFields();return React.createElement(n1e,{dropdownClassName:"lakex-table-view-todo-setting-dropdown",suffixIcon:React.createElement(X$e,{type:"ArrowDown",size:14}),value:e.defaultValue,showSearch:!0,filterOption:function(e,t){var n,r=e.toLowerCase();return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(r)},placeholder:e.placeholder,onChange:e.onChange,getPopupContainer:function(){return i}},OC(o,(function(e){var n=t.getFieldIcon(e.get("type"));return React.createElement(n1e.Option,{className:"select-option",label:e.get("name"),value:e.get("uuid"),key:e.get("uuid")},n&&React.createElement(n,{className:"icon"}),React.createElement("span",null,e.get("name")))})))}var GAt=function(e){e.initialState;var t,n,r,i=(t=SWe(Lj),n=SWe(XA),{titleFieldId:null==(r=null==n?void 0:n.getViewConfig())?void 0:r.get("todo_title_field_uuid"),remarkFieldId:null==r?void 0:r.get("todo_remark_field_uuid"),priorityFieldId:null==r?void 0:r.get("todo_priority_field_uuid"),doneFieldId:null==r?void 0:r.get("todo_done_field_uuid"),dayFieldId:null==r?void 0:r.get("todo_day_field_uuid"),timeFieldId:null==r?void 0:r.get("todo_time_field_uuid"),onTodoTitleChange:function(e){null==t||t.execCommand("updateTodoTitle",{fieldId:e})},onTodoRemarkChange:function(e){null==t||t.execCommand("updateTodoRemark",{fieldId:e})},onTodoPriorityChange:function(e){null==t||t.execCommand("updateTodoPriority",{fieldId:e})},onTodoDoneChange:function(e){null==t||t.execCommand("updateTodoDone",{fieldId:e})},onTodoDayChange:function(e){null==t||t.execCommand("updateTodoDay",{fieldId:e})},onTodoTimeChange:function(e){null==t||t.execCommand("updateTodoTime",{fieldId:e})}}),o=i.titleFieldId,a=i.remarkFieldId,l=i.priorityFieldId,c=i.doneFieldId,s=i.dayFieldId,d=i.timeFieldId,f=i.onTodoPriorityChange,h=i.onTodoDoneChange,p=i.onTodoDayChange,v=i.onTodoTimeChange,g=i.onTodoRemarkChange,m=i.onTodoTitleChange;return u.a.createElement("div",{className:"lakex-table-view-todo-setting-modal"},u.a.createElement("div",{className:"title"},wx("待办配置")),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("标题字段"))),u.a.createElement(UAt,{defaultValue:o,types:[xO.TEXT],placeholder:wx("请选择正文字段"),onChange:m})),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("备注字段"))),u.a.createElement(UAt,{defaultValue:a,types:[xO.TEXT],placeholder:wx("请选择备注字段"),onChange:g})),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("优先级字段"))),u.a.createElement(UAt,{defaultValue:l,types:[xO.SELECT],placeholder:wx("请选择优先级字段"),onChange:f})),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("已完成字段"))),u.a.createElement(UAt,{defaultValue:c,types:[xO.CHECKBOX],placeholder:wx("请选择已完成字段"),onChange:h})),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("日期字段"))),u.a.createElement(UAt,{defaultValue:s,types:[xO.DATE],placeholder:wx("请选择日期字段"),onChange:p})),u.a.createElement("div",{className:"form-item"},u.a.createElement("div",{className:"label"},u.a.createElement("span",null,wx("时间字段"))),u.a.createElement(UAt,{defaultValue:d,types:[xO.DATE],placeholder:wx("请选择时间字段"),onChange:v})))},YAt=Object.defineProperty,$At=Object.getOwnPropertyDescriptor,qAt=function(e,t,n,r){for(var i,o=r>1?void 0:r?$At(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&YAt(t,n,o),o},KAt=function(){return ox((function e(){rx(this,e)}),[{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e=this;this._todoRenderServie.onTodoAddClick((function(t){e._modalService.open("todo-editable-modal",{position:{origin:t.$target,placement:"bottom"},initialState:t})})),this._todoRenderServie.onTodoEditClick((function(t){e._modalService.open("todo-editable-modal",{position:{origin:t.$target,placement:"bottom"},initialState:t})}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"todo-setting",icon:"Setting",tooltip:wx("待办配置"),visible:function(){var e=t._readService.getActiveView();return!(!e||t._abilityService.isReadonly(Qj.VIEW))&&(null==e?void 0:e.get("type"))===WO.TODO},onClick:function(e){var n=e.target;t._modalService.open("todo-setting-modal",{position:{origin:n,placement:"bottom"},initialState:{}})}}),e.registerItem({id:"add-todo",icon:"Add",iconSize:16,tooltip:function(){return wx("添加待办")},visible:function(){var e=t._readService.getActiveView();if(!e)return!1;var n=e.get("type");return t._abilityService.canCreate(Qj.RECORD)&&[WO.TODO].includes(n)},onClick:function(e){var n=e.target;t._modalService.open("todo-editable-modal",{position:{origin:n,placement:"bottom"},initialState:{type:"add"}})}})}},{key:"registerModal",value:function(e){e.registerItem({id:"todo-setting-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:GAt}),e.registerItem({id:"todo-editable-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:WAt})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();KAt.pluginName="workbench-viewer-todo",qAt([Yf(XA)],KAt.prototype,"_readService",2),qAt([Yf(z9e)],KAt.prototype,"_modalService",2),qAt([Yf(hD)],KAt.prototype,"_abilityService",2),qAt([Yf(wSt)],KAt.prototype,"_todoRenderServie",2);var XAt=[FPt,kIt,jIt,pPt,vOt,VOt,zIt,kPt,tOt,QIt,oOt,VAt,JSt,DMt,fEt,lAt,DRt,$Rt,nAt,NIt,APt,wAt,vAt,$Pt,GOt,rEt,JOt,lEt,cMt,KAt=qAt([Gf({contrib:[Z8e,i9e,H9e]})],KAt),nRt,aRt],JAt=function(e){var t=e.webSdk,n=e.settings;return{settings:Object.assign({},{"model.frozenTable":["ability","user"],"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","todo-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","chart-add","add-record","add-todo"],"toolbar.right":["chart-fullscreen"],contextMenu:["updateField","copyField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","highlightSame","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","textColor","|","copyRecord","expandRecord","removeRecord","removeField"]},n),webSdk:t}},ZAt=[],QAt=dit.filter((function(e){return!ZAt.includes(e.pluginName)})),ejt=[],tjt=BSt.filter((function(e){return!ejt.includes(e.pluginName)})),njt=["workbench-full-width","workbench-full-screen"],rjt=XAt.filter((function(e){return!njt.includes(e.pluginName)})),ijt=[],ojt=[],ajt=[];function ljt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ujt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ljt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ljt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cjt=function(e){var t,n,r=JAt({webSdk:e.webSdk,settings:e.settings||{}});try{n=set.create(ujt(ujt(ujt({},e),r),{},{workbenchPlugins:[].concat(Q_(rjt),Q_(e.workbenchPlugins||[])),renderPlugins:[].concat(Q_(tjt),Q_(e.renderPlugins||[])),kernelPlugins:[].concat(Q_(QAt),Q_(e.kernelPlugins||[])),workbenchContribs:[].concat(Q_(ijt),Q_(e.workbenchContribs||[])),renderContribs:[].concat(Q_(ojt),Q_(e.renderContribs||[])),kernelContribs:[].concat(Q_(ajt),Q_(e.kernelContribs||[])),onDataLoaded:function(t){var n;null==(n=e.onDataLoaded)||n.call(e,t)}})),e.onCellChange&&n.getService(aM).onCellChange((function(t){var n;return null==(n=e.onCellChange)?void 0:n.call(e,t.cellValue)}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n},sjt=["kernel-history","kernel-add-record"],djt=dit.filter((function(e){return!sjt.includes(e.pluginName)})),fjt=["render-history"],hjt=BSt.filter((function(e){return!fjt.includes(e.pluginName)})),pjt={"ability.table.update":!1,"ability.table.delete":!1,"ability.record.edit":!1,"ability.record.update":!1,"ability.record.delete":!1,"ability.field.edit":!1,"ability.field.update":!1,"ability.field.delete":!1},vjt=["workbench-add-record","workbench-grid-cell-editor"],gjt=XAt.filter((function(e){return!vjt.includes(e.pluginName)}));function mjt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yjt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mjt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mjt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bjt(e,t,n){return t=DC(t),jC(e,wjt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function wjt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wjt=function(){return!!e})()}var _jt=function(e){function t(){return rx(this,t),bjt(this,t,arguments)}return NC(t,e),ox(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n={};return null!=e.pagination_total&&(n.pagination_total=e.pagination_total),null!=e.pagination_current&&(n.pagination_current=e.pagination_current),null!=e.pagination_page_size&&(n.pagination_page_size=e.pagination_page_size),this.writeService.updateViewConfig(t,n),!0}}])}(Ij);_jt.commandName="updatePagination";var xjt=Object.defineProperty,kjt=Object.getOwnPropertyDescriptor,Cjt=function(e,t,n,r){for(var i,o=r>1?void 0:r?kjt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xjt(t,n,o),o},Sjt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){this.commandService.registerCommand(_jt.commandName,_jt)}}],[{key:"pluginModule",value:function(){return ch().contribution(qxt).register(ekt).register(this)}}])}();Sjt.pluginName="kernel-viewer-grid-pagination",Cjt([Yf(Lj)],Sjt.prototype,"commandService",2),Sjt=Cjt([Gf({contrib:mj})],Sjt);var Ojt=[];[].concat(Q_(dit),[Sjt]).filter((function(e){return!Ojt.includes(e.pluginName)}));function Ejt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ijt=function(e){var t=SWe(ukt,{optional:!0}),n=null==t?void 0:t.getPaginationProps();return(null==t?void 0:t.isPageMode)?u.a.createElement("div",{className:"lakex-table-grid-pagination"},u.a.createElement(D.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ejt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ejt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))):null};function Pjt(e){var t,n=e.style,r=e.viewConfig,i=SWe(ukt,{optional:!0}),o=jF(Object(l.useState)(!!(null==i?void 0:i.locked)),2),a=o[0],c=o[1],s=jF(Object(l.useState)(!!r.get("pagination_loaded")),2),d=s[0],f=s[1];return Object(l.useEffect)((function(){null==i||i.onPaginationLoading((function(e){c(e.loading),f(e.loaded)}))}),[]),t=d?wx("没有更多"):a?wx("数据加载中..."):u.a.createElement(aXe,{type:"text",disabled:a,className:"lakex-table-load-more-btn",onClick:function(){null==i||i.loadMoreIfNeed()}},wx(a?"加载中...":"加载更多")),u.a.createElement("div",{style:n,className:"lakex-table-grid-loading-text"},t)}var Mjt=Object.defineProperty,Rjt=Object.getOwnPropertyDescriptor,Ajt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(e){}},{key:"getFooterComponent",value:function(){return Ijt}},{key:"getLoadingTextComponent",value:function(){return Pjt}}],[{key:"pluginModule",value:function(){return ch().register(ukt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerGrid",type:"object",title:"表格视图",properties:{pagination:{type:"object",description:"分页配置",properties:{enable:{type:"boolean",description:"是否开启分页"},showPage:{type:"boolean",description:"是否显示分页器"},showTotal:{type:"boolean",description:"是否显示总数"},showQuickJumper:{type:"boolean",description:"是否可以快速跳转至某页"},showSizeChanger:{type:"boolean",description:"是否展示 pageSize 切换器，当 total 大于 50 时默认为 true"},pageSizeOptions:{type:"string",description:"指定每页可以显示多少条"},groupIndexReset:{type:"boolean",description:"分组的index重置"}}}}}),e.registerDefaultValue({"viewerGrid.pagination.mode":"load","viewerGrid.pagination.showTotal":!0,"viewerGrid.pagination.showQuickJumper":!0,"viewerGrid.pagination.showSizeChanger":!0,"viewerGrid.pagination.pageSizeOptions":"10,20,50,100","viewerGrid.pagination.groupIndexReset":!1})}}])}();Ajt.pluginName="render-viewer-grid-pagination",Ajt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Rjt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Mjt(t,n,o),o}([Gf({contrib:[Sze,git,wit]})],Ajt);var jjt=[],Djt=([].concat(Q_(BSt),[Ajt]).filter((function(e){return!jjt.includes(e.pluginName)})),["workbench-full-width","workbench-full-screen"]);XAt.filter((function(e){return!Djt.includes(e.pluginName)}));u.a.Component;var Tjt=Rf.defineToken("ViewerFormPreviewContribution"),Fjt=Object.defineProperty,Njt=Object.getOwnPropertyDescriptor,Ljt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Njt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Fjt(t,n,o),o},Bjt=function(){return ox((function e(){rx(this,e)}),[{key:"getProvider",value:function(){var e=this.formManageProvider.getContributions();return e[e.length-1].registerFormPreview()}},{key:"submitForm",value:function(e){return this.getProvider().submitForm(e)}}])}();Ljt([gh(Tjt)],Bjt.prototype,"formManageProvider",2),Bjt=Ljt([Gf()],Bjt);var Vjt=Object.defineProperty,zjt=Object.getOwnPropertyDescriptor,Hjt=function(e,t,n,r){for(var i,o=r>1?void 0:r?zjt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Vjt(t,n,o),o};var Wjt=function(){return ox((function e(){var t=this;rx(this,e),this.getFormComponent=function(e){return t._fieldService.getFieldFormComponent(e)},this.getFormFieldRules=function(e){var n,r,i=null==(r=(n=t._fieldService).getFieldRules)?void 0:r.call(n,e),o=[];return i&&Array.isArray(i)&&i.forEach((function(e){var t;o.push({validator:(t=e.validator,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Promise((function(e,r){var i=t.apply(this,n);i?e(i):r(i)}))}),message:e.errorMsg})})),o}}),[{key:"submit",value:(e=aO(QC.mark((function e(t){var n,r=this;return QC.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reduce((function(e,t){return e[t.fieldId]=r._toProcess.toValue(t),e}),{}),e.next=3,this._viewerFormPreviewRegistry.getProvider().submitForm(n);case 3:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e}();Hjt([Yf(YD)],Wjt.prototype,"_toProcess",2),Hjt([Yf(iHe)],Wjt.prototype,"_fieldService",2),Hjt([Yf(Bjt)],Wjt.prototype,"_viewerFormPreviewRegistry",2),Wjt=Hjt([Gf()],Wjt);var Ujt=function(e){var t,n,r=e.viewField,i=e.rules,o=e.FieldComponent,a=e.validateTrigger,l=void 0===a?["onBlur","onChange"]:a,c=null==(t=r.get("field"))?void 0:t.get("type"),s="lakex-form-form-viewer-".concat(c);return u.a.createElement("div",{className:"".concat(s," ").concat(yO.isMobile?s+"-h5":"")},u.a.createElement(e8e.Item,{name:null==(n=r.get("field"))?void 0:n.get("uuid"),rules:i,validateTrigger:l,noStyle:!0},u.a.createElement(o,{viewField:r})))},Gjt=u.a.forwardRef((function(e,t){var n,r,i,o,a,c,s,d,f,h,p,v=(n=Yat(),r=SWe(frt),i=SWe(Wjt),o=null==r?void 0:r.getFormEditData(n.get("uuid")),a=jF(e8e.useForm(),1)[0],c=jF(Object(l.useState)(!1),2),s=c[0],d=c[1],f=jF(Object(l.useState)(!1),2),h=f[0],p=f[1],Object(l.useEffect)((function(){function e(e){var t=a.getFieldsValue(),n=Object.values(t).some((function(e){return void 0!==e}));n&&!h&&(e.preventDefault(),e.returnValue="")}return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[h]),Object(l.useEffect)((function(){globalThis._form=a}),[]),{state:{loading:s,formState:a},viewFields:(null==o?void 0:o.viewFields)||[],view:null==o?void 0:o.view,handleSubmit:function(e){if(s)return!1;d(!0),p(!0);for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t.push({fieldId:o,value:e[o]})}null==i||i.submit(t).then((function(){d(!1)})).catch((function(e){d(!1)}))},getFormComponent:function(e){return null==i?void 0:i.getFormComponent(e)},getFormFieldRules:function(e){return null==i?void 0:i.getFormFieldRules(e)}}),g=v.state,m=v.view,y=v.viewFields,b=v.handleSubmit,w=v.getFormComponent,_=v.getFormFieldRules,x="lakex-viewer-form";return u.a.createElement("div",{ref:t,className:"".concat(x," ").concat(yO.isMobile?x+"-h5":"")},u.a.createElement("h1",{className:"".concat(x,"-title")},null==m?void 0:m.get("name")),u.a.createElement("div",null,u.a.createElement("div",{className:"".concat(x,"-desc")},null==m?void 0:m.get("desc")),u.a.createElement("div",{className:"".concat(x,"-rule")},u.a.createElement("span",{className:"".concat(x,"-required")},"*"),wx("为必填项"))),u.a.createElement(e8e,{form:g.formState,layout:"vertical",className:"".concat(x,"-list"),onFinish:b,scrollToFirstError:!0},OC(y,(function(e,t){var n,r=null==(n=e.get("field"))?void 0:n.get("type");if(!r)return null;var i=w(r);if(!i)return null;var o=e.get("required"),a="".concat(t+1,".").concat(e.get("name")),l=_(r)||[];if(o&&l.push({required:o,message:wx("请输入必填项")}),YO.isSelectLike(r)){var c=YO.isSelect(r)?wx("单选"):wx("多选");a=u.a.createElement("span",null,a,u.a.createElement("span",{className:"".concat(x,"-lable")},"(",c,")"))}return u.a.createElement(e8e.Item,{key:e.get("uuid"),label:a,required:o},u.a.createElement(Ujt,{viewField:e,rules:l,FieldComponent:i}))})),u.a.createElement(e8e.Item,null,u.a.createElement(aXe,{type:"primary",htmlType:"submit",size:"large",disabled:g.loading},wx("提交")))))}));function Yjt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $jt(e,t,n){return t=DC(t),jC(e,qjt()?Reflect.construct(t,n||[],DC(e).constructor):t.apply(e,n))}function qjt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qjt=function(){return!!e})()}var Kjt=function(e){function t(){var e;return rx(this,t),(e=$jt(this,t,arguments)).viewType=WO.FORM,e.title=wx("表单视图"),e.desc="",e.icon=function(e){return React.createElement(X$e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yjt(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yjt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FormView"},e))},e.color="orange-5",e.Component=Gjt,e}return NC(t,e),ox(t)}(z8e),Xjt=Object.defineProperty,Jjt=Object.getOwnPropertyDescriptor,Zjt=function(){return ox((function e(){rx(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new Kjt({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return ch().contribution(Tjt).register(Wjt).register(Bjt).register(this)}}])}();Zjt.pluginName="render-viewer-form-preview",Zjt=function(e,t,n,r){for(var i,o=r>1?void 0:r?Jjt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Xjt(t,n,o),o}([Gf({contrib:[Sze,Mze]})],Zjt);var Qjt={exports:{}},eDt={};function tDt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var nDt,rDt,iDt={},oDt={},aDt={},lDt={},uDt={};function cDt(e,t,n){return t=Ch(t),kh(e,sDt()?Reflect.construct(t,[],Ch(e).constructor):t.apply(e,n))}function sDt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sDt=function(){return!!e})()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=ls((function e(){us(this,e)}));e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var n=function(t){function n(t){var r;if(us(this,n),r=cDt(this,n),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");return r.str=t,r}return Oh(n,t),ls(n,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return os({},this.str,1)}}])}(t);e.Name=n;var r=function(e){function t(e){var n;return us(this,t),(n=cDt(this,t))._items="string"==typeof e?[e]:e,n}return Oh(t,e),ls(t,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}])}(t);function i(e){for(var t=[e[0]],n=0,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(;n<o.length;)l(t,o[n]),t.push(e[++n]);return new r(t)}e._Code=r,e.nil=new r(""),e._=i;var o=new r("+");function a(e){for(var t=[c(e[0])],n=0,i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];for(;n<a.length;)t.push(o),l(t,a[n]),t.push(o,c(e[++n]));return function(e){var t=1;for(;t<e.length-1;){if(e[t]===o){var n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(t),new r(t)}function l(e,t){var i;t instanceof r?e.push.apply(e,ts(t._items)):t instanceof n?e.push(t):e.push("number"==typeof(i=t)||"boolean"==typeof i||null===i?i:c(Array.isArray(i)?i.join(","):i))}function u(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:'"'.concat(e).concat(t.slice(1))}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=a,e.addCodeArg=l,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a(nDt||(nDt=tDt(["","",""])),e,t)},e.stringify=function(e){return new r(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(".".concat(t)):i(rDt||(rDt=tDt(["[","]"])),t)},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r("".concat(t));throw new Error("CodeGen: invalid export name: ".concat(t,", use explicit $id name mapping"))},e.regexpCode=function(e){return new r(e.toString())}}(uDt);var dDt,fDt,hDt,pDt,vDt,gDt,mDt,yDt,bDt,wDt,_Dt,xDt={};function kDt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CDt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kDt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kDt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SDt(e,t,n){return t=Ch(t),kh(e,ODt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function ODt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ODt=function(){return!!e})()}function EDt(e,t,n,r){var i=QG(Ch(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function IDt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PDt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IDt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IDt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MDt(e,t,n){return t=Ch(t),kh(e,RDt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function RDt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RDt=function(){return!!e})()}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t,n,r=uDt,i=function(e){function t(e){var n;return us(this,t),(n=SDt(this,t,['CodeGen: "code" for '.concat(e," not defined")])).value=e.value,n}return Oh(t,e),ls(t)}(tY(Error));(n=t||(e.UsedValueState=t={}))[n.Started=0]="Started",n[n.Completed=1]="Completed",e.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};var o=function(){return ls((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefixes,r=t.parent;us(this,e),this._names={},this._prefixes=n,this._parent=r}),[{key:"toName",value:function(e){return e instanceof r.Name?e:this.name(e)}},{key:"name",value:function(e){return new r.Name(this._newName(e))}},{key:"_newName",value:function(e){var t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}},{key:"_nameGroup",value:function(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}])}();e.Scope=o;var a=function(e){function t(e,n){var r;return us(this,t),(r=SDt(this,t,[n])).prefix=e,r}return Oh(t,e),ls(t,[{key:"setValue",value:function(e,t){var n=t.property,i=t.itemIndex;this.value=e,this.scopePath=(0,r._)(dDt||(dDt=tDt([".","[","]"])),new r.Name(n),i)}}])}(r.Name);e.ValueScopeName=a;var l=(0,r._)(fDt||(fDt=tDt(["\n"],["\\n"]))),u=function(n){function o(e){var t;return us(this,o),(t=SDt(this,o,[e]))._values={},t._scope=e.scope,t.opts=CDt(CDt({},e),{},{_n:e.lines?l:r.nil}),t}return Oh(o,n),ls(o,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new a(e,this._newName(e))}},{key:"value",value:function(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var r=this.toName(e),i=r.prefix,o=null!==(n=t.key)&&void 0!==n?n:t.ref,a=this._values[i];if(a){var l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,r);var u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=t.ref,r.setValue(t,{property:i,itemIndex:c}),r}},{key:"getValue",value:function(e,t){var n=this._values[e];if(n)return n.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return(0,r._)(hDt||(hDt=tDt(["","",""])),e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code}),t,n)}},{key:"_reduceValues",value:function(n,o){var a=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0,c=r.nil,s=function(){var s=n[d];if(!s)return 1;var f=l[d]=l[d]||new Map;s.forEach((function(n){if(!f.has(n)){f.set(n,t.Started);var l=o(n);if(l){var s=a.opts.es5?e.varKinds.var:e.varKinds.const;c=(0,r._)(pDt||(pDt=tDt(["",""," "," = ",";",""])),c,s,n,l,a.opts._n)}else{if(!(l=null==u?void 0:u(n)))throw new i(n);c=(0,r._)(vDt||(vDt=tDt(["","","",""])),c,l,a.opts._n)}f.set(n,t.Completed)}}))};for(var d in n)s();return c}}])}(o);e.ValueScope=u}(xDt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=uDt,n=xDt,r=uDt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=xDt;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var o=function(){return ls((function e(){us(this,e)}),[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}])}(),a=function(e){function r(e,t,n){var i;return us(this,r),(i=MDt(this,r)).varKind=e,i.name=t,i.rhs=n,i}return Oh(r,e),ls(r,[{key:"render",value:function(e){var t=e.es5,r=e._n,i=t?n.varKinds.var:this.varKind,o=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(i," ").concat(this.name).concat(o,";")+r}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}])}(o),l=function(e){function n(e,t,r){var i;return us(this,n),(i=MDt(this,n)).lhs=e,i.rhs=t,i.sideEffects=r,i}return Oh(n,e),ls(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}},{key:"optimizeNames",value:function(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=M(this.rhs,e,n),this}},{key:"names",get:function(){return P(this.lhs instanceof t.Name?{}:PDt({},this.lhs.names),this.rhs)}}])}(o),u=function(e){function t(e,n,r,i){var o;return us(this,t),(o=MDt(this,t,[e,r,i])).op=n,o}return Oh(t,e),ls(t,[{key:"render",value:function(e){var t=e._n;return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+t}}])}(l),c=function(e){function t(e){var n;return us(this,t),(n=MDt(this,t)).label=e,n.names={},n}return Oh(t,e),ls(t,[{key:"render",value:function(e){var t=e._n;return"".concat(this.label,":")+t}}])}(o),s=function(e){function t(e){var n;return us(this,t),(n=MDt(this,t)).label=e,n.names={},n}return Oh(t,e),ls(t,[{key:"render",value:function(e){var t=e._n,n=this.label?" ".concat(this.label):"";return"break".concat(n,";")+t}}])}(o),d=function(e){function t(e){var n;return us(this,t),(n=MDt(this,t)).error=e,n}return Oh(t,e),ls(t,[{key:"render",value:function(e){var t=e._n;return"throw ".concat(this.error,";")+t}},{key:"names",get:function(){return this.error.names}}])}(o),f=function(e){function n(e){var t;return us(this,n),(t=MDt(this,n)).code=e,t}return Oh(n,e),ls(n,[{key:"render",value:function(e){var t=e._n;return"".concat(this.code,";")+t}},{key:"optimizeNodes",value:function(){return"".concat(this.code)?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=M(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof t._CodeOrName?this.code.names:{}}}])}(o),h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return us(this,t),(e=MDt(this,t)).nodes=n,e}return Oh(t,e),ls(t,[{key:"render",value:function(e){return this.nodes.reduce((function(t,n){return t+n.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var n=e[t].optimizeNodes();Array.isArray(n)?e.splice.apply(e,[t,1].concat(ts(n))):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var n=this.nodes,r=n.length;r--;){var i=n[r];i.optimizeNames(e,t)||(R(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return I(e,t.names)}),{})}}])}(o),p=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"{"+e._n+EDt(t,"render",this,3)([e])+"}"+e._n}}])}(h),v=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t)}(h),g=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t)}(p);g.kind="else";var m=function(e){function t(e,n){var r;return us(this,t),(r=MDt(this,t,[n])).condition=e,r}return Oh(t,e),ls(t,[{key:"render",value:function(e){var n="if(".concat(this.condition,")")+EDt(t,"render",this,3)([e]);return this.else&&(n+="else "+this.else.render(e)),n}},{key:"optimizeNodes",value:function(){EDt(t,"optimizeNodes",this,3)([]);var e=this.condition;if(!0===e)return this.nodes;var n=this.else;if(n){var r=n.optimizeNodes();n=this.else=Array.isArray(r)?new g(r):r}return n?!1===e?n instanceof t?n:n.nodes:this.nodes.length?this:new t(A(e),n instanceof t?[n]:n.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,n){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,n),EDt(t,"optimizeNames",this,3)([e,n])||this.else)return this.condition=M(this.condition,e,n),this}},{key:"names",get:function(){var e=EDt(t,"names",this,1);return P(e,this.condition),this.else&&I(e,this.else.names),e}}])}(p);m.kind="if";var y=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t)}(p);y.kind="for";var b=function(e){function t(e){var n;return us(this,t),(n=MDt(this,t)).iteration=e,n}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"for(".concat(this.iteration,")")+EDt(t,"render",this,3)([e])}},{key:"optimizeNames",value:function(e,n){if(EDt(t,"optimizeNames",this,3)([e,n]))return this.iteration=M(this.iteration,e,n),this}},{key:"names",get:function(){return I(EDt(t,"names",this,1),this.iteration.names)}}])}(y),w=function(e){function t(e,n,r,i){var o;return us(this,t),(o=MDt(this,t)).varKind=e,o.name=n,o.from=r,o.to=i,o}return Oh(t,e),ls(t,[{key:"render",value:function(e){var r=e.es5?n.varKinds.var:this.varKind,i=this.name,o=this.from,a=this.to;return"for(".concat(r," ").concat(i,"=").concat(o,"; ").concat(i,"<").concat(a,"; ").concat(i,"++)")+EDt(t,"render",this,3)([e])}},{key:"names",get:function(){var e=P(EDt(t,"names",this,1),this.from);return P(e,this.to)}}])}(y),_=function(e){function t(e,n,r,i){var o;return us(this,t),(o=MDt(this,t)).loop=e,o.varKind=n,o.name=r,o.iterable=i,o}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+EDt(t,"render",this,3)([e])}},{key:"optimizeNames",value:function(e,n){if(EDt(t,"optimizeNames",this,3)([e,n]))return this.iterable=M(this.iterable,e,n),this}},{key:"names",get:function(){return I(EDt(t,"names",this,1),this.iterable.names)}}])}(y),x=function(e){function t(e,n,r){var i;return us(this,t),(i=MDt(this,t)).name=e,i.args=n,i.async=r,i}return Oh(t,e),ls(t,[{key:"render",value:function(e){var n=this.async?"async ":"";return"".concat(n,"function ").concat(this.name,"(").concat(this.args,")")+EDt(t,"render",this,3)([e])}}])}(p);x.kind="func";var k=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"return "+EDt(t,"render",this,3)([e])}}])}(h);k.kind="return";var C=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"render",value:function(e){var n="try"+EDt(t,"render",this,3)([e]);return this.catch&&(n+=this.catch.render(e)),this.finally&&(n+=this.finally.render(e)),n}},{key:"optimizeNodes",value:function(){var e,n;return EDt(t,"optimizeNodes",this,3)([]),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(n=this.finally)||void 0===n||n.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,n){var r,i;return EDt(t,"optimizeNames",this,3)([e,n]),null===(r=this.catch)||void 0===r||r.optimizeNames(e,n),null===(i=this.finally)||void 0===i||i.optimizeNames(e,n),this}},{key:"names",get:function(){var e=EDt(t,"names",this,1);return this.catch&&I(e,this.catch.names),this.finally&&I(e,this.finally.names),e}}])}(p),S=function(e){function t(e){var n;return us(this,t),(n=MDt(this,t)).error=e,n}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"catch(".concat(this.error,")")+EDt(t,"render",this,3)([e])}}])}(p);S.kind="catch";var O=function(e){function t(){return us(this,t),MDt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"render",value:function(e){return"finally"+EDt(t,"render",this,3)([e])}}])}(p);O.kind="finally";var E=function(){return ls((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};us(this,e),this._values={},this._blockStarts=[],this._constants={},this.opts=PDt(PDt({},r),{},{_n:r.lines?"\n":""}),this._extScope=t,this._scope=new n.Scope({parent:t}),this._nodes=[new v]}),[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,n,r){var i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new a(e,i,n)),i}},{key:"const",value:function(e,t,r){return this._def(n.varKinds.const,e,t,r)}},{key:"let",value:function(e,t,r){return this._def(n.varKinds.let,e,t,r)}},{key:"var",value:function(e,t,r){return this._def(n.varKinds.var,e,t,r)}},{key:"assign",value:function(e,t,n){return this._leafNode(new l(e,t,n))}},{key:"add",value:function(t,n){return this._leafNode(new u(t,e.operators.ADD,n))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new f(e)),this}},{key:"object",value:function(){for(var e=["{"],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var l=nY(a[o],2),u=l[0],c=l[1];e.length>1&&e.push(","),e.push(u),(u!==c||this.opts.es5)&&(e.push(":"),(0,t.addCodeArg)(e,c))}return e.push("}"),new t._Code(e)}},{key:"if",value:function(e,t,n){if(this._blockNode(new m(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new m(e))}},{key:"else",value:function(){return this._elseNode(new g)}},{key:"endIf",value:function(){return this._endBlockNode(m,g)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new b(e),t)}},{key:"forRange",value:function(e,t,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?n.varKinds.var:n.varKinds.let,a=this._scope.toName(e);return this._for(new w(o,a,t,r),(function(){return i(a)}))}},{key:"forOf",value:function(e,r,i){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.varKinds.const,l=this._scope.toName(e);if(this.opts.es5){var u=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,t._)(gDt||(gDt=tDt(["",".length"])),u),(function(e){o.var(l,(0,t._)(mDt||(mDt=tDt(["","[","]"])),u,e)),i(l)}))}return this._for(new _("of",a,l,r),(function(){return i(l)}))}},{key:"forIn",value:function(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?n.varKinds.var:n.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,(0,t._)(yDt||(yDt=tDt(["Object.keys(",")"])),r),i);var a=this._scope.toName(e);return this._for(new _("in",o,a,r),(function(){return i(a)}))}},{key:"endFor",value:function(){return this._endBlockNode(y)}},{key:"label",value:function(e){return this._leafNode(new c(e))}},{key:"break",value:function(e){return this._leafNode(new s(e))}},{key:"return",value:function(e){var t=new k;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}},{key:"try",value:function(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');var r=new C;if(this._blockNode(r),this.code(e),t){var i=this.name("e");this._currNode=r.catch=new S(i),t(i)}return n&&(this._currNode=r.finally=new O,this.code(n)),this._endBlockNode(S,O)}},{key:"throw",value:function(e){return this._leafNode(new d(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(n," vs ").concat(e," expected"));return this._nodes.length=t,this}},{key:"func",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.nil,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return this._blockNode(new x(e,n,r)),i&&this.code(i).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(x)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}])}();function I(e,t){for(var n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function P(e,n){return n instanceof t._CodeOrName?I(e,n.names):e}function M(e,n,r){return e instanceof t.Name?i(e):function(e){return e instanceof t._Code&&e._items.some((function(e){return e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str]}))}(e)?new t._Code(e._items.reduce((function(e,n){return n instanceof t.Name&&(n=i(n)),n instanceof t._Code?e.push.apply(e,ts(n._items)):e.push(n),e}),[])):e;function i(e){var t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function R(e,t){for(var n in t)e[n]=(e[n]||0)-(t[n]||0)}function A(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,t._)(bDt||(bDt=tDt(["!",""])),F(e))}e.CodeGen=E,e.not=A;var j=T(e.operators.AND);e.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(j)};var D=T(e.operators.OR);function T(e){return function(n,r){return n===t.nil?r:r===t.nil?n:(0,t._)(wDt||(wDt=tDt([""," "," ",""])),F(n),e,F(r))}}function F(e){return e instanceof t.Name?e:(0,t._)(_Dt||(_Dt=tDt(["(",")"])),e)}e.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(D)}}(lDt);var ADt,jDt,DDt,TDt,FDt,NDt,LDt,BDt,VDt,zDt,HDt,WDt,UDt,GDt,YDt,$Dt,qDt,KDt,XDt={};function JDt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZDt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JDt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JDt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QDt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eTt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eTt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function eTt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(XDt,"__esModule",{value:!0}),XDt.checkStrictMode=XDt.getErrorPath=XDt.Type=XDt.useFunc=XDt.setEvaluated=XDt.evaluatedPropsToName=XDt.mergeEvaluated=XDt.eachItem=XDt.unescapeJsonPointer=XDt.escapeJsonPointer=XDt.escapeFragment=XDt.unescapeFragment=XDt.schemaRefOrVal=XDt.schemaHasRulesButRef=XDt.schemaHasRules=XDt.checkUnknownRules=XDt.alwaysValidSchema=XDt.toHash=void 0;var tTt=lDt,nTt=uDt;function rTt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.opts,r=e.self;if(n.strictSchema&&"boolean"!=typeof t){var i=r.RULES.keywords;for(var o in t)i[o]||hTt(e,'unknown keyword: "'.concat(o,'"'))}}function iTt(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0;return!1}function oTt(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function aTt(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function lTt(e){var t=e.mergeNames,n=e.mergeToName,r=e.mergeValues,i=e.resultToName;return function(e,o,a,l){var u=void 0===a?o:a instanceof tTt.Name?(o instanceof tTt.Name?t(e,o,a):n(e,o,a),a):o instanceof tTt.Name?(n(e,a,o),o):r(o,a);return l!==tTt.Name||u instanceof tTt.Name?u:i(e,u)}}function uTt(e,t){if(!0===t)return e.var("props",!0);var n=e.var("props",(0,tTt._)(UDt||(UDt=tDt(["{}"]))));return void 0!==t&&cTt(e,n,t),n}function cTt(e,t,n){Object.keys(n).forEach((function(n){return e.assign((0,tTt._)(GDt||(GDt=tDt(["","",""])),t,(0,tTt.getProperty)(n)),!0)}))}XDt.toHash=function(e){var t,n={},r=QDt(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(e){r.e(e)}finally{r.f()}return n},XDt.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(rTt(e,t),!iTt(t,e.self.RULES.all))},XDt.checkUnknownRules=rTt,XDt.schemaHasRules=iTt,XDt.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if("$ref"!==n&&t.all[n])return!0;return!1},XDt.schemaRefOrVal=function(e,t,n,r){var i=e.topSchemaRef,o=e.schemaPath;if(!r){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return(0,tTt._)(ADt||(ADt=tDt(["",""])),t)}return(0,tTt._)(jDt||(jDt=tDt(["","","",""])),i,o,(0,tTt.getProperty)(n))},XDt.unescapeFragment=function(e){return aTt(decodeURIComponent(e))},XDt.escapeFragment=function(e){return encodeURIComponent(oTt(e))},XDt.escapeJsonPointer=oTt,XDt.unescapeJsonPointer=aTt,XDt.eachItem=function(e,t){if(Array.isArray(e)){var n,r=QDt(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(e){r.e(e)}finally{r.f()}}else t(e)},XDt.mergeEvaluated={props:lTt({mergeNames:function(e,t,n){return e.if((0,tTt._)(DDt||(DDt=tDt([""," !== true && "," !== undefined"])),n,t),(function(){e.if((0,tTt._)(TDt||(TDt=tDt([""," === true"])),t),(function(){return e.assign(n,!0)}),(function(){return e.assign(n,(0,tTt._)(FDt||(FDt=tDt([""," || {}"])),n)).code((0,tTt._)(NDt||(NDt=tDt(["Object.assign(",", ",")"])),n,t))}))}))},mergeToName:function(e,t,n){return e.if((0,tTt._)(LDt||(LDt=tDt([""," !== true"])),n),(function(){!0===t?e.assign(n,!0):(e.assign(n,(0,tTt._)(BDt||(BDt=tDt([""," || {}"])),n)),cTt(e,n,t))}))},mergeValues:function(e,t){return!0===e||ZDt(ZDt({},e),t)},resultToName:uTt}),items:lTt({mergeNames:function(e,t,n){return e.if((0,tTt._)(VDt||(VDt=tDt([""," !== true && "," !== undefined"])),n,t),(function(){return e.assign(n,(0,tTt._)(zDt||(zDt=tDt([""," === true ? true : "," > "," ? "," : ",""])),t,n,t,n,t))}))},mergeToName:function(e,t,n){return e.if((0,tTt._)(HDt||(HDt=tDt([""," !== true"])),n),(function(){return e.assign(n,!0===t||(0,tTt._)(WDt||(WDt=tDt([""," > "," ? "," : ",""])),n,t,n,t))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},XDt.evaluatedPropsToName=uTt,XDt.setEvaluated=cTt;var sTt,dTt,fTt={};function hTt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(n){if(t="strict mode: ".concat(t),!0===n)throw new Error(t);e.self.logger.warn(t)}}XDt.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:fTt[t.code]||(fTt[t.code]=new nTt._Code(t.code))})},(dTt=sTt||(XDt.Type=sTt={}))[dTt.Num=0]="Num",dTt[dTt.Str=1]="Str",XDt.getErrorPath=function(e,t,n){if(e instanceof tTt.Name){var r=t===sTt.Num;return n?r?(0,tTt._)(YDt||(YDt=tDt(['"[" + ',' + "]"'])),e):(0,tTt._)($Dt||($Dt=tDt(['"[\'" + ',' + "\']"'])),e):r?(0,tTt._)(qDt||(qDt=tDt(['"/" + ',""])),e):(0,tTt._)(KDt||(KDt=tDt(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),e)}return n?(0,tTt.getProperty)(e).toString():"/"+oTt(e)},XDt.checkStrictMode=hTt;var pTt={};Object.defineProperty(pTt,"__esModule",{value:!0});var vTt,gTt,mTt,yTt,bTt,wTt,_Tt,xTt,kTt,CTt,STt,OTt,ETt,ITt,PTt,MTt,RTt,ATt,jTt,DTt,TTt,FTt,NTt,LTt,BTt,VTt,zTt=lDt,HTt={data:new zTt.Name("data"),valCxt:new zTt.Name("valCxt"),instancePath:new zTt.Name("instancePath"),parentData:new zTt.Name("parentData"),parentDataProperty:new zTt.Name("parentDataProperty"),rootData:new zTt.Name("rootData"),dynamicAnchors:new zTt.Name("dynamicAnchors"),vErrors:new zTt.Name("vErrors"),errors:new zTt.Name("errors"),this:new zTt.Name("this"),self:new zTt.Name("self"),scope:new zTt.Name("scope"),json:new zTt.Name("json"),jsonPos:new zTt.Name("jsonPos"),jsonLen:new zTt.Name("jsonLen"),jsonPart:new zTt.Name("jsonPart")};pTt.default=HTt,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=lDt,n=XDt,r=pTt;function i(e,n){var i=e.const("err",n);e.if((0,t._)(ITt||(ITt=tDt([""," === null"])),r.default.vErrors),(function(){return e.assign(r.default.vErrors,(0,t._)(PTt||(PTt=tDt(["[","]"])),i))}),(0,t._)(MTt||(MTt=tDt(["",".push(",")"])),r.default.vErrors,i)),e.code((0,t._)(RTt||(RTt=tDt(["","++"])),r.default.errors))}function o(e,n){var r=e.gen,i=e.validateName;e.schemaEnv.$async?r.throw((0,t._)(ATt||(ATt=tDt(["new ","(",")"])),e.ValidationError,n)):(r.assign((0,t._)(jTt||(jTt=tDt(["",".errors"])),i),n),r.return(!1))}e.keywordError={message:function(e){var n=e.keyword;return(0,t.str)(vTt||(vTt=tDt(['must pass "','" keyword validation'])),n)}},e.keyword$DataError={message:function(e){var n=e.keyword,r=e.schemaType;return r?(0,t.str)(gTt||(gTt=tDt(['"','" keyword must be '," ($data)"])),n,r):(0,t.str)(mTt||(mTt=tDt(['"','" keyword is invalid ($data)'])),n)}},e.reportError=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,a=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c=n.it,s=c.gen,d=c.compositeRule,f=c.allErrors,h=l(n,r,a);(null!=u?u:d||f)?i(s,h):o(c,(0,t._)(yTt||(yTt=tDt(["[","]"])),h))},e.reportExtraError=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,a=arguments.length>2?arguments[2]:void 0,u=t.it,c=u.gen,s=u.compositeRule,d=u.allErrors;i(c,l(t,n,a)),s||d||o(u,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if((0,t._)(bTt||(bTt=tDt([""," !== null"])),r.default.vErrors),(function(){return e.if(n,(function(){return e.assign((0,t._)(wTt||(wTt=tDt(["",".length"])),r.default.vErrors),n)}),(function(){return e.assign(r.default.vErrors,null)}))}))},e.extendErrors=function(e){var n=e.gen,i=e.keyword,o=e.schemaValue,a=e.data,l=e.errsCount,u=e.it;if(void 0===l)throw new Error("ajv implementation error");var c=n.name("err");n.forRange("i",l,r.default.errors,(function(e){n.const(c,(0,t._)(_Tt||(_Tt=tDt(["","[","]"])),r.default.vErrors,e)),n.if((0,t._)(xTt||(xTt=tDt(["",".instancePath === undefined"])),c),(function(){return n.assign((0,t._)(kTt||(kTt=tDt(["",".instancePath"])),c),(0,t.strConcat)(r.default.instancePath,u.errorPath))})),n.assign((0,t._)(CTt||(CTt=tDt(["",".schemaPath"])),c),(0,t.str)(STt||(STt=tDt(["","/",""])),u.errSchemaPath,i)),u.opts.verbose&&(n.assign((0,t._)(OTt||(OTt=tDt(["",".schema"])),c),o),n.assign((0,t._)(ETt||(ETt=tDt(["",".data"])),c),a))}))};var a={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function l(e,n,i){return!1===e.it.createErrors?(0,t._)(DTt||(DTt=tDt(["{}"]))):function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.gen,l=e.it,s=[u(l,i),c(e,i)];return function(e,n,i){var o=n.params,l=n.message,u=e.keyword,c=e.data,s=e.schemaValue,d=e.it,f=d.opts,h=d.propertyName,p=d.topSchemaRef,v=d.schemaPath;i.push([a.keyword,u],[a.params,"function"==typeof o?o(e):o||(0,t._)(LTt||(LTt=tDt(["{}"])))]),f.messages&&i.push([a.message,"function"==typeof l?l(e):l]);f.verbose&&i.push([a.schema,s],[a.parentSchema,(0,t._)(BTt||(BTt=tDt(["","",""])),p,v)],[r.default.data,c]);h&&i.push([a.propertyName,h])}(e,n,s),o.object.apply(o,s)}(e,n,i)}function u(e,i){var o=e.errorPath,a=i.instancePath,l=a?(0,t.str)(TTt||(TTt=tDt(["","",""])),o,(0,n.getErrorPath)(a,n.Type.Str)):o;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,l)]}function c(e,r){var i=e.keyword,o=e.it.errSchemaPath,l=r.schemaPath,u=r.parentSchema?o:(0,t.str)(FTt||(FTt=tDt(["","/",""])),o,i);return l&&(u=(0,t.str)(NTt||(NTt=tDt(["","",""])),u,(0,n.getErrorPath)(l,n.Type.Str))),[a.schemaPath,u]}}(aDt),Object.defineProperty(oDt,"__esModule",{value:!0}),oDt.boolOrEmptySchema=oDt.topBoolOrEmptySchema=void 0;var WTt=aDt,UTt=lDt,GTt=pTt,YTt={message:"boolean schema is false"};function $Tt(e,t){var n={gen:e.gen,keyword:"false schema",data:e.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,WTt.reportError)(n,YTt,void 0,t)}oDt.topBoolOrEmptySchema=function(e){var t=e.gen,n=e.schema,r=e.validateName;!1===n?$Tt(e,!1):"object"==lr(n)&&!0===n.$async?t.return(GTt.default.data):(t.assign((0,UTt._)(VTt||(VTt=tDt(["",".errors"])),r),null),t.return(!0))},oDt.boolOrEmptySchema=function(e,t){var n=e.gen;!1===e.schema?(n.var(t,!1),$Tt(e)):n.var(t,!0)};var qTt={},KTt={};function XTt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JTt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XTt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XTt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.defineProperty(KTt,"__esModule",{value:!0}),KTt.getRules=KTt.isJSONType=void 0;var ZTt=new Set(["string","number","integer","boolean","null","object","array"]);KTt.isJSONType=function(e){return"string"==typeof e&&ZTt.has(e)},KTt.getRules=function(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:JTt(JTt({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var QTt,eFt,tFt,nFt,rFt,iFt,oFt,aFt,lFt,uFt,cFt,sFt,dFt,fFt,hFt,pFt,vFt,gFt,mFt,yFt,bFt,wFt,_Ft,xFt,kFt,CFt,SFt,OFt,EFt,IFt,PFt,MFt,RFt,AFt={};function jFt(e,t){return t.rules.some((function(t){return DFt(e,t)}))}function DFt(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((function(t){return void 0!==e[t]})))}function TFt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FFt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FFt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function FFt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(AFt,"__esModule",{value:!0}),AFt.shouldUseRule=AFt.shouldUseGroup=AFt.schemaHasRulesForType=void 0,AFt.schemaHasRulesForType=function(e,t){var n=e.schema,r=e.self.RULES.types[t];return r&&!0!==r&&jFt(n,r)},AFt.shouldUseGroup=jFt,AFt.shouldUseRule=DFt,Object.defineProperty(qTt,"__esModule",{value:!0}),qTt.reportTypeError=qTt.checkDataTypes=qTt.checkDataType=qTt.coerceAndCheckDataType=qTt.getJSONTypes=qTt.getSchemaTypes=qTt.DataType=void 0;var NFt,LFt,BFt=KTt,VFt=AFt,zFt=aDt,HFt=lDt,WFt=XDt;function UFt(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every(BFt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}(LFt=NFt||(qTt.DataType=NFt={}))[LFt.Correct=0]="Correct",LFt[LFt.Wrong=1]="Wrong",qTt.getSchemaTypes=function(e){var t=UFt(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},qTt.getJSONTypes=UFt,qTt.coerceAndCheckDataType=function(e,t){var n=e.gen,r=e.data,i=e.opts,o=function(e,t){return t?e.filter((function(e){return GFt.has(e)||"array"===t&&"array"===e})):[]}(t,i.coerceTypes),a=t.length>0&&!(0===o.length&&1===t.length&&(0,VFt.schemaHasRulesForType)(e,t[0]));if(a){var l=$Ft(t,r,i.strictNumbers,NFt.Wrong);n.if(l,(function(){o.length?function(e,t,n){var r=e.gen,i=e.data,o=e.opts,a=r.let("dataType",(0,HFt._)(QTt||(QTt=tDt(["typeof ",""])),i)),l=r.let("coerced",(0,HFt._)(eFt||(eFt=tDt(["undefined"]))));"array"===o.coerceTypes&&r.if((0,HFt._)(tFt||(tFt=tDt([""," == 'object' && Array.isArray(",") && ",".length == 1"])),a,i,i),(function(){return r.assign(i,(0,HFt._)(nFt||(nFt=tDt(["","[0]"])),i)).assign(a,(0,HFt._)(rFt||(rFt=tDt(["typeof ",""])),i)).if($Ft(t,i,o.strictNumbers),(function(){return r.assign(l,i)}))}));r.if((0,HFt._)(iFt||(iFt=tDt([""," !== undefined"])),l));var u,c=TFt(n);try{for(c.s();!(u=c.n()).done;){var s=u.value;(GFt.has(s)||"array"===s&&"array"===o.coerceTypes)&&d(s)}}catch(e){c.e(e)}finally{c.f()}function d(e){switch(e){case"string":return void r.elseIf((0,HFt._)(aFt||(aFt=tDt(["",' == "number" || ',' == "boolean"'])),a,a)).assign(l,(0,HFt._)(lFt||(lFt=tDt(['"" + ',""])),i)).elseIf((0,HFt._)(uFt||(uFt=tDt([""," === null"])),i)).assign(l,(0,HFt._)(cFt||(cFt=tDt(['""']))));case"number":return void r.elseIf((0,HFt._)(sFt||(sFt=tDt(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"])),a,i,a,i,i,i)).assign(l,(0,HFt._)(dFt||(dFt=tDt(["+",""])),i));case"integer":return void r.elseIf((0,HFt._)(fFt||(fFt=tDt(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"])),a,i,a,i,i,i,i)).assign(l,(0,HFt._)(hFt||(hFt=tDt(["+",""])),i));case"boolean":return void r.elseIf((0,HFt._)(pFt||(pFt=tDt(["",' === "false" || '," === 0 || "," === null"])),i,i,i)).assign(l,!1).elseIf((0,HFt._)(vFt||(vFt=tDt(["",' === "true" || '," === 1"])),i,i)).assign(l,!0);case"null":return r.elseIf((0,HFt._)(gFt||(gFt=tDt(["",' === "" || '," === 0 || "," === false"])),i,i,i)),void r.assign(l,null);case"array":r.elseIf((0,HFt._)(mFt||(mFt=tDt(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"])),a,a,a,i)).assign(l,(0,HFt._)(yFt||(yFt=tDt(["[","]"])),i))}}r.else(),KFt(e),r.endIf(),r.if((0,HFt._)(oFt||(oFt=tDt([""," !== undefined"])),l),(function(){r.assign(i,l),function(e,t){var n=e.gen,r=e.parentData,i=e.parentDataProperty;n.if((0,HFt._)(bFt||(bFt=tDt([""," !== undefined"])),r),(function(){return n.assign((0,HFt._)(wFt||(wFt=tDt(["","[","]"])),r,i),t)}))}(e,l)}))}(e,t,o):KFt(e)}))}return a};var GFt=new Set(["string","number","integer","boolean","null"]);function YFt(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NFt.Correct,o=i===NFt.Correct?HFt.operators.EQ:HFt.operators.NEQ;switch(e){case"null":return(0,HFt._)(_Ft||(_Ft=tDt([""," "," null"])),t,o);case"array":r=(0,HFt._)(xFt||(xFt=tDt(["Array.isArray(",")"])),t);break;case"object":r=(0,HFt._)(kFt||(kFt=tDt([""," && typeof ",' == "object" && !Array.isArray(',")"])),t,t,t);break;case"integer":r=a((0,HFt._)(CFt||(CFt=tDt(["!("," % 1) && !isNaN(",")"])),t,t));break;case"number":r=a();break;default:return(0,HFt._)(SFt||(SFt=tDt(["typeof "," "," ",""])),t,o,e)}return i===NFt.Correct?r:(0,HFt.not)(r);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HFt.nil;return(0,HFt.and)((0,HFt._)(OFt||(OFt=tDt(["typeof ",' == "number"'])),t),e,n?(0,HFt._)(EFt||(EFt=tDt(["isFinite(",")"])),t):HFt.nil)}}function $Ft(e,t,n,r){if(1===e.length)return YFt(e[0],t,n,r);var i,o=(0,WFt.toHash)(e);if(o.array&&o.object){var a=(0,HFt._)(IFt||(IFt=tDt(["typeof ",' != "object"'])),t);i=o.null?a:(0,HFt._)(PFt||(PFt=tDt(["!"," || ",""])),t,a),delete o.null,delete o.array,delete o.object}else i=HFt.nil;for(var l in o.number&&delete o.integer,o)i=(0,HFt.and)(i,YFt(l,t,n,r));return i}qTt.checkDataType=YFt,qTt.checkDataTypes=$Ft;var qFt={message:function(e){var t=e.schema;return"must be ".concat(t)},params:function(e){var t=e.schema,n=e.schemaValue;return"string"==typeof t?(0,HFt._)(MFt||(MFt=tDt(["{type: ","}"])),t):(0,HFt._)(RFt||(RFt=tDt(["{type: ","}"])),n)}};function KFt(e){var t=function(e){var t=e.gen,n=e.data,r=e.schema,i=(0,WFt.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);(0,zFt.reportError)(t,qFt)}qTt.reportTypeError=KFt;var XFt,JFt,ZFt,QFt,eNt={};Object.defineProperty(eNt,"__esModule",{value:!0}),eNt.assignDefaults=void 0;var tNt=lDt,nNt=XDt;function rNt(e,t,n){var r=e.gen,i=e.compositeRule,o=e.data,a=e.opts;if(void 0!==n){var l=(0,tNt._)(XFt||(XFt=tDt(["","",""])),o,(0,tNt.getProperty)(t));if(i)(0,nNt.checkStrictMode)(e,"default is ignored for: ".concat(l));else{var u=(0,tNt._)(JFt||(JFt=tDt([""," === undefined"])),l);"empty"===a.useDefaults&&(u=(0,tNt._)(ZFt||(ZFt=tDt([""," || "," === null || ",' === ""'])),u,l,l)),r.if(u,(0,tNt._)(QFt||(QFt=tDt([""," = ",""])),l,(0,tNt.stringify)(n)))}}}eNt.assignDefaults=function(e,t){var n=e.schema,r=n.properties,i=n.items;if("object"===t&&r)for(var o in r)rNt(e,o,r[o].default);else"array"===t&&Array.isArray(i)&&i.forEach((function(t,n){return rNt(e,n,t.default)}))};var iNt,oNt,aNt,lNt,uNt,cNt,sNt,dNt,fNt,hNt,pNt,vNt,gNt,mNt,yNt,bNt={},wNt={};Object.defineProperty(wNt,"__esModule",{value:!0}),wNt.validateUnion=wNt.validateArray=wNt.usePattern=wNt.callValidateCode=wNt.schemaProperties=wNt.allSchemaProperties=wNt.noPropertyInData=wNt.propertyInData=wNt.isOwnProperty=wNt.hasPropFunc=wNt.reportMissingProp=wNt.checkMissingProp=wNt.checkReportMissingProp=void 0;var _Nt=lDt,xNt=XDt,kNt=pTt,CNt=XDt;function SNt(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,_Nt._)(aNt||(aNt=tDt(["Object.prototype.hasOwnProperty"])))})}function ONt(e,t,n){return(0,_Nt._)(lNt||(lNt=tDt(["",".call(",", ",")"])),SNt(e),t,n)}function ENt(e,t,n,r){var i=(0,_Nt._)(sNt||(sNt=tDt(["",""," === undefined"])),t,(0,_Nt.getProperty)(n));return r?(0,_Nt.or)(i,(0,_Nt.not)(ONt(e,t,n))):i}function INt(e){return e?Object.keys(e).filter((function(e){return"__proto__"!==e})):[]}wNt.checkReportMissingProp=function(e,t){var n=e.gen,r=e.data,i=e.it;n.if(ENt(n,r,t,i.opts.ownProperties),(function(){e.setParams({missingProperty:(0,_Nt._)(iNt||(iNt=tDt(["",""])),t)},!0),e.error()}))},wNt.checkMissingProp=function(e,t,n){var r=e.gen,i=e.data,o=e.it.opts;return _Nt.or.apply(void 0,ts(t.map((function(e){return(0,_Nt.and)(ENt(r,i,e,o.ownProperties),(0,_Nt._)(oNt||(oNt=tDt([""," = ",""])),n,e))}))))},wNt.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},wNt.hasPropFunc=SNt,wNt.isOwnProperty=ONt,wNt.propertyInData=function(e,t,n,r){var i=(0,_Nt._)(uNt||(uNt=tDt(["",""," !== undefined"])),t,(0,_Nt.getProperty)(n));return r?(0,_Nt._)(cNt||(cNt=tDt([""," && ",""])),i,ONt(e,t,n)):i},wNt.noPropertyInData=ENt,wNt.allSchemaProperties=INt,wNt.schemaProperties=function(e,t){return INt(t).filter((function(n){return!(0,xNt.alwaysValidSchema)(e,t[n])}))},wNt.callValidateCode=function(e,t,n,r){var i=e.schemaCode,o=e.data,a=e.it,l=a.gen,u=a.topSchemaRef,c=a.schemaPath,s=a.errorPath,d=e.it,f=r?(0,_Nt._)(dNt||(dNt=tDt(["",", ",", ","",""])),i,o,u,c):o,h=[[kNt.default.instancePath,(0,_Nt.strConcat)(kNt.default.instancePath,s)],[kNt.default.parentData,d.parentData],[kNt.default.parentDataProperty,d.parentDataProperty],[kNt.default.rootData,kNt.default.rootData]];d.opts.dynamicRef&&h.push([kNt.default.dynamicAnchors,kNt.default.dynamicAnchors]);var p=(0,_Nt._)(fNt||(fNt=tDt(["",", ",""])),f,l.object.apply(l,h));return n!==_Nt.nil?(0,_Nt._)(hNt||(hNt=tDt(["",".call(",", ",")"])),t,n,p):(0,_Nt._)(pNt||(pNt=tDt(["","(",")"])),t,p)};var PNt,MNt,RNt,ANt,jNt,DNt,TNt,FNt,NNt,LNt,BNt=(0,_Nt._)(vNt||(vNt=tDt(["new RegExp"])));wNt.usePattern=function(e,t){var n=e.gen,r=e.it.opts,i=r.unicodeRegExp?"u":"",o=r.code.regExp,a=o(t,i);return n.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,_Nt._)(gNt||(gNt=tDt(["","(",", ",")"])),"new RegExp"===o.code?BNt:(0,CNt.useFunc)(n,o),t,i)})},wNt.validateArray=function(e){var t=e.gen,n=e.data,r=e.keyword,i=e.it,o=t.name("valid");if(i.allErrors){var a=t.let("valid",!0);return l((function(){return t.assign(a,!1)})),a}return t.var(o,!0),l((function(){return t.break()})),o;function l(i){var a=t.const("len",(0,_Nt._)(mNt||(mNt=tDt(["",".length"])),n));t.forRange("i",0,a,(function(n){e.subschema({keyword:r,dataProp:n,dataPropType:xNt.Type.Num},o),t.if((0,_Nt.not)(o),i)}))}},wNt.validateUnion=function(e){var t=e.gen,n=e.schema,r=e.keyword,i=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!n.some((function(e){return(0,xNt.alwaysValidSchema)(i,e)}))||i.opts.unevaluated){var o=t.let("valid",!1),a=t.name("_valid");t.block((function(){return n.forEach((function(n,i){var l=e.subschema({keyword:r,schemaProp:i,compositeRule:!0},a);t.assign(o,(0,_Nt._)(yNt||(yNt=tDt([""," || ",""])),o,a)),e.mergeValidEvaluated(l,a)||t.if((0,_Nt.not)(o))}))})),e.result(o,(function(){return e.reset()}),(function(){return e.error(!0)}))}},Object.defineProperty(bNt,"__esModule",{value:!0}),bNt.validateKeywordUsage=bNt.validSchemaType=bNt.funcKeywordCode=bNt.macroKeywordCode=void 0;var VNt=lDt,zNt=pTt,HNt=wNt,WNt=aDt;function UNt(e){var t=e.gen,n=e.data,r=e.it;t.if(r.parentData,(function(){return t.assign(n,(0,VNt._)(TNt||(TNt=tDt(["","[","]"])),r.parentData,r.parentDataProperty))}))}function GNt(e,t,n){if(void 0===n)throw new Error('keyword "'.concat(t,'" failed to compile'));return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,VNt.stringify)(n)})}bNt.macroKeywordCode=function(e,t){var n=e.gen,r=e.keyword,i=e.schema,o=e.parentSchema,a=e.it,l=t.macro.call(a.self,i,o,a),u=GNt(n,r,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);var c=n.name("valid");e.subschema({schema:l,schemaPath:VNt.nil,errSchemaPath:"".concat(a.errSchemaPath,"/").concat(r),topSchemaRef:u,compositeRule:!0},c),e.pass(c,(function(){return e.error(!0)}))},bNt.funcKeywordCode=function(e,t){var n,r=e.gen,i=e.keyword,o=e.schema,a=e.parentSchema,l=e.$data,u=e.it;!function(e,t){var n=e.schemaEnv;if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}(u,t);var c=!l&&t.compile?t.compile.call(u.self,o,a,u):t.validate,s=GNt(r,i,c),d=r.let("valid");function f(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?(0,VNt._)(jNt||(jNt=tDt(["await "]))):VNt.nil,i=u.opts.passContext?zNt.default.this:zNt.default.self,o=!("compile"in t&&!l||!1===t.schema);r.assign(d,(0,VNt._)(DNt||(DNt=tDt(["","",""])),n,(0,HNt.callValidateCode)(e,s,i,o)),t.modifying)}function h(e){var n;r.if((0,VNt.not)(null!==(n=t.valid)&&void 0!==n?n:d),e)}e.block$data(d,(function(){if(!1===t.errors)f(),t.modifying&&UNt(e),h((function(){return e.error()}));else{var n=t.async?function(){var e=r.let("ruleErrs",null);return r.try((function(){return f((0,VNt._)(PNt||(PNt=tDt(["await "]))))}),(function(t){return r.assign(d,!1).if((0,VNt._)(MNt||(MNt=tDt([""," instanceof ",""])),t,u.ValidationError),(function(){return r.assign(e,(0,VNt._)(RNt||(RNt=tDt(["",".errors"])),t))}),(function(){return r.throw(t)}))})),e}():(i=(0,VNt._)(ANt||(ANt=tDt(["",".errors"])),s),r.assign(i,null),f(VNt.nil),i);t.modifying&&UNt(e),h((function(){return function(e,t){var n=e.gen;n.if((0,VNt._)(FNt||(FNt=tDt(["Array.isArray(",")"])),t),(function(){n.assign(zNt.default.vErrors,(0,VNt._)(NNt||(NNt=tDt([""," === null ? "," : ",".concat(",")"])),zNt.default.vErrors,t,zNt.default.vErrors,t)).assign(zNt.default.errors,(0,VNt._)(LNt||(LNt=tDt(["",".length"])),zNt.default.vErrors)),(0,WNt.extendErrors)(e)}),(function(){return e.error()}))}(e,n)}))}var i})),e.ok(null!==(n=t.valid)&&void 0!==n?n:d)},bNt.validSchemaType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==lr(e)&&!Array.isArray(e):lr(e)==t||n&&void 0===e}))},bNt.validateKeywordUsage=function(e,t,n){var r=e.schema,i=e.opts,o=e.self,a=e.errSchemaPath;if(Array.isArray(t.keyword)?!t.keyword.includes(n):t.keyword!==n)throw new Error("ajv implementation error");var l=t.dependencies;if(null==l?void 0:l.some((function(e){return!Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have dependencies of ".concat(n,": ").concat(l.join(",")));if(t.validateSchema&&!t.validateSchema(r[n])){var u='keyword "'.concat(n,'" value is invalid at path "').concat(a,'": ')+o.errorsText(t.validateSchema.errors);if("log"!==i.validateSchema)throw new Error(u);o.logger.error(u)}};var YNt,$Nt,qNt,KNt,XNt,JNt={};Object.defineProperty(JNt,"__esModule",{value:!0}),JNt.extendSubschemaMode=JNt.extendSubschemaData=JNt.getSubschema=void 0;var ZNt=lDt,QNt=XDt;JNt.getSubschema=function(e,t){var n=t.keyword,r=t.schemaProp,i=t.schema,o=t.schemaPath,a=t.errSchemaPath,l=t.topSchemaRef;if(void 0!==n&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==n){var u=e.schema[n];return void 0===r?{schema:u,schemaPath:(0,ZNt._)(YNt||(YNt=tDt(["","",""])),e.schemaPath,(0,ZNt.getProperty)(n)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n)}:{schema:u[r],schemaPath:(0,ZNt._)($Nt||($Nt=tDt(["","","",""])),e.schemaPath,(0,ZNt.getProperty)(n),(0,ZNt.getProperty)(r)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n,"/").concat((0,QNt.escapeFragment)(r))}}if(void 0!==i){if(void 0===o||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},JNt.extendSubschemaData=function(e,t,n){var r=n.dataProp,i=n.dataPropType,o=n.data,a=n.dataTypes,l=n.propertyName;if(void 0!==o&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');var u=t.gen;if(void 0!==r){var c=t.errorPath,s=t.dataPathArr,d=t.opts;f(u.let("data",(0,ZNt._)(qNt||(qNt=tDt(["","",""])),t.data,(0,ZNt.getProperty)(r)),!0)),e.errorPath=(0,ZNt.str)(KNt||(KNt=tDt(["","",""])),c,(0,QNt.getErrorPath)(r,i,d.jsPropertySyntax)),e.parentDataProperty=(0,ZNt._)(XNt||(XNt=tDt(["",""])),r),e.dataPathArr=[].concat(ts(s),[e.parentDataProperty])}function f(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[].concat(ts(t.dataNames),[n])}void 0!==o&&(f(o instanceof ZNt.Name?o:u.let("data",o,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},JNt.extendSubschemaMode=function(e,t){var n=t.jtdDiscriminator,r=t.jtdMetadata,i=t.compositeRule,o=t.createErrors,a=t.allErrors;void 0!==i&&(e.compositeRule=i),void 0!==o&&(e.createErrors=o),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=n,e.jtdMetadata=r};var eLt={},tLt=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==lr(t)&&"object"==lr(n)){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n},nLt={exports:{}},rLt=nLt.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),iLt(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function iLt(e,t,n,r,i,o,a,l,u,c){if(r&&"object"==lr(r)&&!Array.isArray(r)){for(var s in t(r,i,o,a,l,u,c),r){var d=r[s];if(Array.isArray(d)){if(s in rLt.arrayKeywords)for(var f=0;f<d.length;f++)iLt(e,t,n,d[f],i+"/"+s+"/"+f,o,i,s,r,f)}else if(s in rLt.propsKeywords){if(d&&"object"==lr(d))for(var h in d)iLt(e,t,n,d[h],i+"/"+s+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),o,i,s,r,h)}else(s in rLt.keywords||e.allKeys&&!(s in rLt.skipKeywords))&&iLt(e,t,n,d,i+"/"+s,o,i,s,r)}n(r,i,o,a,l,u,c)}}rLt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},rLt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},rLt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},rLt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var oLt=nLt.exports;Object.defineProperty(eLt,"__esModule",{value:!0}),eLt.getSchemaRefs=eLt.resolveUrl=eLt.normalizeId=eLt._getFullPath=eLt.getFullPath=eLt.inlineRef=void 0;var aLt=XDt,lLt=tLt,uLt=oLt,cLt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);eLt.inlineRef=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!dLt(e):!!t&&fLt(e)<=t)};var sLt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function dLt(e){for(var t in e){if(sLt.has(t))return!0;var n=e[t];if(Array.isArray(n)&&n.some(dLt))return!0;if("object"==lr(n)&&dLt(n))return!0}return!1}function fLt(e){var t=0;for(var n in e){if("$ref"===n)return 1/0;if(t++,!cLt.has(n)&&("object"==lr(e[n])&&(0,aLt.eachItem)(e[n],(function(e){return t+=fLt(e)})),t===1/0))return 1/0}return t}function hLt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!1!==(arguments.length>2?arguments[2]:void 0)&&(t=gLt(t));var n=e.parse(t);return pLt(e,n)}function pLt(e,t){return e.serialize(t).split("#")[0]+"#"}eLt.getFullPath=hLt,eLt._getFullPath=pLt;var vLt=/#\/?$/;function gLt(e){return e?e.replace(vLt,""):""}eLt.normalizeId=gLt,eLt.resolveUrl=function(e,t,n){return n=gLt(n),e.resolve(t,n)};var mLt,yLt,bLt,wLt,_Lt,xLt,kLt,CLt,SLt,OLt,ELt,ILt,PLt,MLt,RLt,ALt,jLt,DLt,TLt,FLt,NLt,LLt,BLt,VLt,zLt,HLt,WLt,ULt,GLt,YLt,$Lt,qLt,KLt,XLt,JLt,ZLt,QLt,eBt,tBt,nBt=/^[a-z_][-a-z0-9._]*$/i;function rBt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iBt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rBt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rBt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oBt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aBt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aBt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function aBt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}eLt.getSchemaRefs=function(e,t){var n=this;if("boolean"==typeof e)return{};var r=this.opts,i=r.schemaId,o=r.uriResolver,a=gLt(e[i]||t),l={"":a},u=hLt(o,a,!1),c={},s=new Set;return uLt(e,{allKeys:!0},(function(e,t,r,o){if(void 0!==o){var a=u+t,h=l[o];"string"==typeof e[i]&&(h=p.call(n,e[i])),v.call(n,e.$anchor),v.call(n,e.$dynamicAnchor),l[t]=h}function p(t){var n=this.opts.uriResolver.resolve;if(t=gLt(h?n(h,t):t),s.has(t))throw f(t);s.add(t);var r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==lr(r)?d(e,r.schema,t):t!==gLt(a)&&("#"===t[0]?(d(e,c[t],t),c[t]=e):this.refs[t]=a),t}function v(e){if("string"==typeof e){if(!nBt.test(e))throw new Error('invalid anchor "'.concat(e,'"'));p.call(this,"#".concat(e))}}})),c;function d(e,t,n){if(void 0!==t&&!lLt(e,t))throw f(n)}function f(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}},Object.defineProperty(iDt,"__esModule",{value:!0}),iDt.getData=iDt.KeywordCxt=iDt.validateFunctionCode=void 0;var lBt=oDt,uBt=qTt,cBt=AFt,sBt=qTt,dBt=eNt,fBt=bNt,hBt=JNt,pBt=lDt,vBt=pTt,gBt=eLt,mBt=XDt,yBt=aDt;function bBt(e,t){var n=e.gen,r=e.validateName,i=e.schema,o=e.schemaEnv,a=e.opts;a.code.es5?n.func(r,(0,pBt._)(mLt||(mLt=tDt(["",", ",""])),vBt.default.data,vBt.default.valCxt),o.$async,(function(){n.code((0,pBt._)(yLt||(yLt=tDt(['"use strict"; ',""])),wBt(i,a))),function(e,t){e.if(vBt.default.valCxt,(function(){e.var(vBt.default.instancePath,(0,pBt._)(xLt||(xLt=tDt(["",".",""])),vBt.default.valCxt,vBt.default.instancePath)),e.var(vBt.default.parentData,(0,pBt._)(kLt||(kLt=tDt(["",".",""])),vBt.default.valCxt,vBt.default.parentData)),e.var(vBt.default.parentDataProperty,(0,pBt._)(CLt||(CLt=tDt(["",".",""])),vBt.default.valCxt,vBt.default.parentDataProperty)),e.var(vBt.default.rootData,(0,pBt._)(SLt||(SLt=tDt(["",".",""])),vBt.default.valCxt,vBt.default.rootData)),t.dynamicRef&&e.var(vBt.default.dynamicAnchors,(0,pBt._)(OLt||(OLt=tDt(["",".",""])),vBt.default.valCxt,vBt.default.dynamicAnchors))}),(function(){e.var(vBt.default.instancePath,(0,pBt._)(ELt||(ELt=tDt(['""'])))),e.var(vBt.default.parentData,(0,pBt._)(ILt||(ILt=tDt(["undefined"])))),e.var(vBt.default.parentDataProperty,(0,pBt._)(PLt||(PLt=tDt(["undefined"])))),e.var(vBt.default.rootData,vBt.default.data),t.dynamicRef&&e.var(vBt.default.dynamicAnchors,(0,pBt._)(MLt||(MLt=tDt(["{}"]))))}))}(n,a),n.code(t)})):n.func(r,(0,pBt._)(bLt||(bLt=tDt(["",", ",""])),vBt.default.data,function(e){return(0,pBt._)(wLt||(wLt=tDt(["{",'="", ',", ",", ","=","","}={}"])),vBt.default.instancePath,vBt.default.parentData,vBt.default.parentDataProperty,vBt.default.rootData,vBt.default.data,e.dynamicRef?(0,pBt._)(_Lt||(_Lt=tDt([", ","={}"])),vBt.default.dynamicAnchors):pBt.nil)}(a)),o.$async,(function(){return n.code(wBt(i,a)).code(t)}))}function wBt(e,t){var n="object"==lr(e)&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,pBt._)(LLt||(LLt=tDt(["/*# sourceURL="," */"])),n):pBt.nil}function _Bt(e,t){kBt(e)&&(CBt(e),xBt(e))?function(e,t){var n=e.schema,r=e.gen,i=e.opts;i.$comment&&n.$comment&&OBt(e);(function(e){var t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,gBt.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);var o=r.const("_errs",vBt.default.errors);SBt(e,o),r.var(t,(0,pBt._)(BLt||(BLt=tDt([""," === ",""])),o,vBt.default.errors))}(e,t):(0,lBt.boolOrEmptySchema)(e,t)}function xBt(e){var t=e.schema,n=e.self;if("boolean"==typeof t)return!t;for(var r in t)if(n.RULES.all[r])return!0;return!1}function kBt(e){return"boolean"!=typeof e.schema}function CBt(e){(0,mBt.checkUnknownRules)(e),function(e){var t=e.schema,n=e.errSchemaPath,r=e.opts,i=e.self;t.$ref&&r.ignoreKeywordsWithRef&&(0,mBt.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn('$ref: keywords ignored in schema at path "'.concat(n,'"'))}(e)}function SBt(e,t){if(e.opts.jtd)return EBt(e,[],!1,t);var n=(0,uBt.getSchemaTypes)(e.schema);EBt(e,n,!(0,uBt.coerceAndCheckDataType)(e,n),t)}function OBt(e){var t=e.gen,n=e.schemaEnv,r=e.schema,i=e.errSchemaPath,o=e.opts,a=r.$comment;if(!0===o.$comment)t.code((0,pBt._)(VLt||(VLt=tDt(["",".logger.log(",")"])),vBt.default.self,a));else if("function"==typeof o.$comment){var l=(0,pBt.str)(zLt||(zLt=tDt(["","/$comment"])),i),u=t.scopeValue("root",{ref:n.root});t.code((0,pBt._)(HLt||(HLt=tDt(["",".opts.$comment(",", ",", ",".schema)"])),vBt.default.self,a,l,u))}}function EBt(e,t,n,r){var i=e.gen,o=e.schema,a=e.data,l=e.allErrors,u=e.opts,c=e.self.RULES;function s(c){(0,cBt.shouldUseGroup)(o,c)&&(c.type?(i.if((0,sBt.checkDataType)(c.type,a,u.strictNumbers)),IBt(e,c),1===t.length&&t[0]===c.type&&n&&(i.else(),(0,sBt.reportTypeError)(e)),i.endIf()):IBt(e,c),l||i.if((0,pBt._)(KLt||(KLt=tDt([""," === ",""])),vBt.default.errors,r||0)))}!o.$ref||!u.ignoreKeywordsWithRef&&(0,mBt.schemaHasRulesButRef)(o,c)?(u.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((function(t){MBt(e.dataTypes,t)||RBt(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))})),function(e,t){var n,r=[],i=oBt(e.dataTypes);try{for(i.s();!(n=i.n()).done;){var o=n.value;MBt(t,o)?r.push(o):t.includes("integer")&&"number"===o&&r.push("integer")}}catch(e){i.e(e)}finally{i.f()}e.dataTypes=r}(e,t)})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&RBt(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){var n=e.self.RULES.all;for(var r in n){var i=n[r];if("object"==lr(i)&&(0,cBt.shouldUseRule)(e.schema,i)){var o=i.definition.type;o.length&&!o.some((function(e){return PBt(t,e)}))&&RBt(e,'missing type "'.concat(o.join(","),'" for keyword "').concat(r,'"'))}}}(e,e.dataTypes)}(e,t),i.block((function(){var e,t=oBt(c.rules);try{for(t.s();!(e=t.n()).done;){s(e.value)}}catch(e){t.e(e)}finally{t.f()}s(c.post)}))):i.block((function(){return jBt(e,"$ref",c.all.$ref.definition)}))}function IBt(e,t){var n=e.gen,r=e.schema;e.opts.useDefaults&&(0,dBt.assignDefaults)(e,t.type),n.block((function(){var n,i=oBt(t.rules);try{for(i.s();!(n=i.n()).done;){var o=n.value;(0,cBt.shouldUseRule)(r,o)&&jBt(e,o.keyword,o.definition,t.type)}}catch(e){i.e(e)}finally{i.f()}}))}function PBt(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function MBt(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function RBt(e,t){var n=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(n,'" (strictTypes)'),(0,mBt.checkStrictMode)(e,t,e.opts.strictTypes)}iDt.validateFunctionCode=function(e){kBt(e)&&(CBt(e),xBt(e))?function(e){var t=e.schema,n=e.opts,r=e.gen;bBt(e,(function(){n.$comment&&t.$comment&&OBt(e),function(e){var t=e.schema,n=e.opts;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,mBt.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(vBt.default.vErrors,null),r.let(vBt.default.errors,0),n.unevaluated&&function(e){var t=e.gen,n=e.validateName;e.evaluated=t.const("evaluated",(0,pBt._)(RLt||(RLt=tDt(["",".evaluated"])),n)),t.if((0,pBt._)(ALt||(ALt=tDt(["",".dynamicProps"])),e.evaluated),(function(){return t.assign((0,pBt._)(jLt||(jLt=tDt(["",".props"])),e.evaluated),(0,pBt._)(DLt||(DLt=tDt(["undefined"]))))})),t.if((0,pBt._)(TLt||(TLt=tDt(["",".dynamicItems"])),e.evaluated),(function(){return t.assign((0,pBt._)(FLt||(FLt=tDt(["",".items"])),e.evaluated),(0,pBt._)(NLt||(NLt=tDt(["undefined"]))))}))}(e),SBt(e),function(e){var t=e.gen,n=e.schemaEnv,r=e.validateName,i=e.ValidationError,o=e.opts;n.$async?t.if((0,pBt._)(WLt||(WLt=tDt([""," === 0"])),vBt.default.errors),(function(){return t.return(vBt.default.data)}),(function(){return t.throw((0,pBt._)(ULt||(ULt=tDt(["new ","(",")"])),i,vBt.default.vErrors))})):(t.assign((0,pBt._)(GLt||(GLt=tDt(["",".errors"])),r),vBt.default.vErrors),o.unevaluated&&function(e){var t=e.gen,n=e.evaluated,r=e.props,i=e.items;r instanceof pBt.Name&&t.assign((0,pBt._)($Lt||($Lt=tDt(["",".props"])),n),r);i instanceof pBt.Name&&t.assign((0,pBt._)(qLt||(qLt=tDt(["",".items"])),n),i)}(e),t.return((0,pBt._)(YLt||(YLt=tDt([""," === 0"])),vBt.default.errors)))}(e)}))}(e):bBt(e,(function(){return(0,lBt.topBoolOrEmptySchema)(e)}))};var ABt=function(){return ls((function e(t,n,r){if(us(this,e),(0,fBt.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,mBt.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",FBt(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,fBt.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error("".concat(r," value must be ").concat(JSON.stringify(n.schemaType)));("code"in n?n.trackErrors:!1!==n.errors)&&(this.errsCount=t.gen.const("_errs",vBt.default.errors))}),[{key:"result",value:function(e,t,n){this.failResult((0,pBt.not)(e),t,n)}},{key:"failResult",value:function(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.failResult((0,pBt.not)(e),void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail((0,pBt._)(XLt||(XLt=tDt([""," !== undefined && (",")"])),t,(0,pBt.or)(this.invalid$data(),e)))}},{key:"error",value:function(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}},{key:"_error",value:function(e,t){(e?yBt.reportExtraError:yBt.reportError)(this,this.def.error,t)}},{key:"$dataError",value:function(){(0,yBt.reportError)(this,this.def.$dataError||yBt.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,yBt.resetErrorsCount)(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?Object.assign(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pBt.nil;this.gen.block((function(){n.check$data(e,r),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pBt.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pBt.nil;if(this.$data){var n=this.gen,r=this.schemaCode,i=this.schemaType,o=this.def;n.if((0,pBt.or)((0,pBt._)(JLt||(JLt=tDt([""," === undefined"])),r),t)),e!==pBt.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==pBt.nil&&n.assign(e,!1)),n.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,n=this.schemaType,r=this.def,i=this.it;return(0,pBt.or)(function(){if(n.length){if(!(t instanceof pBt.Name))throw new Error("ajv implementation error");var e=Array.isArray(n)?n:[n];return(0,pBt._)(ZLt||(ZLt=tDt(["",""])),(0,sBt.checkDataTypes)(e,t,i.opts.strictNumbers,sBt.DataType.Wrong))}return pBt.nil}(),function(){if(r.validateSchema){var n=e.scopeValue("validate$data",{ref:r.validateSchema});return(0,pBt._)(QLt||(QLt=tDt(["!","(",")"])),n,t)}return pBt.nil}())}},{key:"subschema",value:function(e,t){var n=(0,hBt.getSubschema)(this.it,e);(0,hBt.extendSubschemaData)(n,this.it,e),(0,hBt.extendSubschemaMode)(n,e);var r=iBt(iBt(iBt({},this.it),n),{},{items:void 0,props:void 0});return _Bt(r,t),r}},{key:"mergeEvaluated",value:function(e,t){var n=this.it,r=this.gen;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=mBt.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=mBt.mergeEvaluated.items(r,e.items,n.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var n=this,r=this.it,i=this.gen;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return i.if(t,(function(){return n.mergeEvaluated(e,pBt.Name)})),!0}}])}();function jBt(e,t,n,r){var i=new ABt(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,fBt.funcKeywordCode)(i,n):"macro"in n?(0,fBt.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,fBt.funcKeywordCode)(i,n)}iDt.KeywordCxt=ABt;var DBt=/^\/(?:[^~]|~0|~1)*$/,TBt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function FBt(e,t){var n,r,i=t.dataLevel,o=t.dataNames,a=t.dataPathArr;if(""===e)return vBt.default.rootData;if("/"===e[0]){if(!DBt.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));n=e,r=vBt.default.rootData}else{var l=TBt.exec(e);if(!l)throw new Error("Invalid JSON-pointer: ".concat(e));var u=+l[1];if("#"===(n=l[2])){if(u>=i)throw new Error(h("property/index",u));return a[i-u]}if(u>i)throw new Error(h("data",u));if(r=o[i-u],!n)return r}var c,s=r,d=oBt(n.split("/"));try{for(d.s();!(c=d.n()).done;){var f=c.value;f&&(r=(0,pBt._)(eBt||(eBt=tDt(["","",""])),r,(0,pBt.getProperty)((0,mBt.unescapeJsonPointer)(f))),s=(0,pBt._)(tBt||(tBt=tDt([""," && ",""])),s,r))}}catch(e){d.e(e)}finally{d.f()}return s;function h(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(i)}}iDt.getData=FBt;var NBt={};function LBt(e,t,n){return t=Ch(t),kh(e,BBt()?Reflect.construct(t,n,Ch(e).constructor):t.apply(e,n))}function BBt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BBt=function(){return!!e})()}Object.defineProperty(NBt,"__esModule",{value:!0});var VBt=function(e){function t(e){var n;return us(this,t),(n=LBt(this,t,["validation failed"])).errors=e,n.ajv=n.validation=!0,n}return Oh(t,e),ls(t)}(tY(Error));NBt.default=VBt;var zBt={};function HBt(e,t,n){return t=Ch(t),kh(e,WBt()?Reflect.construct(t,n,Ch(e).constructor):t.apply(e,n))}function WBt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(WBt=function(){return!!e})()}Object.defineProperty(zBt,"__esModule",{value:!0});var UBt=eLt,GBt=function(e){function t(e,n,r,i){var o;return us(this,t),(o=HBt(this,t,[i||"can't resolve reference ".concat(r," from id ").concat(n)])).missingRef=(0,UBt.resolveUrl)(e,n,r),o.missingSchema=(0,UBt.normalizeId)((0,UBt.getFullPath)(e,o.missingRef)),o}return Oh(t,e),ls(t)}(tY(Error));zBt.default=GBt;var YBt,$Bt,qBt={};function KBt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return XBt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XBt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function XBt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(qBt,"__esModule",{value:!0}),qBt.resolveSchema=qBt.getCompilingSchema=qBt.resolveRef=qBt.compileSchema=qBt.SchemaEnv=void 0;var JBt=lDt,ZBt=NBt,QBt=pTt,eVt=eLt,tVt=XDt,nVt=iDt,rVt=ls((function e(t){var n,r;us(this,e),this.refs={},this.dynamicAnchors={},"object"==lr(t.schema)&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(n=t.baseId)&&void 0!==n?n:(0,eVt.normalizeId)(null==r?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==r?void 0:r.$async,this.refs={}}));function iVt(e){var t=aVt.call(this,e);if(t)return t;var n,r=(0,eVt.getFullPath)(this.opts.uriResolver,e.root.baseId),i=this.opts.code,o=i.es5,a=i.lines,l=this.opts.ownProperties,u=new JBt.CodeGen(this.scope,{es5:o,lines:a,ownProperties:l});e.$async&&(n=u.scopeValue("Error",{ref:ZBt.default,code:(0,JBt._)(YBt||(YBt=tDt(['require("ajv/dist/runtime/validation_error").default'])))}));var c=u.scopeName("validate");e.validateName=c;var s,d={gen:u,allErrors:this.opts.allErrors,data:QBt.default.data,parentData:QBt.default.parentData,parentDataProperty:QBt.default.parentDataProperty,dataNames:[QBt.default.data],dataPathArr:[JBt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,JBt.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:n,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:JBt.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,JBt._)($Bt||($Bt=tDt(['""']))),opts:this.opts,self:this};try{this._compilations.add(e),(0,nVt.validateFunctionCode)(d),u.optimize(this.opts.code.optimize);var f=u.toString();s="".concat(u.scopeRefs(QBt.default.scope),"return ").concat(f),this.opts.code.process&&(s=this.opts.code.process(s,e));var h=new Function("".concat(QBt.default.self),"".concat(QBt.default.scope),s)(this,this.scope.get());if(this.scope.value(c,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),!0===this.opts.code.source&&(h.source={validateName:c,validateCode:f,scopeValues:u._values}),this.opts.unevaluated){var p=d.props,v=d.items;h.evaluated={props:p instanceof JBt.Name?void 0:p,items:v instanceof JBt.Name?void 0:v,dynamicProps:p instanceof JBt.Name,dynamicItems:v instanceof JBt.Name},h.source&&(h.source.evaluated=(0,JBt.stringify)(h.evaluated))}return e.validate=h,e}catch(t){throw delete e.validate,delete e.validateName,s&&this.logger.error("Error compiling schema, function code:",s),t}finally{this._compilations.delete(e)}}function oVt(e){return(0,eVt.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:iVt.call(this,e)}function aVt(e){var t,n,r,i=KBt(this._compilations);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(r=e,(n=o).schema===r.schema&&n.root===r.root&&n.baseId===r.baseId)return o}}catch(e){i.e(e)}finally{i.f()}}function lVt(e,t){for(var n;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||uVt.call(this,e,t)}function uVt(e,t){var n=this.opts.uriResolver.parse(t),r=(0,eVt._getFullPath)(this.opts.uriResolver,n),i=(0,eVt.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return sVt.call(this,n,e);var o=(0,eVt.normalizeId)(r),a=this.refs[o]||this.schemas[o];if("string"==typeof a){var l=uVt.call(this,e,a);if("object"!==lr(null==l?void 0:l.schema))return;return sVt.call(this,n,l)}if("object"===lr(null==a?void 0:a.schema)){if(a.validate||iVt.call(this,a),o===(0,eVt.normalizeId)(t)){var u=a.schema,c=this.opts.schemaId,s=u[c];return s&&(i=(0,eVt.resolveUrl)(this.opts.uriResolver,i,s)),new rVt({schema:u,schemaId:c,root:e,baseId:i})}return sVt.call(this,n,a)}}qBt.SchemaEnv=rVt,qBt.compileSchema=iVt,qBt.resolveRef=function(e,t,n){var r;n=(0,eVt.resolveUrl)(this.opts.uriResolver,t,n);var i=e.refs[n];if(i)return i;var o=lVt.call(this,e,n);if(void 0===o){var a=null===(r=e.localRefs)||void 0===r?void 0:r[n],l=this.opts.schemaId;a&&(o=new rVt({schema:a,schemaId:l,root:e,baseId:t}))}return void 0!==o?e.refs[n]=oVt.call(this,o):void 0},qBt.getCompilingSchema=aVt,qBt.resolveSchema=uVt;var cVt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function sVt(e,t){var n,r=t.baseId,i=t.schema,o=t.root;if("/"===(null===(n=e.fragment)||void 0===n?void 0:n[0])){var a,l,u=KBt(e.fragment.slice(1).split("/"));try{for(u.s();!(a=u.n()).done;){var c=a.value;if("boolean"==typeof i)return;var s=i[(0,tVt.unescapeFragment)(c)];if(void 0===s)return;var d="object"===lr(i=s)&&i[this.opts.schemaId];!cVt.has(c)&&d&&(r=(0,eVt.resolveUrl)(this.opts.uriResolver,r,d))}}catch(e){u.e(e)}finally{u.f()}if("boolean"!=typeof i&&i.$ref&&!(0,tVt.schemaHasRulesButRef)(i,this.RULES)){var f=(0,eVt.resolveUrl)(this.opts.uriResolver,r,i.$ref);l=uVt.call(this,o,f)}var h=this.opts.schemaId;return(l=l||new rVt({schema:i,schemaId:h,root:o,baseId:r})).schema!==l.root.schema?l:void 0}}const dVt={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var fVt={},hVt={exports:{}};function pVt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vVt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vVt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function vVt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gVt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},mVt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])$/;function yVt(e){if(xVt(e,".")<3)return{host:e,isIPV4:!1};var t=nY(e.match(mVt)||[],1)[0];return t?{host:_Vt(t,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function bVt(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="",i=!0,o=pVt(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(void 0===gVt[a])return;"0"!==a&&!0===i&&(i=!1),i||(r+=a)}}catch(e){o.e(e)}finally{o.f()}return n&&0===r.length&&(r="0"),r}function wVt(e){if(xVt(e,":")<2)return{host:e,isIPV6:!1};var t=function(e){var t=0,n={error:!1,address:"",zone:""},r=[],i=[],o=!1,a=!1,l=!1;function u(){if(i.length){if(!1===o){var e=bVt(i);if(void 0===e)return n.error=!0,!1;r.push(e)}i.length=0}return!0}for(var c=0;c<e.length;c++){var s=e[c];if("["!==s&&"]"!==s)if(":"!==s)if("%"===s){if(!u())break;o=!0}else i.push(s);else{if(!0===a&&(l=!0),!u())break;if(t++,r.push(":"),t>7){n.error=!0;break}c-1>=0&&":"===e[c-1]&&(a=!0)}}return i.length&&(o?n.zone=i.join(""):l?r.push(i.join("")):r.push(bVt(i))),n.address=r.join(""),n}(e);if(t.error)return{host:e,isIPV6:!1};var n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,escapedHost:r,isIPV6:!0}}function _Vt(e,t){for(var n="",r=!0,i=e.length,o=0;o<i;o++){var a=e[o];"0"===a&&r?(o+1<=i&&e[o+1]===t||o+1===i)&&(n+=a,r=!1):(r=a===t,n+=a)}return n}function xVt(e,t){for(var n=0,r=0;r<e.length;r++)e[r]===t&&n++;return n}var kVt=/^\.\.?\//,CVt=/^\/\.(?:\/|$)/,SVt=/^\/\.\.(?:\/|$)/,OVt=/^\/?(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\n)*?(?=\/|$)/;var EVt=function(e){var t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){var n=unescape(e.host),r=yVt(n);if(r.isIPV4)n=r.host;else{var i=wVt(r.host);n=!0===i.isIPV6?"[".concat(i.escapedHost,"]"):e.host}t.push(n)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},IVt=function(e,t){var n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},PVt=/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/i,MVt=/([0-9a-z\u017F\u212A][\x2D0-9a-z\u017F\u212A]{0,31}):((?:[!\$'-\.0-;=@-Z_a-z\u017F\u212A]|%[0-9a-f]{2})+)/i;function RVt(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function AVt(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function jVt(e){var t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}var DVt={scheme:"http",domainHost:!0,parse:AVt,serialize:jVt},TVt={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=RVt(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(RVt(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var t=nY(e.resourceName.split("?"),2),n=t[0],r=t[1];e.path=n&&"/"!==n?n:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},FVt={scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;var n=e.path.match(MVt);if(n){var r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];var i="".concat(r,":").concat(t.nid||e.nid),o=LVt[i];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i="".concat(n,":").concat(t.nid||r),o=LVt[i];o&&(e=o.serialize(e,t));var a=e,l=e.nss;return a.path="".concat(r||t.nid,":").concat(l),t.skipEscape=!0,a},skipNormalize:!0},NVt={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&PVt.test(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0},LVt={http:DVt,https:{scheme:"https",domainHost:DVt.domainHost,parse:AVt,serialize:jVt},ws:TVt,wss:{scheme:"wss",domainHost:TVt.domainHost,parse:TVt.parse,serialize:TVt.serialize},urn:FVt,"urn:uuid":NVt};function BVt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VVt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BVt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BVt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zVt=wVt,HVt=yVt,WVt=function(e){for(var t=[];e.length;)if(e.match(kVt))e=e.replace(kVt,"");else if(e.match(CVt))e=e.replace(CVt,"/");else if(e.match(SVt))e=e.replace(SVt,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(OVt);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")},UVt=EVt,GVt=IVt,YVt=LVt;function $Vt(e,t,n,r){var i={};return r||(e=JVt(qVt(e,n),n),t=JVt(qVt(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=WVt(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=WVt(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=WVt(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=WVt(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function qVt(e,t){var n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),i=[],o=YVt[(r.scheme||n.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(n,r),void 0!==n.path&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==r.reference&&n.scheme&&i.push(n.scheme,":");var a=UVt(n);if(void 0!==a&&("suffix"!==r.reference&&i.push("//"),i.push(a),n.path&&"/"!==n.path.charAt(0)&&i.push("/")),void 0!==n.path){var l=n.path;r.absolutePath||o&&o.absolutePath||(l=WVt(l)),void 0===a&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==n.query&&i.push("?",n.query),void 0!==n.fragment&&i.push("#",n.fragment),i.join("")}var KVt=Array.from({length:127},(function(e,t){return/(?:[\0- #%\/-:<>-\^\|\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/.test(String.fromCharCode(t))}));var XVt=/^(?:((?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+):)?(?:\/\/((?:((?:[\0-"\$-\.0->A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)@)?(\[(?:[\0-"\$-\.0->@-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+\]|(?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?::([0-9]*))?))?((?:[\0-"\$->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?:\?((?:[\0-"\$-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?(?:#((?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|[\n\r])*))?/;function JVt(e,t){var n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=-1!==e.indexOf("%"),o=!1;"suffix"===n.reference&&(e=(n.scheme?n.scheme+":":"")+"//"+e);var a=e.match(XVt);if(a){if(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5]),r.host){var l=HVt(r.host);if(!1===l.isIPV4){var u=zVt(l.host);r.host=u.host.toLowerCase(),o=u.isIPV6}else r.host=l.host,o=!0}void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");var c=YVt[(n.scheme||r.scheme||"").toLowerCase()];if(!(n.unicodeSupport||c&&c.unicodeSupport)&&r.host&&(n.domainHost||c&&c.domainHost)&&!1===o&&function(e){for(var t=0,n=0,r=e.length;n<r;++n)if((t=e.charCodeAt(n))>126||KVt[t])return!0;return!1}(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII: "+e}(!c||c&&!c.skipNormalize)&&(i&&void 0!==r.scheme&&(r.scheme=unescape(r.scheme)),i&&void 0!==r.host&&(r.host=unescape(r.host)),r.path&&r.path.length&&(r.path=escape(unescape(r.path))),r.fragment&&r.fragment.length&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),c&&c.parse&&c.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}var ZVt={SCHEMES:YVt,normalize:function(e,t){return"string"==typeof e?e=qVt(JVt(e,t),t):"object"===lr(e)&&(e=JVt(qVt(e,t),t)),e},resolve:function(e,t,n){var r=Object.assign({scheme:"null"},n);return qVt($Vt(JVt(e,r),JVt(t,r),r,!0),VVt(VVt({},r),{},{skipEscape:!0}))},resolveComponents:$Vt,equal:function(e,t,n){return"string"==typeof e?(e=unescape(e),e=qVt(GVt(JVt(e,n),!0),VVt(VVt({},n),{},{skipEscape:!0}))):"object"===lr(e)&&(e=qVt(GVt(e,!0),VVt(VVt({},n),{},{skipEscape:!0}))),"string"==typeof t?(t=unescape(t),t=qVt(GVt(JVt(t,n),!0),VVt(VVt({},n),{},{skipEscape:!0}))):"object"===lr(t)&&(t=qVt(GVt(t,!0),VVt(VVt({},n),{},{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()},serialize:qVt,parse:JVt};hVt.exports=ZVt,hVt.exports.default=ZVt,hVt.exports.fastUri=ZVt;var QVt=hVt.exports;Object.defineProperty(fVt,"__esModule",{value:!0});var ezt=QVt;function tzt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nzt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nzt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function nzt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rzt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function izt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rzt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rzt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ezt.code='require("ajv/dist/runtime/uri").default',fVt.default=ezt,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=iDt;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=lDt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});var r=NBt,i=zBt,o=KTt,a=qBt,l=lDt,u=eLt,c=qTt,s=XDt,d=dVt,f=fVt,h=function(e,t){return new RegExp(e,t)};h.code="new RegExp";var p=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};var y=function(){return ls((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};us(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=izt(izt({},t),function(e){var t,n,r,i,o,a,l,u,c,s,d,p,v,g,m,y,b,w,_,x,k,C,S,O,E,I=e.strict,P=null===(t=e.code)||void 0===t?void 0:t.optimize,M=!0===P||void 0===P?1:P||0,R=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:h,A=null!==(i=e.uriResolver)&&void 0!==i?i:f.default;return{strictSchema:null===(a=null!==(o=e.strictSchema)&&void 0!==o?o:I)||void 0===a||a,strictNumbers:null===(u=null!==(l=e.strictNumbers)&&void 0!==l?l:I)||void 0===u||u,strictTypes:null!==(s=null!==(c=e.strictTypes)&&void 0!==c?c:I)&&void 0!==s?s:"log",strictTuples:null!==(p=null!==(d=e.strictTuples)&&void 0!==d?d:I)&&void 0!==p?p:"log",strictRequired:null!==(g=null!==(v=e.strictRequired)&&void 0!==v?v:I)&&void 0!==g&&g,code:e.code?izt(izt({},e.code),{},{optimize:M,regExp:R}):{optimize:M,regExp:R},loopRequired:null!==(m=e.loopRequired)&&void 0!==m?m:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(_=e.inlineRefs)||void 0===_||_,schemaId:null!==(x=e.schemaId)&&void 0!==x?x:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(C=e.validateSchema)||void 0===C||C,validateFormats:null===(S=e.validateFormats)||void 0===S||S,unicodeRegExp:null===(O=e.unicodeRegExp)||void 0===O||O,int32range:null===(E=e.int32range)||void 0===E||E,uriResolver:A}}(t));var n=this.opts.code,r=n.es5,i=n.lines;this.scope=new l.ValueScope({scope:{},prefixes:v,es5:r,lines:i}),this.logger=function(e){if(!1===e)return S;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(t.logger);var a=t.validateFormats;t.validateFormats=!1,this.RULES=(0,o.getRules)(),b.call(this,g,t,"NOT SUPPORTED"),b.call(this,m,t,"DEPRECATED","warn"),this._metaOpts=C.call(this),t.formats&&x.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&k.call(this,t.keywords),"object"==lr(t.meta)&&this.addMetaSchema(t.meta),_.call(this),t.validateFormats=a}),[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data,n=e.meta,r=e.schemaId,i=d;"id"===r&&((i=izt({},d)).id=i.$id,delete i.$id),n&&t&&this.addMetaSchema(i,i[r],!1)}},{key:"defaultMeta",value:function(){var e=this.opts,t=e.meta,n=e.schemaId;return this.opts.defaultMeta="object"==lr(t)?t[n]||t:void 0}},{key:"validate",value:function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'.concat(e,'"'))}else n=this.compile(e);var r=n(t);return"$async"in n||(this.errors=n.errors),r}},{key:"compile",value:function(e,t){var n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}},{key:"compileAsync",value:function(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var n=this.opts.loadSchema;return r.call(this,e,t);function r(e,t){return o.apply(this,arguments)}function o(){return(o=rs(ps.mark((function e(t,n){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call(this,t.$schema);case 2:return r=this._addSchema(t,n),e.abrupt("return",r.validate||u.call(this,r));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=rs(ps.mark((function e(t){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.getSchema(t)){e.next=3;break}return e.next=3,r.call(this,{$ref:t},!0);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return(c=rs(ps.mark((function e(t){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof i.default){e.next=8;break}throw e.t0;case 8:return s.call(this,e.t0),e.next=11,d.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",u.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])})))).apply(this,arguments)}function s(e){var t=e.missingSchema,n=e.missingRef;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(n," cannot be resolved"))}function d(e){return f.apply(this,arguments)}function f(){return(f=rs(ps.mark((function e(n){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.call(this,n);case 2:if(r=e.sent,this.refs[n]){e.next=6;break}return e.next=6,a.call(this,r.$schema);case 6:this.refs[n]||this.addSchema(r,n,t);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=rs(ps.mark((function e(t){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._loading[t])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this._loading[t]=n(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])})))).apply(this,arguments)}}},{key:"addSchema",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var o,a=tzt(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;this.addSchema(l,void 0,n,i)}}catch(e){a.e(e)}finally{a.f()}return this}if("object"===lr(e)){var c=this.opts.schemaId;if(void 0!==(r=e[c])&&"string"!=typeof r)throw new Error("schema ".concat(c," must be string"))}return t=(0,u.normalizeId)(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,i,!0),this}},{key:"addMetaSchema",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,n),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var n;if(void 0!==(n=e.$schema)&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(i);this.logger.error(i)}return r}},{key:"getSchema",value:function(e){for(var t;"string"==typeof(t=w.call(this,e));)e=t;if(void 0===t){var n=this.opts.schemaId,r=new a.SchemaEnv({schema:{},schemaId:n});if(!(t=a.resolveSchema.call(this,r,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(lr(e)){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=w.call(this,e);return"object"==lr(t)&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var n=e;this._cache.delete(n);var r=e[this.opts.schemaId];return r&&(r=(0,u.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t,n=tzt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addKeyword(r)}}catch(e){n.e(e)}finally{n.f()}return this}},{key:"addKeyword",value:function(e,t){var n,r=this;if("string"==typeof e)n=e,"object"==lr(t)&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=lr(e)||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(E.call(this,n,t),!t)return(0,s.eachItem)(n,(function(e){return I.call(r,e)})),this;M.call(this,t);var i=izt(izt({},t),{},{type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)});return(0,s.eachItem)(n,0===i.type.length?function(e){return I.call(r,e,i)}:function(e){return i.type.forEach((function(t){return I.call(r,e,i,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==lr(t)?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var n,r=tzt(t.rules);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.rules.findIndex((function(t){return t.keyword===e}));o>=0&&i.rules.splice(o,1)}}catch(e){r.e(e)}finally{r.f()}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.separator,r=void 0===n?", ":n,i=t.dataVar,o=void 0===i?"data":i;return e&&0!==e.length?e.map((function(e){return"".concat(o).concat(e.instancePath," ").concat(e.message)})).reduce((function(e,t){return e+r+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var n=this.RULES.all;e=JSON.parse(JSON.stringify(e));var r,i=tzt(t);try{for(i.s();!(r=i.n()).done;){var o,a=r.value.split("/").slice(1),l=e,u=tzt(a);try{for(u.s();!(o=u.n()).done;){l=l[o.value]}}catch(e){u.e(e)}finally{u.f()}for(var c in n){var s=n[c];if("object"==lr(s)){var d=s.definition.$data,f=l[c];d&&f&&(l[c]=A(f))}}}}catch(e){i.e(e)}finally{i.f()}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var n in e){var r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}},{key:"_addSchema",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema,l=this.opts.schemaId;if("object"==lr(e))r=e[l];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var c=this._cache.get(e);if(void 0!==c)return c;n=(0,u.normalizeId)(r||n);var s=u.getSchemaRefs.call(this,e,n);return c=new a.SchemaEnv({schema:e,schemaId:l,meta:t,baseId:n,localRefs:s}),this._cache.set(c.schema,c),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),i&&this.validateSchema(e,!0),c}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}])}();function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var i in e){var o=i;o in t&&this.logger[r]("".concat(n,": option ").concat(i,". ").concat(e[o]))}}function w(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function _(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function x(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function k(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}function C(){var e,t=izt({},this.opts),n=tzt(p);try{for(n.s();!(e=n.n()).done;){delete t[e.value]}}catch(e){n.e(e)}finally{n.f()}return t}y.ValidationError=r.default,y.MissingRefError=i.default,e.default=y;var S={log:function(){},warn:function(){},error:function(){}};var O=/^[a-z_$][a-z0-9_$:-]*$/i;function E(e,t){var n=this.RULES;if((0,s.eachItem)(e,(function(e){if(n.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!O.test(e))throw new Error("Keyword ".concat(e," has invalid name"))})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function I(e,t,n){var r,i=this,o=null==t?void 0:t.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');var a=this.RULES,l=o?a.post:a.rules.find((function(e){return e.type===n}));if(l||(l={type:n,rules:[]},a.rules.push(l)),a.keywords[e]=!0,t){var u={keyword:e,definition:izt(izt({},t),{},{type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)})};t.before?P.call(this,l,u,t.before):l.rules.push(u),a.all[e]=u,null===(r=t.implements)||void 0===r||r.forEach((function(e){return i.addKeyword(e)}))}}function P(e,t,n){var r=e.rules.findIndex((function(e){return e.keyword===n}));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(n," is not defined")))}function M(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}var R={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,R]}}}(eDt);var ozt={},azt={},lzt={};Object.defineProperty(lzt,"__esModule",{value:!0});var uzt={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};lzt.default=uzt;var czt,szt,dzt,fzt,hzt,pzt,vzt,gzt,mzt,yzt={};Object.defineProperty(yzt,"__esModule",{value:!0}),yzt.callRef=yzt.getValidate=void 0;var bzt=zBt,wzt=wNt,_zt=lDt,xzt=pTt,kzt=qBt,Czt=XDt,Szt={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,n=e.schema,r=e.it,i=r.baseId,o=r.schemaEnv,a=r.validateName,l=r.opts,u=r.self,c=o.root;if(("#"===n||"#/"===n)&&i===c.baseId)return function(){if(o===c)return Ezt(e,a,o,o.$async);var n=t.scopeValue("root",{ref:c});return Ezt(e,(0,_zt._)(czt||(czt=tDt(["",".validate"])),n),c,c.$async)}();var s,d,f=kzt.resolveRef.call(u,c,i,n);if(void 0===f)throw new bzt.default(r.opts.uriResolver,i,n);return f instanceof kzt.SchemaEnv?(d=Ozt(e,s=f),void Ezt(e,d,s,s.$async)):function(r){var i=t.scopeValue("schema",!0===l.code.source?{ref:r,code:(0,_zt.stringify)(r)}:{ref:r}),o=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:_zt.nil,topSchemaRef:i,errSchemaPath:n},o);e.mergeEvaluated(a),e.ok(o)}(f)}};function Ozt(e,t){var n=e.gen;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,_zt._)(szt||(szt=tDt(["",".validate"])),n.scopeValue("wrapper",{ref:t}))}function Ezt(e,t,n,r){var i=e.gen,o=e.it,a=o.allErrors,l=o.schemaEnv,u=o.opts.passContext?xzt.default.this:_zt.nil;function c(e){var t=(0,_zt._)(hzt||(hzt=tDt(["",".errors"])),e);i.assign(xzt.default.vErrors,(0,_zt._)(pzt||(pzt=tDt([""," === null ? "," : ",".concat(",")"])),xzt.default.vErrors,t,xzt.default.vErrors,t)),i.assign(xzt.default.errors,(0,_zt._)(vzt||(vzt=tDt(["",".length"])),xzt.default.vErrors))}function s(e){var t;if(o.opts.unevaluated){var r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==o.props)if(r&&!r.dynamicProps)void 0!==r.props&&(o.props=Czt.mergeEvaluated.props(i,r.props,o.props));else{var a=i.var("props",(0,_zt._)(gzt||(gzt=tDt(["",".evaluated.props"])),e));o.props=Czt.mergeEvaluated.props(i,a,o.props,_zt.Name)}if(!0!==o.items)if(r&&!r.dynamicItems)void 0!==r.items&&(o.items=Czt.mergeEvaluated.items(i,r.items,o.items));else{var l=i.var("items",(0,_zt._)(mzt||(mzt=tDt(["",".evaluated.items"])),e));o.items=Czt.mergeEvaluated.items(i,l,o.items,_zt.Name)}}}r?function(){if(!l.$async)throw new Error("async schema referenced by sync schema");var n=i.let("valid");i.try((function(){i.code((0,_zt._)(dzt||(dzt=tDt(["await ",""])),(0,wzt.callValidateCode)(e,t,u))),s(t),a||i.assign(n,!0)}),(function(e){i.if((0,_zt._)(fzt||(fzt=tDt(["!("," instanceof ",")"])),e,o.ValidationError),(function(){return i.throw(e)})),c(e),a||i.assign(n,!1)})),e.ok(n)}():e.result((0,wzt.callValidateCode)(e,t,u),(function(){return s(t)}),(function(){return c(t)}))}yzt.getValidate=Ozt,yzt.callRef=Ezt,yzt.default=Szt,Object.defineProperty(azt,"__esModule",{value:!0});var Izt=yzt,Pzt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",lzt.default,Izt.default];azt.default=Pzt;var Mzt,Rzt,Azt,jzt={},Dzt={};Object.defineProperty(Dzt,"__esModule",{value:!0});var Tzt=lDt,Fzt=Tzt.operators,Nzt={maximum:{okStr:"<=",ok:Fzt.LTE,fail:Fzt.GT},minimum:{okStr:">=",ok:Fzt.GTE,fail:Fzt.LT},exclusiveMaximum:{okStr:"<",ok:Fzt.LT,fail:Fzt.GTE},exclusiveMinimum:{okStr:">",ok:Fzt.GT,fail:Fzt.LTE}},Lzt={message:function(e){var t=e.keyword,n=e.schemaCode;return(0,Tzt.str)(Mzt||(Mzt=tDt(["must be "," ",""])),Nzt[t].okStr,n)},params:function(e){var t=e.keyword,n=e.schemaCode;return(0,Tzt._)(Rzt||(Rzt=tDt(["{comparison: ",", limit: ","}"])),Nzt[t].okStr,n)}},Bzt={keyword:Object.keys(Nzt),type:"number",schemaType:"number",$data:!0,error:Lzt,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode;e.fail$data((0,Tzt._)(Azt||(Azt=tDt([""," "," "," || isNaN(",")"])),n,Nzt[t].fail,r,n))}};Dzt.default=Bzt;var Vzt,zzt,Hzt,Wzt,Uzt,Gzt={};Object.defineProperty(Gzt,"__esModule",{value:!0});var Yzt=lDt,$zt={message:function(e){var t=e.schemaCode;return(0,Yzt.str)(Vzt||(Vzt=tDt(["must be multiple of ",""])),t)},params:function(e){var t=e.schemaCode;return(0,Yzt._)(zzt||(zzt=tDt(["{multipleOf: ","}"])),t)}},qzt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:$zt,code:function(e){var t=e.gen,n=e.data,r=e.schemaCode,i=e.it.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,Yzt._)(Hzt||(Hzt=tDt(["Math.abs(Math.round(",") - ",") > 1e-",""])),o,o,i):(0,Yzt._)(Wzt||(Wzt=tDt([""," !== parseInt(",")"])),o,o);e.fail$data((0,Yzt._)(Uzt||(Uzt=tDt(["("," === 0 || ("," = ","/",", ","))"])),r,o,n,r,a))}};Gzt.default=qzt;var Kzt,Xzt,Jzt,Zzt,Qzt,eHt={},tHt={};function nHt(e){for(var t,n=e.length,r=0,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}Object.defineProperty(tHt,"__esModule",{value:!0}),tHt.default=nHt,nHt.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(eHt,"__esModule",{value:!0});var rHt=lDt,iHt=XDt,oHt=tHt,aHt={message:function(e){var t=e.keyword,n=e.schemaCode,r="maxLength"===t?"more":"fewer";return(0,rHt.str)(Kzt||(Kzt=tDt(["must NOT have "," than "," characters"])),r,n)},params:function(e){var t=e.schemaCode;return(0,rHt._)(Xzt||(Xzt=tDt(["{limit: ","}"])),t)}},lHt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:aHt,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i=e.it,o="maxLength"===t?rHt.operators.GT:rHt.operators.LT,a=!1===i.opts.unicode?(0,rHt._)(Jzt||(Jzt=tDt(["",".length"])),n):(0,rHt._)(Zzt||(Zzt=tDt(["","(",")"])),(0,iHt.useFunc)(e.gen,oHt.default),n);e.fail$data((0,rHt._)(Qzt||(Qzt=tDt([""," "," ",""])),a,o,r))}};eHt.default=lHt;var uHt,cHt,sHt,dHt,fHt={};Object.defineProperty(fHt,"__esModule",{value:!0});var hHt=wNt,pHt=lDt,vHt={message:function(e){var t=e.schemaCode;return(0,pHt.str)(uHt||(uHt=tDt(['must match pattern "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,pHt._)(cHt||(cHt=tDt(["{pattern: ","}"])),t)}},gHt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:vHt,code:function(e){var t=e.data,n=e.$data,r=e.schema,i=e.schemaCode,o=e.it.opts.unicodeRegExp?"u":"",a=n?(0,pHt._)(sHt||(sHt=tDt(["(new RegExp(",", ","))"])),i,o):(0,hHt.usePattern)(e,r);e.fail$data((0,pHt._)(dHt||(dHt=tDt(["!",".test(",")"])),a,t))}};fHt.default=gHt;var mHt,yHt,bHt,wHt={};Object.defineProperty(wHt,"__esModule",{value:!0});var _Ht=lDt,xHt={message:function(e){var t=e.keyword,n=e.schemaCode,r="maxProperties"===t?"more":"fewer";return(0,_Ht.str)(mHt||(mHt=tDt(["must NOT have "," than "," properties"])),r,n)},params:function(e){var t=e.schemaCode;return(0,_Ht._)(yHt||(yHt=tDt(["{limit: ","}"])),t)}},kHt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:xHt,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i="maxProperties"===t?_Ht.operators.GT:_Ht.operators.LT;e.fail$data((0,_Ht._)(bHt||(bHt=tDt(["Object.keys(",").length "," ",""])),n,i,r))}};wHt.default=kHt;var CHt,SHt,OHt={};function EHt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return IHt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IHt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function IHt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(OHt,"__esModule",{value:!0});var PHt=wNt,MHt=lDt,RHt=XDt,AHt={message:function(e){var t=e.params.missingProperty;return(0,MHt.str)(CHt||(CHt=tDt(["must have required property '","'"])),t)},params:function(e){var t=e.params.missingProperty;return(0,MHt._)(SHt||(SHt=tDt(["{missingProperty: ","}"])),t)}},jHt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:AHt,code:function(e){var t=e.gen,n=e.schema,r=e.schemaCode,i=e.data,o=e.$data,a=e.it,l=a.opts;if(o||0!==n.length){var u=n.length>=l.loopRequired;if(a.allErrors?function(){if(u||o)e.block$data(MHt.nil,g);else{var t,r=EHt(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;(0,PHt.checkReportMissingProp)(e,i)}}catch(e){r.e(e)}finally{r.f()}}}():function(){var a=t.let("missing");if(u||o){var c=t.let("valid",!0);e.block$data(c,(function(){return function(n,o){e.setParams({missingProperty:n}),t.forOf(n,r,(function(){t.assign(o,(0,PHt.propertyInData)(t,i,n,l.ownProperties)),t.if((0,MHt.not)(o),(function(){e.error(),t.break()}))}),MHt.nil)}(a,c)})),e.ok(c)}else t.if((0,PHt.checkMissingProp)(e,n,a)),(0,PHt.reportMissingProp)(e,a),t.else()}(),l.strictRequired){var c,s=e.parentSchema.properties,d=e.it.definedProperties,f=EHt(n);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(void 0===(null==s?void 0:s[h])&&!d.has(h)){var p=a.schemaEnv.baseId+a.errSchemaPath,v='required property "'.concat(h,'" is not defined at "').concat(p,'" (strictRequired)');(0,RHt.checkStrictMode)(a,v,a.opts.strictRequired)}}}catch(e){f.e(e)}finally{f.f()}}}function g(){t.forOf("prop",r,(function(n){e.setParams({missingProperty:n}),t.if((0,PHt.noPropertyInData)(t,i,n,l.ownProperties),(function(){return e.error()}))}))}}};OHt.default=jHt;var DHt,THt,FHt,NHt={};Object.defineProperty(NHt,"__esModule",{value:!0});var LHt=lDt,BHt={message:function(e){var t=e.keyword,n=e.schemaCode,r="maxItems"===t?"more":"fewer";return(0,LHt.str)(DHt||(DHt=tDt(["must NOT have "," than "," items"])),r,n)},params:function(e){var t=e.schemaCode;return(0,LHt._)(THt||(THt=tDt(["{limit: ","}"])),t)}},VHt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:BHt,code:function(e){var t=e.keyword,n=e.data,r=e.schemaCode,i="maxItems"===t?LHt.operators.GT:LHt.operators.LT;e.fail$data((0,LHt._)(FHt||(FHt=tDt(["",".length "," ",""])),n,i,r))}};NHt.default=VHt;var zHt={},HHt={};Object.defineProperty(HHt,"__esModule",{value:!0});var WHt,UHt,GHt,YHt,$Ht,qHt,KHt,XHt,JHt,ZHt,QHt,eWt,tWt,nWt,rWt,iWt,oWt,aWt=tLt;aWt.code='require("ajv/dist/runtime/equal").default',HHt.default=aWt,Object.defineProperty(zHt,"__esModule",{value:!0});var lWt=qTt,uWt=lDt,cWt=XDt,sWt=HHt,dWt={message:function(e){var t=e.params,n=t.i,r=t.j;return(0,uWt.str)(WHt||(WHt=tDt(["must NOT have duplicate items (items ## "," and "," are identical)"])),r,n)},params:function(e){var t=e.params,n=t.i,r=t.j;return(0,uWt._)(UHt||(UHt=tDt(["{i: ",", j: ","}"])),n,r)}},fWt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:dWt,code:function(e){var t=e.gen,n=e.data,r=e.$data,i=e.schema,o=e.parentSchema,a=e.schemaCode,l=e.it;if(r||i){var u=t.let("valid"),c=o.items?(0,lWt.getSchemaTypes)(o.items):[];e.block$data(u,(function(){var r=t.let("i",(0,uWt._)(YHt||(YHt=tDt(["",".length"])),n)),i=t.let("j");e.setParams({i:r,j:i}),t.assign(u,!0),t.if((0,uWt._)($Ht||($Ht=tDt([""," > 1"])),r),(function(){return(c.length>0&&!c.some((function(e){return"object"===e||"array"===e}))?s:d)(r,i)}))}),(0,uWt._)(GHt||(GHt=tDt([""," === false"])),a)),e.ok(u)}function s(r,i){var o=t.name("item"),a=(0,lWt.checkDataTypes)(c,o,l.opts.strictNumbers,lWt.DataType.Wrong),s=t.const("indices",(0,uWt._)(qHt||(qHt=tDt(["{}"]))));t.for((0,uWt._)(KHt||(KHt=tDt([";","--;"])),r),(function(){t.let(o,(0,uWt._)(XHt||(XHt=tDt(["","[","]"])),n,r)),t.if(a,(0,uWt._)(JHt||(JHt=tDt(["continue"])))),c.length>1&&t.if((0,uWt._)(ZHt||(ZHt=tDt(["typeof ",' == "string"'])),o),(0,uWt._)(QHt||(QHt=tDt(["",' += "_"'])),o)),t.if((0,uWt._)(eWt||(eWt=tDt(["typeof ","[",'] == "number"'])),s,o),(function(){t.assign(i,(0,uWt._)(tWt||(tWt=tDt(["","[","]"])),s,o)),e.error(),t.assign(u,!1).break()})).code((0,uWt._)(nWt||(nWt=tDt(["","[","] = ",""])),s,o,r))}))}function d(r,i){var o=(0,cWt.useFunc)(t,sWt.default),a=t.name("outer");t.label(a).for((0,uWt._)(rWt||(rWt=tDt([";","--;"])),r),(function(){return t.for((0,uWt._)(iWt||(iWt=tDt([""," = ","; ","--;"])),i,r,i),(function(){return t.if((0,uWt._)(oWt||(oWt=tDt(["","(","[","], ","[","])"])),o,n,r,n,i),(function(){e.error(),t.assign(u,!1).break(a)}))}))}))}}};zHt.default=fWt;var hWt,pWt,vWt,gWt={};Object.defineProperty(gWt,"__esModule",{value:!0});var mWt=lDt,yWt=XDt,bWt=HHt,wWt={message:"must be equal to constant",params:function(e){var t=e.schemaCode;return(0,mWt._)(hWt||(hWt=tDt(["{allowedValue: ","}"])),t)}},_Wt={keyword:"const",$data:!0,error:wWt,code:function(e){var t=e.gen,n=e.data,r=e.$data,i=e.schemaCode,o=e.schema;r||o&&"object"==lr(o)?e.fail$data((0,mWt._)(pWt||(pWt=tDt(["!","(",", ",")"])),(0,yWt.useFunc)(t,bWt.default),n,i)):e.fail((0,mWt._)(vWt||(vWt=tDt([""," !== ",""])),o,n))}};gWt.default=_Wt;var xWt,kWt,CWt,SWt,OWt={};Object.defineProperty(OWt,"__esModule",{value:!0});var EWt=lDt,IWt=XDt,PWt=HHt,MWt={message:"must be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return(0,EWt._)(xWt||(xWt=tDt(["{allowedValues: ","}"])),t)}},RWt={keyword:"enum",schemaType:"array",$data:!0,error:MWt,code:function(e){var t=e.gen,n=e.data,r=e.$data,i=e.schema,o=e.schemaCode,a=e.it;if(!r&&0===i.length)throw new Error("enum must have non-empty array");var l,u,c=i.length>=a.opts.loopEnum,s=function(){return null!=l?l:l=(0,IWt.useFunc)(t,PWt.default)};if(c||r)u=t.let("valid"),e.block$data(u,(function(){t.assign(u,!1),t.forOf("v",o,(function(e){return t.if((0,EWt._)(kWt||(kWt=tDt(["","(",", ",")"])),s(),n,e),(function(){return t.assign(u,!0).break()}))}))}));else{if(!Array.isArray(i))throw new Error("ajv implementation error");var d=t.const("vSchema",o);u=EWt.or.apply(void 0,ts(i.map((function(e,t){return function(e,t){var r=i[t];return"object"===lr(r)&&null!==r?(0,EWt._)(CWt||(CWt=tDt(["","(",", ","[","])"])),s(),n,e,t):(0,EWt._)(SWt||(SWt=tDt([""," === ",""])),n,r)}(d,t)}))))}e.pass(u)}};OWt.default=RWt,Object.defineProperty(jzt,"__esModule",{value:!0});var AWt=Gzt,jWt=eHt,DWt=fHt,TWt=wHt,FWt=OHt,NWt=NHt,LWt=zHt,BWt=gWt,VWt=OWt,zWt=[Dzt.default,AWt.default,jWt.default,DWt.default,TWt.default,FWt.default,NWt.default,LWt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},BWt.default,VWt.default];jzt.default=zWt;var HWt,WWt,UWt,GWt,YWt,$Wt={},qWt={};Object.defineProperty(qWt,"__esModule",{value:!0}),qWt.validateAdditionalItems=void 0;var KWt=lDt,XWt=XDt,JWt={message:function(e){var t=e.params.len;return(0,KWt.str)(HWt||(HWt=tDt(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,KWt._)(WWt||(WWt=tDt(["{limit: ","}"])),t)}},ZWt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:JWt,code:function(e){var t=e.parentSchema,n=e.it,r=t.items;Array.isArray(r)?QWt(e,r):(0,XWt.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function QWt(e,t){var n=e.gen,r=e.schema,i=e.data,o=e.keyword,a=e.it;a.items=!0;var l=n.const("len",(0,KWt._)(UWt||(UWt=tDt(["",".length"])),i));if(!1===r)e.setParams({len:t.length}),e.pass((0,KWt._)(GWt||(GWt=tDt([""," <= ",""])),l,t.length));else if("object"==lr(r)&&!(0,XWt.alwaysValidSchema)(a,r)){var u=n.var("valid",(0,KWt._)(YWt||(YWt=tDt([""," <= ",""])),l,t.length));n.if((0,KWt.not)(u),(function(){return r=u,void n.forRange("i",t.length,l,(function(t){e.subschema({keyword:o,dataProp:t,dataPropType:XWt.Type.Num},r),a.allErrors||n.if((0,KWt.not)(r),(function(){return n.break()}))}));var r})),e.ok(u)}}qWt.validateAdditionalItems=QWt,qWt.default=ZWt;var eUt,tUt,nUt={},rUt={};Object.defineProperty(rUt,"__esModule",{value:!0}),rUt.validateTuple=void 0;var iUt=lDt,oUt=XDt,aUt=wNt,lUt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t=e.schema,n=e.it;if(Array.isArray(t))return uUt(e,"additionalItems",t);n.items=!0,(0,oUt.alwaysValidSchema)(n,t)||e.ok((0,aUt.validateArray)(e))}};function uUt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema,r=e.gen,i=e.parentSchema,o=e.data,a=e.keyword,l=e.it;!function(e){var r=l.opts,i=l.errSchemaPath,o=n.length,u=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(r.strictTuples&&!u){var c='"'.concat(a,'" is ').concat(o,"-tuple, but minItems or maxItems/").concat(t,' are not specified or different at path "').concat(i,'"');(0,oUt.checkStrictMode)(l,c,r.strictTuples)}}(i),l.opts.unevaluated&&n.length&&!0!==l.items&&(l.items=oUt.mergeEvaluated.items(r,n.length,l.items));var u=r.name("valid"),c=r.const("len",(0,iUt._)(eUt||(eUt=tDt(["",".length"])),o));n.forEach((function(t,n){(0,oUt.alwaysValidSchema)(l,t)||(r.if((0,iUt._)(tUt||(tUt=tDt([""," > ",""])),c,n),(function(){return e.subschema({keyword:a,schemaProp:n,dataProp:n},u)})),e.ok(u))}))}rUt.validateTuple=uUt,rUt.default=lUt,Object.defineProperty(nUt,"__esModule",{value:!0});var cUt=rUt,sUt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function(e){return(0,cUt.validateTuple)(e,"items")}};nUt.default=sUt;var dUt,fUt,hUt={};Object.defineProperty(hUt,"__esModule",{value:!0});var pUt=lDt,vUt=XDt,gUt=wNt,mUt=qWt,yUt={message:function(e){var t=e.params.len;return(0,pUt.str)(dUt||(dUt=tDt(["must NOT have more than "," items"])),t)},params:function(e){var t=e.params.len;return(0,pUt._)(fUt||(fUt=tDt(["{limit: ","}"])),t)}},bUt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:yUt,code:function(e){var t=e.schema,n=e.parentSchema,r=e.it,i=n.prefixItems;r.items=!0,(0,vUt.alwaysValidSchema)(r,t)||(i?(0,mUt.validateAdditionalItems)(e,i):e.ok((0,gUt.validateArray)(e)))}};hUt.default=bUt;var wUt,_Ut,xUt,kUt,CUt,SUt,OUt,EUt,IUt,PUt,MUt,RUt,AUt={};Object.defineProperty(AUt,"__esModule",{value:!0});var jUt=lDt,DUt=XDt,TUt={message:function(e){var t=e.params,n=t.min,r=t.max;return void 0===r?(0,jUt.str)(wUt||(wUt=tDt(["must contain at least "," valid item(s)"])),n):(0,jUt.str)(_Ut||(_Ut=tDt(["must contain at least "," and no more than "," valid item(s)"])),n,r)},params:function(e){var t=e.params,n=t.min,r=t.max;return void 0===r?(0,jUt._)(xUt||(xUt=tDt(["{minContains: ","}"])),n):(0,jUt._)(kUt||(kUt=tDt(["{minContains: ",", maxContains: ","}"])),n,r)}},FUt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:TUt,code:function(e){var t,n,r=e.gen,i=e.schema,o=e.parentSchema,a=e.data,l=e.it,u=o.minContains,c=o.maxContains;l.opts.next?(t=void 0===u?1:u,n=c):t=1;var s=r.const("len",(0,jUt._)(CUt||(CUt=tDt(["",".length"])),a));if(e.setParams({min:t,max:n}),void 0!==n||0!==t){if(void 0!==n&&t>n)return(0,DUt.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,DUt.alwaysValidSchema)(l,i)){var d=(0,jUt._)(SUt||(SUt=tDt([""," >= ",""])),s,t);return void 0!==n&&(d=(0,jUt._)(OUt||(OUt=tDt([""," && "," <= ",""])),d,s,n)),void e.pass(d)}l.items=!0;var f=r.name("valid");void 0===n&&1===t?p(f,(function(){return r.if(f,(function(){return r.break()}))})):0===t?(r.let(f,!0),void 0!==n&&r.if((0,jUt._)(EUt||(EUt=tDt(["",".length > 0"])),a),h)):(r.let(f,!1),h()),e.result(f,(function(){return e.reset()}))}else(0,DUt.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function h(){var e=r.name("_valid"),i=r.let("count",0);p(e,(function(){return r.if(e,(function(){return function(e){r.code((0,jUt._)(IUt||(IUt=tDt(["","++"])),e)),void 0===n?r.if((0,jUt._)(PUt||(PUt=tDt([""," >= ",""])),e,t),(function(){return r.assign(f,!0).break()})):(r.if((0,jUt._)(MUt||(MUt=tDt([""," > ",""])),e,n),(function(){return r.assign(f,!1).break()})),1===t?r.assign(f,!0):r.if((0,jUt._)(RUt||(RUt=tDt([""," >= ",""])),e,t),(function(){return r.assign(f,!0)})))}(i)}))}))}function p(t,n){r.forRange("i",0,s,(function(r){e.subschema({keyword:"contains",dataProp:r,dataPropType:DUt.Type.Num,compositeRule:!0},t),n()}))}}};AUt.default=FUt;var NUt,LUt,BUt,VUt={};function zUt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HUt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HUt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function HUt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=lDt,n=XDt,r=wNt;e.error={message:function(e){var n=e.params,r=n.property,i=n.depsCount,o=n.deps,a=1===i?"property":"properties";return(0,t.str)(NUt||(NUt=tDt(["must have "," "," when property "," is present"])),a,o,r)},params:function(e){var n=e.params,r=n.property,i=n.depsCount,o=n.deps,a=n.missingProperty;return(0,t._)(LUt||(LUt=tDt(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),r,a,i,o)}};var i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code:function(e){var t=nY(function(e){var t=e.schema,n={},r={};for(var i in t){if("__proto__"!==i)(Array.isArray(t[i])?n:r)[i]=t[i]}return[n,r]}(e),2),n=t[0],r=t[1];o(e,n),a(e,r)}};function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,i=e.gen,o=e.data,a=e.it;if(0!==Object.keys(n).length){var l=i.let("missing"),u=function(){var u=n[c];if(0===u.length)return 1;var s=(0,r.propertyInData)(i,o,c,a.opts.ownProperties);e.setParams({property:c,depsCount:u.length,deps:u.join(", ")}),a.allErrors?i.if(s,(function(){var t,n=zUt(u);try{for(n.s();!(t=n.n()).done;){var i=t.value;(0,r.checkReportMissingProp)(e,i)}}catch(e){n.e(e)}finally{n.f()}})):(i.if((0,t._)(BUt||(BUt=tDt([""," && (",")"])),s,(0,r.checkMissingProp)(e,u,l))),(0,r.reportMissingProp)(e,l),i.else())};for(var c in n)u()}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,i=e.gen,o=e.data,a=e.keyword,l=e.it,u=i.name("valid"),c=function(c){if((0,n.alwaysValidSchema)(l,t[c]))return 1;i.if((0,r.propertyInData)(i,o,c,l.opts.ownProperties),(function(){var t=e.subschema({keyword:a,schemaProp:c},u);e.mergeValidEvaluated(t,u)}),(function(){return i.var(u,!0)})),e.ok(u)};for(var s in t)c(s)}e.validatePropertyDeps=o,e.validateSchemaDeps=a,e.default=i}(VUt);var WUt,UUt={};Object.defineProperty(UUt,"__esModule",{value:!0});var GUt=lDt,YUt=XDt,$Ut={message:"property name must be valid",params:function(e){var t=e.params;return(0,GUt._)(WUt||(WUt=tDt(["{propertyName: ","}"])),t.propertyName)}},qUt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:$Ut,code:function(e){var t=e.gen,n=e.schema,r=e.data,i=e.it;if(!(0,YUt.alwaysValidSchema)(i,n)){var o=t.name("valid");t.forIn("key",r,(function(n){e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},o),t.if((0,GUt.not)(o),(function(){e.error(!0),i.allErrors||t.break()}))})),e.ok(o)}}};UUt.default=qUt;var KUt,XUt,JUt,ZUt,QUt,eGt={};Object.defineProperty(eGt,"__esModule",{value:!0});var tGt=wNt,nGt=lDt,rGt=pTt,iGt=XDt,oGt={message:"must NOT have additional properties",params:function(e){var t=e.params;return(0,nGt._)(KUt||(KUt=tDt(["{additionalProperty: ","}"])),t.additionalProperty)}},aGt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:oGt,code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,i=e.data,o=e.errsCount,a=e.it;if(!o)throw new Error("ajv implementation error");var l=a.allErrors,u=a.opts;if(a.props=!0,"all"===u.removeAdditional||!(0,iGt.alwaysValidSchema)(a,n)){var c=(0,tGt.allSchemaProperties)(r.properties),s=(0,tGt.allSchemaProperties)(r.patternProperties);t.forIn("key",i,(function(n){c.length||s.length?t.if(function(n){var i;if(c.length>8){var o=(0,iGt.schemaRefOrVal)(a,r.properties,"properties");i=(0,tGt.isOwnProperty)(t,o,n)}else i=c.length?nGt.or.apply(void 0,ts(c.map((function(e){return(0,nGt._)(JUt||(JUt=tDt([""," === ",""])),n,e)})))):nGt.nil;return s.length&&(i=nGt.or.apply(void 0,[i].concat(ts(s.map((function(t){return(0,nGt._)(ZUt||(ZUt=tDt(["",".test(",")"])),(0,tGt.usePattern)(e,t),n)})))))),(0,nGt.not)(i)}(n),(function(){return f(n)})):f(n)})),e.ok((0,nGt._)(XUt||(XUt=tDt([""," === ",""])),o,rGt.default.errors))}function d(e){t.code((0,nGt._)(QUt||(QUt=tDt(["delete ","[","]"])),i,e))}function f(r){if("all"===u.removeAdditional||u.removeAdditional&&!1===n)d(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(l||t.break());if("object"==lr(n)&&!(0,iGt.alwaysValidSchema)(a,n)){var i=t.name("valid");"failing"===u.removeAdditional?(h(r,i,!1),t.if((0,nGt.not)(i),(function(){e.reset(),d(r)}))):(h(r,i),l||t.if((0,nGt.not)(i),(function(){return t.break()})))}}}function h(t,n,r){var i={keyword:"additionalProperties",dataProp:t,dataPropType:iGt.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}}};eGt.default=aGt;var lGt={};function uGt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cGt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cGt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function cGt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(lGt,"__esModule",{value:!0});var sGt=iDt,dGt=wNt,fGt=XDt,hGt=eGt,pGt={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,i=e.data,o=e.it;"all"===o.opts.removeAdditional&&void 0===r.additionalProperties&&hGt.default.code(new sGt.KeywordCxt(o,hGt.default,"additionalProperties"));var a,l=(0,dGt.allSchemaProperties)(n),u=uGt(l);try{for(u.s();!(a=u.n()).done;){var c=a.value;o.definedProperties.add(c)}}catch(e){u.e(e)}finally{u.f()}o.opts.unevaluated&&l.length&&!0!==o.props&&(o.props=fGt.mergeEvaluated.props(t,(0,fGt.toHash)(l),o.props));var s=l.filter((function(e){return!(0,fGt.alwaysValidSchema)(o,n[e])}));if(0!==s.length){var d,f,h=t.name("valid"),p=uGt(s);try{for(p.s();!(d=p.n()).done;){var v=d.value;f=v,o.opts.useDefaults&&!o.compositeRule&&void 0!==n[f].default?g(v):(t.if((0,dGt.propertyInData)(t,i,v,o.opts.ownProperties)),g(v),o.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(h)}}catch(e){p.e(e)}finally{p.f()}}function g(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};lGt.default=pGt;var vGt,gGt,mGt={};function yGt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bGt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bGt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function bGt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(mGt,"__esModule",{value:!0});var wGt=wNt,_Gt=lDt,xGt=XDt,kGt=XDt,CGt={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,n=e.schema,r=e.data,i=e.parentSchema,o=e.it,a=o.opts,l=(0,wGt.allSchemaProperties)(n),u=l.filter((function(e){return(0,xGt.alwaysValidSchema)(o,n[e])}));if(0!==l.length&&(u.length!==l.length||o.opts.unevaluated&&!0!==o.props)){var c=a.strictSchema&&!a.allowMatchingProperties&&i.properties,s=t.name("valid");!0===o.props||o.props instanceof _Gt.Name||(o.props=(0,kGt.evaluatedPropsToName)(t,o.props));var d=o.props;!function(){var e,n=yGt(l);try{for(n.s();!(e=n.n()).done;){var r=e.value;c&&f(r),o.allErrors?h(r):(t.var(s,!0),h(r),t.if(s))}}catch(e){n.e(e)}finally{n.f()}}()}function f(e){for(var t in c)new RegExp(e).test(t)&&(0,xGt.checkStrictMode)(o,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function h(n){t.forIn("key",r,(function(r){t.if((0,_Gt._)(vGt||(vGt=tDt(["",".test(",")"])),(0,wGt.usePattern)(e,n),r),(function(){var i=u.includes(n);i||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:kGt.Type.Str},s),o.opts.unevaluated&&!0!==d?t.assign((0,_Gt._)(gGt||(gGt=tDt(["","[","]"])),d,r),!0):i||o.allErrors||t.if((0,_Gt.not)(s),(function(){return t.break()}))}))}))}}};mGt.default=CGt;var SGt={};Object.defineProperty(SGt,"__esModule",{value:!0});var OGt=XDt,EGt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,n=e.schema,r=e.it;if((0,OGt.alwaysValidSchema)(r,n))e.fail();else{var i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,(function(){return e.reset()}),(function(){return e.error()}))}},error:{message:"must NOT be valid"}};SGt.default=EGt;var IGt={};Object.defineProperty(IGt,"__esModule",{value:!0});var PGt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:wNt.validateUnion,error:{message:"must match a schema in anyOf"}};IGt.default=PGt;var MGt,RGt,AGt,jGt={};Object.defineProperty(jGt,"__esModule",{value:!0});var DGt=lDt,TGt=XDt,FGt={message:"must match exactly one schema in oneOf",params:function(e){var t=e.params;return(0,DGt._)(MGt||(MGt=tDt(["{passingSchemas: ","}"])),t.passing)}},NGt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:FGt,code:function(e){var t=e.gen,n=e.schema,r=e.parentSchema,i=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");if(!i.opts.discriminator||!r.discriminator){var o=n,a=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block((function(){o.forEach((function(n,r){var o;(0,TGt.alwaysValidSchema)(i,n)?t.var(u,!0):o=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},u),r>0&&t.if((0,DGt._)(RGt||(RGt=tDt([""," && ",""])),u,a)).assign(a,!1).assign(l,(0,DGt._)(AGt||(AGt=tDt(["[",", ","]"])),l,r)).else(),t.if(u,(function(){t.assign(a,!0),t.assign(l,r),o&&e.mergeEvaluated(o,DGt.Name)}))}))})),e.result(a,(function(){return e.reset()}),(function(){return e.error(!0)}))}}};jGt.default=NGt;var LGt={};Object.defineProperty(LGt,"__esModule",{value:!0});var BGt=XDt,VGt={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,n=e.schema,r=e.it;if(!Array.isArray(n))throw new Error("ajv implementation error");var i=t.name("valid");n.forEach((function(t,n){if(!(0,BGt.alwaysValidSchema)(r,t)){var o=e.subschema({keyword:"allOf",schemaProp:n},i);e.ok(i),e.mergeEvaluated(o)}}))}};LGt.default=VGt;var zGt,HGt,WGt,UGt={};Object.defineProperty(UGt,"__esModule",{value:!0});var GGt=lDt,YGt=XDt,$Gt={message:function(e){var t=e.params;return(0,GGt.str)(zGt||(zGt=tDt(['must match "','" schema'])),t.ifClause)},params:function(e){var t=e.params;return(0,GGt._)(HGt||(HGt=tDt(["{failingKeyword: ","}"])),t.ifClause)}},qGt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:$Gt,code:function(e){var t=e.gen,n=e.parentSchema,r=e.it;void 0===n.then&&void 0===n.else&&(0,YGt.checkStrictMode)(r,'"if" without "then" and "else" is ignored');var i=KGt(r,"then"),o=KGt(r,"else");if(i||o){var a,l=t.let("valid",!0),u=t.name("_valid");if(a=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u),e.mergeEvaluated(a),e.reset(),i&&o){var c=t.let("ifClause");e.setParams({ifClause:c}),t.if(u,s("then",c),s("else",c))}else i?t.if(u,s("then")):t.if((0,GGt.not)(u),s("else"));e.pass(l,(function(){return e.error(!0)}))}function s(n,r){return function(){var i=e.subschema({keyword:n},u);t.assign(l,u),e.mergeValidEvaluated(i,l),r?t.assign(r,(0,GGt._)(WGt||(WGt=tDt(["",""])),n)):e.setParams({ifClause:n})}}}};function KGt(e,t){var n=e.schema[t];return void 0!==n&&!(0,YGt.alwaysValidSchema)(e,n)}UGt.default=qGt;var XGt={};Object.defineProperty(XGt,"__esModule",{value:!0});var JGt=XDt,ZGt={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,n=e.parentSchema,r=e.it;void 0===n.if&&(0,JGt.checkStrictMode)(r,'"'.concat(t,'" without "if" is ignored'))}};XGt.default=ZGt,Object.defineProperty($Wt,"__esModule",{value:!0});var QGt=qWt,eYt=nUt,tYt=rUt,nYt=hUt,rYt=AUt,iYt=VUt,oYt=UUt,aYt=eGt,lYt=lGt,uYt=mGt,cYt=SGt,sYt=IGt,dYt=jGt,fYt=LGt,hYt=UGt,pYt=XGt;$Wt.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[cYt.default,sYt.default,dYt.default,fYt.default,hYt.default,pYt.default,oYt.default,aYt.default,iYt.default,lYt.default,uYt.default];return e?t.push(eYt.default,nYt.default):t.push(QGt.default,tYt.default),t.push(rYt.default),t};var vYt,gYt,mYt,yYt,bYt,wYt,_Yt,xYt,kYt,CYt,SYt,OYt,EYt,IYt,PYt,MYt,RYt,AYt={},jYt={};Object.defineProperty(jYt,"__esModule",{value:!0});var DYt=lDt,TYt={message:function(e){var t=e.schemaCode;return(0,DYt.str)(vYt||(vYt=tDt(['must match format "','"'])),t)},params:function(e){var t=e.schemaCode;return(0,DYt._)(gYt||(gYt=tDt(["{format: ","}"])),t)}},FYt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:TYt,code:function(e,t){var n,r,i,o,a,l,u=e.gen,c=e.data,s=e.$data,d=e.schema,f=e.schemaCode,h=e.it,p=h.opts,v=h.errSchemaPath,g=h.schemaEnv,m=h.self;p.validateFormats&&(s?(n=u.scopeValue("formats",{ref:m.formats,code:p.code.formats}),r=u.const("fDef",(0,DYt._)(mYt||(mYt=tDt(["","[","]"])),n,f)),i=u.let("fType"),o=u.let("format"),u.if((0,DYt._)(yYt||(yYt=tDt(["typeof ",' == "object" && !('," instanceof RegExp)"])),r,r),(function(){return u.assign(i,(0,DYt._)(bYt||(bYt=tDt(["",'.type || "string"'])),r)).assign(o,(0,DYt._)(wYt||(wYt=tDt(["",".validate"])),r))}),(function(){return u.assign(i,(0,DYt._)(_Yt||(_Yt=tDt(['"string"'])))).assign(o,r)})),e.fail$data((0,DYt.or)(!1===p.strictSchema?DYt.nil:(0,DYt._)(xYt||(xYt=tDt([""," && !",""])),f,o),(a=g.$async?(0,DYt._)(kYt||(kYt=tDt(["(",".async ? await ","(",") : ","(","))"])),r,o,c,o,c):(0,DYt._)(CYt||(CYt=tDt(["","(",")"])),o,c),l=(0,DYt._)(SYt||(SYt=tDt(["(typeof ",' == "function" ? '," : ",".test(","))"])),o,a,o,c),(0,DYt._)(OYt||(OYt=tDt([""," && "," !== true && "," === "," && !",""])),o,o,i,t,l))))):function(){var n=m.formats[d];if(!n)return void function(){if(!1===p.strictSchema)return void m.logger.warn(e());throw new Error(e());function e(){return'unknown format "'.concat(d,'" ignored in schema at path "').concat(v,'"')}}();if(!0===n)return;var r=nY(function(e){var t=e instanceof RegExp?(0,DYt.regexpCode)(e):p.code.formats?(0,DYt._)(EYt||(EYt=tDt(["","",""])),p.code.formats,(0,DYt.getProperty)(d)):void 0,n=u.scopeValue("formats",{key:d,ref:e,code:t});if("object"==lr(e)&&!(e instanceof RegExp))return[e.type||"string",e.validate,(0,DYt._)(IYt||(IYt=tDt(["",".validate"])),n)];return["string",e,n]}(n),3),i=r[0],o=r[1],a=r[2];i===t&&e.pass(function(){if("object"==lr(n)&&!(n instanceof RegExp)&&n.async){if(!g.$async)throw new Error("async format in sync schema");return(0,DYt._)(PYt||(PYt=tDt(["await ","(",")"])),a,c)}return(0,DYt._)("function"==typeof o?MYt||(MYt=tDt(["","(",")"])):RYt||(RYt=tDt(["",".test(",")"])),a,c)}())}())}};jYt.default=FYt,Object.defineProperty(AYt,"__esModule",{value:!0});var NYt=[jYt.default];AYt.default=NYt;var LYt={};Object.defineProperty(LYt,"__esModule",{value:!0}),LYt.contentVocabulary=LYt.metadataVocabulary=void 0,LYt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],LYt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(ozt,"__esModule",{value:!0});var BYt=jzt,VYt=$Wt,zYt=AYt,HYt=LYt,WYt=[azt.default,BYt.default,(0,VYt.default)(),zYt.default,HYt.metadataVocabulary,HYt.contentVocabulary];ozt.default=WYt;var UYt,GYt,YYt,$Yt,qYt,KYt,XYt={},JYt={};function ZYt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return QYt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QYt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function QYt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(JYt,"__esModule",{value:!0}),JYt.DiscrError=void 0,(GYt=UYt||(JYt.DiscrError=UYt={})).Tag="tag",GYt.Mapping="mapping",Object.defineProperty(XYt,"__esModule",{value:!0});var e$t=lDt,t$t=JYt,n$t=qBt,r$t=zBt,i$t=XDt,o$t={message:function(e){var t=e.params,n=t.discrError,r=t.tagName;return n===t$t.DiscrError.Tag?'tag "'.concat(r,'" must be string'):'value of tag "'.concat(r,'" must be in oneOf')},params:function(e){var t=e.params,n=t.discrError,r=t.tag,i=t.tagName;return(0,e$t._)(YYt||(YYt=tDt(["{error: ",", tag: ",", tagValue: ","}"])),n,i,r)}},a$t={keyword:"discriminator",type:"object",schemaType:"object",error:o$t,code:function(e){var t=e.gen,n=e.data,r=e.schema,i=e.parentSchema,o=e.it,a=i.oneOf;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");var l=r.propertyName;if("string"!=typeof l)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");var u=t.let("valid",!1),c=t.const("tag",(0,e$t._)($Yt||($Yt=tDt(["","",""])),n,(0,e$t.getProperty)(l)));function s(n){var r=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(i,e$t.Name),r}t.if((0,e$t._)(qYt||(qYt=tDt(["typeof ",' == "string"'])),c),(function(){return function(){var n=function(){for(var e,t={},n=f(i),r=!0,u=0;u<a.length;u++){var c=a[u];if((null==c?void 0:c.$ref)&&!(0,i$t.schemaHasRulesButRef)(c,o.self.RULES)){var s=c.$ref;if((c=n$t.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,s))instanceof n$t.SchemaEnv&&(c=c.schema),void 0===c)throw new r$t.default(o.opts.uriResolver,o.baseId,s)}var d=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[l];if("object"!=lr(d))throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(l,'"'));r=r&&(n||f(c)),h(d,u)}if(!r)throw new Error('discriminator: "'.concat(l,'" must be required'));return t;function f(e){var t=e.required;return Array.isArray(t)&&t.includes(l)}function h(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'.concat(l,'" must have "const" or "enum"'));var n,r=ZYt(e.enum);try{for(r.s();!(n=r.n()).done;){p(n.value,t)}}catch(e){r.e(e)}finally{r.f()}}}function p(e,n){if("string"!=typeof e||e in t)throw new Error('discriminator: "'.concat(l,'" values must be unique strings'));t[e]=n}}();for(var r in t.if(!1),n)t.elseIf((0,e$t._)(KYt||(KYt=tDt([""," === ",""])),c,r)),t.assign(u,s(n[r]));t.else(),e.error(!1,{discrError:t$t.DiscrError.Mapping,tag:c,tagName:l}),t.endIf()}()}),(function(){return e.error(!1,{discrError:t$t.DiscrError.Tag,tag:c,tagName:l})})),e.ok(u)}};XYt.default=a$t;const l$t={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};function u$t(e,t,n){return t=Ch(t),kh(e,c$t()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function c$t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c$t=function(){return!!e})()}function s$t(e,t,n,r){var i=QG(Ch(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;var n=ozt,r=XYt,i=l$t,o=["/properties"],a="http://json-schema.org/draft-07/schema",l=function(e){function t(){return us(this,t),u$t(this,t,arguments)}return Oh(t,e),ls(t,[{key:"_addVocabularies",value:function(){var e=this;s$t(t,"_addVocabularies",this)([]),n.default.forEach((function(t){return e.addVocabulary(t)})),this.opts.discriminator&&this.addKeyword(r.default)}},{key:"_addDefaultMetaSchema",value:function(){if(s$t(t,"_addDefaultMetaSchema",this)([]),this.opts.meta){var e=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=s$t(t,"defaultMeta",this)([])||(this.getSchema(a)?a:void 0)}}])}(eDt.default);t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=iDt;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=lDt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var s=NBt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return s.default}});var d=zBt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(Qjt,Qjt.exports);var d$t,f$t,h$t={exports:{}},p$t={exports:{}},v$t={exports:{}},g$t={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt,r=["undefined","string","number","object","function","boolean","symbol"];function i(){return{keyword:"typeof",schemaType:["string","array"],code:function(e){var t=e.data,r=e.schema,i=e.schemaValue;e.fail("string"==typeof r?(0,n._)(d$t||(d$t=tDt(["typeof "," != ",""])),t,r):(0,n._)(f$t||(f$t=tDt(["",".indexOf(typeof ",") < 0"])),i,t))},metaSchema:{anyOf:[{type:"string",enum:r},{type:"array",items:{type:"string",enum:r}}]}}}t.default=i,e.exports=i}(g$t,g$t.exports);var m$t=g$t.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(m$t),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(v$t,v$t.exports);for(var y$t=v$t.exports,b$t={exports:{}},w$t={},_$t={byteLength:function(e){var t=E$t(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=E$t(e),i=r[0],o=r[1],a=new C$t(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),l=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=k$t[e.charCodeAt(n)]<<18|k$t[e.charCodeAt(n+1)]<<12|k$t[e.charCodeAt(n+2)]<<6|k$t[e.charCodeAt(n+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;2===o&&(t=k$t[e.charCodeAt(n)]<<2|k$t[e.charCodeAt(n+1)]>>4,a[l++]=255&t);1===o&&(t=k$t[e.charCodeAt(n)]<<10|k$t[e.charCodeAt(n+1)]<<4|k$t[e.charCodeAt(n+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,l=n-r;a<l;a+=o)i.push(I$t(e,a,a+o>l?l:a+o));1===r?(t=e[n-1],i.push(x$t[t>>2]+x$t[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(x$t[t>>10]+x$t[t>>4&63]+x$t[t<<2&63]+"="));return i.join("")}},x$t=[],k$t=[],C$t="undefined"!=typeof Uint8Array?Uint8Array:Array,S$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O$t=0;O$t<64;++O$t)x$t[O$t]=S$t[O$t],k$t[S$t.charCodeAt(O$t)]=O$t;function E$t(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function I$t(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(x$t[(i=r)>>18&63]+x$t[i>>12&63]+x$t[i>>6&63]+x$t[63&i]);return o.join("")}k$t["-".charCodeAt(0)]=62,k$t["_".charCodeAt(0)]=63;var P$t={read:function(e,t,n,r,i){var o,a,l=8*i-r-1,u=(1<<l)-1,c=u>>1,s=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-s)-1,h>>=-s,s+=l;s>0;o=256*o+e[t+d],d+=f,s-=8);for(a=o&(1<<-s)-1,o>>=-s,s+=r;s>0;a=256*a+e[t+d],d+=f,s-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,l,u,c=8*o-i-1,s=(1<<c)-1,d=s>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=s):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=s?(l=0,a=s):a+d>=1?(l=(t*u-1)*Math.pow(2,i),a+=d):(l=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&l,h+=p,l/=256,i-=8);for(a=a<<i|l,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*v}};!function(e){var t=_$t,n=P$t,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(B(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return s(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+lr(e));if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|f(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||V(e.length)?o(0):s(e);if("Buffer"===e.type&&Array.isArray(e.data))return s(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+lr(e))}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|f(e))}function s(e){for(var t=e.length<0?0:0|f(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function f(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+lr(e));var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(i)return r?-1:F(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,l=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,l/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var s=-1;for(o=n;o<l;o++)if(c(e,o)===c(t,-1===s?0:o-s)){if(-1===s&&(s=o),o-s+1===u)return s*a}else-1!==s&&(o-=o-s),s=-1}else for(n+u>l&&(n=l-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var l=parseInt(t.substr(2*a,2),16);if(V(l))return a;e[n+a]=l}return a}function b(e,t,n,r){return L(F(t,e.length-n),e,n,r)}function w(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return L(N(t),e,n,r)}function x(e,t,n,r){return L(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,l,u,c=e[i],s=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(s=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(s=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(s=u);break;case 4:o=e[i+1],a=e[i+2],l=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&l)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&l)>65535&&u<1114112&&(s=u)}null===s?(s=65533,d=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=d}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(B(o,Uint8Array))i+o.length>r.length?a.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+lr(e));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),l=(n>>>=0)-(t>>>=0),u=Math.min(o,l),c=this.slice(r,i),s=e.slice(t,n),d=0;d<u;++d)if(c[d]!==s[d]){o=c[d],l=s[d];break}return o<l?-1:l<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z[e[o]];return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||A(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function D(e,t,r,i,o){return t=+t,r>>>=0,o||A(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var l=a.isBuffer(e)?e:a.from(e,r),u=l.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=l[o%u]}return this};var T=/[^+/0-9A-Za-z-_]/g;function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function N(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}(w$t);var M$t={exports:{}};function R$t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A$t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A$t(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function A$t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};void 0!==w$t.Buffer&&(n.Buffer=w$t.Buffer),"undefined"!=typeof Promise&&(n.Promise=Promise);var r=Object.assign((function(){return{keyword:"instanceof",schemaType:["string","array"],compile:function(e){if("string"==typeof e){var t=i(e);return function(e){return e instanceof t}}if(Array.isArray(e)){var n=e.map(i);return function(e){var t,r=R$t(n);try{for(r.s();!(t=r.n()).done;){if(e instanceof t.value)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}}throw new Error("ajv implementation error")},metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}}}),{CONSTRUCTORS:n});function i(e){var t=n[e];if(t)return t;throw new Error('invalid "instanceof" keyword value '.concat(e))}t.default=r,e.exports=r}(M$t,M$t.exports);var j$t=M$t.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(j$t),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(b$t,b$t.exports);var D$t=b$t.exports,T$t={exports:{}},F$t={exports:{}},N$t={};Object.defineProperty(N$t,"__esModule",{value:!0}),N$t.default=function(e){return function(){return{keyword:e,type:"number",schemaType:"array",macro:function(t){var n=nY(t,2),r=n[0],i=n[1];return function(t,n){if(t>n||"exclusiveRange"===e&&t===n)throw new Error("There are no numbers in range")}(r,i),"range"===e?{minimum:r,maximum:i}:{exclusiveMinimum:r,exclusiveMaximum:i}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}}}},function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(N$t).default)("range");t.default=r,e.exports=r}(F$t,F$t.exports);var L$t=F$t.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(L$t),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(T$t,T$t.exports);var B$t=T$t.exports,V$t={exports:{}},z$t={exports:{}};!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(N$t).default)("exclusiveRange");t.default=r,e.exports=r}(z$t,z$t.exports);var H$t=z$t.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(H$t),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(V$t,V$t.exports);var W$t,U$t=V$t.exports,G$t={exports:{}},Y$t={exports:{}},$$t={};Object.defineProperty($$t,"__esModule",{value:!0}),$$t.usePattern=$$t.metaSchemaRef=void 0;var q$t,K$t=lDt;$$t.metaSchemaRef=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultMeta;return!1===e?{}:{$ref:e||"http://json-schema.org/schema"}},$$t.usePattern=function(e,t){var n=e.gen,r=e.it.opts,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.unicodeRegExp?"u":"",o=new RegExp(t,i);return n.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,K$t._)(W$t||(W$t=tDt(["new RegExp(",", ",")"])),t,i)})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt,r=$$t,i={type:"object",properties:{pattern:{type:"string"},flags:{type:"string",nullable:!0}},required:["pattern"],additionalProperties:!1},o=/^\/(.*)\/([gimuy]*)$/;function a(){return{keyword:"regexp",type:"string",schemaType:["string","object"],code:function(e){var t=e.data,i=function(t){if("object"==lr(t))return(0,r.usePattern)(e,t.pattern,t.flags);var n=o.exec(t);if(n)return(0,r.usePattern)(e,n[1],n[2]);throw new Error("cannot parse string into RegExp")}(e.schema);e.pass((0,n._)(q$t||(q$t=tDt(["",".test(",")"])),i,t))},metaSchema:{anyOf:[{type:"string"},i]}}}t.default=a,e.exports=a}(Y$t,Y$t.exports);var X$t=Y$t.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(X$t),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(G$t,G$t.exports);var J$t,Z$t,Q$t,eqt,tqt,nqt=G$t.exports,rqt={exports:{}},iqt={exports:{}};function oqt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aqt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aqt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function aqt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt,r={trimStart:function(e){return e.trimStart()},trimEnd:function(e){return e.trimEnd()},trimLeft:function(e){return e.trimStart()},trimRight:function(e){return e.trimEnd()},trim:function(e){return e.trim()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()},toEnumCase:function(e,t){return(null==t?void 0:t.hash[o(e)])||e}},i=Object.assign((function(){return{keyword:"transform",schemaType:"array",before:"enum",code:function(e){var t=e.gen,i=e.data,a=e.schema,l=e.parentSchema,u=e.it,c=u.parentData,s=u.parentDataProperty,d=a;if(d.length){var f;if(d.includes("toEnumCase")){var h=function(e){var t={hash:{}};if(!e.enum)throw new Error('transform: "toEnumCase" requires "enum"');var n,r=oqt(e.enum);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof i){var a=o(i);if(t.hash[a])throw new Error('transform: "toEnumCase" requires all lowercased "enum" values to be unique');t.hash[a]=i}}}catch(e){r.e(e)}finally{r.f()}return t}(l);f=t.scopeValue("obj",{ref:h,code:(0,n.stringify)(h)})}t.if((0,n._)(J$t||(J$t=tDt(["typeof ",' == "string" && '," !== undefined"])),i,c),(function(){t.assign(i,p(d.slice())),t.assign((0,n._)(Z$t||(Z$t=tDt(["","[","]"])),c,s),i)}))}function p(e){if(!e.length)return i;var o=e.pop();if(!(o in r))throw new Error("transform: unknown transformation ".concat(o));var a=t.scopeValue("func",{ref:r[o],code:(0,n._)(Q$t||(Q$t=tDt(['require("ajv-keywords/dist/definitions/transform").transform',""])),(0,n.getProperty)(o))}),l=p(e);return f&&"toEnumCase"===o?(0,n._)(eqt||(eqt=tDt(["","(",", ",")"])),a,l,f):(0,n._)(tqt||(tqt=tDt(["","(",")"])),a,l)}},metaSchema:{type:"array",items:{type:"string",enum:Object.keys(r)}}}}),{transform:r});function o(e){return e.toLowerCase()}t.default=i,e.exports=i}(iqt,iqt.exports);var lqt=iqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(lqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(rqt,rqt.exports);var uqt=rqt.exports,cqt={exports:{}},sqt={exports:{}};function dqt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fqt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fqt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function fqt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=tLt,r=["number","integer","string","boolean","null"];function i(){return{keyword:"uniqueItemProperties",type:"array",schemaType:"array",compile:function(e,t){var i=function(e,t){return e.map((function(e){var n,i,o,a=null===(o=null===(i=null===(n=t.items)||void 0===n?void 0:n.properties)||void 0===i?void 0:i[e])||void 0===o?void 0:o.type;return Array.isArray(a)?!a.includes("object")&&!a.includes("array"):r.includes(a)}))}(e,t);return function(t){if(t.length<=1)return!0;for(var r=0;r<e.length;r++){var o=e[r];if(i[r]){var a,l={},u=dqt(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(c&&"object"==lr(c)){var s=c[o];if(!s||"object"!=lr(s)){if("string"==typeof s&&(s='"'+s),l[s])return!1;l[s]=!0}}}}catch(e){u.e(e)}finally{u.f()}}else for(var d=t.length;d--;){var f=t[d];if(f&&"object"==lr(f))for(var h=d;h--;){var p=t[h];if(p&&"object"==lr(p)&&n(f[o],p[o]))return!1}}}return!0}},metaSchema:{type:"array",items:{type:"string"}}}}t.default=i,e.exports=i}(sqt,sqt.exports);var hqt=sqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(hqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(cqt,cqt.exports);var pqt=cqt.exports,vqt={exports:{}},gqt={exports:{}};!function(e,t){function n(){return{keyword:"allRequired",type:"object",schemaType:"boolean",macro:function(e,t){if(!e)return!0;var n=Object.keys(t.properties);return 0===n.length||{required:n}},dependencies:["properties"]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(gqt,gqt.exports);var mqt=gqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(mqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(vqt,vqt.exports);var yqt=vqt.exports,bqt={exports:{}},wqt={exports:{}},_qt={};Object.defineProperty(_qt,"__esModule",{value:!0}),_qt.default=function(e){return function(){return{keyword:e,type:"object",schemaType:"array",macro:function(t){return 0===t.length||(1===t.length?{required:t}:os({},"anyRequired"===e?"anyOf":"oneOf",t.map((function(e){return{required:[e]}}))))},metaSchema:{type:"array",items:{type:"string"}}}}},function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(_qt).default)("anyRequired");t.default=r,e.exports=r}(wqt,wqt.exports);var xqt=wqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(xqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(bqt,bqt.exports);var kqt=bqt.exports,Cqt={exports:{}},Sqt={exports:{}};!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(_qt).default)("oneRequired");t.default=r,e.exports=r}(Sqt,Sqt.exports);var Oqt=Sqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Oqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(Cqt,Cqt.exports);var Eqt,Iqt,Pqt,Mqt=Cqt.exports,Rqt={exports:{}},Aqt={exports:{}};function jqt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dqt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dqt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Dqt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt,r=$$t,i={message:function(e){var t=e.params.missingPattern;return(0,n.str)(Eqt||(Eqt=tDt(["should have property matching pattern '","'"])),t)},params:function(e){var t=e.params.missingPattern;return(0,n._)(Iqt||(Iqt=tDt(["{missingPattern: ","}"])),t)}};function o(){return{keyword:"patternRequired",type:"object",schemaType:"array",error:i,code:function(e){var t=e.gen,i=e.schema,o=e.data;if(0!==i.length){var a,l=t.let("valid",!0),u=jqt(i);try{for(u.s();!(a=u.n()).done;){c(a.value)}}catch(e){u.e(e)}finally{u.f()}}function c(i){var a=t.let("matched",!1);t.forIn("key",o,(function(o){t.assign(a,(0,n._)(Pqt||(Pqt=tDt(["",".test(",")"])),(0,r.usePattern)(e,i),o)),t.if(a,(function(){return t.break()}))})),e.setParams({missingPattern:i}),t.assign(l,(0,n.and)(l,a)),e.pass(l)}},metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}}}t.default=o,e.exports=o}(Aqt,Aqt.exports);var Tqt=Aqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Tqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(Rqt,Rqt.exports);var Fqt=Rqt.exports,Nqt={exports:{}},Lqt={exports:{}};!function(e,t){function n(){return{keyword:"prohibited",type:"object",schemaType:"array",macro:function(e){return 0===e.length||(1===e.length?{not:{required:e}}:{not:{anyOf:e.map((function(e){return{required:[e]}}))}})},metaSchema:{type:"array",items:{type:"string"}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(Lqt,Lqt.exports);var Bqt=Lqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Bqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(Nqt,Nqt.exports);var Vqt=Nqt.exports,zqt={exports:{}},Hqt={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=$$t;function r(e){return{keyword:"deepProperties",type:"object",schemaType:"object",macro:function(e){var t=[];for(var n in e)t.push(i(n,e[n]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:(0,n.metaSchemaRef)(e)}}}function i(e,t){for(var n=e.split("/"),r={},i=r,o=1;o<n.length;o++){var a=n[o],l=o===n.length-1;a=a.replace(/~1/g,"/").replace(/~0/g,"~");var u=i.properties={},c=void 0;if(/[0-9]+/.test(a)){var s=+a;for(c=i.items=[],i.type=["object","array"];s--;)c.push({})}else i.type="object";i=l?t:{},u[a]=i,c&&c.push(i)}return r}t.default=r,e.exports=r}(Hqt,Hqt.exports);var Wqt=Hqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Wqt),i=function(e,t){return e.addKeyword((0,r.default)(t))};t.default=i,e.exports=i}(zqt,zqt.exports);var Uqt,Gqt,Yqt=zqt.exports,$qt={exports:{}},qqt={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt;function r(){return{keyword:"deepRequired",type:"object",schemaType:"array",code:function(e){var t=e.schema,r=e.data,i=t.map((function(e){return(0,n._)(Uqt||(Uqt=tDt(["(",") === undefined"])),function(e){if(""===e)throw new Error("empty JSON pointer not allowed");var t=e.split("/"),i=r,o=t.map((function(e,t){return t?i=(0,n._)(Gqt||(Gqt=tDt(["","",""])),i,(0,n.getProperty)(function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}(e))):i}));return n.and.apply(void 0,ts(o))}(e))}));e.fail(n.or.apply(void 0,ts(i)))},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}}}t.default=r,e.exports=r}(qqt,qqt.exports);var Kqt=qqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Kqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}($qt,$qt.exports);var Xqt=$qt.exports,Jqt={exports:{}},Zqt={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={},r={timestamp:function(){return function(){return Date.now()}},datetime:function(){return function(){return(new Date).toISOString()}},date:function(){return function(){return(new Date).toISOString().slice(0,10)}},time:function(){return function(){return(new Date).toISOString().slice(11)}},random:function(){return function(){return Math.random()}},randomint:function(e){var t,n=null!==(t=null==e?void 0:e.max)&&void 0!==t?t:2;return function(){return Math.floor(Math.random()*n)}},seq:function(e){var t,r=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"";return n[r]||(n[r]=0),function(){return n[r]++}}},i=Object.assign((function(){return{keyword:"dynamicDefaults",type:"object",schemaType:["string","object"],modifying:!0,valid:!0,compile:function(e,t,n){if(!n.opts.useDefaults||n.compositeRule)return function(){return!0};var i,a={};for(var l in e)a[l]="object"==lr(i=e[l])?function(e){var t=e.func,n=e.args,i=r[t];return o(t,i),i(n)}(i):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r[e];return o(e,t),t()}(i);var u="empty"===n.opts.useDefaults;return function(t){for(var n in e)(void 0===t[n]||u&&(null===t[n]||""===t[n]))&&(t[n]=a[n]());return!0}},metaSchema:{type:"object",additionalProperties:{anyOf:[{type:"string"},{type:"object",additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}]}}}}),{DEFAULTS:r});function o(e,t){if(!t)throw new Error('invalid "dynamicDefaults" keyword property value: '.concat(e))}t.default=i,e.exports=i}(Zqt,Zqt.exports);var Qqt=Zqt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Qqt),i=function(e){return e.addKeyword((0,r.default)())};t.default=i,e.exports=i}(Jqt,Jqt.exports);var eKt,tKt,nKt,rKt,iKt,oKt,aKt=Jqt.exports,lKt={exports:{}},uKt={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=lDt,r=$$t,i={message:function(e){var t=e.params.schemaProp;return t?(0,n.str)(eKt||(eKt=tDt(['should match case "','" schema'])),t):(0,n.str)(tKt||(tKt=tDt(["should match default case schema"])))},params:function(e){var t=e.params.schemaProp;return t?(0,n._)(nKt||(nKt=tDt(["{failingCase: ","}"])),t):(0,n._)(rKt||(rKt=tDt(["{failingDefault: true}"])))}};function o(e){var t=(0,r.metaSchemaRef)(e);return[{keyword:"select",schemaType:["string","number","boolean","null"],$data:!0,error:i,dependencies:["selectCases"],code:function(e){var t=e.gen,r=e.schemaCode,i=e.parentSchema;e.block$data(n.nil,(function(){var o=t.let("valid",!0),a=t.name("_valid"),l=t.const("value",(0,n._)(iKt||(iKt=tDt(["",' === null ? "null" : ',""])),r,r));for(var u in t.if(!1),i.selectCases){e.setParams({schemaProp:u}),t.elseIf((0,n._)(oKt||(oKt=tDt(['"" + '," == ",""])),l,u));var c=e.subschema({keyword:"selectCases",schemaProp:u},a);e.mergeEvaluated(c,n.Name),t.assign(o,a)}if(t.else(),void 0!==i.selectDefault){e.setParams({schemaProp:void 0});var s=e.subschema({keyword:"selectDefault"},a);e.mergeEvaluated(s,n.Name),t.assign(o,a)}t.endIf(),e.pass(o)}))}},{keyword:"selectCases",dependencies:["select"],metaSchema:{type:"object",additionalProperties:t}},{keyword:"selectDefault",dependencies:["select","selectCases"],metaSchema:t}]}t.default=o,e.exports=o}(uKt,uKt.exports);var cKt=uKt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(cKt),i=function(e,t){return(0,r.default)(t).forEach((function(t){return e.addKeyword(t)})),e};t.default=i,e.exports=i}(lKt,lKt.exports);var sKt=lKt.exports;!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(y$t),i=n(D$t),o=n(B$t),a=n(U$t),l=n(nqt),u=n(uqt),c=n(pqt),s=n(yqt),d=n(kqt),f=n(Mqt),h=n(Fqt),p=n(Vqt),v=n(Yqt),g=n(Xqt),m=n(aKt),y=n(sKt),b={typeof:r.default,instanceof:i.default,range:o.default,exclusiveRange:a.default,regexp:l.default,transform:u.default,uniqueItemProperties:c.default,allRequired:s.default,anyRequired:d.default,oneRequired:f.default,patternRequired:h.default,prohibited:p.default,deepProperties:v.default,deepRequired:g.default,dynamicDefaults:m.default,select:y.default};t.default=b,e.exports=b}(p$t,p$t.exports);var dKt=p$t.exports;function fKt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hKt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hKt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function hKt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(e,t){var n=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(dKt),i=function(e,t){if(Array.isArray(t)){var n,i=fKt(t);try{for(i.s();!(n=i.n()).done;){o(n.value)(e)}}catch(e){i.e(e)}finally{i.f()}return e}if(t)return o(t)(e),e;for(t in r.default)o(t)(e);return e};function o(e){var t=r.default[e];if(!t)throw new Error("Unknown keyword "+e);return t}i.get=o,t.default=i,e.exports=i,e.exports.default=i}(h$t,h$t.exports);var pKt=Rf.defineToken("ContentEditorContribution"),vKt=Rf.defineToken("ContentViewerContribution"),gKt=Rf.defineToken("ContentDatasourceContribution"),mKt=Rf.defineToken("ContentDatasourceServiceToken"),yKt=Rf.defineToken("ContentServiceToken"),bKt=Rf.defineToken("ContentEditorServiceToken"),wKt=Rf.defineToken("ContentViewerServiceToken"),_Kt=function(e){return e[e.FULL_SCREEN=0]="FULL_SCREEN",e[e.NORMAL=1]="NORMAL",e}(_Kt||{}),xKt=Object.defineProperty,kKt=Object.getOwnPropertyDescriptor,CKt=function(e,t,n,r){for(var i,o=r>1?void 0:r?kKt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&xKt(t,n,o),o},SKt=function(){return ls((function e(){us(this,e),this._onStatusChange=new dS,this.onStatusChange=this._onStatusChange.event,this.status=_Kt.NORMAL}),[{key:"isFullScreen",get:function(){return this.status===_Kt.FULL_SCREEN}},{key:"emitStatusChange",value:function(){this.status===_Kt.NORMAL?this.status=_Kt.FULL_SCREEN:this.status=_Kt.NORMAL,this._onStatusChange.emit(this.status)}},{key:"enterFullScreen",value:function(e){var t,n=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"];this.status=_Kt.FULL_SCREEN,e&&(n=n.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",["view-manage"]),this._configuration.setValue("toolbar.left",n),this._configuration.setValue("toolbar.right",[]),this._configuration.setValue("toolbar.mode",l9e.NORMAL),this._configuration.setValue("viewerManage.type","tab"),this._configuration.setValue("view.customScrollParent",void 0),this._configuration.setValue("view.useWindowScroll",!1),this._configuration.setValue("render.autoActive",!0),null==(t=this._activeTableService)||t.active(),this._toolbarService.rerender()}},{key:"exitFullScreen",value:function(e,t){var n,r=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search"];this.status=_Kt.NORMAL,e&&(r=r.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",[]),this._configuration.setValue("toolbar.left",["view-manage"]),this._configuration.setValue("toolbar.right",r),this._configuration.setValue("toolbar.mode",l9e.LITE),this._configuration.setValue("viewerManage.type","menu"),this._configuration.setValue("view.customScrollParent",t),this._configuration.setValue("view.useWindowScroll",!0),this._configuration.setValue("render.autoActive",!1),null==(n=this._activeTableService)||n.active(),this._toolbarService.rerender()}}])}();CKt([Yf(RC)],SKt.prototype,"_configuration",2),CKt([Yf(Aze)],SKt.prototype,"_activeTableService",2),CKt([Yf(r9e)],SKt.prototype,"_toolbarService",2),SKt=CKt([Gf()],SKt);var OKt=function(e){return e[e.NORMAL="normal"]="NORMAL",e[e.CONTAIN="contain"]="CONTAIN",e}(OKt||{}),EKt=Object.defineProperty,IKt=Object.getOwnPropertyDescriptor,PKt=function(e,t,n,r){for(var i,o=r>1?void 0:r?IKt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&EKt(t,n,o),o},MKt=750,RKt=function(){return ls((function e(){var t=this;us(this,e),this._cardWidthMode=null,this._getMaxWidth=null,this._$card=null,this._cardWidth=0,this._contentWidth=0,this._scrollListener=null,this._onModeUIChange=new dS,this.onModeUIChange=this._onModeUIChange.event,this._onModeChange=new dS,this.onModeChange=this._onModeChange.event,this._onCardWidthChange=new dS,this.onCardWidthChange=this._onCardWidthChange.event,this.initCardWidth=function(e,n){if(t._getMaxWidth&&t._$card){if(t._fullScreenService.isFullScreen)t._setCardWidth("100%");else{var r=Math.min(t._getMaxWidth(),e);t._updateCardWidth(r)}t.syncWidthMode(n),t.bindEvent()}else console.error("[lakex-table-next] FullWidthService.initCardWidth is not ready, please apply getMaxWidtFunction and cardRef.")},this._updateCardWidth=function(e){var n;null==(n=t._setCardWidth)||n.call(t,e),t._onCardWidthChange.emit(e)},this._setCardWidth=function(e){t._$card&&(t._$card.style.width="string"==typeof e?e:"".concat(e,"px"))},this._showCardRightShadow=function(){t.canScroll?t._$card&&(t._$card.classList.remove("left-shadow"),t._$card.classList.add("right-shadow")):t._removeCardShadow()},this._showCardLeftShadow=function(){t.canScroll?t._$card&&(t._$card.classList.remove("right-shadow"),t._$card.classList.add("left-shadow")):t._removeCardShadow()},this._showCardBothShadow=function(){t.canScroll?t._$card&&(t._$card.classList.add("right-shadow"),t._$card.classList.add("left-shadow")):t._removeCardShadow()},this._removeCardShadow=function(){t._$card&&(t._$card.classList.remove("left-shadow"),t._$card.classList.remove("right-shadow"))},this._initCardShadow=function(e,n){"number"==typeof e&&"number"==typeof n&&(t._contentWidth=e,t._cardWidth=n),t.canScroll?t._showCardRightShadow():t._removeCardShadow()},this._handleCardViewWidth=function(){if(t._getMaxWidth){var e=t._getMaxWidth();t.isContainMode?t._updateCardWidth(e):t.isNormalMode&&t._updateCardWidth(Math.min(MKt,e)),t._initCardShadow(0,0),t._viewerCardLayoutService.refresh()}},this._handleKanbanViewWidth=function(){if(t._getMaxWidth){var e=t._readService.getViewGroup(),n=t._getMaxWidth();if(!e)return t._updateCardWidth(Math.min(MKt,n)),void t._initCardShadow(0,0);var r=t._renderContextService.$root.querySelector(".lakex-viewer-kanban-content");if(r){var i=r.getBoundingClientRect().width,o=Math.max(i,MKt),a=n<MKt?n:Math.min(o,n);t._updateCardWidth(a),t._initCardShadow(i,a)}}},this._handleGridViewWidth=function(){if(t._getMaxWidth){var e=t._renderContextService.$root.querySelector("table");if(e){var n=e.getBoundingClientRect().width,r=Math.max(n,MKt),i=t._getMaxWidth(),o=i<MKt?i:Math.min(r,i);t._updateCardWidth(o),t._initCardShadow(n,o)}}}}),[{key:"isDisable",get:function(){return this._fullScreenService.status===_Kt.FULL_SCREEN}},{key:"isNormalMode",get:function(){return this._cardWidthMode===OKt.NORMAL}},{key:"isContainMode",get:function(){return this._cardWidthMode===OKt.CONTAIN}},{key:"cardWidthMode",get:function(){return this._cardWidthMode}},{key:"canScroll",get:function(){return this._contentWidth>this._cardWidth}},{key:"setWidthMode",value:function(e){this.syncWidthMode(e),this._onModeChange.emit(e)}},{key:"applyGetMaxWidthFunction",value:function(e){this._getMaxWidth=e}},{key:"applyCardRef",value:function(e){this._$card=e}},{key:"resetWidth",value:function(){this._handleUpdateWidth()}},{key:"setCardWidth",value:function(e){var t;null==(t=this._setCardWidth)||t.call(this,e)}},{key:"syncWidthMode",value:function(e){this._cardWidthMode=e,this._onModeUIChange.emit(e)}},{key:"_handleUpdateWidth",value:function(){var e=this;if(this._getMaxWidth){if(!yO.isMobile)return this.isDisable?null:void requestAnimationFrame((function(){switch(e._readService.getActiveViewType()){case WO.KANBAN:e._handleKanbanViewWidth();break;case WO.GRID:e._handleGridViewWidth();break;case WO.CARD:case WO.CALENDAR:e._handleCardViewWidth();break;default:return}}));this._updateCardWidth(this._getMaxWidth())}}},{key:"bindEvent",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(t){var n=t.context.commandName;if(e.isDisable)return null;"addView"!==n&&"removeView"!==n&&"switchView"!==n&&"updateShowFieldName"!==n&&"updateCoverSource"!==n&&"changeColWidth"!==n&&"updateFieldHidden"!==n&&"addField"!==n&&"removeField"!==n&&"copyField"!==n||e.resetWidth(),"switchView"===n&&e.listenScroll()})),this._commandService.onDidRedoCommand((function(){e.resetWidth()})),this._commandService.onDidUndoCommand((function(){e.resetWidth()})),this.listenScroll()}},{key:"listenScroll",value:function(){var e,t=this;switch(null==(e=this._scrollListener)||e.destroy(),this._readService.getActiveViewType()){case WO.KANBAN:this._scrollListener=this._viewerKanbanScrollService.onScroll((function(e){var n=e.target.scrollLeft;n>=t._contentWidth-t._cardWidth?t._showCardLeftShadow():0===n?t._showCardRightShadow():t._showCardBothShadow()}));break;case WO.GRID:this._scrollListener=this._viewerGridScrollService.onScroll((function(e){e.target.scrollLeft>=t._contentWidth-t._cardWidth?t._removeCardShadow():t._showCardRightShadow()}));break;case WO.CARD:case WO.CALENDAR:this._removeCardShadow();default:return}}}])}();PKt([Yf(SKt)],RKt.prototype,"_fullScreenService",2),PKt([Yf(XA)],RKt.prototype,"_readService",2),PKt([Yf(Vze)],RKt.prototype,"_renderContextService",2),PKt([Yf(myt)],RKt.prototype,"_viewerCardLayoutService",2),PKt([Yf(Lj)],RKt.prototype,"_commandService",2),PKt([Yf(Hit)],RKt.prototype,"_viewerGridScrollService",2),PKt([Yf(bCt)],RKt.prototype,"_viewerKanbanScrollService",2),RKt=PKt([Gf()],RKt);var AKt=Rf.defineToken("DimaServiceToken");function jKt(e,t){var n=globalThis.appData;return n&&void 0!==n[e]?n[e]:t}bx.setData({"(空)":"(empty)","AI 智能填写":"AI autofill","dima链接":"dima link","上传失败":"Upload failure","下拉":"Dropdown","为必填项":"Is required","使用钉钉扫码$1":"Use Dingding to scan the code to $1","停止收集":"Stop collection","像问卷一样收集信息":"collect information like a questionnaire","全宽":"Full width","全屏":"Full screen","关闭":"Off","内容总结":"Summary","内容规则：":"Prompt type:","分享":"Share","列表":"List","单选":"Select","取消":"Cancel","可用项":"Visible form items","向上移动":"Move up","向下移动":"Move down","复制填写链接":"Copy and fill in the link","复制成功":"Copy successfully","复制表单项":"Clone this item","多选":"Multi-select","将自动对每条记录进行总结":"Summarize each record automatically","已停止填写":"Autofill Stopped","已完成":"Completed","已重新填写":"Autofill Done","布局方式":"Layout","开启收集":"Start form collect","开始自动填写":"Start autofill","当前文档中此文件类型不支持预览和下载":"This file is not supported for preview and download","必填":"Required","打开":"Open","提交":"Submit","收集中":"Collecting","数据处理比较耗时，请耐心等待...":"Data processing takes time, please wait patiently...","新建 Dima":"Create Dima","新建项":"New form items","智能填写":"Autofill","标宽":"Standard width","正在填写中...":"Autofilling...","此处由填写者输入":"This field is for form user","添加":"Add","点击「开启收集」按钮获得表单填写链接":"Click「Start form collect」button to get then form link","点击修改字段":"Click and change field","点击左侧列表添加已有列 或 点击下方按钮添加新表单项":"Click a field or the button above to add an item","生成表单":"Generate form","移除表单项":"Remove this item","自定义":"Custom","获得链接的所有人，可填写并提交表单":"Anyone who gets the link can fill out and submit the form","表单为空":"This form is empty","表单提交失败，请稍后重试":"Form submission failed, please try again later","表单提交成功":"Form submitted successfully","表单收集未开启":"Form collection is not turned on","表单视图":"Form view","要点提取":"Extract","规则不能为空":"Rules can't be null","规则最长支持255字符":"Rules maximun length limit 255","请输入必填项":"Please enter required fields","请输入表单描述":"please input form descriptor","请输入表单标题":"please input form title","请输入问题":"Enter a question","输入智能填写规则\n如：为每个商品生成 50 字的宣传文案":"Please input autofill rules\n","输入要点提取规则\n如：提取每天记录中出现的人名":"Please input extract rules\n","重新填写":"Re-autofill","重新填写本列内容":"Re-autofill current col"});var DKt=Ax(navigator)?"":navigator.userAgent,TKt=/YuqueDesktopApp\/[\d.]+/i.test(DKt),FKt=/YuqueMobileApp\/[\d.]+/i.test(DKt),NKt=function(){return ls((function e(){us(this,e)}),null,[{key:"origin",get:function(){return(this.docUrl?new URL(this.docUrl).origin:globalThis.origin)||"https://www.yuque.com"}},{key:"locale",get:function(){return jKt("locale","zh-cn")}},{key:"isYuque",get:function(){return jKt("isYuque",!1)}},{key:"isPublicCloud",get:function(){return jKt("isPublicCloud",!1)}},{key:"isUIATest",get:function(){var e=Ax(navigator)?"":navigator.userAgent;return/Macaca UI Robot/.test(e)}},{key:"isYuqueMobile",get:function(){return FKt}},{key:"isDesktop",get:function(){return TKt||jKt("isDesktopApp",!1)}},{key:"isYuqueMobileApp",get:function(){return jKt("isYuqueMobileApp",!1)}},{key:"docId",get:function(){return Object(In.get)(globalThis.appData||{},"doc.id")}},{key:"group",get:function(){return jKt("group",void 0)}},{key:"me",get:function(){return jKt("me",void 0)}},{key:"doc",get:function(){return jKt("doc",void 0)}},{key:"docUrl",get:function(){return jKt("docUrl",void 0)}},{key:"organization",get:function(){return jKt("organization",void 0)}},{key:"env",get:function(){return jKt("env","prod")}},{key:"settings",get:function(){return jKt("settings",{})}},{key:"isOfficialTemplate",get:function(){return jKt("isOfficialTemplate",!1)}},{key:"themeManager",get:function(){return jKt("themeManager")||globalThis.yuqueThemeManager}}])}(),LKt=function(e){var t,n=e.webSdk;return{"theme.current":null==(t=NKt.themeManager)?void 0:t.current,"record.maxCount":5e3,"view.maxCount":1e3,"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","|","chart-add","add-record","expandRecord"],"toolbar.right":["create-form","chart-fullscreen"],contextMenu:["updateField","copyField","autofillField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","highlightSame","textColor","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","createDima","|","copyRecord","expandRecord","removeRecord","removeField"],"comment.actions":["reply","emoji","edit","delete"],"monitor.startAt":+new Date,"server.webSdk":n,"clipboard.clipboardApi.disable":NKt.isUIATest,"collab.enable":!1,"collab.skipTable":["table","ability"],"viewerManage.viewTypes":["GRID","KANBAN","CARD","CALENDAR","CHART","FORM"],"logger.maxLen":500}},BKt=Object.defineProperty,VKt=Object.getOwnPropertyDescriptor,zKt=function(){return ls((function e(){us(this,e),this._onCommandHook=new dS,this.onCommandHook=this._onCommandHook.event}),[{key:"emitHook",value:function(e){this._onCommandHook.emit(e)}}])}();function HKt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return WKt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WKt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function WKt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}zKt=function(e,t,n,r){for(var i,o=r>1?void 0:r?VKt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&BKt(t,n,o),o}([Gf()],zKt);var UKt=Object.defineProperty,GKt=Object.getOwnPropertyDescriptor,YKt=function(e,t,n,r){for(var i,o=r>1?void 0:r?GKt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&UKt(t,n,o),o},$Kt=DD.Plugin("monitor"),qKt=function(){return ls((function e(){var t=this;us(this,e),this._commandLogs=[],this._startTaskWithDebounce=Object(In.debounce)(rs(ps.mark((function e(){var n;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._commandLogs,0!==t._commandLogs.length){e.next=3;break}return e.abrupt("return");case 3:t._queueTask.addJob(function(){var e=rs(ps.mark((function e(r){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t._startTask(n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",r.onError(e.t0));case 9:r.onSuccess();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),t._commandLogs=[];case 5:case"end":return e.stop()}}),e)}))),3e3)}),[{key:"startMainPerfLog",value:function(){var e=this,t={};t.startAt=this._configuration.getValue("monitor.startAt"),t.initAt=this._lifeCycleService.getStatusChangedAt(cx.Inited),t.initAt||this._lifeCycleService.when(cx.Inited,(function(){t.initAt=e._lifeCycleService.getStatusChangedAt(cx.Inited)})),t.readyAt=this._lifeCycleService.getStatusChangedAt(cx.Ready),t.readyAt||this._lifeCycleService.when(cx.Ready,(function(){t.readyAt=e._lifeCycleService.getStatusChangedAt(cx.Ready)})),t.recordInitAt=this._lifeCycleService.getStatusChangedAt(cx.RecordInit),t.recordInitAt||this._lifeCycleService.when(cx.RecordInit,(function(){t.recordInitAt=e._lifeCycleService.getStatusChangedAt(cx.RecordInit)})),t.recordReadyAt=this._lifeCycleService.getStatusChangedAt(cx.RecordReady),t.recordReadyAt||this._lifeCycleService.when(cx.RecordReady,(function(){t.recordReadyAt=e._lifeCycleService.getStatusChangedAt(cx.RecordReady)})),t.renderAt=this._lifeCycleService.getStatusChangedAt(cx.Rendered),t.renderAt?this._sendMainPerfLog(t):this._lifeCycleService.when(cx.Rendered,(function(){t.renderAt=e._lifeCycleService.getStatusChangedAt(cx.Rendered),e._sendMainPerfLog(t)}))}},{key:"_sendMainPerfLog",value:function(e){var t=this._configuration.getValue("monitor.sendLog"),n={msg:"新数据表性能上报",m1:e.initAt-e.startAt,m2:e.readyAt-e.initAt,m3:e.recordInitAt-e.readyAt,m4:e.recordReadyAt-e.recordInitAt,m5:e.renderAt-e.recordReadyAt,m6:e.renderAt-e.startAt,c1:this._readService.getRecords().length,c2:this._readService.getAllFields().length};n.m5>5e3||n.m6>2e4||($Kt("main perf: %j",n),null==t||t(59,n))}},{key:"startCommandPerfLog",value:function(){var e=this;this._queueTask=new PT({name:"指令性能同步任务",parallel:1}),this._commandHook.onCommandHook((function(t){e._logCommandPerf(t)}))}},{key:"_logCommandPerf",value:(e=rs(ps.mark((function e(t){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._commandLogs.push(t),this._startTaskWithDebounce();case 2:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"_getCommandPerfData",value:function(e){var t,n={msg:"新数据表指令性能上报"},r={m1:0,m2:0,m3:0,m4:0,m5:0,m6:0,m7:0},i=HKt(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;"setCell"===o.commandName?(n.m1=n.m1||0,r.m1+=1,n.m1=(n.m1+o.time)/r.m1):"switchView"===o.commandName?(n.m2=n.m2||0,r.m2+=1,n.m2=(n.m2+o.time)/r.m2):"addView"===o.commandName?(n.m3=n.m3||0,r.m3+=1,n.m3=(n.m3+o.time)/r.m3):"createFilter"===o.commandName||"updateFilter"===o.commandName||"removeFilter"===o.commandName?(n.m4=n.m4||0,r.m4+=1,n.m4=(n.m4+o.time)/r.m4):"createGridGroup"===o.commandName||"updateGridGroup"===o.commandName||"removeGridGroup"===o.commandName?(n.m5=n.m5||0,r.m5+=1,n.m5=(n.m5+o.time)/r.m5):"createSort"===o.commandName||"updateSort"===o.commandName||"removeSort"===o.commandName?(n.m6=n.m6||0,r.m6+=1,n.m6=(n.m6+o.time)/r.m6):"addEmptyRecord"===o.commandName&&(n.m7=n.m7||0,r.m7+=1,n.m7=(n.m7+o.time)/r.m7)}}catch(e){i.e(e)}finally{i.f()}return n.m1||n.m2||n.m3||n.m4||n.m5||n.m6||n.m7?(n.c1=this._readService.getRecords().length,n.c2=this._readService.getAllFields().length,n):null}},{key:"_startTask",value:function(e){var t=this._configuration.getValue("monitor.sendLog"),n=this._getCommandPerfData(e);n&&($Kt("command perf: %j",n),null==t||t(61,n))}}]);var e}();YKt([Yf(RC)],qKt.prototype,"_configuration",2),YKt([Yf(sx)],qKt.prototype,"_lifeCycleService",2),YKt([Yf(XA)],qKt.prototype,"_readService",2),YKt([Yf(zKt)],qKt.prototype,"_commandHook",2),qKt=YKt([Gf()],qKt);var KKt=Object.defineProperty,XKt=Object.getOwnPropertyDescriptor,JKt=globalThis;var ZKt,QKt,eXt,tXt=(ZKt=JKt.window,QKt=JKt.process,eXt=Date,function(){return null!=ZKt?ZKt.performance.now():null!=QKt?QKt.hrtime()[1]/1e6:(new eXt).getTime()}),nXt=function(){return ls((function e(){us(this,e),this.commandName=""}),[{key:"beforeExecute",value:function(e){return e._executeAt=tXt(),e}},{key:"afterExecute",value:function(e,t){var n,r,i;this.commandHook.emitHook({commandName:this.commandName,time:(n=t._executeAt,r=tXt(),i=(r-n).toFixed(2),Number(i))})}}])}();function rXt(e,t,n){return t=Ch(t),kh(e,iXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function iXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iXt=function(){return!!e})()}nXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?XKt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&KKt(t,n,o),o}([Uf()],nXt);var oXt=Object.defineProperty,aXt=Object.getOwnPropertyDescriptor,lXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?aXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oXt(t,n,o),o},uXt=function(e){function t(){var e;return us(this,t),(e=rXt(this,t,arguments)).commandName="setCell",e}return Oh(t,e),ls(t)}(nXt);function cXt(e,t,n){return t=Ch(t),kh(e,sXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function sXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sXt=function(){return!!e})()}lXt([Yf(zKt)],uXt.prototype,"commandHook",2),uXt=lXt([Gf()],uXt);var dXt=Object.defineProperty,fXt=Object.getOwnPropertyDescriptor,hXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?fXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dXt(t,n,o),o},pXt=function(e){function t(){var e;return us(this,t),(e=cXt(this,t,arguments)).commandName="switchView",e}return Oh(t,e),ls(t)}(nXt);function vXt(e,t,n){return t=Ch(t),kh(e,gXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function gXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gXt=function(){return!!e})()}hXt([Yf(zKt)],pXt.prototype,"commandHook",2),pXt=hXt([Gf()],pXt);var mXt=Object.defineProperty,yXt=Object.getOwnPropertyDescriptor,bXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?yXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mXt(t,n,o),o},wXt=function(e){function t(){var e;return us(this,t),(e=vXt(this,t,arguments)).commandName="createFilter",e}return Oh(t,e),ls(t)}(nXt);function _Xt(e,t,n){return t=Ch(t),kh(e,xXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function xXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xXt=function(){return!!e})()}bXt([Yf(zKt)],wXt.prototype,"commandHook",2),wXt=bXt([Gf()],wXt);var kXt=Object.defineProperty,CXt=Object.getOwnPropertyDescriptor,SXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?CXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kXt(t,n,o),o},OXt=function(e){function t(){var e;return us(this,t),(e=_Xt(this,t,arguments)).commandName="removeFilter",e}return Oh(t,e),ls(t)}(nXt);function EXt(e,t,n){return t=Ch(t),kh(e,IXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function IXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IXt=function(){return!!e})()}SXt([Yf(zKt)],OXt.prototype,"commandHook",2),OXt=SXt([Gf()],OXt);var PXt=Object.defineProperty,MXt=Object.getOwnPropertyDescriptor,RXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?MXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&PXt(t,n,o),o},AXt=function(e){function t(){var e;return us(this,t),(e=EXt(this,t,arguments)).commandName="updateFilter",e}return Oh(t,e),ls(t)}(nXt);function jXt(e,t,n){return t=Ch(t),kh(e,DXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function DXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DXt=function(){return!!e})()}RXt([Yf(zKt)],AXt.prototype,"commandHook",2),AXt=RXt([Gf()],AXt);var TXt=Object.defineProperty,FXt=Object.getOwnPropertyDescriptor,NXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?FXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&TXt(t,n,o),o},LXt=function(e){function t(){var e;return us(this,t),(e=jXt(this,t,arguments)).commandName="createGridGroup",e}return Oh(t,e),ls(t)}(nXt);function BXt(e,t,n){return t=Ch(t),kh(e,VXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function VXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VXt=function(){return!!e})()}NXt([Yf(zKt)],LXt.prototype,"commandHook",2),LXt=NXt([Gf()],LXt);var zXt=Object.defineProperty,HXt=Object.getOwnPropertyDescriptor,WXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?HXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&zXt(t,n,o),o},UXt=function(e){function t(){var e;return us(this,t),(e=BXt(this,t,arguments)).commandName="removeGridGroup",e}return Oh(t,e),ls(t)}(nXt);function GXt(e,t,n){return t=Ch(t),kh(e,YXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function YXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YXt=function(){return!!e})()}WXt([Yf(zKt)],UXt.prototype,"commandHook",2),UXt=WXt([Gf()],UXt);var $Xt=Object.defineProperty,qXt=Object.getOwnPropertyDescriptor,KXt=function(e,t,n,r){for(var i,o=r>1?void 0:r?qXt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$Xt(t,n,o),o},XXt=function(e){function t(){var e;return us(this,t),(e=GXt(this,t,arguments)).commandName="updateGridGroup",e}return Oh(t,e),ls(t)}(nXt);function JXt(e,t,n){return t=Ch(t),kh(e,ZXt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function ZXt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZXt=function(){return!!e})()}KXt([Yf(zKt)],XXt.prototype,"commandHook",2),XXt=KXt([Gf()],XXt);var QXt=Object.defineProperty,eJt=Object.getOwnPropertyDescriptor,tJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?eJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&QXt(t,n,o),o},nJt=function(e){function t(){var e;return us(this,t),(e=JXt(this,t,arguments)).commandName="createSort",e}return Oh(t,e),ls(t)}(nXt);function rJt(e,t,n){return t=Ch(t),kh(e,iJt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function iJt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iJt=function(){return!!e})()}tJt([Yf(zKt)],nJt.prototype,"commandHook",2),nJt=tJt([Gf()],nJt);var oJt=Object.defineProperty,aJt=Object.getOwnPropertyDescriptor,lJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?aJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&oJt(t,n,o),o},uJt=function(e){function t(){var e;return us(this,t),(e=rJt(this,t,arguments)).commandName="removeSort",e}return Oh(t,e),ls(t)}(nXt);function cJt(e,t,n){return t=Ch(t),kh(e,sJt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function sJt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sJt=function(){return!!e})()}lJt([Yf(zKt)],uJt.prototype,"commandHook",2),uJt=lJt([Gf()],uJt);var dJt=Object.defineProperty,fJt=Object.getOwnPropertyDescriptor,hJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?fJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dJt(t,n,o),o},pJt=function(e){function t(){var e;return us(this,t),(e=cJt(this,t,arguments)).commandName="updateSort",e}return Oh(t,e),ls(t)}(nXt);function vJt(e,t,n){return t=Ch(t),kh(e,gJt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function gJt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gJt=function(){return!!e})()}hJt([Yf(zKt)],pJt.prototype,"commandHook",2),pJt=hJt([Gf()],pJt);var mJt=Object.defineProperty,yJt=Object.getOwnPropertyDescriptor,bJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?yJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&mJt(t,n,o),o},wJt=function(e){function t(){var e;return us(this,t),(e=vJt(this,t,arguments)).commandName="addView",e}return Oh(t,e),ls(t)}(nXt);function _Jt(e,t,n){return t=Ch(t),kh(e,xJt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function xJt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xJt=function(){return!!e})()}bJt([Yf(zKt)],wJt.prototype,"commandHook",2),wJt=bJt([Gf()],wJt);var kJt=Object.defineProperty,CJt=Object.getOwnPropertyDescriptor,SJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?CJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&kJt(t,n,o),o},OJt=function(e){function t(){var e;return us(this,t),(e=_Jt(this,t,arguments)).commandName="addEmptyRecord",e}return Oh(t,e),ls(t)}(nXt);SJt([Yf(zKt)],OJt.prototype,"commandHook",2),OJt=SJt([Gf()],OJt);var EJt=Object.defineProperty,IJt=Object.getOwnPropertyDescriptor,PJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?IJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&EJt(t,n,o),o},MJt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){this._initHooks(),this._monitorService.startMainPerfLog(),this._monitorService.startCommandPerfLog()}},{key:"_initHooks",value:function(){this._commandRegistry.registerCommandHook(this._setCellCommandHook),this._commandRegistry.registerCommandHook(this._switchViewCommandHook),this._commandRegistry.registerCommandHook(this._addViewCommandHook),this._commandRegistry.registerCommandHook(this._createFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._removeFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._updateFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._createGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._removeGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._updateGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._createSortCellCommandHook),this._commandRegistry.registerCommandHook(this._removeSortCellCommandHook),this._commandRegistry.registerCommandHook(this._updateSortCellCommandHook),this._commandRegistry.registerCommandHook(this._addEmptyRecordCommandHook)}}],[{key:"pluginModule",value:function(){return ch().register(qKt).register(zKt).register(uXt).register(wJt).register(pXt).register(wXt).register(OXt).register(AXt).register(LXt).register(UXt).register(XXt).register(nJt).register(uJt).register(pJt).register(OJt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"monitor",type:"object",properties:{sendLog:{typeof:"function",description:"外部传入的日志处理对象"},startAt:{type:"number",description:"编辑器开始加载时间"}}})}}])}();MJt.pluginName="kernel-monitor",PJt([Yf(qKt)],MJt.prototype,"_monitorService",2),PJt([Yf(Mj)],MJt.prototype,"_commandRegistry",2),PJt([Yf(uXt)],MJt.prototype,"_setCellCommandHook",2),PJt([Yf(pXt)],MJt.prototype,"_switchViewCommandHook",2),PJt([Yf(wJt)],MJt.prototype,"_addViewCommandHook",2),PJt([Yf(wXt)],MJt.prototype,"_createFilterCellCommandHook",2),PJt([Yf(OXt)],MJt.prototype,"_removeFilterCellCommandHook",2),PJt([Yf(AXt)],MJt.prototype,"_updateFilterCellCommandHook",2),PJt([Yf(LXt)],MJt.prototype,"_createGroupCellCommandHook",2),PJt([Yf(UXt)],MJt.prototype,"_removeGroupCellCommandHook",2),PJt([Yf(XXt)],MJt.prototype,"_updateGroupCellCommandHook",2),PJt([Yf(nJt)],MJt.prototype,"_createSortCellCommandHook",2),PJt([Yf(uJt)],MJt.prototype,"_removeSortCellCommandHook",2),PJt([Yf(pJt)],MJt.prototype,"_updateSortCellCommandHook",2),PJt([Yf(OJt)],MJt.prototype,"_addEmptyRecordCommandHook",2),MJt=PJt([Gf({contrib:[mj]})],MJt);var RJt=Rf.defineToken("ServerContribution"),AJt=Rf.defineToken("SyncQueueToken"),jJt=function(e){return e.RUNNING="running",e.SUCCESS="success",e}(jJt||{}),DJt=function(e){return e.SUMMARY="summary",e.EXTRACT="extract",e.CUSTOM="custom",e}(DJt||{}),TJt=Rf.defineToken("AiWritingServiceToken"),FJt=Rf.defineToken("AiWritingTaskServiceToken"),NJt=Rf.defineToken("AiWritingDatasourceContribution"),LJt=Rf.defineToken("AiWritingDatasourceToken");function BJt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VJt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BJt(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BJt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zJt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HJt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HJt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function HJt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var WJt=Object.defineProperty,UJt=Object.getOwnPropertyDescriptor,GJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?UJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WJt(t,n,o),o};function YJt(e,t){var n,r=zJt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(e){r.e(e)}finally{r.f()}return null}var $Jt=function(){return ls((function e(){us(this,e)}),[{key:"_queueTask",get:function(){return this.aiWritingTaskService.queueTask}},{key:"getAiWritingConfig",value:function(e){var t=this._modelService.getModel("ai_writing").findOne({field_uuid:e}),n=this._readService.getField(e||"");return(null==t?void 0:t.get("open"))&&n&&n.get("type")!==xO.TEXT?{open:!1,type:DJt.SUMMARY,prompt:"",auto:!1}:null==t?void 0:t.toJSON()}},{key:"_generatePrompt",value:function(e,t,n){var r="",i="";switch(t.forEach((function(e,r){i+="".concat(n.get(e.fieldId)||"","是").concat(e.formatValue||""),r<t.length-1&&(i+="，")})),e.type){case DJt.SUMMARY:r="帮我给以下内容生成摘要，尽可能简洁：".concat(i);break;case DJt.EXTRACT:r="帮我总结出以下内容里的".concat(e.prompt,"：").concat(i);break;case DJt.CUSTOM:r="帮我给以下内容".concat(e.prompt,"：").concat(i)}return r}},{key:"_getAiWritingData",value:(r=rs(ps.mark((function e(t,n,r,i){var o,a,l;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this._generatePrompt(t,MC(i,(function(e){return e.fieldId!==n})),r),e.next=4,null==(o=this.aiWritingDatasource)?void 0:o.handlePost({content:a,type:"custom"});case 4:return l=e.sent,e.abrupt("return",(null==l?void 0:l.data.result)||"");case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"autofillCell",value:(n=rs(ps.mark((function e(t,n,r,i){var o,a,l,u,c;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._readService.getViewRecordCells(r),l=YJt(a,(function(e){return e.fieldId===n})),e.next=4,this._getAiWritingData(t,n,i,a);case 4:if((u=e.sent)&&l){e.next=7;break}return e.abrupt("return");case 7:c=VJt(VJt({},l),{},{value:u}),null==(o=this._commandService)||o.execCommand("setCell",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"startAiWriting",value:(t=rs(ps.mark((function e(t,n){var r,i,o,a,l,u,c=this;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=this._readService.getField(t),o=this.getAiWritingConfig(t),(null==i?void 0:i.get("type"))===xO.TEXT&&(null==o?void 0:o.open)){e.next=6;break}return e.abrupt("return",!1);case 6:if(a=this._readService.getAllFields(),l=new Map,null==a||a.forEach((function(e){l.set(e.get("uuid"),e.get("name"))})),!n){e.next=14;break}return e.next=12,this.autofillCell(o,t,n,l);case 12:e.next=17;break;case 14:u=this._readService.getRecords(),null==(r=this.aiWritingTaskService)||r.emitStartAiWritingTask(t),u.forEach((function(e){var n,r="".concat(t,"-").concat(e.get("uuid"));null==(n=c._queueTask)||n.addJob(r,function(){var n=rs(ps.mark((function n(i){var a;return ps.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.autofillCell(o,t,e.get("uuid"),l);case 3:n.next=9;break;case 5:return n.prev=5,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",i.onError(n.t0));case 9:i.onSuccess(),null==(a=c._queueTask)||a.removeSuccessJob(r);case 11:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}())}));case 17:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"stopAiWriting",value:(e=rs(ps.mark((function e(t){var n;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:null==(n=this.aiWritingTaskService)||n.emitStopAiWritingTask(t);case 3:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:function(){var e;null==(e=this.aiWritingTaskService)||e.destroy()}}]);var e,t,n,r}();GJt([Yf(LE)],$Jt.prototype,"_modelService",2),GJt([Yf(XA)],$Jt.prototype,"_readService",2),GJt([Yf(Lj)],$Jt.prototype,"_commandService",2),GJt([Yf(FJt)],$Jt.prototype,"aiWritingTaskService",2),GJt([Yf(LJt)],$Jt.prototype,"aiWritingDatasource",2),$Jt=GJt([Gf({token:TJt})],$Jt);var qJt=[{uuid:DJt.SUMMARY,name:wx("内容总结"),placeholder:wx("将自动对每条记录进行总结")},{uuid:DJt.CUSTOM,name:wx("自定义"),placeholder:wx("输入智能填写规则\n如：为每个商品生成 50 字的宣传文案")}],KJt=Object.defineProperty,XJt=Object.getOwnPropertyDescriptor,JJt=function(e,t,n,r){for(var i,o=r>1?void 0:r?XJt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&KJt(t,n,o),o},ZJt=function(){return ls((function e(){us(this,e)}),[{key:"getProvider",value:function(){var e=this.serverProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerServer()}},{key:"hasProvider",value:function(){return this.serverProvider.getContributions().length>0}}])}();function QJt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eZt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eZt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function eZt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}JJt([gh(RJt)],ZJt.prototype,"serverProvider",2),ZJt=JJt([Gf()],ZJt);var tZt=Object.defineProperty,nZt=Object.getOwnPropertyDescriptor,rZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?nZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&tZt(t,n,o),o},iZt=function(){return ls((function e(){us(this,e)}),[{key:"getCommonParams",value:function(e){var t,n,r=e?this._readService.getView(e):this._readService.getActiveView();this.tableId||(this.tableId=null==(t=this._readService.getTable())?void 0:t.get("uuid"));var i={sheetId:this.tableId,type:null==r?void 0:r.get("type"),viewId:(null==r?void 0:r.get("uuid"))||e},o=null==(n=this._serverRegistry.getProvider())?void 0:n.processParams;return o&&(i=o(i)),i}},{key:"getSdk",value:function(){var e;return null==(e=this._serverRegistry.getProvider())?void 0:e.apiSdk}},{key:"log",value:function(e,t){try{this._logger.log({type:"server-ms",action:e,data:(new Date).getTime()-t})}catch(e){console.error(e)}}},{key:"setActiveView",value:function(){var e=this,t=this._readService.getTable(),n=this.getCommonParams(t.get("active_view_uuid"));this._syncQueue.addJob(rs(ps.mark((function t(){var r;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(new Date).getTime(),t.next=3,e.getSdk().TableViewController.setActive(n);case 3:e.log("TableViewController.setActive",r);case 4:case"end":return t.stop()}}),t)}))))}},{key:"updateCell",value:function(e){var t=this,n=this.getCommonParams();n.records=[];var r,i=QJt(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=this._readService.getOriginRecord(o.recordId),l=this._readService.getCell(o.fieldId,o.recordId);l&&a&&n.records.push({data:this._toProcess.toValue(l),fieldId:l.fieldId,recordId:l.recordId})}}catch(e){i.e(e)}finally{i.f()}0!==n.records.length&&this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordValueController.bulkUpdate(n);case 3:t.log("TableRecordValueController.bulkUpdate",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addRecord",value:function(e){var t=this,n=this.getCommonParams();n.data=e.map((function(e){return{id:e}})),this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordController.create(n);case 3:t.log("TableRecordController.create",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"removeRecord",value:function(e){var t=this,n=this.getCommonParams();n.recordIds=e,this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableRecordController.remove(n);case 3:t.log("TableRecordController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addField",value:function(e){var t=this,n=this.getCommonParams();n.fields=e.map((function(e){return t._toProcess.toColumn(new bC(e))})),this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableFieldController.create(n);case 3:t.log("TableFieldController.create",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"updateField",value:function(e,t){var n=this,r=this._readService.getField(e),i=this._aiWritingService.getAiWritingConfig(e),o=this.getCommonParams();o.field=this._toProcess.toColumn(r),i&&(o.field.enableAI=i.open,o.field.aiWritingType=i.type,o.field.aiPrompt=i.prompt,o.field.enableAutoAIGC=i.auto),this._syncQueue.addJob(rs(ps.mark((function e(){var t;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),e.next=3,n.getSdk().TableFieldController.update(o);case 3:n.log("TableFieldController.update",t);case 4:case"end":return e.stop()}}),e)})))),t&&this._updateFieldRecord()}},{key:"_updateFieldRecord",value:function(){var e=this,t=this.getCommonParams(),n=this._readService.getRecords();t.data=OC(n,(function(t){var n=e._readService.getOriginRecord(t.get("uuid"));return{id:t.get("uuid"),data:JSON.stringify(e._toProcess.toRecord(n))}})),this._syncQueue.addJob(rs(ps.mark((function n(){var r;return ps.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(new Date).getTime(),n.next=3,e.getSdk().TableRecordController.update(t);case 3:e.log("TableRecordController.update",r);case 4:case"end":return n.stop()}}),n)}))))}},{key:"removeField",value:function(e){var t=this,n=this.getCommonParams();n.fieldIds=e,this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableFieldController.remove(n);case 3:t.log("TableFieldController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"addView",value:function(e){var t=this,n=this._getViewData(e);if(n){var r=this.getCommonParams(e);r.data=this._toProcess.toView(n),this._syncQueue.addJob(rs(ps.mark((function e(){var n,i,o,a;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.create(r);case 3:if(a=e.sent,t.log("TableViewController.create",o),a){e.next=7;break}return e.abrupt("return");case 7:t._model.viewModel.upsert({uuid:null==(n=a.data)?void 0:n.view_id},{id:null==(i=a.data)?void 0:i.data.iid},{slient:!0});case 8:case"end":return e.stop()}}),e)}))))}}},{key:"updateView",value:function(e){var t=this,n=this._getViewData(e);if(n){var r=this.getCommonParams(e);r.data=this._toProcess.toView(n),this._syncQueue.addJob(rs(ps.mark((function e(){var n;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.update(r);case 3:t.log("TableViewController.update",n);case 4:case"end":return e.stop()}}),e)}))))}}},{key:"updateViewOrder",value:function(e,t){var n=this,r=this.getCommonParams(e);r.targetViewId=t,this._syncQueue.addJob(rs(ps.mark((function e(){var t;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),e.next=3,n.getSdk().TableViewController.moveAfter(r);case 3:n.log("TableViewController.moveAfter",t);case 4:case"end":return e.stop()}}),e)}))))}},{key:"removeView",value:function(e){var t=this,n=this.getCommonParams(e);this._syncQueue.addJob(rs(ps.mark((function e(){var r;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),e.next=3,t.getSdk().TableViewController.remove(n);case 3:t.log("TableViewController.remove",r);case 4:case"end":return e.stop()}}),e)}))))}},{key:"updateForm",value:function(e,t){var n=this;this._syncQueue.addJob(rs(ps.mark((function r(){var i,o,a,l,u;return ps.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n._model.viewModel.findOne({uuid:e}),a={type:"form",status:t,viewId:e,target_id:null==o?void 0:o.get("id"),target_type:"Skythings.View"},(l=null==(i=n._serverRegistry.getProvider())?void 0:i.processParams)&&(a=l(a)),u=(new Date).getTime(),r.next=7,n.getSdk().TableShareController.update(a);case 7:n.log("TableShareController.update",u);case 8:case"end":return r.stop()}}),r)}))))}},{key:"updateContent",value:function(e,t){var n=this,r=this._readService.getTable().get("uuid");this._syncQueue.addJob(rs(ps.mark((function i(){var o;return ps.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=(new Date).getTime(),i.next=3,n._contentDatasource.handlePut(e,r,t);case 3:n.log("_contentDatasource.handlePut",o);case 4:case"end":return i.stop()}}),i)}))))}},{key:"_getViewData",value:function(e){var t,n={},r=this._readService.getView(e);return r?(n.view=this._readService.getView(r.get("uuid")),n.sort=this._readService.getViewSort(r.get("uuid")),n.stats=this._readService.getViewStats(r.get("uuid")),n.viewGroup=this._readService.getViewGroup(r.get("uuid")),n.filter=this._readService.getViewFilter(r.get("uuid"),{notIncludeField:!0}),n.groupViewRecords=(null==(t=n.viewGroup)?void 0:t.group)?this._readService.getGroupViewRecords(r.get("uuid")):null,n.viewConfig=this._readService.getViewConfig(r.get("uuid")),n):null}}])}();function oZt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aZt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aZt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function aZt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}rZt([Yf(XA)],iZt.prototype,"_readService",2),rZt([Yf(YD)],iZt.prototype,"_toProcess",2),rZt([Yf(ZJt)],iZt.prototype,"_serverRegistry",2),rZt([Yf(AJt)],iZt.prototype,"_syncQueue",2),rZt([Yf(TJt)],iZt.prototype,"_aiWritingService",2),rZt([Yf(mKt)],iZt.prototype,"_contentDatasource",2),rZt([Yf($S)],iZt.prototype,"_logger",2),rZt([Yf(JP)],iZt.prototype,"_model",2),iZt=rZt([Gf()],iZt);var lZt=Object.defineProperty,uZt=Object.getOwnPropertyDescriptor,cZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?uZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&lZt(t,n,o),o},sZt=function(){return ls((function e(){var t=this;us(this,e),this._events=[],this.isSync=!1,this.handleEvents=function(e){if(t._abilityService.canUpdate(Qj.TABLE)){var n,r=oZt(e);try{var i=function(){var e=n.value;if(!t._isCurrentOrigin(e.transaction))return 0;var r=e.path[0],i=e.path.slice(1,e.path.length),o=t._getTrustDeleted(e)||[],a=t._getTruestAdded(e)||[];if("view"===r&&1===e.changes.deleted.size&&1===e.changes.added.size&&0===o.length&&0===a.length){var l,u=Array.from(e.changes.added)[0].content.type,c=t._readService.getViews(),s=CC(c,(function(e){return e.get("uuid")===u.get("uuid")}))-1;return s>-1&&(l=c.get(s)),t.syncEvents({table:r,command:"moveAfter",path:i,item:u,targetItem:l}),0}var d=!1;if(e.changes.deleted.size>0){var f,h=oZt(o);try{for(h.s();!(f=h.n()).done;){var p=f.value;t.syncEvents({table:r,command:"delete",path:i,item:p}),d=!0}}catch(e){h.e(e)}finally{h.f()}}if(e.changes.added.size>0){var v,g=oZt(a);try{for(g.s();!(v=g.n()).done;){var m=v.value;t.syncEvents({table:r,command:"insert",path:i,item:m}),d=!0}}catch(e){g.e(e)}finally{g.f()}}if(d)return 0;if(e.keys){var y,b=oZt(e.keys);try{for(b.s();!(y=b.n()).done;){var w=y.value;if(32===w[0].length)if("delete"===w[1].action){var _=w[1].oldValue;if(_ instanceof Em){var x,k=(_=_._start).content.type._map,C=k.keys(),S=new bC,O=oZt(C);try{for(O.s();!(x=O.n()).done;){var E=x.value;S.set(E,k.get(E).content.arr[0])}}catch(e){O.e(e)}finally{O.f()}_=S}t.syncEvents({table:r,command:"delete",path:i,item:_}),d=!0}else if("add"===w[1].action){var I=e.target;w[0]&&(I=I.get(w[0])),I instanceof Em&&(I=I.get(0)),t.syncEvents({table:r,command:"insert",path:i,item:I,keysChanged:e.keysChanged}),d=!0}else if("update"===w[1].action){var P=e.target;w[0]&&(P=P.get(w[0])),P instanceof Em&&(P=P.get(0)),t.syncEvents({table:r,command:"update",path:i,item:P,keysChanged:e.keysChanged}),d=!0}}}catch(e){b.e(e)}finally{b.f()}}if(d)return 0;if(e.target instanceof Em){var M,R=oZt(e.target);try{for(R.s();!(M=R.n()).done;){var A=M.value;t.syncEvents({table:r,command:"update",path:i,item:A})}}catch(e){R.e(e)}finally{R.f()}}else t.syncEvents({table:r,command:"update",path:i,item:e.target,keysChanged:e.keysChanged})};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}},this.startTaskWithDebounce=rc((function(){var e=t._events;t.startTask(e),t._events=[]}),300)}),[{key:"start",value:function(){this._database.root&&this._database.root.observeDeep&&this._database.root.observeDeep(this.handleEvents)}},{key:"_isCurrentOrigin",value:function(e){var t=e.origin;if(null==t?void 0:t.trackedOrigins){var n,r=oZt(t.trackedOrigins);try{for(r.s();!(n=r.n()).done;){if(n.value===this._database.struct.ystruct)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}return t===this._database.struct.ystruct}},{key:"_getTrustDeleted",value:function(e){for(var t=Array.from(e.changes.deleted),n=Array.from(e.changes.added).reduce((function(e,t){return e[t.content.type._map.get("uuid").content.arr[0]]=!0,e}),{}),r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a){var l=a.content.type._map;if(!n[l.get("uuid").content.arr[0]]){var u,c=l.keys(),s=new bC,d=oZt(c);try{for(d.s();!(u=d.n()).done;){var f=u.value;s.set(f,l.get(f).content.arr[0])}}catch(e){d.e(e)}finally{d.f()}r.push(s)}}}return r}},{key:"_getTruestAdded",value:function(e){for(var t=Array.from(e.changes.deleted),n=Array.from(e.changes.added),r=t.reduce((function(e,t){return e[t.content.type._map.get("uuid").content.arr[0]]=!0,e}),{}),i=[],o=0,a=n;o<a.length;o++){var l=a[o].content.type;r[l.get("uuid")]||i.push(l)}return i}},{key:"syncEvents",value:function(e){if(this._events.push(e),this.isSync)return this.startTask(this._events),void(this._events=[]);this.startTaskWithDebounce()}},{key:"startTask",value:function(e){if(e.length>0){this.addField(e),this.updateField(e),this.removeField(e),this.addRecord(e);var t=this.removeRecord(e);this.updateCell(e,t),this.addView(e),this.updateView(e),this.removeView(e),this.updateContent(e),this.updateForm(e),this.updateTable(e)}}},{key:"addField",value:function(e){var t,n,r,i=[],o=oZt(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("field"===a.table&&"insert"===a.command){var l=null==(n=this._readService.getField(null==(t=a.item)?void 0:t.get("uuid")))?void 0:n.toJSON();i.push(l)}}}catch(e){o.e(e)}finally{o.f()}i.length>0&&this._syncHelper.addField(i)}},{key:"updateField",value:function(e){var t,n,r,i,o,a,l,u,c,s,d,f={},h=oZt(e);try{for(h.s();!(d=h.n()).done;){var p=d.value;if("field"===p.table&&("delete"===p.command||"insert"===p.command))f[null==(t=p.item)?void 0:t.get("uuid")]=!0}}catch(e){h.e(e)}finally{h.f()}var v,g={},m=oZt(e);try{for(m.s();!(v=m.n()).done;){var y=v.value,b=void 0;if("field"===y.table&&"update"===y.command)b=null==(n=y.item)?void 0:n.get("uuid");else if("field_option"===y.table){if(!(b=null==(r=y.item)?void 0:r.get("field_uuid"))&&y.keysChanged){var w=Array.from(y.keysChanged)[0];b=null==(a=null==(o=null==(i=y.item)?void 0:i.get(w))?void 0:o.get(0))?void 0:a.get("field_uuid")}}else if("ai_writing"===y.table&&!(b=null==(l=y.item)?void 0:l.get("field_uuid"))&&y.keysChanged){var _=Array.from(y.keysChanged)[0];b=null==(c=null==(u=y.item)?void 0:u.get(_))?void 0:c.get(0).get("field_uuid")}f[b]||b&&(g[b]||(g[b]=y))}}catch(e){m.e(e)}finally{m.f()}for(var x=0,k=Object.keys(g);x<k.length;x++){var C=k[x],S=g[C];this._syncHelper.updateField(C,null==(s=S.keysChanged)?void 0:s.has("type"))}}},{key:"removeField",value:function(e){var t,n,r=[],i=oZt(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;"field"===o.table&&"delete"===o.command&&r.push(null==(t=o.item)?void 0:t.get("uuid"))}}catch(e){i.e(e)}finally{i.f()}r.length>0&&this._syncHelper.removeField(r)}},{key:"addView",value:function(e){var t,n,r=oZt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;"view"===i.table&&"insert"===i.command&&this._syncHelper.addView(null==(t=i.item)?void 0:t.get("uuid"))}}catch(e){r.e(e)}finally{r.f()}}},{key:"addRecord",value:function(e){var t,n,r=[],i=oZt(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;"record"===o.table&&"insert"===o.command&&r.push(null==(t=o.item)?void 0:t.get("uuid"))}}catch(e){i.e(e)}finally{i.f()}r.length>0&&this._syncHelper.addRecord(r)}},{key:"removeRecord",value:function(e){var t,n,r=[],i=oZt(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("record"===o.table&&"delete"===o.command){var a=null==(t=o.item)?void 0:t.get("uuid");a&&r.push(a)}}}catch(e){i.e(e)}finally{i.f()}return r.length>0&&this._syncHelper.removeRecord(Xc(r)),r}},{key:"updateCell",value:function(e){var t,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=[],u=oZt(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(["field_boolean","field_date","field_number","field_select","field_string","field_uri","cell"].includes(c.table)){var s=void 0;if(1===c.path.length){var d=null==(t=c.item)?void 0:t.keys();if(!d)return;var f,h=oZt(d);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(!(null==a?void 0:a.includes(p))){var v=null==(i=null==(r=null==(n=c.item)?void 0:n.get(p))?void 0:r.get(0))?void 0:i.get("field_uuid");if(v){if("cell"===c.table&&"update"===c.command){var g=this._readService.getCell(v,p);if(null==g?void 0:g.by_system)continue}l.push({fieldId:v,recordId:p})}}}}catch(e){h.e(e)}finally{h.f()}}else if(2===c.path.length){var m=c.path[1];if(c.keysChanged)for(var y=Array.from(c.keysChanged),b=0,w=y;b<w.length;b++){var _=w[b];if(!(null==a?void 0:a.includes(_))){if("cell"===c.table&&"update"===c.command){var x=this._readService.getCell(m,_);if(null==x?void 0:x.by_system)continue}l.push({fieldId:m,recordId:_})}}}else{var k=c.path[1];if(!(s=c.path[2])&&c.keysChanged&&(s=Array.from(c.keysChanged)[0]),!k||!s)continue;if(null==a?void 0:a.includes(s))continue;if("cell"===c.table&&"update"===c.command){var C=this._readService.getCell(k,s);if(null==C?void 0:C.by_system)continue}l.push({fieldId:k,recordId:s})}}}}catch(e){u.e(e)}finally{u.f()}l.length>0&&this._syncHelper.updateCell(Jc(l,(function(e){return e.fieldId+":"+e.recordId})))}},{key:"updateView",value:function(e){var t,n,r,i,o,a,l,u,c,s={},d={},f=oZt(e);try{for(f.s();!(c=f.n()).done;){var h=c.value;if("view"===h.table&&("delete"===h.command||"insert"===h.command)){var p=null==(t=h.item)?void 0:t.get("uuid");d[p]=!0,delete s[p]}if("view"===h.table&&"update"===h.command){var v=null==(n=h.item)?void 0:n.get("uuid");if(d[v])continue;s[v]=!0}else if(["view_config","view_field","view_record","sort","group","group_item","filter_packet","filter_thing","stat"].includes(h.table)){var g=void 0;if(1===h.path.length&&h.keysChanged)g=Array.from(h.keysChanged)[0];else if(2===h.path.length&&h.keysChanged){var m=Array.from(h.keysChanged)[0];g=null==(o=null==(i=null==(r=h.item)?void 0:r.get(m))?void 0:i.get(0))?void 0:o.get("view_uuid")}else g=null==(a=h.item)?void 0:a.get("view_uuid");if(d[g]||!g)continue;s[g]=!0}if("view"===h.table&&"moveAfter"===h.command){var y=null==(l=h.item)?void 0:l.get("uuid"),b=null==(u=h.targetItem)?void 0:u.get("uuid");this._syncHelper.updateViewOrder(y,b)}}}catch(e){f.e(e)}finally{f.f()}for(var w=0,_=Object.keys(s);w<_.length;w++){var x=_[w];this._syncHelper.updateView(x)}}},{key:"removeView",value:function(e){var t,n,r=oZt(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("view"===i.table&&"delete"===i.command){var o=null==(t=i.item)?void 0:t.get("uuid");this._syncHelper.removeView(o)}}}catch(e){r.e(e)}finally{r.f()}}},{key:"updateContent",value:function(e){var t,n,r,i,o,a,l,u,c={},s=oZt(e);try{for(s.s();!(u=s.n()).done;){var d=u.value;if("content"===d.table&&("update"===d.command||"insert"===d.command)){var f=null==(t=d.item)?void 0:t.get("target_uuid"),h=null==(n=d.item)?void 0:n.get("target_type"),p=null==(r=d.item)?void 0:r.get("status");if("record"!==h||0===p)continue;c[f]=d}}}catch(e){s.e(e)}finally{s.f()}for(var v=0,g=Object.keys(c);v<g.length;v++){var m=c[g[v]];this._syncHelper.updateContent(null==(i=m.item)?void 0:i.get("target_uuid"),{format:null==(o=m.item)?void 0:o.get("format"),html:null==(a=m.item)?void 0:a.get("html"),source:null==(l=m.item)?void 0:l.get("source")})}}},{key:"updateForm",value:function(e){var t,n,r,i=oZt(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("view_share"===o.table&&("update"===o.command||"insert"===o.command)){var a=void 0,l=void 0;if(0===o.path.length){var u=null==(t=o.item)?void 0:t.get("data"),c=Array.from(u.keys())[0];a=null==(n=u.get(c))?void 0:n.get(0)}else 1===o.path.length?(l=Array.from(o.keysChanged)[0],a=o.item):a=o.item;var s=null==a?void 0:a.get("status");if(l=l||(null==a?void 0:a.get("view_uuid")),s===MO.ACTIVE)return;this._syncHelper.updateForm(l,s)}}}catch(e){i.e(e)}finally{i.f()}}},{key:"updateTable",value:function(e){var t,n=!1,r=oZt(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;["table"].includes(i.table)&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}n&&this._syncHelper.setActiveView()}},{key:"destroy",value:function(){this._database.root.unobserveDeep(this.handleEvents)}}])}();cZt([Yf(sC)],sZt.prototype,"_database",2),cZt([Yf(XA)],sZt.prototype,"_readService",2),cZt([Yf(hD)],sZt.prototype,"_abilityService",2),cZt([Yf(iZt)],sZt.prototype,"_syncHelper",2),sZt=cZt([Gf()],sZt);var dZt=Object.defineProperty,fZt=Object.getOwnPropertyDescriptor,hZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?fZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dZt(t,n,o),o},pZt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){var e=this;this._syncQueue.init(),this._lifecycleService.when(cx.Rendered,(function(){setTimeout((function(){e._hasInited||(e._syncYjs.start(),e._hasInited=!0)}),1e3)}))}},{key:"destroy",value:function(){this._syncQueue.destroy()}}])}();hZt([Yf(sx)],pZt.prototype,"_lifecycleService",2),hZt([Yf(sZt)],pZt.prototype,"_syncYjs",2),hZt([Yf(AJt)],pZt.prototype,"_syncQueue",2),pZt=hZt([Gf()],pZt);var vZt=Object.defineProperty,gZt=Object.getOwnPropertyDescriptor,mZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?gZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vZt(t,n,o),o},yZt=function(){return ls((function e(){us(this,e),this._onSyncChange=new dS,this.onSyncChange=this._onSyncChange.event}),[{key:"init",value:function(){var e=this;this._queueTask=this._taskService.createQueueTask({name:"服务端接口同步任务队列",parallel:1}),this._queueTask.onDidStatusChange((function(t){t.status===_T.PENDING?e._onSyncChange.emit({status:jJt.RUNNING}):t.status===_T.WAITING&&e._onSyncChange.emit({status:jJt.SUCCESS})})),this.timerId=setInterval((function(){var t;null==(t=e._queueTask)||t.resume()}),1e3)}},{key:"destroy",value:function(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}},{key:"addJob",value:function(e){var t;null==(t=this._queueTask)||t.addJob(function(){var t=rs(ps.mark((function t(n){return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",n.onError(t.t0));case 9:n.onSuccess();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}}])}();mZt([Yf(TT)],yZt.prototype,"_taskService",2),yZt=mZt([Gf({token:AJt})],yZt);var bZt=Object.defineProperty,wZt=Object.getOwnPropertyDescriptor,_Zt=function(e,t,n,r){for(var i,o=r>1?void 0:r?wZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&bZt(t,n,o),o},xZt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){this._serverRegistry.hasProvider()&&this._syncServer.init()}},{key:"destroy",value:function(){this._syncServer.destroy()}}],[{key:"pluginModule",value:function(){return ch().contribution(RJt).register(ZJt).register(iZt).register(pZt).register(yZt).register(sZt).register(this)}}])}();function kZt(e,t,n){return t=Ch(t),kh(e,CZt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function CZt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(CZt=function(){return!!e})()}xZt.pluginName="kernel-server",_Zt([Yf(pZt)],xZt.prototype,"_syncServer",2),_Zt([Yf(ZJt)],xZt.prototype,"_serverRegistry",2),xZt=_Zt([Gf({contrib:mj})],xZt);var SZt=function(e){function t(){return us(this,t),kZt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,open:e.open,type:DJt.SUMMARY,prompt:"",auto:!1}),!0}}])}(Ij);function OZt(e,t,n){return t=Ch(t),kh(e,EZt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function EZt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EZt=function(){return!!e})()}SZt.commandName="updateAiWritingOpen";var IZt=function(e){function t(){return us(this,t),OZt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.modelService.getModel("ai_writing"),n={field_uuid:e.fieldId,type:e.type};return e.type!==DJt.SUMMARY&&(n.prompt=""),t.upsert({field_uuid:e.fieldId},n),!0}}])}(Ij);function PZt(e,t,n){return t=Ch(t),kh(e,MZt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function MZt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MZt=function(){return!!e})()}IZt.commandName="updateAiWritingType";var RZt=function(e){function t(){return us(this,t),PZt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,prompt:e.prompt}),!0}}])}(Ij);function AZt(e,t,n){return t=Ch(t),kh(e,jZt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function jZt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jZt=function(){return!!e})()}RZt.commandName="updateAiWritingPrompt";var DZt=Object.defineProperty,TZt=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&DZt(t,n,o),o},FZt=function(e){function t(){return us(this,t),AZt(this,t,arguments)}return Oh(t,e),ls(t)}(BE);function NZt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return LZt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LZt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function LZt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}FZt.table="ai_writing",FZt.indexes=["field_uuid"],TZt([oE()],FZt.prototype,"field_uuid"),TZt([oE()],FZt.prototype,"open"),TZt([oE()],FZt.prototype,"type"),TZt([oE()],FZt.prototype,"prompt"),TZt([oE()],FZt.prototype,"auto");var BZt=Object.defineProperty,VZt=Object.getOwnPropertyDescriptor,zZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?VZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&BZt(t,n,o),o},HZt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){var e,t,n=NZt(this.aiWritingDatasourceProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=null==(e=r.registerAiWritingDatasourcePost)?void 0:e.call(r);i&&(this._datasourcePost=i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"Post",get:function(){return this._datasourcePost}}])}();zZt([gh(NJt),If()],HZt.prototype,"aiWritingDatasourceProvider",2),HZt=zZt([Gf()],HZt);var WZt=Object.defineProperty,UZt=Object.getOwnPropertyDescriptor,GZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?UZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&WZt(t,n,o),o},YZt=function(){return ls((function e(){us(this,e)}),[{key:"handlePost",value:function(e){return this._aiWritingDatasourceRegistry.Post(e)}}])}();GZt([Yf(HZt)],YZt.prototype,"_aiWritingDatasourceRegistry",2),YZt=GZt([Gf({token:LJt})],YZt);var $Zt=Object.defineProperty,qZt=Object.getOwnPropertyDescriptor,KZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?qZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$Zt(t,n,o),o},XZt=function(){return ls((function e(){us(this,e),this._onAiWritingStatusChange=new dS,this.onAiWritingStatusChange=this._onAiWritingStatusChange.event,this.queueTask=null,this.taskListener=null,this.isGenerating=!1,this.generateFieldId=null}),[{key:"init",value:function(){this.queueTask=this._taskService.createQueueTask({name:"智能填写任务队列",parallel:3})}},{key:"clearTask",value:function(){var e,t;null==(e=this.queueTask)||e.destroy(),null==(t=this.taskListener)||t.destroy()}},{key:"listenEvent",value:function(){var e,t=this;this.clearTask(),this.taskListener=null==(e=this.queueTask)?void 0:e.onDidStatusChange((function(e){var n,r;e.status!==_T.WAITING||(null==(n=t.queueTask)?void 0:n.hasPenddingJob())||(null==(r=t.queueTask)?void 0:r.hasRuningJob())||(t.isGenerating=!1,t._onAiWritingStatusChange.emit({isGenerating:t.isGenerating,fieldId:t.generateFieldId,type:"auto"}),t.generateFieldId=null,Pn.a.success(wx("已重新填写")))}))}},{key:"destroy",value:function(){this.clearTask(),this.queueTask=null}},{key:"emitStartAiWritingTask",value:function(e){this.listenEvent(),this.isGenerating=!0,this.generateFieldId=e,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:this.generateFieldId,type:"manual"})}},{key:"emitStopAiWritingTask",value:function(e){this.clearTask(),this.isGenerating=!1,this.generateFieldId=null,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:e,type:"manual"})}},{key:"isFieldGenerating",value:function(e){return this.isGenerating&&e===this.generateFieldId}}])}();KZt([Yf(TT)],XZt.prototype,"_taskService",2),KZt([jf()],XZt.prototype,"init",1),KZt([Df()],XZt.prototype,"destroy",1),XZt=KZt([Gf({token:FJt})],XZt);var JZt=Object.defineProperty,ZZt=Object.getOwnPropertyDescriptor,QZt=function(e,t,n,r){for(var i,o=r>1?void 0:r?ZZt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&JZt(t,n,o),o},eQt=function(){return ls((function e(){us(this,e),this._listener=null}),[{key:"isAiWritingEnable",get:function(){return!!this._configurationService.getValue("aiWriting.enable")}},{key:"init",value:function(){var e=this;this.commandService.registerCommand(SZt.commandName,SZt),this.commandService.registerCommand(IZt.commandName,IZt),this.commandService.registerCommand(RZt.commandName,RZt),this.aiWritingDatasourceRegistry.init(),this.isAiWritingEnable&&(this._listener=this.commandService.onDidExecuteCommand(function(){var t=rs(ps.mark((function t(n){var r,i,o,a,l;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("updateField"!==(r=n.context).commandName){t.next=8;break}if(i=r.argArray[0],o=i.field,a=i.newFieldProperty,l=o.get("uuid"),a.type===xO.TEXT){t.next=8;break}return t.next=8,e.commandService.execCommand("updateAiWritingOpen",{fieldId:l,open:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"destroy",value:function(){var e,t;null==(e=this._listener)||e.destroy(),null==(t=this.aiWritingService)||t.destroy()}},{key:"registerModel",value:function(){return FZt}},{key:"registerProcessTableMiddleware",value:function(){return function(e,t){var n=e.sheet.columns;if(n&&n.length>0){var r=n.map((function(e){return{uuid:Cx(32),field_uuid:e.uuid||e.id,open:e.enableAI||!1,type:e.aiWritingType||DJt.SUMMARY,prompt:e.aiPrompt||"",auto:e.enableAutoAIGC||!1}}));t.setData("ai_writing",r)}return e}}}],[{key:"pluginModule",value:function(){return ch().contribution(NJt).register(HZt).register(YZt).register($Jt).register(XZt).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{disable:{type:"boolean"}}}),e.registerDefaultValue({"aiWriting.disable":!0})}}])}();function tQt(e,t,n){return t=Ch(t),kh(e,nQt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function nQt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nQt=function(){return!!e})()}eQt.pluginName="kernel-ai-writing",QZt([Yf(Lj)],eQt.prototype,"commandService",2),QZt([Yf(HZt)],eQt.prototype,"aiWritingDatasourceRegistry",2),QZt([Yf($Jt)],eQt.prototype,"aiWritingService",2),QZt([Yf(RC)],eQt.prototype,"_configurationService",2),eQt=QZt([Gf({contrib:[mj,nE,RD]})],eQt);var rQt=function(e){function t(){return us(this,t),tQt(this,t,arguments)}return Oh(t,e),ls(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.modelService.getModel("content").upsert({target_uuid:e.recordId,target_type:"record"},{format:e.content.format,html:e.content.html,source:e.content.source,target_uuid:e.recordId,target_type:"record",status:1}),this.updateRecord(e.recordId),!0}},{key:"updateRecord",value:function(e){var t;this.modelService.getModel("record").update({uuid:e},{updated_at:+new Date}),this.modelService.getModel("record").update({uuid:e},{modifier_id:null==(t=this.context.user)?void 0:t.uid})}}])}(Ij);function iQt(e,t,n){return t=Ch(t),kh(e,oQt()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function oQt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oQt=function(){return!!e})()}rQt.commandName="updateContent";var aQt=Object.defineProperty,lQt=function(e,t,n,r){for(var i,o=void 0,a=e.length-1;a>=0;a--)(i=e[a])&&(o=i(t,n,o)||o);return o&&aQt(t,n,o),o},uQt=function(e){function t(){return us(this,t),iQt(this,t,arguments)}return Oh(t,e),ls(t)}(BE);function cQt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sQt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sQt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function sQt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}uQt.table="content",uQt.indexes=["target_type","target_uuid"],lQt([oE()],uQt.prototype,"target_uuid"),lQt([oE()],uQt.prototype,"target_type"),lQt([oE()],uQt.prototype,"format"),lQt([oE()],uQt.prototype,"html"),lQt([oE()],uQt.prototype,"source"),lQt([oE()],uQt.prototype,"status");var dQt=Object.defineProperty,fQt=Object.getOwnPropertyDescriptor,hQt=function(e,t,n,r){for(var i,o=r>1?void 0:r?fQt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&dQt(t,n,o),o},pQt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){var e,t,n,r=cQt(this.contentDatasourceProvider.getContributions());try{for(r.s();!(n=r.n()).done;){var i=n.value,o=null==(e=i.registerContentDatasourceGet)?void 0:e.call(i);o&&(this._datasourceGet=o);var a=null==(t=i.registerContentDatasourcePut)?void 0:t.call(i);a&&(this._datasourcePut=a)}}catch(e){r.e(e)}finally{r.f()}}},{key:"Get",get:function(){return this._datasourceGet}},{key:"Put",get:function(){return this._datasourcePut}}])}();hQt([gh(gKt),If()],pQt.prototype,"contentDatasourceProvider",2),pQt=hQt([Gf()],pQt);var vQt=Object.defineProperty,gQt=Object.getOwnPropertyDescriptor,mQt=function(e,t,n,r){for(var i,o=r>1?void 0:r?gQt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&vQt(t,n,o),o},yQt=function(){return ls((function e(){us(this,e)}),[{key:"getContent",value:function(e,t){return this._modelService.getModel("content").findOne({target_uuid:e,target_type:t})}},{key:"setContentWithSlient",value:function(e,t,n){this._modelService.getModel("content").upsert({target_uuid:e,target_type:t},{format:n.format,html:n.html,source:n.source,target_uuid:e,target_type:t,status:0},{slient:!0})}}])}();mQt([Yf(LE)],yQt.prototype,"_modelService",2),yQt=mQt([Gf({token:yKt})],yQt);var bQt=Object.defineProperty,wQt=Object.getOwnPropertyDescriptor,_Qt=function(e,t,n,r){for(var i,o=r>1?void 0:r?wQt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&bQt(t,n,o),o},xQt=function(){return ls((function e(){us(this,e)}),[{key:"handleGet",value:function(e,t){return this._contentDatasourceRegistry.Get(e,t)}},{key:"handlePut",value:function(e,t,n){return this._contentDatasourceRegistry.Put(e,t,n)}}])}();function kQt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return CQt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CQt(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function CQt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}_Qt([Yf(pQt)],xQt.prototype,"_contentDatasourceRegistry",2),xQt=_Qt([Gf({token:mKt})],xQt);var SQt=Object.defineProperty,OQt=Object.getOwnPropertyDescriptor,EQt=function(e,t,n,r){for(var i,o=r>1?void 0:r?OQt(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&SQt(t,n,o),o},IQt=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(rQt.commandName,rQt),this.contentDatasourceRegistry.init()}},{key:"registerModel",value:function(){return uQt}},{key:"registerProcessTableMiddleware",value:function(){var e=this;return function(t){var n=t.contents;if(n){var r,i=kQt(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.content&&e.contentService.setContentWithSlient(o.recordId,"record",o.content)}}catch(e){i.e(e)}finally{i.f()}}return t}}}],[{key:"pluginModule",value:function(){return ch().contribution(gKt).register(pQt).register(xQt).register(yQt).register(this)}}])}();IQt.pluginName="kernel-content",EQt([Yf(Lj)],IQt.prototype,"commandService",2),EQt([Yf(pQt)],IQt.prototype,"contentDatasourceRegistry",2),EQt([Yf(yQt)],IQt.prototype,"contentService",2);var PQt=[MJt,xZt,eQt,IQt=EQt([Gf({contrib:[mj,nE,RD]})],IQt)],MQt=function(e){var t=e.docId,n=e.docType,r=e.webSdk;return{token:gKt,useValue:{registerContentDatasourceGet:function(){var e=function(){var e=rs(ps.mark((function e(i,o){var a,l,u,c,s,d,f,h,p;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={docId:t,docType:n,sheetId:o},!Array.isArray(i)){e.next=10;break}return s.recordIds=i,e.next=5,null==(l=(a=r.TableRecordController).getContent)?void 0:l.call(a,s);case 5:return d=e.sent,f=d.content,e.abrupt("return",f);case 10:return s.recordId=i,e.next=13,null==(c=(u=r.TableRecordController).getContent)?void 0:c.call(u,s);case 13:return h=e.sent,(p=h.content)||(p={format:"lake",html:"",source:""}),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return e},registerContentDatasourcePut:function(){var e=function(){var e=rs(ps.mark((function e(i,o,a){var l;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={docId:t,docType:n,sheetId:o,recordId:i,content:a},e.next=3,r.TableRecordController.putContent(l);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return e}}}};function RQt(e,t){if(void 0===e)return"";var n=""+e,r="",i=n.indexOf(".")>=0;if("-"===n[0]&&(n=n.substr(1),r="-"),n.length>=t)return r+n;for(var o=t-n.length;o--;)n=i?n+"0":"0"+n;return r+n}var AQt="1899-12-30",jQt="YYYY-MM-DD";function DQt(e){return a.a.utc(e)}DQt(AQt);var TQt=[/^([1-9]\d{3,4})(.{1})(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,/^(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(.{1})([1-9]\d{3,4})$/],FQt=/^(20|21|22|23|[0-1]\d):[0-5]\d$/,NQt=/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,LQt=/^([A-Za-z]{3,8})\s(0?[1-9]|[1-2][0-9]|3[0-1]),(([1-9]\d{3,4}))$/,BQt={zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],zhNum:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],enShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},VQt={mmdd:/^(0?[1-9]|1[0-2])(\-|\/|月)(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,ddmm:/^(0?[1-9]|[1-2][0-9]|3[0-1])(\-|\/)(0?[1-9]|1[0-2])$/,yymm:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])$/,yymmdd:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])(\-|\/)(0?[1-9]|[1-2][0-9]|3[0-1])$/,yyyymm:/^([1-9]\d{3,4})(\-|\/|年)(0?[1-9]|1[0-2])(月?)$/};function zQt(e){var t=function(e){var t,n,r,i="";if(function(e){return NQt.test(e)||FQt.test(e)}(e))return function(e){return a()("".concat(AQt," ").concat(e)).diff(DQt(AQt),"seconds")}(e);var o=e.match(/ (20|21|22|23|[0-1]\d):[0-5]\d(:([0-5]\d))?$/);o&&(i=o[0],e=e.slice(0,-i.length));o=e.match(TQt[0]),o?(t=o[1],n=o[3],r=o[5]):(o=e.match(TQt[1]))?(t=o[5],n=o[1],r=o[3]):(o=e.match(LQt))&&(t=o[3],n=0===(n=BQt.en.indexOf(o[1])+1)?NaN:n,r=o[2]);if(isNaN(t)||isNaN(n)||isNaN(r))return function(e){if(!e)return!1;var t,n,r,i="sheet-en";for(var o in VQt){var a=e.match(VQt[o]);if(a){t=o,n=a[2];break}}if(!t||["年","月","-","/"].indexOf(n)<0)return!1;switch(t){case"mmdd":"月"===n?(i="sheet-cn",r="M月D日"):r="MM/DD";break;case"ddmm":r="MM/DD";break;case"yymm":r="YYYY-MM";break;case"yymmdd":r="YYYY".concat(n,"MM").concat(n,"DD");break;case"yyyymm":"年"===n?(r="YYYY年M月",i="sheet-cn"):r="YYYY-MM"}return{name:"date",formatter:r,lang:i}}(e+=i)?function(e){var t=a()(),n=1*+t.format("YY"),r=t.format("YYYY");for(var i in VQt){var o=e.match(VQt[i]);if(o){var l="";switch(i){case"yymm":l=(1*o[1]>n?"19":"20")+RQt(o[1],2)+"-"+RQt(o[3],2)+"-01";break;case"yyyymm":l=o[1]+"-"+RQt(o[3],2)+"-01";break;case"mmdd":l=r+"-"+RQt(o[1],2)+"-"+RQt(o[3],2);break;case"ddmm":l=r+"-"+RQt(o[3],2)+"-"+RQt(o[1],2);break;case"yymmdd":l=(1*o[1]>n?"19":"20")+o[1]+"-"+RQt(o[3],2)+"-"+RQt(o[5],2);break;default:l=e}return DQt(l).diff(DQt(AQt),"seconds")}}return 0}(e):e;return GQt("".concat(t,"-").concat(RQt(n,2),"-").concat(RQt(r,2)).concat(i))}(e);return isNaN(t)?"":{seconds:t,text:HQt({seconds:t})}}function HQt(e){var t=DQt(AQt).add(e.seconds,"seconds");return"Invalid date"!==t.toString()?(e.text=t.format(jQt),e.text):(e.text="","")}function WQt(e){var t=a()(e.time);return"Invalid date"!==t.toString()?(e.text=t.format("YYYY-MM-DD HH:mm:ss"),e.text):(e.text="","")}function UQt(e){e>=31708800&&(e+=a()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1);return a()(AQt).add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}function GQt(e){return DQt(e).diff(DQt(AQt),"seconds")}var YQt=function(){return ls((function e(){us(this,e)}),[{key:"toFieldModel",value:function(e,t){var n=e.type,r=e.options;return n===xO.TEXTAREA||n===xO.INPUT||n===xO.TEXT?this.toTextareaModel(t):n===xO.CHECKBOX?this.toCheckboxModel(t):n===xO.DATE?this.toDate(t):n===xO.EMAIL?this.toEmailModel(t):n===xO.FILE?this.toFileModel(t):n===xO.IMAGE?this.toImageModel(t):n===xO.LINK?this.toLinkModel(t):n===xO.MENTION?this.toMentionModel(t):n===xO.SELECT?this.toSelectModel(t,r):n===xO.MULTI_SELECT?this.toMultiSelectModel(t,r):n===xO.NUMBER?this.toNumberModel(t):n===xO.PHONE?this.toPhoneModel(t):t}},{key:"toTextareaModel",value:function(e){return e?"boolean"==typeof e?"":Array.isArray(e)?e.map((function(e){return e?e.name?e.name:e:""})).join(","):e.seconds?HQt(e):e.time?WQt(e):e.name?e.name:e+"":""}},{key:"toCheckboxModel",value:function(e){return!(!e||!["1","true","是","yes","✅"].includes(String(e).toLowerCase()))}},{key:"toDate",value:function(e){if(!e)return"";if("boolean"==typeof e)return"";if(Array.isArray(e)&&(e=e[0]),void 0!==e.time||void 0!==e.seconds){var t={seconds:e.seconds||GQt(e.time),time:e.time||UQt(e.seconds)};return t.text=HQt(t),"Invalid Date"===t.text?"":t}return isNaN(e)?"string"==typeof e&&-1!==e.indexOf("\n")?"":(e.name&&(e=e.name),zQt(e)):""}},{key:"toEmailModel",value:function(e){return e?"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),"string"!=typeof e?"":e=e.replace(/\n/g,"")):""}},{key:"toFileModel",value:function(e){if(!e)return[];Array.isArray(e)||(e=[e]);return e.map((function(e){return"error"===(t=e).status||"progress"===t.status?t:void 0===t.src?"":t.uid?(t.fileKey=Ln.FileUtils.getFileKey(t.src),t.fileKey?(t.name||(t.name=t.src),t.src=jk(t.src),t):""):"";var t}))}},{key:"toImageModel",value:function(e){if(!e)return[];Array.isArray(e)||(e=[e]);var t=function(e){return e?(e.login&&(e.src=e.avatar_url),"error"===e.status||"progress"===e.status?e:void 0!==e.src&&function(e){try{var t=new URL(e);return Ln.FileUtils.isImage(t.origin+t.pathname)}catch(e){return!1}}(e.src)?(e.name||(e.name=e.src),e.src=jk(e.src),e):""):""};return e.map((function(e){return t(e)}))}},{key:"toLinkModel",value:function(e){if(!e||e.seconds||e.time)return"";if("boolean"==typeof e)return"";if(e.src)return e.src=String(jk(e.src)),e.name=String(e.name)||"",e;if(Array.isArray(e)&&!(e=e[0]))return"";if(e.login)return{name:e.name,src:"/".concat(e.login)};e.name&&(e=e.name);var t=jk(e=(e=String(e)).replace(/\n/gi,""));return jx(e)&&(t="mailto:"+e),t?{src:t,name:e}:{name:e,src:"http://"+e}}},{key:"toMentionModel",value:function(e){var t,n;return Array.isArray(e)&&0!==e.length&&(null==(t=e[0])?void 0:t.login)&&(null==(n=e[0])?void 0:n.name)?e.map((function(e){return e.work_id&&!e.avatar_url&&(e.avatar_url="/__workers/r/avatar_buc/".concat(e.work_id)),e})):""}},{key:"toSelectModel",value:function(e,t){if(!e)return"";var n=e;if(Array.isArray(e))n=e[0];else if(void 0!==e.seconds)n=e.text||HQt(e);else if(void 0!==e.time)n=e.text||WQt(e);else{if(e&&"boolean"==typeof e)return"";isNaN(e)||(n=e+"")}if(!n)return"";n.name&&(n=n.name);var r=t.find((function(e){return e.uuid===n||e.name===n}));return r?[r.uuid]:null}},{key:"toMultiSelectModel",value:function(e,t){if(!e)return"";var n=e;if(Array.isArray(e)){var r=[];return e.forEach((function(e){if(e){e=e.name||e;var n=t.find((function(t){return t.uuid===e||t.name===e}));n&&r.push(n.uuid)}})),0!==r.length?r:""}if(void 0!==e.seconds)n=e.text||HQt(e);else if(void 0!==e.time)n=e.text||WQt(e);else{if("boolean"==typeof e)return"";isNaN(e)||(n=e+"")}e.name&&(n=e.name);var i=t.find((function(e){return e.uuid===n||e.name===n}));return i?[i.uuid]:null}},{key:"toNumberModel",value:function(e){return e?"boolean"==typeof e?Dk(e?"1":"0"):Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),Dk(e)):""}},{key:"toPhoneModel",value:function(e){return e?"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),"string"!=typeof e&&"number"!=typeof e?"":e=(e=String(e)).replace(/\n/g,"")):""}}])}(),$Qt={token:RD,useValue:{registerProcess:function(){var e=new YQt;return{processFieldModel:function(t,n){return e.toFieldModel(t,n)}}}}},qQt=function(e){var t=e.docId,n=e.docType,r=e.webSdk,i=void 0===r?{}:r,o=e.webProxy;return{token:RJt,useValue:{registerServer:function(){return i.TableShareController={update:function(e){return rs(ps.mark((function t(){return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.shares.update(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},{apiSdk:i,processParams:function(e){return e.docId=t,e.docType=n,e}}}}}},KQt=function(e){var t=e.docId,n=e.docType,r=e.webProxy,i=e.currentUser;return{token:yj,useValue:{registerUser:function(){return{searchUser:function(e){return rs(ps.mark((function i(){var o,a;return ps.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o={optional_properties:"profile",q:e},t&&n&&!NKt.isOfficialTemplate&&(o.target_id=t,o.target_type=n),i.next=4,r.users.complete({q:e});case 4:return a=i.sent,i.abrupt("return",a.map((function(e){var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar||e.avatar_url||e.icon,work_id:e.work_id}})));case 6:case"end":return i.stop()}}),i)})))()},contextUsers:function(){var e=this;return rs(ps.mark((function i(){var o,a,l;return ps.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("Doc"===n){i.next=2;break}return i.abrupt("return",[]);case 2:if(o=[],!(null==(a=jKt("doc").abilities)?void 0:a.update)){i.next=8;break}return i.next=7,r.users.listDocContextUsers({id:t});case 7:o=i.sent;case 8:return(l=e.getCurrentUser())&&o.push(l),o=Object(In.uniqBy)(o.map((function(e){var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar_url||e.icon,work_id:e.work_id}})),"uid"),i.abrupt("return",o);case 12:case"end":return i.stop()}}),i)})))()},getCurrentUser:function(){return i?{uid:i.uid||String(i.id),work_id:i.work_id,login:i.login,name:i.name,icon:i.icon||i.avatar_url}:NKt.me?{uid:String(NKt.me.id),work_id:NKt.me.work_id,login:NKt.me.login,name:NKt.me.name,icon:NKt.me.avatar_url}:null}}}}}};function XQt(e,t){return JQt.apply(this,arguments)}function JQt(){return JQt=rs(ps.mark((function e(t,n){var r,i=arguments;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},"/api/ai/table/completion",e.abrupt("return",t.post("/api/ai/table/completion",n,r));case 3:case"end":return e.stop()}}),e)}))),JQt.apply(this,arguments)}var ZQt=function(e){var t=e.docId,n=e.webSdk;return{token:NJt,useValue:{registerAiWritingDatasourcePost:function(){var e=function(){var e=rs(ps.mark((function e(r){var i,o;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.content,o=r.type,e.next=3,XQt(n.req,{content:i,type:o,context_id:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e}}}},QQt=function(e){var t=e.docType,n=e.webProxy;return{token:nrt,useValue:{registerForm:function(){return{getForm:function(e){return rs(ps.mark((function r(){var i;return ps.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("Doclet"!==t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.shares.findOne({target_id:e,target_type:"Skythings.View",type:"form"});case 4:if((i=r.sent)&&i.token){r.next=7;break}return r.abrupt("return");case 7:return r.abrupt("return",{src:"/forms/share/".concat(i.token),status:i.status});case 8:case"end":return r.stop()}}),r)})))()}}}}}},e0t=function(e){var t=e.webProxy;return{token:NT,useValue:{registerLinkDetail:function(){return{getLinkDetail:function(e){return rs(ps.mark((function n(){var r,i;return ps.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:return n.prev=2,n.next=5,null==(i=null==(r=t.editor)?void 0:r.linkDetail)?void 0:i.call(r,{url:jk(e)},{ignoreGlobalMessage:!0});case 5:return n.abrupt("return",n.sent);case 8:return n.prev=8,n.t0=n.catch(2),console.error(n.t0),n.abrupt("return",{url:e,title:e});case 12:case"end":return n.stop()}}),n,null,[[2,8]])})))()}}}}}},t0t=function(e){var t=e.docId,n=e.docType,r=e.webSdk,i=e.webProxy,o=e.currentUser;return[$Qt,qQt({docId:t,docType:n,webSdk:r,webProxy:i}),KQt({docId:t,docType:n,webProxy:i,currentUser:o}),QQt({docId:t,docType:n,webProxy:i}),e0t({webProxy:i}),MQt({docId:t,docType:n,webSdk:r}),ZQt({docId:t,webSdk:r})]},n0t="ctoken",r0t="yuque_ctoken",i0t=Array.isArray;function o0t(e,t,n,r){var i,o,a,l=/\[\]$/;if(i0t(t))for(o=0;t&&o<t.length;o++)a=t[o],n||l.test(e)?r(e,a):o0t(e+"["+("object"===lr(a)?o:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(i in t)t.hasOwnProperty(i)&&o0t(e+"["+i+"]",t[i],n,r);else r(e,t)}function a0t(e,t){return e+(/\?/.test(e)?"&":"?")+t}function l0t(e,t){var n,r,i=t||!1,o=[],a=encodeURIComponent;function l(e,t){var n=t;"function"==typeof t?n=t():null==t&&(n=""),o[o.length]=a(e)+"="+a(n)}if(i0t(e))for(r=0;e&&r<e.length;r++)l(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&o0t(n,e[n],i,l);return o.join("&").replace(/%20/g,"+")}function u0t(e){return"undefined"!=typeof FormData&&e instanceof FormData}function c0t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s0t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c0t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c0t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d0t=window,f0t=/^http/,h0t=/(^\w+):\/\//,p0t=/^20\d$/,v0t="readyState",g0t="Content-Type",m0t="X-Requested-With";function y0t(){}var b0t={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}};function w0t(e,t,n){return function(){return e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request[v0t]&&(e.request.onreadystatechange=y0t,!function(e){var t=h0t.exec(e.url),n="";return t&&(n=t[1]),n||(n=(e.o.context||d0t).location.protocol),f0t.test(n)?p0t.test(e.request.status):!!e.request.response}(e)?n(e.request.statusText,e.request):t(e.request)))}}function _0t(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),i="string"==typeof n?n:n.url,o=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!u0t(n.data)?l0t(n.data,n.traditional||b0t.traditional):n.data||null;"jsonp"!==n.type&&"GET"!==r||!o||(i=a0t(i,o),o=null);var a=n.xhr&&n.xhr(n)||function(e){var t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return a.open(r,i,!1!==n.async),function(e,t){var n,r=t.headers||{};for(n in r.Accept=r.Accept||b0t.accept[t.type]||b0t.accept["*"],t.crossOrigin||r[m0t]||(r[m0t]=b0t.requestedWith),r[g0t]||u0t(t.data)||(r[g0t]=t.contentType||b0t.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}(a,n),function(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}(a,n),a.onreadystatechange=w0t(this,e,t),n.before&&n.before(a),a.send(o),a}function x0t(){this.initPromise()}function k0t(){return new x0t}function C0t(e){var t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=_0t.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}function S0t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O0t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S0t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S0t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}x0t.prototype={triggerSuccess:function(e){var t=this.o,n=t.type,r=(t.dataFilter||b0t.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}(e.getResponseHeader("Content-Type"))),e="jsonp"!==n?this.request:e,r)switch(n){case"json":try{e=d0t.JSON.parse(r)}catch(t){return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError:function(e,t){var n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete:function(e){var t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise:function(){var e=this;e.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n}))},abort:function(){this._aborted=!0,this.request.abort()},retry:function(){this.initPromise(),C0t.call(this,this.o)},then:function(e,t){return this.promise.then(e,t)},always:function(e){return this.promise.then(e,e)},fail:function(e){return this.promise.then(void 0,e)},catch:function(e){return this.fail(e)},setup:function(e){this.o=s0t(s0t({},b0t),e)},start:function(e){this.setup(e),C0t.call(this,this.o)}},k0t.ajaxSetup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)e.hasOwnProperty(t)&&b0t.hasOwnProperty(t)&&(b0t[t]=e[t])};var E0t="_ts",I0t="_input_charset",P0t="utf-8",M0t={withCToken:!0,withInputCharset:!0,cache:!0};function R0t(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=O0t(O0t({},M0t),e),i=M0t.cache||"post"===r.method,o=function(e){for(var t=e.document.cookie.split(/;\s/g),n=0,r=t.length;n<r;n++){var i=t[n].match(/([^=]+)=/i);if(i&&i[1]===r0t)return t[n].substring(i[1].length+1)}}(n),a=r.withCToken,l=r.withInputCharset;return r.data=r.data||{},Array.isArray(r.data)?(t=[],a&&o&&t.push({name:n0t,value:encodeURIComponent(o)}),l&&t.push({name:I0t,value:P0t}),i||t.push({name:E0t,value:Date.now()}),r.data=r.data.concat(t)):"string"==typeof r.data?(l&&-1===r.data.indexOf(I0t)&&(r.data+="&"+I0t+"="+P0t),a&&o&&-1===r.data.indexOf(n0t)&&(r.data+="&"+n0t+"="+encodeURIComponent(o)),i||(r.data+="&"+E0t+"="+Date.now())):u0t(r.data)?(l&&!r.data.get(I0t)&&r.data.append(I0t,P0t),r.url&&a&&o&&(r.url=a0t(r.url,l0t(os({},n0t,o))))):(l&&(r.data[I0t]=P0t),i||(r.data[E0t]=Date.now()),a&&o&&!r.data[n0t]&&(r.data[n0t]=o)),r}function A0t(e,t){var n;e=(n="string"==typeof e?{url:e,success:t}:e).url;var r=k0t();return e.startsWith("//")&&(e=location.protocol+e),function(e){return!/^https?:\/\/\w+\.alipayobjects\.com\//g.test(e)}(e)&&(n=R0t(n)),r.start(n),r}function j0t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D0t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j0t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j0t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}A0t.ajaxSetup=function(e){for(var t in e)e.hasOwnProperty(t)&&M0t.hasOwnProperty(t)&&(M0t[t]=e[t]);k0t.ajaxSetup(e)},A0t.ajaxSetup({withInputCharset:!1});var T0t=function(){return ls((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};us(this,e),this.options=D0t({ajaxOptions:{progress:function(){},error:function(){},success:function(){},data:{},method:"post",url:""}},t)}),[{key:"ajax",value:function(e){var t=(e=D0t(D0t({},this.options.ajaxOptions),e)).success,n=e.error;if(!e.url)return!!n&&n(new Error("request options.url missing"));e.url=function(e){var t,n,r,i;if(e.startsWith("http"))return e;var o=(null==(n=null==(t=globalThis.nebulaMobileApp)?void 0:t.envInfo)?void 0:n.origin)||(null==(i=null==(r=globalThis.yqWebApp)?void 0:r.globalServiceEnv)?void 0:i.host);return o?"".concat(o).concat(e):e}(e.url);var r=new Promise((function(r){e.success=function(e){t(e),r(e)},e.error=function(e){n(e),r(e)}}));return{xhr:A0t(e),promise:r}}}])}(),F0t=new T0t,N0t=function(e){if(globalThis.__ajaxProxy){var t=globalThis.__ajaxProxy(e);if(t)return t}return F0t.ajax(e)},L0t=Object.defineProperty,B0t=Object.getOwnPropertyDescriptor,V0t=function(e,t,n,r){for(var i,o=r>1?void 0:r?B0t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&L0t(t,n,o),o},z0t=function(){return ls((function e(){us(this,e)}),[{key:"getConfig",value:function(e){return this._configuration.getValue("upload.".concat(e))}},{key:"tryQuickUpload",value:(n=rs(ps.mark((function e(t,n){var r,i,o,a,l,u,c;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=this.getConfig(n)).quickUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Object(Ln.fileMd5)(t);case 5:return i=e.sent,o=t.size,a=t.name,l=t.type,c=N0t({xhr:function(){return new window.XMLHttpRequest},url:r.quickUrl,data:{md5:i,filesize:o,filename:a,filetype:l,type:n},dataType:"json",success:function(e){e&&!1===e.data.success||(u=e)},error:function(e){console.error(e)},method:"POST",processData:!0}),e.next=12,c.xhr.promise;case 12:if(u&&!1!==u.success){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"uploadFile",value:(t=rs(ps.mark((function e(t,n,r){var i,o,a;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.getConfig(n),(o=new FormData).append("file",t,t.name),a=(i.url||"").replace(/ctoken=[^&]+&/,""),N0t({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r({id:t.uid,status:"running",file:t,percent:parseInt(String(e.loaded/e.total*100),10)})}),!1),e},url:a,data:o,dataType:"json",success:function(e){var n=e.data;n?(t.src=n.url,r({id:t.uid,status:"success",file:t})):r({id:t.uid,status:"error",message:wx("上传失败"),file:t})},error:function(e){var n="";if(e&&e.xhr&&e.xhr.response)try{n=JSON.parse(e.xhr.response).message||""}catch(e){n=""}else n=e.message;n||(n=wx("上传失败")),r({id:t.uid,status:"error",file:t,message:n})},method:"POST",processData:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"upload",value:(e=rs(ps.mark((function e(t,n,r){var i;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.tryQuickUpload(t,n);case 3:if(!(i=e.sent)){e.next=9;break}t.src=i.data.url,r({id:t.uid,status:"success",file:t}),e.next=11;break;case 9:return e.next=11,this.uploadFile(t,n,r);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.next=18,this.uploadFile(t,n,r);case 18:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(t,n,r){return e.apply(this,arguments)})}]);var e,t,n}();V0t([Yf(RC)],z0t.prototype,"_configuration",2),z0t=V0t([Gf()],z0t);var H0t=Object.defineProperty,W0t=Object.getOwnPropertyDescriptor,U0t=function(e,t,n,r){for(var i,o=r>1?void 0:r?W0t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&H0t(t,n,o),o},G0t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"registerUpload",value:function(){var e=this;return{upload:function(t,n,r){return e._uploadService.upload(t,n,r)},checkSize:function(e,t){try{if(window.__member_message_ref){var n=window.__member_message_ref.current.getMessageWithFile({filesize:e.size},t)||{},r=n.msg,i=n.alwaysOpen,o=n.level,a=n.callback;if(r)return a(Pn.a[o||"error"](r,i?0:void 0)),!1}}catch(e){return console.error(e),!1}return!0}}}}],[{key:"pluginModule",value:function(){return ch().register(z0t).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"upload",type:"object",properties:{image:{type:"object",properties:{url:{type:"string",description:"图片上传接口"},quickUrl:{type:"string",description:"图片秒传接口"}}},file:{type:"object",properties:{url:{type:"string",description:"文件上传接口"},quickUrl:{type:"string",description:"文件秒传接口"}}}}}),e.registerDefaultValue({"upload.image.url":"/api/upload/attach?&type=image","upload.image.quickUrl":"/api/upload/upload_by_digset?&type=image","upload.file.url":"/api/upload/attach?&type=attach","upload.file.quickUrl":"/api/upload/upload_by_digset?&type=attach"})}}])}();G0t.pluginName="render-upload",U0t([Yf(z0t)],G0t.prototype,"_uploadService",2),G0t=U0t([Gf({contrib:[Sze,uKe]})],G0t);var Y0t=function(e){var t=e.field,n=e.position,r=SWe($Jt),i=SWe(FJt),o=SWe(RC),a=null==r?void 0:r.getAiWritingConfig(t.get("uuid")),u=null==o?void 0:o.getValue("aiWriting.enable"),c=nY(Object(l.useState)((null==i?void 0:i.isFieldGenerating(t.get("uuid")))||!1),2),s=c[0],d=c[1],f=(null==a?void 0:a.open)&&u,h=function(){var e=rs(ps.mark((function e(){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==r?void 0:r.stopAiWriting(t.get("uuid"));case 2:Pn.a.success(wx("已停止填写"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useLayoutEffect)((function(){if(f&&"gridHeader"===n){var e=null==i?void 0:i.onAiWritingStatusChange((function(e){var n=e.isGenerating;e.fieldId===t.get("uuid")&&n?d(!0):d(!1)}));return function(){null==e||e.destroy()}}d(!1)}),[i,f,n,t.get("uuid")]),f?React.createElement(React.Fragment,null,React.createElement(wn.default,{className:"lakex-table-grid-header-ai-writing-icon",width:16,height:16}),s&&React.createElement(_n.default,{className:"lakex-table-ai-writing-loading-icon","data-no-dnd":"true",width:16,height:16,onClick:h})):null},$0t=Object.defineProperty,q0t=Object.getOwnPropertyDescriptor,K0t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"getTextFieldTagComponent",value:function(){return Y0t}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function X0t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J0t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X0t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X0t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}K0t.pluginName="render-ai-writing",K0t=function(e,t,n,r){for(var i,o=r>1?void 0:r?q0t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&$0t(t,n,o),o}([Gf({contrib:[Sze,nft]})],K0t);var Z0t=Object.defineProperty,Q0t=Object.getOwnPropertyDescriptor,e1t=function(e,t,n,r){for(var i,o=r>1?void 0:r?Q0t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Z0t(t,n,o),o},t1t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"registerCopyMiddleware",value:function(){var e=this;return function(t,n){if(e.selectionService.isRowSelection()){var r=e.selectionService.getRecordIds(t).map((function(t){var n=e.contentService.getContent(t,"record");return n?{target_uuid:n.get("target_uuid"),target_type:n.get("target_type"),format:n.get("format"),source:n.get("source"),html:n.get("html"),abstract:n.get("abstract")}:null}));return J0t(J0t({},n),{},{recordContents:r.filter((function(e){return!!e}))})}return n}}},{key:"registerPasteMiddleware",value:function(){var e=this;return function(t,n,r,i){if(n.recordContents&&n.recordContents.length>0){var o=n.recordContents,a=[].concat(ts(i),ts(r.reverse())),l=n.cells.map((function(e){return e[0].recordId}));o.map((function(t){var n=l.findIndex((function(e){return e===t.target_uuid})),r=a[n];r&&e.contentService.setContentWithSlient(r,t.target_type,{html:t.html,source:t.source,format:t.format})}))}}}},{key:"registerMatchMiddleware",value:function(){var e=this;return function(t,n,r,i){var o=i;if(r){var a=e.contentService.getContent(r,"record");if(a){var l=a.get("html"),u=new RegExp("<[^<>]+>","g");o+=l.replace(u,"")}}return o}}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();t1t.pluginName="render-content",e1t([Yf(yot)],t1t.prototype,"selectionService",2),e1t([Yf(yQt)],t1t.prototype,"contentService",2);var n1t=[G0t,K0t,t1t=e1t([Gf({contrib:[Sze,Tot,rgt]})],t1t)],r1t=!1,i1t=!1;function o1t(){if(r1t)return i1t;var e=document.createElement("canvas");return i1t=!(!e.getContext||!e.getContext("2d"))&&(bO.isChrome||bO.isFirefox||0===e.toDataURL("image/webp").indexOf("data:image/webp")),r1t=!0,i1t}var a1t=function(e,t,n){if(t&&t>16383)return e;if(n&&n>16383)return e;if(o1t()&&Ln.OssUtil.isURLInOSS(e)){var r=new URL(e);if(!r.pathname)return e;var i=r.pathname.toLowerCase(),o=i.substring(i.lastIndexOf("."));[".webp",".svg"].includes(o)||(e=Ln.OssUtil.addImageProcess(r,"format","webp"))}return e};var l1t={token:PKe,useValue:{registerImage:function(){return{getExts:function(){return Ln.FileUtils.EXTS.IMAGE_EXT_STR},tryGetWebp:a1t,getRenderUrl:function(e,t,n){return function(e,t,n){if(o1t())return a1t(e,t,n);var r=new URL(e);if(!r.pathname)return e;var i=r.pathname.toLowerCase(),o=i.substring(i.lastIndexOf("."));return[".heic",".heif"].includes(o)?Ln.OssUtil.addImageProcess(r,"format","png"):e}(e,t,n)},getThumbnailUrl:function(e,t,n,r){e=a1t(e,t,n);var i=t||r,o=Ln.DeviceUtil.getDevicePixelRatio();if(i<=parseInt(r)*Number(o))return e;var a=function(e,t,n){if(!(n.width&&n.originWidth&&n.originHeight&&t&&t.startsWith("http")))return null;if(n.originWidth>3e4||n.originHeight>3e4)return null;var r=parseInt(n.width,10);r>e&&(r=e),r*=Ln.DeviceUtil.getDevicePixelRatio();var i=t.toLowerCase();if(!Ln.OssUtil.isURLInOSS(i))return null;var o=r*(n.originHeight/n.originWidth);return r>0&&r*o<16777216&&r<4096&&o<4096&&r<n.originWidth&&!/^https?:\/\/\w+\.alipayobjects\.com\//i.test(i)&&!i.endsWith(".gif")&&!i.endsWith(".svg")?Ln.OssUtil.addImageProcess(t,"resize","w_".concat(r)):null}(r,e,{width:r,originWidth:i,originHeight:n});return a||e}}}}},u1t=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"];function c1t(e){return"string"==typeof e&&(e=e.trim()),function(e){if("string"!=typeof e)return!1;if((e=e.toLowerCase()).startsWith("data:text/html"))return!1;var t=e.split("#")[0];return!/\s/.test(t)&&(!!u1t.some((function(t){return e.startsWith(t)}))||!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0)}(e)?e:""}var s1t=function(e){var t=function(e,t){var n;return Ln.FileUtils.isOffice("a.".concat(e))?n="previewOffice":Ln.FileUtils.isMacOffice("a.".concat(e))&&(n="previewMacOffice"),!!n&&Ln.FileUtils.isSizeLimit(n,t)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=Ln.EXTS.MAC_OFFICE_EXT.concat(Ln.EXTS.OFFICE_EXT);return"svg"!==e&&!!(Ln.FileUtils.isImage(e)||Ln.FileUtils.isTextFile(e)||["mp3","wav"].indexOf(e)>=0||n.indexOf(e)>=0&&t||Ln.FileUtils.isMMap(e)&&t)},d1t=["https://lark-assets-dev-aliyun.oss-cn-hangzhou.aliyuncs.com/","https://lark-assets-test-aliyun.oss-cn-hangzhou.aliyuncs.com/","https://cdn.nlark.com/"];function f1t(e){if(!e)return null;for(var t in d1t)if(e.startsWith(d1t[t]))return e.replace(d1t[t],"");var n=e.replace(/^https?:\/\/[^/]+/,"");if(!n.startsWith("/attachments"))return null;var r=n.replace(/^\/attachments\//,"");return"/"===r.charAt(0)&&(r=r.substr(1)),r}function h1t(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=f1t(e);return i?(g1t(i)||m1t(i)||"pdf"===v1t(e)?t="".concat(n,"/office/").concat(i,"?from=").concat(encodeURIComponent(r)):"heic"===v1t(e)||"heif"===v1t(e)?(i=f1t(e=Ln.OssUtil.tryAddWebpFormat(e,o1t())),t="".concat(n,"/preview/").concat(i,"&from=").concat(encodeURIComponent(r))):t="".concat(n,"/preview/").concat(i,"?from=").concat(encodeURIComponent(r)),c1t(t)):c1t(e)}var p1t=Ln.FileUtils.getFileKey;Ln.FileUtils.getFileSize;var v1t=Ln.FileUtils.getFileExtname;Ln.FileUtils.isSizeLimit,Ln.FileUtils.isImage,Ln.FileUtils.isFile,Ln.FileUtils.isTextFile,Ln.FileUtils.isVideo;var g1t=Ln.FileUtils.isOffice,m1t=Ln.FileUtils.isMacOffice;function y1t(e,t){var n=v1t(e);return s1t(n,t)?h1t(e,NKt.origin):e}Ln.FileUtils.isPdf,Ln.FileUtils.isAudio,Ln.FileUtils.isPresentation,Ln.FileUtils.isSheet,Ln.FileUtils.isMMap,Ln.FileUtils.isCompressed;var b1t={token:tWe,useValue:{registerFile:function(){return{getExts:function(){return Ln.EXTS.FILE_EXT_STR},getFileKey:function(e){return p1t(e)},getPreviewUrl:function(e){return h1t(e,NKt.origin)},getPreviewOrDownloadUrl:y1t}}}},w1t=function(){return ls((function e(){us(this,e)}),null,[{key:"openExternalLink",value:function(e){if(!globalThis.openExternalLink)return window.open(e,"_blank","noopener,noreferrer");globalThis.openExternalLink(e,!0)}}])}(),_1t=function(){return ls((function e(t){us(this,e),this.openerName="file-previewer-opener",this.canPreview=function(e){return!0},"function"==typeof t&&(this.canPreview=t)}),[{key:"open",value:function(e,t){var n=Ln.FileUtils.getFileExtname(e);if(this.canPreview(n)){var r=Ln.FileUtils.getPreviewUrl(e);r&&w1t.openExternalLink(r)}else Pn.a.warning(u.a.createElement("span",{},[wx("当前文档中此文件类型不支持预览和下载"),u.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:Ln.disableExtLink,target:"_blank",onClick:function(e){e.preventDefault(),w1t.openExternalLink(Ln.disableExtLink)}},[u.a.createElement(xn.default)])]))}}])}(),x1t=function(){return ls((function e(){us(this,e),this.openerName="href-opener",this.apps=["phone"]}),[{key:"open",value:function(e){var t;null==(t=globalThis.YuqueDesktopJSBridge)||t.postMessage("window.openExternalLink",{targetUrl:e,isNewWindow:!1,isLocal:!0})}}])}(),k1t=function(){return ls((function e(){us(this,e),this.openerName="safe-redirect-opener",this.apps=["link:external"]}),[{key:"open",value:function(e){w1t.openExternalLink(e)}}])}(),C1t=function(){return ls((function e(){us(this,e),this.openerName="window-new-opener"}),[{key:"open",value:function(e){w1t.openExternalLink(e)}}])}(),S1t=function(){return ls((function e(){us(this,e),this.openerName="window-opener",this.apps=["email"]}),[{key:"open",value:function(e){var t;null==(t=globalThis.YuqueDesktopJSBridge)||t.postMessage("window.openExternalLink",{targetUrl:e,isNewWindow:!1,isLocal:!0})}}])}(),O1t=function(){return ls((function e(){us(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.list,i=n.index||0;r||(i=0,r=[{src:e,msrc:e,width:n.width,height:n.height}]),null==(t=globalThis.NativeBridges)||t.previewImage({images:r.map((function(e){return{url:e.src,thumbnailUrl:e.msrc||e.src,width:e.width,height:e.height}})),index:i})}}])}(),E1t=[new O1t],I1t=function(){return ls((function e(t){us(this,e),this.openerName="file-previewer-opener",this.apps=["file"],this.canPreview=function(e){return!0},"function"==typeof t&&(this.canPreview=t)}),[{key:"open",value:function(e,t){var n=Ln.FileUtils.getFileExtname(e);if(this.canPreview(n)){var r=y1t(e,t.size);r&&window.open(r,"_blank","noopener,noreferrer")}else Pn.a.warning(u.a.createElement("span",{},[wx("当前文档中此文件类型不支持预览和下载"),u.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:Ln.disableExtLink,target:"_blank",onClick:function(e){e.preventDefault(),window.open(Ln.disableExtLink,"_blank","noopener,noreferrer")}},[u.a.createElement(xn.default)])]))}}])}(),P1t=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};var M1t=function(){return ls((function e(){us(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.list,l=o.index||0;a||(l=0,a=[{src:e,width:o.width,height:o.height}]),t=a,n=l,r=Object(Bn.getImageBrowser)(),i=Array.isArray(t)?t.map((function(e){return P1t(e)})):[t].map((function(e){return P1t(e)})),r.open(i,n||0)}}])}(),R1t=function(e){return{token:fHe,useValue:{registerOpener:function(){var t=[new I1t(e.canFilePreview),new M1t];return NKt.isDesktop?[].concat(t,ts(function(e){return[new C1t,new k1t,new _1t(e.canFilePreview),new S1t,new x1t]}(e))):NKt.isYuqueMobileApp?[].concat(t,ts(E1t)):t}}}},A1t=function(e){var t=e["opener.filePreview.canPreview"];return[b1t,l1t,R1t({canFilePreview:t})]},j1t=Object.defineProperty,D1t=Object.getOwnPropertyDescriptor,T1t=function(e,t,n,r){for(var i,o=r>1?void 0:r?D1t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&j1t(t,n,o),o},F1t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"full-screen",icon:"Fullscreen",tooltip:wx("全屏"),visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===WO.FORM)&&t._fullScreenService.status!==_Kt.FULL_SCREEN},onClick:function(){t._fullScreenService.emitStatusChange()}})}}],[{key:"pluginModule",value:function(){return ch().register(this).register(SKt)}}])}();F1t.pluginName="workbench-full-screen",T1t([Yf(XA)],F1t.prototype,"_readService",2),T1t([Yf(SKt)],F1t.prototype,"_fullScreenService",2),F1t=T1t([Gf({contrib:[Z8e,i9e]})],F1t);var N1t=function(){var e=SWe(RKt),t=nY(Object(l.useState)(e.cardWidthMode),2),n=t[0],r=t[1],i=n===OKt.NORMAL;return Object(l.useEffect)((function(){var t=e.onModeUIChange((function(e){r(e)}));return function(){null==t||t.destroy()}}),[e]),u.a.createElement(Mn.a,{title:wx(i?"全宽":"标宽")},u.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){var t=n===OKt.NORMAL?OKt.CONTAIN:OKt.NORMAL;r(t),null==e||e.setWidthMode(t)},tabIndex:-1},u.a.createElement(X$e,{type:i?"FullWidth":"NormalWidth"})))},L1t=Object.defineProperty,B1t=Object.getOwnPropertyDescriptor,V1t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"registerToolbar",value:function(e){e.registerItem({id:"full-width",RenderComponent:N1t})}}],[{key:"pluginModule",value:function(){return ch().register(this).register(RKt)}}])}();V1t.pluginName="workbench-full-width",V1t=function(e,t,n,r){for(var i,o=r>1?void 0:r?B1t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&L1t(t,n,o),o}([Gf({contrib:[Z8e,i9e]})],V1t);var z1t=function(e){var t,n=e.originField,r=e.fieldType,i=e.onFieldSubmitConfirm,o=!n,a=n&&n.get("type")!==xO.TEXT,l=o?Cx(32):n.get("uuid"),u=SWe(z9e),c=SWe(RC),s=SWe(TJt).getAiWritingConfig(l),d=(null==s?void 0:s.open)||!1?null==(t=qJt.find((function(e){return e.uuid===(null==s?void 0:s.type)})))?void 0:t.name:wx("关闭"),f=!!c.getValue("aiWriting.enable");return r===xO.TEXT&&f?React.createElement(Rn.a,{className:"lakex-table-ai-writing-config"},React.createElement(Rn.a.Item,{className:"lakex-table-ai-writing-config-item",onClick:function(){var e=u.getModalProps("addOrUpdateField");null==u||u.open("ai-writing-config-modal",{initialState:{fieldId:l,isCreateNewCol:o,isChangedFieldType:a,onFieldSubmitConfirm:i},position:e.position}),null==u||u.close("addOrUpdateField")}},React.createElement(kn.default,{className:"tag",width:14,height:14}),wx("AI 智能填写"),React.createElement("div",{className:"right"},React.createElement("span",{className:"status"},d),React.createElement(X$e,{type:"ArrowRight",size:14})))):null},H1t=function(e){var t=e.initialState,n=t.fieldId,r=t.isCreateNewCol,i=t.isChangedFieldType,o=t.onFieldSubmitConfirm,a=nY(Object(l.useState)(!1),2),u=a[0],c=a[1],s=SWe(z9e),d=SWe(Lj),f=SWe(TJt),h=f.getAiWritingConfig(n),p=nY(Object(l.useState)((null==h?void 0:h.open)||!1),2),v=p[0],g=p[1],m=nY(Object(l.useState)((null==h?void 0:h.type)||DJt.SUMMARY),2),y=m[0],b=m[1],w=nY(Object(l.useState)((null==h?void 0:h.prompt)||""),2),_=w[0],x=w[1],k=Object(l.useMemo)((function(){return qJt.find((function(e){return e.uuid===y}))||qJt[0]}),[y]),C=Object(l.useCallback)((function(){var e=s.getModalProps("ai-writing-config-modal");null==s||s.open("addOrUpdateField",{initialState:{fieldId:n},position:e.position}),s.close("ai-writing-config-modal")}),[s]),S=Object(l.useCallback)((function(e){g(e),d.execCommand("updateAiWritingOpen",{fieldId:n,open:e})}),[d,n]),O=Object(l.useCallback)((function(e){b(e),d.execCommand("updateAiWritingType",{fieldId:n,type:e})}),[d,n,v]),E=Object(l.useCallback)((function(e){var t=e.target.value.trim();t.length>255?Pn.a.error(wx("规则最长支持255字符")):x(t)}),[]),I=Object(l.useCallback)(rs(ps.mark((function e(){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y===DJt.SUMMARY||_){e.next=3;break}return Pn.a.error(wx("规则不能为空")),e.abrupt("return");case 3:if(!r){e.next=8;break}return e.next=6,o(n);case 6:e.next=11;break;case 8:if(!i){e.next=11;break}return e.next=11,o();case 11:return e.next=13,d.execCommand("updateAiWritingPrompt",{fieldId:n,prompt:_});case 13:return c(!0),e.next=16,f.startAiWriting(n);case 16:null==s||s.close("ai-writing-config-modal"),Pn.a.success(wx("正在填写中..."));case 18:case"end":return e.stop()}}),e)}))),[s,d,n,y,_,r,i]),P=Object(l.useCallback)((function(){null==s||s.close("ai-writing-config-modal")}),[s]);return React.createElement("div",{className:F()("lakex-table-ai-writing-config-modal",{disabled:!v})},React.createElement("div",{className:"lakex-table-ai-writing-config-modal-header"},React.createElement("div",{className:"left",onClick:C},React.createElement(G.default,{className:"lakex-table-ai-writing-config-modal-back",width:16,height:16}),wx("智能填写"),React.createElement(wn.default,{className:"tag",width:16,height:16})),React.createElement("div",{className:"right"},React.createElement(An.a,{size:"small",checked:v,onChange:S}))),React.createElement("div",{className:"lakex-table-ai-writing-config-modal-content"},React.createElement("div",{className:"lakex-table-ai-writing-config-modal-type"},React.createElement("span",null,wx("内容规则：")),React.createElement(jn.a,{trigger:["click"],placement:"bottomRight",disabled:!v,overlay:React.createElement(Rn.a,{className:"lakex-table-ai-writing-config-menu",mode:"vertical",selectedKeys:["".concat(y)]},qJt.map((function(e,t){return React.createElement(Rn.a.Item,{key:t,onClick:function(){O(e.uuid)}},e.name,React.createElement(Cn.default,{width:16,height:16,style:{display:y===e.uuid?"inline":"none"}}))})))},React.createElement("span",{className:F()("lakex-table-ai-writing-config-modal-select",{disabled:!v})},k.name,React.createElement(H.default,{width:14,height:14,style:{marginLeft:"4px"}})))),y===DJt.SUMMARY?React.createElement(Dn.a.TextArea,{disabled:!0,defaultValue:"",autoSize:{minRows:1},placeholder:k.placeholder}):React.createElement(Dn.a.TextArea,{disabled:!v,defaultValue:"",value:_,autoSize:{minRows:3},placeholder:k.placeholder,onChange:E})),React.createElement("div",{className:"lakex-table-ai-writing-config-modal-footer"},React.createElement("div",{className:"lakex-table-ai-writing-config-buttons"},React.createElement(Tn.a,{className:"lakex-table-ai-writing-config-cancel",disabled:!v,onClick:P},wx("取消")),React.createElement(Tn.a,{className:"lakex-table-ai-writing-config-start",disabled:!v,onClick:I,type:"primary"},wx("开始自动填写"),u&&React.createElement(_n.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})))))},W1t=wx("重新填写"),U1t=hXe(W1t)+40,G1t=function(e){var t=e.initialState,n=t.fieldId,r=t.recordId,i=nY(Object(l.useState)(!1),2),o=i[0],a=i[1],u=SWe(TJt),c=Object(l.useCallback)(rs(ps.mark((function e(){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,u.startAiWriting(n,r);case 3:a(!1),Pn.a.success(wx("已重新填写"));case 5:case"end":return e.stop()}}),e)}))),[n,r]);return React.createElement("div",{style:{width:U1t},className:"lakex-table-aotufill-cell-modal",onClick:c},React.createElement(kn.default,{width:16,height:16,style:{marginRight:"6px"}}),W1t,o&&React.createElement(_n.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16}))},Y1t=function(e){var t=e.fieldType,n=e.fieldName,r=SWe(RC);return((null==r?void 0:r.getValue("aiWriting.enable"))||!1)&&t===xO.TEXT?React.createElement("span",null,n,React.createElement(wn.default,{className:"lakex-table-grid-header-ai-writing-icon",width:14,height:14})):React.createElement(React.Fragment,null,n)},$1t=function(e){var t=e.cell,n=e.field,r=e.children,i=SWe(RC),o=(null==i?void 0:i.getValue("aiWriting.enable"))||!1,a=SWe(TJt),u=a.getAiWritingConfig(n.get("uuid")),c=nY(Object(l.useState)(!1),2),s=c[0],d=c[1],f=Object(l.useCallback)(rs(ps.mark((function e(){return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,a.startAiWriting(t.fieldId,t.recordId);case 3:d(!1),Pn.a.success(wx("已重新填写"));case 5:case"end":return e.stop()}}),e)}))),[]);return o&&(null==u?void 0:u.open)?React.createElement(Fn.a,{overlayClassName:"lakex-table-expand-record-ai-writing-popover",content:React.createElement("div",{className:"content",onClick:f},React.createElement(kn.default,{width:16,height:16,style:{marginRight:"6px"}}),wx("重新填写"),s&&React.createElement(_n.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})),placement:"topRight",noArrow:!0,hideWhenInactive:!0},React.createElement("div",null,r)):React.createElement(React.Fragment,null,r)},q1t=Object.defineProperty,K1t=Object.getOwnPropertyDescriptor,X1t=function(e,t,n,r){for(var i,o=r>1?void 0:r?K1t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&q1t(t,n,o),o},J1t=function(){return ls((function e(){us(this,e),this._modalId="ai-writing-autofill-cell",this._toDestroyCollection=new KC}),[{key:"isGridView",get:function(){var e;return(null==(e=this._readService.getActiveView())?void 0:e.get("type"))===WO.GRID}},{key:"isReadonly",get:function(){return this._abilityService.isReadonly(Qj.TABLE)}},{key:"isAiWritingEnable",get:function(){return!!this._configurationService.getValue("aiWriting.enable")}},{key:"showAutofill",value:function(){var e;if(this.isGridView){var t=this._selectionService.hasSelection(),n=this._selectionService.isSelectOneCell(),r=this._selectionService.getFieldValue(),i=null==(e=this._aiWritingService.getAiWritingConfig((null==r?void 0:r.fieldId)||""))?void 0:e.open;if(t&&n&&i){var o=this._renderContext.$root.querySelector('.lakex-viewer-grid-cell[data-field-uuid="'.concat(null==r?void 0:r.fieldId,'"][data-record-uuid="').concat(null==r?void 0:r.recordId,'"]'));o&&this._modalService.open(this._modalId,{position:{origin:o,placement:"top"},initialState:{fieldId:null==r?void 0:r.fieldId,recordId:null==r?void 0:r.recordId}})}else this._modalService.close(this._modalId)}}},{key:"init",value:function(){var e,t=this;if(!this.isReadonly&&this.isAiWritingEnable&&this._selectionService){var n=this._selectionService.onChange((function(){t.showAutofill()})),r=null==(e=this._gridCellEditService)?void 0:e.onEditingChange((function(e){e.editing?t._modalService.close(t._modalId):t.showAutofill()}));n&&this._toDestroyCollection.push(n),r&&this._toDestroyCollection.push(r)}}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"getConfigComponent",value:function(){return z1t}},{key:"getColConfigNameComponent",value:function(){return Y1t}},{key:"registerContextMenu",value:function(e){var t,n=this;e.registerItem({key:"autofillField",name:wx("重新填写本列内容"),icon:function(){return u.a.createElement(kn.default,{width:16,height:16})},hotkey:"",visible:function(e){var t,r=e.from,i=e.fieldId,o=null==(t=n._aiWritingService.getAiWritingConfig(i||""))?void 0:t.open;return!n.isReadonly&&r===Oat.HEADER&&n.isAiWritingEnable&&!!o},onClick:(t=rs(ps.mark((function e(t){var r,i,o;return ps.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.initialState,i=t.position,o=r.fieldId,i){e.next=4;break}return e.abrupt("return");case 4:return n._modalService.close("context-menu-modal"),e.next=7,n._aiWritingService.startAiWriting(o||"");case 7:Pn.a.success(wx("正在填写中..."));case 8:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{key:"registerModal",value:function(e){e.registerItem({id:"ai-writing-config-modal",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:H1t}),e.registerItem({id:this._modalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:G1t})}},{key:"registerExpandRecord",value:function(e){e.registerRecordTooltip($1t)}}],[{key:"pluginModule",value:function(){return ch().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{enable:{type:"boolean",description:"是否允许使用文本 AI 助手"}}}),e.registerDefaultValue({"aiWriting.enable":!1})}}])}();J1t.pluginName="workbench-ai-writing",X1t([Yf(z9e)],J1t.prototype,"_modalService",2),X1t([Yf(hD)],J1t.prototype,"_abilityService",2),X1t([Yf(RC)],J1t.prototype,"_configurationService",2),X1t([Yf(TJt)],J1t.prototype,"_aiWritingService",2),X1t([Yf(XA)],J1t.prototype,"_readService",2),X1t([Yf(Vze)],J1t.prototype,"_renderContext",2),X1t([Yf(yot),If()],J1t.prototype,"_selectionService",2),X1t([Yf(F_t),If()],J1t.prototype,"_gridCellEditService",2),J1t=X1t([Gf({contrib:[Z8e,H9e,rmt,VSt,zSt,gOt]})],J1t);var Z1t=function(){return ls((function e(t,n){us(this,e),this._ref=u.a.createRef(),this.el=t,this.options=n,this.render()}),[{key:"setContent",value:function(e){var t;(null==(t=this._ref)?void 0:t.current)&&this._ref.current.setValue(e.abstract||e.source)}},{key:"getDefault",value:function(){return{format:"plain",source:""}}},{key:"getContent",value:function(){var e,t;return{format:"plain",source:(null==(t=null==(e=this._ref)?void 0:e.current)?void 0:t.getValue())||""}}},{key:"onFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){};this._focusCallback=e}},{key:"render",value:function(){var e=this;s.a.render(u.a.createElement($Ye,{ref:this._ref,allowEnter:!0,autoFocus:!!this.options.autoFocus,rows:4,defaultValue:this.options.defaultValue,autoComplete:"off",placeholder:this.options.placeholder,onChange:function(){var t,n;null==(n=(t=e.options).onChange)||n.call(t)},onFocus:function(){var t;null==(t=e._focusCallback)||t.call(e,!0)},onBlur:function(){var t;null==(t=e._focusCallback)||t.call(e,!1)}}),this.el,(function(){var t,n;null==(n=(t=e.options).onLoad)||n.call(t,e)}))}},{key:"destroy",value:function(){s.a.unmountComponentAtNode(this.el)}}])}(),Q1t=function(){return ls((function e(t,n){us(this,e),this.el=t,this.options=n,this.render()}),[{key:"setContent",value:function(e){this.el&&(this.el.innerText=e.abstract||e.source)}},{key:"render",value:function(){var e=this;s.a.render(u.a.createElement(u.a.Fragment,null,this.options.defaultValue),this.el,(function(){var t,n;null==(n=(t=e.options).onLoad)||n.call(t,e)}))}},{key:"destroy",value:function(){s.a.unmountComponentAtNode(this.el)}}])}();function e2t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return t2t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t2t(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function t2t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n2t=Object.defineProperty,r2t=Object.getOwnPropertyDescriptor,i2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?r2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&n2t(t,n,o),o},o2t=function(){return ls((function e(){us(this,e),this._editor=new Map,this._viewer=new Map}),[{key:"init",value:function(){var e,t=e2t(this.contentEditorProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value.registerContentEditor();this._editor.has(n.format)||this._editor.set(n.format,n.Editor)}}catch(e){t.e(e)}finally{t.f()}var r,i=e2t(this.contentViewerProvider.getContributions());try{for(i.s();!(r=i.n()).done;){var o=r.value.registerContentViewer();this._viewer.has(o.format)||this._viewer.set(o.format,o.Viewer)}}catch(e){i.e(e)}finally{i.f()}}},{key:"getEditor",value:function(e){return this._editor.get(e)}},{key:"getViewer",value:function(e){return this._viewer.get(e)}}])}();i2t([gh(pKt)],o2t.prototype,"contentEditorProvider",2),i2t([gh(vKt)],o2t.prototype,"contentViewerProvider",2),o2t=i2t([Gf()],o2t);var a2t=Object.defineProperty,l2t=Object.getOwnPropertyDescriptor,u2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?l2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&a2t(t,n,o),o},c2t=function(){return ls((function e(){us(this,e)}),[{key:"create",value:function(e,t){var n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getEditor(n);return t.currentUser=this._contextService.currentUser,new r(e,t)}}])}();u2t([Yf(eM)],c2t.prototype,"_contextService",2),u2t([Yf(o2t)],c2t.prototype,"_contentRegistry",2),u2t([Yf(RC)],c2t.prototype,"_configuration",2),c2t=u2t([Gf({token:bKt})],c2t);var s2t=Object.defineProperty,d2t=Object.getOwnPropertyDescriptor,f2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?d2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&s2t(t,n,o),o},h2t=function(){return ls((function e(){us(this,e)}),[{key:"create",value:function(e,t){var n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getViewer(n);if(r)return new r(e,t)}}])}();f2t([Yf(o2t)],h2t.prototype,"_contentRegistry",2),f2t([Yf(RC)],h2t.prototype,"_configuration",2),h2t=f2t([Gf({token:wKt})],h2t);var p2t=Object.defineProperty,v2t=Object.getOwnPropertyDescriptor,g2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?v2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&p2t(t,n,o),o},m2t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){this._contentRegistry.init()}},{key:"registerContentEditor",value:function(){return{format:"plain",Editor:Z1t}}},{key:"registerContentViewer",value:function(){return{format:"plain",Viewer:Q1t}}}],[{key:"pluginModule",value:function(){return ch().contribution(pKt).contribution(vKt).register(c2t).register(h2t).register(o2t).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"content",type:"object",properties:{defaultFormat:{type:"string"},disableDatasource:{type:"boolean",description:"禁用 datasource"}}}),e.registerDefaultValue({"content.defaultFormat":"plain","content.disableDatasource":!1})}}])}();m2t.pluginName="workbench-content",g2t([Yf(o2t)],m2t.prototype,"_contentRegistry",2),m2t=g2t([Gf({contrib:[Z8e,pKt,vKt]})],m2t);var y2t=function(e){var t=e.recordId,n=e.isReadonly,r=e.isNewRecord,i=nY(Object(l.useState)(!1),2),o=i[0],a=i[1],c=Object(l.useRef)(null),s=Object(l.useRef)(!1),d=Object(l.useRef)(!1),f=Object(l.useRef)(),h=Object(l.useRef)(),p=SWe(RC),v=SWe(bKt,{optional:!0}),g=SWe(wKt,{optional:!0}),m=SWe(yKt),y=SWe(Lj),b=SWe(XA),w=SWe(mKt),_=C$e((function(){var e,n=null==(e=f.current)?void 0:e.getContent();d.current=!1,n&&(null==y||y.execCommand("updateContent",{recordId:t,content:n}))}),1e3),x=Object(l.useCallback)((function(e){var t;null==(t=f.current)||t.setContent(e),setTimeout((function(){s.current=!0}),100)}),[]),k=Object(l.useCallback)((function(e){s.current&&a(!!e)}),[]);Object(l.useEffect)((function(){var e,n,i=b.getTable();(null==p?void 0:p.getValue("content.disableDatasource"))||r||((null==(e=m.getContent(t,"record"))?void 0:e.toJSON())||null==(n=null==w?void 0:w.handleGet)||n.call(w,t,i.get("uuid")).then((function(e){if(e){var n=e;m.setContentWithSlient(t,"record",n),h.current?h.current.setContent(n):x(e)}})))}),[t]),Object(l.useEffect)((function(){var e;if(c.current){if(n){var i=null==g?void 0:g.create(c.current,{defaultValue:(null==(e=m.getContent(t,"record"))?void 0:e.get("source"))||""});if(!i)return;return void(h.current=i)}f.current=null==v?void 0:v.create(c.current,{onLoad:function(){var e,n,i;null==(e=f.current)||e.onFocus((function(e){k(e)}));try{var o=null==(n=m.getContent(t,"record"))?void 0:n.toJSON();if(!o&&r&&(o=null==(i=f.current)?void 0:i.getDefault()),!o)return;x(o)}catch(e){console.error("set text editor content error",e)}},onChange:function(){_(),d.current=!0}})}return function(){var e;if(f.current&&d.current){var n=null==(e=f.current)?void 0:e.getContent();n&&(null==y||y.execCommand("updateContent",{recordId:t,content:n})),f.current.destroy()}}}),[]);var C=o?"lakex-table-record-desc-active":"lakex-table-record-desc-noactive";return u.a.createElement("div",{className:"lakex-table-record-desc ".concat(C)},u.a.createElement("div",{ref:c}))},b2t=Object.defineProperty,w2t=Object.getOwnPropertyDescriptor,_2t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"registerExpandRecord",value:function(e){e.registerRecordProvider({RenderComponent:y2t})}}],[{key:"pluginModule",value:function(){return ch().register(this)}}])}();function x2t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k2t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x2t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x2t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C2t(e){return React.createElement("div",k2t(k2t({},e),{},{className:"lakex-table-loading-content"}),React.createElement("div",{className:"lakex-table-loading-content-box"},React.createElement(Nn.a,null),React.createElement("p",null,wx("数据处理比较耗时，请耐心等待..."))))}function S2t(e,t,n){return t=Ch(t),kh(e,O2t()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function O2t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O2t=function(){return!!e})()}_2t.pluginName="workbench-record-desc",_2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?w2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&b2t(t,n,o),o}([Gf({contrib:[Z8e,gOt]})],_2t);var E2t=Object.defineProperty,I2t=Object.getOwnPropertyDescriptor,P2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?I2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&E2t(t,n,o),o},M2t=function(e){function t(){return us(this,t),S2t(this,t,arguments)}return Oh(t,e),ls(t,[{key:"isExist",value:function(){return!!this._id}},{key:"createModal",value:function(){this._id||(this._id=Cx(6),this._container=document.createElement("div"),this._container.id="lakex-table-loading-container",document.body.appendChild(this._container),s.a.render(u.a.createElement(C2t,{id:this._id}),this._container))}},{key:"closeModal",value:function(){var e,t,n;null==(n=null==(t=null==(e=this._container)?void 0:e.parentNode)?void 0:t.removeChild)||n.call(t,this._container),this._id=null}},{key:"destroy",value:function(){this.closeModal()}}])}(HC);P2t([Df()],M2t.prototype,"destroy",1),M2t=P2t([Gf()],M2t);var R2t=Object.defineProperty,A2t=Object.getOwnPropertyDescriptor,j2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?A2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&R2t(t,n,o),o},D2t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){var e=this;this._syncQueue.onSyncChange((function(t){t.status===jJt.RUNNING?(clearTimeout(e._timerId),e._timerId=setTimeout((function(){e._loadingModalService.createModal()}),5e3)):(clearTimeout(e._timerId),e._loadingModalService.isExist()&&(e._loadingModalService.closeModal(),t.status===jJt.SUCCESS&&Pn.a.success(wx("已完成"))))}))}},{key:"destroy",value:function(){clearTimeout(this._timerId)}}],[{key:"pluginModule",value:function(){return ch().register(this).register(M2t)}}])}();function T2t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F2t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F2t(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function F2t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}D2t.pluginName="workbench-server",j2t([Yf(AJt)],D2t.prototype,"_syncQueue",2),j2t([Yf(M2t)],D2t.prototype,"_loadingModalService",2),D2t=j2t([Gf({contrib:[Z8e]})],D2t);var N2t="$label-back-color:",L2t=[["green-1","yellow-1","blue-1","grey-3","red-1"],["brown-1","cyan-1","purple-1","pea-green-1","sea-blue-1"],["red-3","yellow-3","pea-green-3","green-3","cyan-3"],["blue-3","sea-blue-3","purple-3","brown-3","grey-6"]];var B2t=function(e){var t=function(e){if(e.startsWith(N2t)){var t=nY(e.split(N2t),2);t[0];var n=nY(t[1].split("-"),2),r=n[0],i=n[1],o=[Number(r),Number(i)];return[o[0],o[1]]}return[0,0]}(e),n=nY(t,2),r=n[0],i=n[1];return L2t[r][i]||"bg-primary"},V2t=function(){return ls((function e(){us(this,e)}),null,[{key:"buildText",value:function(e,t){var n,r=[],i=T2t(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.get("field_uuid"),l=o.get("field"),u=null==l?void 0:l.get("type"),c="<span>".concat(null==l?void 0:l.get("name"),"</span>"),s=this.toLake(u,t[a].value,t[a].keyValue,t[a].formatValue,l,t[a].uuid);r.push("".concat(c,": ").concat(s))}}catch(e){i.e(e)}finally{i.f()}return'<!doctype lake>\n<meta name="doc-version" content="1" />\n<meta name="viewport" content="adapt" />\n<meta name="typography" content="classic" />\n<meta name="paragraphSpacing" content="relax" /><p>'+r.join("<br />")+"</p>"}},{key:"toLake",value:function(e,t,n,r,i,o){switch(e){case"text":return this.textToLake(t);case"select":return this.selectToLake(t,i);case"multiSelect":return this.multiSelectToLake(t,i);case"date":return this.dateToLake(n,o);case"checkbox":return this.checkboxToLake(t);case"number":return this.numberToLake(t);case"link":return this.linkToLake(t);case"image":return this.imageToLake(t);case"file":return this.fileToLake(t);case"mention":return this.mentionToLake(t);case"rate":return this.rateToLake(t);case"email":return this.emailToLake(t);case"phone":return this.phoneToLake(t);case"progress":return this.progressToLake(t);default:return this.textToLake(r)}}},{key:"textToLake",value:function(e){return e?"<span>".concat(e,"</span>"):""}},{key:"selectToLake",value:function(e,t){if(!e)return"";var n=t.get("color"),r=xC(t.get("options"),(function(t){return t.get("uuid")===e}));if(!n&&r)return"<span>".concat(r.get("name"),"</span>");if(!r)return"";var i={label:r.get("name"),colorIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith(N2t)&&(e=B2t(e)),e.includes("red")?0:e.includes("yellow")||e.includes("orange")?1:e.includes("green")?2:e.includes("blue")||e.includes("purple")?4:3}(r.get("color")),id:r.get("uuid")};return'<card type="inline" name="label" value="data:'.concat(encodeURIComponent(JSON.stringify(i)),'"></card>')}},{key:"multiSelectToLake",value:function(e,t){var n=this;return e&&0!==e.length?e.map((function(e){return n.selectToLake(e,t)})).join(""):""}},{key:"numberToLake",value:function(e){return null==e?"":"<span>".concat(e,"</span>")}},{key:"dateToLake",value:function(e,t){if(!e)return"";var n={date:e,id:(null==t?void 0:t.substring(0,5))||Cx(5)};return'<card type="inline" name="dateCard" value="data:'.concat(encodeURIComponent(JSON.stringify(n)),'"></card>')}},{key:"mentionToLake",value:function(e){return e&&0!==e.length?e.map((function(e){var t={login:e.login,name:e.name,userid:e.uid,id:e.uuid};return'<card type="inline" name="mention" value="data:'.concat(encodeURIComponent(JSON.stringify(t)),'"></card>')})).join(""):""}},{key:"imageToLake",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&0!==e.length?e.map((function(e){var n=t.width||100,r=Math.floor(e.height/e.width*n),i={src:e.src,originalType:"binary",width:n,height:r,linkTarget:"_blank",originWidth:e.width,originHeight:e.height,ratio:1,status:"done",style:"none",showTitle:!1,title:"",rotation:0,crop:[0,0,1,1],id:e.uid};return'<card type="inline" name="image" value="data:'.concat(encodeURIComponent(JSON.stringify(i)),'"></card>')})).join(""):""}},{key:"fileToLake",value:function(e){return e&&0!==e.length?e.map((function(e){var t={src:e.src,name:e.name,size:e.size,ext:e.mime,source:"",status:"done",download:!0,__spacing:"both",mode:"title",id:e.uid,margin:{top:!0,bottom:!0}};return'<card type="inline" name="file" value="data:'.concat(encodeURIComponent(JSON.stringify(t)),'"></card>')})).join(""):""}},{key:"checkboxToLake",value:function(e){return"<span>".concat(e?"是":"否","</span>")}},{key:"linkToLake",value:function(e){return e?'<a href="'.concat(e.src,'" target="_blank"><span>').concat(e.name,"</span></a>"):""}},{key:"emailToLake",value:function(e){return e?"<span>".concat(e,"</span>"):""}},{key:"phoneToLake",value:function(e){return e?"<span>".concat(e,"</span>"):""}},{key:"rateToLake",value:function(e){if(!e)return"";for(var t="",n=0;n<e;n++)t+="⭐️";return"<span>".concat(t,"</span>")}},{key:"progressToLake",value:function(e){return e?"<span>".concat(e,"%</span>"):""}}])}();function z2t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return H2t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H2t(e,t):void 0}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function H2t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W2t(e,t,n){return t=Ch(t),kh(e,U2t()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function U2t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U2t=function(){return!!e})()}var G2t=Object.defineProperty,Y2t=Object.getOwnPropertyDescriptor,$2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?Y2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&G2t(t,n,o),o},q2t=function(e){function t(){var e;return us(this,t),(e=W2t(this,t,arguments))._onCreateDima=e._register(new dS),e.onCreateDima=e._onCreateDima.event,e._dimaFieldName=wx("dima链接"),e}return Oh(t,e),ls(t,[{key:"emitCreateDima",value:function(e){var t,n=this._readService.getViewFields(),r={},i=z2t(this._readService.getRecordCells(e));try{for(i.s();!(t=i.n()).done;){var o=t.value;r[o.fieldId]=o}}catch(e){i.e(e)}finally{i.f()}var a=r[n.get(0).get("field_uuid")],l=V2t.buildText(n,r),u={title:a.formatValue,detail:l,recordId:e};this._onCreateDima.emit(u)}},{key:"syncRecord",value:function(e,t,n){var r=this,i=this._readService.getAllFields(),o=xC(i,(function(e){return e.get("name")===r._dimaFieldName}));if(o)if((null==o?void 0:o.get("type"))===xO.LINK)this._setCell(o.get("uuid"),n,e,t);else{var a=xC(i,(function(e){return e.get("name").startsWith(r._dimaFieldName)&&e.get("type")===xO.LINK}));if(a)this._setCell(a.get("uuid"),n,e,t);else{var l=Cx(32);this._commandService.execCommand("addField",{field:{uuid:l,name:this._dimaFieldName+"-"+Cx(6),type:xO.LINK}}),setTimeout((function(){r._setCell(l,n,e,t)}),2e3)}}else{var u=Cx(32);this._commandService.execCommand("addField",{field:{uuid:u,name:this._dimaFieldName,type:xO.LINK}}),setTimeout((function(){r._setCell(u,n,e,t)}),2e3)}}},{key:"_setCell",value:function(e,t,n,r){this._commandService.execCommand("setCell",{fieldId:e,fieldType:xO.LINK,recordId:t,uuid:Cx(32),value:{name:"[dima]".concat(n),src:r}})}}])}(HC);$2t([Yf(XA)],q2t.prototype,"_readService",2),$2t([Yf(Lj)],q2t.prototype,"_commandService",2),q2t=$2t([Gf({token:AKt})],q2t);var K2t=function(){return u.a.createElement("span",null,u.a.createElement(Sn.default,null))},X2t=Object.defineProperty,J2t=Object.getOwnPropertyDescriptor,Z2t=function(e,t,n,r){for(var i,o=r>1?void 0:r?J2t(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&X2t(t,n,o),o},Q2t=function(){return ls((function e(){us(this,e)}),[{key:"init",value:function(){}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"createDima",name:wx("新建 Dima"),icon:K2t,visible:function(e){var n=e.from;return!!t._configurationService.getValue("dima.enable")&&(n===Oat.CELL||n===Oat.CARD_RECORD||n===Oat.KANBAN_RECORD||n===Oat.CALENDAR_RECORD)},onClick:function(e){var n=e.initialState;t._dimaService.emitCreateDima(n.recordId),t._modalService.close("context-menu-modal")}})}}],[{key:"pluginModule",value:function(){return ch().register(q2t).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"dima",type:"object",properties:{enable:{type:"boolean"}}}),e.registerDefaultValue({"dima.enable":!1})}}])}();Q2t.pluginName="workbench-dima",Z2t([Yf(z9e)],Q2t.prototype,"_modalService",2),Z2t([Yf(AKt)],Q2t.prototype,"_dimaService",2),Z2t([Yf(RC)],Q2t.prototype,"_configurationService",2);var e5t=[F1t,V1t,J1t,m2t,_2t,D2t,Q2t=Z2t([Gf({contrib:[Z8e,rmt]})],Q2t)],t5t=function(e){var t=e.webProxy;return{token:TMt,useValue:{registerFormManage:function(){return{enableForm:function(e,n){return rs(ps.mark((function r(){var i,o;return ps.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o={scope:0,status:0,target_id:e,target_type:"Skythings.View",type:"form"},"create"!==n){r.next=7;break}return r.next=4,t.shares.create(o);case 4:i=r.sent,r.next=10;break;case 7:return r.next=9,t.shares.update(o);case 9:i=r.sent;case 10:return r.abrupt("return",{src:"/forms/share/".concat(i.token)});case 11:case"end":return r.stop()}}),r)})))()}}}}}},n5t=function(e){var t=e.webProxy;return[t5t({webProxy:t})]},r5t=function(e){e.docId,e.docType;var t=e.webProxy,n=e.webSdk,r=e.settings;return{settings:Object.assign({},LKt({webSdk:n}),r),webSdk:n,webProxy:t}},i5t=[];const o5t=PQt.filter((function(e){return!i5t.includes(e.pluginName)}));var a5t=[];const l5t=n1t.filter((function(e){return!a5t.includes(e.pluginName)}));var u5t=["workbench-full-width","workbench-full-screen","workbench-field-group"];const c5t=e5t.filter((function(e){return!u5t.includes(e.pluginName)})),s5t=[],d5t=[],f5t=[];function h5t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p5t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h5t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h5t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v5t=function(e){var t,n,r,i=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),o=null==(t=e.data)?void 0:t.records,a=cjt(p5t(p5t(p5t({},e),i),{},{workbenchPlugins:c5t,renderPlugins:l5t,kernelPlugins:o5t,workbenchContribs:[].concat(ts(s5t),ts(n5t({webProxy:e.webProxy})),ts(e.workbenchContribs||[])),renderContribs:[].concat(ts(d5t),ts(A1t(i.settings)),ts(e.renderContribs||[])),kernelContribs:[].concat(ts(f5t),ts(t0t({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),ts(e.kernelContribs||[])),onRendered:function(){e.onSyncChange&&a.getService(AJt).onSyncChange(e.onSyncChange)},onCollabUsersChange:e.onCollabUsersChange,onDataLoaded:(r=rs(ps.mark((function t(n){var r,l,u,c,s,d,f,h;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:i.settings["record.maxCount"],offset:0,sheetId:a.tableId},{ignoreGlobalMessage:!0});case 6:(null==(s=t.sent)?void 0:s.users)&&a.setUsers(s.users),(null==s?void 0:s.records)&&(a.setRecords(s.records),d=a.getService(mKt),f=a.getService(yKt),h=s.records.map((function(e){return e.uuid})),d&&(null==(r=null==d?void 0:d.handleGet)||r.call(d,h,a.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=nY(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(l=e.onError)||l.call(e,t.t0),null==(u=e.onRecordLoaded)||u.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return r.apply(this,arguments)})}));return null==(n=NKt.themeManager)||n.onChange((function(e){var t;try{null==(t=a.themeService)||t.setTheme(e)}catch(e){}})),a},g5t=["kernel-history","kernel-collaboration","kernel-add-record","kernel-add-field"];const m5t=PQt.filter((function(e){return!g5t.includes(e.pluginName)}));var y5t=["render-history","render-refresh","render-upload"];const b5t=n1t.filter((function(e){return!y5t.includes(e.pluginName)}));var w5t=["workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"];const _5t=e5t.filter((function(e){return!w5t.includes(e.pluginName)}));var x5t={"view.maxCount":1e3,"ability.table.create":!1,"ability.table.delete":!1,"ability.table.read":!0,"ability.table.update":!1};function k5t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C5t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k5t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S5t=function(e){var t,n,r,i=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),o=C5t(C5t({},x5t),i.settings),a=null==(t=e.data)?void 0:t.records,l=function(e){var t,n,r=JAt({webSdk:e.webSdk,settings:Object.assign({},pjt,e.settings||{})});try{n=set.create(yjt(yjt(yjt({},e),r),{},{workbenchPlugins:[].concat(Q_(gjt),Q_(e.workbenchPlugins||[])),renderPlugins:[].concat(Q_(hjt),Q_(e.renderPlugins||[])),kernelPlugins:[].concat(Q_(djt),Q_(e.kernelPlugins||[])),workbenchContribs:Q_(e.workbenchContribs||[]),renderContribs:Q_(e.renderContribs||[]),kernelContribs:Q_(e.kernelContribs||[])}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n}(C5t(C5t(C5t({},e),i),{},{settings:o,kernelPlugins:m5t,renderPlugins:b5t,workbenchPlugins:_5t,renderContribs:ts(A1t(i.settings)),kernelContribs:ts(t0t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:e.currentUser})),onDataLoaded:(r=rs(ps.mark((function t(n){var r,o,u,c,s,d,f,h;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:i.settings["record.maxCount"],offset:0,sheetId:l.tableId},{ignoreGlobalMessage:!0});case 6:(null==(s=t.sent)?void 0:s.users)&&l.setUsers(s.users),(null==s?void 0:s.records)&&(l.setRecords(s.records),d=l.getService(mKt),f=l.getService(yKt),h=s.records.map((function(e){return e.uuid})),d&&(null==(r=null==d?void 0:d.handleGet)||r.call(d,h,l.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=nY(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(o=e.onError)||o.call(e,t.t0),null==(u=e.onRecordLoaded)||u.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return r.apply(this,arguments)})}));return null==(n=NKt.themeManager)||n.onChange((function(e){var t;try{null==(t=l.themeService)||t.setTheme(e)}catch(e){}})),l},O5t=["kernel-statistics","kernel-selection","kernel-context-menu","kernel-history","kernel-collaboration","kernel-clipboard","kernel-add-record","kernel-add-field","kernel-viewer-form"];const E5t=PQt.filter((function(e){return!O5t.includes(e.pluginName)}));var I5t=["render-hotkey","render-selection","render-statistics","render-context-menu","render-history","render-group","render-clipboard","render-refresh","render-upload"];const P5t=n1t.filter((function(e){return!I5t.includes(e.pluginName)}));var M5t=["workbench-hotkey","workbench-context-menu","workbench-statistics","workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"];const R5t=e5t.filter((function(e){return!M5t.includes(e.pluginName)})),A5t=[],j5t=[],D5t=[];function T5t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F5t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T5t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N5t=function(e){var t,n,r=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:F5t(F5t({},e.settings),{},{"ability.table.update":!1,"ability.table.delete":!1,"ability.record.create":!1,"ability.record.update":!1,"ability.field.create":!1,"toolbar.mode":l9e.LITE,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"],"viewerManage.type":"menu","modal.mode":V9e.DRAWER,"render.mode":Eze.MOBILE,"viewerGrid.stickyColNum":0,"expandRecord.modalDrawerModeViews":null})}),i=cjt(F5t(F5t(F5t({},e),r),{},{workbenchPlugins:R5t,renderPlugins:P5t,kernelPlugins:E5t,workbenchContribs:[].concat(ts(A5t),ts(n5t({webProxy:e.webProxy})),ts(e.workbenchContribs||[])),renderContribs:[].concat(ts(j5t),ts(A1t(r.settings)),ts(e.renderContribs||[])),kernelContribs:[].concat(ts(D5t),ts(t0t({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),ts(e.kernelContribs||[])),onDataLoaded:(n=rs(ps.mark((function t(n){var o,a,l,u,c,s,d,f;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("loadedData"!==n){t.next=15;break}return t.prev=1,t.next=4,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:r.settings["record.maxCount"],offset:0,sheetId:i.tableId},{ignoreGlobalMessage:!0});case 4:(null==(c=t.sent)?void 0:c.users)&&i.setUsers(c.users),(null==c?void 0:c.records)&&(i.setRecords(c.records),s=i.getService(mKt),d=i.getService(yKt),f=c.records.map((function(e){return e.uuid})),s&&(null==(o=null==s?void 0:s.handleGet)||o.call(s,f,i.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=nY(e,2),n=t[0],r=t[1];r&&d.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),null==(a=e.onError)||a.call(e,t.t0),null==(l=e.onRecordLoaded)||l.call(e);case 13:t.next=16;break;case 15:"loadedRecords"===n&&(null==(u=e.onRecordLoaded)||u.call(e));case 16:case"end":return t.stop()}}),t,null,[[1,9]])}))),function(e){return n.apply(this,arguments)})}));return null==(t=NKt.themeManager)||t.onChange((function(e){var t;try{null==(t=i.themeService)||t.setTheme(e)}catch(e){}})),i},L5t=ts(dit.filter((function(e){return["kernel-field-text","kernel-field-select","kernel-field-multi-select","kernel-field-number","kernel-field-mention","kernel-field-date","kernel-field-checkbox","kernel-field-image","kernel-field-file","kernel-field-link","kernel-field-email","kernel-field-phone","kernel-field-title","kernel-field-rate","kernel-field-progress","kernel-process","kernel-user","kernel-viewer-form"].includes(e.pluginName)}))),B5t=[].concat(ts(BSt.filter((function(e){return["render-field-text","render-field-select","render-field-multi-select","render-field-number","render-field-mention","render-field-date","render-field-checkbox","render-field-image","render-field-file","render-field-link","render-field-email","render-field-phone","render-field-title","render-field-rate","render-field-progress","render-opener"].includes(e.pluginName)}))),[Zjt,G0t]),V5t=ts(XAt.filter((function(e){return["workbench-viewer-form-manage"].includes(e.pluginName)}))),z5t=function(){var e,t;return{"render.noRecord":!0,"upload.image.url":"/api/tables/upload?type=image&token=".concat(null==(e=jKt("share"))?void 0:e.token),"upload.image.quickUrl":"","upload.file.url":"/api/tables/upload?type=attachment&token=".concat(null==(t=jKt("share"))?void 0:t.token),"upload.file.quickUrl":""}},H5t=function(e){var t=e.webProxy;return{token:Tjt,useValue:{registerFormPreview:function(){return{submitForm:function(e){return rs(ps.mark((function n(){var r;return ps.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.tables.submitRecord({token:null==(r=jKt("share"))?void 0:r.token,type:"FORM",data:[{data:JSON.stringify(e)}]},{ignoreGlobalMessage:!0});case 3:Pn.a.success(wx("表单提交成功"),.8),Pn.a.destroy(),window.location.href+="/success",n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0),Pn.a.error(wx("表单提交失败，请稍后重试"));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}}}}};function W5t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U5t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W5t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G5t=function(e){var t,n=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:U5t(U5t(U5t({},z5t()),e.settings),{},{"ability.table.update":!1,"ability.table.delete":!1})}),r=set.create(U5t(U5t(U5t({},e),n),{},{renderPlugins:B5t,kernelPlugins:L5t,workbenchPlugins:V5t,renderContribs:[].concat(ts(A1t(n.settings)),[H5t({webProxy:e.webProxy})]),kernelContribs:ts(t0t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:NKt.me}))}));return null==(t=NKt.themeManager)||t.onChange((function(e){var t;try{null==(t=r.themeService)||t.setTheme(e)}catch(e){}})),r},Y5t=["kernel-viewer-form"];const $5t=PQt.filter((function(e){return!Y5t.includes(e.pluginName)}));var q5t=["render-viewer-form"];const K5t=n1t.filter((function(e){return!q5t.includes(e.pluginName)}));var X5t=["workbench-field-group","workbench-viewer-form","workbench-viewer-form-manage"];const J5t=e5t.filter((function(e){return!X5t.includes(e.pluginName)})),Z5t=[],Q5t=[],e3t=[];function t3t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n3t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t3t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t3t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r3t=function(e){var t,n,r,i=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:n3t({"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search","chart-fullscreen","|","chart-add","add-record"],"toolbar.mode":l9e.LITE,"modal.mode":V9e.MODAL,"viewerManage.type":"menu","viewerManage.viewTypes":[WO.GRID,WO.CARD,WO.CALENDAR,WO.KANBAN],"expandRecord.modalDrawerModeViews":null,"render.autoActive":!1,"render.deferMode":Ize.DISABLE,"colorTheme.toolbarBackground":"white","colorTheme.viewBackground":"white","colorTheme.gridFooterBackground":"white","colorDarkTheme.toolbarBackground":"grey-1","colorDarkTheme.viewBackground":"grey-1","colorDarkTheme.gridFooterBackground":"grey-1"},e.settings)}),o=null==(t=e.data)?void 0:t.records,a=cjt(n3t(n3t(n3t({},e),i),{},{renderPlugins:K5t,kernelPlugins:$5t,workbenchPlugins:J5t,workbenchContribs:[].concat(ts(Z5t),ts(n5t({webProxy:e.webProxy})),ts(e.workbenchContribs||[])),renderContribs:[].concat(ts(Q5t),ts(A1t(i.settings)),ts(e.renderContribs||[])),kernelContribs:[].concat(ts(e3t),ts(t0t({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),ts(e.kernelContribs||[])),onDataLoaded:(r=rs(ps.mark((function t(n){var r,l,u,c,s,d,f,h;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:i.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id},{ignoreGlobalMessage:!0});case 6:(null==(s=t.sent)?void 0:s.users)&&a.setUsers(s.users),(null==s?void 0:s.records)&&(a.setRecords(s.records),d=a.getService(mKt),f=a.getService(yKt),h=s.records.map((function(e){return e.uuid})),d&&(null==(r=null==d?void 0:d.handleGet)||r.call(d,h,a.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=nY(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(l=e.onError)||l.call(e,t.t0),null==(u=e.onRecordLoaded)||u.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return r.apply(this,arguments)})}));return null==(n=NKt.themeManager)||n.onChange((function(e){var t;try{null==(t=a.themeService)||t.setTheme(e)}catch(e){}})),a},i3t=["kernel-viewer-form"];const o3t=PQt.filter((function(e){return!i3t.includes(e.pluginName)}));var a3t=["render-viewer-form"];const l3t=n1t.filter((function(e){return!a3t.includes(e.pluginName)}));var u3t=["workbench-field-group","workbench-viewer-form","workbench-viewer-form-manage"];const c3t=e5t.filter((function(e){return!u3t.includes(e.pluginName)})),s3t=[],d3t=[],f3t=[];function h3t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p3t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h3t(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h3t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v3t=function(e){var t,n,r,i=r5t({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:p3t(p3t({},e.settings),{},{"ability.table.create":!1,"ability.table.delete":!1,"ability.table.read":!0,"ability.table.update":!1,"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","chart-fullscreen"],"toolbar.mode":l9e.LITE,"modal.mode":V9e.DRAWER,"render.mode":Eze.MOBILE,"viewerManage.type":"menu","viewerManage.viewTypes":[WO.GRID,WO.CARD,WO.CALENDAR,WO.KANBAN],"expandRecord.modalDrawerModeViews":null,"render.autoActive":!1,"render.deferMode":Ize.DISABLE,"viewerGrid.stickyColNum":0,"colorTheme.toolbarBackground":"white","colorTheme.viewBackground":"white","colorTheme.gridFooterBackground":"white","colorDarkTheme.toolbarBackground":"grey-1","colorDarkTheme.viewBackground":"grey-1","colorDarkTheme.gridFooterBackground":"grey-1"})}),o=null==(t=e.data)?void 0:t.records,a=cjt(p3t(p3t(p3t({},e),i),{},{renderPlugins:l3t,kernelPlugins:o3t,workbenchPlugins:c3t,workbenchContribs:[].concat(ts(s3t),ts(n5t({webProxy:e.webProxy})),ts(e.workbenchContribs||[])),renderContribs:[].concat(ts(d3t),ts(A1t(i.settings)),ts(e.renderContribs||[])),kernelContribs:[].concat(ts(f3t),ts(t0t({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser})),ts(e.kernelContribs||[])),onDataLoaded:(r=rs(ps.mark((function t(n){var r,l,u,c,s,d,f,h;return ps.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=2;break}return t.abrupt("return",!1);case 2:if("loadedData"!==n){t.next=17;break}return t.prev=3,t.next=6,e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:i.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id},{ignoreGlobalMessage:!0});case 6:(null==(s=t.sent)?void 0:s.users)&&a.setUsers(s.users),(null==s?void 0:s.records)&&(a.setRecords(s.records),d=a.getService(mKt),f=a.getService(yKt),h=s.records.map((function(e){return e.uuid})),d&&(null==(r=null==d?void 0:d.handleGet)||r.call(d,h,a.tableId).then((function(e){Object.entries(e).forEach((function(e){var t=nY(e,2),n=t[0],r=t[1];r&&f.setContentWithSlient(n,"record",{html:r.html,source:r.source,format:r.format})}))})))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),null==(l=e.onError)||l.call(e,t.t0),null==(u=e.onRecordLoaded)||u.call(e);case 15:t.next=18;break;case 17:"loadedRecords"===n&&(null==(c=e.onRecordLoaded)||c.call(e));case 18:case"end":return t.stop()}}),t,null,[[3,11]])}))),function(e){return r.apply(this,arguments)})}));return null==(n=NKt.themeManager)||n.onChange((function(e){var t;try{null==(t=a.themeService)||t.setTheme(e)}catch(e){}})),a},g3t=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19[12356789])\d{8}(\+\d+)?$/,m3t=/^\+[1-9]\d{0,2}? \d{1,20}$/,y3t=/^\+86 /,b3t=function(e){return!!e&&(!y3t.test(e)&&(!!m3t.test(e)||!!g3t.test(e)))}}.call(this,n(92),n(4165)(e),n(158))},7968:function(e,t,n){}}]);